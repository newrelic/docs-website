
<h3>Notes</h3>
<p>This release of the Python agent is a bug fix release which improves our introductory support for instrumenting Tornado 4 applications. Full details about the status of our Tornado 4 support can be found on our <a href="https://docs.newrelic.com/docs/agents/python-agent/hosting-mechanisms/introductory-tornado-4-support">Introductory Tornado 4 support</a> page.</p>
<p>The agent can be installed using easy_install/pip/distribute via the <a href="https://pypi.python.org/pypi/newrelic">Python Package Index</a> or can be downloaded directly from our <a href="http://download.newrelic.com/python_agent/release/">download site</a>.</p>
<p>For a list of known issues with the Python agent, see <a href="https://docs.newrelic.com/docs/python/status-of-python-agent">Status of the Python agent</a>.</p>
<h3>New Feature</h3>
<ul>
  <li>
    <p>New attributes captured for Tornado 4 applications</p>
    <p>The following attributes are now captured for requests made to Tornado 4 applications:</p>
    <ul>
      <li><code>request.headers.accept</code></li>
      <li><code>request.headers.host</code></li>
      <li><code>port</code></li>
    </ul>
  </li>
</ul>
<h3>Bug Fixes</h3>
<ul>
  <li>
    <p>Potentially too many metrics created for <code>tornado.httpclient</code> function traces</p>
    <p>The <code>tornado.httpclient</code> instrumentation for Tornado 4 applications could cause a <a href="https://docs.newrelic.com/docs/agents/manage-apm-agents/troubleshooting/metric-grouping-issues">"metric grouping issue"</a> in the function traces it created, if it was used to make requests to a large number of unique URLs. To address this issue, the URL is no longer included in the name of the function trace.</p>
  </li>
  <li>
    <p>Transactions in Tornado 4 applications could be created with invalid agent settings</p>
    <p>In the prior release, if a transaction started before the agent had completed registration with the collector, the transaction could have invalid settings, which would result in various errors in the agent log, including an <code>AttributeError</code> when an external call was made during the transaction. These errors only happened at application startup until registration was complete. With this release, transactions cannot start with invalid settings.</p>
  </li>
  <li>
    <p>The <code>httplib2</code> instrumentation did not process the cross application tracing headers in the response</p>
    <p>Failing to process the response headers resulted in the inability to <a href="https://docs.newrelic.com/docs/apm/transactions/cross-application-traces/viewing-cross-application-traces">link to cross application tracing details in the Transaction Trace Details view</a>, as well as missing <code>ExternalTransaction</code> and <code>ExternalApp</code> metrics. Now, the <code>httplib2</code> instrumentation in the agent processes the cross application tracing headers correctly.</p>
  </li>
</ul>
<h3>Known Tornado 4 Limitations Addressed</h3>
<ul>
  <li>
    <p>Explain plans for queries made with psycopg2's "async mode" are disabled automatically</p>
    <p>Currently, the Python agent does not support explain plans for queries made in psycopg2's "async mode." In the prior release, it was necessary to add the configuration setting <code>transaction_tracer.explain_enabled = false</code> to disable explain plans, or else errors would occur during data harvest, potentially causing loss of data. With this release, the agent disables explain plans automatically when async mode is detected.</p>
  </li>
  <li>
    <p>Added support for Synthetics Transaction Traces</p>
    <p>Tornado 4 applications will now recognize incoming requests from Synthetics and <a href="https://docs.newrelic.com/docs/synthetics/new-relic-synthetics/using-monitors/collect-synthetic-transaction-traces">generate transaction traces for Synthetic requests</a>.</p>
  </li>
</ul>
<h3>Status of Tornado 4 Support</h3>
<p>A current list of known limitations can be found on our <a href="https://docs.newrelic.com/docs/agents/python-agent/hosting-mechanisms/introductory-tornado-4-support#h2-Known-limitations">Introductory Tornado 4 support</a> page. No new known limitations have been added since our introductory release (v2.62.0.47). In the next few releases, we plan to continue addressing these issues.</p>
