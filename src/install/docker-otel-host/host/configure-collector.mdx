---
headingText: Configure the OpenTelemetry Collector
componentType: default
---

In the below OpenTelemetry Collector config snippet:

- Update the `docker.deployment.name` value with a unique name to identify this Docker host in a New Relic account.
- Update the `endpoint` value if your Docker socket is at a different location.

Merge the receivers, processors, exporters, and service pipelines from the snippet below into your current configuration (typically located at `/etc/otelcol-contrib/config.yaml`).

```yaml
receivers:
  docker_stats:
    endpoint: unix:///var/run/docker.sock
    collection_interval: 10s
    timeout: 10s
    metrics:
      container.cpu.utilization:
        enabled: true
      container.cpu.usage.percpu:
        enabled: false
      container.network.io.usage.tx_dropped:
        enabled: true
      container.network.io.usage.rx_dropped:
        enabled: true

processors:
  resourcedetection:
    detectors: [system, docker]
    system:
      resource_attributes:
        host.name:
          enabled: true
        host.id:
          enabled: true
  resource/docker:
    attributes:
      - action: upsert
        key: docker.deployment.name
        value: <DEPLOYMENT_NAME>
  batch:
    timeout: 30s
    send_batch_size: 512
  transform/docker_metrics:
    metric_statements:
      - context: resource
        statements:
          - set(attributes["docker.display.name"], Concat(["host", attributes["docker.deployment.name"]], ":"))

exporters:
  otlphttp/newrelic:
    endpoint: ${env:NEWRELIC_OTLP_ENDPOINT}
    headers:
      api-key: ${env:NEWRELIC_LICENSE_KEY}

service:
  pipelines:
    metrics:
      receivers: [docker_stats]
      processors: [resourcedetection, resource/docker, batch, transform/docker_metrics]
      exporters: [otlphttp/newrelic]
```

Save the file and ensure the `otelcol-contrib` system user can read it.