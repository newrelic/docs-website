---
componentType: default
headingText: Enable MySQL query-level monitoring
---

Configure your integration to enable query-level monitoring in New Relic. By setting the appropriate parameters, you can capture detailed metrics on query performance, which allows you to identify and optimize slow or inefficient queries. For more information, refer [Query-Level monitoring](/docs/infrastructure/infrastructure-data/query-level-monitoring).


<Callout variant="important">
Query-level monitoring is supported only on MySQL version 8.0 and later.
</Callout>

1. Open the MySQL configuration file available at either `/etc/my.cnf.d/mysql-server.cnf` or `/etc/my.cnf`:
   ```ini
   [mysqld]
   performance_schema=ON
   max_digest_length = 4096
   performance_schema_max_digest_length = 4096
   performance_schema_max_sql_text_length = 4096

   # Enable the necessary Performance Schema instruments and consumers
   performance-schema-instrument='statement/%=ON'
   performance-schema-consumer-events-statements-current=ON
   performance-schema-consumer-events-statements-history=ON
   performance-schema-consumer-events-statements-history-long=ON
   performance-schema-consumer-events-statements-cpu=ON
   performance-schema-instrument='wait/%=ON'
   performance-schema-consumer-events-waits-current=ON
   performance-schema-consumer-events-waits-history=ON
   performance-schema-consumer-events-waits-history-long=ON
   performance-schema-instrument='%lock%=ON'

   ```
2. To apply the changes made to the configuration file, run the following command, and restart MySQL server:
   ```shell
    sudo systemctl restart mysql
   ```
3. To check the MySQL server status, run the following command:
   ```shell
    sudo systemctl status mysql
   ```