---
componentType: default
headingText: Enable Performance Schema Concumers and Instruments
---


1. Create the following schema
    <Callout variant="tip">
    Create a dedicated schema for the New Relic monitoring user. This schema will be used by the integration to store procedures needed for query performance monitoring.
    </Callout>
   ```sql
   CREATE SCHEMA IF NOT EXISTS newrelic;
   GRANT EXECUTE ON newrelic.* TO 'newrelic'@'localhost';
   ```
2. Set Up Procedure for Runtime Activation of Consumers and Instruments
   <Callout variant="tip">
   Newrelic recommends that you create the following procedure to grant the Agent the ability to enable performance_schema.events_* `consumers` and `instruments` at runtime.
   </Callout>
   <>&nbsp;</>
   ```sql
   DELIMITER $$
   CREATE PROCEDURE newrelic.enable_essential_consumers_and_instruments()
      SQL SECURITY DEFINER
   BEGIN
      UPDATE performance_schema.setup_consumers SET enabled='YES' WHERE name LIKE 'events_statements_%' OR name LIKE 'events_waits_%';
      UPDATE performance_schema.setup_instruments SET ENABLED = 'YES', TIMED = 'YES' WHERE NAME LIKE 'wait/%' OR NAME LIKE 'statement/%' OR NAME LIKE '%lock%';
   END $$
   DELIMITER ;
   GRANT EXECUTE ON PROCEDURE newrelic.enable_essential_consumers_and_instruments TO 'newrelic'@'localhost';
   ```