---
componentType: default
optionType: agent-lang
headingText: Register the Python agent in your code
---

1. In your Jupyter notebook or Python script, install the Python agent:

   ```python
   pip install git+https://github.com/newrelic/newrelic-python-agent
   ```

2. If you haven't updated your `newrelic.ini` file manually, then add these environment variables to your notebook:

   ```python
   import os

   os.environ["NEW_RELIC_APP_NAME"] = "openai-example"
   os.environ["NEW_RELIC_CUSTOM_INSIGHTS_EVENTS_MAX_ATTRIBUTE_VALUE"] = "100000"
   os.environ["NEW_RELIC_APPLICATION_LOGGING_ENABLED"] = "true"
   os.environ["NEW_RELIC_APPLICATION_LOGGING_FORWARDING_ENABLED"] = "true"
   os.environ["NEW_RELIC_DISTRIBUTED_TRACING_ENABLED"] = "true"
   ```

You can refer to the [Python configuration doc](/docs/apm/agents/python-agent/configuration/python-agent-configuration/#ai-monitoring) to learn more about AI monitoring configurations.

* Refer to the [event harvest section](/docs/apm/agents/python-agent/configuration/python-agent-configuration/#cfg-tt-max-samples-stored) for `span_events.max_samples_stored` 
* Refer to the [custom events section](/docs/apm/agents/python-agent/configuration/python-agent-configuration/#custom-insights-events-max-samples-stored)  for `custom_insights_events.max_samples_stored`
