---
componentType: default
headingText: Configure the Java agent
freshnessValidatedDate: never
---

To collect AI data, you need to set certain configurations to enable AI monitoring. We recommend applying these configurations in `newrelic.yml`, but if you have a more complex set up with multiple environments, you can configure with environment variables.

<CollapserGroup>
  <Collapser
    id="config-file"
    title="Configure through `newrelic.yml`"
  >
    ```yaml
    common: &default_settings
        ai_monitoring:
            enabled: true

        span_events:
            max_samples_stored: 10000

        custom_insights_events:
            max_samples_stored: 100000
    ```
  </Collapser>

  <Collapser
    id="environment-variables"
    title="Configure with environment variables"
  >
    ```bash
    NEW_RELIC_AI_MONITORING_ENABLED = TRUE
    ```

    ```bash
    NEW_RELIC_SPAN_EVENTS_MAX_SAMPLES_STORED = 10000
    ```

    ```bash
    NEW_RELIC_CUSTOM_INSIGHTS_EVENTS_MAX_SAMPLES_STORED = 100000
    ```
  </Collapser>
</CollapserGroup>

To learn about more AI monitoring configurations, see [Customize the agent for AI monitoring](/docs/ai-monitoring/customize-agent-ai-monitoring).
