---
title: Entenda a página da interface de detalhes trace
tags:
  - Distributed tracing
  - UI and data
  - Trace details
metaDescription: 'Dive deeper into New Relic''s distributed tracing feature: learn how to use and understand the trace details UI.'
freshnessValidatedDate: '2023-07-19T00:00:00.000Z'
translationType: machine
---

Depois de selecionar um trace na lista trace , você será direcionado para a página de detalhes trace na interface do usuário. Use os detalhes trace para entender o fluxo de operações que compõem um distributed trace e ajuste a visualização para encontrar as informações mais importantes para você.

<img title="Trace details page" alt="New Relic distributed tracing UI - trace details page" src="/images/distributed-tracing-trace-details-page.webp" />

<figcaption>
  Selecione um trace na lista de rastreamentos para ver detalhes sobre ele.
</figcaption>

Confira maneiras de exibir os intervalos do seu rastreamento:

<Tabs>
  <TabsBar>
    <TabsBarItem id="timeline-view">
      Visualização da linha do tempo
    </TabsBarItem>

    <TabsBarItem id="latency-view">
      Visualização de latência
    </TabsBarItem>

    <TabsBarItem id="waterfall-view">
      Vista da cachoeira
    </TabsBarItem>
  </TabsBar>

  <TabsPages>
    <TabsPageItem id="timeline-view">
      A visualização da linha do tempo é uma visualização de alta densidade de todos os intervalos no trace. Essa visualização permite rolar rapidamente por todo trace e ver como a latência e os erros se propagam pelo trace e pelos limites da entidade. Você pode selecionar extensões nesta visualização para ver os detalhes da extensão na visualização em cascata abaixo dela.
    </TabsPageItem>

    <TabsPageItem id="latency-view">
      A visualização de latência mostra quanta latência é contribuída por cada entidade no trace, bem como o número de intervalos de erro por entidade. A latência contribuída por uma entidade é o tempo transcorrido em que ela tinha um ou mais processos em execução, mas **não** estava fazendo nenhuma chamada externa ou de banco de dados. Aqui estão dois exemplos:

      * Se uma entidade tiver um processo com duração de 500 ms, mas durante 400 ms desse tempo estiver fazendo uma chamada externa, isso será mostrado como contribuindo com 100 ms de latência para o trace.

      * Se uma entidade tiver três processos em execução em paralelo por um segundo e nenhum deles tiver feito chamadas externas, isso será mostrado como contribuindo com um segundo de latência para o trace.

        <img title="Latency view" alt="Screenshot showing the distributed tracing latency view" src="/images/distributed-tracing-trace-details-page-latency-view.webp" />
    </TabsPageItem>

    <TabsPageItem id="waterfall-view">
      A visualização em cascata na seção inferior da página exibe um fluxo detalhado de todas as operações que compõem o distributed trace. Isso permite que você veja o contexto exato de onde surgem a latência e os erros.

      ### Controles de cascata [#waterfall-controls]

      A visualização em cascata possui vários controles para facilitar a localização de trechos importantes para você:

      * <DNT>**Expand all/Collapse all**</DNT>: Use esta opção para alternar entre mostrar todos os trechos (incluindo trechos em processamento) e mostrar trechos recolhidos.

      * <DNT>**Standard/Manual**</DNT>: no modo padrão, você obtém uma visualização semi-expandida que inclui o primeiro intervalo de cada processo. No modo manual, você vê apenas o que expande.

        * Ambos <DNT>**Standard**</DNT> e <DNT>**Manual**</DNT> são substituídos por <DNT>**Expand all**</DNT>, que exibe todos os períodos.
        * Se você estiver no modo padrão ou manual e clicar em <DNT>**Collapse all**</DNT>, a cascata será redefinida para o padrão do modo que você está usando.

      * <DNT>**Focus on**</DNT>Se o seu span apresentar erros ou anomalias, você verá caixas de seleção para cada um desses tipos. Se você marcar essas caixas, a visualização em cascata irá ocultar todos os outros tipos de trechos e mostrar apenas os trechos com erros ou anomalias codificados por cores. Esta é uma maneira rápida de encontrar trechos problemáticos.

        <img style={{ width: "70%",align: "left" }} title="Screenshot showing the color coding of focus on" alt="Screenshot showing the color coding of focus on" src="/images/distributed-tracing_screenshot-crop_focus-on-example.webp" />

      * <DNT>**Maximize**</DNT>: Isso permite que você veja mais trechos na tela expandindo a cascata e ocultando o mapa de entidades.

        ### Propriedades de extensão em cascata [#span-icons]

        A interface indica propriedades de span com estes ícones:

        <table id="span-types">
          <thead>
            <tr>
              <th style={{ width: "130px" }}>
                Propriedade de extensão
              </th>

              <th style={{ width: "110px" }}>
                Indicador
              </th>

              <th>
                Descrição
              </th>
            </tr>
          </thead>

          <tbody>
            <tr>
              <td>
                Serviço
              </td>

              <td>
                <img title="new-relic-distributed-tracing-service-span-icon.png" alt="New Relic distributed tracing service icon" src="/images/new-relic-distributed-tracing-service-icon.webp" />
              </td>

              <td>
                Este ícone representa um intervalo que é o ponto de entrada de um serviço.
              </td>
            </tr>

            <tr id="in-process">
              <td>
                Em processo
              </td>

              <td>
                <img title="new-relic-distributed-tracing-in-process-span-icon.png" alt="New Relic distributed tracing in-process span icon " src="/images/new-relic-distributed-tracing-inprocess-icon.webp" />
              </td>

              <td>
                Este ícone representa um [span em processamento](#in-process), que é um span que ocorre dentro de um processo (em oposição a um span entre processos). Exemplos: instrumentação de middleware, spans criados pelo usuário.
              </td>
            </tr>

            <tr>
              <td>
                Armazenamento de dados
              </td>

              <td>
                <img title="new-relic-distributed-tracing-database-span-icon.png" alt="New Relic distributed tracing datastore span icon" src="/images/new-relic-distributed-tracing-databases-icon.webp" />
              </td>

              <td>
                Este ícone representa uma chamada span para um armazenamento de dados.
              </td>
            </tr>

            <tr>
              <td>
                Externo
              </td>

              <td>
                <img title="new-relic-distributed-tracing-external-span-icon.png" alt="New Relic distributed tracing external span icon" src="/images/new-relic-distributed-tracing-external-icon.webp" />
              </td>

              <td>
                Este ícone representa uma categoria que representa uma chamada para um serviço externo feita via HTTP.
              </td>
            </tr>

            <tr>
              <td>
                Aplicativo de browser
              </td>

              <td>
                <img title="distributed-tracing-browser-span-icon.png" alt="New Relic distributed tracing browser span icon" src="/images/distributed-tracing-browser-span-icon.webp" />
              </td>

              <td>
                Este ícone representa uma [extensão de aplicativo do browser](/docs/browser/new-relic-browser/browser-pro-features/browser-data-distributed-tracing).
              </td>
            </tr>

            <tr>
              <td>
                Lambda
              </td>

              <td>
                <img title="new-relic-distributed-tracing-lambda-icon.png" alt="New Relic distributed tracing external span icon" src="/images/new-relic-distributed-tracing-lambda-icon.webp" />
              </td>

              <td>
                Este ícone representa um intervalo de uma [função do Lambda](/docs/serverless-function-monitoring/aws-lambda-monitoring/get-started/introduction-new-relic-monitoring-aws-lambda).
              </td>
            </tr>
          </tbody>
        </table>

        Alguns períodos terão indicadores adicionais:

        <table id="span-types-table">
          <thead>
            <tr>
              <th style={{ width: "130px" }}>
                Propriedade de extensão
              </th>

              <th style={{ width: "110px" }}>
                Indicador
              </th>

              <th>
                Descrição
              </th>
            </tr>
          </thead>

          <tbody>
            <tr id="connecting-lines">
              <td>
                Tipo de conexão
              </td>

              <td>
                <img title="new-relic-distributed-tracing-lines-image.png" alt="New Relic distributed tracing connecting lines image" src="/images/new-relic-distributed-tracing-lines-image.webp" />
              </td>

              <td>
                As linhas sólidas indicam um relacionamento direto entre pais e filhos; em outras palavras, um processo ou função chamando outro diretamente. Uma linha pontilhada indica um relacionamento não direto. Para obter mais informações sobre relacionamentos entre extensões, consulte [Estrutura de rastreamento](/docs/understand-dependencies/distributed-tracing/get-started/how-new-relic-distributed-tracing-works#trace-structure).
              </td>
            </tr>

            <tr>
              <td>
                Erros
              </td>

              <td>
                <img title="new-relic-distributed-tracing-error-icon.png" alt="New Relic distributed tracing error icon" src="/images/new-relic-distributed-tracing-error-icon.webp" />
              </td>

              <td>
                Um intervalo com um erro. Consulte [Como entender erros de span](#error-tips).
              </td>
            </tr>

            <tr>
              <td>
                Anômalo
              </td>

              <td>
                <img title="new-relic-distributed-tracing-anomalous-icon.png" alt="New Relic distributed tracing datastore span icon" src="/images/new-relic-distributed-tracing-anomalous-icon.webp" />
              </td>

              <td>
                Este ícone representa a detecção de um [intervalo anômalo](#anomalous-spans).
              </td>
            </tr>

            <tr>
              <td>
                Períodos órfãos
              </td>

              <td>
                <img title="new-relic-distributed-tracing-fragmented-icon.png" alt="New Relic distributed tracing orphaned span icon" src="/images/new-relic-distributed-tracing-orphan-icon.webp" />
              </td>

              <td>
                Alguns spans podem ser &quot;órfãos&quot; ou separados do trace. Esses intervalos aparecerão na parte inferior do trace. Para obter mais detalhes, consulte [Rastreamento fragmentado](#fragmented-traces).
              </td>
            </tr>

            <tr>
              <td>
                Vários nomes de aplicativos
              </td>

              <td>
                <img title="new-relic-distributed-tracing-multiple-app-names-indicator.png" alt="New Relic distributed tracing multiple app names indicator" src="/images/new-relic-distributed-tracing-multiapp-icon.webp" />
              </td>

              <td>
                Ao lado de um nome de extensão, representa uma entidade que teve [vários nomes de aplicativos definidos](/docs/agents/manage-apm-agents/app-naming/use-multiple-names-app). Selecione esta opção para ver todos os nomes de aplicativos aos quais ele se reporta. Para pesquisar dados trace por nomes de aplicativos alternativos, use o atributo `appName`.
              </td>
            </tr>

            <tr>
              <td>
                Diferença de horário cliente/servidor
              </td>

              <td>
                <img title="new-relic-distributed-tracing-client-server-time-indicator.png" alt="New Relic distributed tracing client-server time difference indicator" src="/images/new-relic-distributed-tracing-client-server-time-indicator.webp" />
              </td>

              <td>
                Se o indicador de duração de um período não estiver completamente colorido (como neste exemplo), significa que há uma discrepância de tempo entre a duração do lado do servidor e a duração do lado do cliente para essa atividade. Para obter detalhes sobre isso, consulte [Diferença de horário cliente/servidor](#client-server-time).
              </td>
            </tr>
          </tbody>
        </table>
    </TabsPageItem>
  </TabsPages>
</Tabs>

## Painel de detalhes do intervalo [#span-details]

Quando você seleciona um intervalo, um painel é aberto com detalhes do intervalo. Esses detalhes podem ser úteis para questões de desempenho de resolução de problemas. Esta página possui três guias:

* <DNT>**Performance**</DNT>Você verá gráficos mostrando a duração média e as taxas de transferência para essa operação de span, bem como a comparação do desempenho desse span específico com a média.
* <DNT>**Attributes**</DNT>: Você pode aprender mais sobre atributo em nosso [dicionário de dados](/attribute-dictionary/?dataSource=Distributed+Tracing&event=Span).
* <DNT>**Details**</DNT>: Você pode visualizar detalhes, como o [nome completo e a fonte de dados do intervalo](/docs/distributed-tracing/ui-data/understand-use-distributed-tracing-ui/#prettified-span-names) .
* <DNT>**Span links**</DNT>Se o elemento span contiver [links do tipo span](#span-links), você verá esta aba. Isso demonstra relações causais com trechos de outros registros. [Saiba mais sobre links span](#span-links).

O que um intervalo exibe é baseado em seu tipo de intervalo. Por exemplo, os detalhes do intervalo do armazenamento de dados incluirão a consulta ao banco de dados. Para obter mais informações sobre a estrutura trace e como as propriedades de span são determinadas, consulte [Estrutura de rastreamento](/docs/understand-dependencies/distributed-tracing/get-started/how-new-relic-distributed-tracing-works#trace-structure).

## Entendendo links de extensão [#span-links]

Os links de extensão ajudam você a entender as relações causais entre extensões em diferentes rastreamentos. Quando os rastreamentos são divididos devido à comunicação assíncrona ou a processos de longa duração, os links de extensão permitem navegar entre rastreamentos relacionados e visualizar o panorama completo de seus sistemas distribuídos.

### Quando o rastreamento é dividido [#why-traces-split]

Em sistemas distribuídos modernos, o rastreamento pode aparecer como um rastreamento separado e desconectado nos seguintes cenários:

* <DNT>**Long-running workflows**</DNT>: Tarefas em segundo plano ou fluxo de trabalho que excedam os limites de duração trace (mais de 90 segundos para Amostragem baseada em cabeçalho, mais de 20 segundos para Rastreamento Infinito) ou que sejam executadas por períodos prolongados.

Ao rastrear uma fila de mensagens, geralmente é recomendável usar links span para associar o rastreamento do(s) produtor(es) e do(s) consumidor(es). Exemplos incluem:

* <DNT>**General asynchronous message queues**</DNT>: Um serviço publica mensagens em uma fila (como AWS SQS, RabbitMQ ou Kafka), e outro serviço as consome posteriormente.
* <DNT>**Batch-processing**</DNT>: Trabalhadores que processam várias mensagens em lotes, onde cada mensagem se origina de um tracediferente.
* <DNT>**Fan-in pattern**</DNT>: Vários serviços produzem mensagens de forma independente, que são agregadas por um único consumidor.
* <DNT>**Fan-out pattern**</DNT>: Vários consumidores consomem de uma mesma fila de mensagens, cada um iniciando seu próprio trace

Quando os registros são divididos dessa forma, as relações tradicionais entre pais e filhos não capturam o quadro completo. Os links Span preenchem essa lacuna ao criar conexões causais explícitas.

### O que são links span? [#what-are-span-links]

Os links de span são atributos OpenTelemetry que criam relações causais entre spans que não possuem uma conexão direta pai-filho. Eles permitem que você:

* Navegue de um intervalo consumidor de volta para o intervalo produtor.
* Compreenda todo o fluxo da solicitação, mesmo quando os rastreamentos estiverem divididos.
* Depurar problemas que se estendem por vários limites do assíncrono

Um link de span inclui o ID trace e o ID do span relacionado, permitindo que New Relic conecte o rastreamento para você.

### Identificando traços com links de extensão [#identify-span-links]

Na interface de detalhes trace, os rastreamentos com links de extensão são marcados de diversas maneiras:

1. <DNT>**Span links filter badge**</DNT>: Na barra de filtro trace, você verá um indicador mostrando o número de spans com links (por exemplo, `span links (2)`).
2. <DNT>**Span count indicator**</DNT>: Ao visualizar a lista de spans, cada span exibe a contagem de links, caso possua links internos.

<img title="Distributed tracing span links filter" alt="Screenshot showing the span links filter badge in the trace details UI" src="/images/distributed-tracing-span-links-filter-badge.webp" />

<figcaption>
  O indicador de filtro de links de trechos aparece na barra de filtros trace quando um trace contém trechos com links.
</figcaption>

### Links de visualização [#view-span-links]

Para visualizar e navegar pelos links do span:

1. Na página de detalhes trace, selecione um intervalo na dropdown de links de intervalo.

2. No painel de detalhes do intervalo, clique na guia <DNT>**Span links**</DNT>.

3. Você verá uma lista de rastreamentos vinculados com as seguintes informações:

   * <DNT>**Direction badge**</DNT>: `Forward` indica um intervalo que ocorreu posteriormente (sucessor), enquanto `Backward` indica um intervalo que ocorreu anteriormente (predecessor).
   * <DNT>**Trace ID**</DNT>: O ID do trace vinculado (truncado para exibição).
   * <DNT>**Timestamp**</DNT>: Quando o intervalo vinculado ocorreu.
   * <DNT>**Duration**</DNT>: Quanto tempo levou para o trecho vinculado carregar.
   * <DNT>**Errors**</DNT>: Número de erros no trace vinculado.

4. Clique em um trace vinculado para navegar até ele. Use o botão Voltar do seu navegador para retornar ao trace original.

<img title="Span links tab showing linked traces" alt="Screenshot showing the Span links tab with forward and backward linked traces" src="/images/distributed-tracing-span-links-tab-detail.webp" />

<figcaption>
  A aba &quot;Links Span&quot; exibe o rastreamento vinculado com indicadores de direção (Avançar/Retroceder), IDs trace, carimbo de data/hora, durações e contagens de erros.
</figcaption>

<Callout variant="tip">
  <DNT>**Understanding forward vs. backward links**</DNT>

  * <DNT>**Forward links**</DNT>: Apontar para o evento que ocorreu como resultado do intervalo atual. Exemplo: Uma mensagem foi publicada por este intervalo e processada posteriormente por outro trace.
  * <DNT>**Backward links**</DNT>: Indique o traço que causou o intervalo atual. Exemplo: Este intervalo está processando uma mensagem que foi publicada por um trace anterior.
</Callout>

### Quando os links span não aparecem [#span-links-troubleshooting]

Se você espera ver links span, mas eles não estão aparecendo, verifique o seguinte:

<img title="Empty state when trace has no span links" alt="Screenshot showing the empty state message when a trace has no span links" src="/images/distributed-tracing-span-links-empty-state.webp" />

<figcaption>
  Quando um trace não tiver links de extensão, você verá esta mensagem na guia Links de extensão.
</figcaption>

<CollapserGroup>
  <Collapser id="trace-context-not-propagated" title="Contexto do rastreamento não propagado">
    Os links span requerem trace adequado de propagação de contexto por meio de seu sistema de mensagens:

    * Certifique-se de que os cabeçalhos de contexto de rastreamento W3C (`traceparent`, `tracestate`) estejam incluídos nos cabeçalhos das mensagens ou
    * Verifique se sua biblioteca ou framework de mensagens suporta propagação de contexto.
    * Ao instrumentar manualmente, certifique-se de extrair o contexto das mensagens e criar links de span programaticamente.

    Para exemplos de implementação, consulte [OpenTelemetry span links práticas recomendadas](/docs/opentelemetry/best-practices/opentelemetry-best-practices-traces/#span-links).
  </Collapser>

  <Collapser id="sampling" title="Considerações sobre amostragem">
    Tanto o trace original quanto o trace vinculado devem ser amostrados para que os links de extensão apareçam:

    * Se algum trace for descartado pela amostragem, o link do span não ficará visível.
    * Considere usar estratégias tail-based que preservem traços importantes.
    * Para fluxo de trabalho crítico com links de extensão, talvez seja necessário ajustar as taxas de amostragem.
  </Collapser>

  <Collapser id="data-processing" title="Dados ainda não processados">
    Pode haver um atraso entre o envio dos dados trace e o aparecimento dos links de extensão:

    * Aguarde de 1 a 2 minutos para que os dados sejam processados e indexados.
    * Verifique se ambos os rastreamentos vinculados foram ingeridos com sucesso.
    * Verifique se você não está atingindo nenhum limite de dados ou limite de taxa.
  </Collapser>
</CollapserGroup>

Para obter mais informações sobre a implementação de links de span em sua instrumentação, consulte nosso [guia de práticas recomendadas para rastreamentoOpenTelemetry ](/docs/opentelemetry/best-practices/opentelemetry-best-practices-traces/#span-links).

## Atributo do período [#span-attributes]

Se quiser saber mais sobre dados de `Span` :

* Explore seus dados de span usando o [criador de consulta](/docs/chart-builder/use-chart-builder/get-started/introduction-chart-builder).
* Para ver o atributo padrão anexado aos dados span, use o [dicionário de dados](/attribute-dictionary/?event=Span).
* Confira estes [exemplos de consulta](/docs/apm/distributed-tracing/ui-data/example-insights-queries-distributed-trace-data) para obter ajuda com a consulta NRQL usando esses atributos.

## Ver registro relacionado [#view-your-logs]

Se você estiver usando nosso recurso [de logs contextualizados](/docs/logs/logs-context/configure-logs-context-apm-agents/) , poderá ver qualquer log vinculado ao seu rastreamento:

1. Vá para a página de detalhes trace clicando em um trace.
2. No canto superior esquerdo da página de detalhes do período, clique na guia <DNT>**Logs**</DNT> .
3. Para obter detalhes relacionados a uma mensagem individual do log, clique diretamente na mensagem.