---
title: Integração Amazon Managed Kafka (MSK)
tags:
  - Integrations
  - Amazon integrations
  - AWS integrations list
metaDescription: 'New Relic''s AWS Managed Streaming for Kafka (MSK) integration: what data it reports, and how to enable it.'
freshnessValidatedDate: never
translationType: machine
---

<Callout variant="important">
  Habilite a [integração do AWS CloudWatch Metric Streams ](/docs/infrastructure/amazon-integrations/aws-integrations-list/aws-metric-stream/)para monitor todas as métricas do CloudWatch de seus serviços da AWS, incluindo namespace personalizado. A integração individual não é mais nossa opção recomendada.
</Callout>

A New Relic oferece uma integração para coletar dados do [Amazon Web Services Managed Streaming para Apache Kafka](https://aws.amazon.com/msk/) . Este documento explica como ativar esta integração e descreve os dados que podem ser reportados.

## Ativar integração [#activate]

Para habilitar essa integração, siga os procedimentos padrão para [conectar os serviços da AWS ao New Relic](/docs/infrastructure/infrastructure-integrations/getting-started/connect-aws-integrations-infrastructure).

## Configuração e polling [#polling]

Para alterar a frequência de pesquisa e filtrar dados, use [opções de configuração](/docs/integrations/new-relic-integrations/getting-started/configure-polling-frequency-data-collection-cloud-integrations).

Informações [de pesquisa](/docs/infrastructure/amazon-integrations/aws-integrations-list/aws-polling-intervals-infrastructure-integrations) padrão para a integração do Amazon Managed Kafka:

* Intervalo de sondagem New Relic : 5 minutos
* Intervalo de dados do Amazon CloudWatch: 1 minuto

## Visualizar e usar dados [#find-data]

Para visualizar seus dados de integração, acesse <DNT>**[one.newrelic.com &gt; All capabilities](https://one.newrelic.com/all-capabilities) &gt; Infrastructure &gt; AWS**</DNT> e selecione uma integração.

Você pode [consultar e explorar seus dados](/docs/using-new-relic/data/understand-data/query-new-relic-data) usando o seguinte [tipo de evento](/docs/data-apis/understand-data/new-relic-data-types/#event-data):

<table>
  <thead>
    <tr>
      <th>
        Entidade
      </th>

      <th>
        Tipo de evento
      </th>

      <th>
        Fornecedor
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        Cluster
      </td>

      <td>
        `AwsMskClusterSample`
      </td>

      <td>
        `AwsMskCluster`
      </td>
    </tr>

    <tr>
      <td>
        Corretor
      </td>

      <td>
        `AwsMskBrokerSample`
      </td>

      <td>
        `AwsMskBroker`
      </td>
    </tr>

    <tr>
      <td>
        Tema
      </td>

      <td>
        `AwsMskTopicSample`
      </td>

      <td>
        `AwsMskTopic`
      </td>
    </tr>
  </tbody>
</table>

Para saber mais sobre como usar seus dados, consulte [Compreender e usar dados de integração](/docs/infrastructure/integrations/find-use-infrastructure-integration-data).

## Dados métricos [#metrics]

Essa integração registra dados do Amazon Managed Kafka para cluster, corretor e entidade de tópico.

### Dados gerenciados do cluster Kafka

<table>
  <thead>
    <tr>
      <th style={{ width: "275px" }}>
        Métrica
      </th>

      <th style={{ width: "150px" }}>
        Unidade
      </th>

      <th>
        Descrição
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `activeControllerCount`
      </td>

      <td>
        Contar
      </td>

      <td>
        Apenas um controlador por cluster deve estar ativo em um determinado momento.
      </td>
    </tr>

    <tr>
      <td>
        `globalPartitionCount`
      </td>

      <td>
        Contar
      </td>

      <td>
        Número total de partições em todos os agentes do cluster.
      </td>
    </tr>

    <tr>
      <td>
        `globalTopicCount`
      </td>

      <td>
        Contar
      </td>

      <td>
        Número total de tópicos em todos os agentes do cluster.
      </td>
    </tr>

    <tr>
      <td>
        `offlinePartitionsCount`
      </td>

      <td>
        Contar
      </td>

      <td>
        Número total de partições que estão offline no cluster.
      </td>
    </tr>
  </tbody>
</table>

### Dados gerenciados do corretor Kafka

<table>
  <thead>
    <tr>
      <th style={{ width: "275px" }}>
        Métrica
      </th>

      <th style={{ width: "150px" }}>
        Unidade
      </th>

      <th>
        Descrição
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `bytesInPerSec`
      </td>

      <td>
        BytesPorSegundo
      </td>

      <td>
        O número de bytes por segundo recebidos dos clientes.
      </td>
    </tr>

    <tr>
      <td>
        `bytesOutPerSec`
      </td>

      <td>
        BytesPorSegundo
      </td>

      <td>
        O número de bytes por segundo enviados aos clientes.
      </td>
    </tr>

    <tr>
      <td>
        `cpuSystem`
      </td>

      <td>
        Por cento
      </td>

      <td>
        A porcentagem de CPU no espaço do kernel.
      </td>
    </tr>

    <tr>
      <td>
        `cpuUser`
      </td>

      <td>
        Por cento
      </td>

      <td>
        A porcentagem de CPU no espaço do usuário.
      </td>
    </tr>

    <tr>
      <td>
        `cpuIdle`
      </td>

      <td>
        Por cento
      </td>

      <td>
        A porcentagem de tempo ocioso da CPU.
      </td>
    </tr>

    <tr>
      <td>
        `fetchConsumerLocalTimeMsMean`
      </td>

      <td>
        Milissegundos
      </td>

      <td>
        O tempo médio em milissegundos que a solicitação do consumidor é processada no líder.
      </td>
    </tr>

    <tr>
      <td>
        `fetchConsumerRequestQueueTimeMsMean`
      </td>

      <td>
        Milissegundos
      </td>

      <td>
        O tempo médio em milissegundos que a solicitação do consumidor aguarda na fila de solicitações.
      </td>
    </tr>

    <tr>
      <td>
        `fetchConsumerResponseQueueTimeMsMean`
      </td>

      <td>
        Milissegundos
      </td>

      <td>
        O tempo médio, em milissegundos, que a solicitação do consumidor aguarda na fila de resposta.
      </td>
    </tr>

    <tr>
      <td>
        `fetchConsumerResponseSendTimeMsMean`
      </td>

      <td>
        Milissegundos
      </td>

      <td>
        O tempo médio em milissegundos para o consumidor enviar uma resposta.
      </td>
    </tr>

    <tr>
      <td>
        `fetchConsumerTotalTimeMsMean`
      </td>

      <td>
        Milissegundos
      </td>

      <td>
        O tempo total médio em milissegundos que o consumidor gasta na busca de dados do corretor.
      </td>
    </tr>

    <tr>
      <td>
        `fetchFollowerLocalTimeMsMean`
      </td>

      <td>
        Milissegundos
      </td>

      <td>
        O tempo médio em milissegundos que a solicitação do seguidor é processada no líder.
      </td>
    </tr>

    <tr>
      <td>
        `fetchFollowerRequestQueueTimeMsMean`
      </td>

      <td>
        Milissegundos
      </td>

      <td>
        O tempo médio em milissegundos que a solicitação do seguidor aguarda na fila de solicitações.
      </td>
    </tr>

    <tr>
      <td>
        `fetchFollowerResponseQueueTimeMsMean`
      </td>

      <td>
        Milissegundos
      </td>

      <td>
        O tempo médio em milissegundos que a solicitação do seguidor aguarda na fila de respostas.
      </td>
    </tr>

    <tr>
      <td>
        `fetchFollowerResponseSendTimeMsMean`
      </td>

      <td>
        Milissegundos
      </td>

      <td>
        O tempo médio em milissegundos para o seguidor enviar uma resposta.
      </td>
    </tr>

    <tr>
      <td>
        `fetchFollowerTotalTimeMsMean`
      </td>

      <td>
        Milissegundos
      </td>

      <td>
        O tempo total médio em milissegundos que os seguidores gastam na busca de dados do corretor.
      </td>
    </tr>

    <tr>
      <td>
        `fetchMessageConversionsPerSec`
      </td>

      <td>
        Contagem por segundo
      </td>

      <td>
        O número de conversões de mensagens de busca por segundo para o agente.
      </td>
    </tr>

    <tr>
      <td>
        `fetchThrottleTime`
      </td>

      <td>
        Milissegundos
      </td>

      <td>
        O tempo médio de aceleração de busca em milissegundos.
      </td>
    </tr>

    <tr>
      <td>
        `fetchThrottleByteRate`
      </td>

      <td>
        BytesPorSegundo
      </td>

      <td>
        O número de bytes limitados por segundo.
      </td>
    </tr>

    <tr>
      <td>
        `fetchThrottleQueueSize`
      </td>

      <td>
        Contar
      </td>

      <td>
        O número de mensagens na fila de limitação.
      </td>
    </tr>

    <tr>
      <td>
        `kafkaAppLogsDiskUsed`
      </td>

      <td>
        Por cento
      </td>

      <td>
        A porcentagem de espaço em disco usado para log do aplicativo.
      </td>
    </tr>

    <tr>
      <td>
        `kafkaDataLogsDiskUsed`
      </td>

      <td>
        Por cento
      </td>

      <td>
        A porcentagem de espaço em disco usado para log de dados.
      </td>
    </tr>

    <tr>
      <td>
        `leaderCount`
      </td>

      <td>
        Contar
      </td>

      <td>
        O número de réplicas líderes.
      </td>
    </tr>

    <tr>
      <td>
        `memoryBuffered`
      </td>

      <td>
        Bytes
      </td>

      <td>
        O tamanho em bytes da memória em buffer do intermediário.
      </td>
    </tr>

    <tr>
      <td>
        `memoryCached`
      </td>

      <td>
        Bytes
      </td>

      <td>
        O tamanho em bytes da memória em cache do intermediário.
      </td>
    </tr>

    <tr>
      <td>
        `memoryFree`
      </td>

      <td>
        Bytes
      </td>

      <td>
        O tamanho em bytes de memória que está livre e disponível para o intermediário.
      </td>
    </tr>

    <tr>
      <td>
        `memoryUsed`
      </td>

      <td>
        Bytes
      </td>

      <td>
        O tamanho em bytes de memória que está em uso pelo intermediário.
      </td>
    </tr>

    <tr>
      <td>
        `messagesInPerSec`
      </td>

      <td>
        Contagem por segundo
      </td>

      <td>
        O número de mensagens recebidas por segundo para o agente.
      </td>
    </tr>

    <tr>
      <td>
        `networkProcessorAvgIdlePercent`
      </td>

      <td>
        Por cento
      </td>

      <td>
        A porcentagem média de tempo que os processadores de rede ficam ociosos.
      </td>
    </tr>

    <tr>
      <td>
        `networkRxDropped`
      </td>

      <td>
        Contar
      </td>

      <td>
        O número de pacotes de recebimento descartados.
      </td>
    </tr>

    <tr>
      <td>
        `networkRxErrors`
      </td>

      <td>
        Contar
      </td>

      <td>
        O número de erros de recebimento de rede para o intermediário.
      </td>
    </tr>

    <tr>
      <td>
        `networkRxPackets`
      </td>

      <td>
        Contar
      </td>

      <td>
        O número de pacotes recebidos pelo corretor.
      </td>
    </tr>

    <tr>
      <td>
        `networkTxDropped`
      </td>

      <td>
        Contar
      </td>

      <td>
        O número de pacotes de transmissão descartados.
      </td>
    </tr>

    <tr>
      <td>
        `networkTxErrors`
      </td>

      <td>
        Contar
      </td>

      <td>
        O número de erros de transmissão de rede para o intermediário.
      </td>
    </tr>

    <tr>
      <td>
        `networkTxPackets`
      </td>

      <td>
        Contar
      </td>

      <td>
        O número de pacotes transmitidos pelo corretor.
      </td>
    </tr>

    <tr>
      <td>
        `partitionCount`
      </td>

      <td>
        Contar
      </td>

      <td>
        O número de partições do corretor.
      </td>
    </tr>

    <tr>
      <td>
        `produceLocalTimeMsMean`
      </td>

      <td>
        Milissegundos
      </td>

      <td>
        O tempo médio em milissegundos para o seguidor enviar uma resposta.
      </td>
    </tr>

    <tr>
      <td>
        `produceMessageConversionsPerSec`
      </td>

      <td>
        Contagem por segundo
      </td>

      <td>
        O número de conversões de mensagens produzidas por segundo para o intermediário.
      </td>
    </tr>

    <tr>
      <td>
        `produceMessageConversionsTimeMsMean`
      </td>

      <td>
        Milissegundos
      </td>

      <td>
        O tempo médio em milissegundos gasto em conversões de formato de mensagem.
      </td>
    </tr>

    <tr>
      <td>
        `produceRequestQueueTimeMsMean`
      </td>

      <td>
        Milissegundos
      </td>

      <td>
        O tempo médio em milissegundos que as mensagens de solicitação passam na fila.
      </td>
    </tr>

    <tr>
      <td>
        `produceResponseQueueTimeMsMean`
      </td>

      <td>
        Milissegundos
      </td>

      <td>
        O tempo médio em milissegundos que as mensagens de resposta passam na fila.
      </td>
    </tr>

    <tr>
      <td>
        `produceResponseSendTimeMsMean`
      </td>

      <td>
        Milissegundos
      </td>

      <td>
        O tempo médio em milissegundos gasto no envio de mensagens de resposta.
      </td>
    </tr>

    <tr>
      <td>
        `produceTotalTimeMsMean`
      </td>

      <td>
        Milissegundos
      </td>

      <td>
        O tempo médio de produção em milissegundos.
      </td>
    </tr>

    <tr>
      <td>
        `produceThrottleTime`
      </td>

      <td>
        Milissegundos
      </td>

      <td>
        O tempo médio de aceleração do produto em milissegundos.
      </td>
    </tr>

    <tr>
      <td>
        `produceThrottleByteRate`
      </td>

      <td>
        BytesPorSegundo
      </td>

      <td>
        O número de bytes limitados por segundo.
      </td>
    </tr>

    <tr>
      <td>
        `produceThrottleQueueSize`
      </td>

      <td>
        Contar
      </td>

      <td>
        O número de mensagens na fila de limitação.
      </td>
    </tr>

    <tr>
      <td>
        `requestBytesMean`
      </td>

      <td>
        Contar
      </td>

      <td>
        O número médio de bytes de solicitação do corretor.
      </td>
    </tr>

    <tr>
      <td>
        `requestExemptFromThrottleTime`
      </td>

      <td>
        Milissegundos
      </td>

      <td>
        O tempo médio gasto na rede do broker e nos threads de E/S para processar solicitações isentas de limitação.
      </td>
    </tr>

    <tr>
      <td>
        `requestHandlerAvgIdlePercent`
      </td>

      <td>
        Por cento
      </td>

      <td>
        A porcentagem média de tempo em que os threads do manipulador de solicitação ficam inativos.
      </td>
    </tr>

    <tr>
      <td>
        `requestThrottleQueueSize`
      </td>

      <td>
        Contar
      </td>

      <td>
        O número de mensagens na fila de limitação.
      </td>
    </tr>

    <tr>
      <td>
        `requestThrottleTime`
      </td>

      <td>
        Milissegundos
      </td>

      <td>
        O tempo médio de aceleração da solicitação em milissegundos.
      </td>
    </tr>

    <tr>
      <td>
        `requestTime`
      </td>

      <td>
        Milissegundos
      </td>

      <td>
        O tempo médio gasto na rede do intermediário e nos threads de E/S para processar solicitações.
      </td>
    </tr>

    <tr>
      <td>
        `rootDiskUsed`
      </td>

      <td>
        Por cento
      </td>

      <td>
        A porcentagem do disco raiz usada pelo intermediário.
      </td>
    </tr>

    <tr>
      <td>
        `swapUsed`
      </td>

      <td>
        Bytes
      </td>

      <td>
        O tamanho em bytes da memória swap que está em uso pelo intermediário.
      </td>
    </tr>

    <tr>
      <td>
        `swapFree`
      </td>

      <td>
        Bytes
      </td>

      <td>
        O tamanho em bytes da memória swap que está disponível para o intermediário.
      </td>
    </tr>

    <tr>
      <td>
        `underMinIsrPartitionCount`
      </td>

      <td>
        Contar
      </td>

      <td>
        O número de partições sob minIsr para o corretor.
      </td>
    </tr>

    <tr>
      <td>
        `underReplicatedPartitions`
      </td>

      <td>
        Contar
      </td>

      <td>
        O número de partições sub-replicadas para o agente.
      </td>
    </tr>

    <tr>
      <td>
        `zooKeeperRequestLatencyMsMean`
      </td>

      <td>
        Milissegundos
      </td>

      <td>
        Latência média em milissegundos para solicitações do ZooKeeper do corretor.
      </td>
    </tr>

    <tr>
      <td>
        `zooKeeperSessionState`
      </td>

      <td>
        Outro
      </td>

      <td>
        Status da conexão da sessão ZooKeeper do corretor que pode ser um dos seguintes: NOT\_CONNECTED: &apos;0.0&apos;, ASSOCIATING: &apos;0.1&apos;, CONNECTING: &apos;0.5&apos;, CONNECTEDREADONLY: &apos;0.8&apos;, CONNECTED: &apos;1.0&apos;, CLOSED: &apos;5.0&apos;, AUTH\_FAILED: &apos;10.0&apos;.
      </td>
    </tr>
  </tbody>
</table>

### Dados gerenciados do tópico Kafka

<table>
  <thead>
    <tr>
      <th style={{ width: "275px" }}>
        Métrica
      </th>

      <th style={{ width: "150px" }}>
        Unidade
      </th>

      <th>
        Descrição
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `bytesInPerSec`
      </td>

      <td>
        BytesPorSegundo
      </td>

      <td>
        O número de bytes recebidos por segundo.
      </td>
    </tr>

    <tr>
      <td>
        `bytesOutPerSec`
      </td>

      <td>
        BytesPorSegundo
      </td>

      <td>
        O número de bytes enviados por segundo.
      </td>
    </tr>

    <tr>
      <td>
        `fetchMessageConversionsPerSec`
      </td>

      <td>
        Contagem por segundo
      </td>

      <td>
        O número de mensagens buscadas convertidas por segundo.
      </td>
    </tr>

    <tr>
      <td>
        `messagesInPerSec`
      </td>

      <td>
        Contagem por segundo
      </td>

      <td>
        O número de mensagens recebidas por segundo.
      </td>
    </tr>

    <tr>
      <td>
        `produceMessageConversionsPerSec`
      </td>

      <td>
        Contagem por segundo
      </td>

      <td>
        O número de conversões por segundo para mensagens produzidas.
      </td>
    </tr>
  </tbody>
</table>

## Qual é o próximo

<DocTiles>
  <DocTile title="Data and UI" path="/docs/message-queues-streaming/ui-data/understand-ui">Aprenda a usar New Relic para monitorar seu cluster Kafka</DocTile>
</DocTiles>