---
title: Gerenciar monitores de passos
tags:
  - Synthetics
  - APIs
  - NerdGraph
  - Examples
metaDescription: How to use New Relic NerdGraph API to create and update step monitors for synthetic monitoring.
freshnessValidatedDate: never
translationType: machine
---

O New Relic permite que você use o NerdGraph para criar [monitores de passos](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors). Os monitores de etapas fornecem monitoramento baseado em navegador, sem código e em várias etapas, que permite configurar fluxos de trabalho complexos do usuário sem escrever nenhum código. Este tutorial fornece exemplos de como usar a API do NerdGraph para automatizar a criação de monitores de passos.

## Crie um monitor de passos [#create-step-monitor]

Você pode criar um monitor de passos usando a mutação `syntheticsCreateStepMonitor`. Essa mutação permite configurar o monitoramento de navegador em várias etapas com uma série de ações predefinidas.

### Parâmetro de entrada

<table>
  <thead>
    <tr>
      <th>
        Parâmetro
      </th>

      <th>
        Tipo de dados
      </th>

      <th>
        É obrigatório?
      </th>

      <th>
        Descrição
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `accountId`
      </td>

      <td>
        Inteiro
      </td>

      <td>
        Sim
      </td>

      <td>
        Seu 

        [ID de conta](/docs/accounts/accounts-billing/account-structure/account-id)

         New Relic onde o monitor será criado.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.browsers`
      </td>

      <td>
        Matriz
      </td>

      <td>
        Sim
      </td>

      <td>
        Browser(es) que o monitor usará para executar tarefas. Navegadores suportados: 

        `CHROME`

        , 

        `EDGE`

        , 

        `FIREFOX`

        .
      </td>
    </tr>

    <tr>
      <td>
        `monitor.devices`
      </td>

      <td>
        Matriz
      </td>

      <td>
        Sim
      </td>

      <td>
        Dispositivos que o monitor usará para executar tarefas. Dispositivos suportados: 

        `DESKTOP`

        , 

        `MOBILE_LANDSCAPE`

        , 

        `MOBILE_PORTRAIT`

        , 

        `TABLET_LANDSCAPE`

        , 

        `TABLET_PORTRAIT`

        .
      </td>
    </tr>

    <tr>
      <td>
        `monitor.locations.public`
      </td>

      <td>
        Matriz
      </td>

      <td>
        Sim
      </td>

      <td>
        matriz de 

        [localização pública](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors/#setting-location)

         identificadar onde o monitor executará verificações (por exemplo, 

        `["US_EAST_1", "US_WEST_1"]`

        ).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.name`
      </td>

      <td>
        Corda
      </td>

      <td>
        Sim
      </td>

      <td>
        O nome que será exibido no seu monitor de passos.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.period`
      </td>

      <td>
        Enum
      </td>

      <td>
        Sim
      </td>

      <td>
        Com que frequência o monitor é executado? Opções: 

        `EVERY_MINUTE`

        , 

        `EVERY_5_MINUTES`

        , 

        `EVERY_10_MINUTES`

        , 

        `EVERY_15_MINUTES`

        , 

        `EVERY_30_MINUTES`

        , 

        `EVERY_HOUR`

        , 

        `EVERY_6_HOURS`

        , 

        `EVERY_12_HOURS`

        , 

        `EVERY_DAY`

        .
      </td>
    </tr>

    <tr>
      <td>
        `monitor.runtime.runtimeType`
      </td>

      <td>
        Corda
      </td>

      <td>
        Sim
      </td>

      <td>
        O tipo de tempo de execução usado pelo seu monitor. 

        `CHROME_BROWSER`

         é o único valor aceito.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.runtime.runtimeTypeVersion`
      </td>

      <td>
        Corda
      </td>

      <td>
        Sim
      </td>

      <td>
        A versão do tipo de tempo de execução usada pelo seu monitor. 

        `100`

         é o único valor aceito.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.runtime.scriptLanguage`
      </td>

      <td>
        Corda
      </td>

      <td>
        Sim
      </td>

      <td>
        O idioma utilizado no seu monitor. 

        `JAVASCRIPT`

         é o único valor aceito.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.status`
      </td>

      <td>
        Enum
      </td>

      <td>
        Sim
      </td>

      <td>
        O estado do monitor. Opções: 

        `ENABLED`

         (monitor ativo e realizando verificações), 

        `DISABLED`

         (monitor inativo).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.steps`
      </td>

      <td>
        Matriz
      </td>

      <td>
        Sim
      </td>

      <td>
        A sequência de etapas que o monitor executará. Cada objeto de passo contém: 

        `ordinal`

         (posição do passo, 0-99), 

        `type`

         (tipo de passo como 

        `NAVIGATE`

        , 

        `CLICK_ELEMENT`

        , 

        `DOUBLE_CLICK_ELEMENT`

        , 

        `ASSERT_TEXT`

        , 

        `ASSERT_TITLE`

        , etc) e 

        `values`

         (matriz de valores específicos para o tipo de passo).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.advancedOptions.enableScreenshotOnFailureAndScript`
      </td>

      <td>
        Boleano
      </td>

      <td>
        Não
      </td>

      <td>
        Captura uma tela durante a execução da tarefa quando ocorre uma falha ou um script é executado.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.apdexTarget`
      </td>

      <td>
        Float
      </td>

      <td>
        Não
      </td>

      <td>
        O monitor Apdex destino em segundos, usado para preencher relatórios SLA. O valor padrão é de 7,0 segundos.
      </td>
    </tr>
  </tbody>
</table>

### Solicitação de amostra

```graphql
mutation {
  syntheticsCreateStepMonitor(
    accountId: ACCOUNT_ID
    monitor: {
      browsers: [BROWSERS]
      devices: [DEVICES]
      locations: { public: ["LOCATION_1", "LOCATION_2"] }
      name: "MONITOR_NAME"
      period: PERIOD
      runtime: {
        runtimeType: "RUNTIME_TYPE"
        runtimeTypeVersion: "RUNTIME_TYPE_VERSION"
        scriptLanguage: "SCRIPT_LANGUAGE"
      }
      status: STATUS
      steps: [
        {
          ordinal: 0,
          type: NAVIGATE,
          values: ["MONITORED_URI", "USER_AGENT"] }
        {
          ordinal: STEP_NUMBER
          type: STEP_TYPE
          values: ["CONDITIONAL_TYPE", "VALUE"]
        }
      ]
      advancedOptions: { enableScreenshotOnFailureAndScript: ENABLE_SCREENSHOT }
      apdexTarget: APDEX_TARGET
    }
  ) {
    errors {
      description
      type
    }
  }
}
```

### Resposta de amostra

Uma resposta bem-sucedida retorna `null` para erros:

```json
{
  "data": {
    "syntheticsCreateStepMonitor": {
      "errors": null
    }
  }
}
```

Se houver algum problema ao criar o monitor, a matriz `errors` conterá objetos com campos `description` e `type` explicando o que deu errado.

## Atualizar um monitor de etapas [#update-step-monitor]

Você pode atualizar um monitor de passos existente usando a mutação `syntheticsUpdateStepMonitor`. Isso permite modificar a configuração de um monitor de passos que já foi criado.

### Parâmetro de entrada

<table>
  <thead>
    <tr>
      <th>
        Parâmetro
      </th>

      <th>
        Tipo de dados
      </th>

      <th>
        É obrigatório?
      </th>

      <th>
        Descrição
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `guid`
      </td>

      <td>
        Corda
      </td>

      <td>
        Sim
      </td>

      <td>
        O 

        [GUID](/docs/apis/nerdgraph/examples/synthetics-api/query-synthetics-data#query-monitors)

         exclusivo da entidade do monitor que você deseja atualizar.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.browsers`
      </td>

      <td>
        Matriz
      </td>

      <td>
        Não
      </td>

      <td>
        Browser(es) que o monitor usará para executar tarefas. Navegadores suportados: 

        `CHROME`

        , 

        `EDGE`

        , 

        `FIREFOX`

        .
      </td>
    </tr>

    <tr>
      <td>
        `monitor.devices`
      </td>

      <td>
        Matriz
      </td>

      <td>
        Não
      </td>

      <td>
        Dispositivos que o monitor usará para executar tarefas. Dispositivos suportados: 

        `DESKTOP`

        , 

        `MOBILE_LANDSCAPE`

        , 

        `MOBILE_PORTRAIT`

        , 

        `TABLET_LANDSCAPE`

        , 

        `TABLET_PORTRAIT`

        .
      </td>
    </tr>

    <tr>
      <td>
        `monitor.locations.public`
      </td>

      <td>
        Matriz
      </td>

      <td>
        Não
      </td>

      <td>
        matriz de 

        [localização pública](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors/#setting-location)

         identificadar onde o monitor executará verificações (por exemplo, 

        `["US_EAST_1", "US_WEST_1"]`

        ).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.name`
      </td>

      <td>
        Corda
      </td>

      <td>
        Não
      </td>

      <td>
        O nome de exibição atualizado para o seu monitor de passos.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.period`
      </td>

      <td>
        Enum
      </td>

      <td>
        Não
      </td>

      <td>
        Com que frequência o monitor é executado? Opções: 

        `EVERY_MINUTE`

        , 

        `EVERY_5_MINUTES`

        , 

        `EVERY_10_MINUTES`

        , 

        `EVERY_15_MINUTES`

        , 

        `EVERY_30_MINUTES`

        , 

        `EVERY_HOUR`

        , 

        `EVERY_6_HOURS`

        , 

        `EVERY_12_HOURS`

        , 

        `EVERY_DAY`

        .
      </td>
    </tr>

    <tr>
      <td>
        `monitor.runtime.runtimeType`
      </td>

      <td>
        Corda
      </td>

      <td>
        Não
      </td>

      <td>
        O tipo de tempo de execução usado pelo seu monitor. 

        `CHROME_BROWSER`

         é o único valor aceito.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.runtime.runtimeTypeVersion`
      </td>

      <td>
        Corda
      </td>

      <td>
        Não
      </td>

      <td>
        A versão do tipo de tempo de execução usada pelo seu monitor. 

        `100`

         é o único valor aceito.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.runtime.scriptLanguage`
      </td>

      <td>
        Corda
      </td>

      <td>
        Não
      </td>

      <td>
        O idioma utilizado no seu monitor. 

        `JAVASCRIPT`

         é o único valor aceito.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.status`
      </td>

      <td>
        Enum
      </td>

      <td>
        Não
      </td>

      <td>
        O estado do monitor. Opções: 

        `ENABLED`

         (monitor ativo e realizando verificações), 

        `DISABLED`

         (monitor inativo).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.steps`
      </td>

      <td>
        Matriz
      </td>

      <td>
        Não
      </td>

      <td>
        A sequência de etapas que o monitor executará. Cada objeto de passo contém: 

        `ordinal`

         (posição do passo, 0-99), 

        `type`

         (tipo de passo como 

        `NAVIGATE`

        , 

        `CLICK_ELEMENT`

        , 

        `DOUBLE_CLICK_ELEMENT`

        , 

        `ASSERT_TEXT`

        , 

        `ASSERT_TITLE`

        , etc) e 

        `values`

         (matriz de valores específicos para o tipo de passo).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.advancedOptions.enableScreenshotOnFailureAndScript`
      </td>

      <td>
        Boleano
      </td>

      <td>
        Não
      </td>

      <td>
        Captura uma tela durante a execução da tarefa quando ocorre uma falha ou um script é executado.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.apdexTarget`
      </td>

      <td>
        Float
      </td>

      <td>
        Não
      </td>

      <td>
        O monitor Apdex destino em segundos, usado para preencher relatórios SLA. O valor padrão é de 7,0 segundos.
      </td>
    </tr>
  </tbody>
</table>

### Solicitação de amostra

```graphql
mutation {
  syntheticsUpdateStepMonitor(
    guid: ENTITY_GUID
    monitor: {
      browsers: [BROWSERS]
      devices: [DEVICES]
      locations: { public: ["LOCATION_1", "LOCATION_2"] }
      name: "MONITOR_NAME"
      period: PERIOD
      runtime: {
        runtimeType: "RUNTIME_TYPE"
        runtimeTypeVersion: "RUNTIME_TYPE_VERSION"
        scriptLanguage: "SCRIPT_LANGUAGE"
      }
      status: STATUS
      steps: [
        {
          ordinal: 0,
          type: NAVIGATE,
          values: ["MONITORED_URI", "USER_AGENT"]
        }
        {
          ordinal: STEP_NUMBER,
          type: STEP_TYPE,
          values: ["VALUE_1", "VALUE_2"]
        }
      ]
      advancedOptions: { enableScreenshotOnFailureAndScript: ENABLE_SCREENSHOT }
      apdexTarget: APDEX_TARGET
    }
  ) {
    errors {
      description
      type
    }
  }
}
```

### Resposta de amostra

Uma resposta bem-sucedida retorna `null` para erros:

```json
{
  "data": {
    "syntheticsUpdateStepMonitor": {
      "errors": null
    }
  }
}
```

Se houver algum problema ao atualizar o monitor, a matriz `errors` conterá objetos com campos `description` e `type` explicando o que deu errado.

## Excluir monitor de passos [#delete-monitor]

Quando um monitor de passos não for mais necessário, você pode removê-lo permanentemente usando a mutação `syntheticsDeleteMonitor`.

Para excluir um monitor, consulte a seção [Excluir monitor Sintético](/docs/apis/nerdgraph/examples/synthetics-api/ping-monitor/#delete-monitor).