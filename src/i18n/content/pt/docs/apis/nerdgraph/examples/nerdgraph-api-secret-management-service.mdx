---
title: 'Tutorial do NerdGraph: Serviço de gerenciamento de segredos'
metaDescription: Learn how to use the Secrets management service to securely store and manage your secrets.
freshnessValidatedDate: never
translationType: machine
---

Ao trabalhar com o New Relic, pode ser necessário armazenar informações confidenciais, como chaves de API e credenciais de aplicativos. No New Relic, esses são chamados de segredos. O <DNT>Secrets management service</DNT> fornece uma maneira segura de armazenar e recuperar esses segredos em um local centralizado por meio de nossa [API NerdGraph](/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph/).

<Callout variant="important">
  Você pode armazenar segredos apenas em formato de string.
</Callout>

Os principais recursos do <DNT>Secrets management service</DNT> são:

* **Chaves exclusivas para segredos**: Você pode evitar a exposição acidental de segredos atribuindo uma chave exclusiva a cada um ao armazená-los. Use a chave para recuperar e gerenciar os segredos.

* **Segredos armazenados no [nível da conta ou organização](/docs/accounts/accounts-billing/account-structure/new-relic-account-structure/)**: Para acessar e usar um segredo em várias contas, você pode armazená-lo no nível da organização. Se um segredo é específico para uma única conta, você pode armazená-lo no nível da conta.

* **Versões de segredos**: você pode atualizar um segredo sem perder a versão anterior. O <DNT>Secrets management service</DNT> acompanha todas as versões de um segredo.

* **Exclusão controlada e recuperação de segredos**: O serviço permite a exclusão recuperável de segredos. Usuários sem a permissão Purge podem excluir segredos de forma reversível. A exclusão permanente é restrita a usuários com a permissão Purge.

* **Segredos padrão com acesso baseado em função**: segredos padrão são acessíveis a todos os usuários com permissões na conta ou organização. Os administradores controlam o acesso atribuindo funções personalizadas com níveis de permissão que variam de <DNT>**View**</DNT> a <DNT>**Purge**</DNT>.

* **Segredos compartilháveis com acesso granular**: segredos compartilháveis são privados por padrão para o criador, que pode conceder permissões específicas (leitura, atualização, exclusão) a usuários individuais, grupos ou identidades do sistema. Os administradores da organização mantêm acesso total a todos os segredos compartilháveis para supervisão e gerenciamento.

## Cobrança dos serviços de gerenciamento de segredos [#secrets-management-services-billing]

O <DNT>Secrets management service</DNT> é um recurso do Advanced Compute Product oferecido como um [complemento](/docs/accounts/accounts-billing/new-relic-one-pricing-billing/add-on-billing) ou como parte do modelo de preços do Compute. CCUs [Avançadas](/docs/licenses/license-information/product-definitions/new-relic-one-pricing-definitions/#compute-capacity-unit) são consumidas quando as consultas do NerdGraph são executadas para armazenar, recuperar ou gerenciar segredos.

## Controle de acesso a segredos padrão [#security-and-access-control]

Usuários com [funções padrão](/docs/accounts/accounts-billing/new-relic-one-user-management/user-management-concepts/#standard-roles) podem acessar o <DNT>Secrets management service</DNT> específico das contas às quais têm acesso, com as seguintes permissões.

* **Somente leitura**: Os usuários só podem recuperar segredos. Eles não podem criar, atualizar ou excluir segredos.

* **Usuário padrão**: Os usuários podem criar, atualizar, recuperar e excluir segredos de forma reversível.

* **Administrador de todos os produtos**: Os usuários têm acesso total ao <DNT>Secrets management service</DNT>. Eles podem criar, atualizar, recuperar, excluir suavemente, excluir permanentemente e buscar a lista de segredos.

* **Usuário de cobrança**: Os usuários só podem obter a lista de segredos.

Para gerenciar segredos no nível da conta com uma função não padrão, peça ao seu administrador para [criar uma função personalizada](/docs/accounts/accounts-billing/new-relic-one-user-management/account-user-mgmt-tutorial/#roles) com as permissões necessárias e atribuí-las ao seu grupo de usuários.

Para gerenciar segredos no nível da organização, peça ao seu administrador para criar uma [função personalizada com escopo de organização via a API NerdGraph](https://docs.newrelic.com/docs/apis/nerdgraph/examples/nerdgraph-manage-groups/#create-role), adicione as permissões necessárias e atribua-a ao grupo de usuários. [Gerenciadores da organização](/docs/accounts/accounts-billing/new-relic-one-user-management/user-management-concepts/#admin-settings) têm permissões padrão no nível da organização, mas para permitir que eles gerenciem segredos, peça ao seu administrador para atribuir a eles uma função personalizada específica para <DNT>Secrets management service</DNT>.

<Callout variant="important">
  Configure e defina os usuários, funções, permissões e o acesso ao <DNT>Secrets management service</DNT> no nível da conta e da organização, de acordo com as políticas e requisitos da sua organização.
</Callout>

## Segredos compartilháveis com acesso detalhado [#sharable-secrets]

Embora segredos padrão sejam acessíveis a todos os usuários com permissões em uma conta ou organização, empresas com várias equipes geralmente precisam restringir segredos a indivíduos específicos. Segredos compartilháveis atendem a essa necessidade.

<Callout variant="important">
  Para trabalhar com segredos compartilháveis, os usuários devem primeiro ter as permissões básicas descritas em [Controle de acesso a segredos padrão](#security-and-access-control). As permissões de acesso detalhadas descritas abaixo são **adicionais às** exigências básicas.
</Callout>

Ao criar um segredo compartilhável, você se torna automaticamente seu proprietário com controle total. Você pode conceder acesso a usuários, grupos ou identidades do sistema atribuindo permissões individuais ou usando funções que agrupam várias permissões.

**Permissões individuais (concedidas além do acesso base):**

* **Ler**: Recuperar o valor do segredo
* **Atualizar**: Alterar o valor do segredo
* **Excluir**: Remover o segredo

**Funções predefinidas (concedidas além do acesso base):**

* **Proprietário do segredo**: Controle total (leitura, atualização, exclusão, concessão/revogação)
* **Secret Reader**: Acesso somente leitura

Você também pode [criar funções personalizadas](\(/docs/accounts/accounts-billing/new-relic-one-user-management/account-user-mgmt-tutorial/#roles\)) que combinam permissões específicas com base em suas necessidades. Os administradores da organização mantêm acesso total a todos os segredos compartilháveis ​​para supervisão.

Quando você precisa de um monitor sintético, workflow ou outro processo automatizado para acessar seu segredo, você concede acesso à sua identidade do sistema. Uma identidade do sistema é um identificador exclusivo atribuído a cada processo automatizado no New Relic. Ao vincular um segredo a um monitor ou workflow por meio da interface do usuário do New Relic, a identidade do sistema para esse processo automatizado é usada para controlar o acesso em tempo de execução.

<Callout variant="important">
  Segredos padrão não podem ser convertidos em segredos compartilháveis. Para migrar um segredo padrão existente, crie um novo segredo compartilhável com o mesmo valor, conceda o acesso apropriado, atualize seus aplicativos e exclua o segredo antigo.
</Callout>

## Pré-requisitos [#prerequisites]

Para usar o <DNT>Secrets management service</DNT>, você precisa:

* O plano de preços [Advanced Compute](/docs/accounts/accounts-billing/new-relic-one-pricing-billing/add-on-billing)
* Uma [conta New Relic](https://newrelic.com/signup)
* Sua chave de usuário da API para [consultas e mutações](\(https://docs.newrelic.com/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph/#terminology\))
* Permissões apropriadas para criar e gerenciar segredos. Consulte [Controle de acesso a segredos padrão](#security-and-access-control) e [Segredos compartilháveis com acesso detalhado](#sharable-secrets) para obter detalhes sobre as funções e permissões necessárias.

O tipo de usuário e as funções atribuídas podem afetar suas permissões do NerdGraph. Para mais detalhes, consulte [Fatores que afetam o acesso](https://docs.newrelic.com/docs/accounts/accounts-billing/account-structure/factors-affecting-access-features-data/#user-permissions).

## Use o <DNT>Secrets management service</DNT> [#use-secrets-management-service]

Do [NerdGraph Explorer](/docs/apis/nerdgraph/get-started/nerdgraph-explorer/), use [mutações e consultas](/docs/accounts/accounts-billing/account-structure/factors-affecting-access-features-data/#user-permissions) para interagir com o <DNT>Secrets management service</DNT>.

Aqui estão os atributos comuns que você usará nas mutações e consultas:

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        **Nome do atributo**
      </th>

      <th style={{ width: "200px" }}>
        **Tipo de dados**
      </th>

      <th>
        **Descrição**
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `description`
      </td>

      <td>
        Corda
      </td>

      <td>
        Uma breve descrição do segredo.
      </td>
    </tr>

    <tr>
      <td>
        `key`
      </td>

      <td>
        Corda
      </td>

      <td>
        Um identificador exclusivo para o segredo dentro de um namespace. A mesma chave pode existir em diferentes namespaces.
      </td>
    </tr>

    <tr>
      <td>
        `namespace`
      </td>

      <td>
        Corda
      </td>

      <td>
        Serve como um agrupamento lógico de segredos, organizando-os e categorizando-os para aprimorar o gerenciamento e evitar conflitos. Ele se combina com a chave para criar um endereço exclusivo para o segredo. Este atributo é benéfico em ambientes com várias equipes ou projetos usando o New Relic.
      </td>
    </tr>

    <tr>
      <td>
        `scope`
      </td>

      <td>
        * `type`: Enum
        * `id`: corda
      </td>

      <td>
        O escopo de armazenamento dos segredos em termos de sua acessibilidade. Os atributos definidores são:

        * `type`: Para usar o segredo em várias contas, selecione `Organization`. Se o segredo for específico para uma única conta, selecione `Account`. Para armazenar um segredo no nível da organização, você deve ter a [função personalizada com escopo de organização](https://docs.newrelic.com/docs/apis/nerdgraph/examples/nerdgraph-manage-groups/#create-role) com as permissões necessárias. Consulte a seção [Controle de acesso](#security-and-access-control) para obter mais detalhes.

        * `id`: ID da conta ou organização correspondente.
      </td>
    </tr>

    <tr>
      <td>
        `tags`
      </td>

      <td>
        Matriz
      </td>

      <td>
        Funciona como pares de chave-valor que adicionam metadados às suas entidades, incluindo aplicativos, serviços e hosts. Usando tags, você pode aprimorar a capacidade de organizar, filtrar e gerenciar segredos.
      </td>
    </tr>

    <tr>
      <td>
        `value`
      </td>

      <td>
        Corda
      </td>

      <td>
        O segredo real.
      </td>
    </tr>

    <tr>
      <td>
        `purge`
      </td>

      <td>
        Boleano
      </td>

      <td>
        Exclui todas as versões do segredo.

        * `true`: Exclui o segredo permanentemente.
        * `false`: Você pode recuperar o segredo excluído com todas as suas versões.

        Somente todos os administradores de produto ou um usuário com uma função personalizada com permissão `purge` podem excluir segredos permanentemente. Para mais detalhes, consulte a seção [Controle de acesso](#security-and-access-control).
      </td>
    </tr>

    <tr>
      <td>
        `version`
      </td>

      <td>
        Corda
      </td>

      <td>
        Como você pode armazenar várias versões de um segredo, ele representa o número da versão do segredo.
      </td>
    </tr>

    <tr>
      <td>
        `cursor` (Opcional)
      </td>

      <td>
        Corda
      </td>

      <td>
        Ao recuperar uma lista de segredos, se a resposta contiver o atributo `nextCursor`, isso indica que há mais segredos disponíveis além da página atual de resultados. Para acessar a próxima página de resultados, use o valor `nextCursor` no atributo `cursor` e execute a consulta novamente.
      </td>
    </tr>
  </tbody>
</table>

<Callout variant="important">
  Copie seu segredo real apenas no atributo `value`. Certifique-se de que ele não seja declarado em nenhum outro atributo, como `description`, `key` ou `namespace`.
</Callout>

### Operações [#operations]

As operações que você pode realizar com <DNT>Secrets management service</DNT> são organizadas em duas categorias:

<Callout variant="tip">
  **Escolhendo entre segredos padrão e compartilháveis:**

  * Use **segredos padrão** (`secretsManagementCreateSecret`) quando quiser compartilhar um segredo com todos os usuários que têm acesso à conta ou organização.
  * Use **segredos compartilháveis** (`secretsManagementCreateShareableSecret`) quando precisar controlar exatamente quem pode acessar um segredo, concedendo permissões a usuários, grupos ou identidades de sistema específicos.
</Callout>

<CollapserGroup>
  <Collapser id="create-secret" title="Armazenar um segredo">
    Use a mutação `secretsManagementCreateSecret` com os seguintes parâmetros para armazenar um segredo padrão que estará acessível a todos os usuários com permissões na conta ou organização especificada.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nome do atributo**
          </th>

          <th style={{ width: "200px" }}>
            **Tipo de dados**
          </th>

          <th>
            **Descrição**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `description` (Opcional)
          </td>

          <td>
            Corda
          </td>

          <td>
            Forneça uma descrição para o segredo.
          </td>
        </tr>

        <tr>
          <td>
            `key` (Obrigatório)
          </td>

          <td>
            Corda
          </td>

          <td>
            Atribua uma chave exclusiva para o segredo.
          </td>
        </tr>

        <tr>
          <td>
            `namespace` (Opcional)
          </td>

          <td>
            Corda
          </td>

          <td>
            Atribua um nome se quiser armazenar o segredo em um namespace específico.
          </td>
        </tr>

        <tr>
          <td>
            `scope` (Obrigatório)
          </td>

          <td />

          <td>
            `type`: Enum `id`: string
          </td>

          <td>
            * `type`: Com base em sua [função](#security-and-access-control) e requisitos, selecione `Account` ou `Organization`.
            * `id`: Insira o ID da conta ou da organização correspondente.
          </td>
        </tr>

        <tr>
          <td>
            `tags` (Opcional)
          </td>

          <td>
            Matriz
          </td>

          <td>
            Atribua um par de chave e valor.
          </td>
        </tr>

        <tr>
          <td>
            `value` (Obrigatório)
          </td>

          <td>
            Corda
          </td>

          <td>
            Insira o segredo real.
          </td>
        </tr>
      </tbody>
    </table>

    #### Consulta de exemplo:

    ```graphql
    mutation {
      secretsManagementCreateSecret(
        description: "ZXY"
        key: "Test2"
        scope: {id: 1, type: ACCOUNT}
        value: "1990@123"
        namespace: "Namespace1"
      )
    }

    ```

    ### Resposta

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nome do atributo**
          </th>

          <th>
            **Descrição**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `description`
          </td>

          <td>
            A descrição do segredo, se fornecida.
          </td>
        </tr>

        <tr>
          <td>
            `key`
          </td>

          <td>
            A chave atribuída.
          </td>
        </tr>

        <tr>
          <td>
            `latestVersion`
          </td>

          <td>
            A versão do segredo. Se você criou um novo segredo, a versão será `0`.
          </td>
        </tr>

        <tr>
          <td>
            `metadata`
          </td>

          <td>
            Metadados associados ao segredo, se houver.
          </td>
        </tr>

        <tr>
          <td>
            `namespace`
          </td>

          <td>
            O namespace do segredo, se fornecido.
          </td>
        </tr>

        <tr>
          <td>
            `scope`
          </td>

          <td>
            O ID da conta ou organização associado ao segredo.
          </td>
        </tr>

        <tr>
          <td>
            `tags`
          </td>

          <td>
            O par de chave e valor associado ao segredo, se houver.
          </td>
        </tr>
      </tbody>
    </table>

    #### Resposta de exemplo:

    ```json
    {
    "data": {
    "secretsManagementCreateSecret": {
      "description": "ZXY",
      "key": "Test2",
      "latestVersion": 0,
      "scope": {
        "id": "1",
        "type": "ACCOUNT"
      }
    }
    }
    ```
  </Collapser>

  <Collapser id="create-sharable-secret" title="Armazenar um segredo compartilhável">
    Use a mutação `secretsManagementCreateShareableSecret` para criar um segredo privado com controle de acesso detalhado. Ao criar um segredo compartilhável, você se torna automaticamente o proprietário com controle total sobre quem pode acessá-lo.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nome do atributo**
          </th>

          <th style={{ width: "200px" }}>
            **Tipo de dados**
          </th>

          <th>
            **Descrição**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `description` (Opcional)
          </td>

          <td>
            Corda
          </td>

          <td>
            Forneça uma descrição para o segredo.
          </td>
        </tr>

        <tr>
          <td>
            `key` (Obrigatório)
          </td>

          <td>
            Corda
          </td>

          <td>
            Atribua uma chave exclusiva para o segredo.
          </td>
        </tr>

        <tr>
          <td>
            `namespace` (Opcional)
          </td>

          <td>
            Corda
          </td>

          <td>
            Atribua um nome se quiser armazenar o segredo em um namespace específico.
          </td>
        </tr>

        <tr>
          <td>
            `scope` (Obrigatório)
          </td>

          <td />

          <td>
            `type`: Enum `id`: string
          </td>

          <td>
            * `type`: Com base em sua [função](#security-and-access-control) e requisitos, selecione `Account` ou `Organization`.
            * `id`: Insira o ID da conta ou da organização correspondente.
          </td>
        </tr>

        <tr>
          <td>
            `tags` (Opcional)
          </td>

          <td>
            Matriz
          </td>

          <td>
            Atribua um par de chave e valor.
          </td>
        </tr>

        <tr>
          <td>
            `value` (Obrigatório)
          </td>

          <td>
            Corda
          </td>

          <td>
            Insira o segredo real.
          </td>
        </tr>
      </tbody>
    </table>

    #### Consulta de exemplo:

    ```graphql
    mutation {
      secretsManagementCreateShareableSecret(
        scope: {type: ACCOUNT, id: 1}
        key: "prod-api-key"
        value: "sk_live_abc123xyz"
        namespace: "production"
        description: "Private API key for production"
        tags: [{key: "environment", value: "production"}]
      ) {
        scope {
          type
          id
        }
        key
        namespace
        latestVersion
        description
        tags {
          key
          value
        }
        metadata {
          createdAt
          updatedAt
        }
      }
    }

    ```

    ### Resposta

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nome do atributo**
          </th>

          <th>
            **Descrição**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `description`
          </td>

          <td>
            A descrição do segredo, se fornecida.
          </td>
        </tr>

        <tr>
          <td>
            `key`
          </td>

          <td>
            A chave atribuída.
          </td>
        </tr>

        <tr>
          <td>
            `latestVersion`
          </td>

          <td>
            A versão do segredo. Se você criou um novo segredo, a versão será `0`.
          </td>
        </tr>

        <tr>
          <td>
            `metadata`
          </td>

          <td>
            Metadados associados ao segredo, incluindo:

            * `createdAt`: Timestamp quando o segredo foi criado
            * `updatedAt`: Timestamp em que o segredo foi atualizado pela última vez
          </td>
        </tr>

        <tr>
          <td>
            `namespace`
          </td>

          <td>
            O namespace do segredo, se fornecido.
          </td>
        </tr>

        <tr>
          <td>
            `scope`
          </td>

          <td>
            O ID da conta ou organização associado ao segredo.
          </td>
        </tr>

        <tr>
          <td>
            `tags`
          </td>

          <td>
            O par de chave e valor associado ao segredo, se houver.
          </td>
        </tr>
      </tbody>
    </table>

    #### Resposta de exemplo:

    ```json
    {
    "data": {
    "secretsManagementCreateShareableSecret": {
      "scope": {
        "type": "ACCOUNT",
        "id": "1"
      },
      "key": "prod-api-key",
      "namespace": "production",
      "latestVersion": 0,
      "description": "Private API key for production",
      "tags": [
        {
          "key": "environment",
          "value": "production"
        }
      ],
      "metadata": {
        "createdAt": "2025-10-30T12:34:56.789Z",
        "updatedAt": "2025-10-30T12:34:56.789Z"
      }
    }
    }
    }
    ```

    <Callout variant="tip">
      Após criar um segredo compartilhável, você se torna o proprietário automaticamente. Para conceder acesso a outros usuários, grupos ou identidades do sistema, use a mutação `authorizationManagementGrantAccess`. Para mais detalhes, consulte a seção [Conceder acesso a um segredo compartilhável](#grant-access-sharable-secret).
    </Callout>
  </Collapser>

  <Collapser id="retrieve-secret" title="Recuperar um segredo">
    Use a consulta `{customerAdministration {secret}}` para recuperar segredos junto com seus detalhes. Você pode recuperar segredos que são restritos apenas à sua conta ou organização atual.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nome do atributo**
          </th>

          <th style={{ width: "200px" }}>
            **Tipo de dados**
          </th>

          <th>
            **Descrição**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `key` (Obrigatório)
          </td>

          <td>
            Corda
          </td>

          <td>
            Chave do segredo que você deseja recuperar.
          </td>
        </tr>

        <tr>
          <td>
            `namespace` (Opcional)
          </td>

          <td>
            Corda
          </td>

          <td>
            O namespace do segredo, se disponível.
          </td>
        </tr>

        <tr>
          <td>
            `scope` (Obrigatório)
          </td>

          <td />

          <td>
            `type`: Enum `id`: string
          </td>

          <td>
            * `type`: Selecione `account` ou `organization` em qual nível o segredo é armazenado.
            * `id`: Insira o ID da conta ou da organização correspondente.
          </td>
        </tr>

        <tr>
          <td>
            `unlock` (Opcional)
          </td>

          <td>
            Corda
          </td>

          <td>
            O valor padrão `false` retorna os metadados do segredo sem desbloqueá-lo. Se você deseja desbloquear o segredo e recuperar seu valor real, defina-o como `true`.
          </td>
        </tr>

        <tr>
          <td>
            `version` (Opcional)
          </td>

          <td>
            Inteiro
          </td>

          <td>
            Insira uma versão específica do segredo que você deseja recuperar. Se você não fornecer uma versão, a versão mais recente será recuperada.
          </td>
        </tr>
      </tbody>
    </table>

    #### Consulta de exemplo:

    ```graphql
    {
      customerAdministration {
        secret(key: "Test2", scope: {id: 1, type: ACCOUNT}, unlock: true)
      }
    }
    ```

    ### Resposta

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nome do atributo**
          </th>

          <th>
            **Descrição**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `description`
          </td>

          <td>
            A descrição do segredo.
          </td>
        </tr>

        <tr>
          <td>
            `isSharable`
          </td>

          <td>
            Indica se o segredo é um [segredo compartilhável](#sharable-secrets) com controle de acesso detalhado. Se `true`, o segredo usa permissões detalhadas e é privado para o criador por padrão. Se `false`, é um segredo padrão acessível a todos os usuários com permissões na conta ou organização.
          </td>
        </tr>

        <tr>
          <td>
            `key`
          </td>

          <td>
            A chave do segredo.
          </td>
        </tr>

        <tr>
          <td>
            `metadata`
          </td>

          <td>
            Metadados associados ao segredo, se houver.
          </td>
        </tr>

        <tr>
          <td>
            `namespace`
          </td>

          <td>
            O namespace do segredo, se fornecido.
          </td>
        </tr>

        <tr>
          <td>
            `retrievedValue`
          </td>

          <td>
            * `value`: O valor real do segredo, se `unlock` estiver definido como `true`.
            * `version`: A versão do segredo.
          </td>
        </tr>

        <tr>
          <td>
            `scope`
          </td>

          <td>
            O ID da conta ou organização associado ao segredo.
          </td>
        </tr>

        <tr>
          <td>
            `tags`
          </td>

          <td>
            O par de chave e valor associado ao segredo, se houver.
          </td>
        </tr>
      </tbody>
    </table>

    #### Resposta de exemplo:

    ```json
    {
    "data": {
    "customerAdministration": {
      "secret": {
        "description": "ZXY",
        "isSharable": false,
        "key": "Test2",
        "namespace": null,
        "retrievedValue": {
          "value": "1995@123",
          "version": 1
        },
        "scope": {
          "id": "1",
          "type": "ACCOUNT"
        }
      }
    }
    }
    ```
  </Collapser>

  <Collapser id="update-secret" title="Atualizar um segredo">
    Use a mutação `secretsManagementUpdateSecret` para atualizar o valor dos segredos existentes.

    <Callout variant="tip">
      Cada operação de atualização cria uma nova versão do segredo. A versão mais alta é sempre a versão mais recente do segredo. Para recuperar versões mais antigas do segredo, você pode usar a consulta `{customerAdministration {secretVersions}}`. Para obter mais detalhes, consulte a seção [Recuperar todas as informações da versão de um segredo](#retrieve-secret-versions).
    </Callout>

    #### Parâmetros de entrada

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nome do atributo**
          </th>

          <th style={{ width: "200px" }}>
            **Tipo de dados**
          </th>

          <th>
            **Descrição**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `description` (Opcional)
          </td>

          <td>
            Corda
          </td>

          <td>
            Adicione uma descrição se quiser atualizar a existente.
          </td>
        </tr>

        <tr>
          <td>
            `key` (Obrigatório)
          </td>

          <td>
            Corda
          </td>

          <td>
            Insira a chave do segredo para o qual você deseja atualizar o valor.
          </td>
        </tr>

        <tr>
          <td>
            `namespace` (Opcional)
          </td>

          <td>
            Corda
          </td>

          <td>
            Namespace do segredo, se disponível.
          </td>
        </tr>

        <tr>
          <td>
            `scope` (Obrigatório)
          </td>

          <td />

          <td>
            `type`: Enum `id`: string
          </td>

          <td>
            * `type`: Selecione `Account` ou `Organization` em qual nível o segredo é armazenado.
            * `id`: Insira o ID da conta ou da organização correspondente.
          </td>
        </tr>

        <tr>
          <td>
            `value` (Obrigatório)
          </td>

          <td>
            Corda
          </td>

          <td>
            O valor atualizado para o segredo.
          </td>
        </tr>
      </tbody>
    </table>

    #### Consulta de exemplo:

    ```graphql
    mutation {
      secretsManagementUpdateSecret(
        key: "Test2"
        scope: {id: 1, type: ACCOUNT}
        value: "1995@123"
      )
    }
    ```

    ### Resposta

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nome do atributo**
          </th>

          <th>
            **Descrição**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `description`
          </td>

          <td>
            Descrição atualizada do segredo, se fornecida.
          </td>
        </tr>

        <tr>
          <td>
            `key`
          </td>

          <td>
            A chave do segredo.
          </td>
        </tr>

        <tr>
          <td>
            `latestVersion`
          </td>

          <td>
            O número da versão mais recente do segredo após a atualização.
          </td>
        </tr>

        <tr>
          <td>
            `metadata`
          </td>

          <td>
            Metadados associados ao segredo, se houver.
          </td>
        </tr>

        <tr>
          <td>
            `namespace`
          </td>

          <td>
            O namespace do segredo, se houver.
          </td>
        </tr>

        <tr>
          <td>
            `scope`
          </td>

          <td>
            O ID da conta ou organização associado ao segredo.
          </td>
        </tr>

        <tr>
          <td>
            `tags`
          </td>

          <td>
            O par de chave e valor associado ao segredo, se houver.
          </td>
        </tr>
      </tbody>
    </table>

    #### Resposta de exemplo:

    ```json
    {
      "data": {
        "secretsManagementUpdateSecret": {
          "description": "ZXY",
          "key": "Test2",
          "latestVersion": 1,
          "scope": {
            "id": "1",
            "type": "ACCOUNT"
          }
        }
      }
    ```
  </Collapser>

  <Collapser id="retrieve-secret-versions" title="Recuperar todas as informações de versão de um segredo">
    Use a consulta `{customerAdministration {secretVersions}}` para recuperar até 10 versões recentes de um segredo, juntamente com seus detalhes. Você pode recuperar segredos que são restritos apenas à sua conta ou organização atual.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nome do atributo**
          </th>

          <th style={{ width: "200px" }}>
            **Tipo de dados**
          </th>

          <th>
            **Descrição**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `fetchDeleted` (Opcional)
          </td>

          <td>
            Corda
          </td>

          <td>
            Para obter apenas as versões não excluídas do segredo, defina-o como `false`. Para obter versões do segredo, incluindo as excluídas suavemente, defina-o como `true`.
          </td>
        </tr>

        <tr>
          <td>
            `key` (Obrigatório)
          </td>

          <td>
            Corda
          </td>

          <td>
            Chave do segredo que você deseja recuperar.
          </td>
        </tr>

        <tr>
          <td>
            `namespace` (Opcional)
          </td>

          <td>
            Corda
          </td>

          <td>
            O namespace do segredo, se disponível.
          </td>
        </tr>

        <tr>
          <td>
            `scope` (Obrigatório)
          </td>

          <td />

          <td>
            `type`: Enum `id`: string
          </td>

          <td>
            * `type`: Selecione `account` ou `organization` em qual nível o segredo é armazenado.
            * `id`: Insira o ID da conta ou da organização correspondente.
          </td>
        </tr>
      </tbody>
    </table>

    #### Consulta de exemplo:

    ```graphql
    {
      customerAdministration {
        secretVersions(fetchDeleted: true, key: "Test2", scope: {id: 1, type: ACCOUNT})
      }
    }
    ```

    ### Resposta

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nome do atributo**
          </th>

          <th>
            **Descrição**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `key`
          </td>

          <td>
            A chave do segredo.
          </td>
        </tr>

        <tr>
          <td>
            `latestVersion`
          </td>

          <td>
            O número da versão mais recente do segredo.
          </td>
        </tr>

        <tr>
          <td>
            `namespace`
          </td>

          <td>
            O namespace do segredo, se fornecido.
          </td>
        </tr>

        <tr>
          <td>
            `scope`
          </td>

          <td>
            O ID da conta ou organização associado ao segredo.
          </td>
        </tr>

        <tr>
          <td>
            `secretVersions`
          </td>

          <td>
            Uma matriz de objetos contendo os detalhes de cada versão do segredo, incluindo:

            * `createdAt`: Carimbos de data/hora indicando quando cada versão foi criada.
            * `isDeleted`: Indica se a versão do segredo foi excluída ou não.
            * `version`: O número da versão do segredo.
          </td>
        </tr>
      </tbody>
    </table>

    #### Resposta de exemplo:

    ```json
    {
    "data": {
    "customerAdministration": {
      "secretVersions": {
        "key": "Test2",
        "latestVersion": 1,
        "namespace": null,
        "scope": {
          "id": "1",
          "type": "ACCOUNT"
        },
        "secretVersions": [
          {
            "createdAt": "2025-05-26T07:52:23.920250Z",
            "isDeleted": false,
            "version": 1
          },
          {
            "createdAt": "2025-05-26T07:45:19.395796Z",
            "isDeleted": false,
            "version": 0
          }
        ]
      }
    }
    }
    ```
  </Collapser>

  <Collapser id="delete-secrets" title="Excluir um segredo">
    Use a mutação `secretsManagementDeleteSecret` para excluir todas as versões de um segredo. Somente todos os administradores de produto ou um usuário com uma função personalizada com a permissão `purge` podem optar por excluir segredos permanentemente. Outros usuários não podem excluir segredos permanentemente. Se você não excluiu o segredo permanentemente, pode [recuperá-lo](#recover-secrets) usando a mutação `secretsManagementRecoverSecret`.

    #### Atributos de entrada

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nome do atributo**
          </th>

          <th style={{ width: "200px" }}>
            **Tipo de dados**
          </th>

          <th>
            **Descrição**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `key` (Obrigatório)
          </td>

          <td>
            Corda
          </td>

          <td>
            A chave para o segredo que você deseja excluir.
          </td>
        </tr>

        <tr>
          <td>
            `namespace` (Opcional)
          </td>

          <td>
            Corda
          </td>

          <td>
            Namespace do segredo, se disponível.
          </td>
        </tr>

        <tr>
          <td>
            `purge` (Obrigatório)
          </td>

          <td>
            Boleano
          </td>

          <td>
            Para excluir o segredo permanentemente, defina o valor como `true`. Para exclusão suave, defina o valor como `false`.
          </td>
        </tr>

        <tr>
          <td>
            `scope` (Obrigatório)
          </td>

          <td />

          <td>
            `type`: Enum `id`: string
          </td>

          <td>
            * `type`: Selecione o nível em que seu segredo é armazenado.
            * `id`: Insira o ID da conta ou da organização correspondente.
          </td>
        </tr>
      </tbody>
    </table>

    #### Consulta de exemplo:

    ```graphql

    mutation {
      secretsManagementDeleteSecret(
        key: "Test1"
        scope: {id: 1, type: ACCOUNT}
        purge: false
      )
    }

    ```

    ### Resposta

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nome do atributo**
          </th>

          <th>
            **Descrição**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `key`
          </td>

          <td>
            A chave do segredo excluído.
          </td>
        </tr>

        <tr>
          <td>
            `namespace`
          </td>

          <td>
            O namespace do segredo excluído, se disponível.
          </td>
        </tr>

        <tr>
          <td>
            `scope`
          </td>

          <td>
            O ID da conta ou organização associado ao segredo excluído.
          </td>
        </tr>
      </tbody>
    </table>

    #### Resposta de exemplo:

    ```json
    {
      "data": {
        "secretsManagementDeleteSecret": {
          "key": "Test1",
          "namespace": null,
          "scope": {
            "id": "1",
            "type": "ACCOUNT"
          }
        }
      },
    ```
  </Collapser>

  <Collapser id="recover-secrets" title="Recuperar um segredo">
    Use a mutação `secretsManagementRecoverSecret` para recuperar segredos que você excluiu usando a mutação `secretsManagementDeleteSecret` antes, com o atributo `purge` definido como `false`. Se um segredo for excluído permanentemente, você não poderá recuperá-lo.

    #### Atributos de entrada

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nome do atributo**
          </th>

          <th style={{ width: "200px" }}>
            **Tipo de dados**
          </th>

          <th>
            **Descrição**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `key` (Obrigatório)
          </td>

          <td>
            Corda
          </td>

          <td>
            A chave do segredo que você deseja recuperar.
          </td>
        </tr>

        <tr>
          <td>
            `namespace` (Opcional)
          </td>

          <td>
            Corda
          </td>

          <td>
            O namespace do segredo excluído, se disponível.
          </td>
        </tr>

        <tr>
          <td>
            `scope` (Obrigatório)
          </td>

          <td />

          <td>
            `type`: Enum `id`: string
          </td>

          <td>
            * `type`: Selecione `Account` ou `Organization` em qual nível o segredo foi armazenado.
            * `id`: Insira o ID correspondente da conta ou organização.
          </td>
        </tr>
      </tbody>
    </table>

    #### Consulta de exemplo:

    ```graphql
    mutation {
      secretsManagementRecoverSecret(key: "Test1", scope: {id: 1, type: ACCOUNT})
    }
    ```

    ### Resposta

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nome do atributo**
          </th>

          <th>
            **Descrição**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `key`
          </td>

          <td>
            A chave do segredo recuperado.
          </td>
        </tr>

        <tr>
          <td>
            `latestVersion`
          </td>

          <td>
            A versão mais recente do segredo recuperado.
          </td>
        </tr>

        <tr>
          <td>
            `namespace`
          </td>

          <td>
            O namespace do segredo recuperado, se disponível.
          </td>
        </tr>

        <tr>
          <td>
            `scope`
          </td>

          <td>
            O ID da conta ou organização associado ao segredo recuperado.
          </td>
        </tr>
      </tbody>
    </table>

    #### Resposta de exemplo:

    ```json
    {
      "data": {
        "secretsManagementRecoverSecret": {
          "key": "Test1",
          "latestVersion": 1,
          "namespace": null,
          "scope": {
            "id": "1",
            "type": "ACCOUNT"
          }
        }
      }
    ```
  </Collapser>

  <Collapser id="delete-secrets-version" title="Excluir uma versão específica de um segredo">
    Use a mutação `secretsManagementDeleteSecretVersion` para excluir uma versão específica de um segredo. Somente todos os administradores de produto ou um usuário com uma função personalizada com a permissão `purge` podem optar por excluí-la permanentemente. Outros usuários não podem excluir a versão do segredo permanentemente. Se você não excluiu a versão do segredo permanentemente, pode [recuperá-la](#recover-secrets-versions) usando a mutação `secretsManagementDeleteSecretVersion`.

    #### Atributos de entrada

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nome do atributo**
          </th>

          <th style={{ width: "200px" }}>
            **Tipo de dados**
          </th>

          <th>
            **Descrição**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `key` (Obrigatório)
          </td>

          <td>
            Corda
          </td>

          <td>
            A chave do segredo para o qual você deseja excluir uma das versões.
          </td>
        </tr>

        <tr>
          <td>
            `namespace` (Opcional)
          </td>

          <td>
            Corda
          </td>

          <td>
            Namespace do segredo, se disponível.
          </td>
        </tr>

        <tr>
          <td>
            `purge` (Obrigatório)
          </td>

          <td>
            Boleano
          </td>

          <td>
            Para excluir a versão do segredo permanentemente, defina o valor como `true`. Para exclusão suave, defina o valor como `false`.
          </td>
        </tr>

        <tr>
          <td>
            `scope` (Obrigatório)
          </td>

          <td />

          <td>
            `type`: Enum `id`: string
          </td>

          <td>
            * `type`: Selecione o nível em que seu segredo é armazenado.
            * `id`: Insira o ID correspondente da conta ou organização.
          </td>
        </tr>

        <tr>
          <td>
            `version` (Opcional)
          </td>

          <td>
            Corda
          </td>

          <td>
            A versão específica do segredo que você deseja excluir. Se você não fornecer uma versão, a versão mais recente será excluída e a versão anterior se tornará a versão mais recente.
          </td>
        </tr>
      </tbody>
    </table>

    #### Consulta de exemplo:

    ```graphql

    mutation {
      secretsManagementDeleteSecretVersion(
        key: "Test2"
        purge: false
        scope: {id: 1, type: ACCOUNT}
        version: 0
      )
    }

    ```

    ### Resposta

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nome do atributo**
          </th>

          <th>
            **Descrição**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `key`
          </td>

          <td>
            A chave do segredo.
          </td>
        </tr>

        <tr>
          <td>
            `latestVersion`
          </td>

          <td>
            A versão mais recente do segredo disponível após a exclusão da versão especificada.
          </td>
        </tr>

        <tr>
          <td>
            `namespace`
          </td>

          <td>
            O namespace do segredo, se disponível.
          </td>
        </tr>

        <tr>
          <td>
            `scope`
          </td>

          <td>
            O ID da conta ou organização associado ao segredo.
          </td>
        </tr>
      </tbody>
    </table>

    #### Resposta de exemplo:

    ```json
    {
      "data": {
        "secretsManagementDeleteSecretVersion": {
          "key": "Test2",
          "latestVersion": 1,
          "scope": {
            "id": "1"
          }
        }
      }
    ```
  </Collapser>

  <Collapser id="recover-secrets-versions" title="Recuperar uma versão do segredo">
    Use a mutação `secretsManagementRecoverSecretVersion` para recuperar uma versão específica do segredo que você excluiu de forma reversível usando a mutação `secretsManagementDeleteSecretVersion`. Se uma versão for excluída permanentemente, você não poderá recuperá-la.

    #### Atributos de entrada

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nome do atributo**
          </th>

          <th style={{ width: "200px" }}>
            **Tipo de dados**
          </th>

          <th>
            **Descrição**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `key` (Obrigatório)
          </td>

          <td>
            Corda
          </td>

          <td>
            A chave do segredo para o qual você deseja recuperar uma das versões.
          </td>
        </tr>

        <tr>
          <td>
            `namespace` (Opcional)
          </td>

          <td>
            Corda
          </td>

          <td>
            O namespace do segredo, se disponível.
          </td>
        </tr>

        <tr>
          <td>
            `scope` (Obrigatório)
          </td>

          <td />

          <td>
            `type`: Enum `id`: string
          </td>

          <td>
            * `type`: Selecione `Account` ou `Organization` em qual nível o segredo pertence.
            * `id`: Insira o ID correspondente da conta ou organização.
          </td>
        </tr>

        <tr>
          <td>
            `version` (Opcional)
          </td>

          <td>
            Corda
          </td>

          <td>
            Insira o número da versão do segredo que você deseja recuperar. Se você não fornecer uma versão, ele recupera a versão mais alta do segredo que foi excluída de forma reversível.
          </td>
        </tr>
      </tbody>
    </table>

    #### Consulta de exemplo:

    ```graphql
    mutation {
      secretsManagementRecoverSecretVersion(
        key: "Test2"
        scope: {id: 1, type: ACCOUNT}
        version: 0
      )
    }
    ```

    ### Resposta

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nome do atributo**
          </th>

          <th>
            **Descrição**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `key`
          </td>

          <td>
            A chave do segredo.
          </td>
        </tr>

        <tr>
          <td>
            `latestVersion`
          </td>

          <td>
            A versão mais recente do segredo após a recuperação.
          </td>
        </tr>

        <tr>
          <td>
            `namespace`
          </td>

          <td>
            O namespace do segredo, se disponível.
          </td>
        </tr>

        <tr>
          <td>
            `scope`
          </td>

          <td>
            O ID da conta ou organização associado ao segredo.
          </td>
        </tr>
      </tbody>
    </table>

    #### Resposta de exemplo:

    ```json
    {
      "data": {
        "secretsManagementRecoverSecretVersion": {
          "key": "Test2",
          "latestVersion": 1,
          "namespace": null,
          "scope": {
            "id": "1",
            "type": "ACCOUNT"
          }
        }
      }
    ```
  </Collapser>

  <Collapser id="secret-list" title="Recuperar a lista de segredos">
    Use a consulta `{customerAdministration {secrets}}` para recuperar uma lista de segredos disponíveis na conta ou organização. Você pode recuperar segredos que são restritos apenas à sua conta ou organização atual.

    <Callout variant="tip">
      A lista inclui todos os segredos no escopo, incluindo segredos compartilháveis ​​que você pode não ter permissão para acessar. As permissões de acesso são aplicadas quando você recupera o valor do segredo usando a operação [Recuperar um segredo](#retrieve-secret).
    </Callout>

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nome do atributo**
          </th>

          <th style={{ width: "200px" }}>
            **Tipo de dados**
          </th>

          <th>
            **Descrição**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `cursor` (Opcional)
          </td>

          <td>
            Corda
          </td>

          <td>
            Use o `cursor` para navegar pelas listas de segredos. Para obter a primeira página da lista de segredos, esse parâmetro não é necessário. Se você deseja acessar a próxima página, use o valor `NextCursor` da resposta anterior.
          </td>
        </tr>

        <tr>
          <td>
            `filter` (Obrigatório)
          </td>

          <td>
            * `deleted` (Opcional): Booleano

            * `namespace` (Opcional): String

            * `scope` (Obrigatório)

              * `type`: Enum
              * `id`: corda
          </td>

          <td>
            Adicione o seguinte filtro para aplicar os critérios de pesquisa:

            * `deleted`: Para obter todos os segredos, incluindo os excluídos suavemente, defina-o como `true`. Para obter apenas os segredos não excluídos, defina-o como `false`.
            * `namespace`: Para filtrar segredos por namespace, forneça o nome do namespace.
            * `scope`: Para filtrar segredos por escopo, forneça o nível (`Account` ou `Organization`) e o ID correspondente.
          </td>
        </tr>

        <tr>
          <td>
            `sort` (Opcional)
          </td>

          <td>
            * `direction` (Obrigatório): Booleano
            * `key` (Obrigatório): Booleano
          </td>

          <td>
            Para classificar a lista de segredos, forneça os seguintes atributos:

            * `direction`: Selecione `ASC` para ordem crescente ou `DESC` para ordem decrescente.
            * `key`: A opção disponível é `CREATED_AT`. Isso classifica os segredos com base em seu tempo de criação.
          </td>
        </tr>
      </tbody>
    </table>

    #### Consulta de exemplo:

    ```graphql
    {
      customerAdministration {
        secrets(
          filter: {deleted: {eq: false}, scope: {eq: {id: 1, type: ACCOUNT}}}
          cursor: ""
          sort: {direction: DESC, key: CREATED_AT}
        )
      }
    }
    ```

    ### Resposta

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nome do atributo**
          </th>

          <th>
            **Descrição**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `nextCursor`
          </td>

          <td>
            O valor do cursor para acessar a próxima página da lista de segredos. Se não houver mais páginas, este valor será `null`.
          </td>
        </tr>

        <tr>
          <td>
            `scope`
          </td>

          <td>
            O ID da conta ou organização associado ao segredo.
          </td>
        </tr>

        <tr>
          <td>
            `secrets`
          </td>

          <td>
            Os detalhes dos segredos listados, incluindo:

            * `description`: A descrição do segredo, se disponível.

            * `isDeleted`: Indica se o segredo está em um estado de exclusão suave ou não.

            * `isSharable`: Indica se o segredo é um [segredo compartilhável](#sharable-secrets) com controle de acesso granular.

            * `key`: A chave do segredo.

            * `latestVersion`: O número da versão mais recente do segredo.

            * `metadata`: Metadados associados ao segredo, se houver.

              * `createdAt`: Carimbos de data/hora indicando quando o segredo foi criado.
              * `updatedAt`: Carimbos de data/hora indicando quando o segredo foi atualizado pela última vez.

            * `namespace`: O namespace do segredo, se disponível.

            * `tags`: O par chave-valor associado ao segredo, se houver.
          </td>
        </tr>

        <tr>
          <td>
            `totalCount`
          </td>

          <td>
            O número total de segredos disponíveis na conta ou organização, independentemente da paginação.
          </td>
        </tr>
      </tbody>
    </table>

    #### Resposta de exemplo:

    ```json
    {
    "data": {
    "customerAdministration": {
      "secrets": {
        "nextCursor": "AAAADJ_Fqig86wFIH6c3ehxxpoFy0vdW2eA4pTkQFYDztd_UIeL91kCElQaCG0iORpmDdDT6KeZAVkByh4ogENST8yjxeZ5tI6vPYnyMW5rhtGwXlgt9zQRGYj1HcdpUHdfUcTC-CSsdQDLexy52XA==",
        "scope": {
          "id": "1",
          "type": "ACCOUNT"
        },
        "secrets": [
          {
            "description": "ZXY",
            "isDeleted": false,
            "isSharable": false,
            "key": "test2",
            "latestVersion": 1,
            "metadata": {
              "createdAt": "2025-05-26T07:45:19.395796Z",
              "updatedAt": "2025-05-26T08:08:49.130724Z"
            },
            "namespace": null,
            "tags": null
          },
          {
            "description": "XYZ",
            "isDeleted": false,
            "isSharable": false,
            "key": "test2",
            "latestVersion": 0,
            "metadata": {
              "createdAt": "2025-05-26T07:26:32.114987Z",
              "updatedAt": "2025-05-26T07:26:32.114987Z"
            },
            "namespace": null,
            "tags": null
          },
          {
            "description": "CBA",
            "isDeleted": false,
            "isSharable": false,
            "key": "test1",
            "latestVersion": 1,
            "metadata": {
              "createdAt": "2025-05-26T07:15:08.987252Z",
              "updatedAt": "2025-05-26T08:05:17.051658Z"
            },
            "namespace": null,
            "tags": null
          },
        ],
        "totalCount": 3
      }
    }
    }
    ```
  </Collapser>

  <Collapser id="grant-access-sharable-secret" title="Conceder acesso a um segredo compartilhável">
    Depois de criar um segredo compartilhável, você pode conceder permissões específicas a usuários, grupos, identidades do sistema ou grupos de identidade do sistema. Use a mutação `authorizationManagementGrantAccess` para compartilhar seu segredo com entidades autorizadas.

    <Callout variant="important">
      O proprietário do segredo (criador), os administradores da organização ou os usuários com a capacidade `secret.create.grants` podem conceder acesso a um segredo compartilhável.
    </Callout>

    #### Atributos de entrada

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nome do atributo**
          </th>

          <th style={{ width: "200px" }}>
            **Tipo de dados**
          </th>

          <th>
            **Descrição**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `grantAccessOptions` (Obrigatório)
          </td>

          <td>
            Objeto
          </td>

          <td>
            Contém a configuração de concessão com dois componentes principais:

            * `entityAccessGrants`: Define o segredo e a função a ser concedida
            * `grantee`: Especifica quem recebe acesso
          </td>
        </tr>

        <tr>
          <td>
            `entityAccessGrants.entity.id` (Obrigatório)
          </td>

          <td>
            Corda
          </td>

          <td>
            O ID exclusivo do segredo. O formato é `namespace::partition::entry_key_secret`.

            Por exemplo, se você criou um segredo com a chave `prod-api-key` na conta `12345` com o namespace `production`, o ID da entidade é: `production::account-12345::prod-api-key`. Se nenhum namespace foi fornecido, use uma string vazia: `::account-12345::prod-api-key`.
          </td>
        </tr>

        <tr>
          <td>
            `entityAccessGrants.entity.type` (Obrigatório)
          </td>

          <td>
            Corda
          </td>

          <td>
            O tipo de entidade. Para segredos, isso é sempre `secret`.
          </td>
        </tr>

        <tr>
          <td>
            `entityAccessGrants.roleId` (Obrigatório)
          </td>

          <td>
            Corda
          </td>

          <td>
            O ID exclusivo da função a ser concedida. Para encontrar os IDs de função disponíveis, use o explorador da API NerdGraph para consultar funções com escopo `secret`. Funções comuns incluem Proprietário do segredo (controle total) e Leitor de segredo (acesso somente leitura).
          </td>
        </tr>

        <tr>
          <td>
            `grantee.id` (Obrigatório)
          </td>

          <td>
            Corda
          </td>

          <td>
            O ID exclusivo do usuário, grupo, identidade do sistema ou grupo de identidade do sistema que está recebendo acesso.
          </td>
        </tr>

        <tr>
          <td>
            `grantee.type` (Obrigatório)
          </td>

          <td>
            Enum
          </td>

          <td>
            O tipo de cessionário. Valores válidos:

            * `USER`: Usuário individual
            * `GROUP`: Grupo de usuários
            * `SYSTEM_IDENTITY`: Identidade do sistema (para processos automatizados)
            * `SYSTEM_IDENTITY_GROUP`: Grupo de identidade do sistema
          </td>
        </tr>
      </tbody>
    </table>

    #### Consulta de exemplo:

    ```graphql
    mutation {
      authorizationManagementGrantAccess(
        grantAccessOptions: {
          entityAccessGrants: {
            entity: {
              id: "production::account-1::prod-api-key",
              type: "secret"
            },
            roleId: "role-id-for-secret-reader"
          },
          grantee: {
            id: "system-identity-id-abc123",
            type: SYSTEM_IDENTITY
          }
        }
      ) {
        roles {
          id
          roleId
        }
      }
    }
    ```

    ### Resposta

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nome do atributo**
          </th>

          <th>
            **Descrição**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `roles`
          </td>

          <td>
            Uma matriz de atribuições de função criadas pela operação de concessão, incluindo:

            * `id`: O identificador exclusivo da concessão
            * `roleId`: O ID da função que foi concedida
          </td>
        </tr>
      </tbody>
    </table>

    #### Resposta de exemplo:

    ```json
    {
      "data": {
        "authorizationManagementGrantAccess": {
          "roles": [
            {
              "id": "grant-id-xyz789",
              "roleId": "role-id-for-secret-reader"
            }
          ]
        }
      }
    }
    ```

    <Callout variant="tip">
      Para revogar o acesso a um segredo compartilhável, use a mutação `authorizationManagementRevokeAccess`.
    </Callout>
  </Collapser>

  <Collapser id="revoke-access-sharable-secret" title="Revogar o acesso a um segredo compartilhável">
    Use a mutação `authorizationManagementRevokeAccess` para remover o acesso de usuários, grupos, identidades do sistema ou grupos de identidade do sistema que foram previamente concedidos acesso ao seu segredo compartilhável.

    <Callout variant="important">
      O proprietário do segredo (criador), os administradores da organização ou usuários com a permissão de revogação apropriada podem remover o acesso a um segredo compartilhável.
    </Callout>

    #### Atributos de entrada

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nome do atributo**
          </th>

          <th style={{ width: "200px" }}>
            **Tipo de dados**
          </th>

          <th>
            **Descrição**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `grantAccessOptions` (Obrigatório)
          </td>

          <td>
            Objeto
          </td>

          <td>
            Contém a configuração de revogação com a mesma estrutura da operação de concessão.
          </td>
        </tr>

        <tr>
          <td>
            `entityAccessGrants.entity.id` (Obrigatório)
          </td>

          <td>
            Corda
          </td>

          <td>
            O ID exclusivo do segredo no formato `namespace::partition::entry_key_secret`.
          </td>
        </tr>

        <tr>
          <td>
            `entityAccessGrants.entity.type` (Obrigatório)
          </td>

          <td>
            Corda
          </td>

          <td>
            O tipo de entidade. Para segredos, isso é sempre `secret`.
          </td>
        </tr>

        <tr>
          <td>
            `entityAccessGrants.roleId` (Obrigatório)
          </td>

          <td>
            Corda
          </td>

          <td>
            O ID exclusivo da função a ser revogada.
          </td>
        </tr>

        <tr>
          <td>
            `grantee.id` (Obrigatório)
          </td>

          <td>
            Corda
          </td>

          <td>
            O ID exclusivo do usuário, grupo, identidade do sistema ou grupo de identidade do sistema de quem revogar o acesso.
          </td>
        </tr>

        <tr>
          <td>
            `grantee.type` (Obrigatório)
          </td>

          <td>
            Enum
          </td>

          <td>
            O tipo de cessionário. Valores válidos: `USER`, `GROUP`, `SYSTEM_IDENTITY`, `SYSTEM_IDENTITY_GROUP`.
          </td>
        </tr>
      </tbody>
    </table>

    #### Consulta de exemplo:

    ```graphql
    mutation {
      authorizationManagementRevokeAccess(
        grantAccessOptions: {
          entityAccessGrants: {
            entity: {
              id: "production::account-12345::prod-api-key",
              type: "secret"
            }
            roleId: "role-id-for-secret-reader"
          }
          grantee: {
            id: "system-identity-id-abc123",
            type: SYSTEM_IDENTITY
          }
        }
      ) {
        roles {
          id
          roleId
        }
      }
    }
    ```

    ### Resposta

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nome do atributo**
          </th>

          <th>
            **Descrição**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `roles`
          </td>

          <td>
            Uma matriz de informações de função relacionadas à concessão revogada.
          </td>
        </tr>
      </tbody>
    </table>

    #### Resposta de exemplo:

    ```json
    {
      "data": {
        "authorizationManagementRevokeAccess": {
          "roles": [
            {
              "id": "grant-id-xyz789",
              "roleId": "role-id-for-secret-reader"
            }
          ]
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="list-access-sharable-secret" title="Liste quem tem acesso a um segredo compartilhável">
    Use a consulta `customerAdministration/entityGrants` para ver quais usuários, grupos, identidades do sistema ou grupos de identidade do sistema receberam acesso ao seu segredo compartilhável.

    <Callout variant="tip">
      Esta consulta retorna apenas concessões explícitas feitas diretamente no segredo. Ele não mostra acesso implícito ou permissões herdadas de escopos pai.
    </Callout>

    #### Atributos de entrada

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nome do atributo**
          </th>

          <th style={{ width: "200px" }}>
            **Tipo de dados**
          </th>

          <th>
            **Descrição**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `iamParent.id` (Obrigatório)
          </td>

          <td>
            Corda
          </td>

          <td>
            O ID da conta ou organização onde o segredo é armazenado.
          </td>
        </tr>

        <tr>
          <td>
            `iamParent.scope` (Obrigatório)
          </td>

          <td>
            Enum
          </td>

          <td>
            O tipo de escopo pai. Valores válidos: `ACCOUNT`, `ORGANIZATION`.
          </td>
        </tr>

        <tr>
          <td>
            `entity.id` (Opcional)
          </td>

          <td>
            Corda
          </td>

          <td>
            O ID exclusivo do segredo no formato `namespace::partition::entry_key_secret`. Quando fornecido, apenas as concessões para este segredo específico são retornadas.
          </td>
        </tr>

        <tr>
          <td>
            `entity.type` (Obrigatório)
          </td>

          <td>
            Corda
          </td>

          <td>
            O tipo de entidade. Para segredos, isso é sempre `secret`.
          </td>
        </tr>

        <tr>
          <td>
            `member.id` (Opcional)
          </td>

          <td>
            Corda
          </td>

          <td>
            Filtra as concessões pelo ID de um usuário, grupo, identidade do sistema ou grupo de identidade do sistema específico.
          </td>
        </tr>

        <tr>
          <td>
            `member.type` (Opcional)
          </td>

          <td>
            Enum
          </td>

          <td>
            O tipo de membro a ser filtrado. Valores válidos: `USER`, `GROUP`, `SYSTEM_IDENTITY`, `SYSTEM_IDENTITY_GROUP`.
          </td>
        </tr>
      </tbody>
    </table>

    #### Consulta de exemplo:

    ```graphql
    {
      customerAdministration {
        entityGrants(
          filter: {
            iamParent: {
              id: { eq: "12345" }
              scope: { eq: ACCOUNT }
            }
            entity: {
              id: { eq: "production::account-12345::prod-api-key" }
              type: { eq: "secret" }
            }
          }
          cursor: ""
        ) {
          items {
            targetEntity {
              id
            }
            member {
              memberId
              memberType
            }
            id
            role {
              name
              id
            }
          }
          nextCursor
        }
      }
    }
    ```

    ### Resposta

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nome do atributo**
          </th>

          <th>
            **Descrição**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `items`
          </td>

          <td>
            Uma matriz de objetos de concessão, cada um contendo:

            * `targetEntity.id`: A ID da entidade do segredo
            * `member.memberId`: O ID do usuário, grupo, identidade do sistema ou grupo de identidade do sistema
            * `member.memberType`: O tipo de membro (USER, GROUP, SYSTEM\_IDENTITY ou SYSTEM\_IDENTITY\_GROUP)
            * `id`: O identificador exclusivo da concessão (use-o para revogar o acesso)
            * `role.name`: O nome da função concedida
            * `role.id`: O identificador exclusivo da função
          </td>
        </tr>

        <tr>
          <td>
            `nextCursor`
          </td>

          <td>
            O valor do cursor para paginação. Use este valor na próxima consulta para recuperar resultados adicionais.
          </td>
        </tr>
      </tbody>
    </table>

    #### Resposta de exemplo:

    ```json
    {
      "data": {
        "customerAdministration": {
          "entityGrants": {
            "items": [
              {
                "targetEntity": {
                  "id": "production::account-12345::prod-api-key"
                },
                "member": {
                  "memberId": "system-identity-id-abc123",
                  "memberType": "SYSTEM_IDENTITY"
                },
                "id": "grant-id-xyz789",
                "role": {
                  "name": "Secret Reader",
                  "id": "role-id-for-secret-reader"
                }
              }
            ],
            "nextCursor": null
          }
        }
      }
    }
    ```
  </Collapser>
</CollapserGroup>

## Tópicos relacionados [#related-topics]

<DocTiles>
  <DocTile title="Introdução ao NerdGraph" path="/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph">
    Comece a usar a API GraphQL do New Relic
  </DocTile>

  <DocTile title="Explorador de API NerdGraph" path="/docs/apis/nerdgraph/get-started/nerdgraph-explorer">
    Use o explorador da API NerdGraph para testar consultas e mutações
  </DocTile>

  <DocTile title="Gerenciar grupos de usuários" path="/docs/apis/nerdgraph/examples/nerdgraph-manage-groups">
    Crie e gerencie grupos de usuários com funções personalizadas
  </DocTile>

  <DocTile title="Gerenciamento de segredos para infraestrutura" path="/docs/infrastructure/host-integrations/installation/secrets-management">
    Use segredos na configuração do agente de infraestrutura
  </DocTile>
</DocTiles>