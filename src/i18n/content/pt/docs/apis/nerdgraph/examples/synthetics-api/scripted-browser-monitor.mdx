---
title: Gerenciar monitor de navegador com script
tags:
  - Synthetics
  - APIs
  - NerdGraph
  - Examples
metaDescription: How to use New Relic NerdGraph API to create and update scripted browser monitors for synthetic monitoring.
freshnessValidatedDate: never
translationType: machine
---

New Relic permite que você use o NerdGraph para criar [um script de monitoramento de navegador](/docs/synthetics/synthetic-monitoring/scripting-monitors/introduction-scripted-browser-monitors). monitor de navegador com script executa código JavaScript personalizado em um ambiente de navegador real, permitindo simular interações complexas do usuário e fluxo de trabalho em várias etapas. Este tutorial fornece exemplos de como usar a API do NerdGraph para automatizar a criação de um script de monitoramento de navegador.

## Criar um script de monitoramento de navegador [#create-scripted-browser]

Você pode criar um script monitor de browser com usando a mutação `syntheticsCreateScriptBrowserMonitor`. Essa mutação permite configurar um monitoramento personalizado por script que executa seu código JavaScript em um navegador.

### Parâmetro de entrada

<table>
  <thead>
    <tr>
      <th>
        Parâmetro
      </th>

      <th>
        Tipo de dados
      </th>

      <th>
        É obrigatório?
      </th>

      <th>
        Descrição
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `accountId`
      </td>

      <td>
        Inteiro
      </td>

      <td>
        Sim
      </td>

      <td>
        Seu 

        [ID de conta](/docs/accounts/accounts-billing/account-structure/account-id)

         New Relic onde o monitor será criado.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.browsers`
      </td>

      <td>
        Matriz
      </td>

      <td>
        Sim
      </td>

      <td>
        Browser(es) que o monitor usará para executar tarefas. Navegadores suportados: 

        `CHROME`

        , 

        `EDGE`

        , 

        `FIREFOX`

        .
      </td>
    </tr>

    <tr>
      <td>
        `monitor.devices`
      </td>

      <td>
        Matriz
      </td>

      <td>
        Sim
      </td>

      <td>
        Dispositivos que o monitor usará para executar tarefas. Dispositivos suportados: 

        `DESKTOP`

        , 

        `MOBILE_LANDSCAPE`

        , 

        `MOBILE_PORTRAIT`

        , 

        `TABLET_LANDSCAPE`

        , 

        `TABLET_PORTRAIT`

        .
      </td>
    </tr>

    <tr>
      <td>
        `monitor.locations.public`
      </td>

      <td>
        Matriz
      </td>

      <td>
        Sim
      </td>

      <td>
        matriz de 

        [localização pública](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors/#setting-location)

         identificadar onde o monitor executará verificações (por exemplo, 

        `["US_EAST_1", "US_WEST_1"]`

        ).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.name`
      </td>

      <td>
        Corda
      </td>

      <td>
        Sim
      </td>

      <td>
        O nome de exibição do seu monitor de browser com script.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.period`
      </td>

      <td>
        Enum
      </td>

      <td>
        Sim
      </td>

      <td>
        Com que frequência o monitor é executado? Opções: 

        `EVERY_MINUTE`

        , 

        `EVERY_5_MINUTES`

        , 

        `EVERY_10_MINUTES`

        , 

        `EVERY_15_MINUTES`

        , 

        `EVERY_30_MINUTES`

        , 

        `EVERY_HOUR`

        , 

        `EVERY_6_HOURS`

        , 

        `EVERY_12_HOURS`

        , 

        `EVERY_DAY`

        .
      </td>
    </tr>

    <tr>
      <td>
        `monitor.runtime.runtimeType`
      </td>

      <td>
        Corda
      </td>

      <td>
        Sim
      </td>

      <td>
        O tipo de tempo de execução usado pelo seu monitor. 

        `CHROME_BROWSER`

         é o único valor aceito.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.runtime.runtimeTypeVersion`
      </td>

      <td>
        Corda
      </td>

      <td>
        Sim
      </td>

      <td>
        A versão do tipo de tempo de execução usada pelo seu monitor. 

        `100`

         é o único valor aceito.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.runtime.scriptLanguage`
      </td>

      <td>
        Corda
      </td>

      <td>
        Sim
      </td>

      <td>
        O idioma utilizado no seu monitor. 

        `JAVASCRIPT`

         é o único valor aceito.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.script`
      </td>

      <td>
        Corda
      </td>

      <td>
        Sim
      </td>

      <td>
        O código JavaScript que o monitor executa. Este texto deve ser em formato simples, não codificado em base64. O script pode usar as APIs Selenium WebDriver para controlar o navegador.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.status`
      </td>

      <td>
        Enum
      </td>

      <td>
        Sim
      </td>

      <td>
        O estado do monitor. Opções: 

        `ENABLED`

         (monitor ativo e realizando verificações), 

        `DISABLED`

         (monitor inativo).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.advancedOptions.enableScreenshotOnFailureAndScript`
      </td>

      <td>
        Boleano
      </td>

      <td>
        Não
      </td>

      <td>
        Captura uma tela durante a execução da tarefa quando ocorre uma falha ou um script é executado.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.apdexTarget`
      </td>

      <td>
        Float
      </td>

      <td>
        Não
      </td>

      <td>
        O monitor Apdex destino em segundos, usado para preencher relatórios SLA. O valor padrão é de 7,0 segundos.
      </td>
    </tr>
  </tbody>
</table>

### Solicitação de amostra

```graphql
mutation {
  syntheticsCreateScriptBrowserMonitor(
    accountId: ACCOUNT_ID
    monitor: {
      browsers: [BROWSERS]
      devices: [DEVICES]
      locations: { public: ["LOCATION_1", "LOCATION_2"] }
      name: "MONITOR_NAME"
      period: PERIOD
      runtime: {
        runtimeType: "RUNTIME_TYPE"
        runtimeTypeVersion: "RUNTIME_TYPE_VERSION"
        scriptLanguage: "SCRIPT_LANGUAGE"
      }
      script: "SCRIPT_CONTENT"
      status: STATUS
      advancedOptions: { enableScreenshotOnFailureAndScript: ENABLE_SCREENSHOT }
      apdexTarget: APDEX_TARGET
    }
  ) {
    errors {
      description
      type
    }
  }
}
```

### Resposta de amostra

Uma resposta bem-sucedida retorna `null` para erros:

```json
{
  "data": {
    "syntheticsCreateScriptBrowserMonitor": {
      "errors": null
    }
  }
}
```

Se houver algum problema ao criar o monitor, a matriz `errors` conterá objetos com campos `description` e `type` explicando o que deu errado.

## Atualizar um script com do monitor do browser [#update-scripted-browser]

Você pode atualizar um script existente de monitor de browser com usando a mutação `syntheticsUpdateScriptBrowserMonitor`. Isso permite modificar a configuração de um script de monitor de navegador que já foi criado.

### Parâmetro de entrada

<table>
  <thead>
    <tr>
      <th>
        Parâmetro
      </th>

      <th>
        Tipo de dados
      </th>

      <th>
        É obrigatório?
      </th>

      <th>
        Descrição
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `guid`
      </td>

      <td>
        Corda
      </td>

      <td>
        Sim
      </td>

      <td>
        O 

        [GUID](/docs/apis/nerdgraph/examples/synthetics-api/query-synthetics-data#query-monitors)

         exclusivo da entidade do monitor que você deseja atualizar.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.browsers`
      </td>

      <td>
        Matriz
      </td>

      <td>
        Não
      </td>

      <td>
        Browser(es) que o monitor usará para executar tarefas. Navegadores suportados: 

        `CHROME`

        , 

        `EDGE`

        , 

        `FIREFOX`

        .
      </td>
    </tr>

    <tr>
      <td>
        `monitor.devices`
      </td>

      <td>
        Matriz
      </td>

      <td>
        Não
      </td>

      <td>
        Dispositivos que o monitor usará para executar tarefas. Dispositivos suportados: 

        `DESKTOP`

        , 

        `MOBILE_LANDSCAPE`

        , 

        `MOBILE_PORTRAIT`

        , 

        `TABLET_LANDSCAPE`

        , 

        `TABLET_PORTRAIT`

        .
      </td>
    </tr>

    <tr>
      <td>
        `monitor.locations.public`
      </td>

      <td>
        Matriz
      </td>

      <td>
        Não
      </td>

      <td>
        matriz de 

        [localização pública](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors/#setting-location)

         identificadar onde o monitor executará verificações (por exemplo, 

        `["US_EAST_1", "US_WEST_1"]`

        ).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.name`
      </td>

      <td>
        Corda
      </td>

      <td>
        Não
      </td>

      <td>
        O nome de exibição atualizado para o seu monitor de browser com script.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.period`
      </td>

      <td>
        Enum
      </td>

      <td>
        Não
      </td>

      <td>
        Com que frequência o monitor é executado? Opções: 

        `EVERY_MINUTE`

        , 

        `EVERY_5_MINUTES`

        , 

        `EVERY_10_MINUTES`

        , 

        `EVERY_15_MINUTES`

        , 

        `EVERY_30_MINUTES`

        , 

        `EVERY_HOUR`

        , 

        `EVERY_6_HOURS`

        , 

        `EVERY_12_HOURS`

        , 

        `EVERY_DAY`

        .
      </td>
    </tr>

    <tr>
      <td>
        `monitor.runtime.runtimeType`
      </td>

      <td>
        Corda
      </td>

      <td>
        Não
      </td>

      <td>
        O tipo de tempo de execução usado pelo seu monitor. 

        `CHROME_BROWSER`

         é o único valor aceito.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.runtime.runtimeTypeVersion`
      </td>

      <td>
        Corda
      </td>

      <td>
        Não
      </td>

      <td>
        A versão do tipo de tempo de execução usada pelo seu monitor. 

        `100`

         é o único valor aceito.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.runtime.scriptLanguage`
      </td>

      <td>
        Corda
      </td>

      <td>
        Não
      </td>

      <td>
        O idioma utilizado no seu monitor. 

        `JAVASCRIPT`

         é o único valor aceito.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.script`
      </td>

      <td>
        Corda
      </td>

      <td>
        Não
      </td>

      <td>
        O código JavaScript que o monitor executa. Este texto deve ser em formato simples, não codificado em base64.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.status`
      </td>

      <td>
        Enum
      </td>

      <td>
        Não
      </td>

      <td>
        O estado do monitor. Opções: 

        `ENABLED`

         (monitor ativo e realizando verificações), 

        `DISABLED`

         (monitor inativo).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.advancedOptions.enableScreenshotOnFailureAndScript`
      </td>

      <td>
        Boleano
      </td>

      <td>
        Não
      </td>

      <td>
        Captura uma tela durante a execução da tarefa quando ocorre uma falha ou um script é executado.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.apdexTarget`
      </td>

      <td>
        Float
      </td>

      <td>
        Não
      </td>

      <td>
        O monitor Apdex destino em segundos, usado para preencher relatórios SLA. O valor padrão é de 7,0 segundos.
      </td>
    </tr>
  </tbody>
</table>

### Solicitação de amostra

```graphql
mutation {
  syntheticsUpdateScriptBrowserMonitor(
    guid: ENTITY_GUID
    monitor: {
      browsers: [BROWSERS]
      devices: [DEVICES]
      locations: { public: ["LOCATION_1", "LOCATION_2"] }
      name: "MONITOR_NAME"
      period: PERIOD
      runtime: {
        runtimeType: "RUNTIME_TYPE"
        runtimeTypeVersion: "RUNTIME_TYPE_VERSION"
        scriptLanguage: "SCRIPT_LANGUAGE"
      }
      script: "SCRIPT_CONTENT"
      status: STATUS
      advancedOptions: { enableScreenshotOnFailureAndScript: ENABLE_SCREENSHOT }
      apdexTarget: APDEX_TARGET
    }
  ) {
    errors {
      description
      type
    }
  }
}
```

### Resposta de amostra

Uma resposta bem-sucedida retorna `null` para erros:

```json
{
  "data": {
    "syntheticsUpdateScriptBrowserMonitor": {
      "errors": null
    }
  }
}
```

Se houver algum problema ao atualizar o monitor, a matriz `errors` conterá objetos com campos `description` e `type` explicando o que deu errado.

## Atualize o tempo de execução do script do monitor do navegador. [#upgrade-monitor-runtime]

Você pode atualizar um script de monitor de navegador para usar o ambiente de execução mais recente Chrome 100+. Isso garante que seu monitor utilize as atualizações mais recentes de recursos e segurança do navegador.

### Parâmetro de entrada

<table>
  <thead>
    <tr>
      <th>
        Parâmetro
      </th>

      <th>
        Tipo de dados
      </th>

      <th>
        É obrigatório?
      </th>

      <th>
        Descrição
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `guid`
      </td>

      <td>
        Corda
      </td>

      <td>
        Sim
      </td>

      <td>
        O 

        [GUID](/docs/apis/nerdgraph/examples/synthetics-api/query-synthetics-data#query-monitors)

         exclusivo da entidade do monitor que você deseja atualizar.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.runtime.runtimeType`
      </td>

      <td>
        Corda
      </td>

      <td>
        Sim
      </td>

      <td>
        O tipo de tempo de execução. 

        `CHROME_BROWSER`

         é o único valor aceito.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.runtime.runtimeTypeVersion`
      </td>

      <td>
        Corda
      </td>

      <td>
        Sim
      </td>

      <td>
        A versão de tempo de execução. 

        `100`

         é o único valor aceito.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.runtime.scriptLanguage`
      </td>

      <td>
        Corda
      </td>

      <td>
        Sim
      </td>

      <td>
        A linguagem de script. 

        `JAVASCRIPT`

         é o único valor aceito.
      </td>
    </tr>
  </tbody>
</table>

### Solicitação de amostra

```graphql
mutation {
  syntheticsUpdateScriptBrowserMonitor(
    guid: "ENTITY_GUID",
    monitor: {
      runtime: {
        runtimeType: "CHROME_BROWSER",
        runtimeTypeVersion: "100",
        scriptLanguage: "JAVASCRIPT"
      }
    }
  ) {
    errors {
      description
      type
    }
  }
}
```

### Resposta de amostra

Uma resposta bem-sucedida retorna `null` para erros:

```json
{
  "data": {
    "syntheticsUpdateScriptBrowserMonitor": {
      "errors": null
    }
  }
}
```

Se houver algum problema ao atualizar o tempo de execução do monitor, a matriz `errors` conterá objetos com campos `description` e `type` explicando o que deu errado.

## Rebaixar o tempo de execução do script do navegador do monitor [#downgrade-monitor-runtime]

Você pode fazer o downgrade de um script monitor de browser com para usar um ambiente de execução legado. Isso pode ser necessário por motivos de compatibilidade, mas observe que os runtimes legados chegarão ao fim de sua vida útil em 22 de outubro de 2024.

<Callout variant="important">
  Os ambientes de execução legados estão obsoletos e chegarão ao fim de sua vida útil em 22 de outubro de 2024. Não é recomendável fazer o downgrade para versões de tempo de execução legadas, exceto em casos de necessidade temporária de compatibilidade.
</Callout>

### Parâmetro de entrada

<table>
  <thead>
    <tr>
      <th>
        Parâmetro
      </th>

      <th>
        Tipo de dados
      </th>

      <th>
        É obrigatório?
      </th>

      <th>
        Descrição
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `guid`
      </td>

      <td>
        Corda
      </td>

      <td>
        Sim
      </td>

      <td>
        O 

        [GUID](/docs/apis/nerdgraph/examples/synthetics-api/query-synthetics-data#query-monitors)

         exclusivo da entidade do monitor para o qual você deseja fazer o downgrade.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.runtime.runtimeType`
      </td>

      <td>
        Corda
      </td>

      <td>
        Sim
      </td>

      <td>
        Defina como string vazia 

        `""`

         para usar o ambiente de execução legado.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.runtime.runtimeTypeVersion`
      </td>

      <td>
        Corda
      </td>

      <td>
        Sim
      </td>

      <td>
        Defina como string vazia 

        `""`

         para usar o ambiente de execução legado.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.runtime.scriptLanguage`
      </td>

      <td>
        Corda
      </td>

      <td>
        Sim
      </td>

      <td>
        Defina como string vazia 

        `""`

         para usar o ambiente de execução legado.
      </td>
    </tr>
  </tbody>
</table>

### Solicitação de amostra

```graphql
mutation {
  syntheticsUpdateScriptBrowserMonitor(
    guid: "ENTITY_GUID",
    monitor: {
      runtime: {
        runtimeType: "",
        runtimeTypeVersion: "",
        scriptLanguage: ""
      }
    }
  ) {
    errors {
      description
      type
    }
  }
}
```

### Resposta de amostra

Uma resposta bem-sucedida retorna `null` para erros:

```json
{
  "data": {
    "syntheticsUpdateScriptBrowserMonitor": {
      "errors": null
    }
  }
}
```

Se houver algum problema ao fazer o downgrade do tempo de execução do monitor, a matriz `errors` conterá objetos com campos `description` e `type` explicando o que deu errado.

## Excluir um script do monitor do navegador [#delete-monitor]

Quando um script monitor de browser com não for mais necessário, você pode removê-lo permanentemente usando a mutação `syntheticsDeleteMonitor`.

Para excluir um monitor, consulte a seção [Excluir monitor Sintético](/docs/apis/nerdgraph/examples/synthetics-api/ping-monitor/#delete-monitor).