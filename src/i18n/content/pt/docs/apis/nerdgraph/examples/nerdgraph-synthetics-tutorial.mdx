---
title: 'Tutorial NerdGraph: Gerencie seu monitor Sintético'
tags:
  - NerdGraph
  - Synthetic
metaDescription: 'Use NerdGraph to programatically manage your synthetic monitors, private locations, and secure credentials.'
freshnessValidatedDate: never
translationType: machine
---

Nossa [API NerdGraph](/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph/) permite automatizar a criação, atualização ou exclusão de seus [monitores Sintético](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors/), [localização privada](/docs/synthetics/synthetic-monitoring/private-locations/private-locations-overview-monitor-internal-sites-add-new-locations/), [credenciais seguras](/docs/synthetics/synthetic-monitoring/using-monitors/store-secure-credentials-scripted-browsers-api-tests/) e [monitor período de inatividade](/docs/synthetics/synthetic-monitoring/using-monitors/monitor-downtimes-disable-monitoring-during-scheduled-maintenance-times/).

## Requisitos [#requirements]

Os requisitos incluem:

* [Requisitos gerais do NerdGraph](/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph/#authentication)
* Permissões de usuário relevantes: as mesmas [permissões de monitoramento sintético](/docs/synthetics/synthetic-monitoring/administration/user-roles-synthetic-monitoring) que se aplicam ao uso da interface Sintético se aplicam ao uso do NerdGraph

## Entenda os campos no NerdGraph Explorer [#fields]

Você pode visualizar as definições de campo no [NerdGraph Explorer](/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph/#explorer), mas isso pode ajudar a entender melhor os `LOCATION`, `PERIOD`, `TAGS` e outros campos.

<CollapserGroup>
  <Collapser id="browsers-attribute" title="Definir campos do navegador">
    Configure o navegador simples, o navegador com script e os monitores de etapas para usar um ou mais tipos de navegador. Não inclua esse atributo ao usar o tempo de execução legado do Chrome 72. Exemplos:

    * `[CHROME]` para usar somente o Chrome
    * `[FIREFOX]` para usar somente o Firefox
    * `[CHROME, FIREFOX]` para usar o Chrome e o Firefox
  </Collapser>

  <Collapser id="devices-attribute" title="Definir campos de dispositivos">
    Configure o navegador simples, o navegador com script e os monitores de etapas para usar um ou mais tipos de dispositivos emulados. Não inclua esse atributo ao usar o tempo de execução legado do Chrome 72. Exemplos:

    * `[DESKTOP]`

    * `[MOBILE_LANDSCAPE]`

    * `[MOBILE_PORTRAIT]`

    * `[TABLET_LANDSCAPE]`

    * `[TABLET_PORTRAIT]`

      Várias configurações de dispositivos emulados podem ser usadas por um único monitor:

    * `[DESKTOP, MOBILE_PORTRAIT, TABLET_LANDSCAPE]`
  </Collapser>

  <Collapser id="location-field" title="Definir campos de localização">
    Para identificar uma [localização privada](/docs/synthetics/synthetic-monitoring/private-locations/private-locations-overview-monitor-internal-sites-add-new-locations) em seu script, use o GUID da entidade de localização privada. Se a localização privada estiver configurada para usar [execução script verificada](/docs/synthetics/synthetic-monitoring/private-locations/verified-script-execution-private-locations/), inclua também o atributo `vsePassword`. Por exemplo:

    ```graphql
    locations: {
      private: {
        guid: LOCATION_ENTITY_GUID, 
        vsePassword: YOUR_VSE_PASSWORD
      }
    }
    ```

    [localização pública](/docs/synthetics/synthetic-monitoring/administration/synthetic-public-minion-ips/#location) use o identificador de localização sem o prefixo AWS , por exemplo:

    ```graphql
    locations: {
      public: ["US_EAST_2", "US_WEST_1"]
    }
    ```
  </Collapser>

  <Collapser id="period-attribute" title="Definir campos de período">
    O atributo `PERIOD` define um intervalo de tempo para a execução do seu monitor. Para definir o intervalo, use estes formulários:

    * `EVERY_MINUTE` para cada minuto.
    * `EVERY_N_MINUTES`, onde &apos;N&apos; são minutos. Os valores suportados incluem `EVERY_5_MINUTES`, `EVERY_10_MINUTES`, `EVERY_15_MINUTES` e `EVERY_30_MINUTES`.
    * `EVERY_HOUR` para cada hora.
    * `EVERY_N_HOURS`, onde &apos;N&apos; são horas. Os valores suportados incluem `EVERY_6_HOURS` e `EVERY_12_HOURS`.
    * `EVERY_DAY` uma vez por dia.
  </Collapser>

  <Collapser id="tags-attribute" title="Definir campos de tags">
    Tag são opcionais. Você pode adicionar tags durante a criação do monitor ou posteriormente usando chamadas de tags no NerdGraph ou na interface. Várias tags podem ser adicionadas em uma única chamada de mutação usando uma matriz que contém chaves e valores.
  </Collapser>

  <Collapser id="optional-fields" title="Definir campos opcionais">
    Alguns campos são para configurações mais avançadas. Estes são opcionais.

    Para [monitor de ping](#create-ping), incluem:

    * `HEADER_NAME`: Seus nomes de cabeçalho personalizados que aparecem na solicitação.

    * `HEADER_VALUE`: O valor do cabeçalho personalizado na solicitação.

    * `REDIRECT_IS_FAILURE`: Seu monitor relata uma falha se for redirecionado.

    * `VALIDATION_TEXT`: Se este texto não estiver incluído na resposta do seu monitor, ele retornará uma falha.

    * `TLS_VALIDATION`: Verifica a [validade](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors/#simple) do certificado SSL cadeia.

    * `BYPASS_HEAD_REQUEST`: Ignora a solicitação HEAD inicial e, em vez disso, faz uma solicitação GET.

    Para [monitor de browser simples](#create-simple-browser):

    * `RUNTIME_TYPE`: O tipo de tempo de execução usado pelo seu monitor. &quot;CHROME\_BROWSER&quot; é o único valor aceito.

    * `RUNTIME_TYPE_VERSION`: A versão do tipo de tempo de execução usada pelo seu monitor. &quot;100&quot; é o único valor aceito.

    * `SCRIPT_LANGUAGE`: O idioma usado no seu monitor. &quot;JAVASCRIPT&quot; é o único valor aceito.

    Para [monitor de API com script](#create-scripted-API):

    * `SCRIPT_CONTENT`: O conteúdo real do script. Isso **não** deve ser codificado em base64.

    * `RUNTIME_TYPE`: O tipo de tempo de execução usado pelo seu monitor. &quot;NODE\_API&quot; é o único valor aceito.

    * `RUNTIME_TYPE_VERSION`: A versão do tipo de tempo de execução usada pelo seu monitor. O único valor aceito é `16.10`.

    * `SCRIPT_LANGUAGE`: O idioma usado no seu monitor. &quot;JAVASCRIPT&quot; é o único valor aceito.

    Para [monitorar o script com do browser](#create-scripted-browser):

    * `SCRIPT_CONTENT`: O conteúdo real do script. Isso **não** deve ser codificado em base64.

    * `RUNTIME_TYPE`: O tipo de tempo de execução usado pelo seu monitor. &quot;CHROME\_BROWSER&quot; é o único valor aceito.

    * `RUNTIME_TYPE_VERSION`: A versão do tipo de tempo de execução usada pelo seu monitor. &quot;100&quot; é o único valor aceito.

    * `SCRIPT_LANGUAGE`: O idioma usado no seu monitor. &quot;JAVASCRIPT&quot; é o único valor aceito.

    Para [monitor de etapas](#create-step):

    * `RUNTIME_TYPE`: O tipo de tempo de execução usado pelo seu monitor. &quot;CHROME\_BROWSER&quot; é o único valor aceito.

    * `RUNTIME_TYPE_VERSION`: A versão do tipo de tempo de execução usada pelo seu monitor. &quot;100&quot; é o único valor aceito.

    * `SCRIPT_LANGUAGE`: O idioma usado no seu monitor. &quot;JAVASCRIPT&quot; é o único valor aceito.

    Para [monitor de verificação de certificado](#create-certificate-check):

    * `DAYS_UNTIL_EXPIRATION`: Notifica você quando você precisa atualizar seu certificado. Por exemplo, se você desejasse uma notificação 30 dias antes da expiração do certificado, você inseriria 30.

    * `RUNTIME_TYPE`: O tipo de tempo de execução usado pelo seu monitor. &quot;NODE\_API&quot; é o único valor aceito.

    * `RUNTIME_TYPE_VERSION`: A versão do tipo de tempo de execução usada pelo seu monitor. O único valor aceito é `16.10`.

    * `SCRIPT_LANGUAGE`: O idioma usado no seu monitor. &quot;JAVASCRIPT&quot; é o único valor aceito.

    Para [monitor de link quebrado](#create-broken-links):

    * `RUNTIME_TYPE`: O tipo de tempo de execução usado pelo seu monitor. &quot;NODE\_API&quot; é o único valor aceito.

    * `RUNTIME_TYPE_VERSION`: A versão do tipo de tempo de execução usada pelo seu monitor. O único valor aceito é `16.10`.

    * `SCRIPT_LANGUAGE`: O idioma usado no seu monitor. &quot;JAVASCRIPT&quot; é o único valor aceito.

    Para todos os monitores:

    * `APDEX_TARGET`: O destino Apdex do monitor é usado para preencher relatórios SLA . O padrão é 7 segundos (7000 ms).
  </Collapser>
</CollapserGroup>

## Use consulta para recuperar dados [#query]

Consulta faz solicitações para buscar dados. Para conhecer os recursos de consulta adicionais disponíveis para sua entidade Sintética, confira [o tutorial da API NerdGraph entidade](/docs/apis/nerdgraph/examples/nerdgraph-entities-api-tutorial/).

<CollapserGroup>
  <Collapser id="query-examples" title="Monitor de consulta">
    Você pode consultar seu monitor Sintético para obter informações atuais sobre o status dos seus dados ou detalhes sobre a configuração monitor . Muitas configurações monitor são exibidas como tags.

    ```graphql
    {
      actor {
        entitySearch(query: "domain = 'SYNTH' AND type = 'MONITOR'") {
          results {
            entities {
              ... on SyntheticMonitorEntityOutline {
                guid
                name
                accountId
                monitorType
                tags {
                  key
                  values
                }
              }
            }
          }
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="private-examples" title="Consulta localização privada">
    Você pode consultar sua localização privada:

    ```graphql
    {
      actor {
        entitySearch(query: "domain = 'SYNTH' AND type = 'PRIVATE_LOCATION'") {
          results {
            entities {
              accountId
              guid
              name
              tags {
                key
                values
              }
            }
          }
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="downtime-query" title="Consultar monitor período de inatividade">
    Consulte monitor existente do período de inatividade. Os detalhes de configuração são armazenados na tag.

    ```graphql
    {
      actor {
        entitySearch(query: "domain = 'SYNTH' AND type = 'MONITOR_DOWNTIME'") {
          results {
            entities {
              accountId
              guid
              name
              tags {
                key
                values
              }
            }
          }
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="credentials-example" title="Consultar credenciais seguras">
    A consulta de credenciais seguras permite recuperar apenas metadados, mas não os valores das credenciais em si:

    ```graphql
    {
      actor {
        entitySearch(query: "domain = 'SYNTH' AND type = 'SECURE_CRED'") {
          results {
            entities {
              ... on SecureCredentialEntityOutline {
                accountId
                guid
                name
                tags {
                  key
                  values
                }
                updatedAt
              }
            }
          }
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="query-script-example" title="Scriptdo monitor de consulta">
    Recupere o script usado em uma API com script ou monitore o script do browser. Outros tipos de monitor retornarão um erro.

    ```graphql
    {
      actor {
        account(id: ACCOUNT_ID) {
          synthetics {
            script(monitorGuid: "ENTITY_GUID") {
              text
            }
          }
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="query-steps-example" title="Etapas do monitor de consulta">
    Recupere as etapas configuradas para um monitor de etapas. Outros tipos de monitor retornarão um erro.

    ```graphql
    {
      actor {
        account(id: ACCOUNT_ID) {
          synthetics {
            steps(monitorGuid: "ENTITY_GUID") {
              ordinal
              type
              values
            }
          }
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="query-guid-example" title="Consulta para mapear o ID do monitor para o GUID da entidade">
    Recupere o GUID da entidade para um monitor Sintético usando o ID do monitor.

    ```graphql
    {
      actor {
        entitySearch(
          query: "(domainId = 'MONITOR_ID')"
        ) {
          results {
            entities {
              ... on SyntheticMonitorEntityOutline {
                guid
                name
                monitorId
              }
            }
          }
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="query-runtime-upgrade-status" title="Consulta para recuperar o status de todos os testes de atualização em tempo de execução">
    Recuperar o status de todos os testes de atualização de tempo de execução para o monitor de tempo de execução legado. Esses testes preenchem a [interface de atualizações de tempo de execução](/docs/synthetics/synthetic-monitoring/using-monitors/runtime-upgrade-ui/). O resultado do teste é armazenado na tag `validationStatus` . Se o teste de atualização falhar, a mensagem de erro estará disponível na tag `validationError` .

    ```graphql
    {
      actor {
        entitySearch(query: "domain = 'SYNTH' AND type = 'RUNTIME_VALIDATION'") {
          results {
            entities {
              accountId
              guid
              name
              tags {
                key
                values
              }
            }
          }
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="query-runtime-upgrade-status-monitor" title="Consulta para recuperar o status de um teste de atualização em tempo de execução por ID monitor">
    Recuperar o status de um teste de atualização de tempo de execução para um único monitor de tempo de execução legado. Esses resultados de teste preenchem a [interface de atualizações de tempo de execução](/docs/synthetics/synthetic-monitoring/using-monitors/runtime-upgrade-ui/). O resultado do teste é armazenado na tag `validationStatus` . Se o teste de atualização falhar, a mensagem de erro estará disponível na tag `validationError` .

    ```graphql
    {
      actor {
        entitySearch(
          query: "domain = 'SYNTH' AND type = 'RUNTIME_VALIDATION' AND domainId = 'MONITOR_ID'"
        ) {
          results {
            entities {
              accountId
              guid
              name
              tags {
                key
                values
              }
            }
          }
        }
      }
    }
    ```
  </Collapser>
</CollapserGroup>

## Crie seu monitor Sintético [#create-monitors]

Abaixo estão alguns exemplos de solicitações para automatizar a criação do seu monitor Sintético.

<Callout variant="tip">
  Inclua o objeto de tempo de execução que inclui `runtimeType`, `runtimeTypeVersion` e `scriptLanguage` para usar um tempo de execução mais recente. Não inclua o objeto de tempo de execução e estes atributos para continuar usando um tempo de execução legado.
</Callout>

<Callout variant="important">
  A partir de 26 de agosto de 2024, você não poderá mais criar novos monitores usando tempos de execução legados em locais públicos ou privados. Em 22 de outubro de 2024, [encerraremos a vida útil](/whats-new/2024/04/whats-new-04-09-eol-synthetics-runtime-cpm) das versões conteinerizadas minion privado (chamadas por minuto) e legado runtime do Synthetics.

  * Para localização pública, use [a interface de atualização de tempo de execução](/docs/synthetics/synthetic-monitoring/using-monitors/runtime-upgrade-ui/) para atualizar seu monitor para os tempos de execução mais recentes.
  * Para localização privada, revise nossas [etapas de migração recomendadas](/docs/synthetics/synthetic-monitoring/private-locations/job-manager-transition-guide/#monitorMigration) para evitar degradação monitor .
</Callout>

<CollapserGroup>
  <Collapser id="create-ping" title="Crie um monitor de ping">
    O monitor de ping verifica se seu aplicativo está em execução. Aqui está um exemplo para criar um no NerdGraph:

    ```graphql
      mutation {
        syntheticsCreateSimpleMonitor(
          accountId: ACCOUNT_ID
          monitor: {
            locations: { public: ["LOCATION_1", "LOCATION_2"] }
            name: "YOUR_MONITOR_NAME"
            period: PERIOD
            status: STATUS
            uri: "MONITORED_URI"
            advancedOptions: {
              customHeaders: { name: "HEADER_NAME", value: "HEADER_VALUE" }
              redirectIsFailure: REDIRECT_IS_FAILURE
              responseValidationText: "VALIDATION_TEXT"
              shouldBypassHeadRequest: BYPASS_HEAD_REQUEST
              useTlsValidation: TLS_VALIDATION
            }
            apdexTarget: APDEX_TARGET
          }
        ) {
          errors {
            description
            type
          }
        }
      }
    ```
  </Collapser>

  <Collapser id="create-simple-browser" title="Crie um monitor de browser simples">
    Monitor de browser simples usa instância do Chrome para imitar visitas de clientes. Aqui está um exemplo para criar um no NerdGraph:

    ```graphql
    mutation {
      syntheticsCreateSimpleBrowserMonitor(
        accountId: ACCOUNT_ID
        monitor: {
          browsers: [BROWSERS]
          devices: [DEVICES]
          locations: { public: ["LOCATION_1", "LOCATION_2"] }
          name: "YOUR_MONITOR_NAME"
          period: PERIOD
          runtime: {
            runtimeType: "RUNTIME_TYPE"
            runtimeTypeVersion: "RUNTIME_TYPE_VERSION"
            scriptLanguage: "SCRIPT_LANGUAGE"
          }
          status: STATUS
          uri: "MONITORED_URI"
          advancedOptions: {
            customHeaders: { name: "HEADER_NAME", value: "HEADER_VALUE" }
            enableScreenshotOnFailureAndScript: ENABLE_SCREENSHOT
            responseValidationText: "VALIDATION_TEXT"
            useTlsValidation: TLS_VALIDATION
          }
          apdexTarget: APDEX_TARGET
        }
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="create-scripted-browser" title="Crie um browser com script">
    [monitor de browser com script](/docs/synthetics/synthetic-monitoring/scripting-monitors/introduction-scripted-browser-monitors) são interações mais complexas com suas páginas e aplicativos. Aqui está um exemplo para criar um no NerdGraph:

    ```graphql
    mutation {
      syntheticsCreateScriptBrowserMonitor(
        accountId: ACCOUNT_ID
        monitor: {
          browsers: [BROWSERS]
          devices: [DEVICES]
          locations: { public: ["LOCATION_1", "LOCATION_2"] }
          name: "MONITOR_NAME"
          period: PERIOD
          runtime: {
            runtimeType: "RUNTIME_TYPE"
            runtimeTypeVersion: "RUNTIME_TYPE_VERSION"
            scriptLanguage: "SCRIPT_LANGUAGE"
          }
          script: "SCRIPT_CONTENT"
          status: STATUS
          advancedOptions: { enableScreenshotOnFailureAndScript: ENABLE_SCREENSHOT }
          apdexTarget: APDEX_TARGET
        }
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="create-scripted-API" title="Crie um monitor de API com script">
    [O monitor de API com script](/docs/synthetics/synthetic-monitoring/scripting-monitors/write-synthetic-api-tests) verifica seus endpoints de API. Aqui está um exemplo para criar um no NerdGraph:

    ```graphql
    mutation {
      syntheticsCreateScriptApiMonitor(
        accountId: ACCOUNT_ID
        monitor: {
          locations: { public: ["LOCATION_1", "LOCATION_2"] }
          name: "YOUR_MONITOR_NAME"
          period: PERIOD
          runtime: {
            runtimeType: "RUNTIME_TYPE"
            runtimeTypeVersion: "RUNTIME_TYPE_VERSION"
            scriptLanguage: "SCRIPT_LANGUAGE"
          }
          script: "SCRIPT_CONTENT"
          status: STATUS
          apdexTarget: APDEX_TARGET
        }
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="create-step" title="Crie um monitor de passos">
    O monitor de etapas fornece um monitor baseado em browser de várias etapas sem código. Aqui está um exemplo para criar um no NerdGraph:

    ```graphql
    mutation {
      syntheticsCreateStepMonitor(
        accountId: ACCOUNT_ID
        monitor: {
          browsers: [BROWSERS]
          devices: [DEVICES]
          locations: { public: ["LOCATION_1", "LOCATION_2"] }
          name: "MONITOR_NAME"
          period: PERIOD
          runtime: {
            runtimeType: "RUNTIME_TYPE"
            runtimeTypeVersion: "RUNTIME_TYPE_VERSION"
            scriptLanguage: "SCRIPT_LANGUAGE"
          }
          status: STATUS
          steps: [
            { 
              ordinal: 0, 
              type: NAVIGATE, 
              values: ["MONITORED_URI", "USER_AGENT"] }
            {
              ordinal: STEP_NUMBER
              type: STEP_TYPE
              values: ["CONDITIONAL_TYPE", "VALUE"]
            }
          ]
          advancedOptions: { enableScreenshotOnFailureAndScript: ENABLE_SCREENSHOT }
          apdexTarget: APDEX_TARGET
        }
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="create-certificate-check" title="Crie um monitor de verificação de certificado">
    Configure o monitor para notificá-lo quando seu certificado SSL estiver prestes a expirar. Aqui está um exemplo para criar um no NerdGraph:

    ```graphql
    mutation {
      syntheticsCreateCertCheckMonitor(
        accountId: ACCOUNT_ID
        monitor: {
          domain: "DOMAIN"
          locations: { public: ["LOCATION_1", "LOCATION_2"] }
          name: "YOUR_MONITOR_NAME"
          numberDaysToFailBeforeCertExpires: DAYS_UNTIL_EXPIRATION
          period: PERIOD
          status: STATUS
          apdexTarget: APDEX_TARGET
        }
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="create-broken-links" title="Crie um monitor de links quebrados">
    O monitor de links quebrados verifica se há falhas nos links de uma página da Web. Aqui está um exemplo para criar um no NerdGraph:

    ```graphql
    mutation {
      syntheticsCreateBrokenLinksMonitor(
        accountId: ACCOUNT_ID
        monitor: {
          locations: { public: ["LOCATION_1", "LOCATION_2"] }
          name: "YOUR_MONITOR_NAME"
          period: PERIOD
          status: STATUS
          apdexTarget: APDEX_TARGET
          uri: "MONITOR_URI"
          tags: { key: "YOUR_TAG_NAME", values: "TAG_VALUE" }
        }
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>
</CollapserGroup>

## Atualize seu monitor Sintético [#update-monitors]

Embora não seja possível alterar o tipo de monitor após criá-lo, você pode atualizar suas configurações. Somente o guia e as configurações que precisam ser atualizadas são necessárias como parte da solicitação.

<Callout variant="tip">
  Inclua o objeto de tempo de execução que inclui runtimeType, runtimeTypeVersion e scriptLanguage para [atualizar um monitor](#upgrade-monitor-runtime) para usar um tempo de execução mais recente. Inclua este objeto e defina esses atributos como uma string vazia para fazer downgrade para um tempo de execução legado. Não inclua este objeto e estes atributos para continuar usando um runtime legado.
</Callout>

<CollapserGroup>
  <Collapser id="update-ping" title="Atualizar um monitor de ping">
    Use isto para atualizar seu monitor de ping:

    ```graphql
    mutation {
      syntheticsUpdateSimpleMonitor(
        guid: "ENTITY_GUID"
        monitor: {
          locations: { public: ["LOCATION_1", "LOCATION_2"] }
          name: "YOUR_MONITOR_NAME"
          period: PERIOD
          status: STATUS
          uri: "MONITORED_URI"
          advancedOptions: {
            customHeaders: { name: "HEADER_NAME", value: "HEADER_VALUE" }
            redirectIsFailure: REDIRECT_IS_FAILURE
            responseValidationText: "VALIDATION_TEXT"
            shouldBypassHeadRequest: BYPASS_HEAD_REQUEST
            useTlsValidation: TLS_VALIDATION
          }
          apdexTarget: APDEX_TARGET
        }
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="update-simple-browser" title="Atualize um monitor de browser simples">
    Para atualizar um monitor de browser simples (incluindo a capacidade de atualizar a versão de tempo de execução), use isto:

    ```graphql
    mutation {
      syntheticsUpdateSimpleBrowserMonitor(
        guid: ENTITY_GUID
        monitor: {
          browsers: [BROWSERS]
          devices: [DEVICES]
          locations: { public: ["LOCATION_1", "LOCATION_2"] }
          name: "YOUR_MONITOR_NAME"
          period: PERIOD
          runtime: {
            runtimeType: "RUNTIME_TYPE"
            runtimeTypeVersion: "RUNTIME_TYPE_VERSION"
            scriptLanguage: "SCRIPT_LANGUAGE"
          }
          status: STATUS
          uri: "MONITORED_URI"
          advancedOptions: {
            customHeaders: { name: "HEADER_NAME", value: "HEADER_VALUE" }
            enableScreenshotOnFailureAndScript: ENABLE_SCREENSHOT
            responseValidationText: "VALIDATION_TEXT"
            useTlsValidation: TLS_VALIDATION
          }
          apdexTarget: APDEX_TARGET
        }
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="update-scripted-browser" title="Atualizar um script com do monitor do browser">
    Para atualizar um script com do monitor do browser (incluindo a capacidade de atualizar a versão de tempo de execução), use isto:

    ```graphql
    mutation {
      syntheticsUpdateScriptBrowserMonitor(
        guid: ENTITY_GUID
        monitor: {
          browsers: [BROWSERS]
          devices: [DEVICES]
          locations: { public: ["LOCATION_1", "LOCATION_2"] }
          name: "MONITOR_NAME"
          period: PERIOD
          runtime: {
            runtimeType: "RUNTIME_TYPE"
            runtimeTypeVersion: "RUNTIME_TYPE_VERSION"
            scriptLanguage: "SCRIPT_LANGUAGE"
          }
          script: "SCRIPT_CONTENT"
          status: STATUS
          advancedOptions: { enableScreenshotOnFailureAndScript: ENABLE_SCREENSHOT }
          apdexTarget: APDEX_TARGET
        }
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="update-API-test" title="Atualizar um monitor de teste de API">
    Para atualizar um monitor de API com script (incluindo a capacidade de atualizar a versão de tempo de execução), use isto:

    ```graphql
    mutation {
      syntheticsUpdateScriptApiMonitor(
        guid: ENTITY_GUID
        monitor: {
          locations: { public: ["LOCATION_1", "LOCATION_2"] }
          name: "YOUR_MONITOR_NAME"
          period: PERIOD
          runtime: {
            runtimeType: "RUNTIME_TYPE"
            runtimeTypeVersion: "RUNTIME_TYPE_VERSION"
            scriptLanguage: "SCRIPT_LANGUAGE"
          }
          script: "SCRIPT_CONTENT"
          status: STATUS
          apdexTarget: APDEX_TARGET
        }
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="update-step" title="Atualizar um monitor de etapas">
    Use isto para atualizar um monitor de etapas:

    ```graphql
    mutation {
      syntheticsUpdateStepMonitor(
        guid: ENTITY_GUID
        monitor: {
          browsers: [BROWSERS]
          devices: [DEVICES]
          locations: { public: ["LOCATION_1", "LOCATION_2"] }
          name: "MONITOR_NAME"
          period: PERIOD
          runtime: {
            runtimeType: "RUNTIME_TYPE"
            runtimeTypeVersion: "RUNTIME_TYPE_VERSION"
            scriptLanguage: "SCRIPT_LANGUAGE"
          }
          status: STATUS
          steps: [
            { 
              ordinal: 0,
              type: NAVIGATE,
              values: ["MONITORED_URI", "USER_AGENT"] 
            }
            {
              ordinal: STEP_NUMBER,
              type: STEP_TYPE,
              values: ["VALUE_1", "VALUE_2"]
            }
          ]
          advancedOptions: { enableScreenshotOnFailureAndScript: ENABLE_SCREENSHOT }
          apdexTarget: APDEX_TARGET
        }
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="update-certificate-check" title="Atualizar um monitor de verificação de certificado">
    Use isto para atualizar um monitor de verificação de certificado:

    ```graphql
    mutation {
      syntheticsUpdateCertCheckMonitor(
        guid: ENTITY_GUID
        monitor: {
          domain: "DOMAIN"
          locations: { public: ["LOCATION_1", "LOCATION_2"] }
          name: "YOUR_MONITOR_NAME"
          numberDaysToFailBeforeCertExpires: DAYS_UNTIL_EXPIRATION
          period: PERIOD
          status: STATUS
          apdexTarget: APDEX_TARGET
        }
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="update-broken-links" title="Atualizar um monitor de links quebrados">
    Use isto para atualizar um monitor de links quebrados:

    ```graphql
    mutation {
      syntheticsUpdateBrokenLinksMonitor(
        guid: ENTITY_GUID
        monitor: {
          locations: { public: ["LOCATION_1", "LOCATION_2"] }
          name: "YOUR_MONITOR_NAME"
          period: PERIOD
          status: STATUS
          apdexTarget: APDEX_TARGET
          uri: "MONITOR_URI"
          tags: { 
            key: "YOUR_TAG_NAME", 
            values: "TAG_VALUE" 
          }
        }
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="upgrade-monitor-runtime" title="Atualizar o tempo de execução de um monitor">
    Você pode usar o exemplo abaixo para atualizar um browser simples, uma API com script ou monitorar o script do browser para os novos tempos de execução do Chrome 100+ ou Node.js 16.10. O exemplo a seguir atualiza um script monitor de browser com para o novo tempo de execução do tempo de execução legado.

    * Para atualizar um monitor de browser simples usando o exemplo abaixo, altere a mutação para `syntheticsUpdateSimpleBrowserMonitor` em vez de `syntheticsUpdateScriptBrowserMonitor`.
    * Para atualizar um monitor de API com script usando o exemplo abaixo, altere a mutação para `syntheticsUpdateScriptApiMonitor` em vez de `syntheticsUpdateScriptBrowserMonitor`.

    Confira [os campos opcionais](#optional-fields) para obter detalhes adicionais sobre as configurações de tempo de execução.

    ```graphql
    mutation {
      syntheticsUpdateScriptBrowserMonitor ( 
        guid: "ENTITY_GUID", 
        monitor: {
          runtime: {
            runtimeType: "RUNTIME_TYPE", 
            runtimeTypeVersion: "RUNTIME_TYPE_VERSION", 
            scriptLanguage: "SCRIPT_LANGUAGE"
            }
          }
        ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="downgrade-monitor-runtime" title="Reduzir o tempo de execução de um monitor">
    Você pode usar o exemplo abaixo para atualizar um navegador simples, API com script ou um script monitor de browser com para usar um tempo de execução legado antes do EOL de 22 de outubro de 2024. O exemplo a seguir faz o downgrade de um script monitor de browser com para o antigo runtime a partir do novo runtime.

    * Para atualizar um monitor de browser simples usando o exemplo abaixo, altere a mutação para `syntheticsUpdateSimpleBrowserMonitor` em vez de `syntheticsUpdateScriptBrowserMonitor`.
    * Para atualizar um monitor de API com script usando o exemplo abaixo, altere a mutação para `syntheticsUpdateScriptApiMonitor` em vez de `syntheticsUpdateScriptBrowserMonitor`.

    Confira [os campos opcionais](#optional-fields) para obter detalhes adicionais sobre as configurações de tempo de execução.

    ```graphql
    mutation {
      syntheticsUpdateScriptBrowserMonitor ( 
        guid: "ENTITY_GUID", 
        monitor: {
          runtime: {
            runtimeType: "", 
            runtimeTypeVersion: "", 
            scriptLanguage: ""
            }
          }
        ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="move-monitor" title="Mover um monitor entre localização privada habilitada para VSE">
    Use a seguinte mutação para mover um monitor API com script entre localização privada habilitada para VSE. Certifique-se de incluir o script para regenerar HMACs:

    ```graphql
    mutation {
      syntheticsUpdateScriptApiMonitor(
        guid: "ENTITY_GUID"
        monitor: {locations: 
          {private: [{
            guid: "LOCATION_GUID", 
            vsePassword: "YOUR_VSE_PASSWORD"}]
          }, 
          script: "SCRIPT_CONTENT"}
      ) 
      {
        errors {
          description
          type
        }
        monitor {
          status
        }
      }
    }
    ```
  </Collapser>
</CollapserGroup>

## Excluir um monitor Sintético [#delete-monitor]

Use este script para excluir seu monitor:

<CollapserGroup>
  <Collapser id="delete-monitor" title="Excluir monitor">
    Exclua um monitor usando o GUID da entidade do monitor.

    ```graphql
    mutation {
      syntheticsDeleteMonitor (
        guid: "ENTITY_GUID"
      ) {
        deletedGuid
      }
    }
    ```
  </Collapser>
</CollapserGroup>

## Gerencie sua localização privada [#private-locations]

A [localização privada](/docs/synthetics/synthetic-monitoring/private-locations/private-locations-overview-monitor-internal-sites-add-new-locations) permite monitorar aplicativos atrás de seu firewall. Ao criar uma localização privada, você instala e configura o minion privado para executar o monitor atribuído a essa localização privada.

<CollapserGroup>
  <Collapser id="private-location" title="Crie uma localização privada">
    ```graphql
    mutation {
      syntheticsCreatePrivateLocation (
        accountId: ACCOUNT_ID,
        name: "PrivateLocationName",
        description: "Optional description",
        shared: true,
        verifiedScriptExecution: false
      ) {
        guid
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="private-location" title="Atualizar uma localização privada">
    Se um local for compartilhado e usado por outras contas na sua organização para executar monitores Sintético, você não poderá cancelar o compartilhamento desta localização privada até que esses monitores sejam desabilitados.

    ```graphql
    mutation {
      syntheticsUpdatePrivateLocation (
        shared: false,
        guid: ENTITY_GUID,     
        description: "EnterYourDescription", 
        verifiedScriptExecution: true
      ) {
        description
        verifiedScriptExecution
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="delete-private locations" title="Excluir um local privado">
    ```graphql
    mutation {
      syntheticsDeletePrivateLocation (
        guid: ENTITY_GUID
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="purge-private-location" title="Limpar uma fila de trabalhos de localização privada">
    Se você precisar limpar um backlog pesado, use isto:

    ```graphql
    mutation {
      syntheticsPurgePrivateLocationQueue (
        guid: ENTITY_GUID
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>
</CollapserGroup>

## Gerencie suas credenciais seguras [#secure-credentials]

Você usa [credenciais seguras](/docs/synthetics/synthetic-monitoring/using-monitors/store-secure-credentials-scripted-browsers-api-tests) ao armazenar, proteger e gerenciar centralmente informações protegidas usadas pelo seu monitor, como senhas, chave de API ou certificados codificados. Usar o NerdGraph permite que você altere programaticamente os valores de suas credenciais seguras se precisar redefinir alguma credencial por qualquer motivo.

<CollapserGroup>
  <Collapser id="secure-credential" title="Crie uma credencial segura">
    ```graphql
    mutation {
      syntheticsCreateSecureCredential (
        accountId: ACCOUNT_ID, 
        description: "YourOptionalDescription", 
        key: SECURE_CREDENTIAL_NAME, 
        value: SECURE_CREDENTIAL_VALUE 
      ) {
        errors {
          description
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="update-secure" title="Atualizar uma credencial segura">
    ```graphql
    mutation {
      syntheticsUpdateSecureCredential(
        accountId: ACCOUNT_ID
        description: "YourOptionalDescription"
        key: SECURE_CREDENTIAL_NAME
        value: SECURE_CREDENTIAL_VALUE
      ) {
        createdAt
        lastUpdate
        errors {
          description
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="secure-credential" title="Excluir uma credencial segura">
    ```graphql
    mutation {
      syntheticsDeleteSecureCredential (
        accountId: ACCOUNT_ID, 
        key: SECURE_CREDENTIAL_NAME
      ) {
        errors {
          description
        }
      }
    }
    ```
  </Collapser>
</CollapserGroup>

## Gerencie o período de inatividade do seu monitor [#monitor-downtimes]

Monitor período de inatividade permite especificar horários em que seu Sintético deve parar de funcionar. Fornecemos diferentes trechos que demonstram como agendar o período de inatividade monitor para o seu Sintético. Você precisa atualizar esses trechos para especificar o fuso horário, os horários de início e de término. Para saber mais sobre quando você pode programar o período de inatividade monitor , confira nosso documento [Desativar monitoramento durante horários de manutenção programados](/docs/synthetics/synthetic-monitoring/using-monitors/monitor-downtimes-disable-monitoring-during-scheduled-maintenance-times/). Para encontrar valores de fuso horário, consulte [o banco de dados tz de fusos horários](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones). Por exemplo, América/Los Angeles usaria a abreviatura PDT.

<CollapserGroup>
  <Collapser id="create-once-downtime" title="Crie um monitor de período de inatividade que seja executado uma vez">
    ```graphql
    mutation {
      syntheticsCreateOnceMonitorDowntime (
        accountId: ACCOUNT_ID,
        name: "MonitorDowntimeName",
        monitorGuids: ["OptionalMonitorEntityGuid", "OptionalMonitorEntityGuid"],
        timezone: "TIMEZONE",
        startTime: "yyyy-MM-ddTHH:mm:ss",
        endTime: "yyyy-MM-ddTHH:mm:ss"
      ) {
        guid,
        accountId,
        name,
        monitorGuids,
        timezone,
        startTime,
        endTime
      }
    }
    ```
  </Collapser>

  <Collapser id="create-daily-downtime" title="Crie um monitor de período de inatividade que seja executado diariamente">
    ```graphql
    mutation {
      syntheticsCreateDailyMonitorDowntime (
        accountId: ACCOUNT_ID,
        name: "MonitorDowntimeName",
        monitorGuids: ["OptionalMonitorEntityGuid", "AnotherOptionalMonitorEntityGuid"],
        timezone: "TIMEZONE",
        startTime: "yyyy-MM-ddTHH:mm:ss",
        endTime: "yyyy-MM-ddTHH:mm:ss",
        endRepeat: {
          onDate: "yyyy-MM-ddTHH:mm:ss",
          onRepeat: Int
        }
      ) {
        guid,
        accountId,
        name,
        monitorGuids,
        timezone,
        startTime,
        endTime,
        endRepeat {
          onDate,
          onRepeat
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="create-weekly-downtime" title="Crie um monitor de período de inatividade que seja executado semanalmente">
    ```graphql
    mutation {
      syntheticsCreateWeeklyMonitorDowntime (
        accountId: ACCOUNT_ID,
        name: "MonitorDowntimeName",
        monitorGuids: ["OptionalMonitorEntityGuid", "AnotherOptionalMonitorEntityGuid"],
        timezone: "TIMEZONE",
        startTime: "yyyy-MM-ddTHH:mm:ss",
        endTime: "yyyy-MM-ddTHH:mm:ss",
        endRepeat: {
          onDate: "yyyy-MM-ddTHH:mm:ss",
          onRepeat: Int
        },
        maintenanceDays: [WeekDaysEnums]
      ) {
        guid,
        accountId,
        name,
        monitorGuids,
        timezone,
        startTime,
        endTime,
        endRepeat {
          onDate,
          onRepeat
        },
        maintenanceDays
      }
    }
    ```
  </Collapser>

  <Collapser id="create-monthly-downtime" title="Crie um período de inatividade do monitor que seja executado mensalmente">
    ```graphql
    mutation {
      syntheticsCreateMonthlyMonitorDowntime (
        accountId: ACCOUNT_ID,
        name: "MonitorDowntimeName",
        monitorGuids: ["OptionalMonitorEntityGuid", "AnotherOptionalMonitorEntityGuid"],
        timezone: "TIMEZONE",
        startTime: "yyyy-MM-ddTHH:mm:ss",
        endTime: "yyyy-MM-ddTHH:mm:ss",
        endRepeat: {
          onDate: "yyyy-MM-ddTHH:mm:ss",
          onRepeat: Int
        },
        frequency: {
          daysOfWeek: {
            weekDay: WeekDaysEnum,
            ordinalDayOfMonth: DayOfMonthOrdinal
          },
          daysOfMonth: [Int]
        }
      ) {
        guid,
        accountId,
        name,
        monitorGuids,
        timezone,
        startTime,
        endTime,
        endRepeat {
          onDate,
          onRepeat
        },
        frequency {
          daysOfWeek {
            weekDay,
            ordinalDayOfMonth
          },
          daysOfMonth
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="update-downtime" title="Atualizar um período de inatividade do monitor">
    ```graphql
    mutation {
      syntheticsEditMonitorDowntime (
        guid: "MonitorDowntimeEntityGuid",
        name: "MONITOR_DOWNTIME_NAME",
        monitorGuids: ["OptionalMonitorEntityGuid", "AnotherOptionalMonitorEntityGuid"],
        once: {
          timezone: "TIMEZONE",
          startTime: "yyyy-MM-ddTHH:mm:ss",
          endTime: "yyyy-MM-ddTHH:mm:ss"
        },
        daily: {
          timezone: "TIMEZONE",
          startTime: "yyyy-MM-ddTHH:mm:ss",
          endTime: "yyyy-MM-ddTHH:mm:ss",
          endRepeat: {
            onDate: "yyyy-MM-ddTHH:mm:ss",
            onRepeat: Int
          }
        },
        weekly: {
          timezone: "TIMEZONE",
          startTime: "yyyy-MM-ddTHH:mm:ss",
          endTime: "yyyy-MM-ddTHH:mm:ss",
          endRepeat: {
            onDate: "yyyy-MM-ddTHH:mm:ss",
            onRepeat: Int
          },
          maintenanceDays: [WeekDaysEnums]
        },
        monthly: {
          timezone: "TIMEZONE",
          startTime: "yyyy-MM-ddTHH:mm:ss",
          endTime: "yyyy-MM-ddTHH:mm:ss",
          endRepeat: {
            onDate: "yyyy-MM-ddTHH:mm:ss",
            onRepeat: Int
          },
          frequency: {
            daysOfWeek: {
              weekDay: WeekDaysEnum,
              ordinalDayOfMonth: DayOfMonthOrdinal
          },
          daysOfMonth: [Int]
        }
      ) {
        guid,
        accountId,
        name,
        monitorGuids,
        timezone,
        startTime,
        endTime,
        endRepeat {
          onDate,
          onRepeat
        },
        maintenanceDays,
        frequency {
          daysOfWeek {
            weekDay,
            ordinalDayOfMonth
          },
          daysOfMonth
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="delete-downtime" title="Excluir um período de inatividade do monitor">
    ```graphql
    mutation {
      syntheticsDeleteMonitorDowntime (
        guid: DOWNTIME_ENTITY_GUID
      ) {
        guid
      }
    }
    ```
  </Collapser>
</CollapserGroup>