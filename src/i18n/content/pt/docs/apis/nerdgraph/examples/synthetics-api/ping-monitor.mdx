---
title: Gerenciar monitores de ping
tags:
  - Synthetics
  - APIs
  - NerdGraph
  - Examples
metaDescription: How to use New Relic NerdGraph API to create ping monitors for synthetic monitoring.
freshnessValidatedDate: never
translationType: machine
---

O New Relic permite que você use o NerdGraph para criar [monitores de ping](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors) (também conhecidos como monitores simples). Os monitores de ping verificam se um URL ou endpoint está acessível, fazendo requests HTTP em intervalos regulares. Este tutorial fornece exemplos de como usar a API do NerdGraph para automatizar a criação de monitores de ping.

## Crie um monitor de ping [#create-ping-monitor]

Você pode criar um monitor de ping usando a mutação `syntheticsCreateSimpleMonitor`. Essa mutação permite configurar o monitoramento para qualquer URL ou endpoint acessível publicamente.

### Parâmetro de entrada

<table>
  <thead>
    <tr>
      <th>
        Parâmetro
      </th>

      <th>
        Tipo de dados
      </th>

      <th>
        É obrigatório?
      </th>

      <th>
        Descrição
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `accountId`
      </td>

      <td>
        Inteiro
      </td>

      <td>
        Sim
      </td>

      <td>
        Seu 

        [ID de conta](/docs/accounts/accounts-billing/account-structure/account-id)

         New Relic onde o monitor será criado.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.locations.public`
      </td>

      <td>
        Matriz
      </td>

      <td>
        Sim
      </td>

      <td>
        matriz de 

        [localização pública](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors/#setting-location)

         identificadar onde o monitor executará verificações (por exemplo, 

        `["US_EAST_1", "US_WEST_1"]`

        ).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.name`
      </td>

      <td>
        Corda
      </td>

      <td>
        Sim
      </td>

      <td>
        O nome de exibição do seu monitor de ping.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.period`
      </td>

      <td>
        Enum
      </td>

      <td>
        Sim
      </td>

      <td>
        Com que frequência o monitor é executado? Opções: 

        `EVERY_MINUTE`

        , 

        `EVERY_5_MINUTES`

        , 

        `EVERY_10_MINUTES`

        , 

        `EVERY_15_MINUTES`

        , 

        `EVERY_30_MINUTES`

        , 

        `EVERY_HOUR`

        , 

        `EVERY_6_HOURS`

        , 

        `EVERY_12_HOURS`

        , 

        `EVERY_DAY`

        .
      </td>
    </tr>

    <tr>
      <td>
        `monitor.status`
      </td>

      <td>
        Enum
      </td>

      <td>
        Sim
      </td>

      <td>
        O estado do monitor. Opções: 

        `ENABLED`

         (monitor ativo e realizando verificações), 

        `DISABLED`

         (monitor inativo).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.uri`
      </td>

      <td>
        Corda
      </td>

      <td>
        Sim
      </td>

      <td>
        A URL ou endpoint a ser monitorado (por exemplo, 

        `https://example.com`

        ).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.advancedOptions.responseValidationText`
      </td>

      <td>
        Corda
      </td>

      <td>
        Não
      </td>

      <td>
        Texto que deve constar na resposta para que a verificação seja aprovada. Se especificado, o monitor falhará se esse texto não for encontrado no corpo da resposta.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.advancedOptions.useTlsValidation`
      </td>

      <td>
        Boleano
      </td>

      <td>
        Não
      </td>

      <td>
        Se deve validar o certificado TLS/SSL. Defina como 

        `true`

         para verificar a validade da cadeia SSL do certificado.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.apdexTarget`
      </td>

      <td>
        Float
      </td>

      <td>
        Não
      </td>

      <td>
        O monitor Apdex destino em segundos, usado para preencher relatórios SLA. O valor padrão é de 7,0 segundos.
      </td>
    </tr>
  </tbody>
</table>

### Solicitação de amostra

```graphql
mutation {
  syntheticsCreateSimpleMonitor(
    accountId: ACCOUNT_ID
    monitor: {
      locations: { public: ["LOCATION_1", "LOCATION_2"] }
      name: "YOUR_MONITOR_NAME"
      period: PERIOD
      status: STATUS
      uri: "MONITORED_URI"
      advancedOptions: {
        customHeaders: { name: "HEADER_NAME", value: "HEADER_VALUE" }
        redirectIsFailure: REDIRECT_IS_FAILURE
        responseValidationText: "VALIDATION_TEXT"
        shouldBypassHeadRequest: BYPASS_HEAD_REQUEST
        useTlsValidation: TLS_VALIDATION
      }
      apdexTarget: APDEX_TARGET
    }
  ) {
    errors {
      description
      type
    }
  }
}
```

### Resposta de amostra

Uma resposta bem-sucedida retorna `null` para erros:

```json
{
  "data": {
    "syntheticsCreateSimpleMonitor": {
      "errors": null
    }
  }
}
```

Se houver algum problema ao criar o monitor, a matriz `errors` conterá objetos com campos `description` e `type` explicando o que deu errado.

## Atualizar um monitor de ping [#update-ping-monitor]

Você pode atualizar um monitor de ping existente usando a mutação `syntheticsUpdateSimpleMonitor`. Isso permite modificar a configuração de um monitor de ping que já foi criado.

### Parâmetro de entrada

<table>
  <thead>
    <tr>
      <th>
        Parâmetro
      </th>

      <th>
        Tipo de dados
      </th>

      <th>
        É obrigatório?
      </th>

      <th>
        Descrição
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `guid`
      </td>

      <td>
        Corda
      </td>

      <td>
        Sim
      </td>

      <td>
        O 

        [GUID](/docs/apis/nerdgraph/examples/synthetics-api/query-synthetics-data#query-monitors)

         exclusivo da entidade do monitor que você deseja atualizar.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.locations.public`
      </td>

      <td>
        Matriz
      </td>

      <td>
        Não
      </td>

      <td>
        matriz de 

        [localização pública](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors/#setting-location)

         identificadar onde o monitor executará verificações (por exemplo, 

        `["US_EAST_1", "US_WEST_1"]`

        ).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.name`
      </td>

      <td>
        Corda
      </td>

      <td>
        Não
      </td>

      <td>
        O nome de exibição atualizado para o seu monitor de ping.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.period`
      </td>

      <td>
        Enum
      </td>

      <td>
        Não
      </td>

      <td>
        Com que frequência o monitor é executado? Opções: 

        `EVERY_MINUTE`

        , 

        `EVERY_5_MINUTES`

        , 

        `EVERY_10_MINUTES`

        , 

        `EVERY_15_MINUTES`

        , 

        `EVERY_30_MINUTES`

        , 

        `EVERY_HOUR`

        , 

        `EVERY_6_HOURS`

        , 

        `EVERY_12_HOURS`

        , 

        `EVERY_DAY`

        .
      </td>
    </tr>

    <tr>
      <td>
        `monitor.status`
      </td>

      <td>
        Enum
      </td>

      <td>
        Não
      </td>

      <td>
        O estado do monitor. Opções: 

        `ENABLED`

         (monitor ativo e realizando verificações), 

        `DISABLED`

         (monitor inativo).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.uri`
      </td>

      <td>
        Corda
      </td>

      <td>
        Não
      </td>

      <td>
        A URL ou endpoint a ser monitorado (por exemplo, 

        `https://example.com`

        ).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.advancedOptions.customHeaders`
      </td>

      <td>
        Objeto
      </td>

      <td>
        Não
      </td>

      <td>
        Cabeçalhos HTTP personalizados para incluir na solicitação. Cada cabeçalho possui uma propriedade 

        `name`

         e uma propriedade 

        `value`

        .
      </td>
    </tr>

    <tr>
      <td>
        `monitor.advancedOptions.redirectIsFailure`
      </td>

      <td>
        Boleano
      </td>

      <td>
        Não
      </td>

      <td>
        Se 

        `true`

        , o monitor tratará os redirecionamentos HTTP (códigos de status 3xx) como falhas.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.advancedOptions.responseValidationText`
      </td>

      <td>
        Corda
      </td>

      <td>
        Não
      </td>

      <td>
        Texto que deve constar na resposta para que a verificação seja aprovada. Se especificado, o monitor falhará se esse texto não for encontrado no corpo da resposta.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.advancedOptions.shouldBypassHeadRequest`
      </td>

      <td>
        Boleano
      </td>

      <td>
        Não
      </td>

      <td>
        Se 

        `true`

        , o monitor ignorará a solicitação HEAD inicial e fará apenas uma solicitação GET.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.advancedOptions.useTlsValidation`
      </td>

      <td>
        Boleano
      </td>

      <td>
        Não
      </td>

      <td>
        Se deve validar o certificado TLS/SSL. Defina como 

        `true`

         para verificar a validade da cadeia SSL do certificado.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.apdexTarget`
      </td>

      <td>
        Float
      </td>

      <td>
        Não
      </td>

      <td>
        O monitor Apdex destino em segundos, usado para preencher relatórios SLA. O valor padrão é de 7,0 segundos.
      </td>
    </tr>
  </tbody>
</table>

### Solicitação de amostra

```graphql
mutation {
  syntheticsUpdateSimpleMonitor(
    guid: "ENTITY_GUID"
    monitor: {
      locations: { public: ["LOCATION_1", "LOCATION_2"] }
      name: "YOUR_MONITOR_NAME"
      period: PERIOD
      status: STATUS
      uri: "MONITORED_URI"
      advancedOptions: {
        customHeaders: { name: "HEADER_NAME", value: "HEADER_VALUE" }
        redirectIsFailure: REDIRECT_IS_FAILURE
        responseValidationText: "VALIDATION_TEXT"
        shouldBypassHeadRequest: BYPASS_HEAD_REQUEST
        useTlsValidation: TLS_VALIDATION
      }
      apdexTarget: APDEX_TARGET
    }
  ) {
    errors {
      description
      type
    }
  }
}
```

### Resposta de amostra

Uma resposta bem-sucedida retorna `null` para erros:

```json
{
  "data": {
    "syntheticsUpdateSimpleMonitor": {
      "errors": null
    }
  }
}
```

Se houver algum problema ao atualizar o monitor, a matriz `errors` conterá objetos com campos `description` e `type` explicando o que deu errado.

## Excluir um monitor Sintético [#delete-monitor]

Esta API permite que você exclua um monitor existente usando a mutação `syntheticsDeleteMonitor` com o parâmetro guid.

### Parâmetro de entrada

<table>
  <thead>
    <tr>
      <th>
        Parâmetro
      </th>

      <th>
        Tipo de dados
      </th>

      <th>
        É obrigatório?
      </th>

      <th>
        Descrição
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `guid`
      </td>

      <td>
        Corda
      </td>

      <td>
        Sim
      </td>

      <td>
        O 

        [GUID](/docs/apis/nerdgraph/examples/synthetics-api/query-synthetics-data#query-monitors)

         exclusivo da entidade do monitor que você deseja excluir.
      </td>
    </tr>
  </tbody>
</table>

### Solicitação de amostra

```graphql
mutation {
  syntheticsDeleteMonitor(
    guid: "ENTITY_GUID"
  ) {
    deletedGuid
  }
}
```

### Resposta de amostra

Uma exclusão bem-sucedida retorna o GUID do monitor excluído:

```json
{
  "data": {
    "syntheticsDeleteMonitor": {
      "deletedGuid": "ENTITY_GUID"
    }
  }
}
```

Caso ocorra algum problema ao excluir o monitor, uma mensagem de erro será retornada com detalhes sobre o que deu errado.