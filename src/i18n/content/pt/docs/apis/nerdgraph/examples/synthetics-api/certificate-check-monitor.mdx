---
title: Gerenciar monitores de verificação de certificados
tags:
  - Synthetics
  - APIs
  - NerdGraph
  - Examples
metaDescription: How to use New Relic NerdGraph API to create and update certificate check monitors for synthetic monitoring.
freshnessValidatedDate: never
translationType: machine
---

O New Relic permite que você use o NerdGraph para criar [monitores de verificação de certificados](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors). O verificador de certificados monitora as datas de expiração dos certificados SSL e notifica você quando os certificados estão prestes a expirar. Este tutorial fornece exemplos de como usar a API do NerdGraph para automatizar a criação de monitores de verificação de certificados.

## Crie um monitor de verificação de certificado [#create-certificate-check]

Você pode criar um monitor de verificação de certificado usando a mutação `syntheticsCreateCertCheckMonitor`. Essa mutação permite configurar o monitoramento do vencimento do certificado SSL em qualquer domínio.

### Parâmetro de entrada

<table>
  <thead>
    <tr>
      <th>
        Parâmetro
      </th>

      <th>
        Tipo de dados
      </th>

      <th>
        É obrigatório?
      </th>

      <th>
        Descrição
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `accountId`
      </td>

      <td>
        Inteiro
      </td>

      <td>
        Sim
      </td>

      <td>
        Seu 

        [ID de conta](/docs/accounts/accounts-billing/account-structure/account-id)

         New Relic onde o monitor será criado.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.domain`
      </td>

      <td>
        Corda
      </td>

      <td>
        Sim
      </td>

      <td>
        O domínio a ser monitorado para expiração do certificado (ex: 

        `example.com`

        ).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.locations.public`
      </td>

      <td>
        Matriz
      </td>

      <td>
        Sim
      </td>

      <td>
        matriz de 

        [localização pública](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors/#setting-location)

         identificadar onde o monitor executará verificações (por exemplo, 

        `["US_EAST_1", "US_WEST_1"]`

        ).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.name`
      </td>

      <td>
        Corda
      </td>

      <td>
        Sim
      </td>

      <td>
        O nome de exibição do seu monitor de verificação de certificados.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.numberDaysToFailBeforeCertExpires`
      </td>

      <td>
        Inteiro
      </td>

      <td>
        Sim
      </td>

      <td>
        Número de dias restantes até o vencimento do certificado para que seja acionada uma falha. Por exemplo, definir esse valor para 30 significa que o monitor falhará quando o certificado tiver 30 dias ou menos até expirar.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.period`
      </td>

      <td>
        Enum
      </td>

      <td>
        Sim
      </td>

      <td>
        Com que frequência o monitor é executado? Opções: 

        `EVERY_MINUTE`

        , 

        `EVERY_5_MINUTES`

        , 

        `EVERY_10_MINUTES`

        , 

        `EVERY_15_MINUTES`

        , 

        `EVERY_30_MINUTES`

        , 

        `EVERY_HOUR`

        , 

        `EVERY_6_HOURS`

        , 

        `EVERY_12_HOURS`

        , 

        `EVERY_DAY`

        .
      </td>
    </tr>

    <tr>
      <td>
        `monitor.status`
      </td>

      <td>
        Enum
      </td>

      <td>
        Sim
      </td>

      <td>
        O estado do monitor. Opções: 

        `ENABLED`

         (monitor ativo e realizando verificações), 

        `DISABLED`

         (monitor inativo).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.apdexTarget`
      </td>

      <td>
        Float
      </td>

      <td>
        Não
      </td>

      <td>
        O monitor Apdex destino em segundos, usado para preencher relatórios SLA. O valor padrão é de 7,0 segundos.
      </td>
    </tr>
  </tbody>
</table>

### Solicitação de amostra

```graphql
mutation {
  syntheticsCreateCertCheckMonitor(
    accountId: ACCOUNT_ID
    monitor: {
      domain: "DOMAIN"
      locations: { public: ["LOCATION_1", "LOCATION_2"] }
      name: "YOUR_MONITOR_NAME"
      numberDaysToFailBeforeCertExpires: DAYS_UNTIL_EXPIRATION
      period: PERIOD
      status: STATUS
      apdexTarget: APDEX_TARGET
    }
  ) {
    errors {
      description
      type
    }
  }
}
```

### Resposta de amostra

Uma resposta bem-sucedida retorna `null` para erros:

```json
{
  "data": {
    "syntheticsCreateCertCheckMonitor": {
      "errors": null
    }
  }
}
```

Se houver algum problema ao criar o monitor, a matriz `errors` conterá objetos com campos `description` e `type` explicando o que deu errado.

## Atualizar um monitor de verificação de certificado [#update-certificate-check]

Você pode atualizar um monitor de verificação de certificado existente usando a mutação `syntheticsUpdateCertCheckMonitor`. Isso permite modificar a configuração de um monitor de verificação de certificado que já foi criado.

### Parâmetro de entrada

<table>
  <thead>
    <tr>
      <th>
        Parâmetro
      </th>

      <th>
        Tipo de dados
      </th>

      <th>
        É obrigatório?
      </th>

      <th>
        Descrição
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `guid`
      </td>

      <td>
        Corda
      </td>

      <td>
        Sim
      </td>

      <td>
        O 

        [GUID](/docs/apis/nerdgraph/examples/synthetics-api/query-synthetics-data#query-monitors)

         exclusivo da entidade do monitor que você deseja atualizar.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.domain`
      </td>

      <td>
        Corda
      </td>

      <td>
        Não
      </td>

      <td>
        O domínio a ser monitorado para expiração do certificado (ex: 

        `example.com`

        ).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.locations.public`
      </td>

      <td>
        Matriz
      </td>

      <td>
        Não
      </td>

      <td>
        matriz de 

        [localização pública](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors/#setting-location)

         identificadar onde o monitor executará verificações (por exemplo, 

        `["US_EAST_1", "US_WEST_1"]`

        ).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.name`
      </td>

      <td>
        Corda
      </td>

      <td>
        Não
      </td>

      <td>
        O nome de exibição atualizado para o seu monitor de verificação de certificado.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.numberDaysToFailBeforeCertExpires`
      </td>

      <td>
        Inteiro
      </td>

      <td>
        Não
      </td>

      <td>
        Número de dias restantes até o vencimento do certificado para que seja acionada uma falha.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.period`
      </td>

      <td>
        Enum
      </td>

      <td>
        Não
      </td>

      <td>
        Com que frequência o monitor é executado? Opções: 

        `EVERY_MINUTE`

        , 

        `EVERY_5_MINUTES`

        , 

        `EVERY_10_MINUTES`

        , 

        `EVERY_15_MINUTES`

        , 

        `EVERY_30_MINUTES`

        , 

        `EVERY_HOUR`

        , 

        `EVERY_6_HOURS`

        , 

        `EVERY_12_HOURS`

        , 

        `EVERY_DAY`

        .
      </td>
    </tr>

    <tr>
      <td>
        `monitor.status`
      </td>

      <td>
        Enum
      </td>

      <td>
        Não
      </td>

      <td>
        O estado do monitor. Opções: 

        `ENABLED`

         (monitor ativo e realizando verificações), 

        `DISABLED`

         (monitor inativo).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.apdexTarget`
      </td>

      <td>
        Float
      </td>

      <td>
        Não
      </td>

      <td>
        O monitor Apdex destino em segundos, usado para preencher relatórios SLA. O valor padrão é de 7,0 segundos.
      </td>
    </tr>
  </tbody>
</table>

### Solicitação de amostra

```graphql
mutation {
  syntheticsUpdateCertCheckMonitor(
    guid: ENTITY_GUID
    monitor: {
      domain: "DOMAIN"
      locations: { public: ["LOCATION_1", "LOCATION_2"] }
      name: "YOUR_MONITOR_NAME"
      numberDaysToFailBeforeCertExpires: DAYS_UNTIL_EXPIRATION
      period: PERIOD
      status: STATUS
      apdexTarget: APDEX_TARGET
    }
  ) {
    errors {
      description
      type
    }
  }
}
```

### Resposta de amostra

Uma resposta bem-sucedida retorna `null` para erros:

```json
{
  "data": {
    "syntheticsUpdateCertCheckMonitor": {
      "errors": null
    }
  }
}
```

Se houver algum problema ao atualizar o monitor, a matriz `errors` conterá objetos com campos `description` e `type` explicando o que deu errado.

## Excluir um monitor de verificação de certificado [#delete-monitor]

Quando um monitor de verificação de certificado não for mais necessário, você poderá removê-lo permanentemente usando a mutação `syntheticsDeleteMonitor`.

Para excluir um monitor, consulte a seção [Excluir monitor Sintético](/docs/apis/nerdgraph/examples/synthetics-api/ping-monitor/#delete-monitor).