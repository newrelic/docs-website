---
title: Agendar pesquisas NRQL
tags:
  - NRQL
  - Scheduled searches
  - Query scheduling
  - Automated queries
  - Email notifications
  - Workflow automation
metaDescription: 'Schedule automated NRQL queries to receive regular updates on your data via email. Transform repetitive, manual queries into proactive, automated workflows.'
freshnessValidatedDate: never
translationType: machine
---

Como usuário New Relic, você pode executar a mesma consulta NRQL repetidamente para monitorar padrões críticos, verificar condições específicas ou gerar relatórios periódicos. Por exemplo, você precisa verificar diariamente se há transações com falha, monitorar semanalmente a taxa de erros ou acompanhar as métricas de desempenho por hora em todo o seu aplicativo. Esse processo manual consome muito tempo e facilita a perda insights importantes quando você não está monitorando ativamente.

As pesquisas NRQL agendadas resolvem esse problema automatizando suas consultas repetitivas. Você pode agendar consultas para serem executadas automaticamente e receber os resultados por e-mail, mantendo-se informado sobre padrões críticos sem a necessidade de monitoramento manual constante.

<Callout title="visualização">
  Ainda estamos trabalhando nesse recurso, mas adoraríamos que você experimentasse!

  Este recurso está sendo fornecido atualmente como parte de um programa de pré-visualização, de acordo com nossas [políticas de pré-lançamento](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy). Durante o período de pré-visualização, este recurso está disponível apenas para clientes que executam New Relic no centro de dados dos EUA e pode ser acessado através da [interface de Logs](/docs/logs/ui-data/use-logs-ui), com planos de expansão para outras funcionalidades após a disponibilidade geral.
</Callout>

## O que você pode fazer [#features]

As pesquisas NRQL agendadas permitem que você:

* **Automatize consultas repetitivas**: converta consultas manuais em fluxos de trabalho automatizados que são executados de acordo com sua programação.
* **Mantenha-se informado proativamente**: Receba notificações por e-mail com os resultados da consulta diretamente na sua caixa de entrada.
* **Agendamento flexível**: Utilize agendamentos personalizados com expressões cron para definir quando o Consulta será executado.
* **Vários formatos de saída**: Exporte os resultados como arquivos CSV ou JSON anexados à notificação por e-mail.
* **Colaboração em equipe**: Envie resultados de pesquisa agendados para vários destinatários de e-mail.
* **Gerenciamento centralizado**: visualize, edite e gerencie todas as suas pesquisas agendadas em um único local na interface de administração.

## Pré-requisitos [#prerequisites]

Para usar pesquisas NRQL agendadas, você precisa de:

* **permissões de usuário**: [fluxo de trabalho As permissões de automação](/docs/alerts-applied-intelligence/applied-intelligence/incident-workflows/incident-workflows/#requirements) são necessárias para criar e gerenciar pesquisas agendadas.
* **Acesso à conta**: Acesso à conta onde você deseja agendar pesquisas.
* **Acesso aos dados**: Permissões adequadas para consultar os dados que você deseja agendar. Por exemplo, se você for agendar uma consulta em dados de log, precisará ter acesso a esses dados de log.

<Callout variant="important">
  As pesquisas NRQL agendadas são baseadas na infraestrutura de automação de fluxo de trabalho da New Relic. Sua organização precisa de permissões apropriadas para criar e gerenciar fluxo de trabalho.
</Callout>

## Agendar uma nova pesquisa [#create-schedule]

Para agendar uma nova pesquisa NRQL automatizada:

<Steps>
  <Step>
    **Aceda a pesquisas agendadas**:

    1. Acesse **[one.newrelic.com](https://one.newrelic.com) &gt; Administration &gt; Scheduled Searches**.
    2. Para configurar uma nova pesquisa, na página <DNT>**Scheduled Searches**</DNT>, clique em **Schedule a search**.
  </Step>

  <Step>
    **Configure sua consulta**:

    1. Na janela de configuração, elabore sua consulta NRQL usando a sintaxe NRQL padrão.
    2. Teste sua consulta para garantir que ela retorne os resultados esperados.
    3. Para configurar as opções de notificação para a pesquisa agendada, clique em **Continue**.
  </Step>

  <Step>
    **Configurar notificação**:

    <img title="Notification setup" alt="screenshot of notification setup" src="/images/nrql_scheduled-query_-set-up-notification.webp" />

    <figcaption>
      Esta visualização mostra a configuração de notificação para uma consulta NRQL agendada.
    </figcaption>

    1. Insira um nome para a sua pesquisa agendada.

    2. Adicione uma descrição opcional para ajudar a identificar o objetivo da pesquisa.

    3. Defina um [destino](/docs/alerts/get-notified/destinations/) para receber os resultados da consulta. Atualmente, você só pode enviar resultados para endereços de e-mail.

       <CollapserGroup>
         <Collapser id="existing destination-destination" title="Selecione um destino existente">
           Na dropdown, selecione os destinos existentes. Cada destino pode ter um grupo de endereços de e-mail associados a ele. Escolha um ou mais destinos para receber os resultados da consulta. Se o destino que você deseja não estiver listado, você pode criar um novo.
         </Collapser>

         <Collapser id="new-destination" title="Adicionar um novo destino">
           Clique em <DNT>**+ Add destination**</DNT> e execute os seguintes passos na janela modal que se abrirá:

           1. Clique em <DNT>**+ Add email**</DNT>, pesquise destinatários por endereço de e-mail ou nome de usuário e adicione-os.
           2. Insira um nome exclusivo para o destino e salve.

           O novo destino é adicionado à lista de destinos disponíveis no modal de configuração da notificação. Para editar o destino, selecione o <Icon name="fe-more-horizontal" /> menu.
         </Collapser>
       </CollapserGroup>

    4. Insira um assunto e um corpo de mensagem para a notificação por e-mail.

    5. Selecione o formato de resultado da consulta que deseja incluir no e-mail.

    6. Para definir um cronograma para a notificação por e-mail, clique em **Continue**.
  </Step>

  <Step>
    **Defina um cronograma**:

    Atualmente, suporta apenas expressões cron. A seguir, apresentamos alguns padrões comuns de expressões cron para referência. Insira uma expressão cron e clique em <DNT>**Continue**</DNT>.

    * `0 * * * *` - A cada hora, sempre no início de cada hora.

    * `0 9 * * *` - Todos os dias às 9h da manhã

    * `0 9 * * 1` - Todas as segundas-feiras às 9h da manhã

    * `0 0 1 * *` - Primeiro dia de cada mês à meia-noite

    * `*/15 * * * *` - A cada 15 minutos

    * `0 9 * * 1-5` - Todos os dias da semana às 9h00

      /\* 1. Escolha uma frequência para sua pesquisa (por exemplo, horária, diária, semanal ou \[expressão cron]\(#cron-examples)). 2. Defina a hora de início da sua pesquisa com o fuso horário. 3. Defina a \*\*hora de início\*\* e a \*\*hora de término\*\* da pesquisa. 4. Escolha uma das seguintes condições para enviar a notificação: \* &lt;DNT&gt;\*\*A cada execução\*\*&lt;/DNT&gt;: Receba uma notificação sempre que a pesquisa for executada. \* &lt;DNT&gt;\*\*Quando o número de resultados for maior que 0\*\*&lt;/DNT&gt;: Receba uma notificação somente quando a pesquisa retornar resultados. \*/
  </Step>

  <Step>
    **Revisar, confirmar e agendar a pesquisa**: Revisar sua configuração. Se precisar fazer mais ajustes, volte à etapa correspondente. Após finalizar sua configuração, clique em <DNT>**Schedule**</DNT> para criar sua pesquisa automatizada. A página <DNT>**Scheduled searches**</DNT> exibirá sua nova pesquisa na lista.
  </Step>
</Steps>

## Gerenciar pesquisas agendadas [#manage]

A página <DNT>**Scheduled searches**</DNT> na interface de Administração exibe todas as suas pesquisas automatizadas com seus respectivos nomes, descrições, agendamentos, status e próximo tempo de execução. De <Icon name="fe-more-horizontal" /> você pode:

* **Edite uma pesquisa** para atualizar a consulta, o agendamento, as configurações de notificação ou o formato de saída.
* **Excluir uma pesquisa**.

## Qual é o próximo? [#whats-next]

Agora que você configurou as pesquisas NRQL agendadas:

* [Saiba mais sobre NRQL Consulta](/docs/nrql/get-started/introduction-nrql-new-relics-query-language) para criar pesquisas automatizadas mais sofisticadas.
* [Configure os destinos de e-mail de alerta](/docs/alerts-applied-intelligence/notifications/destinations) para ampliar suas opções de notificação.
* [Explore a automação de fluxo de trabalho](/docs/alerts-applied-intelligence/applied-intelligence/incident-workflows/incident-workflows) para possibilidades de automação mais avançadas.