---
title: 'Adoção da nuvem: otimize a arquitetura e os gastos para melhorar continuamente seu ambiente de nuvem moderno'
tags:
  - New Relic solutions
  - New Relic solutions
  - Optimize your cloud native environment
metaDescription: Capture all the data you should leverage to optimize your cloud architecture and spend.
freshnessValidatedDate: never
translationType: machine
---

Na nuvem, é importante observar regularmente e de perto como seu aplicativo e serviços são arquitetados e utilizados. É a melhor maneira de identificar oportunidades que permitirão dimensionar corretamente sua instância, ajustar seu banco de dados, modificar seu uso de armazenamento, configurar melhor seus balanceadores de carga ou até mesmo reprojetar sua aplicação.

Por exemplo, se você tiver um conjunto de 20 instâncias, todas em execução com 10% de uso da CPU, considere usar uma instância menor ou consolidar mais trabalho nessas instâncias. Esse tipo de pensamento sobre a utilização e os gastos da nuvem ajudará você a otimizar seu ambiente e economizar dinheiro rapidamente.

Otimizar sua arquitetura de nuvem tem três objetivos principais:

1. Melhore o desempenho, a disponibilidade e a experiência do usuário final aproveitando melhor os serviços na nuvem
2. Otimize seus gastos com nuvem, alcançando o delicado equilíbrio entre custo e desempenho
3. Capture métricas comerciais e técnicas que ajudam a justificar seus gastos atuais com nuvem e que podem ser referenciadas como justificativa para um orçamento de nuvem maior conforme o crescimento exigir.

Neste tutorial, mostraremos como usar a [plataforma New Relic](https://one.newrelic.com) para capturar todos os dados que você deve aproveitar para otimizar sua arquitetura e gastos em nuvem.

## 1. Instrumente seu aplicativo e ambiente de nuvem [#instrument]

Certifique-se de que os seguintes produtos e integração sejam instrumentos:

<table>
  <thead>
    <tr>
      <th style={{ width: "150px" }}>
        Instrumento
      </th>

      <th>
        Detalhes
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        [Instalar infraestrutura](/docs/infrastructure/new-relic-infrastructure/installation)
      </td>

      <td>
        Instrumento de infraestrutura: Se ainda não o fez, revise os requisitos do [agente de infraestrutura](/docs/infrastructure). A infraestrutura vem com vários tipos de integração, incluindo [Amazon Web Services (AWS)](/docs/infrastructure/amazon-integrations/aws-integrations-list), [Microsoft Azure](/docs/integrations/microsoft-azure-integrations/azure-integrations-list) e [integração no host](/docs/infrastructure/host-integrations/host-integrations-list). Depois de instalar o agente de infraestrutura em seu(s) host(s), você terá acesso imediato ao amplo espectro de métricas que o agente coleta imediatamente.
      </td>
    </tr>

    <tr>
      <td>
        [Instale o agente APM](/docs/agents/manage-apm-agents/installation/install-agent)
      </td>

      <td>
        Instrumento seu aplicativo com [APM](/docs/apm). Isso permitirá que você monitor o desempenho do seu aplicativo enquanto você otimiza os serviços na nuvem subjacentes. Dessa forma, você pode confirmar se as alterações na infraestrutura estão de fato melhorando o desempenho do aplicativo.
      </td>
    </tr>

    <tr>
      <td>
        [Configurar a integração AWS](/docs/integrations/amazon-integrations/get-started/connect-aws-infrastructure)
      </td>

      <td>
        A integração Amazon da infraestrutura permite monitor seus dados AWS em qualquer lugar da nossa plataforma, incluindo infraestrutura, painel e alerta.
      </td>
    </tr>

    <tr>
      <td>
        [Conecte o faturamento da AWS](/docs/integrations/amazon-integrations/aws-integrations-list/aws-billing-monitoring-integration)
      </td>

      <td>
        Se você estiver hospedado em um ambiente AWS, a New Relic pode ajudá-lo monitor seus gastos na nuvem com nossa integração com [o AWS Billing](https://docs.aws.amazon.com/account-billing/index.html#lang/en_us) . Para aproveitar a integração do AWS Billing da New Relic, siga os procedimentos na [documentação do Connect AWS Billing](/docs/integrations/amazon-integrations/aws-integrations-list/aws-billing-monitoring-integration)
      </td>
    </tr>
  </tbody>
</table>

## 2. Criar dashboard para visualização de métricas de infraestrutura de anomalia; inclua orçamentos da AWS, se disponíveis [#create]

[O painel](/docs/query-your-data/explore-query-data/dashboards/introduction-new-relic-one-dashboards) permite que você escreva consultas personalizadas poderosas sobre seus dados e visualize os resultados em um widget exibido em um dashboard comum. Você também pode alimentar os resultados da sua consulta diretamente no [alerta](https://newrelic.com/alerts), onde poderá obter notificação imediata sobre qualquer Desvio identificado.

Para esta etapa, você deve exibir métricas de infraestrutura de anomalia relacionadas ao desempenho e uso (CPU, memória, disco, banco de dados, etc.). Incluir orçamentos da AWS, se disponíveis.

Crie <InlinePopover type="dashboards" />individuais para cada aplicativo e, em seguida, reúna esses painéis em um único [aplicativo de dados](/docs/insights/use-insights-ui/manage-dashboards/data-apps-build-collections-linked-dashboards), conforme mostrado aqui. Este aplicativo de dados Visão geral da produção da AWS exibe um conjunto de widgets relevantes para um orçamento de produção da AWS. Os aplicativos de dados são ótimos para apresentações nas quais você deseja percorrer uma série de tópicos e também fornecer uma visão geral clara de todo um ambiente ou serviço.

<CollapserGroup>
  <Collapser id="org-dashboards" title="Crie um painel para cada nível da sua organização">
    Quer você seja um desenvolvedor, operador ou executivo, ter informações sobre a utilização da nuvem pode ajudá-lo a otimizar seu ambiente de nuvem:

    * Desenvolvedores: entender o custo atual do aplicativo pode ajudar os desenvolvedores a configurar o aplicativo para usar mais serviços com mais eficiência. Por exemplo, os desenvolvedores poderiam cortar custos de nuvem usando [o AWS Lambda](https://aws.amazon.com/lambda/) ou uma instância de tamanho adequado?

    * Operadores: O monitoramento da utilização do aplicativo permite que os operadores detectem possíveis sobrecargas devido a serviços mal configurados. Por exemplo, a configuração de escalonamento automático da equipe de operações está diminuindo adequadamente?

    * Executivos: Uma visão geral dos gastos previstos e reais na nuvem, para aplicativos individuais, por região e totais gerais, pode ajudar os executivos a tomar melhores decisões de negócios.

      Use o New Relic para acompanhar seus gastos na nuvem e garantir que suas equipes recebam alertas imediatamente quando você exceder o limite.
  </Collapser>
</CollapserGroup>

## 3. Identifique recursos para otimização

Esta etapa mostra como usar a métrica capturada pelo New Relic para determinar quais recursos otimizar.

<img title="Create an alert condition" alt="Create an alert condition" src="/images/alert-policy_screenshot-full_new-alert-conditions.webp" />

No dashboard de exemplo acima, o widget de uso da CPU à esquerda revela que este aplicativo usa muitos tamanhos de instância. Observe que a instância “c4.xlarge” (em coral) consome consistentemente apenas cerca de 20% da capacidade da CPU. Porém, ao analisar o uso de memória do c4.xlarge no widget central (verde claro), você verá que o uso de memória para esta instância varia de 20% a 80%. Isso sugere que o aplicativo consome mais memória do que CPU. Nesse caso, o tipo de instância deve ser alterado de uma instância otimizada para computador para uma instância otimizada para memória. Observe que o gráfico à direita do dashboard pode ser usado para monitor o tempo médio de resposta do aplicativo conforme você faz essas otimizações.

Este é apenas um exemplo de como identificar recursos baseados em nuvem que poderiam ser candidatos à otimização.

Agora que você identificou a arquitetura para otimização, vá em frente e faça isso. Quer você dimensione corretamente sua instância, ajuste seu banco de dados, modifique seu uso de armazenamento, configure melhor seus balanceadores de carga ou até mesmo re-arquitete seu aplicativo, no final seu objetivo é ser capaz de comparar sua arquitetura nova e otimizada contra a anomalia que você capturou na Etapa 2. Para saber mais sobre anomalias, revise o [tutorial Estabelecer objetivos e anomalia](/docs/1-adopt-easily-establish-objectives-baselines-define-team-slos).

## 4. Opcional: configurar alerta [#alerts]

Você pode criar uma condição do alerta para consulta de NRQL. Certifique-se de consultar a [documentação completa](/docs/alerts/new-relic-alerts/defining-conditions/create-alert-conditions-nrql-queries) conforme necessário.

Use esta consulta para configurar o alerta:

```sql
SELECT latest(`provider.actualAmount`) AS '$ Actual', 
       latest(`provider.forecastedAmount`) AS '$ Forecast', 
       max(`provider.limitAmount`) AS '$ Limit' 
FROM FinanceSample WHERE provider = 'BillingBudget' 
AND `provider.budgetName` = '[Your Cloud Budget]'
```

Se você puder escrever consultas sobre seus dados e mostrá-los no painel, poderá usá-los facilmente para gerar [condição do alerta](/docs/alerts-applied-intelligence/new-relic-alerts/alert-conditions/create-alert-conditions/).

### Consulta de anomalia [#anomaly-queries]

New Relic também permite que você escreva “anomalia consulta” em seus dados. São consultas que você escreve sem estabelecer limites rígidos para os resultados. Em vez disso, você permite que os alertas New Relic aprendam automaticamente seus dados de desempenho e, em seguida, alertem você quando seus dados se afastarem muito dos números de anomalia.

Para criar uma consulta de anomalia, acesse o [console de alertas](/docs/alerts/new-relic-alerts/configuring-alert-policies/create-or-rename-alert-policy#alert-policy-name), entre em política de alertas e adicione uma Nova política de alertas. Em seguida, siga estas etapas:

1. Crie políticas de alertas. Dê à sua apólice um nome conciso e descritivo e selecione uma preferência de incidente. Em seguida, selecione Criar política de alertas.

2. Crie uma condição. Selecione <DNT>**NRQL**</DNT>

   <img title="Enter a NQRL query" alt="Enter a NQRL query" src="/images/alert-policy_screenshot-full_enter-nrql.webp" />

3. Defina sua consulta e decida com que restrição os alertas do New Relic devem analisar seus dados usando um controle deslizante simples e uma visualização com base em seu desempenho recente.

   <img title="Enter a threshold" alt="Enter a threshold" src="/images/alert-policy_screenshot-full_enter-threshold.webp" />

   O controle deslizante na parte inferior do gráfico aumenta ou diminui a faixa cinza em torno do limite do seu orçamento (a linha azul). A configuração mostrada teria resultado em zero incidente com base em dados recentes, e é isso que você está procurando. No entanto, se a linha azul subir ou descer da faixa cinza, iremos notificá-lo imediatamente.

   Os alertas são uma ótima maneira de ajudá-lo a aprender proativamente sobre seus gastos na nuvem ou sobre qualquer um dos seus dados de desempenho.

## Saber mais [#learn-more]

* Revise o tutorial [Alertas proativos e orquestração de incidentes](/docs/4-fail-fast-set-proactive-alerts-align-teams-tools-processes-incident-response) para se aprofundar em algumas das práticas recomendadas descritas acima.