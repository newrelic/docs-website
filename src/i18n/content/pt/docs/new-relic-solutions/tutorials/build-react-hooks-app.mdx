---
title: Crie um aplicativo New Relic com ganchos React
tags:
  - New Relic solutions
  - Build with New Relic
metaDescription: Build a simple New Relic app with React hooks
freshnessValidatedDate: never
translationType: machine
---

<br />

A partir da versÃ£o 2.49.1 do nosso CLI `nr1`, vocÃª pode criar aplicativos New Relic e visualizaÃ§Ãµes personalizadas com [React hooks](https://react.dev/reference/react/hooks). Este guia fornece alguns exemplos de Nerdlet de React hooks em aÃ§Ã£o!

## Antes de vocÃª comeÃ§ar

O desenvolvimento de Nerdpacks requer uma conta New Relic e a CLI da New Relic, `nr1`.

Se vocÃª ainda nÃ£o o fez:

* [Cadastre-se](https://newrelic.com/signup/) para uma conta New Relic
* Instale [o Node.js.](https://nodejs.org/en/download/)
* Conclua o [inÃ­cio rÃ¡pido da CLI](https://one.newrelic.com/launcher/developer-center.launcher?pane=eyJuZXJkbGV0SWQiOiJkZXZlbG9wZXItY2VudGVyLmRldmVsb3Blci1jZW50ZXIifQ==)

Agora vocÃª tem um Nerdpack chamado `my-awesome-nerdpack`. Este Nerdpack tem um Nerdlet e um launcher que vocÃª nomeou (embora este guia use o nome padrÃ£o do launcher, &quot;launcher&quot;, e o nome do Nerdlet, &quot;home&quot;). VocÃª usa este Nerdpack ao longo deste guia.

Por fim, certifique-se de que seu `nr1` esteja atualizado. Este guia requer uma versÃ£o mÃ­nima de 2.49.1:

```sh
nr1 update
nr1 version
[output] @datanerd/nr1/{purple}2.49.1{normal} darwin-x64 node-v14.15.1
```

<Callout variant="tip">
  Se vocÃª usa VSCode, temos uma [extensÃ£o](https://marketplace.visualstudio.com/items?itemName=new-relic.nr1) e um [pacote de extensÃµes](https://marketplace.visualstudio.com/items?itemName=new-relic.new-relic-extension-pack) que vocÃª pode usar para construir seu aplicativo.
</Callout>

```jsx fileName=index.js
import React from 'react';

export default class HomeNerdlet extends React.Component {
  render() {
    return <h1>Hello, home Nerdlet!</h1>;
  }
}
```

## Atualize e sirva seu aplicativo localmente

Com `nr1`, vocÃª pode servir uma versÃ£o local do seu Nerdpack para a New Relic. Isso ajuda vocÃª a desenvolver seu aplicativo em um ambiente de produÃ§Ã£o antes de publicÃ¡-lo.

Antes de alterar qualquer cÃ³digo, familiarize-se com a estrutura de diretÃ³rios do Nerdpack:

```txt lineHighlight=3-10,12
my-awesome-nerdpack/
â”œâ”€â”€â”€README.md
â”œâ”€â”€â”€launchers/
â”‚   â””â”€â”€â”€launcher/
â”‚       â””â”€â”€â”€nr1.json
â”œâ”€â”€â”€nerdlets/
â”‚   â””â”€â”€â”€home
â”‚       â”œâ”€â”€â”€index.js
â”‚       â”œâ”€â”€â”€nr1.json
â”‚       â””â”€â”€â”€styles.scss
â”œâ”€â”€â”€node_modules/
â”œâ”€â”€â”€nr1.json
â”œâ”€â”€â”€package-lock.json
â””â”€â”€â”€package.json
```

Os diretÃ³rios *launchers* e *nerdlets* contÃªm a lÃ³gica do seu aplicativo. Ã‰ nesses diretÃ³rios que vocÃª atualiza a maior parte do seu cÃ³digo. Os arquivos *nr1.json* em todo o Nerdpack contÃªm metadados sobre seu Nerdpack, Nerdlets e inicializadores.

<Callout variant="tip">
  Leia [nossa documentaÃ§Ã£o](/docs/new-relic-solutions/build-nr-ui/nerdpack-file-structure/) para saber mais sobre a estrutura de arquivos Nerdpack.
</Callout>

<Steps>
  <Step>
    Em *my-awesome-nerdpack/nerdlets/home/index.js*, altere a classe *HomeNerdlet* para uma funÃ§Ã£o:

    ```jsx fileName=index.js
    import React from 'react';

    function HomeNerdlet () {
        return <h1>Hello, home Nerdlet!</h1>;
    }

    export default HomeNerdlet
    ```
  </Step>

  <Step>
    Em seguida, retorne um grÃ¡fico Billboard em vez de um cabeÃ§alho:

    ```jsx fileName=index.js
    import React from 'react';
    import { BillboardChart} from 'nr1'

    function HomeNerdlet () {

      const clickCount = {
        metadata: {
            id: '1',
            name: 'Count',
            viz: 'main',
        },
        data: [
          { "y": 10 }
        ]
      }
      return <BillboardChart data={[clickCount]}/>
    }

    export default HomeNerdlet
    ```

    <br />

    Por enquanto, vocÃª estÃ¡ mostrando um valor estÃ¡tico em seu grÃ¡fico Billboard, mas em etapas posteriores, vocÃª fornecerÃ¡ um valor dinÃ¢mico usando o estado local da funÃ§Ã£o.
  </Step>

  <Step>
    Se ainda nÃ£o o fez, sirva seu aplicativo a partir do diretÃ³rio raiz do seu Nerdpack:

    ```bash
    nr1 nerdpack:serve
    [output] Found and loaded {success}2 {plain}nr1.json files on MyAwesomeNerdpack ({purple}aad7ebb6-8901-43d0-a681-0719b2c60a11{plain}) Nerdpack.
    [output]
    [output] {purple}Nerdpack:
    [output]  {success}âœ”  MyAwesomeNerdpack {plain}({purple}aad7ebb6-8901-43d0-a681-0719b2c60a11{plain}) {blue}nr1.json
    [output]
    [output] {purple}Launchers:
    [output]  {success}âœ”  launcher {blue}launchers/launcher/nr1.json
    [output]
    [output] {purple}Nerdlets:
    [output]  {success}âœ”  home {blue}nerdlets/home/nr1.json
    [output]
    [output] There is no certificate created yet.
    [output]  {success}âœ”  {plain}New certificate created.
    [output]
    [output] Webpack bundle analyzer is enabled (you need to wait for the first build to finish)
    [output]  â””  You can head to {blue}http://127.0.0.1:27888
    [output]
    [output] {blue}NOTE: {plain}To verify how your assets will look in production, you need to
    [output]       add "--mode=prod" when starting the development server.
    [output]
    [output] ğŸ›   Built artifact files for:ex.js...
    [output]  â  {purple}aad7ebb6-8901-43d0-a681-0719b2c60a11--home {plain}built {success}âœ”
    [output]
    [output]  {success}âœ”  {plain}Nerdpack built successfully!
    [output]  {yellow}â˜…  {plain}Starting as orchestrator...
    [output]
    [output]  {success}âœ”  {plain}Server ready! Test it at: {blue}https://one.newrelic.com/?nerdpacks=local
    [output]  {blue}â†©  {plain}Server will reload automatically if you modify any file!
    [output]
    [output]  {blue}â„¹  {plain}Additionally, you can test the following artifacts at:
    [output]
    [output] {purple}Launchers:
    [output]  â  {success}launcher {blue}https://onenr.io/0z7wkEkMnjL
    [output]  {blue}â„¹  {plain}You can use "npm start -- --mode=prod" to run the development server in prod mode.
    ```
  </Step>

  <Step>
    Use o URL na parte inferior da saÃ­da para abrir seu inicializador:

    ```bash
    [output] {purple}Launchers:
    [output]  *  {success}launcher {blue}https://onenr.io/0z7wkEkMnjL
    [output]  {blue}â„¹  {plain}You can use "npm start -- --mode=prod" to run the development server in prod mode.
    ```
  </Step>

  <Step>
    Aqui, vocÃª vÃª seu Nerdlet com seu grÃ¡fico da Billboard mostrando o nÃºmero â€œ10â€:

    <img title="Static billboard chart in the browser" alt="Static billboard chart in the browser" src="/images/react-hooks-screenshot-static-billboard-local.webp" />
  </Step>
</Steps>

Deixe seu servidor funcionando, pois ele recarregarÃ¡ automaticamente seu Nerdlet quando vocÃª modificar seus arquivos.

## Use o gancho `useState()` no seu Nerdlet

Anteriormente, vocÃª usava um valor estÃ¡tico para o grÃ¡fico da Billboard. Agora, vocÃª usa o estado local da sua funÃ§Ã£o para armazenar um valor dinÃ¢mico e mostrar esse valor no grÃ¡fico.

<Steps>
  <Step>
    Em *my-awesome-nerdpack/nerdlets/home/index.js*, chame `useState()` em seu componente de funÃ§Ã£o:

    ```jsx fileName=index.js
    import React, {useState} from 'react';
    import { BillboardChart} from 'nr1'

    function HomeNerdlet () {
      const [count, setCount] = useState(0);

      const clickCount = {
        metadata: {
            id: '1',
            name: 'Count',
            viz: 'main',
        },
        data: [
          { "y": 10 }
        ]
      }
      return <BillboardChart data={[clickCount]}/>
    }

    export default HomeNerdlet
    ```

    <br />

    Aqui, vocÃª chama `useState()`. Esse gancho retorna dois valores, que vocÃª captura em uma matriz:

    * `count`: O valor atual no estado local. Seu valor padrÃ£o Ã© 0, o argumento que vocÃª passou para `useState()`.
    * `setCount`: Uma funÃ§Ã£o que vocÃª usa para atualizar `count`
  </Step>

  <Step>
    Altere os dados do seu grÃ¡fico Billboard para usar `count`:

    ```jsx fileName=index.js
    import React, {useState} from 'react';
    import { BillboardChart} from 'nr1'

    function HomeNerdlet () {
      const [count, setCount] = useState(0);

      const clickCount = {
        metadata: {
          id: '1',
          name: 'Count',
          viz: 'main',
        },
        data: [
          { "y": count }
        ]
      }
      return <BillboardChart data={[clickCount]}/>
    }

    export default HomeNerdlet
    ```

    <br />

    No momento, o valor de count serÃ¡ `0` em cada renderizaÃ§Ã£o porque vocÃª nunca atualiza o estado. VocÃª precisa de uma maneira de fazer isso.
  </Step>

  <Step>
    Ao lado do seu grÃ¡fico, renderize um botÃ£o para incrementar `count`:

    ```jsx fileName=index.js
    import React, {useState} from 'react';
    import { BillboardChart} from 'nr1'

    function HomeNerdlet () {
      const [count, setCount] = useState(0);

      const clickCount = {
        metadata: {
            id: '1',
            name: 'Count',
            viz: 'main',
        },
        data: [
          { "y": count }
        ]
      }
      return (
        <div>
          <BillboardChart data={[clickCount]}/>
          <button onClick={() => setCount(count + 1)}>
            Increment count
          </button>
        </div>
      );
    }

    export default HomeNerdlet
    ```

    <br />

    Aqui, vocÃª adicionou um botÃ£o ao seu Nerdlet que aumenta a contagem em 1 cada vez que vocÃª clica nele.
  </Step>

  <Step>
    VÃ¡ para o Browser que estÃ¡ executando o Nerdlet para ver suas alteraÃ§Ãµes:

    <img title="Increment count with button click" alt="Increment count with button click" src="/images/react-hooks-screenshot-button-increment.webp" />

    Clique no botÃ£o algumas vezes para aumentar a contagem.
  </Step>
</Steps>

## Use o gancho `useEffect()` no seu Nerdlet

Seu Nerdlet agora tem um grÃ¡fico Billboard e um botÃ£o. O grÃ¡fico mostra o nÃºmero de vezes que vocÃª clicou no botÃ£o. Use `useEffect()` para incrementar automaticamente `count`.

<Steps>
  <Step>
    Em *my-awesome-nerdpack/nerdlets/home/index.js*, crie um efeito:

    ```jsx fileName=index.js
    import React, {useState, useEffect} from 'react';
    import { BillboardChart} from 'nr1'

    function HomeNerdlet () {
      const [count, setCount] = useState(0);

      useEffect(() => {
        setTimeout(() => {
          setCount(() => count + 1);
        }, 1000);
      });

      const clickCount = {
        metadata: {
            id: '1',
            name: 'Count',
            viz: 'main',
        },
        data: [
          { "y": count }
        ]
      }
      return (
        <div>
          <BillboardChart data={[clickCount]}/>
        </div>
      );
    }

    export default HomeNerdlet
    ```

    <br />

    `useEffect()` incrementa automaticamente o valor `count` a cada 1 segundo. Como vocÃª automatizou a contagem, tambÃ©m removeu o botÃ£o de incremento.
  </Step>

  <Step>
    VÃ¡ para o seu Browser para ver as atualizaÃ§Ãµes:

    <img title="Auto increment with Effect Hook" alt="Auto increment with Effect Hook" src="/images/react-hooks-screenshot-auto-increment.webp" />
  </Step>
</Steps>

## Resumo

Neste guia, vocÃª aprendeu como:

* Crie um Nerdpack New Relic local
* Use ganchos em seu Nerdpack