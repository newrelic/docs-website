---
title: Armazenamento log de longo prazo com Live Archives
tags:
  - Logs
  - Log management
  - Get started
metaDescription: Store your logs with New Relic for up to seven years using live archives.
signupBanner:
  text: Monitor and improve your entire stack. 100GB free. Forever.
freshnessValidatedDate: never
translationType: machine
---

import logsEditDataRetentionLiveArchives from 'images/logs_screenshot-crop_edit-data-retention-live-archives.webp'

import logsCreateaPartitionUsingLiveArchives from 'images/logs_screenshot-crop_create-a-partition-using-live-archives.webp'

import logsQueryLiveArchivesNrql from 'images/logs_screenshot-crop_query-live-archives-nrql.webp'

import logsLuceneLiveArchives from 'images/logs_screenshot-crop_lucene-live-archives.webp'

import logsEditDataPartitionUsingLiveArchives from 'images/logs_screenshot-crop_edit-data-partition-using-live-archives.webp'

Live Archives permite armazenar log pelo tempo que você precisar. O New Relic tem uma retenção de log de trinta dias por padrão, mas com Live Archives, você pode estender esse período por até sete anos. Assim como os documentos fiscais antigos, às vezes você não precisa dos seus dados à mão, mas é seguro manter as informações disponíveis para referência, se necessário.

O Live Archives é para você? Aqui estão alguns exemplos de casos de uso:

* <DoNotTranslate>**Internal retention requirements**</DoNotTranslate>

  : Possui um período de retenção interno onde gostaria de manter registros e poder consultá-los somente quando necessário? Live Archives pode ajudar com armazenamento estendido e capacidade de consulta.

* <DoNotTranslate>**Trends and long-term debugging**</DoNotTranslate>

  : o armazenamento log de longo prazo pode ajudar a melhorar o desempenho ano após ano. Por exemplo, se você gerencia uma empresa de varejo, comparar o registro de um período de festas de fim de ano com o seguinte pode melhorar o desempenho.

## Como funcionam Live Archives [#how-it-works]

O recurso Live Archives oferece armazenamento de dados de log de longo prazo que você pretende consultar com moderação por um custo de armazenamento mais baixo. Com Live Archives, você pode ficar tranquilo sabendo que seu log estará disponível por um período mais longo para possíveis auditorias ou depuração de longo prazo, mas você só será cobrado pela consulta quando _consultar dados antigos_.

## Iniciar

<Steps>
  <Step>
    ### Habilitar Live Archives [#enable]

    Primeiro, você precisa solicitar os recursos Live Archives .

    1. Na página da interface

       <DoNotTranslate>**Data retention**</DoNotTranslate>

       , localizada no [hub de gerenciamento de dados](https://one.newrelic.com/data-management-hub).

    2. Role para baixo até

       <DoNotTranslate>**Logging live archives**</DoNotTranslate>

       .

    3. Clique em

       <DoNotTranslate>**Request**</DoNotTranslate>

       . Um membro da nossa equipe entrará em contato com você.

    Depois de ativar Live Archives, você precisa editar sua retenção de dados.

    1. Na página da interface

       <DoNotTranslate>**Data retention**</DoNotTranslate>

       , localizada no [hub de gerenciamento de dados,](https://one.newrelic.com/data-management-hub) selecione

       <DoNotTranslate>**Edit data retention**</DoNotTranslate>

       .

    2. Role para baixo até

       <DoNotTranslate>**Logging live archives**</DoNotTranslate>

       e insira o número total de dias durante os quais você deseja que seus dados sejam armazenados. Lembre-se de que isso inclui os dias de retenção padrão.

    3. Clique em

       <DoNotTranslate>**Apply changes**</DoNotTranslate>

       .

    Lembre-se de que você precisará [de recursos de administrador](/docs/accounts/accounts-billing/new-relic-one-user-management/user-management-concepts/#roles) para editar a retenção de dados.

    <img
      title="edit data retention"
      alt="A screenshot showing users how to edit their data retention."
      src={logsEditDataRetentionLiveArchives}
    />

    <figcaption>
      Vá para <DoNotTranslate>**one.newrelic.com > [Data management hub](https://one.newrelic.com/data-management-hub) > Data retention > Select logging live archives > Edit data retention**</DoNotTranslate>: selecione a duração do arquivo para armazenar seu registro pelo tempo que for necessário.
    </figcaption>
  </Step>

  <Step>
    ### Crie uma partição usando Live Archives [#partitions]

    Uma partição é uma forma de agrupar logs com base em critérios específicos. A criação de partições pode ajudá-lo a filtrar os registros desnecessários e manter os que você usa com Live Archives.

    1. Vá para

       <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Logs**</DoNotTranslate>

       .

    2. À esquerda da barra de consulta de registro, clique em

       <DoNotTranslate>**Data partitions**</DoNotTranslate>

       e em

       <DoNotTranslate>**Create data partition**</DoNotTranslate>

       .

    3. Defina um nome de partição como uma sequência alfanumérica que começa com log.

    4. Selecione o campo

       <DoNotTranslate>**Use live archives on this partition**</DoNotTranslate>

       .

    5. Os

       <DoNotTranslate>**Total effective retention**</DoNotTranslate>

       dias serão atualizados para refletir a retenção regular _e_ a [retenção Live Archives ](/docs/logs/get-started/live-archives-billing/#what-counts).

    <img
      title="create a live archives partition"
      alt="A screenshot showing a user how to create a partition using live archives"
      src={logsCreateaPartitionUsingLiveArchives}
    />

    <figcaption>
      Vá para <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Logs > Data partitions**</DoNotTranslate> para criar uma partição usando Live Archives.
    </figcaption>

    Você também pode editar uma partição existente clicando no botão <Icon name="fe-more-horizontal"/> ícone na página <DoNotTranslate>**Data partitions**</DoNotTranslate> .

    <img
      width="60%;"
      title="Edit a live archives partition"
      alt="A screenshot showing a user how to edit a partition using live archives"
      src={logsEditDataPartitionUsingLiveArchives}
    />
  </Step>

  <Step>
    ### consulte Live Archives com sintaxe de log [#query]

    Existem duas maneiras de consultar Live Archives: com Lucene ou NRQL. Se você quiser usar a sintaxe de registro com a qual está familiarizado fora do New Relic, sugerimos consultar na interface <DoNotTranslate>**Logs**</DoNotTranslate> . Você precisará do recurso **Live archives query** para consultar Live Archives.

    1. Vá para

       <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Logs**</DoNotTranslate>

       .

    2. Usando a barra de pesquisa, execute a consulta desejada. Praticar sua consulta primeiro é melhor para garantir que ela funcione conforme o esperado.

    3. Selecione as datas que deseja consultar.

    4. Uma tela mostrará que você está prestes a consultar Live Archives. Consultar Live Archives é mais caro, então selecione

       <DoNotTranslate>**Query live archives**</DoNotTranslate>

       apenas se estiver pronto.

    <img
      title="lucene live archives"
      alt="A screenshot showing a user how to query live archives in the logs UI"
      src={logsLuceneLiveArchives}
    />

    <figcaption>
      Vá para <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Logs**</DoNotTranslate> para consultar dados armazenados com Live Archives.
    </figcaption>
  </Step>

  <Step>
    ### Consulte Live Archives com NRQL [#nrql]

    Caso queira consultar usando a mesma linguagem que utiliza para Errors Inbox ou alertas, sugerimos consultar em NRQL. Você precisará do recurso **Live archives query** para consultar Live Archives.

    1. Vá para

       <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Logs**</DoNotTranslate>

       .

    2. Insira a consulta NRQL que você deseja executar.

    3. Pratique a consulta primeiro para ter certeza de que funciona conforme o esperado.

    4. Alterne

       <DoNotTranslate>**Use live archives**</DoNotTranslate>

       .

    5. Uma tela mostrará que você está prestes a consultar Live Archives. Consultar Live Archives é mais caro, então selecione

       <DoNotTranslate>**Query live archives**</DoNotTranslate>

       apenas se estiver pronto.

    <img
      title="nrql live archives"
      alt="A screenshot showing a user how to query live archives with NRQL"
      src={logsQueryLiveArchivesNrql}
    />

    <figcaption>
      Vá para <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Logs**</DoNotTranslate> e selecione <DoNotTranslate>**NRQL**</DoNotTranslate> para consultar dados armazenados com Live Archives usando o criador de consulta.
    </figcaption>
  </Step>

  <Step>
    ### Consulte Live Archives usando Nerdgraph API [#api]

    Você também pode consultar os dados do seu Live Archives usando a API Nerdgraph. Você precisará do recurso **Live archives query** para consultar Live Archives. Você deve incluir `{eventNamespaces: "Logging:Archive"}` nas opções de NRQL para especificar os Live Archives `eventNamespace`.

    Aqui está um exemplo de consulta:

    ```
    query {
      actor {
        account(id: 1234567) {
          nrql(
            query: "SELECT count(*) FROM Log SINCE '2024-02-01 12:00:00' UNTIL '2024-02-01 13:00:00'"
            options: {eventNamespaces: "Logging:Archive"}
            async: true
          ) {
            results
          }
        }
      }
    }
    ```
  </Step>

  <Step>
    ### Veja seu consumo de dados [#data-consumption]

    Live Archives é cobrado de forma diferente do resto do seu log. Você pode ler mais sobre isso em nosso [armazenamentoLive Archives : Documentação de cobrança e regras](/docs/logs/get-started/live-archives-billing/). Live Archives tem três pilares de faturamento.

    * <DoNotTranslate>**Data**</DoNotTranslate>

      : você será cobrado quando ingerir originalmente o log normal.

    * <DoNotTranslate>**Storage**</DoNotTranslate>

      : Live Archives cobra uma taxa para armazenar seus dados com Live Archives.

    * <DoNotTranslate>**Compute**</DoNotTranslate>

      : a consulta de dados do Live Archives será cobrada em unidade de capacidade de computação. Consulte nossa [documentação do plano de uso](https://docs.newrelic.com/docs/licenses/license-information/usage-plans/new-relic-usage-plan/#list-price) para obter mais informações sobre a unidade de capacidade de computação.

    Para ver seu armazenamento de dados na página <DoNotTranslate>**Plan & Usage**</DoNotTranslate> :

    1. Vá para

       <DoNotTranslate>**[one.newrelic.com](https://one.newrelic.com/)**</DoNotTranslate>

       , clique no menu do usuário e clique em

       <DoNotTranslate>**Administration**</DoNotTranslate>

       para abrir a página

       <DoNotTranslate>**Plan & usage**</DoNotTranslate>

       .

    2. Role para baixo até

       <DoNotTranslate>**Retention (GB-month)**</DoNotTranslate>

       .

    3. Clique em

       <DoNotTranslate>**View more details**</DoNotTranslate>

       para obter mais informações sobre a divisão do armazenamento.

    Depois de consultar Live Archives, você pode explorar o consumo do seu computador no hub de gerenciamento do computador.

    1. Vá para

       <DoNotTranslate>**[one.newrelic.com](https://one.newrelic.com/)**</DoNotTranslate>

       , clique no menu do usuário e depois clique em

       <DoNotTranslate>**Administration**</DoNotTranslate>

       .

    2. Selecione

       <DoNotTranslate>**Compute management**</DoNotTranslate>

       .

    3. Role para baixo até

       <DoNotTranslate>**Product capabilities**</DoNotTranslate>

       .

    4. Selecione

       <DoNotTranslate>**Logs**</DoNotTranslate>

       .

    5. Facetado por

       <DoNotTranslate>**Data category**</DoNotTranslate>

       para visualizar o consumo do computador para Live Archives.
  </Step>
</Steps>

## Exemplo [#examples]

Digamos que você precise verificar se um usuário efetua login em uma máquina a partir de seu computador para preencher um ticket no dia 1º de setembro. Você pode usar Live Archives para ajudar a confirmar que isso ocorreu concluindo as seguintes etapas:

1. Verifique o período de tempo em que o usuário faz login em sua máquina.

2. Teste sua consulta em

   <DoNotTranslate>**Logs**</DoNotTranslate>

   para garantir que ela esteja funcionando conforme o esperado.

Exemplo de consulta:

```
"logtype":"linux_audit" "type":"USER_LOGIN" "hostname":"apache_svr01"
```

3. Altere o seletor de horário para pesquisar as datas em que o usuário fez login em sua máquina.

4. Selecione

   <DoNotTranslate>**Query live archives**</DoNotTranslate>

   .

## Exclusão de dados [#delete]

Se em algum momento você quiser reduzir sua retenção de dados, observe:

* Você precisará de privilégios de administrador para editar a retenção de dados.
* _Você não poderá recuperar dados se reduzir a retenção de dados posteriormente. Escolha e configure seus períodos de retenção com cuidado._
* A exclusão de seus dados entra em vigor no dia em que você reduz sua retenção.
* Você pode solicitar a exclusão de seus dados para qualquer conjunto de dias. Excluiremos todos os dados Live Archives para as datas selecionadas.
* Os dias começam e terminam nos limites do UTC, portanto, ao fazer uma solicitação, certifique-se de que esteja alinhado com o UTC. Isso pode significar adicionar ou subtrair um dia.

<Callout variant="important">
  Para evitar dúvidas, a New Relic não tem obrigação de reter dados em Live Archives após o downgrade da conta ou caducidade do contrato, ou de outra forma, se você não atender aos requisitos comerciais aplicáveis.
</Callout>

<DocTiles>
  <DocTile
    title="Understand how live archives billing works"
    number="1"
    path="/docs/logs/get-started/live-archives-billing"
  />

  <DocTile
    title="Learn more about creating data partitions"
    number="2"
    path="/docs/logs/ui-data/data-partitions/"
  />

  <DocTile
    title="Query your logs"
    number="3"
    path="/docs/logs/ui-data/query-syntax-logs/"
  />
</DocTiles>