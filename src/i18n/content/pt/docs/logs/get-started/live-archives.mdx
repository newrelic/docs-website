---
title: Armazenamento log de longo prazo com Live Archives
tags:
  - Logs
  - Log management
  - Get started
metaDescription: Store your logs with New Relic for up to seven years using live archives.
signupBanner:
  text: Monitor and improve your entire stack. 100GB free. Forever.
freshnessValidatedDate: never
translationType: machine
---

Live Archives permite armazenar log pelo tempo que você precisar. O New Relic tem uma retenção de log de trinta dias por padrão, mas com Live Archives, você pode estender esse período por até sete anos. Assim como os documentos fiscais antigos, às vezes você não precisa dos seus dados à mão, mas é seguro manter as informações disponíveis para referência, se necessário.

Live Archives é para você? Aqui estão alguns casos de uso em que você pode se beneficiar desse recurso:

* <DNT>**Internal retention requirements**</DNT>: Sua empresa possui uma política que exige que você mantenha logs por um determinado período? Os longos períodos de armazenamento do Live Archives podem ajudá-lo a atender às suas necessidades.
* <DNT>**Trends and long-term debugging**</DNT>: O armazenamento log de longo prazo pode ajudar a melhorar o desempenho ano após ano. Por exemplo, se você gerencia uma empresa de varejo, pode comparar os logs de um período de festas de fim de ano para o próximo para ver como pode melhorar o desempenho.

## Como funcionam Live Archives [#how-it-works]

O recurso Live Archives oferece armazenamento de dados log de longo prazo que você pretende consultar com moderação por um menor custo de armazenamento. Com Live Archives, você pode ficar tranquilo sabendo que seus logs estarão disponíveis por um período mais longo para possíveis auditorias ou depuração de longo prazo, mas você será cobrado separadamente pelo armazenamento e consulta de seus dados antigos.

## Iniciar

<Steps>
  <Step>
    ### Habilitar Live Archives [#enable]

    Primeiro, você precisa solicitar os recursos Live Archives .

    1. Na página da interface <DNT>**Data retention**</DNT> , localizada no [hub de gerenciamento de dados](https://one.newrelic.com/data-management-hub).
    2. Role para baixo até <DNT>**Logging live archives**</DNT>.
    3. Clique em <DNT>**Request**</DNT>. Um membro da nossa equipe entrará em contato com você.
  </Step>

  <Step>
    Depois de ativar Live Archives, você precisa editar sua retenção de dados.

    1. Na página da interface <DNT>**Data retention**</DNT> , localizada no [hub de gerenciamento de dados,](https://one.newrelic.com/data-management-hub) selecione <DNT>**Edit data retention**</DNT>.
    2. Role para baixo até <DNT>**Logging live archives**</DNT> e insira o número total de dias durante os quais você deseja que seus dados sejam armazenados. Lembre-se de que isso inclui os dias de retenção padrão.
    3. Clique em <DNT>**Apply changes**</DNT>.

    Lembre-se de que você precisará [de recursos de administrador](/docs/accounts/accounts-billing/new-relic-one-user-management/user-management-concepts/#roles) para editar a retenção de dados.

    <img title="edit data retention" alt="A screenshot showing users how to edit their data retention." src="/images/logs_screenshot-crop_edit-data-retention-live-archives.webp" />
  </Step>

  <Step>
    ### Crie uma partição usando Live Archives [#partitions]

    Uma partição é uma forma de agrupar logs com base em critérios específicos. A criação de partições pode ajudá-lo a filtrar os registros desnecessários e manter os que você usa com Live Archives.

    1. Vá para <DNT>**[one.newrelic.com &gt; All capabilities](https://one.newrelic.com/all-capabilities) &gt; Logs**</DNT>.

    2. À esquerda da barra de consulta de registro, clique em <DNT>**Data partitions**</DNT> e em <DNT>**Create data partition**</DNT>.

    3. Defina um nome de partição como uma sequência alfanumérica que começa com log.

    4. Selecione o campo <DNT>**Use live archives on this partition**</DNT>.

       <img title="create a live archives partition" alt="A screenshot showing a user how to create a partition using live archives" src="/images/logs_screenshot-crop_create-a-partition-using-live-archives.webp" />

       <figcaption>
         Vá para <DNT>**[one.newrelic.com &gt; All capabilities](https://one.newrelic.com/all-capabilities) &gt; Logs &gt; Data partitions**</DNT> para criar uma partição usando Live Archives.
       </figcaption>

    5. Os <DNT>**Total effective retention**</DNT> dias serão atualizados para refletir a retenção regular *e* a [retenção Live Archives ](/docs/logs/get-started/live-archives-billing/#what-counts).

    Você também pode editar uma partição existente clicando em <Icon name="fe-more-horizontal" /> ícone na página <DNT>**Data partitions**</DNT> . Se você usar uma partição existente, o mesmo parâmetro selecionado para a partição original será aplicado aos seus dados do Live Archives.

    <img width="60%;" title="Edit a live archives partition" alt="A screenshot showing a user how to edit a partition using live archives" src="/images/logs_screenshot-crop_edit-data-partition-using-live-archives.webp" />

    Para obter mais informações sobre como usar partições, consulte nosso documento [Organizar dados com partições](/docs/logs/ui-data/data-partitions/).
  </Step>

  <Step>
    ## Consulte seu log

    <Callout variant="important">
      O usuário pode consultar logs no Live Archives se tiver [permissão](/docs/accounts/accounts-billing/new-relic-one-user-management/user-permissions/) de consulta do Live Archives. Consulte os [conceitos de gerenciamento de usuários](/docs/accounts/accounts-billing/new-relic-one-user-management/user-management-concepts/) para obter mais informações sobre o uso de grupos, funções e permissões para controlar o acesso a determinados recursos.
    </Callout>

    Existem algumas maneiras de consultar Live Archives: Lucene, NRQL ou NRQL na API NerdGraph. Para todos os três métodos, você precisará do recurso **Live archives query** para consultar Live Archives.

    ### Consulta Live Archives com sintaxe de consulta Lucene [#query]

    Se você estiver familiarizado com a sintaxe de consulta do Lucene, poderá executá-la em nossa interface <DNT>**Logs**</DNT>.

    1. Vá para <DNT>**[one.newrelic.com &gt; All capabilities](https://one.newrelic.com/all-capabilities) &gt; Logs**</DNT>.
    2. Usando a barra de pesquisa, execute a consulta desejada. Praticar sua consulta primeiro é melhor para garantir que ela funcione conforme o esperado.
    3. Selecione as datas que deseja consultar.
    4. Uma tela mostrará que você está prestes a consultar Live Archives. Consultar Live Archives é mais caro, então selecione <DNT>**Query live archives**</DNT> apenas se estiver pronto.

    <img title="lucene live archives" alt="A screenshot showing a user how to query live archives in the logs UI" src="/images/logs_live_archives_query_confirmation.webp" />

    <figcaption>
      Vá para <DNT>**[one.newrelic.com &gt; All capabilities](https://one.newrelic.com/all-capabilities) &gt; Logs**</DNT> para consultar dados armazenados com Live Archives.
    </figcaption>

    ### Consulte Live Archives com NRQL [#nrql]

    Caso queira consultar usando a mesma linguagem que utiliza para Errors Inbox ou alertas, sugerimos consultar em NRQL.

    1. Vá para <DNT>**[one.newrelic.com &gt; All capabilities](https://one.newrelic.com/all-capabilities) &gt; Logs**</DNT>.
    2. Clique em **NRQL** no canto superior direito.
    3. Insira a consulta NRQL que você deseja executar.
    4. Pratique a consulta primeiro para ter certeza de que funciona conforme o esperado.
    5. Alterne <DNT>**Use live archives**</DNT>.
    6. Uma tela mostrará que você está prestes a consultar Live Archives. Consultar Live Archives é mais caro, então selecione <DNT>**Query live archives**</DNT> apenas se estiver pronto.

    <img title="nrql live archives" alt="A screenshot showing a user how to query live archives with NRQL" src="/images/logs_screenshot-crop_query-live-archives-nrql.webp" />

    <figcaption>
      Vá para <DNT>**[one.newrelic.com &gt; All capabilities](https://one.newrelic.com/all-capabilities) &gt; Logs**</DNT> e selecione <DNT>**NRQL**</DNT> para consultar dados armazenados com Live Archives usando o criador de consulta.
    </figcaption>

    ### Consulte Live Archives usando NerdGraph API [#api]

    Você também pode consultar seus dados Live Archives usando NRQL na API NerdGraph. Você deve incluir `{eventNamespaces: "Logging:Archive"}` nas opções NRQL para especificar os Live Archives `eventNamespace`.

    Aqui está um exemplo de consulta:

    ```graphql
    query {
      actor {
        account(id: 1234567) {
          nrql(
            query: "SELECT count(*) FROM Log SINCE '2024-02-01 12:00:00' UNTIL '2024-02-01 13:00:00'"
            options: { eventNamespaces: "Logging:Archive" }
            async: true
          ) {
            results
          }
        }
      }
    }
    ```
  </Step>

  <Step>
    ### Veja seu consumo de dados [#data-consumption]

    Live Archives é cobrado de forma diferente do resto do seu log. Você pode ler mais sobre isso em nosso [armazenamentoLive Archives : Documentação de cobrança e regras](/docs/logs/get-started/live-archives-billing/). Live Archives tem três pilares de faturamento.

    * <DNT>**Data**</DNT>: você será cobrado quando ingerir originalmente o log normal.
    * <DNT>**Storage**</DNT>: Live Archives cobra uma taxa para armazenar seus dados com Live Archives.
    * <DNT>**Compute**</DNT>: a consulta de dados do Live Archives será cobrada em unidade de capacidade de computação. Consulte nossa [documentação do plano de uso](/docs/licenses/license-information/usage-plans/new-relic-usage-plan/#list-price) para obter mais informações sobre a unidade de capacidade de computação.

    Para ver seu armazenamento de dados na página <DNT>**Plan &amp; Usage**</DNT> :

    1. Vá para <DNT>**[one.newrelic.com](https://one.newrelic.com/)**</DNT>, clique no menu do usuário e clique em <DNT>**Administration**</DNT> para abrir a página <DNT>**Plan &amp; usage**</DNT> .
    2. Role para baixo até <DNT>**Retention (GB-month)**</DNT>.
    3. Clique em <DNT>**View more details**</DNT> para obter mais informações sobre a divisão do armazenamento.

    Depois de consultar Live Archives, você pode explorar o consumo do seu computador no hub de gerenciamento do computador.

    1. Vá para <DNT>**[one.newrelic.com](https://one.newrelic.com/)**</DNT>, clique no menu do usuário e depois clique em <DNT>**Administration**</DNT>.
    2. Selecione <DNT>**Compute management**</DNT>.
    3. Role para baixo até <DNT>**Product capabilities**</DNT>.
    4. Selecione <DNT>**Logs**</DNT>.
    5. Facetado por <DNT>**Data category**</DNT> para visualizar o consumo do computador para Live Archives.
  </Step>
</Steps>

## Exemplo [#examples]

Digamos que você precise verificar se um usuário efetua login em uma máquina a partir de seu computador para preencher um ticket no dia 1º de setembro. Você pode usar Live Archives para ajudar a confirmar que isso ocorreu concluindo as seguintes etapas:

1. Verifique o período de tempo em que o usuário faz login em sua máquina.

2. Teste sua consulta em <DNT>**Logs**</DNT> para garantir que ela esteja funcionando conforme o esperado. Este é um teste e não retornará nenhum dado, mas você está apenas validando a consulta. Se funcionar, você poderá executar a consulta mais cara em seu log arquivado.

   Exemplo de consulta:

   ```
   "logtype":"linux_audit" "type":"USER_LOGIN" "hostname":"apache_svr01"
   ```

3. Altere o seletor de horário para pesquisar as datas em que o usuário fez login em sua máquina.

4. Selecione <DNT>**Query live archives**</DNT>.

## Exclusão de dados [#delete]

Se em algum momento você quiser reduzir sua retenção de dados, observe:

* Você precisará de privilégios de administrador para editar a retenção de dados.
* *Você não poderá recuperar dados se reduzir a retenção de dados posteriormente. Escolha e configure seus períodos de retenção com cuidado.*
* A exclusão de seus dados entra em vigor no dia em que você reduz sua retenção.
* Você pode solicitar a exclusão de seus dados para qualquer conjunto de dias. Excluiremos todos os dados Live Archives para as datas selecionadas.
* Os dias começam e terminam nos limites do UTC, portanto, ao fazer uma solicitação, certifique-se de que esteja alinhado com o UTC. Isso pode significar adicionar ou subtrair um dia.

<Callout variant="important">
  Para evitar dúvidas, a New Relic não tem obrigação de reter dados em Live Archives após o downgrade da conta ou caducidade do contrato, ou de outra forma, se você não atender aos requisitos comerciais aplicáveis.
</Callout>

<DocTiles>
  <DocTile title="Understand how live archives billing works" number="1" path="/docs/logs/get-started/live-archives-billing" />

  <DocTile title="Learn more about creating data partitions" number="2" path="/docs/logs/ui-data/data-partitions/" />

  <DocTile title="Query your logs" number="3" path="/docs/logs/ui-data/query-syntax-logs/" />
</DocTiles>