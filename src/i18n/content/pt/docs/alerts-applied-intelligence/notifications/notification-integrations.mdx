---
title: Alerta e inteligência aplicada notificação integrações
tags:
  - Alerts and applied intelligence
  - Applied intelligence
  - Incident intelligence
  - Destinations
metaDescription: Alerts and applied intelligence notification integrations are specific services and platforms you can use to send notifications from New Relic.
freshnessValidatedDate: never
translationType: machine
---

import accountsJiraDestination from 'images/accounts_screenshot-crop_jira-destination.webp'

import accountsJiraTemplate from 'images/accounts_screenshot-crop_jira-template.webp'

import accountsBridgeEventPattern from 'images/accounts_screenshot-crop_bridge-event-pattern.webp'

import accountsServiceNowDestination from 'images/accounts_screenshot-crop_service-now-destination.webp'

import accountsServiceNowCreateDestination from 'images/accounts_screenshot-crop_servicenow-create-destination.webp'

import accountsServiceNowMessageTemplate from 'images/accounts_screenshot-crop_service-now-message-template.webp'

import accountsWebhookServiceNowFields from 'images/accounts_screenshot-crop_webhook-serviceNowFields.webp'

import accountsSlackDestinationAuthentication from 'images/accounts_screenshot-crop_slack-destination-authentication.webp'

import accountsSlackSignIn from 'images/accounts_screenshot-crop_slack-sign-in.webp'

import accountsSlackDestinationAllowAccess from 'images/accounts_screenshot-crop_slack-destination-allow-access.webp'

import accountsSlackAuthenticationCompleted from 'images/accounts_screenshot-crop_slack-authentication-completed.webp'

import accountsSlackMessageTemplate from 'images/accounts_screenshot-crop_slack-message-template.webp'

import accountsSlackChannelTestNotification from 'images/accounts_screenshot-crop_slack-channel-test-notification.webp'

import accountsWebhookDestination from 'images/accounts_screenshot-crop_webhook-destination.webp'

import accountsWebhookPreviewError from 'images/accounts_screenshot-crop_webhook-preview-error.webp'

import accountsWebhookNotificationTemplate from 'images/accounts_screenshot-crop_webhook-notification-template.webp'

import accountsWebhookSecureUrl from 'images/accounts_screenshot-crop_webhook-secure-url.webp'

import accountsWebhookCustomHeadersAuth from 'images/accounts_screenshot-crop_webhook-custom-headers-auth.webp'

import accountsEmailConfWorkflow from 'images/accounts_screenshot-crop_email-configure-workflow.webp'

import accountsEmailSettings from 'images/accounts_screenshot-crop_email-settings.webp'

import accountsAWSEventBridgeDestination from 'images/accounts_screenshot-crop_awseventbridge-destination.webp'

import accountsPagerDutyAccountDestinationNewUi from 'images/accounts_screenshot-crop_pager-duty-account-destination-new-ui.webp'

import accountsPagerDutyAddNewWorkflow from 'images/accounts_screenshot-crop_pager-duty-add-webhook.webp'

import accountsPagerDutyAddNewRelicIntegration from 'images/accounts_screenshot-crop_pager-duty-add-new-relic-integration.webp'

import accountsPagerDutyIntegrationOpened from 'images/accounts_screenshot-crop_pager-duty-integration-opened.webp'

import accountsPagerDutyServiceDestination from 'images/accounts_screenshot-crop_pager-duty-service-destination.webp'

import accountsMigrateSlackNewWorkflow from 'images/accounts_screenshot-crop_slack-new-workflow.webp'

import accountsMigrateSlackRemoveLegacy from 'images/accounts_screenshot-crop_slack-remove-legacy.webp'

O alerta e a integração de notificação de inteligência aplicada permitem conectar serviços e plataformas específicas à plataforma New Relic. Você pode usar essas conexões para enviar notificações da New Relic. Através destas notificações você obtém informações sobre questões que necessitam de revisão ou que o ajudam a tomar uma decisão sobre um problema detectado.

## Detalhes de integração [#detail]

Leia mais sobre cada uma de nossas integração de notificação específica.

<CollapserGroup>
  <Collapser
    className="freq-link"
    id="jira"
    title="Jira Atlassiana"
  >
    Integre o New Relic ao Atlassian Jira (Cloud) e crie, atualize e feche problemas do Jira automaticamente.

    <Video
      type="wistia"
      id="vp5rigddko"
    />

    ### Permissões [#jira-permissions]

    <Callout variant="important">
      Esta integração não oferece suporte à instalação do JIRA no local ou no data center.
    </Callout>

    As permissões necessárias do Jira `API-Token` são `BROWSE_PROJECTS`, `ASSIGN_ISSUES`, `CLOSE_ISSUES`, `CREATE_ISSUES`, `EDIT_ISSUES`, `RESOLVE_ISSUES`, `TRANSITION_ISSUES`, `USER_PICKER` e `ADD_COMMENTS`.

    Para ativar a alternância de sincronização bidirecional, o Jira `API-Key` fornecido deve ter uma função `Admin` .

    ### Configurar um destino Jira [#set-up-jira]

    Crie problemas do Jira e permita que o Jira e o New Relic compartilhem atualizações e permaneçam sincronizados.

    Para criar um destino Jira, siga estas etapas:

    1. Vá para <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Alerts & AI**</DoNotTranslate>, clique em <DoNotTranslate>**Destinations**</DoNotTranslate> e selecione <DoNotTranslate>**Jira**</DoNotTranslate>.

    2. Insira as seguintes informações:

       * <DoNotTranslate>**Name:**</DoNotTranslate>

         Nome personalizado para identificar o destino.

       * <DoNotTranslate>**URL:**</DoNotTranslate>

         A URL do destino.

       * <DoNotTranslate>**Username:**</DoNotTranslate>

         O endereço de e-mail do usuário.

       * <DoNotTranslate>**API token:**</DoNotTranslate>

         gerado a partir de sua conta Atlassian.

    Antes de salvar o destino, recomendamos que você clique no botão <DoNotTranslate>**Test connection**</DoNotTranslate> para verificar sua conexão.

    <img
      width="80%;"
      title="Jira destination configuration."
      alt="A screenshot of a Jira destination configuration."
      src={accountsJiraDestination}
    />

    ### Sincronização bidirecional [#jira-two-way]

    A sincronização bidirecional é aplicável ao fluxo de trabalho. Para habilitá-lo, ative o botão de integração bidirecional.

    Quando ativado, um [Jira Webhook](https://developer.atlassian.com/server/jira/platform/webhooks/) é criado na sua conta do Jira. O webhook contém detalhes de acesso ao New Relic (URL e chave de API).

    ### Sincronize com o fluxo de trabalho do New Relic [#two-way-sync-workflows]

    * O encerramento de um problema do New Relic é acionado quando o status do problema do Jira muda para `done`.
    * O reconhecimento do problema do New Relic é acionado quando o status do problema do Jira muda para `in-progress`.

    ### Configure o modelo de mensagem no Workflows [#configure-jira-message-template]

    Para configurar um modelo para um problema do Jira, siga estas etapas:

    1. Vá para

       <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Alerts & AI > Workflows**</DoNotTranslate>

       e clique em um fluxo de trabalho existente ou clique no botão

       <DoNotTranslate>**+ Add a new workflow**</DoNotTranslate>

       .

    2. Escolha um destino existente ou crie um novo.

    3. Depois de se conectar ao destino, escolha um projeto e selecione o tipo de problema do JIRA a ser usado.

    4. Depois de selecionar o tipo de problema, os campos do projeto configurado serão mapeados automaticamente para sua instância do Jira.

    Para ajudá-lo a começar, preenchemos automaticamente os campos e valores obrigatórios e recomendados. Certifique-se de incluir um valor em todos os campos obrigatórios antes de continuar.

    ### Envie uma notificação de teste [#send-jira-test]

    Clique em uma notificação de teste com valores de campo padrão para ver o problema do Jira. Se for bem-sucedido, você terá um link para visualizar o incidente no Jira.

    <img
      width="80%;"
      title="The Jira-specific custom variables menu."
      alt="A screenshot of the Jira-specific custom variables menu."
      src={accountsJiraTemplate}
    />

    <figcaption>
      Modelo de mensagem de notificação do Jira.
    </figcaption>
  </Collapser>

  <Collapser
    className="freq-link"
    id="eventBridge"
    title="AWS EventBridge"
  >
    Use o New Relic e [o AWS EventBridge](https://aws.amazon.com/eventbridge/) para personalizar e entregar notificações ao destino, como AWS Lambda, filas de serviço de notificação simples (SNS) da Amazon, log do CloudWatch e muito mais.

    <Video
      type="wistia"
      id="24mucmd1mj"
    />

    ### Configurar um destino EventBridge [#set-up-eventbridge]

    <Callout variant="important">
      A New Relic está listada na AWS como [fonte de evento de parceiro SaaS](https://aws.amazon.com/eventbridge/integrations/).
    </Callout>

    Para criar um destino AWS EventBridge, siga estas etapas:

    1. Vá para <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Alerts & AI**</DoNotTranslate>, clique em <DoNotTranslate>**Destinations**</DoNotTranslate> e selecione <DoNotTranslate>**AWS EventBridge**</DoNotTranslate>.

    2. Insira as seguintes informações:

       * <DoNotTranslate>**Name:**</DoNotTranslate> Nome personalizado para identificar o destino.
       * <DoNotTranslate>**AWS region:**</DoNotTranslate> Este é o seu endpoint regional da AWS. Selecione a região onde sua fonte de evento está hospedada.
       * <DoNotTranslate>**AWS account ID:**</DoNotTranslate> O ID da sua conta AWS. Este é um número de 12 dígitos.

       <img
         width="80%;"
         title="AWS EventBridge destination"
         alt="AWS EventBridge destination"
         src={accountsAWSEventBridgeDestination}
       />

    ### Escolha a fonte do seu evento [#eventbridge-source]

    Depois de configurar o destino do EventBridge com o ID da sua conta da AWS, ao criar uma nova fonte de evento, ela estará disponível no EventBridge.

    1. Selecione ou crie um nome de destino.

    2. Selecione ou crie uma fonte de evento.

       Quando você cria uma nova fonte de eventos, ela é criada na sua conta do AWS EventBridge como uma fonte de eventos do parceiro de integração.

    ### Associe a origem do evento à sua conta AWS e crie uma regra [#eventbridge-rule]

    Para associar a origem do evento a um barramento de eventos:

    1. No console do AWS EventBridge, escolha <DoNotTranslate>**Partner event sources**</DoNotTranslate> no painel de navegação.

    2. Selecione o botão próximo à origem do evento do parceiro e escolha <DoNotTranslate>**Associate with event bus**</DoNotTranslate>.

       O status da fonte do evento muda de <DoNotTranslate>**Pending**</DoNotTranslate> para <DoNotTranslate>**Active**</DoNotTranslate> e o nome do barramento de eventos é atualizado para corresponder ao nome da fonte do evento. Agora você pode começar a criar regras que correspondam aos eventos do New Relic.

    3. Crie uma regra para o barramento de eventos.

       Para reagir à notificação enviada do New Relic, você precisa criar regras com um padrão de evento que filtre os eventos do New-Relic.

       <img
         width="80%;"
         title="Event pattern with the newrelic partner prefix."
         alt="A screenshot of rule Event pattern."
         src={accountsBridgeEventPattern}
       />

       Use este documento da AWS sobre como [criar uma regra de origem de evento](https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-saas.html#eb-create-rule-partner-events) para obter instruções mais detalhadas.

    ### Configure o template de evento de mensagem no fluxo de trabalho [#message-eventbridge]

    Navegue até <DoNotTranslate>**Workflows**</DoNotTranslate>, clique em um fluxo de trabalho existente ou no botão <DoNotTranslate>**Add a new Workflow**</DoNotTranslate> e escolha o destino do EventBridge. Ao enviar notificações do New Relic para o EventBridge, você pode usar um modelo de mensagem para personalizar essa notificação.

    Você pode usar o modelo padrão ou personalizar o seu próprio. Escolha <DoNotTranslate>**Variables**</DoNotTranslate> no [menu de variáveis](/docs/alerts-applied-intelligence/notifications/message-templates/#variables-menu) e aplique [a sintaxe do guidão](/docs/alerts-applied-intelligence/notifications/message-templates/#handlebars-syntax) para enriquecer seu evento.

    A API EventBridge requer JSON, e a visualização do modelo exibe o JSON renderizado. Depois que o modelo de evento estiver em conformidade com um JSON válido, você poderá enviar uma notificação de teste ao AWS EventBridge. Consulte nossos [exemplos de uso de JSON](/docs/alerts-applied-intelligence/notifications/message-templates/#usage-examples) para obter mais informações.
  </Collapser>

  <Collapser
    className="freq-link"
    id="email"
    title="E-mail"
  >
    O destino do e-mail é criado automaticamente quando você escolhe <DoNotTranslate>**Email**</DoNotTranslate> como canal de notificação para um [fluxo de trabalho](/docs/alerts-applied-intelligence/applied-intelligence/incident-workflows/incident-workflows/), portanto não é necessário configurá-lo no menu <DoNotTranslate>**Destinations**</DoNotTranslate> . Cada destino de e-mail é exclusivo para o fluxo de trabalho associado a ele e isso significa que pode aparecer como duplicado no feed de destinos.

    Para enviar uma notificação por e-mail:

    1. Vá para <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Alerts & AI**</DoNotTranslate>.

    2. Selecione <DoNotTranslate>**Workflows**</DoNotTranslate> no painel de navegação esquerdo.

    3. Clique em <DoNotTranslate>**+ Add a workflow**</DoNotTranslate>.

       <img
         width="80%;"
         title="Configure your workflow"
         alt="Configure your workflow"
         src={accountsEmailConfWorkflow}
       />

    4. Dê um nome ao seu fluxo de trabalho. Este campo é obrigatório e precisa ser único.

    5. Filtre os dados que você precisa. Você pode escolher entre <DoNotTranslate>**Basic**</DoNotTranslate> e <DoNotTranslate>**Advanced**</DoNotTranslate> opções para adicionar os problemas que deseja enviar.

    6. Clique em <DoNotTranslate>**Additional settings**</DoNotTranslate> para enriquecer seus dados. Ative <DoNotTranslate>**Enrich your data**</DoNotTranslate> para criar uma consulta NRQL.

    7. Clique em <DoNotTranslate>**Save and exit**</DoNotTranslate>.

    8. Selecione <DoNotTranslate>**Email**</DoNotTranslate> como método de notificação.

       <img
         width="60%;"
         title="Email settings"
         alt="A screenshot of the email settings."
         src={accountsEmailSettings}
       />

    9. Adicione os e-mails para os quais deseja enviar a notificação. Você pode adicionar um ou mais destinatários.

       * Você pode encontrar usuários com contas New Relic pesquisando seu endereço de e-mail.

       * Para adicionar um usuário sem uma conta New Relic ou lista de distribuição de e-mail, insira o endereço de e-mail completo.

       * Cada lista de endereços de e-mail adicionada às configurações de e-mail criará seu próprio destino exclusivo, que aparecerá no feed de destino.

       * Ao criar um destino com um endereço de e-mail já associado a um destino existente, um prompt aparecerá oferecendo a opção de mesclar os dois. Selecionar

         <DoNotTranslate>**Merge**</DoNotTranslate>

         combinará os destinos, garantindo que as notificações sejam roteadas com eficiência para o destinatário pretendido.

       * Você pode acompanhar a notificação por e-mail por destino no [registro de notificações](/docs/alerts-applied-intelligence/notifications/destinations/#notifications-log).

    10. Personalize a mensagem de e-mail.

        * Para o assunto do email, você pode usar a carga padrão ou personalizá-la para conter os dados necessários.

        * O corpo do e-mail inclui dados padrão que não podem ser alterados, mas você também pode adicionar seus próprios detalhes adicionais personalizados. Essas personalizações aparecem na seção

          <DoNotTranslate>**Custom Details**</DoNotTranslate>

          .

        * Para enriquecer o e-mail, escolha variáveis no [menu de variáveis](/docs/alerts-applied-intelligence/notifications/message-templates/#variables-menu) e aplique [a sintaxe do guidão](/docs/alerts-applied-intelligence/notifications/message-templates/#handlebars-syntax).

    11. Clique em <DoNotTranslate>**Send test notification**</DoNotTranslate> para garantir que a notificação do e-mail chegue à caixa de entrada.

    12. Clique em <DoNotTranslate>**Save**</DoNotTranslate>.

    13. Clique em <DoNotTranslate>**Activate workflow**</DoNotTranslate>.

    Na página principal do fluxo de trabalho, você pode ativar, editar, excluir ou copiar o ID do fluxo de trabalho para a área de transferência do fluxo de trabalho criado.
  </Collapser>

  <Collapser
    className="freq-link"
    id="mobile_push"
    title="New Relic mobile push"
  >
    Envie notificações push para seus aplicativos móveis New Relic iOS ou Android.

    <Video
      type="wistia"
      id="s29hxnyi4v"
    />

    ### Configure um destino de push mobile [#set-mobile_push-destination]

    Para criar um destino de push mobile, você precisa do seguinte:

    * <DoNotTranslate>**Push destination name:**</DoNotTranslate> Um nome de destino exclusivo.

    * <DoNotTranslate>**User id:**</DoNotTranslate> Isso será preenchido automaticamente com base no usuário de login atual.

      <Callout variant="important">
        Atualmente, você só pode criar destinos de push móveis para o usuário de login atual com [recursos de modificação](/docs/alerts-applied-intelligence/notifications/destinations#requirements). Você também pode criar apenas um único destino de push para seu usuário. Se você tentar criar mais de um, um erro será exibido. Antes de salvar o destino, recomendamos testar a conexão usando o botão <DoNotTranslate>**Test connection**</DoNotTranslate> .
      </Callout>

    ### Configurar quando receber notificação push no fluxo de trabalho [#mobile]

    Vá para <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Alerts & AI > Workflows**</DoNotTranslate> e clique em um fluxo de trabalho existente ou no botão <DoNotTranslate>**+Add a new workflow**</DoNotTranslate> e escolha o notificador mobile. Para configurar um mobile push, clique no notificador mobile e selecione o destino desejado.
  </Collapser>

  <Collapser
    className="freq-link"
    id="opsgeniewebhook_templates"
    title="Opsgenie"
  >
    ### Modelo de webhook para Atlassian Opsgenie

    Envie notificação do fluxo de trabalho para o Opsgenie usando um modelo de webhook: [Modelo de webhook do Opsgenie para fluxo de trabalho](https://support.atlassian.com/opsgenie/docs/integrate-opsgenie-with-new-relic-alerts-new/)
  </Collapser>

  <Collapser
    className="freq-link"
    id="pagerduty"
    title="PagerDuty"
  >
    Integre o New Relic ao PagerDuty para criar, atualizar, reconhecer e resolver automaticamente incidentes do PagerDuty.

    <Video
      type="wistia"
      id="lvzd77zj17"
    />

    Oferecemos duas maneiras de integração com o PagerDuty:

    * <DoNotTranslate>**[Account level integration using REST API Keys (recommended)](#pagerduty-ali)**</DoNotTranslate>

      : esta integração totalmente automática oferece suporte à sincronização bidirecional e à capacidade de definir vários serviços PagerDuty em um único destino New Relic.

    * <DoNotTranslate>**[Service integration using Events API keys](#pagerduty-sli)**</DoNotTranslate>

      : esta integração de serviço única usa a chave de integração de nível de serviço e requer um destino New Relic separado para cada serviço PagerDuty exclusivo.

    ### Integração em nível de conta [#pagerduty-ali]

    Essa integração totalmente automática oferece suporte à sincronização bidirecional e à capacidade de definir vários serviços PagerDuty em um único destino New Relic.

    ### Permissões [#pd-permissions]

    Esta integração requer permissão para realizar as seguintes ações:

    * [Listar serviços](https://developer.pagerduty.com/api-reference/b3A6Mjc0ODE5Ng-list-services)

    * [Crie uma integração](https://developer.pagerduty.com/api-reference/b3A6Mjc0ODIwMw-create-a-new-integration)

    * [Crie uma assinatura de webhook](https://developer.pagerduty.com/api-reference/b3A6MjkyNDc4NA-create-a-webhook-subscription)

    * [Crie uma nota](https://developer.pagerduty.com/api-reference/b3A6Mjc0ODE1MA-create-a-note-on-an-incident)

    * [Listar equipes](https://developer.pagerduty.com/api-reference/b3A6Mjc0ODIyMw-list-teams)

    * [Listar usuários](https://developer.pagerduty.com/api-reference/b3A6Mjc0ODIzMw-list-users)

      Esta integração requer uma chave de API REST. PagerDuty possui dois tipos de chave de API REST:

    * [Chave de acesso geral](https://support.pagerduty.com/docs/generating-api-keys#section-generating-a-general-access-rest-api-key): inclui todas as permissões listadas acima e os administradores do PagerDuty e proprietários de contas têm acesso. [Consulte as instruções do PagerDuty](https://support.pagerduty.com/docs/api-access-keys#generate-a-general-access-rest-api-key).

    * [Token de usuário pessoal](https://support.pagerduty.com/docs/generating-api-keys#section-generating-a-personal-rest-api-key): se sua conta tiver permissões avançadas, você pode criar uma chave de API REST pessoal exclusiva. As solicitações feitas utilizando chave de API REST pessoal ficam restritas às permissões do usuário. Se você optar por fornecer uma chave de API de token de usuário, certifique-se de que ela tenha as permissões necessárias descritas acima. [Consulte as instruções do PagerDuty](https://support.pagerduty.com/docs/api-access-keys#generate-a-user-token-rest-api-key).

      <Callout variant="tip">
        Para token de usuário pessoal, recomendamos usar um usuário de integração dedicado que não pertença a um usuário real.
      </Callout>

    ### Configure um destino [#set-up-pagerduty]

    Para criar um destino PagerDuty:

    1. Vá para <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Alerts & AI**</DoNotTranslate>, clique em <DoNotTranslate>**Destinations**</DoNotTranslate> e selecione <DoNotTranslate>**PagerDuty**</DoNotTranslate>.

    2. Insira as seguintes informações:

       * <DoNotTranslate>**Name**</DoNotTranslate>

         : Nome personalizado para identificar o destino.

       * <DoNotTranslate>**API Key**</DoNotTranslate>

         : para esta integração, você será solicitado a fornecer uma chave de API REST. Existem dois tipos de chave de API REST no PagerDuty, [acesso geral](https://support.pagerduty.com/docs/generating-api-keys#section-generating-a-general-access-rest-api-key) e [token de usuário](https://support.pagerduty.com/docs/generating-api-keys#section-generating-a-personal-rest-api-key).

       Antes de salvar o destino, recomendamos testar a conexão clicando no botão <DoNotTranslate>**Test connection**</DoNotTranslate> .

       <img
         width="80%;"
         title="PagerDuty account-level destination configuration"
         alt="A screenshot of a PagerDuty account-level destination configuration"
         src={accountsPagerDutyAccountDestinationNewUi}
       />

    ### Sincronização bidirecional [#two-way-pagerduty]

    Para ativar a sincronização bidirecional, ative o botão de alternância <DoNotTranslate>**two-way integration**</DoNotTranslate> . Quando ativado, uma assinatura do PagerDuty é criada posteriormente para o serviço PagerDuty selecionado (consulte [personalizar um modelo de mensagem](#message-pagerduty)). O webhook contém detalhes de acesso ao New Relic (URL e chave de API do New Relic). Por padrão, qualquer mudança de estado no incidente do PagerDuty criado pela New Relic será sincronizada de volta com a New Relic.

    <Callout variant="important">
      Se você for um cliente do PagerDuty Event Intelligence ou Digital Operations usando o Intelligent Alert Grouping em um determinado serviço, poderão ocorrer possíveis incompatibilidades no incidente do PagerDuty enviado de volta ao New Relic.
    </Callout>

    ### Sincronize com o fluxo de trabalho do New Relic [#two-way-sync-workflows]

    * O encerramento de um problema do New Relic é acionado quando o incidente do PagerDuty é resolvido.

    * O reconhecimento de um problema do New Relic é acionado quando o incidente do PagerDuty é reconhecido.

      ### Configure o modelo de mensagem no fluxo de trabalho [#message-pagerduty]

      Para configurar o modelo de mensagem:

      1. Vá para

         <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Alerts & AI > Workflows**</DoNotTranslate>

         e clique em um fluxo de trabalho existente ou no botão

         <DoNotTranslate>**+ Add a new workflow**</DoNotTranslate>

         e escolha o notificador PagerDuty.

      2. Escolha um destino ou crie um novo.

      3. Selecione um serviço PagerDuty.

      4. Selecione um usuário. A New Relic publicará notas em nome do usuário selecionado.

      5. Envie detalhes para a seção Detalhes personalizados no PagerDuty. Você pode usar a carga padrão ou personalizá-la usando texto livre ou variáveis dinâmicas da carga do problema. Escolha variáveis no [menu de variáveis](/docs/alerts-applied-intelligence/notifications/message-templates/#variables-menu) e aplique [a sintaxe do guidão](/docs/alerts-applied-intelligence/notifications/message-templates/#handlebars-syntax) para enriquecer sua carga útil. A seção

         <DoNotTranslate>**preview**</DoNotTranslate>

         à direita mostra uma carga esperada após o modelo ser renderizado. Caso a carga não forme um JSON válido, será apresentado um erro e não será possível salvar o template.

    Os detalhes personalizados no alerta do PagerDuty são preenchidos automaticamente.

    ### Envie uma notificação de teste [#test-notification-pagerduty]

    Você pode ver como o incidente do PagerDuty aparecerá clicando em uma notificação de teste com valores de campo padrão. Se for bem-sucedido, um incidente será criado e um link aparecerá.

    <img
      width="80%;"
      title="PagerDuty service-level workflow configuration."
      alt="A screenshot of a PagerDuty service-level workflow configuration."
      src={accountsPagerDutyAddNewWorkflow}
    />

    ### Integração de serviços [#pagerduty-sli]

    Esta integração requer a configuração de uma integração do New Relic PagerDuty no serviço no qual você deseja que o New Relic crie o incidente. Para criar uma integração New Relic no serviço PagerDuty:

    1. Vá para <DoNotTranslate>**Services > Service Directory**</DoNotTranslate> e selecione o serviço ao qual deseja adicionar a integração.

    2. Selecione a guia <DoNotTranslate>**Integrations**</DoNotTranslate> e clique em <DoNotTranslate>**Add an integration**</DoNotTranslate>.

    3. Encontre e marque a integração do New Relic na lista e clique em <DoNotTranslate>**Add**</DoNotTranslate>.

       <img
         title="PagerDuty New Relic integration."
         width="70%;"
         alt="New Relic integration."
         src={accountsPagerDutyAddNewRelicIntegration}
       />

    4. Clique à direita para visualizar e copiar seu <DoNotTranslate>**Integration Key**</DoNotTranslate>.

       <img
         title="PagerDuty New Relic integration key."
         alt="New Relic integration key."
         src={accountsPagerDutyIntegrationOpened}
       />

    ### Configurar o modelo de mensagem [#message-pagerduty]

    Para configurar o modelo de mensagem:

    1. Vá para

       <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Alerts & AI > Workflows**</DoNotTranslate>

       e clique em um fluxo de trabalho existente ou clique no botão

       <DoNotTranslate>**+ Add a new workflow**</DoNotTranslate>

       e escolha o notificador PagerDuty.

    2. Escolha um destino ou crie um novo.

    3. (Opcional) Edite o resumo do incidente padrão.

    Observe que os detalhes personalizados no alerta do PagerDuty são preenchidos automaticamente.

    ### Envie uma notificação de teste [#test-notification-pagerduty]

    Você pode ver como o incidente do PagerDuty aparecerá clicando em uma notificação de teste com valores de campo padrão.
  </Collapser>

  <Collapser
    className="freq-link"
    id="servicenow"
    title="ServiceNow (Incident-Management)"
  >
    <Callout>
      Não recomendamos que você instale esta integração. Em vez disso, recomendamos que você use a nova integração certificada com o fluxo de trabalho do New Relic. Veja como instalá-lo e utilizá-lo, na [próxima seção](#servicenow-certified).
    </Callout>

    Integre o New Relic ao ServiceNow ITSM e crie, atualize e resolva automaticamente incidentes do ServiceNow.

    <Video
      type="wistia"
      id="6or6n8am4k"
    />

    ### Funções [#roles-servicenow]

    Como parte da integração, buscamos campos da tabela de incidentes do ServiceNow e outros valores opcionais. Exigimos as seguintes permissões:

    * Permissões de leitura completas para as tabelas `sys_dictionary`, `sys_choice`, `sys_user` e `task`.

    * Permissão de leitura/gravação para `incident`.

    * Para buscar usuário para a coluna `caller` , precisamos de permissões de leitura para a tabela `sys_user` .

      As funções não granulares prontas para uso `personalize_choices`, `personalize_dictionary`, `rest_service` ou `snc_platform_rest_api_access` e `itil` têm as permissões acima. Permissões de leitura/gravação na tabela `api_key_credentials` são necessárias para permitir a integração bidirecional. As funções `credentials_admin` e `discovery_admin` fornecem isso.

    ### Configure um destino [#set-up-service-destination]

    Para criar um destino ServiceNow:

    1. Vá para <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Alerts & AI**</DoNotTranslate>, clique em <DoNotTranslate>**Destinations**</DoNotTranslate> e selecione <DoNotTranslate>**ServiceNow**</DoNotTranslate>.

    2. Insira as seguintes informações:

       * <DoNotTranslate>**Destination Name:**</DoNotTranslate>

         Nome personalizado para identificar o destino.

       * <DoNotTranslate>**Domain:**</DoNotTranslate>

         A URL do destino.

       * <DoNotTranslate>**Username:**</DoNotTranslate>

         O nome do usuário.

       * <DoNotTranslate>**Password:**</DoNotTranslate>

         A senha do usuário.

       Antes de salvar o destino, recomendamos testar a conexão clicando no botão <DoNotTranslate>**Test connection**</DoNotTranslate> .

       ### Sincronização bidirecional [#two-way-snow]

       Para configurar o <DoNotTranslate>**two-way integration**</DoNotTranslate>:

       1. Ative o botão `two-way integration` .
       2. Abra e baixe este [arquivo XML](https://storage.googleapis.com/newrelic-notifications/snow-two-way-sync/Newrelic-Snow-Sync-Configurations.xml), que inclui a regra de negócios que aciona o evento de volta para o New Relic.
       3. No menu da barra lateral do ServiceNow, acesse <DoNotTranslate>**System Definition > Business Rules**</DoNotTranslate>.
       4. Clique no ícone do menu em um dos cabeçalhos das colunas, selecione <DoNotTranslate>**Import XML**</DoNotTranslate> e faça upload do arquivo XML que você baixou.

       Depois de salvar o destino, uma chave de API New Relic será mantida em `api_key_credentials`. A chave é enviada em um cabeçalho como parte da chamada REST retorno de chamada para New Relic.

       ### Sincronizar com fluxo de trabalho [#two-way-sync-snow-workflows]

       * Quando o estado do incidente do ServiceNow muda para resolvido, aciona o encerramento do problema do New Relic.
       * Quando o estado do incidente do ServiceNow muda de aberto, aciona o reconhecimento do problema do New Relic.

    ### Configure o modelo de mensagem no fluxo de trabalho [#configure-servicenow-message-template]

    1. Vá para <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Alerts & AI > Workflows**</DoNotTranslate> e clique em um fluxo de trabalho existente ou no botão <DoNotTranslate>**+ Add a new workflow**</DoNotTranslate>

    2. Escolha um destino do ServiceNow.

    3. Após uma conexão bem-sucedida, as colunas da tabela de incidentes do ServiceNow são buscadas em sua conta e mapeadas automaticamente para sua instância do ServiceNow.

       Para ajudá-lo a começar, os campos obrigatórios e recomendados são pré-preenchidos com valores padrão. Ao adicionar um valor personalizado para um campo compatível, você pode adicionar um valor dinâmico da carga útil do problema ou gravar seu próprio valor. Você pode remover qualquer campo não obrigatório e adicionar o seu próprio.

    ### Envie uma notificação de teste [#send-servicenow-test]

    Clique em <DoNotTranslate>**Send test notification**</DoNotTranslate> para ver o incidente do ServiceNow com valores de campo padrão. Se for bem-sucedido, você verá um link com o incidente criado.

    <img
      width="80%;"
      title="ServiceNow incident template."
      alt="A screenshot of some recommended ServiceNow-incident fields and values."
      src={accountsServiceNowMessageTemplate}
    />

    <figcaption>
      Selecione, edite ou remova campos do modelo Incidente do ServiceNow.
    </figcaption>
  </Collapser>

  <Collapser
    className="freq-link"
    id="servicenow-certified"
    title="ServiceNow (Certified application)"
  >
    A integração certificada do ServiceNow com o fluxo de trabalho da New Relic está disponível na loja ServiceNow. Ao usar o ServiceNow, lembre-se do seguinte:

    * A instância do ServiceNow armazena a notificação de problema do New Relic como `New Relic Issues`.

    * Você pode configurar políticas de roteamento no ServiceNow para gerar tarefas ou outros registros para representar ou corresponder a esses problemas quando eles corresponderem a uma determinada política.

    * O evento de confirmação ou encerramento no ServiceNow pode confirmar ou encerrar o problema no New Relic.

    * Você pode converter automaticamente problemas do New Relic em tarefas acionáveis no ServiceNow.

    * ServiceNow pode receber atualizações da New Relic sobre problemas.

    * O mecanismo de política permite a qualificação de New Relic <InlinePopover type="alerts"/>conforme eles chegam.

    * Combine a entidade com os itens de configuração e relacione-os com a tabela de tarefas disponível.

    * No ServiceNow você pode enviar e ver como imagens os enriquecimentos da New Relic.

      You can integrate ServiceNow with New Relic by either using the ServiceNow application destination or using the webhook destination. Please refer to this [installation guide](https://store.servicenow.com/appStoreAttachments.do?sys_id=46dce4241bf9c2503ee8a8ea234bcb79)for more details, tips, and best practices.

    pen_spark

    <table>
      <thead>
        <tr>
          <th>
            New Relic destination type
          </th>

          <th>
            ServiceNow
          </th>

          <th>
            Webhook
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            carga
          </td>

          <td>
            Controlado pela New Relic
          </td>

          <td>
            Carga JSON gerenciada por você
          </td>
        </tr>

        <tr>
          <td>
            Capacidade de atualizar o New Relic do ServiceNow
          </td>

          <td>
            Incluído. Uma conexão New Relic é criada automaticamente quando o destino é criado.
          </td>

          <td>
            Incluído. Você precisa criar a conexão New Relic manualmente.
          </td>
        </tr>

        <tr>
          <td>
            Políticas de roteamento
          </td>

          <td>
            Incluído
          </td>

          <td>
            Incluído
          </td>
        </tr>

        <tr>
          <td>
            Capacidade de atualizar os campos de destino diretamente
          </td>

          <td>
            Sim, usando a tag entidade junto com o designer padrão do New Relic Flow.
          </td>

          <td>
            Sim, usando a tag na entidade e especificando no payload do webhook junto com o designer padrão do New Relic Flow.
          </td>
        </tr>
      </tbody>
    </table>

 

    ### Configure o destino do aplicativo ServiceNow [#servicenow-destination]

    <Callout variant="important">
      Se você não tiver acesso para criar um novo destino, envie um e-mail para [notificaçãoWorkflows@newrelic.com](mailto:notificationWorkflows@newrelic.com) com o nome e o número da sua conta para obter assistência.
    </Callout>

    Para criar um destino ServiceNow, siga estas etapas:

    1. [Download and install the New Relic application](https://store.servicenow.com/sn_appstore_store.do#!/store/application/d117597d1b9b9d9078faddf7b04bcba7/1.0.0?referer=%2Fstore%2Fsearch%3Flistingtype%3Dallintegrations%25253Bancillary_app%25253Bcertified_apps%25253Bcontent%25253Bindustry_solution%25253Boem%25253Butility%25253Btemplate%26q%3Dnew%2520relic&sl=sh) in the ServiceNow store.

    2. Crie um usuário dentro do ServiceNow. Certifique-se de ativar a opção <DoNotTranslate>**Web service access only**</DoNotTranslate> e conceder a função `x_newre_core.inbound_api` ao usuário criado. Copie e salve a senha gerada.

    3. Vá para <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Alerts & AI**</DoNotTranslate>, clique em <DoNotTranslate>**Destinations**</DoNotTranslate> e selecione <DoNotTranslate>**ServiceNow**</DoNotTranslate>.

       <img
         width="80%;"
         title="Create a ServiceNow destination"
         alt="Create a ServiceNow destination"
         src={accountsServiceNowCreateDestination}
       />

    4. Clique em <DoNotTranslate>**Next**</DoNotTranslate>.

    5. Adicione o domínio, nome de usuário e senha. O domínio deve incluir `*.service-now.com`. Adicione a senha que você copiou na etapa 2.

    6. Clique em <DoNotTranslate>**Next**</DoNotTranslate>.

    7. Dê um nome ao destino.

    8. Click <DoNotTranslate>**Save destination**</DoNotTranslate>.    9. Use this destination with your notification workflows.

    <Callout variant="tip">
      You can update Servicenow attributes on the target table directly (e.g. **Incident**) from New Relic directly. To do so, tag related entities (e.g. alert condition, APM entities, synthetics, hosts, etc…) with **ServiceNowFields.\[serviceNow_value]** or **ServiceNowFields.dv\_\[serviceNow_name]**. For example, to populate your APM entity as the configuration item in the incident table, tag it with **ServiceNowFields.dv_configuration_item : my_ci**
    </Callout>

    ### Configure o destino do webhook [#servicenow-webhook-destination]

    Para criar um destino de webhook, siga estas etapas:

    1. [Download and install the New Relic application](https://store.servicenow.com/sn_appstore_store.do#!/store/application/d117597d1b9b9d9078faddf7b04bcba7/1.1.1) in the ServiceNow store.

    2. Crie um usuário dentro do ServiceNow. Certifique-se de ativar a opção <DoNotTranslate>**Web service access only**</DoNotTranslate> e conceder a função `x_newre_core.inbound_api` ao usuário criado. Copie e salve a senha gerada.

    3. Vá para <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Alerts & AI**</DoNotTranslate>, clique em <DoNotTranslate>**Destinations**</DoNotTranslate> e selecione <DoNotTranslate>**Webhook**</DoNotTranslate>.

    4. Preencha os seguintes campos:

       * <DoNotTranslate>**Webhook name**</DoNotTranslate>: um nome para identificar o webhook.

       * <DoNotTranslate>**Endpoint URL**</DoNotTranslate>: o URL do endpoint do destino. Deve incluir `*.service-now.com/api/x_newre_core/new_relic/issue/notification`, por exemplo, `https://my_instance.service-now.com/api/x_newre_core/new_relic/issue/notification`.

       * <DoNotTranslate>**Use authorization**</DoNotTranslate>: habilite a opção <DoNotTranslate>**Basic authorization**</DoNotTranslate> e digite o nome de usuário e a senha copiada para autenticar o ServiceNow.

         <img
           width="80%;"
           title="Create a webhook destination"
           alt="Create a webhook destination"
           src={accountsWebhookDestination}
         />

    5. Clique em <DoNotTranslate>**Save destination**</DoNotTranslate>.

    Você pode ver o breve vídeo abaixo que mostra como criar um destino Webhook:

    <Video
      type="wistia"
      id="0er0remkv0"
    />

    Para adicionar `serviceNowFields` em uma carga de Webhook:

    1. Vá para <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Alerts & AI**</DoNotTranslate> e clique em <DoNotTranslate>**Workflows**</DoNotTranslate>.

    2. Clique no <Icon name="fe-more-horizontal"/> em um Webhook existente e selecione <DoNotTranslate>**Edit**</DoNotTranslate> ou clique no botão <DoNotTranslate>**+ Add a new workflow**</DoNotTranslate> .

    3. Clique no canal <DoNotTranslate>**Webhook**</DoNotTranslate> .

    4. Modifique a carga padrão adicionando o atributo `serviceNowFields` necessário.

       <img
         width="80%;"
         title="Adding the `serviceNowFields` attributes"
         alt="Adding the `serviceNowFields` attributes"
         src={accountsWebhookServiceNowFields}
       />

    5. Clique em <DoNotTranslate>**Send test notification**</DoNotTranslate> para verificar suas alterações.

    6. Clique em <DoNotTranslate>**Save message**</DoNotTranslate>.

    7. Clique em <DoNotTranslate>**Activate workflow**</DoNotTranslate>.
  </Collapser>

  <Collapser
    className="freq-link"
    id="slack"
    title="Slack"
  >
    Envie mensagens de notificação para seus canais do Slack. Veja como [migrar do antigo destino do webhook do Slack para o novo aplicativo Slack](#migrate-slack) para obter mais informações.

    <Video
      type="wistia"
      id="zs92j5i31v"
    />

    ### Pré-requisitos [#slack-prereqs]

    Seu espaço de trabalho Slack precisa ter o [aplicativo New Relic](https://newrelic.slack.com/apps/AP92KQJS3-new-relic?tab=more_info)(ou o [aplicativo da UE](https://slack.com/apps/AS5D75HQQ-new-relic-eu?tab=more_info) para `one.eu.newrelic` clientes) instalado. Um administrador do espaço de trabalho deve aprovar o aplicativo antes que você possa instalá-lo individualmente. Se precisar de ajuda, entre em contato com [support@newrelic.com](mailto:support@newrelic.com).

    ### Configure um destino do Slack [#set-slack-destination]

    1. Vá para <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Alerts & AI**</DoNotTranslate>, clique em <DoNotTranslate>**Destinations**</DoNotTranslate> e selecione <DoNotTranslate>**Slack**</DoNotTranslate>.

    2. Clique no botão <DoNotTranslate>**Authenticate in one click**</DoNotTranslate> para acessar a página inicial do Slack e continuar o processo de autenticação do OAuth2. Se não estiver conectado ao workspace necessário, você será redirecionado ao Slack para fazer login.

       <img
         width="60%;"
         title="Create a Slack destination with a click."
         alt="A screenshot of the one-click Slack authentication."
         src={accountsSlackDestinationAuthentication}
       />

    3. Adicione o nome do seu espaço de trabalho ou selecione o espaço de trabalho relevante e clique em <DoNotTranslate>**Continue**</DoNotTranslate>.

       <img
         width="50%;"
         title="add a Slack workspace."
         alt="add a workspace."
         src={accountsSlackSignIn}
       />

    4. Quando conectado ao espaço de trabalho selecionado, permita que o New Relic execute as ações especificadas.

       <img
         width="40%;"
         title="select a workspace and configure permissions."
         alt="A screenshot permissions configurations."
         src={accountsSlackDestinationAllowAccess}
       />

    5. Clique em <DoNotTranslate>**Allow**</DoNotTranslate> e retorne à página de destino.

       <img
         width="80%;"
         title="authentication completed successfully."
         alt="A screenshot completed authentication."
         src={accountsSlackAuthenticationCompleted}
       />

    ### Configure o modelo de mensagem do Slack no fluxo de trabalho [#configure-slack-message-settings]

    1. Vá para <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Alerts & AI > Workflows**</DoNotTranslate> e clique em um fluxo de trabalho existente ou no botão <DoNotTranslate>**+ Add a workflow**</DoNotTranslate> .

    2. Selecione um destino (Workspace) e um canal do Slack para enviar mensagens. Você poderá criar um novo destino se não houver um destino predefinido para o espaço de trabalho necessário. Por motivos de privacidade, o usuário precisa ser autenticado uma vez para selecionar canais privados. Ao selecionar um canal privado, o bot será adicionado automaticamente ao canal.

    3. Você pode usar a notificação padrão ou enriquecê-la com detalhes personalizados. Escolha variáveis no [menu de variáveis](/docs/alerts-applied-intelligence/notifications/message-templates/#variables-menu) e aplique [a sintaxe do guidão](/docs/alerts-applied-intelligence/notifications/message-templates/#handlebars-syntax) para enriquecer sua carga útil.

    4. Clique no botão <DoNotTranslate>**Send test notification**</DoNotTranslate> para enviar uma notificação de teste com um exemplo de carga predefinido para o canal. Isso cria uma mensagem no canal do Slack selecionado.

       <img
         width="80%;"
         title="Authenticate to select private channels."
         alt="Slack settings, user is not authenticated."
         src={accountsSlackMessageTemplate}
       />
  </Collapser>

  <Collapser
    className="freq-link"
    id="Splunk_on_call_templates"
    title="Splunk on-call (VictorOps)"
  >
    ### Modelo de webhook para Splunk On-call

    Enviar notificação do fluxo de trabalho para o Splunk On-call usando um [modelo de webhook](https://help.victorops.com/knowledge-base/new-relic-integration-guide/#about-splunk-on-call-and-new-relic)
  </Collapser>

  <Collapser
    className="freq-link"
    id="webhook"
    title="Webhook"
  >
    Você deve usar um notificador de webhook no fluxo de trabalho para enviar mensagens de notificação para um endpoint HTTPS especificado. Por padrão, o notificador assume que o tipo de conteúdo da solicitação é JSON e faz uma solicitação HTTP POST para o endpoint determinado. Quando você começa a configurá-lo, o notificador de webhook fornece uma estrutura de carga útil JSON padrão que você pode usar imediatamente. No entanto, se precisar de mais personalização, você poderá modificar a carga usando a sintaxe do modelo do Handlebars. Isso permite que você preencha variáveis dentro da carga dinamicamente, adaptando-a às suas necessidades específicas.

    Além da carga útil, você também pode incluir cabeçalhos HTTP adicionais na solicitação de webhook. Isto pode ser útil para passar informações extras ou token de autenticação para o endpoint receptor. Aqui está um tutorial em vídeo para configurar webhooks.

    <Video
      type="wistia"
      id="feyutwgew8"
    />

    ### Configurar um destino de webhook [#set-webhook-destination]

    Para criar um destino de webhook, siga estas etapas:

    1. Vá para <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Alerts & AI**</DoNotTranslate>, clique em <DoNotTranslate>**Destinations**</DoNotTranslate> e selecione <DoNotTranslate>**Webhook**</DoNotTranslate>.

    2. Insira as seguintes informações:

       * <DoNotTranslate>**Webhook name:**</DoNotTranslate>

         Nome de referência para seu webhook.

       * <DoNotTranslate>**Endpoint URL:**</DoNotTranslate>

         O endpoint do aplicativo de destino para onde uma solicitação HTTP POST será enviada.

       * <DoNotTranslate>**Use authorization:**</DoNotTranslate>

         (Opcional) Você pode escolher entre `Basic Authentication` ou `Bearer Token`.

    Se você é novo no trabalho com webhooks e deseja testar a configuração e examinar a carga do webhook sem escrever um serviço, você pode usar serviços HTTP catch-all. [Beeceptor](https://beeceptor.com) e [Webhook.site](https://webhook.site) são exemplos de serviços que fornecem uma URL designada onde você pode receber cargas HTTP e então inspecionar a carga JSON do evento. Este recurso é valioso para coletar informações relevantes antes de iniciar o processo de desenvolvimento.

    Se você estiver criando um novo serviço para consumir essa carga, deverá testá-lo localmente. Usar túneis locais é uma boa ideia para testar e depurar webhooks em um ambiente local antes de implantar em um servidor de produção. Esses túneis permitem que você receba solicitações de webhook do New Relic em sua máquina local, eliminando a necessidade de um servidor acessível publicamente durante o desenvolvimento. Ferramentas como Beeceptor ou ngrok permitem criar uma URL pública temporária que encaminha solicitações ao seu servidor local, especificando a porta ou endereço do aplicativo desejado. Isso agiliza a iteração e a depuração, pois você pode observar e analisar diretamente a carga do webhook em seu ambiente de desenvolvimento local.

    ### Sincronização bidirecional [#two-way-webhook]

    Para notificações enviadas do fluxo de trabalho, você pode confirmar ou encerrar problemas usando [o Nerdgraph](/docs/apis/nerdgraph/examples/nerdgraph-issues-api-via-github/#resolve-ack-issues). Ao testar a sincronização bidirecional com webhooks, você pode usar o status de resposta personalizado e os modelos de carga útil do Beeceptor. Isso permite que você esboce uma resposta desejada ao confirmar o evento recebido.

    ### URL seguro [#secure-url-webhook]

    Você pode adicionar informações confidenciais no caminho e parâmetro da URL, como ID de serviço ou chave de API. Para evitar a exposição desses segredos, adicionamos uma opção que criptografa informações confidenciais além do domínio tanto do usuário quanto da coleta de métricas internas.

    O serviço só utiliza a URL completa quando envia a notificação. No entanto, depois que o URL seguro for salvo, será necessário atualizá-lo manualmente para que ele substitua completamente o URL salvo.

    <img
      width="80%;"
      title="Webhook destination secure URL"
      alt="Webhook destination secure URL"
      src={accountsWebhookSecureUrl}
    />

    ### Autenticação de cabeçalhos personalizados [#custom-headers-auth-webhook]

    Alguns usuários podem passar informações sensíveis em seus cabeçalhos, como chave de API e IDs pessoais. Para proteger informações confidenciais contra exposição, você pode criar cabeçalhos personalizados que criptografam valores e mascaram dados do usuário e do log interno. Tenha em mente que:

    * Se os valores das informações criptografadas mudarem, você precisará excluir completamente e reescrever o valor.
    * Se você adicionou a mesma chave de cabeçalho ao destino e ao canal, o destino terá precedência. O canal não será usado.

    <img
      width="80%;"
      title="Webhook destination custom headers authentication"
      alt="Webhook destination custom headers authentication"
      src={accountsWebhookCustomHeadersAuth}
    />

    ### Configurar o modelo de evento do webhook [#configure-webhook-event-template]

    Escolha um destino de webhook na lista e configure a solicitação `HTTP-POST` .

    A configuração da solicitação exige que você:

    1. Defina um nome para o modelo.
    2. Selecione um destino pré-configurado na lista de destinos ou crie um novo.
    3. Adicione cabeçalhos personalizados (opcional).
    4. Configure a carga útil da solicitação.

    ### Personalize o payload do webhook no fluxo de trabalho [#customize-webhook-payload]

    Vá para <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Alerts & AI > Workflows**</DoNotTranslate> e clique em um fluxo de trabalho existente ou no botão <DoNotTranslate>**+ Add a new workflow**</DoNotTranslate> e selecione um destino de Webhook.

    <Callout variant="important">
      O tipo de conteúdo da solicitação é JSON por padrão, portanto, a carga também precisa estar no formato JSON. Para se familiarizar com o formato, veja [nossos exemplos de uso](/docs/alerts-applied-intelligence/notifications/message-templates/#usage-examples).
    </Callout>

    Você pode usar a carga padrão ou personalizá-la para conter os dados necessários. Escolha variáveis no [menu de variáveis](/docs/alerts-applied-intelligence/notifications/message-templates/#variables-menu) e aplique [a sintaxe do guidão](/docs/alerts-applied-intelligence/notifications/message-templates/#handlebars-syntax) para enriquecer seu webhook. A seção <DoNotTranslate>**Preview**</DoNotTranslate> à direita mostra uma carga esperada após o modelo ser renderizado. Se a carga útil não formar um JSON válido, ocorrerá um erro e você não poderá salvar o modelo.

    <img
      width="80%;"
      title="An invalid Json payload."
      alt="A screenshot of an invalid Json payload."
      src={accountsWebhookPreviewError}
    />

    <Callout variant="tip">
      Erros de tipo indefinido podem indicar que o atributo não foi indexado recentemente ou não existe. Para corrigir o erro, tente adicionar uma instrução `if else` . Por exemplo, `"closed_at": {{#if issueClosedAtUtc}} {{ json issueClosedAtUtc }} {{else}}"None"{{/if}}`
    </Callout>

    Se a carga do webhook estiver em conformidade com um JSON válido, você poderá enviar uma notificação de teste para o destino do webhook definido. Recomendamos enviar uma notificação de teste para garantir que tudo esteja conectado corretamente.

    <img
      width="80%;"
      title="A test webhook notification template."
      alt="A screenshot of a test webhook notification template."
      src={accountsWebhookNotificationTemplate}
    />
  </Collapser>

  <Collapser
    className="freq-link"
    id="xMatters_templates"
    title="xMatters"
  >
    ### Modelo de webhook para xMatters

    Envie notificação do fluxo de trabalho para o xMatters usando um template de webhook.

    ```handlebars
    {
      {{#if nrAccountId}}"account_id": {{nrAccountId}},{{/if}}
      "account_name": {{json accumulations.tag.account.[0]}},
      {{#if accumulations.tag.action}}"action":{{json accumulations.tag.action.[0]}},{{/if}}
      "closed_violations_count": {
        "critical": {{#if closedIncidentsCount}}{{closedIncidentsCount}}{{else}}0{{/if}},
        "warning": 0,
        "total": {{#if closedIncidentsCount}}{{closedIncidentsCount}}{{else}}0{{/if}}
      },
      "condition_family_id": {{accumulations.conditionFamilyId.[0]}},
      "condition_id": {{accumulations.conditionFamilyId.[0]}},
      "condition_name": {{json accumulations.conditionName.[0]}},
      {{#if accumulations.evaluationName}}"condition_metric_name": {{json accumulations.evaluationName.[0]}},{{/if}}
      {{#if accumulations.evaluationMetricValueFunction}}"condition_metric_value_function": {{json accumulations.evaluationMetricValueFunction.[0]}},{{/if}}
      "current_state": {{#if issueClosedAt}}"closed"{{else if issueAcknowledgedAt}}"acknowledged"{{else}}"open"{{/if}},
      "details": {{json issueTitle}},
      "duration": {{#if issueDurationMs}}{{issueDurationMs}}{{else}}0{{/if}},
      "event_type": "INCIDENT",
      "incident_acknowledge_url": {{json issueAckUrl}},
      "incident_url": {{json issuePageUrl}},
      "incident_id": {{json issueId}},
      "metadata": {
        {{#if locationStatusesObject}}"location_statuses": {{locationStatusesObject}},{{/if}}
        {{#if accumulations.metadata_entity_type}}"entity.type": {{json accumulations.metadata_entity_type.[0]}},{{/if}}
        {{#if accumulations.metadata_entity_name}}"entity.name": {{json accumulations.metadata_entity_name.[0]}}{{/if}}
      },
      "open_violations_count": {
        "critical": {{#if openIncidentsCount}}{{openIncidentsCount}}{{else}}0{{/if}},
        "warning": 0,
        "total": {{#if openIncidentsCount}}{{openIncidentsCount}}{{else}}0{{/if}}
      },
      "policy_name": {{json accumulations.policyName.[0]}},
      {{#if policyUrl}}"policy_url": {{json policyUrl}},{{/if}}
      "radar_entity": {
        "accountId": {{json accumulations.tag.accountId.[0]}},
        "domain": {{json accumulations.conditionProduct.[0]}},
        "domainId": {{json issueId}},
        "entityGuid": {{json entitiesData.entities.[0].id}},
        "name": {{#if accumulations.targetName}}{{json accumulations.targetName.[0]}}{{else if entitiesData.entities}}{{json entitiesData.entities.[0].name}}{{else}}"NA"{{/if}},
        "type": {{#if entitiesData.types.[0]}}{{json entitiesData.types.[0]}}{{else}}"NA"{{/if}}
      },
      {{#if accumulations.runbookUrl}}"runbook_url": {{json accumulations.runbookUrl.[0]}},{{/if}}
      "severity": {{#eq HIGH priority}}"WARNING"{{else}}{{json priority}}{{/eq}},
      "state": {{json state}},
      "status": {{json status}},
      "targets": [
        {
          "id": {{#if entitiesData.entities.[0].id}}{{json entitiesData.entities.[0].id}}{{else if accumulations.nrqlEventType}}{{json accumulations.nrqlEventType.[0]}}{{else}}"N/A"{{/if}},
          "name": {{#if accumulations.targetName}}{{json accumulations.targetName.[0]}}{{else if entitiesData.entities}}{{json entitiesData.entities.[0].name}}{{else}}"NA"{{/if}},
          "link": {{json issuePageUrl}},
          "product": {{json accumulations.conditionProduct.[0]}},
          "type": {{#if entitiesData.types.[0]}}{{json entitiesData.types.[0]}}{{else}}"NA"{{/if}},
          "labels": {
            {{#each accumulations.rawTag}}{{#if this.[0]}}"{{@key}}":{{json this.[0]}},{{/if}}{{/each}}
            "NewRelic": "targetLabels"
          }
        }
      ],
      "timestamp": {{#if closedAt}}{{closedAt}}{{else if acknowledgedAt}}{{acknowledgedAt}}{{else}}{{createdAt}}{{/if}},
      "timestamp_utc_string": {{json issueUpdatedAt}},
      "version": "1.0",
      {{#if accumulations.conditionDescription}}"VIOLATION DESCRIPTION": {{json accumulations.conditionDescription.[0]}},{{/if}}
      {{#if violationChartUrl}}"violation_chart_url": {{json violationChartUrl}},{{/if}}
      "violation_callback_url": {{json issuePageUrl}}
    }
    ```
  </Collapser>
</CollapserGroup>

## Migre seus destinos legados do Slack para o novo destino do Slack [#migrate-slack]

Para migrar seus destinos legados do Slack para o novo destino do Slack, siga estas etapas:

1. Configure um novo destino do Slack.

2. Para cada fluxo de trabalho enviado para o destino legado do Slack, faça o seguinte:

   * Encontre o canal do Slack que foi enviado com a notificação de legado e salve-o.

   <img
     width="80%;"
     title="Migrate Slack, create a new workflow."
     alt="Migrate Slack, create a new workflow."
     src={accountsMigrateSlackNewWorkflow}
   />

   * Teste a notificação para ver se funciona.

   * Remova o notificador legado do Slack existente.

     <img
       width="80%;"
       title="Migrate Slack, remove the existing legacy slack notifier."
       alt="Migrate Slack, remove the existing legacy slack notifier."
       src={accountsMigrateSlackRemoveLegacy}
     />

   * Clique em <DoNotTranslate>**Test workflow**</DoNotTranslate> para confirmar se há um problema real que corresponde ao filtro (se existir).

   * Salve o fluxo de trabalho.

## Opções de API [#api]

Você também pode usar nossa API NerdGraph para visualizar e configurar [destinos](/docs/apis/nerdgraph/examples/nerdgraph-api-notifications-destinations) e [canais de notificação](/docs/apis/nerdgraph/examples/nerdgraph-api-notifications-channels).