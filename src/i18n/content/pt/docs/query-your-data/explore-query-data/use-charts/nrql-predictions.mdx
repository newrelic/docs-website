---
title: Previsões NRQL
tags:
  - Prediction on a chart
  - Forecasting on a chart
  - NRQL Predictions
  - Forecasting
metaDescription: Use NRQL Predictions to predict future trends and potential performance issues.
freshnessValidatedDate: never
translationType: machine
---

<Callout title="visualização">
  Ainda estamos trabalhando nesse recurso, mas adoraríamos que você experimentasse!

  Atualmente, esse recurso é fornecido como parte de um programa de visualização de acordo com nossas [políticas de pré-lançamento](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy).
</Callout>

<DNT>**NRQL Predictions**</DNT> O New Relic usa os dados históricos da sua métrica para prever tendências futuras, fornecendo insights sobre como a métrica pode se comportar no futuro. Essa abordagem proativa ajuda você a visualizar tendências e antecipar possíveis problemas, permitindo intervenções oportunas para manter o desempenho ideal do sistema. Embora <DNT>**NRQL Predictions**</DNT> em si não identifique problemas potenciais, ele fornece as informações necessárias para avaliar tendências e planejar desafios futuros.

Para identificação automática de possíveis problemas, você pode se inscrever no recurso <DNT>**[Predictive Alerts](/docs/query-your-data/explore-query-data/use-charts/nrql-predictions)**</DNT> , atualmente disponível em versão prévia pública. <DNT>**Predictive Alerts**</DNT> trabalhe junto com <DNT>**NRQL Predictions**</DNT> para disparar alertas automaticamente quando tendências projetadas indicarem um problema potencial, permitindo o gerenciamento proativo de seus sistemas.

## Preços [#pricing]

O uso de <DNT>**NRQL Predictions**</DNT> é faturável durante a visualização, de acordo com seu Pedido, conforme aplicável ao modelo de preços associado à sua Conta. A consulta de idioma New Relic (NRQLS) relacionada ao uso deste recurso é faturável como o Produto de computação principal. Se esse recurso estiver disponível para o público em geral, seu uso será cobrado de acordo com seu Pedido.

Para mais detalhes sobre preços, entre em contato com nossa equipe de vendas ou consulte seu pedido.

## Inscrição [#enrollment]

Para se inscrever no recurso <DNT>**NRQL Predictions**</DNT> , navegue até <DNT>**[one.newrelic.com &gt; Administration](https://one.newrelic.com/admin-portal) &amp;gt; Preview &amp;amp; Trials**</DNT> e ative <DNT>**NRQL predictions**</DNT>.

## Adicionar previsão em um gráfico de linha ou área [#add-prediction]

Você pode adicionar previsões a gráficos de linhas e áreas das duas maneiras a seguir:

<CollapserGroup>
  <Collapser id="prediction-on-existing-chart" title="Adicione uma previsão a um gráfico existente.">
    Para adicionar uma previsão a um gráfico existente, siga estas etapas:

    <Steps>
      <Step>
        ### Acessar um gráfico de linha ou área [#access-a-chart]

        1. Acesse [one.newrelic.com &gt; All capabilities](https://one.newrelic.com/all-capabilities).
        2. Para adicionar previsão a um gráfico de linha ou área, selecione-o em <DNT>**Dashboards**</DNT> ou abra-o em <DNT>**Metrics and events**</DNT>.
      </Step>

      <Step>
        ### Adicionar previsão [#add-prediction]

        Para adicionar previsão, a partir do <Icon name="fe-more-horizontal" /> menu, selecione <DNT>**Predict trend**</DNT>. No **Data Explorer**, a tendência de previsão aparece no gráfico, projetando tendências futuras. O intervalo de previsão é definido automaticamente para 20% da janela de consulta e destacado em cinza. O gráfico aparece em linhas pontilhadas dentro do intervalo previsto.

        A palavra-chave `PREDICT` é anexada à consulta do gráfico. Você pode [refinar a consulta](#customize-prediction-range) de acordo com suas necessidades e executá-la para obter a tendência atualizada.

        <Callout variant="tip">
          Quando você adiciona previsão a um gráfico de área, o tipo de gráfico muda para um gráfico de linhas com previsão.
        </Callout>
      </Step>

      <Step>
        ### Adicionar ao dashboard [#add-to-dashboard]

        1. Para adicionar o gráfico com previsão a um dashboard, clique em <DNT>**Add to dashboard**</DNT>.
        2. Insira um nome para o widget.
        3. Selecione um dashboard no qual você deseja adicionar o widget ou crie um novo dashboard para ele.

        Agora você pode visualizar o gráfico com previsão no dashboard selecionado.
      </Step>
    </Steps>
  </Collapser>

  <Collapser id="use-predict-clause" title="Use a cláusula `PREDICT` em uma consulta NRQL.">
    Para adicionar a cláusula `PREDICT` a uma consulta NRQL, siga estas etapas:

    <Steps>
      <Step>
        ### Crie uma consulta NRQL [#create-query]

        1. Acesse [one.newrelic.com](https://one.newrelic.com) e selecione a conta na qual deseja criar a consulta.
        2. Para abrir <DNT>**Data Explorer**</DNT>, selecione <DNT>**Query Your Data**</DNT>.
        3. Crie uma consulta de série temporal usando a sintaxe NRQL. Consulte [a documentação da sintaxe NRQL](https://docs.newrelic.com/docs/nrql/nrql-syntax-clauses-functions) para obter mais informações.

        <Callout variant="important">
          Certifique-se de que a consulta não inclua [dados de métrica de fração de tempo](/docs/data-analysis/metrics/analyze-your-metrics/data-collection-metric-timeslice-event-data#timeslice-data), a cláusula [`COMPARE WITH`](/docs/nrql/nrql-syntax-clauses-functions/#sel-compare) ou [agregações aninhadas](/docs/nrql/using-nrql/nested-aggregation-make-ordered-computations-single-query) dentro de [subconsultas](/docs/nrql/using-nrql/subqueries-in-nrql/), pois as previsões não são suportadas nesses casos.
        </Callout>
      </Step>

      <Step>
        ### Adicionar previsão [#add-prediction-to-query]

        Para adicionar previsão ao gráfico, anexe a cláusula `PREDICT` à consulta e execute-a. O intervalo de previsão é definido automaticamente para 20% da janela de consulta e destacado em cinza. O gráfico aparece em linhas pontilhadas dentro do intervalo previsto.

        Você pode [refinar ainda mais a consulta](#customize-prediction-range) de acordo com suas necessidades.
      </Step>

      <Step>
        ### Adicionar ao dashboard [#add-query-to-dashboard]

        1. Para adicionar o gráfico com previsão a um dashboard, clique em <DNT>**Add to dashboard**</DNT>.
        2. Insira um nome para o widget.
        3. Selecione um dashboard no qual você deseja adicionar o widget ou crie um novo dashboard para ele.

        Agora você pode visualizar o gráfico com previsão no dashboard selecionado.
      </Step>
    </Steps>
  </Collapser>
</CollapserGroup>

## Algoritmo de previsão suportado [#supported-algorithm]

Atualmente, <DNT>**NRQL predictions**</DNT> suporta apenas o algoritmo <DNT>**Holt-Winters**</DNT> para séries temporais sazonais e não sazonais. Este é um algoritmo padrão e comumente usado para tarefas de previsão e predição. Oferecemos suporte a durações sazonais horárias, diárias e semanais para o modelo Holt-Winters.

## Comportamento padrão [#defaults]

A cláusula `PREDICT` em uma consulta vem com os seguintes comportamentos padrão:

* **Sazonalidade**: detecta automaticamente a sazonalidade nos dados e usa a mesma duração da estação para construir o modelo preditivo. Se nenhuma sazonalidade for encontrada, ele constrói um modelo não sazonal.
* **Janela de previsão**: projeta 20% do período total especificado na janela de consulta.
* **dados históricos para treinamento**: Utiliza dados históricos da janela de consulta atual e das duas anteriores para gerar previsões.
* **Intervalo de tempo**: alinha com o intervalo do ponto de dados da série temporal na janela de consulta para garantir consistência na projeção de dados.

Exemplo de uso de `PREDICT` em consulta NRQL:

```sql
FROM Transaction SELECT count(*) WHERE error IS TRUE TIMESERIES PREDICT
```

A previsão padrão no gráfico aparece da seguinte forma:

<img title="Default prediction" alt="Default prediction" src="/images/nrql-prediction-default.webp" />

<figcaption>
  <DNT>**[one.newrelic.com &gt; All capabilities](https://one.newrelic.com/all-capabilities) &amp;gt; dashboards**</DNT>: previsão padrão.
</figcaption>

## Personalize o modelo preditivo [#customize-prediction-range]

Você pode personalizar as previsões definindo manualmente os hiperparâmetros do modelo de treinamento e adicionando as palavras-chave `USING` e `BY` . Para se familiarizar com o NRQL, consulte a [documentação do NRQL](/docs/nrql/get-started/introduction-nrql-new-relics-query-language).

<CollapserGroup>
  <Collapser id="hyperparameters" title="Defina hiperparâmetros do modelo.">
    Atualmente, <DNT>**Holt-Winters**</DNT> é o único algoritmo de previsão que suportamos e vem com vários hiperparâmetros para ajudar você a ajustar suas previsões. Consulte a tabela a seguir para entender o comportamento de cada hiperparâmetro e escolher aqueles que se adequam ao seu caso de uso.

    Para modificar sua consulta, anexe `holtwinters(<hyperparameters>: <value>)` após a cláusula `PREDICT` .

    <table id="hyperparameters">
      <thead>
        <tr>
          <th colSpan="3" />
        </tr>

        <tr>
          <th>
            Hiperparâmetro
          </th>

          <th>
            Valor
          </th>

          <th>
            Comportamento
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td rowspan="3" style="width: 300px;">
            `seasonality`
          </td>

          <td>
            `<season length>`
          </td>

          <td>
            Define a sazonalidade da série temporal para uma duração de estação específica. Certifique-se de que a duração da temporada seja de `integer unit` tempo.\
            **Exemplos**: `1 day` ou `3 hours`
          </td>
        </tr>

        <tr>
          <td>
            `AUTO`
          </td>

          <td>
            Detecta automaticamente a sazonalidade da série temporal e gera previsões com a sazonalidade identificada.
          </td>
        </tr>

        <tr>
          <td>
            `NONE`
          </td>

          <td>
            Desabilita a sazonalidade da série temporal e gera uma previsão não sazonal.

            <Callout variant="important">
              `seasonality: NONE` não é compatível com o hiperparâmetro `gamma` , que define o fator de suavização sazonal.
            </Callout>
          </td>
        </tr>

        <tr>
          <td>
            `alpha`
          </td>

          <td>
            0 a 1
          </td>

          <td>
            Define o fator de suavização de nível.

            * **Valor mais baixo**: Mais peso em dados históricos.
            * **Maior valor**: Mais peso em dados recentes.
          </td>
        </tr>

        <tr>
          <td>
            `beta`
          </td>

          <td>
            0 a 1
          </td>

          <td>
            Define o fator de suavização de tendência.

            * **Valor mais baixo**: Mais peso em dados históricos.
            * **Maior valor**: Mais peso em dados recentes.
          </td>
        </tr>

        <tr>
          <td>
            `gamma`
          </td>

          <td>
            0 a 1
          </td>

          <td>
            Define o fator de suavização da estação.

            * **Valor mais baixo**: Mais peso em dados históricos.
            * **Maior valor**: Mais peso em dados recentes.
          </td>
        </tr>

        <tr>
          <td>
            `phi`
          </td>

          <td>
            0,98 a 1
          </td>

          <td>
            Define o parâmetro de amortecimento de tendência.

            * **Valor mais baixo**: maior efeito de amortecimento na curva de previsão, que gradualmente se nivela até se tornar uma curva plana.
            * **Valor mais alto**: menor efeito de amortecimento na curva de previsão.
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="by"
    title={<>Adicione a palavra-chave <InlineCode>
      BY
    </InlineCode> .</>
    }
  >
    Use a palavra-chave `BY` para definir o quão longe no tempo você deseja que o modelo preveja. Por exemplo, `PREDICT BY 3 hours` gera uma previsão de três horas no futuro a partir do último ponto na série temporal. Certifique-se de que o intervalo de tempo seja de `integer unit` tempo.
  </Collapser>

  <Collapser
    id="using"
    title={<>Adicione a palavra-chave <InlineCode>
      USING
    </InlineCode> .</>
    }
  >
    Use a palavra-chave `USING` para especificar a quantidade de dados históricos que você deseja usar para treinar o modelo. Por exemplo, `PREDICT USING 1 day` usa a janela de consulta junto com os dados do dia anterior para treinar o modelo. Certifique-se de que o intervalo de tempo seja de `integer unit` tempo.
  </Collapser>
</CollapserGroup>

Exemplo de uso de `PREDICT` com hiperparâmetros, `BY` e palavras-chave `USING` :

```sql
FROM Transaction SELECT count(*) WHERE error IS TRUE TIMESERIES PREDICT holtwinters(seasonality: AUTO, alpha: 0.2) BY 1 hour USING 2 hours
```

Esta consulta define a sazonalidade para detecção automática e enfatiza dados históricos ajustando o fator de suavização de nível. Ele prevê uma hora no futuro e treina o modelo usando o comprimento da janela de consulta junto com as duas horas anteriores de dados históricos. O gráfico exibe a previsão personalizada da seguinte forma:

<img title="Custom prediction" alt="Custom prediction" src="/images/nrql-prediction-custom.webp" />

<figcaption>
  <DNT>**[one.newrelic.com &gt; All capabilities](https://one.newrelic.com/all-capabilities) &amp;gt; dashboards**</DNT>: previsão personalizada.
</figcaption>