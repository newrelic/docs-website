---
title: Solução de problemas das regras de nuvem do Pipeline Control
metaDescription: Diagnose and resolve common issues with Pipeline Control cloud rules that drop data in New Relic infrastructure.
freshnessValidatedDate: never
translationType: machine
---

Este guia ajuda você a solucionar problemas comuns com as regras de nuvem do Pipeline Control. As regras de nuvem são executadas na infraestrutura da New Relic e usam NRQL para descartar dados indesejados após chegarem aos endpoints da New Relic.

## Regra não descartando dados

### Sintaxe NRQL inválida

**Problema**: A regra contém sintaxe NRQL inválida e falha ao processar dados.

**Sintomas**:

* A regra aparece na interface do usuário, mas nenhum dado está sendo descartado
* As métricas de descarte esperadas não aparecem
* O status da regra é exibido como inativo ou com falha

**Solução**:

* Valide sua sintaxe NRQL no construtor de consultas alterando `DELETE` para `SELECT` para testar a lógica da consulta

* Verifique se a consulta retorna os dados esperados antes de alterá-la de volta para `DELETE`

* Verifique se há erros comuns de sintaxe NRQL:

  * Cláusula `WHERE` ausente ou incorreta
  * Nomes de atributos ou tipos de dados inválidos
  * Operadores de comparação incorretos

* Consulte a [documentação do NRQL](/docs/nrql/get-started/introduction-nrql-new-relics-query-language/) para orientações de sintaxe

* Edite a regra para corrigir erros de sintaxe e salve

### Regra não correspondente aos dados esperados

**Problema**: A consulta NRQL está sintaticamente correta, mas não corresponde aos dados que você espera descartar.

**Sintomas**:

* A regra está ativa, mas as métricas de descarte mostram volumes zero ou baixos
* Dados que você espera que sejam descartados ainda aparecem no New Relic
* A consulta não retorna resultados quando testada com `SELECT`

**Solução**:

* Teste sua regra com `SELECT` em vez de `DELETE` para ver a quais dados ela corresponde

* Verifique se os nomes dos atributos correspondem aos seus dados reais:

  * Verifique a ortografia e a capitalização do atributo
  * Use o explorador de dados para inspecionar os nomes reais dos atributos em sua telemetria

* Confirme se os tipos de dados correspondem (comparações de string vs número)

* Verifique o intervalo de tempo - certifique-se de que há dados na janela de tempo selecionada

* Verifique se a cláusula `FROM` tem como alvo o tipo de dados correto (Log, Métrica, Span, Transação)

* Refine suas condições de `WHERE` para corresponder aos seus dados com mais precisão

### Regra implantada na conta errada

**Problema**: A regra está ativa, mas processando dados em uma conta diferente da pretendida.

**Sintomas**:

* A regra existe na interface do usuário, mas os dados esperados ainda aparecem
* As métricas de descarte não são exibidas na conta que você está visualizando
* Confusão sobre qual conta a regra afeta

**Solução**:

* Verifique o seletor de conta na interface do Pipeline Control
* Lembre-se de que as regras de nuvem são **específicas da conta** (ao contrário das regras de gateway, que abrangem toda a organização)
* Verifique se você está visualizando a mesma conta onde a regra está implantada
* Verifique a lista de regras na conta correta para confirmar que ela existe lá
* Se necessário, recrie a regra na conta pretendida

## Problemas de criação e edição de regras

### Não é possível criar ou editar regras

**Problema**: Você não tem permissão para criar ou modificar regras de nuvem.

**Sintomas**:

* Os botões de criar/editar estão desabilitados ou ausentes
* Mensagem de erro sobre permissões insuficientes
* As alterações não são salvas

**Solução**:

* Verifique se você tem a função e as capacidades necessárias para as regras de nuvem do Pipeline Control
* Entre em contato com o administrador da sua conta para conceder as permissões apropriadas
* Consulte a [documentação de permissões de usuário](/docs/accounts/accounts-billing/new-relic-one-user-management/user-permissions/) para as capacidades necessárias
* Certifique-se de estar na conta correta com o acesso apropriado

### Alterações de regra não visíveis

**Problema**: Você criou ou editou uma regra, mas não vê as alterações na lista de regras.

**Sintomas**:

* Fiz alterações, mas elas não aparecem na interface
* A lista de regras mostra a versão antiga
* As alterações parecem ter desaparecido

**Solução**:

* Atualize a página da interface do usuário do Pipeline Control
* Verifique se você salvou a regra (as alterações são aplicadas imediatamente ao salvar)
* Verifique se a regra está habilitada (as regras podem ser desabilitadas sem excluí-las)
* Verifique se você está visualizando a conta correta no seletor de contas
* As alterações se propagam em segundos - se não estiverem visíveis após atualizar, tente editar a regra novamente

## Problemas de monitoramento e métricas

### Métricas de descarte ausentes

**Problema**: A regra está ativa, mas você não consegue ver métricas sobre dados descartados.

**Sintomas**:

* A regra aparece na interface como ativa
* Nenhuma métrica de volume de descarte aparece nos dashboards
* Não é possível confirmar se a regra está funcionando

**Solução**:

* Aguarde alguns minutos para que as métricas apareçam após a implantação da regra
* Verifique se a regra está realmente correspondendo e descartando dados testando com `SELECT`
* Verifique a conta correta - as métricas de descarte aparecem na mesma conta que a regra
* Consulte métricas de descarte diretamente usando NRQL:
  ```sql
  FROM NrIntegrationError SELECT count(*) WHERE newRelicFeature = 'pipeline_control'
  ```
* Se a regra não estiver correspondendo aos dados, consulte [Regra não correspondendo aos dados esperados](#rule-not-matching-expected-data)

### Impacto de custo inesperado

**Problema**: Os custos das regras de nuvem estão mais altos do que o esperado.

**Sintomas**:

* Contagens altas de BSE (bilhões de eventos escaneados)
* Os custos não correspondem aos volumes de descarte esperados
* Preocupação com a eficiência da medição

**Solução**:

* Revise a cláusula `WHERE` da sua regra - condições mais abrangentes analisam mais eventos

* Considere usar condições mais seletivas para reduzir os BSEs escaneados

* Lembre-se de que as BSEs normalmente representam uma fração de custo muito menor do que os GBs descartados

* Para fontes de dados de alto volume, considere usar [regras de gateway](/docs/new-relic-control/pipeline-control/gateway/overview), que:

  * Processe dados antes de chegarem ao New Relic
  * Cobrança baseada no volume de ingestão, independentemente de descartes
  * Pode ser mais econômico para filtragem em larga escala

* Consulte a [documentação de custos](/docs/new-relic-control/pipeline-control/costs) para obter detalhes sobre modelos de medição

## Problemas de comportamento de dados

### Dados ainda aparecendo após a implantação da regra

**Problema**: Implantou uma regra de descarte, mas os dados ainda aparecem no New Relic.

**Sintomas**:

* Criou uma regra de `DELETE` visando dados específicos
* A regra aparece como ativa
* Dados esperados ainda aparecem em dashboards e consultas

**Solução**:

* Verifique se a regra está usando `DELETE` não apenas `SELECT`

* Verifique se a regra está **ativada** (regras desativadas não processam dados)

* Teste a regra com `SELECT` para confirmar que corresponde aos dados esperados

* Verifique se as condições `WHERE` da regra realmente correspondem aos seus dados

* Lembre-se de que as regras de nuvem afetam apenas **novos dados que chegam após a implantação**

  * Os dados históricos que já estão no NRDB não são afetados
  * Os dados enviados antes da ativação da regra permanecerão

* As regras tornam-se ativas segundos após serem salvas - se os dados ainda estiverem aparecendo, a regra pode não estar correspondendo corretamente

* Verifique se você está visualizando dados recentes, não dados anteriores à implantação da regra.

* Verifique a conta correta onde a regra está implantada

### Regra descartando dados demais

**Problema**: A regra está descartando mais dados do que o pretendido.

**Sintomas**:

* Dados esperados estão faltando no New Relic
* As métricas de descarte mostram volumes mais altos do que o previsto
* Dashboards ou alertas com dados ausentes

**Solução**:

* Revise cuidadosamente a cláusula `WHERE` da regra

* Teste a regra com `SELECT` para ver exatamente ao que ela corresponde

* Verifique se há condições excessivamente abrangentes:

  * Usar `LIKE '%value%'` pode corresponder a mais do que o pretendido
  * Condições ausentes que deveriam restringir o escopo
  * Lógica booleana incorreta (`AND` vs `OR`)

* Edite a regra para adicionar condições mais específicas

* Considere criar várias regras específicas em vez de uma regra ampla

* Monitore as métricas de descarte após as alterações para verificar o comportamento correto

## Próximos passos

Se você continuar enfrentando problemas após seguir este guia de solução de problemas:

* Revise a [documentação de regras de nuvem](/docs/new-relic-control/pipeline-control/cloud-rules/create-pipeline-rules) para verificar a configuração da sua regra
* Consulte a [documentação do NRQL](/docs/nrql/get-started/introduction-nrql-new-relics-query-language/) para orientações sobre a sintaxe de consulta
* Use o construtor de consultas para testar versões `SELECT` das suas regras antes de implantar
* Consulte a [documentação de custos](/docs/new-relic-control/pipeline-control/costs) para entender a medição das regras de nuvem
* Entre em contato com o Suporte da New Relic com a definição da sua regra e informações da conta