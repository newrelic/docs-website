---
title: Guia da UI do Gateway
metaDescription: 'Use the form-based Pipeline Control Gateway UI to create transformation, filtering, and sampling rules without writing YAML configuration.'
freshnessValidatedDate: never
translationType: machine
---

A UI do gateway do Pipeline Control fornece uma interface baseada em formulários para criar e gerenciar regras de gateway sem escrever YAML diretamente. A interface do usuário organiza a lógica de processamento em três categorias de regras: taxa de amostragem, regras de descarte e transformações. Cada categoria é configurável por meio de diálogos modais guiados.

## Organização da interface

A interface do gateway é organizada em três seções principais:

### Taxa de amostragem

Configure a amostragem probabilística com regras condicionais para controlar a porcentagem de dados de telemetria que chega ao New Relic. Suporta:

* Porcentagem de amostragem padrão (0-100%)
* Cenários de amostragem condicional baseados em correspondência de atributos

**Casos de uso comuns:**

* &quot;Amostrar 90% dos logs do serviço B, 83% dos logs do serviço A&quot;
* &quot;Manter 100% dos erros, 100% dos traces &gt;1000ms, amostrar 10% do restante&quot;

### Regras de descarte

Crie regras de filtro baseadas em OTTL para descartar condicionalmente registros de telemetria inteiros ou atributos específicos. Suporta:

* Correspondência de padrão com o operador `matches` para regex
* Filtragem baseada em atributos (ambiente, nome da métrica, nível de log)
* Condições combinadas com lógica `and`/`or`
* Operadores de comparação (`==`, `!=`, `>`, `<`, `>=`, `<=`)

**Casos de uso comuns:**

* &quot;Descartar dados do ambiente de teste&quot;
* &quot;Descartar logs de nível de depuração em produção&quot;
* &quot;Remover spans de health check&quot;
* &quot;Descartar métricas com prefixo de teste&quot;

### Transformações

Defina regras de transformação baseadas em OTTL para modificar, enriquecer ou analisar dados de telemetria. Suporta:

* Adição e modificação de atributos usando funções OTTL
* Análise de strings com padrões regex
* Transformações condicionais com regras de correspondência
* Múltiplas declarações OTTL por transformação

**Casos de uso comuns:**

* &quot;Adicione tags de ambiente e região a todas as métricas&quot;
* &quot;Analisar o formato de log do NGINX em atributos estruturados&quot;
* &quot;Normalizar nomes de serviço entre ambientes&quot;
* &quot;Extrair códigos de status HTTP de mensagens de log&quot;

## Crie regras na interface do usuário

### Criação de uma regra de taxa de amostragem

1. Na UI do gateway, no bloco de taxa de amostragem, clique no ícone de engrenagem/configurações para criar uma nova configuração de amostragem.

2. Configure a amostragem global:

   * Defina a porcentagem de amostragem global (0-100%).
   * Use o controle deslizante ou insira um valor numérico. Isso se aplica a todos os dados que não correspondem às regras condicionais.

3. Adicionar cenários condicionais (opcional):

   * Clique no ícone de MAIS para criar taxas de amostragem específicas por condição.
   * Para cada cenário, configure: Um nome descritivo (por exemplo, &quot;`B service sample`&quot;), uma descrição (por exemplo, &quot;`B service description`&quot;), uma expressão de correspondência de atributos (por exemplo, `attributes["appName"]=="TelemetryApp-ServiceB"`), uma porcentagem de amostragem usando o controle deslizante ou insira um valor numérico (0-100%)

4. Clique em <DNT>**Save sample criteria**</DNT> para aplicar regras de amostragem.

### Criar uma regra de filtro

1. Na interface do gateway, clique no ícone de mais no bloco de filtro para criar uma nova regra de filtro.

2. Configurar informações básicas:

   * <DNT>**Rule name**</DNT>: Insira um nome descritivo.
   * <DNT>**Description**</DNT>: Explique o que a regra faz.

3. Defina uma condição para corresponder aos seus dados e clique em <DNT>**Create rule**</DNT>.

4. Para adicionar mais condições conforme necessário, repita as etapas 1-3.

### Criar uma regra de transformação

1. Na UI do gateway, clique no ícone de MAIS no bloco de transformações para criar uma nova regra de transformação.

2. **Configurar informações básicas**:

   * <DNT>**Rule name**</DNT>: Insira um nome descritivo (por exemplo, &quot;parse-nginx-logs&quot;)
   * <DNT>**Description**</DNT>: Explique o que a transformação faz

3. **Defina condições para corresponder aos seus dados**:

   * Adicione condições para selecionar registros de telemetria específicos.
   * Clique em <DNT>**Add condition**</DNT> para adicionar várias condições:

   Múltiplas condições são avaliadas com lógica OU (se alguma condição corresponder, a transformação é aplicada). Condições de exemplo: `body == "request failed"`, `severity.text == "ERROR"`, `severity.text == "FATAL_ERROR"` Deixe em branco para aplicar a transformação a todos os registros. Cada condição é exibida em um campo de entrada separado com o operador `OR` entre elas.

4. **Defina declarações OTTL**:

   * Adicione uma ou mais declarações de transformação OTTL.
   * Clique em <DNT>**Add statement**</DNT> para adicionar várias transformações.
   * Cada instrução é executada em sequência. Altere a ordem arrastando a alça à esquerda de cada instrução.
   * Exemplos de instruções usando funções OTTL: `set(severity_text, "FAIL")`, `set(attributes["processors"], true)`, `set(attributes["environment"], "staging")`

5. Clique em <DNT>**Preview rule**</DNT> para ver como a transformação modifica os dados de amostra.

6. Faça alterações até que esteja satisfeito com a transformação.

7. Clique em <DNT>**Create rule**</DNT> para adicionar a transformação ao seu gateway.

### Implante suas alterações

Após configurar as regras, siga estas etapas para implantar sua configuração:

1. Clique em <DNT>**Create Deployment**</DNT>.

2. Na nova página de implantação:

   * Insira um nome e uma descrição para a implantação.
   * Identifique o agente de gateway do Pipeline Control no qual você deseja fazer o deploy.
   * Abra o menu de pontos à direita e clique em <DNT>**Change version**</DNT>.

3. Da lista de versões, selecione a versão que corresponde à configuração que você acabou de criar. (Os números de versão aumentam automaticamente a cada alteração de configuração, portanto, deve ser a versão mais recente.)

4. Clique em <DNT>**Add to deployment**</DNT> para aplicar a configuração.

5. Clique em <DNT>**Save draft**</DNT> e, em seguida, clique em <DNT>**Start deployment**</DNT>.

6. Você deve confirmar novamente que deseja iniciar a implantação. Clique em <DNT>**Start deployment**</DNT> novamente para confirmar.

## Recursos do OpenTelemetry

* [Referência de funções OTTL](https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/pkg/ottl/ottlfuncs/README.md) - Lista completa de funções OTTL para transformações e expressões booleanas para filtragem
* [Transform processor](https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/processor/transformprocessor) - Documentação oficial do processador de transformação
* [Processador de filtro](https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/processor/filterprocessor) - Documentação oficial do processador de filtro com sintaxe de expressão booleana OTTL
* [Processador de amostragem probabilística](https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/processor/probabilisticsamplerprocessor) - Documentação oficial do processador de amostragem