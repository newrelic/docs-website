---
title: Balanceador de carga para cluster de gateway
metaDescription: Learn how to set up a load balancer for your gateway cluster to manage the flow of data from your monitored entities to New Relic.
freshnessValidatedDate: never
translationType: machine
---

A New Relic recomenda implementar um balanceador de carga para o cluster de gateway.

1. [Avalie os requisitos de carga](/docs/pipeline-control/sizing-and-scaling):

   * Determine as taxas de transferência de dados esperadas e identifique possíveis gargalos.
   * Avalie o número de agentes APM e os horários de pico de carga.

2. Selecione o tipo de balanceador de carga:

   * Escolha um [balanceador de carga de software que se integre bem com o Kubernetes](https://kubernetes.io/docs/concepts/services-networking/ingress-controllers/). As opções incluem soluções baseadas em nuvem, como [AWS aplicativo Load Balancer](https://docs.aws.amazon.com/eks/latest/userguide/alb-ingress.html), [Google Cloud Load Balancer](https://cloud.google.com/kubernetes-engine/docs/concepts/ingress) ou [Azure Load Balancer](https://learn.microsoft.com/en-us/troubleshoot/azure/azure-kubernetes/load-bal-ingress-c/create-unmanaged-ingress-controller?tabs=azure-cli), bem como soluções de código aberto, como [NGINX](https://kubernetes.github.io/ingress-nginx/) ou [Traefik](https://doc.traefik.io/traefik/providers/kubernetes-ingress/).

3. Configurar balanceador de carga:

   * Configure o balanceador de carga para distribuir o tráfego uniformemente entre várias instâncias de gateway dentro do cluster do Kubernetes.
   * Implemente verificações de integridade para garantir que somente instâncias saudáveis recebam tráfego.

4. Configurar DNS e certificados:

   * Configure entradas de DNS para garantir o roteamento perfeito de dados para seu gateway.
   * Obtenha e configure certificados SSL/TLS para proteger a comunicação entre o agente e o gateway.
   * Certifique-se de que o certificado esteja configurado corretamente para o balanceador de carga para manter a transferência segura de dados.

5. Tamanho e escala:

   * Configure políticas de dimensionamento automático para adicionar ou remover instâncias com base em limites predefinidos, como uso de CPU ou tráfego de rede.
   * Monitore métricas de desempenho para ajustar políticas de escalonamento conforme necessário.

6. Teste e otimize:

   * Realize testes de carga para garantir a distribuição eficaz do tráfego e identificar qualquer gargalo.
   * Otimize a configuração para minimizar a latência e maximizar as taxas de transferência.

Como exemplo, aprenda mais sobre como [implementar um balanceador de carga usando especificamente serviços da AWS](/docs/new-relic-control/pipeline-control/aws-alb-for-gateway)