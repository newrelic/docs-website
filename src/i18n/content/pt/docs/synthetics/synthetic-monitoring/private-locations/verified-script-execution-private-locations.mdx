---
title: Execução de script verificada para localização privada
tags:
  - Synthetics
  - Synthetic monitoring
  - Private locations
metaDescription: 'For added security, enable verified script execution to require a passphrase before assigning jobs to your minion in New Relic.'
freshnessValidatedDate: never
translationType: machine
---

Para evitar que outras pessoas usem seus gerenciadores de tarefas minion privado ou Sintético para atribuir [navegador com script](/docs/synthetics/new-relic-synthetics/scripting-monitors/write-scripted-browsers) ou [testes de API](/docs/synthetics/new-relic-synthetics/scripting-monitors/write-api-tests), adicione execução de script verificada. Então, qualquer alteração em seu subordinado ou gerente de trabalho do Sintético exigirá uma senha que só você conhece.

A lista de localização privada na interface do New Relic inclui uma coluna <DoNotTranslate>**VSE**</DoNotTranslate> . Uma fechadura <Icon name="fe-lock"/> O ícone indica que a execução verificada do script foi configurada para esse local.

## Segurança da senha [#pass-phrase-security]

Certifique-se de proteger a senha do seu minion privado. Nenhum outro usuário da sua conta pode visualizá-lo e ele nunca é armazenado no coletor da New Relic.

<Callout variant="important">
  Esta restrição inclui o pessoal de suporte da New Relic. Como nosso coletor nunca armazena sua senha, nossa equipe de suporte não pode recuperar ou redefinir sua senha para você. Se você esquecer sua senha, precisará alterá-la na [página do minion <DoNotTranslate>**Overview**</DoNotTranslate> ](/docs/synthetics/new-relic-synthetics/private-locations/install-configure-private-minions#configure)e, em seguida, atualizar cada monitor atribuído a essa localização privada.
</Callout>

## Habilitar execução de script verificada [#cpm-sjm]

Faça o seguinte para ativar a execução de script verificada para minion privado em contêiner. Certifique-se de registrar sua senha em um local seguro.

1. Vá para <DoNotTranslate>**[one.newrelic.com > Synthetic monitoring > Private locations](https://one.newrelic.com/synthetics-nerdlets/private-location-list)**</DoNotTranslate> > (selecione uma localização privada). Selecione o ícone de reticências da localização privada e clique em <DoNotTranslate>**Edit**</DoNotTranslate>. Habilite a execução verificada do script e salve.

2. Defina a senha em seu ambiente Docker ou Kubernetes para o [minion privado em contêiner](https://docs.newrelic.com/docs/synthetics/synthetic-monitoring/private-locations/containerized-private-minion-cpm-configuration/#environment-variables) ou [para o gerenciador de tarefas Sintético](https://docs.newrelic.com/docs/synthetics/synthetic-monitoring/private-locations/job-manager-configuration/#environment-variables):

   * <DoNotTranslate>
       **Docker:**
     </DoNotTranslate>

     Adicione a variável de ambiente `MINION_VSE_PASSPHRASE` ao comando Docker `run` usado para iniciar seu minion privado:

     ```
     docker run \
       --name YOUR_CONTAINER_NAME \
       -e MINION_PRIVATE_LOCATION_KEY="YOUR_PRIVATE_LOCATION_KEY" \
       -e MINION_VSE_PASSPHRASE="YOUR_PASSPHRASE" \
       -v /tmp:/tmp:rw \
       -v /var/run/docker.sock:/var/run/docker.sock:rw \
       -d \
       --restart unless-stopped \
       quay.io/newrelic/synthetics-minion:latest
     ```

     Adicione a variável de ambiente `VSE_PASSPHRASE` ao comando Docker `run` usado para iniciar seu gerenciador de tarefas Sintético:

     ```
     docker run \
         --name YOUR_CONTAINER_NAME \
         -e "PRIVATE_LOCATION_KEY=YOUR_PRIVATE_LOCATION_KEY" \
         -e VSE_PASSPHRASE="YOUR_PASSPHRASE" \
         -v /var/run/docker.sock:/var/run/docker.sock:rw \
         -d \
         --restart unless-stopped \
         newrelic/synthetics-job-manager:latest
     ```

   * <DoNotTranslate>
       **Kubernetes:**
     </DoNotTranslate>

     Defina o valor `synthetics.minionVsePassphrase` no comando `install` ou `upgrade` do Helm:

     ```
     helm install YOUR_CPM_NAME YOUR_REPO_NAME/synthetics-minion -n YOUR_NAMESPACE --set synthetics.privateLocationKey=YOUR_PRIVATE_LOCATION_KEY --set synthetics.minionVsePassphrase=YOUR_PASSPHRASE
     ```

     Defina o valor `synthetics.vsePassphrase` no comando `install` ou `upgrade` do Helm:

     ```
     helm install YOUR_JOB_MANAGER_NAME YOUR_REPO_NAME/synthetics-job-manager -n YOUR_NAMESPACE --set synthetics.privateLocationKey=YOUR_PRIVATE_LOCATION_KEY --set synthetics.vsePassphrase=YOUR_PASSPHRASE
     ```

3. Na interface do Sintético, selecione um monitor atribuído a esse local. Em seguida, selecione <DoNotTranslate>**Settings > General**</DoNotTranslate>.

4. Na lista de localização privada, selecione sua localização, digite sua senha e salve. Certifique-se de registrar sua senha em um local seguro.

5. Repita as etapas 3 e 4 para cada monitor que deseja atribuir à sua localização.

## Altere sua senha [#changing-pass-phrase]

Para alterar sua senha, faça o seguinte. Certifique-se de registrar sua senha em um local seguro.

1. Atualize a senha em seu ambiente Docker ou Kubernetes para o [minion privado em contêiner](https://docs.newrelic.com/docs/synthetics/synthetic-monitoring/private-locations/containerized-private-minion-cpm-configuration/#environment-variables) ou para [o gerenciador de tarefas Sintético](https://docs.newrelic.com/docs/synthetics/synthetic-monitoring/private-locations/job-manager-configuration/#environment-variables):

   * <DoNotTranslate>
       **Docker:**
     </DoNotTranslate>

     Pare seu minion atual. Em seguida, use o comando Docker `run` para iniciar um novo minion com sua variável de ambiente `MINION_VSE_PASSPHRASE` atualizada:

     ```
     docker run \
       --name YOUR_CONTAINER_NAME \
       -e MINION_PRIVATE_LOCATION_KEY="YOUR_PRIVATE_LOCATION_KEY" \
       -e MINION_VSE_PASSPHRASE="YOUR_PASSPHRASE" \
       -v /tmp:/tmp:rw \
       -v /var/run/docker.sock:/var/run/docker.sock:rw \
       -d \
       --restart unless-stopped \
       quay.io/newrelic/synthetics-minion:latest
     ```

     Pare o seu atual gerenciador de tarefas Sintético. Em seguida, use o comando Docker `run` para iniciar um novo gerenciador de tarefas Sintético com sua variável de ambiente `VSE_PASSPHRASE` atualizada:

     ```
     docker run \
         --name YOUR_CONTAINER_NAME \
         -e "PRIVATE_LOCATION_KEY=YOUR_PRIVATE_LOCATION_KEY" \
         -e VSE_PASSPHRASE="YOUR_PASSPHRASE" \
         -v /var/run/docker.sock:/var/run/docker.sock:rw \
         -d \
         --restart unless-stopped \
         newrelic/synthetics-job-manager:latest
     ```

   * <DoNotTranslate>
       **Kubernetes:**
     </DoNotTranslate>

     Use o comando `upgrade` do Helm para definir seu valor `synthetics.minionVsePassphrase` atualizado:

     ```
     helm upgrade YOUR_CPM_NAME YOUR_REPO_NAME/synthetics-minion -n YOUR_NAMESPACE --set synthetics.privateLocationKey=YOUR_PRIVATE_LOCATION_KEY --set synthetics.minionVsePassphrase=YOUR_PASSPHRASE
     ```

     Use o comando `upgrade` do Helm para definir seu valor `synthetics.vsePassphrase` atualizado:

     ```
     helm install YOUR_JOB_MANAGER_NAME YOUR_REPO_NAME/synthetics-job-manager -n YOUR_NAMESPACE --set synthetics.privateLocationKey=YOUR_PRIVATE_LOCATION_KEY --set synthetics.vsePassphrase=YOUR_PASSPHRASE
     ```

2. Vá para <DoNotTranslate>**[one.newrelic.com > Synthetic monitoring](https://one.newrelic.com/synthetics-nerdlets)**</DoNotTranslate> > (clique no monitor atribuído) > <DoNotTranslate>**Settings > General**</DoNotTranslate>.

3. Na lista de localização privada, selecione sua localização, digite sua nova senha e salve.

4. Repita as etapas 2 e 3 para cada monitor atribuído ao seu local.

## Desabilitar execução de script verificada [#disabling]

Para desabilitar a execução de script verificada para minion privado em contêiner:

1. Remova a senha em seu ambiente Docker ou Kubernetes:

   * <DoNotTranslate>
       **Docker:**
     </DoNotTranslate>

     Pare seu contêiner de minion atual. Em seguida, use o comando Docker `run` para iniciar um novo minion sem a variável de ambiente `MINION_VSE_PASSPHRASE`:

     ```
     docker run \
       --name YOUR_CONTAINER_NAME \
       -e "MINION_PRIVATE_LOCATION_KEY=YOUR_PRIVATE_LOCATION_KEY" \
       -v /tmp:/tmp:rw \
       -v /var/run/docker.sock:/var/run/docker.sock:rw \
       -d \
       --restart unless-stopped \
       quay.io/newrelic/synthetics-minion:latest
     ```

     Pare seu contêiner atual do gerenciador de tarefas Sintético. Em seguida, use o comando Docker `run` para iniciar um novo minion sem a variável de ambiente `VSE_PASSPHRASE`:

     ```
     docker run \
         --name YOUR_CONTAINER_NAME \
         -e "PRIVATE_LOCATION_KEY=YOUR_PRIVATE_LOCATION_KEY" \
         -e VSE_PASSPHRASE="YOUR_PASSPHRASE" \
         -v /var/run/docker.sock:/var/run/docker.sock:rw \
         -d \
         --restart unless-stopped \
         newrelic/synthetics-job-manager:latest
     ```

   * <DoNotTranslate>
       **Kubernetes:**
     </DoNotTranslate>

     Use o comando `upgrade` do Helm sem o valor `--set synthetics.minionVsePassphrase` :

     ```
     helm upgrade YOUR_CPM_NAME YOUR_REPO_NAME/synthetics-minion -n YOUR_NAMESPACE --set synthetics.privateLocationKey=YOUR_PRIVATE_LOCATION_KEY
     ```

     Use o comando `upgrade` do Helm sem o valor `--set synthetics.vsePassphrase` :

     ```
     helm install YOUR_JOB_MANAGER_NAME YOUR_REPO_NAME/synthetics-job-manager -n YOUR_NAMESPACE --set synthetics.privateLocationKey=YOUR_PRIVATE_LOCATION_KEY
     ```

2. Vá para <DoNotTranslate>**[one.newrelic.com > Synthetic monitoring > Private locations](https://one.newrelic.com/synthetics-nerdlets/private-location-list)**</DoNotTranslate> (selecione uma localização privada). Desmarque a caixa de seleção <DoNotTranslate>**Enable verified script execution**</DoNotTranslate> e salve.

## Outro (legado) [#enabling]

Se você não estiver usando o minion privado em contêiner, faça o seguinte para ativar a execução verificada do script. Certifique-se de registrar sua senha em um local seguro.

1. No seu navegador da web, navegue até a página do minion

   <DoNotTranslate>**Overview**</DoNotTranslate>

   em `https://MINION_IP_ADDRESS` (por exemplo, `https://1.2.3.4`).

2. Selecione o lápis

   <Icon name="fe-edit-2"/>

   ícone e selecione

   <DoNotTranslate>**Advanced settings (optional)**</DoNotTranslate>

   .

3. Marque a caixa de seleção

   <DoNotTranslate>**Verified script execution**</DoNotTranslate>

   . Digite uma senha e salve. Grave sua senha em um local seguro.

4. Vá para

   <DoNotTranslate>**[one.newrelic.com > Synthetic monitoring > Private locations](https://one.newrelic.com/synthetics-nerdlets/private-location-list)**</DoNotTranslate>

   (selecione uma localização privada). Selecione o ícone de reticências da localização privada e clique em

   <DoNotTranslate>**Edit**</DoNotTranslate>

   . Ative a execução verificada do script e salve.

5. Na interface do Sintético, selecione um monitor atribuído a esse local. Em seguida, selecione

   <DoNotTranslate>**Settings > General**</DoNotTranslate>

   .

6. Na lista de localização privada, selecione sua localização, digite sua senha e salve.

7. Repita as etapas 4 a 6 para cada monitor que deseja atribuir à sua localização.

Para alterar sua senha ou desativar a execução de script verificado, siga o mesmo processo básico para acessar o endereço IP do seu minion e atualizar seu <DoNotTranslate>**Advanced settings**</DoNotTranslate>. Em seguida, vá para <DoNotTranslate>**[one.newrelic.com](https://one.newrelic.com/all-capabilities)**</DoNotTranslate> para concluir o processo.