---
title: Referência de métricas e atributos do NGINX OpenTelemetry
metaDescription: 'Complete reference of NGINX metrics collected via OpenTelemetry, including resource attributes for both on-host and Kubernetes deployments.'
freshnessValidatedDate: never
translationType: machine
---

Esta referência abrange todas as métricas e atributos coletados pelo receptor OpenTelemetry NGINX, aplicável a implantações on-host e Kubernetes.

## Métricas principais do NGINX [#core-metrics]

O [nginxreceiver](https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/nginxreceiver) do OpenTelemetry Collector Contrib coleta as seguintes métricas do módulo de status stub do NGINX:

<table>
  <thead>
    <tr>
      <th style={{ width: "350px" }}>
        Métrica
      </th>

      <th>
        Descrição
      </th>

      <th>
        Tipo
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `nginx.connections_accepted`
      </td>

      <td>
        O número total de conexões de clientes aceitas. Use isso para rastrear as taxas de aceitação de conexão ao longo do tempo.
      </td>

      <td>
        Soma
      </td>
    </tr>

    <tr>
      <td>
        `nginx.connections_handled`
      </td>

      <td>
        O número total de conexões tratadas. Geralmente, o valor do parâmetro é o mesmo que nginx.connections\_accepted a menos que alguns limites de recursos tenham sido atingidos (por exemplo, o limite worker\_connections). Uma lacuna entre aceito e tratado sugere restrições de recursos.
      </td>

      <td>
        Soma
      </td>
    </tr>

    <tr>
      <td>
        `nginx.connections_current`
      </td>

      <td>
        O número atual de conexões nginx por estado. Os estados incluem: <strong>active</strong> (total de conexões ativas), <strong>reading</strong> (lendo os cabeçalhos da requisição), <strong>writing</strong> (escrevendo respostas), <strong>waiting</strong> (conexões keep-alive aguardando a próxima requisição).
      </td>

      <td>
        Soma
      </td>
    </tr>

    <tr>
      <td>
        `nginx.requests`
      </td>

      <td>
        Número total de solicitações feitas ao servidor desde que foi iniciado. Use cálculos de taxa para derivar solicitações por segundo para monitoramento de desempenho.
      </td>

      <td>
        Soma
      </td>
    </tr>
  </tbody>
</table>

**Dicas de planejamento de capacidade:**

* Altas `waiting` conexões podem indicar oportunidades de ajuste de keep-alive
* A diferença entre `accepted` e `handled` conexões sugere restrições de recursos
* As taxas de requisição para conexão ajudam a otimizar as configurações do worker

## Atributos de recurso [#resource-attributes]

Os atributos de recurso fornecem contexto sobre sua implantação do NGINX e variam dependendo se você está usando a implantação no host ou no Kubernetes.

### Atributo comum [#common-attributes]

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        Atributo
      </th>

      <th style={{ width: "350px" }}>
        Descrição
      </th>

      <th>
        Valores de exemplo
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `state`
      </td>

      <td>
        O estado de uma conexão (aplicável à métrica `nginx.connections_current`)
      </td>

      <td>
        `active`, `reading`, `writing`, `waiting`
      </td>
    </tr>

    <tr>
      <td>
        `nginx.server.endpoint`
      </td>

      <td>
        A URL do endpoint de status stub do NGINX
      </td>

      <td>
        `http://localhost:8080/stub_status`
      </td>
    </tr>
  </tbody>
</table>

### Atributos de implantação no host [#on-host-attributes]

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        Atributo
      </th>

      <th style={{ width: "350px" }}>
        Descrição
      </th>

      <th>
        Valores de exemplo
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `nginx.deployment.name`
      </td>

      <td>
        Um nome exclusivo para identificar esta implantação do NGINX
      </td>

      <td>
        `production-web-01`, `staging-api`
      </td>
    </tr>

    <tr>
      <td>
        `nginx.display.name`
      </td>

      <td>
        Um nome amigável para exibição que combina o prefixo &quot;servidor&quot; com o nome da implantação
      </td>

      <td>
        `server:production-web-01`
      </td>
    </tr>

    <tr>
      <td>
        `host.name`
      </td>

      <td>
        O nome do host do sistema onde o NGINX está em execução
      </td>

      <td>
        `web-server-01.example.com`
      </td>
    </tr>

    <tr>
      <td>
        `host.id`
      </td>

      <td>
        O identificador exclusivo do sistema host
      </td>

      <td>
        `i-1234567890abcdef0`
      </td>
    </tr>

    <tr>
      <td>
        `logtype`
      </td>

      <td>
        O tipo de log que está sendo coletado (aplicável apenas a logs). Usado pelas [regras de análise](https://docs.newrelic.com/docs/logs/ui-data/built-log-parsing-rules/#nginx) integradas do New Relic. Este atributo está disponível somente quando o encaminhamento de log está ativado.
      </td>

      <td>
        `nginx` (para logs de acesso), `nginx-error` (para logs de erro)
      </td>
    </tr>
  </tbody>
</table>

### Atributos de implantação do Kubernetes [#kubernetes-attributes]

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        Atributo
      </th>

      <th style={{ width: "350px" }}>
        Descrição
      </th>

      <th>
        Valores de exemplo
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `k8s.cluster.name`
      </td>

      <td>
        O nome do cluster Kubernetes
      </td>

      <td>
        `nginx-cluster`, `production-k8s`
      </td>
    </tr>

    <tr>
      <td>
        `k8s.namespace.name`
      </td>

      <td>
        O namespace do Kubernetes onde o pod do NGINX está sendo executado
      </td>

      <td>
        `default`, `web-services`, `production`
      </td>
    </tr>

    <tr>
      <td>
        `k8s.pod.name`
      </td>

      <td>
        O nome do pod do Kubernetes executando o NGINX
      </td>

      <td>
        `nginx-deployment-7d4b8c6f9-x5z8w`
      </td>
    </tr>

    <tr>
      <td>
        `nginx.deployment.name`
      </td>

      <td>
        Definido para o nome do pod para implantações do Kubernetes
      </td>

      <td>
        `nginx-deployment-7d4b8c6f9-x5z8w`
      </td>
    </tr>

    <tr>
      <td>
        `nginx.display.name`
      </td>

      <td>
        Um nome de exibição abrangente, incluindo informações do cluster, namespace e pod
      </td>

      <td>
        `server:k8s:nginx-cluster:default:pod:nginx-deployment-7d4b8c6f9-x5z8w:nginx:8080`
      </td>
    </tr>
  </tbody>
</table>

## Detalhes da coleta de métricas [#collection-details]

### Frequência de coleta

* **Intervalo padrão**: 30 segundos
* **Configurável**: Pode ser ajustado na configuração do OpenTelemetry Collector

### Fonte de dados

Todas as métricas são coletadas do [módulo stub\_status](https://nginx.org/en/docs/http/ngx_http_stub_status_module.html) do NGINX, que deve ser habilitado e configurado para expor um endpoint HTTP.

### Tipos métricos

* **Somar métricas**: Valores cumulativos que representam totais ao longo do tempo
* **Cálculos de taxa**: Use a função `rate()` do New Relic para converter métricas cumulativas em taxas por segundo para monitoramento

## Documentação relacionada [#related-docs]

**Guias de configuração:**

* [Monitorar o NGINX em ambientes auto-hospedados](/docs/opentelemetry/nginx/nginx-otel-host/) - Configuração completa para implantações no host
* [Monitore o NGINX no Kubernetes](/docs/opentelemetry/nginx/nginx-otel-kubernetes/) - Configuração completa para implantações do Kubernetes

**Uso de dados:**

* [Encontre e consulte seus dados do NGINX](/docs/opentelemetry/nginx/find-and-query-your-data/) - Dashboards, consultas NRQL e alertas

**Referência técnica:**

* [Documentação do receptor NGINX](https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/receiver/nginxreceiver/documentation.md) - Detalhes técnicos do OpenTelemetry