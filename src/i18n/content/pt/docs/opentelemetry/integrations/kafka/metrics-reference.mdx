---
title: Referência de métricas do OpenTelemetry Kafka
tags:
  - Integrations
  - OpenTelemetry
  - Kafka
  - Metrics
metaDescription: 'Complete reference for Kafka metrics collected via OpenTelemetry including Kafka metrics receiver, JMX metrics, and client metrics.'
freshnessValidatedDate: never
translationType: machine
---

This page documents the metrics collected when monitoring Apache Kafka with OpenTelemetry. Metrics are collected via the [Kafka metrics receiver](https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/kafkametricsreceiver), JMX metrics (from OpenTelemetry Java Agent or Prometheus JMX Exporter), and [OpenTelemetry Java agent](https://opentelemetry.io/docs/languages/java/automatic/) for client-side metrics.

## Métodos de coleta de métricas [#collection-methods]

OpenTelemetry Kafka monitoring uses two complementary collection methods:

* **[Coletor de métricas Kafka](https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/kafkametricsreceiver)**: Conecta-se à porta de bootstrap do Kafka para coletar métricas de cluster, tópico, partição e grupo de consumidores
* **JMX metrics**: Collected via OpenTelemetry Java Agent (self-hosted) or Prometheus JMX Exporter (Kubernetes) to gather detailed broker metrics and JVM metrics

## Métricas do receptor de métricas do Kafka [#kafka-metrics-receiver]

Essas métricas são coletadas de corretores Kafka usando o protocolo Kafka (porta de bootstrap). Com base nos [metadados do kafkametricsreceiver](https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/receiver/kafkametricsreceiver/metadata.yaml), com algumas métricas desativadas por padrão ou em configurações típicas.

<CollapserGroup>
  <Collapser id="cluster-metrics" title="Métrica de cluster">
    <table>
      <thead>
        <tr>
          <th style={{ width: "300px" }}>
            Nome da métrica
          </th>

          <th>
            Descrição
          </th>

          <th>
            Tipo
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `kafka.brokers`
          </td>

          <td>
            Número total de corretores no cluster
          </td>

          <td>
            Medidor (int)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="topic-metrics" title="Métricas do tópico">
    <table>
      <thead>
        <tr>
          <th style={{ width: "300px" }}>
            Nome da métrica
          </th>

          <th>
            Descrição
          </th>

          <th>
            Tipo
          </th>

          <th>
            Atributo
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `kafka.topic.partitions`
          </td>

          <td>
            Número de partições no tópico
          </td>

          <td>
            Soma (int)
          </td>

          <td>
            tema
          </td>
        </tr>

        <tr>
          <td>
            `kafka.topic.min_insync_replicas`
          </td>

          <td>
            Réplicas mínimas em sincronia de um tópico
          </td>

          <td>
            Medidor (int)
          </td>

          <td>
            tema
          </td>
        </tr>

        <tr>
          <td>
            `kafka.topic.replication_factor`
          </td>

          <td>
            Fator de replicação de um tópico
          </td>

          <td>
            Medidor (int)
          </td>

          <td>
            tema
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="partition-metrics" title="Métricas da partição">
    <table>
      <thead>
        <tr>
          <th style={{ width: "300px" }}>
            Nome da métrica
          </th>

          <th>
            Descrição
          </th>

          <th>
            Tipo
          </th>

          <th>
            Atributo
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `kafka.partition.replicas_in_sync`
          </td>

          <td>
            Número de réplicas em sincronia para uma partição
          </td>

          <td>
            Soma (int)
          </td>

          <td>
            tópico, partição
          </td>
        </tr>

        <tr>
          <td>
            `kafka.partition.replicas_in_sync.total`
          </td>

          <td>
            Número total de réplicas sincronizadas agregadas em todas as partições para um tópico
          </td>

          <td>
            Soma (int)
          </td>

          <td>
            tema
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="consumer-group-metrics" title="Métricas do grupo de consumidores">
    <table>
      <thead>
        <tr>
          <th style={{ width: "300px" }}>
            Nome da métrica
          </th>

          <th>
            Descrição
          </th>

          <th>
            Tipo
          </th>

          <th>
            Atributo
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `kafka.consumer_group.members`
          </td>

          <td>
            Contagem de membros no grupo de consumidores
          </td>

          <td>
            Soma (int)
          </td>

          <td>
            grupo
          </td>
        </tr>

        <tr>
          <td>
            `kafka.consumer_group.offset`
          </td>

          <td>
            Deslocamento atual do grupo de consumidores na partição do tópico
          </td>

          <td>
            Medidor (int)
          </td>

          <td>
            grupo, tópico, partição
          </td>
        </tr>

        <tr>
          <td>
            `kafka.consumer_group.offset_sum`
          </td>

          <td>
            Soma do deslocamento do grupo de consumidores em todas as partições do tópico
          </td>

          <td>
            Medidor (int)
          </td>

          <td>
            grupo, tópico
          </td>
        </tr>

        <tr>
          <td>
            `kafka.consumer_group.lag`
          </td>

          <td>
            Atraso aproximado atual do grupo de consumidores na partição do tópico
          </td>

          <td>
            Medidor (int)
          </td>

          <td>
            grupo, tópico, partição
          </td>
        </tr>

        <tr>
          <td>
            `kafka.consumer_group.lag_sum`
          </td>

          <td>
            Soma aproximada atual do atraso do grupo de consumidores em todas as partições do tópico
          </td>

          <td>
            Medidor (int)
          </td>

          <td>
            grupo, tópico
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

## JMX metrics [#jmx-metrics]

JMX metrics provide detailed Kafka broker and JVM telemetry. These metrics are collected using:

* **Self-hosted Kafka**: [OpenTelemetry Java Agent](/docs/opentelemetry/integrations/kafka/self-hosted#jmx-config) with custom JMX configuration
* **Kubernetes (Strimzi)**: [Prometheus JMX Exporter](/docs/opentelemetry/integrations/kafka/kubernetes-strimzi#configure-jmx-exporter) with New Relic custom configuration

Both methods collect the same set of Kafka broker and JVM metrics documented below:

<CollapserGroup>
  <Collapser id="jmx-kafka-metrics" title="Kafka broker metrics">
    These metrics provide comprehensive Kafka broker telemetry including cluster health, broker performance, and per-topic metrics.

    ### Cluster-wide metrics

    Essas métricas são coletadas do broker do controlador e fornecem informações em todo o cluster:

    <table>
      <thead>
        <tr>
          <th style={{ width: "350px" }}>
            Nome da métrica
          </th>

          <th>
            Descrição
          </th>

          <th>
            Tipo
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `kafka.partition.offline`
          </td>

          <td>
            O número de partições offline no cluster
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `kafka.leader.election.rate`
          </td>

          <td>
            A contagem de eleição do líder
          </td>

          <td>
            Contador
          </td>
        </tr>

        <tr>
          <td>
            `kafka.unclean.election.rate`
          </td>

          <td>
            Contagem de eleição de líder suja - o aumento indica falhas no broker
          </td>

          <td>
            Contador
          </td>
        </tr>

        <tr>
          <td>
            `kafka.cluster.topic.count`
          </td>

          <td>
            O número total de tópicos no cluster
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `kafka.cluster.partition.count`
          </td>

          <td>
            O número total de partições no cluster
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `kafka.broker.fenced.count`
          </td>

          <td>
            O número de brokers cercados no cluster
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `kafka.partition.non_preferred_leader`
          </td>

          <td>
            A contagem de partições de tópico para as quais o líder não é o líder preferido
          </td>

          <td>
            Medidor
          </td>
        </tr>
      </tbody>
    </table>

    ### Broker-level metrics

    <table>
      <thead>
        <tr>
          <th style={{ width: "350px" }}>
            Nome da métrica
          </th>

          <th>
            Descrição
          </th>

          <th>
            Tipo
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `kafka.message.count`
          </td>

          <td>
            O número de mensagens recebidas pelo broker
          </td>

          <td>
            Contador
          </td>
        </tr>

        <tr>
          <td>
            `kafka.request.count`
          </td>

          <td>
            O número de solicitações recebidas pelo broker
          </td>

          <td>
            Contador
          </td>
        </tr>

        <tr>
          <td>
            `kafka.request.failed`
          </td>

          <td>
            O número de solicitações com falha
          </td>

          <td>
            Contador
          </td>
        </tr>

        <tr>
          <td>
            `kafka.request.time.total`
          </td>

          <td>
            O tempo total gasto no processamento de solicitações (ms)
          </td>

          <td>
            Contador
          </td>
        </tr>

        <tr>
          <td>
            `kafka.request.time.avg`
          </td>

          <td>
            Tempo médio de processamento da solicitação (ms)
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `kafka.request.time.50p`
          </td>

          <td>
            Tempo de solicitação do percentil 50 (ms)
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `kafka.request.time.99p`
          </td>

          <td>
            Tempo de solicitação no percentil 99 (ms)
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `kafka.network.io`
          </td>

          <td>
            Bytes recebidos ou enviados pelo broker por segundo (inclui o atributo de direção: entrada/saída)
          </td>

          <td>
            Contador
          </td>
        </tr>

        <tr>
          <td>
            `kafka.purgatory.size`
          </td>

          <td>
            O número de solicitações aguardando no purgatório (operações de produção e busca)
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `kafka.partition.count`
          </td>

          <td>
            O número de partições no broker
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `kafka.partition.under_replicated`
          </td>

          <td>
            O número de partições sub-replicadas neste corretor
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `kafka.isr.operation.count`
          </td>

          <td>
            Operações de réplica em sincronia (reduzir ou expandir)
          </td>

          <td>
            Contador
          </td>
        </tr>

        <tr>
          <td>
            `kafka.lag.max`
          </td>

          <td>
            Lag máximo entre réplicas seguidoras e líderes
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `kafka.controller.active.count`
          </td>

          <td>
            Se este broker é o controlador ativo (0 ou 1)
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `kafka.logs.flush.count`
          </td>

          <td>
            Contagem de flush de log
          </td>

          <td>
            Contador
          </td>
        </tr>

        <tr>
          <td>
            `kafka.logs.flush.time.50p`
          </td>

          <td>
            Tempo de liberação de log - percentil 50 (ms)
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `kafka.logs.flush.time.99p`
          </td>

          <td>
            Tempo de liberação de log - percentil 99 (ms)
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `kafka.partition.under_min_isr`
          </td>

          <td>
            O número de partições onde o número de réplicas em sincronia é menor que o mínimo
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `kafka.broker.uptime`
          </td>

          <td>
            Tempo de atividade do broker (ms)
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `kafka.broker.leader.count`
          </td>

          <td>
            Número de partições para as quais este corretor é o líder
          </td>

          <td>
            Medidor
          </td>
        </tr>
      </tbody>
    </table>

    **Atributos:** Muitas métricas incluem o atributo `type` indicando o tipo de solicitação (por exemplo, fetch, produce) ou `state` para operações ISR (por exemplo, shrink, expand) ou `direction` para E/S de rede (entrada, saída).

    ### Métricas por tópico

    <table>
      <thead>
        <tr>
          <th style={{ width: "350px" }}>
            Nome da métrica
          </th>

          <th>
            Descrição
          </th>

          <th>
            Tipo
          </th>

          <th>
            Atributo
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `kafka.prod.msg.count`
          </td>

          <td>
            O número de mensagens recebidas por tópico
          </td>

          <td>
            Contador
          </td>

          <td>
            tema
          </td>
        </tr>

        <tr>
          <td>
            `kafka.topic.io`
          </td>

          <td>
            Os bytes recebidos ou enviados por tópico
          </td>

          <td>
            Contador
          </td>

          <td>
            tópico, direção (entrada/saída)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="jmx-jvm-metrics" title="Métrica JVM">
    <table>
      <thead>
        <tr>
          <th style={{ width: "350px" }}>
            Nome da métrica
          </th>

          <th>
            Descrição
          </th>

          <th>
            Tipo
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `jvm.memory.heap.used`
          </td>

          <td>
            Memória de heap atual usada (bytes)
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `jvm.memory.heap.max`
          </td>

          <td>
            Memória de heap máxima disponível (bytes)
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `jvm.memory.heap.committed`
          </td>

          <td>
            Memória de heap confirmada (bytes)
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `jvm.gc.collections.count`
          </td>

          <td>
            Número total de coletas de lixo que ocorreram
          </td>

          <td>
            Contador
          </td>
        </tr>

        <tr>
          <td>
            `jvm.gc.collections.elapsed`
          </td>

          <td>
            O tempo decorrido aproximado de coleta acumulada (ms)
          </td>

          <td>
            Contador
          </td>
        </tr>

        <tr>
          <td>
            `jvm.thread.count`
          </td>

          <td>
            Contagem total de threads (intervalo típico do Kafka de 100 a 300 threads)
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `jvm.system.cpu.load_1m`
          </td>

          <td>
            Média de carga do sistema (1 minuto) - alerta se for maior que a contagem da CPU
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `jvm.cpu.count`
          </td>

          <td>
            Número de processadores disponíveis
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `jvm.cpu.recent_utilization`
          </td>

          <td>
            Utilização recente da CPU para o processo JVM (0,0 a 1,0)
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `jvm.system.cpu.utilization`
          </td>

          <td>
            Utilização recente da CPU para todo o sistema (0,0 a 1,0)
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `jvm.file_descriptor.count`
          </td>

          <td>
            Número de descritores de arquivo abertos - alerta se for maior que 80% do ulimit
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `jvm.class.count`
          </td>

          <td>
            Contagem de classes atualmente carregadas
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `jvm.memory.pool.used`
          </td>

          <td>
            Uso do pool de memória por geração (G1 Old Gen, Eden, Survivor) em bytes
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `jvm.memory.pool.max`
          </td>

          <td>
            Tamanho máximo do pool de memória (bytes)
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `jvm.memory.pool.used_after_last_gc`
          </td>

          <td>
            Memória usada após o último GC - mostra a linha de base de memória retida (bytes)
          </td>

          <td>
            Medidor
          </td>
        </tr>
      </tbody>
    </table>

    **Atributos:** As métricas da JVM incluem atributos como `name` (para nomes de coletores GC ou nomes de pool de memória).
  </Collapser>
</CollapserGroup>

## Métricas do cliente Kafka (agente OpenTelemetry Java) [#kafka-client-metrics]

Essas métricas são coletadas de aplicativos produtores e consumidores Kafka instrumentados com o [agente OpenTelemetry Java](https://opentelemetry.io/docs/languages/java/automatic/) com instrumentação Kafka ativada. Estes fornecem visibilidade do lado do cliente nas interações do aplicativo com os brokers Kafka e complementam as métricas do lado do broker, fornecendo a perspectiva do aplicativo.

<CollapserGroup>
  <Collapser id="producer-metrics" title="Métricas do produtor">
    ### Métricas de conexão e rede

    | Nome da métrica                            | Descrição                            | Atributo           |
    | ------------------------------------------ | ------------------------------------ | ------------------ |
    | `kafka.producer.connection_count`          | Número de conexões ativas            | client-id          |
    | `kafka.producer.connection_creation_rate`  | Taxa de novas conexões estabelecidas | client-id          |
    | `kafka.producer.connection_creation_total` | Total de conexões criadas            | client-id          |
    | `kafka.producer.connection_close_rate`     | Taxa de conexões fechadas            | client-id          |
    | `kafka.producer.network_io_rate`           | Taxa de operações de rede            | client-id          |
    | `kafka.producer.network_io_total`          | Total de operações de rede           | client-id          |
    | `kafka.producer.outgoing_byte_rate`        | Taxa de bytes de saída               | client-id, node-id |
    | `kafka.producer.outgoing_byte_total`       | Total de bytes de saída              | client-id, node-id |

    ### Métricas de solicitação e resposta

    | Nome da métrica                      | Descrição                           | Atributo           |
    | ------------------------------------ | ----------------------------------- | ------------------ |
    | `kafka.producer.request_rate`        | Taxa de solicitações enviadas       | client-id, node-id |
    | `kafka.producer.request_total`       | Total de solicitações enviadas      | client-id, node-id |
    | `kafka.producer.request_size_avg`    | Tamanho médio da solicitação        | client-id, node-id |
    | `kafka.producer.request_size_max`    | Tamanho máximo da solicitação       | client-id, node-id |
    | `kafka.producer.request_latency_avg` | Latência média da solicitação (ms)  | client-id, node-id |
    | `kafka.producer.request_latency_max` | Latência máxima da solicitação (ms) | client-id, node-id |
    | `kafka.producer.response_rate`       | Taxa de respostas recebidas         | client-id, node-id |
    | `kafka.producer.response_total`      | Total de respostas recebidas        | client-id, node-id |
    | `kafka.producer.requests_in_flight`  | Número de solicitações em andamento | client-id          |

    ### Registrar métricas

    | Nome da métrica                          | Descrição                                                    | Atributo          |
    | ---------------------------------------- | ------------------------------------------------------------ | ----------------- |
    | `kafka.producer.record_send_rate`        | Taxa de registros enviados                                   | client-id, tópico |
    | `kafka.producer.record_send_total`       | Total de registros enviados                                  | client-id, tópico |
    | `kafka.producer.record_error_rate`       | Taxa de erros de envio de registros                          | client-id, tópico |
    | `kafka.producer.record_error_total`      | Total de erros de envio de registro                          | client-id, tópico |
    | `kafka.producer.record_retry_rate`       | Taxa de novas tentativas de registro                         | client-id, tópico |
    | `kafka.producer.record_retry_total`      | Total de tentativas de registro                              | client-id, tópico |
    | `kafka.producer.record_size_avg`         | Tamanho médio do registro                                    | client-id         |
    | `kafka.producer.record_size_max`         | Tamanho máximo do registro                                   | client-id         |
    | `kafka.producer.record_queue_time_avg`   | Tempo médio que os registros passam no buffer de envio (ms)  | client-id         |
    | `kafka.producer.record_queue_time_max`   | Tempo máximo que os registros gastam no buffer de envio (ms) | client-id         |
    | `kafka.producer.records_per_request_avg` | Média de registros por solicitação                           | client-id         |

    ### Métricas de throughput

    | Nome da métrica                       | Descrição                 | Atributo          |
    | ------------------------------------- | ------------------------- | ----------------- |
    | `kafka.producer.byte_rate`            | Taxa de bytes produzidos  | client-id, tópico |
    | `kafka.producer.byte_total`           | Total de bytes produzidos | client-id, tópico |
    | `kafka.producer.compression_rate`     | Taxa média de compressão  | client-id, tópico |
    | `kafka.producer.compression_rate_avg` | Taxa média de compressão  | client-id         |

    ### Métricas de lote

    | Nome da métrica                    | Descrição                | Atributo  |
    | ---------------------------------- | ------------------------ | --------- |
    | `kafka.producer.batch_size_avg`    | Tamanho médio do lote    | client-id |
    | `kafka.producer.batch_size_max`    | Tamanho máximo do lote   | client-id |
    | `kafka.producer.batch_split_rate`  | Taxa de divisões de lote | client-id |
    | `kafka.producer.batch_split_total` | Divisões de lote total   | client-id |

    ### Métricas do buffer

    | Nome da métrica                             | Descrição                                      | Atributo  |
    | ------------------------------------------- | ---------------------------------------------- | --------- |
    | `kafka.producer.buffer_total_bytes`         | Memória total do buffer                        | client-id |
    | `kafka.producer.buffer_available_bytes`     | Memória de buffer disponível                   | client-id |
    | `kafka.producer.buffer_exhausted_rate`      | Taxa de exaustão do buffer                     | client-id |
    | `kafka.producer.buffer_exhausted_total`     | Exaustões totais do buffer                     | client-id |
    | `kafka.producer.bufferpool_wait_ratio`      | Fração de tempo de espera por espaço no buffer | client-id |
    | `kafka.producer.bufferpool_wait_time_total` | Tempo total de espera por espaço no buffer     | client-id |

    ### Métricas de E/S

    | Nome da métrica                      | Descrição                         | Atributo  |
    | ------------------------------------ | --------------------------------- | --------- |
    | `kafka.producer.io_ratio`            | Fração de tempo gasto em E/S      | client-id |
    | `kafka.producer.io_time_ns_avg`      | Tempo médio de E/S (ns)           | client-id |
    | `kafka.producer.io_wait_time_ns_avg` | Tempo médio de espera de E/S (ns) | client-id |
    | `kafka.producer.io_wait_ratio`       | Fração de tempo esperando por E/S | client-id |
    | `kafka.producer.iotime_total`        | Tempo total de E/S                | client-id |
    | `kafka.producer.io_waittime_total`   | Tempo total de espera de E/S      | client-id |

    ### Métricas de limitação

    | Nome da métrica                            | Descrição                      | Atributo  |
    | ------------------------------------------ | ------------------------------ | --------- |
    | `kafka.producer.produce_throttle_time_avg` | Tempo médio de limitação (ms)  | client-id |
    | `kafka.producer.produce_throttle_time_max` | Tempo máximo de limitação (ms) | client-id |

    ### Métricas de autenticação

    | Nome da métrica                                            | Descrição                                      | Atributo  |
    | ---------------------------------------------------------- | ---------------------------------------------- | --------- |
    | `kafka.producer.successful_authentication_rate`            | Taxa de autenticações bem-sucedidas            | client-id |
    | `kafka.producer.successful_authentication_total`           | Total de autenticações bem-sucedidas           | client-id |
    | `kafka.producer.successful_authentication_no_reauth_total` | Autenticações bem-sucedidas sem reautenticação | client-id |
    | `kafka.producer.successful_reauthentication_rate`          | Taxa de reautenticações bem-sucedidas          | client-id |
    | `kafka.producer.successful_reauthentication_total`         | Total de reautenticações bem-sucedidas         | client-id |
    | `kafka.producer.failed_authentication_rate`                | Taxa de autenticações com falha                | client-id |
    | `kafka.producer.failed_authentication_total`               | Total de autenticações com falha               | client-id |
    | `kafka.producer.failed_reauthentication_rate`              | Taxa de falhas nas reautenticações             | client-id |
    | `kafka.producer.failed_reauthentication_total`             | Total de reautenticações com falha             | client-id |
    | `kafka.producer.reauthentication_latency_avg`              | Latência média de reautenticação (ms)          | client-id |
    | `kafka.producer.reauthentication_latency_max`              | Latência máxima de reautenticação (ms)         | client-id |

    ### Métricas diversas

    | Nome da métrica                  | Descrição                                     | Atributo  |
    | -------------------------------- | --------------------------------------------- | --------- |
    | `kafka.producer.metadata_age`    | Idade dos metadados atuais (segundos)         | client-id |
    | `kafka.producer.waiting_threads` | Número de threads aguardando espaço no buffer | client-id |
    | `kafka.producer.select_rate`     | Taxa de chamadas select                       | client-id |
    | `kafka.producer.select_total`    | Total de chamadas de seleção                  | client-id |
  </Collapser>

  <Collapser id="consumer-metrics" title="Métricas do consumidor">
    ### Métricas de conexão e rede

    | Nome da métrica                            | Descrição                            | Atributo           |
    | ------------------------------------------ | ------------------------------------ | ------------------ |
    | `kafka.consumer.connection_count`          | Número de conexões ativas            | client-id          |
    | `kafka.consumer.connection_creation_rate`  | Taxa de novas conexões estabelecidas | client-id          |
    | `kafka.consumer.connection_creation_total` | Total de conexões criadas            | client-id          |
    | `kafka.consumer.connection_close_rate`     | Taxa de conexões fechadas            | client-id          |
    | `kafka.consumer.connection_close_total`    | Total de conexões fechadas           | client-id          |
    | `kafka.consumer.network_io_rate`           | Taxa de operações de rede            | client-id          |
    | `kafka.consumer.network_io_total`          | Total de operações de rede           | client-id          |
    | `kafka.consumer.outgoing_byte_rate`        | Taxa de bytes de saída               | client-id, node-id |
    | `kafka.consumer.incoming_byte_rate`        | Taxa de bytes de entrada             | client-id, node-id |

    ### Métricas de solicitação e resposta

    | Nome da métrica                      | Descrição                           | Atributo           |
    | ------------------------------------ | ----------------------------------- | ------------------ |
    | `kafka.consumer.request_rate`        | Taxa de solicitações enviadas       | client-id, node-id |
    | `kafka.consumer.request_total`       | Total de solicitações enviadas      | client-id, node-id |
    | `kafka.consumer.request_size_avg`    | Tamanho médio da solicitação        | client-id, node-id |
    | `kafka.consumer.request_size_max`    | Tamanho máximo da solicitação       | client-id, node-id |
    | `kafka.consumer.request_latency_avg` | Latência média da solicitação (ms)  | client-id, node-id |
    | `kafka.consumer.request_latency_max` | Latência máxima da solicitação (ms) | client-id, node-id |
    | `kafka.consumer.response_rate`       | Taxa de respostas recebidas         | client-id, node-id |
    | `kafka.consumer.response_total`      | Total de respostas recebidas        | client-id, node-id |

    ### Métricas de consumo

    | Nome da métrica                          | Descrição                          | Atributo          |
    | ---------------------------------------- | ---------------------------------- | ----------------- |
    | `kafka.consumer.bytes_consumed_rate`     | Taxa de bytes consumidos           | client-id, tópico |
    | `kafka.consumer.bytes_consumed_total`    | Total de bytes consumidos          | client-id, tópico |
    | `kafka.consumer.records_consumed_rate`   | Taxa de registros consumidos       | client-id, tópico |
    | `kafka.consumer.records_consumed_total`  | Total de registros consumidos      | client-id, tópico |
    | `kafka.consumer.records_per_request_avg` | Média de registros por solicitação | client-id, tópico |

    ### Métricas de lag do consumidor

    | Nome da métrica                   | Descrição                           | Atributo                        |
    | --------------------------------- | ----------------------------------- | ------------------------------- |
    | `kafka.consumer.records_lag`      | Atraso atual no número de registros | partição, ID do cliente, tópico |
    | `kafka.consumer.records_lag_avg`  | Atraso médio do consumidor          | partição, ID do cliente, tópico |
    | `kafka.consumer.records_lag_max`  | Atraso máximo do consumidor         | partição, ID do cliente, tópico |
    | `kafka.consumer.records_lead`     | Líder atual em número de registros  | partição, ID do cliente, tópico |
    | `kafka.consumer.records_lead_avg` | Lead médio do consumidor            | partição, ID do cliente, tópico |
    | `kafka.consumer.records_lead_min` | Lead mínimo do consumidor           | partição, ID do cliente, tópico |

    ### Buscar métricas

    | Nome da métrica                          | Descrição                               | Atributo          |
    | ---------------------------------------- | --------------------------------------- | ----------------- |
    | `kafka.consumer.fetch_rate`              | Taxa de solicitações de busca           | client-id         |
    | `kafka.consumer.fetch_total`             | Total de solicitações de busca          | client-id         |
    | `kafka.consumer.fetch_size_avg`          | Tamanho médio da busca                  | client-id, tópico |
    | `kafka.consumer.fetch_size_max`          | Tamanho máximo da busca                 | client-id, tópico |
    | `kafka.consumer.fetch_latency_avg`       | Latência média de busca (ms)            | client-id         |
    | `kafka.consumer.fetch_latency_max`       | Latência máxima de busca (ms)           | client-id         |
    | `kafka.consumer.fetch_throttle_time_avg` | Tempo médio de limitação de busca (ms)  | client-id         |
    | `kafka.consumer.fetch_throttle_time_max` | Tempo máximo de limitação de busca (ms) | client-id         |

    ### Métricas de coordenação do grupo de consumidores

    | Nome da métrica                              | Descrição                                  | Atributo  |
    | -------------------------------------------- | ------------------------------------------ | --------- |
    | `kafka.consumer.assigned_partitions`         | Número de partições atribuídas             | client-id |
    | `kafka.consumer.commit_rate`                 | Taxa de confirmações de deslocamento       | client-id |
    | `kafka.consumer.commit_total`                | Total de confirmações de deslocamento      | client-id |
    | `kafka.consumer.commit_latency_avg`          | Latência média de commit (ms)              | client-id |
    | `kafka.consumer.commit_latency_max`          | Latência máxima de commit (ms)             | client-id |
    | `kafka.consumer.heartbeat_rate`              | Taxa de batimentos cardíacos enviados      | client-id |
    | `kafka.consumer.heartbeat_total`             | Total de batimentos cardíacos enviados     | client-id |
    | `kafka.consumer.heartbeat_response_time_max` | Tempo máximo de resposta do heartbeat (ms) | client-id |
    | `kafka.consumer.last_heartbeat_seconds_ago`  | Segundos desde o último heartbeat          | client-id |
    | `kafka.consumer.last_poll_seconds_ago`       | Segundos desde a última pesquisa           | client-id |

    ### Métricas de reequilíbrio

    | Nome da métrica                                 | Descrição                                      | Atributo  |
    | ----------------------------------------------- | ---------------------------------------------- | --------- |
    | `kafka.consumer.rebalance_total`                | Total de reequilíbrios                         | client-id |
    | `kafka.consumer.rebalance_rate_per_hour`        | Reequilíbrios por hora                         | client-id |
    | `kafka.consumer.rebalance_latency_avg`          | Latência média de rebalanceamento (ms)         | client-id |
    | `kafka.consumer.rebalance_latency_max`          | Latência máxima de rebalanceamento (ms)        | client-id |
    | `kafka.consumer.rebalance_latency_total`        | Tempo total de rebalanceamento (ms)            | client-id |
    | `kafka.consumer.failed_rebalance_total`         | Total de rebalanceamentos falhos               | client-id |
    | `kafka.consumer.failed_rebalance_rate_per_hour` | Reequilíbrios com falha por hora               | client-id |
    | `kafka.consumer.last_rebalance_seconds_ago`     | Segundos desde o último rebalanceamento        | client-id |
    | `kafka.consumer.partition_assigned_latency_avg` | Latência média de atribuição de partição (ms)  | client-id |
    | `kafka.consumer.partition_assigned_latency_max` | Latência máxima de atribuição de partição (ms) | client-id |
    | `kafka.consumer.partition_revoked_latency_avg`  | Latência média de revogação de partição (ms)   | client-id |
    | `kafka.consumer.partition_revoked_latency_max`  | Latência máxima de revogação de partição (ms)  | client-id |
    | `kafka.consumer.partition_lost_latency_avg`     | Latência média de perda de partição (ms)       | client-id |
    | `kafka.consumer.partition_lost_latency_max`     | Latência máxima de perda de partição (ms)      | client-id |

    ### Métricas do grupo de sincronização

    | Nome da métrica                | Descrição                          | Atributo  |
    | ------------------------------ | ---------------------------------- | --------- |
    | `kafka.consumer.sync_rate`     | Taxa de sincronizações de grupo    | client-id |
    | `kafka.consumer.sync_total`    | Sincronizações totais do grupo     | client-id |
    | `kafka.consumer.sync_time_avg` | Tempo médio de sincronização (ms)  | client-id |
    | `kafka.consumer.sync_time_max` | Tempo máximo de sincronização (ms) | client-id |
    | `kafka.consumer.join_rate`     | Taxa de adesões ao grupo           | client-id |
    | `kafka.consumer.join_total`    | Total de entradas no grupo         | client-id |
    | `kafka.consumer.join_time_avg` | Tempo médio de junção (ms)         | client-id |
    | `kafka.consumer.join_time_max` | Tempo máximo de junção (ms)        | client-id |

    ### Métricas de E/S

    | Nome da métrica                      | Descrição                         | Atributo  |
    | ------------------------------------ | --------------------------------- | --------- |
    | `kafka.consumer.io_ratio`            | Fração de tempo gasto em E/S      | client-id |
    | `kafka.consumer.io_time_ns_avg`      | Tempo médio de E/S (ns)           | client-id |
    | `kafka.consumer.io_wait_time_ns_avg` | Tempo médio de espera de E/S (ns) | client-id |
    | `kafka.consumer.io_wait_ratio`       | Fração de tempo esperando por E/S | client-id |
    | `kafka.consumer.iotime_total`        | Tempo total de E/S                | client-id |
    | `kafka.consumer.io_waittime_total`   | Tempo total de espera de E/S      | client-id |

    ### Métricas de sondagem

    | Nome da métrica                        | Descrição                                                         | Atributo  |
    | -------------------------------------- | ----------------------------------------------------------------- | --------- |
    | `kafka.consumer.poll_idle_ratio_avg`   | Fração média de tempo o consumidor fica ocioso durante a pesquisa | client-id |
    | `kafka.consumer.time_between_poll_avg` | Tempo médio entre as pesquisas (ms)                               | client-id |
    | `kafka.consumer.time_between_poll_max` | Tempo máximo entre as pesquisas (ms)                              | client-id |

    ### Métricas de autenticação

    | Nome da métrica                                            | Descrição                                      | Atributo  |
    | ---------------------------------------------------------- | ---------------------------------------------- | --------- |
    | `kafka.consumer.successful_authentication_rate`            | Taxa de autenticações bem-sucedidas            | client-id |
    | `kafka.consumer.successful_authentication_total`           | Total de autenticações bem-sucedidas           | client-id |
    | `kafka.consumer.successful_authentication_no_reauth_total` | Autenticações bem-sucedidas sem reautenticação | client-id |
    | `kafka.consumer.successful_reauthentication_rate`          | Taxa de reautenticações bem-sucedidas          | client-id |
    | `kafka.consumer.successful_reauthentication_total`         | Total de reautenticações bem-sucedidas         | client-id |
    | `kafka.consumer.failed_authentication_rate`                | Taxa de autenticações com falha                | client-id |
    | `kafka.consumer.failed_authentication_total`               | Total de autenticações com falha               | client-id |
    | `kafka.consumer.failed_reauthentication_rate`              | Taxa de falhas nas reautenticações             | client-id |
    | `kafka.consumer.failed_reauthentication_total`             | Total de reautenticações com falha             | client-id |
    | `kafka.consumer.reauthentication_latency_avg`              | Latência média de reautenticação (ms)          | client-id |
    | `kafka.consumer.reauthentication_latency_max`              | Latência máxima de reautenticação (ms)         | client-id |

    ### Métricas diversas

    | Nome da métrica               | Descrição                    | Atributo  |
    | ----------------------------- | ---------------------------- | --------- |
    | `kafka.consumer.select_rate`  | Taxa de chamadas select      | client-id |
    | `kafka.consumer.select_total` | Total de chamadas de seleção | client-id |
  </Collapser>
</CollapserGroup>

## Atributo métrico [#metric-attributes]

As métricas podem ser filtradas e agrupadas usando os seguintes atributos:

**Atributos comuns:**

* `kafka.cluster.name` - Nome do cluster Kafka (todas as métricas)
* `instrumentation.provider` - Sempre `opentelemetry` (todas as métricas)
* `topic` - Nome do tópico Kafka
* `partition` - Número da partição
* `group` - Nome do grupo de consumidores
* `broker.id` - Identificador do broker (métricas JMX)
* `client-id` - Identificador do cliente (métricas do cliente)
* `node-id` - Identificador do nó do broker (métricas do cliente)
* `type` - Tipo de solicitação (por exemplo, busca, produção)
* `direction` - Direção dos dados (entrada, saída)
* `state` - Estado da operação ISR (shrink, expand)
* `name` - Nome do coletor GC ou pool de memória (métricas JVM)

## Próximos passos [#next-steps]

* [Query and visualize your data](/docs/opentelemetry/integrations/kafka/find-and-query-data) - Find metrics in New Relic UI, write NRQL queries, create dashboards, and set up alerts
* [Query metric data types](/docs/data-apis/understand-data/metric-data/query-metric-data-type/) - Learn advanced techniques for working with OpenTelemetry metrics