---
title: Visão geral do monitoramento OpenTelemetry Kafka
tags:
  - Integrations
  - OpenTelemetry
  - Kafka
  - On-host integrations
metaDescription: Monitor Kafka with OpenTelemetry Collector for comprehensive metrics collection from self-hosted and Kubernetes Kafka clusters.
freshnessValidatedDate: never
translationType: machine
---

O monitoramento do Kafka oferece visibilidade em tempo real dos seus clusters Apache Kafka para garantir um streaming de dados confiável e evitar tempos de inatividade dispendiosos em sistemas distribuídos. Ao usar uma abordagem baseada em coletores, você obtém um monitoramento abrangente por meio de uma solução flexível e independente de fornecedor, que funciona em ambientes auto-hospedados e no Kubernetes com Strimzi.

## Opções do coletor [#collector-options]

A New Relic oferece suporte a duas distribuições do OpenTelemetry Collector para o monitoramento do Kafka, ambas oferecendo funcionalidades idênticas com os mesmos arquivos de configuração e recursos de monitoramento.

* **NRDOT Collector (recomendado)**: A distribuição da New Relic do OpenTelemetry Collector com suporte da New Relic para assistência. Baixe dos [releases do NRDOT Collector](https://github.com/newrelic/nrdot-collector-releases/releases).
* **OpenTelemetry Collector**: A distribuição da comunidade upstream. Faça o download em [releases do OpenTelemetry Collector](https://github.com/open-telemetry/opentelemetry-collector-releases/releases).

Escolha o coletor que melhor atenda aos seus requisitos de suporte e operacionais, depois prossiga para [configurar o monitoramento](#get-started) do seu ambiente.

<img title="OTel Kafka Dashboard" alt="Dashboard showing Kafka cluster health, network throughput, active brokers, topics, partitions, and consumer groups" src="/images/otel-kafka-dashboard.webp" />

<figcaption>
  Monitore seus clusters Kafka com dashboards abrangentes que mostram a integridade do cluster, o status do broker, métricas de tópicos e o desempenho do grupo de consumidores.
</figcaption>

## Por que monitorar o Kafka?

* Evite interrupções - Receba alertas para falhas de broker, partições sub-replicadas e tópicos offline antes que causem tempo de inatividade
* Otimize o desempenho - Identifique o atraso do consumidor, produtores lentos e gargalos de rede que afetam a velocidade de processamento de dados
* Planejar a capacidade - Acompanhe o uso de recursos, taxas de mensagens e contagens de conexões para escalar proativamente
* Garantir a integridade dos dados - Monitore a integridade da replicação e o balanceamento de partições para evitar a perda de dados

### Caso de uso comum

Se você está transmitindo transações financeiras, processando dados de sensores IoT ou lidando com a comunicação de microsserviços, o monitoramento do Kafka ajuda você a detectar problemas antes que eles afetem seus negócios. Seja alertado quando os picos de atraso do consumidor ameaçarem dashboards em tempo real, quando as falhas do broker colocarem em risco a perda de dados ou quando os gargalos da rede retardarem os pipelines de dados críticos. Este monitoramento é essencial para plataformas de e-commerce, sistemas de análise em tempo real e qualquer aplicativo em que atrasos ou falhas na entrega de mensagens possam afetar a experiência do usuário ou as operações comerciais.

## Iniciar [#get-started]

Escolha seu ambiente Kafka para começar a monitorar. Cada guia de configuração inclui pré-requisitos, etapas de configuração e dicas de solução de problemas.

<TechTileGrid>
  <TechTile name="Self-hosted Kafka" to="/docs/opentelemetry/integrations/kafka/self-hosted" icon="logo-linux" />

  <TechTile name="Kubernetes (Strimzi)" to="/docs/opentelemetry/integrations/kafka/kubernetes-strimzi" icon="logo-kubernetes" />
</TechTileGrid>

## Como funciona [#how-it-works]

O monitoramento do Kafka funciona implantando um coletor junto ao seu cluster Kafka para coletar continuamente dados de desempenho. O coletor usa vários componentes especializados para capturar métricas abrangentes de diferentes partes da sua infraestrutura Kafka.

**Três componentes trabalham juntos para coletar seus dados:**

* [Receptor de métricas do Kafka](https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/kafkametricsreceiver) - Conecta-se ao seu cluster Kafka para monitorar a saúde geral, incluindo lag do consumidor, métricas de tópicos e status da partição
* [OpenTelemetry Java Agent](https://github.com/open-telemetry/opentelemetry-java-instrumentation) - Executa ao lado de cada broker Kafka para coletar métricas detalhadas de desempenho da JVM e dados operacionais, e então envia essas informações para o coletor
* [Receptor OTLP](https://github.com/open-telemetry/opentelemetry-collector/tree/main/receiver/otlpreceiver) - Recebe e processa as métricas detalhadas do broker do Java Agent

**Fluxo de dados:**

1. O OpenTelemetry Java Agent se anexa aos brokers Kafka como um agente Java via parâmetro `-javaagent`
2. O agente Java coleta métricas JMX de brokers Kafka usando regras de configuração personalizadas
3. As métricas são enviadas via protocolo OTLP (gRPC) para o OpenTelemetry Collector na porta 4317
4. O receptor de métricas do Kafka coleta métricas em nível de cluster diretamente do Kafka via porta de bootstrap
5. Os dados são processados, enriquecidos e agrupados para transmissão eficiente
6. As métricas são exportadas para o New Relic via exportador OTLP
7. O New Relic cria entidades e preenche dashboards automaticamente

**O que você obtém:** As principais métricas incluem lag do consumidor, integridade do broker, taxas de requisição, vazão de rede, status de replicação de partição, utilização de recursos e dados de desempenho da JVM.

Para obter nomes de métricas completos, descrições e recomendações de alerta, consulte [Referência de métricas do Kafka](/docs/opentelemetry/integrations/kafka/metrics-reference).

### Opcional: Adicionar monitoramento no nível do aplicativo

A configuração de monitoramento acima rastreia a integridade e o desempenho do seu cluster Kafka. Para obter uma imagem completa de como os dados fluem pelo seu sistema, você também pode monitorar os aplicativos que enviam e recebem mensagens do Kafka.

**O monitoramento de aplicativos adiciona:**

* Latências de solicitação de seus aplicativos para o Kafka
* Métricas de throughput no nível do aplicativo
* Taxas de erro e rastreamentos distribuídos
* Visibilidade completa de produtores → corretores → consumidores

**Configuração rápida:** Use o [Agente OpenTelemetry Java](https://opentelemetry.io/docs/zero-code/java/agent/getting-started/) para [instrumentação Kafka sem código](https://opentelemetry.io/docs/zero-code/java/spring-boot-starter/out-of-the-box-instrumentation/). Para configuração avançada, consulte a [documentação de instrumentação do Kafka](https://github.com/open-telemetry/opentelemetry-java-instrumentation/tree/main/instrumentation/kafka).

## Próximos passos [#next-steps]

Pronto para começar a monitorar seus clusters Kafka?

**Configure o monitoramento:**

* [Kafka auto-hospedado](/docs/opentelemetry/integrations/kafka/self-hosted) - Monitore o Kafka em execução em máquinas físicas ou virtuais
* [Kubernetes com Strimzi](/docs/opentelemetry/integrations/kafka/kubernetes-strimzi) - Monitore o Kafka implantado no Kubernetes

**Após a configuração:**

* [Encontre e consulte seus dados](/docs/opentelemetry/integrations/kafka/find-and-query-data) - Navegue pela interface do New Relic e escreva consultas NRQL
* [Explore as métricas do Kafka](/docs/opentelemetry/integrations/kafka/metrics-reference) - Referência completa de métricas com recomendações de alerta