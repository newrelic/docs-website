---
title: Solucionar problemas da integração do Elasticsearch com OpenTelemetry
tags:
  - OpenTelemetry
  - Elasticsearch
  - Integrations
  - Troubleshooting
metaDescription: Troubleshoot common issues with the Elasticsearch OpenTelemetry integration and resolve data collection problems.
freshnessValidatedDate: never
translationType: machine
---

Se você concluiu a [instalação da integração do Elasticsearch com OpenTelemetry](/docs/opentelemetry/integrations/elasticsearch/elasticsearch-otel-integration-install) mas não vê dados no New Relic, encontre seu problema abaixo e siga as etapas de solução.

<CollapserGroup>
  <Collapser id="troubleshoot-collector-stopped" title="O serviço do Collector parou ou falhou">
    <strong>Como verificar</strong>

    ```bash
    sudo systemctl status otelcol-contrib
    ```

    <strong>Resolução</strong>

    * Se o serviço estiver inativo, inicie-o:
      <InlineCode>
        sudo systemctl start otelcol-contrib
      </InlineCode>
    * Se o serviço falhou, corrija os erros de configuração e reinicie:
      <InlineCode>
        sudo systemctl restart otelcol-contrib
      </InlineCode>
  </Collapser>

  <Collapser id="troubleshoot-collector-logs-errors" title="Logs do Coletor relatam erros de scraping ou exportação">
    <strong>Como verificar</strong>

    ```bash
    sudo journalctl -u otelcol-contrib.service -f
    ```

    <strong>Resolução</strong>

    Analise a saída do log e resolva a causa raiz (por exemplo, problemas de conexão, falhas de autenticação ou problemas de permissão).
  </Collapser>

  <Collapser id="troubleshoot-connection-refused" title="Conexão recusada ao chamar o Elasticsearch">
    <strong>Amostra de erro</strong>: <InlineCode>
      dial tcp \[::1]:9200: connect: connection refused
    </InlineCode>

    <strong>Resolução</strong>

    * Certifique-se de que o
      <InlineCode>
        endpoint
      </InlineCode>
      em
      <InlineCode>
        config.yaml
      </InlineCode>
      corresponda ao host e à porta do Elasticsearch.
    * Confirme se o Elasticsearch está em execução e acessível a partir do host do coletor.
  </Collapser>

  <Collapser id="troubleshoot-403" title="403 Forbidden ao exportar para o New Relic">
    <strong>Amostra de erro</strong>: <InlineCode>
      permanent error: 403 Forbidden
    </InlineCode>

    <strong>Resolução</strong>

    1. Verifique <InlineCode>
         NEWRELIC\_LICENSE\_KEY
       </InlineCode> em <InlineCode>
         /etc/systemd/system/otelcol-contrib.service.d/environment.conf
       </InlineCode>.

    2. Recarregue o systemd e reinicie o coletor:

       ```bash
       sudo systemctl daemon-reload
       sudo systemctl restart otelcol-contrib
       ```
  </Collapser>

  <Collapser id="troubleshoot-permission-denied" title="Permissão negada ao coletar logs">
    <strong>Amostra de erro</strong>: <InlineCode>
      permission denied
    </InlineCode> ou <InlineCode>
      cannot open file
    </InlineCode>

    <strong>Resolução</strong>

    1. Adicione o usuário do coletor ao grupo Elasticsearch:
       ```bash
       sudo usermod -a -G elasticsearch otelcol-contrib
       ```
    2. Reinicie o coletor:
       <InlineCode>
         sudo systemctl restart otelcol-contrib
       </InlineCode>
  </Collapser>

  <Collapser id="troubleshoot-api-reachability" title="Não é possível acessar a API do Elasticsearch a partir do coletor">
    <strong>Como verificar</strong>

    ```bash
    # Unsecured cluster
    curl -I http://localhost:9200

    # With authentication
    curl -u username:password -k https://localhost:9200
    ```

    <strong>Resolução</strong>

    Verifique se o cluster está íntegro, se as credenciais são válidas e se as configurações de firewall ou segurança permitem o acesso.
  </Collapser>

  <Collapser id="troubleshoot-missing-entity" title="Entidade Elasticsearch ausente na UI do New Relic">
    <strong>Resolução</strong>

    * Garanta que o processador
      <InlineCode>
        resourcedetection
      </InlineCode>
      esteja incluído em todos os pipelines de métricas.
    * Verifique se
      <InlineCode>
        elasticsearch.cluster.name
      </InlineCode>
      está definido via processador
      <InlineCode>
        resource/cluster_name_override
      </InlineCode>
      .
  </Collapser>

  <Collapser id="troubleshoot-logs-missing" title="Métricas presentes, mas logs ausentes">
    <strong>Resolução</strong>

    * Confirme se os caminhos do receptor
      <InlineCode>
        filelog
      </InlineCode>
      estão corretos e absolutos.
    * Verifique se o pipeline de logs inclui tanto o receptor
      <InlineCode>
        filelog
      </InlineCode>
      quanto o exportador
      <InlineCode>
        otlphttp
      </InlineCode>
      .
  </Collapser>
</CollapserGroup>