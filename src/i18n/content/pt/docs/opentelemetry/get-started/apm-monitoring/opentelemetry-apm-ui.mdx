---
title: Interface OpenTelemetry APM
tags:
  - Integrations
  - Open source telemetry integrations
  - OpenTelemetry
metaDescription: The OpenTelemetry APM UI provides tools for identifying and diagnosing problems with services monitoring with OpenTelemetry.
freshnessValidatedDate: '2024-05-17T00:00:00.000Z'
translationType: machine
---

A interface OpenTelemetry APM fornece uma experiência abrangente de monitoramento para serviços instrumentados com OpenTelemetry, oferecendo os mesmos recursos poderosos APM que você espera do agente de linguagem tradicional da New Relic.

## Pré-requisitos

Antes de usar a interface do usuário do OpenTelemetry APM, certifique-se de ter:

* Configurado seu serviço com instrumentação OpenTelemetry
* Configure seu serviço para enviar dados para o New Relic
* Criou [a entidade de serviçoOpenTelemetry](/docs/opentelemetry/best-practices/opentelemetry-best-practices-resources/#services)

Se você não concluiu essas etapas, consulte [o monitoramentoOpenTelemetry APM ](/docs/opentelemetry/get-started/apm-monitoring/opentelemetry-apm-intro/)para obter instruções de configuração.

## Encontre seus serviços OpenTelemetry [#find-apm-services]

Para localizar seus serviços OpenTelemetry-instrumentado:

1. Na interface New Relic, navegue até **All entities &gt; Services - OpenTelemetry** ou **APM &amp; Services**
2. Selecione um serviço para abrir sua [página Summary](#summary-page)

<Callout variant="tip">
  Utilize [a tag entidade](/docs/new-relic-solutions/new-relic-one/core-concepts/use-tags-help-organize-find-your-data/) no explorador entidade para filtrar serviços. Saiba mais sobre como as tags entidade são computadas nos [recursos doOpenTelemetry no New Relic](/docs/opentelemetry/best-practices/opentelemetry-best-practices-resources).
</Callout>

## Como o OpenTelemetry funciona com o New Relic APM

Os serviços instrumentados do OpenTelemetryfornecem a mesma experiência APM com curadoria que os serviços que usam o agente de linguagem do New Relic. Veja como funciona:

### Processo de mapeamento de dados

O New Relic mapeia automaticamente seus dados OpenTelemetry para nossas convenções APM por:

1. **Gerando métricas APM **: Criamos as métricas necessárias para a experiência APM diretamente dos seus dados OpenTelemetry
2. **Preservando os dados originais**: seus dados originais OpenTelemetry permanecem disponíveis para painéis personalizados e alertas
3. **Convenções de normalização**: lidamos com as convenções semânticas em evolução do OpenTelemetry para que você não precise rastrear diferenças de versão

### Benefícios para usuários existentes New Relic

Se você estiver migrando do New Relic Agent para OpenTelemetry, poderá continuar usando o Métrica e a Consulta familiares enquanto adota os padrões OpenTelemetry.

<Callout variant="important">
  **Por que normalizamos os dados do OpenTelemetry**

  As convenções semânticas do OpenTelemetry ainda estão evoluindo, muitas delas ainda não estáveis. Ao normalizar seus dados de acordo com as convenções do New Relic, nós:

  * Reduza a complexidade do rastreamento de quais versões da convenção OpenTelemetry sua instrumentação usa
  * Ofereça uma experiência consistente durante a transição do agente New Relic para OpenTelemetry
  * Garanta que sua experiência com APM permaneça estável, independentemente das alterações do OpenTelemetry
</Callout>

### Fontes de dados e priorização

A experiência do APM usa três tipos de dados OpenTelemetry:

* **Métricas** (primárias): Fornece estatísticas de serviço precisas, como taxas de transferência, tempo de resposta e taxas de erros
* **Spans** (suplementares): Utilizados quando métricas não estão disponíveis ou para recurso específico como trace da transação
* **Logs**: Integrado para resolução de problemas e correlação

**Por que métricas são preferidas**: métricas fornecem uma imagem completa do desempenho do seu serviço, enquanto intervalos são normalmente amostrados e podem não representar todo o tráfego.

A experiência do APM aproveita principalmente estas convenções semânticas do OpenTelemetry:

* [HTTP](https://opentelemetry.io/docs/specs/semconv/http/) - transação da web e chamadas externas
* [RPC](https://opentelemetry.io/docs/specs/semconv/rpc/) - Chamadas de procedimento remoto
* [Mensagens](https://opentelemetry.io/docs/specs/semconv/messaging/) - Operações de fila de mensagens
* [banco de dados](https://opentelemetry.io/docs/specs/semconv/database/) - operações do banco de dados

### Como as transações são derivadas dos dados do OpenTelemetry [#transaction-mapping]

A experiência de APM da New Relic é centrada na noção de uma [transação](https://docs.newrelic.com/docs/apm/transactions/intro-transactions/transactions-new-relic-apm/). Ao usar um agente New Relic, é responsabilidade da instrumentação do agente definir o escopo de uma transação (por exemplo, uma única solicitação da web). O agente produz dados métricos que direcionam a grande maioria da experiência New Relic APM ao registrar dados métricos de transações, medindo a duração das transações e suas operações individuais (por exemplo, chamadas externas e chamadas de banco de dados).

A instrumentação do OpenTelemetry não tem um análogo direto a uma transação do New Relic, portanto, adaptar a noção de transações aos dados do OpenTelemetry é fundamental.

Ao aproveitar [as convenções semânticas](https://opentelemetry.io/docs/concepts/semantic-conventions/) do OpenTelemetry, podemos aproveitar os meios altamente estruturados e padronizados do OpenTelemetryde descrever a telemetria para conduzir a experiência APM de uma forma muito semelhante à do agente do New Relic.

As convenções semânticas definem métricas padrão para medir operações comuns, como lidar com requests [HTTP](https://opentelemetry.io/docs/specs/semconv/http/http-metrics/) ou [RPC](https://opentelemetry.io/docs/specs/semconv/rpc/rpc-metrics/). Estas métricas são análogas às métricas de transação que o agente New Relic produz para descrever [transações da web](https://docs.newrelic.com/docs/apm/transactions/intro-transactions/transactions-new-relic-apm/#types). Aproveitamos a métrica HTTP e RPC do OpenTelemetrypara sintetizar métricas que controlam a interface APM como a [métrica`apm.service.transaction.duration` ](#metric-apm-service-transaction-duration).

New Relic também fornece uma noção de [transação fora da web](https://docs.newrelic.com/docs/apm/transactions/intro-transactions/monitor-background-processes-other-non-web-transactions/). Transações fora da web são comumente usadas para sistemas que realizam processamento de mensagens. a instrumentação que aproveita [as convenções de mensagens](https://github.com/open-telemetry/semantic-conventions/blob/main/docs/messaging/messaging-spans.md) do OpenTelemetryresultará na síntese de métricas que representam a transação fora da web.

<Callout variant="important">
  **Operações de mensagens e dados de intervalo**

  As convenções de mensagens do OpenTelemetry são menos maduras que as convenções HTTP e RPC. Atualmente, geramos transações fora da web métrica para operações de mensagens a partir de dados span em vez de dados métricos. Essa abordagem segue as convenções semânticas de mensagens, mas pode ser afetada pela sua estratégia de amostragem.
</Callout>

#### Nomes de transações

Cada transação tem um nome que é derivado do atributo exigido pelas convenções semânticas do OpenTelemetry. Consulte a seção [Métrica do ServiçoAPM ](#apm-service-metrics)para saber como esse nome é derivado.

##### Nome de transação desconhecido

Às vezes, você pode ver uma transação com `unknown` no nome. Isso é uma indicação de que os dados de origem usados para derivar a transação não seguem nenhuma das convenções semânticas estabelecidas do OpenTelemetry que atualmente suportamos.

Alguns exemplos:

* Métrica HTTP ausente `http.request.method` ou `http.route`. Por exemplo, se a métrica `http.server.request.duration` não tiver o atributo `http.route`, o nome da transação será `WebTransaction/server/GET unknown`.
* estrutura ou protocolos para os quais OpenTelemetry não define atualmente convenções semânticas (por exemplo, trabalhos em segundo plano e estrutura de CI).

## Navegando na experiência do APM

### Resumo [#summary-page]

A [página Summary](/docs/apm/agents/manage-apm-agents/agent-data/triage-run-diagnostics/) fornece uma visão geral da saúde do seu serviço e é centrada na noção de [transação](/docs/apm/transactions/intro-transactions/transactions-new-relic-apm/) da New Relic. Veja [Como as transações são derivadas dos dados do OpenTelemetry](#transaction-mapping) para mais detalhes.

As métricas New Relic que controlam a página Summary são as métricas [`apm.service.transaction.duration`](#metric-apmservicetransactionduration) e [`apm.service.error.count`](#metric-apmservicetransactionduration). Consulte-os para obter detalhes sobre como eles são derivados dos seus dados do OpenTelemetry.

#### Personalizando o Apdex destino [#customizing-apdex-target]

Na instrumentação New Relic, os destinos apdex personalizados são configurados usando a configuração do agente. Para OpenTelemetry, ao visualizar um serviço, navegue até **Settings &gt; Application** para configurar seu destino Apdex.

### Distributed tracing [#distributed-tracing-page]

A distributed tracing página fornece detalhados insights OpenTelemetry trace sobre os dados . Consulte [distributed tracing](/docs/distributed-tracing/ui-data/understand-use-distributed-tracing-ui/) para obter informações de uso da página. Consulte Rastreamento no para obter detalhes [OpenTelemetry New Relic](/docs/opentelemetry/best-practices/opentelemetry-best-practices-traces) sobre como os dados são ingeridos no OpenTelemetry trace New Relic.

Assim como acontece com [os sinais clássicos](#golden-signals), os spans serão classificados como erros se o status do span estiver definido como `ERROR` (por exemplo, `otel.status_code = ERROR`). Se o intervalo for um erro, a descrição do status do intervalo (por exemplo, `otel.status_description`) será exibida em **detalhes do erro**.

OpenTelemetry span evento anexa informações de contexto de evento adicionais a um intervalo específico. Eles são mais comumente usados para capturar informações de exceção. Se disponível, você pode visualizar o evento de um intervalo nos **trace details**.

<Callout variant="tip">
  A presença de um evento de exceção de intervalo não qualifica o intervalo como um erro por si só. Somente intervalos com status de intervalo definido como `ERROR` são classificados como erros.
</Callout>

<img title="Screenshot showing the right pane showing the two links for span events" alt="Screenshot showing the right pane showing the two links for span events" src="/images/opentelemetry_screenshot-crop_view-span-events.webp" />

### Mapa de serviço [#service-map-page]

A página do mapa de serviços fornece uma representação visual de toda a sua arquitetura. Veja [os mapas de serviço](/docs/new-relic-solutions/new-relic-one/ui-data/service-maps/service-maps/) para mais informações.

### Transação [#transactions-page]

A [página de transações](/docs/apm/apm-ui-pages/monitoring/transactions-page-find-specific-performance-problems/) fornece ferramentas para identificar problemas e analisar [as transações](/docs/apm/transactions/intro-transactions/transactions-new-relic-apm/#txn-defined) de um serviço.

O OpenTelemetry não tem uma analogia direta com a noção de transação da New Relic. Veja [Como as transações são derivadas dos dados do OpenTelemetry](#transaction-mapping) para mais detalhes.

As métricas New Relic que controlam a página de transações são as métricas [`apm.service.transaction.duration`](#metric-apmservicetransactionduration) e [`apm.service.error.count`](#metric-apmservicetransactionduration). Consulte-os para obter detalhes sobre como eles são derivados dos seus dados do OpenTelemetry.

#### Rastreamento da transação

[Os rastreamentos de transação](/docs/apm/transactions/transaction-traces/introduction-transaction-traces/) para OpenTelemetry são derivados dos seus dados de intervalo. Na página de transações você pode encontrar uma lista de rastreamentos de transações. Esta lista requer que os dados de intervalo e os dados métricos de uma determinada transação sejam correlacionados. Fazemos isso adicionando um atributo `transaction.name` ao intervalo raiz de um trace da transação.

#### Detalhamento do segmento [#segment-breakdown]

Clicar em uma transação abre uma visão detalhada da transação, revelando um detalhamento do segmento. Ao contrário do New Relic Agent, OpenTelemetry não emite métricas para segmentos individuais. Portanto, a métrica New Relic necessária para conduzir a análise do segmento é derivada de dados de intervalo.

A desvantagem notável de calcular a divisão de segmentos a partir de dados de intervalo é que os intervalos geralmente são amostrados. Porém, mesmo com amostragem, a análise de segmentos ainda pode ajudar a identificar métodos ou operações específicas que consomem mais tempo em uma transação.

A partir dos dados do intervalo, estimamos uma taxa de amostragem calculando as taxas de transferência com base nos dados do intervalo recebidos e dividindo-as pelas taxas de transferência reais, conforme relatado pelos seus dados métricos. A taxa de amostragem estimada nos permite extrapolar a repartição do segmento de uma transação.

Esse processo não é perfeito e pode ser afetado por vários fatores, principalmente sua estratégia de amostragem. Funciona melhor quando você está amostrando estritamente uma porcentagem dos seus dados de intervalo. No entanto, por exemplo, se você amostrar apenas intervalos que representam erros, a divisão do segmento poderá ser distorcida.

### Banco de dados [#databases-page]

A página banco de dados fornece ferramentas para identificar problemas e analisar as operações do cliente do banco de dados de um serviço.

A instrumentação OpenTelemetry representa chamadas ao banco de dados usando as convenções semânticas do [banco de dados](https://opentelemetry.io/docs/specs/semconv/database/).

A métrica New Relic que impulsiona a página do banco de dados é a métrica [`apm.service.datastore.operation.duration`](#metric-apmservicedatastoreoperationduration). Consulte-o para obter detalhes sobre como ele é derivado dos seus dados do OpenTelemetry.

#### Consumo de tempo por chamador

Ao clicar em uma chamada de banco de dados específica, você verá o gráfico &quot;Consumo de tempo por chamador&quot;. Este gráfico é orientado pela métrica [`apm.service.transaction.overview`](#metric-apmservicetransactionoverview). Essa é a mesma métrica que direciona a visualização [do detalhamento do segmento](#segment-breakdown) da página de transação e é derivada de dados de intervalo.

<Callout variant="important">
  As convenções semânticas do banco de dados do OpenTelemetry foram recentemente consideradas estáveis. Ainda não existem muitas instrumentações estáveis, e a instrumentação que existe muitas vezes emite apenas dados span e nenhum dado métrico.

  Assim, ao utilizar instrumentação que ainda não adotou as convenções semânticas estáveis, a métrica APM gerada que aciona a página do banco de dados é derivada de dados de intervalo.

  À medida que a instrumentação estável estiver disponível e você a adotar, a página do banco de dados começará a aproveitar os dados métricos OpenTelemetry. Entre em contato com a comunidade OpenTelemetry sobre a disponibilidade de instrumentação de banco de dados estável em sua linguagem.
</Callout>

### Serviços externos [#externals-page]

A [página de serviços externos](/docs/apm/apm-ui-pages/monitoring/external-services/external-services-ui/) fornece ferramentas para identificar problemas e analisar chamadas externas de um serviço, incluindo a entidade chamadora (serviços upstream) e a entidade chamada (serviços downstream).

A instrumentação OpenTelemetry representa chamadas para serviços externos usando as convenções semânticas [HTTP](https://opentelemetry.io/docs/specs/semconv/http/) e [RPC](https://opentelemetry.io/docs/specs/semconv/rpc/).

A métrica New Relic que impulsiona a página do banco de dados é a métrica [`apm.service.external.host.duration`](#metric-apmserviceexternalhostduration). Consulte-o para obter detalhes sobre como ele é derivado dos seus dados do OpenTelemetry.

#### Consumo de tempo por chamador

Ao clicar em uma chamada externa específica, você verá o gráfico &quot;Consumo de tempo por chamador&quot;. Este gráfico é orientado pela métrica [`apm.service.transaction.overview`](#metric-apm-service-transaction-overview). Essa é a mesma métrica que direciona a visualização [do detalhamento do segmento](#segment-breakdown) da página de transação e é derivada de dados de intervalo.

### Tempo de execução da JVM [#jvm-runtime-page]

A página de tempo de execução da JVM fornece ferramentas para identificar problemas e analisar a JVM de um serviço Java. A página é exibida somente para serviços que usam [OpenTelemetry Java](https://opentelemetry.io/docs/languages/java/). Para diferenciar entre instâncias de serviço distintas, a página requer que o atributo de recurso `service.instance.id` seja definido (consulte [Serviços](/docs/opentelemetry/best-practices/opentelemetry-best-practices-resources/#services) para obter mais detalhes).

A página de tempo de execução JVM mostra sinais clássicos junto com métricas de tempo de execução JVM para correlacionar problemas de tempo de execução com o uso do serviço.

A consulta assume que os dados estão em conformidade com as convenções semânticas [métricas JVM ](https://opentelemetry.io/docs/specs/semconv/runtime/jvm-metrics/). Observe que essas convenções são incorporadas na [biblioteca de instrumentação de tempo de execução Java do OpenTelemetry](https://github.com/open-telemetry/opentelemetry-java-instrumentation/tree/main/instrumentation/runtime-telemetry/runtime-telemetry-java8/library), que é incluída automaticamente com o agente Java do OpenTelemetry.

### Tempo de execução [#go-runtime-page]

A página de tempo de execução do Go fornece ferramentas para identificar problemas e analisar o tempo de execução de um serviço Go. A página é exibida apenas para serviços que usam [o OpenTelemetry Go](https://opentelemetry.io/docs/languages/go/). Para diferenciar entre instâncias de serviços distintas, a página requer que o atributo de recurso `service.instance.id` seja definido (consulte [Serviços](/docs/opentelemetry/best-practices/opentelemetry-best-practices-resources/#services) para obter mais detalhes).

A página do tempo de execução do Go mostra sinais clássicos junto com a métrica do tempo de execução do Go para correlacionar problemas de tempo de execução com o uso do serviço.

Os dados assumidos pela consulta são produzidos pela [biblioteca de instrumentação de tempo de execuçãoOpenTelemetry Go](https://opentelemetry.io/docs/specs/semconv/runtime/go-metrics/). Observe que atualmente não há convenções semânticas para métricas de tempo de execução do Go.

### Registro [#logs-page]

A página de log fornece ferramentas para identificar problemas e analisar o log de um serviço. Consulte [Usar interface de log](/docs/logs/ui-data/use-logs-ui/) para obter mais informações.

### Errors Inbox [#errors-inbox-page]

A página Caixa de entrada de erros fornece ferramentas para detectar e classificar erros de um serviço. Consulte [Introdução à Caixa de entrada de erros](/docs/errors-inbox/getting-started/) para obter mais detalhes.

A página Caixa de entrada de erros é orientada por dados trace. Assim como acontece com [os sinais clássicos](#golden-signals), os intervalos são classificados como erros se o status do intervalo for definido como `ERROR` (por exemplo, `otel.status_code = ERROR`).

Os intervalos de erros são agrupados por sua impressão digital de erro, computados pela normalização de valores de identificação, como UUIDs, valores hexadecimais, endereços de e-mail, etc. Cada intervalo de erro distinto é uma instância individual dentro do grupo de erros. A mensagem do grupo de erros é determinada da seguinte forma:

* Descrição do status do período (por exemplo, `otel.status_description`)
* `rpc.grpc.status_code` das convenções semânticas [de span RPC](https://opentelemetry.io/docs/specs/semconv/rpc/rpc-spans/)
* `http.status_code` das convenções semânticas [de span HTTP](https://opentelemetry.io/docs/specs/semconv/http/http-spans/)
* `http.response.status_code` das convenções semânticas [de span HTTP](https://opentelemetry.io/docs/specs/semconv/http/http-spans/)
* `undefined` se nenhuma das opções acima estiver presente

### Exibição de extensão (legado) [#span-view-legacy]

No passado, os serviços instrumentados OpenTelemetry proporcionavam uma experiência de usuário totalmente diferente daquela do agente de linguagem do New Relic. Essa experiência mais antiga forneceu gráficos selecionados a partir de dados de intervalo. Dados de intervalo geralmente são amostrados, por isso podem ser enganosos, principalmente quando representam coisas como taxas de transferência.

Por enquanto, a antiga experiência do usuário ainda está disponível na página Span View (legada). Na parte superior, ele contém quatro abas: Resumo, Transações, banco de dados e Serviços externos. Todos os gráficos nessas guias são baseados em dados de intervalo.

<Callout variant="tip">
  **Visão baseada em intervalo legado**

  Nossa experiência mais antiga OpenTelemetry APM permitiu a visualização de dados de perspectivas métricas e de amplitude. Como os dados de amplitude são normalmente amostrados, as métricas fornecem taxas de transferência e medições de tempo de resposta mais precisas. A visualização baseada em intervalo ainda está disponível, mas será descontinuada. Veja [Span View (legado)](#span-view-legacy) para mais detalhes.
</Callout>

## Métrica New Relic APM derivada de dados de intervalo [#apm-metrics-from-span-data]

As métricas New Relic APM que orientam a experiência APM geralmente são derivadas de dados métricos. No entanto, há alguns cenários em que as métricas APM são derivadas de dados de intervalo. Para os cenários a seguir, observe que a estratégia de amostragem que você está usando influenciará a métrica gerada.

### Detalhamento do segmento

A visão detalhada do segmento de transação é orientada a partir de dados de intervalo. Veja [a análise do segmento](#segment-breakdown) para mais informações.

### Chamadas de banco de dados

As [convenções semânticas do banco de dados OpenTelemetry](https://opentelemetry.io/docs/specs/semconv/database/) foram recentemente declaradas estáveis. Contudo, a maior parte da instrumentação do banco de dados ainda não adotou as convenções estáveis e ainda não emite dados métricos. Portanto, ao utilizar instrumentação mais antiga, as métricas que orientam a [página do banco de dados](#databases-page) são geradas a partir dos dados span. Recomendamos que você atualize para a instrumentação de banco de dados estável mais recente assim que ela estiver disponível para seu idioma.

### Sistemas de mensagens

As [convenções semânticas de mensagens do OpenTelemetry](https://opentelemetry.io/docs/specs/semconv/messaging/) ainda estão em desenvolvimento. A maior parte da instrumentação de mensagens ainda não emite dados métricos. New Relic representa interações com sistemas de mensagens como transação fora da web. Veja [Como as transações são derivadas dos dados do OpenTelemetry](#transaction-mapping) para obter mais informações.

### OpenTelemetry Ruby

OpenTelemetry agora oferece suporte ao métrica para a maioria das linguagens, porém Ruby é uma exceção notável. Para Ruby, realizamos um esforço de melhor-fé para gerar a métrica New Relic APM a partir de dados de intervalo.

## Serviço métrico APM

As métricas `apm.service.*` impulsionam a experiência de APM da New Relic. As seções a seguir descrevem os dados de origem OpenTelemetry usados para derivar métricas `apm.service.*`.

### atributo de recurso métrico

Os seguintes atributos de recurso são copiados dos dados de origem para APM métrica:

* `container.id`
* `entity.guid`
* `host.name`
* `instrumentation.provider`
* `k8s.cluster.name`
* `k8s.container.name`
* `k8s.namespace.name`
* `k8s.pod.name`
* `service.instance.id`
* `service.name`

### métrica: `apm.service.transaction.duration`

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        **Nome**
      </th>

      <th>
        **[Tipo de instrumento](https://docs.newrelic.com/docs/data-apis/understand-data/metric-data/metric-data-type/)**
      </th>

      <th>
        **Unidade ([UCUM](https://ucum.org/ucum))**
      </th>

      <th>
        **Descrição**
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `apm.service.transaction.duration`
      </td>

      <td>
        Distribuição
      </td>

      <td>
        `s`, `ms`, `ns` **\[1]**
      </td>

      <td>
        Duração das transações. **\[2]**
      </td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        **Atributo**
      </th>

      <th>
        **Tipo**
      </th>

      <th>
        **Descrição**
      </th>

      <th>
        **Exemplo**
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `transactionName`
      </td>

      <td>
        `string`
      </td>

      <td>
        O nome da transação.
      </td>

      <td>
        `WebTransaction/server/GET /users/:id`, `OtherTransaction/consumer/unknown`
      </td>
    </tr>

    <tr>
      <td>
        `transactionType`
      </td>

      <td>
        `string`
      </td>

      <td>
        O tipo da transação.
      </td>

      <td>
        `Web`, `Other`
      </td>
    </tr>

    <tr>
      <td>
        `error.type`
      </td>

      <td>
        `string`
      </td>

      <td>
        Descreve uma classe de erro com a qual a transação terminou.
      </td>

      <td>
        `500`, `TimeoutException`
      </td>
    </tr>
  </tbody>
</table>

**\[1]**: A unidade da métrica de origem é copiada.

**\[2]**: Se `error.type` for resolvido como não nulo, `apm.service.error.count` será incrementado com a respectiva contagem dos dados de origem.

#### fontes métricas

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        **Convenção Semântica**
      </th>

      <th>
        **Nome da métrica**
      </th>

      <th>
        **Condições**
      </th>

      <th>
        **`transactionName`**
      </th>

      <th>
        **`transactionType`**
      </th>

      <th>
        **`error.type`**
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        [`OtelHttpServer1_23`](https://github.com/open-telemetry/semantic-conventions/blob/v1.23.0/docs/http/http-metrics.md)
      </td>

      <td>
        `http.server.request.duration`
      </td>

      <td>
        `http.request.method IS NOT NULL`
      </td>

      <td>
        `WebTransaction/server/${http.request.method} ${http.route}`
      </td>

      <td>
        `Web`
      </td>

      <td>
        `${error.type}`
      </td>
    </tr>

    <tr>
      <td>
        [`OtelHttpServer1_20`](https://github.com/open-telemetry/opentelemetry-specification/blob/v1.20.0/specification/metrics/semantic_conventions/http-metrics.md)
      </td>

      <td>
        `http.server.duration`
      </td>

      <td>
        `http.method IS NOT NULL`
      </td>

      <td>
        `WebTransaction/server/${http.method} ${http.route}`
      </td>

      <td>
        `Web`
      </td>

      <td>
        `__http_error_status_code_or_null__`
      </td>
    </tr>

    <tr>
      <td>
        [`OtelRpcServer1_20`](https://github.com/open-telemetry/opentelemetry-specification/blob/v1.20.0/specification/trace/semantic_conventions/rpc.md)
      </td>

      <td>
        `rpc.server.duration`
      </td>

      <td>
        `rpc.system IS NOT NULL`
      </td>

      <td>
        `WebTransaction/server/${rpc.system}/${rpc.service:-unknown}.${rpc.method:-unknown}`
      </td>

      <td>
        `Web`
      </td>

      <td>
        `__rpc_error_status_code_or_null__`
      </td>
    </tr>
  </tbody>
</table>

### métrica: `apm.service.transaction.overview`

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        **Nome**
      </th>

      <th>
        **[Tipo de instrumento](https://docs.newrelic.com/docs/data-apis/understand-data/metric-data/metric-data-type/)**
      </th>

      <th>
        **Unidade ([UCUM](https://ucum.org/ucum))**
      </th>

      <th>
        **Descrição**
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `apm.service.transaction.overview`
      </td>

      <td>
        Resumo
      </td>

      <td>
        s
      </td>

      <td>
        Tempo de detalhamento do segmento de uma transação.
      </td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        **Atributo**
      </th>

      <th>
        **Tipo**
      </th>

      <th>
        **Descrição**
      </th>

      <th>
        **Exemplo**
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `transactionName`
      </td>

      <td>
        `string`
      </td>

      <td>
        O nome da transação.
      </td>

      <td>
        `WebTransaction/server/GET /users/:id`, `OtherTransaction/consumer/unknown`
      </td>
    </tr>

    <tr>
      <td>
        `transactionType`
      </td>

      <td>
        `string`
      </td>

      <td>
        O tipo da transação.
      </td>

      <td>
        `Web`, `Other`
      </td>
    </tr>

    <tr>
      <td>
        atributo militar
      </td>

      <td>
        vários
      </td>

      <td>
        atributo específico dependente da convenção do domínio de origem incluindo: `db.system`, `db.sql.table`, `db.operation`, `external.host`
      </td>

      <td>
        Veja `apm.service.external.host.duration`, `apm.service.datastore.operation.duration`
      </td>
    </tr>
  </tbody>
</table>

#### Fontes de extensão

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        **Convenção Semântica**
      </th>

      <th>
        **Tipo de extensão**
      </th>

      <th>
        **Condições**
      </th>

      <th>
        **`transactionName`**
      </th>

      <th>
        **`transactionType`**
      </th>

      <th>
        **atributo militar**
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        [`OtelHttpServer1_23`](https://github.com/open-telemetry/semantic-conventions/blob/v1.23.0/docs/http/http-metrics.md)
      </td>

      <td>
        `server`
      </td>

      <td>
        `http.request.method IS NOT NULL`
      </td>

      <td>
        `WebTransaction/server/${http.request.method} ${http.route}`
      </td>

      <td>
        `Web`
      </td>

      <td />
    </tr>

    <tr>
      <td>
        [`OtelHttpServer1_20`](https://github.com/open-telemetry/opentelemetry-specification/blob/v1.20.0/specification/metrics/semantic_conventions/http-metrics.md)
      </td>

      <td>
        `server`
      </td>

      <td>
        `http.method IS NOT NULL`
      </td>

      <td>
        `WebTransaction/server/${http.method} ${http.route}`
      </td>

      <td>
        `Web`
      </td>

      <td />
    </tr>

    <tr>
      <td>
        [`OtelRpcServer1_20`](https://github.com/open-telemetry/opentelemetry-specification/blob/v1.20.0/specification/trace/semantic_conventions/rpc.md)
      </td>

      <td>
        `server`
      </td>

      <td>
        `rpc.system IS NOT NULL`
      </td>

      <td>
        `WebTransaction/server/${rpc.system}/${rpc.service:-unknown}.${rpc.method:-unknown}`
      </td>

      <td>
        `Web`
      </td>

      <td />
    </tr>

    <tr>
      <td>
        [`OtelMessagingConsumer1_24`](https://github.com/open-telemetry/semantic-conventions/blob/v1.24.0/docs/messaging/messaging-spans.md)
      </td>

      <td>
        `consumer`
      </td>

      <td>
        `messaging.operation IS NOT NULL`
      </td>

      <td>
        `OtherTransaction/consumer/${messaging.operation:-unknown}/${messaging.destination.template:-${messaging.destination.name:-unknown}}`
      </td>

      <td>
        `Other`
      </td>

      <td />
    </tr>

    <tr>
      <td>
        [`OtelDbClient1_33`](https://github.com/open-telemetry/semantic-conventions/blob/v1.33.0/docs/database/database-metrics.md)
      </td>

      <td>
        `internal`<br />`client`
      </td>

      <td>
        `db.system.name IS NOT NULL`
      </td>

      <td>
        `transactionName` do vão da raiz local
      </td>

      <td>
        `transactionType` do vão da raiz local
      </td>

      <td>
        `db.system`: `${db.system.name}`<br />`db.sql.table`: `${db.stored_procedure.name:-${db.collection.name:-${__db_summary_to_sql_table__}}}`<br />`db.operation`: `${db.operation.name:-${__db_summary_to_operation__:-unknown}}`
      </td>
    </tr>

    <tr>
      <td>
        [`OtelDbClientRedis1_24`](https://github.com/open-telemetry/semantic-conventions/blob/v1.24.0/docs/database/database-spans.md)
      </td>

      <td>
        `client`
      </td>

      <td>
        `db.system IS NOT NULL`<br />`db.system = 'redis'`
      </td>

      <td>
        `transactionName` do vão da raiz local
      </td>

      <td>
        `transactionType` do vão da raiz local
      </td>

      <td>
        `db.system`: `${db.system}`<br />`db.sql.table`: `${db.sql.table}`<br />`db.operation`: `${db.operation:-${name:-unknown}}`
      </td>
    </tr>

    <tr>
      <td>
        [`OtelDbClient1_24`](https://github.com/open-telemetry/semantic-conventions/blob/v1.24.0/docs/database/database-spans.md)
      </td>

      <td>
        `client`
      </td>

      <td>
        `db.system IS NOT NULL`
      </td>

      <td>
        `transactionName` do vão da raiz local
      </td>

      <td>
        `transactionType` do vão da raiz local
      </td>

      <td>
        `db.system`: `${db.system}`<br />`db.sql.table`: `${db.sql.table}`<br />`db.operation`: `${db.operation:-unknown}`
      </td>
    </tr>

    <tr>
      <td>
        [`OtelHttpClient1_23`](https://github.com/open-telemetry/semantic-conventions/blob/v1.23.1/docs/http/http-metrics.md)
      </td>

      <td>
        `client`
      </td>

      <td>
        `http.request.method IS NOT NULL`
      </td>

      <td>
        `transactionName` do vão da raiz local
      </td>

      <td>
        `transactionType` do vão da raiz local
      </td>

      <td>
        `external.host`: `${server.address:-unknown}`
      </td>
    </tr>

    <tr>
      <td>
        [`OtelHttpClient1_20`](https://github.com/open-telemetry/opentelemetry-specification/blob/v1.20.0/specification/metrics/semantic_conventions/http-metrics.md)
      </td>

      <td>
        `client`
      </td>

      <td>
        `http.method IS NOT NULL`
      </td>

      <td>
        `transactionName` do vão da raiz local
      </td>

      <td>
        `transactionType` do vão da raiz local
      </td>

      <td>
        `external.host`: `${net.peer.name:-unknown}`
      </td>
    </tr>

    <tr>
      <td>
        [`OtelRpcClient1_20`](https://github.com/open-telemetry/opentelemetry-specification/blob/v1.20.0/specification/metrics/semantic_conventions/rpc-metrics.md)
      </td>

      <td>
        `client`
      </td>

      <td>
        `rpc.system IS NOT NULL`
      </td>

      <td>
        `transactionName` do vão da raiz local
      </td>

      <td>
        `transactionType` do vão da raiz local
      </td>

      <td>
        `external.host`: `${net.peer.name:-unknown}`
      </td>
    </tr>
  </tbody>
</table>

### métrica: `apm.service.external.host.duration`

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        **Nome**
      </th>

      <th>
        **[Tipo de instrumento](https://docs.newrelic.com/docs/data-apis/understand-data/metric-data/metric-data-type/)**
      </th>

      <th>
        **Unidade**
      </th>

      <th>
        **([UCUM](https://ucum.org/ucum))**
      </th>

      <th>
        **Descrição**
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `apm.service.external.host.duration` | | |
      </td>

      <td>
        Distribuição
      </td>

      <td>
        `s`, `ms`, `ns` **\[1]**
      </td>

      <td>
        Duração das chamadas externas.
      </td>

      <td />
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        **Atributo**
      </th>

      <th>
        **Tipo**
      </th>

      <th>
        **Descrição**
      </th>

      <th>
        Exemplo
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `external.host`
      </td>

      <td>
        `string`
      </td>

      <td>
        Domínio do servidor, se disponível, sem consulta reversa de DNS; caso contrário, endereço IP ou nome do soquete de domínio Unix
      </td>

      <td>
        `example.com`, `10.1.2.80`, `/tmp/my.sock`
      </td>
    </tr>
  </tbody>
</table>

**\[1]**: A unidade da métrica de origem é copiada.

#### fontes métricas

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        **Convenção Semântica**
      </th>

      <th>
        **Nome da métrica**
      </th>

      <th>
        **Condições**
      </th>

      <th>
        **`external.host`**
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        [`OtelHttpClient1_23`](https://github.com/open-telemetry/semantic-conventions/blob/v1.23.1/docs/http/http-metrics.md)
      </td>

      <td>
        `http.client.request.duration`
      </td>

      <td>
        `http.request.method IS NOT NULL`
      </td>

      <td>
        `${server.address:-unknown}`
      </td>
    </tr>

    <tr>
      <td>
        [`OtelHttpClient1_20`](https://github.com/open-telemetry/opentelemetry-specification/blob/v1.20.0/specification/metrics/semantic_conventions/http-metrics.md)
      </td>

      <td>
        `http.client.duration`
      </td>

      <td>
        `http.method IS NOT NULL`
      </td>

      <td>
        `${net.peer.name:-unknown}`
      </td>
    </tr>

    <tr>
      <td>
        [`OtelRpcClient1_20`](https://github.com/open-telemetry/opentelemetry-specification/blob/v1.20.0/specification/metrics/semantic_conventions/rpc-metrics.md)
      </td>

      <td>
        `rpc.client.duration`
      </td>

      <td>
        `rpc.system IS NOT NULL`
      </td>

      <td>
        `${net.peer.name:-unknown}`
      </td>
    </tr>
  </tbody>
</table>

### métrica: `apm.service.datastore.operation.duration`

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        **Nome**
      </th>

      <th>
        **[Tipo de instrumento](https://docs.newrelic.com/docs/data-apis/understand-data/metric-data/metric-data-type/)**
      </th>

      <th>
        **Unidade ([UCUM](https://ucum.org/ucum))**
      </th>

      <th>
        **Descrição**
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `apm.service.datastore.operation.duration`
      </td>

      <td>
        Distribuição
      </td>

      <td>
        `s`, `ms`, `ns` **\[1]**
      </td>

      <td>
        Duração das chamadas do armazenamento de dados.
      </td>
    </tr>
  </tbody>
</table>

**\[1]**: A unidade da métrica de origem é copiada.

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        **Atributo**
      </th>

      <th>
        **Tipo**
      </th>

      <th>
        **Descrição**
      </th>

      <th>
        **Exemplo**
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `db.system`
      </td>

      <td>
        `string`
      </td>

      <td>
        O produto do sistema de gerenciamento de banco de dados (SGBD) conforme identificado pela instrumentação do cliente.
      </td>

      <td>
        `postgresql`, `mysql`, `mariadb`
      </td>
    </tr>

    <tr>
      <td>
        `db.sql.table`
      </td>

      <td>
        `string`
      </td>

      <td>
        O nome de uma coleção (tabela, contêiner) dentro do banco de dados.
      </td>

      <td>
        `public.users`, `customers`
      </td>
    </tr>

    <tr>
      <td>
        `db.operation`
      </td>

      <td>
        `string`
      </td>

      <td>
        O nome da operação ou comando que está sendo executado.
      </td>

      <td>
        `findAndModify`, `HMSET`, `SELECT`
      </td>
    </tr>

    <tr>
      <td>
        `db.query.summary`
      </td>

      <td>
        `string`
      </td>

      <td>
        Resumo de baixa cardinalidade de uma consulta ao banco de dados.
      </td>

      <td>
        `SELECT wuser_table`, `INSERT shipping_details`, `SELECT order`
      </td>
    </tr>
  </tbody>
</table>

#### fontes métricas

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        **Convenção Semântica**
      </th>

      <th>
        **Nome da métrica**
      </th>

      <th>
        **Condições**
      </th>

      <th>
        **`db.system`**
      </th>

      <th>
        **`db.sql.table`**
      </th>

      <th>
        **`db.operation`**
      </th>

      <th>
        **`db.query.summary`**
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        [`OtelDbClient1_33`](https://github.com/open-telemetry/semantic-conventions/blob/v1.33.0/docs/database/database-metrics.md)
      </td>

      <td>
        `db.client.operation.duration`
      </td>

      <td>
        `db.system.name IS NOT NULL`
      </td>

      <td>
        `${db.system.name}`
      </td>

      <td>
        `${db.stored_procedure.name:-${db.collection.name:-${__db_summary_to_sql_table__}}}`
      </td>

      <td>
        `${db.operation.name:-${__db_summary_to_operation__:-unknown}}`
      </td>

      <td>
        `${db.query.summary}`
      </td>
    </tr>
  </tbody>
</table>

### Funções auxiliares

Funções auxiliares são referências a bits de lógica de alinhamento de atributos que são mais complexas do que simples referências de atributos.

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        **Função**
      </th>

      <th>
        **Descrição**
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `__http_error_status_code_or_null__`
      </td>

      <td>
        Retorna o valor da string de `http.status_code if >= 500`
      </td>
    </tr>

    <tr>
      <td>
        `__rpc_error_status_code_or_null__`
      </td>

      <td>
        Retorna o valor da string de rpc.grpc.status\_code se em conjunto: `[2,4,12,13,14,15]`
      </td>
    </tr>

    <tr>
      <td>
        `__db_summary_to_operation__`
      </td>

      <td>
        Retorna a primeira palavra em `db.query.summary` no conjunto (sem distinção de maiúsculas e minúsculas): `[alter,call,create,delete,drop,exec,execute,insert,merge,select,set,update]`
      </td>
    </tr>

    <tr>
      <td>
        `__db_summary_to_sql_table__`
      </td>

      <td>
        Retorna a primeira palavra em `db.query.summary` NÃO no conjunto (sem distinção de maiúsculas e minúsculas): `[alter,call,create,delete,drop,exec,execute,insert,merge,select,set,update]`
      </td>
    </tr>

    <tr>
      <td>
        `__null__`
      </td>

      <td>
        espaço reservado para `null`
      </td>
    </tr>
  </tbody>
</table>

## Sinais clássicos [#golden-signals]

Os sinais clássicos de taxas de transferência, tempo de resposta e taxas de erros aparecem em diversos locais da interface do OpenTelemetry APM. Quando usados, eles são calculados da seguinte forma:

Para métrica, a consulta assume que os dados estão em conformidade com as convenções semânticas [HTTP métrica](https://opentelemetry.io/docs/specs/semconv/http/http-metrics/) ou [RPC métrica](https://opentelemetry.io/docs/specs/semconv/rpc/rpc-metrics/) .

Para spans, as consultas são genéricas, utilizando apenas o modelo de dados de span de nível superior. Os spans são contados para taxas de transferência e tempo de resposta se forem spans de entrada raiz em um serviço, computando usando uma heurística de `WHERE span.kind = server OR span.kind = consumer`. Os spans serão erros se tiverem um código de status `ERROR` (por exemplo, `otel.status_code = ERROR`).

## Dados restritos com filtros [#narrow-with-filters]

Várias páginas incluem uma barra de filtros, com opções como **Limitar dados para...**. Isso permite que você filtre consultas na página de acordo com os critérios. Por exemplo, você pode restringir uma implantação canary específica filtrando por `service.version='1.2.3-canary'`. Os filtros são preservados ao navegar entre as páginas.

## Métricas clássicas

Métricas clássicas são versões de baixa cardinalidade de sinais clássicos de dados, como métricas HTTP/RPC. Eles preenchem várias experiências de plataforma, incluindo o Explorer da entidade, a página de atividades da carga de trabalho e a página de detalhes do Monitoramento de alterações. Essas métricas usam nomes como `newrelic.goldenmetrics.ext.service.*`.

<Callout variant="important">
  Historicamente, as métricas clássicas OpenTelemetry foram calculadas a partir de spans. Os vãos geralmente são amostrados, então eles fornecem apenas uma imagem parcial. Agora que as métricas estão amplamente disponíveis, as métricas clássicas são calculadas usando dados métricos em vez de dados span.
</Callout>