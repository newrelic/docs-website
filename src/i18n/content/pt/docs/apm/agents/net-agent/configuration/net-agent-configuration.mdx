---
title: Configuração do agente .NET
tags:
  - Agents
  - NET agent
  - Configuration
metaDescription: 'How to configure the New Relic .NET agent using newrelic.config, including startup and instrumentation options, and disabling unwanted features.'
freshnessValidatedDate: never
translationType: machine
---

Você poderá configurar nosso agente .NET para se adequar ao seu ambiente depois de [criar uma conta New Relic](https://newrelic.com/signup) (é grátis, para sempre) e [instalar o agente .NET](/install/dotnet).

## Visão geral da configuração [#config-overview]

As opções de configuração do agente APM permitem controlar alguns aspectos de como o agente se comporta. Algumas dessas opções de configuração fazem parte do processo básico de instalação (como definir a chave de licença e o nome do aplicativo), mas a maioria são configurações mais avançadas, como definir um nível de log, configurar o acesso ao host proxy, excluir determinados atributos e ativar distributed tracing.

O agente .NET obtém sua configuração do arquivo `newrelic.config` , que é gerado como parte do [processo de instalação](/docs/agents/net-agent/installation/install/dotnet). Por padrão, apenas um arquivo global `newrelic.config` é criado, mas você também pode criar arquivos locais de aplicativo `newrelic.config` para um controle mais preciso sobre um sistema com vários aplicativos. Outras maneiras de definir opções de configuração incluem: usar variáveis de ambiente ou definir a configuração no lado do servidor a partir da interface. Para mais informações sobre as várias opções de configuração e o que substitui o quê, consulte [Precedência de configurações](/docs/agents/net-agent/configuration/net-agent-configuration#config-options-precedence).

O suporte para .NET framework e .NET Core usa as mesmas opções de configuração e possui o mesmo recurso APM, salvo indicação em contrário.

Se você fizer alterações no arquivo de configuração e quiser validar se ele está no formato correto, poderá verificá-lo no arquivo XSD (por exemplo, em `C:\ProgramData\New Relic\.NET Agent\newrelic.xsd` para Windows) com qualquer validador XSD.

<Callout variant="important">
  <DNT>**For IIS**</DNT>: após alterar o arquivo `newrelic.config` ou `app.config` , execute um `IISRESET` em um prompt de comando administrativo. Os ajustes de nível de log não exigem redefinição.
</Callout>

## Métodos de configuração e níveis de precedência [#config-options-precedence]

Após a instalação, o arquivo de configuração do agente .NET (`newrelic.config`) se aplica a todos os aplicativos de monitor, mas você pode configurar o agente de outras maneiras. Aqui está um diagrama que mostra como diferentes opções de configuração têm precedência umas sobre as outras:

<img title="net-config-precedence-core.png" alt="New Relic .NET agent configuration settings precedence" src="/images/apm_diagram_net-agent-configuration-hierarchy.webp" />

<figcaption>
  Este diagrama explica a ordem de precedência para diferentes maneiras de configurar o agente .NET.
</figcaption>

Aqui estão detalhes sobre os métodos de configuração mostrados no diagrama e seus níveis de precedência:

<table>
  <thead>
    <tr>
      <th style={{ width: "230px" }}>
        <DNT>
          **.NET configuration**
        </DNT>
      </th>

      <th>
        <DNT>
          **Details and precedence**
        </DNT>
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `web.config` ou `app.config` ou `appsettings.json`
      </td>

      <td>
        As definições de configuração definidas nesses arquivos têm precedência mais alta.

        Se o agente estiver desabilitado no `newrelic.config` local ou global:

        * As configurações `NewRelic.AgentEnabled` em `appsettings.json` <DNT>**will enable the agent**</DNT>.
        * As configurações `NewRelic.AgentEnabled` em um arquivo `web.config` ou `app.config` <DNT>**will be ignored**</DNT>.
      </td>
    </tr>

    <tr>
      <td>
        Variáveis ambientais
      </td>

      <td>
        Segunda maior precedência. Para obter mais informações sobre isso, consulte [Variáveis de ambiente .NET](#environment-variables).
      </td>
    </tr>

    <tr>
      <td>
        Configuração no lado do servidor
      </td>

      <td>
        Terceira maior precedência. Um número limitado de [configurações no lado do servidor](/docs/agents/manage-apm-agents/configuration/server-side-agent-configuration) está disponível; as outras configurações virão de outras fontes de configuração.
      </td>
    </tr>

    <tr id="local">
      <td>
        Local do aplicativo `newrelic.config`
      </td>

      <td>
        Quarta maior precedência. Você pode criar arquivos `newrelic.config` locais de aplicativo para configurar aplicativos individuais em um sistema com vários aplicativos. Esses arquivos de configuração local substituem as configurações no arquivo `newrelic.config` global.

        O agente procura arquivos de configuração locais do aplicativo nos seguintes diretórios, nesta ordem:

        * Um diretório especificado no arquivo `web.config` ou `app.config` com a propriedade `NewRelic.ConfigFile`

        * O diretório raiz do aplicativo da web (com `app.config` ou `web.config`)

        * O diretório que contém o arquivo executável do seu aplicativo

          Observe que o arquivo de configuração local do aplicativo deve estar completo e validado no arquivo XSD (por exemplo, em `C:\ProgramData\New Relic\.NET Agent\newrelic.xsd` para Windows).
      </td>
    </tr>

    <tr>
      <td>
        Padrão (global) `newrelic.config`
      </td>

      <td>
        Fonte padrão e a precedência mais baixa. Configurará todos os aplicativos em um host na ausência de outros arquivos de configuração. O arquivo de configuração global está localizado no diretório inicial do agente New Relic: `%PROGRAMDATA%\New Relic\.NET Agent`
      </td>
    </tr>
  </tbody>
</table>

## Variáveis de ambiente obrigatórias [#environment-variables]

Nosso agente .NET depende de variáveis de ambiente para informar ao .NET Common Language Runtime (CLR) para anexar o New Relic aos seus processos. Alguns [procedimentos de instalação do agente .NET](/docs/agents/net-agent/installation/new-relic-net-agent-install-introduction) (como o instalador MSI) definirão automaticamente essas variáveis para você; alguns procedimentos exigirão que você os configure manualmente.

<Callout variant="caution">
  Recomendação de segurança: você deve considerar qual usuário pode definir variáveis de ambiente do sistema. Você também deve proteger as contas sob as quais seu aplicativo é executado para evitar que variáveis de ambiente do usuário substituam variáveis de ambiente do sistema
</Callout>

<CollapserGroup>
  <Collapser id="net-framework-env-variables" title="Variáveis de ambiente do .NET framework">
    Para o .NET framework, as seguintes variáveis são necessárias:

    ```ini
    COR_ENABLE_PROFILING=1
    COR_PROFILER={71DA0A04-7777-4EC6-9643-7D28B46A8A41}
    NEWRELIC_INSTALL_PATH="INSERT_THE_PATH_TO_THE_AGENT_DIRECTORY"
    ```

    O instalador do agente Windows .NET (.msi) os adicionará ao IIS por padrão ou como variáveis de ambiente de todo o sistema ao ativar `Instrument All`.

    Ao usar o instalador do agente Windows .NET, certifique-se de que `NEWRELIC_INSTALL_PATH` esteja configurado como `C:\Program Files\New Relic\.NET Agent\`. É aqui que as DLLs do agente são colocadas no sistema.

    Para obter mais detalhes sobre essas variáveis, bem como valores corretos para outros cenários de instalação, consulte [noções básicas sobre variáveis de ambiente do agente .NET](/docs/apm/agents/net-agent/other-installation/understanding-net-agent-environment-variables/).

    Ao instalar o agente por meio do pacote Nuget, o agente requer [um conjunto diferente de variáveis de ambiente](/docs/apm/agents/net-agent/install-guides/install-net-agent-using-nuget/#nuget-framework).
  </Collapser>

  <Collapser id="net-core-env-variables" title="Variáveis de ambiente do .NET Core">
    Para o .NET Core, as seguintes variáveis são obrigatórias:

    <DNT>
      **Linux:**
    </DNT>

    ```ini
    CORECLR_ENABLE_PROFILING=1
    CORECLR_PROFILER={36032161-FFC0-4B61-B559-F6C5D41BAE5A}
    CORECLR_NEWRELIC_HOME=path/to/agent/directory
    CORECLR_PROFILER_PATH="${CORECLR_NEWRELIC_HOME}/libNewRelicProfiler.so"
    ```

    <DNT>
      **Windows (MSI Installer):**
    </DNT>

    ```ini
    CORECLR_ENABLE_PROFILING=1
    CORECLR_PROFILER={36032161-FFC0-4B61-B559-F6C5D41BAE5A}
    NEWRELIC_INSTALL_PATH=C:\Program Files\New Relic\.NET Agent\
    CORECLR_NEWRELIC_HOME=C:\ProgramData\New Relic\.NET Agent\
    ```

    O instalador do agente do Windows .NET adicionará essas variáveis ao IIS por padrão ou como variáveis de ambiente em todo o sistema ao habilitar `Instrument All`. Exceção: `CORECLR_ENABLE_PROFILING` precisa ser definido manualmente para instrumentar um aplicativo .NET Core não hospedado no IIS. Consulte [Compatibilidade e requisitos do .NET Framework](/docs/apm/agents/net-agent/configuration/net-agent-configuration/) para o aplicativo .NET Framework.

    Para obter mais detalhes sobre essas variáveis, bem como valores corretos para outros cenários de instalação, consulte [noções básicas sobre variáveis de ambiente do agente .NET](/docs/apm/agents/net-agent/other-installation/understanding-net-agent-environment-variables/).

    Ao instalar o agente por meio do pacote Nuget no Windows, o agente requer um [conjunto diferente de variáveis de ambiente](/docs/apm/agents/net-agent/install-guides/install-net-agent-using-nuget/#nuget-windows).
  </Collapser>
</CollapserGroup>

Se o seu sistema já usou serviços de monitoramento (não New Relic), você pode ter um &quot;conflito profiler &quot; ao tentar instalar e usar o agente New Relic. Mais detalhes:

<CollapserGroup>
  <Collapser id="profiler-conflicts" title="Explicação do conflito profiler">
    O agente .NET do New Relic depende de variáveis de ambiente para informar ao .NET Common Language Runtime (CLR) para carregar o New Relic em seus processos. As variáveis de ambiente relacionadas à instalação são variáveis da Microsoft, não variáveis da New Relic. Eles podem ser usados por outro criador de perfil .NET e apenas um profiler pode ser anexado a um processo por vez. Por esse motivo, se você usou produtos de monitoramento de aplicativos anteriores, poderá ter [conflitos de perfil](/docs/agents/net-agent/troubleshooting/profiler-conflicts).
  </Collapser>
</CollapserGroup>

Para obter instruções de instalação específicas, consulte a [documentação de instalação do agente .NET](/docs/agents/net-agent/installation/new-relic-net-agent-install-introduction).

## Variáveis de ambiente opcionais [#optional-environment-variables]

Algumas opções de configuração no agente .NET da New Relic podem ser definidas por meio de variáveis de ambiente como uma alternativa à configuração em um arquivo de configuração. Abaixo está uma lista de variáveis de ambiente reconhecidas pelo agente .NET com valores de exemplo.

```ini
NEW_RELIC_LICENSE_KEY=YOUR_LICENSE_KEY
NEW_RELIC_APP_NAME=Descriptive Name
MAX_TRANSACTION_SAMPLES_STORED=500
MAX_EVENT_SAMPLES_STORED=500
NEW_RELIC_DISTRIBUTED_TRACING_ENABLED=true
NEW_RELIC_SPAN_EVENTS_ENABLED=false
NEW_RELIC_SPAN_EVENTS_MAX_SAMPLES_STORED=2000
NEW_RELIC_INFINITE_TRACING_TRACE_OBSERVER_HOST=myhost.infinitetracing.com
NEW_RELIC_LABELS="foo:bar;zip:zap"
NEW_RELIC_PROCESS_HOST_DISPLAY_NAME=Custom Name
NEW_RELIC_HOST=gov-collector.newrelic.com
NEW_RELIC_PROXY_HOST=hostname
NEW_RELIC_PROXY_URI_PATH=path/to/something.aspx
NEW_RELIC_PROXY_PORT=5000
NEW_RELIC_PROXY_USER=YOUR_USER_NAME
NEW_RELIC_PROXY_PASS=YOUR_PROXY_PASSWORD
NEW_RELIC_PROXY_DOMAIN=mydomain.com
NEW_RELIC_PROXY_PASS_OBFUSCATED=YOUR_OBFUSCATED_PROXY_PASSWORD
NEW_RELIC_CONFIG_OBSCURING_KEY=YOUR_OBSCURING_KEY
NEW_RELIC_SEND_DATA_ON_EXIT=true
NEW_RELIC_SEND_DATA_ON_EXIT_THRESHOLD_MS=2000
NEW_RELIC_HIGH_SECURITY=true
NEW_RELIC_DISABLE_SAMPLERS=true
NEW_RELIC_LOG=MyApp.log
NEW_RELIC_LOG_ENABLED=true
NEWRELIC_LOG_LEVEL=info
NEW_RELIC_LOG_CONSOLE=true
NEWRELIC_PROFILER_LOG_DIRECTORY=path\to\a\directory # not configurable via config file
NEWRELIC_LOG_DIRECTORY=path\to\a\directory # Insert a directory where you want to put the agent and profiler logs. You can't set this directory for both agent and profiler logs in the configuration file.
NEW_RELIC_LOG_ROLLING_STRATEGY=day
NEW_RELIC_LOG_MAX_FILE_SIZE_MB=100
NEW_RELIC_LOG_MAX_FILES=2
NEW_RELIC_ERROR_COLLECTOR_IGNORE_ERROR_CODES=401, 403.18
NEW_RELIC_ERROR_COLLECTOR_EXPECTED_ERROR_CODES=401, 501-503
NEW_RELIC_APPLICATION_LOGGING_ENABLED=true
NEW_RELIC_APPLICATION_LOGGING_METRICS_ENABLED=true
NEW_RELIC_APPLICATION_LOGGING_FORWARDING_ENABLED=true
NEW_RELIC_APPLICATION_LOGGING_FORWARDING_CONTEXT_DATA_ENABLED=true
NEW_RELIC_APPLICATION_LOGGING_FORWARDING_CONTEXT_DATA_INCLUDE="myCustomAttribute1, myOtherCustomAttribute*"
NEW_RELIC_APPLICATION_LOGGING_FORWARDING_CONTEXT_DATA_EXCLUDE="myCustomAttribute2, myOtherCustomAttributeMoreSpecificName"
NEW_RELIC_APPLICATION_LOGGING_FORWARDING_MAX_SAMPLES_STORED=10000
NEW_RELIC_APPLICATION_LOGGING_FORWARDING_LOG_LEVEL_DENYLIST="debug, warn"
NEW_RELIC_APPLICATION_LOGGING_LOCAL_DECORATING_ENABLED=true
NEW_RELIC_ALLOW_ALL_HEADERS=true
NEW_RELIC_ATTRIBUTES_ENABLED=true
NEW_RELIC_ATTRIBUTES_INCLUDE=request.headers.*,foo.bar
NEW_RELIC_ATTRIBUTES_EXCLUDE=request.headers.cookie,request.headers.authorization
NEW_RELIC_UTILIZATION_DETECT_AWS=true
NEW_RELIC_UTILIZATION_DETECT_AZURE=true
NEW_RELIC_UTILIZATION_DETECT_GCP=true
NEW_RELIC_UTILIZATION_DETECT_PCF=true
NEW_RELIC_UTILIZATION_DETECT_DOCKER=true
NEW_RELIC_UTILIZATION_DETECT_KUBERNETES=true
NEW_RELIC_FORCE_NEW_TRANSACTION_ON_NEW_THREAD=true
NEW_RELIC_CODE_LEVEL_METRICS_ENABLED=true
NEW_RELIC_AI_MONITORING_ENABLED=true
NEW_RELIC_AI_MONITORING_RECORD_CONTENT_ENABLED=true
NEW_RELIC_CLOUD_AWS_ACCOUNT_ID=123456789012
```

<CollapserGroup>
  <Collapser id="net-framework-32on64-env-variables" title="Suporte a aplicativos de 32 bits em sistemas de 64 bits.">
    O instalador MSI de 64 bits para o agente .NET da New Relic instala automaticamente o conjunto profiler de 32 bits junto com o conjunto de 64 bits e, a partir da versão 10.16.0, habilita automaticamente o suporte de 32 bits para IIS. Para aplicativos não hospedados no IIS, você pode definir manualmente a variável de ambiente necessária.

    ```ini
    COR_PROFILER_PATH_32="C:\Program Files (x86)\New Relic\.NET Agent\NewRelic.Profiler.dll"
    ```
  </Collapser>
</CollapserGroup>

Se você estiver usando New Relic CodeStream para monitor o desempenho do seu IDE, talvez você também queira [associar o repositório aos seus serviços](/docs/codestream/observability/repo-association) e [associar SHAs de compilação ou tags de lançamento aos erros](/docs/codestream/observability/error-investigation/#buildsha).

## Configuração Errors Inbox [#errors-inbox-configuration]

Definir uma das tags a seguir ajudará você a identificar quais versões do seu software estão produzindo erros.

* `NEW_RELIC_METADATA_SERVICE_VERSION` irá criar tag.service.version nos dados do evento contendo a versão do seu código que está implantada, em muitos casos uma versão semântica como 1.2.3, mas nem sempre.
* `NEW_RELIC_METADATA_RELEASE_TAG `criará tags.releaseTag nos dados do evento contendo a tag de lançamento (como v0.1.209 ou release-209).
* `NEW_RELIC_METADATA_COMMIT` criará tag.commit nos dados do evento contendo o commit sha. O sha inteiro pode ser usado ou apenas os primeiros sete caracteres (por exemplo, 734713b).

Uma próxima versão da Errors Inbox rastreará automaticamente quais versões do seu software estão produzindo erros. Quaisquer dados de versão também serão exibidos no [CodeStream](/docs/codestream/how-use-codestream/performance-monitoring/#buildsha).

## Opções de configuração, newrelic.config [#setup]

Use estas opções para instalar e configurar seu agente por meio do arquivo `newrelic.config` . O agente .NET oferece suporte às seguintes categorias de opções de configuração:

* [Elemento de configuração](#configuration)
* [Elemento de serviço](#service)
* [Elemento-chave obscurecendo](#obscuring-key)
* [Elemento proxy](#proxy)
* [Elemento log](#log)
* [Elemento do aplicativo (configuração)](#application-configuration)
* [Elemento de transmissão de dados](#data-transmission)
* [Nome de anfitrião](#host-name)

### Elemento de configuração [#configuration]

O elemento raiz do documento de configuração é um elemento `configuration` .

```xml
<configuration xmlns="urn:newrelic-config"
  agentEnabled="true"
  maxStackTraceLines="50">
```

O elemento `configuration` suporta o seguinte atributo:

<CollapserGroup>
  <Collapser id="config-agentEnabled" title="agentEnabled">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Ative ou desative o agente New Relic.
  </Collapser>

  <Collapser id="config-maxStackTraceLines" title="maxStackTraceLines">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Inteiro
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `80`
          </td>
        </tr>
      </tbody>
    </table>

    O número máximo de quadros stack a serem trace em qualquer dump stack .
  </Collapser>
</CollapserGroup>

### Elemento de serviço [#service]

O primeiro filho do elemento `configuration` é um elemento `service` . O elemento de serviço configura a conexão do agente com o serviço New Relic.

```xml
<service licenseKey="YOUR_LICENSE_KEY"
  sendEnvironmentInfo="true"
  syncStartup="false"
  sendDataOnExit="false"
  sendDataOnExitThreshold="60000"
  autoStart="true"/>
```

O elemento `service` suporta o seguinte atributo:

<CollapserGroup>
  <Collapser
    id="service-licenseKey"
    title={<>LicenseKey <strong>(obrigatório)</strong></>
    }
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Corda
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            (nenhum)
          </td>
        </tr>
      </tbody>
    </table>

    Sua [chave de licença](/docs/apis/intro-apis/new-relic-api-keys/#ingest-license-key) do New Relic. A New Relic usa a chave de licença para combinar os dados do seu aplicativo com a conta correta na interface. Defina a chave de licença por meio da variável de ambiente.

    Como alternativa, defina a variável de ambiente `NEW_RELIC_LICENSE_KEY` no ambiente do aplicativo:

    ```ini
    NEW_RELIC_LICENSE_KEY=YOUR_LICENSE_KEY
    ```
  </Collapser>

  <Collapser id="service-sendEnvironmentInfo" title="sendEnvironmentInfo">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Instrui o agente a registrar informações do ambiente de execução. As informações do ambiente incluem sistema operacional, versão do agente e quais assemblies estão disponíveis.
  </Collapser>

  <Collapser id="service-syncStartup" title="syncStartup">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Bloqueie a inicialização do aplicativo até que o agente se conecte ao New Relic. Se definido como `true`, a primeira transação poderá levar muito mais tempo para ser concluída, pois será bloqueada até que a conexão com o New Relic seja concluída.
  </Collapser>

  <Collapser id="service-sendDataOnExit" title="sendDataOnExit">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Bloqueie o encerramento do aplicativo enquanto o agente inicia um ciclo final de coleta e envia todos os dados para a New Relic.

    Como alternativa, defina a variável de ambiente `NEW_RELIC_SEND_DATA_ON_EXIT` no ambiente do aplicativo:

    ```ini
    NEW_RELIC_SEND_DATA_ON_EXIT=true
    ```
  </Collapser>

  <Collapser id="service-sendDataOnExitThreshold" title="sendDataOnExitThreshold">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Inteiro
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `60000`
          </td>
        </tr>

        <tr>
          <th>
            Unidade
          </th>

          <td>
            Milissegundos
          </td>
        </tr>
      </tbody>
    </table>

    O tempo mínimo que o processo deve ser executado antes que o agente bloqueie seu encerramento. Esta configuração se aplica apenas quando [`sendDataOnExit`](#service-sendDataOnExit) é `true`.

    Como alternativa, defina a variável de ambiente `NEW_RELIC_SEND_DATA_ON_EXIT_THRESHOLD_MS` no ambiente do aplicativo:

    ```ini
    NEW_RELIC_SEND_DATA_ON_EXIT_THRESHOLD_MS=2000
    ```
  </Collapser>

  <Collapser id="service-completeTransactionsOnThread" title="completeTransactionsOnThread">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Se `false`, o agente usará um encadeamento de pool para concluir o processamento da transação.

    Se for verdade, o agente concluirá o processamento da transação no thread de solicitação.
  </Collapser>

  <Collapser id="service-forceNewTransactionOnNewThread" title="forceNewTransactionOnNewThread">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Se `false`, o agente tentará reutilizar a transação existente quando métodos instrumentados customizados forem encontrados em cenários assíncronos/threaded.

    Se `true`, o agente tenta criar uma nova transação quando métodos instrumentados customizados são encontrados em cenários assíncronos/threaded.

    Como alternativa, a variável de ambiente `NEW_RELIC_FORCE_NEW_TRANSACTION_ON_NEW_THREAD` pode ser usada para controlar esse comportamento.

    ```ini
    NEW_RELIC_FORCE_NEW_TRANSACTION_ON_NEW_THREAD=true
    ```
  </Collapser>

  <Collapser id="service-requestTimeout" title="requestTimeout">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Inteiro
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `2000` (com [`sendDataOnExit`](#service-sendDataOnExit) ativado)

            `120000` (com [`sendDataOnExit`](#service-sendDataOnExit) desativado)
          </td>
        </tr>

        <tr>
          <th>
            Unidade
          </th>

          <td>
            Milissegundos
          </td>
        </tr>
      </tbody>
    </table>

    O tempo limite da solicitação do agente ao se comunicar com o New Relic.
  </Collapser>

  <Collapser id="service-autoStart" title="autoStart">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Inicie automaticamente o agente .NET quando o primeiro método instrumentado for atingido.
  </Collapser>

  <Collapser id="service-host" title="hospedar">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Corda
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            (nenhum)
          </td>
        </tr>
      </tbody>
    </table>

    Fornece a capacidade de configurar um [endpointcompatível com FedRAMP](/docs/security/security-privacy/compliance/fedramp-compliant-endpoints/) para uso do agente, com o valor `gov-collector.newrelic.com`.

    ```xml
    <service licenseKey="YOUR_LICENSE_KEY"
      host="gov-collector.newrelic.com" />
    ```

    Você também pode usar a variável de ambiente `NEW_RELIC_HOST`.

    ```ini
    NEW_RELIC_HOST=gov-collector.newrelic.com
    ```
  </Collapser>
</CollapserGroup>

### Elemento-chave obscurecendo [#obscuring-key]

O elemento `obscuringKey` é um filho opcional do elemento `service` . O agente .NET usa esse valor para desofuscar valores de configuração suportados. Por exemplo, quando uma [senha de proxy ofuscada](#proxy-password) é fornecida, ela será desofuscada usando esta chave.

```xml
<service licenseKey="YOUR_LICENSE_KEY">
  <obscuringKey>OBSCURING_KEY</obscuringKey>
</service>
```

A chave de obscurecimento também pode ser configurada definindo a variável de ambiente `NEW_RELIC_CONFIG_OBSCURING_KEY` .

<Callout variant="caution">
  Recomendação de segurança: A colocação da chave obscurecida no mesmo arquivo de configuração que um valor ofuscado pode representar um risco de segurança. Considere colocar a chave oculta e [a senha do proxy ofuscada](#proxy-password) em variáveis de ambiente e limitar o acesso às variáveis de ambiente em seu ambiente.
</Callout>

### Elemento proxy [#proxy]

O elemento `proxy` é um filho opcional do elemento `service` . O elemento `proxy` é usado quando o agente se comunica com o serviço backend da New Relic por meio de um proxy.

```xml
<service licenseKey="YOUR_LICENSE_KEY">
  <proxy
    host="hostname"
    port="PROXY_PORT"
    uriPath="path/to/something.aspx"
    domain="mydomain.com"
    user="PROXY_USERNAME"
    password="PROXY_PASSWORD"
    passwordObfuscated="OBFUSCATED_PROXY_PASSWORD"/>
</service>
```

O elemento `proxy` suporta o seguinte atributo:

<CollapserGroup>
  <Collapser id="proxy-host" title="hospedar">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Corda
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            (nenhum)
          </td>
        </tr>
      </tbody>
    </table>

    Define o host proxy.

    Como alternativa, defina a variável de ambiente `NEW_RELIC_PROXY_HOST` no ambiente do aplicativo.
  </Collapser>

  <Collapser id="proxy-port" title="port">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Inteiro
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `8080`
          </td>
        </tr>
      </tbody>
    </table>

    Define a porta proxy.

    Como alternativa, defina a variável de ambiente `NEW_RELIC_PROXY_PORT` no ambiente do aplicativo.
  </Collapser>

  <Collapser id="proxy-uripath" title="uriPath">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Corda
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            (nenhum)
          </td>
        </tr>
      </tbody>
    </table>

    Opcionalmente, defina um caminho de URI de proxy.

    Como alternativa, defina a variável de ambiente `NEW_RELIC_PROXY_URI_PATH` no ambiente do aplicativo.
  </Collapser>

  <Collapser id="proxy-domain" title="domínio">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Corda
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            (nenhum)
          </td>
        </tr>
      </tbody>
    </table>

    Opcionalmente, defina um domínio para usar ao autenticar com o servidor proxy.

    Como alternativa, defina a variável de ambiente `NEW_RELIC_PROXY_DOMAIN` no ambiente do aplicativo.
  </Collapser>

  <Collapser id="proxy-user" title="usuário">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Corda
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            (nenhum)
          </td>
        </tr>
      </tbody>
    </table>

    Opcionalmente, defina um nome de usuário para autenticação.

    Como alternativa, defina a variável de ambiente `NEW_RELIC_PROXY_USER` no ambiente do aplicativo.
  </Collapser>

  <Collapser id="proxy-password" title="senha">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Corda
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            (nenhum)
          </td>
        </tr>
      </tbody>
    </table>

    Opcionalmente, defina uma senha para autenticação.

    Como alternativa, defina a variável de ambiente `NEW_RELIC_PROXY_PASS` no ambiente do aplicativo.
  </Collapser>

  <Collapser id="proxy-password" title="passwordObfuscated">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Corda
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            (nenhum)
          </td>
        </tr>
      </tbody>
    </table>

    Para segurança adicional, o agente .NET suporta o uso de uma senha de proxy ofuscada com o atributo `passwordObfuscated` . A senha do proxy ofuscada é gerada usando o seguinte comando [CLI do New Relic](https://github.com/newrelic/newrelic-cli) :

    ```bash
    newrelic agent config obfuscate --key OBSCURING_KEY --value "PLAIN_TEXT_PROXY_PASSWORD"
    ```

    Como alternativa, defina a variável de ambiente `NEW_RELIC_PROXY_PASS_OBFUSCATED` no ambiente do aplicativo.

    <Callout variant="important">
      Ao usar uma senha de proxy ofuscada, a [chave de ocultação](#obscuring-key) também deve ser configurada.
    </Callout>
  </Collapser>
</CollapserGroup>

### Elemento log [#log]

O elemento `log` é filho do elemento `configuration` . O elemento `log` configura o logging do New Relic. O agente gera seu próprio arquivo de log para manter suas informações de logging separadas dos logs do seu aplicativo.

```xml
<log enabled="true"
  level="info"
  auditLog="false"
  console="false"
  directory="PATH\TO\LOG\DIRECTORY"
  fileName="FILENAME.log" />
```

O elemento `log` suporta o seguinte atributo:

<CollapserGroup>
  <Collapser id="log-enabled" title="habilitado">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Quando definido como `false`, todo o logging é desabilitado. Como alternativa, defina a variável de ambiente `NEW_RELIC_LOG_ENABLED` no ambiente do aplicativo.
  </Collapser>

  <Collapser id="log-level" title="nível">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Corda
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `info`
          </td>
        </tr>
      </tbody>
    </table>

    Define o nível de detalhe registrado no arquivo de log. Os valores possíveis, em ordem crescente de detalhes, são:

    * `off`

    * `error`

    * `warn`

    * `info`

    * `debug`

    * `finest`

    * `all`

      Como alternativa, defina a variável de ambiente `NEWRELIC_LOG_LEVEL` no ambiente do aplicativo.

      <Callout variant="important">
        Aumentar o nível de log aumentará o impacto no desempenho do New Relic.
      </Callout>
  </Collapser>

  <Collapser id="log-auditLog" title="auditLog">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Registra todos os dados enviados e recebidos do New Relic em um arquivo de log auditlog e no arquivo de log padrão. Ignorado se `enabled` for definido como `false` ou `console` for definido como `true`.
  </Collapser>

  <Collapser id="log-console" title="console">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Envie a mensagem do log para o console em vez do arquivo de log (nas versões do agente anteriores à 10.35.0, os logs são enviados para o console e para o arquivo de log). Ignorado se `enabled` estiver definido como `false`. Como alternativa, defina a variável de ambiente `NEW_RELIC_LOG_CONSOLE` no ambiente do aplicativo.

    O logging do console no profiler é limitado ao nível `info` e superior devido a considerações de desempenho.
  </Collapser>

  <Collapser id="log-directory" title="diretório">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Corda
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `C:\ProgramData\New Relic\.NET Agent\Logs`
          </td>
        </tr>
      </tbody>
    </table>

    O diretório para armazenar o arquivo de log gerado pelo agente. Se isso for omitido, um diretório chamado `Logs` na área de instalação do agente New Relic será usado por padrão.

    Como alternativa, defina a variável de ambiente `NEWRELIC_LOG_DIRECTORY` no ambiente do aplicativo. Você também pode enviar o log do profiler para um diretório personalizado, mas só pode fazer isso com a variável de ambiente `NEWRELIC_PROFILER_LOG_DIRECTORY` no ambiente do aplicativo:

    ```ini
    NEWRELIC_LOG_DIRECTORY=path\to\a\directory
    NEWRELIC_PROFILER_LOG_DIRECTORY=path\to\a\directory # not configurable via config file
    ```
  </Collapser>

  <Collapser id="log-fileName" title="fileName">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Corda
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            (nenhum)
          </td>
        </tr>
      </tbody>
    </table>

    Define um nome para o arquivo de log. Se você não definir um `fileName`, o nome será derivado do nome do processo de monitoramento.

    Como alternativa, defina a variável de ambiente `NEW_RELIC_LOG` no ambiente do aplicativo:

    ```ini
    NEW_RELIC_LOG=MyApp.log
    ```
  </Collapser>

  <Collapser id="log-logRollingStrategy" title="logRollingStrategy">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Corda
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `size`
          </td>
        </tr>
      </tbody>
    </table>

    Define a estratégia de rolagem do arquivo de log do agente. Os valores possíveis são:

    * `size` (padrão): o arquivo de log é transferido quando atinge o tamanho especificado em `maxLogFileSizeMB`.

    * `day`: o arquivo de log é transferido à meia-noite.

      Como alternativa, defina a variável de ambiente `NEW_RELIC_LOG_ROLLING_STRATEGY` no ambiente do aplicativo:

      ```ini
      NEW_RELIC_LOG_ROLLING_STRATEGY=day
      ```

      Compatível com o agente .NET v10.21.0 e superior.
  </Collapser>

  <Collapser id="log-logMaxFiles" title="logMaxFiles">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Inteiro
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `4`
          </td>
        </tr>
      </tbody>
    </table>

    Define o número de arquivo de log do agente a ser retido por instância do agente. Vários aplicativos em execução no mesmo host criarão, cada um, esse número de arquivos. Quando o número máximo de arquivos de log for atingido, o arquivo de log mais antigo será excluído. Um valor `0` especifica que não há número máximo de arquivos de log.

    Como alternativa, defina a variável de ambiente `NEW_RELIC_LOG_MAX_FILES` no ambiente do aplicativo:

    ```ini
    NEW_RELIC_LOG_MAX_FILES=2
    ```

    Compatível com o agente .NET v10.21.0 e superior.
  </Collapser>

  <Collapser id="log-maxLogFileSizeMB" title="maxLogFileSizeMB">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Inteiro
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            50
          </td>
        </tr>
      </tbody>
    </table>

    Define o tamanho máximo do arquivo de log do agente em megabytes antes de ele ser transferido. Válido somente quando `logRollingStrategy` estiver definido como `size`. Um valor `0` especifica que não há tamanho máximo de arquivo de log.

    Como alternativa, defina a variável de ambiente `NEW_RELIC_LOG_MAX_FILE_SIZE_MB` no ambiente do aplicativo:

    ```ini
    NEW_RELIC_LOG_MAX_FILE_SIZE_MB=100
    ```

    Compatível com o agente .NET v10.21.0 e superior.
  </Collapser>
</CollapserGroup>

### Elemento do aplicativo (obrigatório) [#application-configuration]

O elemento `application` é filho do elemento `configuration` . Este elemento obrigatório define o nome do seu aplicativo e desabilita ou habilita a amostragem.

<CollapserGroup>
  <Collapser id="app-name" title="nome">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Corda
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `My Application`
          </td>
        </tr>
      </tbody>
    </table>

    O [nome do seu aplicativo .NET](/docs/agents/net-agent/installation-and-configuration/naming-your-net-application) é filho do elemento `application` . A New Relic agregará seus dados de acordo com este nome. Por exemplo, se você tiver dois aplicativos em execução chamados `AppA` e `AppB`, você verá dois aplicativos na interface do New Relic: `AppA` e `AppB`.

    Você também pode atribuir [até três nomes](/docs/agents/manage-apm-agents/app-naming/use-multiple-names-app) ao seu aplicativo. O primeiro nome é o nome principal. Por exemplo:

    ```xml
    <application>
      <name>MY APPLICATION PRIMARY</name>
      <name>SECOND APP NAME</name>
      <name>THIRD APP NAME</name>
    </application>
    ```

    Como alternativa, defina a variável de ambiente `NEW_RELIC_APP_NAME` no ambiente do aplicativo:

    ```ini
    NEW_RELIC_APP_NAME=Descriptive Name
    ```

    Para vários nomes:

    ```ini
    NEW_RELIC_APP_NAME="App Name, App Name 2, App Name 3"
    ```
  </Collapser>

  <Collapser id="app-disableSamplers" title="disableSamplers">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Os amostradores coletam informações sobre o consumo de memória e CPU. Defina como `true` para desativar a amostragem.

    Como alternativa, defina a variável de ambiente `NEW_RELIC_DISABLE_SAMPLERS` no ambiente do aplicativo:

    ```ini
    NEW_RELIC_DISABLE_SAMPLERS=true
    ```
  </Collapser>
</CollapserGroup>

### Elemento de transmissão de dados [#data-transmission]

O elemento `dataTransmission` é filho do elemento `configuration` . Este elemento afeta a forma como os dados são enviados para o New Relic e pode ser usado se você tiver requisitos específicos de transmissão de dados.

```xml
<dataTransmission
  putForDataSend="false"
  compressedContentEncoding="deflate"/>
```

O elemento `dataTransmission` suporta o seguinte atributo:

<CollapserGroup>
  <Collapser id="data-transmission-putfordatasend" title="putForDataSend">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Define o método HTTP usado ao enviar dados para o New Relic. Defina como `true` para ativar o uso do método `PUT` ao enviar dados. O método `POST` é usado por padrão.
  </Collapser>
</CollapserGroup>

### Nome de anfitrião

Se o rótulo do nome do host padrão na interface do usuário do APM não for útil, você poderá decorar esse nome na interface do usuário do New Relic com um nome de exibição. Depois que o processo do aplicativo for reiniciado e o agente .NET reportar novamente, o nome de exibição aparecerá na lista suspensa <DNT>**Servers**</DNT> . Essa configuração de nome de host não afeta a lista de hosts na [página <DNT>**Summary**</DNT> do seu aplicativo](/docs/apm/applications-menu/monitoring/apm-overview-page-view-transaction-apdex-usage-data).

Para definir um nome de exibição, escolha uma das opções a seguir. A variável de ambiente tem precedência sobre o valor do arquivo de configuração. Em seguida, reinicie seu aplicativo para ver suas alterações na interface do New Relic.

<CollapserGroup>
  <Collapser id="host-name-config" title="Definir usando arquivo de configuração">
    Defina o atributo `displayName` no elemento `processHost` em `newrelic.config`. O elemento `processHost` é filho do elemento `configuration` .

    ```xml
    <configuration . . . >
      <processHost displayName="CUSTOM_NAME" />
    </configuration>
    ```
  </Collapser>

  <Collapser id="host-name-env_variable" title="Definir usando variável de ambiente">
    Defina a variável de ambiente `NEW_RELIC_PROCESS_HOST_DISPLAY_NAME` :

    ```ini
    NEW_RELIC_PROCESS_HOST_DISPLAY_NAME="CUSTOM_NAME"
    ```
  </Collapser>
</CollapserGroup>

## Utilização da plataforma em nuvem [#cloud-platform-util]

O elemento de configuração `utilization` controla como o agente coleta informações de utilização e as envia ao serviço New Relic para determinar o preço. O agente pode coletar informações de instâncias EC2 da Amazon Web Services (AWS), contêiner Docker , Microsoft Azure, Google Cloud Platform, Pivotal Cloud Foundry e Kubernetes.

```xml
<configuration . . . >
  <utilization detectAws="true" detectAzure="true" detectGcp="true" detectPcf="true" detectDocker="true" detectKubernetes="true" />
</configuration>
```

O elemento `utilization` suporta o seguinte atributo:

<CollapserGroup>
  <Collapser id="detectAws" title="detectAws">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Determina se o agente pesquisa a API de metadados da AWS.

    Como alternativa, esse comportamento pode ser controlado por meio da variável de ambiente `NEW_RELIC_UTILIZATION_DETECT_AWS` :

    ```ini
    NEW_RELIC_UTILIZATION_DETECT_AWS=false
    ```
  </Collapser>

  <Collapser id="detectAzure" title="detectAzure">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Determina se o agente pesquisa a API de metadados do Microsoft Azure.

    Como alternativa, esse comportamento pode ser controlado por meio da variável de ambiente `NEW_RELIC_UTILIZATION_DETECT_AZURE` :

    ```ini
    NEW_RELIC_UTILIZATION_DETECT_AZURE=false
    ```
  </Collapser>

  <Collapser id="detectGcp" title="detectGcp">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Determina se o agente pesquisa a API de metadados do GCP.

    Como alternativa, esse comportamento pode ser controlado por meio da variável de ambiente `NEW_RELIC_UTILIZATION_DETECT_GCP` :

    ```ini
    NEW_RELIC_UTILIZATION_DETECT_GCP=false
    ```
  </Collapser>

  <Collapser id="detectPcf" title="detectPcf">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Determina se o agente pesquisa informações de PCF a partir de variáveis de ambiente.

    Como alternativa, esse comportamento pode ser controlado por meio da variável de ambiente `NEW_RELIC_UTILIZATION_DETECT_PCF` :

    ```ini
    NEW_RELIC_UTILIZATION_DETECT_PCF=false
    ```
  </Collapser>

  <Collapser id="detectDocker" title="detectDocker">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Determina se o agente lê informações Docker do sistema de arquivos.

    Como alternativa, esse comportamento pode ser controlado por meio da variável de ambiente `NEW_RELIC_UTILIZATION_DETECT_DOCKER` :

    ```ini
    NEW_RELIC_UTILIZATION_DETECT_DOCKER=false
    ```
  </Collapser>

  <Collapser id="detectKubernetes" title="detectKubernetes">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Determina se o agente pesquisa informações do Kubernetes a partir de variáveis de ambiente.

    Como alternativa, esse comportamento pode ser controlado por meio da variável de ambiente `NEW_RELIC_UTILIZATION_DETECT_KUBERNETES` :

    ```ini
    NEW_RELIC_UTILIZATION_DETECT_KUBERNETES=false
    ```
  </Collapser>
</CollapserGroup>

## Opções de instrumentação [#instrumentation]

Utilize estas opções para configurar quais elementos da sua aplicação e ambiente serão instrumentados. O New Relic for .NET oferece suporte às seguintes categorias de opções de instrumentação:

* [Elemento de instrumentação](#instrumentation-element)
* [Elemento de regras](#instrumentation-rules)
* [Elemento aplicativo (instrumentação)](#application-instrumentation)
* [Elemento atributo](#agent-attributes)

### Elemento de instrumentação

O elemento `instrumentation` é filho do elemento `configuration` . Por padrão, os processos de trabalho asp do instrumento do agente .NET e as funções web e de trabalho do Microsoft Azure. Para instrumentar outros processos, consulte [aplicativo customizado instrumentado](/docs/agents/net-agent/features/instrumenting-custom-applications).

### Elemento de regras (instrumentação) [#instrumentation-rules]

<Callout variant="important">
  Este recurso está disponível no agente .NET 10.21.0 e superior.
</Callout>

O elemento `rules` é filho do elemento `instrumentation` . O elemento `rules` suporta qualquer número de elementos filhos `ignore`, o que instrui o profiler a NÃO utilizar nenhum método definido no assembly especificado. Os métodos definidos em outras montagens ainda serão instrumentados.

```xml
<instrumentation>
  <rules>
    <ignore assemblyName="NameOfAssemblyToIgnore" />
  </rules>
</instrumentation>
```

A regra `ignore` permite definir opcionalmente um nome de classe. No exemplo a seguir, apenas os métodos definidos em `MyNamespace.MyClass` na montagem `MyAssembly` serão ignorados. Outros métodos em outras classes, tanto dentro desse assembly quanto em outros assemblies, não serão ignorados pelo profiler.

```xml
<instrumentation>
  <rules>
    <ignore assemblyName="MyAssembly" className="MyNamespace.MyClass" />
  </rules>
</instrumentation>
```

Mais de uma regra de ignorar pode ser especificada. O exemplo a seguir desabilita a instrumentação Confluent Kafka e StackExchange Redis .

```xml
<instrumentation>
  <rules>
    <ignore assemblyName="Confluent.Kafka" />
    <ignore assemblyName="StackExchange.Redis" />
  </rules>
</instrumentation>
```

Observe que a instrumentação personalizada não pode ser ignorada pelo elemento `rules` .

### Elemento aplicativo (instrumentação) [#application-instrumentation]

O elemento `applications` é filho do elemento `instrumentation` . O elemento `applications` oferece suporte a elementos filhos `application` que especificam quais aplicativos não-web devem ser usados. O elemento `application` contém um atributo `name` .

<Callout variant="important">
  Isso não é o mesmo que o elemento [`application` (configuração)](#application-configuration) , que é [filho do elemento `configuration`](#application) .
</Callout>

```xml
<instrumentation>
  <applications>
    <application name="MyService1.exe" />
    <application name="MyService2.exe" />
    <application name="MyService3.exe" />
  </applications>
</instrumentation>
```

### Elemento atributo [#agent-attributes]

Um atributo é um par valor principal que determina as propriedades de um evento ou transação. Cada atributo é enviado para APM trace da transação, APM error trace, `Transaction` evento, `TransactionError` evento, `Span` evento ou `PageView` evento. O elemento primário `attributes` habilita ou desabilita a coleta de atributos para o agente .NET e define atributos específicos a serem coletados ou excluídos. Você também pode configurar as definições de atributos pelo destino específico:

* [Coleta de erros](#error-attributes)
* [Evento de transação](#transaction-attributes)
* [Rastreamento da transação](#tracer-attributes)
* [Evento de extensão](#span-attributes)
* [Eventos do agente do Browser](#browser-attributes)

Neste exemplo, o agente exclui todos os atributos cuja chave começa com `myApiKey` (`myApiKey.bar`, `myApiKey.value`) mas coleta o atributo personalizado `myApiKey.foo`.

```xml
<attributes enabled="true">
  <exclude>myApiKey.*</exclude>
  <include>myApiKey.foo</include>
</attributes>
```

Você pode visualizar o atributo .NET APM na página [de atributo do agente .NET](/docs/agents/net-agent/attributes/net-agent-attributes) . Você também pode definir um atributo personalizado com a chamada da API do agente [`AddCustomAttribute`](/docs/agents/net-agent/net-agent-api/itransaction/#addcustomattribute).

<CollapserGroup>
  <Collapser id="agent-attributes-enabled" title="habilitado">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Habilite ou desabilite a coleta de atributos. Quando definida como `false` no elemento atributo principal, esta configuração substitui todas as configurações de atributo para destinos individuais.

    Como alternativa, defina a variável de ambiente `NEW_RELIC_ATTRIBUTES_ENABLED` no ambiente do aplicativo.
  </Collapser>

  <Collapser id="agent-attributes-include" title="incluir">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Corda
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            (nenhum)
          </td>
        </tr>
      </tbody>
    </table>

    Se atributo estiver habilitado, o agente coletará todas as chaves de atributo especificadas nesta lista. Para especificar diversas chaves de atributo, especifique cada uma individualmente. Você também pode usar um caractere curinga `*` no final de uma chave para corresponder a vários atributos (por exemplo, `myApiKey.*`). Para mais informações, consulte [regras de atributo](/docs/agents/net-agent/attributes/enabling-disabling-attributes#attruls).

    Como alternativa, defina a variável de ambiente `NEW_RELIC_ATTRIBUTES_INCLUDE` no ambiente do aplicativo. Esta variável de ambiente aceita uma lista delimitada por vírgulas de nomes de atributos.

    <Callout variant="caution">
      Ao usar a variável de ambiente `NEW_RELIC_ATTRIBUTES_INCLUDE` o conjunto padrão de inclusões em `newrelic.config` é substituído. Veja [aqui](#allow-all-headers-enabled) uma lista detalhada de inclusões e exclusões padrão.
    </Callout>
  </Collapser>

  <Collapser id="agent-attributes-exclude" title="excluir">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Corda
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            (nenhum)
          </td>
        </tr>
      </tbody>
    </table>

    Se atributo estiver habilitado, o agente não coletará as chaves de atributo especificadas nesta lista. Para especificar diversas chaves de atributo, especifique cada uma individualmente. Você também pode usar um caractere curinga `*` no final de uma chave para corresponder a vários atributos (por exemplo, `myApiKey.*`). Para mais informações, consulte [regras de atributo](/docs/agents/net-agent/attributes/enabling-disabling-attributes#attruls).

    Como alternativa, defina a variável de ambiente `NEW_RELIC_ATTRIBUTES_EXCLUDE` no ambiente do aplicativo. Esta variável de ambiente aceita uma lista delimitada por vírgulas de nomes de atributos.

    <Callout variant="caution">
      Ao usar a variável de ambiente `NEW_RELIC_ATTRIBUTES_EXCLUDE` o conjunto padrão de exclusões em `newrelic.config` é substituído. Veja [aqui](#allow-all-headers-enabled) uma lista detalhada de inclusões e exclusões padrão.
    </Callout>
  </Collapser>
</CollapserGroup>

## Opções de recurso [#features]

Use estas opções para ativar, desativar e configurar o recurso New Relic. New Relic for .NET permite configurar o seguinte recurso:

* [Pools de aplicativos](#include_exclude_apps)
* [Coleta de erros](#error_collector)
* [Modo de alta segurança](#high_security_mode)
* [Remover mensagens de exceção](#strip_exception_messages)
* [Evento de transação](#transaction_events)
* [Evento personalizado](#custom_events)
* [Parâmetro personalizado](#custom_parameters)
* [Etiqueta/rótulos](#labels-tags)
* [Instrumentação do browser](#browser_monitoring)
* [Consulta lenta](#slow_sql)
* [Rastreamento da transação](#transaction_tracer)
* [Tracerde armazenamento de dados](#datastore_tracer)
* [Distributed tracing](#distributed_tracing)
* [Rastreamento infinito](#infinite_tracing)
* [Rastreamento multiaplicativo](#cross_application_tracer)
* [Evento de extensão](#span-events)
* [Capturar cabeçalhos de solicitação HTTP](#capture_http_request_headers)
* [Registro de aplicativo](#application_logging)
* [Nível do código métrico](#code_level_metrics)
* [Provedor de nuvem temporário](#cloud)
* [AI Monitoring](#ai_monitoring)

### Pools de aplicativos [#include\_exclude\_apps][#include_exclude_apps]

<Callout variant="important">
  Isto só é aplicável ao [arquivo de configuração global](#config-options-precedence) de um sistema.
</Callout>

<Callout variant="important">
  Essa configuração só se aplica quando o modelo de hospedagem do IIS está definido como em processo.
</Callout>

O elemento `applicationPools` é filho do elemento `configuration` . O elemento `applicationPools` especifica para o profiler exatamente quais pools de aplicativos serão usados como instrumento e usa o mesmo nome do pool de aplicativos do IIS. Esse elemento de configuração é útil quando você precisa instrumentar apenas um pequeno subconjunto de seus pools de aplicativos. Por exemplo, um determinado servidor pode ter várias centenas de pools de aplicativos, mas apenas alguns desses pools precisam ser instrumentados pelo agente .NET.

Aqui está um exemplo de desabilitação da instrumentação para pools de aplicativos específicos:

```xml
<applicationPools>
  <applicationPool name="Foo" instrument="false"/>
  <applicationPool name="Bar" instrument="false"/>
</applicationPools>
```

Aqui está um exemplo de desabilitação da instrumentação para todos os pools de aplicativos atualmente em execução no servidor e ativação da instrumentação para pools de aplicativos específicos:

```xml
<applicationPools>
  <defaultBehavior instrument="false"/>
  <applicationPool name="Foo" instrument="true"/>
  <applicationPool name="Bar" instrument="true"/>
</applicationPools>
```

O elemento `applicationPools` oferece suporte aos seguintes elementos:

<CollapserGroup>
  <Collapser id="appPool-defaultBehavior" title="defaultBehavior">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Define como o agente .NET se comportará em nível &quot;global&quot; para pools de aplicativos servidos via IIS. O agente .NET instrumento todos os pools de aplicativos por padrão. Quando `true`, os pools de aplicativos listados em [applicationPool](#appPool-applicationPool) com um atributo `instrument` definido como false não serão instrumentados.

    Essencialmente, quando definida como `false`, a lista de pools de aplicativos atua como uma lista de permissões. Quando definida como `true`, a lista de pools de aplicativos atua como uma lista de negações.
  </Collapser>

  <Collapser id="appPool-applicationPool" title="applicationPool">
    Define o comportamento da instrumentação para um pool de aplicativos específico. O atributo `name` é o nome de um pool de aplicativos. Ative ou desative a criação de perfil no atributo `instrument` . Defina este aplicativo no atributo `name` .
  </Collapser>
</CollapserGroup>

### Coleta de erros [#error\_collector][#error_collector]

O elemento `errorCollector` é filho do elemento `configuration` . `errorCollector` configura a coleta de erros, que captura informações sobre exceções não detectadas e as envia para o New Relic.

```xml
<errorCollector enabled="true" captureEvents="true" maxEventSamplesStored="100">
  <ignoreClasses>
    <errorClass>System.IO.FileNotFoundException</errorClass>
    <errorClass>System.Threading.ThreadAbortException</errorClass>
  </ignoreClasses>
  <ignoreMessages>
    <errorClass name="System.Exception">
       <message>Ignore message</message>
       <message>Ignore too</message>
    </errorClass>
  </ignoreMessages>
  <ignoreStatusCodes>
    <code>401</code>
    <code>404</code>
  </ignoreStatusCodes>
  <expectedClasses>
    <errorClass>System.ArgumentNullException</errorClass>
    <errorClass>System.ArgumentOutOfRangeException</errorClass>
  </expectedClasses>
  <expectedMessages>
    <errorClass name="System.Exception">
       <message>Expected message</message>
       <message>Expected too</message>
    </errorClass>
  </expectedMessages>
  <expectedStatusCodes>403,500-505</expectedStatusCodes>
  <attributes enabled="true">
    <exclude>myApiKey.*</exclude>
    <include>myApiKey.foo</include>
  </attributes>
</errorCollector>
```

<Callout variant="tip">
  Para obter uma visão geral da configuração de erros no APM, consulte [Gerenciar erros no APM](/docs/agents/manage-apm-agents/agent-data/manage-errors-apm-collect-ignore-mark-expected).
</Callout>

<Callout variant="important">
  `expectedClasses`, `expectedMessages` e `expectedStatusCodes` configurações de configuração exigem [agente .NET versão 8.31.0.0 ou superior](/docs/agents/net-agent/installation/update-net-agent).
</Callout>

O elemento `errorCollector` oferece suporte aos seguintes elementos e atributos:

<CollapserGroup>
  <Collapser id="error-enabled" title="habilitado">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Ative ou desative o coletor de erros.
  </Collapser>

  <Collapser id="error-captureEvents" title="captureEvents">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Habilite ou desabilite a captura de evento de erro.
  </Collapser>

  <Collapser id="error-maxEventSamplesStored" title="maxEventSamplesStored">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Inteiro
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `100`
          </td>
        </tr>
      </tbody>
    </table>

    Limite de reservatório para evento de erro.
  </Collapser>

  <Collapser id="error-ignoreClasses" title="ignoreClasses">
    Uma lista de nomes de classes totalmente qualificados a serem ignorados. O número máximo de combinações de classe de erro e mensagem que <DNT>**SHOULD**</DNT> serão relatadas é 50. Se mais de 50 estiverem listados, somente os primeiros 50 <DNT>**SHOULD**</DNT> serão usados.
  </Collapser>

  <Collapser id="error-ignoreMessages" title="ignoreMessages">
    Um mapa opcional de nomes de classes totalmente qualificados para uma lista de strings que correspondem a uma substring da mensagem de erro. O número máximo de combinações de classe de erro e mensagem que <DNT>**SHOULD**</DNT> serão relatadas é 50. Se mais de 50 estiverem listados, somente os primeiros 50 <DNT>**SHOULD**</DNT> serão usados.
  </Collapser>

  <Collapser id="error-ignoreErrors" title="ignoreErrors (obsoleto)">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Corda
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            (nenhum)
          </td>
        </tr>
      </tbody>
    </table>

    Lista exceções específicas para não reportar à New Relic. O nome completo da exceção deve ser usado, como `System.IO.FileNotFoundException`.
  </Collapser>

  <Collapser id="error-ignoreStatusCodes" title="ignoreStatusCodes">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Corda
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            (nenhum)
          </td>
        </tr>
      </tbody>
    </table>

    Lista códigos de erro HTTP específicos para não reportar à New Relic. Você pode usar códigos de erro HTTP integrais padrão, como apenas `401`, ou pode usar códigos de status completos da Microsoft com pontos decimais, como `401.4` ou `403.18`. Os códigos de status devem ser iguais ou maiores que `400`.

    Isso também pode ser configurado via variável de ambiente, especificando vários códigos com uma lista separada por vírgulas:

    ```ini
    NEW_RELIC_ERROR_COLLECTOR_IGNORE_ERROR_CODES=401, 403.18
    ```

    <Callout variant="tip">
      Erros personalizados relatados com a [API`NoticeError()` ](/docs/agents/net-agent/net-agent-api/noticeerror-net-agent)do agente ainda serão relatados à New Relic mesmo que a transação associada tenha um código de status HTTP configurado aqui.
    </Callout>
  </Collapser>

  <Collapser id="error-expectedClasses" title="expectedClasses">
    Uma lista de nomes de classes totalmente qualificados a serem marcados conforme esperado. O número máximo de combinações de classe de erro e mensagem que <DNT>**SHOULD**</DNT> serão relatadas é 50. Se mais de 50 estiverem listados, apenas os primeiros 50 <DNT>**SHOULD**</DNT> serão usados
  </Collapser>

  <Collapser id="error-expectedMessages" title="expectedMessages">
    Um mapa opcional de nomes de classes totalmente qualificados para uma lista de strings que correspondem a uma substring da mensagem de erro. O número máximo de combinações de classe de erro e mensagem que <DNT>**SHOULD**</DNT> serão relatadas é 50. Se mais de 50 estiverem listados, apenas os primeiros 50 <DNT>**SHOULD**</DNT> serão usados
  </Collapser>

  <Collapser id="error-expectedStatusCodes" title="expectedStatusCodes">
    Uma lista de códigos de status separados por vírgula. A lista pode incluir intervalos de números inteiros usando um único traço (`-`) e incluirá o número inteiro inicial e final do intervalo.

    Isso também pode ser configurado através da variável de ambiente:

    ```ini
    NEW_RELIC_ERROR_COLLECTOR_EXPECTED_ERROR_CODES=401, 501-503
    ```
  </Collapser>

  <Collapser id="error-attributes" title="atributo">
    Use este subelemento para personalizar as configurações de atributo do agente para rastreamento de erros. Este subelemento usa as mesmas configurações do elemento `attributes` principal: [`enabled`](#agent-attributes-enabled), [`include`](#agent-attributes-include) e [`exclude`](#agent-attributes-exclude).
  </Collapser>
</CollapserGroup>

### Modo de alta segurança [#high\_security\_mode][#high_security_mode]

O elemento `highSecurity` é filho do elemento `configuration` . Para ativar [o modo de alta segurança](/docs/subscriptions/high-security), configure esta propriedade como `true` e ative a propriedade de alta segurança na interface do usuário do New Relic. Ativar a alta segurança ativa o SSL; parâmetro de solicitação, parâmetro personalizado e cabeçalhos de solicitação HTTP não são coletados; remover mensagens de exceção está habilitado; e a consulta não pode ser enviada para a New Relic em sua forma bruta.

<CollapserGroup>
  <Collapser id="highsecurity-enabled" title="habilitado">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Ative ou desative o modo de alta segurança. Exemplo:

    ```xml
    <highSecurity enabled="true"/>
    ```

    Como alternativa, defina a variável de ambiente `NEW_RELIC_HIGH_SECURITY` no ambiente do aplicativo:

    ```ini
    NEW_RELIC_HIGH_SECURITY=true
    ```
  </Collapser>
</CollapserGroup>

### Remover mensagens de exceção [#strip\_exception\_messages][#strip_exception_messages]

O elemento `stripExceptionMessages` é filho do elemento `configuration` . Para ativar mensagens de exceção de remoção, configure esta propriedade como `true`. Por padrão, isso é definido como falso, o que significa que o agente envia mensagens de todas as exceções para o coletor New Relic. Se você ativar o modo de alta segurança, isso será automaticamente alterado para verdadeiro e o agente removerá as mensagens das exceções.

<CollapserGroup>
  <Collapser id="stripExceptionMessages-enabled" title="habilitado">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Habilite ou desabilite mensagens de exceção de remoção. Exemplo:

    ```xml
    <stripExceptionMessages enabled="true"/>
    ```
  </Collapser>
</CollapserGroup>

### Evento de transação [#transaction\_events][#transaction_events]

O elemento `transactionEvents` é filho do elemento `configuration` . Use `transactionEvents` para configurar o evento de transação.

```xml
<transactionEvents enabled="true" maximumSamplesStored="10000">
  <attributes enabled="true">
    <exclude>myApiKey.*</exclude>
    <include>myApiKey.foo</include>
  </attributes>
</transactionEvents>
```

O elemento `transactionEvents` suporta o seguinte atributo:

<CollapserGroup>
  <Collapser id="transaction-enabled" title="habilitado">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Ative ou desative o gravador de eventos.
  </Collapser>

  <Collapser id="transaction-maximumSamplesStored" title="maximumSamplesStored">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Inteiro
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `10000`
          </td>
        </tr>
      </tbody>
    </table>

    O número máximo de eventos de transação amostrados que o agente pode armazenar na memória de uma só vez. Este será o número máximo de transações que o agente pode enviar por minuto.

    Como alternativa, defina a variável de ambiente `MAX_TRANSACTION_SAMPLES_STORED` no ambiente do aplicativo:

    ```ini
    MAX_TRANSACTION_SAMPLES_STORED=500
    ```
  </Collapser>

  <Collapser id="transaction-attributes" title="atributo">
    Use este subelemento para personalizar as configurações de atributo do agente para evento de transação. Este subelemento usa as mesmas configurações do elemento `attributes` principal: [`enabled`](#agent-attributes-enabled), [`include`](#agent-attributes-include) e [`exclude`](#agent-attributes-exclude).

    <Callout variant="tip">
      Essas configurações de atributo são específicas para o evento `transaction` . As configurações de atributo podem ser aplicadas globalmente a todos os tipos de eventos [com esta configuração](/docs/agents/net-agent/configuration/net-agent-configuration#agent-attributes).
    </Callout>

    <Callout variant="caution">
      Quando distributed tracing e/ou o rastreamento infinito estão habilitados, as informações do evento de transação são aplicadas ao evento Span raiz da transação. Considere aplicar quaisquer configurações de atributo para evento de transação para abranger evento e/ou aplicá-las como [configurações de atributo global](#agent-attributes).
    </Callout>
  </Collapser>
</CollapserGroup>

### Evento personalizado [#custom\_events][#custom_events]

O elemento `customEvents` é filho do elemento `configuration` . Use `customEvents` para configurar [evento personalizado](/docs/insights/new-relic-insights/adding-querying-data/inserting-custom-events-new-relic-apm-agents#net-att).

```xml
<customEvents enabled="true" maximumSamplesStored="10000"/>
```

O elemento `customEvents` suporta o seguinte atributo:

<CollapserGroup>
  <Collapser id="customevents-enabled" title="habilitado">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Ative ou desative o gravador de eventos.
  </Collapser>

  <Collapser id="customevents-maximumSamplesStored" title="maximumSamplesStored">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Inteiro
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `10000`
          </td>
        </tr>
      </tbody>
    </table>

    O número máximo de eventos personalizados amostrados que o agente pode armazenar na memória de uma só vez. Este será o número máximo de eventos personalizados que o agente poderá enviar por minuto.

    Como alternativa, defina a variável de ambiente `MAX_EVENT_SAMPLES_STORED` no ambiente do aplicativo:

    ```ini
    MAX_EVENT_SAMPLES_STORED=500
    ```

    * Se você estiver configurando o agente para [AI Monitoring](/docs/ai-monitoring/intro-to-ai-monitoring/), recomendamos definir o valor como `100000`.
  </Collapser>
</CollapserGroup>

### Parâmetro personalizado [#custom\_parameters][#custom_parameters]

O elemento `customParameters` é filho do elemento `configuration` . Use `customParameters` para configurar [parâmetros personalizados](/docs/insights/insights-data-sources/custom-data/add-custom-attributes-apm-data).

```xml
<customParameters enabled="true" />
```

O elemento `customParameters` suporta o seguinte atributo:

<CollapserGroup>
  <Collapser id="customparameters-enabled" title="habilitado">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Habilite ou desabilite a captura de parâmetro personalizado.
  </Collapser>
</CollapserGroup>

### Etiquetas (etiqueta)

O elemento `labels` é filho do elemento `configuration` .

Isso define nomes e valores [tag](/docs/new-relic-one/use-new-relic-one/core-concepts/tagging-use-tags-organize-group-what-you-monitor) . A lista é uma lista delimitada por ponto e vírgula de pares de nomes e valores separados por dois pontos. Você também pode usar com a variável de ambiente `NEW_RELIC_LABELS` . Exemplo:

```xml
<labels>foo:bar;zip:zap</labels>
```

```ini
NEW_RELIC_LABELS="foo:bar;zip:zap"
```

### Instrumentação do browser [#browser\_monitoring][#browser_monitoring]

O elemento `browserMonitoring` é filho do elemento `configuration` . `browserMonitoring` configura <InlinePopover type="browser" />em seu aplicativo .NET. O browser fornece insights sobre a experiência de desempenho do usuário final. Isso é feito medindo o tempo que o browser do seu usuário leva para baixar e renderizar suas páginas da web, injetando uma pequena quantidade de código JavaScript no cabeçalho e rodapé de cada página.

```xml
// If you use both the Exclude and Attribute elements
// the Exclude element must be listed first.
<browserMonitoring autoInstrument="true">
  <requestPathsExcluded>
    <path regex="url-regex-1"/>
    <path regex="url-regex-2"/>
    ...
    <path regex="url-regex-n"/>
  </requestPathsExcluded>
  <attributes enabled="true">
    <exclude>myApiKey.*</exclude>
    <include>myApiKey.foo</include>
  </attributes>
</browserMonitoring>
```

O elemento `browserMonitoring` suporta o seguinte atributo:

<CollapserGroup>
  <Collapser id="browsermon-autoInstrument" title="autoInstrument">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Por padrão, o agente injeta automaticamente o JavaScript do agente do browser. Para desativar a injeção automática, defina esse atributo como `false`.
  </Collapser>

  <Collapser id="browser-attributes" title="atributo">
    Use este subelemento para personalizar as configurações de atributo do seu agente para [monitoramento do browser](/docs/browser/new-relic-browser/page-load-timing/instrumentation-page-load-timing). Este subelemento usa as mesmas configurações do elemento `attributes` principal: [`enabled`](#agent-attributes-enabled), [`include`](#agent-attributes-include) e [`exclude`](#agent-attributes-exclude).
  </Collapser>

  <Collapser id="browser-path-exclusion" title="requestPathsExcluded">
    Utilize este subelemento para evitar que o agente browser seja injetado em páginas específicas. O elemento é usado da seguinte forma:

    ```xml
    <requestPathsExcluded>
      <path regex="url-regex-1"/>
      <path regex="url-regex-2"/>
      ...
      <path regex="url-regex-n"/>
    </requestPathsExcluded>
    ```

    O agente não injetará o agente browser em páginas cuja URL corresponda a uma das expressões regulares especificadas. A expressão regular deve seguir [as diretrizes da Microsoft para a classe Regex](https://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex\(v=vs.110\).aspx).

    É uma referência ao diretório virtual do caminho em seu aplicativo e não ao URL completo do caminho que você deseja excluir. Por exemplo, para excluir as páginas em `https://www.mywebsite.com/mywebpages/` basta inserir `/mywebpages/` como o valor regex do caminho.

    O elemento `requestPathsExcluded` deve ser utilizado nos casos em que for impossível ou indesejável utilizar a chamada [`DisableBrowserMonitoring()`](/docs/agents/net-agent/net-agent-api/disablebrowsermonitoring-net-agent) . Para minimizar um possível impacto no desempenho, tente usar o mínimo possível de expressões regulares e mantê-las o mais simples possível.
  </Collapser>
</CollapserGroup>

A instrumentação Browser também pode ser ativada ou desativada por meio de uma variável de ambiente:

```ini
NEW_RELIC_BROWSER_MONITORING_AUTO_INSTRUMENT= true | 1 | false | 0
```

### Consulta lenta [#slow\_sql][#slow_sql]

O elemento `slowSql` é filho do elemento `configuration` . `slowSql` configura a captura de informações sobre execuções de consulta lenta e captura e ofusca os planos explicativos para essas consultas.

```xml
<slowSql enabled="true"/>
```

O elemento `slowSql` oferece suporte ao seguinte atributo:

<CollapserGroup>
  <Collapser id="catracer-enabled" title="habilitado">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Habilite ou desabilite o rastreamento de consulta lenta.
  </Collapser>
</CollapserGroup>

### Rastreamento da transação [#transaction\_tracer][#transaction_tracer]

O elemento `transactionTracer` é filho do elemento `configuration` . `transactionTracer` configura [o rastreamento da transação](/docs/traces/transaction-traces). Incluída no trace está a sequência exata de chamada da transação, incluindo quaisquer declarações de consulta emitidas.

```xml
<transactionTracer enabled="true"
    transactionThreshold="apdex_f"
    recordSql="obfuscated"
    explainEnabled="true"
    explainThreshold="500"
    maxSegments="3000"
    maxExplainPlans="20">
  <attributes enabled="true">
    <exclude>myApiKey.*</exclude>
    <include>myApiKey.foo</include>
  </attributes>
 </transactionTracer>
```

O elemento `transactionTracer` suporta o seguinte atributo:

<CollapserGroup>
  <Collapser id="tracer-enabled" title="habilitado">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Habilite ou desabilite [o rastreamento da transação](/docs/apm/transactions/transaction-traces/transaction-traces).
  </Collapser>

  <Collapser id="tracer-transactionThreshold" title="transactionThreshold">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Corda
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `apdex_f`
          </td>
        </tr>
      </tbody>
    </table>

    Define o limite para rastreamento da transação. Se uma transação demorar mais que o limite, ela será elegível para rastreamento. Consulte [noções básicas de rastreamento da transação](/docs/apm/transactions/transaction-traces/transaction-traces#basics) para obter mais informações sobre as regras que regem o rastreamento.

    O valor padrão é `apdex_f`, que define o limite para quatro vezes o valor `apdex_t` do aplicativo. Para obter mais informações sobre `apdex_t`, consulte [Apdex](/docs/site/apdex-measuring-user-satisfaction).

    Você também pode definir o limite como um valor de tempo específico em milissegundos.
  </Collapser>

  <Collapser id="tracer-recordSql" title="recordSql">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Corda
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `obfuscated`
          </td>
        </tr>
      </tbody>
    </table>

    Selecione uma política de rastreamento de consulta. As opções são `off`, que não registra nada; `obfuscated`, que registra uma versão ofuscada da consulta; ou `raw`, que registra a consulta exatamente como ela é emitida para o banco de dados.

    <Callout variant="caution">
      A gravação de consultas brutas pode capturar informações confidenciais.
    </Callout>
  </Collapser>

  <Collapser id="tracer-explainEnabled" title="explainEnabled">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Quando `true`, o agente captura instruções `EXPLAIN` para consulta lenta com durações superiores a `explainThreshold`. Observe que a ativação desse recurso pode ter implicações no desempenho porque os planos são capturados para cada transação até o valor `maxExplainPlans` .
  </Collapser>

  <Collapser id="tracer-explainThreshold" title="explainThreshold">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Inteiro
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `500`
          </td>
        </tr>

        <tr>
          <th>
            Unidade
          </th>

          <td>
            Milissegundos
          </td>
        </tr>
      </tbody>
    </table>

    O agente coleta [dados de consulta lenta](/docs/apm/applications-menu/monitoring/viewing-slow-query-details) para consultas que excedem esse limite, juntamente com quaisquer planos de explicação disponíveis, como parte do rastreamento da transação.
  </Collapser>

  <Collapser id="tracer-maxSegments" title="maxSegments">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Inteiro
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `3000`
          </td>
        </tr>
      </tbody>
    </table>

    O número máximo de segmentos a serem coletados em um rastreamento da transação.
  </Collapser>

  <Collapser id="tracer-maxExplainPlans" title="maxExplainPlans">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Inteiro
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `20`
          </td>
        </tr>
      </tbody>
    </table>

    O número máximo de planos de explicação a serem coletados por transação.
  </Collapser>

  <Collapser id="tracer-maxStackTrace" title="maxStackTrace">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Inteiro
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `0`
          </td>
        </tr>
      </tbody>
    </table>

    Por padrão, `maxStackTrace` é definido como `0`, o que desativa o rastreamento stack como parte de um trace da transação. Se esse valor for maior que `0`, o rastreamento stack será capturado para rastreamento da transação.
  </Collapser>

  <Collapser id="tracer-attributes" title="atributo">
    Use este subelemento para personalizar as configurações de atributo do agente para rastreamento da transação. Este subelemento usa as mesmas configurações do elemento `attributes` principal: [`enabled`](#agent-attributes-enabled), [`include`](#agent-attributes-include) e [`exclude`](#agent-attributes-exclude).
  </Collapser>
</CollapserGroup>

### Tracerde armazenamento de dados [#datastore\_tracer][#datastore_tracer]

O elemento `datastoreTracer` é filho do elemento `configuration` .

```xml
<datastoreTracer>
  <instanceReporting enabled="true"  />
  <databaseNameReporting enabled="true" />
  <queryParameters enabled="false" />
</datastoreTracer>
```

O elemento `datastoreTracer` oferece suporte aos seguintes subelementos:

<CollapserGroup>
  <Collapser id="instance-reporting" title="instanceReporting">
    Use este subelemento para habilitar a coleta de métricas de instância de armazenamento de dados (como host e porta) para [algum driver do banco de dados](/docs/agents/net-agent/features/net-agent-instance-level-database-information). Estes são relatados em consulta lenta trace e trace da transação. O valor padrão do atributo `enabled` é `true`.
  </Collapser>

  <Collapser id="database-name-reporting" title="databaseNameReporting">
    Use este subelemento para habilitar a coleta do nome do banco de dados em consulta lenta trace e trace da transação para [algum driver do banco de dados](/docs/agents/net-agent/features/net-agent-instance-level-database-information). O valor padrão do atributo `enabled` é `true`.
  </Collapser>

  <Collapser id="datastore-tracer-query-parameters" title="queryParameters">
    Use este subelemento para habilitar a coleta do parâmetro de consulta SQL no rastreamento de consulta lenta. O valor padrão do atributo `enabled` é `false`.

    <Callout variant="caution">
      * O parâmetro de consulta de gravação pode capturar informações confidenciais.
      * A opção de configuração `transactionTracer.recordSql` deve ser definida como `raw` ou esta opção será ignorada.
    </Callout>
  </Collapser>
</CollapserGroup>

### Distributed tracing [#distributed\_tracing][#distributed_tracing]

O elemento `distributedTracing` é filho do elemento `configuration` .

```xml
<distributedTracing enabled="true"
   excludeNewrelicHeader="false"/>
```

O rastreamento distribuído permite visualizar o caminho percorrido por uma solicitação em um sistema distribuído. Requer [o agente .NET versão 8.6.45.0 ou superior](/docs/agents/net-agent/installation/update-net-agent) e está habilitado por padrão no agente .NET versão 9.0.0.0 e superior.

<Callout variant="important">
  Habilitar [distributed tracing](/docs/understand-dependencies/distributed-tracing/get-started/introduction-distributed-tracing) desabilita [o rastreamento multiaplicativo](#cross_application_tracer) e tem outros efeitos no recurso APM. Antes de ativar, leia o [guia de planejamento](/docs/transition-guide-distributed-tracing).
</Callout>

Para obter mais informações sobre como configurar distributed tracing, consulte [Habilitar distributed tracing para seu aplicativo .NET](/docs/apm/agents/net-agent/configuration/distributed-tracing-net-agent).

O elemento `distributedTracing` suporta o seguinte atributo:

<CollapserGroup>
  <Collapser id="dt-enabled" title="habilitado">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Como alternativa, ative distributed tracing por meio da variável de ambiente `NEW_RELIC_DISTRIBUTED_TRACING_ENABLED` no ambiente do aplicativo:

    ```ini
    NEW_RELIC_DISTRIBUTED_TRACING_ENABLED=true
    ```
  </Collapser>

  <Collapser id="excludeNewrelicHeader" title="excludeNewrelicHeader">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Por padrão, as versões suportadas do agente utilizam o cabeçalho `newrelic` e os cabeçalhos [W3C Trace Context](/docs/understand-dependencies/distributed-tracing/get-started/how-new-relic-distributed-tracing-works#headers) para distributed tracing. O cabeçalho distributed tracing `newrelic` permite interoperabilidade com agentes mais antigos que não suportam cabeçalhos W3C Trace Context . As versões do agente que suportam cabeçalhos W3C Trace Context os priorizarão em relação a `newrelic` cabeçalhos para distributed tracing.

    Se você não quiser utilizar o cabeçalho `newrelic`, defini-lo como `true` fará com que o agente exclua o cabeçalho `newrelic` e use apenas cabeçalhos W3C Trace Context para distributed tracing.
  </Collapser>
</CollapserGroup>

#### Configuração do amostrador

<Callout variant="important">
  A configuração do sampler está disponível a partir da versão 10.45.0 do agente .NET.
</Callout>

O agente .NET atualmente suporta 4 algoritmos de amostragem diferentes que podem ser configurados para uso em distributed tracing:

<table>
  <thead>
    <tr>
      <th>
        <DNT>
          **Sampler Type**
        </DNT>
      </th>

      <th>
        <DNT>
          **Description**
        </DNT>
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        Amostrador adaptativo
      </td>

      <td>
        O algoritmo de amostragem original usado pelo agente .NET está ativado por padrão. As decisões de amostragem são tomadas aleatoriamente, com o objetivo de reter um número predefinido de amostras por período de amostragem.
      </td>
    </tr>

    <tr>
      <td>
        Amostrador baseado na proporção de IDs de rastreamento
      </td>

      <td>
        Uma implementação do Open Telemetria Trace Id Ratio Based Sampler, que amostra uma porcentagem configurada do rastreamento com base no ID de rastreamento (gerado aleatoriamente).
      </td>
    </tr>

    <tr>
      <td>
        Amostrador Sempre Ligado
      </td>

      <td>
        Como o nome indica, este sampler irá amostrar cada trace. Note que ativar esse sampler pode afetar o desempenho do aplicativo e resultará em maior ingestão de dados.
      </td>
    </tr>

    <tr>
      <td>
        Amostrador sempre desligado
      </td>

      <td>
        O oposto de &quot;Always On&quot;; este amostrador não amostra nenhum traço. Útil em casos muito específicos.
      </td>
    </tr>
  </tbody>
</table>

Os samplers suportados podem ser configurados em vários níveis:

<table>
  <thead>
    <tr>
      <th>
        <DNT>
          **Sampler Level**
        </DNT>
      </th>

      <th>
        <DNT>
          **Description**
        </DNT>
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        Raiz
      </td>

      <td>
        Este é o amostrador que é aplicado no início de um trace. Por padrão, o Amostrador Adaptativo é configurado como o amostrador raiz.
      </td>
    </tr>

    <tr>
      <td>
        Amostragem de pais remotos
      </td>

      <td>
        Este é o sampler que é aplicado quando o trace tem um pai remoto (ou seja, o trace se originou em um serviço upstream) que já foi amostrado. Ele pode ser configurado para usar, por exemplo, o sampler Always On para garantir que todos os rastreamentos no aplicativo atual sejam amostrados.
      </td>
    </tr>

    <tr>
      <td>
        Pai remoto não amostrado
      </td>

      <td>
        Este é o sampler que é aplicado quando um trace tem um pai remoto (ou seja, o trace se originou em um serviço upstream) que NÃO foi amostrado.
      </td>
    </tr>
  </tbody>
</table>

O elemento de configuração `<sampler>` é filho do elemento `<distributedTracing>` e está estruturado da seguinte forma:

```xml
  <distributedTracing ... >
    <sampler>
      <root>
        ...
      </root>
      <remoteParentSampled>
        ...
      </remoteParentSampled>
      <remoteParentNotSampled>
        ...
      </remoteParentNotSampled>
    </sampler>
  </distributedTracing>
```

Para cada um dos níveis de amostragem, uma das seguintes configurações de amostragem pode ser especificada:

```xml
  <default /> # default is a synonym for <adaptive />
  <adaptive />
  <traceIdRatioBased ratio="0.12" />
  <alwaysOn />
  <alwaysOff />
```

O elemento `<traceIdRatioBased>` tem um atributo obrigatório `ratio`, que é um valor entre 0,0 e 1,0 que especifica a porcentagem do traço que deve ser amostrada.

<Callout variant="important">
  O **Adaptive Sampler** será utilizado caso não haja nenhuma configuração especificada em um determinado nível do amostrador ou se o elemento de configuração para esse nível não for especificado.
</Callout>

As seguintes variáveis de ambiente podem ser usadas para configurar o sampler distributed trace nos vários níveis do sampler, especificando um dos valores possíveis para o tipo de sampler:

```
NEW_RELIC_DISTRIBUTED_TRACING_SAMPLER_ROOT= default | adaptive | traceIdRatioBased | alwaysOn | alwaysOff
NEW_RELIC_DISTRIBUTED_TRACING_SAMPLER_REMOTE_PARENT_SAMPLED =  default | adaptive | traceIdRatioBased | alwaysOn | alwaysOff
NEW_RELIC_DISTRIBUTED_TRACING_SAMPLER_REMOTE_PARENT_NOT_SAMPLED = default | adaptive | traceIdRatioBased | alwaysOn | alwaysOff
```

Se `traceIdRatioBased` for especificado como o valor de uma dessas variáveis de ambiente, uma variável de ambiente correspondente para especificar a proporção também será necessária para o mesmo nível de amostragem:

```
NEW_RELIC_DISTRIBUTED_TRACING_SAMPLER_ROOT_TRACE_ID_RATIO_BASED_RATIO=0.12
NEW_RELIC_DISTRIBUTED_TRACING_SAMPLER_REMOTE_PARENT_SAMPLED_TRACE_ID_RATIO_BASED_RATIO=0.12
NEW_RELIC_DISTRIBUTED_TRACING_SAMPLER_REMOTE_PARENT_NOT_SAMPLED_TRACE_ID_RATIO_BASED_RATIO=0.12
```

#### Relatórios de eventos do Span

Relatórios distributed tracing abrangem evento. O relatório de eventos de intervalo está ativado por padrão, mas [distributed tracing](/docs/apm/distributed-tracing/getting-started/introduction-distributed-tracing) deve estar ativado para que os intervalos sejam relatados. Para desativar o evento span, escolha uma das seguintes opções:

<CollapserGroup>
  <Collapser id="span-events-disable-config" title="Desativar evento span via arquivo de configuração">
    Defina o elemento `<spanEvents>` como `false` para desativar por meio do arquivo `newrelic.config` . Este elemento é filho do elemento `<configuration>` .

    ```xml
    <configuration . . . >
      <spanEvents enabled="false" />
    </configuration>
    ```
  </Collapser>

  <Collapser id="span-events-disable-env_variable" title="Desabilitar evento span via variável de ambiente">
    Defina a variável de ambiente `NEW_RELIC_SPAN_EVENTS_ENABLED` no ambiente do aplicativo:

    ```ini
    NEW_RELIC_SPAN_EVENTS_ENABLED=false
    ```
  </Collapser>
</CollapserGroup>

### Rastreamento infinito [#infinite\_tracing][#infinite_tracing]

[O Infinite Tracing](/docs/distributed-tracing/infinite-tracing/introduction-infinite-tracing) estende o serviço distributed tracing empregando um observador de trace externo ao agente. Ele observa 100% do rastreamento do seu aplicativo em vários serviços e fornece dados acionáveis para que você possa resolver problemas com mais rapidez.

Para ativar [o rastreamento infinito](/docs/distributed-tracing/infinite-tracing/introduction-infinite-tracing), certifique-se de ter [o agente .NET versão 8.30 ou superior](/docs/release-notes/agent-release-notes/net-release-notes) e ative distributed tracing. Em seguida, adicione as seguintes configurações adicionais:

```xml
<configuration . . . >
  <distributedTracing enabled="true" />
  <infiniteTracing>
    <trace_observer host="YOUR_TRACE_OBSERVER_HOST" />
  </infiniteTracing>
</configuration>
```

<Callout variant="important">
  Os intervalos de rastreamento infinitos podem ser limitados pela configuração [`transactionTracer.maxSegments`](/docs/apm/agents/net-agent/configuration/net-agent-configuration/#tracer-maxSegments) .
</Callout>

O elemento `infiniteTracing` oferece suporte aos seguintes elementos:

<CollapserGroup>
  <Collapser id="trace_observer" title="trace_observer">
    O elemento `trace_observer` identifica um host observador independente do agente. Para obter ajuda para obter uma entrada válida de host do observador trace do Infinite Tracing, consulte [Localizar ou criar um endpoint do observador trace ](/docs/understand-dependencies/distributed-tracing/enable-configure/language-agents-enable-distributed-tracing#provision-trace-observer "https://docs.newrelic.com/docs/understand-dependencies/distributed-tracing/enable-configure/language-agents-enable-distributed-tracing#provision-trace-observer").

    O observador trace também pode ser configurado usando a variável de ambiente `NEW_RELIC_INFINITE_TRACING_TRACE_OBSERVER_HOST`.

    <Callout variant="important">
      Ao configurar o observador trace , você não deve fornecer o protocolo como parte do host. Por exemplo, use `myhost.infinitetracing.com` em vez de `https://myhost.infinitetracing.com`.
    </Callout>
  </Collapser>
</CollapserGroup>

### Rastreamento multiaplicativo [#cross\_application\_tracer][#cross_application_tracer]

O elemento `crossApplicationTracer` é filho do elemento `configuration` . `crossApplicationTracer` vincula o rastreamento da transação no aplicativo. Quando vinculados em uma arquitetura orientada a serviços, todos os aplicativos instrumentados que se comunicam entre si via HTTP irão agora &quot;vincular&quot; o rastreamento da transação ao aplicativo que eles chamam e ao aplicativo pelo qual são chamados. [O rastreamento multiaplicativo](/docs/traces/cross-application-traces) facilita o entendimento da relação de desempenho entre serviços e aplicativos.

<Callout variant="important">
  O rastreamento multiaplicativo foi descontinuado a partir da [v9.0.0 do agente](/docs/release-notes/agent-release-notes/net-release-notes/net-agent-9000/) e desabilitado por padrão. Ele será removido em uma versão futura do agente. Para usar CAT com v9+ do agente, você deve configurar `crossApplicationTracer.enabled = true` e `distributedTracing.enabled = false`. A ativação [distributed tracing](/docs/understand-dependencies/distributed-tracing/get-started/introduction-distributed-tracing) desativará [o rastreamento multiaplicativo](#cross_application_tracer).
</Callout>

```xml
<crossApplicationTracer enabled="true"/>
```

O elemento `crossApplicationTracer` oferece suporte ao seguinte atributo:

<CollapserGroup>
  <Collapser id="catracer-enabled" title="habilitado">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Habilitar ou desabilitar rastreamento multiaplicativo
  </Collapser>
</CollapserGroup>

### Evento de extensão

O elemento `spanEvents` é filho do elemento `configuration` . Use `spanEvents` para configurar o evento span.

```xml
<spanEvents enabled="true">
  <attributes enabled="true">
    <exclude>myApiKey.*</exclude>
    <include>myApiKey.foo</include>
  </attributes>
</spanEvents>
```

O elemento `spanEvents` suporta o seguinte atributo:

<CollapserGroup>
  <Collapser id="span-enabled" title="habilitado">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Ative ou desative o gravador de eventos.
  </Collapser>

  <Collapser id="span-max-samples-stored" title="maximumSamplesStored">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Interno
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `2000`
          </td>
        </tr>
      </tbody>
    </table>

    O número máximo de eventos de extensão amostrados que o agente pode armazenar na memória por vez. Este será o número máximo de eventos span que o agente pode enviar por minuto.

    * Isso também pode ser configurado usando a variável de ambiente `NEW_RELIC_SPAN_EVENTS_MAX_SAMPLES_STORED` .

    * Não recomendamos configurar além de 10k. O servidor limitará os dados a 10k por minuto.

    * Se você estiver configurando o agente para [AI Monitoring](/docs/ai-monitoring/intro-to-ai-monitoring/), recomendamos definir o valor como `10000`.

      <Callout variant="important">
        Esta opção de configuração está disponível apenas no agente .NET v9.0 ou superior.
      </Callout>
  </Collapser>

  <Collapser id="span-attributes" title="atributo">
    Use este subelemento para personalizar as configurações de atributo do agente para o evento span. Este subelemento usa as mesmas configurações do elemento `attributes` principal: [`enabled`](#agent-attributes-enabled), [`include`](#agent-attributes-include) e [`exclude`](#agent-attributes-exclude).

    <Callout variant="tip">
      Essas configurações de atributo são específicas para span evento. As configurações de atributo podem ser aplicadas globalmente a todos os tipos de eventos [com esta configuração](/docs/agents/net-agent/configuration/net-agent-configuration#agent-attributes).
    </Callout>
  </Collapser>
</CollapserGroup>

### Capturar cabeçalhos de solicitação HTTP [#capture\_http\_request\_headers][#capture_http_request_headers]

O elemento `allowAllHeaders` é filho do elemento `configuration` . Defina isso como `true` para permitir que o agente .NET capture todos os cabeçalhos de solicitação HTTP e aplique-os ao evento `Span` e `Transaction` como atributo `request.headers.{http-header-name}` . Defina como `false` para permitir que apenas o agente .NET colete os seguintes cabeçalhos de solicitação HTTP:

* `request.headers.referer`
* `request.headers.accept`
* `request.headers.content-length`
* `request.headers.host`
* `request.headers.user-agent`

<CollapserGroup>
  <Collapser id="allow-all-headers-enabled" title="habilitado">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Habilite ou desabilite a captura de cabeçalhos de solicitação HTTP. Exemplo:

    Como alternativa, defina a variável de ambiente `NEW_RELIC_ALLOW_ALL_HEADERS` no ambiente do aplicativo:

    ```xml
    <allowAllHeaders enabled="true" />
    <attributes enabled="true">
       <include>request.headers.*</include>
    </attributes>
    ```
  </Collapser>
</CollapserGroup>

<Callout variant="important">
  A configuração `allowAllHeaders` está disponível apenas no agente .NET versão 8.40.0+. Ao usar `allowAllHeaders` para capturar atributo, o atributo do cabeçalho da solicitação capturada ainda está sendo controlado pelas configurações [de atributo](/docs/agents/net-agent/configuration/net-agent-configuration/#agent-attributes) no nível raiz e no nível de destino. Sem definir `request.header.*` na lista `include` no elemento `attributes` (veja a seguir), o agente .NET ainda filtra todos os atributos do cabeçalho. O padrão `newrelic.config` é definido para incluir o `request.header.*`.

  ```xml
  <allowAllHeaders enabled="true" />
  <attributes enabled="true">
    <include>request.headers.*</include>
    ...
  </attributes>
  ```

  O padrão `newrelic.config` também é definido para excluir explicitamente os seguintes cabeçalhos de solicitação HTTP para evitar que o agente .NET colete dados indesejados.

  ```xml
  <attributes enabled="true">
    <exclude>request.headers.cookie</exclude>
    <exclude>request.headers.authorization</exclude>
    <exclude>request.headers.proxy-authorization</exclude>
    <exclude>request.headers.x-*</exclude>
  </attributes>
  ```
</Callout>

### Registro de aplicativo [#application\_logging][#application_logging]

<Callout variant="important">
  Essas opções de configuração estão disponíveis somente com o agente .NET versões 9.7.1 e superiores. As opções relacionadas aos dados de contexto (atributo personalizado) estão disponíveis apenas nas versões 10.4.0 e superiores do agente .NET.
</Callout>

O elemento `applicationLogging` é filho do elemento `configuration` . Use `applicationLogging` para configurar a instrumentação da atividade de criação de log do seu aplicativo.

Existem três sub-recursos principais:

1. Métrica: Colete métricas sobre o número total de linhas de registro escritas por ciclo de colheita (`Logging/lines`), bem como o número de linhas de registro escritas em níveis de registro específicos (por exemplo, `Logging/lines/ERROR`).

2. Encaminhamento de logs: Quando habilitado, o agente irá capturar dados de log e enviá-los para New Relic.

   * Dados de contexto (via [`AddCustomAttribute`](/docs/apm/agents/net-agent/net-agent-api/itransaction/#addcustomattribute)): quando ativado, o agente irá capturar e encaminhar qualquer atributo de log personalizado. Os elementos `include` e `exclude` são listas separadas por vírgula de nomes de atributos a serem incluídos ou excluídos, seguindo as [mesmas regras](/docs/apm/agents/net-agent/attributes/enable-disable-attributes-net/#attruls) de outras configurações de atributos de agentes. Ambos estão vazios por padrão, o que resulta na captura e encaminhamento de todos os dados de contexto de log.
   * Filtragem de nível de log: Quando configurado com um ou mais níveis de log em uma lista separada por vírgula, o agente impedirá que mensagens nesses níveis sejam capturadas e encaminhadas.
   * Rótulos: quando habilitado, o agente adiciona rótulos personalizados ao log encaminhado pelo agente. Você pode usar o atributo `exclude` , que é uma lista de nomes de rótulos separados por vírgulas e sem distinção entre maiúsculas e minúsculas. Por padrão, o agente adiciona rótulos personalizados quando o atributo `exclude` está vazio.

3. Decoração log local: quando ativado, seu log existente será decorado com metadados que vinculam o log a outros dados do New Relic, como erros.

Para obter mais detalhes, consulte nossos [documentos sobre como usar o logs contextualizados do agente .NET](/docs/logs/logs-context/net-configure-logs-context-all).

```xml
<applicationLogging enabled="true">
  <metrics enabled="true" />
  <forwarding enabled="true" maxSamplesStored="10000" logLevelDenyList="">
    <contextData enabled="false" include="" exclude="" />
    <labels enabled="false" exclude="" />
  </forwarding>
  <localDecorating enabled="false" />
</applicationLogging>
```

Esses recursos também podem ser configurados via variáveis de ambiente:

```ini
NEW_RELIC_APPLICATION_LOGGING_ENABLED=true
NEW_RELIC_APPLICATION_LOGGING_METRICS_ENABLED=true
NEW_RELIC_APPLICATION_LOGGING_FORWARDING_ENABLED=true
NEW_RELIC_APPLICATION_LOGGING_FORWARDING_CONTEXT_DATA_ENABLED=true
NEW_RELIC_APPLICATION_LOGGING_FORWARDING_CONTEXT_DATA_INCLUDE="myCustomAttribute1, myOtherCustomAttribute*"
NEW_RELIC_APPLICATION_LOGGING_FORWARDING_CONTEXT_DATA_EXCLUDE="myCustomAttribute2, myOtherCustomAttributeMoreSpecificName"
NEW_RELIC_APPLICATION_LOGGING_FORWARDING_MAX_SAMPLES_STORED=10000
NEW_RELIC_APPLICATION_LOGGING_FORWARDING_LOG_LEVEL_DENYLIST="debug, warn"
NEW_RELIC_APPLICATION_LOGGING_FORWARDING_LABELS_ENABLED=true
NEW_RELIC_APPLICATION_LOGGING_FORWARDING_LABELS_EXCLUDE="label1, label2"
NEW_RELIC_APPLICATION_LOGGING_LOCAL_DECORATING_ENABLED=true
```

O elemento `applicationLogging` suporta os seguintes atributos e subelementos:

<CollapserGroup>
  <Collapser id="applog-enabled" title="habilitado">
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Habilite ou desabilite todos os recursos de instrumentação de log. Se `true`, a configuração do sub-recurso individual entrará em vigor. Se `false`, nenhum recurso de instrumentação de criação de log será ativado.

    Ou use a variável de ambiente `NEW_RELIC_APPLICATION_LOGGING_ENABLED` .
  </Collapser>

  <Collapser id="applog-metrics" title="métrica">
    Use este subelemento para habilitar a coleta de métricas de registro em log (como `Logging/lines`) para estrutura de registro em log .NET comum. O valor padrão do atributo `enabled` é `true`.

    Ou use a variável de ambiente `NEW_RELIC_APPLICATION_LOGGING_METRICS_ENABLED` .
  </Collapser>

  <Collapser id="applog-forwarding" title="encaminhamento">
    Use este subelemento para ativar o encaminhamento do log do seu aplicativo para New Relic. O valor padrão do atributo `enabled` é `true`, você também pode usar a variável de ambiente `NEW_RELIC_APPLICATION_LOGGING_FORWARDING_ENABLED` .

    O valor padrão do atributo `maxSamplesStored` é `10000`, você também pode usar a variável env `NEW_RELIC_APPLICATION_LOGGING_FORWARDING_MAX_SAMPLES_STORED` para esta configuração. Defina um valor mais baixo para reduzir a quantidade de linhas de log enviadas (pode causar amostragem de log). Defina um valor mais alto para enviar mais linhas de log.

    Cada log recebe a mesma prioridade que sua transação associada. log que ocorrem fora de uma transação receberão uma prioridade aleatória. Alguns registros podem não ser incluídos porque são limitados por `maxSamplesStored`. Por exemplo, se o registro em log `maxSamplesStored` estiver definido como 10.000 e a transação 1 tiver 10.000 entradas de log, somente as entradas de log da transação 1 serão registradas. Se a transação 1 tiver menos de 10.000 logs, você receberá todos os logs da transação 1. Se ainda houver espaço, você receberá todo o log da transação 2 e assim por diante.

    Se após todos os logs de transação amostrados forem registrados, e eles não atingirem o limite em `maxSamplesStored`, será enviada a mensagem do log de transação que não estava em nossa amostragem. Se sobrar alguma, as mensagens do log fora da transação serão registradas.

    Use o atributo `logLevelDenyList` (ou a variável de ambiente `NEW_RELIC_APPLICATION_LOGGING_FORWARDING_LOG_LEVEL_DENYLIST`) para filtrar a mensagem do log do nível de log especificado. O valor desse atributo é uma lista de níveis separados por vírgula e que não diferenciam maiúsculas de minúsculas. Fora do caso, a string do nível de log deve corresponder exatamente ao nível de log que está sendo filtrado; curingas e regex não são suportados. Por exemplo, se o valor fosse definido como `logLevelDenyList="debug,warn"`, qualquer mensagem do log com nível de log `Debug` ou `Warn` não seria capturada ou encaminhada, mas um log com nível `Warning` ainda seria enviado para New Relic.

    <Callout variant="caution">
      Se você já estiver enviando os logs do seu aplicativo para o New Relic usando uma solução de encaminhamento de logs existente, desative-a antes de ativar o encaminhamento de logs no agente, para evitar cobrança por dados log duplicados.
    </Callout>
  </Collapser>

  <Collapser id="contextData" title="contextData (atributo personalizado)">
    Utilize este subelemento, que é filho do elemento `forwarding` , para configurar a captura e encaminhamento de dados de contexto de registro ([atributo personalizado](/docs/apm/agents/net-agent/net-agent-api/itransaction/#addcustomattribute)), nas versões 10.4.0 e superiores do agente.

    Defina o atributo `enabled` como `true` para ativar a captura e o encaminhamento de dados de contexto de registro para o New Relic. Você também pode usar a variável de ambiente `NEW_RELIC_APPLICATION_LOGGING_FORWARDING_CONTEXT_DATA_ENABLED`. O valor padrão é `false`.

    O atributo `include` é uma lista separada por vírgula de nomes de atributo a serem incluídos quando a captura de dados de contexto está habilitada. Você também pode usar a variável de ambiente `NEW_RELIC_APPLICATION_LOGGING_FORWARDING_CONTEXT_DATA_INCLUDE`. O valor padrão é uma string vazia, que significa “incluir tudo”.

    O atributo `exclude` é uma lista separada por vírgula de nomes de atributo a serem excluídos quando a captura de dados de contexto está habilitada. Você também pode usar a variável de ambiente `NEW_RELIC_APPLICATION_LOGGING_FORWARDING_CONTEXT_DATA_EXCLUDE`. O valor padrão é uma string vazia, que significa &quot;não excluir nada&quot;.

    As listas de inclusão e exclusão seguem as [mesmas regras de precedência de outras configurações de atributo de agente](/docs/apm/agents/net-agent/attributes/enable-disable-attributes-net/#attruls).
  </Collapser>

  <Collapser id="labels" title="rótulos (etiqueta)">
    Use este subelemento, que é filho do elemento `forwarding` , para configurar a adição de seus [rótulos (tag)](/docs/apm/agents/net-agent/configuration/net-agent-configuration/#labels-tags) ao log encaminhado pelo agente, nas versões 10.34.0 e superiores do agente.

    Defina o atributo `enabled` como `true` para habilitar a adição de seus rótulos ao log encaminhado pelo agente. Você também pode usar a variável de ambiente `NEW_RELIC_APPLICATION_LOGGING_FORWARDING_LABELS_ENABLED`. O valor padrão é `false`.

    O atributo `exclude` é uma lista de nomes de rótulos, separados por vírgulas e sem distinção entre maiúsculas e minúsculas, a serem excluídos quando você habilita rótulos. Você também pode usar a variável de ambiente `NEW_RELIC_APPLICATION_LOGGING_FORWARDING_LABELS_EXCLUDE`. O valor padrão é uma string vazia, o que significa &quot;não excluir nada&quot;. Este atributo não suporta curingas ou regex.
  </Collapser>

  <Collapser id="localDecorating" title="Decoração log locais">
    Use este subelemento para ativar a decoração do log do seu aplicativo com metadados de vinculação do New Relic. O valor padrão do atributo `enabled` é `false`. Algumas alterações de configuração adicionais são necessárias para a decoração log local. Consulte [.NET: Configurar logs contextualizados](/docs/logs/logs-context/net-configure-logs-context-all#2-decorate) para obter mais informações.
  </Collapser>
</CollapserGroup>

### Nível do código métrico [#code\_level\_metrics][#code_level_metrics]

O elemento `codeLevelMetrics` é filho do elemento `configuration` . Use `codeLevelMetrics` para ativar o suporte ao nível do código métrico no CodeStream por meio de metadados adicionais do método instrumentado capturados como atributo no evento span.

Para obter mais detalhes, consulte nossa documentação para [integração do New Relic CodeStream](/docs/apm/agents/net-agent/other-features/net-codestream-integration).

```xml
<codeLevelMetrics enabled="true" />
```

Isso também pode ser configurado através da variável de ambiente:

```ini
NEW_RELIC_CODE_LEVEL_METRICS_ENABLED=true
```

### Provedor de nuvem temporário [#cloud]

O elemento `cloud` é filho do elemento `configuration` . Use `cloud` para configurar metadados do provedor de nuvem para seu aplicativo.

O elemento `cloud` oferece suporte aos seguintes subelementos:

<CollapserGroup>
  <Collapser id="cloud-aws" title="AWS">
    Use este subelemento para configurar o ID da conta da AWS para seu aplicativo.

    <Callout variant="important">
      Observe que essa configuração normalmente não é necessária, pois o agente detectará automaticamente o ID da conta da AWS no tempo de execução. Se a detecção automática não estiver funcionando, o agente retornará ao valor configurado aqui.
    </Callout>

    ```xml
    <cloud>
      <aws accountId="123456789012" />
    </cloud>
    ```

    Isso também pode ser configurado através da variável de ambiente:

    ```ini
    NEW_RELIC_CLOUD_AWS_ACCOUNT_ID=123456789012
    ```
  </Collapser>
</CollapserGroup>

### AI Monitoring [#ai\_monitoring][#ai_monitoring]

Por padrão, AI Monitoring está desabilitado. Para ativar AI Monitoring, defina o atributo `enabled` como `true` no elemento `aiMonitoring`. O elemento `aiMonitoring` é filho do elemento `configuration` .

<Callout variant="important">
  Quando ativado, AI Monitoring registrará uma cópia de streaming das entradas e saídas enviadas de e para os modelos que você escolher monitorar, incluindo quaisquer informações pessoais contidas neles. Ao usar AI Monitoring, você é responsável por obter o consentimento do seu usuário modelo para que sua interação possa ser gravada por um terceiro (New Relic) com a finalidade de fornecer o recurso AI Monitoring .
</Callout>

```xml
<aiMonitoring enabled="true" />
```

Isso também pode ser configurado através da variável de ambiente:

```ini
NEW_RELIC_AI_MONITORING_ENABLED=true
```

O elemento `aiMonitoring` oferece suporte aos seguintes subelementos:

<CollapserGroup>
  <Collapser id="aiMonitoring_recordContent" title="recordContent">
    Use este subelemento para permitir que todas as entradas e saídas do evento LLM sejam enviadas para New Relic. O valor padrão do atributo `enabled` é `true`. A gravação de conteúdo está desativada no modo de alta segurança.

    Observe que se a gravação de conteúdo estiver desabilitada, a contagem token LLM deverá ser fornecida pelos clientes, chamando a [API`SetLlmTokenCountingCallback` ](/docs/agents/net-agent/net-agent-api/setllmtokencountingcallback-net-agent-api). Caso este retorno de chamada não seja fornecido, o agente não poderá fornecer contagem token LLM.

    ```xml
    <aiMonitoring enabled="true">
      <recordContent enabled="false" />
    </aiMonitoring>
    ```

    Isso também pode ser configurado através da variável de ambiente:

    ```ini
    NEW_RELIC_AI_MONITORING_RECORD_CONTENT_ENABLED=false
    ```
  </Collapser>
</CollapserGroup>

## Configurações em app.config ou web.config [#app-config-settings]

Para aplicativos de console ASP.NET e .NET framework , você também pode definir as seguintes configurações no `app.config` ou `web.config` do aplicativo, no elemento mais externo, `<configuration>`:

<CollapserGroup>
  <Collapser id="app-cfg-agent-enabled" title="Habilitar e desabilitar o agente">
    ```xml
    <appSettings>
       <add key="NewRelic.AgentEnabled" value="false" />
    </appSettings>
    ```

    <Callout variant="important">
      Se o agente estiver desativado no `newrelic.config` local ou global, as configurações `NewRelic.AgentEnabled` nesses arquivos **não** ativarão o agente.
    </Callout>
  </Collapser>

  <Collapser id="app-cfg-application-name" title="Nome do aplicativo">
    Para obter mais informações, consulte [Nomeie seu aplicativo .NET](/docs/agents/net-agent/installation-configuration/name-your-net-application).

    ```xml
    <appSettings>
      <add key="NewRelic.AppName" value="Descriptive Name" />
    </appSettings>
    ```
  </Collapser>

  <Collapser id="app-cfg-license-key" title="chave de licença">
    ```xml
    <appSettings>
      <add key="NewRelic.LicenseKey" value="YOUR_LICENSE_KEY" />
    </appSettings>
    ```
  </Collapser>

  <Collapser id="app-cfg-labels" title="Etiquetas">
    ```xml
    <appSettings>
      <add key="NewRelic.Labels" value="key1:value1;key2:value2" />
    </appSettings>
    ```
  </Collapser>

  <Collapser id="app-cfg-location" title="Alterar localização do newrelic.config">
    Designa um local alternativo para o arquivo de configuração fora da raiz local do aplicativo ou do local de configuração global. O local inserido deve ser um caminho absoluto.

    ```xml
    <appSettings>
      <add key="NewRelic.ConfigFile" value="C:\Path-to-alternate-config-dir\newrelic.config" />
    </appSettings>
    ```
  </Collapser>
</CollapserGroup>

## Configurações em appsettings.json [#appsettings-json]

Para aplicativos .NET Core, você poderá definir as seguintes configurações em `appsettings.json` se o seguinte for verdadeiro:

* O arquivo `appsettings.json` deve estar localizado no diretório de trabalho atual do aplicativo.

* O aplicativo deve ter a seguinte dependência:

  * [`Microsoft.Extensions.Configuration`](https://www.nuget.org/packages/Microsoft.Extensions.Configuration)
  * [`Microsoft.Extensions.Configuration.Json`](https://www.nuget.org/packages/Microsoft.Extensions.Configuration.Json)
  * [`Microsoft.Extensions.Configuration.EnvironmentVariables`](https://www.nuget.org/packages/Microsoft.Extensions.Configuration.EnvironmentVariables)

<CollapserGroup>
  <Collapser id="appsettings-json-agent-enabled" title="Habilitar e desabilitar o agente">
    ```json
    {
       "NewRelic.AgentEnabled":"false"
    }
    ```

    <Callout variant="important">
      Se o agente estiver desativado no `newrelic.config` local ou global, as configurações `NewRelic.AgentEnabled` nesses arquivos ativarão o agente.
    </Callout>
  </Collapser>

  <Collapser id="appsettings-json-application-name" title="Nome do aplicativo">
    Para obter mais informações, consulte [Nomeie seu aplicativo .NET](/docs/agents/net-agent/installation-configuration/name-your-net-application).

    ```json
    {
      "NewRelic.AppName": "Descriptive Name"
    }
    ```
  </Collapser>

  <Collapser id="appsettings-json-application-license-key" title="chave de licença">
    ```json
    {
      "NewRelic.LicenseKey": "YOUR_LICENSE_KEY"
    }
    ```
  </Collapser>

  <Collapser id="appsettings-json-labels" title="Etiquetas">
    ```json
    {
      "NewRelic.Labels": "key1:value1;key2:value2"
    }
    ```
  </Collapser>

  <Collapser id="appsettings-json-location" title="Alterar localização do newrelic.config">
    Designa um local alternativo para o arquivo de configuração fora da raiz local do aplicativo ou do local de configuração global. O local inserido deve ser um caminho absoluto.

    ```json
    {
      "NewRelic.ConfigFile": "C:\Path-to-alternate-config-dir\newrelic.config"
    }
    ```
  </Collapser>
</CollapserGroup>

<Callout variant="important">
  Para [aplicativos ASP..NET Core](https://asp.net/), o agente .NET lerá `appsettings.{environment}.json` se você definir a variável `ASPNETCORE_ENVIRONMENT` .
</Callout>