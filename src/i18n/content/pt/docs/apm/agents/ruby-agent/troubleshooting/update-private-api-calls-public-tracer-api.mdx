---
title: Atualizar chamada privada de API para API tracer público
type: troubleshooting
tags:
  - Agents
  - Ruby agent
  - Troubleshooting
metaDescription: Update deprecated API calls for the New Relic Ruby agent.
freshnessValidatedDate: never
translationType: machine
---

## Problema

No agente New Relic Ruby versão [6.0.0](/docs/releases/ruby), diversas API que não tinham suporte público foram descontinuadas ou excluídas. Se você usar qualquer um dos métodos excluídos, deverá atualizar sua API com a substituição recomendada antes de atualizar para o agente Ruby versão 6.0.0 ou superior. Se você usar algum dos métodos obsoletos, recomendamos atualizar sua API o mais rápido possível para garantir compatibilidade com versões do agente superiores a 6.0.0.

## Solução

Atualize sua API com as seguintes substituições recomendadas:

<CollapserGroup>
  <Collapser
    id="external-start-segment"
    title={<InlineCode>External.start_segment</InlineCode>}
  >
    Substituir com `NewRelic::Agent::Tracer.start_external_request_segment`
  </Collapser>

  <Collapser
    id="transaction-create-segment"
    title={<InlineCode>Transaction.create_segment</InlineCode>}
  >
    Substituir com `NewRelic::Agent::Tracer.start_segment`
  </Collapser>

  <Collapser
    id="transaction-start"
    title={<InlineCode>Transaction.start</InlineCode>}
  >
    Substituir com `NewRelic::Agent::Tracer.start_transaction_or_segment`
  </Collapser>

  <Collapser
    id="transaction-start-datastore-segment"
    title={<InlineCode>Transaction.start_datastore_segment</InlineCode>}
  >
    Substituir com `NewRelic::Agent::Tracer.start_datastore_segment`
  </Collapser>

  <Collapser
    id="transaction-start-segment"
    title={<InlineCode>Transaction.start_segment</InlineCode>}
  >
    Substituir com `NewRelic::Agent::Tracer.start_segment`
  </Collapser>

  <Collapser
    id="transaction-wrap"
    title={<InlineCode>Transaction.wrap</InlineCode>}
  >
    Substituir com `NewRelic::Agent::Tracer.in_transaction`
  </Collapser>

  <Collapser
    id="transaction-state-current-transaction"
    title={<InlineCode>TransactionState.current_transaction</InlineCode>}
  >
    Substituir com `NewRelic::Agent::Tracer.current_transaction`
  </Collapser>
</CollapserGroup>
