---
title: Habilitar e desabilitar atributo (Ruby)
tags:
  - Agents
  - Ruby agent
  - Attributes
metaDescription: 'How to include and exclude specific attributes for your New Relic Ruby agent, including properties and rules.'
freshnessValidatedDate: never
translationType: machine
---

Isto descreve as propriedades para ativar ou desativar [atributo](/docs/apm/agents/ruby-agent/attributes/ruby-agent-attributes) e as regras que New Relic usa ao determinar qual atributo incluir ou excluir para um [destino](/docs/agents/manage-apm-agents/agent-data/agent-attributes#destinations). Isso também inclui um resumo das propriedades do agente Ruby que foram descontinuadas ou removidas com o lançamento do atributo do agente New Relic .

## Propriedades

Use as seguintes propriedades para ativar ou desativar o atributo:

<CollapserGroup>
  <Collapser
    id="attributes-enabled"
    title="attributes.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            Variável ambiental
          </th>

          <td>
            `NEW_RELIC_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    Se `true`, habilita a captura de atributo para todos os destinos.
  </Collapser>

  <Collapser
    id="transaction_tracer-attributes-enabled"
    title="transaction_tracer.attributes.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            (Dinâmico)
          </td>
        </tr>

        <tr>
          <th>
            Variável ambiental
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_TRACER_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    Se `true`, o agente captura o atributo do rastreamento da transação.
  </Collapser>

  <Collapser
    id="transaction_events-attributes-enabled"
    title="transaction_events.attributes.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            (Dinâmico)
          </td>
        </tr>

        <tr>
          <th>
            Variável ambiental
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_EVENTS_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    Se `true`, o agente captura o atributo do evento de transação.
  </Collapser>

  <Collapser
    id="error_collector-attributes-enabled"
    title="error_collector.attributes.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            (Dinâmico)
          </td>
        </tr>

        <tr>
          <th>
            Variável ambiental
          </th>

          <td>
            `NEW_RELIC_ERROR_COLLECTOR_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    Se `true`, o agente captura um atributo da coleta de erros.
  </Collapser>

  <Collapser
    id="browser_monitoring-attributes-enabled"
    title="browser_monitoring.attributes.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            (Dinâmico)
          </td>
        </tr>

        <tr>
          <th>
            Variável ambiental
          </th>

          <td>
            `NEW_RELIC_BROWSER_MONITORING_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    Se `true`, o agente captura o atributo de <InlinePopover type="browser"/>.
  </Collapser>

  <Collapser
    id="span-events-attributes-enabled"
    title="span_events.attributes.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            (Dinâmico)
          </td>
        </tr>

        <tr>
          <th>
            Variável ambiental
          </th>

          <td>
            `NEW_RELIC_SPAN_EVENTS_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    Se `true`, o agente captura o atributo no evento span.
  </Collapser>

  <Collapser
    id="transaction-segments-attributes-enabled"
    title="transaction_segments.attributes.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            (Dinâmico)
          </td>
        </tr>

        <tr>
          <th>
            Variável ambiental
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_SEGMENTS_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    Se `true`, o agente captura atributo em segmentos de transação.
  </Collapser>

  <Collapser
    id="attributes-exclude"
    title="attributes.exclude"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Matriz
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Variável ambiental
          </th>

          <td>
            `NEW_RELIC_ATTRIBUTES_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    Prefixo de atributo para excluir de todos os destinos. Permite `*` como curinga no final.
  </Collapser>

  <Collapser
    id="transaction_tracer-attributes-exclude"
    title="transaction_tracer.attributes.exclude"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Matriz
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Variável ambiental
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_TRACER_ATTRIBUTES_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    Prefixo de atributo para excluir do rastreamento da transação. Permite `*` como curinga no final.
  </Collapser>

  <Collapser
    id="transaction_events-attributes-exclude"
    title="transaction_events.attributes.exclude"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Matriz
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Variável ambiental
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_EVENTS_ATTRIBUTES_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    Prefixo do atributo para excluir do evento de transação. Permite `*` como curinga no final.
  </Collapser>

  <Collapser
    id="error_collector-attributes-exclude"
    title="error_collector.attributes.exclude"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Matriz
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Variável ambiental
          </th>

          <td>
            `NEW_RELIC_ERROR_COLLECTOR_ATTRIBUTES_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    Prefixo de atributo para excluir da coleta de erros. Permite `*` como curinga no final.

    Para evitar a coleta [de mensagens de erro](/attribute-dictionary?attribute_name=error.message) , use a configuração [strip_exception_messages](/docs/agents/ruby-agent/configuration/ruby-agent-configuration#strip_exception_messages-enabled) .
  </Collapser>

  <Collapser
    id="browser_monitoring-attributes-exclude"
    title="browser_monitoring.attributes.exclude"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Matriz
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Variável ambiental
          </th>

          <td>
            `NEW_RELIC_BROWSER_MONITORING_ATTRIBUTES_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    Prefixo do atributo a ser excluído de <InlinePopover type="browser"/>. Permite `*` como curinga no final.
  </Collapser>

  <Collapser
    id="span-events-attributes-exclude"
    title="span_events.attributes.exclude"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Matriz
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Variável ambiental
          </th>

          <td>
            `NEW_RELIC_SPAN_EVENTS_ATTRIBUTES_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    Prefixo do atributo para excluir do evento span. Permite `*` como curinga no final.
  </Collapser>

  <Collapser
    id="transaction-segments-attributes-exclude"
    title="transaction_segments.attributes.exclude"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Matriz
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Variável ambiental
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_SEGMENTS_ATTRIBUTES_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    Prefixo de atributo para excluir dos segmentos de transação. Permite `*` como curinga no final.
  </Collapser>

  <Collapser
    id="attributes-include"
    title="attributes.include"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Matriz
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Variável ambiental
          </th>

          <td>
            `NEW_RELIC_ATTRIBUTES_INCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    Prefixo de atributo a incluir em todos os destinos. Permite `*` como curinga no final.
  </Collapser>

  <Collapser
    id="transaction_tracer-attributes-include"
    title="transaction_tracer.attributes.include"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Matriz
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Variável ambiental
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_TRACER_ATTRIBUTES_INCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    Prefixo do atributo a incluir no rastreamento da transação. Permite `*` como curinga no final.
  </Collapser>

  <Collapser
    id="transaction_events-attributes-include"
    title="transaction_events.attributes.include"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Matriz
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Variável ambiental
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_EVENTS_ATTRIBUTES_INCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    Prefixo do atributo a ser incluído no evento da transação. Permite `*` como curinga no final.
  </Collapser>

  <Collapser
    id="error_collector-attributes-include"
    title="error_collector.attributes.include"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Matriz
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Variável ambiental
          </th>

          <td>
            `NEW_RELIC_ERROR_COLLECTOR_ATTRIBUTES_INCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    Prefixo do atributo a ser incluído na coleta de erros. Permite `*` como curinga no final.
  </Collapser>

  <Collapser
    id="browser_monitoring-attributes-include"
    title="browser_monitoring.attributes.include"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Matriz
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Variável ambiental
          </th>

          <td>
            `NEW_RELIC_BROWSER_MONITORING_ATTRIBUTES_INCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    Prefixo de atributo a incluir no monitoramento de Browser. Permite `*` como curinga no final.
  </Collapser>

  <Collapser
    id="span-events-attributes-include"
    title="span_events.attributes.include"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Matriz
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Variável ambiental
          </th>

          <td>
            `NEW_RELIC_SPAN_EVENTS_ATTRIBUTES_INCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    Prefixo do atributo a incluir no evento span. Permite `*` como curinga no final.
  </Collapser>

  <Collapser
    id="transaction-segments-attributes-include"
    title="transaction_segments.attributes.include"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Matriz
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Variável ambiental
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_SEGMENTS_ATTRIBUTES_INCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    Prefixo do atributo a incluir nos segmentos da transação. Permite `*` como curinga no final.
  </Collapser>
</CollapserGroup>

## Regras de atributo [#attruls]

A New Relic segue essas regras ao determinar qual atributo incluir ou excluir para um destino.

<CollapserGroup>
  <Collapser
    id="rule-root-precedence"
    title="O nível raiz tem precedência para ativado."
  >
    O campo `attributes.enabled` supera todas as outras configurações. Quando `false`, nenhum atributo será reportado à New Relic.

    Exemplo de configuração:

    ```
    attributes.enabled: false
        attributes.include: foo, bar
        transaction_tracer.attributes.enabled: true
    ```

    Exemplo de saída:

    ```
    Keys passed in: foo, bar, baz
        Keys included for all destinations:
        Keys excluded for all destinations: foo, bar, baz
    ```
  </Collapser>

  <Collapser
    id="rule-destination-precedence"
    title="O destino ativado tem precedência sobre inclusão e exclusão."
  >
    As sinalizações `YOUR_DESTINATION.attributes.enabled` têm precedência sobre as chaves de inclusão e exclusão.

    Exemplo de configuração:

    ```
    transaction_tracer.attributes.enabled: false
        attributes.include: one, two
        transaction_tracer.attributes.include: three, four
    ```

    Exemplo de saída:

    ```
    Keys passed in: one, two, three, four
        Keys included for transaction traces:
        Keys excluded for transaction traces: one, two, three, four
    ```
  </Collapser>

  <Collapser
    id="rule-included-destination"
    title="O atributo será incluído se o destino estiver habilitado."
  >
    Se um destino estiver habilitado, todos os atributos do usuário serão enviados para esse destino por padrão.

    <DNT>**Note:**</DNT> Todos os atributos do usuário são padronizados como `true`. No entanto, por padrão, os parâmetros de solicitação estão desabilitados para todos os destinos.

    Exemplo de configuração:

    ```
    attributes.enabled: true
        attributes.exclude: baz
    ```

    Exemplo de saída:

    ```
    Keys passed in: foo, bar, baz
        Keys included: foo, bar
        Keys excluded: baz
    ```
  </Collapser>

  <Collapser
    id="rule-exclude-wins"
    title="Excluir sempre substitui incluir."
  >
    Se a mesma chave estiver listada nas listas de inclusão e exclusão, então o atributo com a chave especificada será excluído.

    Exemplo de configuração:

    ```
    attributes.enabled: true
        attributes.include: foo, bar
        attributes.exclude: nerd, bar
    ```

    Exemplo de saída:

    ```
    Keys passed in: foo, bar, nerd
        Keys included: foo
        Keys excluded: nerd, bar
    ```
  </Collapser>

  <Collapser
    id="rule-keys-case-sensitive"
    title="As chaves diferenciam maiúsculas de minúsculas."
  >
    As chaves diferenciam maiúsculas de minúsculas.

    Exemplo de configuração:

    ```
    attributes.enabled: true
        attributes.exclude: username, UsErNaMe
    ```

    Exemplo de saída:

    ```
    Keys passed in: username, Username, USERNAME, UsErNaMe, userNAME
        Keys included: Username, USERNAME, userNAME
        Keys excluded: username, UsErNaMe
    ```
  </Collapser>

  <Collapser
    id="rule-star-wildcard"
    title={<>Use <InlineCode>\*</InlineCode> para curingas.</>}
  >
    Você pode usar um asterisco `*` no final de uma chave como curinga. Isso corresponderá a um conjunto de atributo com o mesmo prefixo.

    Exemplo de configuração:

    ```
    attributes.enabled: true
        attributes.include: custom*
        attributes.exclude: request.parameters.*
    ```

    Exemplo de saída:

    ```
    Keys passed in: custom, custom.key1, custom.key2, request.parameters., request.parameters.foo, request.parameters.bar
        Keys included: custom, custom.key1, custom.key2
        Keys excluded: request.parameters., request.parameters.foo, request.parameters.bar
    ```
  </Collapser>

  <Collapser
    id="rule-specific-wins"
    title="A configuração mais específica de uma chave tem prioridade."
  >
    Se vários atributos de inclusão ou exclusão afetarem a mesma chave, a configuração mais específica terá prioridade.

    Exemplo de configuração:

    ```
    attributes.enabled: true
        attributes.include: request.parameters.foo
        attributes.exclude: request.parameters.*
    ```

    Exemplo de saída:

    ```
    Keys passed in: request.parameters., request.parameters.foo, request.parameters.bar
        Keys included: request.parameters.foo
        Keys excluded: request.parameters., request.parameters.bar
    ```
  </Collapser>

  <Collapser
    id="rule-destination-include-exclude"
    title="Incluir ou excluir afeta o destino específico."
  >
    Se o atributo include ou exclude for especificado em um destino, ele afetará apenas esse destino.

    Exemplo de configuração:

    ```
    attributes.include: foo
        transaction_events.attributes.exclude: foo
    ```

    Exemplo de saída:

    ```
    Keys passed in: foo
        Keys included for transaction events:
        Keys included for other destinations: foo
        Keys excluded for transaction events: foo
    ```
  </Collapser>
</CollapserGroup>

## Propriedades relacionadas ao URI [#uri]

Por padrão, o agente Ruby reporta URIs (Uniform Resource Identifir) para o New Relic em vários locais diferentes, incluindo os seguintes destinos:

* O atributo `request.uri` do [evento de erro](/docs/apm/applications-menu/error-analytics/error-analytics-manage-error-traces)
* O atributo `http.url` do [evento span](/docs/apm/distributed-tracing/getting-started/introduction-distributed-tracing)
* O atributo `url` do [rastreamento SQL lento](/docs/apm/applications-menu/monitoring/view-slow-query-details)
* O atributo `uri` de [segmentos de solicitação externa](/docs/agents/ruby-agent/features/http-client-tracing-ruby)

A New Relic recomenda que esses URIs sejam relatados, pois eles podem conter informações úteis de depuração. Se seus URIs contiverem dados confidenciais que você não deseja relatar, como endereços de e-mail ou IDs de contas, você poderá desativar os relatórios de URI. Para desativar o relatório de URI, adicione qualquer um dos nomes de atributo acima à lista `attributes.exclude` .

Por exemplo, adicionar a seguinte chave ao seu arquivo de configuração impedirá que o agente relate qualquer uma das propriedades relacionadas ao URI:

```
attributes.exclude: uri
```

## Propriedades obsoletas e removidas [#deprecated]

As propriedades a seguir foram descontinuadas ou removidas. Mude para a nova configuração de atributo para essas propriedades ao atualizar seu agente Ruby.

<table>
  <thead>
    <tr>
      <th width={200}>
        <DNT>
          **Deprecated property**
        </DNT>
      </th>

      <th>
        <DNT>
          **New property**
        </DNT>
      </th>

      <th>
        <DNT>
          **Removed Version**
        </DNT>
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `capture_params`
      </td>

      <td>
        `attributes.include: request.parameters.*`
      </td>

      <td>
        N/A
      </td>
    </tr>

    <tr>
      <td>
        `resque.capture_params`
      </td>

      <td>
        `attributes.include: job.resque.args.*`
      </td>

      <td>
        9.0.0
      </td>
    </tr>

    <tr>
      <td>
        `sidekiq.capture_params`
      </td>

      <td>
        `attributes.include: job.sidekiq.args.*`
      </td>

      <td>
        9.0.0
      </td>
    </tr>

    <tr>
      <td>
        `transaction_tracer.capture_attributes`
      </td>

      <td>
        `transaction_tracer.attributes.enabled`
      </td>

      <td>
        9.0.0
      </td>
    </tr>

    <tr>
      <td>
        `error_collector.capture_attributes`
      </td>

      <td>
        `error_collector.attributes.enabled`
      </td>

      <td>
        9.0.0
      </td>
    </tr>

    <tr>
      <td>
        `browser_monitoring.capture_attributes`
      </td>

      <td>
        `browser_monitoring.attributes.enabled`
      </td>

      <td>
        9.0.0
      </td>
    </tr>

    <tr>
      <td>
        `analytics_events.capture_attributes`
      </td>

      <td>
        `transaction_events.attributes.enabled`
      </td>

      <td>
        9.0.0
      </td>
    </tr>
  </tbody>
</table>
