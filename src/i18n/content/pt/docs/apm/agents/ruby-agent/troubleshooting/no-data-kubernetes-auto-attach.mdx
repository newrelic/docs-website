---
title: Nenhum dado com a anexação automática do Kubernetes APM
type: troubleshooting
tags:
  - Agents
  - Ruby agent
  - Kubernetes
  - Troubleshooting
  - Sinatra
metaDescription: 'If you are not seeing New Relic data for a non-Rails Ruby application using the Kubernetes APM auto-attach, you may need to explicitly call `Bundler.require`.'
freshnessValidatedDate: never
translationType: machine
---

## Problema

Você está usando o agente Ruby New Relic com o Kubernetes APM auto-attach para uma framework não Rails (como o Sinatra), mas nenhum dado APM está aparecendo na sua conta New Relic .

## Solução

Chame explicitamente `Bundler.require` no início do processo de inicialização do seu aplicativo.

Para muitas estruturas, isso pode ser feito adicionando-o ao seu arquivo de aplicativo principal ou a um arquivo `config.ru` antes que suas classes de aplicativo sejam definidas.

Exemplo (`config.ru` ou `app.rb`):

```ruby
# config.ru

require 'bundler'
Bundler.require

# ... rest of your application's startup code
require_relative './my_sinatra_app'
run MySinatraApp
```

Depois de adicionar esse código, reimplante seu aplicativo. Os dados devem começar a aparecer no New Relic em alguns minutos.

## Causa

O anexo automático do Kubernetes APM funciona corrigindo o método `Bundler::Runtime#require` para injetar a gema `newrelic_rpm` no seu aplicativo.

Enquanto o aplicativo Rails chama `Bundler.require` automaticamente durante o processo de inicialização, muitos outros frameworks não o fazem. Se `Bundler.require` nunca for chamado, o agente New Relic nunca será carregado no ambiente do seu aplicativo. Adicionar esta linha garante que o agente seja carregado conforme o esperado.