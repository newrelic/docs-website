---
title: Instrumentação Mongo
tags:
  - Agents
  - Ruby agent
  - Instrumented gems
metaDescription: New Relic Ruby agent support for MongoDB
freshnessValidatedDate: never
translationType: machine
---

O agente Ruby possui instrumentação integrada para consulta do MongoDB feita por meio da gem [`mongo`](https://rubygems.org/gems/mongo "O link abre em uma nova janela") .

## Gemas suportadas [#supported_gems]

Isso resume o suporte do agente Ruby para gems por versão.

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        <DNT>
          **Gem version**
        </DNT>
      </th>

      <th>
        <DNT>
          **Comments**
        </DNT>
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `mongo` 1,8 e 1,9
      </td>

      <td>
        Compatível com o agente Ruby 3.7.1 da New Relic ou superior
      </td>
    </tr>

    <tr>
      <td>
        `mongo` 2,0
      </td>

      <td>
        Não suportado
      </td>
    </tr>

    <tr>
      <td>
        `mongo` 2.1 ou superior
      </td>

      <td>
        Requer agente Ruby da New Relic 3.13.1 ou superior
      </td>
    </tr>

    <tr>
      <td>
        Outras joias
      </td>

      <td>
        Atualmente, o suporte para Mongoid 2/3/4 e Moped está disponível apenas por meio de gemas de terceiros. Para links para os projetos relevantes, consulte [extends_newrelic_rpm](https://github.com/newrelic/extends_newrelic_rpm).
      </td>
    </tr>
  </tbody>
</table>

## Instrumentação de terceiros e extends_newrelic_rpm [#third_party_instrumentation]

As gemas `extends_newrelic_rpm` e `newrelic_mongo` fornecem instrumentação básica para `mongo`. A New Relic não recomenda executar a instrumentação do Mongo por meio dessas gemas junto com o suporte integrado do agente Ruby ao Mongo. Isso pode contar duas vezes métricas, como o tempo geral do banco de dados.

Além disso, as gemas `extends_newrelic_rpm` e `newrelic_mongo` usam uma configuração distinta que pode ser usada para desativá-las se a remoção completa dessas gemas não for possível em seu ambiente. Para essas joias de terceiros, defina `disable_mongodb: false` em seu <DNT>**newrelic.yml**</DNT>.

## Desativando instrumentação [#Disabling_instrumentation]

Para desativar a instrumentação do Mongo no agente, adicione o seguinte ao seu <DNT>**newrelic.yml**</DNT>:

```
disable_mongo: true
```
