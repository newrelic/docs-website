---
title: newrelic_background_job (API do agente PHP)
type: apiDoc
shortDescription: Especifique manualmente se uma transação é um trabalho em segundo plano ou uma transação da web.
tags:
  - Agents
  - PHP agent
  - PHP agent API
metaDescription: 'New Relic PHP agent API call to define a particular transaction as a background job (for example, for cron jobs).'
freshnessValidatedDate: never
translationType: machine
---

## Sintaxe

```php
newrelic_background_job([bool $flag])
```

Especifique manualmente se uma transação é um trabalho em segundo plano ou uma transação da web.

## Requisitos

Compatível com todas as versões do agente.

## Descrição

Diga ao agente para tratar esta "transação da web como uma" transação fora da web (a interface APM separa web e transação fora da web, por exemplo na [página Transações](/docs/apm/applications-menu/monitoring/transactions-page)). Ligue o mais cedo possível. Isso é mais comumente usado para tarefas cron ou outras tarefas em segundo plano de longa duração. Porém, essa chamada geralmente é desnecessária, pois o agente geralmente detecta automaticamente se uma transação é uma web ou transação fora da web.

Você também pode reverter a funcionalidade definindo o sinalizador opcional como `false`, que marca uma "transação fora da web como uma "transação da web.

## Parâmetro

<table>
  <thead>
    <tr>
      <th width="25%">
        Parâmetro
      </th>

      <th>
        Descrição
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `$flag`

        _boleano_
      </td>

      <td>
        Opcional. O padrão é `true`.

        Se `true` ou omitido, a transação atual será marcada como uma tarefa em segundo plano.

        Se `false`, a transação será marcada como uma transação da web.
      </td>
    </tr>
  </tbody>
</table>

## Exemplos

### Marcar a transação como um trabalho em segundo plano [#mark-as-background]

```php
function example() {
    if (extension_loaded('newrelic')) { // Ensure PHP agent is available
        newrelic_background_job();
    }
    ...
}
```

### Marcar transação como transação da web [#mark-as-web]

```php
function example() {
    if (extension_loaded('newrelic')) { // Ensure PHP agent is available
        newrelic_background_job(false);
    }
    ...
}
```
