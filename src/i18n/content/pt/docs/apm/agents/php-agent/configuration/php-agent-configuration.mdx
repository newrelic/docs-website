---
title: Configuração do agente PHP
tags:
  - Agents
  - PHP agent
  - Configuration
metaDescription: 'New Relic PHP agent configuration: How to edit newrelic.ini config settings (like app name, slow traces, parameters, log file levels, custom frameworks).'
freshnessValidatedDate: never
translationType: machine
---

Nosso agente PHP possui diversas configurações para ajustar os tipos e quantidades de dados relatados. Para a maioria dos usuários, os valores padrão produzem a melhor combinação possível de sobrecarga e utilidade. No entanto, você pode alterar as configurações de acordo com suas necessidades específicas.

<Callout variant="important">
  Sempre reinicie seu servidor web após alterar as configurações INI. Caso contrário, poderão não [entrar em vigor imediatamente](/docs/agents/php-agent/troubleshooting/ini-settings-not-taking-effect-immediately).
</Callout>

## Ordem de precedência de configuração [#config-options-precedence]

Aqui está uma ilustração simples da ordem de precedência que o agente PHP segue para configuração. [A configuração no lado do servidor](/docs/agents/manage-apm-agents/configuration/server-side-agent-configuration) não é aplicável. Os únicos valores que você pode alterar na interface do usuário para aplicativos que usam o agente PHP são o alias do aplicativo e seu valor Apdex-T.

<img
  title="php-config-order.png"
  alt="php-config-order.png"
  src="/images/apm_diagram_php-agent-configuration-hierarchy.webp"
/>

<figcaption>
  Com a API PHP da New Relic, as configurações do agente substituem [as configurações de configuração por diretório](/docs/agents/php-agent/configuration/php-directory-ini-settings). As configurações por diretório substituem as configurações do arquivo `php.ini` . A configuração no lado do servidor não é aplicável.
</figcaption>

## Variáveis do arquivo de configuração [#inivar-background]

Durante a instalação, o script [`newrelic-install`](/docs/agents/php-agent/installation/newrelic-install-script) fornece informações sobre os arquivos de configuração criados ou uma lista de arquivos que você precisa editar. Por padrão, ele tentará criar um arquivo de configuração denominado `newrelic.ini`.

Em alguns casos, você pode ser instruído a adicionar opções de configuração ao arquivo `php.ini` . Faça isso apenas se necessário. Exatamente qual arquivo você precisa editar depende de como sua versão (ou versões) específica do PHP foi configurada.

As duas configurações mais comuns são:

* Use um único arquivo `newrelic.ini` . Este é geralmente o padrão se você mesmo instalou ou compilou o PHP sem opções especiais.
* Varre um determinado diretório em busca de todos os `.ini` arquivos.

Se você não tiver certeza de qual arquivo editar:

* Na linha de comando, revise a saída de `php -i`.

* Em um browser, revise a saída de uma página que contém o script:

  ```php
  <?php phpinfo(); ?>
  ```

* Se o arquivo `newrelic.ini` aparecer, use-o.

## Escopo variável [#inivar-scope]

Cada variável do arquivo `newrelic.ini` tem um escopo definido. O escopo controla onde a configuração pode ser estabelecida ou modificada.

Os dois escopos suportados pelas configurações do New Relic são:

* <DNT>**SYSTEM**</DNT>: valores definidos globalmente no arquivo `newrelic.ini` global.
* <DNT>**PERDIR**</DNT>: Valores definidos [por diretório](/docs/agents/php-agent/configuration/php-directory-ini-settings) .

Cada um também pode ser definido em um nível mais geral. Os locais válidos para cada um são:

<table>
  <thead>
    <tr>
      <th width={275}>
        <DNT>
          **Can be set for:**
        </DNT>
      </th>

      <th>
        SISTEMA
      </th>

      <th>
        PERDER
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        Definido no arquivo `newrelic.ini` global.
      </td>

      <td>
        <Icon
          style={{color: '#328787'}}
          name="fe-check"
        />
      </td>

      <td>
        <Icon
          style={{color: '#328787'}}
          name="fe-check"
        />
      </td>
    </tr>

    <tr>
      <td>
        Definido por diretório.
      </td>

      <td/>

      <td>
        <Icon
          style={{color: '#328787'}}
          name="fe-check"
        />
      </td>
    </tr>
  </tbody>
</table>

<Callout variant="important">
  Você não pode usar `ini_set()` para configurações do New Relic.
</Callout>

## Tipo de variável [#inivar-type]

Cada variável do arquivo `newrelic.ini` possui um tipo definido. O tipo especifica a sintaxe do valor que você usa.

<table>
  <thead>
    <tr>
      <th width={100}>
        <DNT>
          **Variable type**
        </DNT>
      </th>

      <th>
        <DNT>
          **Formatting and contents**
        </DNT>
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        <DNT>
          **String**
        </DNT>
      </td>

      <td>
        Os valores de string podem conter qualquer caractere alfanumérico e pontuação. O valor é delimitado por aspas.
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **Boolean**
        </DNT>
      </td>

      <td>
        Uma configuração lógica verdadeira ou falsa. Os valores válidos são:

        * Para verdadeiro ou ativado: `on`, `true`, o número `1`.
        * Para falso ou desabilitado: `off`, `false`, o número `0`.
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **Number**
        </DNT>
      </td>

      <td>
        Os valores numéricos podem conter apenas dígitos, além de um ponto para indicar flutuação. Salvo indicação em contrário, todos os números são inteiros, não flutuantes.
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **Duration**
        </DNT>
      </td>

      <td>
        Um valor de string delimitado por aspas que representam uma duração de tempo. Use sinalizadores de caracteres para delimitar componentes de tempo. Se não houver sinalizadores, o tempo será em milissegundos.

        * `w`\\= semanas

        * `d`\\= dias

        * `h`\\= horas

        * `m`\\= minutos

        * `s`\\= segundos

        * `ms`\\= milissegundos

        * `us`\\= microssegundos

          Durações de exemplo:

        * `"1w3d23h10m"`\\= 1 semana, 3 dias, 23 horas e 10 minutos

        * `"5h30m"`\\= 5 horas e 30 minutos

        * `"500"`\\= 500 milissegundos
      </td>
    </tr>
  </tbody>
</table>

## Configurações gerais de configuração [#inivar-settings]

Essas configurações estão disponíveis no arquivo `newrelic.ini` .

<CollapserGroup>
  <Collapser
    id="inivar-appname"
    title="newrelic.appname (ALTAMENTE RECOMENDADO)"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            String (use aspas)
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `"PHP Application"`
          </td>
        </tr>
      </tbody>
    </table>

    Esta opção de configuração define o nome do aplicativo sob o qual os dados são relatados no APM. É altamente recomendável substituir o nome padrão por um nome descritivo para evitar confusão e agregação involuntária de dados. Os dados de todos os aplicativos com o mesmo nome serão mesclados no New Relic, portanto, defina isso com cuidado.

    Para todas as opções de nomenclatura de aplicativos, incluindo configurações por diretório, consulte [Nomeie seu aplicativo PHP](/docs/agents/php-agent/configuration/name-your-php-application).

    O valor da configuração é uma lista separada por ponto e vírgula de até três nomes de aplicativos. O primeiro nome na lista é o nome do aplicativo <DNT>**primary**</DNT> . [Deve ser exclusivo](/docs/apm/new-relic-apm/installation-configuration/name-your-application#app-name) para cada conta. O nome do aplicativo é usado como chave em um cache. Ao usar [vários nomes para um aplicativo](/docs/agents/manage-apm-agents/app-naming/use-multiple-names-app), o New Relic usa apenas o primeiro nome para armazenamento em cache. Portanto, cada nome de aplicativo só pode aparecer como o primeiro elemento <DNT>**once**</DNT>.

    <CollapserGroup>
      <Collapser
        id="cache-example"
        title="Exemplo de cache"
      >
        Se você definir `newrelic.appname="App1;App2"` e posteriormente no conjunto de códigos `newrelic.appname="App1;App3"`, o segundo parecerá não funcionar. Ele reportará a <DNT>**App1**</DNT> e <DNT>**App2**</DNT> por causa do cache.
      </Collapser>
    </CollapserGroup>

    Se você precisar [de nomes de aplicativos sobrepostos](/docs/agents/manage-apm-agents/app-naming/use-multiple-names-app), defina o nome comum do aplicativo na segunda ou terceira posições. Por exemplo: `newrelic.appname="App2;App1"` e `newrelic.appname="App3;App1"`. Isso é útil, por exemplo, quando você deseja rastrear um superconjunto de aplicativos.
  </Collapser>

  <Collapser
    id="inivar-capture_params"
    title="newrelic.capture_params"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    <Callout variant="caution">
      Essa configuração foi descontinuada e pode não se comportar conforme o esperado. Em vez disso, use [propriedades atributo](/docs/agents/php-agent/attributes/enable-or-disable-attributes#deprecated-properties).
    </Callout>

    Para definir esse valor programaticamente, use a função de API [`newrelic_capture_params()`](/docs/agents/php-agent/php-agent-api/newrelic_capture_params) .

    Se você passar informações confidenciais diretamente na URL, mantenha esta opção desativada.

    Se definido como `true`, permitirá a gravação do parâmetro passado para um script PHP através da URL (tudo após o `?` na URL) no trace da transação. Eles aparecerão no dropdown <DNT>**Parameters**</DNT> ao exibir o rastreamento da transação.
  </Collapser>

  <Collapser
    id="inivar-framework"
    title="newrelic.framework"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            String (use aspas)
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            (detectado automaticamente)
          </td>
        </tr>
      </tbody>
    </table>

    O agente PHP New Relic detecta automaticamente a estrutura que suporta, mas podem surgir problemas se você estiver usando novas versões experimentais ou se tiver personalizado a framework. Esta configuração desativa a detecção automática framework , em vez disso instrui o agente a tentar nomear a transação de acordo com o framework especificado.

    Especificar `"no_framework"` desativará totalmente a nomenclatura de transação relacionada framework .

    Use qualquer um dos seguintes valores, conforme apropriado:

    * `"cakephp"`

    * `"codeigniter"`

    * `"drupal"` (para Drupal 6 e 7)

    * `"drupal8"` (para Drupal 8 e 9)

    * `"joomla"`

    * `"laravel"`

    * `"magento"`

    * `"magento2"`

    * `"mediawiki"`

    * `"slim"`

    * `"symfony2"` (para Symfony 3 - Symfony 2.x não é suportado)

    * `"symfony4"` (para Symfony 4 e 5)

    * `"wordpress"`

    * `"yii"`

    * `"zend"`

    * `"zend2"` (para framework Zend 2 e 3)

    * `"no_framework"` (para não forçar nenhuma framework mesmo que uma tenha sido detectada)

      Se a detecção automática framework falhar, este comando também falhará.

      <Callout variant="tip">
        Verifique a [página de compatibilidade do PHP](/docs/apm/agents/php-agent/getting-started/php-agent-compatibility-requirements/) para obter as informações mais recentes sobre estruturas suportadas.
      </Callout>
  </Collapser>

  <Collapser
    id="inivar-ignored_params"
    title="newrelic.ignored_params"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            String (use aspas)
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `""`
          </td>
        </tr>
      </tbody>
    </table>

    <Callout variant="caution">
      Essa configuração foi descontinuada e pode não se comportar conforme o esperado. Em vez disso, use [propriedades atributo](/docs/agents/php-agent/attributes/enable-or-disable-attributes#deprecated-properties).
    </Callout>

    Use a configuração `newrelic.ignored_params` para especificar uma lista separada por vírgula de nomes de parâmetros a serem excluídos da lista de parâmetros enviada aos servidores New Relic. Coloque os valores da string entre aspas.

    Se você ativar a captura de parâmetros com [`newrelic.capture_params`](#inivar-capture_params), pode haver parâmetros com dados confidenciais do usuário que você não deseja que sejam capturados pela New Relic ou visíveis no rastreamento da transação. Use isto para bloquear a gravação desses dados.
  </Collapser>

  <Collapser
    id="inivar-license"
    title="newrelic.license (OBRIGATÓRIO)"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            String (use aspas)
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `""`
          </td>
        </tr>

        <tr>
          <th>
            Notas:
          </th>

          <td>
            Introduzido na versão 3.0 do agente.
          </td>
        </tr>
      </tbody>
    </table>

    Define a New Relic <InlinePopover type="licenseKey"/>a ser usada. Em um sistema multilocatário, isso pode ser definido por diretório.

    <Callout variant="tip">
      Ao atualizar de uma versão antiga do agente para 3.0 ou superior, a licença será removida do arquivo de configuração do daemon (com um comentário explicando o motivo) e armazenada no arquivo `/etc/newrelic/upgrade_please.key`. Copie a licença desse arquivo e configure-a no arquivo `newrelic.ini` . Exclua o arquivo `upgrade_please.key` .
    </Callout>
  </Collapser>

  <Collapser
    id="inivar-loglevel"
    title="newrelic.loglevel"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            SISTEMA
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            String (use aspas)
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `"info"`
          </td>
        </tr>
      </tbody>
    </table>

    Define o nível de detalhe das mensagens enviadas ao arquivo de log. Os valores possíveis, em ordem crescente de detalhes, incluem:

    * `error`

    * `warning`

    * `info`

    * `verbose`

    * `debug`

    * `verbosedebug`

      Ao relatar qualquer problema do agente ao suporte técnico da New Relic, `verbosedebug` é a configuração mais útil. No entanto, isso pode gerar muitas informações muito rapidamente, portanto [evite manter o agente no nível `verbosedebug` ](/docs/agents/php-agent/troubleshooting/generating-logs-troubleshooting-php)por mais tempo do que o necessário para reproduzir o problema que você está enfrentando.

      Ao relatar qualquer problema de agente ao suporte técnico da New Relic, você pode ser solicitado a definir isso para um nível personalizado, permitindo a depuração apenas para determinados subsistemas. Os níveis personalizados estão além do escopo deste documento.
  </Collapser>

  <Collapser
    id="inivar-tt-detail"
    title="newrelic.transaction_tracer.detail"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Número
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `1`
          </td>
        </tr>

        <tr>
          <th>
            Notas:
          </th>

          <td id="inivar-tt-top100">
            Isso costumava ser `newrelic.transaction_tracer.top100`.
          </td>
        </tr>
      </tbody>
    </table>

    Define o nível de detalhe em um rastreamento da transação:

    * Quando definido como `1`, todas as chamadas do servidor são rastreadas.

    * Quando definido como `0`, o rastreamento inclui apenas chamadas instrumentadas internamente pela New Relic e aquelas definidas pelo usuário usando [`newrelic.transaction_tracer.custom`](#inivar-tt-custom).

      O nível padrão de `1` tem impacto no desempenho. Se precisar melhorar o desempenho, tente definir o nível de detalhe como `0`.

      Ao não rastrear todas as chamadas do servidor, os blocos de tempo no rastreamento da transação serão rotulados como <DNT>**uninstrumented time**</DNT>, e apenas determinadas funções (definidas internamente pelo agente) serão instrumentadas. Mesmo ao reportar todas as chamadas, pode haver [tempo não instrumentado](/docs/agents/php-agent/troubleshooting/uninstrumented-time-traces) no rastreamento.
  </Collapser>

  <Collapser
    id="inivar-high-security"
    title="newrelic.high_security"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            SISTEMA
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Permite alta segurança para todos os aplicativos. Quando a segurança alta é definida como `true`, os seguintes comportamentos entram em vigor:

    * Os dados não serão enviados para a New Relic a menos que o daemon newrelic esteja usando uma conexão segura (HTTPS). Se o processo PHP gerar um daemon newrelic, ele será configurado para usar HTTPS independentemente do valor de `newrelic.daemon.ssl`.

    * As strings de consulta brutas nunca serão coletadas, independentemente do valor de `newrelic.transaction_tracer.record_sql`.

    * O atributo de solicitação nunca será capturado, independentemente das definições de configuração `newrelic.attributes` .

    * As funções de API [`newrelic_add_custom_parameter`](/docs/agents/php-agent/php-agent-api/newrelic_add_custom_parameter) e [`newrelic_set_user_attributes`](/docs/agents/php-agent/php-agent-api/newrelic_set_user_attributes) não terão efeito e retornarão `false`.

    * A função da API [`newrelic_record_custom_event`](/docs/agents/php-agent/php-agent-api/newrelic_record_custom_event) não enviará nenhum evento ao [New Relic](/docs/insights/new-relic-insights/understanding-insights/new-relic-insights).

    * O agente remove mensagens de exceção de erros.

      <Callout variant="caution">
        Se você alterar a configuração `newrelic.high_security` , deverá <DNT>**also**</DNT> alterar a configuração de segurança na interface do usuário do APM. Se as duas configurações não corresponderem, nenhum dado será coletado. Para obter mais informações, consulte [Alta segurança](/docs/subscriptions/high-security).
      </Callout>
  </Collapser>

  <Collapser
    id="inivar-labels"
    title="newrelic.labels"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            String (use aspas)
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `""`
          </td>
        </tr>
      </tbody>
    </table>

    Adiciona [etiqueta](/docs/apm/new-relic-apm/maintenance/labels-categories-organize-your-apps-servers).

    <DNT>
      **Example tags**
    </DNT>

    ```ini
    "Server:One;Data Center:Primary"
    ```
  </Collapser>

  <Collapser
    id="inivar-process_host-display_name"
    title="newrelic.process_host.display_name"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            SISTEMA
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            String (use aspas)
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `""`
          </td>
        </tr>
      </tbody>
    </table>

    Define o nome do host a ser [exibido na interface do APM](/docs/apm/new-relic-apm/maintenance/add-rename-remove-hosts#display_name). Se definido, substitui o nome do host padrão que o agente captura automaticamente.
  </Collapser>
</CollapserGroup>

Se você estiver usando o New Relic CodeStream para monitor o desempenho do seu IDE, você também pode [associar o repositório aos seus serviços](/docs/codestream/how-use-codestream/performance-monitoring#repo-association) e [associar SHAs de compilação ou tag de lançamento a erros](/docs/codestream/how-use-codestream/performance-monitoring#buildsha).

## Daemon .ini configurações [#inivar-daemon-settings]

Os valores dessas configurações controlam a inicialização do daemon. Quando o agente detectar que o daemon precisa ser iniciado, ele converterá essas opções nas opções de linha de comando apropriadas para o daemon.

Todas essas configurações refletem as configurações do arquivo `newrelic.cfg` . Eles são repetidos aqui para manter todo o .ini configurações em um só lugar. Cada configuração em `newrelic.cfg` tem sua contraparte aqui, com `newrelic.daemon.` como prefixo. Por exemplo, a configuração `ssl` em `newrelic.cfg` é `newrelic.daemon.ssl` em um arquivo .ini arquivo.

<Callout variant="important">
  Se o arquivo `/etc/newrelic/newrelic.cfg` existir, o agente ignorará essas configurações e **não** iniciará o daemon automaticamente.
</Callout>

Para obter mais informações sobre maneiras de iniciar o daemon e quando usar um arquivo de configuração externo, consulte [Modos de inicialização do daemon PHP](/docs/agents/php-agent/installation/starting-php-daemon).

<CollapserGroup>
  <Collapser
    id="inivar-daemon-app_timeout"
    title="newrelic.daemon.app_timeout"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            SISTEMA
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Cadeia de especificação de tempo; por exemplo, `"5m"` ou `"1h20m"`
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `"10m"`
          </td>
        </tr>
      </tbody>
    </table>

    Define o tempo decorrido após o qual um aplicativo será considerado inativo. Aplicativos inativos não contam para o limite máximo de 250 aplicativos. As unidades permitidas são `"ns"`, `"us"`, `"ms"`, `"s"`, `"m"` e `"h"`.

    Um valor `0` será interpretado como &amp;quot;sem tempo limite&amp;quot;. Isso resultará em novos aplicativos sempre contando para o limite de 250 aplicativos, bem como no fato de o daemon não conseguir liberar uma pequena quantidade de memória por aplicativo de volta para o sistema operacional.

    Recomendação: Não use esse valor, a menos que o suporte da New Relic solicite. Em vez disso, para transações ocasionais em segundo plano, use um valor de duas vezes o intervalo. Por exemplo, para um trabalho em segundo plano por hora, defina o tempo limite para 2 horas.
  </Collapser>

  <Collapser
    id="inivar-daemon-app_connect_timeout"
    title="newrelic.daemon.app_connect_timeout"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            SISTEMA
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Cadeia de especificação de tempo; por exemplo, `"1s"` ou `"5m"`
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `"0"`
          </td>
        </tr>
      </tbody>
    </table>

    Define o tempo máximo que o agente deve aguardar até que o daemon conecte um aplicativo. Um valor `"0"` faz com que o agente faça apenas uma tentativa de conexão com o daemon. As unidades permitidas são `"ns"`, `"us"`, `"ms"`, `"s"`, `"m"` e `"h"`.

    Com esse tempo limite definido, o agente não descartará imediatamente uma transação quando o daemon ainda não estiver conectado ao backend, mas concederá tempo ao daemon para estabelecer a conexão.

    Recomendação: Se definir um tempo limite, o valor recomendado é `"15s"`. Defina este timeout somente quando instrumentadas tarefas em background de longa duração, pois em caso de problemas de conexão o agente bloqueará pelo tempo limite determinado a cada início da transação.
  </Collapser>

  <Collapser
    id="inivar-daemon-auditlog"
    title="newrelic.daemon.auditlog"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            SISTEMA
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            String (use aspas)
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `""`
          </td>
        </tr>
      </tbody>
    </table>

    A configuração especifica o nome de um log de auditoria, que conterá todos os dados enviados do daemon para os servidores New Relic, incluindo o URL completo, data, hora e os dados não compactados e não codificados para cada solicitação.

    Este arquivo não pode ser o mesmo arquivo que o log do daemon.

    <Callout variant="important">
      Este log de auditoria pode se tornar muito grande rapidamente. Evite usar a configuração `newrelic.daemon.auditlog` por longos períodos de tempo. Seu objetivo principal é permitir que o administrador do sistema realize análises de segurança e observe exatamente quais dados são transmitidos.
    </Callout>
  </Collapser>

  <Collapser
    id="inivar-daemon-collector"
    title="newrelic.daemon.collector_host"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            SISTEMA
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            String (use aspas)
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `"collector.newrelic.com"`
          </td>
        </tr>
      </tbody>
    </table>

    Define o nome e a porta opcional do host coletor com o qual o daemon entrará em contato para verificar seu <InlinePopover type="licenseKey"/>e enviar dados do agente.

    Este é apenas o nome do host ou o nome e o número da porta no formato `"hostname:port"`. Especificar um número de porta `0` usará a porta padrão, que é 80.

    <Callout variant="caution">
      Não altere esse valor sem orientação do suporte da New Relic.
    </Callout>
  </Collapser>

  <Collapser
    id="inivar-daemon-launch"
    title="newrelic.daemon.dont_launch"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            SISTEMA
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Número
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `0`
          </td>
        </tr>
      </tbody>
    </table>

    Se você preferir que o daemon seja lançado externamente antes da inicialização do agente, esse valor determina quando o agente terá permissão para iniciar o daemon:

    * `0`: Nenhuma restrição é colocada na inicialização do daemon e o agente pode iniciar o daemon a qualquer momento.

    * `1`: Agente que não seja de linha de comando (como Apache ou php-fpm) pode iniciar o daemon.

    * `2`: Somente o agente da linha de comando pode iniciar o daemon.

    * `3`: O agente nunca iniciará o daemon. Use esta configuração se estiver configurando o daemon por meio de `newrelic.cfg` e iniciando-o fora do agente.

      <Callout variant="important">
        Se `/etc/newrelic/newrelic.cfg` existir, o agente assumirá que o daemon deve ser iniciado por seu script de inicialização, e não por meio do agente. Esta configuração não tem significado e não aparece em `newrelic.cfg`.
      </Callout>
  </Collapser>

  <Collapser
    id="inivar-daemon-location"
    title="newrelic.daemon.location"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            SISTEMA
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            String (use aspas)
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `"/usr/bin/newrelic-daemon"`
          </td>
        </tr>
      </tbody>
    </table>

    Define o nome do executável daemon para lançamento.

    Esta variável identifica o caminho completo para o arquivo executável do daemon. Se o sistema New Relic foi instalado usando os pacotes padrão, o local padrão estará correto. Se você instalou em um local personalizado usando a distribuição tar (e não tem permissão para gravar em `/usr/bin`), o daemon poderá residir em outro local.

    Esta configuração não aparece no arquivo `newrelic.cfg` porque é relevante apenas para PHP.

    <Callout variant="important">
      No OpenSolaris, `/usr` é frequentemente um sistema de arquivos somente leitura. A localização padrão do daemon para OpenSolaris é `/opt/newrelic/bin/newrelic-daemon`.
    </Callout>
  </Collapser>

  <Collapser
    id="inivar-daemon-logfile"
    title="newrelic.daemon.logfile"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            SISTEMA
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            String (use aspas)
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `"/var/log/newrelic/newrelic-daemon.log"`
          </td>
        </tr>
      </tbody>
    </table>

    Define o nome do arquivo de log para registrar a mensagem do log específica do daemon. Este arquivo deve ser gravável pelo daemon. O caso mais comum é que o usuário do Apache acabará iniciando o daemon quando o próprio Apache for inicializado, portanto, você deve garantir que o arquivo seja gravável por qualquer usuário que execute o processo do Apache.

    <Callout variant="caution">
      Se o arquivo de log do daemon não for gravável, o daemon não será iniciado automaticamente, o que impedirá a geração de relatórios de dados.

      Você pode usar permissões de gravação neste arquivo como forma de restringir quem pode iniciar o daemon.
    </Callout>
  </Collapser>

  <Collapser
    id="inivar-daemon-loglevel"
    title="newrelic.daemon.loglevel"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            SISTEMA
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            String (use aspas)
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `"info"`
          </td>
        </tr>
      </tbody>
    </table>

    Define o nível de detalhe para mensagens gravadas no arquivo de log do daemon do New Relic. Os valores possíveis, em ordem crescente de detalhe, são:

    * `error`

    * `warning`

    * `info`

    * `healthcheck`

    * `debug`

      As configurações mais detalhadas podem gerar muitas informações muito rapidamente. `healthcheck` registre o número exato de aplicativos conectados. Quando necessário, defina `debug` por curtos períodos de tempo para identificar problemas.
  </Collapser>

  <Collapser
    id="inivar-daemon-pidfile"
    title="newrelic.daemon.pidfile"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            SISTEMA
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            String (use aspas)
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            (depende do sistema operacional)
          </td>
        </tr>
      </tbody>
    </table>

    Define o nome do arquivo no qual o daemon registrará seu ID de processo (pid).

    Este arquivo é usado pelo script de inicialização e desligamento do daemon para determinar se o daemon já está ou não em execução.
  </Collapser>

  <Collapser
    id="inivar-daemon-port"
    title="newrelic.daemon.address (apelido de newrelic.daemon.port)"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            SISTEMA
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            String ou Número
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `"@newrelic"` no Linux, `"/tmp/.newrelic.sock"` caso contrário
          </td>
        </tr>
      </tbody>
    </table>

    <Callout variant="tip">
      A partir da [v9.2.0.247](/docs/release-notes/agent-release-notes/php-release-notes/php-agent-920247), o agente PHP suporta uma nova configuração, `newrelic.daemon.address`, que serve como um alias para `newrelic.daemon.port`. Você pode usar qualquer um deles para especificar a localização do daemon PHP do New Relic. Se ambos os valores forem definidos, `newrelic.daemon.address` terá precedência.
    </Callout>

    Define o endpoint do soquete para comunicações do agente com o daemon.

    Isso pode ser especificado de quatro maneiras.

    * Para usar um arquivo especificado como um soquete de domínio UNIX (UDS), forneça um nome de caminho <DNT>**absolute**</DNT> como uma string. Este é o padrão em sistemas não-Linux.

    * Para usar uma porta TCP padrão, especifique um número no intervalo de 1 a 65534.

    * Para usar um soquete abstrato, use o valor `@newrelic-daemon` (disponível para agente versão [5.2.0.141](/docs/release-notes/agent-release-notes/php-release-notes/php-agent-520141) ou superior). Este é o padrão em sistemas Linux.

    * Para conectar-se a um daemon que está sendo executado em um host diferente (útil para [ambientes de contêiner](/docs/agents/php-agent/advanced-installation/install-php-agent-docker)), defina esse valor como `host:port`, onde `host` denota um nome de host ou um IP e `port` denota um número de porta válido. Tanto IPv4 quanto IPv6 são suportados. Isto está disponível para a versão do agente 9.2.0.247 ou superior.

      <Callout variant="caution">
        Os dados transmitidos do agente para o daemon **não** são criptografados. A única exceção a isso é a [ofuscação SQL](/docs/agents/php-agent/configuration/php-agent-configuration#inivar-tt-sql) que ocorre antes do envio de dados para o daemon. Recomendamos usar apenas uma conexão de rede privada entre o agente e o daemon (isso só se aplica quando o agente e o daemon estão sendo executados em hosts diferentes).
      </Callout>

      Se você usar números de porta, os sistemas Unix exigem que as portas no intervalo de 1 a 1023 exijam que o daemon seja executado como super-usuário. Caso o daemon utilize uma porta não padrão, esta variável também define o número da porta que o agente utilizará para se comunicar com o daemon.

      <Callout variant="important">
        Se você estiver usando o mecanismo de inicialização `newrelic.cfg` para o daemon, essa configuração e a configuração [`address`](/docs/agents/php-agent/configuration/proxy-daemon-newreliccfg-settings#cfgvar-port) nesse arquivo deverão corresponder.
      </Callout>
  </Collapser>

  <Collapser
    id="inivar-daemon-proxy"
    title="newrelic.daemon.proxy"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            SISTEMA
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            String (use aspas)
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `""`
          </td>
        </tr>
      </tbody>
    </table>

    Define as credenciais do host e do usuário para usar como proxy de saída.

    Isso só será usado se o seu site exigir um proxy para acessar os servidores de coleta de dados da New Relic. Pode assumir qualquer uma das seguintes formas, dependendo da configuração do proxy:

    * `hostname`

    * `hostname:port`

    * `user@hostname`

    * `user@hostname:port`

    * `user:password@hostname`

    * `user:password@hostname:port`

    * `proxytype://user:password@hostname:port`

      Um tipo de proxy HTTP é assumido, a menos que outro tipo de proxy seja especificado. Nesse caso, o proxytype pode ser http, meias4, meias4a ou meias5.
  </Collapser>

  <Collapser
    id="inivar-daemon-ssl"
    title="newrelic.daemon.ssl"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            SISTEMA
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Essa configuração é ignorada nas versões 8.0 e superiores do agente PHP, e HTTPS sempre será usado para comunicação com o New Relic.

    Nas versões do agente PHP inferiores a 8.0, controla se a comunicação com o coletor New Relic deve ou não utilizar uma conexão HTTP segura. O agente se comunica com o New Relic via HTTPS por padrão, e o New Relic [requer HTTPS](/docs/apis/rest-api-v2/troubleshooting/301-response-rest-api-calls) para todo o tráfego para o APM e a API REST do New Relic.
  </Collapser>

  <Collapser
    id="inivar-daemon-ssl-ca-bundle"
    title="newrelic.daemon.ssl_ca_bundle"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            SISTEMA
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            String (use aspas)
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `""`
          </td>
        </tr>
      </tbody>
    </table>

    Define o local de um arquivo que contém certificados CA no formato PEM. Quando definidos, os certificados neste arquivo serão usados para autenticar o coletor New Relic. Na maioria dos casos, não será necessário configurar um pacote de CA. O agente PHP New Relic vem com os certificados CA necessários.

    Se [`newrelic.daemon.ssl_ca_path`](#inivar-daemon-ssl-ca-path) também estiver definido, os certificados neste arquivo serão pesquisados primeiro, seguidos pelos certificados contidos no diretório `newrelic.daemon.ssl_ca_path` .

    Esta configuração não tem efeito quando [`newrelic.daemon.ssl`](#inivar-daemon-ssl) está definido como `false`.
  </Collapser>

  <Collapser
    id="inivar-daemon-ssl-ca-path"
    title="newrelic.daemon.ssl_ca_path"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            SISTEMA
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            String (use aspas)
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `""`
          </td>
        </tr>
      </tbody>
    </table>

    Define o local de um diretório que contém certificados de CA confiáveis no formato PEM. Quando definidos, os certificados neste diretório serão usados para autenticar o coletor New Relic. Na maioria dos casos não será necessário configurar um caminho de CA. O agente PHP New Relic vem com os certificados CA necessários.

    Se [`newrelic.daemon.ssl_ca_bundle`](#inivar-daemon-ssl-ca-bundle) também estiver definido, ele será pesquisado primeiro, seguido pelos certificados contidos em `newrelic.daemon.ssl_ca_path`.

    Esta configuração não tem efeito quando [`newrelic.daemon.ssl`](#inivar-daemon-ssl) está definido como `false`.
  </Collapser>

  <Collapser
    id="inivar-daemon-start_timeout"
    title="newrelic.daemon.start_timeout"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            SISTEMA
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Cadeia de especificação de tempo; por exemplo, `"1s"` ou `"5m"`
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `"0"`
          </td>
        </tr>
      </tbody>
    </table>

    Define o tempo máximo que o agente deve esperar até que o daemon seja iniciado após o lançamento do daemon ter sido acionado. Um valor `"0"` faz com que o agente não espere. As unidades permitidas são `"ns"`, `"us"`, `"ms"`, `"s"`, `"m"` e `"h"`.

    O valor de tempo limite especificado será transmitido ao daemon por meio do sinalizador `--wait-for-port` . Isso faz com que a inicialização do daemon seja bloqueada até que um soquete seja adquirido ou até que o tempo limite termine.

    Recomendação: Se definir um tempo limite, o valor recomendado será `"2s"` a `"5s"`. Recomenda-se definir este timeout apenas quando forem instrumentadas tarefas em segundo plano de longa duração, pois em caso de problemas de inicialização daemon o agente bloqueará pelo tempo limite determinado a cada início da transação.
  </Collapser>
</CollapserGroup>

## Logs contextualizados [#logs-in-context]

Agente PHP versão 10.1.0 permite encaminhar seu log PHP com [logs contextualizados APM](/docs/apm/new-relic-apm/getting-started/get-started-logs-context). A partir da versão 10.3.0, a métrica de registro e o recurso de encaminhamento de logs do agente estão habilitados por padrão. O valor `newrelic.application_logging.enabled` controla se o recurso de logs contextualizados está ativo ou inativo.

Lembre-se de que a alteração das configurações no arquivo de configuração do agente local (`newrelic.ini`) requer a reinicialização do servidor Web para que entrem em vigor. Caso contrário, as alterações poderão não [entrar em vigor imediatamente](/docs/agents/php-agent/troubleshooting/ini-settings-not-taking-effect-immediately).

<CollapserGroup>
  <Collapser
    id="cfg-application_logging_forwarding-enabled"
    title="newrelic.application_logging.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    * Defina como `true` para ativar o recurso principal de logs contextualizados. Quando habilitado, a instrumentação adicional framework de log é habilitada, independentemente de os logs serem enviados ou não para o New Relic.
    * Defina como `false` para desativar completamente esse recurso, incluindo a coleta de métricas log e encaminhamento de logs.
    * Logs contextualizados agora está habilitado por padrão. Se você desativou esse recurso, reinicie o aplicativo ou as alterações não terão efeito imediato.

      Um exemplo de arquivo de configuração:

      ```ini
      newrelic.application_logging.enabled = true
      newrelic.application_logging.metrics.enabled = true
      newrelic.application_logging.forwarding.enabled = true
      ```
  </Collapser>
</CollapserGroup>

### Encaminhamento de log [#log-forwarding]

Se você estiver usando uma [framework de registro em log compatível](/docs/logs/logs-context/configure-logs-context-php), poderá instruir o agente a encaminhar os logs do seu aplicativo para o New Relic.

* `newrelic.application_logging.forward.enabled` ativa ou desativa o encaminhamento de logs
* `newrelic.application_logging.forwarding.max_samples_stored` limita quantos registros seu aplicativo encaminha para o New Relic
* `newrelic.application_logging.forwarding.log_level` permite escolher quais tipos de log seu aplicativo encaminha para o New Relic

<CollapserGroup>
  <Collapser
    id="cfg-application_logging_forwarding-enabled"
    title="newrelic.application_logging.forwarding.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Habilita o envio de log do aplicativo para New Relic.

    * Defina como `true` para que seu registro seja enviado para a New Relic. Isso encaminha o log diretamente do agente PHP com metadados de vinculação que permitem que nosso recurso log-in-context funcione. O agente PHP não grava nenhum metadado na saída do log do aplicativo.
    * Defina como `false` se não quiser que seu registro seja enviado para a New Relic. Quando `enabled` é definido como `false`, nenhum dado de log é enviado para o New Relic e a saída do log do aplicativo permanece inalterada.

      Exemplo de arquivo de configuração (`newrelic.ini`):

      ```ini
      newrelic.application_logging.enabled = true
      ```

      Se você tiver uma solução de encaminhamento de logs existente e estiver atualizando seu agente para usar o logs contextualizados automáticos, certifique-se de <DNT>**disable your old log forwarder**</DNT>. Caso contrário, seu aplicativo enviará linhas de log duplas. Dependendo da sua conta, isso pode resultar em cobrança dupla. Para obter mais informações, siga os procedimentos para desabilitar seu [direcionador de logs específico](/docs/logs/forward-logs/enable-log-management-new-relic#log-forwarding).

      <Callout variant="important">
        Usar o recurso de encaminhamento de logs aumenta a ingestão de dados, o que pode afetar seu faturamento. Para obter mais informações, consulte nossa documentação sobre como [rastrear a ingestão de dados](/docs/apm/new-relic-apm/getting-started/get-started-logs-context#ingest).
      </Callout>
  </Collapser>

  <Collapser
    id="cfg-application_logging_forwarding-max_samples_stored"
    title="newrelic.application_logging.forwarding.max_samples_stored"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Inteiro
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `10000`
          </td>
        </tr>

        <tr>
          <th>
            Máx.:
          </th>

          <td>
            `20000`
          </td>
        </tr>
      </tbody>
    </table>

    * Configure o valor como um número inteiro positivo para especificar o número máximo de linhas de log por minuto a serem enviadas.
    * Defina como `0` para desativar efetivamente o envio de log.
    * Defina um valor mais baixo para reduzir a quantidade de linhas de log enviadas. Isso pode causar amostragem de log.
    * Defina um valor mais alto para enviar mais linhas de log.

      Cada log recebe a mesma prioridade que sua transação associada. Alguns registros podem não ser incluídos porque estão limitados por `max_samples_stored`. Por exemplo, se o registro em log `max_samples_stored` estiver definido como 10.000 e uma transação 1 tiver 10.000 entradas de log, somente as entradas de log da transação 1 serão registradas. Se a transação 1 tiver menos de 10.000 logs, você receberá todos os logs da transação 1. Se ainda houver espaço, você receberá todo o log da transação 2 e assim por diante. As entradas de log com prioridades mais altas são mantidas em detrimento daquelas com prioridades mais baixas.

      <Callout variant="tip">
        Refere-se ao número de logs enviados _por minuto_. Definir `max_samples_stored` com um valor menor que 12 fará com que nenhum registro seja enviado. Qualquer número inteiro não negativo é válido, mas atualmente o valor máximo suportado é 20.000.
      </Callout>

      Exemplo de arquivo de configuração (`newrelic.ini`):

      ```ini
      newrelic.application_logging.forwarding.max_samples_stored = 10000
      ```
  </Collapser>

  <Collapser
    id="cfg-application_logging_forwarding-log-level"
    title="newrelic.application_logging.forwarding.log_level"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            String (use aspas)
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `"WARNING"`
          </td>
        </tr>
      </tbody>
    </table>

    É possível controlar o nível de log das mensagens encaminhadas pelo agente. O nível de log reconhecido segue a especificação [PSR-3](https://www.php-fig.org/psr/psr-3/) e é o seguinte (da maior para a menor gravidade):

    * `EMERGENCY`
    * `ALERT`
    * `CRITICAL`
    * `ERROR`
    * `WARNING`
    * `NOTICE`
    * `INFO`
    * `DEBUG`

      Quando um nível de log for especificado para o agente, todas as mensagens desse nível de log e superiores serão relatadas. Por exemplo, se você definir seu nível de log como `ALERT`, você receberá o log para a gravidade `ALERT` e `EMERGENCY` . O nível de log padrão é `WARNING`.

      Exemplo de arquivo de configuração (`newrelic.ini`):

      ```ini
      newrelic.application_logging.forwarding.log_level = "INFO"
      ```
  </Collapser>
</CollapserGroup>

#### Log dados de contexto [#log-context-data]

O agente PHP captura dados de contexto para a biblioteca Monolog e adiciona esse contexto como atributo ao seu log encaminhado. Você pode controlar qual contexto seu agente adiciona por meio das configurações na seção `context_data` , dentro da seção `forwarding` .

* `newrelic.application_logging.forwarding.context_data.enabled` adiciona dados de contexto do Monolog ao seu atributo de logs
* `newrelic.application_logging.forwarding.context_data.include` define quais chaves de atributo são encontradas no seu log encaminhado
* `newrelic.application_logging.forwarding.context_data.exclude` define quais chaves de atributo serão excluídas do seu log encaminhado

<CollapserGroup>
  <Collapser
    id="cfg-application_logging_forwarding_context_data-enabled"
    title="newrelic.application_logging.forwarding.context_data.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    * Defina como `true` para adicionar dados de contexto como atributo de registro.
    * Defina como `false` se não desejar que dados de contexto sejam adicionados como atributo ao seu registro.
  </Collapser>

  <Collapser
    id="cfg-application_logging_forwarding_context_data-include"
    title="newrelic.application_logging.forwarding.context_data.include"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Lista de strings
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            (nenhum)
          </td>
        </tr>
      </tbody>
    </table>

    Quando você aplica regras de atributo para log atributo de contexto, a regra `include` descarta todos os atributo não definidos no conjunto de regras. Este é um comportamento diferente de outros tipos de atributo de agente.

    * Se os atributos do contexto log não aparecerem conforme o esperado, revise o conjunto de regras `newrelic.attributes.include` para confirmar se os atributos ausentes fazem parte da exclusão. Recomendamos que você defina `newrelic.loglevel=verbosedebug` para ativar também a mensagem detalhada do log do agente. Depois de atualizado, procure mensagens do agente sobre atributo excluído. Isso pode lhe dar uma dica sobre como ajustar as regras de inclusão/exclusão.
    * Se `context_data` estiver habilitado para encaminhamento de logs, todas as chaves de atributo encontradas nesta lista aparecerão nos registros de log. Uma lista vazia enviará todas as chaves de atributo como padrão.
    * Se todas as listas `include` estiverem vazias, todos os atributos de contexto de log serão encaminhados.
  </Collapser>

  <Collapser
    id="cfg-application_logging_forwarding_context_data-exclude"
    title="newrelic.application_logging.forwarding.context_data.exclude"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Lista de strings
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            (nenhum)
          </td>
        </tr>
      </tbody>
    </table>

    * Se `context_data` estiver habilitado para encaminhamento de logs, todas as chaves de atributo encontradas nesta lista serão excluídas dos registros de log.
    * Deixar este campo vazio resulta em comportamento padrão. atributo ainda poderá ser excluído se [existir uma regra`include` ](#cfg-application_logging_forwarding_context_data-include).
    * A lista `include` e `exclude` seguem as regras definidas em [Habilitando e desabilitando atributo](/docs/php/php-agent-enabling-and-disabling-attributes#cfg-attributes-enabled).
  </Collapser>
</CollapserGroup>

<Callout variant="important">
  O agente PHP encaminha apenas dados de contexto de log que possuem uma chave de string e um valor, que é uma string ou escalar (int, double, boolean).
</Callout>

### Decoração log [#log-decoration]

O agente PHP pode coletar e adicionar metadados de vinculação aos registros log do Monolog para permitir que os logs contextualizados funcionem com dados log encaminhados por um terceiro direcionador de logs. Para ativar esse recurso use a opção `newrelic.application_logging.local_decorating.enable` :

<CollapserGroup>
  <Collapser
    id="cfg-application_logging_local_decorating-enabled"
    title="newrelic.application_logging.local_decorating.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Isso permite a adição de vinculação de metadados aos registros de log do Monolog. Defina como `true` para ativar esse recurso. Deixe definido como `false` se estiver usando o recurso de encaminhamento de logs do APM para encaminhar seus logs para o New Relic.

    <Callout variant="important">
      O recurso de decoração de log aparece pela primeira vez na versão 10.13.0.1 do agente PHP.

      O recurso de decoração de log requer etapas adicionais para garantir que os metadados do link estejam contidos na mensagem do log. Consulte a página (logs contextualizados do PHP)\[/docs/log/log-context/configure-log-context-php] para obter mais informações sobre como usar esse recurso.

      Se você ativar o encaminhamento de logs e a decoração log , muito provavelmente fará com que seu log seja enviado duplicado para o New Relic.
    </Callout>
  </Collapser>
</CollapserGroup>

### Log métrico [#log-metrics]

O agente PHP pode coletar métricas relacionadas ao evento de log para [a estrutura de log suportada](/docs/logs/logs-context/configure-logs-context-php). A criação destas métricas é controlada pela opção `newrelic.application_logging.metrics.enable` :

<CollapserGroup>
  <Collapser
    id="cfg-application_logging_metrics-enabled"
    title="newrelic.application_logging.metrics.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Possibilita a captura de informações métricas sobre seu log e nível de log, que são exibidas em gráfico na página <DNT>**Summary**</DNT> do APM.

    Deixe definido como verdadeiro para permitir que o agente capture informações métricas sobre seu log.

    Defina como `false` para desativar esse recurso.

    <Callout variant="important">
      Se você desabilitar a coleta de log métrica, o gráfico de log na página de resumo aparecerá em branco.
    </Callout>
  </Collapser>
</CollapserGroup>

<Callout variant="important">
  Se você tiver uma solução de encaminhamento de logs existente e estiver atualizando seu agente para usar o logs contextualizados automático, certifique-se de <DNT>**disable your manual log forwarder**</DNT>. Caso contrário, seu aplicativo enviará o dobro dos dados de log. Dependendo da sua conta, isso pode resultar em cobrança dupla. Para obter mais informações, siga os procedimentos para desabilitar seu [direcionador de logs específico](/docs/logs/forward-logs/enable-log-management-new-relic#log-forwarding).
</Callout>

## tracer de transação .ini configurações [#inivar-tt-settings]

Os valores dessas configurações são utilizados para controlar o rastreamento da transação.

<CollapserGroup>
  <Collapser
    id="inivar-tt-custom"
    title="newrelic.transaction_tracer.custom"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            String (use aspas)
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `""`
          </td>
        </tr>
      </tbody>
    </table>

    Defina isto como uma lista separada por vírgulas de funções ou métodos definidos pelo usuário para o instrumento:

    ```
    "myfunction,myclass::method,otherfunction"
    ```

    Funções internas do PHP não podem ter rastreamento personalizado.

    Você pode adicionar funções personalizadas à lista com cada arquivo PERDIR, mas não pode remover uma função ou método que já tenha sido adicionado. Se você quiser adicionar funções ou métodos programaticamente a serem instrumentados, use a chamada de função da API [`newrelic_add_custom_tracer()`](/docs/agents/php-agent/php-agent-api/newrelic_add_custom_tracer) .
  </Collapser>

  <Collapser
    id="inivar-tt-enable"
    title="newrelic.transaction_tracer.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Habilita ou desabilita o tracer de transação.

    O tracer cria um rastreamento detalhado da transação para transações que levam mais tempo que o limite, conforme definido pelo valor `newrelic.transaction_tracer.threshold`. Apenas um rastreamento da transação por aplicação por ciclo de colheita é armazenado e é sempre a transação mais lenta durante esse ciclo.

    [trace da transação](/docs/apm/transactions/transaction-traces/transaction-traces) são úteis para diagnosticar porque uma determinada transação foi lenta. A menos que a memória e o desempenho sejam críticos, eles quase nunca devem ser desativados. Ativar isso tem um impacto muito leve no desempenho e usa mais memória.

    Para obter mais informações, consulte [`newrelic.transaction_tracer.detail`](#inivar-tt-detail).
  </Collapser>

  <Collapser
    id="inivar-tt-expenable"
    title="newrelic.transaction_tracer.explain_enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Habilita ou desabilita a solicitação de planos explicativos do MySQLi e da biblioteca PDO MySQL para chamadas de consulta lenta. Os planos Explicar só estarão disponíveis quando [`newrelic.transaction_tracer.slow_sql`](#inivar-tt-slowsql) estiver definido como `true` e [`newrelic.transaction_tracer.record_sql`](#inivar-tt-sql) **não** estiver definido como `"off"`.
  </Collapser>

  <Collapser
    id="inivar-tt-epthreshold"
    title="newrelic.transaction_tracer.explain_threshold"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Duração
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `"500"`
          </td>
        </tr>
      </tbody>
    </table>

    Define o limite além das consultas que são consideradas "lentas" e, portanto, candidatas à página [<DNT>**Slow Queries**</DNT>](/docs/apm/applications-menu/monitoring/databases-slow-queries-dashboard) . Especifique a duração como um valor absoluto com unidades. A unidade padrão é milissegundos se nenhuma for especificada.

    <DNT>
      **Example durations**
    </DNT>

    * `"200ms"`
    * `"1s250ms"`
    * `"1h30m"`
    * `"750us"`
  </Collapser>

  <Collapser
    id="inivar-tt-internalfun"
    title="newrelic.transaction_tracer.internal_functions_enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            SISTEMA
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Ativa ou desativa o suporte para rastreamento de funções internas (ou seja, funções escritas em C e fornecidas por meio da biblioteca padrão PHP ou de extensões PECL). Quando habilitadas, as funções internas aparecem no [trace da transação](/docs/apm/transactions/transaction-traces/introduction-transaction-traces) como funções escritas em PHP.

    Habilitar esta opção pode resultar em uma transação mais lenta, especialmente ao coletar muitos rastros do PHP 5.x. A ativação desta opção só é recomendada ao depurar especificamente problemas de desempenho em que há suspeita de lentidão de uma função interna.
  </Collapser>

  <Collapser
    id="inivar-tt-sql"
    title="newrelic.transaction_tracer.record_sql"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            String (use aspas)
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `"obfuscated"`
          </td>
        </tr>
      </tbody>
    </table>

    Define como as consultas são registradas (se forem).

    Ao registrar internamente o trace da transação, é gravada a consulta completa das chamadas de consulta lenta. Enviar esta consulta para o New Relic pode ter sérias implicações de segurança; portanto, por padrão, todas as instruções do banco de dados são ofuscadas antes de serem enviadas para o New Relic. A ofuscação não é reversível, pois substitui strings e números em qualquer consulta por pontos de interrogação. As únicas coisas que sobrevivem intactas são os nomes dos campos, e não qualquer um dos seus valores.

    * Se você estiver testando com dados que não são confidenciais e precisar ver a consulta bruta no trace da transação, defina como `"raw"`.

    * Se você não quiser que a consulta seja gravada, defina como `"off"`.

      <Callout variant="important">
        Sempre defina como `"obfuscated"` ou `"off"` em qualquer ambiente de produção.
      </Callout>
  </Collapser>

  <Collapser
    id="inivar-tt-slowsql"
    title="newrelic.transaction_tracer.slow_sql"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Use esta configuração para ativar ou desativar o recurso de consulta lenta. Quando ativado, ele irá:

    * Registre as 10 consultas ao banco de dados mais lentas por aplicação por minuto.

    * Crie um stack trace que leva à consulta.

      Se esta variável estiver definida como `false` ou a gravação SQL estiver desativada, o agente New Relic não coletará dados de consulta lenta.
  </Collapser>

  <Collapser
    id="inivar-tt-stthreshold"
    title="newrelic.transaction_tracer.stack_trace_threshold"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Duração
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `"500"`
          </td>
        </tr>
      </tbody>
    </table>

    Isso define o limite acima do qual o agente registrará a stack PHP completa para o rastreamento da transação para a qual as consultas estão sendo registradas.

    Especifique a duração como um valor absoluto com unidades. A unidade padrão é milissegundos se nenhuma for especificada.

    <DNT>
      **Example durations**
    </DNT>

    * `"200ms"`

    * `"1s250ms"`

    * `"1h30m"`

    * `"750us"`

      O rastreamento de pilha pode consumir memória, portanto, tome cuidado para não definir esse valor muito baixo. Esta variável não tem significado se [`newrelic.transaction_tracer.record_sql`](#inivar-tt-sql) estiver definido como `"off"`.
  </Collapser>

  <Collapser
    id="inivar-tt-threshold"
    title="newrelic.transaction_tracer.threshold"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Duração
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `"apdex_f"`
          </td>
        </tr>
      </tbody>
    </table>

    Use esta variável para definir o limite além do qual as transações são elegíveis para rastreamento. Os valores disponíveis incluem:

    * Use `"apdex_f"` para definir o limite como 4 vezes o valor [apdex_t](/docs/accounts-partnerships/education/getting-started-new-relic/glossary#apdex_t) do aplicativo. Para obter mais informações, consulte [Apdex: Medindo a satisfação do usuário](/docs/apm/new-relic-apm/apdex/apdex-measuring-user-satisfaction).

    * Use qualquer outra sequência de duração para definir um limite de tempo específico. Especifique a duração como um valor absoluto e a unidade de medida. Se nenhum for especificado, a unidade será padronizada em milissegundos.

      <DNT>
        **Example durations**
      </DNT>

    * `"200ms"`

    * `"1s250ms"`

    * `"1h30m"`

    * `"750us"`
  </Collapser>

  <Collapser
    id="inivar-tt-gather-input-queries"
    title="newrelic.transaction_tracer.gather_input_queries"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Use esta configuração para ativar ou desativar a coleta de consulta de entrada DQL com consulta lenta e rastreamento da transação. Quando habilitados, aparecerão junto com consulta lenta e rastreamento da transação.
  </Collapser>

  <Collapser
    id="inivar-tt-maxsegweb"
    title="newrelic.transaction_tracer.max_segments_web"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Número
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `0`
          </td>
        </tr>
      </tbody>
    </table>

    Especifica o número máximo de segmentos que o agente PHP deverá registrar para transação da web. Quando esse máximo for atingido, a amostragem ocorrerá.

    O agente PHP relata o rastreamento da transação e o rastreamento distribuído como uma coleção de segmentos. Cada segmento representa um método ou uma chamada de função em um rastreamento da transação. O valor padrão para esta configuração é `0`, indicando que o agente PHP deverá capturar todos os segmentos durante uma transação da web. Ao final de uma transação, ele reúne os segmentos de maior prioridade para reportar em um rastreamento da transação.

    Para processos PHP de longa execução com centenas de milhares ou milhões de chamadas de função, definir um valor maior que `1` evita que o agente PHP esgote a memória do sistema ao gravar segmentos.

    O tamanho do segmento pode variar com base no comprimento do nome do método correspondente, no comprimento do nome da classe e no número de chamadas subsequentes feitas pelo método. Dito isto, uma estimativa conservadora é de 400 bytes por segmento. Para limitar o agente PHP a 40 MB para captura de segmento, configure esse valor como `100000`. Se esse valor for definido abaixo de `2000`, limitará ainda mais o número total de segmentos relatados para rastreamento da transação.

    Esta definição de configuração é apenas para processos web PHP; isso não afetará os processos PHP CLI. Para definir um limite para processos CLI, use `newrelic.transaction_tracer.max_segments_cli`.
  </Collapser>

  <Collapser
    id="inivar-tt-maxsegcli"
    title="newrelic.transaction_tracer.max_segments_cli"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Número
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `100000`
          </td>
        </tr>
      </tbody>
    </table>

    Especifica o número máximo de segmentos que o agente PHP deve registrar para transação CLI. Quando esse máximo for atingido, a amostragem ocorrerá.

    O agente PHP relata o rastreamento da transação e o rastreamento distribuído como uma coleção de segmentos. Cada segmento representa um método ou uma chamada de função em um rastreamento da transação. O valor padrão para esta configuração é `100000`, indicando que o agente PHP deverá capturar todos os segmentos durante uma transação da web. Ao final de uma transação, ele reúne os segmentos de maior prioridade para reportar em um rastreamento da transação.

    Para processos PHP de longa execução com centenas de milhares ou milhões de chamadas de função, definir um valor maior que `1` evita que o agente PHP esgote a memória do sistema ao gravar segmentos.

    O tamanho do segmento pode variar com base no comprimento do nome do método correspondente, no comprimento do nome da classe e no número de chamadas subsequentes feitas pelo método. Dito isto, uma estimativa conservadora é de 400 bytes por segmento. Para limitar o agente PHP a 40 MB para captura de segmento, configure esse valor como `100000`. Se esse valor for definido abaixo de `2000`, limitará ainda mais o número total de segmentos relatados para rastreamento da transação.

    Esta definição de configuração é apenas para processos PHP CLI; isso não afetará os processos web PHP. Para definir um limite para processos da web, use `newrelic.transaction_tracer.max_segments_web`.
  </Collapser>
</CollapserGroup>

## Outro tracer .ini configurações [#inivar-misctt-settings]

Os valores dessas configurações são usados para controlar vários recursos tracer .

<CollapserGroup>
  <Collapser
    id="inivar-cross-app-tracer-enabled"
    title="newrelic.cross_application_tracer.enabled"
  >
    <Callout variant="important">
      O multiaplicativo Tracing está obsoleto e no agente PHP versão 9.21.0.311 foi desabilitado por padrão. Recomendamos o recurso [distributed tracing](/docs/apm/agents/php-agent/configuration/distributed-tracing-php-agent) , que melhora o [rastreamento multiaplicativo](/docs/traces/cross-application-traces).
    </Callout>

    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Habilite ou desabilite o tracer multiaplicativo. O tracer multiaplicativo insere cabeçalhos HTTP nas solicitações de saída e na resposta para vincular a transação da web métrica e o rastreamento da transação entre aplicativos.

    Distributed tracing e o rastreamento multiaplicativo não podem ser usados simultaneamente. A configuração padrão do agente PHP habilita distributed tracing e desabilita o rastreamento multiaplicativo.
  </Collapser>

  <Collapser
    id="inivar-distributed-enabled"
    title="newrelic.distributed_tracing_enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    <Callout variant="important">
      A ativação distributed tracing desativa [o rastreamento multiaplicativo](#inivar-cross-app-tracer-enabled). Leia o [guia de transição](/docs/apm/distributed-tracing/getting-started/transition-guide-distributed-tracing) para entender os efeitos no recurso New Relic.
    </Callout>

    Habilite ou desabilite o [distributed tracing](/docs/apm/agents/php-agent/configuration/distributed-tracing-php-agent). Ele está ativado por padrão no agente PHP 9.21.0 e superior. Quando o tracer de transação e o recurso distributed tracing do agente estão habilitados, o agente inserirá cabeçalhos nas solicitações de saída e verificará as solicitações recebidas em busca de cabeçalhos distributed tracing .

    ```ini
    newrelic.transaction_tracer.enabled = true
    newrelic.distributed_tracing_enabled = true
    ```

    Para obter mais informações, consulte [distributed tracing para seus serviços PHP](/docs/apm/agents/php-agent/configuration/distributed-tracing-php-agent).
  </Collapser>

  <Collapser
    id="inivar-dt-exclude-newrelic"
    title="newrelic.distributed_tracing_exclude_newrelic_header"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Defina isso como verdadeiro para excluir o cabeçalho distributed tracing New Relic que está anexado às solicitações de saída e, em vez disso, confiar apenas nos cabeçalhos W3C Trace Context para distributed tracing. Se for falso, ambos os tipos de cabeçalhos serão anexados às solicitações de saída.

    O cabeçalho distributed tracing New Relic permite interoperabilidade com agentes mais antigos que não suportam cabeçalhos W3C Trace Context . As versões do agente que suportam cabeçalhos W3C Trace Context os priorizarão em relação aos cabeçalhos New Relic para distributed tracing.
  </Collapser>

  <Collapser
    id="inivar-span-enabled"
    title="newrelic.span_events_enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Os eventos Span são relatados para [distributed tracing](#inivar-distributed-enabled). O relatório de eventos de extensão requer que [distributed tracing](/docs/apm/agents/php-agent/configuration/distributed-tracing-php-agent) esteja habilitado. Esta opção habilita/desabilita o reporte do evento span.
  </Collapser>

  <Collapser
    id="inivar-span-events-max-samples-stored"
    title="newrelic.span_events.max_samples_stored"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Inteiro
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `0`
          </td>
        </tr>
      </tbody>
    </table>

    Os eventos Span são relatados para [distributed tracing](#inivar-distributed-enabled). Este valor define o número máximo de eventos de span enviados ao coletor por ciclo de coleta. Um valor `0` usará o padrão do agente `2000`. A configuração máxima é `10000`.
  </Collapser>

  <Collapser
    id="inivar-inftr-host"
    title="newrelic.infinite_tracing.trace_observer.host"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Corda
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `""`
          </td>
        </tr>
      </tbody>
    </table>

    Configura o observador trace usado para rastreamento infinito. Se estiver vazio, o suporte ao Rastreamento Infinito será desativado. Isso requer que [distributed tracing](#inivar-distributed-enabled) e o evento span estejam habilitados.
  </Collapser>

  <Collapser
    id="inivar-inftr-port"
    title="newrelic.infinite_tracing.trace_observer.port"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Inteiro
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `443`
          </td>
        </tr>
      </tbody>
    </table>

    Configura a porta TCP/IP usada para comunicação com o Observador trace do Infinite Tracing. Esta configuração será ignorada se `newrelic.infinite_tracing.trace_observer.host` estiver vazio. Geralmente, essa configuração não precisará ser alterada.
  </Collapser>

  <Collapser
    id="inivar-inftr-queue"
    title="newrelic.infinite_tracing.span_events.queue_size"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Inteiro (1000 ou superior)
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `100000`
          </td>
        </tr>
      </tbody>
    </table>

    Configura o número de eventos de span que podem ser enfileirados para transmissão para o Observador trace de rastreamento infinito. O agente gerencia internamente o evento span para rastreamento infinito em lotes span. Esses lotes de span podem conter no máximo 1.000 spans. Portanto, o tamanho da fila de eventos span não pode ser inferior a `1000`, caso contrário, nem mesmo um único lote span poderá ser enfileirado. Se um tamanho de fila inferior a 1.000 for especificado, o tamanho mínimo de `1000` será usado.
  </Collapser>

  <Collapser
    id="inivar-err-enabled"
    title="newrelic.error_collector.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Ative ou desative o coletor de erros. Quando ativado, o agente coleta e relata erros de PHP para a interface do New Relic.

    O agente registra apenas o erro mais grave para cada transação e até 20 erros por [ciclo de coleta](/docs/apm/new-relic-apm/getting-started/glossary#harvest-cycle).

    <Callout variant="tip">
      Para obter uma visão geral da configuração de erros no APM, consulte [Gerenciar erros no APM](/docs/agents/manage-apm-agents/agent-data/manage-errors-apm-collect-ignore-mark-expected).
    </Callout>
  </Collapser>

  <Collapser
    id="inivar-err-db"
    title="newrelic.error_collector.record_database_errors"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Quando [habilitado](#inivar-err-enabled), o agente coleta erros retornados pelas funções do MySQL como se fossem erros de PHP.
  </Collapser>

  <Collapser
    id="inivar-err-priority"
    title="newrelic.error_collector.prioritize_api_errors"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Defina como `true` para atribuir a prioridade mais alta aos erros identificados por meio da função de API [`newrelic_notice_error()`](/docs/agents/php-agent/php-agent-api/newrelic_notice_error) .

    Observação: quaisquer erros não detectados receberão uma prioridade ainda maior, de modo que terão precedência sobre os erros relatados pela função [`newrelic_notice_error()`](/docs/agents/php-agent/php-agent-api/newrelic_notice_error) da API.
  </Collapser>

  <Collapser
    id="inivar-err-ignore-exceptions"
    title="newrelic.error_collector.ignore_exceptions"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Corda
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            (nenhum)
          </td>
        </tr>
      </tbody>
    </table>

    Uma lista separada por vírgulas de nomes de classes de exceção totalmente qualificados que o agente deve ignorar. Quando ocorrer uma exceção não tratada, o agente executará o equivalente a `$exception instanceof Class` para cada uma das classes listadas. Se alguma dessas verificações retornar verdadeiro, o agente não registrará uma exceção.

    Dependendo da [versão do PHP suportada](/docs/agents/php-agent/getting-started/php-agent-compatibility-requirements#php-release), estes valores são equivalentes a <DNT>**disabling**</DNT> relatórios de exceção:

    * Versões do PHP 5 suportadas: `newrelic.error_collector.ignore_exceptions = Exceptions`
    * Versões do PHP 7 suportadas: `newrelic.error_collector.ignore_exceptions = Throwable`
  </Collapser>

  <Collapser
    id="inivar-err-ignore-errors"
    title="newrelic.error_collector.ignore_errors"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Inteiro ou uma expressão bit a bit de [constantes de erro definidas pelo PHP](http://php.net/manual/en/errorfunc.constants.php)
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `0`
          </td>
        </tr>
      </tbody>
    </table>

    Define os [níveis de erro](http://php.net/manual/en/errorfunc.constants.php) do agente PHP como <DNT>**ignore**</DNT>. O valor desta configuração usa sintaxe semelhante à [opção `error_reporting` do PHP](http://php.net/manual/en/errorfunc.configuration.php#ini.error-reporting). Por exemplo, para configurar o agente PHP para ignorar erros de nível `E_WARNING` e `E_ERROR` , use:

    ```ini
    newrelic.error_collector.ignore_errors = E_WARNING | E_ERROR
    ```

    ou

    ```ini
    newrelic.error_collector.ignore_errors = 3
    ```

    Para configurar o agente PHP para ignorar tudo, exceto `E_WARNING`, use:

    ```ini
    newrelic.error_collector.ignore_errors = E_ALL & ~E_WARNING
    ```
  </Collapser>

  <Collapser
    id="inivar-framework-drupal-modules"
    title="newrelic.framework.drupal.modules"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            Notas:
          </th>

          <td>
            No agente anterior à versão 3.0 o padrão para esse valor era `false`. Definir esta opção implicava `newrelic.transaction_tracer.detail = 1`.
          </td>
        </tr>
      </tbody>
    </table>

    Para ativar o rastreamento do módulo Drupal, defina como `true`. Esta opção tem o mesmo impacto no desempenho que [`newrelic.transaction_tracer.detail`](#inivar-tt-detail). Ele permitirá a gravação das funções do módulo Drupal e contagens de chamadas, e elas serão exibidas na guia <DNT>**Modules**</DNT> , assim como a transação da web.
  </Collapser>

  <Collapser
    id="inivar-framework-wordpress-hooks"
    title="newrelic.framework.wordpress.hooks"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Para ativar o rastreamento de gancho do WordPress, defina como `true`. Ele permitirá a gravação de ganchos, plug-ins e temas do WordPress, e eles serão exibidos na guia [<DNT>**WordPress**</DNT>](/docs/agents/php-agent/frameworks-libraries/wordpress-specific-functionality) na interface do New Relic.
  </Collapser>

  <Collapser
    id="inivar-framework-wordpress-hooks-options"
    title="newrelic.framework.wordpress.hooks.options"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Corda
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `"plugin_callbacks"`
          </td>
        </tr>
      </tbody>
    </table>

    Define as opções de como os hooks do WordPress são instrumentados. O agente New Relic pode fornecer diferentes níveis de insights sobre ganchos do WordPress. Por padrão, apenas plug-in/tema de retorno de chamada são instrumentados ("plugin_callbacks"). Ao custo do aumento da sobrecarga do agente, é possível estender a instrumentação para todas as funções de retorno de chamada de gancho ("all_callbacks"). A terceira opção é monitor hooks sem retorno de chamada instrumentado ("threshold"). Esta opção não fornece insights sobre plug-ins/temas. Leia mais sobre a instrumentação específica do WordPress [aqui](/docs/agents/php-agent/frameworks-libraries/wordpress-specific-functionality).
  </Collapser>

  <Collapser
    id="inivar-framework-wordpress-hooks-threshold"
    title="newrelic.framework.wordpress.hooks.threshold"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Duração
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `1ms`
          </td>
        </tr>
      </tbody>
    </table>

    Define o limite acima do qual o agente New Relic registrará a execução do gancho do WordPress. Usado quando newrelic.framework.wordpress.hooks.options está definido como "limite".
  </Collapser>

  <Collapser
    id="inivar-wt-files"
    title="newrelic.webtransaction.name.files"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            String (use aspas)
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `""`
          </td>
        </tr>
      </tbody>
    </table>

    É o mesmo que [`newrelic.webtransaction.name.functions`](#inivar-wt-funcs), exceto que usa nomes de arquivo para nomear a transação da web. Os nomes dos arquivos podem ser expressões regulares POSIX padrão para serem usadas com PCRE; por exemplo, `"controllers/actions/.*"`.
  </Collapser>

  <Collapser
    id="inivar-wt-funcs"
    title="newrelic.webtransaction.name.functions"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            String (use aspas)
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `""`
          </td>
        </tr>
      </tbody>
    </table>

    A menos que o agente New Relic detecte um framework específico, como Drupal ou Wordpress, as transações da web recebem o nome do arquivo PHP inicial; por exemplo, `article.php`.

    Quando o arquivo inicial é um despachante, esse esquema de nomenclatura produz dados menos que úteis. Utilize esta variável para especificar uma lista de funções que são as "ações" geradas pelo despachante. O nome da transação da web será a primeira função de ação executada.

    <DNT>
      **Example dispatch function naming**
    </DNT>

    Se `index.php` for despachado para funções nomeadas:

    * `login`,

    * `logout`,

    * `admin`,

    * `show`, e

    * `edit`

      Você definiria esse valor como `"login,logout,admin,show,edit"`.

      A transação da web será nomeada `login`, `logout`, etc. em vez de `/index.php` (o nome inicial do arquivo).
  </Collapser>

  <Collapser
    id="inivar-wt-remove-path"
    title="newrelic.webtransaction.name.remove_trailing_path"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Quando ativado, remove qualquer conteúdo do URI da solicitação após o nome do script. Por exemplo, isso removeria o `/xyz/zy` final de `/path/to/foo.php/xyz/zy`.
  </Collapser>

  <Collapser
    id="ini-var-dt-instance-reporting"
    title="newrelic.datastore_tracer.instance_reporting.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Se `false`, o agente não reportará métrica da instância do datastore, nem adicionará parâmetro `host` ou `port_path_or_id` à operação ou rastreamento sql lento.
  </Collapser>

  <Collapser
    id="ini-var-dt-database-name-reporting"
    title="newrelic.datastore_tracer.database_name_reporting.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Se `false`, o agente não adicionará o parâmetro `database_name` à transação ou ao rastreamento SQL lento.
  </Collapser>
</CollapserGroup>

## Configurações de atributo [#inivar-attribute-settings]

Esta seção lista as configurações que afetam a coleta e os relatórios de atributos.

<CollapserGroup>
  <Collapser
    id="inivar-attributes-enabled"
    title="newrelic.attributes.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Habilite ou desabilite a coleta de atributo gerado pelo agente PHP ou gerado pelo usuário através de [`newrelic_add_custom_parameter()`](/docs/agents/php-agent/php-agent-api/newrelic_add_custom_parameter). Esta configuração terá precedência sobre todas as outras configurações do atributo.

    Para obter mais informações, consulte [Habilitando e desabilitando atributo](/docs/php/php-agent-enabling-and-disabling-attributes#cfg-attributes-enabled).
  </Collapser>

  <Collapser
    id="inivar-attributes-enabled"
    title="newrelic.{destination}.attributes.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `true`, exceto por `browser_monitoring.attributes.enabled`
          </td>
        </tr>
      </tbody>
    </table>

    Controle quais destinos recebem atributo. Essas definições de configuração substituirão as [configurações](#inivar-attributes-include-exclude) `.include` e `.exclude` .

    Para mais informações sobre os destinos disponíveis, consulte [Habilitando e desabilitando atributo](/docs/agents/php-agent/attributes/enabling-and-disabling-attributes#properties).
  </Collapser>

  <Collapser
    id="inivar-attributes-include-exclude"
    title="newrelic.attributes.{include|exclude}"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Corda
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            (nenhum)
          </td>
        </tr>
      </tbody>
    </table>

    Esta é uma família de opções de configuração que permite um controle preciso sobre os destinos do atributo. Para obter mais informações, consulte [Habilitando e desabilitando atributo](/docs/php/php-agent-enabling-and-disabling-attributes#cfg-attributes-include).
  </Collapser>
</CollapserGroup>

## Evento personalizado [#inivar-custom-events]

Esta seção lista as configurações que afetam os relatórios de eventos personalizados.

<CollapserGroup>
  <Collapser
    id="inivar-custom-events-enabled"
    title="newrelic.custom_insights_events.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Habilite ou desabilite a coleta de eventos gerados pelo usuário por meio de [`newrelic_record_custom_event()`](/docs/agents/php-agent/php-agent-api/newrelic_record_custom_event). Esta configuração terá precedência sobre todas as outras configurações do atributo.

    Para obter mais informações, consulte [Relatório de evento personalizado e atributo](/docs/data-apis/custom-data/custom-events/apm-report-custom-events-attributes/#php-att).
  </Collapser>

  <Collapser
    id="inivar-custom-events-maxsamples"
    title="newrelic.custom_events.max_samples_stored"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Inteiro
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `30000`
          </td>
        </tr>

        <tr>
          <th>
            Máx.:
          </th>

          <td>
            `100000`
          </td>
        </tr>
      </tbody>
    </table>

    Um número inteiro positivo que especifica o número máximo de eventos personalizados por minuto a serem enviados.

    Definir como `0` desativará efetivamente o envio de evento personalizado. A configuração [`newrelic.custom_insights_events.enabled`](#inivar-custom-events-enabled) é a forma preferida de ativar ou desativar a geração de eventos personalizados.

    Defina um valor mais baixo para reduzir a quantidade de eventos personalizados enviados (pode causar amostragem de eventos personalizados). Defina um valor mais alto para enviar mais linhas de eventos personalizados.

    <Callout variant="important">
      A variável INI `newrelic.custom_events.max_samples_stored` foi adicionada na versão 10.4.0.316.
    </Callout>
  </Collapser>
</CollapserGroup>

## Métrica al nível do código [#inivar-code-level-metrics]

Esta seção lista as configurações que afetam o relatório do nível do código métrico.

<CollapserGroup>
  <Collapser
    id="inivar-code-level-metrics-enabled"
    title="newrelic.code_level_metrics.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Habilite ou desabilite a coleta do nível do código métrico.

    <Callout variant="important">
      A variável INI `newrelic.code_level_metrics.enabled` foi adicionada na versão 10.4.0.316 e foi desativada por padrão. nível do código métrico estão habilitados por padrão a partir da versão 10.6.0.
    </Callout>
  </Collapser>

  <Collapser
    id="NEW_RELIC_METADATA_COMMIT"
    title="NEW_RELIC_METADATA_COMMIT"
  >
    <Callout variant="important">
      Isso só pode ser definido por meio de uma variável de ambiente.
    </Callout>

    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Inteiro
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            (nenhum)
          </td>
        </tr>

        <tr>
          <th>
            [Definir](#options)
          </th>

          <td>
            Variável de ambiente
          </td>
        </tr>
      </tbody>
    </table>

    O commit sha. O sha inteiro pode ser usado ou apenas os primeiros sete caracteres (por exemplo, 734713b).
  </Collapser>

  <Collapser
    id="NEW_RELIC_METADATA_RELEASE_TAG"
    title="NEW_RELIC_METADATA_RELEASE_TAG"
  >
    <Callout variant="important">
      Isso só pode ser definido por meio de uma variável de ambiente.
    </Callout>

    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Corda
          </td>
        </tr>

        <tr>
          <th>
            Padrão
          </th>

          <td>
            (nenhum)
          </td>
        </tr>

        <tr>
          <th>
            [Definir](#options)
          </th>

          <td>
            Variável de ambiente
          </td>
        </tr>
      </tbody>
    </table>

    Uma tag de lançamento (como v0.1.209 ou release-209).
  </Collapser>
</CollapserGroup>

## Configuração Errors Inbox [#errors-inbox-configuration]

Definir uma das tags a seguir ajudará você a identificar quais versões do seu software estão produzindo erros.

* `NEW_RELIC_METADATA_SERVICE_VERSION` irá criar tag.service.version nos dados do evento contendo a versão do seu código que está implantada, em muitos casos uma versão semântica como 1.2.3, mas nem sempre.
* `NEW_RELIC_METADATA_RELEASE_TAG `criará tags.releaseTag nos dados do evento contendo a tag de lançamento (como v0.1.209 ou release-209).
* `NEW_RELIC_METADATA_COMMIT` criará tag.commit nos dados do evento contendo o commit sha. O sha inteiro pode ser usado ou apenas os primeiros sete caracteres (por exemplo, 734713b).

Uma próxima versão da Errors Inbox rastreará automaticamente quais versões do seu software estão produzindo erros. Quaisquer dados de versão também serão exibidos no [CodeStream](/docs/codestream/how-use-codestream/performance-monitoring/#buildsha).

## Outro .ini configurações [#inivar-rare-settings]

Esta seção lista as configurações restantes do newrelic.ini.

<CollapserGroup>
  <Collapser
    id="inivar-enabled"
    title="newrelic.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            SISTEMA
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            (nenhum)
          </td>
        </tr>
      </tbody>
    </table>

    Ative ou desative o agente New Relic. Por padrão, o agente PHP New Relic está habilitado para todos os diretórios.

    Se você possui vários sites em seu servidor web, mas deseja que o agente PHP monitor apenas sites específicos:

    1. Certifique-se de que `newrelic.enabled` esteja definido como `true` no nível global (SYSTEM) em seu arquivo `newrelic.ini` .

    2. Defina `newrelic.enabled` como `false` para um ou mais sites específicos por diretório (PERDIR).

       Se precisar desativar o agente globalmente, defina o valor `newrelic.enabled` como `false` no arquivo `newrelic.ini` .

       Quando o agente está desativado globalmente, ele não é inicializado completamente. Ele pressupõe que você o está desativando globalmente por um motivo crítico e que o agente tentará ter o impacto mais próximo possível de zero no PHP.

       <Callout variant="important">
         Você não pode desativar globalmente o agente e depois ativá-lo seletivamente por diretório usando `.htaccess`.
       </Callout>
  </Collapser>

  <Collapser
    id="inivar-logfile"
    title="newrelic.logfile"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            SISTEMA
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            String (use aspas)
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `"/var/log/newrelic/php_agent.log"`
          </td>
        </tr>
      </tbody>
    </table>

    Isso identifica o nome do arquivo para registrar mensagens. Isso é útil para depurar quaisquer problemas com o agente. Independentemente do que você definir, certifique-se de que:

    * As permissões para o diretório que contém e o próprio arquivo estão corretas.
    * O usuário que executa o PHP pode gravar no arquivo. Geralmente este é o mesmo usuário do servidor web.
  </Collapser>

  <Collapser
    id="inivar-analytics-events"
    title="newrelic.transaction_events.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Quando definido como `true`, o agente coletará e reportará dados de eventos analíticos. Os dados do evento permitem que a interface do New Relic mostre informações adicionais como [histograma](/docs/applications-menu/histograms-viewing-data-distribution) e [percentil](/docs/applications-menu/percentiles-comparing-ranked-data).
  </Collapser>

  <Collapser
    id="inivar-error-events"
    title="newrelic.error_collector.capture_events"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Quando definido como `true`, o agente coletará e reportará dados de eventos de erro. Os dados do evento permitem que a interface do New Relic mostre análises de erros.
  </Collapser>

  <Collapser
    id="inivar-feature-flag"
    title="newrelic.feature_flag"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Esta configuração habilita recursos novos e experimentais dentro do agente PHP. Esses flags são usados para habilitar seletivamente recursos que devem ser habilitados por padrão em versões posteriores do agente PHP.
  </Collapser>

  <Collapser
    id="inivar-autorum"
    title="newrelic.browser_monitoring.auto_instrument"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Isso permite a inserção automática dos fragmentos JavaScript para <InlinePopover type="browser"/>. Quando habilitado fará com que o agente insira um cabeçalho e um rodapé na saída HTML que irá gerar métricas no tempo de carregamento da página para a experiência do usuário final. Para obter mais informações, consulte [Tempo de carregamento da página em PHP](/docs/php/page-load-timing-in-php).
  </Collapser>

  <Collapser
    id="inivar-autorum"
    title="newrelic.guzzle.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            PERDER
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Ativa ou desativa o suporte para a [biblioteca Guzzle quando usada com New Relic](/docs/agents/php-agent/frameworks-libraries/guzzle).

    * Agente PHP versão 6.4 ou superior: esta configuração é definida como `true` por padrão.
  </Collapser>

  <Collapser
    id="inivar-autorum"
    title="newrelic.preload_framework_library_detection"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            SISTEMA
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            Notas:
          </th>

          <td>
            Introduzido no agente PHP versão 9.4
          </td>
        </tr>
      </tbody>
    </table>

    Permite a detecção de framework e biblioteca quando o pré-carregamento está habilitado. O pré-carregamento foi introduzido no PHP versão 7.4. `newrelic.preload_framework_library_detection` só terá efeito quando `opcache.preload` for definido no arquivo `php.ini` .
  </Collapser>

  <Collapser
    id="inivar-package-detection"
    title="newrelic.vulnerability_management.package_detection.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Escopo:
          </th>

          <td>
            SISTEMA
          </td>
        </tr>

        <tr>
          <th>
            Tipo:
          </th>

          <td>
            Boleano
          </td>
        </tr>

        <tr>
          <th>
            Padrão:
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            Notas:
          </th>

          <td>
            Introduzido no agente PHP versão 10.17
          </td>
        </tr>
      </tbody>
    </table>

    Quando definido como `true`, o agente enviará informações de detecção de pacotes que podem ser visualizadas na página do ambiente.
  </Collapser>
</CollapserGroup>
