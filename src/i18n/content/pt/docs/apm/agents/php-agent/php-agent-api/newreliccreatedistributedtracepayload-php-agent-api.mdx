---
title: newrelic_create_distributed_trace_payload (API do agente PHP)
type: apiDoc
shortDescription: Cria uma carga de distributed trace .
tags:
  - Agents
  - PHP agent
  - PHP agent API
metaDescription: Distributed tracing allows you to see the path a request takes as it travels through a distributed system. Use this API to create a distributed trace payload.
freshnessValidatedDate: never
translationType: machine
---

## Sintaxe

```php
newrelic_create_distributed_trace_payload()
```

Cria uma carga de distributed trace .

## Requisitos

Requer agente PHP [versão 8.4 ou superior](/docs/release-notes/agent-release-notes/php-release-notes).

## Descrição

[distributed tracing](/docs/agents/php-agent/features/distributed-tracing-php) permite que você veja o caminho que uma solicitação percorre ao percorrer sistemas distribuídos.

<Callout variant="important">
  Com o agente PHP [versão 9.10 ou](/docs/release-notes/agent-release-notes/php-release-notes) superior, as seguintes funções JSON agora são consideradas obsoletas e serão removidas em uma versão futura:

  ```php
  newrelic_create_distributed_trace_payload()
  newrelic_accept_distributed_trace_payload($payload)
  newrelic_accept_distributed_trace_payload_httpsafe($payload)
  ```

  Em vez disso, use a API compatível com o suporte ao W3C Trace Context, adicionada na versão 9.8 do agente. Com isso, a API do aplicativo instrumentado manualmente mudou das funções relacionadas ao payload JSON para os seguintes formatos de matriz de cabeçalho:

  ```php
  newrelic_insert_distributed_trace_headers($outbound_headers)
  newrelic_accept_distributed_trace_headers($inbound_headers)
  ```
</Callout>

## Valores de retorno

Este método retorna um objeto do tipo `newrelic\DistributedTracePayload.`Este objeto tem dois métodos que renderizarão uma carga distributed trace como texto.

```php
$payload = newrelic_create_distributed_trace_payload(); // renders the payload as a JSON string
$jsonText = $payload->text(); // renders the payload as an string suitable for transport via HTTP (query string, POST param, HTTP headers, etc.)
$httpSafeString = $payload->httpSafe();
```

## Exemplos

Para obter exemplos de como e quando usar este método API, consulte a documentação para usar [manualmente o instrumento aplicativo e serviços](/docs/agents/php-agent/features/distributed-tracing-php#manual).
