---
title: Integração de segurança AWS
metaDescription: 'Send your security data from AWS Security Hub, GuardDuty, and inspector directly to New Relic.'
freshnessValidatedDate: never
translationType: machine
---

Você pode importar descobertas do AWS Security Hub para o New Relic para obter uma visão única e unificada das vulnerabilidades. O processo usa o EventBridge para publicar descobertas dos serviços de relatórios de segurança da AWS por meio de um destino de API da AWS.

Depois de concluir essas etapas, você verá novas vulnerabilidades detectadas pelas ferramentas de segurança da AWS em sua conta New Relic em tempo real e poderá criar um painel de análise e ativar <InlinePopover type="alerts"/>em problemas recém-detectados.

Você também pode importar descobertas do AWS GuardDuty e Inspector e visualizá-las por meio de painel personalizado ou consulta usando NRDB.

## Pré-requisitos

Para enviar dados de segurança da AWS para o New Relic:

* [Habilite o AWS Security Hub](https://docs.aws.amazon.com/securityhub/latest/userguide/securityhub-settingup.html) em sua conta da AWS.
* Obtenha uma [chave de licença](/docs/accounts-partnerships/install-new-relic/account-setup/license-key) da New Relic para a conta para a qual deseja relatar dados.

## Crie um destino de API para ingestão

<Steps>
  <Step>
    ### Criar destino de API [#create-api-destination]

    1. Na interface da AWS, navegue até <DoNotTranslate>**EventBridge > Integrations > API destinations > Create API destination**</DoNotTranslate>.

    2. Preencha o prompt.

    3. Construa seu endpoint usando o padrão abaixo e insira-o no endpoint de destino da API:

       ```
       https://security-ingest-processor.service.newrelic.com/v1/security/webhooks/awssecurityhub?Api-Key=NEW_RELIC_LICENSE_KEY
       ```

       <Callout variant="important">
         Use o endpoint da UE se estiver usando uma chave de licença da UE: `https://security-ingest-processor.service.eu.newrelic.com/v1/security/webhooks/awssecurityhub?Api-Key=NEW_RELIC_LICENSE_KEY`
       </Callout>

    4. Selecione <DoNotTranslate>**POST**</DoNotTranslate> como método HTTP.

    5. Selecione <DoNotTranslate>**Create a new connection**</DoNotTranslate>.
  </Step>

  <Step>
    ### Crie uma nova conexão [#create-new-connection]

    1. Preencha os campos no novo prompt.

    2. Para

       <DoNotTranslate>**Destination**</DoNotTranslate>

       selecione

       <DoNotTranslate>**Other**</DoNotTranslate>

       .

    3. Para

       <DoNotTranslate>**Authorization type**</DoNotTranslate>

       selecione

       <DoNotTranslate>**API Key**</DoNotTranslate>

       .

    4. Para

       <DoNotTranslate>**API Key Name**</DoNotTranslate>

       digite `Api-Key` e cole sua New Relic

       <InlinePopover type="licenseKey"/>

       como o valor.
  </Step>
</Steps>

## Crie uma regra do EventBridge

Depois de criar um destino de API para ingestão, crie uma regra Eventbridge para encaminhar eventos relacionados à segurança para um destino de API para ingestão do New Relic.

<Steps>
  <Step>
    ### Definir detalhes da regra [#define-rule-detail]

    1. Na interface da AWS, navegue até

       <DoNotTranslate>**EventBridge > Rules > Create Rule**</DoNotTranslate>

       .

    2. Insira um nome no campo de nome, como `SecurityEvent_NewRelicSIP_EventForwarder_Rule`.

    3. Insira uma descrição, como `Forwards Security Hub, GuardDuty, and Inspector events to the New Relic Security Ingest Processor (SIP)`.

    4. Para barramento de eventos, selecione `default`.

    5. Para tipo de regra, selecione `Rule with an event pattern`.

    6. Selecione

       <DoNotTranslate>**Next**</DoNotTranslate>

       .
  </Step>

  <Step>
    ### Construir padrão de evento [#build-event-pattern]

    1. No novo painel, selecione <DoNotTranslate>**AWS events or EventBridge partner events**</DoNotTranslate> como origem do evento.

    2. Opcional: escolha qualquer evento de amostra do Security Hub na dropdown para testar sua regra.

    3. Para o padrão de evento, entre no painel de seleção de padrões personalizados e insira um padrão. Por exemplo, o padrão abaixo corresponde ao evento do Security Hub, Guard Duty e Inspector:

       ```json
       {
         "detail-type": [
           {
             "prefix": "Security Hub"
           },
           {
             "prefix": "GuardDuty Finding"
           },
           {
             "prefix": "Inspector2"
           }
         ]
       }
       ```
  </Step>

  <Step>
    ### Selecione o destino da API como destino da regra [#select-api-destination]

    1. Para

       <DoNotTranslate>**Target types**</DoNotTranslate>

       , selecione

       <DoNotTranslate>**EventBridge API destination**</DoNotTranslate>

       .

    2. Para

       <DoNotTranslate>**API destination**</DoNotTranslate>

       , selecione

       <DoNotTranslate>**Use an existing API destination**</DoNotTranslate>

       .

    3. Usando o dropdown, selecione o destino da API que você criou na etapa 1.

    4. Para função de execução, selecione

       <DoNotTranslate>**Create a new role for this specific resource**</DoNotTranslate>

       .
  </Step>

  <Step>
    ### Configurar tag (opcional) [#configure-tags]

    Configure sua tag conforme necessário.
  </Step>

  <Step>
    ### Revise e crie [#review]

    Revise todas as suas seleções e faça as alterações necessárias.
  </Step>

  <Step>
    ### Revisão no NRDB [#review-in-nrdb]

    Para revisar o log ingerido por meio do AWS evento Bridge, você pode usar a seguinte consulta NRQL:

    ```
    FROM Vulnerability SELECT * WHERE source LIKE 'AWS%' SINCE 3 MONTHS AGO
    ```

    Observe que os resultados do GuardDuty e do Inspector serão exibidos apenas desta forma, enquanto as vulnerabilidades do SecurityHub serão visíveis no Gerenciamento de vulnerabilidades da New Relic (se disponível).
  </Step>
</Steps>