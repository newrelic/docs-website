---
title: Amazon VPC monitoramento de integração
tags:
  - Integrations
  - Amazon integrations
  - AWS integrations list
metaDescription: 'New Relic''s Amazon VPC monitoring integration: how to enable it, and the data it reports.'
freshnessValidatedDate: never
translationType: machine
---

<Callout variant="important">
  Habilite a [integração do AWS CloudWatch Metric Streams ](/docs/infrastructure/amazon-integrations/aws-integrations-list/aws-metric-stream/)para monitor todas as métricas do CloudWatch de seus serviços da AWS, incluindo namespace personalizado. A integração individual não é mais nossa opção recomendada.
</Callout>

[A integração New Relic Infrastructure ](/docs/infrastructure/integrations-getting-started/getting-started/introduction-infrastructure-integrations)inclui uma integração para relatar seus dados da Amazon VPC para New Relic. Este documento explica como ativar a integração e descreve os dados reportados.

## Recurso [#features]

A Amazon [Virtual Private Cloud (VPC)](https://aws.amazon.com/vpc/) é uma rede virtual que utiliza a infraestrutura escalonável da Amazon Web Services (AWS). Com a integração VPC da New Relic, você pode obter visibilidade das alterações de eventos de configuração que são sobrepostas em seus serviços Amazon.

Os dados VPC estão disponíveis em um painel pré-construído e você pode criar [consultas e gráficos personalizados](/docs/infrastructure/integrations-getting-started/getting-started/use-integration-data-new-relic-insights). Você também pode criar condição do alerta para notificá-lo sobre alterações na VPC.

Além disso, [o log de fluxo aprimorado da Amazon VPC](http://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/flow-logs.html) permite capturar informações sobre o tráfego IP de e para interfaces de rede em sua VPC.

## Ativar [#activate]

Para habilitar essa integração, siga os procedimentos padrão para [conectar os serviços da AWS ao New Relic](/docs/infrastructure/infrastructure-integrations/getting-started/connect-aws-integrations-infrastructure).

## Configuração e polling [#polling]

Você pode alterar a frequência de pesquisa e filtrar dados usando [opções de configuração](/docs/integrations/new-relic-integrations/getting-started/configure-polling-frequency-data-collection-cloud-integrations).

Informações [de pesquisa](/docs/infrastructure/amazon-integrations/aws-integrations-list/aws-polling-intervals-infrastructure-integrations) padrão para a integração do Amazon VPC:

* Intervalo de sondagem padrão New Relic : 15 minutos
* Intervalo de dados do Amazon CloudWatch: 1 minuto

## Encontre e use dados [#find-data]

Para encontrar seus dados de integração, acesse <DNT>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Infrastructure > AWS**</DNT> e selecione um dos links de integração de VPC.

Você pode [consultar e explorar seus dados](/docs/using-new-relic/data/understand-data/query-new-relic-data) usando o [tipo de evento](/docs/data-apis/understand-data/new-relic-data-types/#event-data) `PrivateNetworkSample` , com `provider` valores de:

* [VpcNatGateway](#vpc-nat-gateway)
* [VpcVpnTúnel](#vpc-vpn-tunnel)

<Callout variant="important">
  Por padrão, a coleta de dados VpcNatGateway, VpcVpnTunnel e VpcVpnConnection está desabilitada.
</Callout>

Isso ocorre porque se você tiver muitos gateways NAT ou muitas VPNs (conexões e túneis), isso poderá levar a um aumento na sua conta do CloudWatch. Por esse motivo, a integração fornece definições de configuração para definir se você deseja buscar esses dados.

Para saber mais sobre como usar seus dados, consulte [Compreender os dados de integração](/docs/infrastructure/integrations/find-use-infrastructure-integration-data).

## Dados métricos [#metrics]

### Dados do gateway NAT da VPC [#vpc-nat-gateway]

Esta integração coleta os seguintes dados de `PrivateNetworkSample` com um valor de provedor de `VpcNatGateway`:

<Callout variant="tip">
  Para obter descrições completas, consulte [Métricas e dimensões do Amazon VPC NAT Gateway](https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/nat-gateway-metricscollected.html).
</Callout>

<table>
  <thead>
    <tr>
      <th style={{ width: "285px" }}>
        Nome
      </th>

      <th>
        Descrição
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `activeConnectionCount`
      </td>

      <td>
        O número total de conexões TCP ativas simultâneas por meio do gateway NAT.
      </td>
    </tr>

    <tr>
      <td>
        `bytesInFromDestination`
      </td>

      <td>
        O número de bytes recebidos pelo gateway NAT do destino.
      </td>
    </tr>

    <tr>
      <td>
        `bytesInFromSource`
      </td>

      <td>
        O número de bytes recebidos pelo gateway NAT de clientes na sua VPC.
      </td>
    </tr>

    <tr>
      <td>
        `bytesOutToDestination`
      </td>

      <td>
        O número de bytes enviados através do gateway NAT para o destino.
      </td>
    </tr>

    <tr>
      <td>
        `bytesOutToSource`
      </td>

      <td>
        O número de bytes enviados pelo gateway NAT para os clientes na sua VPC.
      </td>
    </tr>

    <tr>
      <td>
        `connectionAttemptCount`
      </td>

      <td>
        O número de tentativas de conexão feitas por meio do gateway NAT.
      </td>
    </tr>

    <tr>
      <td>
        `connectionEstablishedCount`
      </td>

      <td>
        O número de conexões estabelecidas por meio do gateway NAT.
      </td>
    </tr>

    <tr>
      <td>
        `errorPortAllocation`
      </td>

      <td>
        O número de vezes que o gateway NAT não conseguiu alocar uma porta de origem.
      </td>
    </tr>

    <tr>
      <td>
        `idleTimeoutCount`
      </td>

      <td>
        O número de conexões que passaram do estado ativo para o estado inativo. Uma conexão ativa passa para inativa se não tiver sido fechada normalmente e não houver atividade nos últimos 350 segundos.
      </td>
    </tr>

    <tr>
      <td>
        `packetsDropCount`
      </td>

      <td>
        O número de pacotes descartados pelo gateway NAT.
      </td>
    </tr>

    <tr>
      <td>
        `packetsInFromDestination`
      </td>

      <td>
        O número de pacotes recebidos pelo gateway NAT do destino.
      </td>
    </tr>

    <tr>
      <td>
        `packetsInFromSource`
      </td>

      <td>
        O número de pacotes recebidos pelo gateway NAT de clientes na sua VPC.
      </td>
    </tr>

    <tr>
      <td>
        `packetsOutToDestination`
      </td>

      <td>
        O número de pacotes enviados através do gateway NAT para o destino.
      </td>
    </tr>

    <tr>
      <td>
        `packetsOutToSource`
      </td>

      <td>
        O número de pacotes enviados pelo gateway NAT para os clientes na sua VPC.
      </td>
    </tr>
  </tbody>
</table>

### Túnel VPN VPC

Esta integração coleta os seguintes dados de `PrivateNetworkSample` com um valor de provedor de `VpcVpnTunnel`:

<Callout variant="tip">
  Para obter descrições completas, consulte [Métricas e dimensões da Amazon VPC VPN](https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/vpn-metricscollected.html).
</Callout>

<table>
  <thead>
    <tr>
      <th style={{ width: "285px" }}>
        Nome
      </th>

      <th>
        Descrição
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `tunnelState`
      </td>

      <td>
        O estado do túnel. 0 indica PARA BAIXO e 1 indica PARA CIMA.
      </td>
    </tr>

    <tr>
      <td>
        `tunnelDataIn`
      </td>

      <td>
        Os bytes recebidos através do túnel VPN. Cada ponto de dados métrico representa o número de bytes recebidos após o ponto de dados anterior. Use a estatística Sum para mostrar o número total de bytes recebidos durante o período.
      </td>
    </tr>

    <tr>
      <td>
        `tunnelDataOut`
      </td>

      <td>
        Os bytes enviados através do túnel VPN. Cada ponto de dados métrico representa o número de bytes enviados após o ponto de dados anterior. Use a estatística Sum para mostrar o número total de bytes enviados durante o período.
      </td>
    </tr>
  </tbody>
</table>
