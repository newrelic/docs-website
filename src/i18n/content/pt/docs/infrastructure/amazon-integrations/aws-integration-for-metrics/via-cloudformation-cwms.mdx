---
title: Integrar via CloudFormation e CloudWatch Metric Streams
tags:
  - Integration via CloudFormation
  - AWS metric integration
  - Amazon integrations
  - AWS integrations
  - Integration with CloudWatch Metric Streams via CloudFormation
metaDescription: Integrate New Relic with AWS services using CloudFormation templates to automate the setup of CloudWatch Metric Streams for metrics ingestion.
freshnessValidatedDate: never
translationType: machine
---

Para uma integração perfeita da sua conta da AWS com o New Relic, este é o processo de integração mais recomendado. Você pode utilizar API Polling para serviços não suportados pelo CloudWatch Metric Streams.

## Pré-requisitos [#prerequisites]

Antes de começar a integrar sua conta da AWS com o New Relic, certifique-se de atender aos seguintes pré-requisitos:

* **Uma [chave de licença do New Relic Ingest e uma chave de usuário](https://one.newrelic.com/api-keys)**: você precisará dessas chaves para conectar seus serviços da AWS à sua conta do New Relic.
* **[Permissões](https://docs.aws.amazon.com/ARG/latest/userguide/gettingstarted-prereqs-permissions.html)** para implantar novos recursos da AWS e **[funções do IAM](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles.html)**: você precisará dessa permissão para sua conta da AWS.
* **[Permissões](/docs/accounts/accounts-billing/new-relic-one-user-management/user-permissions/#infrastructure)** para integração na nuvem: Você precisará dessas permissões para sua conta New Relic.

## Etapas de integração [#integration-steps]

Para integrar sua conta da AWS com o New Relic usando o CloudFormation e o CloudWatch Metric Streams, siga estas etapas:

1. Navegue até [<DNT>**Infrastructure &gt; AWS**</DNT>](https://one.newrelic.com/infra/infrastructure/cloud-aws).

2. Selecione a conta correta.

3. Clique em <DNT>**Set up integration**</DNT>.

4. Siga as instruções em cada tela e preencha os campos que se aplicam a você. Para esta integração, escolha as seguintes opções nas telas fornecidas:

   1. <DNT>**Choose Data type(s)**</DNT>: <DNT>Metrics</DNT>
   2. <DNT>**Choose a setup method**</DNT>: <DNT>Automate AWS with CloudFormation (Recommended)</DNT>
   3. <DNT>**Choose a metrics integration type**</DNT>: <DNT>CloudWatch Metric Stream (Recommended)</DNT>

5. Se você estiver usando algum dos serviços que não são suportados no CloudWatch Metric Streams, na página <DNT>**Choose a metrics integration type**</DNT>, selecione <DNT>**Yes**</DNT> na terceira etapa para pesquisa API e continue.

   <img title="AWS Integration with CWMS and API Polling" alt="AWS Integration with CWMS and API Polling" src="/images/aws-integration-cf-apipolling.webp" />

   <figcaption>
     CWMS integração de serviços da AWS com sondagem API selecionada para serviços não suportados.
   </figcaption>

   Faça a configuração necessária conforme orientado na página <DNT>**Enable API Polling (optional)**</DNT> e continue.

6. <DNT>Auto-discovery</DNT> detecta e visualiza automaticamente os relacionamentos entre sua entidade AWS em mapas e aproveita algumas outras flexibilidades. Para mais detalhes, consulte [Descoberta automática de entidade AWS ](/docs/infrastructure/amazon-integrations/connect/set-up-auto-discovery-of-aws-entities/). Se você quiser esse recurso, ative-o na página <DNT>**Enable Auto Discovery (optional)**</DNT> e continue.

7. Clique em <DNT>**Launch your CloudFormation in AWS**</DNT>. O modelo do CloudFormation é aberto no seu console AWS com o parâmetro configurado com base nas suas seleções no New Relic, portanto, nenhuma edição adicional é necessária, a menos que você queira fazer alterações.

8. Cole a chave de licença de ingestão e a chave de usuário no seu console da AWS.

<Callout variant="tip">
  Para obter metadados adicionais dos seus serviços da AWS, habilite <DNT>**AWS Config**</DNT> no console da AWS.
</Callout>

10. Para implantar a stack CloudFormation, no console AWS, selecione <DNT>**Create stack**</DNT>. A criação dos recursos stack pode levar vários minutos e pode gerar várias pilhas, dependendo de como você configura o encaminhamento métrico. Se a criação stack falhar, consulte o [procedimento de resolução de problemas](https://docs.newrelic.com/docs/logs/troubleshooting/aws-log-integration-issues/stack-creation-fails/).

11. Após a criação bem-sucedida stack, mude para a plataforma New Relic e continue com a integração guiada até ver seus dados AWS no New Relic.

## Tópicos relacionados [#related-topics]

<DocTiles>
  <DocTile title="Coletar dados de várias contas da AWS" path="/docs/infrastructure/amazon-integrations/manage-aws-data/aws-multi-account/">
    Aprenda a coletar dados de várias contas da AWS.
  </DocTile>

  <DocTile title="AWS integração métrica" path="/docs/infrastructure/amazon-integrations/manage-aws-data/aws-integrations-metrics/">
    Explore e use o métrica do CloudWatch Metric Streams.
  </DocTile>

  <DocTile title="Integração AWS via CloudFormation e API Polling" path="/docs/infrastructure/amazon-integrations/aws-integration-for-metrics/via-cloudformation-and-api-polling">
    Integre serviços da AWS com o New Relic usando CloudFormation e API Polling.
  </DocTile>

  <DocTile title="Integração AWS via Terraform" path="/docs/infrastructure/amazon-integrations/aws-integration-for-metrics/terraform">
    Integre serviços da AWS com o New Relic usando o Terraform.
  </DocTile>

  <DocTile title="Integração manual do console AWS" path="/docs/infrastructure/amazon-integrations/aws-integration-for-metrics/manual">
    Integre manualmente os serviços da AWS com o New Relic a partir do console da AWS.
  </DocTile>
</DocTiles>