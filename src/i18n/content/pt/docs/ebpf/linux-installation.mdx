---
title: Instale o agente New Relic eBPF para hosts Linux.
metaDescription: Learn how to install and configure the New Relic eBPF agent for your Linux host with Debian package installation.
tags:
  - New Relic integrations with eBPF
  - New Relic eBPF agent
  - eBPF integration
  - eAPM
  - Linux host
  - New Relic eBPF agent for Linux
freshnessValidatedDate: never
translationType: machine
---

Você pode instalar o agente New Relic eBPF no seu host Linux para monitorar a integridade de todo o sistema. O agente eBPF fornece visibilidade profunda do desempenho do aplicativo sem exigir alterações de código ou implantar agente específico de linguagem.

## Instale o agente New Relic eBPF.

<Steps>
  <Step>
    ### Antes de você começar [#requirements]

    Você deve atender aos pré-requisitos descritos na documentação [de compatibilidade e requisitos do eBPF](/docs/ebpf/requirements#linux) para hosts Linux.
  </Step>

  <Step>
    ### Instalar o agente eBPF [#install]

    Para instalar o agente eBPF:

    1. Login em sua conta New Relic .

    2. Vá para o **painel de navegação esquerdo &gt; + Integration &amp; Agents &gt; eBPF Agent**.

    3. Na tela Selecionar uma conta, selecione a conta na qual deseja instalar o agente eBPF e clique em **Continue**.

    4. Na página Selecionar um método de instalação, selecione **On a host** e clique em **Continue**.

    5. Na tela Insira sua chave de usuário, selecione uma das seguintes opções e clique em **Continue**:

       * **Usar uma chave existente**: Se você já tiver uma chave de usuário, forneça-a. Para obter mais informações, consulte [Chaves do usuário](/docs/apis/intro-apis/new-relic-api-keys/#user-key).
       * **Criar uma nova chave**: se você não tiver uma chave de usuário, clique em **Create a new key** para criar uma.

    6. Na tela Configurar a integração do host, insira o nome da implantação do host e clique em **Continue**.

    7. Na tela Instalar o agente, execute o comando fornecido no seu terminal para instalar o agente eBPF via pacote Debian.

       1. Copie e cole o comando exibido para instalar o agente eBPF em seu host Debian.

       2. Para verificar a instalação, execute o seguinte comando:

          * Para agente eBPF:

            ```bash
                sudo systemctl status newrelic-ebpf-agent
            ```

          * Para cliente eBPF:

            ```bash
                sudo systemctl status newrelic-ebpf-agent-client
            ```

       Após a instalação bem-sucedida, o status desses serviços será exibido como ativo (em execução).

       <Callout variant="tip">
         Você pode personalizar a configuração do agente eBPF editando o arquivo `newrelic-ebpf-agent.conf` disponível em `/etc/newrelic-ebpf-agent/newrelic-ebpf-agent.conf`. Para obter mais informações sobre o parâmetro de configuração, consulte [parâmetro de configuração](#config-params).
       </Callout>
  </Step>

  <Step>
    ### Acesse os dados do eBPF no New Relic [#access-data]

    Depois que o agente eBPF estiver instalado, ele começará automaticamente a coletar dados do seu host Linux. Você pode acessar esses dados na interface de usuário OpenTelemetry do New Relic. Para obter mais informações sobre a interface OpenTelemetry New Relic, consulte [Interface OpenTelemetry APM ](/docs/opentelemetry/get-started/apm-monitoring/opentelemetry-apm-ui).

    **Para visualizar os dados do eBPF no New Relic:**

    1. Acesse **[one.newrelic.com](https://one.newrelic.com) &gt; APM e serviços**.
    2. No banner de pesquisa, defina os critérios de pesquisa como `instrumentation.name = nr_ebpf`:
       <img style={{ align: 'left' }} title="eBPF filters" alt="eBPF filter for eBPF data in New Relic OpenTelemetry UI" src="/images/ebpf_filters.webp" />
  </Step>
</Steps>

/\* \* Encontre sua entidade em &lt;DNT&gt;\*\*Todos os serviços da entidade - OpenTelemetry&lt;/DNT&gt;. O nome da entidade é definido como o valor do \`service.name\` do aplicativo atributo de recurso. Para obter mais informações sobre como as entidades de serviço New Relic são derivadas do atributo de recurso OpenTelemetry, consulte \[Serviços]\(/docs/OpenTelemetry/práticas recomendadas/OpenTelemetry-práticas recomendadas-resources/#services). \* Use \[NRQL]\(/docs/NRQL/get-started/introduction-NRQL (New Relic Query Language)/) para consultar diretamente \[rastreamento]\(https\://one.newrelic.com/launcher/nr1-core.explorer?overlay=eyJuZXJkbGV0SWQiOiJkYXRhLWV4cGxvcmF0aW9uLnF1ZXJ5LWJ1aWxkZXIiLCJpbml0aWFsQWN0aXZlSW50ZXJmYWNlIjoibnJxbEVkaXRvciIsImluaXRpYWxOcnFsVmFsdWUiOiIiLCJpbml0aWFsUXVlcmllcyI6W3sibnJxbCI6IkZST00gU3BhbiBTRUxFQ1QgY291bnQoKikgd2hlcmU gbmV3cmVsaWMuc291cmNlPSclb3RscCUnIFRJTUVTRVJJRVMifV0sImluaXRpYWxDaGFydFNldHRpbmdzIjp7ImNoYXJ0VHlwZSI6IkNIQVJUX0xJTkUiLCJsaW1pdCI6NzU0MiwibGlua2VkRW50aXR5R3VpZCI6bnVsbCwibGlua2VkRGFzaGJvYXJkSWQiOm51bGwsInlTY2FsZSI6eyJzdGF0aWMiOmZhbHNlLCJkb21haW4iOltudWxsLG51bGxdfSwieVplcm8iOnRydWV9fQo=), \[métrica]\(https\://one.newrelic.com/launcher/nr1-core.explorer?overlay=eyJuZXJkbGV0SWQiOiJkYXRhLWV4cGxvcmF0aW9uLnF1ZXJ5LWJ1aWxkZXIiLCJpbml0aWFsQWN0aXZlSW50ZXJmYWNlIjoibnJxbEVkaXRvciIsImluaXRpYWxOcnFsVmFsdWUiOiIiLCJpbml0aWFsUXVlcmllcyI6W3sibnJxbCI6IkZST00gTWV0cmljIFNFTEVDVCBjb3VudCgqKSB3aGVyZS BuZXdyZWxpYy5zb3VyY2UgTElLRSAnJW90bHAlJyBUSU1FU0VSSUVTIN1dLCJpbml0aWFsQ2hhcnRTZXR0aW5ncyI6eyJjaGFydFR5cGUiOiJDSEFSVF9MSU5FIiwibGltaXQiOjc1NDIsImxpbmtlZEVudGl0eUd1aWQiOm51bGwsImxpbmtlZERhc2hib2FyZElkIjpudWxsLCJ5U2NhbGUiOnsic3RhdGljIjpmYWxzZSwiZG9tYWluIjpbbnVsbCxudWxsXX0sInlaZXJvIjp0cnVlfX0K), e \[logs]\(https\://one.newrelic.com/launcher/nr1-core.explorer?overlay=eyJuZXJkbGV0SWQiOiJkYXRhLWV4cGxvcmF0aW9uLnF1ZXJ5LWJ1aWxkZXIiLCJpbml0aWFsQWN0aXZlSW50ZXJmYWNlIjoibnJxbEVkaXRvciIsImluaXRpYWxOcnFsVmFsdWUiOiIiLCJpbml0aWFsUXVlcmllcyI6W3sibnJxbCI6IkZST00gTG9nIFNFTEVDVCBjb3VudCgqKSB3aGVyZSB uZXdyZWxpYy5zb3VyY2U9JyVvdGxwJScgVElNRVNFUklFUyJ9XSwiaW5pdGlhbENoYXJ0U2V0dGluZ3MiOnsiY2hhcnRUeXBlIjoiQ0hBUlRfTElORSIsImxpbWl0Ijo3NTQyLCJsaW5rZWRFbnRpdHlHdWlkIjpudWxsLCJsaW5rZWREYXNoYm9hcmRJZCI6bnVsbCwieVNjYWxlIjp7InN0YXRpYyI6ZmFsc2UsImRvbWFpbiI6W251bGwsbnVsbF19LCJ5WmVybyI6dHJ1ZX19Cg==). \* Consulte \[Interface OpenTelemetry APM ]\(/docs/OpenTelemetry/get-started/APM-monitoramento/OpenTelemetry-APM-interface) para obter mais informações. Caso não encontre sua entidade e não veja seus dados com NRQL, consulte \[OTLP resolução de problemas]\(/docs/OpenTelemetry/práticas recomendadas/OpenTelemetry-otlp-resolução de problemas). Você pode encontrar os dados coletados pelo agente eBPF na interface do usuário Opentelementry do New Relic. \*/

## Atualize o agente eBPF [#upgrade]

Para atualizar o agente eBPF em um host Linux, execute novamente o comando de instalação na interface do usuário do New Relic. Este processo instalará a nova versão do agente e removerá automaticamente a versão anterior.

<Callout variant="important">
  A atualização através de um gerenciador de pacotes não é suportada. Para uma atualização bem-sucedida, você deve usar o comando de instalação da interface do usuário do New Relic.
</Callout>

Para obter o comando de instalação mais recente:

1. Acesse **[one.newrelic.com](https://one.newrelic.com) &gt; + Integration &amp; Agents &gt; eBPF Agent**
2. Siga o fluxo de instalação para obter o comando atualizado.
3. Execute o comando no seu host para atualizar o agente.

## Parâmetro de configuração [#config-params]

O arquivo `newrelic-ebpf-agent.conf` contém o seguinte parâmetro de configuração:

<CollapserGroup>
  <Collapser id="configuration" title="Parâmetro de configuração">
    <table>
      <thead>
        <tr>
          <th>
            Nome do parâmetro
          </th>

          <th>
            Descrição
          </th>

          <th>
            Tipo de dados
          </th>

          <th>
            Valor de exemplo
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `NEW_RELIC_LICENSE_KEY`
          </td>

          <td>
            Especifica sua chave de licença do New Relic, necessária para enviar dados.
          </td>

          <td>
            `String`
          </td>

          <td>
            `22387565c...FFFFNRAL`
          </td>
        </tr>

        <tr>
          <td>
            `DEPLOYMENT_NAME`
          </td>

          <td>
            Especifica um nome exclusivo para sua implantação para ajudar a identificar seus dados no New Relic.
          </td>

          <td>
            `String`
          </td>

          <td>
            `fe`
          </td>
        </tr>

        <tr>
          <td>
            `OTLP_ENDPOINT`
          </td>

          <td>
            Define o endpoint OTLP para onde o agente envia dados de telemetria.
          </td>

          <td>
            `String (Host:Port)`
          </td>

          <td>
            `otlp.nr-data.net:443`
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_LOG_LEVEL`
          </td>

          <td>
            Define o nível de log do agente. As opções são 

            `OFF`

            , 

            `FATAL`

            , 

            `ERROR`

            , 

            `WARNING`

            , 

            `INFO`

            , 

            `DEBUG`

             em ordem crescente de verbosidade.
          </td>

          <td>
            `String`
          </td>

          <td>
            `INFO`
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_LOG_FILE_PATH`
          </td>

          <td>
            Especifica o caminho do arquivo para logs do agente. Se estiver vazio ou o caminho for inválido, os logs serão enviados para a saída padrão (stdout).
          </td>

          <td>
            `String (Path)`
          </td>

          <td>
            `""`
          </td>
        </tr>

        <tr>
          <td>
            `VIZIER_PORT`
          </td>

          <td>
            Porta do servidor Vizier na qual o agente recebe o script PXL do cliente. O valor padrão é 12345.
          </td>

          <td>
            `String`
          </td>

          <td>
            `"12345"`
          </td>
        </tr>

        <tr>
          <td>
            `APM_DATA_REPORTING`
          </td>

          <td>
            Ative o relatório de dados APM . Quando habilitado, o agente coleta e reporta dados de monitoramento de desempenho de aplicativos (APM).
          </td>

          <td>
            `String`
          </td>

          <td>
            `"true"`
          </td>
        </tr>

        <tr>
          <td>
            `TCP_STATS_REPORTING`
          </td>

          <td>
            Ativar o relatório de estatísticas TCP. Quando habilitado, o agente coleta e reporta métricas de tcp de baixo nível e inicia o Monitoramento de rede.
          </td>

          <td>
            `String`
          </td>

          <td>
            `"true"`
          </td>
        </tr>

        <tr>
          <td>
            `DROP_DATA_FOR_ENTITY`
          </td>

          <td>
            Padrão de expressão regular para corresponder ao(s) nome(s) específico(s) do conjunto de entidades que você deseja excluir.
          </td>

          <td>
            `String`
          </td>

          <td>
            `""`
          </td>
        </tr>

        <tr>
          <td>
            `INCLUDE_PORT_IN_SERVER_ENTITY_IDENTIFICATION`
          </td>

          <td>
            A configuração permite incluir ou excluir portas de nomes de entidades descobertas automaticamente. Normalmente, os nomes aparecem como 

            `processName:cwd/container_name:[port]`

            , por exemplo, 

            `python:frosty_merkle:[80]`

            . Para excluir detalhes da porta, defina esta opção como falsa para nomes como 

            `python:frosty_merkle`

            .
          </td>

          <td>
            `String`
          </td>

          <td>
            `"true"`
          </td>
        </tr>

        <tr>
          <td>
            `TLS_ENABLED`
          </td>

          <td>
            Habilita ou desabilita o TLS para comunicação entre o cliente e o agente eBPF.
          </td>

          <td>
            `String`
          </td>

          <td>
            `"true"`
          </td>
        </tr>

        <tr>
          <td>
            `TLS_AUTOGENERATE_CERT_ENABLED`
          </td>

          <td>
            Se definido como 

            `true`

            , gera automaticamente um certificado autoassinado para TLS. Defina como 

            `false`

             se você estiver fornecendo seus próprios certificados.
          </td>

          <td>
            `String`
          </td>

          <td>
            `"true"`
          </td>
        </tr>

        <tr>
          <td>
            `TLS_CERT_PATH`
          </td>

          <td>
            Especifica o caminho do diretório onde os certificados TLS gerados automaticamente são armazenados.
          </td>

          <td>
            `String (Path)`
          </td>

          <td>
            `/tmp/ebpf/certs/`
          </td>
        </tr>

        <tr>
          <td>
            `TLS_CERT_FILE`
          </td>

          <td>
            Especifica o caminho para seu arquivo de certificado público codificado em PEM personalizado. Obrigatório se 

            `TLS_AUTOGENERATE_CERT_ENABLED`

             for 

            `false`

            .
          </td>

          <td>
            `String (Path)`
          </td>

          <td>
            `""`
          </td>
        </tr>

        <tr>
          <td>
            `TLS_KEY_FILE`
          </td>

          <td>
            Especifica o caminho para seu arquivo de chave privada codificado em PEM personalizado. Obrigatório se 

            `TLS_AUTOGENERATE_CERT_ENABLED`

             for 

            `false`

            .
          </td>

          <td>
            `String (Path)`
          </td>

          <td>
            `""`
          </td>
        </tr>

        <tr>
          <td>
            `TLS_CA_FILE`
          </td>

          <td>
            Especifica o caminho para seu arquivo de Autoridade de Certificação (CA) codificado em PEM personalizado. Obrigatório se 

            `TLS_AUTOGENERATE_CERT_ENABLED`

             for 

            `false`

            .
          </td>

          <td>
            `String (Path)`
          </td>

          <td>
            `""`
          </td>
        </tr>

        <tr>
          <td>
            `TABLE_STORE_DATA_LIMIT_MB`
          </td>

          <td>
            Define a memória máxima (em MiB) que o agente eBPF pode usar para seu armazenamento de tabela de dados interno. Esta é a principal maneira de controlar o uso de RAM do agente.
          </td>

          <td>
            Inteiro
          </td>

          <td>
            `250`
          </td>
        </tr>

        <tr>
          <td>
            `DOWNLOADED_PACKAGED_HEADERS_PATH`
          </td>

          <td>
            Define o caminho absoluto do diretório completo onde os cabeçalhos Linux necessários são baixados manualmente e colocados para uso pelo agente eBPF. Isso é útil em ambientes restritos onde o agente não consegue baixar os cabeçalhos Linux necessários. Os cabeçalhos necessários são identificados pelo agente com base na versão do kernel. Use somente após recomendação de suporte do NR.
          </td>

          <td>
            `String (Path)`
          </td>

          <td>
            `"/path/to/downloaded/headers/dir"`
          </td>
        </tr>

        <tr>
          <td>
            `DISTRO_KERNEL_HEADERS_PATH`
          </td>

          <td>
            Define o caminho absoluto do diretório completo onde os cabeçalhos do Linux estão presentes para o agente eBPF usar. Isso é útil quando os cabeçalhos Linux necessários não puderam ser instalados ou o caminho não pôde ser determinado. Use somente após recomendação de suporte do NR.
          </td>

          <td>
            `String (Path)`
          </td>

          <td>
            `"/usr/src/kernels"`
          </td>
        </tr>

        <tr>
          <td>
            `PROTOCOLS_HTTP_ENABLED`
          </td>

          <td>
            Habilita ou desabilita todo o rastreamento do protocolo HTTP (métrica e spans).
          </td>

          <td>
            `String`
          </td>

          <td>
            `"true"`
          </td>
        </tr>

        <tr>
          <td>
            `PROTOCOLS_HTTP_SPANS_ENABLED`
          </td>

          <td>
            Habilita ou desabilita a exportação de spans para requests HTTP.
          </td>

          <td>
            `String`
          </td>

          <td>
            `"true"`
          </td>
        </tr>

        <tr>
          <td>
            `PROTOCOLS_HTTP_SPANS_SAMPLING_LATENCY`
          </td>

          <td>
            Define o limite de latência de amostragem para exportar intervalos HTTP. Os períodos para requests mais lentas que esse percentual são exportados. Opções: 

            `p1`

            , 

            `p10`

            , 

            `p50`

            , 

            `p90`

            , 

            `p99`

            .
          </td>

          <td>
            `String`
          </td>

          <td>
            `"p50"`
          </td>
        </tr>

        <tr>
          <td>
            `PROTOCOLS_HTTP_SPANS_SAMPLING_ERROR_RATE`
          </td>

          <td>
            Define uma porcentagem de taxa de erros (1-100) para uma rota HTTP. Se a taxa de erros de uma rota exceder esse valor, seus trechos correspondentes serão exportados.
          </td>

          <td>
            `String`
          </td>

          <td>
            `""`
          </td>
        </tr>

        <tr>
          <td>
            `PROTOCOLS_MYSQL_ENABLED`
          </td>

          <td>
            Habilita ou desabilita todo o rastreamento do protocolo MySQL.
          </td>

          <td>
            `String`
          </td>

          <td>
            `"true"`
          </td>
        </tr>

        <tr>
          <td>
            `PROTOCOLS_MYSQL_SPANS_ENABLED`
          </td>

          <td>
            Habilita ou desabilita a exportação de spans para consulta MySQL.
          </td>

          <td>
            `String`
          </td>

          <td>
            `"false"`
          </td>
        </tr>

        <tr>
          <td>
            `PROTOCOLS_PGSQL_ENABLED`
          </td>

          <td>
            Habilita ou desabilita todo o rastreamento do protocolo PostgreSQL.
          </td>

          <td>
            `String`
          </td>

          <td>
            `"true"`
          </td>
        </tr>

        <tr>
          <td>
            `PROTOCOLS_PGSQL_SPANS_ENABLED`
          </td>

          <td>
            Habilita ou desabilita a exportação de spans para consulta do PostgreSQL.
          </td>

          <td>
            `String`
          </td>

          <td>
            `"false"`
          </td>
        </tr>

        <tr>
          <td>
            `PROTOCOLS_CASS_ENABLED`
          </td>

          <td>
            Habilita ou desabilita todo o rastreamento do protocolo Cassandra.
          </td>

          <td>
            `String`
          </td>

          <td>
            `"true"`
          </td>
        </tr>

        <tr>
          <td>
            `PROTOCOLS_CASS_SPANS_ENABLED`
          </td>

          <td>
            Habilita ou desabilita a exportação de spans para a Cassandra consulta.
          </td>

          <td>
            `String`
          </td>

          <td>
            `"false"`
          </td>
        </tr>

        <tr>
          <td>
            `PROTOCOLS_REDIS_ENABLED`
          </td>

          <td>
            Habilita ou desabilita todo o rastreamento do protocolo Redis.
          </td>

          <td>
            `String`
          </td>

          <td>
            `"true"`
          </td>
        </tr>

        <tr>
          <td>
            `PROTOCOLS_REDIS_SPANS_ENABLED`
          </td>

          <td>
            Habilita ou desabilita a exportação de spans para comandos do Redis.
          </td>

          <td>
            `String`
          </td>

          <td>
            `"false"`
          </td>
        </tr>

        <tr>
          <td>
            `PROTOCOLS_MONGODB_ENABLED`
          </td>

          <td>
            Habilita ou desabilita todo o rastreamento do protocolo MongoDB.
          </td>

          <td>
            `String`
          </td>

          <td>
            `"true"`
          </td>
        </tr>

        <tr>
          <td>
            `PROTOCOLS_MONGODB_SPANS_ENABLED`
          </td>

          <td>
            Habilita ou desabilita a exportação de spans para consulta do MongoDB.
          </td>

          <td>
            `String`
          </td>

          <td>
            `"false"`
          </td>
        </tr>

        <tr>
          <td>
            `PROTOCOLS_KAFKA_SPANS_ENABLED`
          </td>

          <td>
            Habilita ou desabilita a exportação de intervalos para mensagens do Kafka. Observação: o rastreamento do Kafka não relata métrica.
          </td>

          <td>
            `String`
          </td>

          <td>
            `"false"`
          </td>
        </tr>

        <tr>
          <td>
            `PROTOCOLS_AMQP_SPANS_ENABLED`
          </td>

          <td>
            Habilita ou desabilita a exportação de intervalos para mensagens AMQP (por exemplo, RabbitMQ). Observação: o rastreamento AMQP não relata métrica.
          </td>

          <td>
            `String`
          </td>

          <td>
            `"false"`
          </td>
        </tr>

        <tr>
          <td>
            `PROTOCOLS_DNS_SPANS_ENABLED`
          </td>

          <td>
            Habilita ou desabilita a exportação de spans para consulta de DNS. Observação: o rastreamento de DNS não relata métrica.
          </td>

          <td>
            `String`
          </td>

          <td>
            `"false"`
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

## Desinstale o agente eBPF. [#uninstall]

Para desinstalar o agente eBPF de um host Linux, utilize as ferramentas de gerenciamento de pacotes do seu sistema:

```bash
sudo apt-get remove newrelic-ebpf-agent
```

<Callout variant="tip">
  Não é necessário interromper o serviço antes de executar o comando de desinstalação.
</Callout>

<DocTiles>
  <DocTile title="Instalação eBPF Kubernetes" path="/docs/ebpf/k8s-installation/">
    Aprenda como configurar o agente New Relic eBPF para o seu cluster Kubernetes.
  </DocTile>

  <DocTile title="resolução de problemas eBPF" path="/docs/ebpf/troubleshooting/no-ui-data/">
    Aprenda a solucionar problemas com o agente eBPF da New Relic.
  </DocTile>

  <DocTile title="eBPF práticas recomenda" path="/docs/ebpf/best-practices/">
    Conheça as práticas recomendadas para uso do agente New Relic eBPF.
  </DocTile>
</DocTiles>