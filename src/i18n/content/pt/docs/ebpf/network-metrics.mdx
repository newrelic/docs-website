---
title: Métrica de rede eBPF
metaDescription: Learn how to configure New Relic eBPF network monitoring dashboard.
tags:
  - Integrations
  - eBPF integration
  - eAPM
  - eBPF Network monitoring
  - extended Berkeley Packet Filter (eBPF)
  - Linux host
  - Kubernetes cluster
freshnessValidatedDate: never
translationType: machine
---

<Callout title="Visualização">
  Ainda estamos trabalhando nesse recurso, mas adoraríamos que você experimentasse!

  Atualmente, esse recurso é fornecido como parte de uma prévia, de acordo com nossas [políticas de pré-lançamento](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy/). Não está disponível para clientes sujeitos às regulamentações HIPAA ou FedRAMP.
</Callout>

O monitoramento de rede eBPF oferece visibilidade profunda da saúde da rede do seu sistema, rastreando métricas críticas de DNS e TCP diretamente do kernel. É possível diagnosticar problemas de conectividade analisando as taxas de sucesso e falha das resoluções de DNS e das conexões TCP. Identifique o desempenho gargalo monitorando latências importantes como handshakes TCP, entrega de pacotes e duração de conexões de curta duração. O dashboard também ajuda você a monitorar as taxas de transferência de dados, visualizando os bytes enviados, recebidos e quaisquer pacotes descartados.

## Opções de implantação [#deployment-options]

Você pode habilitar a rede eBPF Métrica de duas maneiras, dependendo da sua configuração de monitoramento atual:

* **Para clientes New Relic APM existentes:** Se você já possui um agente New Relic APM implantado, você pode adicionar métrica de rede eBPF junto com sua instrumentação existente. O agente eBPF opera em modo somente de rede, complementando seus dados de APM com insights de rede em nível de kernel sem interromper sua configuração atual.

* **Para monitoramento abrangente:** implante o agente eBPF completo com recursos eAPM e métrica de rede para observabilidade completa em aplicativos, infraestrutura e camadas de rede. Essa abordagem proporciona a coleta unificada de telemetria por meio de um único agente.

Ambas as opções de implantação fornecem os mesmos recursos de Monitoramento de rede descritos abaixo.

## Recursos de monitoramento de rede [#network-capabilities]

O dashboard da Network Métrica possui as seguintes abas para monitorar diferentes aspectos do desempenho da rede:

* **Erros:** Exibe erros de DNS, TCP e outros erros relacionados à rede.
* **Latência:** Monitora itens importantes como handshakes TCP, entrega de pacotes e a duração de conexões de curta duração.
* **Perda de pacotes:** Registra quaisquer pacotes descartados durante a transmissão. Também contém informações como pacotes descartados pelo kernel, tempos limite de conexão TCP e pacotes retransmitidos.
* **Flags TCP:** Exibe os indicadores de status das conexões TCP para tráfego de entrada e saída.
* **Conexões:** Exibe as conexões TCP de entrada e saída, a contagem de conexões, a duração média da conexão e a duração máxima da conexão.

## Inscreva-se no eBPF Monitoramento de rede [#enroll-pp]

Você pode se inscrever no eBPF Monitoramento de rede a partir da página <DNT>**Preview &amp; Trials**</DNT> :

1. Vá para <DNT>**[one.newrelic.com &gt; Administration](https://one.newrelic.com/admin-portal)**</DNT>.
2. No painel de navegação esquerdo, clique em <DNT>**Preview &amp; Trials**</DNT>.
3. Na lista de recursos de visualização disponíveis, clique em <DNT>**eBPF network monitoring**</DNT>.
4. Siga as instruções na tela e aceite os termos e condições para concluir o processo de integração. Agora você pode experimentar os novos recursos de monitoramento de rede eBPF do APM.

## Habilitar o modo somente métrica de rede para clientes APM existentes [#network-only-mode]

Se você já possui o agente New Relic APM implantado e deseja adicionar visibilidade de rede sem interromper sua instrumentação atual, pode configurar o agente eBPF para operar no modo somente métricas de rede. Isso fornece insights de rede em nível de kernel que complementam seus dados APM existentes.

Com o modo somente métricas de rede ativado, o agente eBPF coletará e reportará dados de telemetria de rede, suprimindo a coleta de dados eAPM. Isso permite que você mantenha sua instrumentação APM existente enquanto obtém visibilidade adicional da camada de rede.

### Para ambiente Kubernetes [#k8s-env]

<CollapserGroup>
  <Collapser className="freq-link" id="k8s-new" title="Nova instalação">
    Execute o seguinte comando para ativar o modo somente métrica de rede na nova instalação Kubernetes :

    ```bash
    KSM_IMAGE_VERSION="v2.13.0" && helm repo add newrelic https://helm-charts.newrelic.com && helm repo update && kubectl create namespace "newrelic" ; helm upgrade --install nr-ebpf-agent newrelic/nr-ebpf-agent --set licenseKey=<your-license-key> --set cluster="cluster-name-ebpf" --set apmDataReporting=false --namespace=newrelic
    ```
  </Collapser>

  <Collapser className="freq-link" id="k8s-existing" title="Instalação existente">
    Siga as etapas abaixo para ativar o modo somente métrica de rede na instalação existente Kubernetes :

    1. Adicione a seguinte chave `apmDataReporting` com o valor `false` ao seu arquivo `values.yaml` :

       ```yaml
       apmDataReporting: false
       ```

    2. Aplicar a configuração:

       ```bash
           helm repo update ; helm upgrade --install nr-ebpf-agent newrelic/nr-ebpf-agent -n newrelic --values values.yaml
       ```
  </Collapser>
</CollapserGroup>

### Ambiente host Linux [#linux-env]

<CollapserGroup>
  <Collapser className="freq-link" id="linux-new" title="Nova instalação">
    Execute o seguinte comando para ativar o modo somente métrica de rede na nova instalação do host Linux:

    ```bash
    curl -Ls https://download.newrelic.com/install/newrelic-cli/scripts/install.sh | sudo bash && sudo DEPLOYMENT_NAME=<deployment-name> NEW_RELIC_API_KEY=<your-api-key> NEW_RELIC_ACCOUNT_ID=<your-account-id> NEW_RELIC_REGION=US NEW_RELIC_CLI_SKIP_CORE=1 /usr/local/bin/newrelic install -n ebpf-agent-installer
    ```
  </Collapser>

  <Collapser className="freq-link" id="linux-existing" title="Instalação existente">
    Siga as etapas abaixo para ativar o modo somente métrica de rede na instalação de host Linux existente:

    1. Adicione a seguinte chave `apmDataReporting` com o valor `false` ao seu arquivo `newrelic-ebpf-agent.conf` :

       ```bash
       APM_DATA_REPORTING="false"
       ```

    2. Reinicie os serviços do agente eBPF:

       ```bash
       sudo systemctl restart newrelic-ebpf-agent
       sudo systemctl restart newrelic-ebpf-agent-client
       ```
  </Collapser>
</CollapserGroup>

## Veja os dados do eBPF Monitoramento de rede [#view-network-data]

Você pode visualizar os dados de monitoramento de rede do eBPF na interface do New Relic APM :

1. Acesse **[one.newrelic.com](https://one.newrelic.com) &gt; APM e serviços**.
2. Selecione a entidade eBPF desejada.
3. Na seção Monitor, clique em **Network Metrics**. A métrica da rede é exibida.

<Callout variant="tip">
  O agente eBPF gera automaticamente nomes de entidades de forma diferente dependendo do ambiente:

  * Em hosts ou Docker, esses nomes são uma combinação do nome do processo, seu diretório ou ID do contêiner e a porta de escuta. Por exemplo, `ruby:/home/ubuntu/app:[5678]` ou `java:f4aead533895:[8080]`.

  * No Kubernetes, esses nomes são derivados do nome do serviço, por exemplo, `mysql-database-service`.

  Atribuindo nome personalizado ao aplicativo:

  * Você pode atribuir um nome de sua escolha ao seu aplicativo definindo a variável de ambiente `NEW_RELIC_APP_NAME` para docker contêiner e aplicativo on-host.

  * O aplicativo nomeado aparecerá na interface do usuário do New Relic com o sufixo `-ebpf`.
</Callout>

<DocTiles>
  <DocTile title="Instalação eBPF Kubernetes" path="/docs/ebpf/k8s-installation/">
    Aprenda como configurar o agente New Relic eBPF para o seu cluster Kubernetes.
  </DocTile>

  <DocTile title="Instalação Linux eBPF" path="/docs/ebpf/linux-installation/">
    Aprenda como configurar o agente New Relic eBPF para seu host Linux.
  </DocTile>

  <DocTile title="resolução de problemas eBPF" path="/docs/ebpf/troubleshooting/no-ui-data/">
    Aprenda a solucionar problemas com o agente eBPF da New Relic.
  </DocTile>
</DocTiles>