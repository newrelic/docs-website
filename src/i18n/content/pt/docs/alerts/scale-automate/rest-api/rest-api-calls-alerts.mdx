---
title: Chamada REST de API para alerta
tags:
  - Alerts
  - REST API alerts
metaDescription: How to use the New Relic REST API Explorer to add and manage alerts.
freshnessValidatedDate: never
translationType: machine
---

Nossa API REST é a API original da New Relic para definir programaticamente as configurações de alerta da New Relic ([saiba mais sobre NerdGraph, nossa API preferida](/docs/alerts-applied-intelligence/new-relic-alerts/advanced-alerts/alerts-nerdgraph/nerdgraph-api-examples)).

O [REST API Explorer](/docs/apm/apis/api-explorer-v2/getting-started-new-relics-api-explorer) também inclui o formato de solicitação `curl`, o parâmetro disponível, os códigos de status de resposta potenciais e a estrutura de resposta JSON para cada uma das chamadas de API disponíveis. Você também pode [criar condições do alerta na interface](/docs/alerts/create-alert/create-alert-condition/alert-conditions/).

## Antes de usar a API REST [#before-start]

Antes de usar a API REST para gerenciar dados de alertas, leia o [documento Introdução ao uso de alertas com nosso NerdGraph API](/docs/alerts/scale-automate/nerdgraph/nerdgraph-api-examples/) .

Para alertas de infraestrutura, consulte [REST API para alertas de monitoramento de infraestrutura](/docs/infrastructure/new-relic-infrastructure/infrastructure-alert-conditions/rest-api-calls-new-relic-infrastructure-alerts/)

## Dados e funções disponíveis via REST API [#data]

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        <DNT>
          **REST API functions**
        </DNT>
      </th>

      <th>
        <DNT>
          **Comments**
        </DNT>
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        Ver dados da conta
      </td>

      <td>
        Em geral, qualquer [função](/docs/accounts-partnerships/accounts/account-setup/users-roles) pode usar um <InlinePopover type="userKey" />com funções <DNT>**GET &gt; List**</DNT> para <DNT>**view**</DNT> alertar dados. O proprietário da conta e os administradores podem usar sua chave de API.

        A saída da lista será [paginada](/docs/apis/rest-api-v2/requirements/pagination-api-output). As funções disponíveis incluem:

        * [Política de alertas](#policies-list)
        * Condições para [APM, monitoramento de navegador e monitoramento de celular](#conditions-list) ([algumas limitações se aplicam.](#excluded))
        * Condições para [serviços externos](#ext-conditions-list)
        * Condições para [monitoramento sintético](#synthetics-conditions)
        * Condições para [monitoramento sintético em vários locais](#multilocation-synthetics-conditions)
        * Condições para NRQL ([algumas limitações se aplicam).](#excluded)
        * [Evento](#events)
        * [Eventos de alerta](/docs/alerts/organize-alerts/specify-when-alerts-create-events/)
      </td>
    </tr>

    <tr>
      <td>
        Manter os dados da conta
      </td>

      <td>
        Você pode ter uma função `Owner` ou `Admin` em sua conta <DNT>**and**</DNT> uma [chave de usuário](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key) ou ter uma função personalizada que concede permissões para gerenciar alertas e uma chave de usuário para usar qualquer função de manutenção, incluindo <DNT>**POST &gt; Create**</DNT>, <DNT>**PUT &gt; Add**</DNT>, <DNT>**PUT &gt; Update**</DNT> e <DNT>**DELETE**</DNT>.
      </td>
    </tr>
  </tbody>
</table>

## Condições excluídas da API REST [#excluded]

Esses tipos de condições não possuem endpoint disponível na API:

* APM: transação da web percentil, condições de segmentação de rótulos e anomalia
* NRQL: anomalia

## Política de alertas [#alert-policies]

Essas funções de API incluem links para o API Explorer, onde você pode criar, excluir ou listar [políticas](https://api.newrelic.com/docs/#/Alerts%20Policies).

<Callout variant="important">
  Se a sua organização hospedar dados no data center da UE, verifique se você está usando os [endpoints de API adequados para contas da região da UE](/docs/using-new-relic/welcome-new-relic/getting-started/introduction-eu-region-data-center#endpoints).
</Callout>

<CollapserGroup>
  <Collapser id="policies-create" title="Crie novas políticas">
    Para adicionar novas políticas, use sua [chave de usuário](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key) e inclua estes dois valores na chamada de API:

    <table>
      <thead>
        <tr>
          <th style={{ width: "230px" }}>
            <DNT>
              **Required values**
            </DNT>
          </th>

          <th>
            <DNT>
              **Definition**
            </DNT>
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `incident_preference`
          </td>

          <td>
            Determina como os alertas irão [criar eventos de alerta](/docs/alerts/organize-alerts/specify-when-alerts-create-events/). Este deve ser um dos seguintes:

            * `PER_POLICY` (padrão): Agrupar por [política](/docs/alerts/organize-alerts/specify-when-alerts-create-events/#preference-policy).
            * `PER_CONDITION`: Agrupar por [condição](/docs/alerts/organize-alerts/specify-when-alerts-create-events/#preference-condition).
            * `PER_CONDITION_AND_TARGET`: Agrupar por [alvo e condição](/docs/alerts/organize-alerts/specify-when-alerts-create-events/#preference-target).
          </td>
        </tr>

        <tr>
          <td>
            [Política `name`](/docs/alerts/organize-alerts/create-edit-or-find-alert-policy/)
          </td>

          <td>
            A política `name` é obrigatória. Deixá-lo inalterado criará uma política chamada `string`.
          </td>
        </tr>
      </tbody>
    </table>

    <DNT>
      **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Policies/post_alerts_policies_json) &gt; Alerts Policies &gt; POST &gt; Create**
    </DNT>

    ```shell
    curl -X POST 'https://api.newrelic.com/v2/alerts_policies.json' \
         -H "$API_KEY" -i \
         -H 'Content-Type: application/json' \
         -d \
    '{
      "policy": {
        "incident_preference": "string",
        "name": "string"
      }
    }'
    ```
  </Collapser>

  <Collapser id="policies-update" title="Atualizar políticas">
    Use esta API para atualizar `name` e `incident_preference` de uma política existente. Você precisará da sua [chave de usuário](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key).

    <table>
      <thead>
        <tr>
          <th style={{ width: "230px" }}>
            <DNT>
              **Required values**
            </DNT>
          </th>

          <th>
            <DNT>
              **Definition**
            </DNT>
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `id`
          </td>

          <td>
            Para encontrar o ID de uma política, use uma destas opções:

            * Na interface do usuário: na página da interface do usuário de uma política, encontre o ID abaixo do nome da política.
            * Com a API: use a [API List Policy](/docs/alerts/rest-api-alerts/new-relic-alerts-rest-api/rest-api-calls-new-relic-alerts#policies-list).
          </td>
        </tr>

        <tr>
          <td>
            `incident_preference`
          </td>

          <td>
            Determina como os alertas irão [criar eventos de alerta](/docs/alerts/organize-alerts/specify-when-alerts-create-events/). Deve ser um dos seguintes:

            * `PER_POLICY` (padrão): Agrupar por [política](/docs/alerts/organize-alerts/specify-when-alerts-create-events/#preference-policy).
            * `PER_CONDITION`: Agrupar por [condição](/docs/alerts/organize-alerts/specify-when-alerts-create-events/#preference-condition).
            * `PER_CONDITION_AND_TARGET`: Agrupar por [condição e sinal](/docs/alerts/organize-alerts/specify-when-alerts-create-events/#preference-signal).
          </td>
        </tr>

        <tr>
          <td>
            [Política `name`](/docs/alerts/organize-alerts/create-edit-or-find-alert-policy/)
          </td>

          <td>
            A política `name`, se você não alterar o `name` o padrão será uma política chamada `string`.

            Para encontrar o nome exato de uma política, use a [API Listar políticas](/docs/alerts/rest-api-alerts/new-relic-alerts-rest-api/rest-api-calls-new-relic-alerts#policies-list).
          </td>
        </tr>
      </tbody>
    </table>

    <DNT>
      **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Policies/put_alerts_policies__policy_id__json) &gt; Alerts Policies &gt; PUT &gt; Update**
    </DNT>

    ```shell
    curl -X PUT 'https://api.newrelic.com/v2/alerts_policies/{id}.json' \
         -H "$API_KEY" -i \
         -H 'Content-Type: application/json' \
         -d \
    '{
      "policy": {
        "incident_preference": "string",
        "name": "string"
      }
    }'
    ```
  </Collapser>

  <Collapser id="policies-delete" title="Excluir políticas existentes">
    Para excluir uma política existente, use sua [chave de usuário](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key) e inclua `policy_id` (disponível em <DNT>**[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Policies/get_alerts_policies_json) &gt; Alerts Policies &gt; GET &gt; List**</DNT>) na chamada de API:

    <DNT>
      **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Policies/delete_alerts_policies__policy_id__json) &gt; Alerts Policies &gt; DELETE**
    </DNT>

    ```shell
    curl -X DELETE 'https://api.newrelic.com/v2/alerts_policies/$POLICY_ID.json' \
         -H "$API_KEY" -i
    ```
  </Collapser>

  <Collapser id="policies-list" title="Listar políticas existentes">
    Para visualizar uma lista de políticas existentes para sua conta, use sua [chave de usuário](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key) e inclua estes valores opcionais na chamada de API:

    * Filtro opcional de política `name`

    * Valor [de paginação](/docs/apis/rest-api-v2/requirements/pagination-api-output) opcional

      <DNT>
        **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Policies/get_alerts_policies_json) &gt; Alerts Policies &gt; GET &gt; List**
      </DNT>

      ```shell
      curl -X GET 'https://api.newrelic.com/v2/alerts_policies.json' \
           -H "$API_KEY" -i
      ```
  </Collapser>
</CollapserGroup>

## Condições para APM, navegador e celular [#conditions]

Essas funções da API incluem links para o API Explorer, onde você pode criar, atualizar, excluir ou listar [condições](/docs/alerts/create-alert/create-alert-condition/alert-conditions) de política. Estas chamadas são para condições com estes tipos de entidades:

* APM: Apps e transação principal
* Browser: Apps e transação principal
* mobile: aplicativos móveis

<DNT>**Exception:**</DNT> As seguintes condições de APM são <DNT>**not available**</DNT> destes endpoints da API:

* Rótulos de segmentação por condições (segmentação dinâmica)
* Condições de porcentagem de transação da web
* Condições de anomalia

<Callout variant="important">
  O API Explorer fornece informações sobre outros tipos de condições usando <DNT>**separate endpoints**</DNT>, incluindo [serviços externos](#ext-services-conditions) (APM e dispositivos móveis) e [monitoramento sintético](#synthetics-conditions). Considere todos os tipos de condição do alerta ao pesquisar ou atualizar. Se sua conta hospeda dados no data center da UE, certifique-se de usar os [endpoints de API adequados para contas da região da UE](/docs/using-new-relic/welcome-new-relic/getting-started/introduction-eu-region-data-center#endpoints).
</Callout>

<CollapserGroup>
  <Collapser id="conditions-create" title="Crie condições para políticas">
    Para adicionar condições às políticas, inclua estes valores na chamada de API:

    * Seu<InlinePopover type="userKey" />

    * O `policy_id` (disponível em <DNT>**[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Policies/get_alerts_policies_json) &gt; Alerts Policies &gt; GET &gt; List**</DNT>)

    * Os valores `condition` necessários na chamada de API (descritos na página do API Explorer e no [glossário da API condição do alerta](/docs/alerts/new-relic-alerts/rest-api-alerts/alerts-conditions-api-field-names))

      <DNT>
        **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Conditions/post_alerts_conditions_policies__policy_id__json) &gt; Alerts Conditions &gt; POST &gt; Create**
      </DNT>

      ```shell
      curl -X POST 'https://api.newrelic.com/v2/alerts_conditions/policies/$POLICY_ID.json' \
           -H "$API_KEY" -i \
           -H 'Content-Type: application/json' \
           -d \
      '{
        "condition": {
          "type": "string",
          "name": "string",
          "enabled": boolean,
          "entities": [
            integer
          ],
          "metric": "string",
          "gc_metric": "string",
          "condition_scope": "string",
          "violation_close_timer": integer,
          "runbook_url": "string",
          "terms": [
            {
              "duration": "string",
              "operator": "string",
              "priority": "string",
              "threshold": "string",
              "time_function": "string"
            }
          ],
          "user_defined": {
            "metric": "string",
            "value_function": "string"
          }
        }
      }'
      ```

      A resposta JSON retorna uma condição `id`, que será necessária para atualizar ou excluir a condição. Você também pode visualizar a condição `id` de <DNT>**[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Conditions/get_alerts_conditions_json) &gt; Alerts Conditions &gt; GET &gt; List**</DNT>.
  </Collapser>

  <Collapser id="conditions-update" title="Atualizar condições para políticas">
    Para atualizar as condições das políticas, inclua estes valores na chamada de API:

    * Sua [chave de usuário](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key)

    * O `id` da condição (disponível em <DNT>**[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Conditions/get_alerts_conditions_json) &gt; Alerts Conditions &gt; GET &gt; List**</DNT>)

    * Os valores `condition` necessários na chamada de API (descritos na página do API Explorer e no [glossário da API condição do alerta](/docs/alerts/new-relic-alerts/rest-api-alerts/alerts-conditions-api-field-names))

      <DNT>
        **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Conditions/put_alerts_conditions__condition_id__json) &gt; Alerts Conditions &gt; PUT &gt; Update**
      </DNT>

      ```shell
      curl -X PUT 'https://api.newrelic.com/v2/alerts_conditions/$CONDITION_ID.json' \
           -H "$API_KEY" -i \
           -H 'Content-Type: application/json' \
           -d \
      '{
        "condition": {
          "type": "string",
          "name": "string",
          "enabled": boolean,
          "entities": [
            integer
          ],
          "metric": "string",
          "metric": "string",
          "gc_metric": "string",
          "condition_scope": "string",
          "violation_close_timer": integer,
          "runbook_url": "string",
          "terms": [
            {
              "duration": "string",
              "operator": "string",
              "priority": "string",
              "threshold": "string",
              "time_function": "string"
            }
          ],
          "user_defined": {
            "metric": "string",
            "value_function": "string"
          }
        }
      }'
      ```
  </Collapser>

  <Collapser id="conditions-delete" title="Excluir condições das políticas">
    Para excluir condições das políticas, inclua estes valores na chamada de API:

    * Sua [chave de usuário](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key)

    * O `condition_id` (disponível em <DNT>**[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Conditions/get_alerts_conditions_json) &gt; Alerts Conditions &gt; GET &gt; List**</DNT>)

      <DNT>
        **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Conditions/delete_alerts_conditions__condition_id__json) &gt; Alerts Conditions &gt; DELETE &gt; Delete**
      </DNT>

      ```shell
      curl -X DELETE 'https://api.newrelic.com/v2/alerts_conditions/$CONDITION_ID.json' \
           -H "$API_KEY" -i
      ```
  </Collapser>

  <Collapser id="conditions-list" title="Listar as condições existentes para políticas">
    Para visualizar uma lista de condições existentes para sua política, use sua [chave de usuário](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key) e o [`policy_id`](#policies-list) associado na chamada de API.

    <DNT>
      **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Conditions/get_alerts_conditions_json) &gt; Alerts Conditions &gt; GET &gt; List**
    </DNT>

    ```shell
    curl -X GET 'https://api.newrelic.com/v2/alerts_conditions.json?policy_id=$POLICY_ID' \
         -H "$API_KEY" -i
    ```
  </Collapser>
</CollapserGroup>

## Condições para NRQL [#conditions-nrql]

Essas funções de API incluem links para o API Explorer, onde você pode criar, atualizar, excluir ou listar [condições](/docs/alerts/create-alert/create-alert-condition/alert-conditions) NRQL para suas políticas.

<DNT>**Exception:**</DNT> As condições de anomalia NRQL são <DNT>**not available**</DNT> deste endpoint.

<Callout variant="important">
  Se a sua organização hospedar dados no data center da UE, verifique se você está usando os [endpoints de API adequados para contas da região da UE](/docs/using-new-relic/welcome-new-relic/getting-started/introduction-eu-region-data-center#endpoints).
</Callout>

<CollapserGroup>
  <Collapser id="create-nrql-conditions" title="Crie condições NRQL para políticas">
    Recomendação: Devido à maneira como os dados NRQL são transmitidos, defina `aggregation_method` como `EVENT_FLOW` e use as configurações padrão de `60` para `aggregation_window` e `120` para `aggregation_delay`. `EVENT_FLOW` funciona na maioria dos casos de uso, mas para uma discussão sobre quais casos de uso funcionam melhor com `EVENT_TIMER`, consulte [Escolha seu método de agregação](/docs/alerts/create-alert/fine-tune/streaming-alerts-key-terms-concepts/#aggregation-methods).

    <DNT>
      **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20NRQL%20Conditions/post_alerts_nrql_conditions_policies__policy_id__json) &gt; Alerts NRQL Conditions &gt; POST &gt; Create**
    </DNT>

    Para criar condições NRQL para políticas:

    ```shell
    curl -X POST 'https://api.newrelic.com/v2/alerts_nrql_conditions/policies/$POLICY_ID.json' \
         -H "$API_KEY" -i \
         -H 'Content-Type: application/json' \
         -d \
    '{
      "nrql_condition": {
        "type": "string",
        "name": "string",
        "runbook_url": "string",
        "enabled": boolean,
        "terms": [
          {
            "duration": "string",
            "operator": "string",
            "priority": "string",
            "threshold": "string",
            "time_function": "string"
          }
        ],
        "value_function": "string",
        "nrql": {
          "query": "string"
        },
        "signal": {
          "aggregation_window": "string",
          "slide_by": "integer",
          "aggregation_method": "string",
          "aggregation_delay": integer,
          "aggregation_timer": integer,
          "fill_option": "string",
          "fill_value": "string"
        },
        "expiration": {
          "expiration_duration": "string",
          "open_violation_on_expiration": boolean,
          "close_violations_on_expiration": boolean
        }
      }
    }'
    ```

    Se você omitir `type` ou defini-lo como `static`, o padrão será o alerta NRQL padrão.

    <Callout variant="important">
      clientes nos [planos de preços de computadores Advanced e Core](https://newrelic.com/pricing/compute#pricing_plan-compute) podem incorrer em custos adicionais de CCU ao utilizar agregação de janela deslizante. Embora esse método melhore a análise de dados ao suavizar flutuações, seu uso pode levar ao aumento de custos em relação a outros métodos. Para mais detalhes, consulte a [seção de preços para janelas de correr](/docs/nrql/using-nrql/create-smoother-charts-sliding-windows/#pricing). Para determinar se você está nos planos de preços de computador Advanced ou Core, consulte seu pedido.
    </Callout>
  </Collapser>

  <Collapser id="update-nrql-conditions" title="Atualizar condições NRQL para políticas">
    Para atualizar as condições NRQL para políticas, inclua estes valores na chamada de API:

    * Sua [chave de usuário](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key)

    * A condição `id` (disponível no [API Explorer <Icon name="fe-external-link" />](https://api.newrelic.com/docs/#/Alerts%20NRQL%20Conditions/get_alerts_nrql_conditions_json) <DNT>**Alerts NRQL Conditions &gt; GET &gt; List**</DNT>)

    * Os valores `condition` necessários na chamada de API (descritos na página do API Explorer e no [glossário da API condição do alerta](/docs/alerts/new-relic-alerts/rest-api-alerts/alerts-conditions-api-field-names))

      <DNT>
        **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20NRQL%20Conditions/put_alerts_nrql_conditions__condition_id__json) &gt; Alerts NRQL Conditions &gt; PUT &gt; Update**
      </DNT>

      ```shell
      curl -X PUT 'https://api.newrelic.com/v2/alerts_nrql_conditions/$CONDITION_ID.json' \
           -H "$API_KEY" -i \
           -H 'Content-Type: application/json' \
           -d \
      '{
        "nrql_condition": {
          "name": "string",
          "runbook_url": "string",
          "enabled": boolean,
          "terms": [
            {
              "duration": "string",
              "operator": "string",
              "priority": "string",
              "threshold": "string",
              "time_function": "string"
            }
          ],
          "value_function": "string",
          "nrql": {
            "query": "string"
          }
        }
      }'
      ```
  </Collapser>

  <Collapser id="delete-nrql-conditions" title="Excluir condições NRQL para políticas">
    Para excluir condições NRQL das políticas, inclua estes valores na chamada de API:

    * Sua [chave de usuário](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key)

    * A condição `id` (disponível no [API Explorer <Icon name="fe-external-link" />](https://api.newrelic.com/docs/#/Alerts%20NRQL%20Conditions/get_alerts_nrql_conditions_json) <DNT>**Alerts NRQL Conditions &gt; GET &gt; List**</DNT>)

      <DNT>
        **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20NRQL%20Conditions/delete_alerts_nrql_conditions__condition_id__json) &gt; Alerts NRQL Conditions &gt; DELETE &gt; Delete**
      </DNT>

      ```shell
      curl -X DELETE 'https://api.newrelic.com/v2/alerts_nrql_conditions/$CONDITION_ID.json' \
           -H "$API_KEY" -i
      ```
  </Collapser>

  <Collapser id="list-nrql-conditions" title="Listar as condições NRQL existentes para políticas">
    Para visualizar uma lista de condições existentes para sua política de alertas, use sua chave de usuário e o [`policy_id`](#policies-list) associado na chamada de API.

    <DNT>
      **\[API Explorer][https://api.newrelic.com/docs/#/Alerts%20NRQL%20Conditions/get\_alerts\_nrql\_conditions\_json](https://api.newrelic.com/docs/#/Alerts%20NRQL%20Conditions/get_alerts_nrql_conditions_json)) &gt; Alerts NRQL Conditions &gt; GET &gt; List**
    </DNT>

    ```shell
    curl -X GET 'https://api.newrelic.com/v2/alerts_nrql_conditions.json' \
         -H "$API_KEY" -i \
         -d 'policy_id=$POLICY_ID'
    ```
  </Collapser>
</CollapserGroup>

## Condições para serviços externos [#ext-services-conditions]

Essas funções da API incluem links para o API Explorer, onde você pode criar, atualizar, excluir ou listar [condições](/docs/alerts/create-alert/create-alert-condition/alert-conditions) de política. Essas chamadas são para condições de serviços externos. As chamadas de API podem ser usadas com <InlinePopover type="apm" />e aplicativos de monitoramento mobile.

<Callout variant="important">
  Se a sua organização hospedar dados no data center da UE, verifique se você está usando os [endpoints de API adequados para contas da região da UE](/docs/using-new-relic/welcome-new-relic/getting-started/introduction-eu-region-data-center#endpoints).
</Callout>

<CollapserGroup>
  <Collapser id="ext-conditions-create" title="Serviços externos: Crie condições para políticas">
    Para adicionar condições de serviços externos a políticas que possuem aplicativos APM ou monitoramento de Mobile, inclua estes valores na chamada de API:

    * Sua [chave de usuário](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key)

    * O `policy_id` (disponível em <DNT>**[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Policies/get_alerts_policies_json) &gt; Alerts Policies &gt; GET &gt; List**</DNT>)

    * Os valores `external_service_condition` necessários na chamada de API (descritos na página do API Explorer e no [glossário da API condição do alerta](/docs/alerts/new-relic-alerts/rest-api-alerts/alerts-conditions-api-field-names))

      <DNT>
        **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20External%20Service%20Conditions/post_alerts_external_service_conditions_policies__policy_id__json) &gt; Alerts External Service Conditions &gt; POST &gt; Create**
      </DNT>

      ```shell
      curl -X POST 'https://api.newrelic.com/v2/alerts_external_service_conditions/policies/$POLICY_ID.json' \
           -H "$API_KEY" -i \
           -H 'Content-Type: application/json' \
           -d \
      '{
        "external_service_condition": {
          "type": "string",
          "name": "string",
          "enabled": boolean,
          "entities": [
            integer
          ],
          "external_service_url": "string",
          "metric": "string",
          "runbook_url": "string",
          "terms": [
            {
              "duration": "string",
              "operator": "string",
              "priority": "string",
              "threshold": "string",
              "time_function": "string"
            }
          ]
        }
      }'
      ```

      A resposta JSON retorna uma condição `id`, que será necessária para atualizar ou excluir a condição. Você também pode visualizar a condição `id` de <DNT>**[API Explorer](https://api.newrelic.com/docs/#/Alerts%20External%20Service%20Conditions/get_alerts_external_service_conditions_json) &gt; Alerts External Service Conditions &gt; GET &gt; List**</DNT>.
  </Collapser>

  <Collapser id="ext-conditions-update" title="Serviços externos: atualizar condições para políticas">
    Para atualizar condições de serviços externos para políticas que possuem aplicativos APM ou monitoramento de Mobile, inclua estes valores na chamada de API:

    * Sua [chave de usuário](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key)

    * A condição de serviço externo `id` (disponível em <DNT>**[API Explorer](https://api.newrelic.com/docs/#/Alerts%20External%20Service%20Conditions/get_alerts_external_service_conditions_json) &gt; Alerts External Service Conditions &gt; GET &gt; List**</DNT>)

    * Os valores `external_service_condition` necessários na chamada de API (descritos na página do API Explorer e no [glossário da API condição do alerta](/docs/alerts/new-relic-alerts/rest-api-alerts/alerts-conditions-api-field-names))

      <DNT>
        **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20External%20Service%20Conditions/put_alerts_external_service_conditions__condition_id__json) &gt; Alerts External Service Conditions &gt; PUT &gt; Update**
      </DNT>

      ```shell
      curl -X PUT 'https://api.newrelic.com/v2/alerts_external_service_conditions/$CONDITION_ID.json' \
           -H "$API_KEY" -i \
           -H 'Content-Type: application/json' \
           -d \
      '{
        "external_service_condition": {
          "type": "string",
          "name": "string",
          "enabled": boolean,
          "entities": [
            integer
          ],
          "external_service_url": "string",
          "metric": "string",
          "runbook_url": "string",
          "terms": [
            {
              "duration": "string",
              "operator": "string",
              "priority": "string",
              "threshold": "string",
              "time_function": "string"
            }
          ]
        }
      }'
      ```
  </Collapser>

  <Collapser id="ext-conditions-delete" title="Serviços externos: excluir condições das políticas">
    Para excluir condições de serviços externos de políticas com APM ou aplicativos de monitoramento de dispositivos móveis, inclua estes valores na chamada de API:

    * Sua [chave de usuário](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key)

    * O `condition_id` (disponível em <DNT>**[API Explorer](https://api.newrelic.com/docs/#/Alerts%20External%20Service%20Conditions/get_alerts_external_service_conditions_json) &gt; Alerts External Service Conditions &gt; GET &gt; List**</DNT>)

      <DNT>
        **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20External%20Service%20Conditions/delete_alerts_external_service_conditions__condition_id__json) &gt; Alerts External Service Conditions &gt; DELETE**
      </DNT>

      ```shell
      curl -X DELETE 'https://api.newrelic.com/v2/alerts_external_service_conditions/$CONDITION_ID.json' \
           -H "$API_KEY" -i
      ```
  </Collapser>

  <Collapser id="ext-conditions-list" title="Serviços externos: listar as condições existentes para políticas">
    Para visualizar uma lista de condições existentes para políticas com aplicativos de serviço externos (APM ou monitoramento de Mobile), use sua [chave de usuário](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key) e o [`policy_id`](#policies-list) associado na chamada de API.

    <DNT>
      **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20External%20Service%20Conditions/get_alerts_external_service_conditions_json) &gt; Alerts External Service Conditions &gt; GET &gt; List**
    </DNT>

    ```shell
    curl -X GET 'https://api.newrelic.com/v2/alerts_external_service_conditions.json' \
         -H "$API_KEY" -i \
         -d 'policy_id=$POLICY_ID'
    ```
  </Collapser>
</CollapserGroup>

## Condições para monitoramento sintético [#synthetics-conditions]

Essas funções de API incluem links para o API Explorer, onde você pode criar, atualizar, excluir ou listar [condições](/docs/alerts/create-alert/create-alert-condition/alert-conditions) para suas políticas de alerta. As chamadas de API podem ser usadas com o monitoramento sintético.

<CollapserGroup>
  <Collapser id="synthetics-conditions-create" title="Monitoramento sintético: Criar condições para políticas">
    Para adicionar condições às políticas para monitoramento sintético, inclua estes valores na chamada de API:

    * Sua [chave de usuário](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key)

    * O `policy_id` (disponível em <DNT>**[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Policies/get_alerts_policies_json) &gt; Alerts Policies &gt; GET &gt; List**</DNT>)

    * Os valores `synthetics_condition` necessários na chamada de API (descritos na página do API Explorer e no [glossário da API condição do alerta](/docs/alerts/new-relic-alerts/rest-api-alerts/alerts-conditions-api-field-names))

      <DNT>
        **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Synthetics%20Conditions/post_alerts_synthetics_conditions_policies__policy_id__json) &gt; Alerts Synthetics Conditions &gt; POST &gt; Create**
      </DNT>

      ```shell
      curl -X POST 'https://api.newrelic.com/v2/alerts_synthetics_conditions/policies/$POLICY_ID.json' \
           -H "$API_KEY" -i \
           -H 'Content-Type: application/json' \
           -d \
      '{
        "synthetics_condition": {
          "name": "string",
          "monitor_id": "string",
          "runbook_url": "string",
          "enabled": boolean
        }
      }'
      ```

      A resposta JSON retorna uma condição `id`, que será necessária para atualizar ou excluir a condição. Você também pode visualizar a condição `id` de <DNT>**[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Synthetics%20Conditions/get_alerts_synthetics_conditions_json) &gt; Alerts Synthetics Conditions &gt; GET &gt; List**</DNT>.
  </Collapser>

  <Collapser id="conditions-update" title="Atualizar condições para políticas">
    Para atualizar as condições das políticas, inclua estes valores na chamada de API:

    * Sua [chave de usuário](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key)

    * O `id` da condição (disponível em <DNT>**[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Conditions/get_alerts_conditions_json) &gt; Alerts Conditions &gt; GET &gt; List**</DNT>)

    * Os valores `condition` necessários na chamada de API (descritos na página do API Explorer e no [glossário da API condição do alerta](/docs/alerts/new-relic-alerts/rest-api-alerts/alerts-conditions-api-field-names))

      <DNT>
        **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Conditions/put_alerts_conditions__condition_id__json) &gt; Alerts Conditions &gt; PUT &gt; Update**
      </DNT>

      ```shell
      curl -X PUT 'https://api.newrelic.com/v2/alerts_conditions/$CONDITION_ID.json' \
           -H "X-Api-Key:$API_KEY" -i \
           -H "$API_KEY" -i \
           -H 'Content-Type: application/json' \
           -d \
      '{
        "condition": {
          "type": "string",
          "name": "string",
          "enabled": boolean,
          "entities": [
            integer
          ],
          "metric": "string",
          "metric": "string",
          "gc_metric": "string",
          "condition_scope": "string",
          "violation_close_timer": integer,
          "runbook_url": "string",
          "terms": [
            {
              "duration": "string",
              "operator": "string",
              "priority": "string",
              "threshold": "string",
              "time_function": "string"
            }
          ],
          "user_defined": {
            "metric": "string",
            "value_function": "string"
          }
        }
      }'
      ```
  </Collapser>

  <Collapser id="synthetics-conditions-delete" title="Monitoramento sintético: Excluir condições das políticas">
    Para excluir condições de política para monitoramento sintético, inclua estes valores na chamada de API:

    * Sua [chave de usuário](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key)

    * O `condition_id` (disponível em <DNT>**[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Synthetics%20Conditions/get_alerts_synthetics_conditions_json) &gt; Alerts Synthetics Conditions &gt; GET &gt; List**</DNT>)

      <DNT>
        **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Synthetics%20Conditions/delete_alerts_synthetics_conditions__condition_id__json) &gt; Alerts Synthetics Conditions &gt; DELETE**
      </DNT>

      ```shell
      curl -X DELETE 'https://api.newrelic.com/v2/alerts_synthetics_conditions/$CONDITION_ID.json' \
           -H "$API_KEY" -i
      ```
  </Collapser>

  <Collapser id="synthetics-conditions-list" title="Monitoramento sintético: Listar condições existentes para políticas">
    Para visualizar uma lista de condições de política existentes para Sintético monitoramento, use sua [chave de usuário](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key) e o [`policy_id`](#policies-list) associado na chamada de API.

    <DNT>
      **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Synthetics%20Conditions/get_alerts_synthetics_conditions_json) &gt; Alerts Synthetics Conditions &gt; GET &gt; List**
    </DNT>

    ```shell
    curl -X GET 'https://api.newrelic.com/v2/alerts_synthetics_conditions.json' \
         -H "$API_KEY" -i \
         -d 'policy_id=$POLICY_ID'
    ```
  </Collapser>
</CollapserGroup>

## Condições de vários locais para monitoramento sintético [#multilocation-synthetics-conditions]

Essas funções de API incluem links para o API Explorer, onde você pode criar, atualizar, excluir ou listar [condições](/docs/alerts/create-alert/create-alert-condition/alert-conditions) para suas políticas de alerta. As chamadas de API podem ser usadas para condições de múltiplos locais com monitoramento sintético. Antes de criar ou atualizar uma condição, leia as [regras para condições de alerta de vários locais](/docs/alerts-applied-intelligence/new-relic-alerts/advanced-alerts/advanced-techniques/multi-location-synthetic-monitoring-alert-conditions/#rules).

<CollapserGroup>
  <Collapser id="multilocation-synthetics-conditions-create" title="Multilocalização Sintético: Crie condições para políticas">
    Para adicionar condições às políticas para monitoramento sintético de vários locais, inclua estes valores na chamada de API:

    * Sua [chave de usuário](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key)

    * O `policy_id` (disponível em <DNT>**[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Policies/get_alerts_policies_json) &gt; Alerts Policies &gt; GET &gt; List**</DNT>)

    * Os valores `location_failure_condition` necessários na chamada de API (descritos na página do API Explorer e no [glossário da API condição do alerta](/docs/alerts/new-relic-alerts/rest-api-alerts/alerts-conditions-api-field-names))

      <DNT>
        **[API Explorer](https://api.newrelic.com/docs/#/Deprecation%20Notice%20-%20Alerts%20Location%20Failure%20Conditions/post_alerts_location_failure_conditions_policies__policy_id__json) &gt; Alerts Location Failure Conditions &gt; POST &gt; Create**
      </DNT>

      ```shell
      curl -X POST 'https://api.newrelic.com/v2/alerts_location_failure_conditions/policies/$POLICY_ID.json' \
           -H "$API_KEY" -i \
           -H 'Content-Type: application/json' \
           -d \
      '{
        "location_failure_condition": {
          "name": "string",
          "runbook_url": "string",
          "enabled": boolean,
          "entities":
          [
            "string"
          ],
          "terms": [
            {
              "priority": "string",
              "threshold": integer,
            }
          ],
          "violation_time_limit_seconds": integer
        }
      }'
      ```

      A resposta JSON retorna uma condição `id`, que será necessária para atualizar ou excluir a condição. Você também pode visualizar a condição `id` de <DNT>**[API Explorer](https://api.newrelic.com/docs/#/Deprecation%20Notice%20-%20Alerts%20Location%20Failure%20Conditions/get_alerts_location_failure_conditions_policies__policy_id__json) &gt; Alerts Location Failure Conditions &gt; GET &gt; List**</DNT>.
  </Collapser>

  <Collapser id="multilocation-synthetics-conditions-update" title="Multi-location Sintético: Atualizar condições para políticas">
    Para atualizar as condições da política para monitoramento sintético de vários locais, inclua estes valores na chamada de API:

    * Sua [chave de usuário](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key)

    * A condição `id` (disponível em <DNT>**[API Explorer](https://api.newrelic.com/docs/#/Deprecation%20Notice%20-%20Alerts%20Location%20Failure%20Conditions/get_alerts_location_failure_conditions_policies__policy_id__json) &gt; Alerts Location Failure Conditions &gt; GET &gt; List**</DNT>)

    * Os valores `location_failure_condition` necessários na chamada de API (descritos na página do API Explorer e no [glossário da API condição do alerta](/docs/alerts/new-relic-alerts/rest-api-alerts/alerts-conditions-api-field-names))

      <DNT>
        **[API Explorer](https://api.newrelic.com/docs/#/Deprecation%20Notice%20-%20Alerts%20Location%20Failure%20Conditions/put_alerts_location_failure_conditions__condition_id__json) &gt; Alerts Location Failure Conditions &gt; PUT &gt; Update**
      </DNT>

      ```shell
      curl -X PUT 'https://api.newrelic.com/v2/alerts_location_failure_conditions/$CONDITION_ID.json' \
           -H "$API_KEY" -i \
           -H 'Content-Type: application/json' \
           -d \
      '{
        "location_failure_condition": {
          "name": "string",
          "runbook_url": "string",
          "enabled": boolean,
          "entities":
          [
            "string"
          ],
          "terms": [
            {
              "priority": "string",
              "threshold": integer,
            }
          ],
          "violation_time_limit_seconds": integer
        }
      }'
      ```
  </Collapser>

  <Collapser id="multilocation-synthetics-conditions-delete" title="Multi-location Sintético: Excluir condições para políticas">
    Para excluir condições de política para monitoramento sintético de vários locais, inclua estes valores na chamada de API:

    * Sua [chave de usuário](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key)

    * O `condition_id` (disponível em <DNT>**[API Explorer](https://api.newrelic.com/docs/#/Deprecation%20Notice%20-%20Alerts%20Location%20Failure%20Conditions/get_alerts_location_failure_conditions_policies__policy_id__json) &gt; Alerts Location Failure Conditions &gt; GET &gt; List**</DNT>)

      <DNT>
        **[API Explorer](https://api.newrelic.com/docs/#/Deprecation%20Notice%20-%20Alerts%20Location%20Failure%20Conditions/delete_alerts_location_failure_conditions__condition_id__json) &gt; Alerts Location Failure Conditions &gt; DELETE**
      </DNT>

      ```shell
      curl -X DELETE 'https://api.newrelic.com/v2/alerts_location_failure_conditions/$CONDITION_ID.json' \
           -H "$API_KEY" -i
      ```
  </Collapser>

  <Collapser id="multilocation-synthetics-conditions-list" title="Multilocalização Sintético: Liste as condições existentes para apólices">
    Para visualizar uma lista de condições de política existentes para monitoramento Sintético multilocal, use sua [chave de usuário](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key) e o [`policy_id`](#policies-list) associado na chamada de API.

    <DNT>
      **[API Explorer](https://api.newrelic.com/docs/#/Deprecation%20Notice%20-%20Alerts%20Location%20Failure%20Conditions/get_alerts_location_failure_conditions_policies__policy_id__json) &gt; Alerts Location Failure Conditions &gt; GET &gt; List**
    </DNT>

    ```shell
    curl -X GET 'https://api.newrelic.com/v2/alerts_location_failure_conditions/policies/$POLICY_ID.json' \
         -H "$API_KEY" -i
    ```
  </Collapser>
</CollapserGroup>

## Condições da entidade de alerta [#alert-entity-conditions]

Estas funções da API incluem links para o API Explorer, onde você pode listar, adicionar e remover entidades nas condições da sua política de alertas.

<Callout variant="important">
  Se a sua organização hospedar dados no data center da UE, verifique se você está usando os [endpoints de API adequados para contas da região da UE](/docs/using-new-relic/welcome-new-relic/getting-started/introduction-eu-region-data-center#endpoints).
</Callout>

<CollapserGroup>
  <Collapser id="list-condition-by-entity" title="Listar condição por entidade">
    Para visualizar as [condições](/docs/alerts/overview#alert-condition) de uma [entidade](/docs/alerts/overview#alert-entity) que se aplicam a uma entidade no APM, browser, mobile ou transações-chave, inclua estes valores na chamada de API:

    * Sua [chave de usuário.](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key)

    * O `entity_id` Esta é a [entidade (alvo do alerta)](/docs/alerts/overview#alert-entity) específica a ser monitorada.

    * O `entity_type`, que deve ser um dos seguintes:

      * `Application`
      * `BrowserApplication`
      * `MobileApplication`
      * `KeyTransaction`

      <DNT>
        **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Entity%20Conditions/get_alerts_entity_conditions__entity_id__json) &gt; Alerts Entity Conditions &gt; GET &gt; list**
      </DNT>

      ```shell
      curl -X GET 'https://api.newrelic.com/v2/alerts_entity_conditions/$ENTITY_ID.json' \
           -H "$API_KEY" -i \
           -G -d 'entity_type=$ENTITY_TYPE'
      ```
  </Collapser>

  <Collapser id="add-entity" title="Adicionar uma entidade a uma condição">
    Para adicionar uma [entidade](/docs/alerts/overview#alert-entity) a uma condição, inclua estes valores na chamada de API:

    * Sua [chave de usuário](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key)

    * O `entity_id` Esta é a [entidade (alvo do alerta)](/docs/alerts/overview#alert-entity) a ser monitorada. É o ID numérico da aplicação APM, aplicação de navegador, transação chave ou aplicativo móvel.

    * O `condition_id` (disponível em <DNT>**[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Conditions/get_alerts_conditions_json) &gt; Alerts Conditions &gt; GET &gt; List**</DNT>)

    * O `entity_type`, que deve ser um dos seguintes:

      * `Application`
      * `BrowserApplication`
      * `MobileApplication`
      * `KeyTransaction`

      <DNT>
        **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Conditions/get_alerts_conditions_json) &gt; Alerts Entity Conditions &gt; PUT &gt; Add**
      </DNT>

      ```shell
      curl -X PUT 'https://api.newrelic.com/v2/alerts_entity_conditions/$ENTITY_ID.json' \
           -H "$API_KEY" -i \
           -H 'Content-Type: application/json' \
           -G -d 'entity_type=$ENTITY_TYPE&condition_id=$CONDITION_ID'
      ```
  </Collapser>

  <Collapser id="remove_entity" title="Remover uma entidade de uma condição">
    Para remover uma [entidade](/docs/alerts/overview#alert-entity) monitorada de uma condição, inclua estes valores na chamada de API:

    * Sua [chave de usuário](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key)

    * O `entity_id` Esta é a [entidade (alvo do alerta)](/docs/alerts/overview#alert-entity) monitorada específica a ser removida. É o ID numérico da aplicação APM, aplicação de navegador, transação chave ou aplicativo móvel.

    * O `condition_id` (disponível em <DNT>**[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Conditions/get_alerts_conditions_json) &gt; Alerts Conditions &gt; GET &gt; List**</DNT>)

    * O `entity_type`, que deve ser um dos seguintes:

      * `Application`
      * `BrowserApplication`
      * `MobileApplication`
      * `KeyTransaction`

      <DNT>
        **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Entity%20Conditions/delete_alerts_entity_conditions__entity_id__json) &gt; Alerts Entity Conditions &gt; DELETE &gt; Remove**
      </DNT>

      ```shell
      curl -X DELETE 'https://api.newrelic.com/v2/alerts_entity_conditions/$ENTITY_ID.json' \
           -H "$API_KEY" -i \
           -G -d 'entity_type=$ENTITY_ID&condition_id=$CONDITION_ID'
      ```
  </Collapser>
</CollapserGroup>