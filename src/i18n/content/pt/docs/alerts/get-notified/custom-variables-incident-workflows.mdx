---
title: Variáveis de fluxo de trabalho
tags:
  - Alerts
  - workflows
  - Enrichments
  - Issues
metaDescription: 'For New Relic alerts, explanations of the variables used for workflows.'
freshnessValidatedDate: never
translationType: machine
---

Uma explicação das variáveis usadas para New Relic alertas [de fluxo de trabalho](/docs/alerts-applied-intelligence/applied-intelligence/incident-workflows/incident-workflows).

<img
  title="Alerts workflow variables"
  alt="Alerts workflow variables"
  src="/images/alerts_screenshot-crop_workflow-variables.webp"
/>

<figcaption>
  Ao criar um fluxo de trabalho, você pode usar variáveis para a) controlar quais tipos de problemas gerarão uma notificação eb) qual será o conteúdo de uma carga de notificação. Esta captura de tela mostra a seção de carga de notificação.
</figcaption>

## Variáveis [#variables]

Aqui estão as variáveis do fluxo de trabalho e suas descrições:

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        Chave (primeira palavra usada para agrupamento)
      </th>

      <th>
        Nome de exibição (primeira palavra usada para agrupamento)
      </th>

      <th>
        Descrição
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `accumulations.conditionDescription`
      </td>

      <td>
        conditionDescription
      </td>

      <td>
        A descrição do incidente personalizado da condição.
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.conditionFamilyId`
      </td>

      <td>
        conditionFamilyId
      </td>

      <td>
        O ID da condição de detecção de incidente que gerou o incidente.
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.conditionName`
      </td>

      <td>
        Condição do alerta nomes
      </td>

      <td>
        Condição violada da New Relic.
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.conditionProduct`
      </td>

      <td>
        Condição do alerta produtos
      </td>

      <td>
        Tipo de condição New Relic.
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.deepLinkUrl`
      </td>

      <td>
        URL de retorno de chamada do incidente
      </td>

      <td>
        Um link direto para o retorno de chamada do incidente relevante.
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.evaluation.metricValueFunction`
      </td>

      <td>
        Função métrica personalizada de valor
      </td>

      <td>
        Função métrica personalizada de valor.
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.evaluation.name`
      </td>

      <td>
        <InlinePopover type="apm"/>nome da métrica de condição
      </td>

      <td>
        <InlinePopover type="apm"/>nome da métrica de condição
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.nrqlQuery`
      </td>

      <td>
        Consulta NRQL
      </td>

      <td>
        Consulta NRQL da condição.
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.origins`
      </td>

      <td>
        Origens do problema
      </td>

      <td>
        Fonte(s) da New Relic ou de terceiros que criaram o(s) incidente(s).
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.policyName`
      </td>

      <td>
        Nomes de política de alertas
      </td>

      <td>
        Nome da política de detecção de incidentes que gerou o incidente.
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.runbookUrl`
      </td>

      <td>
        URL do runbook
      </td>

      <td>
        Uma lista de URLs de runbook.
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.sources`
      </td>

      <td>
        Fontes de problemas
      </td>

      <td>
        O(s) sistema(s) que relata(m) o(s) incidente(s).
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.tag.account`
      </td>

      <td>
        Contas New Relic
      </td>

      <td>
        Contas New Relic.
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.tag.affectedService`
      </td>

      <td>
        Serviço afetado
      </td>

      <td>
        Uma lista de serviços afetados.
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.tag.assignmentGroup`
      </td>

      <td>
        Grupo de tarefas
      </td>

      <td>
        Uma lista de grupos de atribuição.
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.tag.causeService`
      </td>

      <td>
        Causar serviço
      </td>

      <td>
        Uma lista dos serviços de causa.
      </td>
    </tr>

    <tr>
      <td>
        `acknowledgedBy`
      </td>

      <td>
        Reconhecido por
      </td>

      <td>
        O usuário que reconheceu o problema.
      </td>
    </tr>

    <tr>
      <td>
        `activatedAt`
      </td>

      <td>
        Problema ativado em
      </td>

      <td>
        Timestamp da ativação do problema.
      </td>
    </tr>

    <tr>
      <td>
        `annotations.description`
      </td>

      <td>
        Descrição do problema
      </td>

      <td>
        Lista de todas as descrições de incidentes.
      </td>
    </tr>

    <tr>
      <td>
        `annotations.title`
      </td>

      <td>
        Título do problema
      </td>

      <td>
        Lista de todos os títulos de incidentes.
      </td>
    </tr>

    <tr>
      <td>
        `annotations.wildcard`
      </td>

      <td>
        Facetas de alerta
      </td>

      <td>
        Facetas de alerta.
      </td>
    </tr>

    <tr>
      <td>
        `closedBy`
      </td>

      <td>
        Fechado por
      </td>

      <td>
        O ID do usuário que encerrou o problema.
      </td>
    </tr>

    <tr>
      <td>
        `closedAt`
      </td>

      <td>
        Issue ClosedAt
      </td>

      <td>
        Timestamp do encerramento do problema. Nulo se o problema não estiver resolvido.
      </td>
    </tr>

    <tr>
      <td>
        `closedIncidentsCount`
      </td>

      <td>
        Incidente de contagem encerrada
      </td>

      <td>
        O número total de incidentes fechados sobre este assunto.
      </td>
    </tr>

    <tr>
      <td>
        `createdAt`
      </td>

      <td>
        Issue CreatedAt
      </td>

      <td>
        Timestamp da criação do problema.
      </td>
    </tr>

    <tr>
      <td>
        `dataMLModules.components`
      </td>

      <td>
        Componentes de aprendizado de máquina
      </td>

      <td>
        Uma lista de componentes de aprendizado de máquina de alertas da New Relic.
      </td>
    </tr>

    <tr>
      <td>
        `dataMLModules.goldenSignals`
      </td>

      <td>
        Sinais clássicos de aprendizado de máquina
      </td>

      <td>
        Uma lista de alertas de aprendizado de máquina New Relic sinais clássicos.
      </td>
    </tr>

    <tr>
      <td>
        `dataMLModules.suggestedResponders`
      </td>

      <td>
        Resposta sugerida por aprendizado de máquina
      </td>

      <td>
        (Descontinuado) Uma lista de respondentes sugeridos pelo aprendizado de máquina de alertas da New Relic.
      </td>
    </tr>

    <tr>
      <td>
        `entitiesData.entities`
      </td>

      <td>
        Dados da entidade impactada
      </td>

      <td>
        Uma lista de objetos que descreve o nome, ID, tipo e tipo da entidade afetada.
      </td>
    </tr>

    <tr>
      <td>
        `entitiesData.ids`
      </td>

      <td>
        IDs da entidade afetada
      </td>

      <td>
        Um conjunto de todos os IDs da entidade impactada.
      </td>
    </tr>

    <tr>
      <td>
        `entitiesData.kinds`
      </td>

      <td>
        Tipos de entidades impactadas
      </td>

      <td>
        Um conjunto de todos os tipos de entidades impactadas.
      </td>
    </tr>

    <tr>
      <td>
        `entitiesData.names`
      </td>

      <td>
        Nomes de entidades impactadas
      </td>

      <td>
        Um conjunto de todos os nomes de entidades impactadas.
      </td>
    </tr>

    <tr>
      <td>
        `entitiesData.types`
      </td>

      <td>
        Tipos de entidades impactadas
      </td>

      <td>
        Um conjunto de todos os tipos de entidade impactados.
      </td>
    </tr>

    <tr>
      <td>
        `impactedEntitiesCount`
      </td>

      <td>
        Contagem de entidades impactadas
      </td>

      <td>
        O número de entidades impactadas para esta questão.
      </td>
    </tr>

    <tr>
      <td>
        `incidentIds`
      </td>

      <td>
        IDs do incidente
      </td>

      <td>
        Uma lista de todos os incidentes agregados do problema.
      </td>
    </tr>

    <tr>
      <td>
        `isCorrelated`
      </td>

      <td>
        O problema está correlacionado
      </td>

      <td>
        Se o problema estiver correlacionado (`true`, `false`).
      </td>
    </tr>

    <tr>
      <td>
        `isAcknowledged`
      </td>

      <td>
        O problema foi reconhecido
      </td>

      <td>
        Se o problema for reconhecido (`true`, `false`).
      </td>
    </tr>

    <tr>
      <td>
        `issueAckUrl`
      </td>

      <td>
        Emitir URL de reconhecimento
      </td>

      <td>
        Um link direto para reconhecer o problema.
      </td>
    </tr>

    <tr>
      <td>
        `issueCloseUrl`
      </td>

      <td>
        Emitir URL de fechamento
      </td>

      <td>
        Um link direto para encerrar o problema.
      </td>
    </tr>

    <tr>
      <td>
        `issuePageUrl`
      </td>

      <td>
        URL da página do problema
      </td>

      <td>
        Um link direto para a página do problema relevante.
      </td>
    </tr>

    <tr>
      <td>
        `issueActivatedAtUtc`
      </td>

      <td>
        Issue ActivatedAt UTC string
      </td>

      <td>
        Formato de string de ativação do problema em UTC.
      </td>
    </tr>

    <tr>
      <td>
        `issueClosedAtUtc`
      </td>

      <td>
        Issue ClosedAt UTC string
      </td>

      <td>
        Formato de string de encerramento do problema em UTC.
      </td>
    </tr>

    <tr>
      <td>
        `issueCreatedAtUtc`
      </td>

      <td>
        Issue CreatedAt UTC string
      </td>

      <td>
        Formato de string de criação de problemas em UTC.
      </td>
    </tr>

    <tr>
      <td>
        `issueAcknowledgedAt`
      </td>

      <td>
        String Issue AcknowledgedAt
      </td>

      <td>
        Formato de string do problema reconhecido em UTC.
      </td>
    </tr>

    <tr>
      <td>
        `issueClosedAt`
      </td>

      <td>
        String Issue ClosedAt
      </td>

      <td>
        Formato de string de encerramento do problema em UTC.
      </td>
    </tr>

    <tr>
      <td>
        `issueDurationMs`
      </td>

      <td>
        Duração do problema em milissegundos
      </td>

      <td>
        O número de milissegundos desde que o problema foi aberto.
      </td>
    </tr>

    <tr>
      <td>
        `issueDurationText`
      </td>

      <td>
        Duração do problema textual
      </td>

      <td>
        Uma representação amigável da duração do problema.
      </td>
    </tr>

    <tr>
      <td>
        `issueId`
      </td>

      <td>
        ID do problema
      </td>

      <td>
        O ID único do problema.
      </td>
    </tr>

    <tr>
      <td>
        `issueTitle`
      </td>

      <td>
        Título do problema
      </td>

      <td>
        Geralmente o título do primeiro incidente.
      </td>
    </tr>

    <tr>
      <td>
        `issueUpdatedAt`
      </td>

      <td>
        Issue UpdatedAt UTC string
      </td>

      <td>
        Timestamp da atualização do problema em UTC.
      </td>
    </tr>

    <tr>
      <td>
        `labels.accountIds`
      </td>

      <td>
        ID da conta associada ao ambiente do problema
      </td>

      <td>
        ID da conta associada aos ambientes de alertas New Relic.
      </td>
    </tr>

    <tr>
      <td>
        `labels.aggregationKeys`
      </td>

      <td>
        Chave de agregação de alerta de rótulos
      </td>

      <td>
        ID original do incidente de detecção de incidente do New Relic.
      </td>
    </tr>

    <tr>
      <td>
        `labels.originalAccountIds`
      </td>

      <td>
        Rotula IDs de conta
      </td>

      <td>
        ID do incidente da conta da política de detecção.
      </td>
    </tr>

    <tr>
      <td>
        `labels.policyIds`
      </td>

      <td>
        Etiquetas IDs de política de alertas
      </td>

      <td>
        IDs da política de detecção de incidentes que geraram o incidente.
      </td>
    </tr>

    <tr>
      <td>
        `abels.targetId`
      </td>

      <td>
        ID de destino
      </td>

      <td>
        ID de destino.
      </td>
    </tr>

    <tr>
      <td>
        `mutingState`
      </td>

      <td>
        Estado de silenciamento do problema
      </td>

      <td>
        O estado de silenciamento calculado do problema (`MUTED`, `NOT_MUTED`).
      </td>
    </tr>

    <tr>
      <td>
        `nrAccountId`
      </td>

      <td>
        ID da conta
      </td>

      <td>
        ID da conta.
      </td>
    </tr>

    <tr>
      <td>
        `openIncidentsCount`
      </td>

      <td>
        Contagem de incidentes abertos
      </td>

      <td>
        O número total de incidentes abertos sobre este assunto.
      </td>
    </tr>

    <tr>
      <td>
        `owner`
      </td>

      <td>
        Proprietário
      </td>

      <td>
        A pessoa que reconheceu o problema.
      </td>
    </tr>

    <tr>
      <td>
        `policyUrl`
      </td>

      <td>
        URL da política de alertas
      </td>

      <td>
        URL da política de alertas.
      </td>
    </tr>

    <tr>
      <td>
        `priority`
      </td>

      <td>
        Prioridade de emissão
      </td>

      <td>
        Nível de prioridade do problema (`CRITICAL`, `HIGH`, `MEDIUM`, `LOW`).
      </td>
    </tr>

    <tr>
      <td>
        `priorityText`
      </td>

      <td>
        Emitir texto prioritário
      </td>

      <td>
        Prioridade de emissão em letras minúsculas (`Critical`, `High`, `Medium`, `Low`).
      </td>
    </tr>

    <tr>
      <td>
        `realIssueCount`
      </td>

      <td>
        Contagem de problemas
      </td>

      <td>
        Contagem de problemas.
      </td>
    </tr>

    <tr>
      <td>
        `state`
      </td>

      <td>
        Estado do problema
      </td>

      <td>
        Estado do ciclo de vida do problema (`CREATED`, `ACTIVATED`, `CLOSED`).
      </td>
    </tr>

    <tr>
      <td>
        `stateText`
      </td>

      <td>
        Emitir texto do estado
      </td>

      <td>
        Estado do ciclo de vida do problema em letras minúsculas (`active` (aberto), `closed`).
      </td>
    </tr>

    <tr>
      <td>
        `status`
      </td>

      <td>
        Status de correlação do problema
      </td>

      <td>
        O status de correlação do problema.
      </td>
    </tr>

    <tr>
      <td>
        `totalIncidents`
      </td>

      <td>
        Contagem de incidentes
      </td>

      <td>
        O número de incidentes agregados ou correlacionados no problema.
      </td>
    </tr>

    <tr>
      <td>
        `triggeredAt`
      </td>

      <td>
        Problema acionado em
      </td>

      <td>
        Timestamp da notificação de problema acionada.
      </td>
    </tr>

    <tr>
      <td>
        `triggerEvent`
      </td>

      <td>
        Evento de gatilho de notificação de problema
      </td>

      <td>
        O evento acionador de notificação (`STATE_CHANGE`, `INCIDENT_ADDED`, `INCIDENT_CLOSED`, `CLOSE_INACTIVE`, `CLOSE_TTL`, `USER_ACTION`, `PRIORITY_CHANGED`, `MERGE_REQUEST`).
      </td>
    </tr>

    <tr>
      <td>
        `updatedAt`
      </td>

      <td>
        Edição atualizada em
      </td>

      <td>
        Carimbo de timestamp da última atualização do problema.
      </td>
    </tr>

    <tr>
      <td>
        `violationChartUrl`
      </td>

      <td>
        URL do gráfico de incidentes
      </td>

      <td>
        Link para a imagem do gráfico do incidente.
      </td>
    </tr>

    <tr>
      <td>
        `workflowName`
      </td>

      <td>
        Nome do fluxo de trabalho
      </td>

      <td>
        O nome do fluxo de trabalho que foi acionado.
      </td>
    </tr>
  </tbody>
</table>

## Exemplos de enriquecimento de dados de fluxo de trabalho [#enrichment-examples]

Para obter informações sobre a entidade que violou uma condição, você pode usar variáveis personalizadas como parte da instrução `WHERE` da consulta. Por exemplo, para obter o estado das instâncias do EC2 use:

```sql
SELECT latest(ec2State) FROM ComputeSample WHERE provider = 'Ec2Instance' AND entityName IN {{entitiesData.names}}
```

Esta consulta retorna um único valor (por exemplo, `stopped`), pois a consulta usa apenas um único campo. A variável `entitiesData.names` é uma lista de identificadores da entidade. Você pode usar qualquer outra propriedade da entidade da mesma maneira.

Você pode usar variáveis personalizadas para enriquecer sua consulta de dados de fluxo de trabalho de diferentes maneiras:

<CollapserGroup>
  <Collapser
    id="application-drop"
    title="Consulta para quando o tráfego do aplicativo cai"
  >
    Há momentos em que você deseja saber quando o tráfego para seu aplicativo diminui. Você pode usar a variável `{{entitiesData.names}}` no lugar do nome do seu aplicativo.

    ```sql
    SELECT count(*) FROM Transaction WHERE appName IN {{entitiesData.names}} SINCE 10 minutes ago
    ```
  </Collapser>

  <Collapser
    id="non-web-transactions-time"
    title="Transação fora da web time"
  >
    Tempo médio que a entidade impactada gasta processando solicitações/transações, discriminado por tipo de processo

    ```sql
    SELECT average(apm.service.overview.other) * 1000 FROM Metric WHERE appName IN {{entitiesData.names}} FACET `segmentName` TIMESERIES
    ```
  </Collapser>

  <Collapser
    id="throughput"
    title="Taxas de transferência"
  >
    Número de solicitações por minuto que as entidades afetadas processam

    ```sql
    SELECT rate(count(apm.service.transaction.duration), 1 minute) AS 'Non-web throughput' FROM Metric WHERE (appName IN {{entitiesData.names}}) AND (transactionType = 'Other') TIMESERIES
    ```
  </Collapser>

  <Collapser
    id="error-rate"
    title="Taxa de erros"
  >
    Proporção de erros em relação ao número total de solicitações processadas pela entidade impactada

    ```sql
    SELECT count(apm.service.error.count) / count(apm.service.transaction.duration) AS 'Non-web errors' FROM Metric WHERE (appName IN {{entitiesData.names}}) AND (transactionType = 'Other') TIMESERIES
    ```
  </Collapser>

  <Collapser
    id="transaction-failures"
    title="Consulta para falhas de transação"
  >
    Há momentos em que você deseja saber quando sua transação falhou. Esta consulta mostra as respostas de código de status HTTP mais recentes filtradas pela variável `{{entitiesData.names}}` que violou o limite da política de alertas.

    ```sql
    SELECT latest(http.statusCode), average(duration) FROM Transaction WHERE appName IN {{entitiesData.names}}
    ```
  </Collapser>

  <Collapser
    id="kubernetes-consumption"
    title="Consulta para visão geral do consumo do Kubernetes"
  >
    Use uma consulta como esta para obter o número de entidades e seus tempos de ingestão dentro de um pod Kubernetes. Ao identificar quais entidades têm grandes tempos de ingestão, você pode começar a resolver esse problema e encontrar uma solução potencial.

    ```sql
    SELECT uniqueCount(displayName), sum(nr.ingestTimeMs) FROM K8sServiceSample WHERE entityName IN {{entitiesData.names}} SINCE 1 hour ago
    ```
  </Collapser>

  <Collapser
    id="tags-from-facet"
    title="Consulta usando valor de faceta de acionamento"
  >
    Caso a condição do alerta consulta seja facetada, pode-se utilizar o valor `FACET` acionando o incidente em uma consulta. Por exemplo, se a condição do alerta for esta:

    ```sql
    SELECT average(duration) FROM BrowserInteraction FACET appName
    ```

    Você pode então consultar usando o `appName` específico assim:

    ```sql
    SELECT uniques(host) FROM Transaction WHERE appName IN {{accumulations.tag.appName}}
    ```
  </Collapser>
</CollapserGroup>
