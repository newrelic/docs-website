---
title: Inteligência de Custódia na Nuvem - Azure
tags:
  - cloud cost intelligence
  - azure
  - azure cost management
  - cloud cost optimization
  - cci azure
metaDescription: 'Connect your Azure billing to New Relic Cloud Cost Intelligence to monitor, analyze, and optimize cloud spending across Azure services.'
redirect:
  - /docs/cci/financial-intelligence/cci-azure
  - /docs/cci/azure-cci
freshnessValidatedDate: '2025-10-15T00:00:00.000Z'
translationType: machine
---

<Callout title="visualização">
  Ainda estamos trabalhando nesse recurso, mas adoraríamos que você experimentasse!

  Atualmente, esse recurso é fornecido como parte de um programa de visualização de acordo com nossas [políticas de pré-lançamento](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy).
</Callout>

Conecte sua cobrança do Azure ao Cloud Cost Intelligence para monitorar e otimizar os gastos com a nuvem. Visualize padrões de gastos, uso de recursos e alocação de custos entre serviços e grupos de recursos.

Principais funcionalidades:

* **Otimize recursos** - Identifique serviços subutilizados ou caros e ajuste as alocações
* **Controlar custos** - Acompanhe os direcionadores de custos em computação, armazenamento, rede e bancos de dados
* **Monitoramento de várias assinaturas** - Visualize os gastos em todas as assinaturas e grupos de gerenciamento
* **Responsabilidade de custos** - Habilite o chargeback usando tags e grupos de recursos do Azure
* **Gerenciamento de orçamento** - Defina alertas para limites e limites de gastos

## Antes de você começar

Você precisa:

* Assinatura do Azure com conta de cobrança ativa
* Função de Colaborador ou Proprietário na assinatura
* Acesso ao Azure Cost Management
* Permissões de leitor de cobrança para assinatura ou grupo de gerenciamento

## Instruções de configuração

<Callout variant="important">
  **Já possui uma exportação FOCUS?** Se você tiver uma exportação de faturamento existente com o formato **Cost and Usage (FOCUS)**, frequência diária e compactação Parquet, poderá usá-la. Caso contrário, crie uma nova exportação seguindo [Verificar exportação existente](#check-existing-export), [Criar exportação de faturamento](#create-billing-export) e [Configurar configurações de armazenamento](#configure-storage-settings).
</Callout>

<Steps>
  <Step>
    ### Verifique a exportação existente [#check-existing-export]

    Verifique se você já possui uma exportação de cobrança com o formato necessário:

    1. No portal do Azure, vá para **Cost Management &amp; Billing**.
    2. Selecione seu **Billing Scope**, expanda **Settings** e clique em **Exports**.
    3. Revise a lista para uma exportação com o formato **Cost and Usage (FOCUS)** e compactação **Parquet**.

    * **Se uma exportação correspondente existir**: Vá para [Selecionar conta New Relic](#select-new-relic-account).
    * **Se nenhuma exportação correspondente existir**: Continue para [Criar exportação de cobrança](#create-billing-export).
  </Step>

  <Step>
    ### Criar exportação de cobrança [#create-billing-export]

    1. No portal do Azure, vá para **Cost Management &amp; Billing**.
    2. Selecione seu **Billing Scope**, expanda **Settings** e clique em **Exports**.
    3. Clique em **Create**.
    4. Selecione **Cost and Usage (FOCUS)** como o tipo de exportação.

    <Callout variant="important">
      Para EA e MCA, o formato do tipo de exportação deve ser **Cost and usage details (FOCUS) : 1.2-preview\..**
    </Callout>

    5. Forneça um prefixo de exportação. Configure a exportação com estes parâmetros:

    <table>
      <thead>
        <tr>
          <th width={200}>
            Parâmetro
          </th>

          <th width={200}>
            Valor
          </th>

          <th>
            Descrição
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            Tipo de dados
          </td>

          <td>
            Detalhes de custo e uso (FOCUS) - Visualização
          </td>

          <td>
            Fornece informações detalhadas de custo e uso no formato FOCUS
          </td>
        </tr>

        <tr>
          <td>
            Nome da exportação
          </td>

          <td>
            Um nome descritivo de sua escolha
          </td>

          <td>
            Identificador significativo para sua exportação
          </td>
        </tr>

        <tr>
          <td>
            Versão do conjunto de dados
          </td>

          <td>
            1.2-preview (últimos arquivos de esquema de conjunto de dados)
          </td>

          <td>
            Última versão do esquema disponível
          </td>
        </tr>

        <tr>
          <td>
            Frequência
          </td>

          <td>
            Exportação diária dos custos do mês até a data
          </td>

          <td>
            As exportações diárias capturam informações de custos do mês até a data
          </td>
        </tr>

        <tr>
          <td>
            Descrição da exportação
          </td>

          <td>
            Uma descrição significativa da sua escolha
          </td>

          <td>
            Contexto sobre a finalidade da exportação
          </td>
        </tr>
      </tbody>
    </table>

    6. Clique em **Next**.
  </Step>

  <Step>
    ### Configurar definições de armazenamento [#configure-storage-settings]

    1. Configure onde o Azure armazena seus dados de cobrança:

    <table>
      <thead>
        <tr>
          <th width={200}>
            Contexto
          </th>

          <th width={200}>
            Valor
          </th>

          <th>
            Descrição
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            Tipo de armazenamento
          </td>

          <td>
            Armazenamento de Blobs
          </td>

          <td>
            Armazenamento de Blobs do Azure para dados de custo
          </td>
        </tr>

        <tr>
          <td>
            Armazenamento de destino
          </td>

          <td>
            Use uma conta de armazenamento existente ou crie uma nova
          </td>

          <td>
            Local de armazenamento para dados de faturamento
          </td>
        </tr>

        <tr>
          <td>
            contêiner e diretório
          </td>

          <td>
            Use o contêiner/diretório existente ou crie um novo
          </td>

          <td>
            estrutura de organização para faturamento de exportações
          </td>
        </tr>

        <tr>
          <td>
            Tipo de compressão
          </td>

          <td>
            Parquet
          </td>

          <td>
            Oferece eficiência de armazenamento e desempenho de consulta ideais
          </td>
        </tr>

        <tr>
          <td>
            Sobrescrita de dados
          </td>

          <td>
            Sim
          </td>

          <td>
            Permite atualizações de dados existentes
          </td>
        </tr>

        <tr>
          <td>
            Particionamento de arquivos
          </td>

          <td>
            Sim
          </td>

          <td>
            Permite organização e recuperação eficientes de dados
          </td>
        </tr>
      </tbody>
    </table>

    <Callout variant="important">
      Recomendamos que a conta de armazenamento esteja sediada no **(US) East US**. Isso ajuda a economizar em custos de transferência de dados de saída. O tipo de armazenamento deve ser **Armazenamento de Azure Blob**.
    </Callout>

    2. Revise suas configurações.

    3. Clique em **Create**.

    4. Verifique se a exportação aparece na sua lista de **Exports** e certifique-se de que:

       * O formato FOCUS (FinOps Open Cost and Usage Specification) está em visualização
       * A versão 1.2-preview do conjunto de dados é a versão de esquema mais recente
       * As exportações diárias capturam informações de custos do mês até a data
       * A compressão Parquet oferece eficiência de armazenamento e desempenho de consulta
  </Step>

  <Step>
    ### Selecionar conta New Relic [#select-new-relic-account]

    1. Vá para <DNT>[**one.newrelic.com**](https://one.newrelic.com) &gt; **All Capabilities** &gt; **Cloud Cost Intelligence - Azure**</DNT>.
    2. Selecione sua conta e clique em **Continue**.
  </Step>

  <Step>
    ### Forneça os detalhes da conexão do Azure [#provide-azure-connection-details]

    1. Insira suas informações de cobrança e armazenamento do Azure:

    <table>
      <thead>
        <tr>
          <th width={220}>
            Campo
          </th>

          <th>
            Descrição
          </th>

          <th>
            Localização
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            **Tipo de contrato do Azure**
          </td>

          <td>
            Selecione o tipo de contrato.
          </td>

          <td>
            Navegue até **Azure Console &gt; Cost Management + Billing &gt; Settings &gt; Properties**. Consulte [Billing accounts and scopes in the Azure portal](https://learn.microsoft.com/en-us/azure/cost-management-billing/manage/view-all-accounts).
          </td>
        </tr>

        <tr>
          <td>
            **ID do inquilino**
          </td>

          <td>
            Insira o identificador exclusivo para a instância do Microsoft Entra ID da sua organização.
          </td>

          <td>
            Acesse **[o Centro de administração do Microsoft Entra](https://entra.microsoft.com/#home)**
          </td>
        </tr>

        <tr>
          <td>
            **ID da conta de cobrança**
          </td>

          <td>
            Insira a ID da sua conta de cobrança.
          </td>

          <td>
            Navegue para **Azure Console &gt; Cost Management + Billing &gt; Settings &gt; Properties**. Consulte [Billing administration](https://learn.microsoft.com/en-us/azure/cost-management-billing/manage/direct-ea-administration#to-view-enrollment-properties).
          </td>
        </tr>

        <tr>
          <td>
            **Nome da conta de armazenamento do Azure**
          </td>

          <td>
            Insira o nome da conta de armazenamento da exportação que você criou. Para reduzir os custos de transferência de dados de saída, use uma conta de armazenamento em **East US (US)**. O tipo de armazenamento deve ser **Azure Blob storage**.
          </td>

          <td />
        </tr>

        <tr>
          <td>
            **Nome do contêiner de armazenamento**
          </td>

          <td>
            Insira o nome do contêiner na sua conta de armazenamento que contém os arquivos de exportação de faturamento.
          </td>

          <td>
            Acesse **[Microsoft Azure](https://portal.azure.com/#home) &gt; Subscription &gt; Storage account &gt; Container** **Observação**: você deve conceder acesso à entidade de serviço New Relic na próxima etapa para este contêiner.
          </td>
        </tr>

        <tr>
          <td>
            **Caminho do diretório**
          </td>

          <td>
            Por padrão, o Microsoft Azure cria arquivos de exportação de custos em pastas com nomenclaturas mensais, como `20251101-20251130` para nov 2025 e `20251201-20251231` para dez 2025. O CCI percorre automaticamente esses arquivos para relatórios de custos diários. Você precisa fornecer o Caminho do Diretório somente se os arquivos não tiverem sido configurados para serem publicados na raiz do contêiner.

            **Exemplo 1**: Se os arquivos estiverem configurados para serem publicados no Contêiner de Armazenamento chamado `newreliccciazure` na raiz.

            * **Ação**: Deixe em branco

            **Exemplo 2**: Se os arquivos estiverem configurados para serem publicados no Contêiner de Armazenamento chamado `newreliccciazure` em um diretório especificado `azureCostData`, com subdiretório como `johnDoefiles`, a estrutura final da pasta de arquivos será `newreliccciazure/azureCostData/johnDoefiles/20251101`.

            * **Ação**: Forneça `azureCostData/johnDoefiles` como o caminho do diretório
          </td>

          <td />
        </tr>
      </tbody>
    </table>

    2. Clique em **Continue**.
  </Step>

  <Step>
    ### Autorizar acesso [#authorize-access]

    Autorize o principal de serviço do New Relic (**msazurecostdata**) a acessar seus dados de cobrança:

    1. Clique em **Initiate Connection**.
    2. Conclua o fluxo de **Microsoft Authentication**.

    <Callout variant="important">
      Aprovação do administrador do Azure necessária.
    </Callout>

    3. Aceite a solicitação de autenticação.
    4. Um arquivo pequeno (0 KB) será baixado. Você pode excluir este arquivo.
  </Step>

  <Step>
    ### Confirmar a entidade de serviço [#confirm-service-principal]

    Verifique se a entidade de serviço foi adicionada:

    1. Vá para **Enterprise Applications** em **Microsoft Entra Account**.
    2. Confirme se **msazurecostdata** aparece na lista.

    <Callout variant="important">
      Consulte a [documentação do Microsoft Entra](https://learn.microsoft.com/en-us/entra/identity/enterprise-apps/view-applications-portal) para obter ajuda para visualizar aplicativos corporativos.
    </Callout>
  </Step>

  <Step>
    ### Atribuir permissões [#assign-permissions]

    Atribua a função **Storage Blob Data Reader** para acesso somente leitura:

    1. Abra o contêiner da sua conta de armazenamento e selecione **Access Control (IAM)**.
    2. Clique em **Add** &gt; **Add role assignment**.
    3. Selecione **Storage Blob Data Reader**.
    4. Pesquise e selecione `msazurecostdata`.
    5. Clique em **Review + Assign** e verifique se `msazurecostdata` aparece nas atribuições de função.
  </Step>

  <Step>
    ### Verificar configuração [#verify-setup]

    Confirmar:

    * **msazurecostdata** aparece em **Enterprise Applications**

    * O principal de serviço tem a função **Storage Blob Data Reader**

    * Função se aplica ao contêiner de armazenamento correto

    * Teste de conexão bem-sucedido no New Relic

      <Callout variant="important">
        **Segurança**: A entidade de serviço tem acesso somente leitura aos dados de cobrança. Ela não pode gravar, modificar ou excluir dados.
      </Callout>
  </Step>

  <Step>
    ### Processamento de dados [#data-processing]

    O processamento inicial leva até 12 horas. Seus dados de custo então aparecem no painel Cost Overview.
  </Step>

  <Step>
    ### Ver seus dados [#view-your-data]

    Acesse [**Intelligent summary (Resumo inteligente)**](/docs/cci/financial-intelligence/intelligent-summary) para visualizar seus dados de custo do Azure e otimizar os gastos.
  </Step>
</Steps>

<DocTiles numbered>
  <DocTile title="Set up AWS" path="/docs/cci/get-started/aws-cci" />

  <DocTile title="Set up Azure" label={{text: 'You are here', color: '#FCD672'}} path="/docs/cci/get-started/azure-cci" />

  <DocTile title="Set up Google Cloud Platform" path="/docs/cci/get-started/gcp-cci" />
</DocTiles>