---
subject: Lambda-Extension
releaseDate: '2025-12-02'
version: 2.4.0
translationType: machine
---

## Lançamento importante: Reescrita para Rust

Reescrita completa da extensão Lambda do New Relic de `Go (v2.3.24`) para **Rust** para melhor desempenho, segurança de memória e tempos de inicialização a frio reduzidos.

## Novo recurso

* **Suporte ao modoAPM **: função do Lambda agora pode reportar diretamente à plataforma New Relic APM como aplicativo entidade

  * Habilitar com `NEW_RELIC_APM_LAMBDA_MODE=true`
  * Suporte completo para métricas, spans, erros, eventos e trace da transação
  * Logs da plataforma convertidos para métrica APM (`apm.lambda.transaction.*`)
  * Evento de erro aprimorado para tempos limite e falhas com contexto distributed tracing
  * Consulte [a documentação do Modo APM](https://docs.newrelic.com/docs/serverless-function-monitoring/aws-lambda-monitoring/instrument-lambda-function/upgrade-to-apm-experience/) para obter detalhes.

* **Processamento com escopo definido por solicitação**: Correlação de carga útil e gerenciamento de ciclo de vida aprimorados.

* **Gerenciamento Inteligente de Buffer**: Lida com a carga do agente que chega antes do contexto da solicitação com limpeza automática.

## Melhorias de desempenho

* **Inicializações a frio mais rápidas**: compilação otimizada Rust com dependência mínima e LTO.
* **Uso reduzido**: Pegada reduzida com abstrações de custo zero
* **Processamento Simultâneo**: Processamento paralelo de logs, plataforma métrica e telemetria de agente
* **Agrupamento de conexões**: reutilização de conexões de clientes HTTP entre invocações.

## Segurança e confiabilidade

* **Segurança da memória**: O sistema de propriedade do Rust impede vazamentos de memória e estouros de buffer.
* **Segurança contra pânico**: o manipulador de pânico global impede que o Lambda falhe devido a falhas de extensão.
* **Segurança de tipos**: garantias em tempo de compilação eliminam classes inteiras de erros em tempo de execução.

## Alterações técnicas

* Migrado de Go `v1.23` para Rust 2021
* Construído sobre o ambiente de execução assíncrono Tokio.
* AWS SDK v1 para Rust (AWS-config 1.8, AWS-sdk-secretsmanager 1.88, AWS-sdk-ssm 1.93)
* Arquitetura modular com clara separação de responsabilidades.

## Configuração

Todas as variáveis de ambiente existentes permanecem inalteradas para manter a compatibilidade com versões anteriores. Variáveis-chave:

* `NEW_RELIC_LICENSE_KEY`: New Relic chave de licença
* `NEW_RELIC_APM_LAMBDA_MODE`: Ativar o modo APM (padrão: false)
* `NEW_RELIC_EXTENSION_SEND_FUNCTION_LOGS`: Enviar logs de função (padrão: false)
* `NEW_RELIC_LAMBDA_LOG_LEVEL`O nível de log da extensão oferece suporte a um controle mais granular com `info`, `debug`, `warn`, `error`, `trace`, `all`

Detalhes completos da configuração no arquivo [README](https://github.com/newrelic/newrelic-lambda-extension/blob/2a5c012f5082d2f8f056252e87d2d3eecad5479a/README.md).

## Notas sobre Migração

* **Substituição direta**: nenhuma alteração de código é necessária para usuários existentes.
* **Variáveis de ambiente**: todas as configurações permanecem as mesmas
* **Compatibilidade binária**: Mantém a compatibilidade com os agentes New Relic existentes.
* **desempenho**: espere partidas a frio 20-40% mais rápidas e menor uso de memória

***

## \[2.3.24] - Implementação Go (legado)

Última versão baseada em Go antes da migração para Rust. Mantido para fins de referência e suporte a legados.