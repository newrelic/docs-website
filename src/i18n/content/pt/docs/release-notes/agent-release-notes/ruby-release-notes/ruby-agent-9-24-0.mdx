---
subject: Ruby agent
releaseDate: '2025-12-02'
version: 9.24.0
downloadLink: 'https://rubygems.org/downloads/newrelic_rpm-9.24.0.gem'
features:
  - Deprecation reminder for SqlSampler#notice_sql API
  - Deprecation notice for second and third arguments in Datastores.notice_sql API
  - Deprecation notice for second argument in Datastores.notice_statement API
  - Deprecation notice for proc's second and third arguments in Datastores.wrap API
bugs: []
security: []
translationType: machine
---

<Callout variant="important">
  Recomendamos atualizar para a versão mais recente do agente assim que estiver disponível. Se você não puder atualizar para a versão mais recente, atualize seu agente para uma versão com no máximo 90 dias. Saiba mais sobre [como manter o agente atualizado](/docs/new-relic-solutions/new-relic-one/install-configure/update-new-relic-agent/).

  Consulte a [política de fim de vida útil](/docs/apm/agents/ruby-agent/getting-started/ruby-agent-eol-policy/) do agente Ruby New Relic para obter informações sobre lançamentos de agentes e datas de suporte.
</Callout>

## v9.24.0

* **recurso: Lembrete de descontinuação da APISqlSampler#notice\_sql**

  O método `NewRelic::Agent::SqlSampler#notice_sql` está obsoleto e será removido em uma futura versão principal. Em vez disso, o usuário deve chamar `NewRelic::Agent::Datastores.notice_sql`. [PR#3345](https://github.com/newrelic/newrelic-ruby-agent/pull/3345)

* **recurso: Aviso de obsolescência para o segundo e terceiro argumentos em Datastores.notice\_sql API**

  O segundo (`scoped_metric`) e o terceiro (`elapsed`) argumentos no método `NewRelic::Agent::Datastores.notice_sql` estão obsoletos. Eles não são usados por esse método há algum tempo. Em vez disso, esses valores serão definidos com base no segmento atual no momento em que a API for chamada. [PR#3345](https://github.com/newrelic/newrelic-ruby-agent/pull/3345)

* **recurso: Aviso de depreciação para o segundo argumento em Datastores.notice\_statement API**

  O segundo argumento (`elapsed`) no método `NewRelic::Agent::Datastores.notice_statement` está obsoleto. Esse método não é utilizado há algum tempo. Em vez disso, esse valor será definido com base no segmento atual no momento em que a API for chamada. [PR#3346](https://github.com/newrelic/newrelic-ruby-agent/pull/3346)

* **recurso: Aviso de descontinuação para o segundo e terceiro argumentos do procedimento na APIDatastores.wrap**

  O método `NewRelic::Agent::Datastores.wrap` está mudando. Em uma futura versão principal, o procedimento aceitará apenas um único argumento, o resultado do yield. O nome da métrica com escopo e os argumentos decorridos serão removidos, pois estão sendo removidos do método `Datastores.notice_sql`. O nome da métrica definida e os valores decorridos são derivados do segmento atual quando o loop é acionado. [PR#3346](https://github.com/newrelic/newrelic-ruby-agent/pull/3346)