---
subject: Ruby agent
releaseDate: '2025-07-31'
version: 9.20.0
downloadLink: 'https://rubygems.org/downloads/newrelic_rpm-9.20.0.gem'
features:
  - Add ECS Docker ID for Fargate
  - 'Add NewRelic::Helper.version_satisfied?'
  - Add code.stacktrace attribute on datastore spans when duration exceeds configured threshold
  - Consolidate "Unknown" constant values
bugs:
  - Fix Brewfile source links
  - Fix error when using HTTPX 1.5.0
  - Bugfixes and improvements to debug level agent logs
  - Fix risk of server-side forgery for Slack workflow script
  - Replace JSON.load calls with JSON.parse
security: []
translationType: machine
---

<Callout variant="important">
  Recomendamos atualizar para a versão mais recente do agente assim que estiver disponível. Se você não puder atualizar para a versão mais recente, atualize seu agente para uma versão com no máximo 90 dias. Saiba mais sobre [como manter o agente atualizado](/docs/new-relic-solutions/new-relic-one/install-configure/update-new-relic-agent/).

  Consulte a New Relic Ruby [política](https://docs.newrelic.com/docs/apm/agents/ruby-agent/getting-started/ruby-agent-eol-policy/) de fim de vida útil do agente para obter informações sobre lançamentos de agentes e datas de suporte.
</Callout>

## v9.20.0

* **Recurso: Adicionar ECS Docker ID para Fargate**

  Anteriormente, o agente Ruby não registrava o ID do Docker ao ser executado em um ambiente AWS ECS Fargate. O ID do Docker agora será registrado corretamente. [PR#3172](https://github.com/newrelic/newrelic-ruby-agent/pull/3172)

* **Recurso: Adicionar NewRelic::Helper.version\_satisfied?**

  O agente tem um novo método auxiliar para simplificar a comparação de versões. `NewRelic::Helper.version_satisfied?` aceita três argumentos: um número de versão do lado esquerdo, o operador de comparação como uma string e um número de versão do lado direito. Nossos agradecimentos a [@kekke-n](https://github.com/kekke-n) por esta contribuição. [PR#3182](https://github.com/newrelic/newrelic-ruby-agent/pull/3182)

* **Recurso: Adicionado atributo code.stacktrace em intervalos de armazenamento de dados quando a duração excede o limite configurado**

  O agente agora adicionará o atributo `code.stacktrace` aos intervalos de armazenamento de dados quando a duração exceder o limite configurado. O limite é configurado usando a opção de configuração `transaction_tracer.stack_trace_threshold`. [PR#3220](https://github.com/newrelic/newrelic-ruby-agent/pull/3220)

* **Recurso: consolidar valores constantes &quot;Desconhecidos&quot;**

  Todas as referências aos vários estilos de capitalização para &quot;Desconhecido&quot; foram consolidadas em duas constantes: `NewRelic::UNKNOWN` e `NewRelic::UNKNOWN_LOWER`. Obrigado, [@tsubasa1122](https://github.com/@tsubasa1122), pela sua contribuição! [PR#3185](https://github.com/newrelic/newrelic-ruby-agent/pull/3185)

* **Correção de bug: Corrigir links de origem do Brewfile**

  Anteriormente, os links do README do multiverso para o Brewfile estavam quebrados. Nossos agradecimentos vão para [@emmanuel-ferdman](https://github.com/emmanuel-ferdman) por enviar um PR para consertá-los! [PR#3191](https://github.com/newrelic/newrelic-ruby-agent/pull/3191)

* **Correção de bug: Corrige erro ao usar HTTPX 1.5.0**

  O agente encontrou um erro anteriormente ao usar a nova versão HTTPX 1.5.0. Isso ocorreu devido a uma mudança na maneira como o HTTPX armazena a resposta. O agente foi atualizado para lidar com essa alteração corretamente e não encontra mais erros ao usar o HTTPX 1.5.0. [PR#3203](https://github.com/newrelic/newrelic-ruby-agent/pull/3203)

* **Correção de bug: correções de bugs e melhorias nos logs do agente de nível de depuração**

  Melhora as informações registradas no nível de depuração pelo agente quando o agente lê uma fonte de configuração. [PR#3221](https://github.com/newrelic/newrelic-ruby-agent/pull/3221)

* **Correção de bug: Corrige o risco de falsificação do lado do servidor para script de fluxo de trabalho do Slack**

  Internamente, monitoramos as gems lançadas usando um fluxo de trabalho de ações do GitHub que publica atualizações no Slack. \[@odaysec] identificou uma maneira de reduzir o risco de falsificação do lado do servidor para este fluxo de trabalho. Obrigado! [PR#3184](https://github.com/newrelic/newrelic-ruby-agent/pull/3184)

* **Correção de bug: substituir chamadas JSON.load por JSON.parse**

  Geralmente, JSON.parse é visto como mais seguro que JSON.load. Obrigado, [@odaysec](https://github.com/odaysec), por nos alertar sobre isso! [PR#3183](https://github.com/newrelic/newrelic-ruby-agent/pull/3183) [PR#3230](https://github.com/newrelic/newrelic-ruby-agent/pull/3230)