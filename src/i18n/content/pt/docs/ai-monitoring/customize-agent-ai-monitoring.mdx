---
title: Personalize o agente para AI Monitoring
metaDescription: You can apply certain configurations to your APM agents to change how your AI data appears in New Relic.
freshnessValidatedDate: never
translationType: machine
---

Depois de [instalar AI Monitoring](/install/ai-monitoring), você pode configurar o comportamento padrão do agente ou atualizar seu aplicativo para coletar diferentes tipos de dados.

## Configurar o agente [#configure-agents]

Atualize o comportamento padrão do agente para o AI Monitoring nestes documentos de configuração do agente:

<CollapserGroup>
  <Collapser
    id="go-config"
    title="Configuração do Go"
  >
    * [`ai_monitoring.enabled`](/docs/apm/agents/go-agent/configuration/go-agent-configuration/#ai-monitoring-enabled)
    * [`ai_monitoring.streaming.enabled`](/docs/apm/agents/go-agent/configuration/go-agent-configuration/#ai-monitoring-streaming)
    * [`ai_monitoring.record_content.enabled`](/docs/apm/agents/go-agent/configuration/go-agent-configuration/#ai-monitoring-record-content)
    * [`ConfigCustomInsightsEventsMaxSamplesStored`](/docs/apm/agents/go-agent/configuration/go-agent-configuration/#env-var-table)
  </Collapser>

  <Collapser
    id="dotnet-config"
    title="Configuração .NET"
  >
    * [`ai_monitoring.enabled`](/docs/apm/agents/net-agent/configuration/net-agent-configuration/#ai_monitoring)
    * [`ai_monitoring.record_content.enabled`](/docs/apm/agents/net-agent/configuration/net-agent-configuration/#aiMonitoring_recordContent)
    * [`customEvents.maximumSamplesStored`](/docs/apm/agents/net-agent/configuration/net-agent-configuration/#customevents-maximumSamplesStored)
    * [`spanEvents.maximumSamplesStored`](/docs/apm/agents/net-agent/configuration/net-agent-configuration/#span-max-samples-stored)
  </Collapser>

  <Collapser
    id="java-config"
    title="Configuração Java"
  >
    * [`ai_monitoring.enabled`](/docs/apm/agents/java-agent/configuration/java-agent-configuration-config-file/#ai-monitoring-enabled)
    * [`ai_monitoring.record_content.enabled`](/docs/apm/agents/java-agent/configuration/java-agent-configuration-config-file/#ai-monitoring-record-content)
    * [`custom_insights_events.max_samples_stored`](/docs/apm/agents/java-agent/configuration/java-agent-configuration-config-file/#cie-max_samples_stored)
    * [`span_events.max_samples_stored`](/docs/apm/agents/java-agent/configuration/java-agent-configuration-config-file/#cfg-span-events-max-samples-stored)
  </Collapser>

  <Collapser
    id="nodejs-config"
    title="Configuração do Node.js"
  >
    * [`ai_monitoring.enabled`](/docs/apm/agents/nodejs-agent/installation-configuration/nodejs-agent-configuration/#ai-monitoring-enabled)
    * [`ai_monitoring.streaming.enabled`](/docs/apm/agents/nodejs-agent/installation-configuration/nodejs-agent-configuration/#ai-monitoring-streaming)
    * [`ai_monitoring.record_content.enabled`](/docs/apm/agents/nodejs-agent/installation-configuration/nodejs-agent-configuration/#ai-monitoring-record-content)
    * [`custom_insights_events.max_samples_stored`](/docs/apm/agents/nodejs-agent/installation-configuration/nodejs-agent-configuration/#custom_events_max_samples_stored)
    * [`span_events.max_samples_stored`](/docs/apm/agents/nodejs-agent/installation-configuration/nodejs-agent-configuration/#span-events-max-samples-stored)
  </Collapser>

  <Collapser
    id="python-config"
    title="Configuração Python"
  >
    * [`ai_monitoring.enabled`](/docs/apm/agents/python-agent/configuration/python-agent-configuration/#ai-monitoring-enabled)
    * [`ai_monitoring.streaming.enabled`](/docs/apm/agents/python-agent/configuration/python-agent-configuration/#ai-monitoring-streaming)
    * [`ai_monitoring.record_content.enabled`](/docs/apm/agents/python-agent/configuration/python-agent-configuration/#ai-monitoring-record-content)
    * [`event_harvest_config.harvest_limits.span_event_data`](/docs/apm/agents/python-agent/configuration/python-agent-configuration/#harvest-limits-span-event-data)
    * [`event_harvest_config.harvest_limits.custom_event_data`](/docs/apm/agents/python-agent/configuration/python-agent-configuration/#harvest-limits-custom-event-data)
  </Collapser>

  <Collapser
    id="ruby-config"
    title="Configuração Ruby"
  >
    * [`ai_monitoring.enabled`](/docs/apm/agents/ruby-agent/configuration/ruby-agent-configuration/#ai-monitoring-enabled)
    * [`instrumentation.ruby_openai`](/docs/apm/agents/ruby-agent/configuration/ruby-agent-configuration/#ruby-openai)
    * [`ai_monitoring.record_content.enabled`](/docs/apm/agents/ruby-agent/configuration/ruby-agent-configuration/#ai-monitoring-record-content)
    * [`span_events.max_samples_stored`](/docs/apm/agents/ruby-agent/configuration/ruby-agent-configuration/#custom_insights_events-max_samples_stored)
    * [`custom_insights_events.max_samples_stored`](/docs/apm/agents/ruby-agent/configuration/ruby-agent-configuration/#span_events-max_samples_stored)
  </Collapser>
</CollapserGroup>

## Método de contagem token [#enable-token]

`ai_monitoring.record_content.enabled`Se você token não desativou , não API será necessário implementar a de retorno de chamada count .

Desativar `ai_monitoring.record_content.enabled` impede que o agente envie conteúdo de IA para New Relic, mas também impede que o agente encaminhe contagens token para interação com seu aplicativo. Você pode implementar um retorno de chamada no código do seu aplicativo para determinar as contagens token localmente e, em seguida, encaminhar essas informações para o New Relic.

Consulte os documentos abaixo para obter exemplos de como configurar o token de contagem localmente:

<CollapserGroup>
  <Collapser
    id="go-token-method"
    title="Método de contagem token Go"
  >
    Consulte a documentação da API Go para [`SetLLMTokenCountCallback`](https://pkg.go.dev/github.com/newrelic/go-agent/v3/newrelic#Application.SetLLMTokenCountCallback)
  </Collapser>

  <Collapser
    id="dotnet-token-method"
    title="Método de contagem token .NET"
  >
    Consulte nossos documentos de API para [`SetLlmTokenCountingCallback`](/docs/apm/agents/net-agent/net-agent-api/setllmtokencountingcallback-net-agent-api)
  </Collapser>

  <Collapser
    id="java-token-method"
    title="Método de contagem de token Java"
  >
    Consulte nossos documentos de API para [`setLlmTokenCountCallback`](https://newrelic.github.io/java-agent-api/javadoc/com/newrelic/api/agent/AiMonitoring.html#setLlmTokenCountCallback)
  </Collapser>

  <Collapser
    id="nodejs-token-method"
    title="Método de contagem token Node.js"
  >
    Consulte nossos documentos de API para:

    * [`setLlmTokenCountCallback`](https://newrelic.github.io/node-newrelic/API.html#setLlmTokenCountCallback)
    * [`getTraceMetadata`](https://newrelic.github.io/node-newrelic/API.html#getTraceMetadata)
  </Collapser>

  <Collapser
    id="python-token-method"
    title="Método de contagem token Python"
  >
    Consulte nossos documentos de API para [`set_llm_token_count_callback`](/docs/apm/agents/python-agent/python-agent-api/setllmtokencountcallback-python-agent-api).
  </Collapser>

  <Collapser
    id="ruby-token-method"
    title="Método de contagem de token Ruby"
  >
    Consulte nossos documentos de API para [`NewRelic::Agent.set_llm_token_count_callback`](/docs/apm/agents/ruby-agent/api-guides/ruby-ai-monitoring-apis).
  </Collapser>
</CollapserGroup>

## Métodos de feedback do usuário [#enable-feedback]

Se o usuário final puder deixar feedback sobre uma resposta do AI, você poderá encaminhar esses dados para a tabela de respostas AI Monitoring . Para fazer isso, você atualizará o código do seu aplicativo para correlacionar IDs trace de dados de eventos de IA usando métodos de retorno de chamada.

Existem dois métodos que você precisa implementar para encaminhar esse tipo de informação:

<CollapserGroup>
  <Collapser
    id="go-feedback-methods"
    title="Métodos de feedback do Go"
  >
    Consulte a documentação da API Go para:

    * [`GetTraceMetadata`](https://pkg.go.dev/github.com/newrelic/go-agent/v3/newrelic#Application.getTraceMetadata)
    * [`RecordLLMFeedbackEvent`](https://pkg.go.dev/github.com/newrelic/go-agent/v3/newrelic#Application.RecordLLMFeedbackEvent)
  </Collapser>

  <Collapser
    id="java-feedback-methods"
    title="Métodos de feedback Java"
  >
    Consulte a documentação da API Java para:

    * [`TraceMetadata.getTraceId()`](https://newrelic.github.io/java-agent-api/javadoc/com/newrelic/api/agent/TraceMetadata.html#getTraceId)
    * [`recordLlmFeedbackEvent`](https://newrelic.github.io/java-agent-api/javadoc/com/newrelic/api/agent/AiMonitoring.html#recordLlmFeedbackEvent)
  </Collapser>

  <Collapser
    id="nodejs-feedback-methods"
    title="Métodos de feedback do Node.js."
  >
    Consulte nossos documentos de API para [`recordLlmFeedbackEvent`](https://newrelic.github.io/node-newrelic/API.html#recordLlmFeedbackEvent)
  </Collapser>

  <Collapser
    id="python-feedback-methods"
    title="Métodos de feedback Python"
  >
    Consulte nossos documentos de API para:

    * [`newrelic.agent.current_trace_id()`](/docs/apm/agents/python-agent/python-agent-api/currenttraceid-python-agent)
    * [`record_llm_feedback_event`](/docs/apm/agents/python-agent/python-agent-api/recordllmfeedbackevent-python-agent-api)
  </Collapser>

  <Collapser
    id="ruby-feedback-methods"
    title="Métodos de feedback Ruby"
  >
    Consulte nossos documentos de API para [`NewRelic::Agent.record_llm_feedback_event`](/docs/apm/agents/ruby-agent/api-guides/ruby-ai-monitoring-apis/#user-feedback)
  </Collapser>
</CollapserGroup>
