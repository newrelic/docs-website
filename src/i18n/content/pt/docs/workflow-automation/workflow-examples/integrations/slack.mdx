---
title: Enviar um relatório para o Slack
tags:
  - workflow automation
  - workflow
  - slack
  - reporting
metaDescription: 'Execute NRQL queries, convert results to CSV, and post to Slack channels.'
freshnessValidatedDate: never
translationType: machine
---

Executar consulta NRQL, converter resultados para CSV e postar no Slack.

**Requisitos:**

* Consulta NRQL
* Token do Slack em segredos.

**O que este fluxo de trabalho faz:**

* Executar consulta NRQL na conta do New Relic
* Gerar CSV a partir dos resultados da consulta
* Postar CSV no canal do Slack com mensagem

**Ações principais**: `newrelic.nrdb.query`, `utils.transform.toCSV`, `slack.chat.postMessage`

```yaml
  name: nrqlToSlackReport

  workflowInputs:
    accountId:
      type: Int
    nrqlQuery:
      type: String
      defaultValue: 'FROM Transaction SELECT count(*) FACET appName SINCE 1 hour ago'
    slackChannel:
      type: String

  steps:
    - name: queryData
      type: action
      action: newrelic.nrdb.query
      version: 1
      inputs:
        accountIds:
          - ${{ .workflowInputs.accountId }}
        query: ${{ .workflowInputs.nrqlQuery }}

    - name: convertToCSV
      type: action
      action: utils.transform.toCSV
      version: 1
      inputs:
        data: ${{ .steps.queryData.outputs.results | tostring }}

    - name: postToSlack
      type: action
      action: slack.chat.postMessage
      version: 1
      inputs:
        token: ${{ :secrets:slack_token }}
        channel: ${{ .workflowInputs.slackChannel }}
        text: 'NRQL Query Report'
        attachment:
          filename: 'query-results.csv'
          content: ${{ .steps.convertToCSV.outputs.csv }}
```

## Qual é o próximo

* **[AWS SQS](/docs/workflow-automation/workflow-examples/integrations/aws-sqs)**: Envie mensagens para as filas SQS
* **[Polling da API REST](/docs/workflow-automation/workflow-examples/integrations/rest-api-polling)**: Pesquisar APIs externas