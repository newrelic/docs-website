---
title: Enviar notificação do fluxo de trabalho
tags:
  - workflow automation
  - workflow
  - notifications
  - slack
  - pagerduty
metaDescription: 'Configure workflows to send notifications via Slack, PagerDuty, email, or webhooks when automation tasks complete or fail.'
freshnessValidatedDate: never
translationType: machine
---

<Callout title="visualização">
  Ainda estamos trabalhando nesse recurso, mas adoraríamos que você experimentasse!

  Atualmente, esse recurso é fornecido como parte de um programa de visualização de acordo com nossas [políticas de pré-lançamento](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy).
</Callout>

Esta página aborda duas maneiras pelas quais a automação do fluxo de trabalho se integra à notificação:

1. **Enviar notificação do fluxo de trabalho**: use ações do Slack, PagerDuty, e-mail ou webhook em seu fluxo de trabalho para notificar as equipes quando o fluxo de trabalho for concluído, falhar ou exigir aprovação.
2. **Acionar fluxo de trabalho a partir de alertas**: Configure a automação do fluxo de trabalho como um destino nos alertas New Relic para iniciar automaticamente o fluxo de trabalho quando a condição do alerta for violada.

<Callout variant="important">
  **Dois conceitos diferentes:**

  * **Notificação de saída**: seu fluxo de trabalho envia mensagens para Slack/PagerDuty usando ações como `slack.chat.postMessage`
  * **Gatilhos de entrada**: os alertas do New Relic acionam a execução do seu fluxo de trabalho, passando `issueId` automaticamente.
</Callout>

## Enviar notificação do fluxo de trabalho [#send-from-workflows]

Utilize estes canais de notificação para alertar sua equipe dentro do seu fluxo de trabalho. Selecione o canal adequado para o seu caso de uso:

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        **Canal**
      </th>

      <th>
        **Melhor para**
      </th>

      <th>
        **Complexidade de configuração**
      </th>

      <th>
        **Recurso**
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        **Slack**
      </td>

      <td>
        Colaboração em equipe, aprovações
      </td>

      <td>
        Fácil - requer token de bot
      </td>

      <td>
        Mensagens ricas, reações, tópicos
      </td>
    </tr>

    <tr>
      <td>
        **PagerDuty**
      </td>

      <td>
        Gestão de incidentes, plantão
      </td>

      <td>
        Fácil - requer chave de API
      </td>

      <td>
        Políticas de escalonamento, rastreamento de incidentes
      </td>
    </tr>

    <tr>
      <td>
        **E-mail**
      </td>

      <td>
        Notificação formal, relatórios
      </td>

      <td>
        Fácil - Configuração SMTP
      </td>

      <td>
        Anexos, formatação HTML
      </td>
    </tr>

    <tr>
      <td>
        **Webhooks**
      </td>

      <td>
        Integração personalizada
      </td>

      <td>
        Médio - requer endpoint
      </td>

      <td>
        Carga flexível, qualquer sistema
      </td>
    </tr>
  </tbody>
</table>

## Antes de você começar

Antes de configurar a notificação, certifique-se de ter:

* Um fluxo de trabalho criado em sua conta (a partir de [um modelo](/docs/workflow-automation/create-a-workflow-automation/use-a-template) ou [personalizado](/docs/workflow-automation/create-a-workflow-automation/create-your-own)).
* Credenciais para seu canal de notificação (Slack bot token, PagerDuty chave de API, etc.).
* Credenciais armazenadas no [gerenciador de segredos](/docs/workflow-automation/limitations-and-faq/workflow-best-practices/#secure-credentials).

<Callout variant="tip">
  **Para envio de notificação do fluxo de trabalho**: Utilize o catálogo de ações para adicionar ações de notificação (como `slack.chat.postMessage`) diretamente nas etapas do seu fluxo de trabalho. Consulte [as ações do Slack](/docs/workflow-automation/setup-and-configuration/actions-catalog/slack/slack-chat) e [as ações do PagerDuty](/docs/workflow-automation/setup-and-configuration/actions-catalog/pagerduty/pagerduty-incident).
</Callout>

## Acionar fluxo de trabalho a partir de alertas [#trigger-from-alerts]

Configure a automação do fluxo de trabalho como um destino nos alertas New Relic para iniciar automaticamente o fluxo de trabalho quando a condição do alerta for violada. Quando acionado por um alerta, o fluxo de trabalho recebe automaticamente `issueId` e `accountId` como entradas.

1. Navegue até **[one.newrelic.com &gt; All capabilities](https://one.newrelic.com/all-capabilities) &gt; Alerts &gt; Destinations** e selecione **Workflow Automation**.

2. Para configurar o **fluxo de trabalho Automation**, insira as informações necessárias, como o **nome de destino do fluxo de trabalho Automation** (um nome exclusivo para o\*\* fluxo de trabalho Automation\*\*) e a **chave de API**.

3. Clique em **Save destination**.

   <img title="How to add a destination" alt="Image of the Workflow Automation destination page." src="/images/add-a-destination.webp" />

## Criar um fluxo de trabalho de notificação de alerta [#create-the-notification-workflow]

Após configurar **a automação de fluxo de trabalho** como destino, crie um fluxo de trabalho de notificação de alerta para definir quais alertas acionam seu fluxo de trabalho.

<Callout variant="important">
  As etapas abaixo são para configurar **o fluxo de trabalho de notificação de alerta** (parte dos alertas do New Relic), e não **a automação do fluxo de trabalho**. alerta notificação problemas de rota de fluxo de trabalho para destinos, incluindo o destino **de automação de fluxo de trabalho** que você configurou acima. Para obter documentação completa sobre fluxo de trabalho de alerta, consulte [Fluxo de trabalho de incidente](/docs/alerts/get-notified/incident-workflows).
</Callout>

1. Acesse **Alerts &gt; Notification Workflows** e selecione **+ Add a workflow**.

2. Para configurar seu fluxo de trabalho de notificações, na página Configure seu fluxo de trabalho de notificações, forneça as informações necessárias:

   * Digite um nome único que você reconheça.
   * Selecione a **Tag**, **Policy** e o atributo **Priority** em seus respectivos menus suspensos na opção de filtro **Basic** para receber notificações sobre um incidente ou opte pela opção de filtro **Advanced** para escolher **Attributes**, **Operators** e **Values** para obter notificações de incidentes mais detalhadas.
   * Clique em **Additional settings** para enriquecer seus dados criando [uma consultaNRQL ](/docs/alerts/get-notified/incident-workflows/#enrichments)e reunindo dados relevantes de toda a sua plataforma New Relic. Para exemplos de enriquecimento, consulte [Enriquecimento de dados do fluxo de trabalho](/docs/alerts/get-notified/custom-variables-incident-workflows/#enrichment-examples).

3. Para especificar os destinos de notificação, na seção **Notify**, escolha o destino de **Workflow Automation** que você criou na etapa anterior.

4. (Opcional) Você também pode adicionar outros destinos como [Slack](/docs/alerts/get-notified/notification-integrations/#slack) para receber notificações junto com o acionamento do fluxo de trabalho:

   1. Selecione **Slack destination** na lista suspensa.
   2. Selecione o **Channel** na lista suspensa e marque a caixa de seleção **Receive notification updates on the channel**.
   3. Opcionalmente, adicione uma mensagem personalizada na seção **Custom Details**.

   <Callout variant="tip">
     Recomendamos o envio de uma notificação de teste usando a opção **Send test notification**.
   </Callout>

   4. Selecione **Save message**.

5. Selecione **Activate workflow**.

   <img title="How to configure a workflow" alt="Image of how to configure a workflow" src="/images/configure-workflow.gif" />

## Quais dados são passados para o fluxo de trabalho Automação [#data-passed]

Quando um alerta aciona sua automação de fluxo de trabalho:

* **`issueId`**: Passado automaticamente para o seu fluxo de trabalho. Seu fluxo de trabalho deve aceitar isso como um parâmetro de entrada. Conforme documentado em [Criar seu próprio fluxo de trabalho](/docs/workflow-automation/create-a-workflow-automation/create-your-own), o `issueId` é &quot;fornecido automaticamente quando o fluxo de trabalho é executado a partir de um alerta&quot;.
* **`accountId`**: Seu ID de conta New Relic. Seu fluxo de trabalho deve aceitar isso como um parâmetro de entrada obrigatório.

Sua definição de automação de fluxo de trabalho deve declarar essas entradas. Por exemplo:

```yaml
  workflowInputs:
    accountId:
      type: Int
    issueId:
      type: String
```

<Callout variant="important">
  Os campos sem `defaultValue` são obrigatórios e devem ser fornecidos quando o fluxo de trabalho for acionado. Você pode então usar `issueId` para consultar detalhes de alerta usando a API NerdGraph dentro do seu fluxo de trabalho.
</Callout>

## Qual é o próximo

* **[Catálogo de ações](/docs/workflow-automation/setup-and-configuration/actions-catalog/actions-catalog)**: Veja todas as ações disponíveis da AWS, New Relic e de integração.
* **[Use um template](/docs/workflow-automation/create-a-workflow-automation/use-a-template)**: implante o workflow pré-configurado para cenários comuns.
* **[Crie seu próprio workflow](/docs/workflow-automation/create-a-workflow-automation/create-your-own)**: crie um workflow personalizado do zero.