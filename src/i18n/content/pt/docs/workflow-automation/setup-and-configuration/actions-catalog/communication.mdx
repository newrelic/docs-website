---
title: Ações de comunicação
tags:
  - workflow automation
  - workflow
  - workflow automation actions
  - communication actions
  - slack actions
  - ms teams actions
metaDescription: A list of available actions in the actions catalog for workflow definitions
freshnessValidatedDate: never
translationType: machine
---

<Callout title="visualização">
  Ainda estamos trabalhando nesse recurso, mas adoraríamos que você experimentasse!

  Atualmente, esse recurso é fornecido como parte de um programa de visualização de acordo com nossas [políticas de pré-lançamento](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy).
</Callout>

Esta página fornece uma referência completa para as ações de comunicação disponíveis no catálogo de ações de automação de fluxo de trabalho. Essas ações permitem que você integre a plataforma de comunicação às suas definições de fluxo de trabalho, incluindo o envio de mensagens para canais do Slack, a recuperação de reações e muito mais.

## Pré-requisitos

Antes de usar ações de comunicação na automação de fluxo de trabalho, certifique-se de ter:

* Um espaço de trabalho do Slack com as permissões apropriadas.
* Um token de bot do Slack configurado como um segredo na automação de fluxo de trabalho.
* Acesso aos canais do Slack onde você deseja enviar mensagens.

Consulte a seção [Adicionar configuração do Slack](/docs/autoflow/overview#add-the-slack-integration) para obter informações sobre como configurar a integração com o Slack.

## Ações do Slack

<CollapserGroup>
  <Collapser id="slack.chat.postMessage" title="Publique uma mensagem no canal do Slack.">
    Envia uma mensagem para um canal do Slack, com a opção de anexar um arquivo.

    <Tabs>
      <TabsBar>
        <TabsBarItem id="chatpostMessageinputs">
          Entradas
        </TabsBarItem>

        <TabsBarItem id="chatpostMessageoutputs">
          Saídas
        </TabsBarItem>

        <TabsBarItem id="chatpostMessageexample">
          Exemplo
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="chatpostMessageinputs">
          <table>
            <thead>
              <tr>
                <th>
                  Campo de entrada
                </th>

                <th>
                  Opcionalidade
                </th>

                <th>
                  Tipo
                </th>

                <th>
                  Exemplo
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **token**
                </td>

                <td>
                  Obrigatório
                </td>

                <td>
                  segredo
                </td>

                <td>
                  `${{ :secrets:slackToken }}`
                </td>
              </tr>

              <tr>
                <td>
                  **canal**
                </td>

                <td>
                  Obrigatório
                </td>

                <td>
                  corda
                </td>

                <td>
                  `my-slack-channel`
                </td>
              </tr>

              <tr>
                <td>
                  **texto**
                </td>

                <td>
                  Obrigatório
                </td>

                <td>
                  corda
                </td>

                <td>
                  `Hello World!`
                </td>
              </tr>

              <tr>
                <td>
                  **threadTs**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  corda
                </td>

                <td>
                  `<digits>.<digits>`
                </td>
              </tr>

              <tr>
                <td>
                  **anexo**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  map
                </td>

                <td />
              </tr>

              <tr>
                <td>
                  **anexo.nome do arquivo**
                </td>

                <td>
                  Obrigatório
                </td>

                <td>
                  corda
                </td>

                <td>
                  `file.txt`
                </td>
              </tr>

              <tr>
                <td>
                  **anexo.conteúdo**
                </td>

                <td>
                  Obrigatório
                </td>

                <td>
                  corda
                </td>

                <td>
                  `Hello\nWorld!`
                </td>
              </tr>
            </tbody>
          </table>

          <Callout variant="important">
            * **token**: O token do bot do Slack a ser usado. Isso deve ser passado como uma sintaxe secreta. Consulte a seção [Adicionar configuração do Slack](/docs/autoflow/overview#add-the-slack-integration) para obter instruções sobre como configurar um token.
            * **channel**: O nome do canal, ou um ID de canal, para enviar a mensagem. Consulte [a API do Slack](https://api.slack.com/methods/chat.postMessage#arg_channel/) para obter mais informações.
            * **text**: A mensagem a ser postada no Slack no `channel` especificado.
            * **threadTs**: carimbo de data/hora pertencente à mensagem principal, usado para criar uma resposta em uma thread.
            * **attachment**: Permite anexar um arquivo com uma mensagem no `channel` especificado.
            * **attachment.filename**: Especifique o nome do arquivo que será carregado no Slack.
            * **attachment.content**: O conteúdo do arquivo a ser carregado está em UTF-8.
          </Callout>
        </TabsPageItem>

        <TabsPageItem id="chatpostMessageoutputs">
          <table>
            <thead>
              <tr>
                <th>
                  Campo de saída
                </th>

                <th>
                  Tipo
                </th>

                <th>
                  Exemplo
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **threadTs**
                </td>

                <td>
                  corda
                </td>

                <td>
                  `<digits>.<digits>`
                </td>
              </tr>

              <tr>
                <td>
                  **ID do canal**
                </td>

                <td>
                  corda
                </td>

                <td>
                  `<string>`
                </td>
              </tr>
            </tbody>
          </table>

          <Callout variant="important">
            * **threadTs**: carimbo de data/hora da mensagem. Pode ser usado em futuras chamadas postMessage para postar uma resposta em um tópico.
            * **channelID**: ID do canal onde a mensagem foi postada.
          </Callout>
        </TabsPageItem>

        <TabsPageItem id="chatpostMessageexample">
          **Exemplo 1: Publicar uma mensagem em um canal do Slack**

          <table>
            <thead>
              <tr>
                <th>
                  Exemplo de fluxo de trabalho
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  ```yaml
                  name: SendMessage

                  steps:
                    - name: send_slack_message
                      type: action
                      action: slack.chat.postMessage
                      version: 1
                      inputs:
                        token: ${{ :secrets:slackToken }}
                        channel: ${{ .workflowInputs.channel }}
                        text: ${{ .workflowInputs.text }}
                  ```

                  **Entradas esperadas:**

                  ```json
                  {
                    "inputs": [
                      {
                        "key" : "channel",
                        "value" : "my-channel"
                      },
                      {
                        "key" : "text",
                        "value" : "This is my message *with bold text* and `code backticks`"
                      }
                    ]
                  }
                  ```

                  **Resultado esperado:**

                  ```json
                  [
                    {
                      "threadTs": "1718897637.400609",
                      "channelID": "C063JK1RHN1"
                    }
                  ]
                  ```
                </td>
              </tr>
            </tbody>
          </table>

          **Exemplo 2: Anexar um arquivo**

          <table>
            <thead>
              <tr>
                <th>
                  Exemplo de fluxo de trabalho
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  ```yaml
                  name: SendFileMessage

                  steps:
                    - name: postCsv
                      type: action
                      action: slack.chat.postMessage
                      version: 1
                      inputs:
                        token: ${{ :secrets:slackToken }}
                        channel: my-channel
                        text: "Please find the attached file:"
                        attachment:
                          filename: 'file.txt'
                          content: "Hello\nWorld!"
                  ```

                  **Resultado esperado:**

                  ```json
                  [
                    {
                      "threadTs": "1718897637.400609",
                      "channelID": "C063JK1RHN1"
                    }
                  ]
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>
</CollapserGroup>

<CollapserGroup>
  <Collapser id="slack.chat.getReactions" title="Receba uma reação a uma mensagem do canal do Slack.">
    Receba uma reação a uma mensagem de um canal do Slack.

    <Tabs>
      <TabsBar>
        <TabsBarItem id="chatgetreactionsinputs">
          Entradas
        </TabsBarItem>

        <TabsBarItem id="chatgetreactionsoutputs">
          Saídas
        </TabsBarItem>

        <TabsBarItem id="chatgetreactionsexample">
          Exemplo
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="chatgetreactionsinputs">
          <table>
            <thead>
              <tr>
                <th>
                  Campo de entrada
                </th>

                <th>
                  Opcionalidade
                </th>

                <th>
                  Tipo
                </th>

                <th>
                  Exemplo
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **token**
                </td>

                <td>
                  Obrigatório
                </td>

                <td>
                  segredo
                </td>

                <td>
                  `${{ :secrets:slackToken }}`
                </td>
              </tr>

              <tr>
                <td>
                  **ID do canal**
                </td>

                <td>
                  Obrigatório
                </td>

                <td>
                  corda
                </td>

                <td>
                  `C063JK1RHN1`
                </td>
              </tr>

              <tr>
                <td>
                  **Tempo esgotado**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  int
                </td>

                <td>
                  60
                </td>
              </tr>

              <tr>
                <td>
                  **threadTs**
                </td>

                <td>
                  Obrigatório
                </td>

                <td>
                  corda
                </td>

                <td>
                  `<digits>.<digits>`
                </td>
              </tr>

              <tr>
                <td>
                  **seletores**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  list
                </td>

                <td>
                  `[{\"name\": \"reactions\", \"expression\": \".reactions \"}]`
                </td>
              </tr>
            </tbody>
          </table>

          <Callout variant="important">
            * **token**: O token do bot do Slack a ser usado. Isso deve ser passado como uma sintaxe secreta. Consulte a seção [Adicionar configuração do Slack](/docs/autoflow/overview#add-the-slack-integration) para obter instruções sobre como configurar um token.
            * **channelID**: O ID do canal para receber as reações às mensagens.
            * **timeout**: O tempo em segundos que se deve esperar por qualquer reação. O valor padrão é 60 segundos, o máximo permitido é 600 segundos (10 minutos).
            * **threadTs**: carimbo de data/hora pertencente à mensagem, usado para obter a reação a essa mensagem.
            * **selectors**: Os seletores para obter apenas o parâmetro especificado como saída.
          </Callout>
        </TabsPageItem>

        <TabsPageItem id="chatgetreactionsoutputs">
          <table>
            <thead>
              <tr>
                <th>
                  Campo de saída
                </th>

                <th>
                  Tipo
                </th>

                <th>
                  Exemplo
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **reações**
                </td>

                <td>
                  list
                </td>

                <td>
                  `<list>`
                </td>
              </tr>
            </tbody>
          </table>

          <Callout variant="important">
            * **reactions**: Lista de elementos com todas as reações registradas ou uma lista vazia caso tenha ocorrido um tempo limite.
          </Callout>
        </TabsPageItem>

        <TabsPageItem id="chatgetreactionsexample">
          **Exemplo 1: Slack recebe reações**

          <table>
            <thead>
              <tr>
                <th>
                  Exemplo de fluxo de trabalho
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  ```yaml
                  name: GetReactions

                  steps:
                    - name: getReactions
                      type: action
                      action: slack.chat.getReactions
                      version: 1
                      inputs:
                        token: ${{ :secrets:slackToken }}
                        channelID: ${{ .steps.promptUser.outputs.channelID }}
                        threadTs: ${{ .steps.promptUser.outputs.threadTs }}
                        timeout: ${{ .workflowInputs.timeout }}
                        selectors: ${{ .workflowInputs.selectors }}
                  ```

                  **Entradas esperadas:**

                  ```json
                  {
                    "inputs": [
                      {
                        "key" : "channelID",
                        "value" : "C063JK1RHN1"
                      },
                      {
                        "key" : "threadTs",
                        "value" : "1718897637.400609"
                      },
                      {
                        "key" : "selectors",
                        "value" : "[{\"name\": \"reactions\", \"expression\": \".reactions \"}]"
                      }
                    ]
                  }
                  ```

                  **Resultado esperado:**

                  ```json
                  [
                    {
                      "name": "grinning",
                      "users": [
                        "W222222"
                      ],
                      "count": 1
                    },
                    {
                      "name": "question",
                      "users": [
                        "W333333"
                      ],
                      "count": 1
                    }
                  ]
                  ```

                  Ou, se o tempo limite tiver expirado:

                  ```json
                  []
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>
</CollapserGroup>