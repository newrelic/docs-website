---
title: Postagem HTTP
tags:
  - workflow automation
  - workflow
  - workflow automation actions
  - HTTP actions
  - HTTP POST
metaDescription: A list of available http post in the actions catalog for workflow definitions
freshnessValidatedDate: never
translationType: machine
---

<Callout title="visualização">
  Ainda estamos trabalhando nesse recurso, mas adoraríamos que você experimentasse!

  Atualmente, esse recurso é fornecido como parte de um programa de visualização de acordo com nossas [políticas de pré-lançamento](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy).
</Callout>

Esta página fornece uma referência completa para as ações HTTP POST disponíveis no catálogo de ações de automação de fluxo de trabalho. Essas ações permitem que você execute operações de requisição HTTP POST.

## Pré-requisitos

Antes de usar ações HTTP na automação de fluxo de trabalho, certifique-se de ter:

* endpointde destino de URLs API.
* Quaisquer credenciais de autenticação necessárias (chave de API, token, etc.).
* Compreensão dos formatos de requisição/resposta da API.

<Callout variant="tip">
  As ações HTTP suportam sintaxe secreta para qualquer valor de cabeçalho, permitindo que você passe dados sensíveis com segurança, como a chave de API. Consulte a seção [de gerenciamento de segredos](/docs/workflow-automation/limitations-and-faq/workflow-best-practices/#secure-credentials) para obter mais informações.
</Callout>

## Cabeçalhos de solicitação automáticos [#automatic-headers]

Todas requests HTTP realizadas pelo fluxo de trabalho Automation incluem automaticamente os seguintes cabeçalhos:

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        Cabeçalho
      </th>

      <th>
        Formatar
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `X-Abuse-Info`
      </td>

      <td>
        `Request sent by a New Relic WorkflowAutomation. {runId}`

        <br />

        onde 

        `{runId}`

         é o ID da execução do fluxo de trabalho
      </td>
    </tr>

    <tr>
      <td>
        `User-Agent`
      </td>

      <td>
        `NewRelic/WorkflowAutomation (region={region}; https://newrelic.com ; support@newrelic.com)`

        <br />

        onde 

        `{region}`

         é a região de New Relic
      </td>
    </tr>
  </tbody>
</table>

## Enviar dados para um servidor [#http-post]

Executa uma chamada HTTP POST para enviar dados para um endpointda API.

<Callout variant="important">
  Se você precisar passar dados sensíveis para uma entrada, por exemplo, um cabeçalho de chave de API, poderá usar valores armazenados por meio da mutação [secretsManagementCreateSecret](https://onenr.io/0KQXX6BmdQa) do NerdGraph.

  **Exemplo**

  ```yaml
    {
      "inputs": [
        {
          "key": "headers",
          "value": "{\"Api-Key\": \"${{ :secrets:NR_API_KEY }}\"}"
        }
      ]
    }
  ```
</Callout>

<Tabs>
  <TabsBar>
    <TabsBarItem id="httppostinputs">
      Entradas
    </TabsBarItem>

    <TabsBarItem id="httppostoutputs">
      Saídas
    </TabsBarItem>

    <TabsBarItem id="httppostexample">
      Exemplo
    </TabsBarItem>
  </TabsBar>

  <TabsPages>
    <TabsPageItem id="httppostinputs">
      <table>
        <thead>
          <tr>
            <th>
              Campo de entrada
            </th>

            <th>
              Opcionalidade
            </th>

            <th>
              Tipo
            </th>

            <th>
              Descrição
            </th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>
              **url**
            </td>

            <td>
              Obrigatório
            </td>

            <td>
              Corda
            </td>

            <td>
              A URL de destino da solicitação. O esquema deve ser incluído: 

              `https://example.com`
            </td>
          </tr>

          <tr>
            <td>
              **parâmetros da URL**
            </td>

            <td>
              Opcional
            </td>

            <td>
              Mapa
            </td>

            <td>
              O parâmetro de consulta deve ser adicionado à URL. Recebe um objeto JSON em formato de string.
            </td>
          </tr>

          <tr>
            <td>
              **cabeçalhos**
            </td>

            <td>
              Opcional
            </td>

            <td>
              Mapa
            </td>

            <td>
              Os cabeçalhos a serem adicionados à solicitação. Recebe um objeto JSON em formato de string.
            </td>
          </tr>

          <tr>
            <td>
              **corpo**
            </td>

            <td>
              Opcional
            </td>

            <td>
              Corda
            </td>

            <td>
              O corpo da requisição.
            </td>
          </tr>

          <tr>
            <td>
              **seletores**
            </td>

            <td>
              Opcional
            </td>

            <td>
              Lista
            </td>

            <td>
              Os seletores permitem obter apenas o parâmetro especificado como saída.
            </td>
          </tr>
        </tbody>
      </table>
    </TabsPageItem>

    <TabsPageItem id="httppostoutputs">
      <table>
        <thead>
          <tr>
            <th>
              Campo de saída
            </th>

            <th>
              Tipo
            </th>

            <th>
              Descrição
            </th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>
              **respostaCorpo**
            </td>

            <td>
              Corda
            </td>

            <td>
              O corpo da resposta.
            </td>
          </tr>

          <tr>
            <td>
              **código de status**
            </td>

            <td>
              Interno
            </td>

            <td>
              O código de status da resposta.
            </td>
          </tr>

          <tr>
            <td>
              **sucesso**
            </td>

            <td>
              Boleano
            </td>

            <td>
              Status da solicitação.
            </td>
          </tr>

          <tr>
            <td>
              **mensagem de erro**
            </td>

            <td>
              Corda
            </td>

            <td>
              Motivo da falha como mensagem.
            </td>
          </tr>
        </tbody>
      </table>
    </TabsPageItem>

    <TabsPageItem id="httppostexample">
      <table>
        <thead>
          <tr>
            <th>
              Definição de fluxo de trabalho
            </th>

            <th>
              Entrada
            </th>

            <th>
              Saída
            </th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>
              ```yaml
                name: httpPostTest

                steps:
                  - name: query
                    type: action
                    action: http.post
                    version: 1
                    inputs:
                      url: ${{ .workflowInputs.url }}
                      urlParams: ${{ .workflowInputs.urlParams }}
                      headers: ${{ .workflowInputs.headers }}
                      body: ${{ .workflowInputs.body }}
                      selectors: ${{ .workflowInputs.selectors }}
              ```
            </td>

            <td>
              ```yaml
                {
                  "inputs": [
                    {
                      "key": "url",
                      "value": "https://example.com"
                    },
                    {
                      "key": "headers",
                      "value": "{\"Content-Type\":\"application/json\"}"
                    },
                    {
                      "key": "urlParams",
                      "value": "{\"foo\": \"bar\"}"
                    },
                    {
                      "key": "body",
                      "value": "{\"foo\": \"bar\"}"
                    },
                    {
                      "key": "selectors",
                      "value": "[{\"name\": \"responseBody\", \"expression\": \".responseBody\"}, {\"name\": \"statusCode\", \"expression\": \".statusCode\"}]"
                    }
                  ]
                }
              ```
            </td>

            <td>
              ```yaml
                Success case:
                  {
                    "success": true,
                    "responseBody": "",
                    "statusCode": 200
                  }

                Failure case:
                  {
                    "errorMessage": "An unexpected error failed to call http post endpoint.",
                    "success": false
                  }
              ```
            </td>
          </tr>
        </tbody>
      </table>
    </TabsPageItem>
  </TabsPages>
</Tabs>