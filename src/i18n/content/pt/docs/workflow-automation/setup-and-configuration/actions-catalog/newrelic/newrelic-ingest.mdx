---
title: Ações de ingestão do New Relic
tags:
  - workflow automation
  - workflow
  - workflow automation actions
  - New Relic actions
  - New Relic Ingest actions
metaDescription: A list of available new relic ingest actions in the actions catalog for workflow definitions
freshnessValidatedDate: never
translationType: machine
---

<Callout title="visualização">
  Ainda estamos trabalhando nesse recurso, mas adoraríamos que você experimentasse!

  Atualmente, esse recurso é fornecido como parte de um programa de visualização de acordo com nossas [políticas de pré-lançamento](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy).
</Callout>

Esta página fornece uma referência completa para as ações de ingestão do New Relic disponíveis no catálogo de ações de automação do fluxo de trabalho. Essas ações permitem que você envie eventos e logs para o New Relic.

## Pré-requisitos

Antes de usar as ações New Relic na automação do fluxo de trabalho, certifique-se de ter:

* Uma conta New Relic com as permissões apropriadas.
* Uma chave de licença do New Relic (caso esteja enviando dados para uma conta diferente).
* As permissões necessárias para os serviços específicos do New Relic que você planeja usar.

Consulte [chave de licença](/docs/apis/intro-apis/new-relic-api-keys/#license-key) para obter informações sobre como criar e gerenciar sua conta New Relic chave de licença.

## Ações de ingestão de dados

<CollapserGroup>
  <Collapser id="newrelic-ingest-sendevents" title="Enviar evento personalizado para New Relic">
    Reporta um evento personalizado ao New Relic.

    <Tabs>
      <TabsBar>
        <TabsBarItem id="createventinputs">
          Entradas
        </TabsBarItem>

        <TabsBarItem id="createventoutputs">
          Saídas
        </TabsBarItem>

        <TabsBarItem id="createventexample">
          Exemplo
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="createventinputs">
          <table>
            <thead>
              <tr>
                <th>
                  Campo de entrada
                </th>

                <th>
                  Opcionalidade
                </th>

                <th>
                  Tipo
                </th>

                <th>
                  Descrição
                </th>

                <th>
                  Exemplo
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **atributo**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  Mapa
                </td>

                <td>
                  Atributo comum que faz parte de todos os eventos quando fornecido.

                  A fusão de cada item de evento, quando necessário, substitui a definição comum.
                </td>

                <td>
                  `"{\"page\": \"1\", \"limit\": \"10\"}"`
                </td>
              </tr>

              <tr>
                <td>
                  **eventos**
                </td>

                <td>
                  Obrigatório
                </td>

                <td>
                  Lista
                </td>

                <td>
                  Lista de dados do evento.

                  <Callout variant="important">
                    O evento requer o uso de um campo `eventType` que representa o tipo personalizado do evento. O número máximo de eventos permitidos por solicitação é **100**.
                  </Callout>
                </td>

                <td>
                  `"[{\"eventType\":\"XYZ\",\"attributes\":{\"foo\":\"bar\"}}, {\"eventType\":\"ABC\",\"value\":\"1234\",\"attributes\":{\"color\":\"red\"}}]"`
                </td>
              </tr>

              <tr>
                <td>
                  **chave de licença**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  Corda
                </td>

                <td>
                  A **chave de licença da contaNew Relic **(obrigatória) especifica a conta de destino para o seu evento. Caso não seja fornecida, o sistema utiliza a chave de licença padrão da conta que executa o fluxo de trabalho.

                  [Leia mais sobre nossa chave de API](/docs/apis/intro-apis/new-relic-api-keys/#license-key) para criar e gerenciar sua **contaNew Relic **.
                </td>

                <td>
                  `"{{ .secrets.secretName }}"`

                  , onde 

                  `secretName`

                   é a chave sob a qual a chave de licença está armazenada.
                </td>
              </tr>

              <tr>
                <td>
                  **seletores**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  Lista
                </td>

                <td>
                  Os seletores permitem obter apenas o parâmetro especificado como saída.
                </td>

                <td>
                  `[{\"name\": \"success\", \"expression\": \".success\"}]`
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="createventoutputs">
          <table>
            <thead>
              <tr>
                <th>
                  Campo de saída
                </th>

                <th>
                  Tipo
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **sucesso**
                </td>

                <td>
                  Boleano
                </td>
              </tr>

              <tr>
                <td>
                  **mensagem de erro**
                </td>

                <td>
                  corda
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="createventexample">
          <table>
            <thead>
              <tr>
                <th>
                  Exemplo de fluxo de trabalho
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  ```yaml
                  name: heartbeat_newrelicIngestSendEvents

                  workflowInputs:
                    cellName:
                      type: String

                  steps:
                    - name: runAction
                      type: action
                      action: newrelic.ingest.sendEvents
                      version: 1
                      inputs:
                        attributes:
                          colour: red
                          id: 1234
                        events:
                          - eventType: HeartBeat
                            test: "OK"
                            attributes:
                              foo: bar
                          - eventType: HeartBeat1234
                            test: "OK1234"
                            attributes:
                              foo: bar
                          - eventType: HeartBeat12345
                            test: "OK12345"
                            attributes:
                              foo: bar
                              colour: yellow
                          - eventType: HeartBeat12345678
                            test: "OK12345678"
                        selectors:
                          - name: success
                            expression: ".success"
                  ```

                  **Resultado esperado:**

                  ```yaml
                    {
                      "success": true
                    }
                  ```

                  **Recuperar evento:**

                  Após executar um fluxo de trabalho com sucesso, você pode recuperar o evento associado executando uma consulta na conta que executou o fluxo de trabalho:

                  ```sql
                  SELECT * FROM HeartBeat
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>
</CollapserGroup>

<CollapserGroup>
  <Collapser id="newrelic-ingest-sendlogs" title="Enviar registro para New Relic">
    Enviar registro para New Relic

    <Tabs>
      <TabsBar>
        <TabsBarItem id="newrelic-ingest-sendlogsinputs">
          Entradas
        </TabsBarItem>

        <TabsBarItem id="newrelic-ingest-sendlogsoutputs">
          Saídas
        </TabsBarItem>

        <TabsBarItem id="newrelic-ingest-sendlogsexample">
          Exemplo
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="newrelic-ingest-sendlogsinputs">
          <table>
            <thead>
              <tr>
                <th>
                  Campo de entrada
                </th>

                <th>
                  Opcionalidade
                </th>

                <th>
                  Tipo
                </th>

                <th>
                  Descrição
                </th>

                <th>
                  Exemplo
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **atributo**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  Mapa
                </td>

                <td>
                  Os atributos comuns são incluídos em todos os logs quando fornecidos. Esses valores são mesclados com cada item de log, sendo que os valores específicos de cada log têm precedência sobre os atributos comuns quando ocorrem conflitos.
                </td>

                <td>
                  `"{\"page\": \"1\", \"limit\": \"10\"}"`
                </td>
              </tr>

              <tr>
                <td>
                  **logs**
                </td>

                <td>
                  Obrigatório
                </td>

                <td>
                  Lista
                </td>

                <td>
                  Lista de logs. Cada 

                  **log**

                   requer um campo 

                  `message`

                   . Máximo de 100 logs por solicitação.
                </td>

                <td>
                  `"[{\"message\":\"XYZ\",\"attributes\":{\"foo\":\"bar\"}}, {\"message\":\"ABC\",\"value\":\"1234\",\"attributes\":{\"color\":\"red\"}}]"`
                </td>
              </tr>

              <tr>
                <td>
                  **chave de licença**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  Corda
                </td>

                <td>
                  A **chave de licença da contaNew Relic **(obrigatória) especifica a conta de destino para o seu evento. Caso não seja fornecida, o sistema utiliza a chave de licença padrão da conta que executa o fluxo de trabalho.

                  [Leia mais sobre nossa chave de API](/docs/apis/intro-apis/new-relic-api-keys/#license-key) para criar e gerenciar sua **contaNew Relic **.
                </td>

                <td>
                  `"{{ .secrets.secretName }}"`

                  , onde 

                  `secretName`

                   é a chave sob a qual a chave de licença está armazenada.
                </td>
              </tr>

              <tr>
                <td>
                  **seletores**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  Lista
                </td>

                <td>
                  Os seletores permitem obter apenas o parâmetro especificado como saída.
                </td>

                <td />
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="newrelic-ingest-sendlogsoutputs">
          <table>
            <thead>
              <tr>
                <th>
                  Campo de saída
                </th>

                <th>
                  Tipo
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **sucesso**
                </td>

                <td>
                  Boleano
                </td>
              </tr>

              <tr>
                <td>
                  **mensagem de erro**
                </td>

                <td>
                  corda
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="newrelic-ingest-sendlogsexample">
          <table>
            <thead>
              <tr>
                <th>
                  Exemplo de fluxo de trabalho
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  ```yaml
                  name: heartbeat_newrelicIngestSendLogs

                  workflowInputs:
                    cellName:
                      type: String

                  steps:
                    - name: runAction
                      type: action
                      action: newrelic.ingest.sendLogs
                      version: 1
                      inputs:
                        attributes:
                          colour: red
                          id: 1234
                        logs:
                          - message: 'Heartbeat sendLogs Action Test Message'
                            attributes:
                              foo: bar
                          - message: 'HeartBeat1234'
                            attributes:
                              foo: bar
                          - message: 'HeartBeat12345'
                            attributes:
                              foo: bar
                              colour: yellow
                          - message: 'HeartBeat12345678'
                        selectors:
                          - name: success
                            expression: ".success"
                  ```

                  **Resultado esperado:**

                  ```yaml
                    {
                      "success": true
                    }
                  ```

                  **Recuperar logs:**

                  Após executar um fluxo de trabalho com sucesso, você pode recuperar o log associado executando uma consulta na conta que executou o fluxo de trabalho:

                  ```sql
                  SELECT * FROM Log
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>
</CollapserGroup>

<CollapserGroup>
  <Collapser id="newrelic.ingest.sendMetrics" title="Enviar métrica para New Relic">
    <Tabs>
      <TabsBar>
        <TabsBarItem id="newrelic-ingest-sendmetricsinputs">
          Entradas
        </TabsBarItem>

        <TabsBarItem id="newrelic-ingest-sendmetricsoutputs">
          Saídas
        </TabsBarItem>

        <TabsBarItem id="newrelic-ingest-sendmetricsexample">
          Exemplo
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="newrelic-ingest-sendmetricsinputs">
          <table>
            <thead>
              <tr>
                <th>
                  Campo de entrada
                </th>

                <th>
                  Opcionalidade
                </th>

                <th>
                  Tipo
                </th>

                <th>
                  Exemplo
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **métrica**
                </td>

                <td>
                  Obrigatório
                </td>

                <td>
                  Lista
                </td>

                <td>
                  `[ { "name": "service.errors.all", "type": "count", "value": 9, "attributes": { "service.response.statuscode": "400" } },`

                  `{ "name": "service.errors.all", "type": "gauge", "value": 4, "attributes": { "service.response.statuscode": "500" } },`

                  `{ "name": "service.response.duration", "type": "summary", "value": { "count": 5, "sum": 0.004382655, "min": 0.0005093, "max": 0.001708826 }, "attributes": { "service.response.statuscode": "200" } } ]`
                </td>
              </tr>

              <tr>
                <td>
                  **atributo**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  Mapa
                </td>

                <td>
                  `{ "timestamp": 1531414060739, "interval.ms": 10000, "attributes": { "app.name": "foo", "host.name": "dev.server.com" } }`
                </td>
              </tr>

              <tr>
                <td>
                  **chave de licença**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  Corda
                </td>

                <td>
                  A **chave de licença da contaNew Relic **(obrigatória) especifica a conta de destino para o seu evento. Caso não seja fornecida, o sistema utiliza a chave de licença padrão da conta que executa o fluxo de trabalho.

                  [Leia mais sobre nossa chave de API](/docs/apis/intro-apis/new-relic-api-keys/#license-key) para criar e gerenciar sua **contaNew Relic **.

                  Não insira credenciais em texto simples. Veja abaixo um exemplo de sintaxe de segredos.

                  Exemplo: `"{{ .secrets.secretName }}"`, onde `secretName` é a chave sob a qual a chave de licença é armazenada.
                </td>
              </tr>

              <tr>
                <td>
                  **seletores**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  Lista
                </td>

                <td>
                  `[{"name": "error", "expression": ".errorMessage"}]`
                </td>
              </tr>
            </tbody>
          </table>

          ### Pares de chave-valor obrigatórios no `metrics`

          Cada mapa de ponto de dados de métrica na lista `metrics` usa a seguinte estrutura de chave-valor:

          <table>
            <thead>
              <tr>
                <th>
                  Atributo
                </th>

                <th>
                  Tipo
                </th>

                <th>
                  Opcionalidade
                </th>

                <th>
                  Descrição
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **nome**
                </td>

                <td>
                  Corda
                </td>

                <td>
                  Obrigatório
                </td>

                <td>
                  O nome da métrica. O valor deve ter menos de 255 caracteres.
                </td>
              </tr>

              <tr>
                <td>
                  **valor**
                </td>

                <td>
                  Número ou Mapa
                </td>

                <td>
                  Obrigatório
                </td>

                <td>
                  O valor varia dependendo do 

                  [tipo de métrica](/docs/data-apis/understand-data/metric-data/metric-data-type/)

                  . Para 

                  `gauge`

                   e 

                  `count`

                  , o valor deve ser um único número. Para 

                  `summary`

                  , o valor deve ser um mapa com pares chave-valor especificando a contagem, soma, mínimo e máximo.
                </td>
              </tr>

              <tr>
                <td>
                  **Timestamp**
                </td>

                <td>
                  Longo
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  O horário de início da métrica em 

                  [tempo Unix](https://currentmillis.com/)

                  . O padrão usa o fuso horário UTC. Este campo também suporta segundos, microssegundos e nanossegundos. No entanto, os dados serão convertidos em milissegundos para armazenamento e consulta. As métricas são descartadas se tiverem um carimbo de data/hora com mais de 48 horas no passado ou mais de 24 horas no futuro a partir do momento em que são relatadas.
                </td>
              </tr>

              <tr>
                <td>
                  **intervalo.ms**
                </td>

                <td>
                  Positivo longo
                </td>

                <td>
                  Obrigatório para 

                  `count`

                   e 

                  `summary`

                   

                  [tipos de métricas](/docs/data-apis/understand-data/metric-data/metric-data-type/)

                  .
                </td>

                <td>
                  A duração da janela de tempo.
                </td>
              </tr>

              <tr>
                <td>
                  **tipo**
                </td>

                <td />

                <td>
                  Recomendado
                </td>

                <td>
                  Suporta apenas 

                  `count`

                  , 

                  `gauge`

                  , 

                  `summary`

                  , consulte 

                  [tipos de métricas suportados](/docs/data-apis/understand-data/metric-data/metric-data-type/)

                   para obter mais informações. Se você não especificar um tipo, o padrão será 

                  `gauge`

                  .
                </td>
              </tr>

              <tr>
                <td>
                  **atributo**
                </td>

                <td>
                  Strings, números JSON ou booleanos
                </td>

                <td>
                  Recomendado
                </td>

                <td>
                  Um mapa de pares chave-valor associados a esta métrica específica. Os valores podem ser strings, números JSON ou booleanos. As chaves diferenciam maiúsculas de minúsculas e devem ter menos de 255 caracteres.
                </td>
              </tr>
            </tbody>
          </table>

          <Callout variant="important">
            A API de métricas exige um `timestamp`. Dentro da ação, o `timestamp` é opcional, com o padrão sendo a hora atual se não fornecido antes da ingestão de métricas.
          </Callout>

          ### Compartilhe atributo entre métricas com `common`

          Se você deseja incluir um conjunto de atributos em várias métricas (e não adicionar os mesmos atributos para cada métrica), você pode usar o bloco `common`. Este é um mapa opcional que especifica informações que se aplicam a todos os pontos de dados de métricas associados. Os valores na seção `common` serão substituídos se a mesma chave existir em um ponto de dados de métrica.

          O bloco pode incluir:

          <table>
            <thead>
              <tr>
                <th>
                  Atributo
                </th>

                <th>
                  Tipo
                </th>

                <th>
                  Opcionalidade
                </th>

                <th>
                  Descrição
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **Timestamp**
                </td>

                <td>
                  Longo
                </td>

                <td />

                <td>
                  A hora de início da métrica no 

                  [horário Unix](https://currentmillis.com/)

                  . O padrão é a hora atual no fuso horário UTC. Este campo também oferece suporte a segundos, microssegundos e nanossegundos. Porém, os dados serão convertidos em milissegundos para armazenamento e consulta posterior.
                </td>
              </tr>

              <tr>
                <td>
                  **intervalo.ms**
                </td>

                <td>
                  Positivo longo
                </td>

                <td>
                  Obrigatório para 

                  `count`

                   e 

                  `summary`
                </td>

                <td>
                  A duração da janela de tempo.
                </td>
              </tr>

              <tr>
                <td>
                  **atributo**
                </td>

                <td>
                  Strings, números JSON ou booleanos
                </td>

                <td />

                <td>
                  Um mapa de pares de valores principais associados a esta métrica específica. Os valores podem ser strings, números JSON ou booleanos.
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="newrelic-ingest-sendmetricsoutputs">
          <table>
            <thead>
              <tr>
                <th>
                  Campo de saída
                </th>

                <th>
                  Tipo
                </th>

                <th>
                  Exemplo
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **requestId**
                </td>

                <td>
                  Corda
                </td>

                <td>
                  `13325ef9-0001-b193-510f-019ba20b0792`
                </td>
              </tr>

              <tr>
                <td>
                  **sucesso**
                </td>

                <td>
                  Boleano
                </td>

                <td>
                  `success: true | false`
                </td>
              </tr>

              <tr>
                <td>
                  **mensagem de erro**
                </td>

                <td>
                  Corda
                </td>

                <td>
                  `Failure reason as message.`
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="newrelic-ingest-sendmetricsexample">
          <table>
            <thead>
              <tr>
                <th>
                  Exemplo de fluxo de trabalho
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  ```yaml
                    - name: sendMetrics
                      type: action
                      action: newrelic.ingest.sendMetrics
                      version: 1
                      inputs:
                        metrics:
                          - name: service.errors.all
                            type: count
                            value: 9
                            timestamp: 1531414060739
                            attributes:
                              service.response.statuscode: 400
                          - name: service.response.duration
                            type: guage
                            value: 4
                            timestamp: 1531414060733
                            attributes:
                              service.response.statuscode: 500
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>
</CollapserGroup>