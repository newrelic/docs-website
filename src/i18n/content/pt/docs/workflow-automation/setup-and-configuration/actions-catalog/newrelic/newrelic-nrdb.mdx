---
title: Ações do New Relic NRDB
tags:
  - workflow automation
  - workflow
  - workflow automation actions
  - New Relic actions
  - New Relic NRDB actions
metaDescription: A list of available new relic nrdb actions in the actions catalog for workflow definitions
freshnessValidatedDate: never
translationType: machine
---

<Callout title="visualização">
  Ainda estamos trabalhando nesse recurso, mas adoraríamos que você experimentasse!

  Atualmente, esse recurso é fornecido como parte de um programa de visualização de acordo com nossas [políticas de pré-lançamento](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy).
</Callout>

Esta página fornece uma referência completa para as ações do New Relic NRDB disponíveis no catálogo de ações de automação de fluxo de trabalho. Essas ações permitem que você consulte o banco de dados New Relic.

## Pré-requisitos

Antes de usar as ações New Relic na automação do fluxo de trabalho, certifique-se de ter:

* Uma conta New Relic com as permissões apropriadas.
* Uma chave de licença do New Relic (caso esteja enviando dados para uma conta diferente).
* As permissões necessárias para os serviços específicos do New Relic que você planeja usar.

Consulte [chave de licença](/docs/apis/intro-apis/new-relic-api-keys/#license-key) para obter informações sobre como criar e gerenciar sua conta New Relic chave de licença.

<CollapserGroup>
  <Collapser id="newrelic.nrdb.query" title="consulta NRQL contas cruzadas">
    Executa uma consulta NRQL entre contas através da API do NerdGraph.

    <Tabs>
      <TabsBar>
        <TabsBarItem id="nrdbqueryinputs">
          Entradas
        </TabsBarItem>

        <TabsBarItem id="nrdbqueryoutputs">
          Saídas
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="nrdbqueryinputs">
          <table>
            <thead>
              <tr>
                <th>
                  Entrada
                </th>

                <th>
                  Opcionalidade
                </th>

                <th>
                  Tipo
                </th>

                <th>
                  Descrição
                </th>

                <th>
                  Exemplo
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **consulta**
                </td>

                <td>
                  Obrigatório
                </td>

                <td>
                  Corda
                </td>

                <td>
                  A instrução de consulta NRQL.
                </td>

                <td />
              </tr>

              <tr>
                <td>
                  **IDs da conta**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  Lista de inteiros
                </td>

                <td>
                  **Os IDs de conta do New Relic**

                   especificam as contas de destino para a execução da consulta. Caso não seja fornecida, a consulta será executada na conta de execução do fluxo de trabalho.
                </td>

                <td />
              </tr>

              <tr>
                <td>
                  **seletores**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  Lista
                </td>

                <td>
                  Os seletores permitem obter como saída apenas o parâmetro especificado.
                </td>

                <td>
                  ```yaml
                      steps:
                    - name: queryForLog
                      type: action
                      action: newrelic.nrdb.query
                      version: 1
                      inputs:
                        accountIds: [12345]
                        query: FROM Log SELECT * WHERE message LIKE 'DEMO%'
                        selectors:
                          - name: resultsAsString
                            expression: '.results | tostring'
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="nrdbqueryoutputs">
          <table>
            <thead>
              <tr>
                <th>
                  Saída
                </th>

                <th>
                  Tipo
                </th>

                <th>
                  Descrição
                </th>

                <th>
                  Exemplo
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **resultados**
                </td>

                <td />

                <td>
                  Uma matriz de objetos contendo os resultados da consulta. Consulte 

                  [a propriedade Expressões](/docs/workflow-automation/workflow-automation-apis/definition-schema/#expression-properties)

                   para obter mais informações.
                </td>

                <td />
              </tr>

              <tr>
                <td>
                  **sucesso**
                </td>

                <td>
                  Boleano
                </td>

                <td>
                  Status da solicitação.
                </td>

                <td />
              </tr>

              <tr>
                <td>
                  **mensagem de erro**
                </td>

                <td>
                  Corda
                </td>

                <td>
                  Motivo da falha como mensagem.
                </td>

                <td>
                  ```yaml
                        {
                      "success": true
                      results=[
                        { message=[INFO] - Workflow: test has ended, messageId=39af98 }, 
                        { message=[INFO] - Workflow: test - Step query has started, messageId=649c612 },
                        ...
                      ]
                    }
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>
</CollapserGroup>

<CollapserGroup>
  <Collapser id="newrelic.nrdb.query" title="Consultar NRDB">
    Executa uma consulta NRQL entre contas através da API NerdGraph.

    <Tabs>
      <TabsBar>
        <TabsBarItem id="newrelic-nrdb-queryinputs">
          Entradas
        </TabsBarItem>

        <TabsBarItem id="newrelic-nrdb-queryoutputs">
          Saídas
        </TabsBarItem>

        <TabsBarItem id="newrelic-nrdb-queryexample">
          Exemplo
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="newrelic-nrdb-queryinputs">
          <table>
            <thead>
              <tr>
                <th>
                  Campo de entrada
                </th>

                <th>
                  Opcionalidade
                </th>

                <th>
                  Tipo
                </th>

                <th>
                  Descrição
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **consulta**
                </td>

                <td>
                  Obrigatório
                </td>

                <td>
                  Corda
                </td>

                <td>
                  A instrução de consulta NRQL.
                </td>
              </tr>

              <tr>
                <td>
                  **IDs da conta**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  Lista de inteiros
                </td>

                <td>
                  A entrada 

                  **New Relic Account IDs**

                   aceita uma lista de IDs de conta que especificam contra quais contas a consulta será executada. Se esta entrada não for fornecida, a consulta usará por padrão a conta de execução do fluxo de trabalho.
                </td>
              </tr>

              <tr>
                <td>
                  **format**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  Enum
                </td>

                <td>
                  Para especificar o tipo para os resultados, aceita apenas 

                  `JSON`

                   ou 

                  `CSV`

                  . O padrão é 

                  `JSON`

                  .
                </td>
              </tr>

              <tr>
                <td>
                  **seletores**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  Lista
                </td>

                <td>
                  Os seletores permitem obter como saída apenas o parâmetro especificado.
                </td>
              </tr>
            </tbody>
          </table>

          ### Exemplo

          ```yaml
          steps:
            - name: queryForLog
              type: action
              action: newrelic.nrdb.query
              version: 1
              inputs:
                accountIds: [12345]
                query: FROM Log SELECT * WHERE message LIKE 'DEMO%'
                selectors:
                  - name: resultsAsString
                    expression: '.results | tostring'
          ```
        </TabsPageItem>

        <TabsPageItem id="newrelic-nrdb-queryoutputs">
          <table>
            <thead>
              <tr>
                <th>
                  Campo de saída
                </th>

                <th>
                  Tipo
                </th>

                <th>
                  Descrição
                </th>

                <th>
                  Exemplo
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **resultados**
                </td>

                <td />

                <td>
                  Uma matriz de objetos contendo os resultados da consulta. Consulte 

                  [a propriedade Expressões](/docs/workflow-automation/workflow-automation-apis/definition-schema/#expression-properties)

                   para obter mais informações.
                </td>

                <td />
              </tr>

              <tr>
                <td>
                  **sucesso**
                </td>

                <td>
                  Boleano
                </td>

                <td>
                  Status da solicitação.
                </td>

                <td />
              </tr>

              <tr>
                <td>
                  **mensagem de erro**
                </td>

                <td>
                  Corda
                </td>

                <td>
                  Motivo da falha como mensagem.
                </td>

                <td>
                  ```yaml
                  {
                    "success": true
                    results=[
                      { message=[INFO] - Workflow: test has ended, messageId=39af98 }, 
                      { message=[INFO] - Workflow: test - Step query has started, messageId=649c612 },
                      ...
                    ]
                  }
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="newrelic-nrdb-queryexample">
          <table>
            <thead>
              <tr>
                <th>
                  Exemplo de fluxo de trabalho
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  ```yaml
                    - name: sendMetrics
                      type: action
                      action: newrelic.ingest.sendMetrics
                      version: 1
                      inputs:
                        metrics:
                          - name: service.errors.all
                            type: count
                            value: 9
                            timestamp: 1531414060739
                            attributes:
                              service.response.statuscode: 400
                          - name: service.response.duration
                            type: guage
                            value: 4
                            timestamp: 1531414060733
                            attributes:
                              service.response.statuscode: 500
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>
</CollapserGroup>