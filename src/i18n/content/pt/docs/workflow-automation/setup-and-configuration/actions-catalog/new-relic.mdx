---
title: Ações da New Relic
tags:
  - workflow automation
  - workflow
  - workflow automation actions
  - New relic actions
metaDescription: A list of available actions in the actions catalog for workflow definitions
freshnessValidatedDate: never
translationType: machine
---

<Callout title="visualização">
  Ainda estamos trabalhando nesse recurso, mas adoraríamos que você experimentasse!

  Atualmente, esse recurso é fornecido como parte de um programa de visualização de acordo com nossas [políticas de pré-lançamento](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy).
</Callout>

Esta página fornece uma referência completa das ações do New Relic disponíveis no catálogo de ações de automação de fluxo de trabalho. Essas ações permitem integrar recursos da plataforma New Relic em suas definições de fluxo de trabalho, incluindo envio de eventos personalizados e logs, execução de consulta NerdGraph, execução de consulta NRQL e envio de notificação.

## Pré-requisitos

Antes de usar as ações New Relic na automação do fluxo de trabalho, certifique-se de ter:

* Uma conta New Relic com as permissões apropriadas.
* Uma chave de licença do New Relic (caso esteja enviando dados para uma conta diferente).
* As permissões necessárias para os serviços específicos do New Relic que você planeja usar.

Consulte [chave de licença](/docs/apis/intro-apis/new-relic-api-keys/#license-key) para obter informações sobre como criar e gerenciar sua conta New Relic chave de licença.

## Ações disponíveis em New Relic

Guia rápido de todas as ações da New Relic por categoria:

<table>
  <thead>
    <tr>
      <th style={{ width: "150px" }}>
        Categoria
      </th>

      <th style={{ width: "250px" }}>
        Ação
      </th>

      <th>
        Propósito
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        **Ingestão de dados**
      </td>

      <td>
        [Enviar evento personalizado](#newrelicingestsendevents)
      </td>

      <td>
        Enviar evento personalizado para New Relic.
      </td>
    </tr>

    <tr>
      <td>
        **Ingestão de dados**
      </td>

      <td>
        [Enviar logs](#newrelicingestsendlogs)
      </td>

      <td>
        Enviar dados de logs para o New Relic.
      </td>
    </tr>

    <tr>
      <td>
        **NerdGraph**
      </td>

      <td>
        [Executar consulta ou mutação GraphQL](#newrelicnerdgraphexecute)
      </td>

      <td>
        Execute comandos GraphQL na API NerdGraph.
      </td>
    </tr>

    <tr>
      <td>
        **Consulta**
      </td>

      <td>
        [Executar consulta NRDB](#newrelicnrdbquery)
      </td>

      <td>
        Executar consultoria NRQL entre contas.
      </td>
    </tr>

    <tr>
      <td>
        **Notificação**
      </td>

      <td>
        [Enviar notificação](#newrelicnotificationsend)
      </td>

      <td>
        Envie notificação para destinos New Relic.
      </td>
    </tr>
  </tbody>
</table>

## Ações de ingestão de dados

<CollapserGroup>
  <Collapser id="newrelic.ingest.sendEvents" title="Enviar evento personalizado para New Relic">
    Envia um evento personalizado para New Relic

    <Tabs>
      <TabsBar>
        <TabsBarItem id="createventinputs">
          Entradas
        </TabsBarItem>

        <TabsBarItem id="createventoutputs">
          Saídas
        </TabsBarItem>

        <TabsBarItem id="createventexample">
          Exemplo
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="createventinputs">
          <table>
            <thead>
              <tr>
                <th>
                  Campo de entrada
                </th>

                <th>
                  Opcionalidade
                </th>

                <th>
                  Tipo
                </th>

                <th>
                  Exemplo
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **atributo**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  map
                </td>

                <td>
                  `"{\"page\": \"1\", \"limit\": \"10\"}"`
                </td>
              </tr>

              <tr>
                <td>
                  **eventos**
                </td>

                <td>
                  Obrigatório
                </td>

                <td>
                  list
                </td>

                <td>
                  `"[{\"eventType\":\"XYZ\",\"attributes\":{\"foo\":\"bar\"}}, {\"eventType\":\"ABC\",\"value\":\"1234\",\"attributes\":{\"color\":\"red\"}}]`
                </td>
              </tr>

              <tr>
                <td>
                  **chave de licença**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  corda
                </td>

                <td>
                  `"{{ .secrets.secretName }}"`
                </td>
              </tr>

              <tr>
                <td>
                  **seletores**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  list
                </td>

                <td>
                  `[{\"name\": \"success\", \"expression\": \".success\"}]`
                </td>
              </tr>
            </tbody>
          </table>

          <Callout variant="important">
            * **attributes**: Atributo comum que faz parte de todos os eventos quando fornecido. A fusão de cada item de evento, quando necessário, substitui a definição comum.
            * **events**: A lista de dados do evento. Observe que o evento requer o uso de um campo `eventType` que representa o tipo personalizado do evento e o número máximo de eventos permitidos por solicitação é 100.
            * **licenseKey**: A chave de licença da conta New Relic que especifica a conta de destino para onde os eventos são enviados. Caso esse valor não seja fornecido, será assumida uma chave de licença padrão com base na conta que executa o fluxo de trabalho.
            * **selectors**: Os seletores para obter apenas o parâmetro especificado como saída.
          </Callout>
        </TabsPageItem>

        <TabsPageItem id="createventoutputs">
          <table>
            <thead>
              <tr>
                <th>
                  Campo de saída
                </th>

                <th>
                  Tipo
                </th>

                <th>
                  Exemplo
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **sucesso**
                </td>

                <td>
                  Boleano
                </td>

                <td>
                  `true`
                </td>
              </tr>

              <tr>
                <td>
                  **mensagem de erro**
                </td>

                <td>
                  corda
                </td>

                <td>
                  `"Error message if operation failed"`
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="createventexample">
          <table>
            <thead>
              <tr>
                <th>
                  Exemplo de fluxo de trabalho
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  ```yaml
                  name: heartbeat_newrelicIngestSendEvents

                  workflowInputs:
                    cellName:
                      type: String

                  steps:
                    - name: runAction
                      type: action
                      action: newrelic.ingest.sendEvents
                      version: 1
                      inputs:
                        attributes:
                          colour: red
                          id: 1234
                        events:
                          - eventType: HeartBeat
                            test: "OK"
                            attributes:
                              foo: bar
                          - eventType: HeartBeat1234
                            test: "OK1234"
                            attributes:
                              foo: bar
                          - eventType: HeartBeat12345
                            test: "OK12345"
                            attributes:
                              foo: bar
                              colour: yellow
                          - eventType: HeartBeat12345678
                            test: "OK12345678"
                        selectors:
                          - name: success
                            expression: ".success"
                  ```

                  **Resultado esperado:**

                  ```yaml
                  {
                    "success": true
                  }
                  ```

                  **Recuperar evento:**

                  Após executar um fluxo de trabalho com sucesso, você pode recuperar o evento associado executando uma consulta na conta que executou o fluxo de trabalho:

                  ```sql
                  SELECT * FROM HeartBeat
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>
</CollapserGroup>

<CollapserGroup>
  <Collapser id="newrelic.ingest.sendLogs" title="Enviar registro para New Relic">
    Enviar registro para New Relic

    <Tabs>
      <TabsBar>
        <TabsBarItem id="newrelic.ingest.sendLogsinputs">
          Entradas
        </TabsBarItem>

        <TabsBarItem id="newrelic.ingest.sendLogsoutputs">
          Saídas
        </TabsBarItem>

        <TabsBarItem id="newrelic.ingest.sendLogsexample">
          Exemplo
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="newrelic.ingest.sendLogsinputs">
          <table>
            <thead>
              <tr>
                <th>
                  Campo de entrada
                </th>

                <th>
                  Opcionalidade
                </th>

                <th>
                  Tipo
                </th>

                <th>
                  Exemplo
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **atributo**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  map
                </td>

                <td>
                  `"{\"page\": \"1\", \"limit\": \"10\"}"`
                </td>
              </tr>

              <tr>
                <td>
                  **logs**
                </td>

                <td>
                  Obrigatório
                </td>

                <td>
                  list
                </td>

                <td>
                  `"[{\"message\":\"XYZ\",\"attributes\":{\"foo\":\"bar\"}}, {\"message\":\"ABC\",\"value\":\"1234\",\"attributes\":{\"color\":\"red\"}}]"`
                </td>
              </tr>

              <tr>
                <td>
                  **chave de licença**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  corda
                </td>

                <td>
                  `"{{ .secrets.secretName }}"`
                </td>
              </tr>

              <tr>
                <td>
                  **seletores**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  list
                </td>

                <td>
                  `[{\"name\": \"success\", \"expression\": \".success\"}]`
                </td>
              </tr>
            </tbody>
          </table>

          <Callout variant="important">
            * **attributes**: Atributo comum incluído em todos os logs quando fornecido. Se um item de log especificar o mesmo atributo, ele substituirá a definição comum.
            * **logs**: A lista de dados de logs. Observe que o número máximo de logs permitidos por solicitação é 100.
            * **licenseKey**: A chave de licença da conta New Relic que especifica a conta de destino para onde os logs são enviados. Caso não seja fornecida, será assumida uma chave de licença padrão com base na conta que executa o fluxo de trabalho. Consulte [a chave de licença](/docs/apis/intro-apis/new-relic-api-keys/#license-key) para obter mais informações.
            * **selectors**: Os seletores para obter apenas o parâmetro especificado como saída.
          </Callout>
        </TabsPageItem>

        <TabsPageItem id="newrelic.ingest.sendLogsoutputs">
          <table>
            <thead>
              <tr>
                <th>
                  Campo de saída
                </th>

                <th>
                  Tipo
                </th>

                <th>
                  Exemplo
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **sucesso**
                </td>

                <td>
                  Boleano
                </td>

                <td>
                  `true`
                </td>
              </tr>

              <tr>
                <td>
                  **mensagem de erro**
                </td>

                <td>
                  corda
                </td>

                <td>
                  `"Error message if operation failed"`
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="newrelic.ingest.sendLogsexample">
          <table>
            <thead>
              <tr>
                <th>
                  Exemplo de fluxo de trabalho
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  ```yaml
                  name: heartbeat_newrelicIngestSendLogs

                  workflowInputs:
                    cellName:
                      type: String

                  steps:
                    - name: runAction
                      type: action
                      action: newrelic.ingest.sendLogs
                      version: 1
                      inputs:
                        attributes:
                          colour: red
                          id: 1234
                        logs:
                          - message: 'Heartbeat sendLogs Action Test Message'
                            attributes:
                              foo: bar
                          - message: 'HeartBeat1234'
                            attributes:
                              foo: bar
                          - message: 'HeartBeat12345'
                            attributes:
                              foo: bar
                              colour: yellow
                          - message: 'HeartBeat12345678'
                        selectors:
                          - name: success
                            expression: ".success"
                  ```

                  **Resultado esperado:**

                  ```yaml
                  {
                    "success": true
                  }
                  ```

                  **Recuperar logs:**

                  Após executar um fluxo de trabalho com sucesso, você pode recuperar o log associado executando uma consulta na conta que executou o fluxo de trabalho:

                  ```sql
                  SELECT * FROM Log
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>
</CollapserGroup>

## Ações do NerdGraph

<CollapserGroup>
  <Collapser id="newrelic.nerdgraph.execute" title="Execute uma consulta ou mutação GraphQL na API New Relic NerdGraph.">
    Executa um comando GraphQL na API NerdGraph do New Relic. O comando pode ser uma consulta ou uma mutação.

    <Tabs>
      <TabsBar>
        <TabsBarItem id="nerdgraphexecuteinputs">
          Entradas
        </TabsBarItem>

        <TabsBarItem id="nerdgraphexecuteoutputs">
          Saídas
        </TabsBarItem>

        <TabsBarItem id="nerdgraphexecuteexample">
          Exemplo
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="nerdgraphexecuteinputs">
          <table>
            <thead>
              <tr>
                <th>
                  Entrada
                </th>

                <th>
                  Opcionalidade
                </th>

                <th>
                  Tipo
                </th>

                <th>
                  Descrição
                </th>

                <th>
                  Exemplo
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **graphql**
                </td>

                <td>
                  Obrigatório
                </td>

                <td>
                  corda
                </td>

                <td>
                  Uma sintaxe GraphQL. Você deve usar o GraphiQL para construir e testar seu comando.
                </td>

                <td />
              </tr>

              <tr>
                <td>
                  **variáveis**
                </td>

                <td>
                  Obrigatório
                </td>

                <td>
                  map[string]any
                </td>

                <td>
                  Quaisquer variáveis de par principal-valor para usar com a instrução GraphQL.
                </td>

                <td />
              </tr>

              <tr>
                <td>
                  **seletores**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  list
                </td>

                <td>
                  Os seletores permitem obter como saída apenas o parâmetro especificado.
                </td>

                <td>
                  ```yaml
                    {
                    "data": {
                      "actor": {
                        "user": {
                          "name": ""
                        }
                      }
                    }
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="nerdgraphexecuteoutputs">
          <table>
            <thead>
              <tr>
                <th>
                  Saída
                </th>

                <th>
                  Tipo
                </th>

                <th>
                  Exemplo
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **dados**
                </td>

                <td>
                  map[string]any: Conteúdo da propriedade 

                  `data`

                   de uma resposta NerdGraph.
                </td>

                <td>
                  ```yaml
                    steps:
                      - name: currentUserId
                        type: action
                        action: newrelic.nerdgraph.execute
                        version: 1
                        inputs:
                          graphql: |
                            query userId {
                              currentUser {
                                id
                              }
                            }
                      - name: sayHello
                        type: action
                        action: example.messaging.sayHello
                        version: 1
                        inputs:
                          name: ${{ .steps.currentUserId.outputs.data.currentUser.id }}
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="nerdgraphexecuteexample">
          <table>
            <thead>
              <tr>
                <th>
                  Exemplo
                </th>

                <th>
                  Saída
                </th>

                <th>
                  Recuperar evento
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  ```json
                      name: testLog

                      steps:
                        - name: logStep
                          type: action
                          action: newrelic.ingest.sendLogs
                          version: 1
                          inputs:
                            logs:
                              - message: 'Hello World'
                  ```
                </td>

                <td>
                  ```yaml
                          {
                            "success": true
                          }
                  ```
                </td>

                <td>
                  Você pode recuperar o evento associado executando uma consulta na conta que executou o fluxo de trabalho.

                  ```yaml
                    SELECT message FROM Log WHERE allColumnSearch('Hello World', insensitive: true) SINCE 30 minutes ago
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>
</CollapserGroup>

## Ações de consulta

<CollapserGroup>
  <Collapser id="newrelic.nrdb.query" title="Execute uma consulta NRDB">
    Executa uma consulta NRQL entre contas através da API do NerdGraph.

    <Tabs>
      <TabsBar>
        <TabsBarItem id="nrdbqueryinputs">
          Entradas
        </TabsBarItem>

        <TabsBarItem id="nrdbqueryoutputs">
          Saídas
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="nrdbqueryinputs">
          <table>
            <thead>
              <tr>
                <th>
                  Entrada
                </th>

                <th>
                  Opcionalidade
                </th>

                <th>
                  Tipo
                </th>

                <th>
                  Descrição
                </th>

                <th>
                  Exemplo
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **consulta**
                </td>

                <td>
                  Obrigatório
                </td>

                <td>
                  corda
                </td>

                <td>
                  A instrução de consulta NRQL.
                </td>

                <td />
              </tr>

              <tr>
                <td>
                  **IDs da conta**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  lista de inteiros
                </td>

                <td>
                  O campo 

                  **New Relic Account ID**

                   é uma lista de IDs de destino que permite especificar as contas de destino nas quais a consulta será executada. Caso esse valor não seja fornecido como entrada, a consulta será executada automaticamente na conta associada à conta de execução do fluxo de trabalho.
                </td>

                <td />
              </tr>

              <tr>
                <td>
                  **seletores**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  list
                </td>

                <td>
                  Os seletores permitem obter como saída apenas o parâmetro especificado.
                </td>

                <td>
                  ```json
                    steps:
                      - name: queryForLog
                        type: action
                        action: newrelic.nrdb.query
                        version: 1
                        inputs:
                          accountIds: [12345]
                          query: FROM Log SELECT * WHERE message LIKE 'DEMO%'
                          selectors:
                            - name: resultsAsString
                              expression: '.results | tostring'
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="nrdbqueryoutputs">
          <table>
            <thead>
              <tr>
                <th>
                  Saída
                </th>

                <th>
                  Tipo
                </th>

                <th>
                  Exemplo
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **results**

                  : Uma matriz de objetos contendo os resultados da consulta.
                </td>

                <td />

                <td>
                  ```yaml
                    {
                      results=[
                        { message=[INFO] - Workflow: test has ended, messageId=39af98 },
                        { message=[INFO] - Workflow: test - Step query has started, messageId=649c612 },
                        ...
                      ]
                    }
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>
</CollapserGroup>

## ações de notificação

<CollapserGroup>
  <Collapser id="newrelic.notification.send" title="Enviar notificação para o destino do New Relic">
    Envia uma mensagem para um canal, integrado com destinos, por exemplo, o Slack.

    <Tabs>
      <TabsBar>
        <TabsBarItem id="newrelicnotificationsendinputs">
          Entradas
        </TabsBarItem>

        <TabsBarItem id="newrelicnotificationsendoutputs">
          Saídas
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="newrelicnotificationsendinputs">
          <table>
            <thead>
              <tr>
                <th>
                  Entrada
                </th>

                <th>
                  Opcionalidade
                </th>

                <th>
                  Tipo
                </th>

                <th>
                  Descrição
                </th>

                <th>
                  Exemplo
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **tipo**
                </td>

                <td>
                  Obrigatório
                </td>

                <td>
                  corda
                </td>

                <td>
                  Tipo de destino do New Relic
                </td>

                <td>
                  `slack`
                </td>
              </tr>

              <tr>
                <td>
                  **id de destino**
                </td>

                <td>
                  Obrigatório
                </td>

                <td>
                  Corda
                </td>

                <td>
                  DestinationId associado ao destino New Relic.
                </td>

                <td>
                  `123e4567-e89b-12d3-a456-426614174000`
                </td>
              </tr>

              <tr>
                <td>
                  **parâmetro**
                </td>

                <td>
                  Obrigatório
                </td>

                <td>
                  map
                </td>

                <td>
                  Campos obrigatórios para enviar notificação ao tipo de destino escolhido.
                </td>

                <td>
                  `{\"channel\": \"${{ YOUR_CHANNEL }}\", \"text\": \"Enter your text here\"}`
                </td>
              </tr>

              <tr>
                <td>
                  **seletores**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  list
                </td>

                <td>
                  Os seletores permitem obter como saída apenas o parâmetro especificado.
                </td>

                <td>
                  `[{\"name\": \"success\", \"expression\": \".success\"}]`
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="newrelicnotificationsendoutputs">
          <table>
            <thead>
              <tr>
                <th>
                  Saída
                </th>

                <th>
                  Tipo
                </th>

                <th>
                  Exemplo
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  sucesso
                </td>

                <td>
                  boleano
                </td>

                <td>
                  `true/false`
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>
</CollapserGroup>