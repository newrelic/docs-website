---
title: Solu√ß√£o de problemas de automa√ß√£o de fluxo de trabalho
tags:
  - workflow automation
  - troubleshooting
  - workflow errors
metaDescription: 'Common issues and solutions for Workflow Automation including AWS credentials, workflow execution, and dashboard problems.'
freshnessValidatedDate: never
translationType: machine
---

<Callout title="visualiza√ß√£o">
  Ainda estamos trabalhando nesse recurso, mas adorar√≠amos que voc√™ experimentasse!

  Atualmente, esse recurso √© fornecido como parte de um programa de visualiza√ß√£o de acordo com nossas [pol√≠ticas de pr√©-lan√ßamento](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy).
</Callout>

Esta p√°gina fornece solu√ß√µes para problemas comuns que voc√™ pode encontrar ao usar o fluxo de trabalho Automation. Para obter suporte adicional, consulte o [F√≥rum de Suporte da New Relic](https://discuss.newrelic.com/) ou entre em contato com [o Suporte da New Relic](https://support.newrelic.com/).

## Credenciais e autentica√ß√£o da AWS

<CollapserGroup>
  <Collapser id="access-denied-errors" title="Erros de acesso negado">
    **Problema:** Seu fluxo de trabalho falha com um erro de autoriza√ß√£o da AWS.

    **Solu√ß√µes:**

    1. **Verifique o ID da sua conta:** Verifique se voc√™ usou `253490767857` (e n√£o `754728514883`) na pol√≠tica de confian√ßa. O ID da conta de integra√ß√£o na nuvem (`754728514883`) √© diferente do ID da conta de automa√ß√£o de fluxo de trabalho.
    2. **Verificar ID externo:** Confirme se o ID externo em sua pol√≠tica de confian√ßa corresponde exatamente ao ID da sua conta New Relic (encontrado em [Configura√ß√µes da conta](/docs/accounts/accounts-billing/account-structure/account-id)).
    3. **Revisar permiss√µes:** Certifique-se de que sua fun√ß√£o ou usu√°rio do IAM tenha as permiss√µes espec√≠ficas da AWS que seu fluxo de trabalho exige. Verifique a tabela de [permiss√µes AWS necess√°rias](/docs/workflow-automation/setup-and-configuration/set-up-aws-credentials#required-aws-permissions).
    4. **Teste com a AWS CLI:** Execute `aws sts assume-role` localmente para verificar se a fun√ß√£o pode ser assumida:
       ```bash
       aws sts assume-role \
       --role-arn "arn:aws:iam::YOUR_ACCOUNT:role/NewRelicWorkflowAutomationRole" \
       --role-session-name "TestSession" \
       --external-id "YOUR_NR_ACCOUNT_ID"
       ```
  </Collapser>
</CollapserGroup>

### tokeninv√°lido ou credenciais expiradas

**Problema:** fluxo de trabalho falha com erros de expira√ß√£o token.

**Solu√ß√µes:**

1. **Para o token de sess√£o:** verifique o timestampde expira√ß√£o ‚Äî os tokens de sess√£o geralmente duram de 1 a 12 horas. Gere novas antes que expirem usando:
   ```bash
   aws sts assume-role \
     --role-arn "arn:aws:iam::YOUR_ACCOUNT:role/YOUR_ROLE" \
     --role-session-name "WorkflowAutomationSession"
   ```
2. **Para chaves de acesso:** Verifique se o ID da chave de acesso e a chave de acesso secreta est√£o armazenados corretamente no gerenciador de segredos. Verifique novamente os valores no [explorador GraphiQL do NerdGraph](https://one.newrelic.com/nerdgraph-graphiql).
3. **Verifique a sintaxe dos segredos:** Certifique-se de estar usando o formato `${{ :secrets:keyName }}`, e n√£o `${{ secrets.keyName }}`. O prefixo de dois pontos (`:secrets:`) √© obrigat√≥rio.

### N√£o consigo encontrar o ARN da minha fun√ß√£o.

**Problema:** Voc√™ precisa do ARN, mas n√£o consegue encontr√°-lo na AWS.

**Solu√ß√£o:**

1. Fa√ßa login no [Console do AWS IAM.](https://console.aws.amazon.com/iam/)
2. Selecione **Roles** na barra de navega√ß√£o.
3. Procure pelo nome da sua fun√ß√£o (ex: `NewRelicWorkflowAutomationRole`)
4. Selecione a fun√ß√£o ‚Äî o ARN aparece na se√ß√£o Resumo.
5. O formato ARN √©: `arn:aws:iam::<YOUR_AWS_ACCOUNT>:role/<ROLE_NAME>`

### fluxo de trabalho n√£o pode acessar recursos espec√≠ficos AWS

**Problema:** Sua fun√ß√£o possui permiss√µes, mas o fluxo de trabalho ainda n√£o consegue acessar determinados recursos.

**Solu√ß√µes:**

1. **Permiss√µes em n√≠vel de recurso:** verifique se sua pol√≠tica do IAM restringe o acesso a ARNs de recursos espec√≠ficos. Voc√™ pode precisar adicionar um curinga (`*`) para testes e, em seguida, restringir a recursos espec√≠ficos.
   ```json
   {
     "Effect": "Allow",
     "Action": "ec2:DescribeInstances",
     "Resource": "*"  // Change from specific ARN to * for testing
   }
   ```
2. **Pol√≠ticas de controle de servi√ßo (SCPs):** Se voc√™ estiver em uma organiza√ß√£o da AWS, as SCPs podem bloquear determinadas a√ß√µes. Entre em contato com o administrador da AWS para revisar as pol√≠ticas da organiza√ß√£o.
3. **Incompatibilidade de regi√£o:** verifique se suas permiss√µes do IAM especificam a regi√£o correta da AWS onde seus recursos est√£o localizados. Atualize o par√¢metro `awsRegion` do fluxo de trabalho para corresponder √† localiza√ß√£o do seu recurso.

## Problemas na execu√ß√£o do fluxo de trabalho

### Guia r√°pido de resolu√ß√£o de problemas

Utilize esta tabela para um diagn√≥stico r√°pido de problemas comuns no fluxo de trabalho:

| **Sintoma**                                                        | **Verificar**                                                            | **Solu√ß√£o**                                                                   |
| ------------------------------------------------------------------ | ------------------------------------------------------------------------ | ----------------------------------------------------------------------------- |
| O fluxo de trabalho falha em uma etapa espec√≠fica.                 | Ver logs de execu√ß√£o para mensagem de erro                               | Corrija a configura√ß√£o, as credenciais ou os dados de entrada para essa a√ß√£o. |
| O fluxo de trabalho √© executado, mas produz resultados incorretos. | Verifique os dados que passam entre as etapas.                           | Verificar sintaxe do modelo `${{ .steps.name.outputs.field }}`                |
| O fluxo de trabalho agendado n√£o est√° sendo executado.             | Verifique o hist√≥rico de execu√ß√µes para identificar execu√ß√µes ignoradas. | Verificar configura√ß√£o de agendamento e status do fluxo de trabalho (Ativo)   |
| O fluxo de trabalho expira                                         | Verificar dura√ß√£o da execu√ß√£o                                            | Reduza a frequ√™ncia de polling ou divida em fluxos de trabalho menores        |
| As altera√ß√µes n√£o surtem efeito.                                   | Verificar hist√≥rico de vers√µes                                           | Atualize as execu√ß√µes agendadas para usar a nova vers√£o.                      |

Para obter instru√ß√µes detalhadas sobre como visualizar logs e hist√≥rico de execu√ß√£o, consulte [Monitorar execu√ß√µes de fluxo de trabalho](/docs/workflow-automation/create-a-workflow-automation/managing-workflow#monitor-runs).

### O fluxo de trabalho aparece com o status &quot;Falha&quot;.

**Problema:** Um fluxo de trabalho aparece com o status &quot;Falha&quot; no dashboard.

**Solu√ß√µes:**

1. **Verifique o hist√≥rico de execu√ß√£o**:

   * Acesse **[one.newrelic.com](https://one.newrelic.com) &gt; All Capabilities &gt; Workflow Automation**
   * Clique no nome do fluxo de trabalho.
   * Veja **Run history** para verificar qual execu√ß√£o falhou.

2. **Analisar os logs de execu√ß√£o**:

   * Clique em **View logs** na execu√ß√£o com falha para identificar a a√ß√£o espec√≠fica que falhou.
   * Procure por mensagens de erro que indiquem a causa raiz.

3. **Causas comuns**:

   * **Credenciais inv√°lidas**: Token expirado, sintaxe de segredos incorreta ou chaves secretas erradas.
   * **Permiss√µes ausentes**: Permiss√µes insuficientes do AWS IAM, escopos de token do bot do Slack ou acesso √† API.
   * **Mudan√ßas nos recursos de destino**: inst√¢ncias do EC2 exclu√≠das, canais do Slack removidos ou banco de dados renomeado
   * **Limites de taxaAPI excedidos**: Muitas requests para servi√ßos externos (AWS, Slack, etc.)
   * **Tempo limite de rede**: APIs externas demorando muito para responder.

4. **Corrigir e executar novamente**: Ap√≥s resolver o problema, acione manualmente o fluxo de trabalho usando a [API StartWorkflowRun](/docs/workflow-automation/workflow-automation-apis/start-workflow-run) para verificar se ele funciona.

### A execu√ß√£o do fluxo de trabalho est√° demorando muito.

**Problema:** As execu√ß√µes do fluxo de trabalho excedem a dura√ß√£o esperada ou o tempo limite.

**Solu√ß√µes:**

1. **Revisar a sequ√™ncia de a√ß√µes**: verificar os logs para identificar a√ß√µes lentas. Procure por a√ß√µes com tempos de execu√ß√£o superiores a 30 segundos.

2. **Otimizar consulta**: Se estiver usando consultas NRQL, otimize-as para melhor desempenho:

   * Adicione intervalos de tempo espec√≠ficos em vez de consultar todos os dados.
   * Use `LIMIT` para reduzir o tamanho do conjunto de resultados.
   * Filtrar antecipadamente com cl√°usulas `WHERE`

3. **Verifique as APIs externas**: Respostas lentas de servi√ßos integrados (AWS, Slack) podem atrasar a execu√ß√£o. Teste API tempo de resposta separadamente.

4. **Considere os limites do fluxo de trabalho**: revise [os limites do fluxo de trabalho](/docs/workflow-automation/limitations-and-faq/workflow-limits) para restri√ß√µes de tempo limite (normalmente 15 minutos por fluxo de trabalho).

5. **Divida o fluxo de trabalho menor**: divida o fluxo de trabalho complexo em automa√ß√µes menores e focadas que podem ser executadas em paralelo.

### As altera√ß√µes no fluxo de trabalho n√£o surtem efeito.

**Problema:** Voc√™ editou um fluxo de trabalho, mas as altera√ß√µes n√£o s√£o aplicadas quando ele √© executado.

**Solu√ß√µes:**

1. **Verifique se voc√™ salvou**: Confira se voc√™ clicou em **Save** ap√≥s editar a configura√ß√£o do fluxo de trabalho.

2. **Verifique a vers√£o**:

   * Acesse os detalhes do fluxo de trabalho.
   * Clique na guia **Version history**
   * Certifique-se de que suas altera√ß√µes mais recentes apare√ßam como uma nova vers√£o.
   * Verifique se esta vers√£o est√° marcada como ativa.

3. **Atualizar execu√ß√µes agendadas**: Se o fluxo de trabalho for executado de acordo com um agendamento, atualize o agendamento para usar a nova vers√£o:

   * Acesse **[one.newrelic.com](https://one.newrelic.com) &gt; All Capabilities &gt; Workflow Automation**
   * Encontre corridas programadas
   * Atualize o cronograma para fazer refer√™ncia √† nova vers√£o do fluxo de trabalho.

4. **Limpar cache**: O cache Browser pode exibir configura√ß√µes antigas ‚Äî atualize a p√°gina completamente (Ctrl+Shift+R ou Cmd+Shift+R).

## problemas dashboard fluxo de trabalho

### N√£o consigo encontrar um fluxo de trabalho no dashboard

**Problema:** Um fluxo de trabalho que voc√™ criou n√£o aparece na lista dashboard.

**Solu√ß√µes:**

1. **Verifique os filtros**:

   * Clique no dropdowndo filtro.
   * Selecione &quot;Todos&quot; para os filtros de status.
   * Limpar a barra de pesquisa

2. **Verificar conta**: Confirme se voc√™ est√° conectado √† conta correta do New Relic onde o fluxo de trabalho foi criado. Verifique o seletor de contas no canto superior direito.

3. **Verifique as permiss√µes**: Certifique-se de que seu perfil do usu√°rio tenha acesso para visualizar o fluxo de trabalho. Entre em contato com o administrador do New Relic se precisar de permiss√µes de acesso ao fluxo de trabalho.

4. **Atualize a p√°gina**: o cache Browser √†s vezes pode ocultar altera√ß√µes recentes. Tente uma atualiza√ß√£o completa da p√°gina (Ctrl+Shift+R ou Cmd+Shift+R).

### N√£o √© poss√≠vel excluir um fluxo de trabalho.

**Problema:** A op√ß√£o de excluir est√° desativada ou a exclus√£o falha.

**Solu√ß√µes:**

1. **Verifique permiss√µes**: Verifique se seu perfil do usu√°rio possui permiss√µes de exclus√£o para fluxo de trabalho. Se necess√°rio, entre em contato com o administrador da sua conta.

2. **Interromper execu√ß√µes agendadas**: Cancele todas as execu√ß√µes agendadas ativas antes de exclu√≠-las.

   * Acesse os detalhes do fluxo de trabalho.
   * Acesse a aba **Scheduled runs**
   * Cancelar todos os agendamentos ativos

3. **Verifique depend√™ncia**: Alguns fluxos de trabalho n√£o podem ser exclu√≠dos se outras automa√ß√µes dependerem deles. Verifique se o fluxo de trabalho √© referenciado por:

   * Outros fluxos de trabalho que o chamam
   * pol√≠tica de alertas que o acionam
   * Sistemas externos que o iniciam via API

4. **Contate o suporte**: Se o problema persistir ap√≥s tentar as solu√ß√µes acima, entre em contato com [o Suporte da New Relic](https://support.newrelic.com/) para obter assist√™ncia.

## Quest√µes espec√≠ficas de integra√ß√£o

### A notifica√ß√£o do Slack n√£o aparece

**Problema:** O fluxo de trabalho √© conclu√≠do com sucesso, mas as mensagens do Slack n√£o aparecem.

**Solu√ß√µes:**

1. **Verifique o ID do canal**: Certifique-se de usar o **ID** do canal do Slack (por exemplo, `C01234ABCD`), e n√£o o nome do canal. Encontre o ID no Slack:

   * Clique com o bot√£o direito do mouse no nome do canal.
   * Selecione **View channel details**.
   * Copie o ID do canal que est√° na parte inferior.

2. **Verifique as permiss√µes do bot**: verifique se o seu bot do Slack possui os seguintes escopos:

   * `chat:write` - Publicar mensagens
   * `channels:read` - Ver canais p√∫blicos
   * `groups:read` - Visualizar canais privados (se aplic√°vel)

3. **Verifique se o bot est√° no canal**: Adicione o bot ao canal Destino:

   * Digite `/invite @YourBotName` no canal
   * Confirme se o bot aparece na lista de membros.

4. **Verificar token em segredos**: Verifique se o token do Slack armazenado no gerenciador de segredos est√° correto e n√£o expirou.

### As opera√ß√µes do AWS Systems Manager falham.

**Problema:** Os documentos ou comandos de automa√ß√£o do SSM n√£o s√£o executados.

**Solu√ß√µes:**

1. **Verificar permiss√µes do SSM**: Certifique-se de que a fun√ß√£o do IAM tenha estas permiss√µes:
   ```json
   {
     "Effect": "Allow",
     "Action": [
       "ssm:CreateDocument",
       "ssm:DeleteDocument",
       "ssm:StartAutomationExecution",
       "ssm:GetAutomationExecution"
     ],
     "Resource": "*"
   }
   ```
2. **Verifique o agente SSM**: verifique se as inst√¢ncias de destino do EC2 t√™m o agente SSM instalado e em execu√ß√£o:
   ```bash
   aws ssm describe-instance-information --region us-east-1
   ```
3. **Verifique o perfil da inst√¢ncia**: as inst√¢ncias do EC2 precisam de um perfil de inst√¢ncia IAM com permiss√µes SSM para executar comandos.
4. **Verificar se o documento existe**: Se estiver usando um documento SSM existente, verifique se ele existe em sua conta e regi√£o da AWS.

## Problemas espec√≠ficos do modelo

### GUID da entidade n√£o encontrado

**Problema:** Os modelos falham com erros `Entity not found`.

**Solu√ß√µes:**

1. **Encontre o GUID da entidade correta**:

   * Acesse a p√°gina de recursos monitorados no New Relic.
   * Verifique o URL ou os metadados da entidade para obter o GUID.
   * Use [a pesquisa de entidade](/docs/new-relic-solutions/new-relic-one/core-concepts/what-entity-new-relic#find) para localizar entidade

2. **Verificar se a entidade existe na conta correta**: Confirme se voc√™ est√° usando a entidade da mesma conta onde o fluxo de trabalho est√° implantado.

3. **Confirme os dados de reporte da entidade**: verifique se a entidade mostra **Last seen** ‚Äî entidades desatualizadas podem ter sido removidas.

4. **Para entidade AWS **: Certifique-se de que [a integra√ß√£o](/docs/infrastructure/amazon-integrations/get-started/introduction-aws-integrations) esteja ativa

<Callout variant="tip">
  **Os GUIDs de entidade s√£o espec√≠ficos da conta.** Mover o fluxo de trabalho entre contas requer a atualiza√ß√£o de todos os GUIDs da entidade.
</Callout>

### A consulta NRQL n√£o retornou resultados.

**Problema:** Os modelos que utilizam NRQL consultam o conte√∫do, mas retornam conjuntos de dados vazios.

**Solu√ß√µes:**

1. **Teste a consulta primeiro**: Use [o criador de consulta](/docs/query-your-data/explore-query-data/query-builder/introduction-query-builder) para validar a consulta antes de adicionar aos modelos

2. **Verificar tipo de dados e nomes de eventos**:

   * Use `FROM Transaction`, n√£o `FROM Transactions`
   * Verifique se os nomes dos atributos correspondem exatamente (diferenciando mai√∫sculas de min√∫sculas).

3. **Ajustar intervalos de tempo**: Para dados esparsos, expanda a janela de tempo:

   * Adicione `SINCE 1 hour ago` para dados recentes.
   * Use `SINCE 1 day ago` para tend√™ncias

4. **Simplifique e teste incrementalmente**: Comece com uma consulta b√°sica e adicione filtros um de cada vez.

5. **Verificar [sintaxe NRQL](/docs/query-your-data/nrql-new-relic-query-language/get-started/introduction-nrql-new-relics-query-language)**: Verificar se a estrutura da consulta corresponde aos requisitos NRQL.

### A implanta√ß√£o do modelo falha

**Problema:** Template n√£o implanta ou apresenta erros durante a implanta√ß√£o.

**Solu√ß√µes:**

1. **Verifique todas as informa√ß√µes necess√°rias**: Certifique-se de ter preenchido todos os campos obrigat√≥rios (credenciais, GUIDs, consulta).
2. **Verifique o formato das credenciais**: os segredos devem usar o formato `${{ :secrets:keyName }}` com o prefixo de dois pontos.
3. **Teste as credenciais de forma independente**: Antes da implanta√ß√£o, teste as credenciais AWS com AWS CLI e o token do Slack na APIdo Slack.
4. **Verifique os requisitos do modelo**: Cada modelo lista pr√©-requisitos espec√≠ficos ‚Äî verifique se todos foram atendidos.
5. **Verifique a presen√ßa de caracteres especiais**: Alguns campos (nomes de canais, consulta) podem n√£o conter caracteres especiais ‚Äî utilize caracteres alfanum√©ricos sempre que poss√≠vel.

### Aprova√ß√£o fluxo de trabalho n√£o responde

**Problema:** Os modelos que exigem aprova√ß√£o do Slack (revers√£o do API Gateway, redimensionamento do EC2) n√£o detectam rea√ß√µes.

**Solu√ß√µes:**

1. **Verificar escopos de token do bot**:

   * `reactions:read` - Necess√°rio para detectar rea√ß√µes com emojis
   * `chat:write` - √â necess√°rio publicar mensagens de aprova√ß√£o.

2. **Verifique o formato da rea√ß√£o**: Use o emoji exato especificado no fluxo de trabalho (normalmente üëç para aprovar, üëé para rejeitar).

3. **Verifique as configura√ß√µes de tempo limite**: requests de aprova√ß√£o expiram ap√≥s o tempo limite configurado (geralmente de 5 a 10 minutos).

4. **Garantir que o bot possa ler as mensagens**: O bot deve estar no canal e ter permiss√£o para ler o hist√≥rico de mensagens.

5. **Teste com aprova√ß√£o simples**: Crie um fluxo de trabalho de teste com apenas l√≥gica de aprova√ß√£o para isolar o problema.

### problemas de gerenciamento de inst√¢ncias do EC2

**Problema:** o modelo EC2 n√£o consegue redimensionar ou gerenciar a estrutura.

**Solu√ß√µes:**

1. **Verifique se [CloudWatch Metric Streams](/install/aws-cloudwatch/) est√£o configurados**: Necess√°rio para m√©tricas EC2 em tempo real.
2. **Verificar se [a integra√ß√£o de monitoramento do EC2](/docs/infrastructure/amazon-integrations/aws-integrations-list/aws-ec2-monitoring-integration/#activate) est√° ativa**: Garante que os dados da inst√¢ncia sejam enviados para o New Relic.
3. **Confirme o estado do participante**: o participante deve estar no estado `running` ou `stopped` ‚Äî estados de transi√ß√£o (pendente, parando) causam falhas.
4. **Verifique a compatibilidade do tipo de inst√¢ncia**: nem todos os tipos de inst√¢ncia suportam todas as opera√ß√µes de redimensionamento - verifique [a documenta√ß√£o do tipo de inst√¢nciaAWS](https://aws.amazon.com/ec2/instance-types/)
5. **Verificar permiss√µes de parada/in√≠cio**: a fun√ß√£o IAM precisa de `ec2:StopInstances` e `ec2:StartInstances` al√©m de `ec2:ModifyInstanceAttribute`

### O modelo de an√°lise JSON n√£o est√° registrando dados.

**Problema:** O modelo de an√°lise JSON √© executado com sucesso, mas nenhum dado aparece nos logs New Relic.

**Solu√ß√µes:**

1. **Verifique os endpointda API**: Teste a URL da p√°gina de status em um navegador ‚Äî certifique-se de que ela retorne um JSON v√°lido.
2. **Verifique a estrutura JSON**: o modelo espera um formato espec√≠fico ‚Äî verifique se os campos de integridade do componente correspondem √† estrutura esperada.
3. **Revisar filtros de log**: Garantir que a a√ß√£o de registro utilize o tipo de evento e o atributo corretos.
4. **Teste com um endpoint simples**: Use um endpoint JSON b√°sico (como `https://httpbin.org/json`) para verificar se a mec√¢nica do modelo funciona.
5. **Verificar permiss√µes da conta**: Verifique se o fluxo de trabalho tem permiss√£o para gravar logs no New Relic.

## Qual √© o pr√≥ximo

* **[Pr√°ticas recomendadas](/docs/workflow-automation/limitations-and-faq/workflow-best-practices)**: Tratamento de erros, otimiza√ß√£o de desempenho, estrat√©gias de teste.
* **[Limites do workflow](/docs/workflow-automation/limitations-and-faq/workflow-limits)**: Compreenda os tempos limite, os limites de taxa e as restri√ß√µes.