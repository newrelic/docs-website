---
title: Crie seu próprio fluxo de trabalho
tags:
  - workflow automation
  - create your own workflow
  - build a workflow using New Relic
metaDescription: Build custom workflows from scratch using drag-and-drop actions. Learn by example with a real-world EC2 automation scenario.
freshnessValidatedDate: never
translationType: machine
---

<Callout title="visualização">
  Ainda estamos trabalhando nesse recurso, mas adoraríamos que você experimentasse!

  Atualmente, esse recurso é fornecido como parte de um programa de visualização de acordo com nossas [políticas de pré-lançamento](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy).
</Callout>

Quando os modelos não atendem às suas necessidades, [a opção &quot;Criar o seu próprio&quot;](https://onenr.io/0OQM47KgxjG) permite que você construa um fluxo de trabalho personalizado. Utilize a interface de arrastar e soltar para encadear ações do [catálogo de ações](/docs/workflow-automation/setup-and-configuration/actions-catalog/actions-catalog) em automações que correspondam ao seu processo.

## Como usar este guia

Este guia mostra como construir um fluxo de trabalho usando conceitos e um exemplo completo. Escolha seu caminho de aprendizado:

* **Aprenda primeiro os conceitos básicos**: Leia [os conceitos básicos](#core-concepts) e [os padrões de fluxo de trabalho](#workflow-patterns) para entender os fundamentos e, em seguida, aplique-os.

* **Siga o exemplo**: Acesse o [passo a passo do exemplo](#example-walkthrough) para criar um fluxo de trabalho de redimensionamento automático do EC2 passo a passo.

* **Padrões de referência**: Use a seção [padrões de fluxo de trabalho](#workflow-patterns) como uma referência rápida ao construir seu próprio fluxo de trabalho

  <Callout variant="tip">
    **Novo no fluxo de trabalho?** Comece pelos conceitos básicos e depois siga o exemplo. O fluxo de trabalho do EC2 demonstra todos os padrões principais em um cenário do mundo real.
  </Callout>

## Por que construir um fluxo de trabalho personalizado?

Crie seu próprio fluxo de trabalho para:

* **Implemente uma lógica de negócios exclusiva** que os modelos não suportam.
* **Integre vários sistemas** além dos modelos padrão.
* **Lide com decisões complexas** com ramificação condicional.
* **Combine o processo de sua equipe** para aprovações e notificações

## Conceitos centrais [#core-concepts]

Entenda esses fundamentos antes de construir:

<table>
  <thead>
    <tr>
      <th width={225}>
        **Conceito**
      </th>

      <th>
        **O que ele faz**
      </th>

      <th>
        **Exemplo**
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        Entradas e segredos
      </td>

      <td>
        parâmetro para credenciais e configuração
      </td>

      <td>
        `${{ :secrets:awsKeyId }}` para credenciais, `${{ .inputs.region }}` para configuração.
      </td>
    </tr>

    <tr>
      <td>
        Ações (Play)
      </td>

      <td>
        Integração pré-construída (AWS, Slack, banco de dados, APIs)
      </td>

      <td>
        Arraste `aws.ec2.stopInstances` para a tela do fluxo de trabalho.
      </td>
    </tr>

    <tr>
      <td>
        Fluxo de dados
      </td>

      <td>
        Transmita as saídas entre as etapas.
      </td>

      <td>
        `${{ .steps.getAlert.outputs.entityGuid }}`
      </td>
    </tr>

    <tr>
      <td>
        Atribuir
      </td>

      <td>
        Inicializar e atribuir valores a variáveis para uso em etapas subsequentes
      </td>

      <td>
        Use `type: assign` para definir variáveis como strings, inteiros, booleanos, mapas e listas
      </td>
    </tr>

    <tr>
      <td>
        Interruptores
      </td>

      <td>
        Criar caminhos diferentes com base nas condições
      </td>

      <td>
        Rota por `CPU > 90%` vs. `70-90%` vs. `< 70%`
      </td>
    </tr>

    <tr>
      <td>
        [Laços](/docs/workflow-automation/workflow-examples/basic-patterns/loops)
      </td>

      <td>
        Listas de processos ou pesquisas para verificar a conclusão
      </td>

      <td>
        Use `type: loop` com `for` e `in` para iterar sobre coleções.
      </td>
    </tr>

    <tr>
      <td>
        Faixa
      </td>

      <td>
        Parâmetro obrigatório para funções de loop para definir a contagem de iterações.
      </td>

      <td>
        Use `${{ range(1, 6) }}` para repetir o loop 5 vezes.
      </td>
    </tr>

    <tr>
      <td>
        Espere
      </td>

      <td>
        Suspende a execução do fluxo de trabalho por um período especificado ou até que uma condição seja satisfeita.
      </td>

      <td>
        Use `type: wait` com `seconds: 60` para atrasar 60 segundos
      </td>
    </tr>

    <tr>
      <td>
        Parar
      </td>

      <td>
        Encerrar a execução do fluxo de trabalho
      </td>

      <td>
        Encerra o fluxo de trabalho após falhas de validação ou cancelamentos.
      </td>
    </tr>
  </tbody>
</table>

<Callout variant="tip">
  **Aprenda fazendo:** Cada conceito é demonstrado no [passo a passo de exemplo](#example-walkthrough). Você verá entradas, interruptores, loops e portões de aprovação funcionando juntos em um fluxo de trabalho real.
</Callout>

Para padrões detalhados de tratamento de erros, consulte [práticas recomendadas](/docs/workflow-automation/limitations-and-faq/workflow-best-practices#error-handling).

## Começo rápido [#quick-start]

Crie seu primeiro fluxo de trabalho em cinco etapas:

1. Acesse **[one.newrelic.com](https://one.newrelic.com) &gt; All Capabilities &gt; Workflow Automation** e selecione **[Create Your Own](https://onenr.io/0OQM47KgxjG)**.
2. Defina parâmetros para credenciais (do [secrets manager](/docs/workflow-automation/limitations-and-faq/workflow-best-practices/#secure-credentials): `${{ :secrets:keyName }}`), configuração (regiões, tipo de instância) e dados de tempo de execução (IDs de conta, IDs de alerta)
3. Arraste ações do [catálogo](/docs/workflow-automation/setup-and-configuration/actions-catalog/actions-catalog) e conecte-as com a sintaxe `${{ .steps.stepName.outputs.field }}` para passar dados.
4. Insira interruptores para ramificação condicional, loops para processamento de listas ou polling, e portões de aprovação para decisões humanas.
5. Execute o comando após cada seção para detectar erros precocemente e, em seguida, [inicie ou agende](/docs/workflow-automation/create-a-workflow-automation/start-schedule) seu fluxo de trabalho.

<Callout variant="tip">
  Comece com 3 etapas, teste minuciosamente e depois expanda. Um fluxo de trabalho funcional de 5 etapas é melhor do que um fluxo de trabalho falho de 20 etapas.
</Callout>

## Padrões de fluxo de trabalho principais [#workflow-patterns]

Quatro padrões essenciais abrangem a maioria dos cenários de automação. Cada padrão é demonstrado no [exemplo passo a passo](#example-walkthrough) abaixo.

### Ramificação condicional com interruptores

**Utilize os interruptores quando:** Os resultados variam de acordo com os dados (verificações de limite, respostas da API, decisões do usuário)

**Sintaxe da tecla:**

```yaml
  - name: hasCompleted
    type: switch
    switch:
      - condition: "${{ .steps.waitForCompletion.outputs.automationExecutionStatus == 'Failed' }}"
        next: displayError
      - condition: "${{ .steps.waitForCompletion.outputs.automationExecutionStatus == 'Success' }}"
        next: displaySuccess
    next: displayUnexpected  # Default path when no condition matches
```

**Veja em ação:** [Gerencie a resposta da equipe](#handle-team-response) e [verifique e limpe](#verify-and-clean-up) as seções que mostram o roteamento de switches com base nas reações do Slack e no status do AWS SSM.

### Loops para processar listas

**Utilize loops quando:** estiver processando vários itens ou repetindo ações.

Para obter informações detalhadas sobre a estrutura de loop, parâmetros e uso avançado (incluindo break/continue), consulte [Estrutura de loop](/docs/workflow-automation/workflow-examples/basic-patterns/loops).

**Sintaxe da tecla:**

```yaml
  # Send progress updates using range loop
  - name: progressLoop
    type: loop
    for:
      in: "${{ [range(1; 5)] }}"  # Loop 5 times
      steps:
        - name: wait
          type: wait
          seconds: 10
        - name: progressMessage
          type: action
          action: slack.chat.postMessage
          version: 1
          inputs:
            channel: "${{ .workflowInputs.channel }}"
            text: "Resizing in progress..."
```

**Veja em ação:** [Execute a seção de redimensionamento](#execute-the-resize) que usa `progressLoop` para atualizações de status.

### Portarias de aprovação e espera

**Utilize portões de aprovação quando:** for necessário julgamento humano antes de operações destrutivas ou quando for exigida a aprovação de conformidade.

**Sintaxe da tecla:**

```yaml
  - name: requestApproval
    type: action
    action: slack.chat.postMessage
    version: 1
    inputs:
      channel: "#approvals"
      text: "Approve? React with :thumbsup: or :thumbsdown:"

  - name: getReactions
    type: action
    action: slack.chat.getReactions
    version: 1
    inputs:
      token: "${{ .workflowInputs.slackToken }}"
      channelID: "${{ .steps.requestApproval.outputs.channelID }}"
      threadTs: "${{ .steps.requestApproval.outputs.threadTs }}"
      timeout: 300  # Wait 5 minutes for reaction

  - name: checkApproval
    type: switch
    switch:
      - condition: '${{ .steps.getReactions.outputs.reactions | any(.name == "+1") }}'
        next: handleApproval
      - condition: '${{ .steps.getReactions.outputs.reactions | any(.name == "-1") }}'
        next: handleRejection
```

**Para atrasos simples:**

```yaml
  - name: waitBeforeRetry
    type: wait
    seconds: 60  # Wait 60 seconds before continuing
```

**Veja na prática:** a seção [&quot;Solicitar aprovação da equipe&quot;](#request-team-approval) implementa o fluxo de trabalho completo de aprovação do Slack.

### Passando dados entre etapas

**Utilize a passagem de dados quando:** a saída de uma etapa se torna a entrada de outra (o fundamento de todo fluxo de trabalho).

**Sintaxe da tecla:**

```yaml
  # Reference previous step outputs
  awsRegion: "${{ .inputs.region }}"
  instanceId: "${{ .steps.getAlert.outputs.data.entity.instanceId }}"
```

**Veja na prática:** Todas as seções demonstram a transferência de dados — cada etapa se baseia nos resultados anteriores.

### Atribuição de variável com assign

O tipo de etapa de atribuição permite que você inicialize e atribua valores a variáveis que podem ser usadas em etapas subsequentes do fluxo de trabalho. Esta etapa suporta vários tipos de dados, incluindo strings, inteiros, booleanos, mapas (objetos) e listas (arrays).

**Estrutura básica:**

```yaml
  - name: <step_name>
    type: assign
    inputs:
      <variable_name>: <value_or_expression>
```

**Exemplo:**

```yaml
  - name: variableInitialization
    type: assign
    inputs:
      stringVar: "${{ .workflowInputs.initialValue }}"
      intVar: "${{ .workflowInputs.anotherValue }}"
      concatenationVar: "${{ .workflowInputs.initialValue }} - concatenated"
      booleanVar: true
      mapVar:
        key1: "value1"
        key2: "${{ .workflowInputs.initialValue }}"
      listVar:
        - "listItem1"
        - "${{ .workflowInputs.initialValue }}"
        - "${{ .workflowInputs.anotherValue }}"
      statusCode: ${{ .steps.runAction.outputs.statusCode }}
```

<Callout variant="tip">
  **Quer exemplos completos de padrões?** Consulte [Exemplos de fluxo de trabalho](/docs/workflow-automation/workflow-examples/workflow-examples) para obter padrões adicionais, incluindo tratamento de erros, novas tentativas e integrações complexas.
</Callout>

## Exemplo passo a passo: Redimensionamento automático de instâncias EC2 com aprovação [#example-walkthrough]

Este exemplo completo demonstra como construir um fluxo de trabalho que redimensiona automaticamente instâncias do EC2 quando há picos de uso da CPU — após obter a aprovação da equipe via Slack. Este vídeo demonstra a coleta de dados, a lógica condicional, a integração externa e o tratamento de erros em um cenário do mundo real.

<Callout variant="tip">
  **Novo no fluxo de trabalho?** Este exemplo utiliza AWS, Slack e lógica de aprovação. Se você está começando agora, tente [enviar o relatório para o Slack](/docs/workflow-automation/create-a-workflow-automation/use-a-template#send-report-to-slack) primeiro.
</Callout>

### Pré-requisitos [#prerequisites]

Antes de criar este fluxo de trabalho, certifique-se de ter:

* **AWS**: Credenciais com permissões do EC2 e do Systems Manager
* **Slack**: token de bot e canal para notificação
* **New Relic**: condição de alerta de monitoramento EC2 CPU
* **Gerenciador de segredos**: Configurado, consulte [o gerenciador de segredos.](/docs/workflow-automation/limitations-and-faq/workflow-best-practices/#secure-credentials)

### Visão geral do fluxo de trabalho [#workflow-overview]

**Fluxo de alto nível:**

1. **Coletar dados**: Obter detalhes de alertas e instâncias do New Relic
2. **Solicitar aprovação**: Envie uma mensagem no Slack e aguarde a resposta da equipe.
3. **Executar redimensionamento**: Use AWS Systems Manager para redimensionar instâncias do EC2.
4. **Verificar e limpar**: Verificar resultados, notificar a equipe, remover recursos temporários.

Este exemplo demonstra padrões importantes que você usará em fluxos de trabalho personalizados: consultas a APIs, ramificação condicional, integração externa, loops de polling e tratamento de erros.

### Entradas do fluxo de trabalho [#workflow-inputs]

<Callout variant="tip">
  **Se você está lendo para entender os conceitos, pode pular esta parte.** Esta tabela detalha os 12 parâmetros que esse fluxo de trabalho utiliza. Você pode usá-lo como referência durante a construção, mas não é essencial para entender o fluxo.
</Callout>

Este fluxo de trabalho requer credenciais, configuração e contexto de tempo de execução como entradas. Os valores sensíveis vêm do [gerenciador de segredos](/docs/workflow-automation/limitations-and-faq/workflow-best-practices/#secure-credentials) usando a sintaxe `${{ :secrets:keyName }}`.

**Categorias de entrada:**

* **Autenticação**: credenciais da AWS e do Slack obtidas no [gerenciador de segredos.](/docs/workflow-automation/limitations-and-faq/workflow-best-practices/#secure-credentials)
* **Contexto do alerta**: ID da conta e ID do problema do New Relic
* **Configuração**: região, tipo de instância, fuso horário, canal Slack

<CollapserGroup>
  <Collapser title="Referência de entrada">
    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nome do parâmetro**
          </th>

          <th>
            **Tipo**
          </th>

          <th>
            **Valor padrão**
          </th>

          <th>
            **Descrição**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `awsAccessKeyId`
          </td>

          <td>
            Corda
          </td>

          <td>
            `${{ :secrets:awsAccessKeyId }}`
          </td>

          <td>
            ID da chave de acesso da AWS obtida do [gerenciador de segredos](/docs/workflow-automation/limitations-and-faq/workflow-best-practices/#secure-credentials) para autenticação com os serviços da AWS.
          </td>
        </tr>

        <tr>
          <td>
            `awsSecretAccessKey`
          </td>

          <td>
            Corda
          </td>

          <td>
            `${{ :secrets:awsSecretAccessKey }}`
          </td>

          <td>
            Chave de acesso secreta da AWS recuperada do [gerenciador de segredos](/docs/workflow-automation/limitations-and-faq/workflow-best-practices/#secure-credentials). Emparelha com o ID da chave de acesso.
          </td>
        </tr>

        <tr>
          <td>
            `awsSessionToken`
          </td>

          <td>
            Corda
          </td>

          <td>
            `${{ :secrets:awsSessionToken }}`
          </td>

          <td>
            token de sessão para credenciais temporárias AWS (opcional, usado com funções do IAM).
          </td>
        </tr>

        <tr>
          <td>
            `slackToken`
          </td>

          <td>
            Corda
          </td>

          <td>
            `${{ :secrets:slackToken }}`
          </td>

          <td>
            token de bot para postar mensagens e ler reações no Slack.
          </td>
        </tr>

        <tr>
          <td>
            `accountId`
          </td>

          <td>
            Interno
          </td>

          <td>
            Obrigatório
          </td>

          <td>
            Seu ID de conta New Relic. Utilizado para consulta de detalhes de alertas e dados de entidade.
          </td>
        </tr>

        <tr>
          <td>
            `issueId`
          </td>

          <td>
            Corda
          </td>

          <td>
            Obrigatório
          </td>

          <td>
            O ID da ocorrência do alerta do New Relic que acionou este fluxo de trabalho. Fornecido automaticamente quando o fluxo de trabalho é executado a partir de um alerta.
          </td>
        </tr>

        <tr>
          <td>
            `awsRegion`
          </td>

          <td>
            Corda
          </td>

          <td>
            `us-east-2`
          </td>

          <td>
            Região AWS onde suas instâncias do EC2 são executadas (por exemplo, `us-east-1`, `us-west-2`, `eu-west-1`).
          </td>
        </tr>

        <tr>
          <td>
            `InstanceType`
          </td>

          <td>
            Corda
          </td>

          <td>
            `t4g.nano`
          </td>

          <td>
            destino EC2 tipo de instância para redimensionamento. Escolha com base nas suas necessidades de desempenho e orçamento.
          </td>
        </tr>

        <tr>
          <td>
            `timestampUnit`
          </td>

          <td>
            Corda
          </td>

          <td>
            `MILLISECONDS`
          </td>

          <td>
            Unidade de tempo para o timestamp do alerta. Normalmente `MILLISECONDS` ou `SECONDS`.
          </td>
        </tr>

        <tr>
          <td>
            `timezoneId`
          </td>

          <td>
            Corda
          </td>

          <td>
            `America/Los_Angeles`
          </td>

          <td>
            Fuso horário para exibir o horário de ativação do alerta nas mensagens do Slack (por exemplo, `America/New_York`, `Europe/London`, `Asia/Tokyo`).
          </td>
        </tr>

        <tr>
          <td>
            `pattern`
          </td>

          <td>
            Corda
          </td>

          <td>
            `MM-dd-yyyy HH:mm`
          </td>

          <td>
            Padrão de formato de data/hora para exibição do registro de data e hora. Utiliza padrões SimpleDateFormat do Java.
          </td>
        </tr>

        <tr>
          <td>
            `channel`
          </td>

          <td>
            Corda
          </td>

          <td>
            Obrigatório
          </td>

          <td>
            ID do canal do Slack (não o nome) onde as notificações são postadas. Encontre isso nos detalhes do canal do Slack.
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

## Construa o fluxo de trabalho passo a passo. [#step-by-step-workflow]

Agora vamos construir cada parte do fluxo de trabalho. Cada etapa inclui as ações específicas a serem adicionadas e os padrões de fluxo de trabalho que elas demonstram.

<Steps>
  <Step>
    ### Reunir o contexto do alerta [#gather-alert-context]

    consulte APIs e banco de dados antes de agir. Isso garante que você tenha o contexto completo.

    O fluxo de trabalho coleta informações de alertas e instâncias do EC2 por meio de três ações:

    * **`getAlertDetails`**: chama API NerdGraph ( API GraphQL da New Relic) para buscar metadados de alerta — horário de ativação, nome da condição e entidade afetada.

    * **`activatedDateTime`**: Converte o timestamp para um formato legível, como &quot;01-24-2025 14:30&quot;, para mensagens do Slack.

    * **`impactedEC2Instance`**: consulta NRDB (New Relic banco de dados) para encontrar o ID das instâncias do EC2 e o tipo atual.

      <img title="Initial data gathering steps" alt="Workflow diagram showing three steps: getAlertDetails queries NerdGraph API, activatedDateTime converts timestamp, and impactedEC2Instance retrieves instance details from NRDB" src="/images/initial-data-gathering.webp" />

    **Por que isso é importante:** Sem esses detalhes, você não consegue construir mensagens significativas no Slack ou definir as instâncias corretas do EC2.
  </Step>

  <Step>
    ### Solicitar aprovação da equipe [#request-team-approval]

    Conecte-se a ferramentas de colaboração como Slack, PagerDuty ou ServiceNow para obter pontos de decisão humanos.

    O fluxo de trabalho envia detalhes para o Slack e aguarda uma resposta:

    * **`IssueDetected`**: Envia detalhes do alerta, tipo de instância atual e redimensionamento proposto para o Slack. Solicita à equipe que reaja com `:+1:` (aprovar) ou `:-1:` (cancelar).

    * **`GetUserReaction`**: Pausa por 5 minutos (300 segundos) aguardando uma reação.

    * **`checkQuery` (Interruptor)**: Rotas baseadas em reação:

      * **`:+1:`** → Iniciar redimensionamento
      * **`:-1:`** → Interromper fluxo de trabalho
      * **Outro** → solicitar reação válida, retornar ao início

      <img title="User approval process steps" alt="Workflow diagram showing user approval process: IssueDetected posts Slack message, GetUserReaction waits for response, checkQuery evaluates reactions with three conditions for approval, cancellation, or unexpected responses" src="/images/user-approval-process.webp" />

    <Callout variant="tip">
      **Problema comum:** Use **o ID** do canal do Slack (`C01234ABCD`), não o nome do canal. Encontre essa informação nos detalhes do canal do Slack. Consulte [resolução de problemas](#common-issues) para obter mais informações.
    </Callout>
  </Step>

  <Step>
    ### Gerenciar a resposta da equipe [#handle-team-response]

    Utilize parâmetros (ou interruptores) para criar caminhos diferentes com base em valores de dados ou entrada do usuário.

    O fluxo de trabalho se ramifica com base na reação:

    * **`unexpectedReaction`**: Explica as reações válidas e retorna ao loop para esperar novamente.
    * **`gotCancelReaction`**: Confirma o cancelamento, pula para a conclusão. Sem alterações na infraestrutura.
    * **`gotYesReaction`**: Confirma a aprovação e prossegue com o redimensionamento.

    <Callout variant="tip">
      **Padrão de portões de aprovação:** Use interruptores como este quando precisar de avaliação humana antes de alterações arriscadas. O padrão funciona com reações do Slack, confirmações do PagerDuty, respostas por e-mail ou webhooks personalizados.
    </Callout>
  </Step>

  <Step>
    ### Execute o redimensionamento. [#execute-the-resize]

    Utilize um token único para evitar operações duplicadas. Utilize loops para verificar o status de operações de longa duração.

    O fluxo de trabalho redimensiona a instância por meio do AWS Systems Manager (SSM):

    * **`createSsmDocument`**: Cria um documento de Automação SSM que interrompe a instância, modifica o tipo e a reinicia.
    * **`generateIdempotencyToken`**: Cria um UUID exclusivo para evitar redimensionamentos duplicados caso o fluxo de trabalho seja executado duas vezes.
    * **`startResizing`**: Executa o documento SSM com ID da instância e novo tipo.
    * **`progressLoop` (Loop)**: Publica atualizações do Slack a cada 10 segundos (5 vezes no total).
    * **`waitForCompletion`**: Consulta o status do SSM com um tempo limite de 2 minutos.

    <Callout variant="important">
      **Por que o SSM?** O Systems Manager oferece tratamento de erros, verificação de estado e registros de auditoria do CloudTrail. Melhor que chamada de API direta do EC2.
    </Callout>

    <Callout variant="tip">
      **Problema comum:** Certifique-se de que as credenciais da AWS tenham permissões `ec2:StopInstances`, `ec2:ModifyInstanceAttribute`, `ec2:StartInstances` e `ssm:*`. A falta de permissões resulta em falhas silenciosas.
    </Callout>
  </Step>

  <Step>
    ### Verificar e limpar [#verify-and-clean-up]

    Planeje para falhas e utilize recursos temporários, independentemente do resultado.

    O fluxo de trabalho verifica os resultados e remove os recursos temporários:

    * **`hasCompleted` (Alternar)**: Alterna com base no status do SSM (sucesso/falha/tempo limite excedido).
    * **`displaySuccess`**: Registra o sucesso no New Relic.
    * **`sendSuccessMessage`**: Confirma a conclusão no Slack.
    * **`displayError`**: registra detalhes de erros para resolução de problemas.
    * **`displayUnexpected`**: Registra estados incomuns (cancelamento manual, etc.).
    * **`cleanupSsmDocument`**: Exclui o documento SSM temporário.
    * **`sendSSMCleanMessage`**: Confirma a limpeza no Slack.
    * **`workflowCompleted`**: Mensagem final de conclusão (executa com sucesso ou cancela).

    <Callout variant="tip">
      * **Sempre limpe.** Estrutura do fluxo de trabalho para que a limpeza seja executada mesmo quando as etapas anteriores falharem. Isso evita vazamentos de recursos e cobranças inesperadas da AWS.
      * **Problema comum:** Se o SSM expirar, as instâncias do EC2 podem continuar em transição entre estados. Verifique AWS Console para confirmar o status atual da instância antes de executá-la novamente.
    </Callout>
  </Step>
</Steps>

## Qual é o próximo

* **[Iniciar e agendar fluxo de trabalho](/docs/workflow-automation/create-a-workflow-automation/start-schedule)**: Acionar manualmente ou agendar automaticamente.
* **[Gerencie o workflow](/docs/workflow-automation/create-a-workflow-automation/managing-workflow)**: edite, duplique e monitore o histórico de execução.