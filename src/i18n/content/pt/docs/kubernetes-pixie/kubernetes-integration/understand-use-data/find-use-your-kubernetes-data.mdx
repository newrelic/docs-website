---
title: Encontre e use seus dados do Kubernetes
tags:
  - Integrations
  - Kubernetes integration
  - Understand and use data
metaDescription: 'New Relic''s Kubernetes integration: How to install and activate the integration, and what data is reported.'
freshnessValidatedDate: never
translationType: machine
---

import kubernetesDashboard from 'images/kubernetes_screenshot-full_dashboard.webp'

Você pode construir seus próprios gráficos e [consultar](/docs/using-new-relic/data/understand-data/query-new-relic-data) todos os seus dados [de integração Kubernetes ](/docs/integrations/kubernetes-integration/get-started/introduction-kubernetes-integration)usando o criador de consulta e a API NerdGraph. Nossa integração coleta dados Kubernetes instrumentando a camada de orquestração do contêiner. Para uma experiência mais simples e visual, use o [cluster explorer](/docs/integrations/kubernetes-integration/understand-use-data/kubernetes-cluster-explorer).

<img
  title="New Relic - Kubernetes dashboard"
  alt="New Relic - Kubernetes dashboard"
  src={kubernetesDashboard}
/>

<figcaption>
  <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Dashboards**</DoNotTranslate>: Usando o [criador de consulta](/docs/chart-builder/use-chart-builder/get-started/introduction-chart-builder) você pode consultar seus dados Kubernetes e criar visualizações claras.
</figcaption>

## Consultar dados Kubernetes [#view-data]

A forma mais simples de [consultar seus dados Kubernetes ](/docs/using-new-relic/data/understand-data/query-new-relic-data)é utilizando o [criador de consulta](/docs/query-your-data/explore-query-data/query-builder/use-advanced-nrql-mode-specify-data), que aceita [consultaNRQL ](/docs/query-data/nrql-new-relic-query-language/getting-started/introduction-nrql). Alternativamente, você pode usar a [API NerdGraph](/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph) para recuperar dados do Kubernetes.

### Evento e atributo [#event-types]

Os dados Kubernetes são anexados ao seguinte [evento](/docs/using-new-relic/data/understand-data/new-relic-data-types#event-data). Você pode aprender mais sobre esses dados em [nosso dicionário de dados](/attribute-dictionary/?dataSource=Kubernetes).

<table>
  <thead>
    <tr>
      <th style={{ width: "275px" }}>
        Nome do evento
      </th>

      <th>
        Tipo de dados do Kubernetes
      </th>

      <th style={{ width: "200px" }}>
        Disponível desde
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `K8sNodeSample`
      </td>

      <td>
        Dados do nó
      </td>

      <td>
        v1.0.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sNamespaceSample`
      </td>

      <td>
        Dados de namespace
      </td>

      <td>
        v1.0.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sDeploymentSample`
      </td>

      <td>
        Dados de implantação
      </td>

      <td>
        v1.0.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sReplicasetSample`
      </td>

      <td>
        Dados do ReplicaSet
      </td>

      <td>
        v1.0.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sDaemonsetSample`
      </td>

      <td>
        Dados do DaemonSet
      </td>

      <td>
        v1.13.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sStatefulsetSample`
      </td>

      <td>
        Dados StatefulSet
      </td>

      <td>
        v1.13.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sPodSample`
      </td>

      <td>
        Dados do pod
      </td>

      <td>
        v1.0.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sClusterSample`
      </td>

      <td>
        Dados de cluster
      </td>

      <td>
        v1.0.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sContainerSample`
      </td>

      <td>
        Dados do contêiner
      </td>

      <td>
        v1.0.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sVolumeSample`
      </td>

      <td>
        Dados de volume
      </td>

      <td>
        v1.0.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sApiServerSample`
      </td>

      <td>
        Dados do servidor API
      </td>

      <td>
        v1.11.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sControllerManagerSample`
      </td>

      <td>
        Dados do gerenciador do controlador
      </td>

      <td>
        v1.11.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sSchedulerSample`
      </td>

      <td>
        Dados do agendador
      </td>

      <td>
        v1.11.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sEtcdSample`
      </td>

      <td>
        dados etcd
      </td>

      <td>
        v1.11.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sEndpointSample`
      </td>

      <td>
        Dados de endpoint
      </td>

      <td>
        v1.13.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sServiceSample`
      </td>

      <td>
        Dados de serviço
      </td>

      <td>
        v1.13.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sHpaSample`
      </td>

      <td>
        Dados do escalonador automático pod horizontal
      </td>

      <td>
        v2.3.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sCronjobSample`
      </td>

      <td>
        Dados do CronJob
      </td>

      <td>
        v3.10.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sJobSample`
      </td>

      <td>
        Dados do trabalho
      </td>

      <td>
        v3.10.0
      </td>
    </tr>
  </tbody>
</table>

Para saber mais sobre esses eventos e seus atributos, consulte [nosso dicionário de dados](/attribute-dictionary/?dataSource=Kubernetes).

### Metadados Kubernetes no aplicativo APM-monitor [#apm-custom-attributes]

[Ao vincular seu aplicativo ao Kubernetes](/docs/integrations/kubernetes-integration/metadata-injection/kubernetes-apm-metadata-injection), os seguintes atributos são adicionados ao trace do aplicativo e distributed trace:

* `nodeName`
* `containerName`
* `podName`
* `clusterName`
* `deploymentName`
* `namespaceName`

## Gerenciar alertas [#alerts]

Você pode ser notificado sobre <InlinePopover type="alerts"/>um incidente relacionado aos seus dados Kubernetes :

<CollapserGroup>
  <Collapser
    id="create-alert"
    title="Crie uma condição de alerta"
  >
    Para criar uma condição do alerta para a integração do Kubernetes :

    1. Vá para <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Infrastructure > Settings > Alerts & AI > Kubernetes**</DoNotTranslate> e selecione <DoNotTranslate>**Create alert condition**</DoNotTranslate>.

    2. Para filtrar o alerta para a entidade Kubernetes que possui apenas o atributo escolhido, selecione <DoNotTranslate>**Filter**</DoNotTranslate>.

    3. Selecione as configurações de limite. Para obter mais informações sobre as opções <DoNotTranslate>**Trigger an alert when...**</DoNotTranslate> , consulte [Tipos de alerta](#alert-types).

    4. Selecione uma [política de alertas](/docs/alerts/new-relic-alerts/configuring-alert-policies/create-or-rename-alert-policy) existente ou crie uma nova.

    5. Selecione <DoNotTranslate>**Create**</DoNotTranslate>.

       Quando o limite de condição do alerta é acionado, New Relic envia uma [notificação](#notifications) para o canal de notificação da apólice.
  </Collapser>

  <Collapser
    id="alert-types"
    title="Use os tipos de alerta predefinidos e limite"
  >
    A integração Kubernetes vem com sua própria política de alertas e condição do alerta. Para ver quais são as condições de alerta predefinidas, consulte [Integração Kubernetes : política de alertas predefinida](/docs/integrations/kubernetes-integration/kubernetes-events/kubernetes-integration-predefined-alert-policy).

    Além disso, você pode criar uma condição do alerta para qualquer métrica coletada por qualquer [integração New Relic ](/docs/integrations/new-relic-integrations/getting-started/introduction-infrastructure-integrations)que você usar, incluindo a integração Kubernetes :

    1. Selecione o tipo de alerta

       <DoNotTranslate>**Integrations**</DoNotTranslate>

       .

    2. No dropdown

       <DoNotTranslate>**Select a data source**</DoNotTranslate>

       , selecione uma fonte de dados Kubernetes (K8s).
  </Collapser>

  <Collapser
    id="notifications"
    title="Selecione notificação de alerta"
  >
    Quando o limite de condição de alerta é acionado, New Relic envia uma mensagem para o(s) canal(es) de notificação escolhido(s) na política de alertas. Dependendo do tipo de notificação, você poderá ter as seguintes opções:

    * [Veja o incidente](/docs/alerts-applied-intelligence/new-relic-alerts/alert-incidents/view-event-details-incidents).

    * [Reconheça o incidente](/docs/alerts/new-relic-alerts/reviewing-alert-incidents/acknowledge-alert-incidents).

    * Acesse um gráfico dos dados do incidente selecionando o nome do identificador.

      O identificador da entidade que acionou o alerta aparece próximo ao topo da mensagem de notificação. O formato do identificador depende do tipo de alerta:

    * <DoNotTranslate>**Available pods are less than desired pods**</DoNotTranslate> alertas:

      ```
      K8s:CLUSTER_NAME:PARENT_NAMESPACE:replicaset:REPLICASET_NAME
      ```

    * <DoNotTranslate>**CPU or memory usage**</DoNotTranslate> alertas:

      ```
      K8s:CLUSTER_NAME:PARENT_NAMESPACE:POD_NAME:container:CONTAINER_NAME
      ```

      Aqui estão alguns exemplos.

      <CollapserGroup>
        <Collapser
          id="pod-alerts"
          title="Exemplo de notificação de alerta de pod"
        >
          Para alertas <DoNotTranslate>**Available pods are less than desired pods**</DoNotTranslate> , o ID do `ReplicaSet` que aciona o problema pode ser semelhante a este:

          ```
          k8s:beam-production:default:replicaset:nginx-deployment-1623441481
          ```

          Este identificador contém as seguintes informações:

          * Nome do cluster: `beam-production`
          * Namespace pai: `default`
          * `ReplicaSet` nome: `nginx-deployment-1623441481`
        </Collapser>

        <Collapser
          id="container-resource"
          title="Exemplo de notificação de recurso de contêiner"
        >
          Para alertas de uso de CPU ou memória do contêiner, a entidade pode ter esta aparência:

          ```
          k8s:beam-production:kube-system:kube-state-metrics-797bb87c75-zncwn:container:kube-state-metrics
          ```

          Este identificador contém as seguintes informações:

          * Nome do cluster: `beam-production`
          * Namespace pai: `kube-system`
          * Pod namespace: `kube-state-metrics-797bb87c75-zncwn`
          * Nome do contêiner: `kube-state-metrics`
        </Collapser>
      </CollapserGroup>
  </Collapser>

  <Collapser
    id="nrql-alerts"
    title="Criar condição de alerta usando NRQL"
  >
    Siga os procedimentos padrão para [criar a condição do alerta para consulta NRQL ](/docs/alerts/new-relic-alerts/defining-conditions/create-alert-conditions-nrql-queries).
  </Collapser>
</CollapserGroup>

## Reduza a ingestão de dados [#reducedataingest]

Nossos gráficos oferecem suporte à definição de uma opção para reduzir a quantidade de dados ingeridos em detrimento da granularidade. Para ativá-lo, defina `global.lowDataMode` como `true` no gráfico `nri-bundle` .

`lowDataMode` afeta quatro componentes específicos do gráfico `nri-bundle` descrito abaixo.

### New Relic Infrastructure

Se `lowDataMode` estiver ativado, o intervalo de coleta padrão muda de `15s` para `30s`. Você também pode especificar um valor personalizado para ele usando `config.interval`, que terá preferência sobre `lowDataMode`.

### Prometheus Agente Integração

Se `lowDataMode` estiver ativado, as métricas prefixadas com o seguinte serão excluídas por padrão, pois já foram coletadas e usadas pela [integração do New Relic Kubernetes ](/docs/integrations/kubernetes-integration/understand-use-data/find-use-your-kubernetes-data/#event-types).

```
- kube_
- container_
- machine_
- cadvisor_
```

### Registro New Relic

Se `lowDataMode` estiver ativado, rótulos e anotações não serão incluídos no registro encaminhado para New Relic. Isso reduz a ingestão geral de dados no New Relic.

Os seguintes campos são mantidos: `cluster_name`, `container_name`, `namespace_name`, `pod_name`, `stream`, `message` e `log`.

<DoNotTranslate>
  **Low Data Mode Log Example**
</DoNotTranslate>

O registro log a seguir contém todos os atributos normalmente capturados pelo [plug-in New Relic Logs Kubernetes ](/docs/logs/forward-logs/kubernetes-plugin-log-forwarding/):

```json
[
  {
    "cluster_name": "api-test",
    "kubernetes": {
      "annotations": {
        "kubernetes.io/psp": "eks.privileged"
      },
      "container_hash": "fryckbos/test@sha256:5b098eaf3c7d5b3585eb10cebee63665b6208bea31ef31a3f0856c5ffdda644b",
      "container_image": "fryckbos/test:latest",
      "container_name": "newrelic-logging",
      "docker_id": "134e1daf63761baa15e035b08b7aea04518a0f0e50af4215131a50c6a379a072",
      "host": "ip-192-168-17-123.ec2.internal",
      "labels": {
        "app": "newrelic-logging",
        "app.kubernetes.io/name": "newrelic-logging",
        "controller-revision-hash": "84db95db86",
        "pod-template-generation": "1",
        "release": "nri-bundle"
      },
      "namespace_name": "nrlogs",
      "pod_id": "54556e3e-719c-46b5-af69-020b75d69bf1",
      "pod_name": "nri-bundle-newrelic-logging-jxnbj"
    },
    "message": "[2021/09/14 12:30:49] [ info] [engine] started (pid=1)\n",
    "plugin": {
      "source": "kubernetes",
      "type": "fluent-bit",
      "version": "1.8.1"
    },
    "stream": "stderr",
    "time": "2021-09-14T12:30:49.138824971Z",
    "timestamp": 1631622649138
  }
]
```

Esta é a aparência do registro de log anterior após a ativação de `lowDataMode`:

```json
[
  {
    "cluster_name": "api-test",
    "container_name": "newrelic-logging",
    "namespace_name": "nrlogs",
    "pod_name": "nri-bundle-newrelic-logging-jxnbj",
    "message": "[2021/09/14 12:30:49] [ info] [engine] started (pid=1)\n",
    "stream": "stderr",
    "timestamp": 1631622649138
  }
]
```

### New Relic Pixie integração [#nr-pixie-integration]

Se `lowDataMode` estiver ativado, a integração `newrelic-pixie` executará uma amostragem mais pesada em intervalos Pixie e reduzirá o intervalo de coleta de 10 para 15 segundos.

`lowDataMode` configurações:

```
HTTP_SPAN_LIMIT: 750
DB_SPAN_LIMIT: 250
COLLECT_INTERVAL_SEC: 15
```

As configurações padrão para esses parâmetros e outros podem ser encontradas no repositório [newrelic-pixie-integração](https://github.com/newrelic/newrelic-pixie-integration) do Github.

Para aproveitar ao máximo a integração do Kubernetes da New Relic, você precisará de uma conta gratuita da New Relic. Se ainda não o fez, crie o seu abaixo para começar a monitorar seus dados hoje mesmo.

<InlineSignup/>