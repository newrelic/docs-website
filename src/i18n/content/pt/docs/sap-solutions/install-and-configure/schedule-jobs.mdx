---
title: Agendar trabalhos
metaDescription: 'Efficiently schedule critical jobs for New Relic SAP monitoring with our guide. Ensure optimal data flow with tailored frequencies for RFC checks, data collection, and error handling to maintain continuous system insights.'
freshnessValidatedDate: never
translationType: machine
---

Há três programas que precisam ser agendados, agende-os usando a transação `SM36`:

<table>
  <thead>
    <tr>
      <th style={{ width: "400px" }}>
        **Programa ABAP**
      </th>

      <th>
        **Funcionalidade**
      </th>

      <th>
        **Frequência recomendada**
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        [`/NEWR/REGISTRY_RFC_CHECK`](#rfc-check)
      </td>

      <td>
        Verifique as conexões RFC com os sistemas monitorados e os endpoints NR da API
      </td>

      <td>
        A cada 3 minutos
      </td>
    </tr>

    <tr>
      <td>
        [`/NEWR/ABAP_COLLECTION_MANAGERN`](#abap-collection-manager)
      </td>

      <td>
        Coleta de dados: vários trabalhos devem ser agendados com base em sistemas conectados e provedores de dados
      </td>

      <td>
        A cada 5 minutos
      </td>
    </tr>

    <tr>
      <td>
        [`/NEWR/RESEND_FAILED_API_TRANS`](#resubmit-program)
      </td>

      <td>
        Reenviar transmissões com falha
      </td>

      <td>
        A cada 15 minutos
      </td>
    </tr>
  </tbody>
</table>

## Programa de verificação RFC agendada [#rfc-check]

Agende `/NEWR/REGISTRY_RFC_CHECK` a cada 1 a 3 minutos, garantindo que ele seja executado com mais frequência do que o trabalho de coleta de dados. Use o nome do trabalho `NR_RFC_CHECK`.

## Agendar gerente de coleta de dados ABAP [#abap-collection-manager]

Agende três trabalhos de coleta de dados com variantes focadas nos seguintes grupos de provedores de dados. Para obter instruções sobre como agendar trabalhos do gerenciador de coleta antes de `SP03`, consulte [Variantes e trabalhos antes do SP03](/docs/sap-solutions/additional-resources/variants-and-jobs-before-sp03). Separe os provedores de dados em três grupos para agendamento. Para obter uma lista completa de todos os provedores de dados, consulte a [Referência de provedores de dados](/docs/sap-solutions/additional-resources/data-providers-reference).

* **TRACE**: Neste grupo estão os provedores de dados relacionados ao desempenho banco de dados (STAD):

  * Inclui provedores relacionados ao banco de dados de desempenho, como [`NR.SAP.TRANSACTION`](/docs/sap-solutions/additional-resources/data-providers-reference/#sap-appl-metrics) (provedor de dados de rastreamento), [`NR.SAP.TRANSACTION.COMPLETE`](/docs/sap-solutions/additional-resources/data-providers-reference/#sap-appl-metrics) (coleta completa do banco de dados de desempenho com processo RFC em segundo plano paralelo), `NR.SAP.SYSTEM.PROCESS`, `NR_SAP_PROGRAM`, `NR_SAP_WORKLOAD_COMPLETE` e `NR.SAP.WORKLOAD.COMPLETE`.
  * `NR.SAP.SYSTEM.PROCESS` e `NR_SAP_PROGRAM` são suspensos após `SP02`.

* **IDOC**: Nos sistemas de produção, a coleta de IDOC pode levar um tempo significativo:
  * Inclui provedores relacionados ao IDOC, como [`NR_SAP_IDOC`](/docs/sap-solutions/additional-resources/data-providers-reference/#idoc-all) (provedor de dados de evento de status IDOC principal), [`NR_SAP_IDOC_COMPLETE`](/docs/sap-solutions/additional-resources/data-providers-reference/#idoc-all) (recuperação completa do IDOC com coleta BG RFC) e `NR_SAP_IDOC_Configuration` (baixar dados mestre do IDOC para melhorar o desempenho do provedor de dados IDOC).

* **SISTEMA**: Demais provedores de dados. Consulte a [lista completa por grupo de monitoramento](/docs/sap-solutions/additional-resources/data-providers-reference).

### Criar variantes para /NEWR/ONE\_COLLECTION

A partir do SP03, `/NEWR/ABAP_COLLECTION_MANAGERN` e `RSBTONEJOB2` são combinados em `/NEWR/ONE_COLLECTION`. Este programa inclui todos os parâmetros de `/NEWR/ABAP_COLLECTION_MANAGERN` e nomes de tarefas de `RSBTONEJOB2`, funcionando de forma semelhante. Para agendar tarefas, crie variantes para `/NEWR/ONE_COLLECTION` usando os seguintes valores:

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        **Nome da variante**
      </th>

      <th>
        **traço**
      </th>

      <th>
        **IDOC**
      </th>

      <th>
        **SISTEMA**
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        **Nome do trabalho**
      </td>

      <td>
        `NR_COLLECTION_TRACE`
      </td>

      <td>
        `NR_COLLECTION_IDOC`
      </td>

      <td>
        `NR_COLLECTION_SYSTEM`
      </td>
    </tr>

    <tr>
      <td>
        **ID da conta New Relic**
      </td>

      <td>
        Conta SAP usada para receber dados
      </td>

      <td>
        Conta SAP usada para receber dados
      </td>

      <td>
        Conta SAP usada para receber dados
      </td>
    </tr>

    <tr>
      <td>
        **Registros por Trans**
      </td>

      <td>
        Padrão para 10000
      </td>

      <td>
        Padrão para 10000
      </td>

      <td>
        Padrão para 10000
      </td>
    </tr>

    <tr>
      <td>
        **Nome do Provedor de Dados**
      </td>

      <td>
        Selecione Valores Únicos:

        * `NR.SAP.TRANSACTION`
        * `NR.SAP.TRANSACTION.COMPLETE`
        * `NR.SAP.SYSTEM.PROCESS`
        * `NR_SAP_PROGRAM`
        * `NR_SAP_WORKLOAD_COMPLETE`
        * `NR.SAP.WORKLOAD.COMPLETE`
      </td>

      <td>
        Selecione Valores Únicos:

        * `NR_SAP_IDOC`
        * `NR_SAP_IDOC_COMPLETE`
        * `NR_SAP_IDOC_Configuration`
      </td>

      <td>
        Excluir valores únicos:

        * `NR.SAP.TRANSACTION`
        * `NR.SAP.TRANSACTION.COMPLETE`
        * `NR.SAP.SYSTEM.PROCESS`
        * `NR_SAP_PROGRAM`
        * `NR_SAP_WORKLOAD_COMPLETE`
        * `NR.SAP.WORKLOAD.COMPLETE`
        * `NR_SAP_IDOC`
        * `NR_SAP_IDOC_COMPLETE`
        * `NR_SAP_IDOC_Configuration`
      </td>
    </tr>

    <tr>
      <td>
        **Modo de execução**
      </td>

      <td>
        Processamento Sequencial
      </td>

      <td>
        Processamento Sequencial
      </td>

      <td>
        Processamento Paralelo
      </td>
    </tr>

    <tr>
      <td>
        **WP mínimo necessário**
      </td>

      <td>
        Se o DIA WP do sistema for &gt;= 30, defina como 6; caso contrário, defina como 3.
      </td>

      <td>
        N/A
      </td>

      <td>
        Se o DIA WP do sistema for &gt;= 30, defina como 6; caso contrário, defina como 3.
      </td>
    </tr>
  </tbody>
</table>

<img title="SAP ABAP Collection Manager" alt="A screenshot displaying the SAP ABAP Collection Manager" src="/images/abap-collection-manager.webp" width="" />

### Agendar trabalhos de coleta

1. Iniciar transação `SM36`.
2. Insira o **Job Name** para cada trabalho e defina a **Job Class** como **C**.

<CollapserGroup>
  <Collapser id="job-names" title="Nomes de Cargos">
    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nome do trabalho**
          </th>

          <th>
            `NR_COLLECTION_TRACE`
          </th>

          <th>
            `NR_COLLECTION_IDOC`
          </th>

          <th>
            `NR_COLLECTION_SYSTEM`
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            **Programa**
          </td>

          <td>
            `/NEWR/ONE_COLLECTION`
          </td>

          <td>
            `/NEWR/ONE_COLLECTION`
          </td>

          <td>
            `/NEWR/ONE_COLLECTION`
          </td>
        </tr>

        <tr>
          <td>
            **Variante**
          </td>

          <td>
            traço
          </td>

          <td>
            IDOC
          </td>

          <td>
            SISTEMA
          </td>
        </tr>

        <tr>
          <td>
            **Frequência de execução**
          </td>

          <td>
            A cada 5 minutos
          </td>

          <td>
            A cada 5 minutos
          </td>

          <td>
            A cada 5 minutos
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

3. Clique em **Step**, insira o **Program Name** `/NEWR/ONE_COLLECTION` e selecione a **Variant**.
4. Clique em **Condição de início**, defina a **Data** e **Hora** de início e marque a caixa **Trabalho periódico**.
5. Vá para **Period Values**, clique em **Other Period** e insira **5** para minutos.

## Programa de reenvio de agendamento [#resubmit-program]

1. Crie uma variante chamada **DEFAULT** para o programa `/NEWR/RESEND_FAILED_API_TRANS` para reenviar transmissões com falha para a conta New Relic em caso de erro de transmissão.

2. Especifique os seguintes valores:

   * [**ID da conta New Relic**](/docs/accounts/accounts-billing/account-setup/account-id)
   * **Códigos de resposta HTTP**: exclua `000` e `413` e o intervalo de `200` a `299`.

   <img title="Resend failed API transactions" alt="A screenshot displaying the resend failed API transactions" src="/images/resend-failed-api-transaction.webp" width="700" />

3. Agende esta tarefa para ser executada a cada 15 minutos para reenviar transmissões com falha, como aquelas com código de resposta HTTP `500`, e limpar periodicamente as entradas do log de transmissão.