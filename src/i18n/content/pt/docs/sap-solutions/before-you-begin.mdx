---
title: Prepare-se para a instalação
metaDescription: How to install the SAP and alert ecosystems with New Relic
freshnessValidatedDate: never
translationType: machine
---

Antes de começar a usar o monitoramento New Relic para suas soluções SAP, certifique-se de que os seguintes pré-requisitos sejam atendidos:

* **ID da conta New Relic**: obtenha [o ID da sua conta](/docs/accounts/accounts-billing/account-setup/account-id) para identificar sua conta New Relic.

* **License Key**: Secure a New Relic <InlinePopover type="licenseKey" />necessária para autenticação e acesso a dados.

* **Data Center Region**: [decida a localização preferida do seu data center (EUA ou UE)](/docs/accounts/accounts-billing/account-setup/choose-your-data-center/) e configure sua conta adequadamente.

* **Exigência do sistema SAP**: Confirme se seus sistemas SAP atendem aos níveis de versão de componentes de software especificados pela New Relic monitoramento para soluções SAP.

* **Contas BTP de monitoramento**: se contas BTP fizerem parte da sua configuração de monitoramento, uma das seguintes opções deverá estar disponível:

  * **Conta CloudALM**: uma conta CloudALM deve ser configurada para monitorar suas contas BTP.
  * **Serviço Runtime de integração de processos**: Garanta a assinatura do serviço Runtime de integração de processos em suas contas BTP monitoradas, que é necessário especificamente para monitoramento de integração.

  <Callout variant="important">
    Você pode precisar de aprovação ou assistência de configuração de suas equipes de segurança ou rede para atender a esses pré-requisitos. Certifique-se de que essas etapas sejam concluídas antes de iniciar a instalação e confira a [Lista de verificação de prontidão para instalação](/docs/sap-solutions/additional-resources/pre-installation-checklist/#checklist-for-installation-readiness) para confirmar se todos os ambientes estão configurados corretamente.
  </Callout>

## Baixar software

Você pode obter o pacote de instalação com seu executivo de conta da New Relic. O .zip baixado o pacote contém os seguintes arquivos:

<Callout variant="important">
  A lista completa de arquivos é fornecida em **Packing\_List.txt**. Descompacte o pacote para acessar esses arquivos.
</Callout>

<CollapserGroup>
  <Collapser id="installation-package" title="Pacote de instalação">
    <table>
      <thead>
        <tr>
          <th style={{ width: '200px' }}>
            Título do arquivo
          </th>

          <th>
            Nome do arquivo
          </th>

          <th>
            Observações
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            Lista de embalagem
          </td>

          <td>
            `NRM4SAP<version>.txt`
          </td>

          <td>
            Lista de inventário de arquivos
          </td>
        </tr>

        <tr>
          <td>
            Complemento ABAP
          </td>

          <td>
            `K-xxxAOIINNEWR.SAR`
          </td>

          <td>
            Arquivo compactado para o complemento SAP
          </td>
        </tr>

        <tr>
          <td>
            Pacote de atualização complementar ABAP
          </td>

          <td>
            `K-xxxAOUINNEWR.SAP`
          </td>

          <td>
            Arquivo compactado para atualização do complemento SAP
          </td>
        </tr>

        <tr>
          <td>
            Funções de autorização
          </td>

          <td>
            `_NEWR_DATA_PROVIDER.SAP`
          </td>

          <td>
            Função de autorização para usuário NR RFC
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

## Sistemas monitorados [#monitored-systems]

Nossa arquitetura sem agente usa **conexões RFC** para recuperar dados. Para garantir conexões seguras, você deve criar um usuário do sistema SAP com um perfil de autorização específico para essas conexões.

* Verifique se `SAP_BASIS` é **Release 740 ou superior**, `Kernel` é **Release 753 Patch 602 ou superior** e `ST-PI` é **Release 740 SP 16 ou superior**.

* **Carregue a função de autorização** [`NEWR_DATA_PROVIDER`](/docs/sap-solutions/additional-resources/detailed-instructions/#upload-authorization-role).

* Crie um usuário do sistema com a função carregada para conexões RFC. Consulte [Criar New Relic ](/docs/sap-solutions/additional-resources/detailed-configuration/#create-rfc-user-id).

* Se você estiver monitorando um **banco de dados HANA**, crie um **usuário NRAGENT do banco de dados HANA** com acesso de **Catalog Read** e **Monitoring** usando os seguintes comandos SQL:

  ```sql
    CREATE ROLE NR_AGENT_ROLE;
    GRANT CATALOG READ TO NR_AGENT_ROLE;
    GRANT MONITORING TO NR_AGENT_ROLE;
  ```

  ```sql
    CREATE USER NRAGENT PASSWORD 'Xxxxxxxx' NO FORCE_FIRST_PASSWORD_CHANGE;
    GRANT NR_AGENT_ROLE TO NRAGENT;
  ```

* Colete a **porta** **do host do servidor HANA** e do banco de dados do locatário para conexão SQL.

* Para outros bancos de dados, ative os **KPIs de banco de dados padrão do CCMS** executando o programa ABAP `RSDBKPIMON`.

## Sistema de monitoramento central [#central-monitoring-system]

No sistema de monitoramento central, confirme se as seguintes versões de componentes estão instaladas. Para versões não listadas, entre em contato com seu executivo de contas da New Relic para obter um pacote suplementar.

<CollapserGroup>
  <Collapser id="sap-versions" title="Versões de componentes SAP">
    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Versão SAP\_BASIS
          </th>

          <th>
            Versão SAP\_ABA
          </th>

          <th>
            Versão ST-PI
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            740
          </td>

          <td>
            n/a
          </td>

          <td>
            740 SP14+
          </td>
        </tr>

        <tr>
          <td>
            750
          </td>

          <td>
            750
          </td>

          <td>
            740 SP14+
          </td>
        </tr>

        <tr>
          <td>
            750
          </td>

          <td>
            75A
          </td>

          <td>
            740 SP14+
          </td>
        </tr>

        <tr>
          <td>
            751
          </td>

          <td>
            75B
          </td>

          <td>
            740 SP14+
          </td>
        </tr>

        <tr>
          <td>
            752
          </td>

          <td>
            75°C
          </td>

          <td>
            740 SP14+
          </td>
        </tr>

        <tr>
          <td>
            753
          </td>

          <td>
            75D
          </td>

          <td>
            740 SP14+
          </td>
        </tr>

        <tr>
          <td>
            754
          </td>

          <td>
            75E
          </td>

          <td>
            740 SP14+
          </td>
        </tr>

        <tr>
          <td>
            755
          </td>

          <td>
            75F
          </td>

          <td>
            740 SP14+
          </td>
        </tr>

        <tr>
          <td>
            756
          </td>

          <td>
            75G
          </td>

          <td>
            740 SP14+
          </td>
        </tr>

        <tr>
          <td>
            757
          </td>

          <td>
            75H
          </td>

          <td>
            740 SP14+
          </td>
        </tr>

        <tr>
          <td>
            758
          </td>

          <td>
            75I
          </td>

          <td>
            740 SP14+
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

* Se a sua versão do SAP não estiver listada, entre em contato com o seu executivo de contas da New Relic para obter um pacote suplementar personalizado para sua versão.
* O sistema central deve ter pelo menos 20 processos de trabalho de diálogo e 10 processos de trabalho em segundo plano.
* Garanta que o acesso HTTPS de saída ao data center do New Relic seja permitido.

<CollapserGroup>
  <Collapser id="us-eu-endpoints" title="Ponto final data center EUA/UE">
    <table>
      <thead>
        <tr>
          <th style={{ width: '200px' }}>
            Conexão
          </th>

          <th>
            data centerdos EUA
          </th>

          <th>
            Endpoint do data center da UE
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            Métrica
          </td>

          <td>
            [https://metric-api.newrelic.com/metric/v1](https://metric-api.newrelic.com/metric/v1)
          </td>

          <td>
            [https://metric-api.eu.newrelic.com/metric/v1](https://metric-api.eu.newrelic.com/metric/v1)
          </td>
        </tr>

        <tr>
          <td>
            Evento
          </td>

          <td>
            [https://insights-collector.newrelic.com/v1/accounts/events](https://insights-collector.newrelic.com/v1/accounts/events)
          </td>

          <td>
            [https://insights-collector.eu01.nr-data.net/accounts/event/v1](https://insights-collector.eu01.nr-data.net/accounts/event/v1)
          </td>
        </tr>

        <tr>
          <td>
            Registro
          </td>

          <td>
            [https://log-api.newrelic.com/log/v1](https://log-api.newrelic.com/log/v1)
          </td>

          <td>
            [https://log-api.eu.newrelic.com/log/v1](https://log-api.eu.newrelic.com/log/v1)
          </td>
        </tr>

        <tr>
          <td>
            Traces
          </td>

          <td>
            [https://trace-api.newrelic.com/trace/v1](https://trace-api.newrelic.com/trace/v1)
          </td>

          <td>
            [https://trace-api.eu.newrelic.com/trace/v1](https://trace-api.eu.newrelic.com/trace/v1)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

* Ajuste as políticas do servidor proxy para acessar o New Relic, se necessário. Certifique-se de que as configurações de proxy estejam configuradas:

  * Nome de domínio do servidor/endereço IP e porta.
  * Credenciais de acesso por proxy, se autenticação for necessária.

* Modifique as políticas de firewall para permitir tráfego HTTPS para o New Relic se bloqueado.

  <Callout variant="tip">
    Essas conexões podem ser configuradas no **Central Monitoring System** utilizando **o SAP Transação SM59** e testadas. Consulte [Definir destino HTTP para New Relic Cloud](/docs/sap-solutions/additional-resources/detailed-configuration/#set-http-destination-to-new-relic-cloud) para obter mais detalhes.
  </Callout>

* Para cada sistema monitorado especificado, use a transação `SM59` e o ID do sistema remoto para criar o **RFC Destination** e testar conexões. Consulte [Criar destinos RFC para sistemas monitorados](/docs/sap-solutions/additional-resources/detailed-configuration/#create-rfc-for-monitored-systems) para obter mais detalhes.

  <Callout variant="tip">
    Certifique-se de que o usuário RFC tenha a função `/NEWR/DATA_PROVIDER` atribuída.
  </Callout>

* Garanta o seguinte para monitoramento remoto HANA banco de dados:

  * O sistema de monitoramento central deve ter acesso ao servidor HANA e à porta do banco de dados do locatário.

  * Se o seu sistema de monitoramento central não for um sistema `S4HANA`, certifique-se de que um dos seguintes componentes esteja instalado:

    * Cliente HANA v2.0 (a versão precisa ser compatível com o banco de dados HANA)

    * Arquivo de biblioteca do cliente HANA:

      * `libSQLDBCHDB.so` (Linux)
      * `libSQLDBCHDB.dll` (Windows)
      * A biblioteca deve estar localizada na pasta SAP Kernel e pertencer ao SID Admin ID (por exemplo, sd1adm).

  * Para cada banco de dados HANA remoto, use a transação `SAP DBACOCKPIT` para criar uma conexão de banco de dados. Consulte \[Criar conexão com banco de dados] para obter detalhes.

## Monitorar conta BTP

Para monitorar uma conta BTP, você precisa de uma instância CloudALM configurada para monitorar a conta BTP ou de uma assinatura para o serviço Process integração Runtime (aplicável apenas para integração monitoramento). Chaves de serviço são necessárias para autenticação de conexão. Para obter mais informações, consulte [Como recuperar as chaves de serviço](/docs/sap-solutions/additional-resources/obtain-service-key/process-integration-runtime).

As chaves de serviço também são usadas para criar [destinos HTTP externos](docs/sap-solutions/additional-resources/detailed-configuration/#create-authentication-endpoint) e servir como host de API para provedores de dados de API.