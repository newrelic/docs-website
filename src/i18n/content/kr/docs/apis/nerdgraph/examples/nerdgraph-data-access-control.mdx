---
title: 'NerdGraph 튜토리얼: 데이터 액세스 정책 관리'
tags:
  - Manage data access policies via NerdGraph
  - Manage data access policies via API
metaDescription: 'Use New Relic NerdGraph to create, update, and manage data access policies for controlling access to log partitions.'
freshnessValidatedDate: never
translationType: machine
---

[NerdGraph API를](/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph/) 사용하면 데이터 액세스 정책을 만들고, 쿼리하고, 업데이트하고, 삭제할 수 있습니다. 데이터 액세스 정책은 사용자가 액세스할 수 있는 [로그 파티션을](/docs/logs/ui-data/data-partitions/) 제어하여 사용자 그룹에 따라 중요한 로그 데이터에 대한 액세스를 제한할 수 있습니다.

## 요구 사항 [#requirements]

NerdGraph를 통해 데이터 액세스 정책을 관리하려면 다음이 필요합니다.

* [Pro 또는 Enterprise](https://newrelic.com/pricing) 에디션 뉴렐릭 계정
* [인증 도메인 관리자](/docs/accounts/accounts-billing/new-relic-one-user-management/user-management-concepts#admin-settings) 역할
* 사용자 유형의 [핵심 사용자 또는 전체 플랫폼 사용자](/docs/accounts/accounts-billing/new-relic-one-user-management/user-type)
* 인증을 위한 [사용자 키](/docs/apis/intro-apis/new-relic-api-keys/#user-key).

## 시작하기 전에 [#before-you-begin]

데이터 액세스 정책에 NerdGraph API를 사용하기 전에 [데이터 액세스 제어가](/docs/accounts/accounts-billing/new-relic-one-user-management/data-access-control) 작동하는 방식을 이해하고 [NerdGraph](https://api.newrelic.com/graphiql) 에 익숙해지세요.

## 공통 속성 [#attributes]

다음 속성은 일반적으로 데이터 액세스 정책 쿼리와 뮤테이션에 사용됩니다.

<table>
  <thead>
    <tr>
      <th style={{width: "200px"}}>
        기인하다
      </th>

      <th>
        설명
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `organizationId`
      </td>

      <td>
        정책과 연관된 조직의 ID입니다. 정책을 필터링하거나 정책 생성 범위를 지정하는 데 사용됩니다.
      </td>
    </tr>

    <tr>
      <td>
        `id`
      </td>

      <td>
        정책의 고유 식별자입니다. 특정 정책을 업데이트하거나 삭제할 때 필요합니다.
      </td>
    </tr>

    <tr>
      <td>
        `name`
      </td>

      <td>
        데이터 접근 정책에 대한 사용자 친화적인 이름입니다.
      </td>
    </tr>

    <tr>
      <td>
        `policy`
      </td>

      <td>
        정책 규칙을 정의하는 JSON 객체입니다. 여기에는 다음이 포함됩니다.

        * `rules`: 규칙 객체의 빼기입니다.
        * `operations`: 허용하거나 거부할 작업(예: `SELECT`, `*`).
        * `eventTypes`: `allow` (예: `["*"]`) 또는 `except` (예: `["Log_accessible"]`)할 이벤트 유형을 지정하는 개체입니다.
      </td>
    </tr>

    <tr>
      <td>
        `accountId`
      </td>

      <td>
        역할이 액세스 권한을 부여하는 계정 ID입니다.
      </td>
    </tr>

    <tr>
      <td>
        `dataAccessPolicyId`
      </td>

      <td>
        계정에서 어떤 데이터가 허용되는지 정의하는 데이터 액세스 정책 ID입니다.
      </td>
    </tr>

    <tr>
      <td>
        `roleId`
      </td>

      <td>
        액세스 수준을 정의하는 역할 ID입니다.
      </td>
    </tr>
  </tbody>
</table>

## 일반적인 작업 [#operations]

데이터 액세스 정책을 관리하는 가장 일반적인 작업은 다음과 같습니다.

<CollapserGroup>
  <Collapser id="query-grants" title="액세스 권한과 관련된 데이터 액세스 정책 쿼리">
    이 쿼리는 조직의 모든 액세스 권한과 관련 데이터 액세스 정책을 검색합니다. 이를 사용하여 현재 보조금에 할당된 정책을 가져옵니다.

    ### 샘플 쿼리

    ```graphql
    {
      customerAdministration {
        grants(filter: {organizationId: {eq: "YOUR_ORG_ID"}}) {
          items {
            dataAccessPolicy {
              id
              name
            }
          }
        }
      }
    }
    ```

    <table>
      <thead>
        <tr>
          <th style={{width: "200px"}}>
            매개변수
          </th>

          <th>
            설명
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `organizationId`
          </td>

          <td>
            **필수의.** 보조금이 속한 조직 ID입니다. 필터링하려면 등호(`eq`) 연산자를 사용합니다.
          </td>
        </tr>
      </tbody>
    </table>

    ### 샘플 응답

    ```json
    {
      "data": {
        "customerAdministration": {
          "grants": {
            "items": [
              {
                "dataAccessPolicy": {
                  "id": "DATA_ACCESS_POLICY_ID",
                  "name": "DATA_ACCESS_POLICY_NAME"
                }
              }
            ]
          }
        }
      }
    }
    ```

    <table>
      <thead>
        <tr>
          <th style={{width: "200px"}}>
            응답 필드
          </th>

          <th>
            설명
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `items`
          </td>

          <td>
            조직의 보조금 목록.
          </td>
        </tr>

        <tr>
          <td>
            `dataAccessPolicy`
          </td>

          <td>
            각 보조금과 관련된 데이터 접근 정책입니다.
          </td>
        </tr>

        <tr>
          <td>
            `id`
          </td>

          <td>
            데이터 접근 정책의 고유 식별자입니다.
          </td>
        </tr>

        <tr>
          <td>
            `name`
          </td>

          <td>
            데이터 접근 정책의 이름입니다.
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="query-policies" title="조직의 데이터 액세스 정책 쿼리">
    이 쿼리는 조직의 모든 데이터 액세스 정책을 검색합니다.

    ### 샘플 쿼리

    ```graphql
    {
      customerAdministration {
        dataAccessPolicies(
          filter: {organizationId: {eq: "YOUR_ORG_ID"}}
        ) {
          items {
            id
            name
            policy
            status
            version
          }
        }
      }
    }
    ```

    <table>
      <thead>
        <tr>
          <th style={{width: "200px"}}>
            매개변수
          </th>

          <th>
            설명
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `organizationId`
          </td>

          <td>
            **필수의.** 정책이 속한 조직 ID입니다. 필터링하려면 등호(`eq`) 연산자를 사용합니다.
          </td>
        </tr>
      </tbody>
    </table>

    ### 샘플 응답

    ```json
    {
      "data": {
        "customerAdministration": {
          "dataAccessPolicies": {
            "items": [
              {
                "id": "ddadbdd2-183b-42d9-8a1a-41ec7692fb4c",
                "name": "Log Operations",
                "policy": {
                  "rules": [
                    {
                      "eventTypes": {
                        "allow": [
                          "*"
                        ],
                        "except": [
                          "Log_Operations"
                        ]
                      },
                      "operations": [
                        "*"
                      ]
                    }
                  ]
                },
                "status": "VALID",
                "version": "1.0-logs"
              },
              {
                "id": "bb8efcf5-3127-4a4d-b25f-114505a0a68d",
                "name": "Restrict Log_Security",
                "policy": {
                  "rules": [
                    {
                      "eventTypes": {
                        "allow": [
                          "*"
                        ],
                        "except": [
                          "Log_Sec%"
                        ]
                      },
                      "operations": [
                        "*"
                      ]
                    }
                  ]
                },
                "status": "VALID",
                "version": "1.0-logs"
              }
            ]
          }
        }
      }
    }
    ```

    <table>
      <thead>
        <tr>
          <th style={{width: "200px"}}>
            응답 필드
          </th>

          <th>
            설명
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `items`
          </td>

          <td>
            조직의 데이터 접근 정책 목록입니다.
          </td>
        </tr>

        <tr>
          <td>
            `id`
          </td>

          <td>
            데이터 접근 정책의 고유 식별자입니다.
          </td>
        </tr>

        <tr>
          <td>
            `name`
          </td>

          <td>
            데이터 접근 정책의 이름입니다.
          </td>
        </tr>

        <tr>
          <td>
            `policy`
          </td>

          <td>
            `operations` 및 `eventTypes` 을 포함하는 정책 규칙이 포함된 JSON 개체입니다.
          </td>
        </tr>

        <tr>
          <td>
            `status`
          </td>

          <td>
            정책의 현재 상태(예: `VALID`).
          </td>
        </tr>

        <tr>
          <td>
            `version`
          </td>

          <td>
            정책 버전(현재 `1.0-logs`).
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="create-policy" title="데이터 액세스 정책 만들기">
    이 변형은 로그 파티션에 대한 액세스를 제어하는 새로운 데이터 액세스 정책을 생성합니다.

    ### 샘플 돌연변이

    ```graphql
    mutation createMyPolicy {
      dataAccessPolicyCreate(
        policy: {rules: [{operations: ["SELECT"], eventTypes: {allow: ["*"], except: ["Log_accessible"]}}]}
        name: "Test"
        organizationId: "YOUR_ORG_ID"
      ) {
        dataAccessPolicy {
          id
        }
      }
    }
    ```

    다음 변수를 사용할 수도 있습니다.

    ```graphql
    mutation createMyPolicy($policy: DataAccessPolicyRawDocument!) {
      dataAccessPolicyCreate(
        policy: $policy
        name: "Test"
        organizationId: "YOUR_ORG_ID"
      ) {
        dataAccessPolicy {
          id
        }
      }
    }
    ```

    ```json
    {
      "policy": {
        "rules": [
          {"operations": ["SELECT"], "eventTypes": {"allow": ["*"], "except": []}}
        ]
      }
    }
    ```

    <table>
      <thead>
        <tr>
          <th style={{width: "200px"}}>
            매개변수
          </th>

          <th>
            설명
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `organizationId`
          </td>

          <td>
            **필수의.** 귀하의 뉴렐릭 조직 ID입니다.
          </td>
        </tr>

        <tr>
          <td>
            `name`
          </td>

          <td>
            **필수의.** 정책에 대한 기술 이름입니다.
          </td>
        </tr>

        <tr>
          <td>
            `policy`
          </td>

          <td>
            **필수의.** `operations` 및 `eventTypes` 사용하여 정책 규칙을 정의하는 JSON 개체입니다.
          </td>
        </tr>
      </tbody>
    </table>

    ### 샘플 응답

    ```json
    {
      "data": {
        "dataAccessPolicyCreate": {
          "dataAccessPolicy": {
            "id": "YOUR_DATA_POLICY_ID",
            "name": "Test",
            "policy": {
              "rules": [
                {
                  "eventTypes": {
                    "allow": [
                      "*"
                    ],
                    "except": [
                      "Log"
                    ]
                  },
                  "operations": [
                    "*"
                  ]
                }
              ]
            },
            "status": "VALID"
          }
        }
      }
    }
    ```

    <table>
      <thead>
        <tr>
          <th style={{width: "200px"}}>
            응답 필드
          </th>

          <th>
            설명
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `id`
          </td>

          <td>
            새로 생성된 데이터 액세스 정책의 고유 식별자입니다.
          </td>
        </tr>

        <tr>
          <td>
            `name`
          </td>

          <td>
            데이터 접근 정책의 이름입니다.
          </td>
        </tr>

        <tr>
          <td>
            `policy`
          </td>

          <td>
            `operations` 및 `eventTypes` 을 포함하는 정책 규칙이 포함된 JSON 개체입니다.
          </td>
        </tr>

        <tr>
          <td>
            `status`
          </td>

          <td>
            정책의 상태(예: `VALID`).
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="update-policy" title="데이터 액세스 정책 업데이트">
    이 변형은 기존 데이터 액세스 정책을 업데이트하여 규칙이나 이름을 수정합니다.

    ### 샘플 돌연변이

    ```graphql
    mutation {
      dataAccessPolicyUpdate(
        policy: {rules: [{operations: ["SELECT"], eventTypes: {allow: ["*"], except: ["Log_inaccessible"]}}]}
        name: "Test"
        id: "YOUR_DATA_POLICY_ID"
      ) {
        dataAccessPolicy {
          name
          id
        }
      }
    }
    ```

    <table>
      <thead>
        <tr>
          <th style={{width: "200px"}}>
            매개변수
          </th>

          <th>
            설명
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `id`
          </td>

          <td>
            **필수의.** 업데이트할 정책의 ID입니다.
          </td>
        </tr>

        <tr>
          <td>
            `name`
          </td>

          <td>
            **선택 과목.** 정책 이름이 업데이트되었습니다.
          </td>
        </tr>

        <tr>
          <td>
            `policy`
          </td>

          <td>
            **선택 과목.** `operations` 및 `eventTypes` 사용하여 업데이트된 정책 규칙을 정의하는 JSON 개체입니다.
          </td>
        </tr>
      </tbody>
    </table>

    ### 샘플 응답

    ```json
    {
      "data": {
        "dataAccessPolicyUpdate": {
          "dataAccessPolicy": {
            "assigned": "UNASSIGNED",
            "id": "YOUR_DATA_POLICY_ID",
            "name": "Test",
            "policy": {
              "rules": [
                {
                  "eventTypes": {
                    "allow": [
                      "*"
                    ],
                    "except": [
                      "Log_inaccessible"
                    ]
                  },
                  "operations": [
                    "SELECT"
                  ]
                }
              ]
            },
            "status": "VALID"
          }
        }
      }
    }
    ```

    <table>
      <thead>
        <tr>
          <th style={{width: "200px"}}>
            응답 필드
          </th>

          <th>
            설명
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `assigned`
          </td>

          <td>
            정책이 어떤 보조금에 할당되었는지 여부를 나타냅니다(예: `UNASSIGNED`).
          </td>
        </tr>

        <tr>
          <td>
            `id`
          </td>

          <td>
            업데이트된 데이터 접근 정책의 고유 식별자입니다.
          </td>
        </tr>

        <tr>
          <td>
            `name`
          </td>

          <td>
            데이터 접근 정책의 이름입니다.
          </td>
        </tr>

        <tr>
          <td>
            `policy`
          </td>

          <td>
            `operations` 및 `eventTypes` 을 포함하는 업데이트된 정책 규칙이 포함된 JSON 개체입니다.
          </td>
        </tr>

        <tr>
          <td>
            `status`
          </td>

          <td>
            정책의 상태(예: `VALID`).
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="delete-policy" title="데이터 액세스 정책 삭제">
    이 변형은 기존 데이터 액세스 정책을 삭제합니다.

    <Callout variant="important">
      정책을 삭제하면 할당된 모든 권한에서도 해당 정책이 제거됩니다. 해당 권한이 있는 그룹의 사용자는 정책에 정의된 데이터 액세스 제한을 잃게 됩니다.
    </Callout>

    ### 샘플 돌연변이

    ```graphql
    mutation {
      dataAccessPolicyDelete(id: "YOUR_DATA_POLICY_ID") {
        dataAccessPolicy {
          name
          id
          policy
          status
        }
      }
    }
    ```

    <table>
      <thead>
        <tr>
          <th style={{width: "200px"}}>
            매개변수
          </th>

          <th>
            설명
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `id`
          </td>

          <td>
            **필수의.** 삭제할 정책의 ID입니다.
          </td>
        </tr>
      </tbody>
    </table>

    ### 샘플 응답

    ```json
    {
      "data": {
        "dataAccessPolicyDelete": {
          "dataAccessPolicy": {
            "id": "YOUR_DATA_POLICY_ID",
            "name": "Test",
            "policy": {
              "rules": [
                {
                  "eventTypes": {
                    "allow": [
                      "*"
                    ],
                    "except": [
                      "Log_inaccessible"
                    ]
                  },
                  "operations": [
                    "SELECT"
                  ]
                }
              ]
            },
            "status": "VALID"
          }
        }
      }
    }
    ```

    <table>
      <thead>
        <tr>
          <th style={{width: "200px"}}>
            응답 필드
          </th>

          <th>
            설명
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `id`
          </td>

          <td>
            삭제된 데이터 액세스 정책의 고유 식별자입니다.
          </td>
        </tr>

        <tr>
          <td>
            `name`
          </td>

          <td>
            삭제된 데이터 액세스 정책의 이름입니다.
          </td>
        </tr>

        <tr>
          <td>
            `policy`
          </td>

          <td>
            삭제된 정책 규칙이 포함된 JSON 개체입니다.
          </td>
        </tr>

        <tr>
          <td>
            `status`
          </td>

          <td>
            정책의 상태(예: `VALID`).
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="grant-access" title="데이터 액세스 정책을 사용하여 액세스 권한 부여 만들기">
    이 변형은 데이터 액세스 정책을 포함하는 새로운 액세스 권한을 생성하여 특정 계정과 역할에 할당합니다.

    ### 샘플 돌연변이

    ```graphql
    mutation {
      authorizationManagementGrantAccess(
        grantAccessOptions: {accountAccessGrants: {accountId: YOUR_ACCOUNT_ID, dataAccessPolicyId: "YOUR_DATA_POLICY_ID", roleId: "YOUR_ROLE_ID"}}
      ) {
        accessGrants {
          id
        }
      }
    }
    ```

    <table>
      <thead>
        <tr>
          <th style={{width: "200px"}}>
            매개변수
          </th>

          <th>
            설명
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `accountId`
          </td>

          <td>
            **필수의.** 접근 권한을 부여할 계정 ID입니다.
          </td>
        </tr>

        <tr>
          <td>
            `dataAccessPolicyId`
          </td>

          <td>
            **필수의.** 적용할 데이터 액세스 정책 ID입니다.
          </td>
        </tr>

        <tr>
          <td>
            `roleId`
          </td>

          <td>
            **필수의.** 권한을 정의하는 역할 ID입니다.
          </td>
        </tr>
      </tbody>
    </table>

    ### 응답

    응답에는 새로 생성된 액세스 권한과 해당 ID가 표시됩니다.
  </Collapser>

  <Collapser id="update-grant" title="데이터 액세스 정책으로 액세스 권한 업데이트">
    이 변형은 기존 액세스 권한을 업데이트하여 데이터 액세스 정책을 추가하거나 변경합니다.

    ### 샘플 돌연변이

    ```graphql
    mutation {
      authorizationManagementUpdateAccess(
        updateAccessOptions: {accountAccessGrant: {dataAccessPolicyId: "YOUR_DATA_POLICY_ID"}, ids: YOUR_GRANT_ID}
      ) {
        grants {
          dataAccessPolicy {
            id
          }
          id
        }
      }
    }
    ```

    <table>
      <thead>
        <tr>
          <th style={{width: "200px"}}>
            매개변수
          </th>

          <th>
            설명
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `ids`
          </td>

          <td>
            **필수의.** 업데이트할 보조금 ID입니다.
          </td>
        </tr>

        <tr>
          <td>
            `dataAccessPolicyId`
          </td>

          <td>
            **필수의.** 보조금에 적용할 데이터 접근 정책 ID입니다.
          </td>
        </tr>
      </tbody>
    </table>

    ### 샘플 응답

    ```json
    {
      "data": {
        "authorizationManagementUpdateAccess": {
          "grants": [
            {
              "dataAccessPolicy": {
                "id": "YOUR_DATA_POLICY_ID"
              },
              "id": "YOUR_GRANT_ID"
            }
          ]
        }
      }
    }
    ```

    <table>
      <thead>
        <tr>
          <th style={{width: "200px"}}>
            응답 필드
          </th>

          <th>
            설명
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `grants`
          </td>

          <td>
            업데이트된 보조금 목록입니다.
          </td>
        </tr>

        <tr>
          <td>
            `dataAccessPolicy.id`
          </td>

          <td>
            이제 보조금에 할당된 데이터 액세스 정책의 ID입니다.
          </td>
        </tr>

        <tr>
          <td>
            `id`
          </td>

          <td>
            업데이트된 보조금의 ID입니다.
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="revoke-grant" title="데이터 액세스 정책을 사용하여 액세스 권한 취소">
    이 변형은 데이터 액세스 정책이 포함된 액세스 권한을 제거합니다.

    ### 샘플 돌연변이

    ```graphql
    mutation {
      authorizationManagementRevokeAccess(
        revokeAccessOptions: {accountAccessGrants: {accountId: YOUR_ACCOUNT_ID, dataAccessPolicyId: "YOUR_DATA_POLICY_ID", roleId: "YOUR_ROLE_ID"}}
      ) {
        accessGrants {
          id
        }
      }
    }
    ```

    <table>
      <thead>
        <tr>
          <th style={{width: "200px"}}>
            매개변수
          </th>

          <th>
            설명
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `accountId`
          </td>

          <td>
            **필수의.** 취소할 보조금의 계정 ID입니다.
          </td>
        </tr>

        <tr>
          <td>
            `dataAccessPolicyId`
          </td>

          <td>
            **필수의.** 취소할 허가의 데이터 접근 정책 ID입니다.
          </td>
        </tr>

        <tr>
          <td>
            `roleId`
          </td>

          <td>
            **필수의.** 취소할 권한의 역할 ID입니다.
          </td>
        </tr>
      </tbody>
    </table>

    ### 응답

    응답에는 ID와 함께 취소된 액세스 권한이 표시됩니다.
  </Collapser>
</CollapserGroup>

## 관련 주제 [#related-topics]

<DocTiles>
  <DocTile title="데이터 접근 제어 UI 가이드" path="/docs/accounts/accounts-billing/new-relic-one-user-management/data-access-control">
    뉴렐릭 UI 통해 데이터 액세스 정책을 관리하는 방법을 알아보세요.
  </DocTile>

  <DocTile title="사용자 관리 개념" path="/docs/accounts/accounts-billing/new-relic-one-user-management/user-management-concepts">
    사용자 유형, 역할 및 액세스 관리를 이해합니다.
  </DocTile>

  <DocTile title="NerdGraph로 사용자 관리" path="/docs/apis/nerdgraph/examples/nerdgraph-manage-users">
    NerdGraph API를 사용하여 사용자와 액세스 권한을 프로그래밍 방식으로 관리합니다.
  </DocTile>

  <DocTile title="로그 파티션" path="/docs/logs/ui-data/data-partitions/">
    로그 데이터를 파티션으로 구성하는 방법을 알아보세요.
  </DocTile>
</DocTiles>