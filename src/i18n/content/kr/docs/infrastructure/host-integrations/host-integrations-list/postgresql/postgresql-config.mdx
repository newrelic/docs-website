---
title: PostgreSQL 통합의 구성 설정
tags:
  - Integrations
  - On-host integrations
  - Advanced configuration
metaDescription: New Relic's PostgreSQL monitoring integration's advanced configuration
translationType: human
---

이 통합은 오픈소스 소프트웨어입니다.[ 소스 코드를 탐색하고](https://github.com/newrelic/nri-postgresql) 개선 사항을 보내거나 고유한 포크를 만들어 빌드할 수 있다는 의미입니다.

### PostgreSQL 인스턴스 설정 [#instance-settings]

PostgreSQL 통합은 메트릭(**M**) 및 인벤토리(**I**) 정보를 모두 수집합니다. 다음 표의 **Applies To** 열은 각 특정 수집에 사용할 수 있는 설정을 나타냅니다.

<table>
  <thead>
    <tr>
      <th>
        Setting
      </th>

      <th>
        설명
      </th>

      <th style={{ width: '150px' }}>
        Applies To
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `HOSTNAME`
      </td>

      <td>
        PostgreSQL 연결의 호스트 이름으로기본값은 localhost입니다.
      </td>

      <td style={{ "text-align": "center" }}>
        M/I
      </td>
    </tr>

    <tr>
      <td>
        `PORT`
      </td>

      <td>
        PostgreSQL이 실행되는 포트이며 기본값은 5432입니다.
      </td>

      <td style={{ 'text-align': 'center' }}>
        M/I
      </td>
    </tr>

    <tr>
      <td>
        `USERNAME`
      </td>

      <td>
        PostgreSQL 연결의 사용자 이름으로 **필수 항목**입니다.
      </td>

      <td style={{ 'text-align': 'center' }}>
        M/I
      </td>
    </tr>

    <tr>
      <td>
        `PASSWORD`
      </td>

      <td>
        PostgreSQL 연결의 비밀번호로 **필수 항목**입니다.
      </td>

      <td style={{ 'text-align': 'center' }}>
        M/I
      </td>
    </tr>

    <tr>
      <td>
        `COLLECTION_LIST`
      </td>

      <td>
        수집할 항목을 지정하는 JSON 배열, JSON 객체 또는 문자열 리터럴 `ALL` PostgreSQL 사용자는 `SELECT` 권한이 있는 테이블에서만 테이블 및 인덱스 메트릭을 수집할 수 있습니다.

        **`PgBouncer`를 제외하고 필수 항목입니다.**

        [예](/docs/infrastructure/host-integrations/host-integrations-list/postgresql/postgresql-integration#examples)
      </td>

      <td style={{ "text-align": "center" }}>
        M
      </td>
    </tr>

    <tr>
      <td>
        `COLLECTION_IGNORE_DATABASE_LIST`
      </td>

      <td>
        메트릭 수집에 대해 무시될 데이터베이스 이름의 JSON 배열입니다. 일반적으로 `COLLECTION_LIST`이 `ALL`로 설정되고 일부 데이터베이스를 무시해야 하는 경우에 유용합니다. 기본값은 `[]`입니다.
      </td>

      <td style={{ 'text-align': 'center' }}>
        M
      </td>
    </tr>

    <tr>
      <td>
        `PGBOUNCER`
      </td>

      <td>
        `pgbouncer` 메트릭을 수집합니다. 기본값은 `false`입니다.
      </td>

      <td style={{ 'text-align': 'center' }}>
        M
      </td>
    </tr>

    <tr>
      <td>
        `ENABLE_SSL`
      </td>

      <td>
        SSL이 활성화되었는지 확인합니다. `true`, `ssl_cert_location` 및 `ssl_key_location`이 필요한 경우 기본값은 `false`입니다.
      </td>

      <td style={{ 'text-align': 'center' }}>
        M/I
      </td>
    </tr>

    <tr>
      <td>
        `TRUST_SERVER_CERTIFICATE`
      </td>

      <td>
        `true`인 경우 SSL에 대해 서버 인증서가 검증되지 않습니다. `false`인 경우, `ssl_root_cert_location`에서 식별된 서버 인증서가 검증됩니다. 기본값은 `false`입니다.
      </td>

      <td style={{ 'text-align': 'center' }}>
        M/I
      </td>
    </tr>

    <tr>
      <td>
        `SSL_ROOT_CERT_LOCATION`
      </td>

      <td>
        PEM으로 인코딩된 루트 인증서 파일의 절대 경로이며 `trust_server_certificate`이 `false`인 경우 필수 항목입니다.
      </td>

      <td style={{ 'text-align': 'center' }}>
        M/I
      </td>
    </tr>

    <tr>
      <td>
        `SSL_CERT_LOCATION`
      </td>

      <td>
        PEM으로 인코딩된 클라이언트 인증서 파일의 절대 경로이며 `enable_ssl`이 `true`인 경우 필수 항목입니다.
      </td>

      <td style={{ 'text-align': 'center' }}>
        M/I
      </td>
    </tr>

    <tr>
      <td>
        `SSL_KEY_LOCATION`
      </td>

      <td>
        PEM으로 인코딩된 클라이언트 키 파일의 절대 경로이며 `enable_ssl`이 `true`인 경우 필수 항목입니다.
      </td>

      <td style={{ 'text-align': 'center' }}>
        M/I
      </td>
    </tr>

    <tr>
      <td>
        `TIMEOUT`
      </td>

      <td>
        연결을 위한 최대 대기 시간(초)이며 시간 초과가 없는 경우 `0`으로 설정합니다. 기본값은 10입니다.
      </td>

      <td style={{ 'text-align': 'center' }}>
        M/I
      </td>
    </tr>

    <tr>
      <td>
        `DATABASE`
      </td>

      <td>
        연결할 PostgreSQL 데이터베이스로 기본값은 `postgres`입니다.
      </td>

      <td style={{ 'text-align': 'center' }}>
        M/I
      </td>
    </tr>

    <tr>
      <td>
        `CUSTOM_METRICS_QUERY`
      </td>

      <td>
        `columns metric_name`, `metric_type` 및 `metric_value.metric_type`가 필요한 SQL 쿼리는 `gauge`, `rate`, `delta` 또는 `attribute` 입니다. 쿼리로 수집된 추가 열은 속성으로 설정된 메트릭에 추가됩니다.
      </td>

      <td style={{ 'text-align': 'center' }}>
        M
      </td>
    </tr>

    <tr>
      <td>
        `CUSTOM_METRICS_CONFIG`
      </td>

      <td>
        메트릭 유형, 데이터베이스 및 샘플 이름 재정의와 함께 커스텀 쿼리 목록이 포함된 YAML 파일의 경로입니다. 자세한 내용은 [예시](/docs/infrastructure/host-integrations/host-integrations-list/postgresql/postgresql-integration#examples)를 참조하십시오.
      </td>

      <td style={{ 'text-align': 'center' }}>
        M
      </td>
    </tr>

    <tr>
      <td>
        `COLLECT_DB_LOCK_METRICS`
      </td>

      <td>
        성능 집약적이 될 수 있는 데이터베이스 잠금 메트릭 수집을 활성화합니다. 기본값은 `false`입니다.
      </td>

      <td style={{ 'text-align': 'center' }}>
        M
      </td>
    </tr>

    <tr>
      <td>
        `COLLECT_BLOAT_METRICS`
      </td>

      <td>
        성능 집약적이 될 수 있는 테이블스페이스 팽창 메트릭을 활성화합니다. 기본값은 `true`입니다.
      </td>

      <td style={{ 'text-align': 'center' }}>
        M
      </td>
    </tr>

    <tr>
      <td>
        `METRICS`
      </td>

      <td>
        메트릭만 수집을 활성화하려면 `true`로 설정합니다. 기본값은 `false`입니다.
      </td>

      <td style={{ 'text-align': 'center' }}/>
    </tr>

    <tr>
      <td>
        `INVENTORY`
      </td>

      <td>
        인벤토리 전용 수집을 활성화하려면 `true`로 설정합니다. 기본값은 `false`입니다.
      </td>

      <td style={{ 'text-align': 'center' }}/>
    </tr>
  </tbody>
</table>

이 설정 값들은 여러 가지 방법으로 정의할 수 있습니다.

* 값을 구성 파일에 직접 추가합니다. 이는 가장 일반적인 방법입니다.
* `{{ }}` 표기를 사용하여 환경 변수의 값을 대체합니다. [온호스트 통합과 함께 환경 변수 패스스루를 사용하는 방법](/docs/infrastructure/install-infrastructure-agent/configuration/configure-infrastructure-agent/#passthrough)을 자세히 확인하거나 [환경 변수 교체](/docs/infrastructure/host-integrations/host-integrations-list/elasticsearch/elasticsearch-integration#envvar-replacement)에 대한 예시를 참조하십시오. <Callout variant="important">이를 위해서는 인프라 에이전트 v1.14.0 이상이 필요합니다.</Callout>
* 비밀 관리의 사용합니다. 이를 사용해 구성 파일에서 일반 텍스트로 노출될 수 있는 비밀번호 같은 민감한 정보를 보호합니다. 보다 자세한 내용은 [비밀 관리](/docs/integrations/host-integrations/installation/secrets-management)를 참조하십시오.

### 레이블 및 커스텀 속성 [#labels]

환경 변수는 <InlinePopover type="licenseKey"/>같은 구성 설정을 제어하는 데 사용된 후 인프라 에이전트로 전달됩니다. 이 기능을 사용하는 방법에 대한 지침은 [인프라 에이전트 구성](/docs/infrastructure/install-infrastructure-agent/configuration/configure-infrastructure-agent)을 참조하십시오.

레이블을 사용하여 메트릭을 추가로 장식할 수 있습니다. 레이블을 사용하면 키/값 쌍 속성을 메트릭에 추가한 다음 메트릭을 쿼리, 필터링 또는 그룹화하는 데 사용할 수 있습니다.

기본 샘플 구성 파일에는 레이블의 예가 포함되어 있지만 필수는 아니므로 원하는 새 레이블을 제거, 수정 또는 추가할 수 있습니다.

```yml
 labels:
   env: production
   role: postgresql
```

## 인벤토리 데이터 [#inventory]

PostgreSQL 통합은 `boot_val` 및 `reset_val`와 함께 `pg_settings`에서 각 설정을 수집합니다. [인프라 인벤토리 데이터](/docs/infrastructure/integrations-getting-started/getting-started/understand-integration-data-data-types#inventory-data)는 [인벤토리 페이지](/docs/infrastructure/new-relic-infrastructure/infrastructure-ui-pages/infrastructure-inventory-page-search-your-entire-infrastructure)의 `config/postgresql` 소스 아래에 표시됩니다.

## 문제 해결 [#troubleshooting]

다음은 PostgreSQL 통합에 대한 몇 가지 문제 해결 팁입니다.

* 연결 문제가 있는 경우 `psql`를 사용하여 동일한 상자에서 클러스터에 연결할 수 있는지 확인합니다.
* `PgBouncer` 메트릭을 수집하는 데 문제가 있는 경우 `PgBouncer`를 통해 인스턴스에 연결되어 있는지 확인합니다. 기본 포트는 `6432`입니다.
* 오류 메시지 `Error creating list of entities to collect: pq: unsupported startup parameter: extra_float_digits`가 표시되면 `PgBouncer` 구성 파일에서 `ignore_startup_parameters = extra_float_digits`를 설정합니다.