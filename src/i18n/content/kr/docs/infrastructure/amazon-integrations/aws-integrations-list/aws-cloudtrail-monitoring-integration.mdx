---
title: AWS CloudTrail 모니터링 통합
tags:
  - Integrations
  - Amazon integrations
  - AWS integrations list
metaDescription: 'New Relic''s AWS CloudTrail monitoring integration: how to enable it, and what data it reports.'
translationType: machine
---

[New Relic 통합](/docs/infrastructure/integrations-getting-started/getting-started/introduction-infrastructure-integrations) 에는 AWS CloudTrail 이벤트를 New Relic에 보고하기 위한 통합이 포함됩니다. 이 문서에서는 이 통합을 활성화하는 방법과 보고할 수 있는 데이터에 대해 설명합니다.

## 특징

이 통합은 주로 감사 및 거버넌스 목적으로 AWS 계정 활동을 캡처하고 기록하는 [AWS CloudTrail](https://aws.amazon.com/documentation/cloudtrail/) 에서 정보를 수집합니다.

New Relic의 AWS CloudTrail 통합은 오류 및 AWS 콘솔 로그인을 나타내는 이벤트를 수집합니다. 오류는 실패한 API 호출 및 서비스에 대한 인식을 제공하고 콘솔 로그인은 콘솔 활동 및 잠재적인 침입 시도를 모니터링하는 데 도움이 됩니다.

이 두 가지 유형의 데이터 외에 New Relic은 다른 데이터를 수집하지 않습니다.

## 통합 활성화 [#requirements]

<Callout variant="important">
  AWS CloudTrail 통합은 기본적 **으로 us-east-1 리전에서만** 데이터를 수집합니다. 모든 AWS 리전을 활성화하려면 [support.newrelic.com](https://support.newrelic.com/) 으로 문의하십시오.
</Callout>

이 통합을 활성화하려면 [AWS 서비스를 New Relic에 연결](/docs/infrastructure/amazon-integrations/get-started/connect-aws-new-relic-infrastructure-monitoring/) 하기 위한 표준 절차를 따르십시오.

## 구성 및 폴링 [#polling]

[구성 옵션](/docs/integrations/new-relic-integrations/getting-started/configure-polling-frequency-data-collection-cloud-integrations) 을 사용하여 폴링 빈도를 변경하고 데이터를 필터링할 수 있습니다.

AWS CloudTrail 통합에 대한 [기본 폴링](/docs/infrastructure/amazon-integrations/aws-integrations-list/aws-polling-intervals-infrastructure-integrations) 정보:

* New Relic 폴링 간격: 5분

## 데이터 찾기 및 사용 [#find-data]

인프라에서 통합 데이터를 찾으려면 **[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Infrastructure > AWS** 로 이동하고 AWS CloudTrail 통합 링크 중 하나를 선택하십시오.

이 통합은 메트릭을 제공하지 않고 [이벤트 데이터](/docs/telemetry-data-platform/understand-data/new-relic-data-types/#events-new-relic) 만 제공합니다. 인프라 UI에서 [**Events** \[이벤트\] 페이지를](/docs/infrastructure/new-relic-infrastructure/infrastructure-ui-pages/infrastructure-events-page-live-feed-every-config-change) 사용하여 이러한 이벤트의 타임라인을 볼 수 있습니다.

`provider` 값이 `CloudTrail` 인 `InfrastructureEvent` [이벤트 유형](/docs/data-apis/understand-data/new-relic-data-types/#event-data) 을 사용 [하여 데이터를 쿼리하고 탐색할](/docs/using-new-relic/data/understand-data/query-new-relic-data) 수 있습니다.

통합 데이터를 찾고 사용하는 방법에 대한 일반적인 정보는 통합 데이터 [이해](/docs/infrastructure/integrations/find-use-infrastructure-integration-data) 를 참조하십시오.

## 이벤트 속성

다음은 CloudTrail 이벤트로 보고할 수 있는 속성입니다.

<table>
  <thead>
    <tr>
      <th>
        메타데이터
      </th>

      <th>
        설명
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `awsRegion`
      </td>

      <td>
        요청이 이루어진 AWS 리전입니다.
      </td>
    </tr>

    <tr>
      <td>
        `cloudTrailEventType`
      </td>

      <td>
        이벤트 레코드를 생성한 이벤트 유형을 식별합니다. `AwsApiCall` , `AwsServiceEvent` , `ConsoleSignin` 값 중 하나일 수 있습니다.
      </td>
    </tr>

    <tr>
      <td>
        `errorCode`
      </td>

      <td>
        AWS 서비스 오류(요청이 오류를 반환하는 경우). 가장 일반적인 오류 목록은 [AWS CloudTrail 설명서](https://docs.aws.amazon.com/awscloudtrail/latest/APIReference/CommonErrors.html) 를 참조하십시오.
      </td>
    </tr>

    <tr>
      <td>
        `errorMessage`
      </td>

      <td>
        요청이 오류를 반환하면 오류에 대한 설명입니다.
      </td>
    </tr>

    <tr>
      <td>
        `eventId`
      </td>

      <td>
        이벤트의 고유 식별자입니다.
      </td>
    </tr>

    <tr>
      <td>
        `eventName`
      </td>

      <td>
        요청한 작업입니다.
      </td>
    </tr>

    <tr>
      <td>
        `eventSource`
      </td>

      <td>
        요청이 이루어진 AWS 서비스입니다.
      </td>
    </tr>

    <tr>
      <td>
        `sourceIpAddress`
      </td>

      <td>
        요청이 이루어진 IP 주소입니다.
      </td>
    </tr>

    <tr>
      <td>
        `userAgent`
      </td>

      <td>
        AWS Management 콘솔, AWS 서비스, AWS SDK 또는 AWS CLI와 같이 요청이 이루어진 에이전트입니다.
      </td>
    </tr>

    <tr>
      <td>
        `userName`
      </td>

      <td>
        반환된 이벤트에서 API를 호출한 요청자의 사용자 이름 또는 역할 이름입니다.
      </td>
    </tr>
  </tbody>
</table>

## 쿼리 예시 [#example-queries]

New Relic을 사용하여 AWS CloudTrail 데이터 쿼리를 실행하고 선택적으로 New Relic 경고를 사용하여 해당 데이터에 대한 경고를 설정할 수 있습니다.

<CollapserGroup>
  <Collapser
    id="api-fails"
    title="쿼리 예: 실패한 API 호출 수"
  >
    요청이 이루어진 AWS 서비스에서 집계한 실패한 API 호출 수를 쿼리합니다.

    ```
    SELECT count(*) from InfrastructureEvent WHERE provider = 'CloudTrail' 
        AND cloudTrailEventType = 'AwsApiCall' 
        FACET eventSource
    ```
  </Collapser>

  <Collapser
    id="api-fails"
    title="쿼리 예: 콘솔 로그인 오류 수"
  >
    모든 콘솔 로그인 오류를 찾기 위한 쿼리:

    ```
    SELECT * from InfrastructureEvent WHERE provider = 'CloudTrail' 
        AND cloudTrailEventType = 'AwsConsoleSignIn' 
        AND errorMessage IS NOT NULL
    ```
  </Collapser>
</CollapserGroup>