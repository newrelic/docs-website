---
title: 빈번한 Fluent Bit 재시작 이벤트
type: troubleshooting
tags:
  - Infrastructure
  - Infrastructure monitoring troubleshooting
  - Troubleshoot infrastructure
  - Fluent Bit
metaDescription: Troubleshooting steps to resolve the infrastructure agent bug causing endless Fluent Bit restart events due to hostname resolution issues.
freshnessValidatedDate: never
translationType: machine
---

## 문제

뉴렐릭 인프라 에이전트가 실제 Fluent Bit 다시 시작하지 않고 과도한 `Fluent Bit Started` 및 `Fluent Bit Stopped` 이벤트를 보내고 있습니다. 이로 인해 로그가 복잡해지고 모니터링 정확도가 떨어지며 데이터 수집이 늘어나 예상치 못한 청구 비용이 발생할 가능성이 있습니다.

## 원인

이는 베어링 에이전트의 호스트명 해결 구성 요소에 있는 버그로 인해 발생합니다. 에이전트가 빈번한 호스트명 변경을 잘못 감지하여 `LogForwarderSupervisor` 이 잘못된 Fluent Bit 재시작 이벤트를 전송하도록 트리거합니다. 다음 예와 유사한 수천 개의 디버그 메시지가 표시될 수 있습니다.

```
time="2024-04-20T02:46:47Z" level=debug msg="Notifying observers." change=2 component=HostnameResolver
time="2024-04-20T02:46:47Z" level=debug msg="Observer notified." component=HostnameResolver name=LogForwarderSupervisor
```

## 해결책

이 문제를 해결하려면 방위 에이전트 설정에서 호스트명 해결 동작을 수정하세요. 이 수정 사항은 Windows와 Linux 시스템 모두에 적용됩니다.

방위군 설정 파일에 다음 설정을 추가합니다.

**Linux**: `/etc/newrelic-infra.yml` **Windows**: `C:\Program Files\New Relic\newrelic-infra\newrelic-infra.yml`

```yml
dns_hostname_resolution: false
override_hostname: "your-server-hostname"
```

`"your-server-hostname"` 실제 서버 호스트명으로 바꾸세요.

이 설정:

* 불안정한 호스트명 감지를 유발할 수 있는 역방향 DNS 조회를 비활성화합니다.
* 에이전트가 특정 호스트명을 사용하도록 강제하여 호스트명 변경 감지를 방지합니다.

### 설정 적용

설정을 추가한 후:

1. 설정 파일을 저장합니다.

2. 뉴렐릭 인프라 에이전트를 다시 시작합니다.

   **Linux**:

   ```bash
   sudo systemctl restart newrelic-infra
   ```

   **Windows**:

   ```powershell
   Restart-Service newrelic-infra
   ```

## 확인

문제가 해결되었는지 확인하려면:

1. 반복되는 `HostnameResolver` 메시지가 없는지 인프라 에이전트 로그를 모니터링합니다.
2. 뉴렐릭 대시보드를 확인하여 `Fluent Bit Started` 및 `Fluent Bit Stopped` 이벤트가 더 이상 지속적으로 표시되지 않는지 확인하세요.
3. 로그 포워딩이 계속해서 정상적으로 작동하고 해당 로그가 구성된 것으로 나타나는지 확인하세요.

## 추가 리소스

* [군대 요원 호스트명 해결 문서](https://github.com/newrelic/infrastructure-agent/blob/master/docs/hostname_resolution.md)
* [인프라 에이전트 구성 설정](/docs/infrastructure/install-infrastructure-agent/configuration/infrastructure-agent-configuration-settings/)