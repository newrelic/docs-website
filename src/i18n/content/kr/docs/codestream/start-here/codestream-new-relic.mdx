---
title: CodeStream과 New Relic
metaDescription: Read about the useful ways CodeStream and New Relic work together.
translationType: machine
---

import connectRepo1 from 'images/connect-repo1.png'

CodeStream과 New Relic 플랫폼은 함께 작동하여 코드 오류에 대한 통찰력을 제공할 뿐만 아니라 APM 에이전트로 코드 계측을 더 쉽게 시작할 수 있도록 합니다.

CodeStream을 New Relic에 연결하면 스택 추적 오류에서 IDE의 문제가 되는 코드 줄로 직접 이동할 수 있습니다. IDE에서 스택 추적을 탐색하고 [팀원과 협력하여 문제를 해결할 수](/docs/codestream/how-use-codestream/performance-monitoring) 있습니다.

## CodeStream과 New Relic 연결 [#connect]

CodeStream에서 New Relic의 관찰 가능성 기능을 활용하려면 먼저 연결해야 합니다.

CodeStream과 New Relic을 연결하기 위한 요구 사항:

* [New Relic 계정](https://newrelic.com/signup) (New Relic 계정이 없으면 [newrelic.com/signup](https://newrelic.com/signup) 에서 가입하십시오. 영원히 무료입니다!)
* [새 유물 사용자 키](https://one.newrelic.com/launcher/api-keys-ui.api-keys-launcher) . 자세한 내용은 [API 키](/docs/apis/intro-apis/new-relic-api-keys/#user-api-key) 를 참조하십시오.
* [핵심 사용자 또는 전체 플랫폼 사용자](/docs/accounts/accounts-billing/new-relic-one-user-management/user-type#user-type-capabilities) 의 사용자 유형이 있어야 합니다.

New Relic 사용자 키가 있으면 CodeStream의 **관찰** 가능성 섹션에서 **Connect to New Relic 을** 클릭한 다음 API 키를 붙여넣고 **Connect to New Relic 을** 클릭합니다.

<Callout variant="caution">
  New Relic 사용자는 CodeStream에서 스택 추적 오류를 공유할 수 있습니다. CodeStream을 New Relic에 연결하면 CodeStream 조직에 추가하는 모든 새 사용자가 이러한 오류를 볼 수 있습니다.
</Callout>

## 오류 및 원인 확인 [#errors]

CodeStream과 New Relic을 연결한 후 워크로드 및 오류 받은 편지함을 사용하여 IDE에서 문제가 되는 코드로 이동합니다.

IDE에서 스택 추적 오류를 열기 위한 요구 사항:

* [New Relic 계정](https://newrelic.com/signup) (New Relic 계정이 없으면 [newrelic.com/signup](https://newrelic.com/signup) 에서 가입하십시오. 영원히 무료입니다!)
* [New Relic 사용자 키](https://one.newrelic.com/launcher/api-keys-ui.api-keys-launcher)
* [CodeStream 및 New Relic 연결](#connect)
* [APM 모니터링을 통해 New Relic에 보고되는 데이터](https://one.newrelic.com/launcher/nr1-core.explorer?pane=eyJuZXJkbGV0SWQiOiJucjEtY29yZS5saXN0aW5nIn0=&cards%5B0%5D=eyJuZXJkbGV0SWQiOiJucjEtaW5zdGFsbC1uZXdyZWxpYy5ucjEtaW5zdGFsbC1uZXdyZWxpYyIsImFjdGl2ZUNvbXBvbmVudCI6IlZUU09FbnZpcm9ubWVudCIsInBhdGgiOiJndWlkZWQifQ==)
* [오류](/docs/apm/apm-ui-pages/errors-inbox/errors-inbox/#error-details)
* [APM 오류의 경우 리포지토리의 커밋 해시 및 릴리스 태그](#apm)

New Relic 오류 받은 편지함은 고객에게 영향을 미치기 전에 오류를 사전에 감지하고 우선 순위를 지정하고 조치를 취할 수 있는 단일 장소입니다. CodeStream을 사용하면 IDE에서 오류에서 문제가 되는 코드로 직접 이동할 수 있습니다.

<Callout variant="tip">
  APM 오류로 제한됩니다.
</Callout>

### 오류 받은 편지함에서 IDE로 이동하는 방법

**[one.newrelic.com/](https://one.newrelic.com/)** 에서 **Errors Inbox** 로 이동하여 스택 추적 오류를 클릭한 다음 **Open in IDE** 를 클릭합니다.

## APM 오류 및 CodeStream [#apm]

IDE에서 스택 추적 오류를 보려면 CodeStream은 오류가 연결된 리포지토리와 이상적으로는 오류를 생성한 코드 버전을 알아야 합니다.

## 리포지토리를 오류와 연결 [#repo-url]

APM, 모바일 또는 브라우저에 대한 모니터링을 시작한 후에는 리포지토리 엔터티를 만들고 모든 서비스의 엔터티와 연결해야 합니다. 저장소 엔티티를 생성하려면 저장소의 원격 URL을 제공해야 합니다. 예를 들어 원격 URL은 SSH 또는 HTTPS 형식일 수 있습니다.

* `git@github.com:newrelic/beta-docs-site.git`
* `https://github.com/newrelic/beta-docs-site.git`

<Callout variant="caution">
  다른 프로토콜을 사용하는 경우 동일한 GitHub 리포지토리를 두 번 이상 추가할 수 있습니다. UI는 이에 대해 경고하지만 그렇게 하는 것을 막지는 않습니다.

  예를 들어, `https://github.com/tuna/repo` 및 `git@github.com:tuna/repo` 은 프로토콜이 다른 동일한 저장소입니다.
</Callout>

IDE에서 오류를 열려고 할 때 연결된 리포지토리가 없으면 CodeStream은 연결을 만들고 New Relic에 있는 지정된 엔터티의 모든 오류에 대해 해당 연결을 저장하라는 메시지를 표시합니다. 그러나 다음 방법 중 하나를 사용하면 지속적인 수동 작업이 덜 필요하고 원격 URL이 잘못 구성된 것과 같은 최종 사용자의 실수 가능성이 없기 때문에 사용하는 것이 좋습니다.

<CollapserGroup>
  <Collapser
    className="freq-link"
    id="env-var"
    title="APM과 함께 환경 변수 사용(권장)"
  >
    환경 변수 `NEW_RELIC_METADATA_REPOSITORY_URL` 를 설정합니다. New Relic APM 에이전트는 리포지토리 엔터티를 생성하고 이를 애플리케이션 엔터티에 자동으로 연결합니다.

    이를 위해서는 SSH 또는 HTTPS URL 형식이 필요합니다. 빌드 파이프라인의 일부로 설정하는 것이 좋습니다.
  </Collapser>

  <Collapser
    className="freq-link"
    id="repo-ui"
    title="UI 사용"
  >
    New Relic에 데이터 보내기를 시작했다면 UI를 사용하여 관련 저장소를 연결하세요. **[one.newrelic.com](https://one.newrelic.com) > Explorer > Services - APM > (앱 선택)** 을 통해 APM 요약 페이지로 이동한 다음 오른쪽 하단에서 **저장소** 섹션을 찾습니다.

    <img
      title="The connect repository button."
      alt="A screenshot of the connect repository button."
      src={connectRepo1}
    />

    **저장소 연결** 을 클릭하여 기존 저장소를 찾거나 새 저장소를 추가하십시오.
  </Collapser>

  <Collapser
    className="freq-link"
    id="nerdgraph"
    title="NerdGraph API 사용"
  >
    New Relic의 [NerdGraph API](/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph/) 를 사용하여 리포지토리를 만들고 애플리케이션 엔터티와 연결합니다.

    **1단계: 리포지토리 엔터티 만들기**

    저장소 항목을 만들려면 `referenceEntityCreateOrUpdateRepository` API를 사용하고 생성된 GUID를 저장해야 합니다. API는 다음 매개변수를 사용합니다.

    * `accountId` - 저장소를 추가하려는 계정의 정수 계정 ID

    * `url` - 예시 `https://github.com/newrelic/beta-docs-site.git`

    * `name` - 예시: `newrelic/beta-docs-site`

      ```
      mutation {
        referenceEntityCreateOrUpdateRepository(repositories: [{accountId: [YOUR_ACCOUNT_ID], name: "[REPO_NAME]", url: "[REPO_URL]"}]) {
          created
          failures {
            guid
            message
            type
          }
        }
      }
      ```

      생성한 엔터티를 찾기 위해 다음과 같은 쿼리를 사용할 수 있습니다. `referenceEntityCreateOrUpdateRepository` 에 제공한 URL은 엔티티 태그로 저장됩니다.

      ```
      {
        actor {
          entitySearch(query: "name = 'a name' OR tags.url = 'a url'") {
            count
            query
            results {
              entities {
                guid
                name
                tags {
                  key
                  values
                }
              }
            }
          }
        }
      }

      ```

      **2단계: 저장소 엔터티를 애플리케이션 엔터티에 연결**

      먼저 리포지토리를 연결할 응용 프로그램의 GUID를 찾습니다.

      매개변수:

    * `sourceEntityGuid` - 애플리케이션의 엔터티 GUID

    * `targetEntityGuid` - 저장소의 엔티티 GUID

    * `type` - 언제나 `BUILT_FROM`

      ```
      mutation {
        entityRelationshipUserDefinedCreateOrReplace(sourceEntityGuid: "", targetEntityGuid: "", type: BUILT_FROM) {
          errors {
            message
            type
          }
        }
      }
      ```

      저장소와 관련된 모든 엔터티를 보려면 다음과 같은 쿼리를 수행할 수 있습니다.

      ```
      {
        actor {
          entity(guid: "[YOUR_REPOSITORY_GUID]]") {
            relatedEntities(filter: {direction: BOTH, relationshipTypes: {include: BUILT_FROM}}) {
              results {
                target {
                  entity {
                    name
                    guid
                    type
                  }
                }
                type
              }
            }
            name
            type
            tags {
              values
              key
            }
          }
        }
      }
      ```

      **3단계: 정리(필요한 경우)**

      다음 쿼리를 사용하여 저장소를 삭제합니다.

      ```
      mutation DeleteRepository {
        entityDelete(guids: "[ENTITY_GUID_HERE]]") {
          deletedEntities
          failures {
            message
            guid
          }
        }
      }
      ```
  </Collapser>
</CollapserGroup>

## 빌드 SHA 또는 릴리스 태그를 오류와 연결 [#buildsha]

APM 스택 추적 오류와 함께 CodeStream의 **IDE에서 열기** 를 사용하려면 환경 변수를 사용하여 실행 중인 소프트웨어 버전과 연결된 애플리케이션의 [커밋 샤](https://git-scm.com/book/en/v2/Git-Tools-Revision-Selection) 및/또는 [릴리스 태그](https://git-scm.com/book/en/v2/Git-Basics-Tagging) 로 APM 에이전트를 구성하십시오.

CodeStream은 이 연결을 만들기 위해 커밋 샤의 처음 7자(예: `734713b` )만 필요하지만 전체 샤를 포함할 수 있습니다.

또는 CodeStream에 대한 릴리스 태그(예: `v0.1.209` 또는 `release-209` )를 사용하여 올바른 버전의 코드를 찾을 수 있습니다.

New Relic APM의 경우 커밋 및/또는 릴리스 태그( `tags.commit` 및 `tags.releaseTag` )가 `Transaction` 및 `TransactionError` 이벤트의 속성으로 추가됩니다. APM 환경 변수를 사용하여 이러한 속성을 설정할 수 있습니다.

빌드 파이프라인의 일부로 이러한 변수 중 하나 또는 둘 다를 설정하는 것이 좋습니다.

* `NEW_RELIC_METADATA_COMMIT` - 커밋 샤. 전체를 포함하거나 처음 7자만 포함할 수 있습니다.
* `NEW_RELIC_METADATA_RELEASE_TAG` - 릴리스 태그(예: `v0.1.209` 또는 `release-209` ). 사람이 읽을 수 있다는 장점이 있습니다.

이러한 변수를 설정하는 방법에 대한 자세한 내용은 각 언어에 대한 특정 구성 세부정보입니다.

* [가다](/docs/agents/go-agent/configuration/go-agent-configuration/)
* [자바](/docs/agents/java-agent/configuration/java-agent-configuration-config-file/)
* [.그물](/docs/agents/net-agent/configuration/net-agent-configuration/)
* [노드.js](/docs/agents/nodejs-agent/installation-configuration/nodejs-agent-configuration/)
* [PHP](/docs/agents/php-agent/configuration/php-agent-configuration/)
* [파이썬](/docs/agents/python-agent/configuration/python-agent-configuration/)

## CodeStream으로 APM 에이전트 설치 [#install-agents]

CodeStream을 통해 New Relic APM 에이전트를 설치하기 위한 요구 사항:

* [New Relic 계정](https://newrelic.com/signup)

* [New Relic 사용자 키](https://one.newrelic.com/launcher/api-keys-ui.api-keys-launcher)

* [CodeStream 및 New Relic 연결](#connect)

* 지원되는 언어 응용 프로그램 코드베이스

  * .NET Core
  * 자바
  * 노드.JS

CodeStream을 New Relic에 처음 연결할 때 New Relic에서 모니터링하지 않는 애플리케이션의 코드베이스에서 작업하는 경우 CodeStream은 해당 애플리케이션을 계측하도록 제안합니다.

[New Relic의 설치 안내](/docs/full-stack-observability/observe-everything/get-started/new-relic-guided-install-overview/) 와 마찬가지로 CodeStream은 APM 에이전트를 설치하여 New Relic에 데이터 전송을 시작하는 모든 단계를 안내하고 자동화합니다.

이 검사는 초기 연결이 이루어진 경우에만 자동으로 발생합니다. 나중에 그렇게 하려면 CodeStream 확장에서 사용자 이름을 클릭한 다음 **New Relic Setup** 을 클릭합니다.

## Go 및 Pixie를 사용한 동적 로깅 [#dynamic-logs]

* [New Relic 계정](https://newrelic.com/signup)

* [New Relic 사용자 API 키](https://one.newrelic.com/launcher/api-keys-ui.api-keys-launcher)

* [CodeStream 및 New Relic 연결](#connect)

* [Pixie가 모니터링하는 Kubernetes 클러스터](/docs/auto-telemetry-pixie/install-auto-telemetry-pixie/)

* Go로 작성된 애플리케이션

  CodeStream을 사용하여 Pixie에서 모니터링하는 Go 애플리케이션에 대한 동적 로깅을 활성화할 수 있습니다. 메소드 이름을 마우스 오른쪽 버튼으로 클릭하고 **Pixie를 사용한 동적 로깅** 을 선택하기만 하면 됩니다.

## Python을 사용한 코드 수준 측정항목 [#code-level-metrics]

* [New Relic 계정](https://newrelic.com/signup)
* [New Relic 사용자 API 키](https://one.newrelic.com/launcher/api-keys-ui.api-keys-launcher)
* [CodeStream 및 New Relic 연결](#connect)
* [저장소의 커밋 해시 및 릴리스 태그](#apm)
* [지원되는 프레임워크](/docs/apm/agents/python-agent/getting-started/instrumented-python-packages) 로 작성된 Python 애플리케이션

CodeStream 및 New Relic을 사용하여 Python 애플리케이션 코드 성능을 계측할 수 있습니다. 활성화되면 메트릭이 IDE에서 CodeLens 또는 코드 메서드 위에 삽입된 텍스트로 표시됩니다.