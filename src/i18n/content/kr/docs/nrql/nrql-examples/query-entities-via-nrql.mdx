---
title: NRQL을 통한 엔티티 및 관계 예시 (NRQL을 통한 엔티티 및 관계 예시)
metaDescription: Examples of NRQL queries for entities & relationships
freshnessValidatedDate: '2024-03-19T00:00:00.000Z'
translationType: machine
---

NRQL (뉴렐릭 쿼리 언어)을 사용하여 직접 쿼리 부분 및 관계 데이터를 사용하여 시스템 분석을 간소화합니다. 이 접근 방식은 CPU 성능과 호스트 속성 간의 상관 관계, 과거 성능 상태 보기, 설정 변경 추적과 같은 중요한 작업에 필요한 번거로운 수동 프로세스를 대체하여 복잡한 환경에 더 빠르게 접근할 수 있도록 해줍니다.

이 데이터를 조회하려면 고급 컴퓨트가 필요합니다. 분리 이벤트 유형(및 관계별 쿼리의 경우 관계 또는 엔터티 관계)을 사용합니다.

<Callout variant="tip">
  NRQL을 사용하여 엔티티 및 관계를 쿼리하는 것이 처음이신가요? 다음 예시들을 살펴보기 전에 [NRQL을 통해 E&amp;R의 개념과 이점](/docs/nrql/get-started/query-entities-and-relationships-via-nrql) 에 대해 알아보세요.
</Callout>

아래의 실용적인 NRQL 솔루션을 살펴보시고 도움을 받으세요.

<CollapserGroup>
  <Collapser id="total-tx" title="CPU 사용량과 호스트 속성 간의 상관관계 분석">
    * **목표**: 운영팀은 특정 AWS 리전(예: &apos;eu-central-1&apos;)에 위치한 모든 프로덕션 호스트의 CPU 사용률을 분석하여 잠재적인 성능 저하 요인을 파악해야 합니다.
    * **문제점**: 이 작업은 종종 호스트 데이터와 성능 지표를 별도로 내보낸 다음 외부 도구나 복잡한 스크립트를 사용하여 이를 결합하고 분석해야 했습니다.
    * **NRQL 솔루션**:

    ```sql
    FROM SystemSample
    JOIN (FROM Entity SELECT id, name WHERE type = 'INFRA-HOST' AND `tags.aws.awsRegion` = 'eu-central-1')
    ON entityGuid = id
    SELECT average(cpuPercent) FACET name
    ```
  </Collapser>

  <Collapser id="total-tx" title="특정 시점의 엔티티 상태를 확인합니다.">
    * **목표**: A 개발자는 몇 시간 전에 발생한 공지 이벤트를 조사하고 있으며 특정 시점에 특정 호스트(또는 컨테이너, 제작 등)의 정확한 설정이나 상태를 알아야 합니다.

    * **문제점**: 특정 과거 시점의 기기 속성 스냅샷을 얻는 것이 종종 불가능하거나, 가능하더라도 방대한 설정 로그를 일일이 살펴봐야 하는 경우가 많았습니다.

    * **NRQL 솔루션**: 이 쿼리는 특정 엔티티(ID로 식별됨)에 대해 7시간 전부터 1시간 이내의 짧은 기간 동안 사용 가능한 모든 속성을 검색합니다.

    ```sql
    FROM Entity
    SELECT *
    WHERE id = '<your_entity_id>'
    SINCE 7 hours ago UNTIL 6 hours ago
    LIMIT 1
    ```
  </Collapser>

  <Collapser id="total-tx" title="엔티티 상태 변화 추적">
    * **목표**: SRE 는 구현, 배포 또는 자동화된 프로세스가 예상대로 상태를 변경했는지 확인하기 위해 지난 몇 시간 동안 대상의 설정 또는 주요 속성이 어떻게 변경되었는지 파악하고자 합니다.

    * **과제**: 시간이 지남에 따라 부품 상태의 미묘한 변화를 추적하는 것은 어려웠으며 종종 수동 비교 또는 사용자 정의 모델 펼쳐보기가 필요했습니다.

    * **NRQL 솔루션**: 이 쿼리는 특정 엔티티에 대해 지난 3시간 동안 기록된 모든 상태를 가져와 변경 사항을 감사할 수 있도록 합니다.

    ```sql
      SELECT *
      FROM Entity
      WHERE id = '<your_entity_id>'
      SINCE 3 hours ago
    ```
  </Collapser>

  <Collapser id="total-tx" title="호스트와 관련된 애플리케이션 찾기">
    * **목표**: 특정 호스트에서 실행 중인 애플리케이션을 식별합니다.

    * **과제**: 애플리케이션과 호스트를 연관시키기가 어렵습니다.

    * **NRQL 솔루션**:

    ```sql
    FROM EntityRelationship SELECT sourceEntityGuid, targetEntityGuid, sourceEntityType, targetEntityType, relationshipType   where (sourceEntityType like '%HOST%' and targetEntityType='APPLICATION') or (targetEntityType LIKE '%HOST%' and sourceEntityType='APPLICATION')
    ```
  </Collapser>
</CollapserGroup>