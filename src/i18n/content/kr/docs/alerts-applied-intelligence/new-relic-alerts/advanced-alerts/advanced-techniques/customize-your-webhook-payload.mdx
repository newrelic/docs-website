---
title: 웹훅 페이로드 사용자 지정
tags:
  - Alerts and applied intelligence
  - Alerts
  - Alert notifications
metaDescription: Examples of webhook values we can send to the defined callback URL for alerts notifications.
translationType: machine
---

<Callout
  variant="important"
  title="EOL 공지"
>
  알림 채널을 보다 강력한 워크플로로 대체하고 있습니다. 기존 알림은 더 많은 옵션, 유연성 및 제어를 제공하는 워크플로로 자동 마이그레이션되며 추가 데이터로 알림을 강화할 수 있습니다. [워크플로우에 대해 알아보십시오](/docs/alerts-applied-intelligence/applied-intelligence/incident-workflows/incident-workflows/) .
</Callout>

웹훅을 [알림 알림 채널](/docs/alerts/new-relic-alerts-beta/managing-notification-channels/notification-channels-controlling-where-send-alerts#webhook) 로 사용하는 경우 기본값을 사용할 수 있습니다. 시스템에 추가 통합을 위해 POST 메시지의 페이로드를 사용자 정의할 수도 있습니다.

## 웹훅 정의 [#ssl]

JSON 웹훅을 정의할 때 `"name":"value",` 형식을 사용하십시오. 예를 들어:

```
"current_state":"acknowledged",
```

양식 페이로드에서 정적 웹훅 변수를 정의할 때 `name="value"` 형식을 사용하십시오. 예를 들어:

```
current_state="acknowledged"
```

웹훅에 자체 서명된 사용자 정의 SSL 인증서를 포함하지 마십시오. 에이전트 [는 기본적으로 SSL을 활성화합니다](/docs/accounts-partnerships/accounts/security/data-security) . 보안 정책으로 인해 사용자 지정 SSL 인증서는 Trust Store로 가져올 수 없습니다. 다중 위치 실패 조건을 종합적으로 모니터링하기 위한 `$METADATA` 변수가 있는 웹훅은 현재 지원되지 않습니다.

## 웹훅 값 [#variables]

이러한 기본 동적 웹후크 값을 지원합니다. 편의를 위해 알파벳순으로 나열되어 있지만 원하는 순서로 웹후크 값을 정의할 수 있습니다. `"Error Type": "My Error"` 와 같은 자체 키/값 쌍을 사용하여 맞춤 변수를 추가할 수도 있습니다.

<table>
  <thead>
    <tr>
      <th>
        **열쇠**
      </th>

      <th>
        **변하기 쉬운**
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `"account_id"`
      </td>

      <td>
        `$ACCOUNT_ID`

        **가능한 값:** 새 유물 계정 ID(문자열)
      </td>
    </tr>

    <tr>
      <td>
        `"account_name"`
      </td>

      <td>
        `$ACCOUNT_NAME`

        **가능한 값:** 새 유물 계정 이름(문자열)
      </td>
    </tr>

    <tr>
      <td>
        `"closed_violations_count_critical"`
      </td>

      <td>
        `$CLOSED_VIOLATIONS_COUNT_CRITICAL`
      </td>
    </tr>

    <tr>
      <td>
        `"closed_violations_count_warning"`
      </td>

      <td>
        `$CLOSED_VIOLATIONS_COUNT_WARNING`
      </td>
    </tr>

    <tr>
      <td>
        `"condition_id"`
      </td>

      <td>
        `$CONDITION_ID`
      </td>
    </tr>

    <tr>
      <td>
        `"condition_description"`
      </td>

      <td>
        `$DESCRIPTION`

        경고 조건이 있는 경우 여기에는 경고 조건의 [설명 필드](/docs/alerts/new-relic-alerts/defining-conditions/alert-condition-descriptions) 가 포함됩니다.
      </td>
    </tr>

    <tr>
      <td>
        `"condition_name"`
      </td>

      <td>
        `$CONDITION_NAME`

        **가능한 값:** (사용자 정의 문자열)
      </td>
    </tr>

    <tr>
      <td>
        `"current_state"`
      </td>

      <td>
        `$EVENT_STATE`

        **가능한 값:** `[open|acknowledged|closed]`
      </td>
    </tr>

    <tr>
      <td>
        `"details"`
      </td>

      <td>
        `$EVENT_DETAILS`
      </td>
    </tr>

    <tr>
      <td>
        `"duration"`
      </td>

      <td>
        `$DURATION`
      </td>
    </tr>

    <tr>
      <td>
        `"event_type"`
      </td>

      <td>
        `$EVENT_TYPE`

        **가능한 값:** `[INCIDENT]`
      </td>
    </tr>

    <tr>
      <td>
        `"incident_acknowledge_url"`
      </td>

      <td>
        `$INCIDENT_ACKNOWLEDGE_URL`
      </td>
    </tr>

    <tr>
      <td>
        `"incident_id"`
      </td>

      <td>
        `$INCIDENT_ID`
      </td>
    </tr>

    <tr>
      <td>
        `"incident_url"`
      </td>

      <td>
        `$INCIDENT_URL`
      </td>
    </tr>

    <tr>
      <td>
        `"metadata"`
      </td>

      <td>
        `$METADATA`

        현재는 다중 위치 실패 조건을 종합적으로 모니터링하는 데만 사용됩니다.

        **가능한 값:** (객체)
      </td>
    </tr>

    <tr>
      <td>
        `"open_violations_count_critical"`
      </td>

      <td>
        `$OPEN_VIOLATIONS_COUNT_CRITICAL`
      </td>
    </tr>

    <tr>
      <td>
        `"open_violations_count_warning"`
      </td>

      <td>
        `$OPEN_VIOLATIONS_COUNT_WARNING`
      </td>
    </tr>

    <tr>
      <td>
        `"owner"`
      </td>

      <td>
        `$EVENT_OWNER`
      </td>
    </tr>

    <tr>
      <td>
        `"policy_name"`
      </td>

      <td>
        `$POLICY_NAME`

        **가능한 값:** (사용자 정의 문자열)
      </td>
    </tr>

    <tr>
      <td>
        `"policy_url"`
      </td>

      <td>
        `$POLICY_URL`
      </td>
    </tr>

    <tr>
      <td>
        `"runbook_url"`
      </td>

      <td>
        `$RUNBOOK_URL`
      </td>
    </tr>

    <tr>
      <td>
        `"severity"`
      </td>

      <td>
        `$SEVERITY`

        **가능한 값:** \[`CRITICAL]`
      </td>
    </tr>

    <tr>
      <td>
        `"targets"`
      </td>

      <td>
        `$TARGETS`

        `$TARGETS` 변수는 FORM 데이터와 함께 사용할 수 없지만 JSON 데이터와 호환됩니다.

        [정적 NRQL 패싯 경고](/docs/alerts/new-relic-alerts/defining-conditions/create-alert-conditions-nrql-queries#threshold-types) 의 경우 경고를 트리거한 패싯의 이름이 대상의 **이름** 필드에 채워집니다.

        사용 가능한 필드에 대한 설명은 [대상 값](/docs/alerts/new-relic-alerts/managing-notification-channels/customize-your-webhook-payload#target-values) 을 참조하십시오.
      </td>
    </tr>

    <tr>
      <td>
        `"timestamp"`
      </td>

      <td>
        `$TIMESTAMP`
      </td>
    </tr>

    <tr>
      <td>
        `"timestamp_utc_string"`
      </td>

      <td>
        `$TIMESTAMP_UTC_STRING`

        사람이 읽을 수 있는 `YYYY-MM-DD, HH:MM UTC` 형식의 타임스탬프입니다.
      </td>
    </tr>

    <tr>
      <td>
        `"version"`
      </td>

      <td>
        `$VERSION`
      </td>
    </tr>

    <tr>
      <td>
        `"violation_callback_url"`
      </td>

      <td>
        `$VIOLATION_CALLBACK_URL`
      </td>
    </tr>

    <tr>
      <td>
        `"violation_chart_url"`
      </td>

      <td>
        `$VIOLATION_CHART_URL`
      </td>
    </tr>
  </tbody>
</table>

## 목표 값 [#target-values]

이 섹션에서는 웹훅의 `$TARGETS` 필드에 대해 설명합니다. 이 데이터는 사용자 정의할 수 없으며 참조용으로 여기에 제공됩니다. `$TARGETS` 에는 0개 이상의 대상(엔티티) 목록이 있습니다. 각 대상은 다음 필드가 있는 JSON 객체로 설명됩니다.

<table>
  <thead>
    <tr>
      <th width={250}>
        **열쇠**
      </th>

      <th>
        **변하기 쉬운**
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `"id"`
      </td>

      <td>
        대상 또는 엔티티의 ID
      </td>
    </tr>

    <tr>
      <td>
        `"name"`
      </td>

      <td>
        대상 또는 엔티티의 이름
      </td>
    </tr>

    <tr>
      <td>
        `"labels"`
      </td>

      <td>
        조건 평가 및 사용 가능한 엔터티 태그에서 파생된 결합된 엔터티 태그 및 NRQL 패싯.
      </td>
    </tr>

    <tr>
      <td>
        `"link"`
      </td>

      <td>
        이 대상 또는 엔터티에 대한 URL 링크입니다.
      </td>
    </tr>

    <tr>
      <td>
        `"product"`
      </td>

      <td>
        이 대상 또는 엔터티에 대한 제품 유형입니다. 예를 들어, `APM`
      </td>
    </tr>

    <tr>
      <td>
        `"type"`
      </td>

      <td>
        `product` 아래의 대상 또는 엔티티 유형 ; 예를 들어, `Application`
      </td>
    </tr>
  </tbody>
</table>

## 웹훅 형식의 예 [#webhook-format-examples]

다음 예는 기본 동적 변수와 사용자 정의 변수를 모두 사용하는 웹훅 페이로드를 보여줍니다. 사용자 정의 변수와 함께 동적 변수의 일부 또는 전체를 사용하여 고유한 페이로드를 정의할 수 있습니다.

<CollapserGroup>
  <Collapser
    id="json-example"
    title="JSON 웹훅 예시"
  >
    <Callout variant="important">
      다음 웹훅 예제에는 가독성을 위해 추가 공백과 줄 바꿈이 있습니다. 실제 웹훅 응답은 한 줄의 연속된 텍스트로 전달됩니다. `"team": "DevOps"` 줄은 맞춤 변수의 예입니다.
    </Callout>

    ```
    {
    "account_id": "$ACCOUNT_ID",
    "account_name": "$ACCOUNT_NAME",
    "closed_violations_count_critical": "$CLOSED_VIOLATIONS_COUNT_CRITICAL",
    "closed_violations_count_warning": "$CLOSED_VIOLATIONS_COUNT_WARNING",
    "condition_family_id": "$CONDITION_FAMILY_ID",
    "condition_id": "$CONDITION_ID",
    "condition_name": "$CONDITION_NAME",
    "current_state": "$EVENT_STATE",
    "details": "$EVENT_DETAILS",
    "duration": "$DURATION",
    "event_type": "$EVENT_TYPE",
    "incident_acknowledge_url": "$INCIDENT_ACKNOWLEDGE_URL",
    "incident_id": "$INCIDENT_ID",
    "incident_url": "$INCIDENT_URL",
    "open_violations_count_critical": "$OPEN_VIOLATIONS_COUNT_CRITICAL",
    "open_violations_count_warning": "$OPEN_VIOLATIONS_COUNT_WARNING",
    "owner": "$EVENT_OWNER",
    "policy_name": "$POLICY_NAME",
    "policy_url": "$POLICY_URL",
    "runbook_url": "$RUNBOOK_URL",
    "severity": "$SEVERITY",
    "targets": "$TARGETS",
    "timestamp": "$TIMESTAMP",
    "timestamp_utc_string": "$TIMESTAMP_UTC_STRING",
    "violation_callback_url": "$VIOLATION_CALLBACK_URL",
    "violation_chart_url": "$VIOLATION_CHART_URL",
    "team": "DevOps"
    }
    ```
  </Collapser>

  <Collapser
    id="form-example"
    title="양식 웹훅 예시"
  >
    <Callout variant="important">
      다음 웹훅 예제에는 가독성을 위해 추가 공백과 줄 바꿈이 있습니다. 실제 웹훅 응답은 한 줄의 연속된 텍스트로 전달됩니다.
    </Callout>

    ```
    account_id=$ACCOUNT_ID
    account_name=$ACCOUNT_NAME
    closed_violations_count_critical=$CLOSED_VIOLATIONS_COUNT_CRITICAL
    closed_violations_count_warning=$CLOSED_VIOLATIONS_COUNT_WARNING
    condition_family_id=$CONDITION_FAMILY_ID
    condition_id=$CONDITION_ID
    condition_name=$CONDITION_NAME
    current_state=$EVENT_STATE
    details=$EVENT_DETAILS
    duration=$DURATION
    event_type=$EVENT_TYPE
    incident_acknowledge_url=$INCIDENT_ACKNOWLEDGE_URL
    incident_id=$INCIDENT_ID
    incident_url=$INCIDENT_URL
    open_violations_count_critical=$OPEN_VIOLATIONS_COUNT_CRITICAL
    open_violations_count_warning=$OPEN_VIOLATIONS_COUNT_WARNING
    owner=$EVENT_OWNER
    policy_name=$POLICY_NAME
    policy_url=$POLICY_URL
    runbook_url=$RUNBOOK_URL
    severity=$SEVERITY
    timestamp=$TIMESTAMP
    timestamp_utc_string=$TIMESTAMP_UTC_STRING
    violation_callback_url=$VIOLATION_CALLBACK_URL
    violation_chart_url=$VIOLATION_CHART_URL
    team="DevOps"  <--[example of custom variable]
    ```
  </Collapser>

  <Collapser
    id="MS-Teams-example"
    title="마이크로소프트 팀즈 예시"
  >
    ```
    {
      "@type": "MessageCard",
      "@context": "http://schema.org/extensions",
      "themeColor": "0076D7",
      "summary": {{ json annotations.title.[0] }},
      "sections": [{
        "activityTitle": "{{eq state 'CLOSED' yes='🟩' no='🟥'}} {{ annotations.title.[0] }}",
        "activitySubtitle": "{{#each accumulations.policyName}}{{this}}{{#unless @last}}, {{/unless}}{{/each}}",
        "activityImage": "https://one.newrelic.com/apple-touch-icon.png?v=2.1",
        "facts": [{
          "name": "Timestamp",
          "value": {{ json issueActivatedAtUtc }}
          }, {
          "name": "Account",
          "value": "{{ accumulations.tag.account.[0] }} ({{ nrAccountId }})"
          }, {
          "name": "Severity",
          "value": {{ json priority}}
          }, {
          "name": "State",
          "value": {{ json state}}
          }, {
          "name": "Duration",
          "value": {{ json issueDurationText }}
          }, {
          "name": "Impacted entities",
          "value": "{{#each entitiesData.names}}{{this}}{{#unless @last}}, {{/unless}}{{/each}}"
          }, {
          "name": "Details",
          "value": "{{#each accumulations.conditionName}}{{this}}{{#unless @last}}, {{/unless}}{{/each}}"
          }],
        "markdown": true
        }, {
          "text": "<img src="{{ violationChartUrl }}" alt="Incident Chart">"
        }],
        "potentialAction": [{
          "@type": "OpenUri",
          "name": "View Incident",
          "targets": [{
          "os": "default",
          "uri": {{ json issuePageUrl }}
          }]
        }, {
          "@type": "OpenUri",
          "name": "Acknowledge Incident",
          "targets": [{
          "os": "default",
          "uri": {{ json issueAckUrl }}
          }]
        }, {
          "@type": "OpenUri",
          "name": "Open Runbook",
          "targets": [{
          "os": "default",
          "uri": {{ json accumulations.runbookUrl.[0] }}
          }]
        }]  
      }
    ```
  </Collapser>
</CollapserGroup>