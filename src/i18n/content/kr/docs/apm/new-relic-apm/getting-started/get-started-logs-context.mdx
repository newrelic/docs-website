---
title: 컨텍스트의 APM 로그인
metaDescription: 'Get relevant logs, traces, errors, and other linking metadata within the context of your app or host, without additional configuration or context switching in New Relic.'
translationType: machine
---

import ApmLic2040622 from 'images/apm-lic2-040622.png'

import ViewLimits from 'images/view-limits.png'

import ApmLic3040622 from 'images/apm-lic3-040622.png'

import ApmRelated040622 from 'images/apm-lic-related040622.png'

import ApmLic2A040622 from 'images/apm-lic2a-040622.png'

import ApmLic4040622 from 'images/apm-lic4-040622.png'

import ApmLic5040622 from 'images/apm-lic5-040622.png'

앱이나 호스트의 문제를 해결할 때 모든 New Relic 도구가 필요합니다. 그러나 UI 전체에서 컨텍스트 전환을 많이 하거나 사용 가능한 정보의 풍부함에 압도되는 것을 원하지 않습니다.

당사의 APM 에이전트는 애플리케이션 로그 데이터에 관련 속성을 자동으로 추가할 수 있습니다. 따라서 컨텍스트에서 로그를 매우 쉽게 사용할 수 있습니다. 응용 프로그램은 에이전트를 사용하여 로그 데이터를 New Relic에 직접 전달할 수도 있습니다.

로그는 속한 애플리케이션, 트랜잭션 또는 오류의 컨텍스트에서 더 가치가 있습니다. 컨텍스트 기능의 로그를 사용하면 애플리케이션의 로그, 분산 추적 및 APM에서 직접 오류를 볼 수 있으므로 문제 해결 방식이 변경됩니다.

상황에 맞는 로그인이 앱과 호스트에서 문제의 근본 원인을 찾는 데 어떻게 도움이 되는지 보려면 다음 짧은 비디오(약 3분 40초)를 시청하세요.

<Video
  id="Vgae-GrlZWg"
  type="youtube"
/>

[컨텍스트에서 자동 로그의 기능에](#response-time-example) 대해 자세히 알아보세요. 이 예에서는 엔지니어링 팀이 앱의 응답 시간이 느리고 오류율이 높아지는 문제를 해결하기 위해 이를 어떻게 사용했는지 설명합니다.

## 시작하다 [#get-started]

컨텍스트에서 APM 로그를 설정하려면:

1. 아직 계정이 없다면 [New Relic 계정을 만드](https://newrelic.com/signup) 십시오. 영원히 무료입니다.
2. 앱 및 호스트에 대해 [지원되는 에이전트 버전](#agents) 으로 업데이트하십시오.
3. [에이전트에 대한 로그를 활성화](#agents) 하고 구성 파일을 약간 업데이트합니다.

그게 다야! New Relic의 컨텍스트에서 APM 로그를 사용하여 애플리케이션 문제 해결을 시작하십시오.

* [one.newrelic.com](https://one.newrelic.com) 의 탐색기 UI
* EU 지역의 탐색기 UI: [one.eu.newrelic.com](https://one.eu.newrelic.com)

<img
  title="APM logs in context UI options"
  alt="Screenshot of APM Summary page with logs in context options"
  src={ApmLic2040622}
/>

<figcaption>
  New Relic의 APM **요약** 페이지에서 로그, 추적 및 오류를 드릴다운하십시오.
</figcaption>

## APM 에이전트 로그 구성 [#agents]

최신 APM 에이전트는 타사 소프트웨어를 설치하거나 유지 관리할 필요 없이 자동으로 컨텍스트 추가 및 로그 전달을 지원합니다! 로그에는 `span.id` , `trace.id` , `hostname` , `entity.guid` , `entity.name` 등과 같은 속성이 자동으로 포함됩니다. 이 메타데이터는 로그를 추적, 범위, 인프라 데이터 및 기타 원격 측정에 연결하므로 문제를 더 쉽게 해결할 수 있습니다.

일부 언어 또는 로깅 프레임워크는 아직 지원되지 않습니다. 다음은 언어별 문서에 대한 링크와 함께 현재 지원되는 환경입니다.

* 에이전트 [v7.6.0 이상](/docs/release-notes/agent-release-notes/java-release-notes) 에 대한 [컨텍스트 절차의 Java 로그인](/docs/logs/logs-context/java-configure-logs-context-all)
* 에이전트 [v9.8.0 이상](/docs/release-notes/agent-release-notes/net-release-notes) 에 대한 [컨텍스트 절차의 .NET 로그인](/docs/logs/logs-context/net-configure-logs-context-all)
* [Node.js](/docs/logs/logs-context/configure-logs-context-nodejs) 는 에이전트 [v8.11.0 이상](/docs/release-notes/agent-release-notes/nodejs-release-notes) 에 대한 컨텍스트 절차에 로그인합니다.
* 에이전트 [v7.12.0.176](/docs/release-notes/agent-release-notes/python-release-notes) 에 대한 [컨텍스트 프로시저의 Python 로그인](/docs/logs/logs-context/configure-logs-context-python)
* 에이전트 [v8.6.0 이상](/docs/release-notes/agent-release-notes/ruby-release-notes) 에 대한 [컨텍스트 절차에서 Ruby 로그인](/docs/logs/logs-context/configure-logs-context-ruby)

<Callout variant="tip">
  컨텍스트의 APM 로그인은 APM 에이전트 로그 데이터를 자동으로 전달하며 기본적으로 활성화되어 있습니다. 이는 보안, 규정 준수, 청구 또는 시스템 성능에 부정적인 영향을 미칠 수 있습니다. 자세한 내용을 확인하거나 기본 설정을 조정해야 하는 경우 절차에 따라 [자동 로깅을 비활성화](/docs/logs/logs-context/disable-automatic-logging) 합니다.
</Callout>

APM 에이전트가 컨텍스트 솔루션의 자동 로그를 아직 지원하지 않는 경우 컨텍스트 솔루션 [에서 수동 로그를](/docs/logs/logs-context/logs-in-context) 계속 사용하고 인프라 에이전트 또는 지원되는 타사 전달자를 통해 로그를 전달할 수 있습니다.

## 데이터 프라이버시 보장 [#data-privacy]

<Callout variant="caution">
  New Relic으로 전송되는 로그 데이터는 사용자가 제어하므로 PII(개인 식별 정보), PHI(보호 건강 정보) 또는 기타 민감한 데이터 전송을 마스킹, 난독화 또는 방지하기 위해 조직의 보안 지침을 따라야 합니다.
</Callout>

당사의 로그 수집 파이프라인은 신용 카드, 주민등록번호, 주민등록번호 등을 자동으로 마스킹합니다. 자세한 내용은 로그 관리에 대한 [보안 문서](/docs/logs/get-started/new-relics-log-management-security-privacy) 를 참조하십시오.

난독화 기능을 사용하여 로그의 민감한 데이터를 마스킹하거나 해시하는 사용자 지정 규칙을 생성할 수도 있습니다. 이는 민감한 데이터에 대한 액세스를 제한하는 것이 비실용적이거나 불가능한 경우 또는 일부 데이터를 New Relic에 의해 저장해서는 안 되는 경우에 중요합니다. 자세한 내용은 [난독화 문서](/docs/logs/ui-data/obfuscation-ui/) 를 읽어보세요.

## 중복 로그 방지 [#duplicate-logs]

컨텍스트 기능에서 로그를 사용하면 데이터 수집이 증가합니다. 계정의 가격 모델에 따라 수집 한도 및 청구에 영향을 미칠 수 있습니다.

<Callout variant="caution">
  APM 에이전트를 사용하여 애플리케이션에서 직접 로그를 보내려면 현재 해당 애플리케이션에서 로그를 수집하고 있는 로그 전달 솔루션을 비활성화하거나 수정해야 합니다. 그렇지 않으면 중복 로그가 전송되어 이중 청구가 발생합니다.
</Callout>

중복 로그 전송을 방지하는 방법에 대해 자세히 알아보려면 [업그레이드 가이드](https://docs.newrelic.com/docs/logs/logs-context/upgrade-to-automatic-logs-context/) 를 확인하세요.

자세한 내용은 절차에 따라 [특정 로그 전달자](/docs/logs/forward-logs/enable-log-management-new-relic#log-forwarding) 를 비활성화하십시오.

## 수집 한도 관리 [#ingest]

**예:** 엔지니어링 팀이 앱 문제를 해결하고 있으므로 APM 에이전트가 수집하는 로그 볼륨을 일시적으로 늘려 더 세분화된 로깅을 제공합니다. 그러나 더 높은 한도를 며칠 동안 계속 실행하면 불필요한 데이터가 전송되어 청구서가 증가할 수 있습니다.

예상치 못한 상황을 방지하려면 [NRQL 쿼리](/docs/accounts/accounts-billing/new-relic-one-pricing-billing/usage-queries-alerts/#data-queries) 를 사용하여 수집 제한을 추적하는 [경고 조건](/docs/accounts/accounts-billing/new-relic-one-pricing-billing/usage-queries-alerts/#alerts) 을 만드는 것이 좋습니다. 예를 들어:

<CollapserGroup>
  <Collapser
    id="limits-ui"
    title="UI에서 데이터 제한 및 사용량 보기"
  >
    [UI에서 데이터 제한을 검토](/docs/data-apis/manage-data/view-system-limits) 하려면 New Relic UI의 [계정 드롭다운](/docs/glossary/glossary/#account-dropdown) 에서 **Manage your data > Limits** . 또는 사용량을 보려면 사용량 **View your usage** 를 클릭합니다.

    <img
      title="View data and usage from UI"
      alt="Screenshot of View data and usage page in UI"
      src={ViewLimits}
    />
  </Collapser>

  <Collapser
    id="query-estimate"
    title="NRQL 쿼리: 예상 비용 예"
  >
    [비용 관련 쿼리를](/docs/accounts/accounts-billing/new-relic-one-pricing-billing/usage-queries-alerts#estimated-cost) 참조하십시오.
  </Collapser>

  <Collapser
    id="nrql-alert"
    title="NRQL 경고: 사용량 임계값 예"
  >
    사용량이 기가바이트의 데이터에 대해 고정된 월별 임계값을 초과할 때 경고를 생성하려면 경고 조건에 다음 [NRQL 쿼리](/docs/alerts-applied-intelligence/new-relic-alerts/alert-conditions/create-nrql-alert-conditions/) 를 추가합니다.

    ```
    FROM NrMTDConsumption SELECT latest(GigabytesIngested) WHERE productLine = 'DataPlatform'
    ```
  </Collapser>
</CollapserGroup>

## 예: 컨텍스트에서 로그의 힘 [#response-time-example]

다음은 문제의 근본 원인을 파악하기 위해 컨텍스트에서 APM 로그를 사용하는 자세한 사용 사례입니다.

**예제 시나리오:** 대기 중인 엔지니어는 앱에 대한 응답 시간이 느리고 오류율이 증가한다는 New Relic 경고 알림을 받습니다. 그들은 오류 및 지연 시간 증가의 근본 원인을 찾아야 하므로 문제가 있는 호스트를 로드 밸런싱에서 교체할지 아니면 최신 릴리스를 롤백할지 결정할 수 있습니다.

문제 해결을 시작하려면 New Relic UI로 이동합니다.

<CollapserGroup>
  <Collapser
    id="when"
    title="언제 어디서 오류가 시작되었습니까?"
  >
    엔지니어가 앱의 **APM 요약** 페이지를 보면 응답 시간 증가로 이어지는 더 많은 오류 로그가 표시됩니다. 그들은 로그가 문제의 근본 원인을 노출할 수 있는지 확인하기를 원합니다.

    <img
      title="APM Summary errors in UI"
      alt="Screenshot of APM Summary errors in UI"
      src={ApmLic3040622}
    />

    **문제와 관련된 것을 어떻게 신속하게 결정할 수 있습니까?**

    그들은 로그 수집을 설정하지 않았습니다. 그러나 앱용 Java 에이전트가 컨텍스트에 APM 로그를 포함하도록 최근 업데이트되었으므로 이제 앱이 자동으로 로그 및 연결 메타데이터를 수신합니다. UI에 표시되는 메트릭은 로그 심각도별로 계수를 패싯합니다. (이는 Java 에이전트의 내장 로그 데코레이션 기능에 의해 설정됩니다.)

    <img
      title="APM related entity logs in UI"
      alt="Screenshot of APM related entity error logs in UI"
      src={ApmRelated040622}
    />

    **어떤 엔터티가 관련되어 있습니까?**

    동일한 UI 페이지에서 **로그** 차트를 클릭하여 New Relic Explorer에서 엔터티에 대한 **로그 요약** 보기를 검토할 수 있습니다. 이 보기는 계측된 로그가 수집된 시간과 해당 로그의 심각도 수준이 `Error` 이하인 시간을 보여줍니다. 또한 로그 패턴 목록과 각 패턴에 맞는 모든 로그의 비율을 보여줍니다.
  </Collapser>

  <Collapser
    id="patterns"
    title="로그에 어떤 패턴이 나타납니까?"
  >
    **로그 패턴** UI에서 보기 드문 오류 메시지가 자주 발생하기 시작하여 이제 목록에 표시됩니다. 이를 통해 엔지니어는 모든 시끄러운 상태 업데이트 대신 문제가 있는 로그에 집중할 수 있습니다.

    <img
      title="Logs patterns UI"
      alt="Screenshot of Log patterns UI"
      src={ApmLic4040622}
    />

    **어떤 패턴에 초점을 맞춰야 할까요?**

    엔지니어는 흥미로운 로그 패턴을 발견하고 이 패턴에 맞는 로그만 보려고 합니다. 패턴 값을 표시되는 로그에 필터로 추가하기 위해 클릭합니다. 이것은 초점을 좁힙니다.
  </Collapser>

  <Collapser
    id="log-details"
    title="더 많은 로그 세부 정보를 통해 무엇을 알 수 있습니까?"
  >
    엔지니어는 로그 레코드에 포함된 모든 값을 보고 싶어하므로 **로그 세부 정보** 보기를 클릭합니다. 이는 로그 자체가 의미가 있는지 확인하는 데 도움이 됩니다. 또한 앱이 실행되는 Kubernetes 환경이나 로그 레코드와 관련된 분산 추적 또는 APM 오류로 직접 드릴다운할 수 있습니다.

    <img
      title="Log details in APM UI"
      alt="Screenshot of Log details in APM UI"
      src={ApmLic2A040622}
    />

    엔지니어는 전체 스택 추적을 볼 수 있는 APM 오류를 확인하기로 결정합니다. 또한 **오류 받은 편지함** UI에서 로그를 볼 수도 있습니다.

    <img
      title="Logs from Errors inbox UI"
      alt="Screenshot of logs from Errors inbox UI"
      src={ApmLic5040622}
    />
  </Collapser>

  <Collapser
    id="log-sampling"
    title="문제 해결에 도움이 되는 추가 테스트 데이터는 무엇입니까?"
  >
    문제 해결 팀은 원인을 분리하기 위해 테스트를 실행했지만 테스트 트랜잭션에 대한 모든 로그가 수집되지는 않았습니다. Java 에이전트 구성 파일의 기본 로그 수집( `application_logging:forwarding:max_samples_stored:` 에서 분당 약 10,000개)은 서비스에 문제가 있는지 확인하는 데 유용했습니다. 그러나 이제 더 자세한 문제 해결을 위해 샘플링을 더 높은 숫자로 올려야 합니다.
  </Collapser>

  <Collapser
    id="next-steps"
    title="문제 해결됨. 이제 뭐?"
  >
    문제 해결 팀은 문제가 최근에 도입된 변경으로 인해 발생했다고 판단하여 해당 코드를 롤백합니다. 리소스를 절약하고 비용을 수집하기 위해 구성 파일에서 `application_logging:forwarding:max_samples_stored:` 에 대한 로그 수집을 거부하지만 문제가 반복되는 경우에 대비하여 로그 샘플링을 계속 실행합니다.

    문제 해결 팀은 또한 이 앱으로 필터링된 **로그 패턴** 페이지를 가리키도록 Runbook을 업데이트 [하고 경고 조건에 Runbook을 추가합니다](/docs/alerts-applied-intelligence/new-relic-alerts/advanced-alerts/understand-technical-concepts/provide-runbook-instructions-alert-activity/) . 다음에 이 상황과 유사한 경고를 받으면 더 빠른 문제 해결을 위해 이러한 교훈을 사용할 수 있습니다.
  </Collapser>
</CollapserGroup>