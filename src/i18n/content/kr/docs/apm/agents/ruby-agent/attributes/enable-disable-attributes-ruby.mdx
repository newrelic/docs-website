---
title: 속성 활성화 및 비활성화(Ruby)
tags:
  - Agents
  - Ruby agent
  - Attributes
metaDescription: 'How to include and exclude specific attributes for your New Relic Ruby agent, including properties and rules.'
translationType: machine
---

여기에서는 속성을 활성화 또는 비활성화하는 속성과 [대상](/docs/agents/manage-apm-agents/agent-data/agent-attributes#destinations) 에 대해 포함하거나 제외할 속성을 결정할 때 New Relic이 사용하는 규칙에 대해 설명합니다. 여기에는 New Relic 에이전트 속성 릴리스와 함께 더 이상 사용되지 않는 Ruby 에이전트 속성에 대한 요약도 포함됩니다.

## 속성

다음 속성을 사용하여 속성을 활성화하거나 비활성화합니다.

<CollapserGroup>
  <Collapser
    id="attributes-enabled"
    title="속성.활성화"
  >
    <table>
      <tbody>
        <tr>
          <th>
            유형
          </th>

          <td>
            부울
          </td>
        </tr>

        <tr>
          <th>
            기본값
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            환경 변수
          </th>

          <td>
            `NEW_RELIC_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `true` 인 경우 모든 대상에 대한 속성 캡처를 활성화합니다.
  </Collapser>

  <Collapser
    id="transaction_tracer-attributes-enabled"
    title="transaction_tracer.attributes.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            유형
          </th>

          <td>
            부울
          </td>
        </tr>

        <tr>
          <th>
            기본값
          </th>

          <td>
            (동적)
          </td>
        </tr>

        <tr>
          <th>
            환경 변수
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_TRACER_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `true` 인 경우 에이전트는 트랜잭션 추적에서 속성을 캡처합니다.
  </Collapser>

  <Collapser
    id="transaction_events-attributes-enabled"
    title="transaction_events.attributes.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            유형
          </th>

          <td>
            부울
          </td>
        </tr>

        <tr>
          <th>
            기본값
          </th>

          <td>
            (동적)
          </td>
        </tr>

        <tr>
          <th>
            환경 변수
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_EVENTS_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `true` 인 경우 에이전트는 트랜잭션 이벤트에서 속성을 캡처합니다.
  </Collapser>

  <Collapser
    id="error_collector-attributes-enabled"
    title="error_collector.attributes.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            유형
          </th>

          <td>
            부울
          </td>
        </tr>

        <tr>
          <th>
            기본값
          </th>

          <td>
            (동적)
          </td>
        </tr>

        <tr>
          <th>
            환경 변수
          </th>

          <td>
            `NEW_RELIC_ERROR_COLLECTOR_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `true` 인 경우 에이전트는 오류 수집에서 속성을 캡처합니다.
  </Collapser>

  <Collapser
    id="browser_monitoring-attributes-enabled"
    title="browser_monitoring.attributes.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            유형
          </th>

          <td>
            부울
          </td>
        </tr>

        <tr>
          <th>
            기본값
          </th>

          <td>
            (동적)
          </td>
        </tr>

        <tr>
          <th>
            환경 변수
          </th>

          <td>
            `NEW_RELIC_BROWSER_MONITORING_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `true` 인 경우 에이전트는 브라우저 모니터링에서 속성을 캡처합니다.
  </Collapser>

  <Collapser
    id="span-events-attributes-enabled"
    title="span_events.attributes.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            유형
          </th>

          <td>
            부울
          </td>
        </tr>

        <tr>
          <th>
            기본값
          </th>

          <td>
            (동적)
          </td>
        </tr>

        <tr>
          <th>
            환경 변수
          </th>

          <td>
            `NEW_RELIC_SPAN_EVENTS_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `true` 인 경우 에이전트는 스팬 이벤트에서 속성을 캡처합니다.
  </Collapser>

  <Collapser
    id="transaction-segments-attributes-enabled"
    title="transaction_segments.attributes.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            유형
          </th>

          <td>
            부울
          </td>
        </tr>

        <tr>
          <th>
            기본값
          </th>

          <td>
            (동적)
          </td>
        </tr>

        <tr>
          <th>
            환경 변수
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_SEGMENTS_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `true` 인 경우 에이전트는 트랜잭션 세그먼트의 속성을 캡처합니다.
  </Collapser>

  <Collapser
    id="attributes-exclude"
    title="속성.제외"
  >
    <table>
      <tbody>
        <tr>
          <th>
            유형
          </th>

          <td>
            정렬
          </td>
        </tr>

        <tr>
          <th>
            기본값
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            환경 변수
          </th>

          <td>
            `NEW_RELIC_ATTRIBUTES_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    모든 대상에서 제외할 속성의 접두사. 끝에 와일드카드로 `*` 을 허용합니다.
  </Collapser>

  <Collapser
    id="transaction_tracer-attributes-exclude"
    title="transaction_tracer.attributes.exclude"
  >
    <table>
      <tbody>
        <tr>
          <th>
            유형
          </th>

          <td>
            정렬
          </td>
        </tr>

        <tr>
          <th>
            기본값
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            환경 변수
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_TRACER_ATTRIBUTES_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    트랜잭션 추적에서 제외할 속성의 접두사입니다. 끝에 와일드카드로 `*` 을 허용합니다.
  </Collapser>

  <Collapser
    id="transaction_events-attributes-exclude"
    title="transaction_events.attributes.exclude"
  >
    <table>
      <tbody>
        <tr>
          <th>
            유형
          </th>

          <td>
            정렬
          </td>
        </tr>

        <tr>
          <th>
            기본값
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            환경 변수
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_EVENTS_ATTRIBUTES_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    트랜잭션 이벤트에서 제외할 속성의 접두사. 끝에 와일드카드로 `*` 을 허용합니다.
  </Collapser>

  <Collapser
    id="error_collector-attributes-exclude"
    title="error_collector.attributes.exclude"
  >
    <table>
      <tbody>
        <tr>
          <th>
            유형
          </th>

          <td>
            정렬
          </td>
        </tr>

        <tr>
          <th>
            기본값
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            환경 변수
          </th>

          <td>
            `NEW_RELIC_ERROR_COLLECTOR_ATTRIBUTES_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    오류 수집에서 제외할 속성의 접두사. 끝에 와일드카드로 `*` 을 허용합니다.

    [error.message](/attribute-dictionary?attribute_name=error.message) 수집을 방지하려면 대신 [strip_exception_messages](/docs/agents/ruby-agent/configuration/ruby-agent-configuration#strip_exception_messages-enabled) 구성을 사용하십시오.
  </Collapser>

  <Collapser
    id="browser_monitoring-attributes-exclude"
    title="browser_monitoring.attributes.exclude"
  >
    <table>
      <tbody>
        <tr>
          <th>
            유형
          </th>

          <td>
            정렬
          </td>
        </tr>

        <tr>
          <th>
            기본값
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            환경 변수
          </th>

          <td>
            `NEW_RELIC_BROWSER_MONITORING_ATTRIBUTES_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    브라우저 모니터링에서 제외할 속성의 접두사. 끝에 와일드카드로 `*` 을 허용합니다.
  </Collapser>

  <Collapser
    id="span-events-attributes-exclude"
    title="span_events.attributes.exclude"
  >
    <table>
      <tbody>
        <tr>
          <th>
            유형
          </th>

          <td>
            정렬
          </td>
        </tr>

        <tr>
          <th>
            기본값
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            환경 변수
          </th>

          <td>
            `NEW_RELIC_SPAN_EVENTS_ATTRIBUTES_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    범위 이벤트에서 제외할 속성의 접두사. 끝에 와일드카드로 `*` 을 허용합니다.
  </Collapser>

  <Collapser
    id="transaction-segments-attributes-exclude"
    title="transaction_segments.attributes.exclude"
  >
    <table>
      <tbody>
        <tr>
          <th>
            유형
          </th>

          <td>
            정렬
          </td>
        </tr>

        <tr>
          <th>
            기본값
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            환경 변수
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_SEGMENTS_ATTRIBUTES_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    트랜잭션 세그먼트에서 제외할 속성의 접두사. 끝에 와일드카드로 `*` 을 허용합니다.
  </Collapser>

  <Collapser
    id="attributes-include"
    title="속성.포함"
  >
    <table>
      <tbody>
        <tr>
          <th>
            유형
          </th>

          <td>
            정렬
          </td>
        </tr>

        <tr>
          <th>
            기본값
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            환경 변수
          </th>

          <td>
            `NEW_RELIC_ATTRIBUTES_INCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    모든 대상에 포함할 속성의 접두사. 끝에 와일드카드로 `*` 을 허용합니다.
  </Collapser>

  <Collapser
    id="transaction_tracer-attributes-include"
    title="transaction_tracer.attributes.include"
  >
    <table>
      <tbody>
        <tr>
          <th>
            유형
          </th>

          <td>
            정렬
          </td>
        </tr>

        <tr>
          <th>
            기본값
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            환경 변수
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_TRACER_ATTRIBUTES_INCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    트랜잭션 추적에 포함할 속성의 접두사입니다. 끝에 와일드카드로 `*` 을 허용합니다.
  </Collapser>

  <Collapser
    id="transaction_events-attributes-include"
    title="transaction_events.attributes.include"
  >
    <table>
      <tbody>
        <tr>
          <th>
            유형
          </th>

          <td>
            정렬
          </td>
        </tr>

        <tr>
          <th>
            기본값
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            환경 변수
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_EVENTS_ATTRIBUTES_INCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    트랜잭션 이벤트에 포함할 속성의 접두사. 끝에 와일드카드로 `*` 을 허용합니다.
  </Collapser>

  <Collapser
    id="error_collector-attributes-include"
    title="error_collector.attributes.include"
  >
    <table>
      <tbody>
        <tr>
          <th>
            유형
          </th>

          <td>
            정렬
          </td>
        </tr>

        <tr>
          <th>
            기본값
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            환경 변수
          </th>

          <td>
            `NEW_RELIC_ERROR_COLLECTOR_ATTRIBUTES_INCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    오류 수집에 포함할 속성의 접두사. 끝에 와일드카드로 `*` 을 허용합니다.
  </Collapser>

  <Collapser
    id="browser_monitoring-attributes-include"
    title="browser_monitoring.attributes.include"
  >
    <table>
      <tbody>
        <tr>
          <th>
            유형
          </th>

          <td>
            정렬
          </td>
        </tr>

        <tr>
          <th>
            기본값
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            환경 변수
          </th>

          <td>
            `NEW_RELIC_BROWSER_MONITORING_ATTRIBUTES_INCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    브라우저 모니터링에 포함할 속성의 접두사. 끝에 와일드카드로 `*` 을 허용합니다.
  </Collapser>

  <Collapser
    id="span-events-attributes-include"
    title="span_events.attributes.include"
  >
    <table>
      <tbody>
        <tr>
          <th>
            유형
          </th>

          <td>
            정렬
          </td>
        </tr>

        <tr>
          <th>
            기본값
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            환경 변수
          </th>

          <td>
            `NEW_RELIC_SPAN_EVENTS_ATTRIBUTES_INCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    범위 이벤트에 포함할 속성의 접두사. 끝에 와일드카드로 `*` 을 허용합니다.
  </Collapser>

  <Collapser
    id="transaction-segments-attributes-include"
    title="transaction_segments.attributes.include"
  >
    <table>
      <tbody>
        <tr>
          <th>
            유형
          </th>

          <td>
            정렬
          </td>
        </tr>

        <tr>
          <th>
            기본값
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            환경 변수
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_SEGMENTS_ATTRIBUTES_INCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    트랜잭션 세그먼트에 포함할 속성의 접두사. 끝에 와일드카드로 `*` 을 허용합니다.
  </Collapser>
</CollapserGroup>

## 속성 규칙 [#attruls]

New Relic은 대상에 대해 포함하거나 제외할 속성을 결정할 때 이러한 규칙을 따릅니다.

<CollapserGroup>
  <Collapser
    id="rule-root-precedence"
    title="활성화된 경우 루트 수준이 우선합니다."
  >
    `attributes.enabled` 필드는 다른 모든 설정보다 우선합니다. `false` 일 때 New Relic에 속성이 보고되지 않습니다.

    구성 예:

    ```
    attributes.enabled: false
        attributes.include: foo, bar
        transaction_tracer.attributes.enabled: true
    ```

    출력 예:

    ```
    Keys passed in: foo, bar, baz
        Keys included for all destinations:
        Keys excluded for all destinations: foo, bar, baz
    ```
  </Collapser>

  <Collapser
    id="rule-destination-precedence"
    title="활성화된 대상은 포함 및 제외보다 우선합니다."
  >
    `YOUR_DESTINATION.attributes.enabled` 플래그는 포함 및 제외 키보다 우선합니다.

    구성 예:

    ```
    transaction_tracer.attributes.enabled: false
        attributes.include: one, two
        transaction_tracer.attributes.include: three, four
    ```

    출력 예:

    ```
    Keys passed in: one, two, three, four
        Keys included for transaction traces:
        Keys excluded for transaction traces: one, two, three, four
    ```
  </Collapser>

  <Collapser
    id="rule-included-destination"
    title="대상이 활성화된 경우 속성이 포함됩니다."
  >
    대상이 활성화되면 모든 사용자 속성이 기본적으로 해당 대상으로 전송됩니다.

    **참고:** 모든 사용자 속성의 기본값은 `true` 입니다. 그러나 기본적으로 모든 대상에 대해 요청 매개변수가 비활성화되어 있습니다.

    구성 예:

    ```
    attributes.enabled: true
        attributes.exclude: baz
    ```

    출력 예:

    ```
    Keys passed in: foo, bar, baz
        Keys included: foo, bar
        Keys excluded: baz
    ```
  </Collapser>

  <Collapser
    id="rule-exclude-wins"
    title="제외는 항상 포함을 대체합니다."
  >
    동일한 키가 포함 및 제외 목록에 나열되면 지정된 키가 있는 속성이 제외됩니다.

    구성 예:

    ```
    attributes.enabled: true
        attributes.include: foo, bar
        attributes.exclude: nerd, bar
    ```

    출력 예:

    ```
    Keys passed in: foo, bar, nerd
        Keys included: foo
        Keys excluded: nerd, bar
    ```
  </Collapser>

  <Collapser
    id="rule-keys-case-sensitive"
    title="키는 대소문자를 구분합니다."
  >
    키는 대소문자를 구분합니다.

    구성 예:

    ```
    attributes.enabled: true
        attributes.exclude: username, UsErNaMe
    ```

    출력 예:

    ```
    Keys passed in: username, Username, USERNAME, UsErNaMe, userNAME
        Keys included: Username, USERNAME, userNAME
        Keys excluded: username, UsErNaMe
    ```
  </Collapser>

  <Collapser
    id="rule-star-wildcard"
    title={<>와일드카드에는 <InlineCode>\*</InlineCode> 을 사용합니다.</>}
  >
    키 끝에 별표 `*` 를 와일드카드로 사용할 수 있습니다. 이것은 동일한 접두사를 가진 속성 집합과 일치합니다.

    구성 예:

    ```
    attributes.enabled: true
        attributes.include: custom*
        attributes.exclude: request.parameters.*
    ```

    출력 예:

    ```
    Keys passed in: custom, custom.key1, custom.key2, request.parameters., request.parameters.foo, request.parameters.bar
        Keys included: custom, custom.key1, custom.key2
        Keys excluded: request.parameters., request.parameters.foo, request.parameters.bar
    ```
  </Collapser>

  <Collapser
    id="rule-specific-wins"
    title="키에 대한 가장 구체적인 설정이 우선합니다."
  >
    여러 포함 또는 제외 속성이 동일한 키에 영향을 미치는 경우 가장 구체적인 설정이 우선합니다.

    구성 예:

    ```
    attributes.enabled: true
        attributes.include: request.parameters.foo
        attributes.exclude: request.parameters.*
    ```

    출력 예:

    ```
    Keys passed in: request.parameters., request.parameters.foo, request.parameters.bar
        Keys included: request.parameters.foo
        Keys excluded: request.parameters., request.parameters.bar
    ```
  </Collapser>

  <Collapser
    id="rule-destination-include-exclude"
    title="포함 또는 제외는 특정 대상에 영향을 줍니다."
  >
    포함 또는 제외 속성이 대상에 지정된 경우 해당 대상에만 영향을 줍니다.

    구성 예:

    ```
    attributes.include: foo
        transaction_events.attributes.exclude: foo
    ```

    출력 예:

    ```
    Keys passed in: foo
        Keys included for transaction events: 
        Keys included for other destinations: foo
        Keys excluded for transaction events: foo
    ```
  </Collapser>
</CollapserGroup>

## URI 관련 속성 [#uri]

기본적으로 Ruby 에이전트는 URI(Uniform Resource Identifiers)를 다음 대상을 비롯한 여러 위치에서 New Relic에 보고합니다.

* [오류 이벤트](/docs/apm/applications-menu/error-analytics/error-analytics-manage-error-traces) 의 `request.uri` 속성
* [스팬 이벤트](/docs/apm/distributed-tracing/getting-started/introduction-distributed-tracing) 의 `http.url` 속성
* [느린 SQL 추적](/docs/apm/applications-menu/monitoring/view-slow-query-details) 의 `url` 속성
* [외부 요청 세그먼트](/docs/agents/ruby-agent/features/http-client-tracing-ruby) 의 `uri` 속성

New Relic은 유용한 디버깅 정보를 포함할 수 있으므로 이러한 URI를 보고할 것을 권장합니다. URI에 보고하지 않으려는 민감한 데이터가 포함된 경우 URI 보고를 비활성화할 수 있습니다. 예를 들어 민감한 데이터에는 이메일 주소나 계정 ID가 포함될 수 있습니다. URI 보고를 비활성화하려면 위의 속성 이름을 `attributes.exclude` 목록에 추가하세요.

예를 들어 구성 파일에 다음 키를 추가하면 에이전트가 URI 관련 속성을 보고하지 못하게 됩니다.

```
attributes.exclude: uri
```

## 더 이상 사용되지 않는 속성 [#deprecated]

다음 속성은 더 이상 사용되지 않습니다. Ruby 에이전트를 업그레이드할 때 이러한 속성에 대한 새 속성 구성으로 전환하십시오.

<table>
  <thead>
    <tr>
      <th width={200}>
        **더 이상 사용되지 않는 속성**
      </th>

      <th>
        **새 속성**
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `capture_params`
      </td>

      <td>
        `attributes.include: request.parameters.*`
      </td>
    </tr>

    <tr>
      <td>
        `resque.capture_params`
      </td>

      <td>
        `attributes.include: job.resque.args.*`
      </td>
    </tr>

    <tr>
      <td>
        `sidekiq.capture_params`
      </td>

      <td>
        `attributes.include: job.sidekiq.args.*`
      </td>
    </tr>

    <tr>
      <td>
        `transaction_tracer.capture_attributes`
      </td>

      <td>
        `transaction_tracer.attributes.enabled`
      </td>
    </tr>

    <tr>
      <td>
        `error_collector.capture_attributes`
      </td>

      <td>
        `error_collector.attributes.enabled`
      </td>
    </tr>

    <tr>
      <td>
        `browser_monitoring.capture_attributes`
      </td>

      <td>
        `browser_monitoring.attributes.enabled`
      </td>
    </tr>

    <tr>
      <td>
        `analytics_events.capture_attributes`
      </td>

      <td>
        `transaction_events.attributes.enabled`
      </td>
    </tr>
  </tbody>
</table>