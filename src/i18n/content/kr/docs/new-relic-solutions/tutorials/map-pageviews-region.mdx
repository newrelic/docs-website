---
duration: 30
title: ë§ì¶¤í˜• ì•±ì˜ ì§€ì—­ë³„ ì§€ë„ í˜ì´ì§€ ë³´ê¸°
metaDescription: Build a New Relic app showing page view data on a world map.
freshnessValidatedDate: never
translationType: machine
---

ë‰´ë ë¦­ì€ ë§ì¶¤í˜• ì•±ì„ êµ¬ì¶•í•˜ê³  ë°ì´í„°ë¥¼ ì±„ìš°ê¸° ìœ„í•œ ê°•ë ¥í•˜ê³  ìœ ì—°í•œ ë„êµ¬ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì´ ê°€ì´ë“œì—ì„œëŠ” ì»¤ìŠ¤í…€ ì•±ì„ êµ¬ì¶•í•˜ê³  ë‰´ë ë¦­ì˜ ì¿¼ë¦¬ ì–¸ì–´(NRQL - &apos;nurkle&apos;ë¡œ ë°œìŒ)ë¥¼ ì‚¬ìš©í•˜ì—¬ í˜ì´ì§€ ë³´ê¸° ë°ì´í„°ë¡œ ì±„ìš°ëŠ” ë°©ë²•ì„ ë³´ì—¬ì¤ë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ ë°ì´í„°ë¥¼ ëŒ€í™”í˜•ìœ¼ë¡œ ë§Œë“­ë‹ˆë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ, ì‹œê°„ì´ ì¢€ ë” ìˆê³  íƒ€ì‚¬ React ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•˜ê³  ì‹¶ë‹¤ë©´ ìˆ˜ì§‘í•œ í˜ì´ì§€ ë³´ê¸° ë°ì´í„°ë¥¼ ì„¸ê³„ ì§€ë„ì— í‘œì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ ê°€ì´ë“œì—ì„œëŠ” ë‹¤ìŒ ë‘ ê°€ì§€ ë°©ë²•ìœ¼ë¡œ í˜ì´ì§€ ì¡°íšŒ ë°ì´í„°ë¥¼ í‘œì‹œí•˜ëŠ” ì•±ì„ ë¹Œë“œí•©ë‹ˆë‹¤.

* í…Œì´ë¸”ì—
* ì§€ë„ì—ì„œ

**Before you begin** \[ì‹œì‘í•˜ê¸° ì „ì—] ì„¹ì…˜ì„ ê²€í† í•˜ì—¬ í•„ìš”í•œ ëª¨ë“  ê²ƒì´ ê°–ì¶”ì–´ì ¸ ìˆëŠ”ì§€ í™•ì¸í•˜ê³  ì¤‘ê°„ì— ë§‰íˆì§€ ì•Šë„ë¡ í•˜ì‹­ì‹œì˜¤.

## ì‹œì‘í•˜ê¸° ì „ì— [#begin]

ì´ ê°€ì´ë“œë¥¼ ìµœëŒ€í•œ í™œìš©í•˜ë ¤ë©´ ë‹¤ìŒì´ í•„ìš”í•©ë‹ˆë‹¤.

* ë‰´ë ë¦­ ê³„ì •, API í‚¤, ê·¸ë¦¬ê³  ë§ˆìš°ìŠ¤ì¤„ ë„êµ¬ì…ë‹ˆë‹¤.
* ë‰´ë ë¦­ ì•±ì„ ì±„ìš°ê¸° ìœ„í•œ ë¸Œë¼ìš°ì € í˜ì´ì§€ ë³´ê¸° ë°ì´í„°ì…ë‹ˆë‹¤. ì´ ë°ì´í„°ê°€ ì—†ìœ¼ë©´ ì´ ê°€ì´ë“œë¥¼ ì™„ë£Œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

ê°€ì´ë“œ í›„ë°˜ë¶€ì˜ ì„¸ê³„ ì§€ë„ì— ë°ì´í„°ë¥¼ ì¶”ê°€í•˜ë ¤ë©´:

* npmì€ ê°€ì´ë“œì˜ ì´ ì„¹ì…˜ì—ì„œ ëŒ€í™”í˜• ì§€ë„ë¥¼ êµ¬ì¶•í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” íƒ€ì‚¬ JavaScript React ë¼ì´ë¸ŒëŸ¬ë¦¬ì¸ [Leafletì„](https://www.npmjs.com/package/leaflet) ì„¤ì¹˜í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. React ë° npmì„ ì²˜ìŒ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ì—¬ê¸°ë¡œ ì´ë™í•˜ì—¬ [Node.js ë° npmì„ ì„¤ì¹˜í• ](https://nodejs.org/en/download/) ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ë‰´ë ë¦­ ìš©ì–´ [#terminology]

ë‹¤ìŒì€ ì´ ê°€ì´ë“œì—ì„œ ì‚¬ìš©ë˜ëŠ” ëª‡ ê°€ì§€ ìš©ì–´ì…ë‹ˆë‹¤.

* ë‰´ í‚¹ ë¦­: ë°ì´í„°ê°€ ë‰´ ë ë¦­ìœ¼ë¡œ ë Œë”ë§ë˜ëŠ” ì™„ì œí’ˆì…ë‹ˆë‹¤. ì´ëŠ” ì¼ë ¨ì˜ ëŒ€í™”í˜• ì°¨íŠ¸ë‚˜ ì„¸ê³„ ì§€ë„ì²˜ëŸ¼ ë³´ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* Nerdpack: ë‰´ë ë¦­ì˜ JavaScript, JSON, CSS ë° ê¸°íƒ€ íŒŒì¼ë¡œ êµ¬ì„±ëœ í‘œì¤€ ì»¬ë ‰ì…˜ìœ¼ë¡œ, ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê¸°ëŠ¥ê³¼ ëª¨ì–‘ì„ ì œì–´í•©ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ [Nerdpack íŒŒì¼ êµ¬ì¡°ë¥¼](/docs/new-relic-solutions/build-nr-ui/nerdpack-file-structure) ì°¸ì¡°í•˜ì„¸ìš”.
* Launcher: ë‹¹ì‹ ì˜ ë…íŠ¹í•œ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ë‰´ë ë¦­ì˜ ë²„íŠ¼ì…ë‹ˆë‹¤.
* Nerdlets: ë‰´ë ë¦­ React êµ¬ì„±ìš”ì†Œë¥¼ ë¹Œë“œí•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ì„¸ ê°€ì§€ ê¸°ë³¸ íŒŒì¼ì€ `index.js`, `nr1.json` ë° `styles.scss` ì´ì§€ë§Œ ì§ì ‘ ë§ì¶¤ì„¤ì •í•˜ê³  ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## í…Œì´ë¸” ì°¨íŠ¸ë¡œ ë§ì¶¤í˜• ì•± ë§Œë“¤ê¸° [#build-app-table-chart]

<Steps>
  <Step>
    ### ë¸Œë¼ìš°ì € ë°ì´í„° ì¿¼ë¦¬ [#query-data]

    ë‹¤ìŒê³¼ ê°™ì´ ì¿¼ë¦¬ ë¹Œë”ë¥¼ ì‚¬ìš©í•˜ì—¬ NRQL ì¿¼ë¦¬ë¥¼ ì‘ì„±í•˜ì—¬ í˜ì´ì§€ ë³´ê¸° ë°ì´í„°ë¥¼ í™•ì¸í•˜ì„¸ìš”.

    ë¸”ë£¨ë ë¦­ì—ì„œ **Query your data** \[ë°ì´í„° ì¡°íšŒ] (ì˜¤ë¥¸ìª½ ìƒë‹¨)ë¥¼ ì„ íƒí•˜ì„¸ìš”. ê·¸ëŸ¬ë©´ **NRQL** ëª¨ë“œê°€ ë©ë‹ˆë‹¤. ë°ì´í„°ë¥¼ í…Œì´ë¸”ì— ì‚­ì œí•˜ê¸° ì „ì— NRQLì„ ì‚¬ìš©í•˜ì—¬ ì¿¼ë¦¬ë¥¼ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.

    ì´ ì¿¼ë¦¬ë¥¼ ë³µì‚¬í•˜ì—¬ ì¼ë°˜ ì¿¼ë¦¬ í•„ë“œì— ë¶™ì—¬ë„£ì€ ë‹¤ìŒ **Run** \[ì‹¤í–‰ì„] ì„ íƒí•©ë‹ˆë‹¤.

    ```sql
    FROM PageView SELECT count(*), average(duration) WHERE appName = 'WebPortal' FACET countryCode, regionCode SINCE 1 week ago LIMIT 1000
    ```

    PageView ë°ì´í„°ê°€ ìˆëŠ” ê²½ìš° ì´ ì¿¼ë¦¬ëŠ” ì¼ì£¼ì¼ ê°„ì˜ í‰ê·  í˜ì´ì§€ ì¡°íšŒìˆ˜ë¥¼ êµ­ê°€ë³„ë¡œ ë¶„ë¥˜í•˜ê³  í•­ëª©ì„ 1,000ê°œë¡œ ì œí•œí•˜ì—¬ í‘œì‹œí•©ë‹ˆë‹¤. í…Œì´ë¸”ì€ ì „ì²´ ë„ˆë¹„ì´ë©° CSSì— ì •ì˜ëœ &quot;ì°¨íŠ¸&quot; í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

    ì§€ê¸ˆê¹Œì§€ ê²°ê³¼ê°€ ë‚˜ì˜¤ì§€ ì•Šìœ¼ë©´ ì¿¼ë¦¬ì— ì˜¤ë¥˜ê°€ ì—†ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”. ê·€í•˜ì˜ ì¿¼ë¦¬ê°€ ì˜¬ë°”ë¥´ë‹¤ë©´ [ë¸Œë¼ìš°ì € ì—ì´ì „íŠ¸ê°€](/docs/browser/browser-monitoring/installation/install-browser-monitoring-agent/) ì„¤ì¹˜ë˜ì§€ ì•Šì•˜ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  </Step>

  <Step>
    ### ìƒˆë¡œìš´ Nerdpack ìƒì„± ë° ì œê³µ [#create-nerdpack]

    ì‹œì‘í•˜ë ¤ë©´ ìƒˆ Nerdpackì„ ìƒì„±í•˜ê³  ë¡œì»¬ ê°œë°œ í™˜ê²½ì—ì„œ ë‰´ë ë¦­ì— ì œê³µí•˜ì„¸ìš”.

    1. `nr1` ) ì—…ë°ì´íŠ¸í•˜ê³  ì´ ì•±ì— ëŒ€í•œ ìƒˆ Nerdpackì„ ë§Œë“­ë‹ˆë‹¤.

    ```bash
    nr1 update
    nr1 create --type nerdpack --name pageviews-app
    [output] {success}âœ”  {plain}Component created successfully!
    [output]    {purple}nerdpack {blue}pageviews-app {plain}is available at {green}"./pageviews-app"
    ```

    2. ë‰´ë ë¦­ì—ê²Œ í”„ë¡œì íŠ¸ë¥¼ ì œê³µí•˜ì„¸ìš”:

    ```bash animate
    cd pageviews-app && nr1 nerdpack:serve
    [output] Found and loaded {green}2 {plain}nr1.json files on PageviewsApp ({purple}00e0f043-1fc3-42cd-a8ca-7eef5fc9cd45{plain}) Nerdpack.
    [output]
    [output] {purple}Nerdpack:
    [output] {success}âœ”  PageviewsApp {purple}(00e0f043-1fc3-42cd-a8ca-7eef5fc9cd45) {blue}nr1.json
    [output]
    [output] {purple}Launchers:
    [output] {success}âœ”  {green}pageviews-app-launcher {blue}launchers/pageviews-app-launcher/nr1.json
    [output]
    [output] {purple}Nerdlets:
    [output] {success}âœ”  {green}pageviews-app-nerdlet {blue}nerdlets/pageviews-app-nerdlet/nr1.json
    [output]
    [output] ğŸ›   Built artifact files for:
    [output] {yellow}â  {purple}00e0f043-1fc3-42cd-a8ca-7eef5fc9cd45--pageviews-app-nerdlet {plain}built {success}âœ”
    [output]
    [output] {success}âœ”  {plain}Nerdpack built successfully!
    [output] {yellow}â˜…  {plain}Starting as orchestrator...
    [output]
    [output] {success}âœ”  {plain}Server ready! Test it at: https://staging-one.newrelic.com/?nerdpacks=local
    [output] {blue}â†©  Server will reload automatically if you modify any file!
    [output]
    [output] ğŸ›   Built artifact files for:
    [output] {yellow}â  {purple}00e0f043-1fc3-42cd-a8ca-7eef5fc9cd45--pageviews-app-nerdlet {plain}built {success}âœ”
    [output]
    [output] {success}âœ”  {plain}Nerdpack built successfully!
    ```
  </Step>

  <Step>
    ### ì•± íŒŒì¼ì„ ê²€í† í•˜ê³  ë¡œì»¬ì—ì„œ ì•±ì„ ë´…ë‹ˆë‹¤. [#review-files]

    1. `pageviews-app` ë¡œ ì´ë™í•˜ì—¬ êµ¬ì¡°í™”ëœ ë°©ì‹ì„ í™•ì¸í•˜ì„¸ìš”. ì—¬ê¸°ì—ëŠ” ì•±ì˜ ëŸ°ì²˜ì— í‘œì‹œë  ì„¤ëª…ê³¼ ì•„ì´ì½˜ì„ ì‚¬ìš©ì ì§€ì •í•  ìˆ˜ ìˆëŠ” ëŸ°ì²˜ í´ë”ê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ë˜í•œ `nerdlets` í¬í•¨ë˜ì–´ ìˆìœ¼ë©° ê°ê° `index.js`, `nr1.json`, `styles.scss` ì˜ ì„¸ ê°œì˜ ê¸°ë³¸ íŒŒì¼ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ ê°€ì´ë“œì˜ ì¼ë¶€ë¡œ ì´ëŸ¬í•œ íŒŒì¼ ì¤‘ ì¼ë¶€ë¥¼ í¸ì§‘í•˜ê²Œ ë  ê²ƒì…ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ [Nerdpack íŒŒì¼ êµ¬ì¡°ë¥¼](/docs/new-relic-solutions/build-nr-ui/nerdpack-file-structure) ì°¸ì¡°í•˜ì„¸ìš”.

    2. ì´ì œ ë¸Œë¼ìš°ì €ì—ì„œ `https://one.newrelic.com/?nerdpacks=local` ì—° ë‹¤ìŒ **Apps** \[ì•±ì„] í´ë¦­í•˜ì—¬ ì œê³µí•œ `pageview-apps` Nerdpackì„ í™•ì¸í•˜ì„¸ìš”.

    ì‹¤í–‰ê¸°ë¥¼ ì„ íƒí•˜ë©´ `Hello` ë©”ì‹œì§€ê°€ í‘œì‹œë©ë‹ˆë‹¤.
  </Step>

  <Step>
    ### ê³„ì • IDë¥¼ í•˜ë“œ ì½”ë”©í•˜ì„¸ìš”. [#account-id]

    ì´ ì—°ìŠµì˜ ëª©ì ê³¼ í¸ì˜ë¥¼ ìœ„í•´ ê³„ì • IDë¥¼ í•˜ë“œ ì½”ë”©í•˜ì„¸ìš”. `pageview-app-nerdlet` ë””ë ‰í„°ë¦¬ì˜ `index.js` íŒŒì¼ì—ì„œ `import` ì¤„ê³¼ `export` ì¤„ ì‚¬ì´ì— ì´ ì½”ë“œë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤. ([ì—¬ê¸°ì—ì„œ ê³„ì • IDë¥¼ ì°¾ëŠ” ë°©ë²•ì„ ì½ì–´ë³´ì„¸ìš”](/docs/accounts/install-new-relic/account-setup/account-id).)

    ```jsx fileName=pageview-app-nerdlet/index.js
    import React from 'react';

    const accountId = 0; // Replace with your account ID

    export default class PageViewApp extends React.Component {
      render() {
        return <h1>Hello, pageview-app-nerdlet Nerdlet!</h1>;
      }
    }
    ```
  </Step>

  <Step>
    ### ê°€ì ¸ì˜¤ê¸° `TableChart` [#import-table-component]

    ë°ì´í„°ë¥¼ í‘œ ì°¨íŠ¸ë¡œ í‘œì‹œí•˜ë ¤ë©´ ë‰´ë ë¦­ì—ì„œ `TableChart` êµ¬ì„±ìš”ì†Œë¥¼ ê°€ì ¸ì˜¤ì„¸ìš”. ì´ë ‡ê²Œ í•˜ë ¤ë©´ `index.js` ì—ì„œ `import React` ì•„ë˜ì— ì´ ì½”ë“œë¥¼ ì¶”ê°€í•˜ì„¸ìš”.

    ```jsx fileName=pageview-app-nerdlet/index.js
    import React from 'react';
    import { TableChart } from 'nr1';

    const accountId = 0; // Replace with your account ID

    export default class PageViewApp extends React.Component {
      render() {
        return <h1>Hello, pageview-app-nerdlet Nerdlet!</h1>;
      }
    }
    ```
  </Step>

  <Step>
    ### ë‹¨ì¼ í–‰ì´ ìˆëŠ” í…Œì´ë¸” ì¶”ê°€ [#add-single-row-table]

    ë‹¨ì¼ í–‰ì´ ìˆëŠ” í…Œì´ë¸”ì„ ì¶”ê°€í•˜ë ¤ë©´ `index.js` íŒŒì¼ì—ì„œ ì´ ì¤„ì„ ë‹¤ìŒ `export` ì½”ë“œë¡œ ë°”ê¿‰ë‹ˆë‹¤.

    ```jsx fileName=pageview-app-nerdlet/index.js
    import React from 'react';
    import { TableChart } from 'nr1';

    const accountId = 0; // Replace with your account ID

    export default class PageViewApp extends React.Component {
      render() {
        return (
          <div className="container">
            <div className="row"></div>
          </div>
        );
      }
    }
    ```
  </Step>

  <Step>
    ### í…Œì´ë¸” ëª¨ì–‘ ë§ì¶¤ì„¤ì •(ì„ íƒì‚¬í•­) [#customize-table]

    í‘œì¤€ CSSë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬ì„± ìš”ì†Œì˜ ëª¨ì–‘ì„ ë§ì¶¤ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

    `styles.scss` íŒŒì¼ì— ì´ CSSë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤. ì´ CSSë¥¼ ì›í•˜ëŠ” ëŒ€ë¡œ ììœ ë¡­ê²Œ ë§ì¶¤ì„¤ì •í•˜ì„¸ìš”.

    ```css fileName=pageview-app-nerdlet/styles.scss
    .container {
      width: 100%;
      height: 99vh;
      display: flex;
      flex-direction: column;
      .row {
        margin: 10px;
        display: flex;
        flex-direction: row;
      }
      .chart {
        height: 250px;
      }
    }
    ```
  </Step>

  <Step>
    ### í•´ë‹¹ í…Œì´ë¸”ì— ë°ì´í„°ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤. [#add-data-table]

    ì´ì œ í…Œì´ë¸”ì´ ìˆìœ¼ë¯€ë¡œ ì´ ê°€ì´ë“œì˜ ì‹œì‘ ë¶€ë¶„ì—ì„œ ì‘ì„±í•œ NRQL ì¿¼ë¦¬ì˜ ë°ì´í„°ë¡œ ì±„ì›Œì§„ `TableChart` ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

    ì´ ì½”ë“œë¥¼ `row` divì— ë„£ìœ¼ì„¸ìš”.

    ```jsx fileName=pageview-app-nerdlet/index.js
    import React from 'react';
    import { TableChart } from 'nr1';

    const accountId = 0; // Replace with your account ID

    export default class PageViewApp extends React.Component {
      render() {
        return (
          <div className="container">
            <div className="row">
              <TableChart
                accountId={accountId}
                query={`FROM PageView SELECT count(*), average(duration) WHERE appName = 'WebPortal' SINCE 1 week ago LIMIT 1000`}
                fullWidth
                className="chart"
              />
            </div>
          </div>
        );
      }
    }
    ```

    ë‰´ë ë¦­ë¡œ ì´ë™í•˜ì—¬ ì•±ì„ í´ë¦­í•˜ë©´ í‘œì—ì„œ ë°ì´í„°ë¥¼ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. (ë‹¤ì‹œ ë‰´ë ë¦­ì— ì•±ì„ ì œê³µí•´ì•¼ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.)

    ì¶•í•˜í•´ìš”! ì•±ì„ ë§Œë“œì…¨ì–´ìš”! ê³„ì†í•´ì„œ ëŒ€í™”í˜•ìœ¼ë¡œ ë§Œë“¤ê³  ì§€ë„ì— ë°ì´í„°ë¥¼ í‘œì‹œí•˜ì„¸ìš”.
  </Step>
</Steps>

## í…ìŠ¤íŠ¸ í•„ë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì•±ì„ ëŒ€í™”í˜•ìœ¼ë¡œ ë§Œë“¤ê¸° [#app-text-field]

ë°ì´í„°ê°€ ì•±ì—ì„œ ë‰´ë ë¦­ìœ¼ë¡œ ì „ì†¡ë˜ëŠ” ê²ƒì„ í™•ì¸í•˜ê³  ë‚˜ë©´ ì´ë¥¼ ì‚¬ìš©ì ì •ì˜í•˜ê³  ëŒ€í™”í˜•ìœ¼ë¡œ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë ¤ë©´ ë°ì´í„°ë¥¼ í•„í„°ë§í•˜ëŠ” í…ìŠ¤íŠ¸ í•„ë“œë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤. ë‚˜ì¤‘ì— `Leaflet` ì´ë¼ëŠ” íƒ€ì‚¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ í•´ë‹¹ ë°ì´í„°ë¥¼ ì„¸ê³„ ì§€ë„ì— í‘œì‹œí•©ë‹ˆë‹¤.

<Steps>
  <Step>
    ### ê°€ì ¸ì˜¤ê¸° `TextField` [#import-textfield]

    `TableChart` êµ¬ì„± ìš”ì†Œì—ì„œì™€ ë§ˆì°¬ê°€ì§€ë¡œ ë‰´ë ë¦­ì—ì„œ [`TextField` êµ¬ì„± ìš”ì†Œë¥¼](/docs/new-relic-solutions/build-nr-ui/sdk-component/controls/TextField/) ê°€ì ¸ì™€ì•¼ í•©ë‹ˆë‹¤.

    ```jsx fileName=pageview-app-nerdlet/index.js
    import React from 'react';
    import { TableChart, TextField } from 'nr1';

    const accountId = 0; // Replace with your account ID

    export default class PageViewApp extends React.Component {
      render() {
        return (
          <div className="container">
            <div className="row">
              <TableChart
                accountId={accountId}
                query={`FROM PageView SELECT count(*), average(duration) WHERE appName = 'WebPortal' SINCE 1 week ago LIMIT 1000`}
                fullWidth
                className="chart"
              />
            </div>
          </div>
        );
      }
    }
    ```
  </Step>

  <Step>
    ### í…ìŠ¤íŠ¸ í•„ë“œì— í–‰ ì¶”ê°€ [#add-row-textfield]

    í‘œ ìœ„ì— í…ìŠ¤íŠ¸ í•„ë“œ í•„í„°ë¥¼ ì¶”ê°€í•˜ë ¤ë©´ ì´ ì½”ë“œë¥¼ `TableChart` div ìœ„ì— ë„£ìœ¼ì„¸ìš”. í…ìŠ¤íŠ¸ í•„ë“œì˜ ê¸°ë³¸ê°’ì€ &quot;US&quot;ì…ë‹ˆë‹¤.

    ```jsx fileName=pageview-app-nerdlet/index.js
    import React from 'react';
    import { TableChart, TextField } from 'nr1';

    const accountId = 0; // Replace with your account ID

    export default class PageViewApp extends React.Component {
      render() {
        return (
          <div className="container">
            <div className="row">
              <div className="row">
                <TextField
                  placeholder="US"
                  onChange={(event) => {
                    this.setState({ countryCode: event.target.value });
                  }}
                />
              </div>
              <TableChart
                accountId={accountId}
                query={`FROM PageView SELECT count(*), average(duration) WHERE appName = 'WebPortal' SINCE 1 week ago LIMIT 1000`}
                fullWidth
                className="chart"
              />
            </div>
          </div>
        );
      }
    }
    ```
  </Step>

  <Step>
    ### í…ìŠ¤íŠ¸ í•„ë“œ ê°œì²´ ë§Œë“¤ê¸° [#build-text-field]

    `render()` í•¨ìˆ˜ ìœ„ì— `constructor` ë¥¼ ì¶”ê°€í•˜ì—¬ í…ìŠ¤íŠ¸ í•„ë“œ ê°ì²´ë¥¼ ë¹Œë“œí•©ë‹ˆë‹¤.

    ```jsx fileName=pageview-app-nerdlet/index.js
    import React from 'react';
    import { TableChart, TextField } from 'nr1';

    const accountId = 0; // Replace with your account ID

    export default class PageViewApp extends React.Component {
      constructor(props) {
        super(props);
        this.state = {
          countryCode: null,
        };
      }

      render() {
        return (
          <div className="container">
            <div className="row">
              <div className="row">
                <TextField
                  placeholder="US"
                  onChange={(event) => {
                    this.setState({ countryCode: event.target.value });
                  }}
                />
              </div>
              <TableChart
                accountId={accountId}
                query={`FROM PageView SELECT count(*), average(duration) WHERE appName = 'WebPortal' SINCE 1 week ago LIMIT 1000`}
                fullWidth
                className="chart"
              />
            </div>
          </div>
        );
      }
    }
    ```

    `return` ìœ„ì— ë‹¤ìŒì„ ì¶”ê°€í•©ë‹ˆë‹¤.

    ```jsx fileName=pageview-app-nerdlet/index.js
    import React from 'react';
    import { TableChart, TextField } from 'nr1';

    const accountId = 0; // Replace with your account ID

    export default class PageViewApp extends React.Component {
      constructor(props) {
        super(props);
        this.state = {
          countryCode: null,
        };
      }

      render() {
        const { countryCode } = this.state;

        return (
          <div className="container">
            <div className="row">
              <div className="row">
                <TextField
                  placeholder="US"
                  onChange={(event) => {
                    this.setState({ countryCode: event.target.value });
                  }}
                />
              </div>
              <TableChart
                accountId={accountId}
                query={`FROM PageView SELECT count(*), average(duration) WHERE appName = 'WebPortal' SINCE 1 week ago LIMIT 1000`}
                fullWidth
                className="chart"
              />
            </div>
          </div>
        );
      }
    }
    ```

    ì´ì œ í…Œì´ë¸” ì°¨íŠ¸ ì¿¼ë¦¬ì— `countryCode` ì¶”ê°€í•˜ì„¸ìš”.

    ```jsx fileName=pageview-app-nerdlet/index.js
    import React from "react";
    import { TableChart, TextField } from "nr1";

    const accountId = 0; // Replace with your account ID

    export default class PageViewApp extends React.Component {
      constructor(props) {
        super(props);
        this.state = {
          countryCode: null,
        };
      }

      render() {
        const { countryCode } = this.state;

        return (
          <div className="container">
            <div className="row">
              <div className="row">
                <TextField
                  placeholder="US"
                  onChange={(event) => {
                    this.setState({ countryCode: event.target.value });
                  }}
                />
              </div>
              <TableChart
                accountId={accountId}
                query={`FROM PageView SELECT count(*), average(duration) WHERE appName = 'WebPortal' ${
                  countryCode ? ` WHERE countryCode LIKE '%${countryCode}%' ` : ""
                } FACET countryCode, regionCode SINCE 1 week ago LIMIT 1000`}
                fullWidth
                className="chart"
              />
            </div>
          </div>
        );
      }
    }
    ```

    ì•±ì„ ë‹¤ì‹œ ë¡œë“œí•˜ì—¬ í…ìŠ¤íŠ¸ í•„ë“œë¥¼ ì‚¬ìš©í•´ ë³´ì„¸ìš”.
  </Step>
</Steps>

## ì§€ë„ì—ì„œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° [#add-data-map]

ì§€ë„ë¥¼ ë§Œë“¤ë ¤ë©´ npmì„ ì‚¬ìš©í•˜ì—¬ `Leaflet` ì„¤ì¹˜í•©ë‹ˆë‹¤.

<Steps>
  <Step>
    ### ì„¤ì¹˜ `Leaflet` [#install-leaflet]

    í„°ë¯¸ë„ì— ë‹¤ìŒì„ ì…ë ¥í•˜ì„¸ìš”.

    ```bash
    npm install --save leaflet react-leaflet
    ```

    nerdlets `styles.scss` íŒŒì¼ì—ì„œ `Leaflet` CSSë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.

    ```css fileName=pageview-app-nerdlet/styles.scss
    @import `~leaflet/dist/leaflet.css`;

    .container {
      width: 100%;
      height: 99vh;
      display: flex;
      flex-direction: column;
      .row {
        margin: 10px;
        display: flex;
        flex-direction: row;
      }
      .chart {
        height: 250px;
      }
    }
    ```

    `styles.scss` ì— ìˆëŠ” ë™ì•ˆ ì§€ë„ì˜ ë„ˆë¹„ì™€ ë†’ì´ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.

    ```css fileName=pageview-app-nerdlet/styles.scss
    @import `~leaflet/dist/leaflet.css`;

    .container {
      width: 100%;
      height: 99vh;
      display: flex;
      flex-direction: column;
      .row {
        margin: 10px;
        display: flex;
        flex-direction: row;
      }
      .chart {
        height: 250px;
      }
    }

    .containerMap {
      width: 100%;
      z-index: 0;
      height: 70vh;
    }
    ```
  </Step>

  <Step>
    ### ë‹¤ìŒì— ëŒ€í•œ webpack êµ¬ì„± íŒŒì¼ì„ ì¶”ê°€í•˜ì‹­ì‹œì˜¤. `Leaflet`

    nerdpackì˜ ìµœìƒìœ„ í´ë”ì— webpack ì„¤ì • íŒŒì¼ `.extended-webpackrc.js` ì¶”ê°€í•˜ì„¸ìš”. ì´ëŠ” `Leaflet` ì˜ ì§€ë„ íƒ€ì¼ë§ ì •ë³´ ë°ì´í„° ì‚¬ìš©ì„ ì§€ì›í•©ë‹ˆë‹¤.

    ```jsx fileName=.extended-webpackrc.js
    module.exports = {
      module: {
        rules: [
          {
            test: /\.(png|jpe?g|gif)$/,
            use: [
              {
                loader: 'file-loader',
                options: {},
              },
              {
                loader: 'url-loader',
                options: { limit: 25000 },
              },
            ],
          },
        ],
      },
    };
    ```
  </Step>

  <Step>
    ### ë‹¤ìŒì—ì„œ ëª¨ë“ˆ ê°€ì ¸ì˜¤ê¸° `Leaflet`

    `index.js` ì—ì„œëŠ” `Leaflet` ì—ì„œ ëª¨ë“ˆì„ ê°€ì ¸ì˜µë‹ˆë‹¤.

    ```jsx fileName=pageview-app-nerdlet/index.js
    import React from 'react';
    import { TableChart, TextField } from 'nr1';
    import { Map, CircleMarker, TileLayer } from 'react-leaflet';

    const accountId = 0; // Replace with your account ID

    export default class PageViewApp extends React.Component {
      constructor(props) {
        super(props);
        this.state = {
          countryCode: null,
        };
      }

      render() {
        const { countryCode } = this.state;

        return (
          <div className="container">
            <div className="row">
              <div className="row">
                <TextField
                  placeholder="US"
                  onChange={(event) => {
                    this.setState({ countryCode: event.target.value });
                  }}
                />
              </div>
              <TableChart
                accountId={accountId}
                query={`FROM PageView SELECT count(*), average(duration) WHERE appName = 'WebPortal' ${
                  countryCode ? ` WHERE countryCode LIKE '%${countryCode}%' ` : ''
                } FACET countryCode, regionCode SINCE 1 week ago LIMIT 1000`}
                fullWidth
                className="chart"
              />
            </div>
          </div>
        );
      }
    }
    ```
  </Step>

  <Step>
    ### ë‰´ë ë¦­ì—ì„œ ì¶”ê°€ ëª¨ë“ˆ ê°€ì ¸ì˜¤ê¸°

    `Leaflet` ì§€ë„ê°€ ì œëŒ€ë¡œ ì‘ë™í•˜ë ¤ë©´ ë‰´ë ë¦­ì˜ ëª¨ë“ˆì´ ëª‡ ê°œ ë” í•„ìš”í•©ë‹ˆë‹¤. ë‹¤ìŒ ì½”ë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ê°€ì ¸ì˜µë‹ˆë‹¤.

    ```jsx fileName=pageview-app-nerdlet/index.js
    import React from 'react';
    import {
      TableChart,
      TextField,
      NerdGraphQuery,
      Spinner,
      Button,
      BlockText,
    } from 'nr1';
    import { Map, CircleMarker, TileLayer } from 'react-leaflet';

    const accountId = 0; // Replace with your account ID

    export default class PageViewApp extends React.Component {
      constructor(props) {
        super(props);
        this.state = {
          countryCode: null,
        };
      }

      render() {
        const { countryCode } = this.state;

        return (
          <div className="container">
            <div className="row">
              <div className="row">
                <TextField
                  placeholder="US"
                  onChange={(event) => {
                    this.setState({ countryCode: event.target.value });
                  }}
                />
              </div>
              <TableChart
                accountId={accountId}
                query={`FROM PageView SELECT count(*), average(duration) WHERE appName = 'WebPortal' ${
                  countryCode ? ` WHERE countryCode LIKE '%${countryCode}%' ` : ''
                } FACET countryCode, regionCode SINCE 1 week ago LIMIT 1000`}
                fullWidth
                className="chart"
              />
            </div>
          </div>
        );
      }
    }
    ```

    `NerdGraphQuery` í•œ ë²ˆì— ì—¬ëŸ¬ NRQL ì¿¼ë¦¬ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìœ¼ë©° ì§€ë„ì— ë°ì´í„°ê°€ ì±„ì›Œì§‘ë‹ˆë‹¤. `Spinner` ë¡œë”© ìŠ¤í”¼ë„ˆë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤. `Button` ë²„íŠ¼ êµ¬ì„±ìš”ì†Œë¥¼ ì œê³µí•©ë‹ˆë‹¤. `BlockText` ë¸”ë¡ í…ìŠ¤íŠ¸ êµ¬ì„±ìš”ì†Œë¥¼ ì œê³µí•©ë‹ˆë‹¤.
  </Step>

  <Step>
    ### ì§€ë„ì— ëŒ€í•œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° [#get-data-map]

    êµ­ê°€ ì½”ë“œì™€ í•¨ê»˜ ìœ„ë„ì™€ ê²½ë„ë¥¼ ì‚¬ìš©í•˜ë©´ ë‰´ë ë¦­ ë°ì´í„°ë¥¼ ì§€ë„ì— í‘œì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

    ```jsx fileName=pageview-app-nerdlet/index.js
    import React from 'react';
    import {
      TableChart,
      TextField,
      NerdGraphQuery,
      Spinner,
      Button,
      BlockText,
    } from 'nr1';
    import { Map, CircleMarker, TileLayer } from 'react-leaflet';

    const accountId = 0; // Replace with your account ID

    export default class PageViewApp extends React.Component {
      constructor(props) {
        super(props);
        this.state = {
          countryCode: null,
        };
      }

      mapData() {
        const { countryCode } = this.state;
        const query = `{
          actor {
            account(id: 1606862) {
              mapData: nrql(query: "SELECT count(*) AS 'x', average(duration) AS 'y', sum(asnLatitude)/count(*) AS 'lat', sum(asnLongitude)/count(*) AS 'lng' FROM PageView FACET regionCode, countryCode WHERE appName = 'WebPortal' ${
                countryCode ? ` WHERE countryCode LIKE '%${countryCode}%' ` : ''
              } LIMIT 1000 ") {
                results
                nrql
              }
            }
          }
        }`;

        return query;
      }

      render() {
        const { countryCode } = this.state;

        return (
          <div className="container">
            <div className="row">
              <div className="row">
                <TextField
                  placeholder="US"
                  onChange={(event) => {
                    this.setState({ countryCode: event.target.value });
                  }}
                />
              </div>
              <TableChart
                accountId={accountId}
                query={`FROM PageView SELECT count(*), average(duration) WHERE appName = 'WebPortal' ${
                  countryCode ? ` WHERE countryCode LIKE '%${countryCode}%' ` : ''
                } FACET countryCode, regionCode SINCE 1 week ago LIMIT 1000`}
                fullWidth
                className="chart"
              />
            </div>
          </div>
        );
      }
    }
    ```
  </Step>

  <Step>
    ### ì§€ë„ í‘œì‹œ ìƒ‰ìƒ ì‚¬ìš©ì ì •ì˜ [#customize-map-colors]

    `mapData` í•¨ìˆ˜ ìœ„ì— ì´ ì½”ë“œë¥¼ ì¶”ê°€í•˜ì—¬ ì§€ë„ ë§ˆì»¤ ìƒ‰ìƒì„ ë§ì¶¤ì„¤ì •í•˜ì„¸ìš”.

    ```jsx fileName=pageview-app-nerdlet/index.js
    import React from 'react';
    import {
      TableChart,
      TextField,
      NerdGraphQuery,
      Spinner,
      Button,
      BlockText,
    } from 'nr1';
    import { Map, CircleMarker, TileLayer } from 'react-leaflet';

    const accountId = 0; // Replace with your account ID

    export default class PageViewApp extends React.Component {
      constructor(props) {
        super(props);
        this.state = {
          countryCode: null,
        };
      }

      getMarkerColor(measure, apdexTarget = 1.7) {
        if (measure <= apdexTarget) {
          return '#11A600';
        } else if (measure >= apdexTarget && measure <= apdexTarget * 4) {
          return '#FFD966';
        } else {
          return '#BF0016';
        }
      }

      mapData() {
        const { countryCode } = this.state;
        const query = `{
          actor {
            account(id: 1606862) {
              mapData: nrql(query: "SELECT count(*) AS 'x', average(duration) AS 'y', sum(asnLatitude)/count(*) AS 'lat', sum(asnLongitude)/count(*) AS 'lng' FROM PageView FACET regionCode, countryCode WHERE appName = 'WebPortal' ${
                countryCode ? ` WHERE countryCode LIKE '%${countryCode}%' ` : ''
              } LIMIT 1000 ") {
                results
                nrql
              }
            }
          }
        }`;

        return query;
      }

      render() {
        const { countryCode } = this.state;

        return (
          <div className="container">
            <div className="row">
              <div className="row">
                <TextField
                  placeholder="US"
                  onChange={(event) => {
                    this.setState({ countryCode: event.target.value });
                  }}
                />
              </div>
              <TableChart
                accountId={accountId}
                query={`FROM PageView SELECT count(*), average(duration) WHERE appName = 'WebPortal' ${
                  countryCode ? ` WHERE countryCode LIKE '%${countryCode}%' ` : ''
                } FACET countryCode, regionCode SINCE 1 week ago LIMIT 1000`}
                fullWidth
                className="chart"
              />
            </div>
          </div>
        );
      }
    }
    ```

    HTML ìƒ‰ìƒ ì½”ë“œ ê°’ì„ ì›í•˜ëŠ” ëŒ€ë¡œ ììœ ë¡­ê²Œ ë³€ê²½í•˜ì„¸ìš”. ì´ ì˜ˆì—ì„œ `#11A600` ì€ ë…¹ìƒ‰ì´ê³ , `#FFD966` ì€ ì¼ì¢…ì˜ ë…¸ë€ìƒ‰ì´ë©°, `#BF0016` ëŠ” ë¹¨ê°„ìƒ‰ì…ë‹ˆë‹¤.
  </Step>

  <Step>
    ### ì§€ë„ì˜ ê¸°ë³¸ ì¤‘ì‹¬ì  ì„¤ì •

    ìœ„ë„ì™€ ê²½ë„ë¥¼ ì‚¬ìš©í•˜ì—¬ ì§€ë„ì˜ ê¸°ë³¸ ì¤‘ì‹¬ì ì„ ì„¤ì •í•©ë‹ˆë‹¤.

    ```jsx fileName=pageview-app-nerdlet/index.js
    import React from 'react';
    import {
      TableChart,
      TextField,
      NerdGraphQuery,
      Spinner,
      Button,
      BlockText,
    } from 'nr1';
    import { Map, CircleMarker, TileLayer } from 'react-leaflet';

    const accountId = 0; // Replace with your account ID

    export default class PageViewApp extends React.Component {
      constructor(props) {
        super(props);
        this.state = {
          countryCode: null,
        };
      }

      getMarkerColor(measure, apdexTarget = 1.7) {
        if (measure <= apdexTarget) {
          return '#11A600';
        } else if (measure >= apdexTarget && measure <= apdexTarget * 4) {
          return '#FFD966';
        } else {
          return '#BF0016';
        }
      }

      mapData() {
        const { countryCode } = this.state;
        const query = `{
          actor {
            account(id: 1606862) {
              mapData: nrql(query: "SELECT count(*) AS 'x', average(duration) AS 'y', sum(asnLatitude)/count(*) AS 'lat', sum(asnLongitude)/count(*) AS 'lng' FROM PageView FACET regionCode, countryCode WHERE appName = 'WebPortal' ${
                countryCode ? ` WHERE countryCode LIKE '%${countryCode}%' ` : ''
              } LIMIT 1000 ") {
                results
                nrql
              }
            }
          }
        }`;

        return query;
      }

      render() {
        const { countryCode } = this.state;
        const defaultMapCenter = [10.5731, -7.5898];

        return (
          <div className="container">
            <div className="row">
              <div className="row">
                <TextField
                  placeholder="US"
                  onChange={(event) => {
                    this.setState({ countryCode: event.target.value });
                  }}
                />
              </div>
              <TableChart
                accountId={accountId}
                query={`FROM PageView SELECT count(*), average(duration) WHERE appName = 'WebPortal' ${
                  countryCode ? ` WHERE countryCode LIKE '%${countryCode}%' ` : ''
                } FACET countryCode, regionCode SINCE 1 week ago LIMIT 1000`}
                fullWidth
                className="chart"
              />
            </div>
          </div>
        );
      }
    }
    ```
  </Step>

  <Step>
    ### ì§€ë„ì— í–‰ ì¶”ê°€ [#add-row-map]

    í…ìŠ¤íŠ¸ í•„ë“œ í–‰ê³¼ í…Œì´ë¸” ì°¨íŠ¸ í–‰ ì‚¬ì´ì— `NerdGraphQuery` ì‚¬ìš©í•˜ì—¬ ì§€ë„ ì½˜í…ì¸ ì— ëŒ€í•œ ìƒˆ í–‰ì„ ì‚½ì…í•©ë‹ˆë‹¤.

    ```jsx fileName=pageview-app-nerdlet/index.js
    import React from 'react';
    import {
      TableChart,
      TextField,
      NerdGraphQuery,
      Spinner,
      Button,
      BlockText,
    } from 'nr1';
    import { Map, CircleMarker, TileLayer } from 'react-leaflet';

    const accountId = 0; // Replace with your account ID

    export default class PageViewApp extends React.Component {
      constructor(props) {
        super(props);
        this.state = {
          countryCode: null,
        };
      }

      getMarkerColor(measure, apdexTarget = 1.7) {
        if (measure <= apdexTarget) {
          return '#11A600';
        } else if (measure >= apdexTarget && measure <= apdexTarget * 4) {
          return '#FFD966';
        } else {
          return '#BF0016';
        }
      }

      mapData() {
        const { countryCode } = this.state;
        const query = `{
          actor {
            account(id: 1606862) {
              mapData: nrql(query: "SELECT count(*) AS 'x', average(duration) AS 'y', sum(asnLatitude)/count(*) AS 'lat', sum(asnLongitude)/count(*) AS 'lng' FROM PageView FACET regionCode, countryCode WHERE appName = 'WebPortal' ${
                countryCode ? ` WHERE countryCode LIKE '%${countryCode}%' ` : ''
              } LIMIT 1000 ") {
                results
                nrql
              }
            }
          }
        }`;

        return query;
      }

      render() {
        const { countryCode } = this.state;
        const defaultMapCenter = [10.5731, -7.5898];

        return (
          <div className="container">
            <div className="row">
              <div className="row">
                <TextField
                  placeholder="US"
                  onChange={(event) => {
                    this.setState({ countryCode: event.target.value });
                  }}
                />
              </div>
              <div className="row">
                <NerdGraphQuery query={this.mapData()}>
                  {({ loading, error, data }) => {
                    if (loading) {
                      return <Spinner fillContainer />;
                    }
                    if (error) {
                      return 'Error';
                    }
                    const { results } = data.actor.account.mapData;
                    console.debug(results);
                    return 'Hello';
                  }}
                </NerdGraphQuery>
              </div>
              <TableChart
                accountId={accountId}
                query={`FROM PageView SELECT count(*), average(duration) WHERE appName = 'WebPortal' ${
                  countryCode ? ` WHERE countryCode LIKE '%${countryCode}%' ` : ''
                } FACET countryCode, regionCode SINCE 1 week ago LIMIT 1000`}
                fullWidth
                className="chart"
              />
            </div>
          </div>
        );
      }
    }
    ```

    ë‰´ì¿¨ë¦­ì—ì„œ ê¸°ëŠ¥ì„ ë‹¤ì‹œ ë¡œë“œí•˜ì—¬ ì‘ë™í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•˜ì„¸ìš”.
  </Step>

  <Step>
    ### &quot;Hello&quot;ë¥¼ ì „ë‹¨ì§€ ì½”ë“œë¡œ ë°”ê¿‰ë‹ˆë‹¤. [#replace-hello]

    `return "Hello";` ë‹¤ìŒìœ¼ë¡œ ë°”ê¾¸ì„¸ìš”.

    ```jsx fileName=pageview-app-nerdlet/index.js
    import React from 'react';
    import {
      TableChart,
      TextField,
      NerdGraphQuery,
      Spinner,
      Button,
      BlockText,
    } from 'nr1';
    import { Map, CircleMarker, TileLayer } from 'react-leaflet';

    const accountId = 0; // Replace with your account ID

    export default class PageViewApp extends React.Component {
      constructor(props) {
        super(props);
        this.state = {
          countryCode: null,
        };
      }

      getMarkerColor(measure, apdexTarget = 1.7) {
        if (measure <= apdexTarget) {
          return '#11A600';
        } else if (measure >= apdexTarget && measure <= apdexTarget * 4) {
          return '#FFD966';
        } else {
          return '#BF0016';
        }
      }

      mapData() {
        const { countryCode } = this.state;
        const query = `{
          actor {
            account(id: 1606862) {
              mapData: nrql(query: "SELECT count(*) AS 'x', average(duration) AS 'y', sum(asnLatitude)/count(*) AS 'lat', sum(asnLongitude)/count(*) AS 'lng' FROM PageView FACET regionCode, countryCode WHERE appName = 'WebPortal' ${
                countryCode ? ` WHERE countryCode LIKE '%${countryCode}%' ` : ''
              } LIMIT 1000 ") {
                results
                nrql
              }
            }
          }
        }`;

        return query;
      }

      render() {
        const { countryCode } = this.state;
        const defaultMapCenter = [10.5731, -7.5898];

        return (
          <div className="container">
            <div className="row">
              <div className="row">
                <TextField
                  placeholder="US"
                  onChange={(event) => {
                    this.setState({ countryCode: event.target.value });
                  }}
                />
              </div>
              <div className="row">
                <NerdGraphQuery query={this.mapData()}>
                  {({ loading, error, data }) => {
                    if (loading) {
                      return <Spinner fillContainer />;
                    }
                    if (error) {
                      return 'Error';
                    }
                    const { results } = data.actor.account.mapData;
                    console.debug(results);

                    return (
                      <Map
                        className="containerMap"
                        center={defaultMapCenter}
                        zoom={2}
                        zoomControl
                      >
                        <TileLayer
                          attribution='&amp;copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
                          url="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"
                        />
                        {results.map((pt, i) => {
                          const center = [pt.lat, pt.lng];
                          return (
                            <CircleMarker
                              key={`circle-${i}`}
                              center={center}
                              color={this.getMarkerColor(pt.y)}
                              radius={Math.log(pt.x) * 3}
                              onClick={() => {
                                alert(JSON.stringify(pt));
                              }}
                            />
                          );
                        })}
                      </Map>
                    );
                  }}
                </NerdGraphQuery>
              </div>
              <TableChart
                accountId={accountId}
                query={`FROM PageView SELECT count(*), average(duration) WHERE appName = 'WebPortal' ${
                  countryCode ? ` WHERE countryCode LIKR '%${countryCode}%' ` : ''
                } FACET countryCode, regionCode SINCE 1 week ago LIMIT 1000`}
                fullWidth
                className="chart"
              />
            </div>
          </div>
        );
      }
    }
    ```
  </Step>
</Steps>

ì´ ì½”ë“œëŠ” `OpenStreetMap` ë°ì´í„°ì™€ ë§ˆì»¤ ìƒ‰ìƒì„ ì‚¬ìš©í•˜ì—¬ ì„ íƒí•œ ìœ„ë„ì™€ ê²½ë„ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ì„¸ê³„ ì§€ë„ë¥¼ ë§Œë“­ë‹ˆë‹¤.

ì§€ë„ì—ì„œ í˜ì´ì§€ë·° ë°ì´í„°ë¥¼ ë³´ë ¤ë©´ ì•±ì„ ë‹¤ì‹œ ë¡œë“œí•˜ì„¸ìš”!