---
title: 선택한 버전 유지
metaDescription: Persist the selected version
freshnessValidatedDate: never
translationType: machine
---

<Callout variant="tip">
  이 강의는 처음부터 New Relic 제작 방법을 가르치는 과정의 일부입니다. 아직 확인하지 않았다면 개요를 확인하세요.

  과정의 각 단원은 마지막 단원을 기반으로 하므로 이 단원을 시작하기 전에 마지막 단원을 완료했는지 확인하고 테스트를 종료하려면 섹션을 추가하세요.
</Callout>

이전 강의에서는 A/B 테스트에서 가장 효과적인 디자인을 선택할 수 있는 애플리케이션 섹션을 만들었습니다. 이 섹션의 목표는 승자를 선택한 후 테스트를 종료하는 것입니다.

이 양식에서 버전을 선택하면 선택 사항이 `Select` 구성요소에 유지되지 않습니다. 이제 해당 동작을 구현할 차례입니다.

<Steps>
  <Step>
    [교과 과정 저장소](https://github.com/newrelic-experimental/nru-programmability-course) 의 `persist-selected-version/ab-test` 디렉터리로 변경합니다.

    ```sh
    cd nru-programmability-course/persist-selected-version/ab-test
    ```
  </Step>

  <Step>
    `end-test.js` 에서 기본 `selectedVersion` 필드로 `EndTestSection.state` 초기화합니다.

    ```js
    import React from 'react';
    import {
        Button,
        Grid,
        GridItem,
        HeadingText,
        Select,
        SelectItem,
    } from 'nr1';

    class VersionSelector extends React.Component {
        render() {
            return <Select>
                <SelectItem value={'A'}>Version A</SelectItem>
                <SelectItem value={'B'}>Version B</SelectItem>
            </Select>
        }
    }

    class EndTestButton extends React.Component {
        render() {
            return <div>
                <Button>End test</Button>
            </div>
        }
    }

    export default class EndTestSection extends React.Component {
        constructor() {
            super(...arguments);

            this.state = {
                selectedVersion: 'A',
            };
        }

        render() {
            return <Grid className="endTestSection">
                <GridItem columnSpan={12}>
                    <HeadingText className="endTestHeader">
                        Pick the winner of your A/B test:
                    </HeadingText>
                </GridItem>
                <GridItem columnStart={5} columnEnd={6} className="versionSelector">
                    <VersionSelector />
                </GridItem>
                <GridItem columnStart={7} columnEnd={8}>
                    <EndTestButton>End test</EndTestButton>
                </GridItem>
            </Grid>
        }
    }
    ```
  </Step>

  <Step>
    `selectedVersion` 소품으로 `VersionSelector` 에 전달합니다.

    ```js
    import React from 'react';
    import {
        Button,
        Grid,
        GridItem,
        HeadingText,
        Select,
        SelectItem,
    } from 'nr1';

    class VersionSelector extends React.Component {
        render() {
            return <Select>
                <SelectItem value={'A'}>Version A</SelectItem>
                <SelectItem value={'B'}>Version B</SelectItem>
            </Select>
        }
    }

    class EndTestButton extends React.Component {
        render() {
            return <div>
                <Button>End test</Button>
            </div>
        }
    }

    export default class EndTestSection extends React.Component {
        constructor() {
            super(...arguments);

            this.state = {
                selectedVersion: 'A',
            };
        }

        render() {
            return <Grid className="endTestSection">
                <GridItem columnSpan={12}>
                    <HeadingText className="endTestHeader">
                        Pick the winner of your A/B test:
                    </HeadingText>
                </GridItem>
                <GridItem columnStart={5} columnEnd={6} className="versionSelector">
                    <VersionSelector
                        selectedVersion={this.state.selectedVersion}
                    />
                </GridItem>
                <GridItem columnStart={7} columnEnd={8}>
                    <EndTestButton>End test</EndTestButton>
                </GridItem>
            </Grid>
        }
    }
    ```
  </Step>

  <Step>
    `VersionSelector` 의 `Select` 구성요소에 `selectedVersion` 를 제공합니다.

    ```js
    import React from 'react';
    import {
        Button,
        Grid,
        GridItem,
        HeadingText,
        Select,
        SelectItem,
    } from 'nr1';

    class VersionSelector extends React.Component {
        constructor(props) {
            super(props);
        }

        render() {
            return <Select value={this.props.selectedVersion}>
                <SelectItem value={'A'}>Version A</SelectItem>
                <SelectItem value={'B'}>Version B</SelectItem>
            </Select>
        }
    }

    class EndTestButton extends React.Component {
        render() {
            return <div>
                <Button>End test</Button>
            </div>
        }
    }

    export default class EndTestSection extends React.Component {
        constructor() {
            super(...arguments);

            this.state = {
                selectedVersion: 'A',
            };
        }

        render() {
            return <Grid className="endTestSection">
                <GridItem columnSpan={12}>
                    <HeadingText className="endTestHeader">
                        Pick the winner of your A/B test:
                    </HeadingText>
                </GridItem>
                <GridItem columnStart={5} columnEnd={6} className="versionSelector">
                    <VersionSelector
                        selectedVersion={this.state.selectedVersion}
                    />
                </GridItem>
                <GridItem columnStart={7} columnEnd={8}>
                    <EndTestButton>End test</EndTestButton>
                </GridItem>
            </Grid>
        }
    }
    ```
  </Step>

  <Step>
    `EndTestSection.state` 업데이트하는 `selectVersion()` 메서드를 만듭니다.

    ```js
    import React from 'react';
    import {
        Button,
        Grid,
        GridItem,
        HeadingText,
        Select,
        SelectItem,
    } from 'nr1';

    class VersionSelector extends React.Component {
        constructor(props) {
            super(props);
        }

        render() {
            return <Select value={this.props.selectedVersion}>
                <SelectItem value={'A'}>Version A</SelectItem>
                <SelectItem value={'B'}>Version B</SelectItem>
            </Select>
        }
    }

    class EndTestButton extends React.Component {
        render() {
            return <div>
                <Button>End test</Button>
            </div>
        }
    }

    export default class EndTestSection extends React.Component {
        constructor() {
            super(...arguments);

            this.state = {
                selectedVersion: 'A',
            };

            this.selectVersion = this.selectVersion.bind(this);
        }

        selectVersion(event, value) {
            this.setState({ selectedVersion: value });
        }

        render() {
            return <Grid className="endTestSection">
                <GridItem columnSpan={12}>
                    <HeadingText className="endTestHeader">
                        Pick the winner of your A/B test:
                    </HeadingText>
                </GridItem>
                <GridItem columnStart={5} columnEnd={6} className="versionSelector">
                    <VersionSelector
                        selectedVersion={this.state.selectedVersion}
                    />
                </GridItem>
                <GridItem columnStart={7} columnEnd={8}>
                    <EndTestButton>End test</EndTestButton>
                </GridItem>
            </Grid>
        }
    }
    ```

    `state` 액세스할 수 있도록 `selectVersion` `EndTestSection` 구성요소에 바인딩해야 합니다.
  </Step>

  <Step>
    메소드를 소품으로 `VersionSelector` 에 전달합니다.

    ```js
    import React from 'react';
    import {
        Button,
        Grid,
        GridItem,
        HeadingText,
        Select,
        SelectItem,
    } from 'nr1';

    class VersionSelector extends React.Component {
        constructor(props) {
            super(props);
        }

        render() {
            return <Select value={this.props.selectedVersion}>
                <SelectItem value={'A'}>Version A</SelectItem>
                <SelectItem value={'B'}>Version B</SelectItem>
            </Select>
        }
    }

    class EndTestButton extends React.Component {
        render() {
            return <div>
                <Button>End test</Button>
            </div>
        }
    }

    export default class EndTestSection extends React.Component {
        constructor() {
            super(...arguments);

            this.state = {
                selectedVersion: 'A',
            };

            this.selectVersion = this.selectVersion.bind(this);
        }

        selectVersion(event, value) {
            this.setState({ selectedVersion: value });
        }

        render() {
            return <Grid className="endTestSection">
                <GridItem columnSpan={12}>
                    <HeadingText className="endTestHeader">
                        Pick the winner of your A/B test:
                    </HeadingText>
                </GridItem>
                <GridItem columnStart={5} columnEnd={6} className="versionSelector">
                    <VersionSelector
                        selectedVersion={this.state.selectedVersion}
                        selectVersion={this.selectVersion}
                    />
                </GridItem>
                <GridItem columnStart={7} columnEnd={8}>
                    <EndTestButton>End test</EndTestButton>
                </GridItem>
            </Grid>
        }
    }
    ```
  </Step>

  <Step>
    `VersionSelector` 에서 `selectVersion` `onChange` 콜백으로 설정합니다.

    ```js
    import React from 'react';
    import {
        Button,
        Grid,
        GridItem,
        HeadingText,
        Select,
        SelectItem,
    } from 'nr1';

    class VersionSelector extends React.Component {
        constructor(props) {
            super(props);
        }

        render() {
            return <Select onChange={this.props.selectVersion} value={this.props.selectedVersion}>
                <SelectItem value={'A'}>Version A</SelectItem>
                <SelectItem value={'B'}>Version B</SelectItem>
            </Select>
        }
    }

    class EndTestButton extends React.Component {
        render() {
            return <div>
                <Button>End test</Button>
            </div>
        }
    }

    export default class EndTestSection extends React.Component {
        constructor() {
            super(...arguments);

            this.state = {
                selectedVersion: 'A',
            };

            this.selectVersion = this.selectVersion.bind(this);
        }

        selectVersion(event, value) {
            this.setState({ selectedVersion: value });
        }

        render() {
            return <Grid className="endTestSection">
                <GridItem columnSpan={12}>
                    <HeadingText className="endTestHeader">
                        Pick the winner of your A/B test:
                    </HeadingText>
                </GridItem>
                <GridItem columnStart={5} columnEnd={6} className="versionSelector">
                    <VersionSelector
                        selectedVersion={this.state.selectedVersion}
                        selectVersion={this.selectVersion}
                    />
                </GridItem>
                <GridItem columnStart={7} columnEnd={8}>
                    <EndTestButton>End test</EndTestButton>
                </GridItem>
            </Grid>
        }
    }
    ```
  </Step>

  <Step>
    `nru-programmability-course/persist-selected-version/ab-test` 에서 Nerdpack의 루트로 이동합니다.
  </Step>

  <Step>
    Nerdpack에 대한 새 UUID를 생성하십시오.

    ```sh
    nr1 nerdpack:uuid -gf
    ```

    기존 Nerdpack이 포함된 교과 과정 저장소를 복제했으므로 고유한 식별자를 생성해야 합니다. 이 UUID는 Nerdpack을 New Relic 계정에 매핑합니다.
  </Step>

  <Step>
    애플리케이션을 로컬로 제공합니다.

    ```sh
    nr1 nerdpack:serve
    ```
  </Step>

  <Step>
    [https://one.newrelic.com?nerdpacks=local](https://one.newrelic.com?nerdpacks=local) 로 이동하여 **Apps \[앱] > Your apps** \[클릭하면] 아래에서 애플리케이션을 확인하세요.

    작업이 끝나면 로컬 서버의 터미널 창에서 `CTRL+C` 눌러 New Relic 피규어 제공을 중지하세요.
  </Step>
</Steps>

짜잔! A/B 테스트의 우승 버전으로 새 버전을 선택하면 해당 버전이 메뉴에 반영됩니다. 그러나 **End test** \[테스트 종료를] 를 누르면 아무 일도 일어나지 않습니다. 다음 강의에서는 A/B 테스트가 조기에 종료되지 않도록 보호하기 위한 확인 대화 상자를 만듭니다.

<Callout variant="tip">
  이 강의는 처음부터 New Relic 제작 방법을 가르치는 과정의 일부입니다. 다음 강의로 계속 진행하세요. 최종 테스트 확인 모달을 제시하세요.
</Callout>
