---
title: 측정항목 정규화 규칙
tags:
  - New Relic
  - Use New Relic
  - UI and data
metaDescription: How to create and manage rules in New Relic to deal with noise from high cardinality metrics and prevent metric grouping issues (MGIs).
freshnessValidatedDate: never
translationType: machine
---

메트릭 정규화 규칙은 [메트릭 그룹화 문제](/docs/using-new-relic/cross-product-functions/troubleshooting/metric-grouping-issues) (MGI)를 관리하는 데 도움이 됩니다. 이는 애플리케이션 성능 데이터의 관련성을 유지하는 데 도움이 됩니다. 지표 정규화는 [지표 타임슬라이스 데이터](/docs/data-apis/understand-data/new-relic-data-types/#timeslice-data) 에만 적용됩니다.

메트릭 정규화 규칙을 생성하고 관리하여 다음을 수행할 수 있습니다.

* [인덱스 타임슬라이스 데이터를](/docs/data-apis/understand-data/new-relic-data-types/#timeslice-data)그룹화하거나 필터링합니다.
* 뉴렐릭에 보고되는 카디널리티 지표를 관리합니다.
* MGI를 예방하세요
* `DENY_NEW_METRICS` 규칙의 자동 생성을 방지합니다.
* 뉴렐릭에 보고되는 고유 이름 수를 줄이세요

<Callout variant="important">
  메트릭 수가 매우 많은 MGI가 감지될 때마다 플랫폼의 성능 저하를 방지하기 위해 `DENY_NEW_METRICS` 규칙이 자동으로 생성됩니다. 이 `DENY_NEW_METRICS` 규칙은 이전에 뉴렐릭에 보고된 어떤 범위에도 영향을 미치지 않습니다.
</Callout>

<Callout variant="tip">
  [NerdGraph를](/docs/apis/nerdgraph/examples/nerdgraph-metric-normalization-rule/) 사용하여 메트릭 정규화 규칙을 만들 수도 있습니다.
</Callout>

## 여러 앱에 보고하는 에이전트 [#multi-app-agents]

에이전트가 여러 애플리케이션에 보고하는 경우, 모든 애플리케이션의 정규화 규칙이 메트릭 데이터에 적용됩니다.

다음 시나리오를 생각해 보세요.

* 에이전트는 `app1` 에게 보고합니다. `app2`
* 규칙 `r1` 은 다음과 같이 정의됩니다. `app1`
* 규칙 `r2` 은 다음과 같이 정의됩니다. `app2`

에이전트가 보낸 모든 지표 데이터에는 `r1` 과 `r2` 모두 적용됩니다.

에이전트 설정이 `app2` 에만 보고하도록 수정되면 어떻게 되나요? 이 경우 에이전트가 보고하는 앱에 대해 정의된 유일한 규칙이므로 규칙 `r2` 만 적용됩니다.

## 정규화를 관리합니다 [#manage-rules]

<DNT>**Metric normalization rules**</DNT> 페이지를 사용하여 엔티티에 대한 새로운 메트릭 정규화 규칙을 생성하고 관리할 수 있습니다.

<CollapserGroup>
  <Collapser id="access-rules" title="보기 정규화 규칙">
    <DNT>**Metric normalization rules**</DNT> 페이지를 보려면 <DNT>[https://one.newrelic.com](https://one.newrelic.com) &gt; **All Entities**</DNT> &gt; 엔티티 선택 &gt; <DNT>**Settings** &gt; **Metric normalization** </DNT>로 이동하세요.

    <img title="View details" alt="View MGI details" src="/images/Access_metric_rules.webp" />
  </Collapser>

  <Collapser id="create-metric-normalization-rule" title="메트릭 정규화 규칙을 생성합니다.">
    정규화 규칙을 생성하려면 다음 단계를 따르세요.

    1. <DNT>**Metric normalization rules**</DNT> 페이지에서 **+ Create a new rule** \[+ 새 규칙 만들기]를 클릭합니다.
    2. 다음 정보를 제공해 주십시오:

    <table>
      <thead>
        <tr>
          <th>
            들
          </th>

          <th>
            설명
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            **시간 범위**
          </td>

          <td>
            규칙에 필요한 시간 범위를 드롭다운 메뉴에서 선택하세요.
          </td>
        </tr>

        <tr>
          <td>
            **정규 표현식**
          </td>

          <td>
            정규화할 메트릭과 일치하는 

            [정규 표현식](https://regexone.com/)

             패턴을 입력하십시오. 이 필드는 

            `^`

             으로 시작하고 

            `$`

             로 끝나야 합니다. 이는 어떤 부분이 정규화 규칙의 영향을 받아야 하는지를 식별하는 패턴을 정의합니다. 예를 들면: 

            `^WebTransaction/Uri/RESTfulExample/users/username/[a-zA-Z0-9]+$`

             패턴 

            `^[a-zA-Z0-9]+$`

             은 소문자 

            `(a-z)`

            , 대문자 

            `(A-Z)`

            , 숫자 

            `(0-9)`

             로 구성된 모든 문자열과 일치합니다.
          </td>
        </tr>

        <tr>
          <td>
            **정규 표현식 일치**
          </td>

          <td>
            **Regular expression**

             \[정규 표현식] 필드와 일치하는 메트릭을 미리 봅니다.
          </td>
        </tr>

        <tr>
          <td>
            **성냥개비들을 어떻게 하실 건가요?**
          </td>

          <td>
            **Regular expression** \[정규 표현식] 필드와 일치하는 메트릭에 대해 수행할 작업을 다음 중 하나로 선택하십시오.

            * **바꾸기**: 일치하는 부분을 <DNT>Replacement</DNT> 필드의 값으로 바꿉니다.
            * **무시**: 일치하는 지표가 뉴렐릭 플랫폼에 보고되지 않도록 차단합니다.
            * **새로운 참조 이름 무시**: 기존 참조 이름은 계속 보고되도록 허용하면서 새로운 참조 이름 생성을 방지합니다.
          </td>
        </tr>

        <tr>
          <td>
            **바꿔 놓음**
          </td>

          <td>
            &apos;교체&apos; 필드는 이전 필드에서 

            **Replace**

             \[교체] 옵션을 선택한 경우에만 필수 입력 사항입니다. 

            **Regular expression**

             \[정규 표현식] 필드에 정의된 일치하는 메트릭을 대체할 대체 메트릭을 입력하십시오.
          </td>
        </tr>

        <tr>
          <td>
            **규칙의 순서**
          </td>

          <td>
            다른 규칙들과의 상대적인 적용 순서를 지정하십시오. 숫자가 낮을수록 평가 우선순위가 높습니다. 권장 값은 다음과 같습니다. 

            `2000`
          </td>
        </tr>

        <tr>
          <td>
            **끝내다**
          </td>

          <td>
            이 옵션을 활성화하면, 이 규칙이 기존 규칙과 성공적으로 일치한 후에는 해당 규칙에 추가 규칙이 적용되지 않습니다.
          </td>
        </tr>

        <tr>
          <td>
            **활동적인**
          </td>

          <td>
            이 스위치를 사용하여 규칙을 활성화 또는 비활성화할 수 있습니다.
          </td>
        </tr>

        <tr>
          <td>
            **Notes**
          </td>

          <td>
            규칙에 대한 참고 사항입니다.
          </td>
        </tr>
      </tbody>
    </table>

    3. **저장** 을 클릭합니다.
  </Collapser>

  <Collapser id="update-metric-normalization-rule" title="메트릭 정규화 규칙을 업데이트합니다.">
    ### 메트릭 정규화 규칙을 업데이트합니다. [#update-rule]

    1. <DNT>**Metric normalization rules**</DNT> 페이지에서 규칙을 선택하고 클릭하세요. <Icon name="fe-more-horizontal" /> 아이콘을 클릭한 다음 **Edit** \[편집]을 선택하세요.
    2. 필요한 정보를 업데이트하세요.
    3. **저장** 을 클릭합니다.
  </Collapser>
</CollapserGroup>

## 메트릭 정규화 규칙을 비활성화합니다. [#disable-rule]

정규화 규칙은 삭제할 수 없지만 비활성화할 수는 있습니다. 비활성화된 규칙은 뉴렐릭에 대한 어떤 보고에도 영향을 미치지 않습니다. `Denied rate (minute)` 이 1000의 `resolution rate (minute)` 미만일 경우 **MGI details** \[MGI 세부 정보] 페이지에서 `DENY_NEW_METRICS` 규칙을 비활성화할 수 있습니다.

규칙을 비활성화하려면:

1. <DNT>**Metric normalization rules**</DNT> 페이지에서 필요한 규칙을 선택하고 클릭하세요. <Icon name="fe-more-horizontal" /> 아이콘을 클릭한 다음 **MGI details** \[MGI 세부 정보]를 클릭하세요.
2. **Deactivate** \[비활성화]를 클릭하세요.

<img title="View details" alt="View MGI details" src="/images/metric-details.webp" />

## MGI 상세 정보 페이지 [#mgi-details]

**<DNT>MGI details</DNT>** 페이지는 귀하의에 적용되는 정규화 규칙에 대한 포괄적인 개요를 제공합니다. 이를 통해 지표 데이터에 대한 이러한 규칙의 영향을 분석하고 높은 카디널리티 지수 관리에 대해 정보에 입각한 결정을 내릴 수 있습니다.

**MGI details** \[MGI 상세 정보] 페이지에서는 다음과 같은 정보를 확인할 수 있습니다.

* **Blocked Metrics Overview \[차단된 개요]**: `DENY_NEW_METRICS` 규칙의 영향을 받는 수와가 차단되는 비율을 표시합니다. `REPLACE` 및 `IGNORE` 작업에 대해서도 유사한 인사이트를 얻을 수 있습니다.
* **Time Picker Functionality** \[타임 피커 기능]: 규칙 활성화 전 지표 접두사별로 분류된 지표 보고를 볼 수 있습니다. 이 기능은 지표 성장의 근원을 파악하는 데 도움이 됩니다.
* **NRQL Query Integration \[NRQL 쿼리 통합]**: 규칙이 적용되기 직전의 메트릭 폭발을 보여주는 NRQL 쿼리를 볼 수 있는 &apos;쿼리 빌더에서 보기&apos; 버튼을 제공합니다. 이는 목표 점수 타임슬라이스 데이터로, 최대 3개월까지 회고적 분석이 가능합니다.
* **Metric Pattern Identification \[패턴 식별]**: 급증하는 패턴을 식별하고 이를 효과적으로 관리하기 위한 새로운 정규식 규칙을 생성할 수 있습니다.
* **Real-Time Status Indicators \[실시간 상태 표시기]**: 정규화 규칙의 현재 상태를 보여주는 위젯이 포함되어 있으며, 규칙이 성장률을 관리함에 따라 표시기가 &apos;활성&apos;에서 &apos;완화됨&apos;으로 변경됩니다.
* **Rule Modification Capability \[규칙 수정 기능]**: 사용자가 MGI 세부 정보 페이지에서 직접 자신의 `DENY_NEW_METRICS` 규칙을 비활성화할 수 있을 뿐만 아니라 지원 티켓 없이 `REPLACE` 및 `IGNORE` 규칙을 수정할 수 있습니다. 자세한 내용은 [규칙 비활성화를](#disable-rule) 참조하세요.

### MGI 상세 정보 페이지에 접속하세요 [#access-mgi]

<DNT>**Metric normalization rules**</DNT> 페이지에서 규칙을 선택하고 클릭하세요. <Icon name="fe-more-horizontal" /> 아이콘을 클릭한 다음 **MGI details** \[MGI 세부 정보]를 선택하세요.

<img title="View details" alt="View MGI details" src="/images/metric-details.webp" />

### 예시 사용 사례 [#example-use-case]

위 예시에서 MGI 세부 정보 페이지에는 110만 개의 고유한 이름이 `DENY_NEW_METRICS` 규칙에 의해 분당 738의 속도로 차단되었다고 표시됩니다. 이러한 성장의 대부분은 지우스페이스 `WebTransaction/Uri/RESTfulExample/users/username/` 의 트레이스입니다. NRQL 쿼리를 확인하면 급증의 원인을 정확히 파악할 수 있으므로, 이를 바탕으로 메트릭을 효과적으로 관리하는 새로운 규칙을 만들 수 있습니다.