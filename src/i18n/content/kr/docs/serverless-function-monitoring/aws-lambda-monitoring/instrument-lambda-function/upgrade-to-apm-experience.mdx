---
title: APM 환경으로 업그레이드하세요
metaDescription: Learn how to upgrade your Lambda monitoring to the New Relic APM experience.
freshnessValidatedDate: never
translationType: machine
---

기존 Lambda 함수를 최소한의 노력으로 새로운 통합 모니터링 환경으로 업그레이드할 수 있습니다. 이 전환을 통해 뉴렐릭의 향상된 옵션저버빌리티 기능으로 Lambda 함수를 모니터링할 수 있습니다. 기존의 모든 Lambda 함수를 일괄적으로 업그레이드하거나, 하나씩 업그레이드할 수 있습니다. 업그레이드 과정은 기존 기능에 영향을 주지 않으며 코드 변경도 필요하지 않습니다.

**전제 조건**

* 귀하의 Lambda 함수는 이미 뉴렐릭에 출력되었습니다.
* Lambda 함수는 `python`, `nodejs`, `ruby`, `go` 또는 `.NET` 런타임에서 실행됩니다. 지원되는 런타임 버전 목록을 보려면 [호환성 및 요구 사항 문서를](/docs/serverless-function-monitoring/aws-lambda-monitoring/instrument-lambda-function/compatibility-requirement-lambda-monitoring/) 참조하십시오.

## 계측 방법

기존 Lambda 함수를 업그레이드하려면 다음 방법 중 하나를 사용할 수 있습니다.

* [New Relic UI](#ui)
* [CLI를 사용하여 업데이트](#cli)

<Callout variant="tip">
  뉴렐릭은 [AWS 통합을](/docs/infrastructure/amazon-integrations/get-started/introduction-aws-integrations/) 사용하여AWS 계정을 뉴렐릭과 통합하여 Lambda 함수를 자동으로 검색하고 모니터링할 것을 권장합니다. 이를 통해 서버리스 기능에 뉴렐릭 APM 의 모든 기능을 활용할 수 있습니다.
</Callout>

#### New Relic UI [#ui]

뉴렐릭 UI 사용하여 기존 Lambda 함수를 업그레이드할 수 있습니다.

**뉴렐릭 플랫폼에서 기존 Lambda 함수를 업그레이드하려면 다음 단계를 따르세요.**

1. [one.newrelic.com &gt; All capabilities &gt; Serverless Functions](https://one.newrelic.com/nr1-core?state=23b04845-da13-2b11-5826-9c20326276d9) にアクセスし、Lambda 関数エンティティを選択してください。
2. Summary \[요약] 페이지에서 **Instrument for APM** \[APM에 대한 계측하다]를 클릭하세요.
3. APM용 Lambda 함수 페이지에서 API 키를 입력한 다음 **Continue** \[계속]을 클릭합니다.
4. 기본적으로 현재 Lambda 엔티티가 업그레이드 대상으로 선택됩니다. 업그레이드할 다른 Lambda 함수도 선택할 수 있습니다. **Generate New Relic CLI command** \[뉴렐릭 CLI 명령 생성]을 클릭하세요.
5. 명령어를 복사하여 터미널 또는 AWS 터미널에서 실행하세요. 이 명령은 선택한 함수에 뉴럴릭 Lambda 레이어를 설치합니다.
6. 설치를 테스트하려면 **Continue** \[계속] 을 클릭하십시오. 이 테스트는 뉴렐릭 Lambda 레이어가 올바르게 설치되었는지, 그리고 함수가 뉴렐릭으로 데이터를 전송하는지 여부를 확인합니다.
7. 테스트가 성공하면 성공 메시지가 표시됩니다. 뉴렐릭 APM 인터페이스에서 Lambda 함수를 보려면 **See your data in APM \[APM에서 데이터 보기]를** 클릭하세요.

#### CLI를 사용하여 업데이트 [#cli]

<CollapserGroup>
  <Collapser id="nr-cli" title="뉴렐릭 CLI">
    <Callout variant="important">
      뉴렐릭 CLI 버전이 `0.9.8` 이상인지 확인하십시오. `newrelic-lambda --version` 실행하여 CLI 버전을 확인할 수 있습니다. CLI를 업데이트해야 하는 경우 CLI를 업데이트하십시오. 예를 들어, `pip3` 사용하여 CLI를 설치한 경우 다음 명령으로 업데이트할 수 있습니다.

      ```bash
          pip3 install --upgrade newrelic-lambda
      ```
    </Callout>

    1. Lambda 함수를 업그레이드하려면 여기에 표시된 대로 `newrelic-lambda` CLI 퀵스타트를 사용하세요.

       ```bash
       newrelic-lambda layers install --nr-account-id YOUR_NEW_RELIC_ACCOUNT_ID --function my-function --upgrade --apm
       ```

       <Callout variant="tip">
         이 명령은 Lambda의 리전 및 런타임에 대해 사용 가능한 최신 계층을 자동으로 찾습니다.
       </Callout>

    2. 기존 Lambda 함수의 알림을 APM으로 마이그레이션하려면 다음 명령을 실행하세요.

       ```bash
       newrelic-lambda apm alerts-migrate \
           --nr-account-id <YOUR_NEW_RELIC_ACCOUNT_ID> \
           --nr-api-key <YOUR_NEW_RELIC_API_KEY>
           --function <YOUR_LAMBDA_FUNCTION_NAME>
       ```
  </Collapser>

  <Collapser id="cdk" title="AWS CDK, AWS SAM 또는 Terraform의 경우">
    1. [AWS CDK](/docs/serverless-function-monitoring/aws-lambda-monitoring/instrument-lambda-function/instrument-your-own/#cdk), [AWS SAM](/docs/serverless-function-monitoring/aws-lambda-monitoring/instrument-lambda-function/instrument-your-own/#cloudformation) 또는 [Terraform을](/docs/serverless-function-monitoring/aws-lambda-monitoring/instrument-lambda-function/instrument-your-own/#terraform) 사용하여 프로젝트의 [최신 뉴럴릭 레이어 Lambda 로](https://layers.newrelic-external.com/) 업데이트하세요.
    2. Lambda 함수 구성에서 [환경 변수](/docs/serverless-function-monitoring/aws-lambda-monitoring/instrument-lambda-function/env-variables-lambda/) `NEW_RELIC_APM_LAMBDA_MODE` 을 `true` 로 설정하세요. 이를 통해 뉴렐릭 Lambda 레이어에 대한 APM 모드가 활성화됩니다.
    3. 업데이트된 설정으로 Lambda 함수를 구현하고 배포합니다.
    4. <DNT>AWS Management Console</DNT> 의 <DNT>Configuration</DNT> 탭에서 Lambda 함수에 `NR.Apm.Lambda.Mode: true` 태그를 추가하세요.
    5. CloudWatch 태그를 동기화하기 위해 [AWS 클라우드 통합](/docs/infrastructure/amazon-integrations/get-started/introduction-aws-integrations/) (메트릭 스트림 또는 API 폴링)을 사용하지 않는 경우 `NR_TAGS` 환경 변수를 `NR.Apm.Lambda.Mode:true` 로 설정합니다. 이를 통해 뉴겔릭 Lambda 확장 프로그램이 필요한 메타데이터를 뉴겔릭으로 직접 보낼 수 있습니다.
  </Collapser>
</CollapserGroup>

## 기존 Lambda 알림 및 대시보드를 업데이트합니다. [#alerts-dashboards]

기존 Lambda 함수를 `APM + Serverless Convergence` 으로 업그레이드한 후에는 공지 조건 및 대시보드 설명에서 NRQL 쿼리를 업데이트하는 것이 중요합니다. 이번 업그레이드를 통해 Lambda 데이터의 메트릭 경로가 변경됩니다. 알림 및 대시보드가 이러한 새로운 경로를 사용하고 정확한 모델링 및 공지를 계속 제공하려면 쿼리를 수정해야 합니다. 이는 `APM + Serverless Convergence` 로 전환한 기존 Lambda 함수에 필요합니다.

* 알림을 받으려면 기존 Lambda 공지 조건을 검토하세요. 레이어에서 가져온 메트릭을 사용하는 모든 NRQL 쿼리를 새 메트릭으로 업데이트하십시오. 공지 조건을 업데이트하는 방법에 대한 자세한 내용은 [공지 업데이트 를](https://docs.newrelic.com/docs/alerts/create-alert/create-alert-condition/alert-conditions/#edit-existing-alert-condition) 참조하십시오.

* 대시보드의 경우 기존 Lambda 대시보드를 검토하세요. 레이어에서 가져온 메트릭을 사용하는 모든 NRQL 쿼리를 새 메트릭으로 업데이트하십시오. 대시보드 위젯 업데이트 방법에 대한 자세한 내용은 [대시보드 관리 페이지를](https://docs.newrelic.com/docs/query-your-data/explore-query-data/dashboards/manage-your-dashboard/) 참조하세요.

## 데이터 찾기 및 사용 [#find-data]

AWS Lambda 함수를 로그아웃한 후 뉴렐릭 APM 인터페이스에서 데이터를 찾아 사용할 수 있습니다. 데이터는 여러 주요 영역으로 구성되며, 각 영역은 Lambda 함수의 성능과 상태에 대한 다양한 정보를 제공합니다.

APM 인터페이스에서는 [분산 추적](/docs/distributed-tracing/concepts/introduction-distributed-tracing/), [서비스 맵](/docs/new-relic-solutions/new-relic-one/ui-data/service-maps/service-maps/), [트랜잭션](/docs/apm/transactions/intro-transactions/transactions-new-relic-apm/), [오류 분석](/docs/errors-inbox/getting-started/) 등 Lambda 함수의 다양한 측면을 살펴볼 수 있습니다. 이러한 각 영역에서는 Lambda 함수의 성능, 지연 시간 및 오류율에 대한 자세한 정보를 제공하므로 문제를 신속하게 식별하고 해결할 수 있습니다.

<Callout variant="tip">
  이제 호출 환경이 APM 프로세서 트레이스와 통합되었습니다. 이를 통해 특정 `AWS RequestId` 사용하여 APM 트레이스를 드릴다운하여 특정 Lambda 실행에 대한 자세한 정보를 얻을 수 있습니다.
</Callout>

뉴렐릭 APM 인터페이스에서 Lambda 함수를 보려면:

1. <DNT>[https://one.newrelic.com](https://one.newrelic.com) &gt; APM &amp; Services</DNT> 으)로 이동합니다.
2. 검색 기준을 `isLambdaFunction = true` 으로 설정합니다.
3. 표시된 목록에서 Lambda 함수를 선택하여 데이터를 확인하세요.

<Callout variant="tip">
  뉴렐릭 APM UI `APM + Serverless Convergence` 업그레이드 이전에 변환된 Lambda 함수에 대한 이력 데이터를 표시하지 않습니다. 병력 데이터를 보려면 <DNT>APM Summary</DNT> 페이지에서 **see serverless functions** \[서버리스 기능 보기] 옵션을 클릭하십시오.
</Callout>

### 롤백 [#rollback]

Lambda 함수를 이전 서버리스 모니터링 환경으로 되돌리려면 `NEW_RELIC_APM_LAMBDA_MODE` 환경 변수를 `false` 로 설정하면 됩니다.

## 관련 기사 [#related-docs]

<DocTiles>
  <DocTile title="호환성 및 요구 사항" path="/docs/serverless-function-monitoring/aws-lambda-monitoring/instrument-lambda-function/compatibility-requirement-lambda-monitoring">
    지원되는 런타임 및 필수 구성 요소에 대해 자세히 알아보세요.
  </DocTile>

  <DocTile title="문제점 해결" path="/docs/serverless-function-monitoring/aws-lambda-monitoring/troubleshooting/troubleshoot-enabling-serverless-monitoring-aws-lambda">
    설치 관련 문제를 해결하는 방법을 알아보세요
  </DocTile>
</DocTiles>