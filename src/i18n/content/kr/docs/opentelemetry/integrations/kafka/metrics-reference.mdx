---
title: OpenTelemetry Kafka 메트릭 참조
tags:
  - Integrations
  - OpenTelemetry
  - Kafka
  - Metrics
metaDescription: 'Complete reference for Kafka metrics collected via OpenTelemetry including Kafka metrics receiver, JMX receiver, and client metrics.'
freshnessValidatedDate: never
translationType: machine
---

이 페이지에는 OpenTelemetry 사용하여 프레임 아파치 Kafka를 수집했을 때 수집된 지표가 기록되어 있습니다. 지표는 [Kafka 지표 수신기](https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/kafkametricsreceiver), [JMX 수신기](https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/jmxreceiver) 및 클라이언트측 지표용 [OpenTelemetry 지표 지표를](https://opentelemetry.io/docs/languages/java/automatic/) 통해 수집됩니다.

## 지표 수집 방법 [#collection-methods]

OpenTelemetry Kafka 모니터링은 두 가지 상호 보완적인 수신기를 사용합니다.

* **[Kafka 메트릭 수신기](https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/kafkametricsreceiver)**: Kafka의 부트스트랩 포트에 연결하여 클러스터, 토픽, 파티션 및 소비자 그룹 메트릭을 수집합니다.
* **[JMX 수신기](https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/jmxreceiver)**: JMX 포트(일반적으로 9999)에 연결하여 브로커 및 JVM 에 대한 자세한 정보를 수집합니다.

## Kafka 메트릭 수신자 메트릭 [#kafka-metrics-receiver]

이러한 메트릭은 Kafka 프로토콜(부트스트랩 포트)을 사용하여 Kafka 브로커에서 수집됩니다. [kafkametricsreceiver 메타데이터를](https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/receiver/kafkametricsreceiver/metadata.yaml) 기반으로 하며 일부 지표는 기본적으로 또는 일반 설정에서 비활성화되어 있습니다.

<CollapserGroup>
  <Collapser id="cluster-metrics" title="클러스터 메트릭">
    <table>
      <thead>
        <tr>
          <th style={{ width: "300px" }}>
            측정항목 이름
          </th>

          <th>
            설명
          </th>

          <th>
            유형
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `kafka.brokers`
          </td>

          <td>
            클러스터 내 브로커의 총 개수
          </td>

          <td>
            게이지(int)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="topic-metrics" title="주제 지표">
    <table>
      <thead>
        <tr>
          <th style={{ width: "300px" }}>
            측정항목 이름
          </th>

          <th>
            설명
          </th>

          <th>
            유형
          </th>

          <th>
            속성
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `kafka.topic.partitions`
          </td>

          <td>
            토픽의 파티션 수
          </td>

          <td>
            합계(정수)
          </td>

          <td>
            주제
          </td>
        </tr>

        <tr>
          <td>
            `kafka.topic.min_insync_replicas`
          </td>

          <td>
            토픽의 최소 동기화 복제본 수
          </td>

          <td>
            게이지(int)
          </td>

          <td>
            주제
          </td>
        </tr>

        <tr>
          <td>
            `kafka.topic.replication_factor`
          </td>

          <td>
            토픽의 복제 인자
          </td>

          <td>
            게이지(int)
          </td>

          <td>
            주제
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="partition-metrics" title="파티션 메트릭">
    <table>
      <thead>
        <tr>
          <th style={{ width: "300px" }}>
            측정항목 이름
          </th>

          <th>
            설명
          </th>

          <th>
            유형
          </th>

          <th>
            속성
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `kafka.partition.replicas_in_sync`
          </td>

          <td>
            파티션에 대한 동기화된 복제본 수
          </td>

          <td>
            합계(정수)
          </td>

          <td>
            주제, 파티션
          </td>
        </tr>

        <tr>
          <td>
            `kafka.partition.replicas_in_sync.total`
          </td>

          <td>
            토픽에 대해 모든 파티션에 걸쳐 집계된 동기화된 복제본의 총 개수
          </td>

          <td>
            합계(정수)
          </td>

          <td>
            주제
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="consumer-group-metrics" title="소비자단체 기준">
    <table>
      <thead>
        <tr>
          <th style={{ width: "300px" }}>
            측정항목 이름
          </th>

          <th>
            설명
          </th>

          <th>
            유형
          </th>

          <th>
            속성
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `kafka.consumer_group.members`
          </td>

          <td>
            소비자 그룹의 구성원 수
          </td>

          <td>
            합계(정수)
          </td>

          <td>
            그룹
          </td>
        </tr>

        <tr>
          <td>
            `kafka.consumer_group.offset`
          </td>

          <td>
            토픽 분할 시 소비자 그룹의 현재 오프셋
          </td>

          <td>
            게이지(int)
          </td>

          <td>
            그룹, 토픽, 파티션
          </td>
        </tr>

        <tr>
          <td>
            `kafka.consumer_group.offset_sum`
          </td>

          <td>
            토픽의 파티션별 소비자 그룹 오프셋 합계
          </td>

          <td>
            게이지(int)
          </td>

          <td>
            그룹, 주제
          </td>
        </tr>

        <tr>
          <td>
            `kafka.consumer_group.lag`
          </td>

          <td>
            주제 분할 시 소비자 그룹의 현재 대략적인 지연
          </td>

          <td>
            게이지(int)
          </td>

          <td>
            그룹, 토픽, 파티션
          </td>
        </tr>

        <tr>
          <td>
            `kafka.consumer_group.lag_sum`
          </td>

          <td>
            토픽의 모든 파티션에 걸친 소비자 그룹 지연의 현재 대략적인 합계
          </td>

          <td>
            게이지(int)
          </td>

          <td>
            그룹, 주제
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

## JMX 수신기 메트릭 [#jmx-metrics]

JMX 수신기는 JMX(일반적으로 포트 9999)를 통해 Kafka 브로커 MBean에서 자세한 메트릭을 수집합니다. 지표는 두 가지 설정을 사용하여 수집됩니다.

1. **기본 Kafka 묶어, 목표 시스템** - `target_system: kafka` 의 내장 Kafka 관련 지표 ([kafka.yaml](https://github.com/open-telemetry/opentelemetry-java-contrib/blob/main/jmx-scraper/src/main/resources/kafka.yaml))
2. **사용자 정의 JMX 지표** - 사용자 정의 설정에 정의된 추가 Kafka 지표 및 JVM 지표

### Default Kafka 피규어, 목표 시스템 순위

이러한 데이터는 `target_system: kafka` 사용할 때 자동으로 수집됩니다.

<CollapserGroup>
  <Collapser id="jmx-cluster-metrics" title="클러스터 수준의 지표">
    이러한 메트릭은 컨트롤러 브로커에서 수집되며 클러스터 전체에 대한 정보를 제공합니다.

    <table>
      <thead>
        <tr>
          <th style={{ width: "350px" }}>
            측정항목 이름
          </th>

          <th>
            설명
          </th>

          <th>
            유형
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `kafka.partition.offline`
          </td>

          <td>
            클러스터에서 오프라인 상태인 파티션 수
          </td>

          <td>
            계량기
          </td>
        </tr>

        <tr>
          <td>
            `kafka.leader.election.rate`
          </td>

          <td>
            지도자 선거 집계
          </td>

          <td>
            카운터
          </td>
        </tr>

        <tr>
          <td>
            `kafka.unclean.election.rate`
          </td>

          <td>
            부정선거로 인한 지도자 선출 건수 증가 추세는 브로커 실패를 나타냅니다.
          </td>

          <td>
            카운터
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="jmx-broker-metrics" title="브로커 지표">
    <table>
      <thead>
        <tr>
          <th style={{ width: "350px" }}>
            측정항목 이름
          </th>

          <th>
            설명
          </th>

          <th>
            유형
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `kafka.message.count`
          </td>

          <td>
            브로커가 수신한 메시지 수
          </td>

          <td>
            카운터
          </td>
        </tr>

        <tr>
          <td>
            `kafka.request.count`
          </td>

          <td>
            브로커가 수신한 requests 수
          </td>

          <td>
            카운터
          </td>
        </tr>

        <tr>
          <td>
            `kafka.request.failed`
          </td>

          <td>
            실패한 requests수
          </td>

          <td>
            카운터
          </td>
        </tr>

        <tr>
          <td>
            `kafka.request.time.total`
          </td>

          <td>
            requests 처리에 소요된 총 시간(밀리초)
          </td>

          <td>
            카운터
          </td>
        </tr>

        <tr>
          <td>
            `kafka.request.time.avg`
          </td>

          <td>
            평균 요청 처리 시간(밀리초)
          </td>

          <td>
            계량기
          </td>
        </tr>

        <tr>
          <td>
            `kafka.request.time.50p`
          </td>

          <td>
            50번째 백분위수 요청 시간(밀리초)
          </td>

          <td>
            계량기
          </td>
        </tr>

        <tr>
          <td>
            `kafka.request.time.99p`
          </td>

          <td>
            99번째 백분위수 요청 시간(밀리초)
          </td>

          <td>
            계량기
          </td>
        </tr>

        <tr>
          <td>
            `kafka.network.io`
          </td>

          <td>
            브로커가 초당 수신 또는 전송한 바이트 수(방향 속성: 수신/송신 포함)
          </td>

          <td>
            카운터
          </td>
        </tr>

        <tr>
          <td>
            `kafka.purgatory.size`
          </td>

          <td>
            처리 대기 중인 requests 수 (생산 및 가져오기 작업)
          </td>

          <td>
            계량기
          </td>
        </tr>

        <tr>
          <td>
            `kafka.partition.count`
          </td>

          <td>
            브로커의 파티션 수
          </td>

          <td>
            계량기
          </td>
        </tr>

        <tr>
          <td>
            `kafka.partition.under_replicated`
          </td>

          <td>
            이 브로커에서 복제가 덜 된 파티션의 수
          </td>

          <td>
            계량기
          </td>
        </tr>

        <tr>
          <td>
            `kafka.isr.operation.count`
          </td>

          <td>
            동기화된 복제본 작업(축소 또는 확장)
          </td>

          <td>
            카운터
          </td>
        </tr>

        <tr>
          <td>
            `kafka.lag.max`
          </td>

          <td>
            팔로워와 리더 복제본 간의 최대 지연 시간
          </td>

          <td>
            계량기
          </td>
        </tr>

        <tr>
          <td>
            `kafka.controller.active.count`
          </td>

          <td>
            이 브로커가 활성 컨트롤러인지 여부(0 또는 1)
          </td>

          <td>
            계량기
          </td>
        </tr>

        <tr>
          <td>
            `kafka.logs.flush.count`
          </td>

          <td>
            로그 플러시 횟수
          </td>

          <td>
            카운터
          </td>
        </tr>

        <tr>
          <td>
            `kafka.logs.flush.time.50p`
          </td>

          <td>
            로그 플러시 시간 - 50번째 백분위수(ms)
          </td>

          <td>
            계량기
          </td>
        </tr>

        <tr>
          <td>
            `kafka.logs.flush.time.99p`
          </td>

          <td>
            로그 플러시 시간 - 99번째 백분위수(ms)
          </td>

          <td>
            계량기
          </td>
        </tr>
      </tbody>
    </table>

    **속성:** 많은 범위에는 요청 유형(예: fetch, produce)을 나타내는 `type` 속성, ISR 작업(예: shrink, expand)을 나타내는 `state` 속성, 또는 네트워크 I/O (in, out)를 나타내는 `direction` 속성이 포함됩니다.
  </Collapser>
</CollapserGroup>

### 사용자 지정 JMX 메트릭

사용자 지정 JMX 구성 파일을 사용하는 경우( [자체 호스팅 설정](/docs/opentelemetry/integrations/kafka/self-hosted#jmx-config) 에서처럼) 이러한 추가 Kafka 메트릭 및 JVM 메트릭이 수집됩니다. 사용자 지정 구성을 사용하면 기본 설정 외에 추가적인 Kafka 관련 메트릭과 JVM 상태 메트릭을 수집할 수 있습니다.

<CollapserGroup>
  <Collapser id="jmx-cluster-level-metrics" title="클러스터 수준의 지표">
    <table>
      <thead>
        <tr>
          <th style={{ width: "350px" }}>
            측정항목 이름
          </th>

          <th>
            설명
          </th>

          <th>
            유형
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `kafka.cluster.topic.count`
          </td>

          <td>
            클러스터에 있는 전체 토픽 수
          </td>

          <td>
            계량기
          </td>
        </tr>

        <tr>
          <td>
            `kafka.cluster.partition.count`
          </td>

          <td>
            클러스터의 전체 파티션 수
          </td>

          <td>
            계량기
          </td>
        </tr>

        <tr>
          <td>
            `kafka.broker.fenced.count`
          </td>

          <td>
            클러스터 내 울타리형 브로커의 수
          </td>

          <td>
            계량기
          </td>
        </tr>

        <tr>
          <td>
            `kafka.partition.non_preferred_leader`
          </td>

          <td>
            리더가 선호 리더가 아닌 토픽 파티션의 수
          </td>

          <td>
            계량기
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="jmx-broker-specific-metrics" title="브로커별 지표">
    <table>
      <thead>
        <tr>
          <th style={{ width: "350px" }}>
            측정항목 이름
          </th>

          <th>
            설명
          </th>

          <th>
            유형
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `kafka.partition.under_min_isr`
          </td>

          <td>
            동기화된 복제본 수가 최소값보다 적은 파티션 수
          </td>

          <td>
            계량기
          </td>
        </tr>

        <tr>
          <td>
            `kafka.broker.uptime`
          </td>

          <td>
            브로커 업타임(ms)
          </td>

          <td>
            계량기
          </td>
        </tr>

        <tr>
          <td>
            `kafka.broker.leader.count`
          </td>

          <td>
            이 브로커가 리더인 파티션 수
          </td>

          <td>
            계량기
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="jmx-per-topic-metrics" title="주제별 지표">
    <table>
      <thead>
        <tr>
          <th style={{ width: "350px" }}>
            측정항목 이름
          </th>

          <th>
            설명
          </th>

          <th>
            유형
          </th>

          <th>
            속성
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `kafka.prod.msg.count`
          </td>

          <td>
            주제별 수신 메시지 수
          </td>

          <td>
            카운터
          </td>

          <td>
            주제
          </td>
        </tr>

        <tr>
          <td>
            `kafka.topic.io`
          </td>

          <td>
            토픽별 수신 또는 전송된 바이트 수
          </td>

          <td>
            카운터
          </td>

          <td>
            주제, 방향(안쪽/바깥쪽)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="jmx-jvm-metrics" title="JVM 메트릭">
    <table>
      <thead>
        <tr>
          <th style={{ width: "350px" }}>
            측정항목 이름
          </th>

          <th>
            설명
          </th>

          <th>
            유형
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `jvm.memory.heap.used`
          </td>

          <td>
            현재 힙 메모리 사용량(바이트)
          </td>

          <td>
            계량기
          </td>
        </tr>

        <tr>
          <td>
            `jvm.memory.heap.max`
          </td>

          <td>
            최대 힙 메모리 사용 가능량(바이트)
          </td>

          <td>
            계량기
          </td>
        </tr>

        <tr>
          <td>
            `jvm.memory.heap.committed`
          </td>

          <td>
            커밋된 힙 메모리(바이트)
          </td>

          <td>
            계량기
          </td>
        </tr>

        <tr>
          <td>
            `jvm.gc.collections.count`
          </td>

          <td>
            지금까지 발생한 가비지 컬렉션의 총 횟수
          </td>

          <td>
            카운터
          </td>
        </tr>

        <tr>
          <td>
            `jvm.gc.collections.elapsed`
          </td>

          <td>
            대략적인 누적 수집 소요 시간(밀리초)
          </td>

          <td>
            카운터
          </td>
        </tr>

        <tr>
          <td>
            `jvm.thread.count`
          </td>

          <td>
            총 실 가닥 수 (카프카의 일반적인 범위는 100~300개입니다)
          </td>

          <td>
            계량기
          </td>
        </tr>

        <tr>
          <td>
            `jvm.system.cpu.load_1m`
          </td>

          <td>
            시스템 부하 평균(1분) - CPU 개수보다 크면 변경됩니다.
          </td>

          <td>
            계량기
          </td>
        </tr>

        <tr>
          <td>
            `jvm.cpu.count`
          </td>

          <td>
            사용 가능한 프로세서 수
          </td>

          <td>
            계량기
          </td>
        </tr>

        <tr>
          <td>
            `jvm.cpu.recent_utilization`
          </td>

          <td>
            최근 JVM 프로세스의 CPU 사용률(0.0~1.0)
          </td>

          <td>
            계량기
          </td>
        </tr>

        <tr>
          <td>
            `jvm.system.cpu.utilization`
          </td>

          <td>
            최근 전체 시스템 CPU 사용률 (0.0~1.0)
          </td>

          <td>
            계량기
          </td>
        </tr>

        <tr>
          <td>
            `jvm.file_descriptor.count`
          </td>

          <td>
            열려 있는 파일 디스크립터 수 - ulimit의 80%보다 크면 변경
          </td>

          <td>
            계량기
          </td>
        </tr>

        <tr>
          <td>
            `jvm.class.count`
          </td>

          <td>
            현재 로드된 클래스 수
          </td>

          <td>
            계량기
          </td>
        </tr>

        <tr>
          <td>
            `jvm.memory.pool.used`
          </td>

          <td>
            세대별(G1 Old Gen, Eden, Survivor) 메모리 풀 사용량(바이트)
          </td>

          <td>
            계량기
          </td>
        </tr>

        <tr>
          <td>
            `jvm.memory.pool.max`
          </td>

          <td>
            최대 메모리 풀 크기(바이트)
          </td>

          <td>
            계량기
          </td>
        </tr>

        <tr>
          <td>
            `jvm.memory.pool.used_after_last_gc`
          </td>

          <td>
            마지막 GC 이후에 사용된 메모리 - 유지된 메모리 기준(바이트)을 표시합니다.
          </td>

          <td>
            계량기
          </td>
        </tr>
      </tbody>
    </table>

    **속성:** JVM 지표에는 `name` (GC 수집기 이름 또는 메모리 풀 이름용)과 같은 속성이 포함됩니다.
  </Collapser>
</CollapserGroup>

## Kafka 클라이언트 지표(OpenTelemetry 저항 에이전트) [#kafka-client-metrics]

이러한 지표는 Kafka 측정, 기능이 활성화된 [OpenTelemetry 허브 에이전트를](https://opentelemetry.io/docs/languages/java/automatic/) 사용하여 Kafka 생산자 및 소비자 추출에서 수집됩니다. 이는 Kafka 브로커를 통해 클라이언트 측 가시성을 제공하고 부가적인 관점을 제공하여 브로커 측 메트릭을 보완합니다.

<CollapserGroup>
  <Collapser id="producer-metrics" title="프로듀서 지표">
    ### 연결 및 네트워크

    | 측정항목 이름                                    | 설명         | 속성              |
    | ------------------------------------------ | ---------- | --------------- |
    | `kafka.producer.connection_count`          | 활성 연결 수    | 클라이언트 ID        |
    | `kafka.producer.connection_creation_rate`  | 신규 연결 설정률  | 클라이언트 ID        |
    | `kafka.producer.connection_creation_total` | 생성된 총 연결 수 | 클라이언트 ID        |
    | `kafka.producer.connection_close_rate`     | 연결 종료율     | 클라이언트 ID        |
    | `kafka.producer.network_io_rate`           | 네트워크 운영 속도 | 클라이언트 ID        |
    | `kafka.producer.network_io_total`          | 전체 네트워크 운영 | 클라이언트 ID        |
    | `kafka.producer.outgoing_byte_rate`        | 송신 바이트 속도  | 클라이언트 ID, 노드 ID |
    | `kafka.producer.outgoing_byte_total`       | 총 송신 바이트 수 | 클라이언트 ID, 노드 ID |

    ### 요청과 응답

    | 측정항목 이름                              | 설명              | 속성              |
    | ------------------------------------ | --------------- | --------------- |
    | `kafka.producer.request_rate`        | requests 전송률    | 클라이언트 ID, 노드 ID |
    | `kafka.producer.request_total`       | 총 requests 건수   | 클라이언트 ID, 노드 ID |
    | `kafka.producer.request_size_avg`    | 평균 요청 크기        | 클라이언트 ID, 노드 ID |
    | `kafka.producer.request_size_max`    | 최대 요청 크기        | 클라이언트 ID, 노드 ID |
    | `kafka.producer.request_latency_avg` | 평균 요청 지연 시간(ms) | 클라이언트 ID, 노드 ID |
    | `kafka.producer.request_latency_max` | 최대 요청 지연시간(ms)  | 클라이언트 ID, 노드 ID |
    | `kafka.producer.response_rate`       | 응답률             | 클라이언트 ID, 노드 ID |
    | `kafka.producer.response_total`      | 총 응답 수          | 클라이언트 ID, 노드 ID |
    | `kafka.producer.requests_in_flight`  | 기내 requests건수   | 클라이언트 ID        |

    ### 기록 지표

    | 측정항목 이름                                  | 설명                          | 속성           |
    | ---------------------------------------- | --------------------------- | ------------ |
    | `kafka.producer.record_send_rate`        | 전송된 레코드 수                   | 클라이언트 ID, 토픽 |
    | `kafka.producer.record_send_total`       | 전송된 총 기록 수                  | 클라이언트 ID, 토픽 |
    | `kafka.producer.record_error_rate`       | 레코드 전송 오류율                  | 클라이언트 ID, 토픽 |
    | `kafka.producer.record_error_total`      | 총 레코드 전송 오류                 | 클라이언트 ID, 토픽 |
    | `kafka.producer.record_retry_rate`       | 레코드 재시도율                    | 클라이언트 ID, 토픽 |
    | `kafka.producer.record_retry_total`      | 총 레코드 재시도 횟수                | 클라이언트 ID, 토픽 |
    | `kafka.producer.record_size_avg`         | 평균 레코드 크기                   | 클라이언트 ID     |
    | `kafka.producer.record_size_max`         | 최대 레코드 크기                   | 클라이언트 ID     |
    | `kafka.producer.record_queue_time_avg`   | 레코드가 전송 버퍼에 머무르는 평균 시간(밀리초) | 클라이언트 ID     |
    | `kafka.producer.record_queue_time_max`   | 레코드가 전송 버퍼에 머무르는 최대 시간(밀리초) | 클라이언트 ID     |
    | `kafka.producer.records_per_request_avg` | 요청당 평균 기록 수                 | 클라이언트 ID     |

    ### 처리량 지표

    | 측정항목 이름                               | 설명          | 속성           |
    | ------------------------------------- | ----------- | ------------ |
    | `kafka.producer.byte_rate`            | 생성되는 바이트 수  | 클라이언트 ID, 토픽 |
    | `kafka.producer.byte_total`           | 생성된 총 바이트 수 | 클라이언트 ID, 토픽 |
    | `kafka.producer.compression_rate`     | 평균 압축률      | 클라이언트 ID, 토픽 |
    | `kafka.producer.compression_rate_avg` | 평균 압축비      | 클라이언트 ID     |

    ### 배치 메트릭

    | 측정항목 이름                            | 설명       | 속성       |
    | ---------------------------------- | -------- | -------- |
    | `kafka.producer.batch_size_avg`    | 평균 배치 크기 | 클라이언트 ID |
    | `kafka.producer.batch_size_max`    | 최대 배치 크기 | 클라이언트 ID |
    | `kafka.producer.batch_split_rate`  | 배치 분할 비율 | 클라이언트 ID |
    | `kafka.producer.batch_split_total` | 전체 배치 분할 | 클라이언트 ID |

    ### 버퍼 메트릭

    | 측정항목 이름                                     | 설명                    | 속성       |
    | ------------------------------------------- | --------------------- | -------- |
    | `kafka.producer.buffer_total_bytes`         | 총 버퍼 메모리              | 클라이언트 ID |
    | `kafka.producer.buffer_available_bytes`     | 사용 가능한 버퍼 메모리         | 클라이언트 ID |
    | `kafka.producer.buffer_exhausted_rate`      | 완충액 소진 속도             | 클라이언트 ID |
    | `kafka.producer.buffer_exhausted_total`     | 총 버퍼 소진               | 클라이언트 ID |
    | `kafka.producer.bufferpool_wait_ratio`      | 버퍼 공간을 기다리는 시간의 비율    | 클라이언트 ID |
    | `kafka.producer.bufferpool_wait_time_total` | 버퍼 공간을 기다리는 데 걸린 총 시간 | 클라이언트 ID |

    ### I/O 메트릭

    | 측정항목 이름                              | 설명               | 속성       |
    | ------------------------------------ | ---------------- | -------- |
    | `kafka.producer.io_ratio`            | I/O에 소요되는 시간 비율  | 클라이언트 ID |
    | `kafka.producer.io_time_ns_avg`      | 평균 I/O 시간(ns)    | 클라이언트 ID |
    | `kafka.producer.io_wait_time_ns_avg` | 평균 I/O 대기 시간(ns) | 클라이언트 ID |
    | `kafka.producer.io_wait_ratio`       | I/O 대기 시간의 비율    | 클라이언트 ID |
    | `kafka.producer.iotime_total`        | 총 I/O 시간         | 클라이언트 ID |
    | `kafka.producer.io_waittime_total`   | 총 I/O 대기 시간      | 클라이언트 ID |

    ### 제한 지표

    | 측정항목 이름                                    | 설명             | 속성       |
    | ------------------------------------------ | -------------- | -------- |
    | `kafka.producer.produce_throttle_time_avg` | 평균 스로틀 시간(밀리초) | 클라이언트 ID |
    | `kafka.producer.produce_throttle_time_max` | 최대 스로틀 시간(밀리초) | 클라이언트 ID |

    ### 인증기준

    | 측정항목 이름                                                    | 설명                | 속성       |
    | ---------------------------------------------------------- | ----------------- | -------- |
    | `kafka.producer.successful_authentication_rate`            | 인증 성공률            | 클라이언트 ID |
    | `kafka.producer.successful_authentication_total`           | 총 성공 인증 수         | 클라이언트 ID |
    | `kafka.producer.successful_authentication_no_reauth_total` | 재인증 없이 성공적인 인증    | 클라이언트 ID |
    | `kafka.producer.successful_reauthentication_rate`          | 재인증 성공률           | 클라이언트 ID |
    | `kafka.producer.successful_reauthentication_total`         | 재인증 성공 횟수 총계      | 클라이언트 ID |
    | `kafka.producer.failed_authentication_rate`                | 인증 실패율            | 클라이언트 ID |
    | `kafka.producer.failed_authentication_total`               | 인증 실패 총 횟수        | 클라이언트 ID |
    | `kafka.producer.failed_reauthentication_rate`              | 재인증 실패율           | 클라이언트 ID |
    | `kafka.producer.failed_reauthentication_total`             | 재인증 실패 총 횟수       | 클라이언트 ID |
    | `kafka.producer.reauthentication_latency_avg`              | 평균 재인증 지연 시간(밀리초) | 클라이언트 ID |
    | `kafka.producer.reauthentication_latency_max`              | 최대 재인증 지연 시간(밀리초) | 클라이언트 ID |

    ### 기타 지표

    | 측정항목 이름                          | 설명                 | 속성       |
    | -------------------------------- | ------------------ | -------- |
    | `kafka.producer.metadata_age`    | 현재 메타데이터의 경과 시간(초) | 클라이언트 ID |
    | `kafka.producer.waiting_threads` | 버퍼 공간을 기다리는 스레드 수  | 클라이언트 ID |
    | `kafka.producer.select_rate`     | 선택된 통화 요금          | 클라이언트 ID |
    | `kafka.producer.select_total`    | 총 선택 통화            | 클라이언트 ID |
  </Collapser>

  <Collapser id="consumer-metrics" title="소비자 기준">
    ### 연결 및 네트워크

    | 측정항목 이름                                    | 설명         | 속성              |
    | ------------------------------------------ | ---------- | --------------- |
    | `kafka.consumer.connection_count`          | 활성 연결 수    | 클라이언트 ID        |
    | `kafka.consumer.connection_creation_rate`  | 신규 연결 설정률  | 클라이언트 ID        |
    | `kafka.consumer.connection_creation_total` | 생성된 총 연결 수 | 클라이언트 ID        |
    | `kafka.consumer.connection_close_rate`     | 연결 종료율     | 클라이언트 ID        |
    | `kafka.consumer.connection_close_total`    | 총 연결 종료    | 클라이언트 ID        |
    | `kafka.consumer.network_io_rate`           | 네트워크 운영 속도 | 클라이언트 ID        |
    | `kafka.consumer.network_io_total`          | 전체 네트워크 운영 | 클라이언트 ID        |
    | `kafka.consumer.outgoing_byte_rate`        | 송신 바이트 속도  | 클라이언트 ID, 노드 ID |
    | `kafka.consumer.incoming_byte_rate`        | 수신 바이트 속도  | 클라이언트 ID, 노드 ID |

    ### 요청과 응답

    | 측정항목 이름                              | 설명              | 속성              |
    | ------------------------------------ | --------------- | --------------- |
    | `kafka.consumer.request_rate`        | requests 전송률    | 클라이언트 ID, 노드 ID |
    | `kafka.consumer.request_total`       | 총 requests 건수   | 클라이언트 ID, 노드 ID |
    | `kafka.consumer.request_size_avg`    | 평균 요청 크기        | 클라이언트 ID, 노드 ID |
    | `kafka.consumer.request_size_max`    | 최대 요청 크기        | 클라이언트 ID, 노드 ID |
    | `kafka.consumer.request_latency_avg` | 평균 요청 지연 시간(ms) | 클라이언트 ID, 노드 ID |
    | `kafka.consumer.request_latency_max` | 최대 요청 지연시간(ms)  | 클라이언트 ID, 노드 ID |
    | `kafka.consumer.response_rate`       | 응답률             | 클라이언트 ID, 노드 ID |
    | `kafka.consumer.response_total`      | 총 응답 수          | 클라이언트 ID, 노드 ID |

    ### 소비 지표

    | 측정항목 이름                                  | 설명          | 속성           |
    | ---------------------------------------- | ----------- | ------------ |
    | `kafka.consumer.bytes_consumed_rate`     | 바이트 소비율     | 클라이언트 ID, 토픽 |
    | `kafka.consumer.bytes_consumed_total`    | 소비된 총 바이트 수 | 클라이언트 ID, 토픽 |
    | `kafka.consumer.records_consumed_rate`   | 레코드 소비율     | 클라이언트 ID, 토픽 |
    | `kafka.consumer.records_consumed_total`  | 소비된 총 기록 수  | 클라이언트 ID, 토픽 |
    | `kafka.consumer.records_per_request_avg` | 요청당 평균 기록 수 | 클라이언트 ID, 토픽 |

    ### 소비자 지연 지표

    | 측정항목 이름                           | 설명                      | 속성                |
    | --------------------------------- | ----------------------- | ----------------- |
    | `kafka.consumer.records_lag`      | 현재 기록 수의 지연             | 파티션, 클라이언트 ID, 토픽 |
    | `kafka.consumer.records_lag_avg`  | 평균 소비자 지연               | 파티션, 클라이언트 ID, 토픽 |
    | `kafka.consumer.records_lag_max`  | 최대 소비자 지연               | 파티션, 클라이언트 ID, 토픽 |
    | `kafka.consumer.records_lead`     | 현재 기록 수에서 선두를 달리고 있습니다. | 파티션, 클라이언트 ID, 토픽 |
    | `kafka.consumer.records_lead_avg` | 평균 소비자 리드               | 파티션, 클라이언트 ID, 토픽 |
    | `kafka.consumer.records_lead_min` | 최소 소비자 납                | 파티션, 클라이언트 ID, 토픽 |

    ### 가져오기 지표

    | 측정항목 이름                                  | 설명                        | 속성           |
    | ---------------------------------------- | ------------------------- | ------------ |
    | `kafka.consumer.fetch_rate`              | 가져오기 requests속도           | 클라이언트 ID     |
    | `kafka.consumer.fetch_total`             | 총 가져오기 requests           | 클라이언트 ID     |
    | `kafka.consumer.fetch_size_avg`          | 평균 가져오기 크기                | 클라이언트 ID, 토픽 |
    | `kafka.consumer.fetch_size_max`          | 최대 가져오기 크기                | 클라이언트 ID, 토픽 |
    | `kafka.consumer.fetch_latency_avg`       | 평균 가져오기 지연 시간(ms)         | 클라이언트 ID     |
    | `kafka.consumer.fetch_latency_max`       | 최대 가져오기 지연 시간(ms)         | 클라이언트 ID     |
    | `kafka.consumer.fetch_throttle_time_avg` | 평균 데이터 가져오기 속도 제한 시간(밀리초) | 클라이언트 ID     |
    | `kafka.consumer.fetch_throttle_time_max` | 최대 데이터 가져오기 스로틀 시간(밀리초)   | 클라이언트 ID     |

    ### 소비자 단체 조정 기준

    | 측정항목 이름                                      | 설명                    | 속성       |
    | -------------------------------------------- | --------------------- | -------- |
    | `kafka.consumer.assigned_partitions`         | 할당된 파티션 수             | 클라이언트 ID |
    | `kafka.consumer.commit_rate`                 | 오프셋 커밋 비율             | 클라이언트 ID |
    | `kafka.consumer.commit_total`                | 총 오프셋 커밋              | 클라이언트 ID |
    | `kafka.consumer.commit_latency_avg`          | 평균 커밋 지연 시간(ms)       | 클라이언트 ID |
    | `kafka.consumer.commit_latency_max`          | 최대 커밋 지연 시간(ms)       | 클라이언트 ID |
    | `kafka.consumer.heartbeat_rate`              | 전송된 심장 박동수            | 클라이언트 ID |
    | `kafka.consumer.heartbeat_total`             | 전송된 총 심장 박동 수         | 클라이언트 ID |
    | `kafka.consumer.heartbeat_response_time_max` | 최대 하트비트 응답 시간(ms)     | 클라이언트 ID |
    | `kafka.consumer.last_heartbeat_seconds_ago`  | 마지막 심장 박동 이후 경과된 초    | 클라이언트 ID |
    | `kafka.consumer.last_poll_seconds_ago`       | 지난번 여론조사 이후 경과된 시간(초) | 클라이언트 ID |

    ### 재조정 지표

    | 측정항목 이름                                         | 설명                   | 속성       |
    | ----------------------------------------------- | -------------------- | -------- |
    | `kafka.consumer.rebalance_total`                | 총 재조정                | 클라이언트 ID |
    | `kafka.consumer.rebalance_rate_per_hour`        | 시간당 리밸런싱 횟수          | 클라이언트 ID |
    | `kafka.consumer.rebalance_latency_avg`          | 평균 재조정 지연 시간(ms)     | 클라이언트 ID |
    | `kafka.consumer.rebalance_latency_max`          | 최대 재조정 지연 시간(ms)     | 클라이언트 ID |
    | `kafka.consumer.rebalance_latency_total`        | 총 재조정 시간(밀리초)        | 클라이언트 ID |
    | `kafka.consumer.failed_rebalance_total`         | 실패한 리밸런싱 횟수 총합       | 클라이언트 ID |
    | `kafka.consumer.failed_rebalance_rate_per_hour` | 시간당 리밸런싱 실패 횟수       | 클라이언트 ID |
    | `kafka.consumer.last_rebalance_seconds_ago`     | 마지막 리밸런싱 이후 경과 시간(초) | 클라이언트 ID |
    | `kafka.consumer.partition_assigned_latency_avg` | 평균 파티션 할당 지연 시간(밀리초) | 클라이언트 ID |
    | `kafka.consumer.partition_assigned_latency_max` | 최대 파티션 할당 지연시간(ms)   | 클라이언트 ID |
    | `kafka.consumer.partition_revoked_latency_avg`  | 평균 파티션 해지 지연 시간(밀리초) | 클라이언트 ID |
    | `kafka.consumer.partition_revoked_latency_max`  | 최대 파티션 해지 지연 시간(밀리초) | 클라이언트 ID |
    | `kafka.consumer.partition_lost_latency_avg`     | 평균 파티션 손실 지연시간(ms)   | 클라이언트 ID |
    | `kafka.consumer.partition_lost_latency_max`     | 최대 파티션 손실 지연시간(ms)   | 클라이언트 ID |

    ### 동기화 그룹 메트릭

    | 측정항목 이름                        | 설명             | 속성       |
    | ------------------------------ | -------------- | -------- |
    | `kafka.consumer.sync_rate`     | 그룹 동기화 속도      | 클라이언트 ID |
    | `kafka.consumer.sync_total`    | 전체 그룹 동기화      | 클라이언트 ID |
    | `kafka.consumer.sync_time_avg` | 평균 동기화 시간(밀리초) | 클라이언트 ID |
    | `kafka.consumer.sync_time_max` | 최대 동기화 시간(밀리초) | 클라이언트 ID |
    | `kafka.consumer.join_rate`     | 그룹 가입률         | 클라이언트 ID |
    | `kafka.consumer.join_total`    | 전체 그룹 참여자 수    | 클라이언트 ID |
    | `kafka.consumer.join_time_avg` | 평균 접속 시간(밀리초)  | 클라이언트 ID |
    | `kafka.consumer.join_time_max` | 최대 접속 시간(밀리초)  | 클라이언트 ID |

    ### I/O 메트릭

    | 측정항목 이름                              | 설명               | 속성       |
    | ------------------------------------ | ---------------- | -------- |
    | `kafka.consumer.io_ratio`            | I/O에 소요되는 시간 비율  | 클라이언트 ID |
    | `kafka.consumer.io_time_ns_avg`      | 평균 I/O 시간(ns)    | 클라이언트 ID |
    | `kafka.consumer.io_wait_time_ns_avg` | 평균 I/O 대기 시간(ns) | 클라이언트 ID |
    | `kafka.consumer.io_wait_ratio`       | I/O 대기 시간의 비율    | 클라이언트 ID |
    | `kafka.consumer.iotime_total`        | 총 I/O 시간         | 클라이언트 ID |
    | `kafka.consumer.io_waittime_total`   | 총 I/O 대기 시간      | 클라이언트 ID |

    ### 여론조사 지표

    | 측정항목 이름                                | 설명                          | 속성       |
    | -------------------------------------- | --------------------------- | -------- |
    | `kafka.consumer.poll_idle_ratio_avg`   | 설문조사 중 소비자가 유휴 상태인 평균 시간 비율 | 클라이언트 ID |
    | `kafka.consumer.time_between_poll_avg` | 설문조사 간 평균 시간(밀리초)           | 클라이언트 ID |
    | `kafka.consumer.time_between_poll_max` | 최대 폴링 간 시간(밀리초)             | 클라이언트 ID |

    ### 인증기준

    | 측정항목 이름                                                    | 설명                | 속성       |
    | ---------------------------------------------------------- | ----------------- | -------- |
    | `kafka.consumer.successful_authentication_rate`            | 인증 성공률            | 클라이언트 ID |
    | `kafka.consumer.successful_authentication_total`           | 총 성공 인증 수         | 클라이언트 ID |
    | `kafka.consumer.successful_authentication_no_reauth_total` | 재인증 없이 성공적인 인증    | 클라이언트 ID |
    | `kafka.consumer.successful_reauthentication_rate`          | 재인증 성공률           | 클라이언트 ID |
    | `kafka.consumer.successful_reauthentication_total`         | 재인증 성공 횟수 총계      | 클라이언트 ID |
    | `kafka.consumer.failed_authentication_rate`                | 인증 실패율            | 클라이언트 ID |
    | `kafka.consumer.failed_authentication_total`               | 인증 실패 총 횟수        | 클라이언트 ID |
    | `kafka.consumer.failed_reauthentication_rate`              | 재인증 실패율           | 클라이언트 ID |
    | `kafka.consumer.failed_reauthentication_total`             | 재인증 실패 총 횟수       | 클라이언트 ID |
    | `kafka.consumer.reauthentication_latency_avg`              | 평균 재인증 지연 시간(밀리초) | 클라이언트 ID |
    | `kafka.consumer.reauthentication_latency_max`              | 최대 재인증 지연 시간(밀리초) | 클라이언트 ID |

    ### 기타 지표

    | 측정항목 이름                       | 설명        | 속성       |
    | ----------------------------- | --------- | -------- |
    | `kafka.consumer.select_rate`  | 선택된 통화 요금 | 클라이언트 ID |
    | `kafka.consumer.select_total` | 총 선택 통화   | 클라이언트 ID |
  </Collapser>
</CollapserGroup>

## 측정항목 속성 [#metric-attributes]

다음 속성을 사용하여 지표를 필터링하고 그룹화할 수 있습니다.

**공통 속성:**

* `kafka.cluster.name` - Kafka 클러스터 이름 (모든 메트릭 포함)
* `instrumentation.provider` - 항상 `opentelemetry` (모두 지표)
* `topic` - 카프카 토픽 이름
* `partition` - 파티션 번호
* `group` - 소비자 그룹명
* `broker.id` - 브로커 식별자(JMX 메트릭)
* `client-id` - 클라이언트 측(클라이언트 지표)
* `node-id` - 브로커 노드 식별자(클라이언트 메트릭)
* `type` - 요청 유형 (예: 가져오기, 생성)
* `direction` - 데이터 방향(입력, 출력)
* `state` - ISR 운영 상태(축소, 확장)
* `name` - GC 수집기 또는 메모리 풀 이름(JVM 지수)

## 다음 단계 [#next-steps]

* **[데이터 쿼리 및 시각화](/docs/opentelemetry/integrations/kafka/find-and-query-data)** - 뉴렐릭 UI 에서 지표 찾기, NRQL 쿼리 작성, 대시보드 생성 및 알림 설정
* **[쿼리 지표 데이터 유형](/docs/data-apis/understand-data/metric-data/query-metric-data-type/)** - OpenTelemetry 지표 작업을 위한 고급 기술을 알아봅니다.