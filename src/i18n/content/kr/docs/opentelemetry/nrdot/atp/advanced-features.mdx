---
title: ATP 고급 기능 및 인텔리전스 레이어
metaDescription: 'Learn about ATP intelligent features including dynamic thresholds, multi-metric composite scoring, and anomaly detection.'
tags:
  - Open source telemetry integrations
  - OpenTelemetry
  - NRDOT
  - Adaptive Telemetry Processor
  - ATP
  - Dynamic thresholds
  - Anomaly detection
  - Multi-metric scoring
  - Intelligence
freshnessValidatedDate: never
translationType: machine
---

<Callout title="시사">
  이 기능은 아직 개발 중이지만 꼭 사용해 보시기 바랍니다!

  이 기능은 현재 [사전 출시 정책](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy/) 에 따라 미리보기의 일부로 제공됩니다.
</Callout>

ATP에는 단순한 필터링이나 한계 기반 필터링을 넘어 정교하고 적응력 있는 텔레메트리 처리를 제공하는 고급 인텔리전스 레이어가 포함되어 있습니다.

## 고급 설정 옵션 [#advanced-config]

고급 기능을 활성화하려면 ATP 프로세서 설정에 이러한 **선택적 모범 사례를** 추가할 수 있습니다.

<CollapserGroup>
  <Collapser id="dynamic" title="다이나믹 레버값, 경계">
    ### 다이나믹 레버값, 경계 [#dynamic-thresholds]

    이는 시스템 기능의 과거 동작을 기반으로 청년 값, 예측을 자동으로 조정하여 오탐을 줄이면서 이상적으로 잡는 데 도움이 됩니다.

    ```yaml
    processors:
      adaptivetelemetry:
        # ... existing config ...
        # Dynamic threshold configuration
        enable_dynamic_thresholds: true
        dynamic_smoothing_factor: 0.2
        min_thresholds:
          process.cpu.utilization: 0.04  # Can't go below 4%
          process.memory.utilization: 0.04  # Can't go below 4%
        max_thresholds:
          process.cpu.utilization: 0.30  # Can't exceed 30%
          process.memory.utilization: 0.30  # Can't exceed 30%
    ```
  </Collapser>

  <Collapser id="multi-metric" title="다중 메트릭 복합 점수">
    ### 다중 메트릭 복합 점수 [#multi-metric-scoring]

    이 기능은 여러 단계를 함께 평가하여 프로세스 상태에 대한 전체적인 시각을 제공하고, 여러 측면에서 문제가 있는 프로세스를 파악합니다.

    ```yaml
    processors:
      adaptivetelemetry:
        # ... existing config ...
        # Multi-metric configuration
        enable_multi_metric: true
        composite_threshold: 1.2
        weights:
          process.cpu.utilization: 0.5
          process.memory.utilization: 0.5
    ```
  </Collapser>

  <Collapser id="anomaly-detection" title="이상 감지">
    ### 이상 감지 [#anomaly-detection]

    이 기능은 과거 평균치를 갑작스럽게 상회하는 수치를 감지하여, 오작동하거나 예상치 못한 동작 변화를 겪은 프로세스를 파악하는 데 도움을 줍니다.

    ```yaml
    processors:
      adaptivetelemetry:
        # ... existing config ...
        # Anomaly detection configuration
        enable_anomaly_detection: true
        anomaly_history_size: 15
        anomaly_change_threshold: 50.0  # 50% spike triggers anomaly
        anomaly_min_data_points: 3
    ```
  </Collapser>
</CollapserGroup>

## 고급 설정 전체 예시 [#complete-example]

다음은 모든 고급 기능을 활성화한 전체 예시입니다.

```yaml
processors:
  adaptivetelemetry:
    enable_storage: true
    retention_minutes: 30
    include_process_list:
      - "/usr/bin/postgres"
      - "/usr/sbin/nginx"
    metric_thresholds:
      process.cpu.utilization: 0.05
      process.memory.utilization: 0.05
    
    # All advanced features enabled
    enable_dynamic_thresholds: true
    dynamic_smoothing_factor: 0.2
    min_thresholds:
      process.cpu.utilization: 0.04
      process.memory.utilization: 0.04
    max_thresholds:
      process.cpu.utilization: 0.30
      process.memory.utilization: 0.30
    
    enable_multi_metric: true
    composite_threshold: 1.5
    weights:
      process.cpu.utilization: 0.5
      process.memory.utilization: 0.5
    
    enable_anomaly_detection: true
    anomaly_history_size: 15
    anomaly_change_threshold: 50.0
    anomaly_min_data_points: 3
```

## 설정 튜닝 가이드 [#tuning-guide]

다음 섹션에서는 각 고급 설정 옵션에 대한 자세한 설명과 함께 사용 환경에 맞게 조정하는 방법에 대한 지침을 제공합니다.

<CollapserGroup>
  <Collapser id="basic" title="기본 설정">
    ### 기본 설정

    * `enable_storage`: 과거 데이터에 대한 영구 저장소를 활성화합니다. 이는 재시작 시에도 데이터가 유지되도록 하기 위해 필요합니다.

      * 기본: `true`

      * 저장 경로는 플랫폼에서 자동으로 결정됩니다.

        * **Linux**: `/var/lib/nrdot-collector/adaptiveprocess.db`
        * **Windows**: `%LOCALAPPDATA%\nrdot-collector\adaptiveprocess.db`

    * `retention_minutes`: 프로세스가 마지막으로 특정 임계값을 초과한 후 해당 프로세스를 추적하는 데 걸리는 시간(분)입니다.

      * 기본값: 30 (최대값: 30)
      * 튜닝: 수명이 짧은 프로세스에는 낮은 값(5-10)을 사용하고, 안정적인 프로세스에는 30으로 유지하십시오.
  </Collapser>

  <Collapser id="thresholds" title="주니어 값, 레일 설정">
    ### 프로세스 목록을 포함하세요

    `include_process_list` 은 모든 필터를 항상 우회하고 응답이나 결과에 관계없이 보고되는 프로세스 목록입니다.

    * 사용 사례: 항상 모니터링해야 하는 중요 프로세스(예: 데이터베이스, 웹 서버)
    * 보안: 구분 기호(예: `/usr/bin/postgres`)를 사용하여 전체 경로(`/usr/bin/postgres`)를 사용하십시오. `"postgres"` 와 같은 경로 구분 기호가 없는 항목은 어떤 프로세스와도 일치하지 않습니다.

    **예시:**

    ```yaml
    include_process_list:
      - "/usr/bin/postgres"  # Always include PostgreSQL
      - "/usr/sbin/nginx"    # Always include Nginx
    ```
  </Collapser>

  <Collapser id="metric-thresholds" title="기준점 값, 경계값">
    ### 기준점 값, 경계값

    `metric_thresholds` 은 정적 값, 즉 각 지표에 대한 값입니다. 이 값이 **초과** 되면 해당 프로세스에 플래그가 지정됩니다.

    **최적화 방법:**

    * 평균 워크로드의 기준 값으로 시작하세요.
    * 더 적은 알림을 위해 소음을 줄이기 위해 레버 값을 높입니다.
    * 청년값을 낮추고, 더 작게 잡기 위해 이상활동
    * 사용률 지표(CPU/메모리): 백분율 사용(0.0-1.0 = 0%-100%)
    * 개수(스레드, 파일 디스크립터)를 셀 때는 절대값을 사용하세요.

    **예시 값에 대한 설명:**

    ```yaml
    metric_thresholds:
      process.cpu.utilization: 0.0005      # 0.05% CPU - very sensitive
      process.memory.utilization: 0.0005   # 0.05% memory - very sensitive
      process.memory.virtual: 20971520     # 20 MB virtual memory
      process.threads: 16                  # 16 threads
      process.open_file_descriptors: 30    # 30 open files
      process.disk.io: 204800              # 200 KB disk I/O
      process.cpu.time: 0.01               # 0.01 seconds CPU time
    ```
  </Collapser>

  <Collapser id="dynamic-thresholds" title="다이나믹 레버값, 경계">
    ### 다이나믹 레버값, 경계

    과거의 행동에 따라 레버 값을 자동으로 조정합니다. 다양한 패턴의 프로세스에 유용합니다.

    * `enable_dynamic_thresholds`: 적응형 레버값, 엘리베이터 조정을 켭니다.

      * 활성화 시점: 배치 작업, API 서버와 같이 동작이 변동적인 프로세스
      * 비활성화 시점: 동작이 안정적이고 예측 가능한 프로세스

    * `dynamic_smoothing_factor`: 레버값, 적응 속도(0.0-1.0)입니다.

      * 낮음(0.1): 적응 속도가 느리고 안정적임(점진적인 변화에 적합)
      * 높음(0.5): 빠른 적응, 더 높은 반응성(변동성이 큰 환경에 적합)
      * 기본값: 0.2 (균형)

    * `min_thresholds`: 최소값 - 청년값, 이 값 이하로 떨어지지 않습니다. 이는 사람이나 사람이 지나치게 민감해지는 것을 방지하기 위해 사용됩니다.

    * `max_thresholds`: 한계값 - 청년값, 이 값을 초과하지 않습니다. 이는 난이도가 지나치게 관대해지는 것을 방지하기 위해 사용됩니다.
  </Collapser>

  <Collapser id="multi-metric-scoring" title="멀티메트릭 채점">
    ### 멀티메트릭 스코어링(복합 스코어링)

    여러 확률을 개별적으로가 아니라 함께 평가합니다. 다양한 측면에서 &quot;악의적인 행위자&quot;인 프로세스를 포착하는 데 유용합니다.

    * `enable_multi_metric`: 복합 점수 계산을 가능하게 합니다.

      * 활성화 시점: CPU 사용량과 메모리 사용량이 모두 높은 등 여러 가지 문제가 있는 프로세스를 감지하고 싶을 때
      * 비활성화 시기: 개별적으로 회원 자격을 알리고 싶습니다.

    * `composite_threshold`: 합산된 점수, 청년값입니다. 프로세스는 (메트릭의 가중합) &gt; composite\_threshold일 때 플래그가 지정됩니다.

      * 더 낮은 값(0.5): 더 민감하여 경계선상의 사례까지 포착합니다.
      * 높음(2.0): 민감도가 낮아 중요한 문제만 포착합니다.
      * 기본값: 1.5

    * `weights`종합 점수에서 각 항목의 중요도. 무게가 높을수록 그 영향력이 커집니다.
  </Collapser>

  <Collapser id="anomaly-detection" title="이상 감지">
    ### 이상 감지

    이 기능은 현재 값을 과거 패턴과 비교하여 갑작스러운 급증이나 비정상적인 동작을 감지합니다.

    * `enable_anomaly_detection`: 스파이크 감지 기능을 활성화합니다.

      * 활성화 시점: 갑작스러운 변경 사항(프로세스 오류)을 감지하기 위해
      * 비활성화하는 경우: 절대 레버 값의 경우

    * `anomaly_history_size`기준 평균 계산에 사용할 최근 데이터 포인트 수입니다.

      * Larger (50-100): Smoother 기준, catch 더 이상 이상 행동
      * 소형(5-15): 반응성이 뛰어나고 작은 스파이크를 포착합니다.
      * 기본값: 10 (최대값: 100)

    * `anomaly_change_threshold`: 과거 평균치를 상회하는 비율 급증이 공지를 발동시킵니다.

      * 예시: 50.0 = 현재 값이 평균보다 50% 높으면 플래그를 지정합니다.
      * 낮음(20-50): 변화에 더 민감함
      * 높은 수치(100-200): 급격한 상승만 포착하세요.
      * 기본값: 200.0

    * `anomaly_min_data_points`: 이상하게 감지가 활성화되기 전의 최소 이력 데이터 포인트입니다.

      * 이렇게 하면 시작 시 오탐을 방지할 수 있습니다.
      * 권장 설정: 3(기본값)으로 유지
      * 반드시 ≤이어야 합니다. `anomaly_history_size`
  </Collapser>
</CollapserGroup>

## 최적화 전략 [#tuning-strategy]

**시작하기:**

1. `metric_thresholds` 로만 시작합니다(동적/다중 템플릿릭/이상 작동 비활성화).
2. 1-2일 정도 관찰한 후, 레버값을 조정하여 오탐을 감소시킵니다.
3. 변수 워크로드에 대해 `enable_dynamic_thresholds` 활성화합니다.
4. 갑작스러운 급증을 포착하려면 `enable_anomaly_detection` 추가하세요.
5. 프로세스에 상관관계가 있는 리소스 문제가 있는 경우 `enable_multi_metric` 사용하십시오.

**일반적인 패턴:**

* **안정적인 제작 서비스**: 정적 레버값 사용, 릴레이만 사용
* **일괄 작업**: 동적 레버값, 예측 + 이상 동작 감지 사용
* **리소스 집약적인 앱**: 다중 지표 점수 계산을 사용하세요
* **핵심 프로세스**: 추가 `include_process_list`

## 관련 리소스 [#related-resources]

<DocTiles>
  <DocTile title="문제점 해결" path="/docs/opentelemetry/nrdot/atp/troubleshooting">
    사용 환경에서 ATP 관련 문제를 해결하는 방법을 알아보세요.
  </DocTile>

  <DocTile title="데이터 쿼리" path="/docs/opentelemetry/nrdot/atp/query">
    NRQL 사용하여 뉴렐릭에서 ATP 데이터를 조회하는 방법을 알아보세요.
  </DocTile>

  <DocTile title="데이터 보기" path="/docs/opentelemetry/nrdot/atp/view-data">
    뉴럴릭에서 ATP가 수집한 데이터를 보는 방법을 알아보세요.
  </DocTile>
</DocTiles>