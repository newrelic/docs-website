---
title: Kubernetes용 ATP 구성
metaDescription: Step-by-step guide to install and configure the Adaptive Telemetry Processor (ATP) with NRDOT Collector in Kubernetes environments.
tags:
  - Open source telemetry integrations
  - OpenTelemetry
  - NRDOT
  - Adaptive Telemetry Processor
  - ATP
  - Kubernetes
  - Helm
  - Manifests
freshnessValidatedDate: never
translationType: machine
---

<Callout title="시사">
  이 기능은 아직 개발 중이지만 꼭 사용해 보시기 바랍니다!

  이 기능은 현재 [사전 출시 정책](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy/) 에 따라 미리보기의 일부로 제공됩니다.
</Callout>

Kubernetes 환경에서 NRDOT Collector 와 함께 Adaptive Telemetry Processor(ATP)를 설치하고 구성하는 방법을 알아보세요. ATP는 귀하의 중요한 가시성을 유지하면서 텔레메트리 데이터 볼륨을 줄여줍니다.

<Callout variant="important">
  Kubernetes용 ATP는 실험적인 빌드를 사용합니다. 이번 빌드 전체는 Kubernetes 설치를 위한 실험적인 빌드이며, ATP 기능만 미리 보기로 제공되는 것이 아닙니다.
</Callout>

## 설치 방법 [#installation-methods]

Helm(권장) 또는 Kubernetes 매니페스트를 사용하여 ATP가 포함된 OpenTelemetry Collector를 설치할 수 있습니다.

<Tabs>
  <TabsBar>
    <TabsBarItem id="helm">Helm 설치(권장)</TabsBarItem> <TabsBarItem id="manifest">매니페스트 설치</TabsBarItem>
  </TabsBar>

  <TabsPages>
    <TabsPageItem id="helm">
      Helm 설치 방법은 Kubernetes 에서 구현하다, 배포하다 ATP 지원 수집기에 권장되는 접근 방식입니다.

      <Steps>
        <Step>
          ### 시작하기 전에 [#helm-prereq]

          다음 사항을 확인하십시오:

          * 귀하의 뉴렐릭 클러스터
          * 클러스터에 접근하도록 kubectl이 구성되었습니다.
          * Cluster 관리자 권한
        </Step>

        <Step>
          ### values.yaml 파일을 다운로드하고 사용자 지정하세요. [#helm-values]

          1. Helm 차트 `values.yaml` 파일을 다운로드하십시오.

             ```bash
             curl -o values.yaml https://raw.githubusercontent.com/newrelic/helm-charts/master/charts/nr-k8s-otel-collector/values.yaml
             ```

          2. `values.yaml` 파일을 사용자 설정에 맞게 수정하세요.

             ```yaml
             # Required: Set your cluster name and license key
             cluster: "YOUR_CLUSTER_NAME"
             licenseKey: "YOUR_NEW_RELIC_LICENSE_KEY"

             # Enable ATP
             enable_atp: true

             # IMPORTANT: Use experimental collector image for ATP
             images:
               collector:
                 repository: "newrelic/nrdot-collector"  # Changed from nrdot-collector-k8s
                 tag: "<NRDOT_COLLECTOR_LATEST_VERSION>"  # Use latest version from releases page
             ```

          3. [릴리스 페이지](https://github.com/newrelic/nrdot-collector-releases/releases) 에서 최신 NRDOT Collector 버전을 찾아 `tag` 값을 업데이트하세요.

          4. 추가 설정 옵션에 대해서는 [설정 시위를](/docs/kubernetes-pixie/k8s-otel/install/#config-params) 참조하세요.
        </Step>

        <Step>
          ### Helm 차트를 설치하세요 [#helm-install]

          1. 뉴클릭 Helm 다음을 추가하세요.

             ```bash
             helm repo add newrelic https://helm-charts.newrelic.com
             helm repo update
             ```

          2. 사용자 지정 `values.yaml` 파일을 사용하여 차트를 설치하세요:

             ```bash
             helm upgrade nr-k8s-otel-collector newrelic/nr-k8s-otel-collector \
               -f values.yaml \
               -n newrelic \
               --create-namespace \
               --install
             ```
        </Step>

        <Step>
          ### 설치를 확인하십시오 [#helm-verify]

          1. 파드가 실행 중인지 확인하세요:

             ```bash
             kubectl get pods -n newrelic --watch
             ```

             `newrelic` 네임스페이스에서 `nr-k8s-otel-collector-<hash>` 과 같은 이름을 가진 파드를 볼 수 있을 것입니다.

          2. [쿼리 빌더](/docs/query-your-data/explore-query-data/query-builder/introduction-query-builder/) 에서 다음 쿼리를 실행하여 뉴렐릭이 프로세스 데이터를 수신하는지 확인하세요.

             ```sql
             FROM Metric SELECT *
             WHERE k8s.cluster.name='YOUR_CLUSTER_NAME'
             AND metricName LIKE 'process.%'
             LIMIT 100
             ```

             ```sql
             FROM Metric SELECT uniqueCount(metricName)
             WHERE k8s.cluster.name='YOUR_CLUSTER_NAME'
             AND metricName LIKE 'process.%'
             ```
        </Step>

        <Step>
          ### 뉴럴릭에서 ATP 데이터에 접근하세요 [#access-data]

          ATP가 구성되면 쿠버네티스 클러스터에서 데이터 수집이 시작됩니다. 이 데이터는 뉴럴릭 OpenTelemetry UI 에서 확인할 수 있습니다. 뉴렐릭 OpenTelemetry UI 에 대한 자세한 내용은 [OpenTelemetry APM UI](/docs/opentelemetry/get-started/apm-monitoring/opentelemetry-apm-ui) 참조하십시오.

          **뉴릭에서 ATP 프로세스 관련 데이터를 보려면 다음을 참조하십시오.**

          1. **<DNT>[one.newrelic.com](https://one.newrelic.com) &gt; All Entities</DNT>** 으로 이동하세요.

             또는

             <DNT>**[one.newrelic.com](https://one.newrelic.com) &gt; Catalogs &gt; Infrastructure**</DNT> 으)로 이동합니다.

          2. NRDOT 수집기를 ATP와 함께 설치한 위치를 검색하세요.

          3. 엔티티를 선택한 다음 왼쪽 창에서 **<DNT>Process</DNT>** 클릭합니다.

             <DNT>Process</DNT> 페이지에서는 실행 중인 모든 프로세스와 해당 프로세스의 ID, CPU 및 메모리 사용률을 확인할 수 있습니다. 또한, 한 프로세스가 다른 프로세스를 생성하는 경우 프로세스 간의 부모-자식 관계를 표시합니다.

             <img style={{ align: 'left' }} title="ATP process metrics in New Relic OpenTelemetry UI" alt="ATP process metrics in New Relic OpenTelemetry UI" src="/images/atp-process-metrics.webp" />
        </Step>
      </Steps>
    </TabsPageItem>

    <TabsPageItem id="manifest">
      매니페스트 설치 방식은 Helm을 사용하지 않고도 Kubernetes용 OpenTelemetry를 설정할 수 있는 방법을 제공합니다. 이 방법은 직접적인 설정을 선호하거나 수동 설정이 필요한 특정 요구 사항이 있는 사용자에게 적합합니다.

      <Steps>
        <Step>
          ### 시작하기 전에 [#manifest-prereq]

          다음 사항을 확인하십시오:

          * 귀하의 뉴렐릭 클러스터
          * 클러스터에 접근하도록 kubectl이 구성되었습니다.
          * Cluster 관리자 권한
        </Step>

        <Step>
          ### 매니페스트 파일을 다운로드하고 준비하세요. [#manifest-download]

          1. `nr-k8s-otel-collector` 의 렌더링된 예제 디렉터리 내용을 로컬 작업 공간으로 복사하세요.

             ```bash
             git clone https://github.com/newrelic/helm-charts.git
             cd helm-charts/charts/nr-k8s-otel-collector/examples/k8s-with-atp/rendered
             ```

          2. `daemonset.yaml` 및 `deployment.yaml` 파일 모두에서 수집기 이미지를 업데이트합니다.

             변경 전:

             ```yaml
             image: docker.io/newrelic/nrdot-collector-k8s
             ```

             에게:

             ```yaml
             image: docker.io/newrelic/nrdot-collector:<NRDOT_COLLECTOR_LATEST_VERSION>
             ```

             <Callout variant="important">
               이것은 Kubernetes 설치를 위한 실험적인 빌드입니다. 최신 버전은 [릴리스 페이지](https://github.com/newrelic/nrdot-collector-releases/releases) 에서 확인하실 수 있습니다.
             </Callout>
        </Step>

        <Step>
          ### 라이선스 키 및 클러스터 이름을 구성합니다. [#manifest-config]

          1. Base64로 인코딩된 뉴렐릭 클러스터 키로 `secret.yaml` 파일을 업데이트합니다.

             ```yaml
             data:
               licenseKey: <YOUR_BASE64_ENCODED_LICENSE_KEY>
             ```

             라이선스 키를 인코딩하려면 다음 단계를 따르세요.

             * **리눅스/맥OS:** `echo -n "<YOUR_LICENSE_KEY>" | base64`
             * **Windows (파워셸):** `[System.Convert]::ToBase64String([System.Text.Encoding]::UTF8.GetBytes("<YOUR_LICENSE_KEY>"))`

          2. `daemonset-configmap.yaml` 및 `deployment-configmap.yaml` 파일 모두에서 클러스터 이름을 업데이트하세요.

             `k8s.cluster.name` 의 인스턴스를 찾고 `<YOUR_CLUSTER_NAME>` 원하는 클러스터 이름으로 바꾸세요.

             ```yaml
             - key: k8s.cluster.name
               action: upsert
               value: YOUR_CLUSTER_NAME  # Replace with your cluster name
             ```
        </Step>

        <Step>
          ### 구현하다, 배포하다 매니페스트 [#manifest-deploy]

          1. `newrelic` 네임스페이스를 생성하고 매니페스트를 적용합니다.

             ```bash
             kubectl create namespace newrelic
             kubectl apply -n newrelic -R -f .
             ```

          2. 파드가 실행 중인지 확인하십시오.

             ```bash
             kubectl get pods -n newrelic --watch
             ```

          3. [쿼리 빌더](https://docs.newrelic.com/docs/query-your-data/explore-query-data/query-builder/introduction-query-builder/) 에서 다음 쿼리를 실행하여 뉴렐릭이 프로세스 데이터를 수신하는지 확인하세요.

             ```sql
             FROM Metric SELECT *
             WHERE k8s.cluster.name='<YOUR_CLUSTER_NAME>'
             AND metricName LIKE 'process.%'
             LIMIT 100
             ```

             ```sql
             FROM Metric SELECT uniqueCount(metricName)
             WHERE k8s.cluster.name='<YOUR_CLUSTER_NAME>'
             AND metricName LIKE 'process.%'
             ```
        </Step>

        <Step>
          ### 뉴럴릭에서 ATP 데이터에 접근하세요 [#access-data]

          ATP가 구성되면 쿠버네티스 클러스터에서 데이터 수집이 시작됩니다. 이 데이터는 뉴럴릭 OpenTelemetry UI 에서 확인할 수 있습니다. 뉴렐릭 OpenTelemetry UI 에 대한 자세한 내용은 [OpenTelemetry APM UI](/docs/opentelemetry/get-started/apm-monitoring/opentelemetry-apm-ui) 참조하십시오.

          **뉴릭에서 ATP 프로세스 관련 데이터를 보려면 다음을 참조하십시오.**

          1. **<DNT>[one.newrelic.com](https://one.newrelic.com) &gt; All Entities</DNT>** 으로 이동하세요.

             또는

             <DNT>**[one.newrelic.com](https://one.newrelic.com) &gt; Catalogs &gt; Infrastructure**</DNT> 으)로 이동합니다.

          2. NRDOT 수집기를 ATP와 함께 설치한 위치를 검색하세요.

          3. 엔티티를 선택한 다음 왼쪽 창에서 **<DNT>Process</DNT>** 클릭합니다.

             <DNT>Process</DNT> 페이지에서는 실행 중인 모든 프로세스와 해당 프로세스의 ID, CPU 및 메모리 사용률을 확인할 수 있습니다. 또한, 한 프로세스가 다른 프로세스를 생성하는 경우 프로세스 간의 부모-자식 관계를 표시합니다.

             <img style={{ align: 'left' }} title="ATP process metrics in New Relic OpenTelemetry UI" alt="ATP process metrics in New Relic OpenTelemetry UI" src="/images/atp-process-metrics.webp" />
        </Step>
      </Steps>
    </TabsPageItem>
  </TabsPages>
</Tabs>

## ATP 설정 옵션 [#atp-config]

ATP가 활성화되면 다음 설정이 자동으로 적용됩니다.

<table>
  <thead>
    <tr>
      <th>
        매개변수
      </th>

      <th>
        설명
      </th>

      <th>
        기본값
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `enable_atp`
      </td>

      <td>
        ATP 기능을 활성화/비활성화합니다. ATP를 활성화하려면 

        `true`

         으로 설정하십시오.
      </td>

      <td>
        `false`
      </td>
    </tr>

    <tr>
      <td>
        `images.collector.repository`
      </td>

      <td>
        ATP를 사용하려면 

        `newrelic/nrdot-collector`

         으로 변경해야 합니다.
      </td>

      <td>
        `newrelic/nrdot-collector-k8s`
      </td>
    </tr>

    <tr>
      <td>
        `images.collector.tag`
      </td>

      <td>
        ATP 지원 수집기를 위한 이미지 태그입니다.
      </td>

      <td>
        `<TO_BE_CONFIRMED>`
      </td>
    </tr>
  </tbody>
</table>

/\* ## 문제 해결, ATP 처리 \[문제 해결, 해결] ### ATP가 필터링되지 않음 \*\*문제\*\*: 모든 프로세스 지표가 필터링되지 않고 전송됩니다. \*\*해결 방법\*\*: 1. \*\*ATP 활성화 여부 확인\*\*: \`\`\`bash kubectl get configmap -n newrelic nr-k8s-otel-수집기-daemonset-config -o yaml | grep adaptivetelemetry \`\`\` 2. \*\*파이프라인에 ATP가 포함되어 있는지 확인\*\*: \`메트릭/nr\` 파이프라인에서 \`adaptivetelemetry\`를 찾으세요. 3. \*\*올바른 수집기 이미지를 사용하고 있는지 확인하십시오.\*\* \`\`\`bash kubectl get daemonset -n newrelic nr-k8s-otel-수집기-daemonset -o yaml | grep &quot;image:&quot; \`\`\` 예상: \`newrelic/nrdot-수집기:1.11.0\` (또는 이후 버전) \*\*안 됨\*\*: \`newrelic/nrdot-수집기-k8s:1.11.0\` 4. \*\*\`values.yaml\` 또는 ConfigMap에서 \`enable\_atp\`가 \`true\`로 설정되어 있는지 확인하십시오.\*\* ### 파드 시작 안 됨 \*\*문제\*\*: Collector 파드가 시작되지 않습니다. \*\*해결책\*\*: 1. \*\*패드 로그 확인\*\*: \`\`bash kubectl 로그인 -n newrelic -l app.kubernetes.io/name=nr-k8s-otel-collector \`\`\` 2. \*\* 클러스터 키가 올바르게 인코딩되었는지 확인\*\*: \`\`\`bash kubectl get secret -n newrelic nr-k8s-otel-수집기-config -o yaml \`\`\` 3. \*\*리소스 제한 확인\*\*: 클러스터에 수집기 패드에 대한 충분한 리소스가 있는지 확인하세요. ### 뉴렐릭에 데이터가 없습니다 \*\*문제\*\*: 설치 후 뉴렐릭에 지수가 표시되지 않습니다. \*\*해결책\*\*: 1. 뉴렐릭 UI 에 데이터가 나타날 때까지 \*\*2-5분 정도 기다립니다\*\*. 2. \*\*목록 이름\*\*이 설정에서 설정한 이름과 일치하는지 확인하세요. 3. \*\*수집기 로그 확인\*\* 연결 오류: \`\`\`bash kubectl 로그인 -n newrelic -l app.kubernetes.io/name=nr-k8s-otel-수집기 | grep -i 오류 \`\`\` \*/

## 관련 리소스 [#related-resources]

<DocTiles>
  <DocTile title="문제점 해결" path="/docs/opentelemetry/nrdot/atp/troubleshooting">
    사용 환경에서 ATP 관련 문제를 해결하는 방법을 알아보세요.
  </DocTile>

  <DocTile title="데이터 쿼리" path="/docs/opentelemetry/nrdot/atp/query">
    NRQL 사용하여 뉴렐릭에서 ATP 데이터를 조회하는 방법을 알아보세요.
  </DocTile>

  <DocTile title="고급 기능" path="/docs/opentelemetry/nrdot/atp/advanced-features">
    ATP 구현, 배포에 대한 고급 기능을 활성화하는 방법을 알아보세요.
  </DocTile>
</DocTiles>