---
title: Snyk 데이터를 New Relic으로 보내기
metaDescription: Send your security data from Snyk directly to New Relic.
translationType: machine
---

import vulnerabilitymanagementTestWebhook from 'images/vulnerability-management_screenshot-crop_test-webhook.webp'

import vulnerabilitymanagementVerifySnykData from 'images/vulnerability-management_screenshot-crop_verify-snyk-data.webp'

import accountsVmLanding from 'images/accounts_screenshot-full_vm-landing.webp'

import vulnerabilitymanagementQueryVulnEvents from 'images/vulnerability-management_screenshot-full_query-vuln-events.webp'

import vmSnykDashboard from 'images/vm_screenshot-full_snyk-dashboard.webp'

이 가이드는 New Relic Vulnerability Management를 Snyk Webhooks와 통합하는 방법을 설명합니다. Snyk의 웹후크는 Snyk의 비즈니스 또는 엔터프라이즈 고객에게만 제공되는 베타 기능입니다. 베타 기능인 Webhook API 및 구조는 예고 없이 변경될 수 있으므로 Webhook을 사용하여 보안 프로세스를 자동화할 때는 신중을 기하시기 바랍니다.

우리는 Snyk Webhooks의 변경 사항을 동기화하기 위해 모든 노력을 기울일 것이지만, 우리가 단계를 벗어나는 것을 발견하면 알려주십시오.

이 단계를 완료하면 New Relic 계정에서 Snyk가 감지한 새로운 취약점을 실시간으로 볼 수 있으며 새로 감지된 문제를 분석 대시보드로 구축할 수 있습니다.

자세한 내용은 [공식 Snyk 설명서 를](https://snyk.docs.apiary.io/#reference/webhooks)참조하십시오.

## 전제 조건 [#prereqs]

* Snyk API 토큰

* New Relic

  <InlinePopover type="licenseKey"/>

* API를 통해 웹후크를 구성하려면 Snyk 조직 관리자여야 합니다.

## 웹훅 구성 [#webhook-config]

웹후크를 구성하려면 다음 단계를 수행하십시오.

<Steps>
  <Step>
    ### Snyk API 토큰 받기 [#snky-API-token]

    Snyk UI의 사용자 메뉴에서 **계정 설정을** 클릭하고 Snyk API 토큰 키를 복사합니다. 자세한 내용은 [공식 Snyk 문서를](https://docs.snyk.io/snyk-admin/snyk-broker/snyk-broker-code-agent/setting-up-the-code-agent-broker-client-deployment/step-1-obtaining-the-required-tokens-for-the-setup-procedure/obtaining-your-snyk-api-token)참조하세요.
  </Step>

  <Step>
    ### New Relic **라이선스 - 라이선스 키 삽입** [#nr-license-key]

    **라이선스 선택 - 삽입** <InlinePopover type="licenseKey"/>New Relic 계정에서 또는 새 계정을 만드십시오.

    <Callout variant="important">
      Snyk 및 New Relic 키 외에도 임의 서명 암호를 생성해야 합니다. 이것은 Snyk에서 필요하지만 데이터를 수신할 때 New Relic에서 사용하지 않습니다.
    </Callout>
  </Step>

  <Step>
    ### Snyk 조직 ID 컴파일 [#sny-org-ids]

    다음 명령을 실행하여 액세스 권한이 있는 Snyk 조직 ID 목록을 가져옵니다.

    ```shell
    curl -H "content-type: application/json" \
    -H "authorization: token YOUR_SNYK_API_TOKEN" \
    "https://api.snyk.io/api/v1/orgs" | jq -r '.orgs[] | "\(.id)\t\(.name)"'
    ```

    <Callout variant="important">
      이 명령을 실행하려면 명령줄 JSON 프로세서인 [jq 를](https://stedolan.github.io/jq/)설치해야 합니다.
    </Callout>
  </Step>

  <Step>
    ### 각 Snyk 조직에서 웹후크 생성 [#create-webhook]

    각 Snyk 조직에 대해 개별적으로 웹후크를 구성해야 합니다.

    다음 명령을 실행하여 프로젝트를 테스트할 때마다 New Relic의 보안 수집 프로세서에 게시할 웹후크를 생성합니다. 이것은 [project_snapshot](https://snyk.docs.apiary.io/#introduction/consuming-webhooks/event-types) 이벤트 유형을 통해 전송됩니다.

    ```shell
    curl -X POST -H "content-type: application/json" \
    -H "authorization: token <SNYK_API_TOKEN>" \
    --data '{"url": 
        "https://security-ingest-processor.service.newrelic.com/v1/security/webhooks/snyk?Api-Key=YOUR_NEW_RELIC_LICENSE_KEY",
        "secret": "YOUR_SIGNING_SECRET"}' \
    "https://api.snyk.io/api/v1/org/<SNYK_ORG_ID>/webhooks"
    ```
  </Step>

  <Step>
    ### 웹훅 연결 테스트 [#confirm-webhook]

    다음 명령은 조직에서 구성된 각 웹후크에 대한 웹후크 ID 및 URL과 함께 결과 배열을 반환합니다.

    ```shell
    curl -H "content-type: application/json" \
    -H "authorization: token YOUR_SNYK_API_TOKEN" \
    "https://api.snyk.io/api/v1/org/YOUR_SNYK_ORG_ID/webhooks"
    ```

    웹훅을 테스트하려면 테스트하려는 웹훅에서 ID를 복사하고 다음 명령을 실행합니다.

    ```shell
    curl -X POST --data "" -H "content-type: application/json" \
    -H "authorization: token YOUR_SNYK_API_TOKEN" \
    "https://api.snyk.io/api/v1/org/YOUR_SNYK_ORG_ID/webhooks/YOUR_WEBHOOK_ID/ping"
    ```

    웹후크를 올바르게 설정한 경우 이 명령은 `OK` 반환합니다.
  </Step>
</Steps>

## 수동으로 Webhook 테스트 [#webhook-test]

New Relic으로 데이터 흐름을 가져오려면 Snyk 내에서 프로젝트의 수동 스캔을 트리거해야 할 수 있습니다. 프로젝트 내의 스캔 대상에서 **지금 다시 테스트를** 클릭하여 Snyk CLI 또는 API를 통해 또는 Snyk UI에서 이 작업을 수행할 수 있습니다.

[수동 테스트 실행](https://docs.snyk.io/getting-started/running-tests#run-tests-manually)에 대한 공식 Snyk 문서를 확인하십시오.

<img
  title="Test a webhook manually"
  alt="Test a webhook manually"
  src={vulnerabilitymanagementTestWebhook}
/>

<figcaption>
  프로젝트 내의 검사 대상에서 **지금 다시 테스트를** 클릭합니다.
</figcaption>

## Snyk 데이터가 New Relic으로 전송되었는지 확인 [#verify-snyk-sending]

New Relic의 로그를 확인하여 `logtype:security` 입력하여 보안 이벤트를 필터링하여 수동 테스트의 Snyk 결과가 성공적으로 전달되었는지 확인하십시오.

1. **[one.newrelic.com](https://one.newrelic.com) > All capabilities > Logs**로 이동합니다.
2. 검색창에 `logtype:security` 입력하고 **쿼리 로그를**클릭합니다.

<img
  title="Logs screen"
  alt="Logs screen"
  src={vulnerabilitymanagementVerifySnykData}
/>

<figcaption>
  **[one.newrelic.com](https://one.newrelic.com) > All capabilities > Logs**
</figcaption>

Snyk Webhook 전송은 각 테스트에서 발생하는 **새로운 문제** 및 **제거된 문제** 만 반환합니다. New Relic은 **New Issues**만 분석합니다. 수동 테스트에서 새로운 문제가 발견되지 않으면 New Relic에 새로운 보안 로그가 표시되지 않습니다. 이 경우 다음과 같은 성공적인 웹후크 전송에 대한 로그 메시지가 New Relic에 표시됩니다.

```sql
SnykWebhook scan reported 879 byte payload with 0 events (0 unique issue ids) from '' errors=no
```

## New Relic에서 Snyk 데이터 보기 [#view-data-NR]

하나 이상의 웹후크 이벤트가 구성되면 New Relic의 보안 수집 엔드포인트로 전송되는 Snyk 웹후크의 결과를 볼 수 있습니다.

New Relic에서 Snyk 데이터를 식별하는 데 사용할 수 있는 3가지 방법을 확인하십시오.

### 취약성 관리에서 데이터 보기 [#view-data]

이 페이지는 **[one.newrelic.com](https://one.newrelic.com) > All capabilities > Vulnerability Management**에서 찾을 수 있습니다.

이 보기는 Snyk 통합에서 소비된 모든 데이터를 포함하여 모든 소프트웨어의 취약성에 대한 조감도를 제공합니다. 다양한 탭을 사용하여 취약점을 식별하고 분류합니다.

<img
  title="Vulnerability management screen"
  alt="Vulnerability management screen"
  src={accountsVmLanding}
/>

<figcaption>
  **[one.newrelic.com](https://one.newrelic.com) > All capabilities > Vulnerability Management**.
</figcaption>

### 취약점 이벤트 쿼리 [#query-vuln-events]

Snyk 이벤트가 처리되면 **취약성** 테이블에 저장됩니다. 이 테이블을 쿼리하고 원시 데이터를 보려면 다음을 수행하십시오.

1. **[one.newrelic.com](https://one.newrelic.com) > All capabilities > Query your data**로 이동합니다.

2. 다음 쿼리를 입력합니다.

   ```sql
   FROM Vulnerability SELECT * where source = 'Snyk' since 7 days ago
   ```

   <img
     title="Query vulnerability events"
     alt="Query vulnerability events"
     src={vulnerabilitymanagementQueryVulnEvents}
   />

   <figcaption>
     **[one.newrelic.com](https://one.newrelic.com) > All capabilities > Query your data**
   </figcaption>

### Snyk 대시보드 [#snyk-dashboard]

[New Relic Instant Observability 마켓플레이스](https://newrelic.com/instant-observability/snyk)에서 사전 구축된 Snyk 대시보드를 설치할 수 있습니다.

이 대시보드는 취약성 데이터에 대한 또 다른 보기를 제공하며 차트 위젯을 사용하여 Snyk 통합 데이터에서 고유한 대시보드 보기를 구축할 수 있습니다.

<img
  title="Snyk dashboard"
  alt="Snyk dashboard"
  src={vmSnykDashboard}
/>

<figcaption>
  [Instant Observability Snyk 대시보드를](https://newrelic.com/instant-observability/snyk)설치합니다.
</figcaption>