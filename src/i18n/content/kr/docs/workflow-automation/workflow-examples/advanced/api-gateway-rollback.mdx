---
title: API 게이트웨이 롤백
tags:
  - workflow automation
  - workflow
  - aws
  - api gateway
metaDescription: 'Detect deployments via change tracking, send Slack approval requests, and automate API Gateway rollback.'
freshnessValidatedDate: never
translationType: machine
---

뉴렐릭 변경 추적을 통해 구현, 배포를 감지하고, Slack 승인 requests 보내고, AWS Systems Manager를 사용하여 API 게이트웨이 롤백을 자동화합니다.

**요구 사항:**

* AWS 자격 증명(API Gateway + Systems Manager)
* 슬랙 토큰
* 뉴렐릭 검토

**이 흐름이 하는 일은:**

* 최근 형상 감지, 뉴렐릭 변경 추적을 사용한 배포
* 승인 버튼이 포함된 Slack 알림 전송 `(:+1: or :-1:)`
* 승인 후 SSM 문서를 생성하여 롤백을 자동화합니다.
* API Gateway 통합을 이전 Lambda 버전으로 되돌리기
* 새로운 구현을 생성하고, 롤백을 적용하기 위한 배포
* 상태 알림을 Slack으로 전송합니다
* 완료 후 SSM 문서를 정리합니다.

**주요 작업**: `newrelic.nerdgraph.execute`, `slack.chat.postMessage`, `slack.chat.getReactions`, `aws.systemsManager.writeDocument`, `aws.systemsManager.startAutomation`, `aws.systemsManager.waitForAutomationStatus`, `aws.systemsManager.deleteDocument`

## 무엇 향후 계획

* **[EC2 관리](/docs/workflow-automation/workflow-examples/advanced/ec2-management)**: 인프라 자동화
* **[NRQL 알림](/docs/workflow-automation/workflow-examples/advanced/nrql-alerting)**: 맞춤 공지 패턴