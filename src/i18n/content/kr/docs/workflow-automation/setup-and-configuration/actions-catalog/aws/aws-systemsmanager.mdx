---
title: AWS Systems Manager 작업
tags:
  - workflow automation
  - workflow
  - workflow automation actions
  - AWS actions
  - AWS Systems Manager actions
metaDescription: A list of available aws systems manager actions in the actions catalog for workflow definitions
freshnessValidatedDate: never
translationType: machine
---

<Callout title="시사">
  이 기능은 아직 개발 중이지만 꼭 사용해 보시기 바랍니다!

  이 기능은 현재 [출시 전 정책](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy) 에 따라 미리보기 프로그램의 일부로 제공됩니다.
</Callout>

이 페이지는 자동화 작업 카탈로그에서 사용할 수 있는 AWS 시스템 관리자 작업에 대한 포괄적인 참조 정보를 제공합니다. 이러한 조치를 통해 시스템 관리자 자동화 및 문서 운영을 수행할 수 있습니다.

## 전제 조건

블리자드 자동화에서 AWS 작업을 사용하기 전에 다음 사항이 있는지 확인하세요.

* 적절한 권한이 있는 AWS 계정.
* AWS 자격 증명이 구성되었습니다(IAM 사용자 자격 증명, IAM 역할 ARN 또는 세션 자격 증명).
* 사용하려는 특정 AWS 서비스에 필요한 IAM 권한입니다.

IAM 사용자 및 IAM 역할을 만드는 방법과 펠로우 자동화 AWS 작업과 통합하기 위한 정적 및 세션 AWS 자격 증명을 설정하는 방법에 대한 자세한 내용은 [AWS 자격 증명 설정을](/docs/workflow-automation/setup-and-configuration/set-up-aws-credentials/) 참조하세요.

<CollapserGroup>
  <Collapser id="aws-systemsmanager.writedocument" title="AWS용 SSM 문서를 작성하세요">
    작업 입력에 전달된 AWS 자격 증명을 기반으로 AWS 계정에 SSM 문서를 작성합니다. [AWS Systems Manager 설명서를](https://docs.aws.amazon.com/systems-manager/?id=docs_gateway)참조하십시오.

    <Tabs>
      <TabsBar>
        <TabsBarItem id="writedocumentinputs">
          입력
        </TabsBarItem>

        <TabsBarItem id="writedocumentoutputs">
          출력
        </TabsBarItem>

        <TabsBarItem id="writedocumentexample">
          예시
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="writedocumentinputs">
          <table>
            <thead>
              <tr>
                <th>
                  입력 필드
                </th>

                <th>
                  선택성
                </th>

                <th>
                  유형
                </th>

                <th>
                  예시
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **awsRoleArn**
                </td>

                <td>
                  선택 과목
                </td>

                <td>
                  문자열
                </td>

                <td>
                  `arn:aws:iam::123456789012:role/my-workflow-role`
                </td>
              </tr>

              <tr>
                <td>
                  **awsAccessKeyId**
                </td>

                <td>
                  선택 과목
                </td>

                <td>
                  문자열
                </td>

                <td>
                  `${{ :secrets:<awsAccessKeyId> }}`
                </td>
              </tr>

              <tr>
                <td>
                  **awsSecretAccessKey**
                </td>

                <td>
                  선택 과목
                </td>

                <td>
                  문자열
                </td>

                <td>
                  `${{ :secrets:<awsSecretAccessKey> }}`
                </td>
              </tr>

              <tr>
                <td>
                  **awsSessionToken**
                </td>

                <td>
                  선택 과목
                </td>

                <td>
                  문자열
                </td>

                <td>
                  `${{ :secrets:<awsSessionToken> }}`
                </td>
              </tr>

              <tr>
                <td>
                  **지역**
                </td>

                <td>
                  필수의
                </td>

                <td>
                  문자열
                </td>

                <td>
                  `region: "us-east-2"`
                </td>
              </tr>

              <tr>
                <td>
                  **documentName**
                </td>

                <td>
                  필수의
                </td>

                <td>
                  문자열
                </td>

                <td>
                  `documentName: "my-ssm-document"`
                </td>
              </tr>

              <tr>
                <td>
                  **documentType**
                </td>

                <td>
                  선택 과목
                </td>

                <td>
                  문자열
                </td>

                <td>
                  `documentType: "Command"`

                  [여기](https://docs.aws.amazon.com/systems-manager/latest/APIReference/API_DocumentDescription.html#systemsmanager-Type-DocumentDescription-Status:text=Required%3A%20No-,Status,-The%20status%20of) 에서 유효한 값을 확인하세요.
                </td>
              </tr>

              <tr>
                <td>
                  **documentFormat**
                </td>

                <td>
                  선택 과목
                </td>

                <td>
                  문자열
                </td>

                <td>
                  `documentFormat: "YAML"`

                  [여기](https://docs.aws.amazon.com/systems-manager/latest/APIReference/API_DocumentDescription.html#systemsmanager-Type-DocumentDescription-Status:text=Required%3A%20No-,Status,-The%20status%20of) 에서 유효한 값을 확인하세요.
                </td>
              </tr>

              <tr>
                <td>
                  **documentContent**
                </td>

                <td>
                  필수의
                </td>

                <td>
                  문자열
                </td>

                <td>
                  확인 예시
                </td>
              </tr>

              <tr>
                <td>
                  **override**
                </td>

                <td>
                  선택 과목
                </td>

                <td>
                  부울
                </td>

                <td>
                  `override: true (default)`.

                  `true` 일 경우, 이미 존재하는 문서라 하더라도 항상 제공된 이름으로 문서를 작성합니다.

                  `false` 일 때, 제공된 `documentName` 가진 문서가 이미 존재하는 경우, 해당 작업은 `success: false` 반환합니다. `errorMessage: Document already exists. Please enable override if you want to update the existing document.`
                </td>
              </tr>

              <tr>
                <td>
                  **선택기**
                </td>

                <td>
                  선택 과목
                </td>

                <td>
                  목록
                </td>

                <td>
                  `[{\"name\": \"documentName\", \"expression\": \".documentName\"}, {\"name\": \"documentType\", \"expression\": \".documentType\"}, {\"name\": \"documentStatus\", \"expression\": \".documentStatus\"}, {\"name\": \"success\", \"expression\": \".success\"}]`
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="writedocumentoutputs">
          <table>
            <thead>
              <tr>
                <th>
                  출력 필드
                </th>

                <th>
                  유형
                </th>

                <th>
                  설명 및 예시
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **documentName**
                </td>

                <td>
                  문자열
                </td>

                <td>
                  `documentName: "my-ssm-document"`
                </td>
              </tr>

              <tr>
                <td>
                  **documentVersion**
                </td>

                <td>
                  문자열
                </td>

                <td>
                  `documentVersion: 1`
                </td>
              </tr>

              <tr>
                <td>
                  **documentType**
                </td>

                <td>
                  문자열
                </td>

                <td>
                  `documentType: "Command"`
                </td>
              </tr>

              <tr>
                <td>
                  **documentStatus**
                </td>

                <td>
                  문자열
                </td>

                <td>
                  `documentStatus: "Active"`

                  해당 값은 [여기](https://docs.aws.amazon.com/systems-manager/latest/APIReference/API_DocumentDescription.html#systemsmanager-Type-DocumentDescription-Status:text=Required%3A%20No-,Status,-The%20status%20of) 에 있는 상태 중 하나가 될 것입니다.
                </td>
              </tr>

              <tr>
                <td>
                  **성공**
                </td>

                <td>
                  부울
                </td>

                <td>
                  `success: true`
                </td>
              </tr>

              <tr>
                <td>
                  **오류 메시지**
                </td>

                <td>
                  문자열
                </td>

                <td>
                  `errorMessage: "Some error message from ssm"`
                </td>
              </tr>
            </tbody>
          </table>

          <Callout variant="important">
            * 액션 입력에는 `awsAccessKeyId` 과 `awsSecretAccessKey` 만 제공할 수 있지만, 이는 IAM 사용자의 정적 자격 증명이어야 합니다.
            * 세션 자격 증명을 사용하려면 `awsAccessKeyId`, `awsSecretAccessKey` 및 `awsSessionToken` 작업 입력에 전달해야 합니다.
            * 지정된 유일한 델파이를 출력으로 가져오는 선택기입니다.
            * 자세한 내용은 [AWS 자격 증명을](/docs/workflow-automation/setup-and-configuration/set-up-aws-credentials) 참조하십시오.
          </Callout>
        </TabsPageItem>

        <TabsPageItem id="writedocumentexample">
          **예시 1**: 모든 람다 함수를 나열하는 간단한 SSM 문서

          ```yaml
            schemaVersion: '0.3'
            description: List all Lambda function names.
            mainSteps:
              - name: ExecuteAwsApi
                action: aws:executeAwsApi
                isEnd: true
                inputs:
                  Service: lambda
                  Api: ListFunctions
                outputs:
                  - Name: resultFunctionName
                    Selector: $..FunctionName
                    Type: StringList
            outputs:
              - ExecuteAwsApi.resultFunctionName
          ```

          **SSM 목록 Lambda 함수를 포함한 완전한 자동 흐름 정의**

          ```yaml
            name: aws-api

            workflowInputs:
              key:
                type: String
                defaultValue: "${{ :secrets:11933347:USERNAME_AWS_ACCESS_KEY_ID }}"
              access:
                type: String
                defaultValue: "${{ :secrets:11933347:USERNAME_AWS_SECRET_ACCESS_KEY }}"
              token:
                type: String
                defaultValue: "${{ :secrets:11933347:USERNAME_AWS_SESSION_TOKEN }}"
              region:
                type: String
                defaultValue: us-east-2

            steps:
              - name: createSsmDocument
                type: action
                action: aws.systemsManager.writeDocument
                version: 1
                inputs:
                  awsAccessKeyId: ${{ .workflowInputs.key }}
                  awsSecretAccessKey: ${{ .workflowInputs.access }}
                  awsSessionToken: ${{ .workflowInputs.token }}
                  region: ${{ .workflowInputs.region }}
                  selectors:
                    - name: documentName
                      expression: '.documentName'
                    - name: documentType
                      expression: '.documentType'
                    - name: documentStatus
                      expression: '.documentStatus'
                    - name: success
                      expression: '.success'
                  documentName: "LambdaListFunctionNames"
                  documentContent: |
                    schemaVersion: '0.3'
                    description: List all Lambda function names.
                    mainSteps:
                      - name: ExecuteAwsApi
                        action: aws:executeAwsApi
                        isEnd: true
                        inputs:
                          Service: lambda
                          Api: ListFunctions
                        outputs:
                          - Name: resultFunctionName
                            Selector: $..FunctionName
                            Type: StringList
                    outputs:
                      - ExecuteAwsApi.resultFunctionName

              - name: generateIdempotencyToken
                type: action
                action: utils.uuid.generate
                version: 1

              - name: start1
                type: action
                action: aws.systemsManager.startAutomation
                version: 1
                inputs:
                  awsAccessKeyId: ${{ .workflowInputs.key }}
                  awsSecretAccessKey: ${{ .workflowInputs.access }}
                  awsSessionToken: ${{ .workflowInputs.token }}
                  region: ${{ .workflowInputs.region }}
                  documentName: "${{ .steps.createSsmDocument.outputs.documentName }}"
                  idempotencyToken: ${{ .steps.generateIdempotencyToken.outputs.uuid }}

              - name: waitForCompletion
                type: action
                action: aws.systemsManager.waitForAutomationStatus
                version: 1
                inputs:
                  awsAccessKeyId: ${{ .workflowInputs.key }}
                  awsSecretAccessKey: ${{ .workflowInputs.access }}
                  awsSessionToken: ${{ .workflowInputs.token }}
                  region: ${{ .workflowInputs.region }}
                  automationExecutionId: ${{ .steps.start1.outputs.automationExecutionId }}
                  # Optional, default is Success and Failed
                  automationExecutionStatuses:
                    - "Success"
                    - "Failed"
                  timeout: 60

              - name: hasCompleted
                type: switch
                switch:
                  - condition: ${{ .steps.waitForCompletion.outputs.automationExecutionStatus == "Failed" }}
                    next: displayError
                  - condition: ${{ .steps.waitForCompletion.outputs.automationExecutionStatus == "Success" }}
                    next: displaySuccess
                next: displayUnexpected

              - name: displayUnexpected
                type: action
                action: newrelic.instrumentation.log
                version: 1
                inputs:
                  message: "Unexpected status ${{ .steps.waitForCompletion.outputs.automationExecutionStatus | tojson }}"
                next: cleanupSsmDocument

              - name: displaySuccess
                type: action
                action: newrelic.instrumentation.log
                version: 1
                inputs:
                  message: "This is all the lambda function names on the region ${{ .workflowInputs.region }}:${{ .steps.waitForCompletion.outputs.automationExecutionOutputs.ExecuteAwsApi.resultFunctionName | join(\",\") }}"
                next: cleanupSsmDocument

              - name: displayError
                type: action
                action: newrelic.instrumentation.log
                version: 1
                inputs:
                  message: "Error while executing document ${{ .steps.createSsmDocument.outputs.documentName }}, detail: ${{ .steps.waitForCompletion.outputs.errorMessage }}"
                next: cleanupSsmDocument

              - name: cleanupSsmDocument
                type: action
                action: aws.systemsManager.deleteDocument
                version: 1
                inputs:
                  awsAccessKeyId: ${{ .workflowInputs.key }}
                  awsSecretAccessKey: ${{ .workflowInputs.access }}
                  awsSessionToken: ${{ .workflowInputs.token }}
                  region: ${{ .workflowInputs.region }}
                  documentName: ${{ .steps.createSsmDocument.outputs.documentName }}
          ```

          **예제 2: 파이썬 스크립트 실행**

          <Collapser id="execute.python.script" title="파이썬 스크립트 실행">
            AWS `SystemsManager` 자동화 및 문서 작업을 사용하여 Python 펼쳐를 실행하는 플로우 흐름 정의를 정의할 수 있습니다.

            다음은 간단한 &quot;Hello World&quot; 애플리케이션을 통해 설명하는 짧은 예시입니다.

            <Collapser id="system.manager.document" title="SystemsManager 문서">
              ```yaml
                schemaVersion: '0.3'
                description: "Run a Python script that says 'Hello' to the username passed as input and capture the output."
                parameters:
                  Username:
                    type: String
                    description: "The username to greet."
                    default: "User"
                mainSteps:
                  - action: aws:executeScript
                    name: pythonStep
                    inputs:
                      Runtime: python3.8
                      Handler: script_handler
                      Script: |
                        def script_handler(event, context):
                            username = event['username']
                            return f'Hello {username}'
                      InputPayload:
                        username: "{{ Username }}"
                    outputs:
                      - Name: scriptOutput
                        Type: String
                        Selector: $.Payload
                outputs:
                  - pythonStep.scriptOutput
              ```

              그러면 이것은 아래의 참조우에서 사용할 수 있습니다.

              <Collapser id="workflow.definition.1" title="흐름의 정의">
                ```yaml
                  name: aws-python-script

                  workflowInputs:
                    key:
                      type: String
                      defaultValue: "${{ :secrets:11933347:USERNAME_AWS_ACCESS_KEY_ID }}"
                    access:
                      type: String
                      defaultValue: "${{ :secrets:11933347:USERNAME_AWS_SECRET_ACCESS_KEY }}"
                    token:
                      type: String
                      defaultValue: "${{ :secrets:11933347:USERNAME_AWS_SESSION_TOKEN }}"
                    region:
                      type: String
                      defaultValue: us-west-2
                    name:
                      type: String
                      defaultValue: ExecuteHelloPythonScript
                    username:
                      type: String
                      defaultValue: World!

                  steps:
                    - name: generateIdempotencyToken
                      type: action
                      action: utils.uuid.generate
                      version: 1

                    - name: createSsmDocument
                      type: action
                      action: aws.systemsManager.writeDocument
                      version: 1
                      inputs:
                        awsAccessKeyId: ${{ .workflowInputs.key }}
                        awsSecretAccessKey: ${{ .workflowInputs.access }}
                        awsSessionToken: ${{ .workflowInputs.token }}
                        region: ${{ .workflowInputs.region }}
                        documentName: ${{ .workflowInputs.name }}
                        documentContent: |
                          schemaVersion: '0.3'
                          description: "Run a Python script that says 'Hello' to the username passed as input and capture the output."
                          parameters:
                            Username:
                              type: String
                              description: "The username to greet."
                              default: "User"
                          mainSteps:
                            - action: aws:executeScript
                              name: pythonStep
                              inputs:
                                Runtime: python3.8
                                Handler: script_handler
                                Script: |
                                  def script_handler(event, context):
                                      username = event['username']
                                      return f'Hello {username}'
                                InputPayload:
                                  username: "{{ Username }}"
                              outputs:
                                - Name: scriptOutput
                                  Type: String
                                  Selector: $.Payload
                          outputs:
                            - pythonStep.scriptOutput

                    - name: start1
                      type: action
                      action: aws.systemsManager.startAutomation
                      version: 1
                      inputs:
                        awsAccessKeyId: ${{ .workflowInputs.key }}
                        awsSecretAccessKey: ${{ .workflowInputs.access }}
                        awsSessionToken: ${{ .workflowInputs.token }}
                        region: ${{ .workflowInputs.region }}
                        documentName: "${{ .steps.createSsmDocument.outputs.documentName }}"
                        idempotencyToken: ${{ .steps.generateIdempotencyToken.outputs.uuid }}
                        parameters:
                          Username: ${{ .workflowInputs.username }}

                    - name: waitForCompletion
                      type: action
                      action: aws.systemsManager.waitForAutomationStatus
                      version: 1
                      inputs:
                        awsAccessKeyId: ${{ .workflowInputs.key }}
                        awsSecretAccessKey: ${{ .workflowInputs.access }}
                        awsSessionToken: ${{ .workflowInputs.token }}
                        region: ${{ .workflowInputs.region }}
                        automationExecutionId: ${{ .steps.start1.outputs.automationExecutionId }}
                        # Optional, default is Success and Failed
                        automationExecutionStatuses:
                          - "Success"
                          - "Failed"
                        timeout: 300

                    - name: hasCompleted
                      type: switch
                      switch:
                        - condition: ${{ .steps.waitForCompletion.outputs.automationExecutionStatus == "Failed" }}
                          next: displayError
                        - condition: ${{ .steps.waitForCompletion.outputs.automationExecutionStatus == "Success" }}
                          next: displaySuccess
                      next: displayUnexpected

                    - name: displayUnexpected
                      type: action
                      action: newrelic.instrumentation.log
                      version: 1
                      inputs:
                        message: "Unexpected status ${{ .steps.waitForCompletion.outputs.automationExecutionStatus | tojson }}"
                      next: cleanupSsmDocument

                    - name: displaySuccess
                      type: action
                      action: newrelic.instrumentation.log
                      version: 1
                      inputs:
                        message: "This is the results of the automation that was run on the region ${{ .workflowInputs.region }}:${{ .steps.waitForCompletion.outputs.automationExecutionOutputs.pythonStep.scriptOutput | tojson }}"
                      next: cleanupSsmDocument

                    - name: displayError
                      type: action
                      action: newrelic.instrumentation.log
                      version: 1
                      inputs:
                        message: "Error while executing document ${{ .steps.createSsmDocument.outputs.documentName }}, detail: ${{ .steps.waitForCompletion.outputs | tojson }}"
                      next: cleanupSsmDocument

                    - name: cleanupSsmDocument
                      type: action
                      action: aws.systemsManager.deleteDocument
                      version: 1
                      inputs:
                        awsAccessKeyId: ${{ .workflowInputs.key }}
                        awsSecretAccessKey: ${{ .workflowInputs.access }}
                        awsSessionToken: ${{ .workflowInputs.token }}
                        region: ${{ .workflowInputs.region }}
                        documentName: ${{ .steps.createSsmDocument.outputs.documentName }}
                ```

                AWS 임시 비밀 키가 `secretsManagementCreateSecretNerdGraph` 변형과 함께 이전에 저장되었다고 가정하면 다음 NerdGraph 변형을 사용하여 시작할 수 있습니다.

                ```yaml
                      mutation { 
                      autoflowsStartWorkflowRun(accountId: 11933347,
                      definition: {
                          name: "aws-python-script",
                      }, workflowInputs: [
                          {key: "key" value: "${{ :secrets:testUser123_AWS_ACCESS_KEY_ID }}"}
                          {key: "access" value: "${{ :secrets:testUser123_AWS_SECRET_ACCESS_KEY }}"}
                          {key: "token" value: "${{ :secrets:testUser123_AWS_SESSION_TOKEN }}"}
                          {key: "region" value:"us-west-2"}
                          {key: "username" value: "Julien"}
                      ]) 
                      { runId }
                  } 
                ```

                위의 변경을 실행하면 예를 들어 `207e8c23-2c89-4af2-a74f-3c9ea2ffd543` 과 같은 runId가 반환됩니다. 이 runId를 사용하여 로그를 쿼리하면 다음과 같은 출력을 볼 수 있습니다.

                <img title="Image of a python script execution output" alt="Image of a python script execution output" src="/images/python-script.webp" />
              </Collapser>
            </Collapser>
          </Collapser>

          **예시 3: 보다 복잡한 SSM 문서**

          1. API 게이트웨이 REST API 목록을 가져옵니다. 내 API(`Test API`)를 필터링하고 나머지 API ID를 가져옵니다.
          2. 내 API(`Test API`) 내의 모든 리소스 목록을 가져옵니다. pathPart(`/test`)를 기준으로 특정 리소스를 필터링하고 resourceID를 가져옵니다.
          3. 내 람다 함수(`ApiGwTestFn`)의 버전 목록을 가져옵니다. 원하는 특정 버전(버전: 1)으로 롤백하고 해당 버전의 functionArn을 가져옵니다.
          4. 위 단계에서 얻은 람다 함수Arn을 사용하여 API 게이트웨이 통합을 업데이트합니다.
          5. 내 Rest API (`Test API`)에 대한 새로운 구현 배포를 만듭니다.

          <Collapser id="ssm.document.performing" title="SSM 문서에서 API 게이트웨이 롤백을 수행합니다.">
            ```yaml
              schemaVersion: '0.3'
              description: Test SSM for API gateway rollback
              mainSteps:
                - name: ExecuteAwsApi
                  action: aws:executeAwsApi
                  nextStep: ExecuteGetApiResources
                  inputs:
                    Service: apigateway
                    Api: GetRestApis
                  outputs:
                    - Name: resultApiId
                      Selector: $.items[?(@.name=='Test API')].id
                      Type: String
                - name: ExecuteGetApiResources
                  action: aws:executeAwsApi
                  nextStep: ExecuteListVersionsByFunction
                  inputs:
                    Service: apigateway
                    Api: GetResources
                    restApiId: '{{ ExecuteAwsApi.resultApiId }}'
                  outputs:
                    - Name: resultResourceId
                      Selector: $.items[?(@.pathPart=='test')].id
                      Type: String
                - name: ExecuteListVersionsByFunction
                  action: aws:executeAwsApi
                  nextStep: ExecuteApiGwUpdateIntg
                  inputs:
                    Service: lambda
                    Api: ListVersionsByFunction
                    FunctionName: ApiGwTestFn
                  outputs:
                    - Name: resultLambdaVersionArn
                      Selector: $.Versions[?(@.Version=='1')].FunctionArn
                      Type: String
                - name: ExecuteApiGwUpdateIntg
                  action: aws:executeAwsApi
                  nextStep: ExecuteApiGwCreateDeployment
                  inputs:
                    Service: apigateway
                    Api: UpdateIntegration
                    restApiId: '{{ ExecuteAwsApi.resultApiId }}'
                    resourceId: '{{ ExecuteGetApiResources.resultResourceId }}'
                    httpMethod: GET
                    patchOperations:
                      - op: replace
                        path: /uri
                        value: arn:aws:apigateway:us-east-2:lambda:path/2015-03-31/functions/{{ ExecuteListVersionsByFunction.resultLambdaVersionArn }}/invocations
                - name: ExecuteApiGwCreateDeployment
                  action: aws:executeAwsApi
                  inputs:
                    Service: apigateway
                    Api: CreateDeployment
                    restApiId: '{{ ExecuteAwsApi.resultApiId }}'
              outputs:
                - ExecuteGetApiResources.resultResourceId
                - ExecuteListVersionsByFunction.resultLambdaVersionArn
            ```
          </Collapser>

          샘플 SSM은 `ExecuteGetApiResources.resultResourceId` 과 `ExecuteListVersionsByFunction.resultLambdaVersionArn` 출력합니다. 이러한 출력값은 도표우 정의의 후속 단계에서 사용될 수 있습니다.
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>
</CollapserGroup>

<CollapserGroup>
  <Collapser id="aws-systemsmanager.deletedocument" title="AWS SSM 문서 삭제">
    이 작업은 작업 입력에 전달된 자격 증명을 기반으로 AWS 계정에서 AWS SSM 문서를 삭제하는 것입니다. [AWS Systems Manager 설명서를](https://docs.aws.amazon.com/systems-manager/latest/userguide/documents.html)참조하십시오.

    <Tabs>
      <TabsBar>
        <TabsBarItem id="systemsmanagerinputs">
          입력
        </TabsBarItem>

        <TabsBarItem id="systemsmanageroutputs">
          출력
        </TabsBarItem>

        <TabsBarItem id="systemsmanagerexample">
          예시
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="systemsmanagerinputs">
          <table>
            <thead>
              <tr>
                <th>
                  입력 필드
                </th>

                <th>
                  선택성
                </th>

                <th>
                  유형
                </th>

                <th>
                  예시
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **awsRoleArn**
                </td>

                <td>
                  선택 과목
                </td>

                <td>
                  문자열
                </td>

                <td>
                  `arn:aws:iam::123456789012:role/my-workflow-role`
                </td>
              </tr>

              <tr>
                <td>
                  **awsAccessKeyId**
                </td>

                <td>
                  필수의
                </td>

                <td>
                  문자열
                </td>

                <td>
                  `${{ :secrets:<awsAccessKeyId> }}`
                </td>
              </tr>

              <tr>
                <td>
                  **awsSecretAccessKey**
                </td>

                <td>
                  필수의
                </td>

                <td>
                  문자열
                </td>

                <td>
                  `${{ :secrets:<awsSecretAccessKey> }}`
                </td>
              </tr>

              <tr>
                <td>
                  **awsSessionToken**
                </td>

                <td>
                  선택 과목
                </td>

                <td>
                  문자열
                </td>

                <td>
                  `${{ :secrets:<awsSessionToken> }}`
                </td>
              </tr>

              <tr>
                <td>
                  **지역**
                </td>

                <td>
                  필수의
                </td>

                <td>
                  문자열
                </td>

                <td>
                  `region: "us-east-2"`
                </td>
              </tr>

              <tr>
                <td>
                  **documentName**
                </td>

                <td>
                  필수의
                </td>

                <td>
                  문자열
                </td>

                <td>
                  `documentName: "my-ssm-document"`
                </td>
              </tr>

              <tr>
                <td>
                  **선택기**
                </td>

                <td>
                  선택 과목
                </td>

                <td>
                  목록
                </td>

                <td>
                  `[{\"name\": \"success\", \"expression\": \".success\"}, {\"name\": \"documentName\", \"expression\": \".documentName\"}]`
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="systemsmanageroutputs">
          <table>
            <thead>
              <tr>
                <th>
                  출력 필드
                </th>

                <th>
                  유형
                </th>

                <th>
                  예시
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **documentName**
                </td>

                <td>
                  문자열
                </td>

                <td>
                  `documentName: "my-ssm-document"`
                </td>
              </tr>

              <tr>
                <td>
                  **성공**
                </td>

                <td>
                  부울
                </td>

                <td>
                  `success: true`
                </td>
              </tr>

              <tr>
                <td>
                  **오류 메시지**
                </td>

                <td>
                  문자열
                </td>

                <td>
                  `errorMessage: "Some error message from ssm"`
                </td>
              </tr>
            </tbody>
          </table>

          <Callout variant="important">
            * 액션 입력에는 `awsAccessKeyId` 과 `awsSecretAccessKey` 만 제공할 수 있지만, 이는 IAM 사용자의 정적 자격 증명이어야 합니다.
            * 세션 자격 증명을 사용하려면 `awsAccessKeyId`, `awsSecretAccessKey` 및 `awsSessionToken` 작업 입력에 전달해야 합니다.
            * 지정된 유일한 델파이를 출력으로 가져오는 선택기입니다.
          </Callout>
        </TabsPageItem>

        <TabsPageItem id="systemsmanagerexample">
          모든 람다 함수를 나열하는 간단한 SSM 문서

          ```yaml
            schemaVersion: '0.3'
            description: List all Lambda function names.
            mainSteps:
              - name: ExecuteAwsApi
                action: aws:executeAwsApi
                isEnd: true
                inputs:
                  Service: lambda
                  Api: ListFunctions
                outputs:
                  - Name: resultFunctionName
                    Selector: $..FunctionName
                    Type: StringList
            outputs:
              - ExecuteAwsApi.resultFunctionName
          ```

          **SSM을 사용한 완전한 정의**:

          ```yaml
            name: aws-api

            workflowInputs:
              key:
                type: String
                defaultValue: "${{ :secrets:11933347:USERNAME_AWS_ACCESS_KEY_ID }}"
              access:
                type: String
                defaultValue: "${{ :secrets:11933347:USERNAME_AWS_SECRET_ACCESS_KEY }}"
              token:
                type: String
                defaultValue: "${{ :secrets:11933347:USERNAME_AWS_SESSION_TOKEN }}"
              region:
                type: String
                defaultValue: us-east-2

            steps:
              - name: createSsmDocument
                type: action
                action: aws.systemsManager.writeDocument
                version: 1
                inputs:
                  awsAccessKeyId: ${{ .workflowInputs.key }}
                  awsSecretAccessKey: ${{ .workflowInputs.access }}
                  awsSessionToken: ${{ .workflowInputs.token }}
                  region: ${{ .workflowInputs.region }}
                  selectors:
                    - name: documentName
                      expression: '.documentName'
                    - name: documentType
                      expression: '.documentType'
                    - name: documentStatus
                      expression: '.documentStatus'
                    - name: success
                      expression: '.success'
                  documentName: "LambdaListFunctionNames"
                  documentContent: |
                    schemaVersion: '0.3'
                    description: List all Lambda function names.
                    mainSteps:
                      - name: ExecuteAwsApi
                        action: aws:executeAwsApi
                        isEnd: true
                        inputs:
                          Service: lambda
                          Api: ListFunctions
                        outputs:
                          - Name: resultFunctionName
                            Selector: $..FunctionName
                            Type: StringList
                    outputs:
                      - ExecuteAwsApi.resultFunctionName

              - name: generateIdempotencyToken
                type: action
                action: utils.uuid.generate
                version: 1

              - name: start1
                type: action
                action: aws.systemsManager.startAutomation
                version: 1
                inputs:
                  awsAccessKeyId: ${{ .workflowInputs.key }}
                  awsSecretAccessKey: ${{ .workflowInputs.access }}
                  awsSessionToken: ${{ .workflowInputs.token }}
                  region: ${{ .workflowInputs.region }}
                  documentName: "${{ .steps.createSsmDocument.outputs.documentName }}"
                  idempotencyToken: ${{ .steps.generateIdempotencyToken.outputs.uuid }}

              - name: waitForCompletion
                type: action
                action: aws.systemsManager.waitForAutomationStatus
                version: 1
                inputs:
                  awsAccessKeyId: ${{ .workflowInputs.key }}
                  awsSecretAccessKey: ${{ .workflowInputs.access }}
                  awsSessionToken: ${{ .workflowInputs.token }}
                  region: ${{ .workflowInputs.region }}
                  automationExecutionId: ${{ .steps.start1.outputs.automationExecutionId }}
                  # Optional, default is Success and Failed
                  automationExecutionStatuses:
                    - "Success"
                    - "Failed"
                  timeout: 60

              - name: hasCompleted
                type: switch
                switch:
                  - condition: ${{ .steps.waitForCompletion.outputs.automationExecutionStatus == "Failed" }}
                    next: displayError
                  - condition: ${{ .steps.waitForCompletion.outputs.automationExecutionStatus == "Success" }}
                    next: displaySuccess
                next: displayUnexpected

              - name: displayUnexpected
                type: action
                action: newrelic.instrumentation.log
                version: 1
                inputs:
                  message: "Unexpected status ${{ .steps.waitForCompletion.outputs.automationExecutionStatus | tojson }}"
                next: cleanupSsmDocument

              - name: displaySuccess
                type: action
                action: newrelic.instrumentation.log
                version: 1
                inputs:
                  message: "This is all the lambda function names on the region ${{ .workflowInputs.region }}:${{ .steps.waitForCompletion.outputs.automationExecutionOutputs.ExecuteAwsApi.resultFunctionName | join(\",\") }}"
                next: cleanupSsmDocument

              - name: displayError
                type: action
                action: newrelic.instrumentation.log
                version: 1
                inputs:
                  message: "Error while executing document ${{ .steps.createSsmDocument.outputs.documentName }}, detail: ${{ .steps.waitForCompletion.outputs.errorMessage }}"
                next: cleanupSsmDocument

              - name: cleanupSsmDocument
                type: action
                action: aws.systemsManager.deleteDocument
                version: 1
                inputs:
                  awsAccessKeyId: ${{ .workflowInputs.key }}
                  awsSecretAccessKey: ${{ .workflowInputs.access }}
                  awsSessionToken: ${{ .workflowInputs.token }}
                  region: ${{ .workflowInputs.region }}
                  documentName: ${{ .steps.createSsmDocument.outputs.documentName }}
          ```
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>
</CollapserGroup>

<CollapserGroup>
  <Collapser id="aws-systemsmanager.startautomation" title="SSM 문서를 사용하여 자동화를 시작하세요">
    AWS SSM 문서를 사용하여 자동화를 시작합니다. [AWS Systems Manager 설명서를](https://docs.aws.amazon.com/systems-manager/latest/APIReference/API_StartAutomationExecution.html)참조하십시오.

    <Tabs>
      <TabsBar>
        <TabsBarItem id="startautomationinputs">
          입력
        </TabsBarItem>

        <TabsBarItem id="startautomationoutputs">
          출력
        </TabsBarItem>

        <TabsBarItem id="startautomationexample">
          예시
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="startautomationinputs">
          <table>
            <thead>
              <tr>
                <th>
                  입력 필드
                </th>

                <th>
                  선택성
                </th>

                <th>
                  유형
                </th>

                <th>
                  예시
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **awsRoleArn**
                </td>

                <td>
                  선택 과목
                </td>

                <td>
                  문자열
                </td>

                <td>
                  `arn:aws:iam::123456789012:role/my-workflow-role`
                </td>
              </tr>

              <tr>
                <td>
                  **awsAccessKeyId**
                </td>

                <td>
                  선택 과목
                </td>

                <td>
                  문자열
                </td>

                <td>
                  `${{ :secrets:<awsAccessKeyId> }}`
                </td>
              </tr>

              <tr>
                <td>
                  **awsSecretAccessKey**
                </td>

                <td>
                  선택 과목
                </td>

                <td>
                  문자열
                </td>

                <td>
                  `${{ :secrets:<awsSecretAccessKey> }}`
                </td>
              </tr>

              <tr>
                <td>
                  **awsSessionToken**
                </td>

                <td>
                  선택 과목
                </td>

                <td>
                  문자열
                </td>

                <td>
                  `${{ :secrets:<awsSessionToken> }}`
                </td>
              </tr>

              <tr>
                <td>
                  **지역**
                </td>

                <td>
                  필수의
                </td>

                <td>
                  문자열
                </td>

                <td>
                  `region: "us-east-2"`
                </td>
              </tr>

              <tr>
                <td>
                  **documentName**
                </td>

                <td>
                  필수의
                </td>

                <td>
                  문자열
                </td>

                <td>
                  `documentName: "my-ssm-document"`
                </td>
              </tr>

              <tr>
                <td>
                  **매개변수**
                </td>

                <td>
                  선택 과목
                </td>

                <td>
                  지도
                </td>

                <td>
                  `parameters: myKey: myValue`
                </td>
              </tr>

              <tr>
                <td>
                  **idempotencyToken**
                </td>

                <td>
                  선택 과목
                </td>

                <td>
                  UUID
                </td>

                <td>
                  `idempotencyToken: "any token"`

                  이것은 AWS SSM 자동화를 시작하기 위한 멱등성 확보를 위해 클라이언트 토큰으로 전달됩니다.
                </td>
              </tr>

              <tr>
                <td>
                  **선택기**
                </td>

                <td>
                  선택 과목
                </td>

                <td>
                  목록
                </td>

                <td>
                  `[{\"name\": \"automationExecutionId\", \"expression\": \".automationExecutionId\"}, {\"name\": \"success\", \"expression\": \".success\"}]`
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="startautomationoutputs">
          <table>
            <thead>
              <tr>
                <th>
                  출력 필드
                </th>

                <th>
                  유형
                </th>

                <th>
                  예시
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **automationExecutionId**
                </td>

                <td>
                  문자열
                </td>

                <td>
                  `automationExecutionId: "3143a28d-241c-4abd-a3ca-9c0ff3890241"`
                </td>
              </tr>

              <tr>
                <td>
                  **성공**
                </td>

                <td>
                  부울
                </td>

                <td>
                  `success: true`
                </td>
              </tr>

              <tr>
                <td>
                  **오류 메시지**
                </td>

                <td>
                  문자열
                </td>

                <td>
                  `errorMessage: "Some error message from ssm"`
                </td>
              </tr>
            </tbody>
          </table>

          <Callout variant="important">
            * 작업 입력에서 `awsAccessKeyId` 및 `awsSecretAccessKey` 제공해야 하는 경우 이것이 IAM 사용자의 정적 자격 증명인지 확인하세요.
            * 세션 자격 증명을 사용하려면 `awsAccessKeyId`, `awsSecretAccessKey` 및 `awsSessionToken` 작업 입력에 전달해야 합니다.
            * 자세한 내용은 [AWS 자격 증명을](/docs/workflow-automation/setup-and-configuration/set-up-aws-credentials/) 참조하십시오.
            * 선택기를 사용하여 지정된 프로토콜만 출력으로 가져옵니다.
          </Callout>
        </TabsPageItem>

        <TabsPageItem id="startautomationexample">
          <table>
            <thead>
              <tr>
                <th>
                  흐름의 정의
                </th>

                <th>
                  입력
                </th>

                <th>
                  출력
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  ```yaml
                    schemaVersion: '0.3'
                    description: List all Lambda function names.
                    mainSteps:
                      - name: ExecuteAwsApi
                        action: aws:executeAwsApi
                        isEnd: true
                  ```
                </td>

                <td>
                  ```yaml
                    Service: lambda
                          Api: ListFunctions
                  ```
                </td>

                <td>
                  ```yaml
                    - Name: resultFunctionName
                              Selector: $..FunctionName
                              Type: StringList
                      outputs:
                        - ExecuteAwsApi.resultFunctionName
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>
</CollapserGroup>

<CollapserGroup>
  <Collapser id="aws-systemsmanager.waitforautomationstatus" title="자동화 상태를 기다리세요">
    AWS 문서를 사용하여 자동화를 기다립니다. 자세한 내용은 [AWS Systems Manager 설명서를](https://docs.aws.amazon.com/systems-manager/?id=docs_gateway) 참조하세요.

    <Tabs>
      <TabsBar>
        <TabsBarItem id="automationstatusinputs">
          입력
        </TabsBarItem>

        <TabsBarItem id="automationstatusoutputs">
          출력
        </TabsBarItem>

        <TabsBarItem id="automationstatusexample">
          예시
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="automationstatusinputs">
          <table>
            <thead>
              <tr>
                <th>
                  입력 필드
                </th>

                <th>
                  선택성
                </th>

                <th>
                  유형
                </th>

                <th>
                  예시
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **awsRoleArn**
                </td>

                <td>
                  선택 과목
                </td>

                <td>
                  문자열
                </td>

                <td>
                  `arn:aws:iam::123456789012:role/my-workflow-role`
                </td>
              </tr>

              <tr>
                <td>
                  **awsAccessKeyId**
                </td>

                <td>
                  선택 과목
                </td>

                <td>
                  문자열
                </td>

                <td>
                  `${{ :secrets:<awsAccessKeyId> }}`
                </td>
              </tr>

              <tr>
                <td>
                  **awsSecretAccessKey**
                </td>

                <td>
                  선택 과목
                </td>

                <td>
                  문자열
                </td>

                <td>
                  `${{ :secrets:<awsSecretAccessKey> }}`
                </td>
              </tr>

              <tr>
                <td>
                  **awsSessionToken**
                </td>

                <td>
                  선택 과목
                </td>

                <td>
                  문자열
                </td>

                <td>
                  `${{ :secrets:<awsSessionToken> }}`
                </td>
              </tr>

              <tr>
                <td>
                  **지역**
                </td>

                <td>
                  필수의
                </td>

                <td>
                  문자열
                </td>

                <td>
                  `region: "us-east-2"`
                </td>
              </tr>

              <tr>
                <td>
                  **automationExecutionId**
                </td>

                <td>
                  필수의
                </td>

                <td>
                  문자열
                </td>

                <td>
                  `automationExecutionId: "3143a28d-241c-4abd-a3ca-9c0ff3890241"`

                  완료될 때까지 기다려야 하는 자동화 

                  `executionId`

                   입니다.
                </td>
              </tr>

              <tr>
                <td>
                  **automationExecutionStatuses**
                </td>

                <td>
                  선택 과목
                </td>

                <td>
                  목록
                </td>

                <td>
                  `automationExecutionStatuses: ["status1", "status2"]`

                  [AutomationExecution](https://docs.aws.amazon.com/systems-manager/latest/APIReference/API_AutomationExecution.html#AutomationExecutionStatus) 에서 대기를 중지할 수 있는 자동화 실행 상태 목록입니다.

                  기본: `["Success", "Failed"]`
                </td>
              </tr>

              <tr>
                <td>
                  **시간 초과**
                </td>

                <td>
                  선택 과목
                </td>

                <td>
                  정수
                </td>

                <td>
                  `timeout: 180`(기본값), 최대값 600.

                  자동화 상태가 예상되는 `automationExecutionStatuses` 중 하나가 될 때까지 기다릴 수 있는 시간(초)입니다.

                  타임아웃이 발생한 경우 출력에는 `success: false` 과 `errorMessag: Timeout waiting for automation status` 포함됩니다.
                </td>
              </tr>

              <tr>
                <td>
                  **선택기**
                </td>

                <td>
                  선택 과목
                </td>

                <td>
                  목록
                </td>

                <td>
                  `[{\"name\": \"automationExecutionStatus\", \"expression\": \".automationExecutionStatus\"}, {\"name\": \"scriptOutput\", \"expression\": \".automationExecutionOutputs.pythonStep.scriptOutput | tojson\"}]`

                  .
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="automationstatusoutputs">
          <table>
            <thead>
              <tr>
                <th>
                  출력 필드
                </th>

                <th>
                  유형
                </th>

                <th>
                  예시
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **automationExecutionId**
                </td>

                <td>
                  문자열
                </td>

                <td>
                  `automationExecutionId: "3143a28d-241c-4abd-a3ca-9c0ff3890241"`
                </td>
              </tr>

              <tr>
                <td>
                  **automationExecutionStatus**
                </td>

                <td>
                  문자열
                </td>

                <td>
                  `automationExecutionStatus: "Success"`

                  작업이 성공하면 `automationExecutionStatuses` 입력 필드에 전달된 값 중 하나가 됩니다.

                  그렇지 않으면 이 값은 null이 됩니다.
                </td>
              </tr>

              <tr>
                <td>
                  **automationExecutionOutputs**
                </td>

                <td>
                  지도
                </td>

                <td>
                  ```yaml
                    "automationExecutionOutputs": {
                          "ExecuteGetApiResources": {
                            "resultResourceId": [
                              "pky3cb"
                            ]
                          },
                          "ExecuteListVersionsByFunction": {
                            "resultLambdaVersionArn": [
                              "arn:aws:lambda:us-east-2:661945836867:function:ApiGwTestFn:1"
                            ]
                          }
                    }
                  ```

                  출력은 문서의 출력 값 맵이 됩니다. 문서의 모든 출력은 이 출력 필드를 사용하여 수집할 수 있으며 펠로우 자동화 정의의 후속 단계에서 사용할 수 있습니다.
                </td>
              </tr>

              <tr>
                <td>
                  **성공**
                </td>

                <td>
                  부울
                </td>

                <td>
                  `success: true`
                </td>
              </tr>

              <tr>
                <td>
                  **오류 메시지**
                </td>

                <td>
                  문자열
                </td>

                <td>
                  `errorMessage: "Some error message from ssm"`
                </td>
              </tr>
            </tbody>
          </table>

          <Callout variant="important">
            1. 작업 입력에서는 `awsAccessKeyId` 및 `awsSecretAccessKey` 만 제공할 수 있지만 IAM 사용자의 정적 자격 증명이어야 합니다.
            2. 세션 자격 증명을 사용하려면 `awsAccessKeyId`, `awsSecretAccessKey` 및 `awsSessionToken` 작업 입력에 전달해야 합니다.
            3. [AWS 자격 증명을](/docs/workflow-automation/setup-and-configuration/set-up-aws-credentials) 설정하려면 지침을 참조하세요.
            4. 선택기를 사용하여 지정된 프로토콜만 출력으로 가져옵니다.
          </Callout>
        </TabsPageItem>

        <TabsPageItem id="automationstatusexample">
          <table>
            <thead>
              <tr>
                <th>
                  흐름의 정의
                </th>

                <th>
                  입력
                </th>

                <th>
                  출력
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  ```yaml
                    schemaVersion: '0.3'
                  description: List all Lambda function names.
                  mainSteps:
                    - name: ExecuteAwsApi
                      action: aws:executeAwsApi
                      isEnd: true
                  ```
                </td>

                <td>
                  ```yaml
                      Service: lambda
                            Api: ListFunctions
                  ```
                </td>

                <td>
                  ```yaml
                    - Name: resultFunctionName
                              Selector: $..FunctionName
                              Type: StringList
                      outputs:
                        - ExecuteAwsApi.resultFunctionName
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>
</CollapserGroup>