---
title: AWS CCI의 필수 조건
metaDescription: 'Set up AWS for CCI with consolidated billing, CUR, IAM roles, and region activation to optimize cost analysis in New Relic.'
redirect:
  - /docs/cci/getting-started/prerequisites
freshnessValidatedDate: never
translationType: machine
---

<Callout title="시사">
  이 기능은 아직 개발 중이지만 꼭 사용해 보시기 바랍니다!

  이 기능은 현재 [출시 전 정책](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy) 에 따라 미리보기 프로그램의 일부로 제공됩니다.
</Callout>

통합 청구 설정, 비용 및 사용 보고서 활성화, 보안 액세스를 위한 IAM 역할 및 정책 구성, 필요한 AWS 지역 활성화를 포함한 다음 필수 구성 요소를 따라 클라우드 비용 인텔리전스(CCI) 통합을 위한 AWS 환경을 준비하세요. 귀하의 설정이 뉴렐릭 플랫폼 내에서 효과적인 비용 분석 및 관리를 지원하는지 확인하세요.

## 전제 조건

<CollapserGroup>
  <Collapser id="aws-account-permissions" title="적절한 권한이 있는 AWS 계정">
    [AWS 조직에 대한 통합 결제가 설정되어 있는지](https://docs.aws.amazon.com/awsaccountbilling/latest/aboutv2/consolidated-billing.html) 확인하세요. 이를 통해 조직의 모든 계정에 대한 청구를 통합하여 통합 비용 관리를 실현할 수 있습니다.
  </Collapser>

  <Collapser id="s3-bucket-creation" title="비용 및 사용 보고서를 위한 S3 버킷">
    AWS 비용 및 사용 보고서(CUR)는 S3 버킷에 저장됩니다. `us-east-2` 지역에 S3 버킷을 생성하는 것이 좋습니다. 전용 버킷을 만들려면 다음 단계를 따르세요.

    1. **AWS Management Console** 에 로그인합니다.

    2. S3 서비스로 이동합니다.

    3. **Create bucket** \[버킷 만들기를] 클릭합니다.

    4. 고유한 버킷 이름을 입력하세요(예: `<your-company-name>-billing`).

    5. 버킷 설정 구성:

       * 버전 관리 활성화
       * 공개 액세스 비활성화(권장)
       * 기본 암호화 활성화(권장)

    6. **태그 (선택 사항)**: 조직의 리소스 관리에 필요한 경우 태그를 추가합니다.

    7. **Create bucket** \[버킷 만들기를] 클릭합니다.

    <Callout variant="important">
      CCI의 다음 단계와 설치 단계에서 필요하므로 버킷 이름을 기억해 두세요.
    </Callout>
  </Collapser>

  <Collapser id="s3-bucket-creation" title="AWS 비용 및 사용 보고서 설정">
    S3 버킷에 전달될 비용 및 사용 보고서를 만듭니다.

    1. **AWS Management Console** 에 로그인합니다.

    2. **Billing Dashboard** \[결제 대시보드] 로 이동합니다.

    3. 왼쪽 탐색 창에서 **Cost &amp; Usage Analysis** \[비용 및 사용량 분석을] 클릭합니다.

    4. **Data Exports \[데이터 내보내기를]** 클릭한 다음 **Create** \[만들기를] 클릭합니다.

    5. 보고서 설정 구성:

       <table>
         <thead>
           <tr>
             <th width={250}>
               **환경**
             </th>

             <th>
               **값**
             </th>

             <th>
               **설명**
             </th>
           </tr>
         </thead>

         <tbody>
           <tr>
             <td>
               수출 유형
             </td>

             <td>
               `Standard Data Export`
             </td>

             <td>
               대부분의 청구 및 비용 분석 사용 사례에 적합한 사용량 및 비용에 대한 자세한 정보를 제공합니다.
             </td>
           </tr>

           <tr>
             <td>
               수출명
             </td>

             <td>
               `Name`
             </td>

             <td>
               CUR 보고서에 컨텍스트를 제공하는 내보내기 이름입니다. (`eg-<company name-billing-cci>`)&gt;
             </td>
           </tr>

           <tr>
             <td>
               데이터 테이블
             </td>

             <td>
               `CUR 2.0`
             </td>

             <td>
               CUR 2.0은 최신 FOCUS 형식 테이블 구조를 지원합니다.
             </td>
           </tr>

           <tr>
             <td>
               리소스 ID 포함
             </td>

             <td>
               `ON`
             </td>

             <td>
               개별 AWS 리소스와 관련된 비용을 자세히 추적하여 세분화된 분석과 청구에 도움이 됩니다.
             </td>
           </tr>

           <tr>
             <td>
               분할 비용 할당 데이터
             </td>

             <td>
               `OFF`
             </td>

             <td>
               특별히 필요하지 않다면 이 옵션을 꺼두면 데이터 구조가 단순해집니다. 사용자 정의 비용 범주나 분할을 기준으로 데이터를 분리하는 것을 방지합니다. 분석에 세부적인 비용 할당 분할이 필요하지 않은 이상 이 부분은 생략될 수 있습니다.
             </td>
           </tr>

           <tr>
             <td>
               시간 단위
             </td>

             <td>
               `Hourly`
             </td>

             <td>
               시간 단위를 시간 단위로 설정합니다. 이 설정은 플랫폼의 기능을 지원하는 세부적인 비용 및 사용량 분석을 가능하게 하는 데 필수적입니다.
             </td>
           </tr>

           <tr>
             <td>
               압축 유형
             </td>

             <td>
               `Parquet`
             </td>

             <td>
               대량의 데이터를 효율적으로 처리하는 데 유용한, 쿼리 성능을 향상시키고 저장 공간을 줄여주는 열 기반 저장 파일 형식입니다.
             </td>
           </tr>

           <tr>
             <td>
               파일 버전 관리
             </td>

             <td>
               `Create New Report Version`
             </td>

             <td>
               CUR이 업데이트될 때마다 새로운 버전이 생성됩니다. 이를 통해 과거 보고서가 보관되므로 시간 경과에 따른 비용 변화를 감사하고 추적하는 데 유용합니다.
             </td>
           </tr>

           <tr>
             <td>
               데이터 새로 고침 설정
             </td>

             <td>
               `AUTOMATIC`
             </td>

             <td>
               수동 개입 없이 최신 사용량 및 비용 정보로 CUR 데이터를 최신 상태로 유지합니다.
             </td>
           </tr>

           <tr>
             <td>
               데이터 내보내기 설정 S3 버킷
             </td>

             <td>
               `Existing (Select the bucket created in Step 1)`
             </td>

             <td>
               생성된 CUR 파일은 아래에 설명된 정의된 경로로 S3 버킷에 저장됩니다. 정책을 덮어쓰는 데 동의합니다(다음 단계에서 새 정책으로 정책을 매핑합니다)
             </td>
           </tr>

           <tr>
             <td>
               S3 경로 접두사
             </td>

             <td>
               `cost-and-usage-reports`
             </td>

             <td>
               비용 및 사용 보고서(CUR)가 S3 버킷 내에서 올바르게 구성되고 저장되도록 하여 효율적인 액세스와 관리를 용이하게 합니다.
             </td>
           </tr>
         </tbody>
       </table>

    6. **Next** \[다음을] 클릭한 다음 **Create report** \[보고서 만들기를] 클릭합니다.

    <Callout variant="important">
      CCI의 통합 단계에서 필요하므로 내보내기 이름을 기억해 두세요. 또한 S3 경로 접두사가 cost-and-usage-reports인지 확인합니다.
    </Callout>

    <Callout variant="caution" title="메모">
      첫 번째 CUR 보고서는 24시간 이내에 전달됩니다. 이후 보고서는 주기적으로 전달됩니다.
    </Callout>
  </Collapser>

  <Collapser id="iam-policy-cci-access" title="CCI 액세스를 위한 IAM 정책">
    CCI에 CUR 데이터에 액세스하는 데 필요한 권한을 부여하는 IAM 정책을 만듭니다.

    1. **AWS Management Console** 에 로그인합니다.
    2. **IAM service** \[IAM 서비스] 로 이동합니다.
    3. 왼쪽 탐색 창에서 **Policies** \[정책을] 클릭합니다.
    4. **Create policy** \[정책 만들기를] 클릭합니다.
    5. **JSON 편집기 (JSON editor)** 로 전환하여 다음 정책을 붙여넣습니다.

    ```json
    {
    "Version": "2012-10-17",
    "Statement": [
        {
        "Action": ["s3:Get*", "s3:List*"],
        "Effect": "Allow",
        "Resource": [
            "arn:aws:s3:::<bucket-name>/*",
            "arn:aws:s3:::<bucket-name>"
        ],
        "Sid": "AccessMasterPayerBillingBucket"
        },
        {
        "Effect": "Allow",
        "Action": [
            "pricing:DescribeServices",
            "pricing:GetAttributeValues",
            "pricing:GetProducts",
            "pricing:GetPriceListFileUrl",
            "pricing:ListPriceLists"
        ],
        "Resource": ["*"]
        }
    ]
    }
    ```

    <Callout variant="important">
      **S3 bucket for Cost and Usage reports** \[S3 버킷의 비용 및 사용 보고서] 단계에서 생성한 S3 버킷의 실제 이름으로 bucket-name을 바꿉니다.
    </Callout>

    6. **Next**클릭합니다.
    7. 정책 이름을 `CCI-Access-Policy` (또는 원하는 이름)으로 지정합니다.
    8. 설명을 추가하세요.
    9. **Create policy** \[정책 만들기를] 클릭합니다.
  </Collapser>

  <Collapser id="iam-role-cci-access" title="CCI가 맡을 IAM 역할">
    CCI가 CUR 데이터에 액세스하도록 하는 IAM 역할을 만듭니다.

    1. **AWS Management Console** 에 로그인합니다.
    2. IAM 서비스로 이동합니다.
    3. 왼쪽 탐색 패널에서 **Roles** \[역할을] 클릭합니다.
    4. **Create role** \[역할 만들기를] 클릭합니다.
    5. 신뢰할 수 있는 사이트 유형 섹션에서 **Custom Trust Policy** \[사용자 지정 신뢰 정책을] 선택하세요.
    6. 편집기에 다음 역할 정의를 붙여넣습니다.
       ```json
       {
       "Version": "2012-10-17",
       "Statement": [
           {
           "Effect": "Allow",
           "Principal": {
               "AWS": "arn:aws:iam::207192125115:user/cci_global_user"
           },
           "Action": "sts:AssumeRole",
           "Condition": {
               "StringEquals": {
               "sts:ExternalId": "<externalID>"
               }
           }
           }
       ]
       }
       ```

    <Callout variant="caution" title="메모">
      externalId는 CCI 통합 서비스의 동적 고유 식별자로, 통합을 시작하기 위해 CCI로 돌아오면 생성됩니다.
    </Callout>

    7. **Next**클릭합니다.
    8. [CCI 액세스 단계에 대한 IAM 정책](#iam-policy-cci-access) 에서 생성된 정책을 첨부합니다.
    9. **Next**클릭합니다.
    10. 역할 이름: `CCI-Access-Role` (또는 원하는 이름).
    11. 설명을 추가하세요(선택 사항).
    12. **Create role** \[역할 만들기를] 클릭합니다.
    13. 역할을 생성한 후 역할 ARN(역할 요약 페이지에 표시됨)을 기록해 둡니다.

    <Callout variant="important">
      통합 과정에서 CCI에 역할 ARN을 제공해야 합니다.
    </Callout>
  </Collapser>
</CollapserGroup>

## 실시간 비용 추정을 위한 전제 조건

CCI에서 실시간 추정 비용 보기를 활성화하려면 측정, 계측 방법과 관련된 특정 전제 조건을 충족해야 합니다.

<table>
  <thead>
    <tr>
      <th>
        방법
      </th>

      <th>
        설명
      </th>

      <th>
        언제 선택해야 할까
      </th>

      <th>
        전제 조건
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        인프라 에이전트 및 통합
      </td>

      <td>
        상세한 모니터링을 위해 뉴렐릭 인프라 에이전트를 사용합니다.
      </td>

      <td>
        심층적인 가시성/제어를 위해 선택하며, 독립형 EC2, EKS/EC2 또는 ECS/EC2 설정에 이상적입니다.
      </td>

      <td>
        * 독립형 EC2가 있는 경우 뉴렐릭 인프라 에이전트를 설치하세요.
        * EKS/EC2가 있는 경우 Kubernetes 통합을 설치하세요.
        * ECS/EC2가 있는 경우 ECS 통합을 설치하세요. 이 방법은 AWS Fargate에서 지원되지 않습니다.
      </td>
    </tr>

    <tr>
      <td>
        클라우드 통합(메트릭)
      </td>

      <td>
        AWS CloudWatch 지표를 활용하여 거의 실시간 모니터링을 수행합니다.
      </td>

      <td>
        실시간 데이터가 필수적인 경우를 선택하세요. 최신 인사이트가 필요한 역동적인 환경에 적합합니다.
      </td>

      <td>
        [Amazon CloudWatch Metric Streams를](/install/aws-cloudwatch/)

         설정합니다.
      </td>
    </tr>

    <tr>
      <td>
        클라우드 통합(폴링) - 구형
      </td>

      <td>
        일정 간격으로 AWS 서비스를 폴링하여 데이터를 수집합니다.
      </td>

      <td>
        업데이트가 덜 빈번한 환경에 적합합니다. 지표 기반 접근 방식이 실현 가능하지 않은 경우 사용되는 구형 옵션입니다.
      </td>

      <td>
        [AWS 폴링 통합을](/docs/infrastructure/amazon-integrations/connect/set-up-aws-api-polling/)

         설정합니다.
      </td>
    </tr>
  </tbody>
</table>

## Kubernetes 비용 할당을 위한 전제 조건

* [Kubernetes 통합을 설치합니다](https://docs.newrelic.com/install/kubernetes/). 이 기능에는 AWS Fargate 통합이 지원되지 않습니다.
* 표준 Kubernetes 레이블(`app.kubernetes.io/name`, `app.kubernetes.io/instance`, `app.kubernetes.io/component` 및 `app.kubernetes.io/part-of`) 외에도 구현, 배포 환경 및 담당 팀을 나타내기 위해 `environment` 및 `team` 와 같은 두 개의 사용자 지정 레이블을 추가하는 것을 고려하세요. 또한 `project` 및 `costCenter` 과 같은 두 개의 사용자 정의 리소스 태그를 추가하는 것도 고려하세요. 이러한 레이블과 리소스 태그는 Kubernetes 비용 할당 데이터를 더 효과적으로 세분화하고 분석하는 데 도움이 됩니다.

## 권장 사항

* AWS 계정에서 [비용 할당 태그를](https://docs.aws.amazon.com/tag-editor/latest/userguide/tagging.html) 구성합니다. 태그를 지정하면 세부적이고 의미 있는 비용 분류가 용이해집니다. 효과적인 비용 필터링 및 그룹화를 위해 AWS 리소스 전반에 걸쳐 최소 두 개의 사용자 지정 리소스 태그가 일관되게 적용되어 있는지 확인하세요.
* 최적의 성능과 비용 효율성을 위해 `us-east-2` 지역에 있는 S3 버킷을 사용하세요.

## 접근 제어 권고

지정된 뉴렐릭 계정/조직에 액세스할 수 있는 모든 사용자는 클라우드 컴퓨팅 인텔리전스 내에서 AWS 클라우드 비용 데이터를 볼 수 있습니다. cloud 비용 데이터를 안전하고 규정에 맞게 처리하려면 내부 액세스 제어 정책에 맞는 적절한 뉴렐릭 계정/조직을 신중하게 선택하는 것이 좋습니다.

<Callout variant="important">
  **S3 버킷 액세스**

  뉴렐릭은 S3 버킷에 대한 읽기 액세스 권한만 필요하며, 이 액세스는 뉴렐릭 측의 단일 IAM 역할로 제한됩니다. 필요한 작업을 원활하게 진행하는 동시에 데이터를 보호하기 위해 이 액세스 수준을 유지하세요.
</Callout>