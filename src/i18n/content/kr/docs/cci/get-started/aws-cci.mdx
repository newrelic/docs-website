---
title: 클라우드 컴퓨팅 인텔리전스 - Amazon Web Services
tags:
  - cloud cost intelligence
  - aws
  - amazon web services
  - aws cost management
  - cloud cost optimization
  - cci aws
metaDescription: 'Set up AWS for CCI with consolidated billing, CUR, IAM roles, and region activation to optimize cost analysis in New Relic.'
redirect:
  - /docs/cci/prerequisites
  - /docs/cci/setup
freshnessValidatedDate: never
translationType: machine
---

<Callout title="시사">
  이 기능은 아직 개발 중이지만 꼭 사용해 보시기 바랍니다!

  이 기능은 현재 [출시 전 정책](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy) 에 따라 미리보기 프로그램의 일부로 제공됩니다.
</Callout>

통합 청구, 비용 및 사용량 보고서, IAM 역할 및 정책, 그리고 필요한 AWS 리전을 구성하여 클라우드 비용 인텔리전스를 위한 AWS 환경을 설정하십시오.

## 시작하기 전에

### 적절한 권한이 있는 AWS 계정 [#aws-account]

[AWS 조직에 대한 통합 결제가 설정되어 있는지](https://docs.aws.amazon.com/awsaccountbilling/latest/aboutv2/consolidated-billing.html) 확인하세요.

## 설치 지침

<Steps>
  <Step>
    ### 비용 및 사용량 보고서용 S3 버킷을 생성합니다. [#create-s3-bucket]

    AWS 비용 및 사용량 보고서(CUR)를 저장할 S3 버킷을 생성합니다. `us-east-2` 영역을 사용하시는 것을 권장합니다.

    1. **AWS Management Console** 에 로그인합니다.

    2. **S3 service** 로 이동하여 **Create bucke**t \[버킷 생성을] 클릭합니다.

    3. 고유한 버킷 이름을 입력하세요(예: `<your-company-name>-billing`).

    4. 버킷 설정 구성:

       * 버전 관리 활성화
       * 공개 액세스 비활성화(권장)
       * 기본 암호화 활성화(권장)

    5. **태그(선택 사항)**: 조직의 리소스 관리에 필요한 경우 태그를 추가하고 **Create bucket** \[버킷 생성을] 클릭하세요.

    <Callout variant="important">
      다음 단계를 위해 버킷 이름을 기억해 두세요.
    </Callout>
  </Step>

  <Step>
    ### AWS 비용 및 사용량 보고서 구성 [#create-cur]

    **Cost and Usage Report** \[비용 및 사용량 보고서]를 생성하여 S3 버킷에 저장하세요.

    1. **AWS Management Console** 에 로그인합니다.

    2. **Billing Dashboard** &gt; **Cost &amp; Usage Analysis** &gt; **Data Exports** 로 이동한 다음 **Create** \[만들기]를 클릭합니다.

    3. 보고서 설정 구성:

       <table>
         <thead>
           <tr>
             <th width={250}>
               **환경**
             </th>

             <th>
               **값**
             </th>

             <th>
               **설명**
             </th>
           </tr>
         </thead>

         <tbody>
           <tr>
             <td>
               수출 유형
             </td>

             <td>
               `Standard Data Export`
             </td>

             <td>
               청구 및 비용 분석을 위한 상세 사용량 및 비용 정보.
             </td>
           </tr>

           <tr>
             <td>
               수출명
             </td>

             <td>
               `Name`
             </td>

             <td>
               CUR 보고서의 이름(예: `<company-name>-billing-cci`).
             </td>
           </tr>

           <tr>
             <td>
               데이터 테이블
             </td>

             <td>
               `CUR 2.0`
             </td>

             <td>
               최신 FOCUS 형식 테이블 구조를 지원합니다.
             </td>
           </tr>

           <tr>
             <td>
               리소스 ID 포함
             </td>

             <td>
               `ON`
             </td>

             <td>
               개별 AWS 리소스별 비용을 자세히 추적할 수 있습니다.
             </td>
           </tr>

           <tr>
             <td>
               분할 비용 할당 데이터
             </td>

             <td>
               `OFF`
             </td>

             <td>
               데이터 구조를 단순화합니다. 상세한 비용 배분 내역이 필요한 경우가 아니면 생략하십시오.
             </td>
           </tr>

           <tr>
             <td>
               시간 단위
             </td>

             <td>
               `Hourly`
             </td>

             <td>
               상세한 비용 및 사용량 분석에 필요합니다.
             </td>
           </tr>

           <tr>
             <td>
               압축 유형
             </td>

             <td>
               `Parquet`
             </td>

             <td>
               쿼리 성능을 향상시키고 저장 공간을 줄이는 컬럼형 저장 형식입니다.
             </td>
           </tr>

           <tr>
             <td>
               파일 버전 관리
             </td>

             <td>
               `Create New Report Version`
             </td>

             <td>
               업데이트할 때마다 새 버전을 생성하고, 감사 목적으로 이전 보고서를 보관합니다.
             </td>
           </tr>

           <tr>
             <td>
               데이터 새로 고침 설정
             </td>

             <td>
               `AUTOMATIC`
             </td>

             <td>
               CUR 데이터를 자동으로 최신 상태로 유지합니다.
             </td>
           </tr>

           <tr>
             <td>
               데이터 내보내기 설정 S3 버킷
             </td>

             <td>
               [비용 및 사용량 보고서용 S3 버킷 생성](#create-s3-bucket)에서 생성한 버킷을 선택하십시오.
             </td>

             <td>
               CUR 파일은 S3 버킷에 저장됩니다. 기존 정책을 덮어쓰는 데 동의합니다.
             </td>
           </tr>

           <tr>
             <td>
               S3 경로 접두사
             </td>

             <td>
               `cost-and-usage-reports`
             </td>

             <td>
               S3 버킷 내에서 비용 및 사용량 보고서를 정리합니다.
             </td>
           </tr>
         </tbody>
       </table>

    4. **Next** \[다음을] 클릭한 다음 **Create report** \[보고서 만들기를] 클릭합니다.

    <Callout variant="important">
      CCI 통합을 위한 내보내기 이름을 기억하세요. S3 경로 접두사가 `cost-and-usage-reports` 인지 확인하십시오. 첫 번째 보고서는 24시간 이내에 제공되며, 이후 보고서는 정기적으로 제공됩니다.
    </Callout>
  </Step>

  <Step>
    ### CCI 액세스를 위한 IAM 정책을 생성합니다. [#create-iam-policy]

    CCI가 CUR 데이터에 액세스할 수 있도록 권한을 부여하는 IAM 정책을 생성하세요.

    1. **AWS Management Console** 에 로그인합니다.
    2. **IAM service** &gt; **Policies** 으로 이동하여 **Create policy** \[정책 생성]을 클릭합니다.
    3. **JSON 편집기 (JSON editor)** 로 전환하여 다음 정책을 붙여넣습니다.

    ```json
    {
    "Version": "2012-10-17",
    "Statement": [
        {
        "Action": ["s3:Get*", "s3:List*"],
        "Effect": "Allow",
        "Resource": [
            "arn:aws:s3:::<bucket-name>/*",
            "arn:aws:s3:::<bucket-name>"
        ],
        "Sid": "AccessMasterPayerBillingBucket"
        },
        {
        "Effect": "Allow",
        "Action": [
            "pricing:DescribeServices",
            "pricing:GetAttributeValues",
            "pricing:GetProducts",
            "pricing:GetPriceListFileUrl",
            "pricing:ListPriceLists"
        ],
        "Resource": ["*"]
        }
    ]
    }
    ```

    <Callout variant="important">
      [비용 및 사용량 보고서용 S3 버킷 생성](#create-s3-bucket) 에서 얻은 S3 버킷 이름으로 `bucket-name` 바꾸세요.
    </Callout>

    4. **Next**클릭합니다.
    5. 정책 이름을 `CCI-Access-Policy` (또는 원하는 이름)으로 지정하고 설명을 추가한 다음 **Create policy** \[정책 생성] 버튼을 클릭합니다.
  </Step>

  <Step>
    ### CCI가 사용할 수 있는 IAM 역할을 생성합니다. [#create-iam-role]

    CCI가 CUR 데이터에 액세스하도록 하는 IAM 역할을 만듭니다.

    1. **AWS Management Console** 에 로그인합니다.
    2. **IAM service** &gt; **Roles** 로 이동하여 **Create role** \[역할 만들기]를 클릭합니다.
    3. 신뢰도 유형 섹션에서 **Custom Trust Policy** \[사용자 지정 신뢰 정책을] 선택하고 다음 역할 정의를 붙여넣으세요.
       ```json
       {
       "Version": "2012-10-17",
       "Statement": [
           {
           "Effect": "Allow",
           "Principal": {
               "AWS": "arn:aws:iam::207192125115:user/cci_global_user"
           },
           "Action": "sts:AssumeRole",
           "Condition": {
               "StringEquals": {
               "sts:ExternalId": "<externalID>"
               }
           }
           }
       ]
       }
       ```

    <Callout variant="important" title="메모">
      `externalId` 은 CCI 통합을 시작할 때 생성됩니다.
    </Callout>

    4. **Next**클릭합니다.
    5. [Create IAM policy for CCI access](#create-iam-policy) \[CCI 액세스용 IAM 정책 생성] 에서 생성한 정책을 연결하고 **Next** \[다음을] 클릭합니다.
    6. 역할 이름을 `CCI-Access-Role` (또는 원하는 이름)으로 지정하고 설명을 추가(선택 사항)한 다음 **Create role** \[역할 만들기]를 클릭합니다.
    7. 역할 요약 페이지에서 역할 ARN을 기록해 두세요.

    <Callout variant="important">
      CCI 통합 과정에서 역할 ARN이 필요합니다.
    </Callout>
  </Step>

  <Step>
    ### 통합에 접속하고 뉴렐릭 계정을 선택하세요 [#access-integration]

    1. 왼쪽 패널에서 **Cloud Cost Intelligence** \[클라우드 비용 인텔리전스] 로 이동하여 **Add the integration** \[통합 추가]를 클릭합니다.
    2. 뉴렐릭 계정을 선택하고 **Continue** \[계속]을 클릭하세요.
  </Step>

  <Step>
    ### 연결 세부 정보 제공 [#provide-connection-details]

    필수 정보를 입력하세요:

    * **Connection name** - 기본 이름이 제공됩니다. 사용자 지정 이름을 입력하려면 편집하세요.
    * **Cross-account IAM role ARN** - S3 버킷에 액세스하기 위한 클라우드 비용 인텔리전스용 IAM 역할 ARN(형식: `arn:aws:iam::<account-id>:role/<role-name>`).
    * **External ID** - 외부 ID를 복사하여 AWS의 IAM 역할 신뢰 정책에 추가하세요.
    * **Data export name** - 데이터 내보내기 파일의 이름입니다. 보고서 `cci-ingestion-test` 의 경로는 `cost-and-usage-reports/cci-ingestion-test/data` 입니다.
    * **S3 bucket name** - 정확한 버킷 이름입니다. 최적의 성능을 위해 `us-east-2` 영역을 사용하십시오.
  </Step>

  <Step>
    ### 신뢰 정책을 구성합니다. [#configure-trust-policy]

    IAM 역할 신뢰 정책에 뉴렐릭 전역 사용자(`arn:aws:iam::207192125115:user/cci_global_user`)를 추가합니다.

    ```json
    {
      "Version": "2012-10-17",
      "Statement": [
        {
          "Effect": "Allow",
          "Principal": {
            "AWS": "arn:aws:iam::207192125115:user/cci_global_user"
          },
          "Action": "sts:AssumeRole",
          "Condition": {
            "StringEquals": {
              "sts:ExternalId": "<externalID>"
            }
          }
        }
      ]
    }
    ```

    <Callout variant="important">
      [연결 세부 정보 제공](#provide-connection-details) 에서 외부 ID를 `sts:ExternalId` 으로 설정합니다. 기본적으로 STS가 활성화되지 않은 영역에 대해 STS를 활성화합니다(예: `ap-east-1`, `eu-south-1`).
    </Callout>
  </Step>

  <Step>
    ### 연결 테스트 [#test-connection]

    AWS 환경에 대한 연결을 확인하려면 **Test connection** \[연결 테스트]를 클릭하십시오.

    <Callout variant="important">
      초기 데이터 처리에는 설정 후 몇 시간이 소요될 수 있습니다.
    </Callout>
  </Step>
</Steps>

## 선택 사항: 고급 기능 활성화

AWS 비용 분석을 향상시키려면 이러한 선택적 기능을 활성화하세요.

### 실시간 비용 추정 [#real-time-cost-estimation]

CCI에서 예상 비용 보기를 활성화하려면 측정, 리소스 메서드에 대한 전제 조건을 충족하세요.

<table>
  <thead>
    <tr>
      <th>
        방법
      </th>

      <th>
        설명
      </th>

      <th>
        언제 선택해야 할까
      </th>

      <th>
        전제 조건
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        인프라 에이전트 및 통합
      </td>

      <td>
        상세한 모니터링을 위해 뉴렐릭 인프라 에이전트를 사용합니다.
      </td>

      <td>
        심층적인 가시성 및 제어 기능을 제공하며, 독립형 EC2, EKS/EC2 또는 ECS/EC2 구성에 이상적입니다.
      </td>

      <td>
        * 독립형 EC2: 뉴렐릭 인프라 에이전트를 설치합니다.
        * EKS/EC2: Kubernetes 통합을 설치합니다.
        * ECS/EC2: ECS 통합을 설치합니다. AWS Fargate에서는 지원되지 않습니다.
      </td>
    </tr>

    <tr>
      <td>
        클라우드 통합(메트릭)
      </td>

      <td>
        AWS CloudWatch 지표를 활용하여 거의 실시간 모니터링을 수행합니다.
      </td>

      <td>
        역동적인 환경에서 실시간 데이터가 필수적일 때.
      </td>

      <td>
        [Amazon CloudWatch Metric Streams를](/install/aws-cloudwatch/)

         설정합니다.
      </td>
    </tr>

    <tr>
      <td>
        클라우드 통합(폴링) - 구형
      </td>

      <td>
        일정 간격으로 AWS 서비스를 폴링하여 데이터를 수집합니다.
      </td>

      <td>
        업데이트 빈도가 낮아도 괜찮은 환경에 적합합니다.
      </td>

      <td>
        [AWS 폴링 통합을](/docs/infrastructure/amazon-integrations/connect/set-up-aws-api-polling/)

         설정합니다.
      </td>
    </tr>
  </tbody>
</table>

### Kubernetes 비용 할당 [#k8s-cost-allocation]

* [Kubernetes 통합을 설치하세요](https://docs.newrelic.com/install/kubernetes/). AWS Fargate 통합은 지원되지 않습니다.
* 표준 Kubernetes 레이블(`app.kubernetes.io/name`, `app.kubernetes.io/instance`, `app.kubernetes.io/component`, 및 `app.kubernetes.io/part-of`) 외에도 `environment` 및 `team` 와 같은 사용자 지정 레이블과 `project` 및 `costCenter` 과 같은 사용자 지정 리소스 태그를 추가하여 비용을 더 효과적으로 세분화하고 분석할 수 있습니다.

## 권장 사항

* AWS 계정에서 [비용 할당 태그를](https://docs.aws.amazon.com/tag-editor/latest/userguide/tagging.html) 구성하세요. 효과적인 비용 필터링 및 그룹화를 위해 AWS 리소스 전반에 걸쳐 최소 두 개 이상의 사용자 지정 리소스 태그를 일관되게 적용하십시오.
* 최적의 성능과 비용 효율성을 위해 `us-east-2` 영역의 S3 버킷을 사용하십시오.

## 접근 제어 권고

지정된 뉴렐릭 계정/조직에 액세스할 수 있는 모든 사용자는 AWS 클라우드 비용 데이터를 볼 수 있습니다. 내부 접근 제어 정책에 맞는 적절한 뉴렐릭 계정/조직을 선택하십시오.

<Callout variant="important">
  **S3 버킷 액세스**

  뉴렐릭은 S3 버킷에 대한 읽기 권한만 필요하며, 이는 단일 IAM 역할로 제한됩니다. 데이터를 보호하려면 이 접근 수준을 유지하세요.
</Callout>

<DocTiles numbered>
  <DocTile title="Set up AWS" label={{text: 'You are here', color: '#FCD672'}} path="/docs/cci/get-started/aws-cci" />

  <DocTile title="Set up Azure" path="/docs/cci/get-started/azure-cci" />

  <DocTile title="Set up Google Cloud Platform" path="/docs/cci/get-started/gcp-cci" />
</DocTiles>