---
title: 게이트웨이 크기 조정 및 확장 가이드
metaDescription: Learn how to allocate sufficient resources to the gateway to maintain its reliability.
freshnessValidatedDate: never
translationType: machine
---

게이트웨이의 안정성을 유지하고 데이터 손실을 방지하려면 게이트웨이에 충분한 리소스를 할당하는 것이 중요합니다. 게이트웨이가 다운되면 관찰 및 분석 기능에 영향을 미칠 수 있는 델메트리 데이터가 손실될 위험이 있습니다.

이 가이드는 사용자 환경에서 구현하다, 배포하다 및 파이프라인 제어 게이트웨이 크기 조정에 적합한 리소스를 결정하는 데 도움이 됩니다. 최적의 성능과 효율적인 데이터 처리를 위해서는 이러한 사양을 이해하는 것이 필수적입니다.

## 기본값 설정

기본적으로 게이트웨이는 기본 메모리 할당량 2GB와 파일당 1개의 vCPU로 구성됩니다. 또한 게이트웨이 클러스터는 초기 [설정 시](/docs/pipeline-control/set-up-and-deploy-pipeline-control#set-up-gateway) 다음 설정으로 구성됩니다(이 설정은 초기 게이트웨이 설정 후 수정 가능).

minReplicas: 2 maxReplicas: 10 targetCPUUtilizationPercentage: 60

## 게이트웨이 확장

파이프라인 컨트롤 게이트웨이는 수신하는 텔레메트리 데이터 전체를 처리할 수 있을 만큼 충분한 컴퓨트 용량을 유지해야 합니다. 다양한 에이전트와 텔레메트리워크로드의 다양한 크기와 처리량을 고려하여 필요한 용량을 예측하기 위해 게이트웨이 클러스터를 확장하는 단계적 접근 방식을 취하는 것이 좋습니다.

1. 텔레메트리 데이터를 게이트웨이로 보내려면 비프로덕션 에이전트의 소규모 세트(\~15-35)를 구성하십시오. 이러한 에이전트가 프로덕션 게이트웨이로 보내려는 에이전트 및 텔레메트리 페이로드 유형을 대표하는지 확인하세요(예: New Rrelic infraestructura, APM 및 Fluent Bit). 각 에이전트의 수를 기록해 두세요.
2. 뉴렐릭에서 이 텔레메트리 데이터를 수집하고 있는지 확인하세요.
3. 게이트웨이 클러스터를 모니터링하여 몇 분 동안의 부하에 따른 vCPU 수와 평균 CPU 사용량을 파악합니다. 이를 통해 이 에이전트 세트를 실행하는 데 필요한 vCPU의 수를 파악할 수 있습니다.
4. 구성한 에이전트 수, 최대 프로덕션 상태에서 실행할 것으로 예상하는 에이전트 수, 3단계의 CPU 사용량을 기준으로 선형적으로 외삽합니다. 예를 들어 게이트웨이를 통해 25개의 APM 에이전트를 실행 중이고 65% 부하에서 1개의 vCPU만 실행되는 경우 `<=` 개의 vCPU로 200개의 APM 에이전트를 실행할 수 있어야 합니다.
5. 게이트웨이로 데이터를 전송하는 에이전트 집합을 더 많이 구성하고(예: 100) 4단계에서 사용한 선형 외삽법이 여전히 유효한지 확인합니다.
6. 프로덕션에서 실행할 에이전트 수에 따라 충분히 확장할 수 있을 만큼 `maxReplicas` 이 충분히 큰지 확인하세요.
7. 데이터를 게이트웨이로 보내도록 모든 프로덕션 에이전트 및 텔레메트리 데이터를 구성한 후 게이트웨이 클러스터를 계속 모니터링하여 100% 용량 이상으로 작동하지 않는지 확인하십시오.

## 성능 사양

단일 CPU 코어와 MELT 유형당 100개의 드롭 규칙을 사용하여 게이트웨이는 다음과 같은 텔레메트리 데이터 볼륨을 처리할 수 있습니다.

<table>
  <thead>
    <tr>
      <th>
        데이터 형식
      </th>

      <th>
        처리 용량
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        메트릭
      </td>

      <td>
        초당 7,000개의 데이터 포인트
      </td>
    </tr>

    <tr>
      <td>
        이벤트
      </td>

      <td>
        초당 4,500개의 이벤트
      </td>
    </tr>

    <tr>
      <td>
        로그
      </td>

      <td>
        초당 2,700개의 로그
      </td>
    </tr>

    <tr>
      <td>
        트레이스
      </td>

      <td>
        초당 3,300 스팬
      </td>
    </tr>
  </tbody>
</table>

## 에이전트 처리 용량

단일 게이트웨이 파드는 15-35개의 에이전트를 처리할 수 있으며, 요청 크기는 초당 압축되지 않은 데이터 기준 26-250KB입니다.

<img title="Agent handling capacity" alt="A diagram representing gateway pod agent handling capacity." src="/images/agent-handling-capacity.webp" />

<Callout variant="tip">이러한 용량 추정치는 기존 시각화, 배포의 측정을 기반으로 합니다. 실제 요구 사항은 특정 데이터 패턴 및 모니터링 요구 사항에 따라 달라질 수 있습니다.</Callout>

## 게이트웨이 설정에 대한 권장 사항

게이트웨이의 성능과 확장성을 더욱 향상시키려면 에이전트 매핑에 따라 다음 구성 설정을 고려하세요. 이러한 설정에 액세스하려면 **뉴럴릭 Control &gt; Gateway &gt; Settings** 로 이동하세요.

### 최소 및 최대 복제본

* **최소 복제본:** 정기적인 데이터 로드를 수용할 수 있는 게이트웨이 복제본의 기준 수를 설정하여 중복성과 안정성을 보장합니다. 이를 통해 데이터 손실을 방지하고 최대 사용량 기간 동안 성능을 안정적으로 유지할 수 있습니다. 권장되는 최소값은 **2** 이며 이는 기본 설정이기도 합니다.
* **최대 복제본:** 최대 사용 기간을 효과적으로 처리하는 데 필요한 최대 복제본 수를 결정합니다. 이 설정을 사용하면 게이트웨이 RF가 동적으로 확장되어 성능을 저하시키지 않고도 높은 트래픽에 충분한 리소스를 제공할 수 있습니다. 최대 **15개의** 복제본을 설정할 수 있습니다.

### CPU 사용률 값,

* **스케일링 레버 값, 예상치:** 게이트웨이가 자동으로 스케일링되는 CPU 사용률을 지정합니다. 스케일링 레버 값을 구성하면 효율적인 리소스 관리가 보장되어 과밀을 방지하고 안정적인 데이터 처리가 유지됩니다. 기본 설정은 **60%** 입니다.

### 건강 및 증진 관리

* **진단 로그 수집:** 인사이트에 대한 게이트웨이 진단 로그를 정기적으로 게이트웨이 상태 및 작동 상태로 확인합니다. 모델링 로그는 적시에 문제를 해결하고, 최적의 성능을 유지하기 위해 필수적입니다. 기본적으로 진단 로깅은 꺼져 있습니다.
* **게이트웨이 규칙 우회:** 사용 가능한 CPU 리소스가 부족한 경우 복잡한 게이트웨이 규칙을 우회합니다. 이러한 예방 조치를 통해 민감한 데이터가 수신되는 경우에도 뉴렐릭으로의 지속적인 데이터 흐름이 보장되어 리소스 절약과 중단 없는 텔레메트리 처리가 가능합니다. 기본적으로 게이트웨이 규칙 우회 기능은 꺼져 있습니다.

## 다음 단계

다음으로, 게이트웨이를 통해 데이터를 전송하기 위해 [담당자 설정을 수정하는](/docs/new-relic-control/pipeline-control/modify-agent-configuration) 방법을 알아봅니다.