---
title: 네트워크 흐름 데이터 모니터링 설정
tags:
  - Integrations
  - Network monitoring
  - Installation
  - Setup
metaDescription: Set up network flow data monitoring.
translationType: machine
---

import networkNetworkFlowsGuidedInstall from 'images/network_screenshot-full_network-flows-guided-install.webp'

안내된 설치 프로세스를 사용하여 네트워크 흐름 모니터링 에이전트를 설치하거나 에이전트를 수동으로 설치할 수 있습니다. 이 문서에서는 설치 프로세스를 시작하기 위한 전제 조건과 설치 옵션의 단계별 안내를 다룹니다.

## 전제 조건 [#prerequisites]

시작하기 전에 [New Relic 계정에 가입](https://newrelic.com/signup) 해야 합니다. 에이전트를 수동으로 설치하도록 선택한 경우 다음도 필요합니다.

* New Relic [계정 ID](/docs/accounts/accounts-billing/account-setup/account-id) .

* New Relic

  <InlinePopover type="licenseKey"/>

  .

<CollapserGroup>
  <Collapser
    id="docker"
    title="도커 전제 조건"
  >
    네트워크 흐름 수집을 위한 에이전트를 배포하려면 Docker 컨테이너를 사용하는 것이 좋습니다. 이를 사용하려면 다음이 필요합니다.

    * Linux 호스트에 설치된 [Docker](https://docs.docker.com/engine/install)
    * 명령줄을 통해 새 컨테이너를 시작하는 기능
  </Collapser>

  <Collapser
    id="linux"
    title="Linux 호스트 전제 조건"
  >
    Linux를 사용하여 에이전트를 서비스로 설치하는 경우 다음이 필요합니다.

    * 호스트에 대한 SSH 액세스

    * 애플리케이션 및 서비스 설치/제거에 대한 액세스

    * 지원되는 운영 체제 중 하나:

      * 센트OS 7
      * 센트OS 8
      * 데비안 12(책벌레)
      * 데비안 11(불스아이)
      * 데비안 10(버스터)
      * 레드햇 엔터프라이즈 리눅스 9
      * 우분투 20.04(포컬 LTS)
      * 우분투 22.04(제미 LTS)
      * 우분투 23.04(음력)
  </Collapser>

  <Collapser
    id="net-flow"
    title="네트워크 흐름 데이터 장치 전제 조건"
  >
    * 네트워크 모니터링 에이전트를 실행하는 호스트에 흐름 데이터를 보내도록 소스 장치를 구성해야 합니다. 일부 장치에서 네트워크 흐름 내보내기를 구성하는 방법은 다음과 같습니다(전체 목록은 아님).

      * 넷플로우 데이터

        * [시스코 - IOS](https://www.cisco.com/c/en/us/td/docs/ios/netflow/configuration/guide/12_2sr/nf_12_2sr_book/cfg_nflow_data_expt.html#wp1087069)
        * [시스코 - 메라키](https://documentation.meraki.com/MX/Monitoring_and_Reporting/NetFlow_Overview)
        * [시스코 - NX-OS](https://www.cisco.com/c/en/us/td/docs/switches/datacenter/nexus9000/sw/7-x/system_management/configuration/guide/b_Cisco_Nexus_9000_Series_NX-OS_System_Management_Configuration_Guide_7x/b_Cisco_Nexus_9000_Series_NX-OS_System_Management_Configuration_Guide_7x_chapter_011100.html#task_52D8A0952B06404197D2536B6E33EE80)
        * [포티넷 포티게이트](https://kb.fortinet.com/kb/documentLink.do?externalID=FD36460)
        * [팔로 알토 - PAN-OS](https://docs.paloaltonetworks.com/pan-os/8-1/pan-os-admin/monitoring/netflow-monitoring/configure-netflow-exports)

      * sFlow 데이터

        * [F5 - 빅아이피](https://techdocs.f5.com/kb/en-us/products/big-ip_ltm/manuals/product/bigip-external-monitoring-implementations-12-0-0/15.html)

      * jFlow 데이터

        * [주니퍼 - 주노스](https://www.juniper.net/documentation/us/en/software/junos/flow-monitoring/flow-monitoring.pdf)
  </Collapser>

  <Collapser
    id="net-sec"
    title="네트워크 보안 전제 조건"
  >
    [네트워크 흐름에 대한 네트워크 보안 전제 조건을](/install/npm)확인하십시오.
  </Collapser>
</CollapserGroup>

## 지원되는 네트워크 흐름 데이터 유형 [#supported-network-flow-data-types]

네트워크 흐름 모니터링은 네 가지 기본 유형의 네트워크 흐름 데이터와 그 파생물을 지원합니다. 에이전트를 실행할 때 `-nf.source` 옵션을 사용하여 모니터링할 주요 유형을 지정합니다.

<table>
  <thead>
    <tr>
      <th style={{ width: '300px' }}>
        네트워크 흐름 버전
      </th>

      <th>
        `-nf.source` 값
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        앱플로우
      </td>

      <td>
        `netflow5`
      </td>
    </tr>

    <tr>
      <td>
        아르고스
      </td>

      <td>
        `netflow5`
      </td>
    </tr>

    <tr>
      <td>
        시스코 ASA
      </td>

      <td>
        `asa`
      </td>
    </tr>

    <tr>
      <td>
        시스코 NBAR
      </td>

      <td>
        `nbar`
      </td>
    </tr>

    <tr>
      <td>
        시스코 NSEL
      </td>

      <td>
        `netflow9`
      </td>
    </tr>

    <tr>
      <td>
        cflowd
      </td>

      <td>
        `netflow5`
      </td>
    </tr>

    <tr>
      <td>
        아이피픽스
      </td>

      <td>
        `ipfix`
      </td>
    </tr>

    <tr>
      <td>
        제이플로우
      </td>

      <td>
        `netflow5`
      </td>
    </tr>

    <tr>
      <td>
        넷플로우 v5
      </td>

      <td>
        `netflow5`
      </td>
    </tr>

    <tr>
      <td>
        넷플로우 v9
      </td>

      <td>
        `netflow9`
      </td>
    </tr>

    <tr>
      <td>
        넷스트림
      </td>

      <td>
        `netflow5`
      </td>
    </tr>

    <tr>
      <td>
        팔로알토 네트웍스
      </td>

      <td>
        `pan`
      </td>
    </tr>

    <tr>
      <td>
        알플로우
      </td>

      <td>
        `netflow5`
      </td>
    </tr>

    <tr>
      <td>
        sFlow
      </td>

      <td>
        `sflow`
      </td>
    </tr>
  </tbody>
</table>

<Callout variant="important">
  에이전트는 한 번에 하나의 네트워크 흐름 버전 모니터링만 지원합니다. 여러 버전을 모니터링하려면 각각 별도의 에이전트가 필요합니다.
</Callout>

## 네트워크 흐름 수집을 언제 확장해야 합니까? [#scale]

대규모 네트워크 흐름을 수집하기 위한 전략을 계획할 때 New Relic은 초당 2,000개 흐름(분당 120,000개 흐름)당 CPU 1개를 권장합니다. 로드를 분산하기 위해 여러 에이전트를 수평적으로 확장할지 아니면 관리를 통합하기 위해 더 큰 에이전트 몇 개를 수직으로 확장할지 결정하는 것은 개인 취향의 문제입니다.

## 네트워크 흐름 데이터 모니터링 설정 [#setup-network-flow-monitoring]

대부분의 사용 사례에서는 네트워크 흐름 데이터 모니터링을 설정하기 위해 안내 설치를 권장합니다. 사용자 정의 구성을 사용하여 설정이 더 고급인 경우 수동으로 설치하는 것이 좋습니다.

<CollapserGroup>
  <Collapser
    id="guided-install-setup"
    title="안내 설치 설정"
  >
    1. **[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Add more data**로 이동하세요.
    2. **Network** 보일 때까지 아래로 스크롤하고 **Network Flows** 클릭합니다.
    3. 안내된 설치 프로세스에 설명된 단계를 따르세요. Docker나 Linux를 사용할 수 있습니다.

    <ButtonLink
      data-tessen="stitchedPathLinkClick"
      role="button"
      to="https://one.newrelic.com/nr1-core?state=3d97229a-7feb-60e8-2b17-94971922fde3"
      variant="primary"
    >
      네트워크 흐름 데이터 추가
    </ButtonLink>

    <img
      title="Network Flows guided setup"
      alt="Network Flows guided setup"
      src={networkNetworkFlowsGuidedInstall}
    />

    <figcaption>
      **[one.newrelic.com > All capabilities](https://one.newrelic.com/ll-capabilities) > Add more data > Network > Network Flows** 통해 네트워크 흐름 데이터 모니터링을 설정합니다.
    </figcaption>

    4. New Relic에서 네트워크 흐름 데이터를 조사하세요.

       <InlinePopover type="networkMonitoring"/>

       UI.
  </Collapser>

  <Collapser
    id="manual-container-setup"
    title="수동 컨테이너 설정"
  >
    네트워크 플로우 에이전트를 수동으로 설치하는 방법을 읽기 전에 안내식 설치 프로세스를 사용하여 오류를 방지하는 것이 좋습니다.

    <ButtonLink
      data-tessen="stitchedPathLinkClick"
      role="button"
      to="https://one.newrelic.com/nr1-core?state=3d97229a-7feb-60e8-2b17-94971922fde3"
      variant="primary"
    >
      네트워크 흐름 데이터 추가
    </ButtonLink>

    이 수동 설치 프로세스를 따르는 경우 문제가 발생해도 지원을 받지 못할 수 있습니다. 계속 진행하려면 다음을 수행하십시오.

    1. Docker가 설치된 Linux 호스트에서 다음 중 하나를 실행하여 **ktranslate** 이미지를 다운로드합니다.

    * [도커 허브](https://hub.docker.com/)

      ```shell
      docker pull kentik/ktranslate:v2
      ```

    * [키아이오](https://quay.io/)

      ```shell
      docker pull quay.io/kentik/ktranslate:v2
      ```

    2. `snmp-base.yaml` 파일을 Docker 사용자의 로컬 `$HOME` 디렉토리에 복사하고 다음을 실행하여 컨테이너를 삭제합니다.

       ```shell
       cd .
       id=$(docker create kentik/ktranslate:v2)
       docker cp $id:/etc/ktranslate/snmp-base.yaml .
       docker rm -v $id
       ```

    3. `snmp-base.yaml` 파일을 편집하고 다음 구조를 사용하여 `devices` 사전 키 내에 네트워크 흐름 장치를 추가합니다.

       ```yaml
       devices:
        # This key and the corresponding 'device_name'
        # need to be unique for each device
         edge_router:
           device_name: edge_router
           device_ip: 10.10.1.254
           flow_only: true
           # Optional user tags
           user_tags:
             owning_team: net_eng
             environment: production
       ```

       <Callout variant="important">
         네트워크 흐름도 보내는 SNMP 데이터 장치를 이미 모니터링하고 있는 경우 흐름 원격 분석이 New Relic의 올바른 엔터티에 귀속되도록 두 구성 파일에 대해 `device_name` 값이 동일한지 확인해야 합니다. UI.
       </Callout>

    4. 다음을 실행하여 네트워크 흐름을 수신 대기하려면 `ktranslate` 을 실행합니다.

       ```shell
       docker run -d --name ktranslate-syslog --restart unless-stopped --pull=always --net=host \
       -v `pwd`/snmp-base.yaml:/snmp-base.yaml \
       # Replace with your license key
       -e NEW_RELIC_API_KEY=$YOUR_NR_LICENSE_KEY \
       kentik/ktranslate:v2 \
        -snmp /snmp-base.yaml \
        # Replace with your account ID
        -nr_account_id=$YOUR_NR_ACCOUNT_ID \
        # If your organization is located in Europe, add the following flag:
        # -nr_region=EU \
        # If you want to use FedRAMP, add the following flag to use the FedRAMP authorized endpoints:
        # -nr_region=GOV \
        -metrics=jchf \
        -tee_logs=true \
        # Use this field to create a unique value for `tags.container_service` inside of New Relic
        -service_name=$UNIQUE_NAME \
        # This argument disables SNMP collection from the container
        -flow_only=true \
        # This value should match the network flow version you export to this container
        -nf.source=sflow \
        nr1.flow
       ```

       <Callout variant="tip">
         이 명령은 `sflow` 데이터 수집을 가정합니다. 다른 흐름 유형을 수집하는 경우 컨테이너에 대한 `--name` 플래그의 접미사를 변경하고 필요에 따라 `-nf.source` 및 `-service_name` 플래그를 업데이트해야 합니다.
       </Callout>

    5. New Relic에서 네트워크 흐름 데이터를 조사하세요. <InlinePopover type="networkMonitoring"/>UI.
  </Collapser>
</CollapserGroup>

## 측정항목 찾기 및 사용 [#find-your-metrics]

`ktranslate` 컨테이너에서 내보낸 모든 네트워크 흐름 로그는 [New Relic Event API](/docs/telemetry-data-platform/ingest-apis/introduction-event-api) 를 통해 `KFlow` 네임스페이스를 사용합니다. 현재 이 통합으로 채워진 기본 필드는 다음과 같습니다.

<CollapserGroup>
  <Collapser
    id="kflow-fields-collapser"
    title="KFlow 필드"
  >
    <table>
      <thead>
        <tr>
          <th style={{ width: '150px' }}>
            기인하다
          </th>

          <th style={{ width: '150px' }}>
            유형
          </th>

          <th>
            설명
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `application`
          </td>

          <td>
            문자열
          </td>

          <td>
            이 흐름 레코드에서 트래픽을 생성하는 프로그램의 클래스입니다. 이것은 `l4_dst_port` 및 `l4_src_port` 에서 가장 낮은 숫자 값에서 파생됩니다. 일반적인 예로는 `http` , `ssh` 및 `ftp` 가 있습니다.
          </td>
        </tr>

        <tr>
          <td>
            `device_name`
          </td>

          <td>
            문자열
          </td>

          <td>
            이 흐름 레코드에 대한 샘플링 장치의 표시 이름입니다.
          </td>
        </tr>

        <tr>
          <td>
            `dst_addr`
          </td>

          <td>
            문자열
          </td>

          <td>
            이 흐름 레코드의 대상 IP 주소입니다.
          </td>
        </tr>

        <tr>
          <td>
            `dst_as`
          </td>

          <td>
            숫자
          </td>

          <td>
            대상 \[자율 시스템 번호]([https://www.iana.org/locationments/](https://www.iana.org/assignments/) as-numbers/as-numbers.xhtml) 이 흐름 기록의 경우.
          </td>
        </tr>

        <tr>
          <td>
            `dst_as_name`
          </td>

          <td>
            문자열
          </td>

          <td>
            대상 \[자율 시스템 이름]([https://www.iana.org/Assignments/](https://www.iana.org/assignments/) as-numbers/as-numbers.xhtml) 이 흐름 기록의 경우.
          </td>
        </tr>

        <tr>
          <td>
            `dst_endpoint`
          </td>

          <td>
            문자열
          </td>

          <td>
            이 흐름 레코드의 대상 `IP:Port` 튜플입니다. 이것은 `dst_addr` 및 `l4_dst_port` 의 조합입니다.
          </td>
        </tr>

        <tr>
          <td>
            `dst_geo`
          </td>

          <td>
            문자열
          </td>

          <td>
            알려진 경우 이 흐름 레코드의 대상 국가입니다.
          </td>
        </tr>

        <tr>
          <td>
            `in_bytes`
          </td>

          <td>
            숫자
          </td>

          <td>
            수신 흐름 레코드에 대해 전송된 바이트 수입니다.
          </td>
        </tr>

        <tr>
          <td>
            `in_pkts`
          </td>

          <td>
            숫자
          </td>

          <td>
            수신 흐름 레코드에 대해 전송된 패킷 수입니다.
          </td>
        </tr>

        <tr>
          <td>
            `input_port`
          </td>

          <td>
            숫자
          </td>

          <td>
            `If_Index` 이 흐름 레코드의 소스에 있는 인터페이스 값입니다.
          </td>
        </tr>

        <tr>
          <td>
            `l4_dst_port`
          </td>

          <td>
            숫자
          </td>

          <td>
            이 흐름 레코드의 대상 포트입니다.
          </td>
        </tr>

        <tr>
          <td>
            `l4_src_port`
          </td>

          <td>
            숫자
          </td>

          <td>
            이 흐름 레코드의 소스 포트입니다.
          </td>
        </tr>

        <tr>
          <td>
            `output_port`
          </td>

          <td>
            숫자
          </td>

          <td>
            `If_Index` 이 흐름 레코드의 대상에 있는 인터페이스 값입니다.
          </td>
        </tr>

        <tr>
          <td>
            `protocol`
          </td>

          <td>
            문자열
          </td>

          <td>
            이 흐름 레코드에 사용된 프로토콜의 표시 이름은 \[숫자 IANA 프로토콜 번호]([https://www.iana.org/locationments/)](https://www.iana.org/assignments/) 에서 파생됩니다. 프로토콜 번호/프로토콜 번호.xhtml).
          </td>
        </tr>

        <tr>
          <td>
            `provider`
          </td>

          <td>
            문자열
          </td>

          <td>
            이 속성은 `ktranslate` 의 다양한 데이터 소스를 고유하게 식별하는 데 사용됩니다. 네트워크 흐름 로그는 항상 `kentik-flow-device` 값을 갖습니다.
          </td>
        </tr>

        <tr>
          <td>
            `sample_rate`
          </td>

          <td>
            숫자
          </td>

          <td>
            샘플링 장치 구성 또는 `ktranslate` 의 `sample_rate` 인수에 의해 적용된 샘플링 속도입니다.
          </td>
        </tr>

        <tr>
          <td>
            `src_addr`
          </td>

          <td>
            문자열
          </td>

          <td>
            이 흐름 레코드의 소스 IP 주소입니다.
          </td>
        </tr>

        <tr>
          <td>
            `src_as`
          </td>

          <td>
            숫자
          </td>

          <td>
            출처 \[자율 시스템 번호]([https://www.iana.org/locationments/](https://www.iana.org/assignments/) as-numbers/as-numbers.xhtml) 이 흐름 기록의 경우.
          </td>
        </tr>

        <tr>
          <td>
            `src_as_name`
          </td>

          <td>
            문자열
          </td>

          <td>
            출처 \[자율시스템명]([https://www.iana.org/Assignments/](https://www.iana.org/assignments/) as-numbers/as-numbers.xhtml) 이 흐름 기록의 경우.
          </td>
        </tr>

        <tr>
          <td>
            `src_endpoint`
          </td>

          <td>
            문자열
          </td>

          <td>
            이 흐름 레코드의 소스 `IP:Port` 튜플입니다. `src_addr` 과 `l4_src_port` 의 조합입니다.
          </td>
        </tr>

        <tr>
          <td>
            `src_geo`
          </td>

          <td>
            문자열
          </td>

          <td>
            알려진 경우 이 흐름 레코드의 소스 국가입니다.
          </td>
        </tr>

        <tr>
          <td>
            `tcp_flags`
          </td>

          <td>
            숫자
          </td>

          <td>
            이 흐름 레코드의 TCP 플래그입니다.
          </td>
        </tr>

        <tr>
          <td>
            `timestamp`
          </td>

          <td>
            숫자
          </td>

          <td>
            이 흐름 레코드가 New Relic Event API에서 수신된 시간(Unix 초)입니다.
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

<InstallFeedback/>

## 다음은 뭐지?

네트워크 흐름 데이터를 보완하기 위해 몇 가지 추가 에이전트를 설정할 수 있습니다.

* 네트워크 장치 성능에 대한 가시성을 높이려면 [SNMP 데이터 모니터링을 설정](/docs/network-performance-monitoring/setup-performance-monitoring/snmp-performance-monitoring) 하십시오.
* 네트워크 syslog 메시지에 대한 가시성을 높이려면 [네트워크 syslog 모니터링을 설정하십시오](/docs/network-performance-monitoring/setup-performance-monitoring/network-syslog-monitoring).