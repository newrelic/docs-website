---
subject: Node.js agent
releaseDate: '2025-12-08'
version: 13.7.0
downloadLink: 'https://www.npmjs.com/package/newrelic'
security: []
bugs:
  - Fixed normalization of OTEL hrtime
features:
  - Updated `koa` instrumentation to properly wrap `Router` when using `@koa/router@15.0.0`+
  - Added ability to configure a ratio based sampler
  - 'Updated configuration to allow `adaptive.sampling_target` to be set for `config.distributed_tracing.sampler.root`, `config.distributed_tracing.sampler.remote_parent_sampled`, and `config.distributed_tracing.sampler.remote_parent_not_sampled`'
  - Added support for OTEL span links
  - Replaced `default` with `adaptive` as the default for samplers
  - Preliminary support for partial granularity traces (Not available for production use)
translationType: machine
---

## Notes

#### 특징

* `@koa/router@15.0.0`+ ([#3550](https://github.com/newrelic/node-newrelic/pull/3550)) ([f1e08ad](https://github.com/newrelic/node-newrelic/commit/f1e08ad9fe200138ab9ed32e423517f64e41af49)) 사용 시 `Router` 올바르게 래핑하도록 `koa` 측정을 업데이트했습니다.

* 비율 기반 샘플러를 구성하는 기능이 추가되었습니다([#3501](https://github.com/newrelic/node-newrelic/pull/3501))([f300bd5](https://github.com/newrelic/node-newrelic/commit/f300bd5eacf9d6509b56484e7ad36d5c0725b497))

  * 비율 기반 샘플러를 지정하려면 `config.distributed_tracing.sampler.root`, `config.distributed_tracing.sampler.remote_parent_sampled` 또는 `config.distributed_tracing.sampler.remote_parent_not_sampled` 를 설정하십시오. `{ trace_id_ratio_based: { ratio: <float between 0 and 1> }}`
  * 환경 변수를 통해 할당하려면 `NEW_RELIC_DISTRIBUTED_TRACING_SAMPLER_<TYPE>='trace_id_ratio_based'` 과 `NEW_RELIC_DISTRIBUTED_TRACING_SAMPLER_<TYPE>_RATIO=<float between 0 and 1>` 설정하세요. 여기서 `<TYPE>` `ROOT`, `REMOTE_PARENT_SAMPLED` 중 하나입니다. `REMOTE_PARENT_NOT_SAMPLED`

* `adaptive.sampling_target` `config.distributed_tracing.sampler.root`, `config.distributed_tracing.sampler.remote_parent_sampled`, `config.distributed_tracing.sampler.remote_parent_not_sampled` 에 설정할 수 있도록 구성이 업데이트되었습니다([#3532](https://github.com/newrelic/node-newrelic/pull/3532))([44f51dd](https://github.com/newrelic/node-newrelic/commit/44f51dd5583e74aef1e2d0ee9483d51d5ff786c3))

* OTEL 스팬 링크 지원이 추가되었습니다([#3528](https://github.com/newrelic/node-newrelic/pull/3528))([e840690](https://github.com/newrelic/node-newrelic/commit/e8406903dd0c92cd003fac69770785489e1bba85))

* 샘플러의 기본값으로 `default` `adaptive` 로 교체했습니다([#3543](https://github.com/newrelic/node-newrelic/pull/3543))([3f03162](https://github.com/newrelic/node-newrelic/commit/3f0316285fdde6d3c38ce819aa41221a71bd4fcb))

* 부분 세분성 트레이스에 대한 예비 지원 (프로덕션 용도로는 사용할 수 없음)

  * 부분 세분성을 위한 `essential` 유형 추가 ([#3547](https://github.com/newrelic/node-newrelic/pull/3547)) ([3d85fb5](https://github.com/newrelic/node-newrelic/commit/3d85fb5fa16d411892eb4a23067e66669461ada0))
  * 부분 세분성을 위한 `reduced` 유형이 추가되었습니다. ([#3540](https://github.com/newrelic/node-newrelic/pull/3540)) ([cfa8f41](https://github.com/newrelic/node-newrelic/commit/cfa8f41618595cc5ffb3e3b5574673721c64580c))
  * 부분 세분화 샘플링을 추가하고 부분 세분화 샘플링 결정이 내려진 경우 트랜잭션에 `isPartialTrace` 할당합니다([#3544](https://github.com/newrelic/node-newrelic/pull/3544)) ([1535a82](https://github.com/newrelic/node-newrelic/commit/1535a82331ce40d7c96e0c6746ec70bcdbd6e4f6)).
  * 샘플러를 클래스로 리팩토링하고 `agent.sampler.*` 에 저장했습니다([#3527](https://github.com/newrelic/node-newrelic/pull/3527))([ad63441](https://github.com/newrelic/node-newrelic/commit/ad634411a0d91240c0c16c7a372b00b36651589f))
  * `Samplers` 클래스를 업데이트하여 로거 메시지를 정규화하고, 적용 가능한 경우 단락을 처리하고, 선택적 체인 검사를 제거합니다([#3546](https://github.com/newrelic/node-newrelic/pull/3546)) ([4f7684c](https://github.com/newrelic/node-newrelic/commit/4f7684cb4c64a89545704c70c110d2fd13815197)).
  * DT가 비활성화되었거나 전체 및 부분 세분성이 모두 비활성화된 경우 0-1 사이의 우선순위를 할당하도록 샘플러를 업데이트했습니다([#3559](https://github.com/newrelic/node-newrelic/pull/3559)) ([7a1c37e](https://github.com/newrelic/node-newrelic/commit/7a1c37e3e04fef0538a8af15fa690915bce65262)).
  * 부분 세분성 표시기를 `.partialType` 으로 저장하도록 트랜잭션을 업데이트했습니다([#3561](https://github.com/newrelic/node-newrelic/pull/3561)) ([a7f20d8](https://github.com/newrelic/node-newrelic/commit/a7f20d8e83b44556434bae90bd3924c54af9f587))
  * 부분 세분화 규칙이 적용될 때 업데이트됨([#3553](https://github.com/newrelic/node-newrelic/pull/3553))([a4bdf4f](https://github.com/newrelic/node-newrelic/commit/a4bdf4fbbbdac102519020c5ca4d3dc92eeff844))
  * 기본 Sampler 클래스에 `toString` 및 `get [Symbol.toStringTag]()` 추가했습니다([#3562](https://github.com/newrelic/node-newrelic/pull/3562))([771168d](https://github.com/newrelic/node-newrelic/commit/771168dcd927240b6efc703f238046e9a7f7766b))

#### 버그 수정

* OTEL hrtime의 정규화 수정([#3564](https://github.com/newrelic/node-newrelic/pull/3564))([707fe7d](https://github.com/newrelic/node-newrelic/commit/707fe7d6395f0e15b5e6c6195f93df1c27540423))

#### 선적 서류 비치

* 업데이트된 호환성 보고서([#3551](https://github.com/newrelic/node-newrelic/pull/3551))([02268a4](https://github.com/newrelic/node-newrelic/commit/02268a4e3fe7b2f2f5c2fd035bcb337fd7b2bfc2))
* 속성에 대한 내부 문서가 추가되었습니다([#3539](https://github.com/newrelic/node-newrelic/pull/3539))([68543b6](https://github.com/newrelic/node-newrelic/commit/68543b606fc53e59e9a6fcb08173e423bc6437a9))

#### 잡일

* `preconnect` 페이로드 관련 로깅이 개선되었습니다.

  * `preconnect` ([#3568](https://github.com/newrelic/node-newrelic/pull/3568)) ([3ee4d38](https://github.com/newrelic/node-newrelic/commit/3ee4d383cd7d9e7bf16e9da5e7f130fc2a103ca4)) 동안 호스트명 할당과 관련된 로깅을 추가했습니다.
  * GCP 사용률 로깅 개선([#3552](https://github.com/newrelic/node-newrelic/pull/3552))([e6c4141](https://github.com/newrelic/node-newrelic/commit/e6c4141b55860b5f1fe5cd14049abb9eca9b3859))

* 이제 사용률 해결이 동시에 수행됩니다([#3556](https://github.com/newrelic/node-newrelic/pull/3556)) ([8386360](https://github.com/newrelic/node-newrelic/commit/8386360fe7fb4b7278e001dac8c8293581654069))

* 모든 OTEL 범위에서 OTEL 측정, 로그 범위 데이터를 수집했습니다. ([#3554](https://github.com/newrelic/node-newrelic/pull/3554)) ([75703c4](https://github.com/newrelic/node-newrelic/commit/75703c41a8db1d204a1500b8b43dff0d04a5b286))

* OTEL 시간 처리 기능 개선 ([#3557](https://github.com/newrelic/node-newrelic/pull/3557)) ([8f187b1](https://github.com/newrelic/node-newrelic/commit/8f187b11eac96f78d9743cadb2302001ed94412a))

* 설정 `opentelemetry_bridge` `opentelemetry` 로 이름 변경 ([#3565](https://github.com/newrelic/node-newrelic/pull/3565)) ([c9d156f](https://github.com/newrelic/node-newrelic/commit/c9d156fe302ffb99b262ffd3e256d953301f08f2))

### 지지 성명:

최신 에이전트 버전이 출시되면 즉시 업데이트하는 것이 좋습니다. 최신 버전으로 업그레이드할 수 없는 경우, 에이전트를 90일 이내 버전으로 업데이트하세요. 에이전트에게 최신 정보를 제공하는 방법에 대해 자세히 알아보세요. ([https://docs.newrelic.com/docs/new-relic-solutions/new-relic-one/install-configure/update-new-relic-agent/](https://docs.newrelic.com/docs/new-relic-solutions/new-relic-one/install-configure/update-new-relic-agent/))

에이전트 릴리스 및 지원 날짜에 대한 정보는 뉴렐릭 Node.js 에이전트 EOL 정책을 참조하세요. ([https://docs.newrelic.com/docs/apm/agents/nodejs-agent/getting-started/nodejs-agent-eol-policy/](https://docs.newrelic.com/docs/apm/agents/nodejs-agent/getting-started/nodejs-agent-eol-policy/))