---
title: 언어 에이전트 및 분산 추적
tags:
  - Understand dependencies
  - Distributed tracing
  - Enable and configure
metaDescription: How to enable distributed tracing or Infinite Tracing for APM agents.
translationType: machine
---

import clogo from 'images/clogo.png'

import gologo from 'images/gologo.png'

import javalogo from 'images/javalogo.png'

import dotnetlogo from 'images/dotnetlogo.png'

import nodejslogo from 'images/nodejslogo.png'

import pythonlogo from 'images/pythonlogo.png'

import phplogo from 'images/phplogo.png'

import rubylogo from 'images/rubylogo.png'

C, Go, Java, Node.js, .NET, PHP, Python 또는 Ruby용 New Relic APM 에이전트의 새 인스턴스를 설치하면 표준 분산 추적이 기본적으로 설정됩니다.

APM 에이전트에 대한 이 기본 분산 추적은 헤드 기반 샘플링을 사용합니다.이는 흔적이 New Relic에 도착하기 전에 알고리즘을 적용하여 수락하고 분석할 흔적의 수를 결정한다는 것을 의미합니다.이 기본 헤드 기반 샘플링은 분산 시스템에서 일어나는 일에 대한 기본적인 통찰력을 제공할 수 있습니다.

또한 Infinite Tracing을 제공하므로 분산 시스템에 대한 가시성을 높일 수 있으므로 권장합니다.이 옵션은 꼬리 기반 샘플링을 사용합니다. 즉, 추적을 100% 수집하고 분석할 때까지 샘플링을 수행하지 않습니다.추적은 데이터를 수집 및 분석하여 유용한 추적을 찾는 클라우드 기반 추적 관찰자에게 전송됩니다.

새 에이전트를 설치하여 분산 추적을 원하거나 이전 에이전트에서 분산 추적을 켜는 데 도움이 필요한 경우 다음과 같은 지침이 있습니다.

* [새 에이전트에 대한 추적 설정:](#new-agentsl) 헤드 및 테일 기반 샘플링 단계
* [이전 APM 에이전트: 이전 APM 에이전트](#older-agents) 가 있는 경우 추적 옵션
* [수동 계측:](#manual-instrumentation) 자동 계측이 작동하지 않는 경우의 팁

<Callout variant="tip">
  시작하기 전에 더 많은 배경 지식을 얻으려면 다음 주제를 확인하십시오.

  * [스팬 샘플링 작동 방식은](/docs/understand-dependencies/distributed-tracing/get-started/how-new-relic-distributed-tracing-works#sampling) 분산 추적 옵션을 설명합니다.
  * [APM에 미치는 영향](/docs/apm/distributed-tracing/getting-started/transition-guide-distributed-tracing) 은 현재 APM 사용자이지만 분산 추적을 설정하지 않은 경우 예상되는 결과를 알려줍니다.
</Callout>

## 새 에이전트에 대한 추적 설정 [#new-agents]

표준 분산 추적(머리 기반 샘플링)을 시도하거나 무한 추적(꼬리 기반 샘플링)을 설정하려는 경우 표준 분산 추적을 설정하여 시작해야 합니다.헤드 기반 샘플링을 진행하기 위해 APM 에이전트 설치 과정을 안내해 드립니다.그런 다음 Infinite Tracing을 시도하려는 경우 몇 가지 추가 단계를 수행할 수 있습니다.

### 표준 분산 추적을 사용하려면 에이전트를 설치하십시오. [#quick-start-apm]

아직 서비스에 대한 APM 에이전트를 설치하지 않았거나 추가 서비스를 계측하려는 경우 [표준 분산 추적](/docs/distributed-tracing/concepts/how-new-relic-distributed-tracing-works/#head-based) 을 설정하는 가장 좋은 방법입니다.

<Callout variant="tip">
  분산 추적을 설정하려면 New Relic 계정이 필요합니다. 아직 없으시다면 빠르게  
  [무료 계정을 만드](https://newrelic.com/signup) 십시오.
</Callout>

#### 1단계. 서비스 식별

계측하려는 서비스를 파악하여 각각 New Relic에 추적 데이터를 보내도록 합니다.식별한 각 서비스에 대해 다음 단계의 팁에 따라 APM 에이전트를 설치합니다.

#### 2단계. APM 에이전트로 각 서비스 계측 [#update-agents]

기본 분산 추적을 가져오려면 새 APM 에이전트를 설치합니다.각 서비스를 계측하는 데 도움이 되도록 다양한 언어에 대한 설치 도우미가 있습니다.

각 설치에 고유한 응용 프로그램 이름이 있는지 확인하려면 계측하려는 각 서비스에 대해 설치 도우미를 실행해야 합니다.

도우미를 시작하려면 해당 언어에 대한 링크를 클릭합니다.

<TechTileGrid>
  <TechTile
    name="APM: C"
    to="https://one.newrelic.com/launcher/nr1-core.settings?pane=eyJuZXJkbGV0SWQiOiJ0dWNzb24ucGxnLWluc3RydW1lbnQtZXZlcnl0aGluZyJ9&cards[0]=eyJuZXJkbGV0SWQiOiJzZXR1cC1uZXJkbGV0cy5zZXR1cC1jLWludGVncmF0aW9uIiwiYWNjb3VudElkIjoyNjQwNDA5fQ==&platform[accountId]=2498654&platform[timeRange][duration]=1800000&platform[$isFallbackTimeRange]=true"
    icon={<img variant="TechTile" src={clogo} alt="C"/>}
  />

  <TechTile
    name="APM: Golang"
    to="https://one.newrelic.com/launcher/nr1-core.settings?pane=eyJuZXJkbGV0SWQiOiJ0dWNzb24ucGxnLWluc3RydW1lbnQtZXZlcnl0aGluZyJ9&cards[0]=eyJuZXJkbGV0SWQiOiJzZXR1cC1uZXJkbGV0cy5zZXR1cC1nby1pbnRlZ3JhdGlvbiIsImFjY291bnRJZCI6MjY0MDQwOX0=&platform[accountId]=2498654&platform[timeRange][duration]=1800000&platform[$isFallbackTimeRange]=true"
    icon={<img variant="TechTile" src={gologo} alt="Golang"/>}
  />

  <TechTile
    name="APM: Java"
    to="https://one.newrelic.com/launcher/nr1-core.settings?pane=eyJuZXJkbGV0SWQiOiJ0dWNzb24ucGxnLWluc3RydW1lbnQtZXZlcnl0aGluZyJ9&cards[0]=eyJuZXJkbGV0SWQiOiJzZXR1cC1uZXJkbGV0cy5zZXR1cC1qYXZhLWludGVncmF0aW9uIiwiYWNjb3VudElkIjoyNjQwNDA5fQ==&platform[accountId]=2498654&platform[timeRange][duration]=1800000&platform[$isFallbackTimeRange]=true"
    icon={<img variant="TechTile" src={javalogo} alt="Java"/>}
  />

  <TechTile
    name="APM: .NET"
    to="https://one.newrelic.com/launcher/nr1-core.settings?pane=eyJuZXJkbGV0SWQiOiJ0dWNzb24ucGxnLWluc3RydW1lbnQtZXZlcnl0aGluZyJ9&cards[0]=eyJuZXJkbGV0SWQiOiJzZXR1cC1uZXJkbGV0cy5zZXR1cC1kb3RuZXQtaW50ZWdyYXRpb24iLCJhY2NvdW50SWQiOjI2NDA0MDl9&platform[accountId]=2498654&platform[timeRange][duration]=1800000&platform[$isFallbackTimeRange]=true"
    icon={<img variant="TechTile" src={dotnetlogo} alt=".NET"/>}
  />

  <TechTile
    name="APM: Node.js"
    to="https://one.newrelic.com/launcher/nr1-core.settings?pane=eyJuZXJkbGV0SWQiOiJ0dWNzb24ucGxnLWluc3RydW1lbnQtZXZlcnl0aGluZyJ9&cards[0]=eyJuZXJkbGV0SWQiOiJzZXR1cC1uZXJkbGV0cy5zZXR1cC1ub2RlLWludGVncmF0aW9uIiwiYWNjb3VudElkIjoyNjQwNDA5fQ==&platform[accountId]=2498654&platform[timeRange][duration]=1800000&platform[$isFallbackTimeRange]=true"
    icon={<img variant="TechTile" src={nodejslogo} alt="Node.js"/>}
  />

  <TechTile
    name="APM: PHP"
    to="https://one.newrelic.com/launcher/nr1-core.settings?pane=eyJuZXJkbGV0SWQiOiJ0dWNzb24ucGxnLWluc3RydW1lbnQtZXZlcnl0aGluZyJ9&cards[0]=eyJuZXJkbGV0SWQiOiJzZXR1cC1uZXJkbGV0cy5zZXR1cC1waHAtaW50ZWdyYXRpb24iLCJhY2NvdW50SWQiOjI2NDA0MDl9&platform[accountId]=2498654&platform[timeRange][duration]=1800000&platform[$isFallbackTimeRange]=true"
    icon={<img variant="TechTile" src={phplogo} alt="PHP"/>}
  />

  <TechTile
    name="APM: Python"
    to="https://one.newrelic.com/launcher/nr1-core.settings?pane=eyJuZXJkbGV0SWQiOiJ0dWNzb24ucGxnLWluc3RydW1lbnQtZXZlcnl0aGluZyJ9&cards[0]=eyJuZXJkbGV0SWQiOiJzZXR1cC1uZXJkbGV0cy5zZXR1cC1weXRob24taW50ZWdyYXRpb24iLCJhY2NvdW50SWQiOjI2NDA0MDl9&platform[accountId]=2498654&platform[timeRange][duration]=1800000&platform[$isFallbackTimeRange]=true"
    icon={<img variant="TechTile" src={pythonlogo} alt="Python"/>}
  />

  <TechTile
    name="APM: Ruby"
    to="https://one.newrelic.com/launcher/nr1-core.settings?pane=eyJuZXJkbGV0SWQiOiJ0dWNzb24ucGxnLWluc3RydW1lbnQtZXZlcnl0aGluZyJ9&cards[0]=eyJuZXJkbGV0SWQiOiJzZXR1cC1uZXJkbGV0cy5zZXR1cC1ydWJ5LWludGVncmF0aW9uIiwiYWNjb3VudElkIjoyNjQwNDA5fQ==&platform[accountId]=2498654&platform[timeRange][duration]=1800000&platform[$isFallbackTimeRange]=true"
    icon={<img variant="TechTile" src={rubylogo} alt="Ruby"/>}
  />
</TechTileGrid>

<Callout variant="tip">
  설치 도우미를 사용하는 이 빠른 시작 접근 방식은 실행하는 각 서비스에 대해 분산 추적을 자동으로 활성화하지만 분산 추적에 참여하려는 APM 에이전트가 이미 있는 경우 분산 추적을 수동으로 활성화해야 합니다. [이전 APM 에이전트에 대한 옵션을](#older-agents) 참조하십시오.
</Callout>

#### 3단계. 추적 보기 [#view-traces]

APM 에이전트로 각 서비스를 계측한 후 일부 추적을 캡처할 수 있도록 애플리케이션에서 일부 트래픽을 생성합니다. 다음은 UI에서 추적을 보는 두 가지 방법입니다.

<CollapserGroup>
  <Collapser
    id="entity-explorer"
    title="특정 서비스를 포함하는 trace 보기"
  >
    다음은 특정 서비스에 대한 추적을 볼 수 있는 한 가지 방법입니다.

    1. **[one.newrelic.com](https://one.newrelic.com/)** 으로 이동합니다.
    2. 상단 메뉴바에서 **APM** 을 클릭합니다.
    3. 서비스를 클릭합니다.
    4. 왼쪽 탐색의 **모니터** 섹션에서 **분산 추적** 을 클릭하십시오.
    5. 원하는 추적이 표시되지 않으면 `trace.id` 으로 필터링할 수 있습니다.
  </Collapser>

  <Collapser
    id="dt-launcher"
    title="계정 간 추적 보기"
  >
    이 옵션을 사용하면 액세스 권한이 있는 조직의 모든 New Relic 계정에서 모든 추적을 검색할 수 있습니다.

    1. **[one.newrelic.com](https://one.newrelic.com/)** 으로 이동합니다.
    2. 상단 메뉴 모음에서 **데이터 찾아보기** 를 클릭한 다음 **추적** 을 클릭합니다.
    3. 왼쪽 창에서 엔터티를 선택합니다.
    4. 원하는 추적이 표시되지 않으면 `trace.id` 으로 필터링할 수 있습니다.
  </Collapser>

  <Collapser
    id="logs-context"
    title="추적 세부정보에 대한 로그 검사"
  >
    로그와 애플리케이션의 데이터를 함께 가져와 문제 해결을 더 쉽고 빠르게 할 수 있습니다. [컨텍스트의 로그를](/docs/logs/logs-context/configure-logs-context-apm-agents/) 사용하면 앱의 UI에서 직접 오류 및 추적과 관련된 로그 메시지를 볼 수 있습니다.

    1. **거래** 페이지에서 추적을 클릭하면 [**추적 세부정보** 페이지](/docs/apm/transactions/transaction-traces/transaction-traces-trace-details-page) 로 이동합니다.
    2. 추적 세부정보 페이지에서 **로그 보기** 를 클릭합니다.
    3. 개별 로그 메시지와 관련된 세부 정보를 보려면 메시지를 직접 클릭하십시오.
  </Collapser>
</CollapserGroup>

UI에서 추적을 찾는 데 도움이 더 필요하면:

* [분산 추적 UI 이해 및 사용](/docs/distributed-tracing/ui-data/understand-use-distributed-tracing-ui)
* [분산 추적 데이터 쿼리](/docs/understand-dependencies/distributed-tracing/ui-data/query-distributed-trace-data)

### 무한 추적 설정(권장) [#infinite-tracing]

APM 에이전트용 표준 분산 추적(위)은 [적응 샘플링](/docs/distributed-tracing/concepts/how-new-relic-distributed-tracing-works/#trace-origin-sampling) 을 사용하여 분당 최대 10개의 추적을 캡처하지만 당사가 모든 데이터를 분석하고 가장 관련성이 높은 추적을 찾도록 하려면 무한 추적을 설정할 수 있습니다.표준 분산 추적에 대한 이 대안은 C SDK를 제외한 모든 APM 언어 에이전트에서 사용할 수 있습니다.

<Callout variant="tip">
  이 기능에 대한 자세한 내용은 [무한 추적](/docs/understand-dependencies/distributed-tracing/infinite-tracing/introduction-infinite-tracing) 을 참조하십시오.
</Callout>

시작하기 전에 먼저 [요구 사항](/docs/understand-dependencies/distributed-tracing/infinite-tracing/introduction-infinite-tracing#requirements) 을 충족하는지 확인하십시오.

#### 1단계. 표준 분산 추적을 위한 계측 완료

무한 추적 설정은 [표준 분산 추적](#quick-start-apm) 에 대한 위의 계측 단계를 기반으로 합니다.추적 관찰자에 대한 다음 단계로 넘어가기 전에 이 작업을 완료했는지 확인하십시오.

#### 2단계. 추적 관찰자 설정 [#provision-trace-observer]

추적 관찰자는 모든 추적을 수집하고 분석하는 New Relic AWS 기반 서비스입니다. [추적 관찰자 설정](/docs/understand-dependencies/distributed-tracing/infinite-tracing/set-trace-observer) 의 지침을 따릅니다. 완료되면 추적 관찰자 정보와 함께 여기로 돌아와 에이전트를 구성하는 다음 단계를 계속합니다.

#### 3단계: 무한 추적을 위한 에이전트 구성

무한 추적 구성 설정에는 표준 분산 추적과 추적 관찰자에 대한 정보가 포함됩니다. 아래에서 언어 에이전트에 대한 설정을 찾으십시오.

<CollapserGroup>
  <Collapser
    id="c-sdk-config"
    title="C SDK"
  >
    C SDK에서는 무한 추적을 사용할 수 없습니다.
  </Collapser>

  <Collapser
    id="go-config"
    title="가다"
  >
    다음은 설정에 대한 개요입니다. 구성에 대한 추가 도움말은 [Go 애플리케이션에 대한 분산 추적 사용](/docs/agents/go-agent/features/enable-distributed-tracing-go-agent) 을 참조하십시오.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            유형
          </th>

          <th>
            필수 구성
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            무한 추적
          </td>

          <td>
            구성 옵션:

            * `newrelic.Config` 구조:

              ```
              app, err := newrelic.NewApplication(
                  newrelic.ConfigAppName(<var>YOUR_APP_NAME</var>),
                  newrelic.ConfigLicense(<var>YOUR_LICENSE_KEY</var>),
                  func(cfg *newrelic.Config) {
                      cfg.DistributedTracer.Enabled = true
                      cfg.InfiniteTracing.TraceObserver.Host = <var>YOUR_TRACE_OBSERVER_HOST</var>
                  },
              )
              ```

            * 환경 변수:

              ```
              NEW_RELIC_DISTRIBUTED_TRACING_ENABLED=true
              NEW_RELIC_INFINITE_TRACING_TRACE_OBSERVER_HOST=<a href="/docs/understand-dependencies/distributed-tracing/infinite-tracing/set-trace-observer#ui-endpoints"><var>YOUR_TRACE_OBSERVER_HOST</var></a>
              ```
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="java-config"
    title="자바"
  >
    다음은 설정에 대한 개요입니다. 구성에 대한 추가 도움말은 [Java 에이전트 구성: 구성 파일](/docs/agents/java-agent/configuration/java-agent-configuration-config-file) 을 참조하십시오.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            유형
          </th>

          <th>
            필수 구성
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            무한 추적
          </td>

          <td>
            구성 옵션:

            * 구성 파일( `newrelic.yml` )( `common` 스탠자 아래에 2개의 공백 들여쓰기):

              ```
              distributed_tracing:
                enabled: true
              infinite_tracing:
                trace_observer:
                  host: <a href="/docs/understand-dependencies/distributed-tracing/infinite-tracing/set-trace-observer#ui-endpoints"><var>"YOUR_TRACE_OBSERVER_HOST"</var></a>                   
              ```

            * 자바 시스템 속성:

              ```
              -Dnewrelic.config.distributed_tracing.enabled=true
              -Dnewrelic.config.infinite_tracing.trace_observer.host=<var>"YOUR_TRACE_OBSERVER_HOST"</var>
              ```

            * 환경 변수:

              ```
              NEW_RELIC_DISTRIBUTED_TRACING_ENABLED=true
              NEW_RELIC_INFINITE_TRACING_TRACE_OBSERVER_HOST=<a href="/docs/understand-dependencies/distributed-tracing/infinite-tracing/set-trace-observer#ui-endpoints"><var>"YOUR_TRACE_OBSERVER_HOST"</var></a>
              ```
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="dot-net-config"
    title=".그물"
  >
    다음은 설정에 대한 개요입니다. 구성에 대한 추가 도움말은 [.NET 에이전트 구성](/docs/agents/net-agent/configuration/net-agent-configuration#distributed_tracing) 을 참조하십시오.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            유형
          </th>

          <th>
            필수 구성
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            무한 추적
          </td>

          <td>
            구성 옵션:

            * 구성 파일( `newrelic.config` ):

              ```
              <configuration . . . >
                 <distributedTracing enabled="true" />
                 <infiniteTracing>
                    <trace_observer host="<a href='/docs/understand-dependencies/distributed-tracing/infinite-tracing/set-trace-observer#ui-endpoints'><var>YOUR_TRACE_OBSERVER_HOST</var></a>" />
                 </infiniteTracing>
              </configuration>
              ```

            * 환경 변수:

              ```
              NEW_RELIC_DISTRIBUTED_TRACING_ENABLED=true
              NEW_RELIC_INFINITE_TRACING_TRACE_OBSERVER_HOST="<a href="/docs/understand-dependencies/distributed-tracing/infinite-tracing/set-trace-observer#ui-endpoints"><var>YOUR_TRACE_OBSERVER_HOST</var></a>"
              ```
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="node-config"
    title="노드.js"
  >
    다음은 설정에 대한 개요입니다. 구성에 대한 추가 도움말은 [Node.js 에이전트 구성](/docs/agents/nodejs-agent/installation-configuration/nodejs-agent-configuration#distributed-tracing) 을 참조하세요.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            유형
          </th>

          <th>
            필수 구성
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            무한 추적
          </td>

          <td>
            구성 옵션:

            구성 파일( `newrelic.js` ):

            ```
            distributed_tracing: {
              enabled: true
            }
            infinite_tracing: {
              trace_observer: {
                host: '<a href="/docs/understand-dependencies/distributed-tracing/infinite-tracing/set-trace-observer#ui-endpoints"><var>YOUR_TRACE_OBSERVER_HOST</var></a>'
              }
            }
            ```

            환경 변수:

            ```
            NEW_RELIC_DISTRIBUTED_TRACING_ENABLED=true
            NEW_RELIC_INFINITE_TRACING_TRACE_OBSERVER_HOST="<var>YOUR_TRACE_OBSERVER_HOST</var>"
            ```
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="php-config"
    title="PHP"
  >
    다음은 설정에 대한 개요입니다. 구성에 대한 추가 도움말 [은 PHP 에이전트에 대한 분산 추적을](/docs/agents/php-agent/features/distributed-tracing-php-agent) 참조하세요.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            유형
          </th>

          <th>
            필수 구성
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            무한 추적
          </td>

          <td>
            구성 옵션:

            * 구성 파일( `newrelic.ini` ):

              ```
              newrelic.distributed_tracing_enabled = true
              newrelic.span_events_enabled = true
              newrelic.infinite_tracing.trace_observer.host= "<var><a href="/docs/understand-dependencies/distributed-tracing/infinite-tracing/set-trace-observer#ui-endpoints">YOUR_TRACE_OBSERVER_HOST</a>"</var>
              ```
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="python-config"
    title="파이썬"
  >
    다음은 설정에 대한 개요입니다. 구성에 대한 추가 도움말은 [Python 에이전트 구성](/docs/agents/python-agent/configuration/python-agent-configuration#distributed-tracing-settings) 을 참조하세요.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            유형
          </th>

          <th>
            필수 구성
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            무한 추적
          </td>

          <td>
            이 설치 명령으로 라이브러리를 풀다운한 다음 구성 파일 또는 환경 변수를 설정합니다.

            ```
            pip install newrelic[infinite-tracing]
            ```

            구성 옵션:

            구성 파일( `newrelic.ini` ):

            ```
            distributed_tracing.enabled = true
            infinite_tracing.trace_observer_host= <var>YOUR_TRACE_OBSERVER_HOST</var>
            ```

            환경 변수:

            ```
            NEW_RELIC_DISTRIBUTED_TRACING_ENABLED=true
            NEW_RELIC_INFINITE_TRACING_TRACE_OBSERVER_HOST="<a href="/docs/understand-dependencies/distributed-tracing/infinite-tracing/set-trace-observer#ui-endpoints"><var>YOUR_TRACE_OBSERVER_HOST</var></a>"
            ```
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="ruby-config"
    title="루비"
  >
    다음은 설정에 대한 개요입니다. 구성에 대한 추가 도움말은 [Ruby 에이전트 구성](/docs/agents/ruby-agent/configuration/ruby-agent-configuration#distributed_tracing) 을 참조하십시오.

    Infinite Tracing을 설정하려면 Infinite Tracing gem을 설치해야 합니다. 보석은 [rubygems.org](https://rubygems.org/gems/newrelic-infinite_tracing) 에서 사용할 수 있습니다. Bundler를 사용하는 애플리케이션의 경우 Gemfile에 Infinite Tracing gem을 추가로 포함합니다.

    ```
    gem 'newrelic-infinite_tracing'
    ```

    Rails 3 이상 또는 [권장 구성](http://bundler.io/v1.12/rails3.html) 의 Rails 2.3을 사용하는 경우 Rails는 자동으로 `Bundler.require` 을 호출하고 애플리케이션 시작 중에 `newrelic-infinite_tracing` 이 필요하도록 합니다. Sinatra 또는 다른 프레임워크를 사용하는 경우 `require 'newrelic/infinite_tracing'` 를 수동으로 호출하거나 `Bundler.require` 을 수동으로 호출해야 합니다.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            유형
          </th>

          <th>
            필수 구성
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            무한 추적
          </td>

          <td>
            구성 옵션:

            * 구성 파일( `newrelic.yml` ):

              ```
              distributed_tracing: 
                enabled: true
              infinite_tracing: 
                trace_observer: 
                  host: '<a href="/docs/understand-dependencies/distributed-tracing/infinite-tracing/set-trace-observer#ui-endpoints"><var>YOUR_TRACE_OBSERVER_HOST</var></a>'
              ```

            * 환경 변수:

              ```
              NEW_RELIC_DISTRIBUTED_TRACING_ENABLED=true
              NEW_RELIC_INFINITE_TRACING_TRACE_OBSERVER_HOST="<a href="/docs/understand-dependencies/distributed-tracing/infinite-tracing/set-trace-observer#ui-endpoints"><var>YOUR_TRACE_OBSERVER_HOST</var></a>"
              ```
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

#### 4단계. (선택 사항) 무한 추적 사용자 지정

에이전트 구성 설정을 추가한 후 New Relic UI에서 데이터를 보기 시작해야 합니다. 데이터를 분석하는 데 시간을 보낸 후 Infinite Tracing의 일부 기능을 조정할 수 있습니다.

* [추적 관찰자 모니터링 구성](/docs/distributed-tracing/infinite-tracing/infinite-tracing-configure-trace-observer-monitoring)
* [스팬 속성 추적 필터 구성](/docs/distributed-tracing/infinite-tracing/infinite-tracing-configure-span-attribute-trace-filter)
* [임의 추적 필터 구성](/docs/distributed-tracing/infinite-tracing/infinite-tracing-configure-random-trace-filter)

## 이전 APM 에이전트를 위한 옵션 [#older-agents]

이전 APM 에이전트가 있는 경우 이 섹션을 사용하여 원하는 분산 추적 기능이 지원되는지 확인하십시오.

호환성 정보 다음은 표준 분산 추적을 켜기 위한 기본 구성 설정을 보여주는 섹션입니다. 이전 에이전트가 무한 추적을 지원하고 설정하려는 경우 [위](#infinite-tracing) 의 단계를 참조하십시오.

### 호환성 가이드

아래에서 언어 에이전트를 찾아 분산 추적과 함께 기존 에이전트를 사용할 수 있는지 확인하십시오.

<CollapserGroup>
  <Collapser
    id="c-sdk"
    title="C SDK"
  >
    필요한 C SDK 버전을 [설치(컴파일)](/docs/agents/c-sdk/install-configure/install-c-sdk-compile-link-your-code) 하거나 [업데이트](/docs/agents/c-sdk/install-configure/update-your-c-sdk-library) 하십시오. 최상의 결과를 얻으려면 [최신 C SDK 버전](/docs/release-notes/agent-release-notes/c-sdk-release-notes) 으로 업데이트하십시오.

    <table>
      <thead>
        <tr>
          <th style={{ width: "250px" }}>
            옵션
          </th>

          <th>
            C SDK 버전
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            표준 분산 추적
          </td>

          <td>
            1.1.0 이상(W3C 추적 컨텍스트를 사용할 수 없음)
          </td>
        </tr>

        <tr>
          <td>
            무한 추적
          </td>

          <td>
            사용할 수 없습니다
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="go-version"
    title="가다"
  >
    필요한 Go 에이전트 버전을 [설치](/docs/agents/go-agent/installation/install-new-relic-go) 하거나 [업데이트](/docs/agents/go-agent/installation/install-new-relic-go) 합니다. 최상의 결과를 얻으려면 [최신 Go 에이전트 버전](/docs/release-notes/agent-release-notes/go-release-notes) 으로 업데이트하세요.

    <table>
      <thead>
        <tr>
          <th style={{ width: "250px" }}>
            옵션
          </th>

          <th>
            이동 에이전트 버전
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            표준 분산 추적
          </td>

          <td>
            2.1.0 이상

            W3C 추적 컨텍스트 사용: 3.1.0 이상
          </td>
        </tr>

        <tr>
          <td>
            무한 추적
          </td>

          <td>
            v3.5.0(W3C 추적 컨텍스트 포함)

            지원 환경: Go 1.9 이상
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="java"
    title="자바"
  >
    필요한 Java 에이전트 버전을 [설치](/docs/agents/java-agent/installation/install-java-agent) 하거나 [업데이트](/docs/agents/java-agent/installation/upgrade-java-agent) 하십시오. 최상의 결과를 얻으려면 [최신 Java 에이전트 버전](/docs/release-notes/agent-release-notes/java-release-notes) 으로 업데이트하십시오.

    <Callout variant="important">
      JVM의 `networkaddress.cache.ttl` 보안 설정은 영원히 또는 `-1` 로 설정되어서는 안 됩니다. 이 네트워킹 속성에 대한 자세한 내용은 [Oracle 네트워크 속성 문서](https://docs.oracle.com/javase/7/docs/technotes/guides/net/properties.html) 를 참조하십시오.
    </Callout>

    <table>
      <thead>
        <tr>
          <th style={{ width: "250px" }}>
            유형
          </th>

          <th>
            자바 에이전트 버전
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            표준 분산 추적
          </td>

          <td>
            4.3.0 이상

            W3C 추적 컨텍스트 사용: 5.10 이상
          </td>
        </tr>

        <tr>
          <td>
            무한 추적
          </td>

          <td>
            5.12.1 이상(W3C 추적 컨텍스트 포함)

            지원되는 환경:

            * 자바 8: 업데이트 252 이상

            * 모든 버전의 Java 9 이상

              <Callout variant="tip">
                특별한 고려 사항은 [Infinite Tracing: Java 7 및 8용 SSL 구성](/docs/understand-dependencies/distributed-tracing/other-requirements/infinite-tracing-configuring-ssl-java-7-8) 을 참조하십시오.
              </Callout>
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="dot-net-version"
    title=".그물"
  >
    필요한 .NET 에이전트 버전을 [설치](/docs/agents/net-agent/installation/net-agent-install-introduction) 하거나 [업데이트](/docs/agents/net-agent/installation/update-net-agent) 합니다. 최상의 결과를 얻으려면 [최신 .NET 에이전트 버전](/docs/release-notes/agent-release-notes/net-release-notes) 으로 업데이트하십시오.

    <table>
      <thead>
        <tr>
          <th style={{ width: "250px" }}>
            옵션
          </th>

          <th>
            .NET 에이전트 버전
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            표준 분산 추적
          </td>

          <td>
            8.6.45.0 이상

            W3C 추적 컨텍스트 사용: 8.27.139.0 이상
          </td>
        </tr>

        <tr>
          <td>
            무한 추적
          </td>

          <td>
            8.30.0(W3C 추적 컨텍스트 포함)

            지원되는 환경:

            * .NET 프레임워크 4.5 이상
            * .NET Core 2.0 이상
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="node-version"
    title="노드.js"
  >
    필요한 Node.js 에이전트 버전을 [설치](/docs/agents/nodejs-agent/installation-configuration/install-nodejs-agent) 하거나 [업데이트](/docs/agents/nodejs-agent/installation-configuration/upgrade-nodejs-agent) 하십시오. 최상의 결과를 얻으려면 [최신 Node.js 에이전트 버전](/docs/release-notes/agent-release-notes/nodejs-release-notes) 으로 업데이트하세요.

    <table>
      <thead>
        <tr>
          <th style={{ width: "250px" }}>
            옵션
          </th>

          <th>
            Node.js 에이전트 버전
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            표준 분산 추적
          </td>

          <td>
            4.7.0 이상

            W3C 추적 컨텍스트 사용: 6.4 이상
          </td>
        </tr>

        <tr>
          <td>
            무한 추적
          </td>

          <td>
            7.3.0(W3C 추적 컨텍스트 포함)

            지원 환경: 노드 버전 10.10.0 이상
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="php-version"
    title="PHP"
  >
    필수 PHP 에이전트 버전을 [설치](/docs/agents/php-agent/getting-started/introduction-new-relic-php) 하거나 [업데이트](/docs/agents/php-agent/installation/upgrade-php-agent) 하십시오. 최상의 결과를 얻으려면 [최신 PHP 에이전트 버전](/docs/release-notes/agent-release-notes/php-release-notes) 으로 업데이트하십시오.

    <table>
      <thead>
        <tr>
          <th style={{ width: "250px" }}>
            옵션
          </th>

          <th>
            PHP 에이전트 버전
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            표준 분산 추적
          </td>

          <td>
            8.4 이상

            W3C 추적 컨텍스트 사용: 9.8 이상
          </td>
        </tr>

        <tr>
          <td>
            무한 추적
          </td>

          <td>
            9.12.0.268 이상
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="python-version"
    title="파이썬"
  >
    필요한 Python 에이전트 버전을 [설치](/docs/agents/python-agent/installation/standard-python-agent-install) 하거나 [업데이트](/docs/agents/python-agent/installation-configuration/upgrade-python-agent) 합니다. 최상의 결과를 얻으려면 [최신 Python 에이전트 버전](/docs/release-notes/agent-release-notes/python-release-notes) 으로 업데이트하십시오.

    <table>
      <thead>
        <tr>
          <th style={{ width: "250px" }}>
            옵션
          </th>

          <th>
            Python 에이전트 버전
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            표준 분산 추적
          </td>

          <td>
            4.2.0.100 이상

            W3C 추적 컨텍스트 사용: 5.6 이상
          </td>
        </tr>

        <tr>
          <td>
            무한 추적
          </td>

          <td>
            5.12.0.140(W3C 추적 컨텍스트 포함)

            지원되는 환경: CPython만 해당(pypy는 지원되지 않음)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="ruby-version"
    title="루비"
  >
    필요한 Ruby 에이전트 버전을 [설치](/docs/agents/ruby-agent/installation/install-new-relic-ruby-agent) 하거나 [업데이트](/docs/agents/ruby-agent/installation/update-ruby-agent) 합니다. Infinite Tracing의 경우 [Infinite Tracing gem](https://rubygems.org/gems/newrelic-infinite_tracing) 도 설치해야 합니다. 최상의 결과를 얻으려면 [최신 Ruby 에이전트 버전](/docs/release-notes/agent-release-notes/ruby-release-notes) 및 [Infinite Tracing gem 버전](https://github.com/newrelic/newrelic-ruby-agent/blob/main/infinite_tracing/CHANGELOG.md) (해당되는 경우)으로 업데이트하십시오.

    <table>
      <thead>
        <tr>
          <th style={{ width: "250px" }}>
            옵션
          </th>

          <th>
            Ruby 에이전트 버전
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            표준 분산 추적
          </td>

          <td>
            [newrelic_rpm](https://rubygems.org/gems/newrelic_rpm) 5.3.0.346 이상

            W3C 추적 컨텍스트 사용: [newrelic_rpm](https://rubygems.org/gems/newrelic_rpm) 6.9 이상
          </td>
        </tr>

        <tr>
          <td>
            무한 추적
          </td>

          <td>
            [newrelic_rpm](https://rubygems.org/gems/newrelic_rpm) 7.0.0 이상(W3C 추적 컨텍스트 포함)

            [newrelic-infinite_tracing](https://rubygems.org/gems/newrelic-infinite_tracing) 7.0.0 이상

            지원 환경: Ruby 2.5 이상
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

### 이전 에이전트에 대한 표준 분산 추적 구성 [#configure-agents]

분산 추적은 구성 설정을 통해 활성화됩니다. 다음 상담원별 섹션을 검토하세요. 에이전트 구성에 대한 일반적인 도움말은 [에이전트](/docs/agents/manage-apm-agents/configuration/configure-agent) 구성 을 참조하십시오.

<Callout variant="important">
  무한 추적에는 서버 측 구성을 사용할 수 없습니다.
</Callout>

<CollapserGroup>
  <Collapser
    id="c-sdk-config-standard"
    title="C SDK"
  >
    다음은 설정에 대한 개요입니다. 구성에 대한 추가 도움말은 [C 애플리케이션에 대한 분산 추적 사용](/docs/agents/c-sdk/instrumentation/enable-distributed-tracing-your-c-applications) 을 참조하십시오.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            유형
          </th>

          <th>
            필수 구성
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            표준 분산 추적
          </td>

          <td>
            구성 옵션:

            * `newrelic_app_config_t` 구조:

              ```
              newrelic_app_config_t* config;
              config = newrelic_create_app_config(app_name, license_key);
              config->distributed_tracing.enabled = true;
              ```
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="go-config-standard"
    title="가다"
  >
    다음은 설정에 대한 개요입니다. 구성에 대한 추가 도움말은 [Go 애플리케이션에 대한 분산 추적 사용](/docs/agents/go-agent/features/enable-distributed-tracing-go-agent) 을 참조하십시오.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            유형
          </th>

          <th>
            필수 구성
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            표준 분산 추적
          </td>

          <td>
            구성 옵션:

            * `ConfigOption` 구조:

              ```
              newrelic.NewApplication(
                newrelic.ConfigAppName("Example App"),
                newrelic.ConfigLicense(os.Getenv("NEW_RELIC_LICENSE_KEY")),
                newrelic.ConfigDistributedTracerEnabled(true),
              )
              ```

            * 환경 변수:

              ```
              NEW_RELIC_DISTRIBUTED_TRACING_ENABLED=true
              ```
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="java-config-standard"
    title="자바"
  >
    다음은 설정에 대한 개요입니다. 구성에 대한 추가 도움말은 [Java 에이전트 구성: 구성 파일](/docs/agents/java-agent/configuration/java-agent-configuration-config-file) 을 참조하십시오.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            유형
          </th>

          <th>
            필수 구성
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            표준 분산 추적
          </td>

          <td>
            구성 옵션:

            * 구성 파일( `newrelic.yml` )( `common` 스탠자 아래에 2개의 공백 들여쓰기):

              ```
              distributed_tracing:
                  enabled: true
              ```

            * 자바 시스템 속성:

              ```
              -Dnewrelic.config.distributed_tracing.enabled=true
              ```

            * 환경 변수:

              ```
              NEW_RELIC_DISTRIBUTED_TRACING_ENABLED=true
              ```
          </td>
        </tr>

        <tr>
          <td>
            무한 추적
          </td>

          <td>
            구성 옵션:

            * 구성 파일( `newrelic.yml` )( `common` 스탠자 아래에 2개의 공백 들여쓰기):

              ```
              distributed_tracing:
                  enabled: true
              infinite_tracing:
                trace_observer:
                  host: <a href="/docs/understand-dependencies/distributed-tracing/infinite-tracing/set-trace-observer#ui-endpoints"><var>"YOUR_TRACE_OBSERVER_HOST"</var></a>
              ```

            * 자바 시스템 속성:

              ```
              -Dnewrelic.config.distributed_tracing.enabled=true
              -Dnewrelic.config.infinite_tracing.trace_observer.host=<a href="/docs/understand-dependencies/distributed-tracing/infinite-tracing/set-trace-observer#ui-endpoints"><var>"YOUR_TRACE_OBSERVER_HOST"</var></a>
              ```

            * 환경 변수:

              ```
              NEW_RELIC_DISTRIBUTED_TRACING_ENABLED=true
              NEW_RELIC_INFINITE_TRACING_TRACE_OBSERVER_HOST=<a href="/docs/understand-dependencies/distributed-tracing/infinite-tracing/set-trace-observer#ui-endpoints"><var>"YOUR_TRACE_OBSERVER_HOST"</var></a>
              ```
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="dot-net-config-standard"
    title=".그물"
  >
    다음은 설정에 대한 개요입니다. 구성에 대한 추가 도움말은 [.NET 에이전트 구성](/docs/agents/net-agent/configuration/net-agent-configuration#distributed_tracing) 을 참조하십시오.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            유형
          </th>

          <th>
            필수 구성
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            표준 분산 추적
          </td>

          <td>
            구성 옵션:

            * 구성 파일( `newrelic.config` ):

              ```
              <configuration . . . >
                 <distributedTracing enabled="true" />
              </configuration>
              ```

            * 환경 변수:

              ```
              NEW_RELIC_DISTRIBUTED_TRACING_ENABLED=true
              ```
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="node-config-standard"
    title="노드.js"
  >
    다음은 설정에 대한 개요입니다. 구성에 대한 추가 도움말은 [Node.js 에이전트 구성](/docs/agents/nodejs-agent/installation-configuration/nodejs-agent-configuration#distributed-tracing) 을 참조하세요.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            유형
          </th>

          <th>
            필수 구성
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            표준 분산 추적
          </td>

          <td>
            구성 옵션:

            구성 파일( `newrelic.js` ):

            ```
            distributed_tracing: {
              enabled: true
            }
            ```

            환경 변수:

            ```
            NEW_RELIC_DISTRIBUTED_TRACING_ENABLED=true
            ```
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="php-config-standard"
    title="PHP"
  >
    다음은 설정에 대한 개요입니다. 구성에 대한 추가 도움말 [은 PHP 에이전트에 대한 분산 추적을](/docs/agents/php-agent/features/distributed-tracing-php-agent) 참조하세요.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            유형
          </th>

          <th>
            필수 구성
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            표준 분산 추적
          </td>

          <td>
            구성 옵션:

            * 구성 파일( `newrelic.ini` ):

              ```
              newrelic.distributed_tracing_enabled = true
              ```
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="python-config-standard"
    title="파이썬"
  >
    다음은 설정에 대한 개요입니다. 구성에 대한 추가 도움말은 [Python 에이전트 구성](/docs/agents/python-agent/configuration/python-agent-configuration#distributed-tracing-settings) 을 참조하세요.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            유형
          </th>

          <th>
            필수 구성
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            표준 분산 추적
          </td>

          <td>
            구성 파일( `newrelic.ini` ):

            ```
            distributed_tracing.enabled = true
            ```

            환경 변수:

            ```
            NEW_RELIC_DISTRIBUTED_TRACING_ENABLED=true
            ```
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="ruby-config-standard"
    title="루비"
  >
    다음은 설정에 대한 개요입니다. 구성에 대한 추가 도움말은 [Ruby 에이전트 구성](/docs/agents/ruby-agent/configuration/ruby-agent-configuration#distributed_tracing) 을 참조하십시오.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            유형
          </th>

          <th>
            필수 구성
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            표준 분산 추적
          </td>

          <td>
            구성 옵션:

            * 구성 파일( `newrelic.yml` ):

              ```
              distributed_tracing:
                      enabled: true
              ```

            * 환경 변수:

              ```
              NEW_RELIC_DISTRIBUTED_TRACING_ENABLED=true
              ```
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

<Callout variant="tip">
  프록시 구성에 대한 도움이 필요한 경우 [프록시 지원](/docs/understand-dependencies/distributed-tracing/other-requirements/infinite-tracing-proxy-support) 을 참조하십시오.
</Callout>

## 수동 계측(자동 계측이 작동하지 않는 경우) [#manual-instrumentation]

**권장 사항:** 사용자 지정 계측을 수행하기 전에 다음을 읽으십시오.

* [분산 추적 작동 방식](/docs/apm/distributed-tracing/getting-started/how-new-relic-distributed-tracing-works)
* [누락된 데이터 문제 해결](/docs/apm/distributed-tracing/troubleshooting/troubleshooting-missing-trace-data)

서비스가 추적 헤더를 다른 서비스로 전달하지 않는 경우 분산 추적 페이로드 API를 사용하여 [호출](#called-service) [서비스](#calling-service) 및 호출된 서비스를 계측할 수 있습니다. 호출 서비스는 API 호출을 사용하여 호출된 서비스에서 수락하는 페이로드를 생성합니다.

<CollapserGroup>
  <Collapser
    id="calling-service"
    title="호출 서비스 계측"
  >
    호출 서비스를 계측하려면:

    1. 호출 서비스를 모니터링 [하는 APM 에이전트 버전이](#compatibility-requirements) 분산 추적을 지원하는지 확인하십시오.

    2. 분산 추적 페이로드 생성을 위한 에이전트 API 호출 호출: [C SDK](/docs/agents/c-sdk/instrumentation/enable-distributed-tracing-your-c-applications) \| [이동](/docs/agents/go-agent/features/distributed-tracing-go#create-manually) \| [자바](/docs/agents/java-agent/api-guides/guide-using-java-agent-api#trace-calls) \| [.NET](/docs/agents/net-agent/net-agent-api/itransaction/#insertdistributedtraceheaders) \| [Node.js](/docs/agents/nodejs-agent/api-guides/nodejs-agent-api#transaction-handle-createDistributedTracePayload) \| [PHP](/docs/agents/php-agent/features/distributed-tracing-php#manual) \| [파이썬](/docs/agents/python-agent/python-agent-api/create_distributed_trace_payload) \| [루비](/docs/agents/ruby-agent/api-guides/guide-using-ruby-agent-api#distributed) .

       <Callout variant="important">
         추적에서 범위의 적절한 순서를 유지하려면 **페이로드를 보내는 범위의 컨텍스트에서 페이로드를 생성해야 합니다** .
       </Callout>

    3. 대상 서비스에 대한 호출(예: 헤더)에 해당 페이로드를 추가합니다.

    4. (선택 사항) 통화를 외부 통화로 식별합니다.

       * [C SDK](https://github.com/newrelic/c-sdk/blob/master/GUIDE.md#distributed-tracing)
       * [가다](/docs/agents/go-agent/get-started/instrument-go-segments#go-external-segments)
       * [자바](https://newrelic.github.io/java-agent-api/javadoc/index.html?com/newrelic/api/agent/TracedMethod.html)
       * .NET: 해당 사항 없음
       * [노드.js](/docs/agents/nodejs-agent/api-guides/nodejs-agent-api#custom-instrumentation-api)
       * PHP: 해당 없음
       * [파이썬](/docs/agents/python-agent/python-agent-api/external-trace)
       * [루비](/docs/agents/ruby-agent/api-guides/guide-using-ruby-agent-api#externals)
  </Collapser>

  <Collapser
    id="called-service"
    title="호출된 서비스 계측"
  >
    호출된 서비스를 계측하려면:

    1. 호출된 서비스를 모니터링 [하는 APM 에이전트 버전이](#compatibility-requirements) 분산 추적을 지원하는지 확인하십시오.

    2. 호출된 서비스의 New Relic 에이전트가 New Relic 트랜잭션을 식별하지 않는 경우 에이전트 API를 사용하여 트랜잭션을 선언합니다.

       <CollapserGroup>
         <Collapser
           id="c-sdk-create"
           title="C SDK"
         >
           트랜잭션이 진행 중이 아님을 알리는 한 가지 방법: `newrelic_create_distributed_trace_payload()` 이 호출되면 `NULL` 포인터가 반환됩니다. 이 문제를 해결하려면 절차에 따라 C SDK [로 트랜잭션을 생성하십시오](/docs/agents/c-sdk/instrumentation/instrument-your-app-c-sdk) .
         </Collapser>

         <Collapser
           id="go-create"
           title="가다"
         >
           트랜잭션이 진행 중이 아님을 알리는 한 가지 방법: `Transaction.InsertDistributedTraceHeaders(h http.Header)` 이 호출될 때 헤더가 삽입되지 않습니다. 거래를 생성하려면 [Instrument Go 거래](/docs/agents/go-agent/instrumentation/instrument-go-transactions) 를 참조하십시오.
         </Collapser>

         <Collapser title="자바">
           트랜잭션이 진행 중이 아님을 알리는 한 가지 방법: `Transaction.insertDistributedTraceHeaders(Headers)` 이 호출될 때 헤더가 삽입되지 않습니다(이 API에는 에이전트 6.4.0 이상이 필요함). 트랜잭션을 생성하려면 [Java 에이전트 트랜잭션 관련 API](/docs/agents/java-agent/api-guides/guide-using-java-agent-api#transactions) 를 참조하십시오.
         </Collapser>

         <Collapser
           id="dotnet-create"
           title=".그물"
         >
           트랜잭션이 진행 중이 아님을 알리는 한 가지 방법: `CreateDistributedTracePayload()` 은 [빈 페이로드](/docs/agents/net-agent/net-agent-api/idistributedtracepayload) 를 반환합니다. 트랜잭션을 만들려면 [.NET 사용자 지정 계측 소개를](/docs/agents/net-agent/custom-instrumentation/introduction-net-custom-instrumentation) 참조하세요.
         </Collapser>

         <Collapser
           id="node-create"
           title="노드.js"
         >
           트랜잭션이 진행 중이 아님을 알리는 한 가지 방법: Node.js 에이전트 로그는 다음과 유사한 오류를 보고합니다.

           ```
           No transaction found when calling Transaction.acceptDistributedTracePayload.
           ```

           [`startWebTransaction`](/docs/agents/nodejs-agent/api-guides/nodejs-agent-api#startWebTransaction) 을 사용하여 웹 트랜잭션을 생성하거나 [`startBackgroundTransaction`](/docs/agents/nodejs-agent/api-guides/nodejs-agent-api#startBackgroundTransaction) 을 사용하여 웹이 [아닌 트랜잭션](/docs/apm/transactions/intro-transactions/monitor-background-processes-other-non-web-transactions) 을 캡처합니다.
         </Collapser>

         <Collapser
           id="php-create"
           title="PHP"
         >
           트랜잭션이 진행 중이 아님을 알리는 한 가지 방법: `newrelic_insert_distributed_trace_headers()` 은 `false` 을 반환합니다. 트랜잭션을 생성하려면 [newrelic_start_transaction](/docs/agents/php-agent/php-agent-api/newrelic_start_transaction) 을 참조하십시오.
         </Collapser>

         <Collapser
           id="python-create"
           title="파이썬"
         >
           트랜잭션이 진행 중이 아님을 알리려면 `transaction = current_transaction()` 이 실행될 때 `transaction` 은 `None` 입니다. 또는 `result = accept_distributed_trace_payload(payload)` 이 실행되면 결과는 `False` 입니다.

           [웹이 아닌 거래](/docs/apm/transactions/intro-transactions/monitor-background-processes-other-non-web-transactions#define) 를 보고하려면 [`background_task`](/docs/agents/python-agent/python-agent-api/background_task) 를 사용하세요. Python 계측에 대한 자세한 내용은 [트랜잭션 및 세그먼트 모니터링](/docs/agents/python-agent/api-guides/guide-using-python-agent-api#transaction-segments) 을 참조하세요.
         </Collapser>

         <Collapser
           id="ruby-create"
           title="루비"
         >
           Rack 기반 웹 프레임워크를 사용 중이고 New Relic의 Rack 계측을 활성화한 경우 Ruby 에이전트가 트랜잭션 시작을 처리합니다. 다른 사용 사례는 [`add_transaction_tracer` API 메서드](/docs/agents/ruby-agent/api-guides/ruby-custom-instrumentation#transaction-tracers) 를 참조하세요.
         </Collapser>
       </CollapserGroup>

    3. 수신한 호출에서 페이로드를 추출합니다(예: 헤더에서).

    4. 페이로드 수락을 위한 호출 호출: [C SDK](/docs/agents/c-sdk/instrumentation/enable-distributed-tracing-your-c-applications) \| [이동](/docs/agents/go-agent/features/distributed-tracing-go#create-manually) \| [자바](/docs/agents/java-agent/api-guides/guide-using-java-agent-api#trace-calls) \| [.NET](/docs/agents/net-agent/net-agent-api/itransaction/#acceptdistributedtraceheaders) \| [PHP](/docs/agents/php-agent/features/distributed-tracing-php#manual) \| [Node.js](/docs/agents/nodejs-agent/api-guides/nodejs-agent-api#transaction-handle-acceptDistributedTracePayload) \| [파이썬](/docs/agents/python-agent/python-agent-api/accept_distributed_trace_payload) \| [루비](/docs/agents/ruby-agent/api-guides/guide-using-ruby-agent-api#distributed) .
  </Collapser>
</CollapserGroup>