---
title: モバイルSDKガイド
tags:
  - Mobile monitoring
  - API guides
metaDescription: Customize your mobile agent instrumentation to send custom data and metrics to New Relic.
freshnessValidatedDate: never
translationType: machine
---

New Relic モバイル SDK API 呼び出しを使用して、モバイルアプリが New Relic にレポートするデータをカスタマイズおよび拡張します。

当社の<InlinePopover type="mobile"/>ソリューションはすぐに使用できる強力なデータ収集機能を提供しますが、モバイル アプリが New Relic に報告するデータをカスタマイズして拡張する必要がある場合があります。 たとえば、パブリック SDK APIコールを使用して次のことを行うことができます。

* モバイルアプリのイベントからインタラクショントレースを開始および停止する
* カスタムメトリクスの記録
* カスタム属性とイベントを送信する
* ライブラリからのネットワーク要求の追跡は自動的にはサポートされません
* ユーザーセッションにカスタムIDを設定する

## 始めましょう [#get-started]

1. 最新のモバイル エージェントがインストールされていることを確認してください。
2. 以下の表からカスタマイズを選択し、メソッドのドキュメントに従ってください。

## 利用可能なカスタマイズ [#methods]

以下の表は、モバイル エージェント インストルメンテーションをカスタマイズするためにサポートされている SDK メソッドを示しています。各エージェント タイプの構文と使用例を表示する方法を選択します。

<table>
  <thead>
    <tr>
      <th style={{ width: "300px" }}>
        あなたがしたい場合は...
      </th>

      <th>
        この方法を使用してください
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td id="crash-analysis">
        ブレッドクラムを記録して、クラッシュのトラブルシューティングに役立つアプリのアクティビティを追跡します。
      </td>

      <td>
        [パン粉の記録](/docs/mobile-monitoring/new-relic-mobile/mobile-sdk/record-breadcrumb)
      </td>
    </tr>

    <tr>
      <td id="creating">
        メソッドをインタラクションとして追跡します。
      </td>

      <td>
        [インタラクションの開始](/docs/mobile-monitoring/new-relic-mobile/mobile-sdk/start-interaction) [インタラクションの停止](/docs/mobile-monitoring/new-relic-mobile/mobile-sdk/stop-interaction)

        <Callout variant="tip">
          これらのメソッドを使用する場合、インストゥルメントされたインタラクションは[\[インタラクション\]](/docs/mobile-monitoring/mobile-monitoring-ui/mobile-app-pages/interactions-page)ページに表示されませんが、次のような NRQL クエリで見つけることができます。

          ```sql
          query SELECT name FROM Mobile SINCE 7 DAYS AGO
          ```
        </Callout>
      </td>
    </tr>

    <tr>
      <td id="naming">
        インタラクションに名前を付けるか、名前を変更します。
      </td>

      <td>
        [名前の相互作用](/docs/mobile-monitoring/new-relic-mobile/mobile-sdk/name-interaction)
      </td>
    </tr>

    <tr>
      <td>
        インタラクションに関連付けるアプリのビルド ID またはバージョンを設定します。
      </td>

      <td>
        [アプリのビルド番号を設定する](/docs/mobile-monitoring/new-relic-mobile/mobile-sdk/set-application-build-number/)

        [アプリのバージョン番号を設定する](/docs/mobile-monitoring/new-relic-mobile/mobile-sdk/set-application-version/)
      </td>
    </tr>

    <tr>
      <td id="create-custom">
        カスタムメトリクスを作成します。
      </td>

      <td>
        [カスタムメトリクスの記録](/docs/mobile-monitoring/new-relic-mobile/mobile-sdk/record-custom-metrics/)
      </td>
    </tr>

    <tr>
      <td id="attributes-events-insights">
        カスタム属性とイベントをレポートします。
      </td>

      <td>
        カスタム属性とイベントをレポートするには、いくつかの方法があります。

        * [カスタム属性を記録する](/docs/mobile-monitoring/new-relic-mobile/mobile-sdk/create-attribute)

        * [セッション属性数を増やす](/docs/mobile-monitoring/new-relic-mobile/mobile-sdk/increment-session-attribute-count)

        * [属性の削除](/docs/mobile-monitoring/new-relic-mobile/mobile-sdk/remove-attribute)

        * [すべての属性を削除](/docs/mobile-monitoring/new-relic-mobile/mobile-sdk/remove-all-attributes)

        * [カスタムイベントの記録](/docs/mobile-monitoring/new-relic-mobile/mobile-sdk/record-custom-events)

        * [パン粉の記録](/docs/mobile-monitoring/new-relic-mobile/mobile-sdk/record-breadcrumb)

        * [イベントプールの最大サイズを設定する](/docs/mobile-monitoring/new-relic-mobile/mobile-sdk/set-max-event-pool-size)

        * [エージェントがイベントをメモリに保存する最大時間を設定する](/docs/mobile-monitoring/new-relic-mobile/mobile-sdk/set-max-event-buffer-time)

        * [現在のセッションの ID を取得する](/docs/mobile-monitoring/new-relic-mobile/mobile-sdk/current-session-id)

        * [イベントおよび属性に関連付けるカスタム ユーザー ID を設定する](/docs/mobile-monitoring/new-relic-mobile/mobile-sdk/set-custom-user-id)

          使用するのに最適な方法とその理由の詳細については、 [「モバイル監視のカスタム イベントと属性をレポートする」を](/docs/data-apis/custom-data/custom-events/report-mobile-monitoring-custom-events-attributes/)参照してください。
      </td>
    </tr>

    <tr>
      <td id="track-custom">
        カスタム ネットワーク リクエストと障害を追跡します。
      </td>

      <td>
        [HTTPリクエストを追跡する](/docs/mobile-monitoring/new-relic-mobile/mobile-sdk/network-request-success)

        [失敗したHTTPリクエストを追跡する](/docs/mobile-monitoring/new-relic-mobile/mobile-sdk/network-request-failures)
      </td>
    </tr>

    <tr>
      <td>
        処理された例外を、発生したコンテキストを含めてイベントとして記録します。
      </td>

      <td>
        [処理された例外を記録する](/docs/mobile-monitoring/new-relic-mobile/mobile-sdk/record-handled-exceptions)
      </td>
    </tr>

    <tr>
      <td>
        エラーを記録します。
      </td>

      <td>
        [記録エラー](/docs/mobile-monitoring/new-relic-mobile/mobile-sdk/record-errors)
      </td>
    </tr>

    <tr>
      <td>
        アプリの起動時のアクティビティに名前を付けます。
      </td>

      <td>
        [アプリの起動時間の目標アクティビティを設定する](/docs/mobile-monitoring/new-relic-mobile/mobile-sdk/name-android-activity)
      </td>
    </tr>

    <tr>
      <td>
        エージェントをシャットダウンします。
      </td>

      <td>
        [エージェントのシャットダウン](/docs/mobile-monitoring/new-relic-mobile/mobile-sdk/shut-down-agent)
      </td>
    </tr>

    <tr>
      <td>
        デフォルトのモバイル監視設定を有効/無効にします。
      </td>

      <td>
        [監視機能の有効化/無効化](/docs/mobile-monitoring/new-relic-mobile/mobile-sdk/configure-settings)
      </td>
    </tr>

    <tr>
      <td>
        テストクラッシュレポートを実行します。
      </td>

      <td>
        [テストクラッシュレポート](/docs/mobile-monitoring/new-relic-mobile/mobile-sdk/test-crash-reporting)
      </td>
    </tr>
  </tbody>
</table>

## モバイル SDK API の使用 [#android-sdk-usage]

### (Android) 自動的に計測されるメソッド [#method-list]

自動インストルメンテーションは、Android エージェントのより便利な機能の 1 つです。ただし、トレース中のメソッドが妨げられる場合は、メソッドに `@SkipTrace` を追加すると、エージェントはコンパイル時のインストルメンテーション中にそれをスキップします。

<table>
  <thead>
    <tr>
      <th width={200}>
        <DNT>
          **Classes**
        </DNT>
      </th>

      <th>
        <DNT>
          **Methods**
        </DNT>
      </th>
    </tr>
  </thead>

  <tbody/>

  <tbody>
    <tr>
      <td>
        `Activity`
      </td>

      <td>
        * `onCreate`
        * `onCreateView`
      </td>
    </tr>

    <tr>
      <td>
        `AsyncTask`
      </td>

      <td>
        * `execute`
        * `executeOnExecutor`
      </td>
    </tr>

    <tr>
      <td>
        `BitmapFactory`
      </td>

      <td>
        * `decodeFile`
        * `decodeResourceStream`
        * `decodeResource`
        * `decodeByteArray`
        * `decodeStream`
        * `decodeFileDescriptor`
        * `decodeResourceStream`
      </td>
    </tr>

    <tr>
      <td>
        `SQLiteDatabase`
      </td>

      <td>
        * `query`
        * `queryWithFactory`
        * `rawQuery`
        * `rawQueryWithFactory`
        * `insert`
        * `insertOrThrow`
        * `insertWithOnConflict`
        * `replace`
        * `replaceOrThrow`
        * `delete`
        * `update`
        * `updateWithOnConflict`
        * `execSql`
      </td>
    </tr>

    <tr>
      <td>
        `GSON`
      </td>

      <td>
        * `toJson`
        * `fromJson`
      </td>
    </tr>

    <tr>
      <td>
        `JSONObject`
      </td>

      <td>
        * `<init>`
        * `toString`
      </td>
    </tr>

    <tr>
      <td>
        `JSONArray`
      </td>

      <td>
        * `<init>`
        * `toString`
      </td>
    </tr>
  </tbody>
</table>

### (iOS) 自動的に計測されるメソッド [#method-list-ios]

自動インストルメンテーションは、iOS エージェントのより便利な機能の 1 つです。デフォルトで有効になっています。無効にするには、機能フラグ`NRFeatureFlag_DefaultInteractions`と`NRFeatureFlag_InteractionTracing`を構成してください。

以下の表に、iOS エージェントで自動的にインスツルメントされるクラスとメソッドを示します。

<table>
  <thead>
    <tr>
      <th width={200}>
        <DNT>
          **Classes**
        </DNT>
      </th>

      <th>
        <DNT>
          **Methods**
        </DNT>
      </th>
    </tr>
  </thead>

  <tbody/>

  <tbody>
    <tr>
      <td>
        `UIViewController`
      </td>

      <td>
        * `viewDidLoad`
        * `viewWillAppear`
        * `viewDidAppear`
        * `viewWillDisappear`
        * `viewDidDisappear`
        * `viewWillLayoutSubviews`
        * `viewDidLayoutSubviews`
      </td>
    </tr>

    <tr>
      <td>
        `UIImage`
      </td>

      <td>
        * `imageNamed`
        * `imageWithContentsOfFile`
        * `imageWithData`
        * `imageWithData:scale:`
        * `initWithContentsOfFile:`
        * `initWithData:`
        * `initWithData:scale:`
      </td>
    </tr>

    <tr>
      <td>
        `NSJSONSerialization`
      </td>

      <td>
        * `JSONObjectWithData:options:error:`
        * `JSONObjectWithStream:options:error:`
        * `dataWithJSONObject:options:error:`
        * `writeJSONObject:toStream:options:error:`
      </td>
    </tr>

    <tr>
      <td>
        `NSManagedObjectContext`
      </td>

      <td>
        * `executeFetchRequest:error:`
        * `processPendingChanges`
      </td>
    </tr>
  </tbody>
</table>

## (iOS) カスタム属性とイベントの送信 [#custom-att-events]

[カスタム属性とイベントをレポートする](/docs/insights/new-relic-insights/adding-querying-data/custom-attributes-events-new-relic-mobile)場合は、 `NewRelic` オブジェクト内の SDK メソッドを使用します。

`BOOL` の結果を返すメソッドは、成功した場合は `YES` を返し、操作が完了しなかった場合は `NO` を返します。これらのメソッドは、New Relic iOS エージェントのバージョン 5.0.0 以降で利用できます。

SDKは、一度に最大128のユーザー定義の[カスタム属性](/docs/insights/insights-data-sources/custom-events/insert-custom-events-attributes-mobile-data#event-definition)を保存できます。 128を超える属性を保存しようとすると、SDKは`NO`を返します。

カスタム属性に名前を付ける場合は、単一の単語の属性を使用し、スペースを使用しないなど、必要な最も単純な形式を使用することをお勧めします。たとえば、 `My Custom Attribute` `myCustomAttribute`にフォーマットする必要があります。

カスタムメトリクスに名前を付ける場合:

* 名前を付けるときは、文字`/ ] [ | *`を使用しないでください。
* マルチバイト文字は避けてください。
