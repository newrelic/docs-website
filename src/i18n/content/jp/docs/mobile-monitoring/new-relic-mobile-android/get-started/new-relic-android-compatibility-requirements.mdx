---
title: Androidエージェントの互換性と要件
tags:
  - Mobile monitoring
  - New Relic Mobile Android
  - Get started
metaDescription: 'Compatible build systems, OS versions, and more for the Android agent.'
translationType: human
---

モバイルモニタリングは、Google Play Store、Amazon Appstoreなどの標準的なアプリケーションストアに対応しています。Androidアプリケーションで、[モバイルエージェントをインストールして構成する](/docs/mobile-monitoring/new-relic-mobile-android/install-configure)前に、以下のガイドラインに従って互換性やその他の要件を確認してください。

## フォアグラウンドモニタリング [#foreground]

Androidエージェントは、アプリがフォアグラウンドにある場合にのみ、アプリを監視します。アプリケーションが閉じられている間、エージェントがバックグラウンドサービスを監視することはありません。詳細については、当社の[モバイルデータプライバシーおよびセキュリティについてのドキュメント](/docs/mobile-monitoring/new-relic-mobile/get-started/security-mobile-apps)を参照してください。

## Androidの互換性 [#compatibility]

Androidアプリが、以下の要件を満たしていることを確認します。

<table>
  <thead>
    <tr>
      <th width={200}>
        コンポーネント
      </th>

      <th>
        アプリケーション要件
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        オペレーティングシステム
      </td>

      <td>
        Android 7.0以降

        * バージョン**6.6.0**以降：ビルドは、Android SDK Toolsバージョン24以降でコンパイルする必要があります。
        * バージョン**6.0.0**～**6.5.0**：ビルドは、Android SDK Toolsバージョン21以降でコンパイルする必要があります。
        * バージョン**5.0.0**以降：ビルドは、Android SDK Toolsバージョン14以降でコンパイルする必要があります。
      </td>
    </tr>

    <tr>
      <td>
        API/SDK
      </td>

      <td>
        HttpURLConnection、OkHttp2（バージョン2.0と2.4を除く）、OkHttp（バージョン2.8、3.5+、4.0+）、OkIO（バージョン1.11）、AndroidHttpClient、Volley（バージョン1.0.0）、Apache HTTP ClientネットワーキングAPI

        <Callout variant="important">
          `AndroidHttpClient` ビルドはバージョン23のSDKから削除されたため、エージェントのバージョン`6.5.0`以前でのみサポートされています
        </Callout>

        Android SDK Tools バージョン24以降、および必要に応じて以下によるビルド。

        * Android Studio

        * Gradle 5.1.1

        * Gradle plugin 3.4

        * Proguard 5.0

        * DexGuard 8.0～9.x

          <Callout variant="important">
            2021年1月時点で、当社のAndroidエージェントはAndroid Gradle Pluginバージョン2のサポートを中止しました。詳細については、[サポートフォーラムの投稿](https://discuss.newrelic.com/t/important-upcoming-changes-to-capabilities-across-browser-php-python-mobile-and-android-agents/123951)をご覧ください。
          </Callout>

          <Callout variant="important">
            2022年5月現在、Android Gradleプラグインバージョン7.2.1リリースは、ASM APIと併用すると変換APIを破壊し、New Relic Androidエージェントの機能に影響を及ぼすことが判明しています。この問題は[Android Gradleプラグインバージョン7.2.2](https://developer.android.com/studio/releases/gradle-plugin#7-2-0)で修正済みです
          </Callout>

          Androidエージェントをインストールする前に最新のバージョンにアップグレードしてください。
      </td>
    </tr>

    <tr>
      <td>
        言語
      </td>

      <td>
        Java 1.7からJava 9まで。JDK 11はバージョン6.2.0以降でサポートされています。
      </td>
    </tr>

    <tr>
      <td>
        デバイス
      </td>

      <td>
        Androidと互換性のあるデバイス （スマートフォン、タブレット、Android TV、Amazon Fireなど）
      </td>
    </tr>

    <tr>
      <td>
        ファイルサイズ
      </td>

      <td>
        エージェントがリリースAPKに追加するのは500KB未満です。
      </td>
    </tr>

    <tr>
      <td>
        アーキテクチャ
      </td>

      <td>
        ARM、Intel Atom
      </td>
    </tr>

    <tr>
      <td>
        署名の検証
      </td>

      <td>
        エージェントは、署名時に[署名照合](https://docs.oracle.com/javase/7/docs/technotes/guides/jar/jar.html#Signature_Validation)を使用するJARをインストゥルメントできません。JARのうち、`SHA1-Digest`もしくは`SHA-256-Digest`属性のマニフェストを含むものは修正されません。
      </td>
    </tr>
  </tbody>
</table>

## エージェントとGradleの互換性 [#agent-gradle]

以下は、New Relic Android エージェント、Gradle、および[Android Gradleプラグイン](https://developer.android.com/studio/releases/gradle-plugin)の互換バージョンです。

<Callout variant="important">
  2021年1月時点で、当社のAndroidエージェントはAndroid Gradle Pluginバージョン2のサポートを中止しました。詳細については、[サポートフォーラムの投稿](https://discuss.newrelic.com/t/important-upcoming-changes-to-capabilities-across-browser-php-python-mobile-and-android-agents/123951)をご覧ください。
</Callout>

<table>
  <thead>
    <tr>
      <th width={200}>
        Android Gradleプラグイン
      </th>

      <th>
        New Relic Androidエージェントの互換性
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        [2.3](https://developer.android.com/studio/releases/gradle-plugin#2-3-0)
      </td>

      <td>
        バージョン6.0以降ではサポートされなくなりました。[5.25](/docs/release-notes/mobile-release-notes/android-release-notes/android-5252)～[5.26](/docs/release-notes/mobile-release-notes/android-release-notes/android-5260-0)はサポートされていません
      </td>
    </tr>

    <tr>
      <td>
        [3.0](https://developer.android.com/studio/releases/gradle-plugin#3-0-0) - [3.3](https://developer.android.com/studio/releases/gradle-plugin#3-3-0)
      </td>

      <td>
        バージョン6.0以降ではサポートされなくなりました。
      </td>
    </tr>

    <tr>
      <td>
        [3.4](https://developer.android.com/studio/releases/gradle-plugin#3-4-0)
      </td>

      <td>
        [5.25](/docs/release-notes/mobile-release-notes/android-release-notes/android-5252)以降
      </td>
    </tr>

    <tr>
      <td>
        [4.+](https://developer.android.com/studio/releases/gradle-plugin#4-0-0)
      </td>

      <td>
        [5.26](/docs/release-notes/mobile-release-notes/android-release-notes/android-5260-0)以降
      </td>
    </tr>

    <tr>
      <td>
        [7.1.0](https://developer.android.com/studio/releases/gradle-plugin#7-1-0)
      </td>

      <td>
        [6.2.0](/docs/release-notes/mobile-release-notes/android-release-notes/android-620)以降
      </td>
    </tr>
  </tbody>
</table>

## KotlinおよびKotlin DSL [#kotlin]

[GradleによるKotlinプロジェクト](https://kotlinlang.org/docs/reference/using-gradle.html)およびNew RelicのAndroidエージェントを使用することもできます。

### AndroidエージェントバージョンによるKotlin DSLのサポート [#Kotlin-DSL-support-by-Android-agent-version]

上記の[Android Gradleプラグイン](#agent-gradle)との非互換性を除くと、New RelicのAndroidエージェントはKotlin Gradleプラグインのバージョン**1.3～1.4**と互換性があります。

<table>
  <thead>
    <tr>
      <th width={200}>
        Kotlin DSLバージョン
      </th>

      <th>
        New Relic Androidエージェントの互換性
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        1.2
      </td>

      <td>
        非サポート
      </td>
    </tr>

    <tr>
      <td>
        1.3
      </td>

      <td>
        * **5.24以前：**Kotlin Gradle Pluginバージョン1.3.10以降が必要です
        * **5.25：**Kotlin Gradle Pluginバージョン1.3.10以降が必要です
        * **5.26：**Androidエージェントバージョン5.26.0～5.28.0ではサポートされていません
      </td>
    </tr>

    <tr>
      <td>
        1.4
      </td>

      <td>
        * **5.24以前：**Kotlin Gradle Pluginバージョン1.3.10以降が必要です
        * **5.25：**サポート対象
        * **5.26：**Androidエージェントバージョン5.26.0～5.28.0ではサポートされていません
      </td>
    </tr>
  </tbody>
</table>

### AGPバージョンにおけるKotlinDSLのサポート [#kotlin-andoid-gradle]

Kotlin DSLのサポートはバージョン4.1でAndroid Gradleプラグインに正式に追加されましたが、多くの開発者がすでにGroovyの代わりにKotlin DSLを使用しています。

<table id="Kotlin-DSL-support-by-Android-agent-version">
  <thead>
    <tr>
      <th width={200}>
        Kotlin DSLバージョン
      </th>

      <th>
        Android GradleプラグインおよびAndroid Gradleの互換性
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        1.3
      </td>

      <td>
        * **3.2（AGP）、4.6（Gradle）:**Kotlin Gradle Pluginバージョン1.3.10以降が必要です
        * **3.3（AGP）、5.1.1（Gradle）：**Kotlin Gradleプラグインバージョン1.3.10以降が必要です
        * **3.4（AGP）、5.1.1（Gradle）：**Kotlin Gradleプラグインバージョン1.3.10以降が必要です
        * **3.5（AGP）、5.4.1（Gradle）：**Kotlin Gradleプラグインバージョン1.3.10以降が必要です
        * **3.6（AGP）、5.6.4（Gradle）：**Kotlin Gradleプラグインバージョン1.3.40以降が必要です
        * **4.0（AGP）、6.1.1（Gradle）：**Kotlin Gradleプラグインバージョン1.3.40以降が必要です
        * **4.1（AGP）、6.5（Gradle）：**Kotlin Gradleプラグインバージョン1.3.40以降が必要です
      </td>
    </tr>

    <tr>
      <td>
        1.4
      </td>

      <td>
        * **3.2（AGP）、4.6（Gradle）**：Gradle 5.3が必要です
        * **3.3（AGP）、5.1.1（Gradle）：**:Gradle 5.3が必要です
        * **3.4（AGP）、5.1.1（Gradle）：**サポート対象
        * **3.5（AGP）、5.4.1（Gradle）：**サポート対象
        * **3.6（AGP）、5.6.4（Gradle）：**サポート対象
        * **4.0（AGP）、6.1.1（Gradle）：**サポート対象
        * **4.1（AGP）、6.5（Gradle）：**サポート対象
      </td>
    </tr>
  </tbody>
</table>

## ユニットテストはサポート対象外 [#testing]

New Relic Mobileエージェントは、通常のアプリケーションライフサイクルで動作するように設計およびテストされています。当社は、エージェントを使用したアプリケーションでのテスト環境の実行をサポートしていません。テストの実行は、競合および予測できない動作の原因となる場合があります。