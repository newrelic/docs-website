---
title: CodeStreamでコードを議論する
metaDescription: How to enable code discussions using New Relic CodeStream codemarks.
translationType: machine
---

## コードマークとは何ですか？ [#codemark]

簡単に言えば、コードマークとは、コードに関連する議論のことです。質問、提案、バグレポート、ドキュメントなど、さまざまなものがあります。これらのディスカッションはすべて保存され、参照したコードブロックに固定され、将来的に活用できるようになります。それは、チームに加わった新しい開発者かもしれませんし、他の人のコードのバグを修正しようとしている開発者かもしれませんし、6ヶ月前に変更を加えた理由を思い出そうとしているあなたかもしれません。どのような場合でも、CodeStreamはディスカッションを文脈に沿って表示することで、コードを理解するのに役立ちます。

![コードマークのスクリーンショット](/images/CodemarkInGutter1.png "コードマーク")

ファイルが時間とともに変化しても、コードマークはコードとつながっています。コードブロックの上に新しいコードを追加したり、コードを編集したり、コードブロック全体をファイルの別のセクションにカット＆ペーストしたりすると、コードマークが変更に合わせて移動するのがわかります。

## コードマークの作成 [#create]

コードマークを作成するには、エディターでコードのブロックを選択し、選択したブロックの隣にある「コードストリーム」ペインに表示されるアイコンの1つをクリックします。

![新しいコードマークのスクリーンショット](/images/DiscussCode1-VSC.gif "新しいコードマーク")

IntelliJなどのJetBrains IDEを使用している場合、コードのブロックを選択するとエディタのガッターに表示される **+** ボタンを使ってコードマークを作成することもできます。フィードバック・リクエストやプル・リクエストのために差分を表示しているときにも、ガッターにカーソルを合わせるとボタンが表示され、1行のコメントを簡単に書くことができます。

![JetBrainsの新しいコードマークを示すスクリーンショット](/images/Compose-JB.gif "新しいコードマークのJB")

コードストリーム」ペインが閉じていたり、表示されていない場合でも、ライトバルブメニューまたはコンテキストメニューの「コードストリーム」オプションを使ってコードマークを作成することができます。

![コードマークを作成するためのオプションメニューの画面です。](/images/ContextMenu4.png "コンテキストメニュー")

また、CodeStream ペインの上部にある **+** メニューを探してみてください。

IDEに多くの時間を費やしていないチームメイトにアプローチする必要がありますか？あるいは、まだCodeStreamを利用していないチームメイトがいるかもしれません。オプションとして、コードマークをSlackやMicrosoft Teamsで共有することができます。Slackとの連携では、チームメイトがSlackから直接返信することもできます。

![Slackなどのコミュニケーションチャネルでコードマークを共有する方法を示したスクリーンショット](/images/SharingOptions1.png "共有オプション")

## コメントコードマーク [#comments]

コメントコードマークは、あらゆる種類の議論とコードブロックを結びつけるための万能コードマークです。質問をする。提案をする。コードを文書化する。コードベースの重要な部分を記録する。可能性は無限大です。

![コードマークへのコメント方法を示す画面](/images/CodemarkComment6.png "コメントコードマーク")

## コードマークの発行 [#issues]

何かを成し遂げなければならないとき、誰かの名前が付いた課題として記録されていれば、それが実現する可能性は高くなります。バグを報告するために課題を割り当てたり、インラインFIXMEではなくトラッキングされた課題として項目を記録することで、技術的負債を管理することができます。

![問題を示すスクリーンショット](/images/CodemarkIssue7.png "イシューコードマーク")

あなたのチームが課題のトラッキングにAsana、Azure DevOps、Bitbucket (cloud)、Clubhouse、GitHub (cloud or Enterprise)、GitLab (cloud or Self-Managed)、Jira (cloud or Server)、Linear、Trello、またはYouTrack (cloud)を使用している場合、CodeStreamから直接これらのサービスに課題を作成することができます。コードマークフォームの上部にあるドロップダウンから、使用しているサービスを選択します。

![課題追跡サービスの画面イメージ](/images/IssueTrackingIntegrations2.png "イシュー・トラッキング・サービス")

選択したサービスで認証プロセスを経た後、課題の送信先を選択します。例えば、Jiraの場合は、適切な課題タイプとプロジェクトを選択します。

![問題の場所を示すスクリーンショット](/images/NewIssue-JiraOptions1.png "発行場所")

CodeStream上で課題が作成されると、外部サービスで作成された課題へのリンクが含まれます。例では、Jira上の課題のURLが表示されています。

![課題を外部サービスにリンクさせる方法を示すスクリーンショット](/images/LinkedIssues.png "連動する課題")

Jiraに掲載されている課題には、関連するコードをIDEで開くためのリンクが含まれています。

![Jiraのコードマークパーマリンクを示すスクリーンショット](/images/IssueOnJira1.png "jira issue")

## 適切な人を議論に巻き込む [#discuss]

コードマークを作成すると、CodeStreamはあなたがコメントしているコードに最も最近触れた人を自動的に言及します。もちろん、これらのメンションを削除し、必要に応じて他の人を手動でメンションすることもできます。

![オートメンション機能のスクリーンショット](/images/CodemarkCompose.png "オートメンション")

コードを触った人がまだCodeStreamに参加していない場合もあるかもしれませんが、その場合はCodeStreamがチェックボックスを用意して、メールで通知します。メールに返信することで、コメントがCodeStreamに投稿されます。もちろん、CodeStreamをインストールして、IDEから参加することもできます。

## 異なるバージョンのコードを扱う [#different-versions]

機能ブランチを使っていたり、ローカルで変更していたり、久しぶりにプルダウンしていたり。自分が見ているコードと、チームメイトが見ているコードが違う理由は無数にあります。その結果、コードマークで参照されているコードが、ローカルにあるコードと一致しないことが多々あるでしょう。

CodeStreamはこのような状況を認識し、コードブロックのオリジナルバージョン（例えば、コードマークが作成された時）、現在のバージョン、そして差分を含んでいます。

![バージョン差を示すスクリーンショット](/images/CodemarkWithDiff1.png "バージョン違い")

CodeStreamでは、ソースファイルのどの行のコードでも、いつでも議論することができることを覚えておいてください。CodeStreamは、開発プロセスの最も初期の段階でコードを議論することができるのです。

## コードマークの解消 [#resolve]

必須ではありませんが、コメントと課題のコードマークはどちらも解決することができます。 [コードストリーム」ペインの「コードマーク](/docs/codestream/codestream-ui-overview/codemarks-section/) 」セクションでは、コードマークを「オープン」、「解決」、「アーカイブ」に分けています。これらの異なる状態を表すために、緑、紫、グレーのアイコンが使用されています。CodeStream」ペインに多くのオープン/グリーンのコードマークが表示されている場合は、チームメイトが解決されていない議論や問題に阻まれていることを意味します。

コードマークを解決すると同時にコメントを追加したり、コードマークをアーカイブすることもできます。

![コードマークの解決方法を示すスクリーンショット](/images/ResolveCodemark.png "コードマークの解決")

## 高度な機能 [#advanced]

高度な機能としては、複数の範囲コードマーク、ファイルの添付、タグ、関連コードマークなどがあります。

### 複数のレンジ [#ranges]

コードに関する議論の多くは、1つのコードブロックだけではなく、複数のコードの場所を同時に参照できる場合に、コンセプトを最もよく表現することができます。ここでは、マルチレンジコードマークの例をいくつかご紹介します。

* 関数の名称に影響を与えるような変更が検討されています。関数の呼び出しの各インスタンスは、1つの議論で参照できるようになりました。
* ReactコンポーネントとそのCSSスタイリングがうまく連動していないので、チームに意見を求めたいとします。チームメイトが自分の言っていることを正確に理解できるように、適用すべきと思われるdivとCSSルールを選択するとよいでしょう。
* サーバーへのAPIコールを行うクライアントが、予期しない結果を得ることがあります。APIコールを行っているコードと、APIサーバーのハンドラーを選択して、2つのアクションを結びつけてください。

マルチレンジコードマークを作成するには、 **+ コードブロックの追加** をクリックします。

![コードマークにコードブロックを追加する方法を示したスクリーンショット](/images/CodemarkAddRange1.png "コードブロックの追加")

次に、同じファイルや別のファイル、あるいは別のレポから別のコードブロックを選択します。

![別の場所のコードブロックを選択する方法を示す画面](/images/CodemarkSelectRange.png "セレクトコードブロック")

次の例のように、 `[#N]` のように各コードブロックを参照することで（またはコードブロックの1つからピンのアイコンをクリックしてマークダウンを挿入することで）、差分のコードブロックをあなたの投稿にちりばめることができます。

![コードブロックの参照方法を示すスクリーンショット](/images/ReferenceCodeBlocks.png "リファレンスコードブロック")

その例がどのようにレンダリングされるかを説明します。

![マルチレンジコードブロックのスクリーンショット ](/images/MultiRangeCodemark.png "マルチレンジコードマーク")

コードマークを作成した後、各コードブロックの右下にあるジャンプアイコンをクリックすることで、異なる場所にジャンプすることができます。

コードマークを編集する際には、コードブロックを追加・削除することができ、破線の四角いアイコンをクリックすることで、コードブロックの位置を変更することができます。

### 添付ファイル [#attachments]

コードブロックに直接ファイルを添付することで、コードに関する議論をより豊かにすることができます。ファイルを添付することで、コメントやドキュメントがどれだけ説得力のあるものになるか考えてみてください。

* 新機能開発のための仕様書
* コード上の問題をデバッグするためのログファイル
* いくつかのUI作業を明確にするためのモックアップ
* スクリーンショットで問題点を指摘

コードのコメントや課題を作成する際に、説明欄にドラッグ＆ドロップするか、クリップボードから貼り付けるか、クリップアイコンをクリックすることで、ファイルを添付することができます。

マークダウンを使って画像をインラインで表示することもできます。添付ファイルの右にあるピンのアイコンをクリックすると、CodeStreamがマークダウンを挿入してくれます。

これで、チームメイトはあなたが何を求めているのかを正確に知ることができます。

![インラインディスプレイの画面例](/images/InlineImage.png "インラインイメージ")

添付ファイル欄のファイルをクリックすると、ダウンロードするか、適切なアプリケーションで開くことができます。

### タグの追加 [#tags]

コードマーク作成ボックスの中にあるタグのアイコンを見て、タグを選択するか、色とテキストラベルを自由に組み合わせてタグを作成することができます。

![タグメニューのスクリーンショット](/images/TagsPopup.png "タグメニュー")

タグは、組織のコードマークを大まかに整理してグループ化するのに最適な方法で、ここでの可能性は無限です。

また、 [フィルター& 検索ページ](/docs/codestream/codestream-ui-overview/filter-search/) でタグによるフィルタリングも可能です。

### 関連コードマーク [#related]

コードマーク作成フォームのコードストリームアイコンをクリックすると、関連する他のコードマークを選択して、現在のコードマークに添付することができます。これにより、コードベースの異なる部分間の接続が確立されます。例えば、コードベースのある部分を変更すると、別の部分にも変更が必要になる場合、2つの関連するコードマークを作成することで依存関係を識別します。

![関連コードマークの追加方法を示すスクリーンショット](/images/AddCodelink.png "コードリンクの追加")

関連するコードマークを追加すると、それらは関連セクションに表示され、いずれかをクリックすると、そのコードマークとコードの対応するセクションにジャンプできます。

![関連するコードマークのあるコードマークを示すスクリーンショット](/images/CodemarkWithRelated.png "関連するコードマークのあるコードマーク")

## コードマークの管理 [#manage]

任意のコードマークの楕円形メニューをクリックすると、コードマークを管理するためのオプションが表示されます。

![コードマークの管理方法を示した画面](/images/CodemarkMenu2.png "コードマークメニュー")

* **共有**: コードマークを作成した時点でSlackやTeamsに共有するだけでなく、後からいつでも共有することができます。
* **フォロー/アンフォロー**: コードマークをフォローすると、そのコードマークが更新されたときに通知されます。フォローを解除すると、通知を受け取らなくなります。
* **Copy link**: コードマークの [パーマリンク](/docs/codestream/codestream-ui-overview/permalinks/) を取得して、どこでも共有できます。
* **アーカイブ**: 与えられたファイルに恒久的に表示するほど重要ではないが、完全に削除したくないと思うコードマークがある場合、代わりにアーカイブすることができます。 [codemarks セクション](/docs/codestream/codestream-ui-overview/codemarks-section/) の設定により、アーカイブされたすべてのコードマークを簡単に見ることができます。
* **編集**: コードマークの作者のみが編集できます。
* **削除**: コードマークの作者のみが削除できますが、そのコードマークが今後価値を持たないと確信できる場合を除き、削除ではなくアーカイブすることをお勧めします。
* **Inject as Inline Comment**: 特定のコードマークをレポの一部にしたい場合は、このオプションを使ってインラインコメントとして追加します。適切なフォーマットを選択し、タイムスタンプや返信を含めるかどうか、コメントを80文字で折り返すかどうかを指定します。また、インラインコメントとして追加されたコードマークをアーカイブするかどうかも選択できます。
* **コードマークの再配置**: ほとんどの場合、コードマークは、ファイルが時間の経過とともに変化しても、それが参照するコードブロックに自動的にリンクされたままになります。例えば、コードブロックを切り取って、ファイルの別の場所に貼り付けると、コードマークも一緒に移動します。しかし、コードストリームが自動的に処理できないシナリオもあります。例えば、コードのブロックを別のファイルに貼り付けた場合です。このような場合、 **Reposition** のコードマークで、コードマークが正しく表示されるようにコードブロックの新しい位置を選択することができます。