---
title: NRQL検索をスケジュールする
tags:
  - NRQL
  - Scheduled searches
  - Query scheduling
  - Automated queries
  - Email notifications
  - Workflow automation
metaDescription: 'Schedule automated NRQL queries to receive regular updates on your data via email. Transform repetitive, manual queries into proactive, automated workflows.'
freshnessValidatedDate: never
translationType: machine
---

New Relicユーザーは、同じNRQL書き込みを何度も実行して、重要なパターンを監視したり、特定の条件を確認したり、定期的なレポートを生成したりできます。 たとえば、失敗したトランザクションを毎日チェックしたり、毎週エラー率を監視したり、アプリケーション全体で時間ごとのパフォーマンス メトリクスを追跡したりする必要があります。 この手動プロセスは時間がかかり、積極的に監視していないときに重要なインサイトを見逃しやすくなります。

スケジュールされた NRQL 検索は、繰り返し実行されるクエリを自動化することでこの問題を解決します。クエリを自動的に実行するようにスケジュールし、結果を電子メールで受け取ることができるため、手動で継続的に監視することなく、重要なパターンに関する情報を常に把握できます。

<Callout title="プレビュー">
  この機能はまだ開発中ですが、ぜひお試しください。

  この機能は現在、弊社の[プレリリース ポリシー](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy)に従ってプレビュー プログラムの一部として提供されています。プレビュー期間中、この機能は[ログ UI](/docs/logs/ui-data/use-logs-ui)からアクセスでき、一般提供後に他の機能にも拡張される予定です。
</Callout>

## 行えること [#features]

スケジュールされた NRQL 検索では次のことが可能になります。

* **繰り返しのクエリを自動化**: 手動クエリを、スケジュールに従って実行される自動ワークフローに変換します。
* **積極的に情報を入手**: クエリの結果が直接受信トレイに配信される電子メール通知を受け取ります。
* **柔軟なスケジュール設定**: カスタム cron 式スケジュールを使用して、クエリの実行タイミングを定義します。
* **複数の出力形式**: 結果を電子メール通知に添付された CSV または JSON ファイルとしてエクスポートします。
* **チームコラボレーション**: スケジュールされた検索結果を複数の電子メール受信者に送信します。
* **集中管理**: 管理 UI の 1 つの場所から、スケジュールされたすべての検索を表示、編集、管理します。

## 前提条件 [#prerequisites]

スケジュールされた NRQL 検索を使用するには、次のものが必要です。

* **ユーザー権限**: スケジュールされた検索を作成および管理するには、 [ワークフロー自動化](/docs/workflow-automation/create-a-workflow-automation/managing-workflow/#before-you-begin)権限が必要です。
* **アカウント アクセス**: 検索をスケジュールするアカウントへのアクセス。
* **データ アクセス**: スケジュールするデータを記述するための適切な権限。 たとえば、ログ データに対してクエリをスケジュールする場合は、そのログ データにアクセスする必要があります。

<Callout variant="important">
  スケジュールされた NRQL 検索は、New Relic のワークフロー自動化インフラストラクチャ上に構築されます。組織にはワークフローを作成および管理するための適切な権限が必要です。
</Callout>

## 新しい検索をスケジュールする [#create-schedule]

新しい自動 NRQL 検索をスケジュールするには:

<Steps>
  <Step>
    **スケジュールされた検索にアクセスします**:

    1. **[one.newrelic.com](https://one.newrelic.com) &gt; Administration &gt; Scheduled Searches**に移動します。
    2. 新しい検索を設定するには、 <DNT>**Scheduled Searches**</DNT>ページで**Schedule a search** \[検索をスケジュール]をクリックします。
  </Step>

  <Step>
    **クエリを設定します**:

    1. 設定モーダルで、標準の NRQL 構文を使用して NRQL クエリを作成します。
    2. クエリをテストして、期待どおりの結果が返されることを確認します。
    3. スケジュールされた検索の通知設定を行うには、 **Continue** \[続行]をクリックします。
  </Step>

  <Step>
    **通知の設定**:

    <img title="Notification setup" alt="screenshot of notification setup" src="/images/nrql_scheduled-query_-set-up-notification.webp" />

    <figcaption>
      この視覚化では、スケジュールされた NRQL クエリの通知設定を示します。
    </figcaption>

    1. スケジュールされた検索の名前を入力します。

    2. 検索目的を識別するのに役立つ説明をオプションで追加します。

    3. クエリ結果を受信する[宛先](/docs/alerts/get-notified/destinations/)を設定します。現在、結果は電子メールの宛先にのみ送信できます。

       <CollapserGroup>
         <Collapser id="existing destination-destination" title="既存の目的地を選択">
           ドロップダウンから、既存の宛先を確認します。各宛先には、電子メール アドレスのグループが関連付けられている場合があります。クエリ結果を受け取る宛先を 1 つ以上選択します。希望する目的地がリストにない場合は、新しい目的地を作成できます。
         </Collapser>

         <Collapser id="new-destination" title="新しい目的地を追加する">
           <DNT>**+ Add destination**</DNT>をクリックし、開いたモーダルで次の手順を実行します。

           1. <DNT>**+ Add email**</DNT>をクリックし、メール ID またはユーザー名で受信者を検索して追加します。
           2. 宛先の一意の名前を入力して保存します。

           新しい宛先は、通知設定モーダルの利用可能な宛先のリストに追加されます。目的地を編集するには、 <Icon name="fe-more-horizontal" />メニュー。
         </Collapser>
       </CollapserGroup>

    4. 電子メール通知の件名とメッセージ本文を入力します。

    5. 電子メールに含めるクエリ結果の形式を選択します。

    6. 電子メール通知のスケジュールを設定するには、 **Continue** \[続行]をクリックします。
  </Step>

  <Step>
    **スケジュールを設定する**:

    現在はcron式のみをサポートしています。以下に、参考までに一般的な cron 式パターンをいくつか示します。cron 式を入力し、 <DNT>**Continue**</DNT>クリックします。

    * `0 * * * *` - 毎時0分

    * `0 9 * * *` - 毎日午前9時

    * `0 9 * * 1` - 毎週月曜日午前9時

    * `0 0 1 * *` - 毎月1日の午前0時

    * `*/15 * * * *` - 15分ごと

    * `0 9 * * 1-5` - 平日午前9時

      /\* 1. 検索の頻度を選択します (例: 時間別、日次、週次、\[cron 式]\(#cron-examples))。2. タイムゾーンを使用して検索の開始時刻を設定します。3. 検索の\*\*開始時刻\*\*と\*\*終了時刻\*\*を定義します。4. 通知を送信するには、次のいずれかの条件を選択します。 \* &lt;DNT&gt;\*\*実行ごとに\*\*&lt;/DNT&gt;: 検索が実行されるたびに通知を受信します。\* &lt;DNT&gt;\*\*結果数 &gt; 0\*\*&lt;/DNT&gt;: 検索で結果が返された場合にのみ通知を受け取ります。\*/
  </Step>

  <Step>
    **検索を確認、確定し、スケジュールする**: 設定を確認します。 さらに調整する必要がある場合は、関連する手順に戻ります。設定が完了したら、 <DNT>**Schedule**</DNT>をクリックして自動検索を作成します。<DNT>**Scheduled searches**</DNT>ページのリストに新しい検索が表示されます。
  </Step>
</Steps>

## スケジュールされた検索を管理する [#manage]

管理UIの<DNT>**Scheduled searches**</DNT>ページには、すべての自動検索が、その名前、説明、スケジュール、ステータス、次回とともに表示されます。 から<Icon name="fe-more-horizontal" />あなたはできる：

* **検索を編集して**、クエリ、スケジュール、通知設定、または出力形式を更新します。
* **検索を削除します**。

## 次は何ですか？ [#whats-next]

スケジュールされた NRQL 検索を設定しました。

* より洗練された自動検索を作成するには、 [NRQL クエリについて詳しく学習してください](/docs/nrql/get-started/introduction-nrql-new-relics-query-language)。
* [一括メールの宛先を設定して](/docs/alerts-applied-intelligence/notifications/destinations)、通知オプションを拡張します。
* より高度な自動化の可能性については、[ワークフロー自動化を検討してください](/docs/alerts/get-notified/alert-event-workflows)。