---
title: UIにデータが表示されない
type: troubleshooting
tags:
  - Integrations
  - eBPF integration
  - Troubleshooting
metaDescription: Troubleshooting steps if eBPF data does not appear in the New Relic UI.
freshnessValidatedDate: never
translationType: machine
---

## 問題

New Relic eBPF エージェントをインストールしましたが、 New Relic UIに eBPF データが表示されないか、特定のプロトコルの特定のメトリクスまたはスパンが見つかりません。

## 解決

### eBPF データがまったく表示されない場合は:

1. **ネットワーク接続を確認する**: OTLP ( OpenTelemetry Protocol) エンドポイントがファイアウォールまたはネットワーク設定によってブロックされていないことを確認します。 次の URL にアクセスできることを確認します。

   * `otlp.nr-data.net:443`
   * `otlp.eu01.nr-data.net:443` （EU地域のみ）
   * `https://downloads.newrelic.com`
   * `https://nr-downloads-ohai-staging.s3.amazonaws.com`

<Callout variant="important">
  ポート 4317 と 443 が複数のレベルでブロックされていないことを確認します。

  * **Clusterレベル**: Kubernetesデプロイメント (AKS クラスターなど) の場合、クラスターのネットワーク セキュリティ グループがこれらのポートでの送信トラフィックを許可していることを確認します。
  * **インフラストラクチャ レベル**: セキュリティ ソフトウェア (Microsoft Defender、企業ファイアウォールなど) がインフラストラクチャ レベルでこれらのポートをブロックしていないか確認します。

  ポート ブロッキングは両方のレベルで同時に発生する可能性があり、1 つのレベルが適切に構成されている場合でも接続の問題が発生します。
</Callout>

2. **エージェント インストレーションの確認**: eBPF エージェント サービスが実行されていることを確認します。

   **Linux ホストの場合:**

   ```bash
   sudo systemctl status newrelic-ebpf-agent
   sudo systemctl status newrelic-ebpf-agent-client
   ```

   **Kubernetesの場合:**

   ```bash
   kubectl get pods -n newrelic
   ```

3. **エージェント ログを確認する**: エージェント ログでエラーを探します。インストールが成功すると、次のことが表示されます。

   ```
   [STEP-7] => Successfully started the eBPF Agent.
   ```

4. **正しいフィルターを使用します**。New New Relic UIで、エンティティを`instrumentation.name = nr_ebpf`でフィルターして、eBPF モニター サービスを表示します。

### 特定のメトリクスまたはスパンが欠落している場合:

1. **プロトコル設定の確認**: 設定ファイル内の特定のプロトコルに対してメトリクスとスパンが有効になっていることを確認します。

   **Linux ホスト**(`/etc/newrelic-ebpf-agent/newrelic-ebpf-agent.conf`) の場合:

   ```bash
   PROTOCOLS_HTTP_ENABLED="true"
   PROTOCOLS_HTTP_SPANS_ENABLED="true"
   PROTOCOLS_MYSQL_ENABLED="true"
   # ... other protocols
   ```

   **Kubernetes の場合**（ `values.yaml`内）:

   ```yaml
   protocols:
     http:
       enabled: true
       spans:
         enabled: true
     mysql:
       enabled: true
   ```

2. 設定を変更した後、**エージェントを再起動します**。

   **Linux ホストの場合:**

   ```bash
   sudo systemctl restart newrelic-ebpf-agent
   ```

   **Kubernetesの場合:**

   ```bash
   helm upgrade nr-ebpf-agent newrelic/nr-ebpf-agent -n newrelic --reuse-values
   ```

3. **データ フィルタリング設定を確認します**。エンティティが`DROP_DATA_FOR_ENTITY`や`dropDataServiceNameRegex`などの設定によって除外されていないことを確認します。

### 追加の検証手順:

1. **ホスト別にエンティティをフィルタリングする**: 特定のホストで実行されているエンティティをフィルタリングするには、New Relic UI の`host.name`タグを使用します。

2. **エンティティの命名を確認する**: エンティティには次のように自動的に名前が付けられます。

   * **Linuxホスト**: `processName:workingDirectory:[port]` (例: `ruby:/path/to/app:[5678]`)
   * **Docker** : `processName:containerName:[port]` (例: `java:my-container:[8080]`)
   * **Kubernetes** : Kubernetes サービス名に基づきます (例: `mysql-database-service`)

3. **カスタム命名を確認してください**: `NEW_RELIC_APP_NAME`を使用する場合、エンティティは`-ebpf`サフィックス付きで表示されます。