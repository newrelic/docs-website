---
title: ジョブのスケジュール
metaDescription: 'Efficiently schedule critical jobs for New Relic SAP monitoring with our guide. Ensure optimal data flow with tailored frequencies for RFC checks, data collection, and error handling to maintain continuous system insights.'
freshnessValidatedDate: never
translationType: machine
---

スケジュールする必要があるプログラムが 3 つあります。トランザクション`SM36`を使用してスケジュールします。

<table>
  <thead>
    <tr>
      <th style={{ width: "400px" }}>
        **ABAPプログラム**
      </th>

      <th>
        **機能性**
      </th>

      <th>
        **推奨頻度**
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        [`/NEWR/REGISTRY_RFC_CHECK`](#rfc-check)
      </td>

      <td>
        モニター システムおよび NR APIエンドポイントへの RFC 接続を確認します。
      </td>

      <td>
        3分ごと
      </td>
    </tr>

    <tr>
      <td>
        [`/NEWR/ABAP_COLLECTION_MANAGERN`](#abap-collection-manager)
      </td>

      <td>
        データ収集、接続されたシステムとデータプロバイダに基づいて複数のジョブをスケジュールする必要があります
      </td>

      <td>
        5分ごと
      </td>
    </tr>

    <tr>
      <td>
        [`/NEWR/RESEND_FAILED_API_TRANS`](#resubmit-program)
      </td>

      <td>
        失敗した送信を再送信する
      </td>

      <td>
        15分ごと
      </td>
    </tr>
  </tbody>
</table>

## RFCチェックプログラムのスケジュール [#rfc-check]

`/NEWR/REGISTRY_RFC_CHECK` 1 ～ 3 分ごとにスケジュールし、データ収集ジョブよりも頻繁に実行されるようにします。ジョブ名`NR_RFC_CHECK`を使用します。

## ABAPデータ収集マネージャーのスケジュール [#abap-collection-manager]

次のデータ プロバイダー グループに重点を置いたバリアントを含む 3 つのデータ収集ジョブをスケジュールします。`SP03`より前のコレクション マネージャー ジョブをスケジュールする手順については、 [「SP03 より前のバリアントとジョブ」](/docs/sap-solutions/additional-resources/variants-and-jobs-before-sp03)を参照してください。スケジュール設定のためにデータ プロバイダーを 3 つのグループに分けます。

* **トレース**: このグループには、パフォーマンス データベース (STAD) 関連のデータ プロバイダーが含まれます。

  * `NR.SAP.TRANSACTION` (トレース データ プロバイダー)、 `NR.SAP.TRANSACTION.COMPLETE` (並列バックグラウンド RFC プロセスによる完全なパフォーマンス データベース収集)、 `NR.SAP.SYSTEM.PROCESS` 、 `NR_SAP_PROGRAM` 、 `NR_SAP_WORKLOAD_COMPLETE` 、 `NR.SAP.WORKLOAD.COMPLETE`などのパフォーマンス データベース関連のプロバイダーが含まれます。
  * `NR.SAP.SYSTEM.PROCESS` `NR_SAP_PROGRAM`は`SP02`以降は中断されます。

* **IDOC** : 実稼働システムでは、IDOC の収集にかなりの時間がかかる場合があります。
  * `NR_SAP_IDOC` (メインの IDOC ステータス イベント データ プロバイダー)、 `NR_SAP_IDOC_COMPLETE` (BG RFC コレクションによる完全な IDOC 取得)、 `NR_SAP_IDOC_Configuration` (IDOC データ プロバイダーのパフォーマンスを向上させるために IDOC マスター データをダウンロード) などの IDOC 関連プロバイダーが含まれます。

* **SYSTEM** : 残りのデータプロバイダー。

### /NEWR/ONE\_COLLECTIONのバリアントを作成する

SP03 以降、 `/NEWR/ABAP_COLLECTION_MANAGERN`と`RSBTONEJOB2`は`/NEWR/ONE_COLLECTION`に結合されます。このプログラムには、 `/NEWR/ABAP_COLLECTION_MANAGERN`からのすべての問題と`RSBTONEJOB2`からのジョブ名が含まれており、同様に機能します。 ジョブをスケジュールするには、次の値を使用して`/NEWR/ONE_COLLECTION`のバリアントを作成します。

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        **バリアント名**
      </th>

      <th>
        **トレース**
      </th>

      <th>
        **IDOC**
      </th>

      <th>
        **SYSTEM**
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        **職名**
      </td>

      <td>
        `NR_COLLECTION_TRACE`
      </td>

      <td>
        `NR_COLLECTION_IDOC`
      </td>

      <td>
        `NR_COLLECTION_SYSTEM`
      </td>
    </tr>

    <tr>
      <td>
        **New Relic アカウント ID**
      </td>

      <td>
        データを受信するために使用されるSAPアカウント
      </td>

      <td>
        データを受信するために使用されるSAPアカウント
      </td>

      <td>
        データを受信するために使用されるSAPアカウント
      </td>
    </tr>

    <tr>
      <td>
        **トランザクションあたりのレコード数**
      </td>

      <td>
        デフォルトは10000
      </td>

      <td>
        デフォルトは10000
      </td>

      <td>
        デフォルトは10000
      </td>
    </tr>

    <tr>
      <td>
        **データプロバイダー名**
      </td>

      <td>
        単一の値を選択:

        * `NR.SAP.TRANSACTION`
        * `NR.SAP.TRANSACTION.COMPLETE`
        * `NR.SAP.SYSTEM.PROCESS`
        * `NR_SAP_PROGRAM`
        * `NR_SAP_WORKLOAD_COMPLETE`
        * `NR.SAP.WORKLOAD.COMPLETE`
      </td>

      <td>
        単一の値を選択:

        * `NR_SAP_IDOC`
        * `NR_SAP_IDOC_COMPLETE`
        * `NR_SAP_IDOC_Configuration`
      </td>

      <td>
        単一の値を除外:

        * `NR.SAP.TRANSACTION`
        * `NR.SAP.TRANSACTION.COMPLETE`
        * `NR.SAP.SYSTEM.PROCESS`
        * `NR_SAP_PROGRAM`
        * `NR_SAP_WORKLOAD_COMPLETE`
        * `NR.SAP.WORKLOAD.COMPLETE`
        * `NR_SAP_IDOC`
        * `NR_SAP_IDOC_COMPLETE`
        * `NR_SAP_IDOC_Configuration`
      </td>
    </tr>

    <tr>
      <td>
        **実行モード**
      </td>

      <td>
        順次処理
      </td>

      <td>
        順次処理
      </td>

      <td>
        並列処理
      </td>
    </tr>

    <tr>
      <td>
        **必要な最小WP**
      </td>

      <td>
        システム DIA WP &gt;= 30 の場合は 6 に設定し、それ以外の場合は 3 に設定します。
      </td>

      <td>
        該当なし
      </td>

      <td>
        システム DIA WP &gt;= 30 の場合は 6 に設定し、それ以外の場合は 3 に設定します。
      </td>
    </tr>
  </tbody>
</table>

<img title="SAP ABAP Collection Manager" alt="A screenshot displaying the SAP ABAP Collection Manager" src="/images/abap-collection-manager.webp" width="" />

### 収集ジョブのスケジュール

1. トランザクション`SM36`を開始します。
2. 各ジョブの**ジョブ名**を入力し、**ジョブ クラス**を**C**に設定します。

<CollapserGroup>
  <Collapser id="job-names" title="ジョブ名">
    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **職名**
          </th>

          <th>
            `NR_COLLECTION_TRACE`
          </th>

          <th>
            `NR_COLLECTION_IDOC`
          </th>

          <th>
            `NR_COLLECTION_SYSTEM`
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            **プログラム**
          </td>

          <td>
            `/NEWR/ONE_COLLECTION`
          </td>

          <td>
            `/NEWR/ONE_COLLECTION`
          </td>

          <td>
            `/NEWR/ONE_COLLECTION`
          </td>
        </tr>

        <tr>
          <td>
            **変異体**
          </td>

          <td>
            トレース
          </td>

          <td>
            IDOC
          </td>

          <td>
            SYSTEM
          </td>
        </tr>

        <tr>
          <td>
            **実行頻度**
          </td>

          <td>
            5分ごと
          </td>

          <td>
            5分ごと
          </td>

          <td>
            5分ごと
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

3. **ステップ**をクリックし、**プログラム名**`/NEWR/ONE_COLLECTION`を入力して、**バリアント**を選択します。
4. **Start Condition**\[開始条件]をクリックし、**Start Date**\[開始日]と**Time**\[時刻]を設定して、**Periodic Job**\[定期ジョブ]ボックスをオンにします。
5. **Period Values**\[期間値]に移動し、 **Other Period**\[その他の期間]をクリックして、分に**5** と入力します。

## 再送信プログラムのスケジュール [#resubmit-program]

1. 送信エラーが発生した場合に New Relic アカウントの失敗した送信を再送信するには、プログラム`/NEWR/RESEND_FAILED_API_TRANS`に**DEFAULT**という名前のバリアントを作成します。

2. 次の値を指定します。

   * [**New Relic アカウント ID**](/docs/accounts/accounts-billing/account-setup/account-id)
   * **HTTP 応答コード**: `000`と`413` 、および`200`から`299`の範囲を除外します。

   <img title="Resend failed API transactions" alt="A screenshot displaying the resend failed API transactions" src="/images/resend-failed-api-transaction.webp" width="700" />

3. このジョブを 15 分ごとに実行するようにスケジュールし、HTTP 応答コード`500`などの失敗した送信を再送信し、送信ログ エントリを定期的に消去します。