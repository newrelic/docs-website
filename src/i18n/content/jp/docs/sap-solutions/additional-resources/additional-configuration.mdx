---
title: 追加設定
metaDescription: Additional configuration instructions for SAP systems.
freshnessValidatedDate: never
translationType: machine
---

このセクションでは、システムのセットアップに関する追加の手順について説明します。

<Steps>
  <Step>
    ## アップロード承認ロール [#upload-authorization-role]

    1. `SAP transaction PFCG`を使用します。

    2. **Role** &gt; **Upload** に移動し、インストレーション パッケージからファイル**\_NEWR\_DATA\_PROVIDER.SAP**をアップロードします。

    3. ロール`/NEWR/DATA_PROVIDER`がロードされることを確認します。

       <img title="Authorization Role" alt="A screenshot displaying the authorization role upload" src="/images/authorisation-role.webp" width="600" />

    4. クリック<img src="/images/change-icon.webp" class="inline" style={{height: "22px", width: "22px"}} alt="change icon in SAP" title="Change icon indicator in SAP" />

       読み込まれたらアイコンが表示されます。

    5. **Authorizations**\[承認]タブで、<img src="/images/change-icon.webp" class="inline" style={{height: "20px", width: "20px"}} alt="change icon in SAP" title="Change icon indicator in SAP" />

       **Change Authorization Data**\[認証データの変更] 、および使用して有効化<img src="/images/activate-option.webp" class="inline" style={{height: "25px", width: "30px"}} alt="activate icon in SAP" title="Activate Icon in SAP" />アイコン。

    <img title="Authorizations Tab" alt="A screenshot displaying the authorization tab and Change Authorization Data in SAP upload" src="/images/sap-authorization-1.webp" width="500" />

    6. プロフィール名が提案された場合は、緑色のチェックアイコンをクリックします。
    7. ステータス バーに**Profile(s) were updated**\[プロファイルが更新されました]というメッセージが表示されていることを確認します。
  </Step>

  <Step>
    ## New Relic RFC ユーザー ID の作成 [#create-rfc-user-id]

    認証プロファイルをアクティブ化した後、トランザクション`SU01`を使用して新しい RFC ユーザー ID (例: `NR4SAPDP` ) を作成します。ユーザー タイプを**System**\[システム]または**Communication**\[通信]に設定し、ロール`/NEWR/DATA_PROVIDER`を追加します。

    <img title="Create New RFC User" alt="A screenshot displaying the creation of a new RFC user in SAP" src="/images/rfc-userid.webp" width="600" />
  </Step>

  <Step>
    ## 監視システムの RFC 宛先を作成する [#create-rfc-for-monitored-systems]

    各モニター システムの RFC 宛先を作成するには、 `SM59`使用します。

    1. **ABAP Connections**\[ABAP 接続]を選択し、**Create**\[作成]アイコンをクリックして新しい RFC 宛先を設定します。

    2. わかりやすい**RFC Destination**\[RFC 宛先]名を入力します。 RFCの宛先には次のような名前を付けることをお勧めします。 `NR_<SYSID>CLNT<CLNT#>`

    3. **Connection Type**\[接続タイプ]を`3 - ABAP Connection`に設定します。

    4. **Technical Settings**\[技術設定]タブで、次の内容を入力します。

       * **Target Host** \[ターゲット ホスト]\(完全修飾ドメインまたは IP) と**Instance No.**\[インスタンス番号]。
       * 必要に応じて**Gateway Host**\[ゲートウェイ ホスト]と**Service**\[サービス]を指定します。

    <img title="Create RFC destinations for monitored systems" alt="A screenshot displaying the how to create RFC destinations for monitored systems" src="/images/rfc-destination.webp" width="600" />

    5. **Logon &amp; Security**\[ログオンとセキュリティ]タブで、RFC ユーザー ( `NR4SAPDP` ) とパスワードを入力します。
    6. **Save**\[保存]をクリックします。
    7. 接続が成功したことを確認するには、 **Utility &gt; Test &gt; Connection Test**および**Authorization Test\[認証テスト]**に移動します。

    <Callout variant="important">
      テスト結果が成功したことを確認します。
    </Callout>
  </Step>

  <Step>
    ## HTTP宛先をNew Relic cloudに設定する

    先`SM59`を使用して、 New Relic APIエンドポイントへのHTTPS接続をセットアップします。

    <Callout variant="important">
      イベント、ログ、メトリクス、トレースの個別の RFC 宛先を必ず個別に作成してください。
    </Callout>

    1. **Destination Name**\[宛先名]を入力します（例： `NR_API_EVENT` ）。
    2. **Connection Type**\[接続タイプ]を`G` (外部サーバーへの HTTP 接続) に設定します。
    3. **Target Host**\[ターゲット ホスト]、**Service No.**\[サービス番号]\(443) (HTTPS の[標準ポート](/docs/sap-solutions/additional-resources/network-accessibility)を参照)、および**Path Prefix**\[パス プレフィックス]\(詳細については[、インストレーション準備チェックリスト](/docs/sap-solutions/additional-resources/installation-readiness)を参照) を入力します。
    4. プロキシが必要な場合は、 **Technical Settings**\[技術設定]タブで設定します。
    5. **Security Options**\[セキュリティ オプション]タブで、SSL の**Active**\[アクティブ]ラジオ ボタンをオンにします。
       <img title="HTTP destination to New Relic" alt="A screenshot displaying the connection setup for HTTP destination to New Relic" src="/images/http-destination-to-new-relic.webp" width="600" />
    6. 必要に応じて、 [New Relic](https://one.newrelic.com)からルート証明書をダウンロードし、トランザクション`STRUST`を使用して SAP に追加します。
    7. **Connection Test**\[接続テスト]を使用して接続を確認します。接続が成功すると、 **Enter Logon Data** \[ログオン データの入力]が表示されます。 テストがタイムアウトした場合は、ファイアウォールの設定を確認してください。
    8. すべてのNew Relic APIエンドポイントに対してこの手順を繰り返します。
  </Step>

  <Step>
    ## BTP/CloudALM認証エンドポイントを作成する [#create-authentication-endpoint]

    サービスに応じて以下の手順に従ってください。

    <CollapserGroup>
      <Collapser id="btp-process-integration-runtime" title="BTPプロセス統合ランタイム">
        1. ダウンロードした**Service Key**\[サービス キー]の`clientId` 、 `clientsecret` 、 `tokenurl`をメモします。
        2. Web ブラウザで`tokenurl`にアクセスし、必要な証明書 ( `Digicert root, global, and SAP on demand` ) をダウンロードします。

        <img title="BTP process integration runtime" alt="A screenshot displaying the connection setup for BTP process integration runtime" src="/images/btp-process-integration.webp" width="600" />

        3. トランザクション`STRUST`を使用して 3 つの証明書を 1 つずつアップロードし、 **Add to Certificate List**\[証明書リストに追加]をクリックします。
        4. クリック **保存**.
        5. トランザクション`SMICM`を使用して、 **Administration &gt; ICM &gt; Exit Soft &gt; Global**に移動し、すべての ICM プロセスを再起動します。

        <img title="Administration ICM" alt="A screenshot displaying the Administration ICM" src="/images/administration-icm.webp" width="600" />

        6. トランザクション`SM59`を使用して、**HTTP Connections to External Server**\[外部サーバーへの HTTP 接続]の下に新しい RFC 接続を作成します。
        7. tokenurl をホストとパスのプレフィックスに分割します。パスプレフィックスに`?grant_type=client_credentials`を追加します。
        8. **Service No.**\[サービス番号]を`443`に設定します。

        <img title="Service No." alt="A screenshot displaying the Service No." src="/images/service-no.webp" width="600" />

        9. **Login &amp; Securit**y\[ログインとセキュリティ]タブで**Basic Authentication**\[基本認証]を選択し、ユーザー名とパスワードとして`clientId`と`clientsecret`を入力します。
        10. **Secure Protoco**l\[セキュア プロトコルの]ステータスを**Active**\[アクティブ]に設定し、構成を保存します。
        11. **Connection Test**\[接続テスト]を実行します。
      </Collapser>

      <Collapser id="cloud-alm-api" title="クラウドALM API">
        1. ダウンロードした**Service Key**\[サービス キー]の`clientId` 、 `clientsecret` 、 `url`をメモします。
        2. Web ブラウザーで URL にアクセスし、**Digicert root**\[Digicert ルート]、**global**\[グローバル]、および **SAP on demand**\[SAP オンデマンド] の証明書をダウンロードします。

        <img title="CloudALM API" alt="A screenshot displaying the connection setup for CloudALM API" src="/images/cloudalm-api.webp" width="600" />

        3. トランザクション`STRUST`を使用して 3 つの証明書を 1 つずつアップロードし、 **Add to Certificate List**\[証明書リストに追加]をクリックします。
        4. クリック **保存**.
        5. トランザクション`SMICM`を使用して、 **Administration &gt; ICM &gt; Exit Soft &gt; Global**に移動し、すべての ICM プロセスを再起動します。

        <img title="Administration ICM" alt="A screenshot displaying the Administration ICM" src="/images/administration-icm.webp" width="600" />

        6. トランザクション`SM59`を使用して新しい RFC 接続を作成します。
        7. **Target host**\[ターゲット ホスト]として URL を挿入し、**Service No.**\[サービス番号]を `443` に設定します。**Path Prefix**\[パスプレフィックス]を `/oauth/token?grant_type=client_credentials` に設定します。

        <img title="SM59 Configuration" alt="A screenshot displaying the SM59 configuration" src="/images/sm59-configuration.webp" width="600" />

        8. **Login &amp; Securit**y\[ログインとセキュリティ]タブで**Basic Authentication**\[基本認証]を選択し、ユーザー名とパスワードとして`clientId`と`clientsecret`を入力します。
        9. **Secure Protoco**l\[セキュア プロトコルの]ステータスを**Active**\[アクティブ]に設定し、構成を保存します。
        10. **Connection Test**\[接続テスト]を実行します。
      </Collapser>
    </CollapserGroup>
  </Step>

  <Step>
    ## データベース接続を作成する [#create-database-connection]

    トランザクション`DBACOCKPIT`を使用して、リモート**HANA Database**\[HANA データベース]接続を定義します。

    1. **Database Connections**\[データベース接続]をダブルクリックし、 **Add**\[追加]をクリックします。

       <img title="Database Connection" alt="A screenshot displaying the Database Connection" src="/images/database-connection.webp" width="600" />

    2. **Connection Name**\[接続名]を入力します (SAP システム ID と同じが望ましい)。

    3. **Database System**\[データベース システム]として**HANA Database**\[HANA データベース]を選択します。

    4. **Database user ID**\[データベース ユーザー ID] (例: `NRAGENT` ) とパスワードを入力します。

    5. **Database Host**\[データベース ホスト]と**SQL Port**\[SQL ポート]を入力します。

       <img title="SAP Connection Name" alt="A screenshot displaying the SAP Connection Name" src="/images/connection-name.webp" width="600" />

    6. データを保存し、 **Test**\[テスト]をクリックして接続を確認します。
  </Step>
</Steps>