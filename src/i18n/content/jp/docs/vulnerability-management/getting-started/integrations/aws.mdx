---
title: AWS セキュリティ統合
metaDescription: 'Send your security data from AWS Security Hub, GuardDuty, and inspector directly to New Relic.'
freshnessValidatedDate: never
translationType: machine
---

AWS Security Hub の調査結果を New Relic にインポートして、脆弱性を単一の統合ビューで表示できます。このプロセスでは、EventBridge を使用して、AWS API 宛先経由で AWS セキュリティ レポート サービスからの検出結果を投稿します。

これらの手順を完了すると、AWS セキュリティ ツールによって検出された新しい脆弱性が New Relic アカウントにリアルタイムで表示され、分析ダッシュボードを構築して、新しく検出された問題に対して<InlinePopover type="alerts" />を有効にできるようになります。

AWS GuardDuty と Inspector の結果をインポートし、NRDB を使用してカスタム ダッシュボードまたはクエリを通じて表示することもできます。

## 前提条件

AWS セキュリティ データを New Relic に送信するには:

* AWS アカウントで[AWS Security Hub](https://docs.aws.amazon.com/securityhub/latest/userguide/securityhub-settingup.html)を有効にします。
* データを報告するアカウントの New Relic[ライセンス キー](/docs/accounts-partnerships/install-new-relic/account-setup/license-key)を取得します。

## 取り込み用の API 宛先を作成する

<Steps>
  <Step>
    ### API宛先の作成 [#create-api-destination]

    1. AWS UI で<DNT>**EventBridge &gt; Integrations &gt; API destinations &gt; Create API destination**</DNT>に移動します。

    2. プロンプトに入力します。

    3. 以下のパターンを使用してエンドポイントを構築し、それを API 宛先エンドポイントに入力します。

       ```
       https://security-ingest-processor.service.newrelic.com/v1/security/webhooks/awssecurityhub?Api-Key=NEW_RELIC_LICENSE_KEY
       ```

       <Callout variant="important">
         EU ライセンス キーを使用している場合は、EU エンドポイントを使用します。 `https://security-ingest-processor.service.eu.newrelic.com/v1/security/webhooks/awssecurityhub?Api-Key=NEW_RELIC_LICENSE_KEY`
       </Callout>

    4. HTTP メソッドとして<DNT>**POST**</DNT>を選択します。

    5. <DNT>**Create a new connection**</DNT>を選択します。
  </Step>

  <Step>
    ### 新しい接続を作成する [#create-new-connection]

    1. 新しいプロンプトのフィールドに入力します。
    2. <DNT>**Destination**</DNT>の場合は<DNT>**Other**</DNT>を選択します。
    3. <DNT>**Authorization type**</DNT>の場合は<DNT>**API Key**</DNT>を選択します。
    4. <DNT>**API Key Name**</DNT>に`Api-Key`と入力し、値として New Relic <InlinePopover type="licenseKey" />を貼り付けます。
  </Step>
</Steps>

## EventBridge ルールを作成する

取り込み用の API 宛先を作成したら、Eventbridge ルールを作成して、セキュリティ関連のイベントを New Relic の取り込み用の API 宛先に転送します。

<Steps>
  <Step>
    ### ルールの詳細を定義する [#define-rule-detail]

    1. AWS UI で<DNT>**EventBridge &gt; Rules &gt; Create Rule**</DNT>に移動します。
    2. 名前フィールドに名前を入力します (例: `SecurityEvent_NewRelicSIP_EventForwarder_Rule` 。
    3. `Forwards Security Hub, GuardDuty, and Inspector events to the New Relic Security Ingest Processor (SIP)`などの説明を入力します。
    4. イベント バスの場合は、 `default`を選択します。
    5. ルールの種類として、 `Rule with an event pattern`を選択します。
    6. <DNT>**Next**</DNT>を選択します。
  </Step>

  <Step>
    ### イベントパターンの構築 [#build-event-pattern]

    1. 新しいペインで、イベント ソースとして<DNT>**AWS events or EventBridge partner events**</DNT>選択します。

    2. オプション: ルールをテストするために、ドロップダウンから Security Hub サンプル イベントを選択します。

    3. イベント パターンの場合は、\[カスタム パターンの選択] ペインに入り、パターンを入力します。たとえば、以下のパターンは、Security Hub、Guard Duty、および Inspector からのイベントに一致します。

       ```json
       {
         "detail-type": [
           {
             "prefix": "Security Hub"
           },
           {
             "prefix": "GuardDuty Finding"
           },
           {
             "prefix": "Inspector2"
           }
         ]
       }
       ```
  </Step>

  <Step>
    ### API宛先をルールターゲットとして選択します [#select-api-destination]

    1. <DNT>**Target types**</DNT>の場合は<DNT>**EventBridge API destination**</DNT>を選択します。
    2. <DNT>**API destination**</DNT>の場合は<DNT>**Use an existing API destination**</DNT>を選択します。
    3. ドロップダウンを使用して、ステップ 1 で作成した API 宛先を選択します。
    4. 実行ロールには、 <DNT>**Create a new role for this specific resource**</DNT>を選択します。
  </Step>

  <Step>
    ### タグの構成 (オプション) [#configure-tags]

    必要に応じてタグを構成します。
  </Step>

  <Step>
    ### レビューと作成 [#review]

    すべての選択内容を確認し、必要に応じて変更を加えます。
  </Step>

  <Step>
    ### NRDBでのレビュー [#review-in-nrdb]

    AWS Event Bridge 経由で取り込まれたログを確認するには、次の NRQL クエリを使用できます。

    ```sql
    FROM Vulnerability SELECT * WHERE source LIKE 'AWS%' SINCE 3 MONTHS AGO
    ```

    GuardDuty と Inspector の結果はこの方法でのみ表示されますが、SecurityHub の脆弱性は New Relic の Security RX (使用可能な場合) に表示されることに注意してください。
  </Step>
</Steps>