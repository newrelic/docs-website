---
title: PHP用New Relicの概要
contentType: page
template: basicDoc
topics:
  - Agents
  - PHP agent
  - Getting started
---

PHPエージェントはアプリケーションをモニターし、[パフォーマンスの問題の特定と解決](#monitor-performance)を支援します。さらに、エージェントのパフォーマンス監視を拡張して[ビジネスデータの収集や分析](#business-data)を行い、顧客体験の向上や、ビジネスにおけるデータ駆動型の意思決定を促すのに役立ちます。

PHPエージェントをインストールする前に、お使いのシステムが[システム要件](/docs/agents/php-agent/getting-started/php-agent-compatibility-requirements)を満たしていることを確認してください。PHPエージェントは多くの一般的な[PHPフレームワーク](/docs/agents/php-agent/getting-started/php-agent-compatibility-requirements#frameworks)、[データベース](/docs/agents/php-agent/getting-started/php-agent-compatibility-requirements#databases)、[ライブラリ](/docs/agents/php-agent/getting-started/php-agent-compatibility-requirements#databases)に対応しています。PHPエージェントは [Google App Engine（GAE）フレキシブル環境](/docs/agents/php-agent/advanced-installation/install-new-relic-php-agent-gae-flexible-environment)でも使用できます。

## アプリケーションパフォーマンスの監視 [#monitor-performance]

![PHP - APM 要旨](./images/php-summary.png "PHP - APM 要旨")

[**one.newrelic.com**](http://one.newrelic.com/) **> APM > （アプリを選択） > Summary**：PHPエージェントをインストールすると、お使いのアプリケーションのパフォーマンス概要が表示されます。

**アプリケーションの全体像を表示する**

* アプリケーションの[Apdex （Application Performance Index）（ユーザー満足度）](/docs/apm/new-relic-apm/apdex/apdex-measuring-user-satisfaction)を監視する
* [アプリケーションの大まかな概要](/docs/apm/applications-menu/monitoring/apm-overview-page)を取得する
* アプリケーションの[アーキテクチャマップ](/docs/data-analysis/user-interface-functions/view-your-data/service-maps-visualize-monitor-apps-entire-architecture)を作成する

**エラーと問題をすばやく検知する**

* [キートランザクション](/docs/apm/transactions/key-transactions/key-transactions-tracking-important-transactions-or-events)を追跡する
* New Relicに送信する[カスタムメトリックス](/docs/agents/manage-apm-agents/agent-data/custom-metrics)を含め、最も重要なメトリックタイムスライスデータを[検索して、カスタマイズ可能なチャートを作成します](/docs/insights/new-relic-insights/explore/metric-explorer-search-chart-metrics-sent-new-relic-agents)。
* エラーや問題が発生した場合は、ユーザーに影響がおよぶ前に[アラート](/docs/alerts/alert-policies/understanding-alert-policies/alerting-new-relic)を発信します
* [ディプロイ後](/docs/agents/php-agent/features/recording-deployments-using-php-script)のパフォーマンスを追跡する

**パフォーマンスの詳細を掘り下げる**

* コードレベルで[トランザクショントレース](/docs/apm/transactions/transaction-traces/transaction-traces)を調査する
* [データベースクエリトレース](/docs/apm/transactions/transaction-traces/sql-statements)を調査する
* [エラートレース](/docs/apm/applications-menu/events/viewing-apm-errors-error-traces)を調査する

**ビジネスデータを分析する**

PHPエージェントを使用してデータを整理、クエリ、可視化することで、アプリケーションのパフォーマンスと顧客体験に関する主要な問題に対応できるようになります。

* [デフォルトのトランザクション属性](/docs/insights/new-relic-insights/decorating-events/apm-default-attributes-insights)を使用するか、[独自の属性を追加](/docs/insights/new-relic-insights/decorating-events/insights-custom-attributes)します
* [NRQLを使用して](/docs/insights/new-relic-insights/using-new-relic-query-language/using-nrql)データをクエリする
* [独自のイベントデータ](/docs/insights/new-relic-insights/adding-querying-data/inserting-custom-events-new-relic-apm-agents#php-att)を送信する
* カスタマイズ可能でインタラクティブな[ダッシュボード](/docs/insights/new-relic-insights/managing-dashboards-data)を作成・共有する

## アーキテクチャ [#architecture]

PHPエージェントには、連携してNew Relicにデータを転送する2つのバイナリーがあります：

* このエージェントは、PHPコードの自動およびAPIインストゥルメンテーションを扱います。
* デーモンは、エージェントとNew Relicプラットフォームの間のプロキシとして機能します。

最大で500のアプリケーション/エージェントを1つのデーモンに接続できます。収集サイクルが限度に達するとデーモンは[サンプリング](/docs/agents/manage-apm-agents/agent-data/new-relic-events-limits-sampling)を設定するので、アプリケーション/エージェントをいくつ単一のデーモンに接続するかを決定する際に、この点を考慮してください。

<Callout variant="tip">
  デーモン1つ当たりのアプリケーション/エージェントの数は、コンテナ間の接続の容量によっては、別個のDockerコンテナで実行する場合には少なくなる場合があります。
</Callout>

![この図には、PHPエージェントからNew Relicへのデータの流れが示されています。](./images/PHP_Agent_Diagram_5.png "PHP_Agent_Diagram_4.png")

PHPアプリケーションからNew Relicへのデータの流れ。

使用アプリケーションとNew Relicの間のワークフローは、以下の順番で起こる必要があります：

1. エージェントは、インストゥルメンテーションデータの最初のペイロードを送信して、デーモンとのソケット接続を確立します。
2. デーモンは、New RelicプラットフォームとのHTTPSリンクを確立します。デーモンはインストゥルメントされたアプリケーションを呼び出す前に呼び出す必要があります。これは[エージェントモード](/docs/agents/php-agent/advanced-installation/starting-php-daemon-advanced)と呼ばれ、これがデフォルトとなります。

報告されたデータがなくならないようにするには、インストゥルメントされたアプリケーションが、両方の接続が確立される前にトランザクションを送信することがないようにしてください。

## エージェントのインストール [#installation]

<Callout variant="tip">
  [共有ホスティングサービスにエージェントをインストールする場合](/docs/agents/php-agent/installation/install-php-agent-shared-hosting-service)は、エージェントのインストールに必要なroot権限があることを確認してください。技術的な問題については、ホスティングプロバイダーにお問い合わせください。
</Callout>

エージェントをインストールするには、まず[New Relicのサインアップ](https://newrelic.com/signup)が必要です。ログインした後、ランチャーを使用するか、特定のインストールの説明を確認します。

<ButtonLink
  role="button"
  to="https://one.newrelic.com/launcher/nr1-core.settings?pane=eyJuZXJkbGV0SWQiOiJ0dWNzb24ucGxnLWluc3RydW1lbnQtZXZlcnl0aGluZyJ9&cards[0]=eyJuZXJkbGV0SWQiOiJzZXR1cC1uZXJkbGV0cy5zZXR1cC1waHAtaW50ZWdyYXRpb24iLCJhY2NvdW50SWQiOjI2NDA0MDl9&platform[accountId]=1"
  variant="primary"
>
  PHPデータを追加
</ButtonLink>

**標準インストレーション**については、以下をご覧ください。

* [PHPエージェントのインストレーション概要](/docs/agents/php-agent/installation/php-agent-installation-overview)（最も一般的な設定のための基本インストール手順）。
* [RedHatまたはCentOSへのインストール](/docs/agents/php-agent/installation/php-agent-installation-redhat-and-centos)
* [UbuntuまたはDebianへのインストール](/docs/agents/php-agent/installation/php-agent-installation-ubuntu-and-debian)
* [tarアーカイブを使用したインストール](/docs/agents/php-agent/installation/php-agent-installation-tar-file)（各種Linux、OpenSolaris、SmartOS、FreeBSD、Mac OS などの対応システムへの一般的なインストール方法）
* [newrelic-install スクリプト](/docs/agents/php-agent/installation/newrelic-install-script)（インストレーションタスクの一部を自動化する対話形式スクリプトの使用方法）

その他の種類のPHPインストレーションや**高度なインストレーション**に関するトピックについては、以下をご覧ください。

* [PHPエージェントのインストレーション：非標準PHP](/docs/agents/php-agent/installation/php-agent-installation-non-standard-php)
* [PHPデーモンの起動](/docs/agents/php-agent/installation/starting-php-daemon-advanced)（New Relic の標準インストレーションではデーモンが自動的に起動しますが、[手動でデーモンを起動](/docs/agents/php-agent/installation/starting-php-daemon-advanced#selecting-external)することもできます）
* [インストールスクリプト用のサイレントモード](/docs/agents/php-agent/installation/running-php-install-script-silent-mode)
* New Relic PHPエージェントの[Google App Engine（GAE）フレキシブル環境](/docs/agents/php-agent/advanced-installation/install-new-relic-php-agent-gae-flexible-environment)へのインストレーション

## エージェントの設定 [#configuration]

エージェントには多数の[設定オプション](/docs/agents/php-agent/configuration/php-agent-configuration)があり、インストレーション後にカスタマイズや微調整を行うことができます。

<Callout variant="tip">
  エージェントの設定では、アプリケーション[に分かりやすい名前](/docs/agents/php-agent/configuration/php-agent-configuration#inivar-appname)を付けるのが最も重要です。複数のアプリケーションやサーバーが存在する場合、New Relicは[メトリックスを集計する目的でこのアプリケーション名を使用します](/docs/agents/manage-apm-agents/app-naming/name-your-application#app-name) 。
</Callout>

エージェントの設定オプションを変更した後は、ウェブサーバーを再起動してください。

## エージェントインストゥルメンテーションを拡張する [#extend]

エージェントをインストール後、エージェントインストゥルメンテーションをさらに拡張できます。

* [ページロードタイミング](/docs/agents/php-agent/features/page-load-timing-php)：PHPエージェントを[ブラウザモニタリング](/docs/browser/new-relic-browser/getting-started/new-relic-browser)と統合して、エンドユーザーのアクティビティを可視化します。
* [カスタムインストゥルメンテーション](/docs/agents/php-agent/features/php-custom-instrumentation)：フレームワークによるインストゥルメンテーションではキャプチャできないトランザクションをインストゥルメントします。
* [エージェントAPI](/docs/agents/php-agent/configuration/php-agent-api)：エージェントAPI を使用して、エージェントの動作をカスタマイズします。たとえば、カスタムメトリックスを収集したり、エラーをフラグしたり、特定のトランザクション全体を無視することができます。
* [エージェントの属性](/docs/agents/php-agent/attributes/php-agent-attributes)：トランザクションに付与された[属性](/docs/agents/manage-apm-agents/agent-metrics/agent-attributes)をカスタマイズできます。属性をカスタマイズすることで、機密性の高い属性の送信を防いだり、トランザクションをより深く可視化するための追加属性を収集したりできます。

## インストレーションのトラブルシューティング [#troubleshoot]

PHPエージェントに問題が発生した場合は、[トラブルシューティング関連ドキュメントの全リスト](/docs/agents/php-agent/troubleshooting)をご覧ください。以下はインストレーションに関する一般的な問題です。

* [データが表示されない（PHP）](/docs/agents/php-agent/troubleshooting/no-data-appears-php)
* [アクセス権限の要件定義](/docs/agents/php-agent/troubleshooting/determining-permissions-requirements)
* [INI設定がすぐに反映されません](/docs/agents/php-agent/troubleshooting/ini-settings-not-taking-effect-immediately)
* [ウェブサーバーを再起動する理由と実施のタイミング（PHP）](/docs/agents/php-agent/troubleshooting/why-when-restart-your-web-server-php)

## その他のヘルプ [#more_help]

さらに支援が必要な場合は、これらのサポートと学習リソースを確認してください：

* [Explorers Hub](https://discuss.newrelic.com/)を参照して、コミュニティから支援を受け、ディスカッションに参加してください。
* [当社のサイトで回答を見つけ、サポートポータルの使用方法について学びます](/docs/using-new-relic/welcome-new-relic/get-started/find-help-use-support-portal)。
* Linux、Windows、およびmacOSのトラブルシューティングツールである[New Relic Diagnosticsを実行します](/docs/using-new-relic/cross-product-functions/troubleshooting/new-relic-diagnostics)。
* New Relicの[データセキュリティ](/docs/security)と[ライセンス](/docs/licenses)ドキュメントを見直してください。
