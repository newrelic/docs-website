---
title: あなたのKubernetesデータを見つけて使う
tags:
  - Integrations
  - Kubernetes integration
  - Understand and use data
metaDescription: 'New Relic''s Kubernetes integration: How to install and activate the integration, and what data is reported.'
freshnessValidatedDate: never
translationType: machine
---

import kubernetesDashboard from 'images/kubernetes_screenshot-full_dashboard.webp'

独自のチャートを作成したり、 [クエリ](/docs/using-new-relic/data/understand-data/query-new-relic-data) すべての [Kubernetesインテグレーション](/docs/integrations/kubernetes-integration/get-started/introduction-kubernetes-integration) データをクエリビルダやNerdGraph APIを使って照会することができます。当社の統合では、コンテナ・オーケストレーション・レイヤーをインスツルメンテーションすることでKubernetesのデータを収集します。よりシンプルで視覚的な体験をするには、 [クラスタエクスプローラ](/docs/integrations/kubernetes-integration/understand-use-data/kubernetes-cluster-explorer) を使用してください。

<img
  title="New Relic - Kubernetes dashboard"
  alt="New Relic - Kubernetes dashboard"
  src={kubernetesDashboard}
/>

<figcaption>
  <DNT>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Dashboards**</DNT>:[クエリビルダー](/docs/chart-builder/use-chart-builder/get-started/introduction-chart-builder)を使用すると、 Kubernetesデータをクエリし、明確な視覚化を作成できます。
</figcaption>

## Kubernetesのデータを照会する [#view-data]

[Kubernetesのデータを照会する最も簡単な方法](/docs/using-new-relic/data/understand-data/query-new-relic-data) は、 [クエリビルダー](/docs/query-your-data/explore-query-data/query-builder/use-advanced-nrql-mode-specify-data) を使用し、 [NRQLクエリ](/docs/query-data/nrql-new-relic-query-language/getting-started/introduction-nrql) を受け入れます。または、 [NerdGraph API](/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph) を使用してKubernetesデータを取得することもできます。

### イベントと属性 [#event-types]

Kubernetes データは次の[イベント](/docs/using-new-relic/data/understand-data/new-relic-data-types#event-data)に添付されます。このデータについて詳しくは、[データ ディクショナリ](/attribute-dictionary/?dataSource=Kubernetes)をご覧ください。

<table>
  <thead>
    <tr>
      <th style={{ width: "275px" }}>
        イベント名
      </th>

      <th>
        Kubernetesのデータの種類
      </th>

      <th style={{ width: "200px" }}>
        発売日
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `K8sNodeSample`
      </td>

      <td>
        ノードデータ
      </td>

      <td>
        v1.0.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sNamespaceSample`
      </td>

      <td>
        名前空間データ
      </td>

      <td>
        v1.0.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sDeploymentSample`
      </td>

      <td>
        デプロイメントデータ
      </td>

      <td>
        v1.0.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sReplicasetSample`
      </td>

      <td>
        レプリカセットデータ
      </td>

      <td>
        v1.0.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sDaemonsetSample`
      </td>

      <td>
        デーモンセットデータ
      </td>

      <td>
        v1.13.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sStatefulsetSample`
      </td>

      <td>
        StatefulSetデータ
      </td>

      <td>
        v1.13.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sPodSample`
      </td>

      <td>
        ポッドデータ
      </td>

      <td>
        v1.0.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sClusterSample`
      </td>

      <td>
        クラスターデータ
      </td>

      <td>
        v1.0.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sContainerSample`
      </td>

      <td>
        コンテナデータ
      </td>

      <td>
        v1.0.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sVolumeSample`
      </td>

      <td>
        ボリュームデータ
      </td>

      <td>
        v1.0.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sApiServerSample`
      </td>

      <td>
        APIサーバーデータ
      </td>

      <td>
        v1.11.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sControllerManagerSample`
      </td>

      <td>
        コントローラー・マネージャー・データ
      </td>

      <td>
        v1.11.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sSchedulerSample`
      </td>

      <td>
        スケジューラーデータ
      </td>

      <td>
        v1.11.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sEtcdSample`
      </td>

      <td>
        etcdデータ
      </td>

      <td>
        v1.11.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sEndpointSample`
      </td>

      <td>
        エンドポイントデータ
      </td>

      <td>
        v1.13.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sServiceSample`
      </td>

      <td>
        サービスデータ
      </td>

      <td>
        v1.13.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sHpaSample`
      </td>

      <td>
        Horizontal Pod Autoscaler データ
      </td>

      <td>
        v2.3.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sCronjobSample`
      </td>

      <td>
        CronJob データ
      </td>

      <td>
        v3.10.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sJobSample`
      </td>

      <td>
        ジョブデータ
      </td>

      <td>
        v3.10.0
      </td>
    </tr>
  </tbody>
</table>

これらのイベントとその属性の詳細については、[データ ディクショナリ](/attribute-dictionary/?dataSource=Kubernetes)を参照してください。

### APMが監視するアプリケーションにおけるKubernetesのメタデータ [#apm-custom-attributes]

[アプリケーションをKubernetesと連携させることで](/docs/integrations/kubernetes-integration/metadata-injection/kubernetes-apm-metadata-injection) 、アプリケーショントレースや分散トレースに以下の属性が追加されます。

* `nodeName`
* `containerName`
* `podName`
* `clusterName`
* `deploymentName`
* `namespaceName`

## アラートの管理 [#alerts]

Kubernetes データに関する<InlinePopover type="alerts"/>とインシデントについて通知を受け取ることができます:

<CollapserGroup>
  <Collapser
    id="create-alert"
    title="警告条件の作成"
  >
    Kubernetesインテグレーションのアラート条件を作成するには

    1. <DNT>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Infrastructure > Settings > Alerts > Kubernetes**</DNT>に移動し、 <DNT>**Create alert condition**</DNT>を選択します。

    2. 選択した属性のみを持つKubernetesテンプレートに集計をフィルターするには、<DNT>**Filter**</DNT> を選択します。

    3. 閾値設定を選択します。 <DNT>**Trigger an alert when...**</DNT>オプションの詳細については、[集計タイプを](#alert-types)参照してください。

    4. 既存の [アラートポリシー](/docs/alerts/new-relic-alerts/configuring-alert-policies/create-or-rename-alert-policy) を選択するか、新しいポリシーを作成します。

    5. <DNT>**Create**</DNT>を選択します。

       アラート条件の閾値がトリガーされると、New Relic はポリシーの通知チャンネルに [通知](#notifications) を送信します。
  </Collapser>

  <Collapser
    id="alert-types"
    title="事前に設定された警告タイプと閾値を使用する"
  >
    Kubernetesの統合には、独自のアラートポリシーとアラート条件が付属しています。定義済みのアラート条件を確認するには、 [Kubernetesの統合を参照してください。定義済みのアラートポリシー](/docs/integrations/kubernetes-integration/kubernetes-events/kubernetes-integration-predefined-alert-policy) をご覧ください。

    さらに、Kubernetesインテグレーションを含め、使用している [New Relicインテグレーション](/docs/integrations/new-relic-integrations/getting-started/introduction-infrastructure-integrations) が収集するあらゆるメトリックに対してアラート条件を作成することができます。

    1. 集計タイプ

       <DNT>**Integrations**</DNT>

       を選択します。

    2. <DNT>**Select a data source**</DNT>

       ドロップダウンから、Kubernetes (K8s) データ ソースを選択します。
  </Collapser>

  <Collapser
    id="notifications"
    title="アラート通知の選択"
  >
    アラート条件の閾値がトリガーされると、New Relic はアラートポリシーで選択された通知チャンネルにメッセージを送信します。通知の種類に応じて、以下のようなオプションがあります。

    * [インシデントを表示します](/docs/alerts-applied-intelligence/new-relic-alerts/alert-incidents/view-event-details-incidents)。

    * [Acknowledge the incident](/docs/alerts/new-relic-alerts/reviewing-alert-incidents/acknowledge-alert-incidents).

    * 識別子名を選択すると、インシデントデータのチャートに移動します。

      アラートを発生させたエンティティの識別子は、通知メッセージの先頭付近に表示されます。識別子の形式は、アラートの種類によって異なります。

    * <DNT>**Available pods are less than desired pods**</DNT> アラート:

      ```
      K8s:CLUSTER_NAME:PARENT_NAMESPACE:replicaset:REPLICASET_NAME
      ```

    * <DNT>**CPU or memory usage**</DNT> アラート:

      ```
      K8s:CLUSTER_NAME:PARENT_NAMESPACE:POD_NAME:container:CONTAINER_NAME
      ```

      いくつか例を挙げてみましょう。

      <CollapserGroup>
        <Collapser
          id="pod-alerts"
          title="ポッドアラートの通知例"
        >
          <DNT>**Available pods are less than desired pods**</DNT>アラートの場合、問題をトリガーする`ReplicaSet`の ID は次のようになります。

          ```
          k8s:beam-production:default:replicaset:nginx-deployment-1623441481
          ```

          この識別子には以下の情報が含まれています。

          * クラスター名： `beam-production`
          * 親名前空間： `default`
          * `ReplicaSet` 名前： `nginx-deployment-1623441481`
        </Collapser>

        <Collapser
          id="container-resource"
          title="コンテナリソースの通知例"
        >
          コンテナのCPUやメモリ使用量のアラートの場合、エンティティは次のようになります。

          ```
          k8s:beam-production:kube-system:kube-state-metrics-797bb87c75-zncwn:container:kube-state-metrics
          ```

          この識別子には以下の情報が含まれています。

          * クラスター名： `beam-production`
          * 親名前空間： `kube-system`
          * ポッド名前空間： `kube-state-metrics-797bb87c75-zncwn`
          * コンテナ名： `kube-state-metrics`
        </Collapser>
      </CollapserGroup>
  </Collapser>

  <Collapser
    id="nrql-alerts"
    title="NRQLを使ったアラート条件の作成"
  >
    標準的な手順に従って、 [NRQL クエリのアラート条件を作成する](/docs/alerts/new-relic-alerts/defining-conditions/create-alert-conditions-nrql-queries) 。
  </Collapser>
</CollapserGroup>