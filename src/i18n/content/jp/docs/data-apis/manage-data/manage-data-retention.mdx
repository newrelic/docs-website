---
title: データ保持の確認と管理
metaDescription: 'New Relic data retention: How long data is stored.'
translationType: machine
---

import accountsEditRetentionSettings from 'images/accounts_screenshot-crop_edit-retention-settings.png'

import accountsCopyDataRetention from 'images/accounts_screenshot-crop_copy-data-retention.png'

[データ管理ハブ](https://one.newrelic.com/data-management-hub)にある \[**データ保持**UI] ページでは、さまざまな種類のデータを保存する期間を確認および管理できます。機密情報を保護するために、一部のデータ タイプの保持期間を短くしたい場合や、長期にわたってデータと傾向を表示および分析できるようにするために、保持期間を長くしたい場合があります。

## 長期的な分析とコンプライアンスのためにデータ保持期間を延長

データ保持期間を延長すると、すべてのソースにわたるすべてのメトリクス、イベント、ログ、およびトレースに対して、長期的な分析、視覚化、およびアラートを実行できます。ただし、コスト、パフォーマンス、および場合によってはコンプライアンス上の理由から、そのデータを管理することが重要です。当社のデータ管理ハブは、データがどこから来ているかを理解して制御し、保存する内容と保存期間を調整するために必要なツールを提供します。

New Relic は、2023 年 3 月 31 日にデータ保持制限の適用を開始します。データ保持が規定の制限を超えると、デフォルトまたは契約のデータ保持に戻り、規定または契約の制限を超えるデータ保持は削除されます。影響を受けるデータには、2023 年 3 月 31 日以前およびそれ以降に取り込まれたすべてのデータが含まれます。これには、ダッシュボード、データ分析、監査、およびレポートのニーズでの使用が含まれます。

規定の制限を超えてデータ保持を調整すると、拡張された保持を反映するために、新しい請求の変更で保持をアップグレードするように ( [データ管理ハブ](/docs/data-apis/manage-data/manage-your-data)で) 求められます。

<Callout variant="tip">
  [Data Plus オプション](/docs/accounts/accounts-billing/new-relic-one-pricing-billing/data-ingest-billing/#data-plus)を使用すると、最大 90 日間の保存期間が追加され (ほとんどのデータ タイプで)、その他のエンタープライズ レベルの機能 (クエリ期間の延長、FedRAMP および HIPAA コンプライアンス、追加のセキュリティ機能など) が得られます。
</Callout>

<img
  title="Edit data retention page"
  alt="screenshot of data retention page"
  src={accountsEditRetentionSettings}
/>

<figcaption>
  **データ保持**UI では、データ保持期間を確認したり、データ保持を編集したりできます。表の列ヘッダーの説明を表示するには、ヘッダーにカーソルを合わせます。
</figcaption>

## 要件 [#requirements]

データ保持を構成するには、課金管理者権限を持つ Pro または Enterprise エディションが必要です。この基準を満たさないアカウントの特性は、一部の New Relic 組織が保持を独自に調整することを妨げます。請求管理者アカウントの Pro または Enterprise 組織であり、保持を編集できない場合は、New Relic アカウント担当者にお問い合わせください。

[Data Plus オプション](/docs/accounts/accounts-billing/new-relic-one-pricing-billing/data-ingest-billing/#data-plus)では、さらに 90 日間の保存期間が提供されることに注意してください。

保持を表示および編集するための権限関連の要件:

* [新しいユーザー モデル](/docs/accounts/original-accounts-billing/original-users-roles/overview-user-models):

  * 組織全体のデータ保持期間を延長する契約を設定するには、 [**課金**管理設定](/docs/accounts/accounts-billing/new-relic-one-user-management/user-management-concepts#admin-settings)が必要です
  * 特定の種類のデータまたは特定のアカウントの契約の範囲内で保持を調整するには、 [**Insights イベント保持**機能](/docs/accounts/accounts-billing/new-relic-one-user-management/user-capabilities/#data-retention)が必要です

* [元のユーザー モデル](/docs/accounts/original-accounts-billing/original-users-roles/users-roles-original-user-model): **Insights イベント保持**機能が必要です。

## データ保持 UI [#find-ui]

**データ保持**UI ページは、[データ管理ハブ](https://one.newrelic.com/data-management-hub)にあります。

## デフォルトの保持期間 [#retention-periods]

New Relic のデータ保持を理解する最善の方法は、**データ保持**UI ページに移動することです。組織が設定を編集した可能性があり、以下に示すデフォルト設定ではない可能性があるため、これをお勧めします。

この表は、デフォルトの[名前空間](/docs/glossary/glossary)保持設定を示しています。

<table>
  <thead>
    <tr>
      <th>
        情報源
      </th>

      <th>
        名前空間
      </th>

      <th style={{ width: "210px" }}>
        [元のデータオプション](/docs/accounts/accounts-billing/new-relic-one-pricing-billing/data-ingest-billing#data-prices)の保持（日数）
      </th>

      <th style={{ width: "210px" }}>
        [Data Plus](/docs/accounts/accounts-billing/new-relic-one-pricing-billing/data-ingest-billing#data-prices)の保持（日数）
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        APM
      </td>

      <td>
        APM
      </td>

      <td>
        8
      </td>

      <td>
        98
      </td>
    </tr>

    <tr>
      <td>
        APM
      </td>

      <td>
        APMのエラー
      </td>

      <td>
        8
      </td>

      <td>
        98
      </td>
    </tr>

    <tr>
      <td>
        ブラウザ
      </td>

      <td>
        ブラウザ
      </td>

      <td>
        8
      </td>

      <td>
        98
      </td>
    </tr>

    <tr>
      <td>
        ブラウザ
      </td>

      <td>
        ブラウザイベント
      </td>

      <td>
        8
      </td>

      <td>
        98
      </td>
    </tr>

    <tr>
      <td>
        ブラウザ
      </td>

      <td>
        ブラウザのJSエラー
      </td>

      <td>
        8
      </td>

      <td>
        98
      </td>
    </tr>

    <tr>
      <td>
        ブラウザ
      </td>

      <td>
        ブラウザのページビュータイミング
      </td>

      <td>
        8
      </td>

      <td>
        98
      </td>
    </tr>

    <tr>
      <td>
        カスタムイベント
      </td>

      <td>
        カスタムイベント
      </td>

      <td>
        30
      </td>

      <td>
        120
      </td>
    </tr>

    <tr>
      <td>
        ロギング
      </td>

      <td>
        ロギング
      </td>

      <td>
        30
      </td>

      <td>
        120
      </td>
    </tr>

    <tr>
      <td>
        インフラストラクチャー
      </td>

      <td>
        インフラストラクチャプロセス（[詳細](#infrastructure-data)）
      </td>

      <td>
        8
      </td>

      <td>
        98
      </td>
    </tr>

    <tr>
      <td>
        インフラストラクチャー
      </td>

      <td>
        インフラストラクチャの統合（[詳細](#infrastructure-data)）
      </td>

      <td>
        395 (13ヶ月)
      </td>

      <td>
        485 (16ヶ月)
      </td>
    </tr>

    <tr>
      <td>
        マーカー ([変更追跡](/docs/change-tracking/change-tracking-introduction))
      </td>

      <td>
        マーカー
      </td>

      <td>
        395 (13ヶ月)
      </td>

      <td>
        485 (16ヶ月)
      </td>
    </tr>

    <tr>
      <td>
        モバイル
      </td>

      <td>
        モバイルの衝突イベントの軌跡（パンくず式）
      </td>

      <td>
        8
      </td>

      <td>
        98
      </td>
    </tr>

    <tr>
      <td>
        モバイル
      </td>

      <td>
        モバイルの例外
      </td>

      <td>
        8
      </td>

      <td>
        98
      </td>
    </tr>

    <tr>
      <td>
        モバイル
      </td>

      <td>
        モバイル総合
      </td>

      <td>
        8
      </td>

      <td>
        98
      </td>
    </tr>

    <tr>
      <td>
        モバイル
      </td>

      <td>
        モバイルエラー
      </td>

      <td>
        8
      </td>

      <td>
        98
      </td>
    </tr>

    <tr>
      <td>
        モバイル
      </td>

      <td>
        モバイルクラッシュ
      </td>

      <td>
        90
      </td>

      <td>
        180
      </td>
    </tr>

    <tr>
      <td>
        モバイル
      </td>

      <td>
        モバイルセッション
      </td>

      <td>
        90
      </td>

      <td>
        180
      </td>
    </tr>

    <tr>
      <td>
        通信網
      </td>

      <td>
        フロー (クラウド & オンプレミス)
      </td>

      <td>
        30
      </td>

      <td>
        120
      </td>
    </tr>

    <tr>
      <td>
        通信網
      </td>

      <td>
        SNMP ([メトリクスを参照](#dimensional-metrics))
      </td>

      <td>
        395
      </td>

      <td>
        485
      </td>
    </tr>

    <tr>
      <td>
        通信網
      </td>

      <td>
        Syslog
      </td>

      <td>
        30
      </td>

      <td>
        120
      </td>
    </tr>

    <tr>
      <td>
        サーバーレス
      </td>

      <td>
        ラムダ
      </td>

      <td>
        8
      </td>

      <td>
        98
      </td>
    </tr>

    <tr>
      <td>
        サーバーレス
      </td>

      <td>
        ラムダカスタム
      </td>

      <td>
        8
      </td>

      <td>
        98
      </td>
    </tr>

    <tr>
      <td>
        サーバーレス
      </td>

      <td>
        ラムダのスパン
      </td>

      <td>
        8
      </td>

      <td>
        98
      </td>
    </tr>

    <tr>
      <td>
        合成モニタリング（編集不可）
      </td>

      <td>
        合成データ（編集不可）
      </td>

      <td>
        395 (13ヶ月)
      </td>

      <td>
        395 (13ヶ月)
      </td>
    </tr>

    <tr>
      <td>
        トレース
      </td>

      <td>
        分散型トレース
      </td>

      <td>
        8
      </td>

      <td>
        98
      </td>
    </tr>
  </tbody>
</table>

## さまざまなデータ型の保持の詳細 [#data-details]

このセクションでは、変更できない保持設定を持ついくつかのデータタイプを含む、いくつかの異なるタイプのデータについて詳しく説明します。

<CollapserGroup>
  <Collapser
    id="dimensional-metrics"
    title="ディメンションメトリック（メトリックAPI）"
  >
    生の[ディメンションメトリック](/docs/data-apis/understand-data/new-relic-data-types/#dimensional-metrics)データ（ `Metric`データ型）は、いくつかの異なる時間範囲で集計（ロールアップ）され、それらの集計はさまざまな期間保持されます。生のディメンションメトリックデータポイントは30日間保存されます。集約されたデータポイント（集約は1分から開始）は13か月間保持されます。

    生データの取り込みのみが使用量にカウントされます。集約されたデータはカウントされません。

    メトリクスの保存期間は編集できません。
  </Collapser>

  <Collapser
    id="metric-timeslice"
    title="メトリックタイムスライスデータ（APM、ブラウザ、モバイル）"
  >
    [メトリックのタイムスライスデータ](/docs/using-new-relic/data/understand-data/new-relic-data-types#timeslice-data) は、APM（カスタムメトリクスとデフォルトメトリクスの両方）、モバイル、およびブラウザエージェントによって生成されます。メトリックのタイムスライスは、メトリック名、メトリックが表す時間のセグメント（"タイムスライス" ）、および数値（測定値）の3つの部分から構成されます。APM、ブラウザ、モバイルエージェントは、エラーレート、帯域幅の使用量、ガベージコレクションの時間など、さまざまなパフォーマンス指標について、1分間に数千個のメトリックタイムスライスを収集することができます。

    メートル単位のタイムスライスデータは、このように集計されます。

    * 8日間保存される1分間のロールアップへの最初の

    * 1分間のロールアップは、90日間保持される1時間のロールアップにも追加されます。

      最初の生データの取り込みのみが使用量にカウントされます。集約されたデータはカウントされません。

      一部の主要なメトリックは無期限に保存されます。製品ごとの主要な指標については、以下をお読みください。

      ここでは、無期限に保存される主要な指標タイムスライスデータを紹介します。

      <table>
        <tbody>
          <tr>
            <td>
              APM
            </td>

            <td>
              * [Apdex](/docs/site/apdex-measuring-user-satisfaction), アプリサーバー用
              * スループットとページビュー
              * レスポンスタイムとその内訳 [階層別](/docs/accounts-partnerships/education/getting-started-new-relic/glossary#tier) またはカテゴリー別に [あなたのアプリのメイン **概要** チャート](/docs/apm/applications-menu/monitoring/apm-overview-page)
              * ページのロード時間、および [のセグメントに分けた内訳。](/docs/browser/new-relic-browser/page-load-timing-resources/page-load-timing-process#time-segments)
              * エラー率
              * CPU使用率
              * メモリ使用量
            </td>
          </tr>

          <tr>
            <td>
              ブラウザ
            </td>

            <td>
              * [Apdex](/docs/site/apdex-measuring-user-satisfaction), ブラウザ用
              * ブラウザのページロード時間
              * スループットの合計。90日以降は、ブラウザタイプ別の集計は行われず、要求された時間範囲の合計平均値のみが表示されます。
            </td>
          </tr>

          <tr>
            <td>
              モバイル
            </td>

            <td>
              * クラッシュレートです。 [iOSの場合](/docs/mobile-monitoring/new-relic-mobile/getting-started/ios-agent-crash-reporting) 、 [Androidの場合](/docs/mobile-monitoring/new-relic-mobile/getting-started/android-agent-crash-reporting)
              * [ネットワークスループット](/docs/mobile-monitoring/mobile-monitoring-ui/network-pages/http-requests-page)
              * [ネットワーク応答時間](/docs/mobile-monitoring/mobile-monitoring-ui/network-pages/http-requests-page)
              * [ネットワークエラー率](/docs/mobile-monitoring/mobile-monitoring-ui/network-pages/errors-mobile-apps)
              * [インタラクション・トレース](/docs/mobile-monitoring/mobile-monitoring-ui/mobile-app-pages/interactions-page)
            </td>
          </tr>
        </tbody>
      </table>
  </Collapser>

  <Collapser
    id="infrastructure-data"
    title="Infrastructureデータ"
  >
    インフラストラクチャ モニタリングは、生成されたデータをダウンサンプリングします。すべてのインフラストラクチャ モニタリング メトリック データ タイプ (ホスト上の統合からのメトリクスを含む) は、データの年代と時間ウィンドウのサイズに応じて異なる粒度を表示します。次の表は、インフラストラクチャ UI とクエリの両方で、ダウンサンプルされた異なるバケットが使用される場合を示しています。

    <table>
      <thead>
        <tr>
          <th>
            **バケットサイズ**
          </th>

          <th>
            **時間帯別に使用しています。**
          </th>

          <th>
            **データを保持するのは...**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            生（5秒、10秒、15秒）
          </td>

          <td>
            0～59分
          </td>

          <td>
            8日
          </td>
        </tr>

        <tr>
          <td>
            1分
          </td>

          <td>
            60分～6時間
          </td>

          <td>
            30日
          </td>
        </tr>

        <tr>
          <td>
            10分
          </td>

          <td>
            6時間～3日
          </td>

          <td>
            13ヶ月
          </td>
        </tr>

        <tr>
          <td>
            1時間
          </td>

          <td>
            3日～14日
          </td>

          <td>
            13ヶ月
          </td>
        </tr>

        <tr>
          <td>
            3時間
          </td>

          <td>
            14日以上
          </td>

          <td>
            13ヶ月
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

## データ保持の編集 [#adjust-retention]

保持を表示および編集するに[は、データ管理ハブ](https://one.newrelic.com/data-management-hub)に移動し、\[**データ保持] をクリックして、\[データ保持**の**編集**] をクリックします。そこには、データ保持の編集または Data Plus へのアップグレードのオプションが表示されます。それが表示されない場合は[、要件](#requirements)を確認し、New Relic アカウント担当者に相談してください。

保持率を高めるためのオプション:

* まだお持ちでない場合は、 [データ プラス](/docs/accounts/accounts-billing/new-relic-one-pricing-billing/data-ingest-billing/#data-plus)に切り替えてください。これにより、データ保持期間が大幅に長くなり、その他の利点が得られます。
* データ プラスまたは元のデータ オプションの場合: データ保持を追加します。組織の 30 日間の追加データ保持には、1 か月に取り込まれた GB あたり 0.05 USD の費用がかかります。

リテンションの向上に関する重要なポイント:

* [**データ保持**UI](#find-ui)にリストされているすべてのデータ型について、保持が全体的に増加します。特定のデータ型だけを増やすことはできません。
* より長い保持期間を有効にすると、特定のデータ ソースの保持期間を短縮しても請求には影響しません。データの取り込みと課金を削減する方法については、「[データの取り込みを管理する](/docs/data-apis/manage-data/manage-data-coming-new-relic)」を参照してください。
* 保持期間を調整すると、有効になるまで最大 24 時間かかる場合があります。

### リテンションの削減 [#reduce-retention]

データ ソースの保持期間を短縮しても、その種類の既存のデータはすぐには消えません。そのデータは、最大数週間表示され、クエリで返される場合があります。誤ってデータを削除しないようにするための保護手段が用意されていますが、これは、[データをすばやく削除する](#deleting-data)ために保持値を減らすことは適切な戦略ではないことも意味します。

データの取り込みを減らすためのオプションについては、「[データの取り込みを管理](/docs/data-apis/manage-data/manage-data-coming-new-relic)する 」を参照してください。

## 既存のデータを削除する [#deleting-data]

[テレメトリ データ](/docs/using-new-relic/data/understand-data/new-relic-data-types)が New Relic データベースにレポートされ、クエリに使用できるようになると、そのデータを編集または削除することはできなくなります。これは、New Relic の速度とパフォーマンスを最適化する意図的な設計上の決定です。データの[保持期間](#adjust-retention)が終了すると、データは失効します。すでに報告されているデータを削除したい場合は、New Relic の担当者にお問い合わせください。

## データのエクスポートとストリーミング [#export-data]

Data Plus を使用している組織は、好みのツールを使用してデータをエクスポートし、長期保存することができます。これに関連する機能は次のとおりです。

* [ストリーミング データのエクスポート](/docs/apis/nerdgraph/examples/nerdgraph-streaming-export)
* [履歴データのエクスポート](/docs/apis/nerdgraph/examples/nerdgraph-historical-data-export)

## APIによるリテンション管理 [#api-examples]

UI で保持設定を変更するだけでなく、 [NerdGraph API](/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph)を使用できます。以下に、NerdGraph リクエストの例をいくつか示します。データ保持の変更が有効になるまでに最大 24 時間かかる場合があることに注意してください。

API を使用して保持を調整する前に、保持[の調整に関するルールを](#adjust-retention)確認してください。

<CollapserGroup>
  <Collapser
    id="api-list-namespaces"
    title="カスタマイズ可能なリテンションイベントの名前空間の一覧"
  >
    アカウントのカスタマイズ可能なリテンションイベント名スペースを一覧表示する。

    ```graphql
    query {
     actor {
       account(id: YOUR_ACCOUNT_ID) {
         dataManagement {
           customizableRetention {
             eventNamespaces {
               namespace
             }
           }
         }
       }
     }
    }
    ```
  </Collapser>

  <Collapser
    id="api-list-rules"
    title="アカウントのアクティブなルールのリスト"
  >
    アカウントのアクティブなルールを一覧表示するには

    ```graphql
    query {
     actor {
       account(id: YOUR_ACCOUNT_ID) {
         dataManagement {
           eventRetentionRules {
             id
             deletedAt
             deletedById
             createdAt
             createdById
             retentionInDays
             namespace
           }
         }
       }
     }
    }
    ```
  </Collapser>

  <Collapser
    id="api-show-active-rule"
    title="アカウント/名前空間ペアのアクティブなルールを表示する"
  >
    特定のアカウント/ネームスペースのペアに対するアクティブなルールを表示するには、次のようにします。

    ```graphql
    query {
     actor {
       account(id: YOUR_ACCOUNT_ID) {
         dataManagement {
           eventRetentionRule(namespace: "APM") {
             id
             deletedById
             deletedAt
             createdById
             createdAt
             retentionInDays
             namespace
           }
         }
       }
     }
    }
    ```
  </Collapser>

  <Collapser
    id="api-create-new-rule"
    title="新規ルールの作成"
  >
    新しいルールを作成するには

    ```graphql
    mutation {
     dataManagementCreateEventRetentionRule(accountId: YOUR_ACCOUNT_ID, namespace: "APM", retentionInDays: 8) {
       id
       deletedById
       deletedAt
       createdById
       createdAt
       retentionInDays
       namespace
     }
    }
    ```
  </Collapser>

  <Collapser
    id="api-delete-rule"
    title="既存のルールの削除"
  >
    子アカウントに適用されているルールを削除した場合、その子アカウントは、指定されたネームスペースに対して親アカウントの現在の保持値を採用します。親アカウントに適用されているルールを削除した場合、指定されたネームスペースにデフォルトの保持値が再適用されます。既存のルールを削除するには、以下の手順に従います。

    ```graphql
    mutation {
     dataManagementDeleteEventRetentionRule(accountId: YOUR_ACCOUNT_ID, namespace: "APM") {
       id
       deletedById
       deletedAt
       createdById
       createdAt
       retentionInDays
       namespace
     }
    }
    ```
  </Collapser>

  <Collapser
    id="api-delete-rule"
    title="既存の子アカウントのルールを他の人にコピー"
  >
    テンプレートまたはソースアカウントとして子アカウントを指定し、他の宛先子アカウントにソース子アカウントの同じ名前空間保持値を採用させることができます。注意: すべての子アカウントは、同じ親アカウント内になければなりません。既存の保持のセットをコピーするには

    ```graphql
    mutation {
      dataManagementCopyRetentions(
        sourceAccountId: SOURCE_ACCOUNT_ID,
        destinationAccountIds: [DESTINATION_ACCOUNT_ID_1, DESTINATION_ACCOUNT_ID_2, DESTINATION_ACCOUNT_ID_3])
      {
        success
        failure
      }
    }
    ```

    成功と失敗は、ソースアカウントからのルールのコピーに成功（または失敗）したデスティネーションアカウントIDのリストを返します。
  </Collapser>
</CollapserGroup>

## アカウントの継承 [#account-structure]

[親アカウント](/docs/accounts/original-accounts-billing/original-users-roles/mastersub-account-structure)のデータ保持設定は、子アカウントに継承されます。このコンテキストでは、New Relic 組織の最初のアカウントは親アカウントと見なされ、組織に追加された他のアカウントはそのアカウントの設定を継承します。

## RSS-Atom

[RSSフィード](https://github.com/newrelic/docs-website/commits/develop/src/content/docs/data-apis/manage-data/manage-data-retention.mdx.atom)を購読します。