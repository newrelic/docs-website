---
title: データ保持期間の表示と管理
metaDescription: 'New Relic data retention: How long data is stored.'
freshnessValidatedDate: never
translationType: human
---

[データ管理ハブ](https://one.newrelic.com/data-management-hub)にある<DNT>**Data retention**</DNT> UIページでは、さまざまな種類のデータの保存期間を確認および管理できます。機密情報を保護するために、一部のデータタイプの保持期間を短くする必要がある場合や、長期間にわたるデータと傾向を確認および分析できるようにするために、より長い保持期間（最大7年間）が必要な場合があります。

保持期間の変更に関するプランとコストについて詳しくは、[データオプション：Data Plusとオリジナル](/docs/accounts/accounts-billing/new-relic-one-pricing-billing/data-ingest-billing/#upgrade-data-plus)を参照してください。

## 長期的な分析とコンプライアンスのためにデータ保持期間を延長

データ保持期間を延長すると、すべてのソースにわたるすべてのメトリクス、イベント、ログ、トレースの長期的な分析、視覚化、アラートを実行できるようになります。ただし、コスト、パフォーマンス、場合によってはコンプライアンス上の理由から、そのデータを管理することが重要です。当社のデータ管理ハブでは、必要なツールを用意し、データの出所を理解して制御し、何をどのくらいの期間保存するかを調整します。

<Callout variant="tip">
  [Data Plusオプション](/docs/accounts/accounts-billing/new-relic-one-pricing-billing/data-ingest-billing/#data-plus)を使用すると、（ほとんどのデータタイプに対して）最大90日間の追加の保持期間が得られるほか、クエリ期間の延長、FedRAMPおよびHIPAAへの準拠、追加のセキュリティ機能など、その他のエンタープライズグレードの機能も利用できます。
</Callout>

<img title="Edit data retention page" alt="screenshot of data retention page" src="/images/accounts_screenshot-crop_edit-retention-settings.webp" />

<figcaption>
  <DNT>**Data retention**</DNT> UIでは、有効な保持値を表示および編集したり、保持期間プランをアップグレードしたりできます。テーブルの列ヘッダーの説明を表示するには、UIの各ヘッダーにマウスを合わせるか、以下の**要件**セクションの説明を参照してください。
</figcaption>

## 要件 [#requirements]

ユーザーがデータ保持期間を管理する方法は、組織内にあるアカウントの数と、ユーザーが行おうとしていることによって異なります。

### 単一アカウント組織 [#single-account-organizations]

組織内にアカウントが1つしかない場合、[**請求ユーザー**](/docs/accounts/accounts-billing/new-relic-one-user-management/user-management-concepts/)は以下を管理できます。

* **契約あたりの最大値：**これは、データタイプの**有効な保持期間**に設定できる最大値です。増やしたい場合は、[Data Plus](/docs/accounts/accounts-billing/new-relic-one-pricing-billing/data-ingest-billing/#data-prices)プランをご覧ください。
* **有効な保持期間：**これは、データタイプに対して現在データが保持されている時間の長さです。ユーザーがこれを編集できるようにするには、組織（アカウント）が[Pro以上のエディション](/docs/accounts/accounts-billing/new-relic-one-pricing-billing/new-relic-one-pricing-billing/#how-pricing-works)である必要があります。

請求ユーザーがこれら2つのタスクのいずれも実行できない場合は、サポートまたはアカウントチームにお問い合わせください。

### 複数アカウントの組織 [#multiple-account-organizations]

複数のアカウントを持つ組織に所属している場合、ユーザーは以下を管理できます。

* **契約あたりの最大値：**これは、データタイプの**有効な保持期間**に設定できる最大値です。増やしたい場合は、[Data Plus](/docs/accounts/accounts-billing/new-relic-one-pricing-billing/data-ingest-billing/#data-prices)プランをご覧ください。

* **有効な保持期間：**これは、データタイプに対して現在データが保持されている時間の長さです。ユーザーがこれを編集できるようにするには：

  * 組織（アカウント）は[Pro以上のエディション](/docs/accounts/accounts-billing/new-relic-one-pricing-billing/new-relic-one-pricing-billing/#how-pricing-works)である必要があります。
  * ユーザータイプは**フルプラットフォーム**である必要があります。
  * ユーザーには、**有効な保持期間**を編集すべき[アカウントを指す](/docs/accounts/accounts-billing/new-relic-one-user-management/user-management-concepts/)、[**インサイトイベント保持**](/docs/accounts/accounts-billing/new-relic-one-user-management/user-permissions/#data-retention)機能に対する**表示**および**変更**権限が必要です。

ユーザーが上記の詳細を参照してもこれら2つのタスクのいずれも実行できない場合は、サポートまたはアカウントチームにお問い合わせください。

## 初期設定のデータ保持期間 [#retention-periods]

New Relicのデータ保持期間を理解する最良の方法は、<DNT>**Data retention**</DNT> UIページにアクセスすることです。組織が設定を編集している場合があり、以下に示すデフォルト設定ではない可能性があるため、アクセスして確認してください。

この表は、デフォルトの[ネームスペース](/docs/glossary/glossary)保持設定を示しています。

<table>
  <thead>
    <tr>
      <th>
        データソース
      </th>

      <th>
        ネームスペース
      </th>

      <th style={{ width: "210px" }}>
        [オリジナルデータオプション](/docs/accounts/accounts-billing/new-relic-one-pricing-billing/data-ingest-billing#data-prices)保持期間（日数）
      </th>

      <th style={{ width: "210px" }}>
        [Data Plus](/docs/accounts/accounts-billing/new-relic-one-pricing-billing/data-ingest-billing#data-prices)保持期間（日数）
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        APM
      </td>

      <td>
        APM
      </td>

      <td>
        8
      </td>

      <td>
        98
      </td>
    </tr>

    <tr>
      <td>
        APM
      </td>

      <td>
        APMエラー
      </td>

      <td>
        8
      </td>

      <td>
        98
      </td>
    </tr>

    <tr>
      <td>
        APM
      </td>

      <td>
        APMエラースタックトレース
      </td>

      <td>
        8
      </td>

      <td>
        8
      </td>
    </tr>

    <tr>
      <td>
        ブラウザ
      </td>

      <td>
        すべて（[詳細情報](#browser-namespaces)）
      </td>

      <td>
        8
      </td>

      <td>
        98
      </td>
    </tr>

    <tr>
      <td>
        カスタムイベント
      </td>

      <td>
        カスタムイベント
      </td>

      <td>
        30
      </td>

      <td>
        120
      </td>
    </tr>

    <tr>
      <td>
        ロギング
      </td>

      <td>
        ロギング
      </td>

      <td>
        30
      </td>

      <td>
        120
      </td>
    </tr>

    <tr>
      <td>
        インフラストラクチャ
      </td>

      <td>
        Infrastructureプロセス（[詳細情報](#infrastructure-data)）
      </td>

      <td>
        8
      </td>

      <td>
        98
      </td>
    </tr>

    <tr>
      <td>
        インフラストラクチャ
      </td>

      <td>
        Infrastructureインテグレーション（[詳細情報](#infrastructure-data)）
      </td>

      <td>
        395（13か月）
      </td>

      <td>
        485（16か月）
      </td>
    </tr>

    <tr>
      <td>
        マーカー（[変更追跡](/docs/change-tracking/change-tracking-introduction)）
      </td>

      <td>
        マーカー
      </td>

      <td>
        395（13か月）
      </td>

      <td>
        485（16か月）
      </td>
    </tr>

    <tr>
      <td>
        モバイル
      </td>

      <td>
        モバイルクラッシュのイベントトレイル（ブレッドクラム）
      </td>

      <td>
        8
      </td>

      <td>
        98
      </td>
    </tr>

    <tr>
      <td>
        モバイル
      </td>

      <td>
        モバイルの例外
      </td>

      <td>
        8
      </td>

      <td>
        98
      </td>
    </tr>

    <tr>
      <td>
        モバイル
      </td>

      <td>
        モバイル一般
      </td>

      <td>
        8
      </td>

      <td>
        98
      </td>
    </tr>

    <tr>
      <td>
        モバイル
      </td>

      <td>
        モバイルエラー
      </td>

      <td>
        8
      </td>

      <td>
        98
      </td>
    </tr>

    <tr>
      <td>
        モバイル
      </td>

      <td>
        モバイルクラッシュ
      </td>

      <td>
        90
      </td>

      <td>
        180
      </td>
    </tr>

    <tr>
      <td>
        モバイル
      </td>

      <td>
        モバイルセッション
      </td>

      <td>
        90
      </td>

      <td>
        180
      </td>
    </tr>

    <tr>
      <td>
        ネットワーク
      </td>

      <td>
        フロー（クラウドとオンプレミス）
      </td>

      <td>
        30
      </td>

      <td>
        120
      </td>
    </tr>

    <tr>
      <td>
        ネットワーク
      </td>

      <td>
        SNMP（[メトリクスを参照](#dimensional-metrics)）
      </td>

      <td>
        395
      </td>

      <td>
        485
      </td>
    </tr>

    <tr>
      <td>
        ネットワーク
      </td>

      <td>
        <DNT>
          Syslog
        </DNT>
      </td>

      <td>
        30
      </td>

      <td>
        120
      </td>
    </tr>

    <tr>
      <td>
        サーバーレス（Serverless）
      </td>

      <td>
        Lambda
      </td>

      <td>
        8
      </td>

      <td>
        98
      </td>
    </tr>

    <tr>
      <td>
        サーバーレス（Serverless）
      </td>

      <td>
        Lambdaカスタム
      </td>

      <td>
        8
      </td>

      <td>
        98
      </td>
    </tr>

    <tr>
      <td>
        サーバーレス（Serverless）
      </td>

      <td>
        Lambdaスパン
      </td>

      <td>
        8
      </td>

      <td>
        98
      </td>
    </tr>

    <tr>
      <td>
        外形監視（編集不可）
      </td>

      <td>
        Synthetic データ（編集不可）
      </td>

      <td>
        395（13か月）
      </td>

      <td>
        395（13か月）
      </td>
    </tr>

    <tr>
      <td>
        トレース
      </td>

      <td>
        ディストリビューティッド（分散）トレース
      </td>

      <td>
        8
      </td>

      <td>
        98
      </td>
    </tr>
  </tbody>
</table>

## さまざまなデータ型の保持期間の詳細 [#data-details]

このセクションでは、変更できない保持期間設定を持つデータ型をいくつか含む、異なるデータ型について詳しく説明します。

<CollapserGroup>
  <Collapser id="dimensional-metrics" title="ディメンションメトリクス（メトリクスAPI）">
    生の[ディメンションメトリクス](/docs/data-apis/understand-data/new-relic-data-types/#dimensional-metrics)データ（`Metric`データ型）は、いくつかの異なる時間範囲で集計（ロールアップ）され、それらの集計はさまざまな期間保持されます。生のディメンションメトリクスのデータポイントは30日間保存されます。集計されたデータポイント（集約は1分から開始）は13か月間保持されます。

    取り込まれた生データのみが使用量としてカウントされます。集計データはカウントされません。

    メトリクスの保持期間は編集できません。
  </Collapser>

  <Collapser id="metric-timeslice" title="メトリックタイムスライスデータ（APM、ブラウザ、モバイル）">
    [メトリックタイムスライスデータ](/docs/using-new-relic/data/understand-data/new-relic-data-types#timeslice-data)は、<InlinePopover type="apm" />（カスタムメトリクスとデフォルトメトリクスの両方）<InlinePopover type="mobile" />、Browserエージェントによって生成されます。メトリックタイムスライスは、以下の3つの部分で構成されます。つまり、メトリック名、メトリックを示す時間のセグメント（「タイムスライス」）、数値（測定結果）です。APM、<InlinePopover type="browser" />モバイルエージェントは、エラー率、帯域幅使用量、ガベージコレクションタイムなど、さまざまなパフォーマンスメトリクスに対して、1分あたり数千のメトリックタイムスライスを収集できます。

    メトリックタイムスライスデータは次のように集計されます。

    * 最初から1分間のロールアップは8日間保存されます

    * 1分のロールアップは、90日間保持される1時間のロールアップにも追加されます

      最初の生データの取り込みのみが使用量にカウントされます。集計データはカウントされません。

      一部の主要なメトリクスは無期限に保存されます。製品ごとの主要なメトリクスについては、以下をお読みください。

      無期限に保存される主要なメトリックタイムスライスデータは次のとおりです。

      <table>
        <tbody>
          <tr>
            <td>
              APM
            </td>

            <td>
              * [Apdex](/docs/site/apdex-measuring-user-satisfaction)、アプリサーバー
              * スループットとページビュー
              * レスポンスタイムと、[アプリのメイン<DNT>**Overview**</DNT>チャート](/docs/apm/applications-menu/monitoring/apm-overview-page)上の[ティア](/docs/accounts-partnerships/education/getting-started-new-relic/glossary#tier)またはカテゴリへの内訳
              * ページロードタイムと[セグメント](/docs/browser/new-relic-browser/page-load-timing-resources/page-load-timing-process#time-segments)別の内訳
              * エラー率
              * CPU使用率
              * メモリ使用量
            </td>
          </tr>

          <tr>
            <td>
              ブラウザ
            </td>

            <td>
              * [Apdex](/docs/site/apdex-measuring-user-satisfaction)、ブラウザ
              * ブラウザのページロードタイム
              * スループットの合計。90日を経過すると、ブラウザの種類別の内訳はなくなり、要求された期間の結合平均値のみが表示されます。
            </td>
          </tr>

          <tr>
            <td>
              モバイル
            </td>

            <td>
              * クラッシュ率：[iOS](/docs/mobile-monitoring/new-relic-mobile/getting-started/ios-agent-crash-reporting)および[Android](/docs/mobile-monitoring/new-relic-mobile/getting-started/android-agent-crash-reporting)
              * [ネットワークスループット](/docs/mobile-monitoring/mobile-monitoring-ui/network-pages/http-requests-page)
              * [ネットワークのレスポンスタイム](/docs/mobile-monitoring/mobile-monitoring-ui/network-pages/http-requests-page)
              * [ネットワークのエラー率](/docs/mobile-monitoring/mobile-monitoring-ui/network-pages/errors-mobile-apps)
              * [インタラクショントレース](/docs/mobile-monitoring/mobile-monitoring-ui/mobile-app-pages/interactions-page)
            </td>
          </tr>
        </tbody>
      </table>
  </Collapser>

  <Collapser id="browser-namespaces" title="ブラウザのネームスペース">
    すべてのブラウザネームスペースのデフォルトの保持期間は同じです。各ブラウザネームスペースでのイベントの詳細は次のとおりです。

    * `Browser` ネームスペース：`PageView`、 `PageAction`
    * `Browser events` ネームスペース：`AjaxRequest`、`BrowserInteraction`、 `BrowserTiming`
    * `Browser JS errors` ネームスペース： `JavaScriptError`
    * `Browser page view timing` ネームスペース： `PageViewTiming`

    これらのイベントの詳細については、[データディクショナリのブラウザイベント](/attribute-dictionary/?dataSource=Browser+agent)を参照してください。
  </Collapser>

  <Collapser id="infrastructure-data" title="Infrastructureデータ">
    infrastructureモニタリングは、データの生成時にダウンサンプリングします。4つの主要なinfrastructureモニタリングのメトリクスデータ型（`SystemSample`、`StorageSample`、`NetworkSample`、`ProcessSample`）は、データの古さと時間枠のサイズに応じて異なる粒度で表示されます。次の表は、インフラストラクチャUIとクエリの両方で、さまざまなダウンサンプリングされたバケットの使用タイミングを示しています。

    <table>
      <thead>
        <tr>
          <th>
            <DNT>
              **Bucket size**
            </DNT>
          </th>

          <th>
            <DNT>
              **Used for time windows covering...**
            </DNT>
          </th>

          <th>
            <DNT>
              **Data retained for...**
            </DNT>
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            生（5、10、15秒）
          </td>

          <td>
            0～59分
          </td>

          <td>
            8日間
          </td>
        </tr>

        <tr>
          <td>
            1分
          </td>

          <td>
            60分～6時間
          </td>

          <td>
            30日
          </td>
        </tr>

        <tr>
          <td>
            10分
          </td>

          <td>
            6時間～3日
          </td>

          <td>
            13ヶ月
          </td>
        </tr>

        <tr>
          <td>
            1時間
          </td>

          <td>
            3～14日
          </td>

          <td>
            13ヶ月
          </td>
        </tr>

        <tr>
          <td>
            3時間
          </td>

          <td>
            14日以上
          </td>

          <td>
            13ヶ月
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

## 編集データ保持期間 [#adjust-retention]

保持期間を表示および編集するには、[データ管理ハブ](https://one.newrelic.com/data-management-hub)に移動し、<DNT>**Data retention**</DNT>、<DNT>**Edit data retention**</DNT>の順にクリックします。ここでは、データ保持期間を編集するか、Data Plusにアップグレードするためのオプションが表示されます。それが表示されない場合は、[要件](#requirements)を確認し、New Relicアカウント担当者にご相談ください。

保持期間を延長するためのオプション：

* まだ切り替えていない場合は、[Data Plus](/docs/accounts/accounts-billing/new-relic-one-pricing-billing/data-ingest-billing/#data-plus)に切り替えてください。これにより、データ保持期間が大幅に長くなり、その他のメリットが得られます。
* Data Plusまたはオリジナルデータオプションの場合：データ保持期間を追加します。組織の30日間の追加データ保持期間の料金は、月あたり0.05ドル/GBです。

保持期間を延長するための重要なポイント：

* より長い保存期間を有効にすると、[<DNT>**Data retention**</DNT> UI](#find-ui)にリストされているすべてのデータ型の保持期間が全体的に長くなります。特定のデータ型のみを増やすことはできません。
* より長い保持期間を有効にすると、特定のデータソースの保持期間を短縮しても、請求には影響しません。データの取り込みと請求を削減する方法については、[データ取り込みの管理](/docs/data-apis/manage-data/manage-data-coming-new-relic)を参照してください。
* 保持期間を調整すると、それが有効になるまでに最大24時間かかる場合があります。

### 保持期間の短縮 [#reduce-retention]

データソースの保持期間を短縮しても、その種類の既存のデータはすぐには消失しません。該当データは最大数週間表示され、クエリで返される可能性があります。データを誤って削除しないように安全策が講じられていますが、これは、[データを迅速に削除する](#deleting-data)ためには、保持期間の値を減らすことが良い戦略ではないことも示唆しています。

データ取り込みを削減するためのオプションについては、[データ取り込みの管理](/docs/data-apis/manage-data/manage-data-coming-new-relic)を参照してください。

## 既存データの削除 [#deleting-data]

[テレメトリーデータ](/docs/using-new-relic/data/understand-data/new-relic-data-types)がNew Relicデータベースに報告され、クエリに使用できるようになると、そのデータを編集または削除できなくなります。これは、New Relicの速度とパフォーマンスを最適化するための意図的な設計上の決定です。データは、[データ保持期間](#adjust-retention)が終了すると期限切れになります。すでに報告されているデータを削除したい場合は、New Relicの担当者にお問い合わせください。

## データのエクスポートとストリーミング [#export-data]

Data Plusを使用している組織は、好みのツールを使用してデータをエクスポートして長期保存できます。これに関連する機能には次のようなものがあります。

* [ストリーミングデータのエクスポート](/docs/apis/nerdgraph/examples/nerdgraph-streaming-export)
* [履歴データのエクスポート](/docs/apis/nerdgraph/examples/nerdgraph-historical-data-export)

## API経由での保持期間の管理 [#api-examples]

UIでの保持設定の変更に加えて、[NerdGraph API](/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph)を使用することもできます。以下に、NerdGraphリクエストの例をいくつか紹介します。データ保持期間の変更が有効になるまでに最大24時間かかる場合があることに留意してください。

APIを使用して保持期間を調整する前に、[保持期間の調整に関するルール](#adjust-retention)を確認してください。

<CollapserGroup>
  <Collapser id="api-list-namespaces" title="カスタマイズ可能な保持期間イベントネームスペースをリスト">
    アカウントのカスタマイズ可能な保持期間イベントネームスペースをリストするには、次の手順を実行します。

    ```graphql
    query {
     actor {
       account(id: YOUR_ACCOUNT_ID) {
         dataManagement {
           customizableRetention {
             eventNamespaces {
               namespace
             }
           }
         }
       }
     }
    }
    ```
  </Collapser>

  <Collapser id="api-list-rules" title="アカウントのアクティブなルールをリスト">
    アカウントのアクティブなルールをリストするには：

    ```graphql
    query {
     actor {
       account(id: YOUR_ACCOUNT_ID) {
         dataManagement {
           eventRetentionRules {
             id
             deletedAt
             deletedById
             createdAt
             createdById
             retentionInDays
             namespace
           }
         }
       }
     }
    }
    ```
  </Collapser>

  <Collapser id="api-show-active-rule" title="アカウント/ネームスペースのペアのアクティブなルールを表示">
    特定のアカウント/ネームスペースのペアでアクティブなルールを表示するには：

    ```graphql
    query {
     actor {
       account(id: YOUR_ACCOUNT_ID) {
         dataManagement {
           eventRetentionRule(namespace: "APM") {
             id
             deletedById
             deletedAt
             createdById
             createdAt
             retentionInDays
             namespace
           }
         }
       }
     }
    }
    ```
  </Collapser>

  <Collapser id="api-create-new-rule" title="新しいルールを作成">
    新しいルールを作成するには：

    ```graphql
    mutation {
     dataManagementCreateEventRetentionRule(accountId: YOUR_ACCOUNT_ID, namespace: "APM", retentionInDays: 8) {
       id
       deletedById
       deletedAt
       createdById
       createdAt
       retentionInDays
       namespace
     }
    }
    ```
  </Collapser>

  <Collapser id="api-delete-rule" title="既存のルールを削除">
    子アカウントに適用されているルールを削除すると、その子アカウントは、指定されたネームスペースに対して親アカウントの現在の保持期間の値を採用します。親アカウントに適用されたルールを削除すると、デフォルトの保持期間の値が指定されたネームスペースに再適用されます。既存のルールを削除するには：

    ```graphql
    mutation {
     dataManagementDeleteEventRetentionRule(accountId: YOUR_ACCOUNT_ID, namespace: "APM") {
       id
       deletedById
       deletedAt
       createdById
       createdAt
       retentionInDays
       namespace
     }
    }
    ```
  </Collapser>

  <Collapser id="api-delete-rule" title="既存の子アカウントルールを他のアカウントにコピー">
    子アカウントをテンプレートまたはソースアカウントとして指定すると、他の宛先子アカウントにソース子アカウントと同じネームスペース保持期間の値を適用させることができます。注：すべての子アカウントは同じ親アカウント内に存在する必要があります。既存の保持期間セットをコピーするには：

    ```graphql
    mutation {
      dataManagementCopyRetentions(
        sourceAccountId: SOURCE_ACCOUNT_ID,
        destinationAccountIds: [DESTINATION_ACCOUNT_ID_1, DESTINATION_ACCOUNT_ID_2, DESTINATION_ACCOUNT_ID_3])
      {
        success
        failure
      }
    }
    ```

    成功または失敗すると、ソースアカウントのルールのコピーに成功した（または失敗した）宛先アカウントIDのリストが返されます。
  </Collapser>
</CollapserGroup>

## アカウントの継承 [#account-structure]

[親アカウント](/docs/accounts/original-accounts-billing/original-users-roles/mastersub-account-structure)のデータ保持期間の設定は、その子アカウントに継承されます。このコンテキストでは、New Relic組織の最初のアカウントが親アカウントとみなされ、組織に追加された他のアカウントはそのアカウントの設定を継承します。

## RSS - Atom

[RSSフィード](https://github.com/newrelic/docs-website/commits/develop/src/content/docs/data-apis/manage-data/manage-data-retention.mdx.atom)を購読します。