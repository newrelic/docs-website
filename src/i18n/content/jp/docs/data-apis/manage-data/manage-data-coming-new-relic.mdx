---
title: データの取り込みを理解して管理する
tags:
  - Ingest and manage data
  - Manage data
  - Data Ingest Governance
metaDescription: How to understand and manage your New Relic data ingest.
translationType: machine
---

import accountsDataIngestUI from 'images/accounts_screenshot-full_data-ingest-UI.webp'

import accountsFacetUsageData from 'images/accounts_screenshot-crop_facet-usage-data.webp'

以下を含むいくつかの理由で、New Relic データの取り込みを管理する必要がある場合があります。

* 不要なデータの削除
* [データ取り込みコストの](/docs/accounts/accounts-billing/new-relic-one-pricing-billing/data-ingest-billing)管理

## データ取り込み UI [#ui]

**\[データの取り込み]** タブは、 [データ管理 UI](/docs/data-apis/manage-data/manage-your-data)にあります。データ インジェスト UI には、データ ソースごとの使用状況の概要が表示されます。複数のアカウントを持つ組織の場合、特定のアカウントの使用状況を表示することもできます。

<img
  title="Data ingest UI"
  alt="Data ingest UI"
  src={accountsDataIngestUI}
/>

<figcaption>
  [ユーザー メニュー](/docs/accounts/accounts-billing/general-account-settings/intro-account-settings)から **\[データの管理]**を選択します。
</figcaption>

グラフに表示されるメトリックの詳細な定義については、 [データ取り込みソース を](#sources-list)参照してください。

そのグラフの作成に使用された、基になる NRQL クエリを表示するには、 **\[View NRQL]**をクリックします。

この UI およびその他の管理 UI の簡単なツアーを示すビデオについては、 [アカウント設定 を](/docs/accounts/accounts-billing/general-account-settings/intro-account-settings/#video-tour)参照してください。

### 詳細を見る [#detail]

グラフに表示されている特定のデータ ソースの詳細を取得するには、グラフのバンドにカーソルを合わせてクリックします。下の画像に示すように、モーダルが開きます。

<img
  title="Ingest chart data source details"
  alt="screenshot of details page for a data source"
  src={accountsFacetUsageData}
/>

<figcaption>
  取り込みグラフのバンドをクリックすると、そのデータの詳細が表示されます。
</figcaption>

グラフがデータとエラー メッセージを表示する方法に関する技術的な詳細については、 [グラフの詳細 を](#technical-details-chart)参照してください。

## 将来のデータ取り込みを見積もる [#estimate]

将来のデータ取り込みを推定しようとしている場合は、 [取り込みの推定に関するこのブログ投稿を](https://newrelic.com/blog/nerdlog/estimate-data-cost)参照してください。

## 取り込みを管理し、取り込みスパイクを回避する [#manage]

New Relic データをどのように管理するかは、組織やニーズに固有の多くの要因によって異なります。とはいえ、データの取り込みを管理し、予期しないスパイクを回避するための一般的なヒントを次に示します。

* **チームメンバーを割り当てます。** ケイデンスでのインジェストのレビューと管理を担当するチーム メンバーを割り当てます。 [データ関連の請求要素を](/docs/accounts/accounts-billing/new-relic-one-pricing-billing/data-ingest-billing)理解していることを確認してください。これには、請求対象となるものと含まれないものなどがあります。
* **自分のデータを理解しましょう。** しばらく時間をかけて、データに慣れてください。その引き潮と流れを知り、それがどこから来ているのかを理解してください。
* **重要な変更を行ったときに監視します。** 新しいデータ レポート ツールを初めてアクティブ化するとき、エージェントや統合をアップグレードするとき、またはシステムに大きな変更を加えるときは、取り込みを監視して、データに予期しないスパイクがないことを確認する必要があります。
* **アラートを設定します。** 特定のシナリオによってデータが急激に急増することが懸念される場合は、アラート条件を設定して、それが発生した場合に通知します。そのヒントについては、 [「使用状況クエリ」](/docs/accounts/accounts-billing/new-relic-one-pricing-billing/usage-queries-alerts)を参照してください。

### 摂取を減らす [#adjust-ingest]

以下は、New Relic のお客様が役に立たないデータの取り込みを減らすために取る一般的なアプローチのヒントです。

すべての New Relic ソリューションには、データを New Relic に報告する方法を制御できるさまざまな構成オプションがあります。以下に、データの取り込みを減らすための一般的な方法をいくつか示しますが、使用可能なすべてのオプションについて学習するには、使用している特定のツールのドキュメントを読むことをお勧めします。

<CollapserGroup>
  <Collapser
    id="adjust-apm-ingest"
    title="APM 取り込みの管理"
  >
    調整オプション <InlinePopover type="apm"/>データは次のとおりです。

    * トランザクション イベントのサンプリング レートを構成します。 [Java](/docs/agents/java-agent/configuration/java-agent-configuration-config-file#Transaction_Events)、 [.Net](/docs/apm/agents/net-agent/configuration/net-agent-configuration)、 [Go](/docs/apm/agents/go-agent/configuration/go-agent-configuration#transaction-events-settings)、 [NodeJS](/docs/apm/agents/nodejs-agent/installation-configuration/nodejs-agent-configuration)、 [PHP](https://docs.newrelic.com/docs/apm/agents/php-agent/configuration/php-agent-configuration)、 [Python](/docs/apm/agents/python-agent/configuration/python-agent-configuration)、または [Ruby](/docs/apm/agents/ruby-agent/configuration/ruby-agent-configuration)のエージェント構成を参照してください。
    * [分散トレース サンプリング](/docs/distributed-tracing/concepts/how-new-relic-distributed-tracing-works)を調整する
    * たとえば、トレースの頻度に[適したApdexスコアを設定](/docs/apm/new-relic-apm/apdex/change-your-apdex-settings/)します。
    * [カスタム インストルメンテーション](/docs/apm/agents/manage-apm-agents/agent-data/custom-instrumentation) や [カスタム指標](/docs/apm/agents/manage-apm-agents/agent-data/collect-custom-metrics)を最適化します。
    * [login-in-context](/docs/logs/logs-context/get-started-logs-context)を管理します。
  </Collapser>

  <Collapser
    id="adjust-infra-ingest"
    title="インフラストラクチャの取り込みを管理する"
  >
    インフラストラクチャデータを調整するためのオプションは次のとおりです。

    * ネットワーク、ストレージ、およびシステムイベントの[サンプリングレート](/docs/infrastructure/install-infrastructure-agent/configuration/infrastructure-agent-configuration-settings#samples-variables)を調整します。

    * [プロセスメトリックを無効](/docs/infrastructure/install-infrastructure-agent/configuration/infrastructure-agent-configuration-settings/#enable-process-metrics)にします。

    * ポーリング間隔を調整します。

      * クラウド統合の場合: [ポーリングを調整します](/docs/infrastructure/infrastructure-integrations/cloud-integrations/configure-polling-frequency-data-collection-cloud-integrations)。
      * [オンホスト統合](/docs/infrastructure/host-integrations/get-started/introduction-host-integrations)の場合: 統合の構成を調整します。

    * [特定の属性のレポートを制御します](/docs/infrastructure/install-infrastructure-agent/configuration/infrastructure-agent-configuration-settings/#include-matching-metrics)。

    * [Kubernetesイベント統合](/docs/kubernetes-pixie/kubernetes-integration/kubernetes-events/install-kubernetes-events-integration/#install)を管理します。
  </Collapser>

  <Collapser
    id="adjust-log-ingest"
    title="ログの取り込みを管理する"
  >
    ログデータの取り込みを調整するためのオプションは次のとおりです。

    * [コンテキスト内の自動ログ](/docs/logs/logs-context/disable-automatic-logging)：UIまたはAPIを介して無効または有効にするか、クライアント側の構成設定を調整します。
    * [ログ データの転送](/docs/logs/forward-logs/enable-log-management-new-relic): フィルタリングされていないログにより、大量のログ データが報告される場合があります。ログ フォワーダーの構成を調整して、ログ送信側からログ イベントをフィルター処理できます。
    * [ログデータ](/docs/logs/ui-data/drop-data-drop-filter-rules)の削除：UIまたはAPIを介してデータの取り込みを管理します。
  </Collapser>

  <Collapser
    id="drop-data"
    title="データを破棄する"
  >
    取り込み時にデータ ドロップ ルールが適用されるため、役に立たないデータに対して課金されることはありません。ただし、独自の [データ ドロップ ルール](/docs/accounts/accounts/data-management/drop-data-using-nerdgraph)を設定することもできます。
  </Collapser>

  <Collapser
    id="npm"
    title="ネットワーク監視データの管理"
  >
    [ネットワーク監視データが](/docs/network-performance-monitoring/get-started/npm-introduction)予期せず増加した場合は、ポーリング間隔を調整することを検討してください。
  </Collapser>

  <Collapser
    id="disable"
    title="監視ツールの無効化または削除"
  >
    まったく不要なエージェントまたは統合がある場合は、それらのツールをアンインストールまたは削除できます。手順については、そのツールの特定のドキュメントを参照してください。将来そのツールを使用する可能性があると思われる場合は、完全にアンインストールするよりも単に無効にする方が良い解決策になる可能性があることに注意してください。
  </Collapser>
</CollapserGroup>

## データ取り込みソース [#sources-list]

[データ取り込みUI](#data-ingest-ui)チャートは、請求可能なデータ使用量の高レベルの内訳を示します。次の表で、これらのソースについて説明します。この表で、「使用メトリックグループ」とは、 `NrConsumption`イベントでのそのソースの`usageMetric`属性値の値を指します。

<CollapserGroup>
  <Collapser
    id="metrics"
    title="指標"
  >
    データ取り込みチャートでは、**メトリクス**は2種類のメトリクスの組み合わせです。[メトリクスタイムスライスデータ](/docs/data-apis/understand-data/new-relic-data-types/#timeslice-data)と[ディメンションメトリクス](/docs/data-apis/understand-data/new-relic-data-types/#dimensional-metrics)です。

    使用メトリックグループ： `MetricsBytes` 。

    メトリックタイムスライスデータの平均は、8日後の1時間です。90日後、永続的なメトリックデータは1時間の期間で保存され続けます。現在、生のメトリックデータを30日間保存しています。

    最初の取り込み量に対してのみ請求されます。その後のロールアップについては請求されません。
  </Collapser>

  <Collapser
    id="apm"
    title="APMイベント"
  >
    これには、 `Transaction`や`TransactionError`などの[APMイベント](/docs/insights/insights-data-sources/default-data/apm-default-events-insights)が含まれます。

    使用メトリックグループ： `ApmEventsBytes` 。
  </Collapser>

  <Collapser
    id="infra"
    title="インフラストラクチャー"
  >
    [インフラ監視関連データには](/docs/infrastructure/manage-your-data/data-instrumentation/default-infrastructure-events)いくつかの種類があります。

    ### インフラストラクチャ ホスト

    このデータは `SystemSample`、 `NetworkSample`、および `StorageSample` イベントを介して報告されます。

    使用状況メトリック グループは `InfraHostBytes`です。

    ストレージやネットワークデータなど、インフラストラクチャエージェントからのサーバーと仮想マシンに関連する情報。

    ### インフラストラクチャー・プロセス

    このデータは `ProcessSample` イベントに保存されます。

    使用状況メトリック グループは `InfraProcessBytes`です。

    インフラストラクチャエージェントを実行しているホストで実行されている各プロセスに関連するデータ。この機能はデフォルトでオフになっています。詳細については、「 [プロセスメトリック](/docs/infrastructure/install-infrastructure-agent/configuration/infrastructure-agent-configuration-settings/#enable-process-metrics)」を参照してください。

    ### Infrastructureインテグレーション

    使用メトリックグループ： `InfraIntegrationBytes` 。

    Dockerコンテナー、Windowsサービス、Nagiosチェック、AWS、Azure、GCPのマネージドサービスなどのクラウド統合に関連するデータを含む、アプリケーションとサービスに関連するパフォーマンスデータ。通常はお客様が管理します。
  </Collapser>

  <Collapser
    id="logging"
    title="ロギング"
  >
    ログと、存在する `Log_<value>` カスタム データ パーティションが含まれます。

    使用状況メトリック グループは `LoggingBytes`です。

    デフォルトでは、ログ レコードは [`Log` データ型](/docs/data-apis/understand-data/new-relic-data-types/#log-data) で保存されます。カスタム データ パーティションを追加すると、新しいデータ タイプが作成されます。これらのデータ タイプは常に `Log_` というプレフィックスが付けられ、保存されているログ データのセット全体の一部としてカウントされます。

    `LogExtendedRecord`を使用すると、4KB を超えるログ メッセージは複数のイベントに分割され、必要に応じて結合されて元のメッセージが表示されます。これにより、メッセージ データのサイズが縮小されます。このデータの保存方法の詳細については、 [ログ BLOB のドキュメントを](/docs/logs/log-management/ui-data/long-logs-blobs)参照してください。
  </Collapser>

  <Collapser
    id="custom-events"
    title="カスタムイベント"
  >
    このデータは [カスタム イベント](/docs/insights/insights-data-sources/custom-data/report-custom-event-data)からのものです。

    使用状況メトリック グループは `CustomEventsBytes`です。
  </Collapser>

  <Collapser
    id="mobile"
    title="モバイルイベント"
  >
    一般的な`Mobile`イベント、 `MobileRequestError` 、 `MobileBreadcrumb` 、 `MobileSession` 、 `MobileHandledException` 、 `MobileCrash` 、 `MobileRequest` 、および`MobileJavaScriptError`を含む[モバイルイベント](/docs/insights/insights-data-sources/default-data/mobile-default-events-insights)。

    使用メトリックグループ： `MobileEventsBytes` 。
  </Collapser>

  <Collapser
    id="tracing"
    title="トレース"
  >
    これには、 [`Span` データ型](/docs/data-apis/understand-data/new-relic-data-types/#trace-data) と OpenTelemetry の `SpanEvent`が含まれます。

    使用状況メトリック グループは `TracingBytes`です。

    `DistributedTraceSummary` イベントは取り込みにはカウントされません。
  </Collapser>

  <Collapser
    id="browser"
    title="ブラウザイベント"
  >
    これらは、 `Browser`、 `Browser:EventLog`、 `Browser:JSErrors`、および `PcvPerf` (PageView タイミング) の名前空間を含む [ブラウザ監視イベント](/docs/insights/insights-data-sources/default-data/browser-default-events-insights)です。

    使用状況メトリック グループは `BrowserEventsBytes`です。
  </Collapser>

  <Collapser
    id="lambda"
    title="ラムダ"
  >
    これらは [AWS Lambda イベント](/docs/serverless-function-monitoring/aws-lambda-monitoring/ui-data/understand-lambda-data-structure)です。

    使用状況メトリック グループは `ServerlessBytes`です。
  </Collapser>

  <Collapser
    id="change-tracking-ingest"
    title="変更追跡"
  >
    変更追跡アクティビティは、 **Deployment** 名前空間に格納されます。追跡する個々の変更は、取り込みに向かって平均で約 200 ～ 250 バイトです。
  </Collapser>

  <Collapser
    id="security-bytes-ingest"
    title="セキュリティ"
  >
    New Relic のセキュリティ機能によって報告されたイベントは、 **Security** 名前空間に保存されます。これらは主に脆弱性管理機能によって提供される脆弱性レポートですが、将来的には追加の製品が含まれるように拡張される可能性があります。

    脆弱性レポートの発生はまれであるため、このタイプのイベントの予想される量は非常に少ないです。

    まだパブリック プレビュー段階にあるセキュリティ機能は、別の **Security:Preview** 名前空間を使用するため、課金の対象にはなりません。

    使用状況メトリック グループは `SecurityBytes`です。
  </Collapser>
</CollapserGroup>

## データの取り込みを最適化する [#optimize-ingest]

また、 [データの取り込みを最適化する方法に関する詳細なチュートリアル](/docs/new-relic-solutions/observability-maturity/operational-efficiency/intro-data-governance)もあります。

## 取り込まれたデータをストリーミングする [#stream]

取り込まれたデータを他のソースにストリーミングする方法の詳細については、[ストリーミング エクスポート](/docs/apis/nerdgraph/examples/nerdgraph-streaming-export)を参照してください。

## 複数のデータセンター地域からのデータ [#data-centers]

複数のデータ センター リージョンにアカウントをお持ちの場合は [、使用状況を理解する方法をご覧ください](/docs/accounts/accounts-billing/account-setup/choose-your-data-center#account-structure)。

## 取り込みグラフに関する技術的な詳細 [#technical-details-chart]

取り込み UI に関する技術的な詳細:

* **表示は目安です。** 取り込みグラフに表示される取り込み値は、独自のクエリを実行したときに表示される実際の量とは若干異なる場合があります。これは、グラフに使用される計算が推定であるためです。
* **グラフ データがありません。** データ取り込みグラフには、データ保持設定でカバーされる期間よりもわずかに長い期間が表示される場合があります。このため、利用可能なチャート データがないというメッセージが表示される場合があります。
* **時間バケットをチャート化します。** アカウントのデータが 1 テラバイト未満の場合、24 時間のボリュームを計算します。それ以外の場合は、1 時間で計算されます。