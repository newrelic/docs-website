---
title: infrastructureエージェント設定
tags:
  - Infrastructure
  - Install the infrastructure agent
  - Configuration
metaDescription: 'Configuration settings for the New Relic infrastructure agent, including YAML and environment variable names, value, minimum agent version.'
freshnessValidatedDate: never
translationType: human
---

infrastructureエージェントには、[その動作を微調整するための大量の設定セット](/docs/infrastructure/new-relic-infrastructure/configuration/configure-infrastructure-agent)があります。ここでは：

* すべての設定オプションを一覧表示します（YAMLと環境変数名の両方）。
* 設定の内容と使用するタイミングを説明します。
* 変数の型とデフォルト値（ある場合）を指定します。
* 必要に応じて、最低限必要なエージェントバージョンを列挙します。

<Callout variant="important">
  シークレット管理を使用すると、インフラストラクチャを使用してエージェントのオンホストインテグレーションを設定し、機密データ（パスワードなど）をインテグレーションの設定ファイルにプレーンテキストとして書き込むことなく使用できるようになります。詳細については、「[シークレットの管理](/docs/integrations/host-integrations/installation/secrets-management)」を参照してください。
</Callout>

まだNewRelicアカウントがありませんか？永久に無料で[サインアップ](https://newrelic.com/signup) します。

## スタートガイド [#requirements]

[New Relicアカウントを作成し](https://newrelic.com/signup)（永久に無料です）、[infrastructureエージェントをインストール](/docs/infrastructure/install-infrastructure-agent/get-started/install-infrastructure-agent/)した後、環境に合わせてinfrastructureエージェントを設定できるようになります。

必須の設定は、[`license_key`](#license-key)のみです。

各変数の使用方法の例については、 [GitHubのサンプル設定テンプレート](https://github.com/newrelic/infrastructure-agent/blob/master/assets/examples/infrastructure/newrelic-infra-template.yml.example)を参照してください。

## 環境変数

リストされている設定オプションの多くは、環境変数を使用して値を設定することもでき、これはYAML設定よりも優先されます。

<Callout variant="important">
  多くの場合、infrastructureエージェントはホスト内のシステムサービスとして実行され、グローバルに管理されます（例：Linux、Windowsサービスの場合は`systemd` 、macOSの場合は`launchd`）。このセットアップで環境変数によって設定の変更を適用するには、これらの環境変数を設定し、infrastructureエージェントサービスが実行されている個別のコンテキストに表示できるようにする必要があります。この方法はプラットフォームによって異なります。環境変数をシステムサービスに追加する方法を確認するには、プラットフォームのサービスマネージャーのドキュメントを確認してください。
</Callout>

## エージェント変数 [#agent-variables]

<CollapserGroup>
  <Collapser
    className="freq-link"
    id="license-key"
    title={<>license_key（<strong>必須</strong>）</>
    }
  >
    New Relicアカウントの<InlinePopover type="licenseKey" />を指定します。エージェントはこのキーを使用して、サーバーのメトリクスをNew Relicアカウントに関連付けます。 この設定は、標準のインストレーションプロセスの一部として作成されます。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `license_key`
          </td>

          <td>
            `NRIA_LICENSE_KEY`
          </td>

          <td>
            文字列
          </td>

          <td />

          <td />
        </tr>
      </tbody>
    </table>

    例:

    ```yml
    license_key: 1234567890abcdefghijklmnopqrstuvwxyz1234
    ```
  </Collapser>

  <Collapser className="freq-link" id="fedramp" title="FedRAMP対応">
    FedRAMPエンドポイントを使用するかどうかを指定します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `fedramp`
          </td>

          <td>
            `NRIA_FEDRAMP`
          </td>

          <td>
            boolean
          </td>

          <td>
            `false`
          </td>

          <td>
            [1.15.0](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-1150)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="max-procs" title="max_procs">
    エージェントが使用できる論理プロセッサの数を指定します。この値を増やすと、異なるコア間における負荷の分散化に役立ちます。

    `-1`に設定すると、エージェントは環境変数`GOMAXPROCS`を読み取ろうとします。この変数が設定されていない場合、デフォルト値はホストで使用可能なコアの合計数になります。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `max_procs`
          </td>

          <td>
            `NRIA_MAX_PROCS`
          </td>

          <td>
            整数
          </td>

          <td>
            `1`
          </td>

          <td>
            [1.0.1002](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-101002)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="payload-compression-level" title="payload_compression_level">
    バージョン[1.0.804](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10804)以降では、エージェントから送信されるデータはデフォルトで圧縮されます。ペイロード圧縮を無効にするには、 `payload_compression_level`を0に設定します。

    <Callout variant="important">
      推奨：この設定は変更しないでください。
    </Callout>

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `payload_compression_level`
          </td>

          <td>
            `NRIA_PAYLOAD_COMPRESSION_LEVEL`
          </td>

          <td>
            整数
          </td>

          <td>
            `6`
          </td>

          <td>
            [1.0.804](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10804)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="startup-connection-retries" title="startup_connection_retries">
    エラーをスローする前に、エージェントが起動時にNew Relicプラットフォームの可用性を確認するためのリクエストを再試行する回数。

    <DNT>**negative value**</DNT>に設定すると、エージェントは接続が成功するまで接続をチェックし続けます。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `startup_connection_retries`
          </td>

          <td>
            `NRIA_STARTUP_CONNECTION_RETRIES`
          </td>

          <td>
            整数
          </td>

          <td>
            `6`
          </td>

          <td>
            1.0.936
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="startup-connection-retries" title="startup_connection_retry_time">
    リクエストがタイムアウトした後、エージェントが起動時にNew Relicプラットフォームの可用性を確認するためにリクエストを再試行するまで待機する時間。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `startup_connection_retry_time`
          </td>

          <td>
            `NRIA_STARTUP_CONNECTION_RETRY_TIME`
          </td>

          <td>
            文字列
          </td>

          <td>
            `5s`
          </td>

          <td>
            1.0.936～1.2.30
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="startup-connection-timeout" title="startup_connection_timeout">
    起動時にNew Relicプラットフォームの可用性を確認する要求がタイムアウトしたと判断されるまでエージェントが待機する時間。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `startup_connection_timeout`
          </td>

          <td>
            `NRIA_STARTUP_CONNECTION_TIMEOUT`
          </td>

          <td>
            文字列
          </td>

          <td>
            `10s`
          </td>

          <td>
            1.0.936
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="self-instrumentation" title="self_instrumentation">
    [エージェント自身の計装](/docs/infrastructure/install-infrastructure-agent/manage-your-agent/infrastructure-agent-self-instrumentation)を有効にします。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `self_instrumentation`
          </td>

          <td>
            `NRIA_SELF_INSTRUMENTATION`
          </td>

          <td>
            文字列
          </td>

          <td>
            `empty`
          </td>

          <td>
            [1.24.0](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-1240)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="logging_retry-limit" title="logging_retry_limit">
    組み込みのFluentbitログフォワーダーを介して[ログ転送のエージェント再試行](/docs/infrastructure/install-infrastructure-agent/manage-your-agent/infrastructure-agent-behavior/#retry)を有効にします。整数値は意図した再試行回数を表します。その他の設定可能な値には、再試行回数を無制限に設定する`False`や、再試行機能を完全にオフにする`no_retries`があります。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `logging_retry_limit`
          </td>

          <td>
            `NRIA_LOGGING_RETRY_LIMIT`
          </td>

          <td>
            整数
          </td>

          <td>
            `5`
          </td>

          <td>
            [1.29.1](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-1291)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

## クラウド変数

エージェントがcloudインスタンスで実行されている場合、エージェントはcloudタイプを検出し、基本的な[メタデータ](/docs/integrations/new-relic-integrations/getting-started/understand-use-data-infrastructure-integrations#overview)を取得しようとします。メトリクスは、 New Relicに[cloudプロバイダーアカウントを接続](/docs/infrastructure/infrastructure-integrations/get-started/introduction-infrastructure-integrations#cloud)するときに、拡張cloudメタデータ（カスタムリソースタグを含む）で強化することもできます。

<CollapserGroup>
  <Collapser className="freq-link" id="cloud-max-retry-count" title="cloud_max_retry_count">
    cloud検出が失敗した場合にエージェントが接続を再試行する回数を設定します。

    エージェントの初期化中にcloud検出に失敗した場合、エージェントは[`CloudRetryBackOffSec`秒](#cloud-retry-backoff-sec)待ってから再試行します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `cloud_max_retry_count`
          </td>

          <td>
            `NRIA_CLOUD_MAX_RETRY_COUNT`
          </td>

          <td>
            整数
          </td>

          <td>
            `10`
          </td>

          <td>
            1.2.6
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="cloud-metadata-expiry-sec" title="cloud_metadata_expiry_sec">
    エージェントがメタデータを破棄するまで待機する間隔を秒単位で設定します。この期間が過ぎるとメタデータの有効期限が切れ、エージェントはそれを再度取得します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `cloud_metadata_expiry_sec`
          </td>

          <td>
            `NRIA_CLOUD_METADATA_EXPIRY_SEC`
          </td>

          <td>
            整数
          </td>

          <td>
            `300`
          </td>

          <td>
            1.2.6
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="cloud-retry-backoff-sec" title="cloud_retry_backoff_sec">
    cloud検出が失敗した場合に、エージェントがcloud検出の再試行を待機する間隔を秒単位で設定します。

    エージェントの初期化中にcloud検出が失敗した場合、 [`CloudMaxRetryCount`回](#cloud-max-retry-count)再試行されます。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `cloud_retry_backoff_sec`
          </td>

          <td>
            `NRIA_CLOUD_RETRY_BACKOFF_SEC`
          </td>

          <td>
            整数
          </td>

          <td>
            `60`
          </td>

          <td>
            1.2.6
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="cloud-provider" title="cloud_provider">
    エージェントが実行されているcloudプロバイダーを指定します。これがデフォルトとは異なる値に設定されている場合、エージェントはcloudプロバイダーからメタデータ（インスタンス ID）を正常に取得するまで待機してから、データをバックエンドに送信します。

    デフォルトの動作では、エージェントはcloudプロバイダーを検出してメタデータを取得しようとしますが、エージェントはブロックされません。

    許可される値：`""` 、 `"aws"` 、 `"azure"` 、 `"gcp"` 、 `"alibaba"`

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `cloud_provider`
          </td>

          <td>
            `NRIA_CLOUD_PROVIDER`
          </td>

          <td>
            文字列
          </td>

          <td>
            `""`
          </td>

          <td>
            1.40.1
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="disable-cloud-instance-id" title="disable_cloud_instance_id">
    [`DisableCloudMetadata`](#disable-cloud-metadata)と似ていますが、ホストエイリアスプラグインのcloudメタデータの収集のみを無効にします。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `disable_cloud_instance_id`
          </td>

          <td>
            `NRIA_DISABLE_CLOUD_INSTANCE_ID`
          </td>

          <td>
            boolean
          </td>

          <td>
            `false`
          </td>

          <td>
            1.0.220
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="disable-cloud-metadata" title="disable_cloud_metadata">
    cloudメタデータの収集を無効にします。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `disable_cloud_metadata`
          </td>

          <td>
            `NRIA_DISABLE_CLOUD_METADATA`
          </td>

          <td>
            boolean
          </td>

          <td>
            `false`
          </td>

          <td>
            [1.0.690](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10690)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

## Docker変数

<CollapserGroup>
  <Collapser className="freq-link" id="container-cache-metadata-limit" title="container_cache_metadata_limit">
    キャッシュされたコンテナのメタデータの有効期限が切れ、エージェントによる再取得が必要になるまでの時間（秒）。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `container_cache_metadata_limit`
          </td>

          <td>
            `NRIA_CONTAINER_CACHE_METADATA_LIMIT`
          </td>

          <td>
            整数
          </td>

          <td>
            `60`
          </td>

          <td>
            1.0.801
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="docker-api-version" title="docker_api_version">
    DockerクライアントのAPI バージョンを指定します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `docker_api_version`
          </td>

          <td>
            `NRIA_DOCKER_API_VERSION`
          </td>

          <td>
            文字列
          </td>

          <td>
            `1.24`
          </td>

          <td>
            [1.1.4](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-114)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

## ファイルシステム変数 [#filesystem-variables]

<CollapserGroup>
  <Collapser className="freq-link" id="custom-supported-file-systems" title="custom_supported_file_systems">
    エージェントがサポートするファイルシステムの種類のリスト。この値はデフォルトリストのサブセットである必要があり、デフォルトリストにない項目は破棄されます。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `custom_supported_file_systems`
          </td>

          <td>
            `NRIA_CUSTOM_SUPPORTED_FILESYSTEMS`
          </td>

          <td>
            \[]string
          </td>

          <td>
            Linux： `["xfs", "btrfs", "ext", "ext2", "ext3", "ext4", "hfs", "vxfs", "zfs"]`

            Windows： `["NTFS", "ReFS"]`
          </td>

          <td>
            1.0.220
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="file-devices-ignored" title="file_devices_ignored">
    `StorageSample`データを収集する際、エージェントによって無視されるストレージデバイスのリスト。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `file_devices_ignored`
          </td>

          <td>
            `NRIA_FILE_DEVICES_IGNORED`
          </td>

          <td>
            \[]string
          </td>

          <td />

          <td>
            1.0.220
          </td>
        </tr>
      </tbody>
    </table>

    YAML属性としての例：

    ```yml
    file_devices_ignored:
      - sda1
      - sda2
    ```

    環境変数としての例：

    ```ini
    FILE_DEVICES_IGNORED="sda1,sda2"
    ```
  </Collapser>
</CollapserGroup>

## ホスト名変数

<CollapserGroup>
  <Collapser className="freq-link" id="display-name" title="display_name">
    レポート用に自動生成されたhostnameを上書きします。これは、インフラストラクチャ監視が各ホストの一意の識別子としてhostnameを使用するため、同じ名前のホストが複数ある場合に便利です。この値は、エンティティ名のループバックアドレスの置換にも使用されることに注意してください。

    詳細については、 [エンティティ名解決の仕組み](/docs/integrations/integrations-sdk/file-specifications/integration-executable-file-specifications#h2-loopback-address-replacement-on-entity-names)に関するドキュメントをご覧ください。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `display_name`
          </td>

          <td>
            `NRIA_DISPLAY_NAME`
          </td>

          <td>
            文字列
          </td>

          <td>
            空
          </td>

          <td>
            1.0.266
          </td>
        </tr>
      </tbody>
    </table>

    例:

    ```yml
    display_name: teslaOne
    ```
  </Collapser>

  <Collapser className="freq-link" id="dns_hostname_resolution" title="dns_hostname_resolution">
    `true`の場合、ホストのアドレスのルックアップを実行することによって完全なhostnameを解決します。それ以外の場合、Linuxではhostnameコマンドで取得し、 Windowsではレジストリの TCP/IPパラメーターから取得します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `dns_hostname_resolution`
          </td>

          <td>
            `NRIA_DNS_HOSTNAME_RESOLUTION`
          </td>

          <td>
            boolean
          </td>

          <td>
            `true`
          </td>

          <td>
            [1.2.6](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-125)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="override-hostname" title="override_hostname">
    設定されている場合、この値が完全なhostnameとして報告されます。それ以外の場合、エージェントは通常のルックアップを実行します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `override_hostname`
          </td>

          <td>
            `NRIA_OVERRIDE_HOSTNAME`
          </td>

          <td>
            文字列
          </td>

          <td />

          <td>
            1.0.1015
          </td>
        </tr>
      </tbody>
    </table>

    例:

    ```
    my.custom-hostname.co.org
    ```
  </Collapser>

  <Collapser className="freq-link" id="override-hostname-short" title="override_hostname_short">
    設定されている場合、この値がhostnameとして報告されます。それ以外の場合、エージェントは通常のルックアップを実行します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `override_hostname_short`
          </td>

          <td>
            `NRIA_OVERRIDE_HOSTNAME_SHORT`
          </td>

          <td>
            文字列
          </td>

          <td />

          <td>
            1.0.1015
          </td>
        </tr>
      </tbody>
    </table>

    例:

    ```
    my.custom-hostname
    ```
  </Collapser>
</CollapserGroup>

## インストレーション変数 [#installation-variables]

<CollapserGroup>
  <Collapser className="freq-link" id="agent-dir" title="agent_dir">
    エージェントがキャッシュ、インベントリ、インテグレーションなどのファイルを保存するディレクトリ。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `agent_dir`
          </td>

          <td>
            `NRIA_AGENT_DIR`
          </td>

          <td>
            文字列
          </td>

          <td>
            Linux： `/var/db/newrelic-infra`

            Windows： `C:\Program Files\NewRelic\newrelic-infra\`
          </td>

          <td>
            1.0.2
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="plugin-dir" title="plugin_dir">
    インテグレーションの設定ファイルが格納されているディレクトリ。

    各インテグレーションには、デフォルトで`<integration_name>-config.yml`という名前の独自の設定ファイルがあり、初期化時にエージェントが読み込まれる事前定義された場所に配置されます。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `plugin_dir`
          </td>

          <td>
            `NRIA_PLUGIN_DIR`
          </td>

          <td>
            文字列
          </td>

          <td>
            Linux： `etc/newrelic-infra/integrations.d/`

            Windows： `\Program Files\NewRelic\newrelic-infra\integrations.d`
          </td>

          <td>
            1.0.2
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="custom-plugin-installation-dir" title="custom_plugin_installation_dir">
    インテグレーションをインストールするためのカスタムパスを指定します。これにより、インテグレーションを`agent_dir`の外部にインストールできるようになります。エージェントがインストールされているインテグレーションを探している場合、これが優先されます。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `custom_plugin_installation_dir`
          </td>

          <td>
            `NRIA_CUSTOM_PLUGIN_INSTALLATION_DIR`
          </td>

          <td>
            文字列
          </td>

          <td>
            空
          </td>

          <td>
            1.0.2
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

## インテグレーション変数

<CollapserGroup>
  <Collapser className="freq-link" id="passthrough_-environment" title="passthrough_environment">
    すべてのインテグレーションに渡される環境変数のリスト。インテグレーションに同じ名前の既存の設定オプションがすでにある場合、この環境変数が優先されます。

    infrastructureエージェント1.24.1 `passthrough_environment`以降では、変数名の正規表現がサポートされています。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `passthrough_environment`
          </td>

          <td>
            `NRIA_PASSTHROUGH_ENVIRONMENT`
          </td>

          <td>
            \[]string
          </td>

          <td>
            空
          </td>

          <td>
            [1.0.719](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10719)
          </td>
        </tr>
      </tbody>
    </table>

    YAML属性としての例（エージェントの設定ファイル内、デフォルトで`/etc/newrelic-infra.yml`にあります）：

    ```yml
    passthrough_environment:
      - HOST
      - PORT
      - NRIA_.*
    ```

    環境変数としての例：

    ```ini
    NRIA_PASSTHROUGH_ENVIRONMENT="HOST,PORT,NRIA_.*"
    ```

    Windowsホストの場合：`PATHEXT`は MS Windows環境変数です。この機能は、すべてのコマンドラインから実行可能なファイルにどの拡張子がマークされているかを判断します。これにより、一般的なFlexインテグレーションで「... はコマンドレット、関数、スクリプトファイルの名前として認識されません...」というエラーを解決できます。

    ```yml
    passthrough_environment:
      - PATHEXT
    ```
  </Collapser>

  <Collapser className="freq-link" id="entityname-integrations-v2-update" title="entityname_integrations_v2_update">
    このエージェントにより、インテグレーションプロトコルのバージョン3のエンティティ名（したがってキー）のループバックアドレスの置換が自動的に有効になります。プロトコルのバージョン2を使用しており、この動作が必要な場合は、 `entityname_integrations_v2_update`オプションを有効にします。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `entityname_integrations_v2_update`
          </td>

          <td>
            `NRIA_ENTITYNAME_INTEGRATIONS_V2_UPDATE`
          </td>

          <td>
            boolean
          </td>

          <td>
            `false`
          </td>

          <td>
            1.2.15
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="http-server-enabled" title="http_server_enabled">
    この設定パラメーターを`true`に設定すると、エージェントはHTTPポート（デフォルトでは`8001`）を開き、New RelicStatsDバックエンドからデータを受信します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `http_server_enabled`
          </td>

          <td>
            `NRIA_HTTP_SERVER_ENABLED`
          </td>

          <td>
            boolean
          </td>

          <td>
            `false`
          </td>

          <td>
            [1.0.818](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10818)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="http-server-host" title="http_server_host">
    この値を設定すると、エージェントは`HTTPServerPort`でリッスンを開始し、New Relic StatsDバックエンドからデータを受信します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `http_server_host`
          </td>

          <td>
            `NRIA_HTTP_SERVER_HOST`
          </td>

          <td>
            文字列
          </td>

          <td>
            `localhost`
          </td>

          <td>
            [1.0.818](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10818)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="http-server-port" title="http_server_port">
    New Relic StatsDバックエンドからデータを受信するためのhttpサーバーのポートを設定します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `http_server_port`
          </td>

          <td>
            `NRIA_HTTP_SERVER_PORT`
          </td>

          <td>
            整数
          </td>

          <td>
            `8001`
          </td>

          <td>
            [1.0.818](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10818)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="remove-entities-period" title="remove_entities_period">
    この間隔中に情報を報告していないエンティティを削除するプロセスを開始します。

    有効な時間単位：`s`（秒）、 `m`（分）、 `h`（時間）。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `remove_entities_period`
          </td>

          <td>
            `NRIA_REMOVE_ENTITIES_PERIOD`
          </td>

          <td>
            文字列
          </td>

          <td>
            `48h`
          </td>

          <td>
            [1.0.859](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10859)
          </td>
        </tr>
      </tbody>
    </table>

    例:

    ```
    1h
    ```
  </Collapser>

  <Collapser className="freq-link" id="event_queue_depth" title="event_queue_depth">
    ホスト上に多数のプロセスがある場合、またはインテグレーション全体で収集された大量のデータがある場合、エージェントキューがオーバーランする可能性があります。キューがいっぱいになってもエラーメッセージが表示されないようにするには、キューの深さを増やします。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `event_queue_depth`
          </td>

          <td>
            `NRIA_EVENT_QUEUE_DEPTH`
          </td>

          <td>
            int64
          </td>

          <td>
            `1000`
          </td>

          <td>
            [1.12.0](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-1120/)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="default_integrations_temp_dir" title="default_integrations_temp_dir">
    インテグレーションSDK同期の永続ストレージとして使用される一時ディレクトリを定義します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `default_integrations_temp_dir`
          </td>

          <td>
            `NRIA_DEFAULT_INTEGRATIONS_TEMP_DIR`
          </td>

          <td>
            文字列
          </td>

          <td>
            `/tmp/nr-integrations`
          </td>

          <td>
            [1.50.0](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-1500/)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="is_integrations_only" title="is_integrations_only">
    infrastructureエージェント以外のソース（OpenTelemetry CollectorやPrometheusノードエクスポータなど）からホストをインストゥルメントされており、infrastructureエージェントオンホストインテグレーションを引き続き使用して他のインフラストラクチャサービスを監視したい場合は、この設定を使用します。有効にすると、エージェントはホストのメタデータで修飾されたホストインベントリとインテグレーションテレメトリー（イベントメトリクスとインベントリ）を報告しますが、ホストメトリクス（CPU、メモリ、ディスク、ネットワーク、プロセス）は無効になります。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `is_integrations_only`
          </td>

          <td>
            `NRIA_IS_INTEGRATIONS_ONLY`
          </td>

          <td>
            boolean
          </td>

          <td>
            `false`
          </td>

          <td>
            [1.53.0](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-1530/)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

## インベントリ変数

<CollapserGroup>
  <Collapser className="freq-link" id="offline-time-to-reset" title="offline_time_to_reset">
    キャッシュされたインベントリがこの値より古くなった場合（たとえば、エージェントがオフラインの場合）、エージェントは自動的にデルタストアを削除して再作成します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `offline_time_to_reset`
          </td>

          <td>
            `NRIA_OFFLINE_TIME_TO_RESET`
          </td>

          <td>
            文字列
          </td>

          <td>
            `24h`
          </td>

          <td>
            [1.0.888](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10888)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="enable-async-inventory" title="enable_async_inventory">
    trueに設定すると、インベントリの非同期処理が有効になり、より大きなインベントリペイロードを処理できるようになります。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `async_inventory_handler_enabled`
          </td>

          <td>
            `NRIA_ASYNC_INVENTORY_HANDLER_ENABLED`
          </td>

          <td>
            bool
          </td>

          <td>
            `false`
          </td>

          <td>
            [1.40.1](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-1401)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="ignored-inventory" title="ignored_inventory">
    エージェントによって無視されるインベントリパスのリスト。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `ignored_inventory`
          </td>

          <td>
            `NRIA_IGNORED_INVENTORY`
          </td>

          <td>
            string\[]
          </td>

          <td>
            空のリスト
          </td>

          <td>
            [1.0.336](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10336)
          </td>
        </tr>
      </tbody>
    </table>

    YAML属性としての例：

    ```yml
    ignored_inventory:
      - files/config/stuff.bar
      - files/config/stuff.foo
    ```

    環境変数としての例：

    ```ini
    NRIA_IGNORED_INVENTORY="files/config/stuff.bar,files/config/stuff.foo"
    ```
  </Collapser>
</CollapserGroup>

## Linux変数 [#linux-variables]

<CollapserGroup>
  <Collapser className="freq-link" id="pid-file" title="pid_file">
    エージェントプロセスの`pid`ファイルが作成されるLinux上の場所。これは起動時に使用され、エージェントの他のインスタンスが実行されていないことを確認します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `pid_file`
          </td>

          <td>
            `NRIA_PID_FILE`
          </td>

          <td>
            文字列
          </td>

          <td>
            `/var/run/newrelic-infra/newrelic-infra.pid`
          </td>

          <td>
            1.0.2
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="ignore-reclaimable" title="ignore_reclaimable">
    trueの場合、ホスト仮想メモリの定式化では、`SReclaimable`が使用可能なメモリとみなされます。それ以外の場合は、 `SReclaimable`は使用済みメモリの一部とみなされます。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `ignore_reclaimable`
          </td>

          <td>
            `NRIA_IGNORE_RECLAIMABLE`
          </td>

          <td>
            boolean
          </td>

          <td>
            `false`
          </td>

          <td>
            [1.2.6](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-125)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

## 変数のロギング

<CollapserGroup>
  <Collapser className="freq-link" id="log" title="ログ">
    ログは、infrastructureエージェントロガーを設定するために使用されるキーの値マップです。YAML属性としての例：

    ```yml
    log:
      file: '/var/log/newrelic-infra/newrelic-infra.log'
      level: debug
      forward: true
      stdout: false
    ```

    環境変数としての例：

    ```ini
    NRIA_LOG_FILE='/var/log/newrelic-infra/newrelic-infra.log'
    NRIA_LOG_LEVEL='smart'
    NRIA_LOG_FORWARD='false'
    NRIA_LOG_STDOUT='true'
    ```

    <CollapserGroup>
      <Collapser className="freq-link" id="file" title="ファイル">
        ログのファイルパスを定義します。

        デフォルトのインストレーションではログディレクトリが作成され、このファイルパス値が`file`設定オプションに設定されます。このログディレクトリは、以下に示すようにOSごとに異なります。

        ログのファイルパスをカスタマイズするには、この設定オプションを変更します。

        <table>
          <thead>
            <tr>
              <th style={{ width: "200px" }}>
                YMLオプション名
              </th>

              <th style={{ width: "200px" }}>
                環境変数
              </th>

              <th>
                タイプ
              </th>

              <th>
                デフォルト
              </th>

              <th>
                バージョン
              </th>
            </tr>
          </thead>

          <tbody>
            <tr>
              <td>
                `file`
              </td>

              <td>
                `NRIA_LOG_FILE`
              </td>

              <td>
                文字列
              </td>

              <td>
                以下を参照してください\*
              </td>

              <td />
            </tr>
          </tbody>
        </table>

        デフォルトのパス：

        * Linux：定義されていない場合は、標準出力にのみログが記録されます。

        * Windows、エージェントバージョン 1.0.944以上：

          ```
          C:\%ProgramData%\New Relic\newrelic-infra\newrelic-infra.log
          ```

          ディレクトリを作成できない場合：

          ```
          C:\Program Files\New Relic\newrelic-infra\newrelic-infra.log
          ```
      </Collapser>

      <Collapser className="freq-link" id="level" title="level">
        ログレベルを定義します。使用可能な値：

        * `info`：レベルエラー、警告、情報のログメッセージを表示します。

        * `smart`：[スマート詳細モード](/docs/infrastructure/infrastructure-troubleshooting/troubleshoot-logs/infrastructure-agent-logging-behavior/#smart-verbose-mode)を有効にします。スマート詳細モードでは、エラーがログに記録されると、最後の`smart_level_entry_limit`デバッグメッセージがログに記録されます。

        * `debug`：エラー、警告、情報、デバッグレベルのログメッセージを表示します。

        * `trace`：すべてのログメッセージが表示されます。

          <Callout variant="important">
            トレースレベルのログ記録では、大量のデータが迅速に生成される可能性があります。問題を再現するために必要な期間のみエージェントをトレースモードで実行し、 `level: info`を設定して[エージェントを再起動し](/docs/infrastructure/new-relic-infrastructure/configuration/start-stop-restart-check-infrastructure-agent-status)、詳細ログを無効にします。あるいは、 `level` ：`smart`を設定すると、スマート詳細モードが有効になります。
          </Callout>

          <table>
            <thead>
              <tr>
                <th style={{ width: "200px" }}>
                  YMLオプション名
                </th>

                <th style={{ width: "200px" }}>
                  環境変数
                </th>

                <th>
                  タイプ
                </th>

                <th>
                  デフォルト
                </th>

                <th>
                  バージョン
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  `level`
                </td>

                <td>
                  `NRIA_LOG_LEVEL`
                </td>

                <td>
                  文字列
                </td>

                <td>
                  未設定
                </td>

                <td />
              </tr>
            </tbody>
          </table>
      </Collapser>

      <Collapser className="freq-link" id="log-format" title="形式">
        ログ出力形式を定義します。使用可能な値：

        * `text`：ログエントリごとに1行のプレーンテキスト出力。

        * `json`：ログエントリごとに1行のJSON形式出力。

          <table>
            <thead>
              <tr>
                <th style={{ width: "200px" }}>
                  YMLオプション名
                </th>

                <th style={{ width: "200px" }}>
                  環境変数
                </th>

                <th>
                  タイプ
                </th>

                <th>
                  デフォルト
                </th>

                <th>
                  バージョン
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  `format`
                </td>

                <td>
                  `NRIA_LOG_FORMAT`
                </td>

                <td>
                  文字列
                </td>

                <td>
                  `text`
                </td>

                <td>
                  [1.4.9](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-149)
                </td>
              </tr>
            </tbody>
          </table>
      </Collapser>

      <Collapser className="freq-link" id="forward" title="forward">
        エージェントログをログUIに転送できるようにします。無効にするには、この設定オプションを`false`に設定します。

        <table>
          <thead>
            <tr>
              <th style={{ width: "200px" }}>
                YMLオプション名
              </th>

              <th style={{ width: "200px" }}>
                環境変数
              </th>

              <th>
                タイプ
              </th>

              <th>
                デフォルト
              </th>

              <th>
                バージョン
              </th>
            </tr>
          </thead>

          <tbody>
            <tr>
              <td>
                `forward`
              </td>

              <td>
                `NRIA_LOG_FORWARD`
              </td>

              <td>
                boolean
              </td>

              <td>
                `false`
              </td>

              <td>
                [1.0.703](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10703)
              </td>
            </tr>
          </tbody>
        </table>
      </Collapser>

      <Collapser className="freq-link" id="stdout" title="stdout">
        デフォルトでは、すべてのログは標準出力とログファイルの両方に表示されます。標準出力のログを無効にするには、この設定オプションを`false`に設定します。

        <table>
          <thead>
            <tr>
              <th style={{ width: "200px" }}>
                YMLオプション名
              </th>

              <th style={{ width: "200px" }}>
                環境変数
              </th>

              <th>
                タイプ
              </th>

              <th>
                デフォルト
              </th>

              <th>
                バージョン
              </th>
            </tr>
          </thead>

          <tbody>
            <tr>
              <td>
                `stdout`
              </td>

              <td>
                `NRIA_LOG_STDOUT`
              </td>

              <td>
                boolean
              </td>

              <td>
                `true`
              </td>

              <td>
                [1.0.703](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10703)
              </td>
            </tr>
          </tbody>
        </table>
      </Collapser>

      <Collapser className="freq-link" id="smart_level_entry_limit" title="smart_level_entry_limit">
        `smart_level_entry_limit` エラーがログに記録されるときにログに記録される過去のデバッグメッセージの数を指します。たとえば、制限が`5`に設定されている場合、デバッグログはエラーがログに記録されるまでメモリにキャッシュされ、その時点で過去の5つのデバッグメッセージもログに記録されます。

        <Callout variant="important">
          この設定オプションは、 `level` が`smart`に設定されている場合（スマートレベルが有効な場合）にのみ使用されます。
        </Callout>

        <table>
          <thead>
            <tr>
              <th style={{ width: "200px" }}>
                YMLオプション名
              </th>

              <th style={{ width: "200px" }}>
                環境変数
              </th>

              <th>
                タイプ
              </th>

              <th>
                デフォルト
              </th>

              <th>
                バージョン
              </th>
            </tr>
          </thead>

          <tbody>
            <tr>
              <td>
                `smart_level_entry_limit`
              </td>

              <td>
                `NRIA_SMART_LEVEL_ENTRY_LIMIT`
              </td>

              <td>
                整数
              </td>

              <td>
                `1000`
              </td>

              <td>
                [1.9.0](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-190)
              </td>
            </tr>
          </tbody>
        </table>
      </Collapser>

      <Collapser className="freq-link" id="rotate" title="rotate">
        バージョン[v1.28.0](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes)以降では、組み込みのログローテーション機能を使用できます。デフォルトでは、ログローテーションは無効になっています。これを有効にするには、 `max_size_mb`オプションでログファイルの最大サイズを指定する必要があります。infrastructureエージェントのログファイルがそのサイズに達すると、現在のログファイルが新しいファイルにローテーションされます。

        ```yml
        log:
          level: info
          file: /var/log/newrelic-infra/newrelic-infra.log
          rotate:
            max_size_mb: 1000                        # Required
            max_files: 5                             # Optional
            compression_enabled: true                # Optional
            file_pattern: YYYY-MM-DD_hh-mm-ss.log    # Optional
        ```

        <CollapserGroup>
          <Collapser className="rotate-max_size_mb" id="rotate-max_size_mb" title="max_size_mb">
            `max_size_mb` infrastructureエージェントログファイルの最大サイズをメガバイト単位で指定します。ファイルがこのサイズに達すると、現在のログは新しいファイルにローテーションされます。`max_size_mb`が`0`の場合、組み込みのログローテーションは無効になります。

            <table>
              <thead>
                <tr>
                  <th style={{ width: "200px" }}>
                    YMLオプション名
                  </th>

                  <th style={{ width: "200px" }}>
                    環境変数
                  </th>

                  <th>
                    タイプ
                  </th>

                  <th>
                    デフォルト
                  </th>

                  <th>
                    バージョン
                  </th>
                </tr>
              </thead>

              <tbody>
                <tr>
                  <td>
                    `max_size_mb`
                  </td>

                  <td>
                    `NRIA_LOG_ROTATE_MAX_SIZE_MB`
                  </td>

                  <td>
                    整数
                  </td>

                  <td>
                    `0` - Disabled
                  </td>

                  <td />
                </tr>
              </tbody>
            </table>
          </Collapser>

          <Collapser className="rotate-max_files" id="rotate-max_files" title="max_files">
            `max_files` 保存されるアーカイブログファイルの数を定義します。この値を超えると、古いファイルが削除されます。`max_files`が`0`の場合、ファイル数の制限は無効になります。

            <table>
              <thead>
                <tr>
                  <th style={{ width: "200px" }}>
                    YMLオプション名
                  </th>

                  <th style={{ width: "200px" }}>
                    環境変数
                  </th>

                  <th>
                    タイプ
                  </th>

                  <th>
                    デフォルト
                  </th>

                  <th>
                    バージョン
                  </th>
                </tr>
              </thead>

              <tbody>
                <tr>
                  <td>
                    `max_files`
                  </td>

                  <td>
                    `NRIA_LOG_ROTATE_MAX_FILES`
                  </td>

                  <td>
                    整数
                  </td>

                  <td>
                    `0`
                  </td>

                  <td />
                </tr>
              </tbody>
            </table>
          </Collapser>

          <Collapser className="rotate-compression_enabled" id="rotate-compression_enabled" title="compression_enabled">
            `compression_enabled`を`true`に設定すると、ログファイルの圧縮を有効にできます。圧縮を有効にすると、ローテーションされたファイルは`gzip`形式になり、ディスク容量の使用量が少なくなります。

            <Callout variant="important">
              ログのローテーション中に圧縮が有効になっていると、特に`max_size_mb`値が`1000`より大きい場合に、エージェントのCPU使用率が増加する可能性があります。
            </Callout>

            <table>
              <thead>
                <tr>
                  <th style={{ width: "200px" }}>
                    YMLオプション名
                  </th>

                  <th style={{ width: "200px" }}>
                    環境変数
                  </th>

                  <th>
                    タイプ
                  </th>

                  <th>
                    デフォルト
                  </th>

                  <th>
                    バージョン
                  </th>
                </tr>
              </thead>

              <tbody>
                <tr>
                  <td>
                    `compression_enabled`
                  </td>

                  <td>
                    `NRIA_LOG_ROTATE_COMPRESSION_ENABLED`
                  </td>

                  <td>
                    boolean
                  </td>

                  <td>
                    `false`
                  </td>

                  <td />
                </tr>
              </tbody>
            </table>
          </Collapser>

          <Collapser className="rotate-file_pattern" id="rotate-file_pattern" title="file_pattern">
            `file_pattern` アーカイブされたログファイルの名前形式を指定します。デフォルトでは、新しいファイル名には次の名前パターンが使用されます：`original-file_YYYY-MM-DD_hh-mm-ss.log` 。

            次のtimestampフィールドを使用してファイル名パターンをカスタマイズできます。

            * `YYYY`: Year

            * `MM`: Month

            * `DD`: Day

            * `hh`: Hour

            * `mm`: Minute

            * `ss`: Secound

              エージェントは、これらのtimestampフィールドをファイルローテーションの時刻に自動的に置き換えます。例を以下に示します。

              ```yml
              log:
                level: info
                file: /var/log/newrelic-infra/newrelic-infra.log
                rotate:
                  max_size_mb: 1000
                  file_pattern: rotated.YYYY-MM-DD_hh-mm-ss.log
              ```

              <table>
                <thead>
                  <tr>
                    <th style={{ width: "200px" }}>
                      YMLオプション名
                    </th>

                    <th style={{ width: "200px" }}>
                      環境変数
                    </th>

                    <th>
                      タイプ
                    </th>

                    <th>
                      デフォルト
                    </th>

                    <th>
                      バージョン
                    </th>
                  </tr>
                </thead>

                <tbody>
                  <tr>
                    <td>
                      `file_pattern`
                    </td>

                    <td>
                      `NRIA_LOG_ROTATE_FILE_PATTERN`
                    </td>

                    <td>
                      文字列
                    </td>

                    <td>
                      `file_YYYY-MM-DD_hh-mm-ss.file_extension`
                    </td>

                    <td />
                  </tr>
                </tbody>
              </table>
          </Collapser>
        </CollapserGroup>
      </Collapser>
    </CollapserGroup>
  </Collapser>
</CollapserGroup>

<Callout variant="tip">
  infrastructureエージェントバージョン1.28.0では、ロギング設定における下位互換性が改善されました。レガシー設定とそれを新しい構造にマッピングする方法については、 [github のドキュメント](https://github.com/newrelic/infrastructure-agent/blob/master/docs/log_configuration.md)を参照してください。
</Callout>

## メトリクス変数 [#metrics]

<CollapserGroup>
  <Collapser className="freq-link" id="custom-attributes" title="custom_attributes">
    カスタムアトリビュートとは、infrastructureエージェントからのデータに注釈を付けるために使用されるキーの値のペア（他のツールのタグに似ています）です。このメタデータを使用して、エンティティをフィルタリングしたり、[結果をグループ化](/docs/infrastructure-group-results-specific-attributes)したり、データに注釈を付けたりすることができます。たとえば、マシンの環境（ステージングまたは本番）、マシンがホストするサービス（ログインサービスなど）、またはそのマシンを担当するチームなどを示すことができます。

    <Callout variant="tip">
      エージェントは、[Amazon Elastic Compute Cloud（Amazon EC2）](/docs/default-infrastructure-events-attributes#aws-ec2-attributes)タグなど、[デフォルト属性](/docs/default-infrastructure-events-attributes)の一部として環境に関する多くの詳細を収集します。
    </Callout>

    <table>
      <thead>
        <tr>
          <th style={{ width: "250px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "250px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `custom_attributes`
          </td>

          <td>
            `NRIA_CUSTOM_ATTRIBUTES`
          </td>

          <td>
            map\[string]interface\{}
          </td>
        </tr>
      </tbody>
    </table>

    カスタムアトリビュートのリストを使用して、このエージェントインスタンスからのデータに注釈を付けます。キーと値はコロン`:`（例：`KEY: VALUE`）で区切り、各キーの値のペアは改行で区切ります。キーにはスラッシュ`/`を除く有効なYAMLを使用できます。値にはスペースを含む任意のYAML文字列を指定できます。キーを`label.`で始めると、そのホストが異なるcloud環境で実行されていても、 cloudタグまたはcloudラベルがタグの組み合わせたデコレーション内でキーと対話する可能性がある場合でも、キーはそのまま残ります。対照的に、これらの環境で実行している場合や、infrastructureエージェントからのデータとクラウドモニタリングを組み合わせている場合は、 `custom_labels`に`gcp.`または`azure.`というプレフィックスが付けられる場合があります。

    YAML属性としての例：

    ```yml
    custom_attributes:
      label.environment: production
      label.service: login service
      label.team: alpha-team
    ```

    環境変数としての例：

    ```ini
    NRIA_CUSTOM_ATTRIBUTES='{"label.customAttribute_1":"SOME_ATTRIBUTE","label.customAttribute_2": "SOME_ATTRIBUTE_2"}'
    ```

    カスタムアトリビュートによるNRQLフィルタリングの例：

    ```sql
    FROM SystemSample SELECT * WHERE label.environment = 'production'
    ```
  </Collapser>

  <Collapser className="freq-link" id="enable-process-metrics" title="enable_process_metrics">
    <Callout variant="important">
      infrastructureエージェントバージョン 1.12.0以降が必要です。 2020 年7月20日より前に作成されたアカウント、または新しいガイド付きインストールを使用してインストールされたinfrastructureエージェントでは、この変数がデフォルトで有効になっています。
    </Callout>

    New Relicへの[プロセスメトリクス](/attribute-dictionary/?event=ProcessSample)の送信を有効にします。

    デフォルトでは、infrastructureエージェントはOSのプロセスに関するデータを送信しません。`metrics_process_sample_rate`が`-1`に設定されていない限り、エージェントはそのようなデータを引き続き収集します。

    すべてのOSプロセスに関するメトリクスデータをレポートするには、 `enable_process_metrics`を`true`に設定します。無効にするには、 `false`に設定します。

    すべてのプロセスデータを送信する場合、New Relicに送信されるデータの量が増加する可能性があります。監視するプロセスを調整するには、 [`include_matching_metrics`](#include-matching-metrics)または[`exclude_matching_metrics`](#exclude-matching-metrics)を設定します。

    デフォルトでは、メモリ使用量が少ないプロセスはサンプリングから除外されます。詳細については、 [disable-zero-mem-process-filter](/docs/infrastructure/install-infrastructure-agent/configuration/infrastructure-agent-configuration-settings#disable-zero-mem-process-filter)を参照してください。

    <table>
      <thead>
        <tr>
          <th style={{ width: "245px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "295px" }}>
            環境変数
          </th>

          <th style={{ width: "78px" }}>
            タイプ
          </th>

          <th style={{ width: "80px" }}>
            デフォルト
          </th>

          <th style={{ width: "80px" }}>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `enable_process_metrics`
          </td>

          <td>
            `NRIA_ENABLE_PROCESS_METRICS`
          </td>

          <td>
            boolean
          </td>

          <td>
            `false`
          </td>

          <td />
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="process-container-decoration" title="process_container_decoration">
    有効にすると、プロセスがコンテナ内で実行される場合、エージェントはプロセスサンプルをコンテナ情報でデコレーションします。

    この情報には、コンテナ ID、コンテナ名、イメージ ID、イメージ名、コンテナラベルが含まれます。

    <table>
      <thead>
        <tr>
          <th style={{ width: "245px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "295px" }}>
            環境変数
          </th>

          <th style={{ width: "78px" }}>
            タイプ
          </th>

          <th style={{ width: "80px" }}>
            デフォルト
          </th>

          <th style={{ width: "80px" }}>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `process_container_decoration`
          </td>

          <td>
            `NRIA_PROCESS_CONTAINER_DECORATION`
          </td>

          <td>
            boolean
          </td>

          <td>
            `true`
          </td>

          <td>
            1.55.0
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="include-matching-metrics" title="include_matching_metrics">
    <Callout variant="important">
      現在、この設定はOSのプロセスメトリクスにのみ適用されます。
    </Callout>

    New Relicに送信されるデータの量を制御するには、 `include_matching_metrics`を設定します。これにより、メトリクス[属性](/docs/query-your-data/nrql-new-relic-query-language/nrql-query-tutorials/query-infrastructure-dimensional-metrics-nrql#naming-conventions)の値に基づいてメトリクスデータの送信を制限できます。

    メトリクスデータを含めるには、メトリクスの属性のリテラル値または部分値を定義します。たとえば、 `process.name`が[正規表現](https://github.com/google/re2/wiki/Syntax)「`^java`」に一致するすべてのプロセスの`host.process.cpuPercent`を送信するように選択できます。

    この例では、実行可能ファイルと名前を使用してプロセスメトリクスを含めます。

    ```yml
    include_matching_metrics:          # You can combine attributes from different metrics
      process.name:
        - regex "^java"                # Include all processes starting with "java"
      process.executable:
        - "/usr/bin/python2"           # Include the Python 2.x executable
        - regex "\\System32\\svchost"  # Include all svchost executables
    ```

    いずれかの値にコマンドライン引数を含める必要がある場合は、 [`strip_command_line`](#strip-command-line)をfalseに設定します（機密情報の漏洩を防ぐために、infrastructureエージェントはデフォルトでCLI引数を削除します）。

    同じアイテムに`include_matching_metrics`と`exclude_matching_metrics`の両方が存在する場合は、前者が優先されます。

    `include_matching_metrics` を[Kubernetesインテグレーション](/docs/integrations/kubernetes-integration)の環境変数として設定するには、それを`env:`オブジェクト内のマニフェストに追加します。

    ```yml
    env:
      - name: NRIA_INCLUDE_MATCHING_METRICS
        value: |
          process.name:
            - regex "^java"
          process.executable:
            - "/usr/bin/python2"
            - regex "\\System32\\svchost"
    ```

    デフォルト

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `include_matching_metrics`
          </td>

          <td>
            `NRIA_INCLUDE_MATCHING_METRICS`
          </td>

          <td>
            metric.attribute:

            \- regex &quot;pattern&quot;

            \- &quot;string&quot;

            \- &quot;string-with-wildcard\*&quot;
          </td>

          <td />

          <td />
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="exclude-matching-metrics" title="exclude_matching_metrics">
    <Callout variant="important">
      現在、この設定はOSのプロセスメトリクスにのみ適用されます。
    </Callout>

    New Relicに送信されるデータの量を制御するには、 `exclude_matching_metrics`を設定します。これにより、メトリクス [属性](/docs/nrql/using-nrql/query-infrastructure-dimensional-metrics-nrql/#naming-conventions)の値に基づいてメトリクスデータの送信を制限できます。

    メトリクスデータを除外するには、メトリクスの属性のいずれかに対してリテラル値または部分値を定義します。たとえば、 `process.name`が[正規表現](https://github.com/google/re2/wiki/Syntax)「`^java`」に一致するすべてのプロセスの`host.process.cpuPercent`を送信しないように選択できます。

    この例では、実行可能ファイルと名前を使用してプロセスメトリクスを除外します。

    ```yml
    exclude_matching_metrics:          # You can combine attributes from different metrics
      process.name:
        - regex "^java"                # Exclude all processes starting with "java"
      process.executable:
        - "/usr/bin/python2"           # Exclude the Python 2.x executable
        - regex "\\System32\\svchost"  # Exclude all svchost executables
    ```

    `exclude_matching_metrics`を[Kubernetesインテグレーション](/docs/kubernetes-pixie/kubernetes-integration/get-started/introduction-kubernetes-integration/)の環境変数として設定するには、それを`env:`オブジェクト内のマニフェストに追加します。

    ```yml
    env:
      - name: NRIA_EXCLUDE_MATCHING_METRICS
        value: |
          process.name:
            - regex "^java"
          process.executable:
            - "/usr/bin/python2"
            - regex "\\System32\\svchost"
    ```

    デフォルト

    1.57.0

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `exclude_matching_metrics`
          </td>

          <td>
            `NRIA_EXCLUDE_MATCHING_METRICS`
          </td>

          <td>
            metric.attribute:

            \- regex &quot;pattern&quot;

            \- &quot;string&quot;

            \- &quot;string-with-wildcard\*&quot;
          </td>

          <td />

          <td />
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="network-interface-filters" title="network_interface_filters">
    ネットワークインターフェースフィルター設定を使用すると、未使用または使用する予定のないネットワークインターフェースをinfrastructureエージェントから非表示にすることができます。これにより、リソースの使用量、作業、データ内のノイズを削減できます。

    <Callout variant="important">
      この構成設定では環境変数はサポートされていません。
    </Callout>

    設定では、次のいずれかのパターンに従う特定の文字列または数字の並びで始まるインターフェースを検索できる単純なパターンマッチングメカニズムが使用されます。

    * `{name}[other characters]``prefix`オプションを使用して名前を指定します

    * `[number]{name}[other characters]``index-1`オプションを使用して名前を指定します

      New Relic Infrastructureは、 [Linux](#filters-linux)と[Windows](#filters-windows)両方で使用できる、厳選されたデフォルトリストを実装しています（編集可能）。

      <table>
        <thead>
          <tr>
            <th style={{ width: "200px" }}>
              YMLオプション名
            </th>

            <th style={{ width: "200px" }}>
              環境変数
            </th>

            <th>
              タイプ
            </th>

            <th>
              デフォルト
            </th>

            <th>
              バージョン
            </th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>
              `network_interface_filters`
            </td>

            <td>
              サポートされていない
            </td>

            <td>
              map\[string]\[]string
            </td>

            <td />

            <td>
              1.0.220
            </td>
          </tr>
        </tbody>
      </table>

      <CollapserGroup>
        <Collapser className="freq-link" id="filters-linux" title="Linux">
          Linuxのデフォルトのネットワークインタフェースフィルター：

          * `dummy`、 `lo`、 `vmnet`、 `sit`、 `tun`、 `tap`で始まるネットワークインタフェース、または `veth`

          * `tun`含むネットワークインタフェース、または `tap`

            次の例（設定ファイルに追加）は、デフォルトのフィルターを上書きします。これにより、 `dummy`または`lo`で始まるネットワークインターフェース、または数字の並びが先頭に付いて他の文字が続く`tun`を含むネットワークインターフェースは無視されます。

            ```yml
            network_interface_filters:
              prefix:
                - dummy
                - lo
              index-1:
                - tun
            ```
        </Collapser>

        <Collapser className="freq-link" id="filters-windows" title="Windows">
          Windowsのデフォルトのネットワークインタフェースフィルター：

          * `Loop`、 `isatap`で始まるネットワークインタフェース、または `Local`

            次の例（設定ファイルに追加）は、デフォルトのフィルターを上書きします。これにより、 `Loop`で始まるネットワークインターフェースは無視されます。

            ```yml
            network_interface_filters:
              prefix:
                - Loop
            ```
        </Collapser>
      </CollapserGroup>
  </Collapser>

  <Collapser className="freq-link" id="disable-zero-mem-process-filter" title="disable_zero_mem_process_filter">
    `ZeroRSSFilter`は、メモリを使用していないプロセスをサンプリングの対象から除外します。エージェントがこれらのプロセスを`ProcessSample`に含めるように、フィルターを無効にします。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `disable_zero_mem_process_filter`
          </td>

          <td>
            `NRIA_DISABLE_ZERO_MEM_PROCESS_FILTER`
          </td>

          <td>
            boolean
          </td>

          <td>
            `false`
          </td>

          <td>
            1.0.832
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

## プラグイン変数

<Callout variant="tip">
  [`DisableAllPlugins`](#disable-all-plugins)を`true`に設定することですべての変数をすぐに無効にし、必要なオプションのみをオンにすることができます。
</Callout>

<CollapserGroup>
  <Collapser className="freq-link" id="disable-all-plugins" title="disable_all_plugins">
    すべてのプラグインを無効にするには、このオプションを`true`に設定します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `disable_all_plugins`
          </td>

          <td>
            `NRIA_DISABLE_ALL_PLUGINS`
          </td>

          <td>
            boolean
          </td>

          <td>
            `false`
          </td>

          <td>
            [1.2.1](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-121)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="cloud-security-group-refresh-sec" title="cloud_security_group_refresh_sec">
    `CloudSecurityGroups`プラグインのサンプリング期間（秒）。最小値は`30`です。無効にするには、 `-1`に設定します。

    <Callout variant="important">
      このプラグインは、エージェントがAWSインスタンスで実行されている場合にのみ有効です。
    </Callout>

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `cloud_security_group_refresh_sec`
          </td>

          <td>
            `NRIA_CLOUD_SECURITY_GROUP_REFRESH_SEC`
          </td>

          <td>
            int64
          </td>

          <td>
            `60`
          </td>

          <td>
            [1.0.692](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10703)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="daemontools-interval-sec" title="daemontools_interval_sec">
    `Daemontools`プラグインのサンプリング期間（秒）。最小値は`10`です。無効にするには、 `-1`に設定します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `daemontools_interval_sec`
          </td>

          <td>
            `NRIA_DAEMONTOOLS_INTERVAL_SEC`
          </td>

          <td>
            int64
          </td>

          <td>
            `15`
          </td>

          <td>
            [1.0.316](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10316)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="dpkg-interval-sec" title="dpkg_interval_sec">
    `Dpkg`プラグインのサンプリング期間（秒）。最小値は`30`です。無効にするには、 `-1`に設定します。パラメーターが設定ファイルで明示的に設定されていない場合は、 [`DisableAllPlugins`](#disable-all-plugins)を`true`に設定して無効にすることができます。

    <Callout variant="important">
      [`root`または`privileged`実行モード](/docs/infrastructure/install-configure-infrastructure/linux-installation/linux-agent-running-modes)および[Debianベースのディストリビューション](/docs/infrastructure/new-relic-infrastructure/installation/install-infrastructure-linux#debian-based-root)でのみ有効です。
    </Callout>

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `dpkg_interval_sec`
          </td>

          <td>
            `NRIA_DPKG_INTERVAL_SEC`
          </td>

          <td>
            int64
          </td>

          <td>
            `30`
          </td>

          <td>
            [1.0.316](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10316)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="facter-interval-sec" title="facter_interval_sec">
    `Facter`プラグインのサンプリング期間（秒）。最小値は`30`です。無効にするには、 `-1`に設定します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `facter_interval_sec`
          </td>

          <td>
            `NRIA_FACTER_INTERVAL_SEC`
          </td>

          <td>
            int64
          </td>

          <td>
            `30`
          </td>

          <td>
            [1.0.316](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10316)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="kernel-modules-refresh-sec" title="kernel_modules_refresh_sec">
    `KernelModules`プラグインのサンプリング期間（秒）。最小値は`10`です。無効にするには、 `-1`に設定します。

    <Callout variant="important">
      `kernel_modules_refresh_sec` [`root`または`privileged`実行モード](/docs/infrastructure/install-configure-infrastructure/linux-installation/linux-agent-running-modes)でのみ有効です。
    </Callout>

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `kernel_modules_refresh_sec`
          </td>

          <td>
            `NRIA_KERNEL_MODULES_REFRESH_SEC`
          </td>

          <td>
            int64
          </td>

          <td>
            `10`
          </td>

          <td>
            1.0.755
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="network-interface-interval-sec" title="network_interface_interval_sec">
    `NetworkInterface`プラグインのサンプリング期間（秒）。最小値は`30`です。無効にするには、 `-1`に設定します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `network_interface_interval_sec`
          </td>

          <td>
            `NRIA_NETWORK_INTERFACE_INTERVAL_SEC`
          </td>

          <td>
            int64
          </td>

          <td>
            `60`
          </td>

          <td>
            1.0.329
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="rpm-interval-sec" title="rpm_interval_sec">
    `Rpm`プラグインのサンプリング期間（秒）。最小値は`30`です。無効にするには、 `-1`に設定します。

    <Callout variant="important">
      `rpm_interval_sec` RedHat、RedHat AWS、またはSUSEディストリビューションでは、エージェントが[ルートモードまたは特権モード](/docs/infrastructure/install-configure-infrastructure/linux-installation/linux-agent-running-modes)で実行される場合にのみ有効です。
    </Callout>

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `rpm_interval_sec`
          </td>

          <td>
            `NRIA_RPM_INTERVAL_SEC`
          </td>

          <td>
            int64
          </td>

          <td>
            `30`
          </td>

          <td>
            [1.0.316](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10316)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="selinux-interval-sec" title="selinux_interval_sec">
    `SELinux`プラグインのサンプリング期間（秒）。最小値は`30`です。無効にするには、 `-1`に設定します。`SelinuxEnableSemodule`がfalseに設定されている場合、このオプションは無視されます。詳細については、 [`SELinux`モジュールの無効化](/docs/infrastructure/new-relic-infrastructure/troubleshooting/reduce-infrastructure-agents-cpu-footprint)に関するトラブルシューティングドキュメントを参照してください。

    <Callout variant="important">
      `SELinux` エージェントが[ルートモード](/docs/infrastructure/install-configure-infrastructure/linux-installation/linux-agent-running-modes)で実行されている場合にのみ有効です。
    </Callout>

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `selinux_interval_sec`
          </td>

          <td>
            `NRIA_SELINUX_INTERVAL_SEC`
          </td>

          <td>
            int64
          </td>

          <td>
            `30`
          </td>

          <td>
            [1.0.316](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10316)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="sshd-config-refresh-sec" title="sshd_config_refresh_sec">
    `Sshd`プラグインのサンプリング期間（秒）。最小値は`10`です。無効にするには、 `-1`に設定します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `sshd_config_refresh_sec`
          </td>

          <td>
            `NRIA_SSHD_CONFIG_REFRESH_SEC`
          </td>

          <td>
            int64
          </td>

          <td>
            `15`
          </td>

          <td>
            1.0.755
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="supervisor-interval-sec" title="supervisor_interval_sec">
    `Supervisor`プラグインのサンプリング期間（秒）。最小値は`10`です。無効にするには、 `-1`に設定します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `supervisor_interval_sec`
          </td>

          <td>
            `NRIA_SUPERVISOR_INTERVAL_SEC`
          </td>

          <td>
            int64
          </td>

          <td>
            `15`
          </td>

          <td>
            [1.0.316](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10316)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="sysctl-interval-sec" title="sysctl_interval_sec">
    `Sysctl`プラグインのサンプリング期間（秒）。最小値は`30`です。無効にするには、 `-1`に設定します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `sysctl_interval_sec`
          </td>

          <td>
            `NRIA_SYSCTL_INTERVAL_SEC`
          </td>

          <td>
            int64
          </td>

          <td>
            `60`
          </td>

          <td>
            [1.0.316](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10316)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="systemd-interval-sec" title="systemd_interval_sec">
    `Systemd`プラグインのサンプリング期間（秒）。最小値は`10`です。無効にするには、 `-1`に設定します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `systemd_interval_sec`
          </td>

          <td>
            `NRIA_SYSTEMD_INTERVAL_SEC`
          </td>

          <td>
            int64
          </td>

          <td>
            `30`
          </td>

          <td>
            [1.0.316](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10316)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="sysvinit-interval-sec" title="sysvinit_interval_sec">
    `sysv`プラグインのサンプリング期間（秒）。最小値は`10`です。無効にするには、 `-1`に設定します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `sysvinit_interval_sec`
          </td>

          <td>
            `NRIA_SYSVINIT_INTERVAL_SEC`
          </td>

          <td>
            int64
          </td>

          <td>
            `30`
          </td>

          <td>
            [1.0.316](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10316)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="upstart-interval-sec" title="upstart_interval_sec">
    `Upstart`プラグインのサンプリング期間（秒）。最小値は`10`です。無効にするには、 `-1`に設定します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `upstart_interval_sec`
          </td>

          <td>
            `NRIA_UPSTART_INTERVAL_SEC`
          </td>

          <td>
            int64
          </td>

          <td>
            `30`
          </td>

          <td>
            [1.0.316](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10316)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="users-refresh-sec" title="users_refresh_sec">
    `Users`プラグインのサンプリング期間（秒）。最小値は`10`です。無効にするには、 `-1`に設定します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `users_refresh_sec`
          </td>

          <td>
            `NRIA_USERS_REFRESH_SEC`
          </td>

          <td>
            int64
          </td>

          <td>
            `30`
          </td>

          <td>
            1.0.755
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="supervisor-rpc-sock" title="supervisor_rpc_sock">
    [スーパーバイザ](http://www.supervisord.org/)ソケットの場所。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `supervisor_rpc_sock`
          </td>

          <td>
            `NRIA_SUPERVISOR_RPC_SOCK`
          </td>

          <td>
            文字列
          </td>

          <td>
            `/var/run/supervisor.sock`
          </td>

          <td>
            1.0.2
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="facter-home-dir" title="facter_home_dir">
    [PuppetのFacter](https://puppet.com/docs/puppet/latest/puppet_index.html)の`HOME`環境変数を設定します。設定されていない場合は、現在のユーザーのホームディレクトリがデフォルトになります。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `facter_home_dir`
          </td>

          <td>
            `NRIA_FACTER_HOME_DIR`
          </td>

          <td>
            文字列
          </td>

          <td />

          <td>
            [1.1.7](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-117)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

## プロキシ変数

infrastructureエージェントバージョン1.3.1以降の場合、プロキシ設定の優先順位は次のとおりです。

* `NRIA_PROXY`
* `proxy`
* `HTTP_PROXY`
* `HTTPS_PROXY`

<CollapserGroup>
  <Collapser className="freq-link" id="proxy" title="proxy">
    システムによっては、設定されているファイアウォールルールにより、エージェントがNew Relicと通信するためにプロキシの使用が必要になる場合があります。その場合は、プロキシURLをhttps\://user:password\@hostname:portの形式で設定してください。HTTPまたはHTTPSが使用できます。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `proxy`
          </td>

          <td>
            `NRIA_PROXY`
          </td>

          <td>
            文字列
          </td>

          <td>
            空
          </td>

          <td>
            [1.0.308](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10308)
          </td>
        </tr>
      </tbody>
    </table>

    例:

    ```
    https://proxy_user:access_10@proxy_01:1080
    ```
  </Collapser>

  <Collapser className="freq-link" id="ignore-system-proxy" title="ignore_system_proxy">
    `true`に設定すると、 `HTTPS_PROXY`および`HTTP_PROXY`環境変数は無視されます。この設定は、エージェントが既存のシステムプロキシをスキップしてメトリクスコレクターに直接接続する必要がある場合に便利です。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `ignore_system_proxy`
          </td>

          <td>
            `NRIA_IGNORE_SYSTEM_PROXY`
          </td>

          <td>
            boolean
          </td>

          <td>
            `false`
          </td>

          <td>
            [1.0.1002](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-101002)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="ca-bundle-dir" title="CA_BUNDLE_DIR">
    `HTTPS_PROXY`オプションが自己署名証明書を持つプロキシを参照する場合、このオプションはプロキシ証明書が使用可能なディレクトリへのパスを指定します。ディレクトリ内の証明書は`.pem`拡張子である必要があります。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `ca_bundle_dir`
          </td>

          <td>
            `NRIA_CA_BUNDLE_DIR`
          </td>

          <td>
            文字列
          </td>

          <td />

          <td>
            [1.0.296](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10296)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="ca-bundle-file" title="CA_BUNDLE_FILE">
    `HTTPS_PROXY`オプションが自己署名証明書を持つプロキシを参照する場合、このオプションは証明書ファイルへのパスを指定します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `ca_bundle_file`
          </td>

          <td>
            `NRIA_CA_BUNDLE_FILE`
          </td>

          <td>
            文字列
          </td>

          <td />

          <td>
            [1.0.296](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10296)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="proxy-validate-certificates" title="proxy_validate_certificates">
    `true`に設定すると、プロキシがHTTPS接続を使用するように設定されている場合にのみ機能します：

    * HTTPSプロキシに有効な証明機関からの証明書がある場合。

    * `ca_bundle_file`または`ca_bundle_dir`設定プロパティに HTTPS プロキシ証明書が含まれている場合。

      <table>
        <thead>
          <tr>
            <th style={{ width: "200px" }}>
              YMLオプション名
            </th>

            <th style={{ width: "200px" }}>
              環境変数
            </th>

            <th>
              タイプ
            </th>

            <th>
              デフォルト
            </th>

            <th>
              バージョン
            </th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>
              `proxy_validate_certificates`
            </td>

            <td>
              `NRIA_PROXY_VALIDATE_CERTIFICATES`
            </td>

            <td>
              boolean
            </td>

            <td>
              `false`
            </td>

            <td>
              1.3.0
            </td>
          </tr>
        </tbody>
      </table>
  </Collapser>

  <Collapser className="freq-link" id="proxy-config-plugin" title="proxy_config_plugin">
    次のプロキシ設定情報をインベントリとして送信します。

    * `HTTPS_PROXY`

    * `HTTP_PROXY`

    * `proxy ca_bundle_dir`

    * `ca_bundle_file`

    * `ignore_system_proxy`

    * `proxy_validate_certificates`

      <table>
        <thead>
          <tr>
            <th style={{ width: "200px" }}>
              YMLオプション名
            </th>

            <th style={{ width: "200px" }}>
              環境変数
            </th>

            <th>
              タイプ
            </th>

            <th>
              デフォルト
            </th>

            <th>
              バージョン
            </th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>
              `proxy_config_plugin`
            </td>

            <td>
              `NRIA_PROXY_CONFIG_PLUGIN`
            </td>

            <td>
              boolean
            </td>

            <td>
              `true`
            </td>

            <td>
              1.3.0
            </td>
          </tr>
        </tbody>
      </table>
  </Collapser>
</CollapserGroup>

プロキシ設定で問題が発生した場合は、「[プロキシに関するトラブルシューティング](/docs/infrastructure/new-relic-infrastructure/troubleshooting/https-proxy-configuration-missing)」を参照してください。

## サンプル変数

<CollapserGroup>
  <Collapser className="freq-link" id="metrics-network-sample-rate" title="metrics_network_sample_rate">
    ネットワークサンプルのサンプルレート（秒）。最小値は`10`です。無効にするには、 `-1`に設定します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `metrics_network_sample_rate`
          </td>

          <td>
            `NRIA_METRICS_NETWORK_SAMPLE_RATE`
          </td>

          <td>
            整数
          </td>

          <td>
            `10`
          </td>

          <td>
            [1.0.308](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10308)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="metrics-process-sample-rate" title="metrics_process_sample_rate">
    プロセスサンプルのサンプルレート（秒）。最小値は`20`です。プロセスサンプルを完全に無効にするには、 `metrics_process_sample_rate`を`-1`に設定します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `metrics_process_sample_rate`
          </td>

          <td>
            `NRIA_METRICS_PROCESS_SAMPLE_RATE`
          </td>

          <td>
            整数
          </td>

          <td>
            `20`
          </td>

          <td>
            [1.0.308](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10308)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="metrics-storage-sample-rate" title="metrics_storage_sample_rate">
    ストレージサンプルのサンプルレート（秒）。最小値は`5`です。無効にするには、 `-1`に設定します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `metrics_storage_sample_rate`
          </td>

          <td>
            `NRIA_METRICS_STORAGE_SAMPLE_RATE`
          </td>

          <td>
            整数
          </td>

          <td>
            `20`
          </td>

          <td>
            [1.0.308](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10308)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="metrics-system-sample-rate" title="metrics_system_sample_rate">
    システムサンプルのサンプルレート（秒）。最小値は`5`です。無効にするには、 `-1`に設定します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `metrics_system_sample_rate`
          </td>

          <td>
            `NRIA_METRICS_SYSTEM_SAMPLE_RATE`
          </td>

          <td>
            整数
          </td>

          <td>
            `5`
          </td>

          <td>
            [1.0.308](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10308)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="metrics-nfs-sample-rate" title="metrics_nfs_sample_rate">
    NFSストレージサンプルのサンプルレート（秒）。最小値は`5`です。無効にするには、 `-1`に設定します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `metrics_nfs_sample_rate`
          </td>

          <td>
            `NRIA_METRICS_NFS_SAMPLE_RATE`
          </td>

          <td>
            整数
          </td>

          <td>
            `20`
          </td>

          <td>
            [1.5.40](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-1540)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="detailed-nfs" title="detailed_nfs">
    詳細なNFSメトリクス。有効にすると、エージェントはNFSメトリクスの完全なリストを提供します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `detailed_nfs`
          </td>

          <td>
            `NRIA_DETAILED_NFS`
          </td>

          <td>
            boolean
          </td>

          <td>
            `false`
          </td>

          <td>
            [1.5.40](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-1540)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  ## NTPオフセット変数

  `ntp_metrics` 時間オフセットメトリクスを設定するために使用されるキーの値マップ。有効にすると、NTPホストリストが提供されている場合、エージェントはホストの`ntp offset`メトリクス（秒）を提供します。この値に応じて、指定されたNTPホストプールに対し、`interval`分ごとにチェックされます（デフォルトおよび最小値は 15 分）。間隔の間に、最後の既知のオフセットが報告されます。報告されたオフセットが数秒を超える場合、アラート条件、NRQLクエリ、ダッシュボードのデータギャップに問題が発生する可能性があります。

  YAML属性としての例：

  ```yml
  ntp_metrics:
    enabled: true
    pool:
      - time.cloudflare.com
      - time.google.com
    interval: 15
    timeout: 10
  ```

  環境変数としての例：

  ```ini
  NRIA_NTP_METRICS_POOL='time.cloudflare.com,time.google.com'
  NRIA_NTP_METRICS_ENABLED='true'
  NRIA_NTP_METRICS_INTERVAL='15'
  NRIA_NTP_METRICS_TIMEOUT='10'
  ```

  <Collapser className="freq-link" id="ntp-enabled" title="ntp_metrics.enabled">
    NTPオフセットメトリクスを有効または無効にするフラグ。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `enabled`
          </td>

          <td>
            `NRIA_NTP_METRICS_ENABLED`
          </td>

          <td>
            boolean
          </td>

          <td>
            `false`
          </td>

          <td>
            [1.33.0](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-1330)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="ntp-pool" title="ntp_metrics.pool">
    NTPホストのリストを定義します。複数のホストが定義されている場合、それらすべてが照会されることになり、その平均値となるメトリクスが報告されます。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `pool`
          </td>

          <td>
            `NRIA_NTP_METRICS_POOL`
          </td>

          <td>
            \[]string
          </td>

          <td>
            空。[パブリックNTPサーバー](https://timetoolsltd.com/information/public-ntp-server/)を確認してください。
          </td>

          <td>
            [1.33.0](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-1330)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="ntp-interval" title="ntp_metrics.interval">
    指定されたプールからNTPオフセットを要求する間隔を分単位で定義します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `interval`
          </td>

          <td>
            `NRIA_NTP_METRICS_INTERVAL`
          </td>

          <td>
            整数
          </td>

          <td>
            `15`
          </td>

          <td>
            [1.33.0](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-1330)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="ntp-timeout" title="ntp_metrics.timeout">
    NTPホストへのrequestsのタイムアウトを秒単位で定義します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `timeout`
          </td>

          <td>
            `NRIA_NTP_METRICS_TIMEOUT`
          </td>

          <td>
            整数
          </td>

          <td>
            `10`
          </td>

          <td>
            [1.33.0](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-1330)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

## セキュリティ変数

<CollapserGroup>
  <Collapser className="freq-link" id="selinux-enable-semodule" title="selinux_enable_semodule">
    SEModuleを使用してインストールされたポリシーモジュールのバージョンを取得します。無効にすると、SELinuxプラグインはSEStatusのみを使用してステータスを取得します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `selinux_enable_semodule`
          </td>

          <td>
            `NRIA_SELINUX_ENABLE_SEMODULE`
          </td>

          <td>
            boolean
          </td>

          <td>
            `true`
          </td>

          <td>
            1.0.864
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="strip-command-line" title="strip_command_line">
    `true`の場合、エージェントは`ProcessSample`の`commandLine`属性からコマンド引数を削除します。

    <Callout variant="tip">
      これは機密情報の漏洩を防ぐためのセキュリティ対策です。
    </Callout>

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `strip_command_line`
          </td>

          <td>
            `NRIA_STRIP_COMMAND_LINE`
          </td>

          <td>
            boolean
          </td>

          <td>
            `true`
          </td>

          <td>
            1.0.149
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

## ステータスエンドポイント変数

<CollapserGroup>
  <Collapser className="freq-link" id="status-server-enabled" title="status_server_enabled">
    ローカルの健全性情報を提供するエージェント上のステータスサーバーを有効にします。利用可能なエンドポイントは次のとおりです。

    メインステータスエンドポイントの例（エラーなし）：

    ```bash
    curl http://localhost:8003/v1/status
    [output] {
    [output]   "checks": {
    [output]     "endpoints": [
    [output]       {
    [output]         "url": "https://infrastructure-command-api.newrelic.com/agent_commands/v1/commands",
    [output]         "reachable": true
    [output]       },
    [output]       {
    [output]         "url": "https://infra-api.newrelic.com/infra/v2/metrics",
    [output]         "reachable": true
    [output]       },
    [output]       {
    [output]         "url": "https://identity-api.newrelic.com/identity/v1",
    [output]         "reachable": true
    [output]       },
    [output]       {
    [output]         "url": "https://infra-api.newrelic.com/inventory",
    [output]         "reachable": true
    [output]       }
    [output]     ]
    [output]   },
    [output]   "config": {
    [output]     "reachability_timeout": "10s"
    [output]   }
    [output] }
    ```

    メインステータスエンドポイント（エラーあり）：

    ```bash
    curl http://localhost:8003/v1/status
    [output] {
    [output]   "checks": {
    [output]     "endpoints": [
    [output]       {
    [output]         "url": "https://staging-infra-api.newrelic.com/infra/v2/metrics",
    [output]         "reachable": false,
    [output]         "error": "endpoint check timeout exceeded"
    [output]       },
    [output]       {
    [output]         "url": "https://infra-api.newrelic.com/infra/v2/metrics",
    [output]         "reachable": true
    [output]       },
    [output]       {
    [output]         "url": "https://identity-api.newrelic.com/identity/v1",
    [output]         "reachable": true
    [output]       },
    [output]       {
    [output]         "url": "https://infra-api.newrelic.com/inventory",
    [output]         "reachable": true
    [output]       }
    [output]     ]
    [output]   },
    [output]   "config": {
    [output]     "reachability_timeout": "10s"
    [output]   }
    [output] }
    ```

    エラーエンドポイントの例：

    ```bash
    curl http://localhost:18003/v1/status/errors
    [output] {
    [output]   "checks": {
    [output]     "endpoints": [
    [output]       {
    [output]         "url": "https://staging-infra-api.newrelic.com/infra/v2/metrics",
    [output]         "reachable": false,
    [output]         "error": "endpoint check timeout exceeded"
    [output]       }
    [output]     ]
    [output]   },
    [output]   "config": {
    [output]     "reachability_timeout": "10s"
    [output]   }
    [output] }
    ```

    これはメインステータスエンドポイントに似ていますが、エラーのあるものだけに絞り込みます。

    エンティティエンドポイントの例：

    ```bash
    curl http://localhost:8003/v1/status/entity
    [output] {
    [output]   "guid":"MMMMNjI0NjR8SU5GUkF8TkF8ODIwMDg3MDc0ODE0MTUwNTMy",
    [output]   "key":"your-host-name"
    [output] }
    ```

    エージェント/ホストエンティティに関する情報を返します。エージェントがエージェント/ホストエンティティに関する情報をまだ持っていない場合は、応答ステータスコード「*204*」（「コンテンツなし」）が返されます。したがって、エージェントがエンティティデータを提供するまでに数回のrequestsが必要になる場合があります。

    <Callout variant="important">
      ガイド付きインストールを使用する場合、この設定はデフォルトで有効になります。これは、エージェントのインストレーションが成功したことを確認するのに役立ちます。
    </Callout>

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `status_server_enabled`
          </td>

          <td>
            `NRIA_STATUS_SERVER_ENABLED`
          </td>

          <td>
            boolean
          </td>

          <td>
            `false`
          </td>

          <td>
            1.19.0
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="status-server-port" title="status_server_port">
    ステータスサーバーエンドポイントのポートを定義します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `status_server_port`
          </td>

          <td>
            `NRIA_STATUS_SERVER_PORT`
          </td>

          <td>
            整数
          </td>

          <td>
            `8003`
          </td>

          <td>
            1.19.0
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

## Windows変数

<CollapserGroup>
  <Collapser className="freq-link" id="windows-services-refresh-sec" title="windows_services_refresh_sec">
    Windows サービスプラグインのサンプリング期間（秒）。最小値は`10`です。無効にするには、 `-1`に設定します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `windows_services_refresh_sec`
          </td>

          <td>
            `NRIA_WINDOWS_SERVICES_REFRESH_SEC`
          </td>

          <td>
            int64
          </td>

          <td>
            `30`
          </td>

          <td>
            [1.0.755](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10775)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="windows-updates-refresh-sec" title="windows_updates_refresh_sec">
    Windows更新プラグインのサンプリング期間（秒）。最小値は`10`です。無効にするには、 `-1`に設定します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `windows_updates_refresh_sec`
          </td>

          <td>
            `NRIA_WINDOWS_UPDATES_REFRESH_SEC`
          </td>

          <td>
            int64
          </td>

          <td>
            `60`
          </td>

          <td>
            [1.0.755](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10775)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="app-data-dir" title="app_data_dir">
    プログラムファイルディレクトリとは異なるパスにデータを保存するパスを定義します。

    * `%AppDir%/data`：デルタデータを保存するために使用されます

    * `%AppDir%/user_data`：ユーザーが生成したJSONファイル用の外部ディレクトリ

    * `%AppDir%/newrelic-infra.log`：ログファイル設定オプションが定義されていない場合は、このディレクトリパスがデフォルトとして使用されます。

      <table>
        <thead>
          <tr>
            <th style={{ width: "200px" }}>
              YMLオプション名
            </th>

            <th style={{ width: "200px" }}>
              環境変数
            </th>

            <th>
              タイプ
            </th>

            <th>
              デフォルト
            </th>

            <th>
              バージョン
            </th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>
              `app_data_dir`
            </td>

            <td>
              `NRIA_APP_DATA_DIR`
            </td>

            <td>
              文字列
            </td>

            <td>
              Windows： `env(ProgramData)\New Relic\newrelic-infra`

              Linux：該当なし
            </td>

            <td>
              [1.0.755](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10775)
            </td>
          </tr>
        </tbody>
      </table>
  </Collapser>

  <Collapser className="freq-link" id="enable-win-update-plugin" title="enable_win_update_plugin">
    ホストにインストールされている緊急修正プログラムのリストを取得するWindows更新プラグインを有効にします。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `enable_win_update_plugin`
          </td>

          <td>
            `NRIA_ENABLE_WIN_UPDATE_PLUGIN`
          </td>

          <td>
            boolean
          </td>

          <td>
            `false`
          </td>

          <td>
            1.0.274
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="legacy-storage-sampler" title="legacy_storage_sampler">
    `true`に設定すると、エージェントはWindows WMI（Windowsのメトリクスを取得するエージェントのレガシーメソッド。例： `StorageSampler`）の使用が強制され、新しいメソッド（PDH ライブラリを使用するもの）が無効になります。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `legacy_storage_sampler`
          </td>

          <td>
            `NRIA_LEGACY_STORAGE_SAMPLER`
          </td>

          <td>
            boolean
          </td>

          <td />

          <td>
            [1.0.1051](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-101051)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="win-process-priority-class" title="win_process_priority_class">
    この設定オプションを使用すると、 `newrelic-infra.exe`プロセスの優先度を次のいずれかの値に上げることができます。

    * `Normal`

    * `Idle`

    * `High`

    * `RealTime`

    * `BelowNormal`

    * `AboveNormal`

      <table>
        <thead>
          <tr>
            <th style={{ width: "200px" }}>
              YMLオプション名
            </th>

            <th style={{ width: "200px" }}>
              環境変数
            </th>

            <th>
              タイプ
            </th>

            <th>
              デフォルト
            </th>

            <th>
              バージョン
            </th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>
              `win_process_priority_class`
            </td>

            <td>
              `NRIA_WIN_PROCESS_PRIORITY_CLASS`
            </td>

            <td>
              文字列
            </td>

            <td />

            <td>
              1.0.989
            </td>
          </tr>
        </tbody>
      </table>

      例:

      ```
      Normal
      ```
  </Collapser>

  <Collapser className="freq-link" id="win-removable-drives" title="win_removable_drives">
    ドライブ「`A:`」および「`B:`」がリムーバブルドライブとしてマップされている場合、Windowsエージェントがそれらのドライブを報告できるようにします。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `win_removable_drives`
          </td>

          <td>
            `NRIA_WIN_REMOVABLE_DRIVES`
          </td>

          <td>
            boolean
          </td>

          <td>
            `true`
          </td>

          <td>
            [1.3.1](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-131)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="win-network-interface-v2" title="win_network_interface_v2">
    有効にすると、 Windowsエージェントはネットワークメトリクスに`GetIfEntry`（32 ビットカウンター）の代わりに`GetIfEntry2`（64 ビットカウンター）を使用します。これにより、32 ビットカウンターがオーバーフローする可能性がある高帯域幅インターフェースのネットワーク統計がより正確になります。

    <Callout variant="tip">
      このフラグは下位互換性のために残されており、将来のリリースで削除される可能性があります。
    </Callout>

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `win_network_interface_v2`
          </td>

          <td>
            `NRIA_WIN_NETWORK_INTERFACE_V2`
          </td>

          <td>
            boolean
          </td>

          <td>
            `false`
          </td>

          <td>
            [1.71.4](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-1714)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="wmi_proc_data" title="wmi_proc_data">
    trueに設定すると、WMIからプロセス情報が取得され、制限された環境でのクエリアクセスチェックがスキップされます。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            デフォルト
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `enable_wmi_proc_data`
          </td>

          <td>
            `NRIA_ENABLE_WMI_PROC_DATA`
          </td>

          <td>
            boolean
          </td>

          <td>
            `false`
          </td>

          <td>
            [1.3.1](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-1420)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

## HttpClient

バックエンド通信に使用するHTTPクライアントを設定します。

<CollapserGroup>
  <Collapser className="freq-link" id="http-headers" title="http_headers">
    New Relicバックエンドへのすべてのrequestsに含めるカスタムHTTPヘッダー。

    ```yml
    http:
      headers:
        "Proxy-Authorization": "myToken"
    ```

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            YMLオプション名
          </th>

          <th style={{ width: "200px" }}>
            環境変数
          </th>

          <th>
            タイプ
          </th>

          <th>
            バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `headers`
          </td>

          <td>
            `NRIA_HTTP_HEADERS`
          </td>

          <td>
            キーの値マップ
          </td>

          <td>
            [1.41.0](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

## 次のステップ

以下のことを検討してください。

* [エージェントの設定を](/docs/infrastructure/new-relic-infrastructure/configuration/configure-infrastructure-agent)さらに理解する。
* [テンプレートを使用して設定ファイル](https://github.com/newrelic/infrastructure-agent/blob/master/assets/examples/infrastructure/newrelic-infra-template.yml.example)を作成する。
* どのように[エージェントを管理する](/docs/infrastructure/new-relic-infrastructure/configuration/start-stop-restart-check-infrastructure-agent-status)かを確認する。