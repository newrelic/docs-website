---
title: NFSモニタリングの統合
tags:
  - Integrations
  - On-host integrations
  - On-host integrations list
metaDescription: 'New Relic''s Network File System (NFS) integration: how to enable, configure it, and an explanation of what data it reports.'
freshnessValidatedDate: never
translationType: machine
---

当社のNFS [統合](/docs/integrations/host-integrations/getting-started/introduction-host-integrations) は、お客様のNFSサービスからインベントリとメトリクスを収集して当社のプラットフォームに送信し、ディスク使用量データを確認できるので、問題の原因をより簡単に見つけることができます。

NFS 統合をセットアップするには、次の手順を実行します。

<Steps>
  <Step>
    ## 互換性と要件を確認する [#req]

    当社のインテグレーションは、NFS バージョン 3 以上と互換性があります。
  </Step>

  <Step>
    ## インフラストラクチャエージェントをインストールします

    NFS インテグレーションを使用するには、まず同じホストに[インフラストラクチャエージェントをインストールする](/docs/infrastructure/install-infrastructure-agent/get-started/install-infrastructure-agent-new-relic/)必要があります。
  </Step>

  <Step>
    ## インストールしてアクティブ化する [#install]

    NFS インテグレーションは、インフラストラクチャエージェントによってデフォルトですでにアクティブ化され、インストールされています。 インストールやアクティベーションの要件はなく、すぐに使用できます。
  </Step>

  <Step>
    ## データを見つけて使用する [#find-and-use]

    統合データを見つけるには:

    1. に行く

       <DNT>
         **[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Infrastructure > Third-party services**
       </DNT>

    2. <DNT>
         **NFS integration**
       </DNT>

       を検索します。

    3. NFS ダッシュボードをクリックします。

       [データをクエリする場合](/docs/using-new-relic/data/understand-data/query-new-relic-data)、NFSデータは`NFSSample`[イベントタイプ](/docs/data-apis/understand-data/new-relic-data-types/#event-data)に関連付けられます。

       データの見つけ方と使い方については、 [統合データの理解と利用](/docs/infrastructure/integrations/find-use-infrastructure-integration-data) を参照してください。
  </Step>
</Steps>

## メトリックデータ [#metrics]

NFSインテグレーションでは、以下のメトリクスを収集します。

### デフォルトのメトリクス

これらのメトリクスはデフォルトで取得されます。

<table>
  <thead>
    <tr>
      <th style={{ width: "350px" }}>
        名前
      </th>

      <th>
        説明
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `diskTotalBytes`
      </td>

      <td>
        ディスク上の利用可能な総バイト数。
      </td>
    </tr>

    <tr>
      <td>
        `diskUsedBytes`
      </td>

      <td>
        総使用バイト数
      </td>
    </tr>

    <tr>
      <td>
        `diskUsedPercent`
      </td>

      <td>
        使用されたバイト数の割合。
      </td>
    </tr>

    <tr>
      <td>
        `diskFreeBytes`
      </td>

      <td>
        ディスク上に残っている利用可能な総バイト数。
      </td>
    </tr>

    <tr>
      <td>
        `diskFreePercent`
      </td>

      <td>
        ディスク上の空き容量の割合。
      </td>
    </tr>

    <tr>
      <td>
        `totalReadBytes`
      </td>

      <td>
        読んだ総バイト数
      </td>
    </tr>

    <tr>
      <td>
        `totalWriteBytes`
      </td>

      <td>
        書き込まれた総バイト数
      </td>
    </tr>

    <tr>
      <td>
        `readBytesPerSecond`
      </td>

      <td>
        1秒あたりの読み取りバイト数。
      </td>
    </tr>

    <tr>
      <td>
        `writeBytesPerSecond`
      </td>

      <td>
        1秒間に書き込まれるバイト数。
      </td>
    </tr>

    <tr>
      <td>
        `readsPerSecond`
      </td>

      <td>
        1秒あたりの読み取り操作の回数。
      </td>
    </tr>

    <tr>
      <td>
        `writesPerSecond`
      </td>

      <td>
        1秒あたりの書き込み操作の回数。
      </td>
    </tr>

    <tr>
      <td>
        `totalOpsPerSecond`
      </td>

      <td>
        1秒間の総操作回数。
      </td>
    </tr>

    <tr>
      <td>
        `version`
      </td>

      <td>
        NFSのバージョン（3.0または4.0のいずれかになります）。
      </td>
    </tr>

    <tr>
      <td>
        `device`
      </td>

      <td>
        デバイス名です。
      </td>
    </tr>

    <tr>
      <td>
        `mountPoint`
      </td>

      <td>
        NFSボリュームのマウントポイント。
      </td>
    </tr>

    <tr>
      <td>
        `filesystemType`
      </td>

      <td>
        ファイルシステムの種類。
      </td>
    </tr>
  </tbody>
</table>

### 拡張メトリクス [#extended]

`detailed_nfs` が有効になっている場合 (インフラストラクチャ [構成ファイル](/docs/infrastructure/install-configure-manage-infrastructure/configuration/infrastructure-configuration-settings#detailed_nfs)で `true` に設定されている場合) にキャプチャされる追加の指標:

<table>
  <thead>
    <tr>
      <th style={{ width: "350px" }}>
        名前
      </th>

      <th>
        説明
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `ageSeconds`
      </td>

      <td>
        NFSクライアントの年齢を秒単位で指定します。
      </td>
    </tr>

    <tr>
      <td>
        `inodeRevalidate`
      </td>

      <td>
        キャッシュされたinodeの属性がサーバーから再検証された回数。
      </td>
    </tr>

    <tr>
      <td>
        `dnodeRevalidate`
      </td>

      <td>
        キャッシュされたデントリーノードが、サーバーから再検証される回数。
      </td>
    </tr>

    <tr>
      <td>
        `dataInvalidate`
      </td>

      <td>
        inodeのキャッシュがクリアされる回数。
      </td>
    </tr>

    <tr>
      <td>
        `attributeInvalidate`
      </td>

      <td>
        キャッシュされたinodeの属性が無効になる回数。
      </td>
    </tr>

    <tr>
      <td>
        `vfsOpen`
      </td>

      <td>
        ファイルまたはディレクトリが`open()` 'dされた回数。
      </td>
    </tr>

    <tr>
      <td>
        `vfsLookUp`
      </td>

      <td>
        ディレクトリの検索が発生した回数。
      </td>
    </tr>

    <tr>
      <td>
        `vfsAccess`
      </td>

      <td>
        パーミッションがチェックされた回数
      </td>
    </tr>

    <tr>
      <td>
        `vfsUpdatePage`
      </td>

      <td>
        ページへの更新（および潜在的な書き込み）の数。
      </td>
    </tr>

    <tr>
      <td>
        `vfsReadPage`
      </td>

      <td>
        `mmap()` 'dファイルを介して直接読み取られたページ数。
      </td>
    </tr>

    <tr>
      <td>
        `vfsReadPages`
      </td>

      <td>
        ページのグループが読まれた回数。
      </td>
    </tr>

    <tr>
      <td>
        `vfsWritePage`
      </td>

      <td>
        `mmap()` 'dファイルを介して直接書き込まれたページ数。
      </td>
    </tr>

    <tr>
      <td>
        `vfsWritePages`
      </td>

      <td>
        ページ群が書き込まれた回数。
      </td>
    </tr>

    <tr>
      <td>
        `vfsGetDents`
      </td>

      <td>
        ディレクトリエントリが`getdents()`で読み取られた回数。
      </td>
    </tr>

    <tr>
      <td>
        `vfsSetattr`
      </td>

      <td>
        inodeに属性が設定された回数。
      </td>
    </tr>

    <tr>
      <td>
        `vfsFlush`
      </td>

      <td>
        サーバーに強制的にフラッシュされた保留中の書き込みの数。
      </td>
    </tr>

    <tr>
      <td>
        `vfsFsync`
      </td>

      <td>
        ディレクトリとファイルで`fsync()`が呼び出された回数。
      </td>
    </tr>

    <tr>
      <td>
        `vfsLock`
      </td>

      <td>
        ファイルのロックが試みられた回数。
      </td>
    </tr>

    <tr>
      <td>
        `vfsFileRelease`
      </td>

      <td>
        ファイルが閉じられ、リリースされた回数。
      </td>
    </tr>

    <tr>
      <td>
        `truncation`
      </td>

      <td>
        ファイルが切り捨てられた回数。
      </td>
    </tr>

    <tr>
      <td>
        `writeExtension`
      </td>

      <td>
        ファイルが既存の端を超えて書き込まれたために成長した回数。
      </td>
    </tr>

    <tr>
      <td>
        `sillyRename`
      </td>

      <td>
        ファイルが他のプロセスによって開かれたまま削除された回数。
      </td>
    </tr>

    <tr>
      <td>
        `shortRead`
      </td>

      <td>
        NFSサーバーが読み込み中に予想よりも少ないデータを与えた回数。
      </td>
    </tr>

    <tr>
      <td>
        `shortWrite`
      </td>

      <td>
        NFSサーバーが書き込み中に予想よりも少ないデータを書き込んだ回数。
      </td>
    </tr>

    <tr>
      <td>
        `jukeboxDelay`
      </td>

      <td>
        NFSサーバーが`EJUKEBOX`を示した回数。オフラインストレージからデータを取得します。
      </td>
    </tr>

    <tr>
      <td>
        `pnfsRead`
      </td>

      <td>
        NFS v4.1+ pNFSの読み込み回数。
      </td>
    </tr>

    <tr>
      <td>
        `pnfsWrite`
      </td>

      <td>
        NFS v4.1+のpNFSの書き込み数。
      </td>
    </tr>

    <tr>
      <td>
        `bind`
      </td>

      <td>
        クライアントがNFSサーバーとの接続を最初から確立しなければならなかった回数。
      </td>
    </tr>

    <tr>
      <td>
        `connect`
      </td>

      <td>
        クライアントがNFSサーバへのTCP接続を行った回数。
      </td>
    </tr>

    <tr>
      <td>
        `connectIdleTime`
      </td>

      <td>
        NFSマウントがサーバーへの接続確立を待っていた時間（単位：jiffies、カーネル内部での時間の単位）。
      </td>
    </tr>

    <tr>
      <td>
        `idleTimeSeconds`
      </td>

      <td>
        NFSマウントが最後にRPCトラフィックを確認してからの期間。
      </td>
    </tr>

    <tr>
      <td>
        `send`
      </td>

      <td>
        NFSサーバーに送信された、このマウントに対するRPCリクエストの数。
      </td>
    </tr>

    <tr>
      <td>
        `receive`
      </td>

      <td>
        NFSサーバーから受信したこのマウントのRPCレスポンスの数。
      </td>
    </tr>

    <tr>
      <td>
        `badTransactionIds`
      </td>

      <td>
        NFSサーバーが、このクライアントにとって未知のトランザクションIDを持つ応答を送信した回数。
      </td>
    </tr>

    <tr>
      <td>
        `cumulativeActiveRequest`
      </td>

      <td>
        送信と受信の現在の差として各リクエストごとに増加する実行中のカウンター。
      </td>
    </tr>

    <tr>
      <td>
        `cumulativeBacklog`
      </td>

      <td>
        実行中のカウンターで、リクエストごとに現在のバックログキューのサイズでインクリメントされます。
      </td>
    </tr>

    <tr>
      <td>
        `maximumRPCSlotsUsed`
      </td>

      <td>
        これまでに使用された、同時にアクティブなRPCリクエストの最大数。
      </td>
    </tr>

    <tr>
      <td>
        `cumulativeSendingQueue`
      </td>

      <td>
        送信キューの現在のサイズとして、リクエストごとにインクリメントされるランニングカウンタ。
      </td>
    </tr>

    <tr>
      <td>
        `cumulativePendingQueue`
      </td>

      <td>
        実行中のカウンターで、リクエストごとに増やされ、保留中のキューの現在のサイズとなります。
      </td>
    </tr>
  </tbody>
</table>

## 統合を無効にする [#disable]

NFS メトリクスのスクレイピングを回避するには、インフラストラクチャ エージェント [構成ファイル](/docs/infrastructure/install-infrastructure-agent/configuration/infrastructure-agent-configuration-settings/#metrics-nfs-sample-rate) で `metrics_nfs_sample_rate` を `-1` に設定します。
