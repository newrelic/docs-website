---
title: Elasticsearch統合の構成設定
tags:
  - Integrations
  - On-host integrations
  - Advanced configuration
metaDescription: New Relics elasticsearch monitoring integration's advanced configuration
translationType: machine
---

Elasticsearch 統合はオープン ソース ソフトウェアです。つまり[、ソース コードを参照して](https://github.com/newrelic/nri-elasticsearch)改善を送信したり、独自のフォークを作成してビルドしたりできます。

### Elasticsearchインスタンスの設定 [#instance-settings]

`elasticsearch-config.yml`ファイルの`env`セクションを使用して、Elasticsearchに関連する特定の設定を定義できます。これらの設定は、Elasticsearchインスタンスへの接続、およびその他のセキュリティ設定と機能を制御します。

Elasticsearch統合は、メトリクスとインベントリ情報の両方を収集します。表で、各コレクションで使用可能な設定の**\[適用先**]列を使用します。

'' '' '' '' '' '' '' '' '' '' '' '' '' '' '' '' '' ''

<table>
  <thead>
    <tr>
      <th style={{ width: '150px' }}>
        設定
      </th>

      <th>
        説明
      </th>

      <th>
        デフォルト
      </th>

      <th>
        に適用されます
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        **ホスト名**
      </td>

      <td>
        Elasticsearchが実行されているホスト名またはIP。
      </td>

      <td>
        ローカルホスト
      </td>

      <td style={{ "text-align": "center" }}>
        M / I
      </td>
    </tr>

    <tr>
      <td>
        **LOCAL_HOSTNAME**
      </td>

      <td>
        インベントリデータの収集元となるElasticsearchノードのホスト名またはIP。ローカルホストに対してインベントリデータを収集したくない場合にのみ設定する必要があります。
      </td>

      <td>
        ローカルホスト
      </td>

      <td style={{ 'text-align': 'center' }}>
        M
      </td>
    </tr>

    <tr>
      <td>
        **ポート**
      </td>

      <td>
        Elasticsearchがリッスンしているポート。
      </td>

      <td>
        9200
      </td>

      <td style={{ 'text-align': 'center' }}>
        M / I
      </td>
    </tr>

    <tr>
      <td>
        **ユーザー名**
      </td>

      <td>
        ElasticsearchNodeにアクセスするためのユーザー名。
      </td>

      <td>
        該当なし
      </td>

      <td style={{ 'text-align': 'center' }}>
        M / I
      </td>
    </tr>

    <tr>
      <td>
        **パスワード**
      </td>

      <td>
        指定されたユーザーのパスワード。
      </td>

      <td>
        該当なし
      </td>

      <td style={{ 'text-align': 'center' }}>
        M / I
      </td>
    </tr>

    <tr>
      <td>
        **CLUSTER_ENVIRONMENT**
      </td>

      <td>
        データを収集するクラスターをさらに指定する方法。例：「ステージング」。
      </td>

      <td>
        該当なし
      </td>

      <td style={{ 'text-align': 'center' }}>
        M / I
      </td>
    </tr>

    <tr>
      <td>
        **USE_SSL**
      </td>

      <td>
        Elasticsearchノードと通信するときにSSLを使用します。
      </td>

      <td>
        false
      </td>

      <td style={{ 'text-align': 'center' }}>
        M / I
      </td>
    </tr>

    <tr>
      <td>
        **CA_BUNDLE_FILE**
      </td>

      <td>
        ホスト上のSSL証明書の場所。 `USE_SSL`がtrueの場合にのみ必要です。
      </td>

      <td>
        該当なし
      </td>

      <td style={{ 'text-align': 'center' }}>
        M / I
      </td>
    </tr>

    <tr>
      <td>
        **CA_BUNDLE_DIR**
      </td>

      <td>
        代替認証局バンドルディレクトリ。
      </td>

      <td>
        該当なし
      </td>

      <td style={{ 'text-align': 'center' }}>
        M / I
      </td>
    </tr>

    <tr>
      <td>
        **SSL_ALTERNATIVE_HOSTNAME**
      </td>

      <td>
        統合がSSLネゴシエーションの目的で有効として受け入れる代替サーバーのホスト名。
      </td>

      <td>
        該当なし
      </td>

      <td style={{ 'text-align': 'center' }}>
        M / I
      </td>
    </tr>

    <tr>
      <td>
        **TLS_INSECURE_SKIP_VERIFY**
      </td>

      <td>
        サーバーの証明書チェーンとホスト名の検証をスキップします。
      </td>

      <td>
        false
      </td>

      <td style={{ 'text-align': 'center' }}>
        M / I
      </td>
    </tr>

    <tr>
      <td>
        **CONFIG_PATH**
      </td>

      <td>
        Elasticsearch構成ファイルへのパス。
      </td>

      <td>
        / etc / elasticsearch /<br/> Elasticsearch.yml
      </td>

      <td style={{ 'text-align': 'center' }}>
        私
      </td>
    </tr>

    <tr>
      <td>
        **タイムアウト**
      </td>

      <td>
        APIリクエストのタイムアウト（秒単位）。
      </td>

      <td>
        30
      </td>

      <td style={{ 'text-align': 'center' }}>
        M / I
      </td>
    </tr>

    <tr>
      <td>
        **COLLECT_INDICES**
      </td>

      <td>
        インデックスメトリックを収集するかどうかを通知します。
      </td>

      <td>
        true
      </td>

      <td style={{ 'text-align': 'center' }}>
        M
      </td>
    </tr>

    <tr>
      <td>
        **COLLECT_PRIMARIES**
      </td>

      <td>
        プライマリメトリックを収集するかどうかを通知します。
      </td>

      <td>
        true
      </td>

      <td style={{ 'text-align': 'center' }}>
        M
      </td>
    </tr>

    <tr>
      <td>
        **INDICES_REGEX**
      </td>

      <td>
        収集されるインデックスをフィルタリングします。
      </td>

      <td>
        該当なし
      </td>

      <td style={{ 'text-align': 'center' }}>
        M
      </td>
    </tr>

    <tr>
      <td>
        **MASTER_ONLY**
      </td>

      <td>
        選出されたマスターでのみクラスターメトリックを収集します。
      </td>

      <td>
        false
      </td>

      <td style={{ 'text-align': 'center' }}>
        M
      </td>
    </tr>

    <tr>
      <td>
        **METRICS**
      </td>

      <td>
        メトリックのみの収集を有効にするには、 `true`に設定します。
      </td>

      <td>
        false
      </td>

      <td style={{ 'text-align': 'center' }}/>
    </tr>

    <tr>
      <td>
        **在庫**
      </td>

      <td>
        インベントリのみの収集を有効にするには、 `true`に設定します。
      </td>

      <td>
        false
      </td>

      <td style={{ 'text-align': 'center' }}/>
    </tr>
  </tbody>
</table>

これらの設定の値は、いくつかの方法で定義できます。

* 設定ファイルに直接値を追加します。これが最も一般的な方法です。
* `{{ }}`表記を使用して環境変数の値を置き換えます。 [オンホスト統合での環境変数パススルーの使用](/docs/infrastructure/install-infrastructure-agent/configuration/configure-infrastructure-agent/#passthrough)の詳細を読むか、 [環境変数の置換](/docs/infrastructure/host-integrations/host-integrations-list/elasticsearch/elasticsearch-integration#envvar-replacement)の例を参照してください。 <Callout variant="important">これには、インフラストラクチャエージェントv1.14.0以降が必要です。</Callout>
* シークレット管理の使用。これを使用して、設定ファイルのプレーンテキストで公開されないようにパスワードなどの重要な情報を保護してください。詳細については、[シークレット管理](/docs/integrations/host-integrations/installation/secrets-management)を参照してください。

### ラベルとカスタム属性 [#labels]

ラベルを使用して、メトリックをさらに装飾できます。ラベルを使用すると、キーと値のペアの属性をメトリックに追加できます。これを使用して、メトリックをクエリ、フィルタリング、またはグループ化できます。<br/> [基本構成elasticsearch-config.ymlサンプルファイル](/docs/infrastructure/host-integrations/host-integrations-list/elasticsearch/elasticsearch-integration#basic-config)には、ラベルの使用法が含まれています。ただし、必須ではないため、選択した新しいものを削除、変更、または追加できます。

```yaml
 labels:
   env: production
   role: load_balancer
```

## 在庫データ [#inventory]

Elasticsearch統合は、 [YAML構成ファイル](/docs/infrastructure/host-integrations/host-integrations-list/elasticsearch/elasticsearch-integration/#basic-config)で指定されているように、Elasticsearchノードの構成パラメーターをキャプチャします。また、 `\_nodes/\_local`エンドポイントからノード構成情報を収集します。データは、 [インフラストラクチャインベントリページ](/docs/infrastructure/new-relic-infrastructure/infrastructure-ui-pages/infrastructure-inventory-page-search-your-entire-infrastructure)の`config/elasticsearch`ソースから入手できます。

在庫データの詳細については、 [統合データを理解する](/docs/infrastructure/integrations-getting-started/getting-started/understand-integration-data-data-types#inventory-data)方法を参照してください。