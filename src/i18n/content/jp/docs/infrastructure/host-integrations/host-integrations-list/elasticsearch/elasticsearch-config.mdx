---
title: Elasticsearch統合のコンフィギュレーション設定
tags:
  - Integrations
  - On-host integrations
  - Advanced configuration
metaDescription: New Relics elasticsearch monitoring integration's advanced configuration
translationType: machine
---

Elasticsearchインテグレーションは、オープンソースソフトウェアです。 つまり、そのソースコード [を閲覧したり、改良点を送信したり、独自のフォークを作成して構築することができます。](https://github.com/newrelic/nri-elasticsearch "新しいウィンドウにリンクが開きます。")

### Elasticsearchインスタンスの設定 [#instance-settings]

`elasticsearch-config.yml` ファイルの `env` セクションを使用して、Elasticsearch に関連する特定の設定を定義することができます。これらの設定は、Elasticsearch インスタンスへの接続を制御し、その他のセキュリティ設定や機能も制御します。

Elasticsearchインテグレーションでは、MetricsとInventoryの両方の情報を収集します。表の中で、 **Applies to** カラムを使って、各コレクションで利用できる設定を確認してください。

新しいウィンドウにリンクが開きます。

<table>
  <thead>
    <tr>
      <th style={{ width: '150px' }}>
        設定
      </th>

      <th>
        説明
      </th>

      <th>
        デフォルト
      </th>

      <th>
        適用対象
      </th>
    </tr>
  </thead>
  
  <tbody>
    <tr>
      <td>
        **HOSTNAME**
      </td>

      <td>
        Elasticsearchが動作しているホスト名またはIP。
      </td>

      <td>
        localhost
      </td>

      <td style={{ "text-align": "center" }}>
        M/I
      </td>
    </tr>

    <tr>
      <td>
        **LOCAL_HOSTNAME**
      </td>

      <td>
        インベントリデータの収集元となるElasticsearchノードのホスト名またはIP。localhostに対してインベントリデータを収集したくない場合にのみ設定してください。
      </td>

      <td>
        localhost
      </td>

      <td style={{ 'text-align': 'center' }}>
        M
      </td>
    </tr>

    <tr>
      <td>
        **ポート**
      </td>

      <td>
        Elasticsearchがリッスンしているポート。
      </td>

      <td>
        9200
      </td>

      <td style={{ 'text-align': 'center' }}>
        M/I
      </td>
    </tr>

    <tr>
      <td>
        **ユーザー名**
      </td>

      <td>
        Elasticsearch Nodeにアクセスするためのユーザ名です。
      </td>

      <td>
        該当なし
      </td>

      <td style={{ 'text-align': 'center' }}>
        M/I
      </td>
    </tr>

    <tr>
      <td>
        **パスワード**
      </td>

      <td>
        指定ユーザーのパスワード。
      </td>

      <td>
        該当なし
      </td>

      <td style={{ 'text-align': 'center' }}>
        M/I
      </td>
    </tr>

    <tr>
      <td>
        **cluster_environment**
      </td>

      <td>
        データを収集しているクラスタをさらに指定する方法で、例：「staging」。
      </td>

      <td>
        該当なし
      </td>

      <td style={{ 'text-align': 'center' }}>
        M/I
      </td>
    </tr>

    <tr>
      <td>
        **USE_SSL**
      </td>

      <td>
        Elasticsearchノードとの通信にSSLを使用すること。
      </td>

      <td>
        false
      </td>

      <td style={{ 'text-align': 'center' }}>
        M/I
      </td>
    </tr>

    <tr>
      <td>
        **CA_BUNDLE_FILE**
      </td>

      <td>
        ホスト上のSSL証明書の場所。 `USE_SSL` がtrueの場合のみ必要です。
      </td>

      <td>
        該当なし
      </td>

      <td style={{ 'text-align': 'center' }}>
        M/I
      </td>
    </tr>

    <tr>
      <td>
        **CA_BUNDLE_DIR**
      </td>

      <td>
        Alternative Certificate Authority bundle directory.
      </td>

      <td>
        該当なし
      </td>

      <td style={{ 'text-align': 'center' }}>
        M/I
      </td>
    </tr>

    <tr>
      <td>
        **ssl_alternative_hostname**
      </td>

      <td>
        SSLのネゴシエーションのために有効であると統合が認める代替のサーバーホスト名です。
      </td>

      <td>
        該当なし
      </td>

      <td style={{ 'text-align': 'center' }}>
        M/I
      </td>
    </tr>

    <tr>
      <td>
        **TLS_INSECURE_SKIP_VERIFY**
      </td>

      <td>
        サーバーの証明書チェーンとホスト名の検証をスキップします。
      </td>

      <td>
        false
      </td>

      <td style={{ 'text-align': 'center' }}>
        M/I
      </td>
    </tr>

    <tr>
      <td>
        **CONFIG_PATH**
      </td>

      <td>
        Elasticsearchの設定ファイルへのパス。
      </td>

      <td>
        /etc/elasticsearch/ <br/>elasticsearch.yml
      </td>

      <td style={{ 'text-align': 'center' }}>
        I
      </td>
    </tr>

    <tr>
      <td>
        **タイムアウト**
      </td>

      <td>
        APIリクエストのタイムアウト（単位：秒）。
      </td>

      <td>
        30
      </td>

      <td style={{ 'text-align': 'center' }}>
        M/I
      </td>
    </tr>

    <tr>
      <td>
        **collect_indices**
      </td>

      <td>
        インデックス・メトリクスを収集するかどうかの信号です。
      </td>

      <td>
        true
      </td>

      <td style={{ 'text-align': 'center' }}>
        M
      </td>
    </tr>

    <tr>
      <td>
        **コレクト・プライマリー**
      </td>

      <td>
        プライマリ・メトリクスを収集するかどうかを示します。
      </td>

      <td>
        true
      </td>

      <td style={{ 'text-align': 'center' }}>
        M
      </td>
    </tr>

    <tr>
      <td>
        **INDICES_REGEX**
      </td>

      <td>
        インデックスを収集するフィルタ。
      </td>

      <td>
        該当なし
      </td>

      <td style={{ 'text-align': 'center' }}>
        M
      </td>
    </tr>

    <tr>
      <td>
        **MASTER_ONLY**
      </td>

      <td>
        選出されたマスターのみでクラスタメトリクスを収集します。
      </td>

      <td>
        false
      </td>

      <td style={{ 'text-align': 'center' }}>
        M
      </td>
    </tr>

    <tr>
      <td>
        **メトリクス**
      </td>

      <td>
        `true`に設定すると、メトリクスのみの収集が有効になります。
      </td>

      <td>
        false
      </td>

      <td style={{ 'text-align': 'center' }}/>
    </tr>

    <tr>
      <td>
        **インベントリ**
      </td>

      <td>
        `true`に設定すると、インベントリのみの収集が有効になります。
      </td>

      <td>
        false
      </td>

      <td style={{ 'text-align': 'center' }}/>
    </tr>
  </tbody>
</table>

これらの設定値は、いくつかの方法で定義できます。

* コンフィグファイルに直接値を追加する。これが最も一般的な方法です。
* `{{}}`表記を使用して、環境変数の値を置き換えます。これには、インフラストラクチャエージェントv1.14.0以降が必要です。詳細については、 [こちら](/docs/infrastructure/install-infrastructure-agent/configuration/configure-infrastructure-agent/#passthrough)を読むか、 [環境変数の置換](/docs/infrastructure/host-integrations/host-integrations-list/elasticsearch/elasticsearch-integration#envvar-replacement)の例を参照してください。
* シークレット管理の使用。これを使用して、設定ファイルのプレーンテキストで公開されないようにパスワードなどの重要な情報を保護してください。詳細については、[シークレット管理](/docs/integrations/host-integrations/installation/secrets-management)を参照してください。

### ラベルとカスタム属性 [#labels]

メトリクスは、ラベルを使ってさらに装飾することができます。

[基本構成サンプル・ファイル](/docs/infrastructure/host-integrations/host-integrations-list/elasticsearch/elasticsearch-integration#basic-config) には、ラベルの使用法が含まれています。しかし、ラベルは必須ではないので、自分で削除、変更、または新しいラベルを追加することができます。

```yaml
 labels:
   env: production
   role: load_balancer
```

## インベントリデータ [#inventory]

Elasticsearch インテグレーションでは、 [YAML config ファイル](/docs/infrastructure/host-integrations/host-integrations-list/elasticsearch/elasticsearch-integration#examples) で指定された Elasticsearch ノードの設定パラメータを取得します。また、 `˶‾᷄ -̫ ‾᷅˵` エンドポイントからノード構成情報を収集します。このデータは、 [インベントリページ](/docs/infrastructure/new-relic-infrastructure/infrastructure-ui-pages/infrastructure-inventory-page-search-your-entire-infrastructure) 、 **config/elasticsearch** ソースの下で利用可能です。インベントリデータについては、 [Understand integration data](/docs/infrastructure/integrations-getting-started/getting-started/understand-integration-data-data-types#inventory-data) をご参照ください。
