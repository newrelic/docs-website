---
title: MicrosoftSQLServerの統合構成設定
tags:
  - Integrations
  - On-host integrations
  - On-host integrations list
  - Configuration
metaDescription: Configuration New Relic's Kafka integration.
freshnessValidatedDate: never
translationType: machine
---

この統合はオープン ソース ソフトウェアです。つまり[、ソース コードを参照して](https://github.com/newrelic/nri-mssql)改善を送信したり、独自のフォークを作成してビルドしたりできます。

## ラベルとカスタム属性 [#labels]

メトリックをラベルで装飾することもできます。ラベルを使用すると、キーと値のペアの属性をメトリックに追加して、メトリックをクエリ、フィルタリング、またはグループ化できます。

デフォルトのサンプル構成ファイルにはラベルの例が含まれていますが、それらはオプションです。新しいものを削除、変更、または追加できます。

```yaml
 labels:
   env: production
   role: load_balancer
```

### MicrosoftSQLServerインスタンス設定 [#instance-settings]

Microsoft SQL Server インテグレーションは、メトリック情報とインベントリ情報の両方を収集します。 表では、各コレクションで使用可能な設定については<DNT>**Applies to**</DNT>列を使用します。

'' '' '' '' '' '' '' '' '' '' '' '' '' '' ''

<table>
  <thead>
    <tr>
      <th style={{ width: '150px' }}>
        設定
      </th>

      <th>
        説明
      </th>

      <th>
        デフォルト
      </th>

      <th>
        に適用されます
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        <DNT>
          **HOSTNAME**
        </DNT>
      </td>

      <td>
        MSSQLサーバーが実行されているホスト名またはIP。
      </td>

      <td>
        127.0.0.1
      </td>

      <td style={{ "text-align": "center" }}>
        M / I
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **PORT**
        </DNT>
      </td>

      <td>
        MS SQL サーバーがリッスンしているポート。 <br/><DNT>**Note**</DNT> : ポートは、 `INSTANCE`が指定されていない場合にのみ必要です。
      </td>

      <td>
        1433
      </td>

      <td style={{ 'text-align': 'center' }}>
        M / I
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **INSTANCE**
        </DNT>
      </td>

      <td>
        接続する MS SQL Server インスタンス。 <br/><DNT>**Note**</DNT> : `PORT`が指定されていない場合にのみ必須です。 両方使用しないでください。
      </td>

      <td>
        該当なし
      </td>

      <td style={{ 'text-align': 'center' }}>
        M / I
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **USERNAME**
        </DNT>
      </td>

      <td>
        MSSQLサーバーにアクセスするためのユーザー名。<br/>ドメインユーザーを使用する場合は、構文を使用します `domain\user`
      </td>

      <td>
        該当なし
      </td>

      <td style={{ 'text-align': 'center' }}>
        M / I
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **PASSWORD**
        </DNT>
      </td>

      <td>
        指定されたSQLまたはドメインユーザーのパスワード。
      </td>

      <td>
        該当なし
      </td>

      <td style={{ 'text-align': 'center' }}>
        M / I
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **EXTRA_CONNECTION_URL_ARGS**
        </DNT>
      </td>

      <td>
        追加の接続パラメーターをattr1=val1＆attr2=val2として指定します。
      </td>

      <td>
        該当なし
      </td>

      <td style={{ 'text-align': 'center' }}>
        M / I
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **ENABLE_SSL**
        </DNT>
      </td>

      <td>
        SSLを使用してMSSQLServerに接続します。
      </td>

      <td>
        false
      </td>

      <td style={{ 'text-align': 'center' }}>
        M / I
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **TRUST_SERVER_CERTIFICATE**
        </DNT>
      </td>

      <td>
        `true`に設定されている場合、サーバー証明書はSSLに対して検証されません。
      </td>

      <td>
        false
      </td>

      <td style={{ 'text-align': 'center' }}>
        M / I
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **CERTIFICATE_LOCATION**
        </DNT>
      </td>

      <td>
        SSL証明書の場所。
      </td>

      <td>
        該当なし
      </td>

      <td style={{ 'text-align': 'center' }}>
        M / I
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **TIMEOUT**
        </DNT>
      </td>

      <td>
        クエリのタイムアウト（秒単位）。タイムアウトなしの場合は0を設定します。
      </td>

      <td>
        30
      </td>

      <td style={{ 'text-align': 'center' }}>
        M / I
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **ENABLE_BUFFER_METRICS**
        </DNT>
      </td>

      <td>
        バッファプールメトリックの収集を有効にします。これらは、大規模なシステムではリソースを大量に消費する可能性があります。
      </td>

      <td>
        true
      </td>

      <td style={{ 'text-align': 'center' }}>
        M
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **ENABLE_DATABASE_RESERVE_METRICS**
        </DNT>
      </td>

      <td>
        データベースパーティションの予約スペースの収集を有効にします。これらは、大規模なシステムではリソースを大量に消費する可能性があります。
      </td>

      <td>
        true
      </td>

      <td style={{ 'text-align': 'center' }}>
        M
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **CUSTOM_METRICS_QUERY**
        </DNT>
      </td>

      <td>
        カスタムメトリックを収集するためのSQLクエリ。 [カスタムクエリの例](/docs/infrastructure/host-integrations/host-integrations-list/microsoft-sql/microsoft-sql-server-integration#custom-query)を参照してください。
      </td>

      <td>
        該当なし
      </td>

      <td style={{ 'text-align': 'center' }}>
        M
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **CUSTOM_METRICS_CONFIG**
        </DNT>
      </td>

      <td>
        カスタムメトリックを収集するための1つ以上のSQLクエリを使用したYAML構成。 [複数のカスタムクエリの例](/docs/infrastructure/host-integrations/host-integrations-list/microsoft-sql/microsoft-sql-server-integration#multi-custom-query)を参照してください。
      </td>

      <td>
        false
      </td>

      <td style={{ 'text-align': 'center' }}>
        M
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **METRICS**
        </DNT>
      </td>

      <td>
        メトリックのみの収集を有効にするには、 `true`に設定します。
      </td>

      <td>
        false
      </td>

      <td style={{ 'text-align': 'center' }}/>
    </tr>

    <tr>
      <td>
        <DNT>
          **INVENTORY**
        </DNT>
      </td>

      <td>
        インベントリのみの収集を有効にするには、 `true`に設定します。
      </td>

      <td>
        false
      </td>

      <td style={{ 'text-align': 'center' }}/>
    </tr>
  </tbody>
</table>

これらの設定の値は、いくつかの方法で定義できます。

* 設定ファイルに直接値を追加します。これが最も一般的な方法です。
* `{{ }}`表記を使用して環境変数の値を置き換えます。 [オンホスト統合での環境変数パススルーの使用](/docs/infrastructure/install-infrastructure-agent/configuration/configure-infrastructure-agent/#passthrough)の詳細を読むか、 [環境変数の置換](/docs/infrastructure/host-integrations/host-integrations-list/elasticsearch/elasticsearch-integration#envvar-replacement)の例を参照してください。 <Callout variant="important">これには、インフラストラクチャエージェントv1.14.0以降が必要です。</Callout>
* シークレット管理の使用。これを使用して、設定ファイルのプレーンテキストで公開されないようにパスワードなどの重要な情報を保護してください。詳細については、[シークレット管理](/docs/integrations/host-integrations/installation/secrets-management)を参照してください。

## 在庫データ [#inventory]

Microsoft SQL Server統合は、MicrosoftSQLServer環境の構成パラメーターと現在の設定をキャプチャします。 `sp_configure`ストアドプロシージャの結果と、現在実行中の構成設定を`sys.configurations`テーブルから収集します。データは、 `config/mssql`ソースの下の\[ [インベントリ\]ページ](/docs/infrastructure/new-relic-infrastructure/infrastructure-ui-pages/infrastructure-inventory-page-search-your-entire-infrastructure)で入手できます。

インベントリデータについては、 [Understand integration data](/docs/infrastructure/integrations-getting-started/getting-started/understand-integration-data-data-types#inventory-data) を参照してください。
