---
title: Infrastructureのオンホストインテグレーションのインストール
tags:
  - Integrations
  - On-host integrations
  - Installation
metaDescription: How to get and install the package that contains New Relic's infrastructure on-host integrations.
translationType: human
---

import infrastructureAgentsandNr from 'images/infrastructure_diagram_agents-and-nr.webp'

import osSuse from 'images/os_icon_suse.webp'

import osLinux from 'images/os_icon_linux.webp'

import osWindows from 'images/os_icon_windows.webp'

import osEcs from 'images/os_icon_ecs.webp'

import osk8 from 'images/os_icon_k8.webp'

import osRedhat from 'images/os_icon_redhat.webp'

import osCentos from 'images/os_icon_centos.webp'

import osAmazonLinux from 'images/os_icon_amazon-linux.webp'

import osUbuntu from 'images/os_icon_ubuntu.webp'

import osDebian from 'images/os_icon_debian.webp'

New Relicの[オンホストインテグレーション](/docs/integrations/host-integrations/getting-started/introduction-host-integrations)は、MySQLやApache、Redisなど、ホストで実行しているコアサービスからデータを収集するタイプのInfrastructureインテグレーションです。

オンホストインテグレーションのインストール方法は、セットアップとニーズによって異なります。すべてのインストール方法と、いつ使用するのが適切かの概要は以下のとおりです。

## 必要なもの [#what-need]

オンホストサービスからデータを収集するには、以下の項目が必要です。

* [Infrastructureエージェント](/docs/infrastructure/install-infrastructure-agent/get-started/install-infrastructure-agent)
* [オンホストインテグレーション](/docs/integrations/host-integrations/getting-started/introduction-host-integrations)。

すべてのオンホストインテグレーションで、Infrastructureエージェントが[ホストにインストールされている](/docs/infrastructure/install-infrastructure-agent/get-started/install-infrastructure-agent)必要があります。システムのデータ収集の他に、エージェントはインテグレーションのデータのフォワーダーとして機能し、[ログ](/docs/logs/enable-log-monitoring-new-relic/enable-log-monitoring-new-relic/forward-your-logs-using-infrastructure-agent)を転送できます。

たとえば、SQL Serverの場合：

* Infrastructureエージェントがインストールされているホスト1には、ポート`1433`のアウトバウンドルールが必要です。
* SQL Serverのホスト2には、ポート`1433`のインバウンドルールが必要です。

この例において、ホスト1はホスト2からデータを取得します。

<img
  title="Agents and New Relic"
  alt="Agents and New Relic"
  src={infrastructureAgentsandNr}
/>

<figcaption>
  Infrastructureエージェントとそのインテグレーションは、システムとコアサービスからデータを収集し、New Relicに[ログを転送](/docs/logs/enable-log-monitoring-new-relic/enable-log-monitoring-new-relic/forward-your-logs-using-infrastructure-agent)できます。バックエンドアプリケーションメトリクス（APM）は、別の[APMエージェント](/docs/apm/new-relic-apm/getting-started/introduction-apm)が収集します。各インテグレーションとフォワーダーがNew Relicデータベース（NRDB）でどのように[異なるデータタイプ](/docs/using-new-relic/data/understand-data/new-relic-data-types)をフィードするかに注意してください。
</figcaption>

## クイックスタート [#quick]

最も迅速に使い始めるには、ガイド付きインストールを使用します。

<Callout variant="tip">
  [ガイド付きインストール](https://one.newrelic.com/launcher/nr1-core.home?pane=eyJuZXJkbGV0SWQiOiJucjEtY29yZS5ob21lLXNjcmVlbiJ9&cards%5B0%5D=eyJuZXJkbGV0SWQiOiJucjEtaW5zdGFsbC1uZXdyZWxpYy5ucjEtaW5zdGFsbC1uZXdyZWxpYyIsImFjdGlvbkluZGV4IjoxfQ==)をお試しください。（EUでホストされている場合は、[EUガイド付きインストール](https://one.eu.newrelic.com/launcher/nr1-core.home?pane=eyJuZXJkbGV0SWQiOiJucjEtY29yZS5ob21lLXNjcmVlbiJ9&cards%5B0%5D=eyJuZXJkbGV0SWQiOiJucjEtaW5zdGFsbC1uZXdyZWxpYy5ucjEtaW5zdGFsbC1uZXdyZWxpYyIsImFjdGlvbkluZGV4IjoxfQ==)を使用します。）
</Callout>

## インストレーション方法を選択 [#install]

サービスは単一の物理ホストやVM、KubernetesやECSでオーケストレーションされたコンテナで実行できます。どのようなセットアップでも、当社のオンホストインテグレーションは御社の環境に対応し、適切なインストール方法を選択するだけで、データをNew Relicに送信できます。

### オーケストレーションされた環境でサービスを実行している [#orchestrated]

コンテナ化されオーケストレーションされた環境でサービスを実行している場合、次のシナリオを選択します：

* <img style={{ width: '32px', height: '32px', verticalAlign: 'middle'}} class="inline" title="Kubernetes" alt="Kubernetes" src={osk8}/>

  [Kubernetes にオンホスト インテグレーションをインストールする](/docs/integrations/kubernetes-integration/link-apps-services/monitor-services-running-kubernetes)

* <img style={{ width: '32px', height: '32px', verticalAlign: 'middle'}} class="inline" title="ECS" alt="ECS" src={osEcs}/>

  [Amazon ECSでオンホストインテグレーションをインストール](/docs/integrations/host-integrations/host-integrations-list/monitor-services-running-amazon-ecs)（EC2起動タイプ）

オンホスト インテグレーションとECS、 Kubernetes インテグレーションは一緒に実行できます。詳細については、[Kubernetes インテグレーションの概要](/docs/integrations/kubernetes-integration/get-started/introduction-kubernetes-integration)と[ECSインテグレーションの概要](/docs/integrations/elastic-container-service-integration/get-started/introduction-amazon-ecs-integration)をご覧ください。

### オンプレミスサービスまたは単一のVMでのサービスを実行している [#standard]

オーケストレーションなしで、またはオンプレミスでサービスを実行している場合、次のシナリオを選択します。

<CollapserGroup>
  <Collapser
    id="windows"
    title={<>MSIファイルを使用してインストール（<img src={osWindows} title="Windows Server" alt="Windows Server" style={{ height: '32px', width: '32px', verticalAlign: 'middle' }}/>Windows Server）</>}
  >
    Windows Serverで実行されるサービスのインテグレーションは、.MSIインストーラまたは公式のzipファイルを使用してインストールできます。MSI インストールをお勧めします。

    1. 最新の .MSI インストーラ イメージは当社の[リポジトリ](https://download.newrelic.com/infrastructure_agent/windows/integrations/)からダウンロードします。

    2. アドミニストレーターのアカウントで、絶対パスを使用してインストールスクリプトを実行します。

       ```
       msiexec.exe /qn /i PATH\TO\integration-name.msi
       ```

    3. `C:\Program Files\New Relic\newrelic-infra\integrations.d\integration-name-config.yml.sample`を`integration-name-config.yml`に変更し、必要に応じて編集します。

    4. [Infrastructureエージェントを再起動します](/docs/infrastructure/new-relic-infrastructure/configuration/start-stop-restart-check-infrastructure-agent-status)。
  </Collapser>

  <Collapser
    id="apt"
    title={<>aptでインストール（<img src={osDebian} title="Debian icon" alt="Debian.webp" style={{ height: '32px', width: '32px', verticalAlign: 'middle' }}/>Debian、<img src={osUbuntu} title="ubuntu icon" alt="ubuntu icon" style={{ height: '32px', width: '32px', verticalAlign: 'middle' }}/>Ubuntu）</>}
  >
    以下の手順に従い、`apt`でオンホストのインテグレーションをインストールしてください。

    1. まだ無い場合は、ご利用のオペレーティングシステムに合わせた [Infrastructureエージェント](/docs/infrastructure/install-infrastructure-agent/get-started/install-infrastructure-agent-new-relic)をインストールしてください。

    2. コマンドラインから、以下を実行してください。

       ```
       sudo apt-get update
       ```

    3. 以下のコマンドを実行します。コマンドのINTEGRATION_FILE_NAMEは、インテグレーションのファイル名を表します。詳しくは、[インテグレーションのドキュメンテーション](/docs/integrations/host-integrations/host-integrations-list)を参照してください。

       ```
       sudo apt-get install INTEGRATION_FILE_NAME
       ```

    4. [特定のオンホストのインテグレーション](/docs/infrastructure/host-integrations/host-integrations-list)に関しては、追加のインストール手順に従ってください。
  </Collapser>

  <Collapser
    id="yum"
    title={<>yumでインストール（<img src={osAmazonLinux} title="amazon linux.webp" alt="amazon linux.webp" style={{ height: '32px', width: '32px', verticalAlign: 'middle' }}/>Amazon Linux、<img src={osCentos} title="centos icon" alt="centos icon" style={{ height: '32px', width: '32px', verticalAlign: 'middle' }}/>CentOS、<img src={osRedhat} title="redhat icon" alt="redhat icon" style={{ height: '32px', width: '32px', verticalAlign: 'middle' }}/>RHEL）</>}
  >
    `yum`を使用してインテグレーションパッケージをインストールするには、次の手順を実行します。

    1. まだ無い場合は、ご利用のオペレーティングシステムに合わせた [Infrastructureエージェント](/docs/infrastructure/install-infrastructure-agent/get-started/install-infrastructure-agent-new-relic)をインストールしてください。

    2. コマンドラインから、以下を実行してください。

       ```
       sudo yum -q makecache -y --disablerepo='*' --enablerepo='newrelic-infra'
       ```

    3. 以下のコマンドを実行します。コマンドのINTEGRATION_FILE_NAMEは、インテグレーションのファイル名を表します。詳しくは、[特定のオンホストインテグレーション](/docs/infrastructure/host-integrations/host-integrations-list)を参照してください。

       ```
       sudo yum install INTEGRATION_FILE_NAME
       ```

    4. [特定のオンホストのインテグレーション](/docs/infrastructure/host-integrations/host-integrations-list)に関しては、追加のインストール手順に従ってください。
  </Collapser>

  <Collapser
    id="zypper"
    title={<>zypperでインストール（<img src={osSuse} title="suse icon" alt="suse icon" style={{ height: '32px', width: '32px', verticalAlign: 'middle' }}/>SLES）</>}
  >
    以下の手順に従い、zypper でオンホストのインテグレーションをインストールしてください。

    1. New Relic Infrastructureがまだ無い場合は、ご利用のオペレーティングシステムに合わせた [Infrastructureエージェント](/docs/infrastructure/install-infrastructure-agent/get-started/install-infrastructure-agent-new-relic)をインストールしてください。

    2. コマンドラインから、以下を実行してください。

       ```
       sudo zypper -n ref -r newrelic-infra
       ```

    3. 以下のコマンドを実行します。コマンドのINTEGRATION_FILE_NAMEは、インテグレーションのファイル名を表します。詳しくは、[インテグレーションのドキュメンテーション](/docs/integrations/host-integrations/host-integrations-list)を参照してください。

       ```
       sudo zypper -n install INTEGRATION_FILE_NAME
       ```

    4. [特定のオンホストのインテグレーション](/docs/infrastructure/host-integrations/host-integrations-list)に関しては、追加のインストール手順に従ってください。
  </Collapser>

  <Collapser
    id="tarball"
    title={<>tarballでインストール（<img src={osLinux} title="Linux" alt="Linux icon" style={{ height: '32px', width: '32px', verticalAlign: 'middle' }}/>その他のディストリビューション）</>}
  >
    <Callout variant="tip">
      [ディストリビューションパッケージマネージャを使用して、Infrastructureエージェントをインストールすることを](/docs/infrastructure/install-configure-manage-infrastructure/linux-installation/install-infrastructure-linux-using-package-manager)お勧めします。[エージェントを手動でインストールする](/docs/infrastructure/install-configure-manage-infrastructure/linux-installation/tarball-manual-install-infrastructure-linux)場合は、用意されているtarファイルからオンホストインテグレーションをインストールすることもできます。
    </Callout>

    手動のインストールプロセスは、自動化されていません。手動インストールを選択した場合、異なるファイルを正しいフォルダに入れると共に、エージェントがすべてのインテグレーションを実行する権限を保有していることを確認する必要があります。

    Tarファイルからインテグレーションをインストールするには：

    1. [tarball リポジトリ](https://download.newrelic.com/infrastructure_agent/binaries/linux/amd64/)からパッケージ化されたインテグレーション ファイルをダウンロードします。

    2. エージェントがインテグレーションの定義、設定、および実行ファイルを見つけることができるように、当社の[インテグレーションのファイル構造と配置ルール](/docs/integrations/integrations-sdk/getting-started/integration-file-structure-activation)に従ってTarファイルを解凍します。

    3. 定義ファイルを含むバイナリを[エージェントディレクトリ](/docs/infrastructure/install-configure-manage-infrastructure/linux-installation/tarball-manual-install-infrastructure-linux#agent-directory)の`newrelic-integrations`または`custom-integrations`に配置します。

    4. インテグレーションの設定ファイルを[プラグインディレクトリ](/docs/infrastructure/install-configure-manage-infrastructure/linux-installation/tarball-manual-install-infrastructure-linux#configure-plugin)の下に配置します。

       `nrjmx`ツールが必要なインテグレーションについては、次の追加の指示に従います。

       #### New Relic JMX ツールの使用 [#nrjmx]

       一部のインテグレーション（[JMX](/docs/integrations/host-integrations/host-integrations-list/jmx-monitoring-integration)、[Cassandra](/docs/integrations/host-integrations/host-integrations-list/cassandra-monitoring-integration)、[Kafka](/docs/integrations/host-integrations/host-integrations-list/kafka-monitoring-integration)など）には、`nrjmx`ツールが必要です。インテグレーションでこのツールが必要な場合は、[当社のリポジトリ](https://download.newrelic.com/infrastructure_agent/binaries/linux/noarch/)からダウンロードして解凍します。

       <Callout variant="important">
         `nrjmx` には、Java 8またはそれ以降が必要です。
       </Callout>

       JMXインテグレーションバージョン2.3.3以上、およびCassandraインテグレーションバージョン2.3.0以上では、`nrjmx`ツールは依存関係として含まれています。このため、パッケージマネージャを使用する場合、`nrjmx`ツールを手作業でインストールする必要はありません。

       `nrjmx`がすでにインストールされており、`nri-jmx`をインストールする場合、当社のJMXツールはすでにインストールされたバージョンを保持します。`nrjmx`がまだインストールされていない場合、最新の`nrjmx`リリースを取得します。

       デフォルトでは、`nrjmx`の場所は`/usr/bin/nrjmx/*`です。別の場所にインストールするには、`NR_JMX_TOOL`環境変数に新しいパスを設定します。
  </Collapser>
</CollapserGroup>

<InstallFeedback/>

## エージェントの更新 [#upgrade]

オンホストインテグレーションが最新の状態であり続けるよう、通常の手順に従い[オンホストのインテグレーションパッケージをアップデートしてください](/docs/infrastructure/host-integrations/installation/update-infrastructure-host-integration-package)。