---
title: Azure Monitor 統合による Azure IoT Hub サービス
metaDescription: 'New Relic''s Microsoft Azure IoT Hub integration: what data it reports and how to enable it.'
translationType: machine
---

[New Relic の統合には、](/docs/infrastructure/integrations-getting-started/getting-started/introduction-infrastructure-integrations) [Microsoft Azure IoT Hub](https://learn.microsoft.com/en-us/azure/iot-hub) メトリクスおよびその他のデータを New Relic にレポートするための統合が含まれます。このドキュメントでは、統合を有効にする方法と、レポートされるデータについて説明します。

## 特徴

New Relic は、Azure IoT Hub サービスのメトリック データを Azure Monitor から収集します。Azure IoT Hub は、クラウドでホストされるマネージド サービスで、IoT アプリケーションとそれに接続されているデバイス間の通信のための中央メッセージ ハブとして機能します。New Relic を使用すると、次のことが可能になります。

* 事前に構築されたダッシュボードで Azure IoT Hub データを表示します。
* [カスタムクエリを実行し、データを視覚化します](/docs/infrastructure/integrations-getting-started/getting-started/use-integration-data-new-relic-insights)。
* データの変化を通知するアラート条件を作成します。

## 統合をアクティブ化する [#activate]

標準の[Azure Monitor 統合手順](/docs/infrastructure/microsoft-azure-integrations/azure-integrations-list/azure-monitor) に従って、New Relic インフラストラクチャ監視で Azure サービスをアクティブ化します。

## 構成とポーリング [#polling]

[構成オプション](/docs/infrastructure/microsoft-azure-integrations/azure-integrations-list/azure-monitor/#settings)を使用して、ポーリング頻度を変更し、データをフィルタリングできます。

New Relic は、既定の [ポーリング](/docs/infrastructure/microsoft-azure-integrations/azure-integrations-list/azure-monitor/#settings) 間隔に従って、Azure Monitor 統合を通じて Azure IoT Hub サービスをクエリします。

## データを見つけて使用する [#find-and-use]

[統合データを調べる](/docs/infrastructure/integrations/find-use-infrastructure-integration-data)には、 **[one.newrelic.com/infra](https://one.newrelic.com/infra) > Azure > (統合を選択)**に移動します。

## メトリックデータ [#metrics]

この統合により、次の [メトリック データ](/docs/infrastructure/integrations-getting-started/getting-started/understand-integration-data-data-types#metric)が収集されます。

### Azure IoT Hub メトリクス [#Azure-iot-hub]

<table>
  <thead>
    <tr>
      <th style={{ width: "300px" }}>
        メトリック
      </th>

      <th>
        説明
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `c2d.commands.egress.abandon.success`
      </td>

      <td>
        デバイスによって放棄されたクラウドからデバイスへのメッセージの数。
      </td>
    </tr>

    <tr>
      <td>
        `c2d.commands.egress.complete.success`
      </td>

      <td>
        デバイスによって正常に完了したクラウドからデバイスへのメッセージ配信の数。
      </td>
    </tr>

    <tr>
      <td>
        `c2d.commands.egress.reject.success`
      </td>

      <td>
        デバイスによって拒否されたクラウドからデバイスへのメッセージの数。
      </td>
    </tr>

    <tr>
      <td>
        `c2d.methods.failure`
      </td>

      <td>
        失敗したすべてのダイレクト メソッド呼び出しの数。
      </td>
    </tr>

    <tr>
      <td>
        `c2d.methods.requestSize`
      </td>

      <td>
        成功したすべてのダイレクト メソッド リクエストの平均、最小、最大。
      </td>
    </tr>

    <tr>
      <td>
        `c2d.methods.responseSize`
      </td>

      <td>
        成功したすべてのダイレクト メソッド応答の平均、最小、最大。
      </td>
    </tr>

    <tr>
      <td>
        `c2d.methods.success`
      </td>

      <td>
        成功したすべてのダイレクト メソッド呼び出しの数。
      </td>
    </tr>

    <tr>
      <td>
        `c2d.twin.read.failure`
      </td>

      <td>
        失敗したバックエンドで開始されたすべてのツイン読み取りの数。
      </td>
    </tr>

    <tr>
      <td>
        `c2d.twin.read.success`
      </td>

      <td>
        バックエンドで開始されたすべての成功したツイン読み取りの数。
      </td>
    </tr>

    <tr>
      <td>
        `c2d.twin.read.size`
      </td>

      <td>
        成功したすべてのバックエンド開始ツイン読み取りの平均、最小、および最大。
      </td>
    </tr>

    <tr>
      <td>
        `c2d.twin.update.failure`
      </td>

      <td>
        バックエンドで開始されたツイン更新の失敗したすべての数。
      </td>
    </tr>

    <tr>
      <td>
        `c2d.twin.update.size`
      </td>

      <td>
        成功したすべてのバックエンドで開始されたツイン更新の平均、最小、最大サイズ。
      </td>
    </tr>

    <tr>
      <td>
        `c2d.twin.update.success`
      </td>

      <td>
        バックエンドで開始され、成功したすべてのツイン更新の数。
      </td>
    </tr>

    <tr>
      <td>
        `C2DMessagesExpired`
      </td>

      <td>
        期限切れのクラウドからデバイスへのメッセージの数。
      </td>
    </tr>

    <tr>
      <td>
        `configurations`
      </td>

      <td>
        構成操作のメトリクス。
      </td>
    </tr>

    <tr>
      <td>
        `connectedDeviceCount`
      </td>

      <td>
        IoT ハブに接続されているデバイスの数。
      </td>
    </tr>

    <tr>
      <td>
        `d2c.endpoints.egress.builtIn.events`
      </td>

      <td>
        IoT Hub ルーティングが組み込みエンドポイントにメッセージを正常に配信した回数 (メッセージ/イベント)。
      </td>
    </tr>

    <tr>
      <td>
        `d2c.endpoints.egress.eventHubs`
      </td>

      <td>
        IoT Hub ルーティングがメッセージを Event Hub エンドポイントに正常に配信した回数。
      </td>
    </tr>

    <tr>
      <td>
        `d2c.endpoints.egress.serviceBusQueues`
      </td>

      <td>
        IoT Hub ルーティングが Service Bus キュー エンドポイントにメッセージを正常に配信した回数。
      </td>
    </tr>

    <tr>
      <td>
        `d2c.endpoints.egress.serviceBusTopics`
      </td>

      <td>
        IoT Hub ルーティングが Service Bus トピック エンドポイントにメッセージを正常に配信した回数。
      </td>
    </tr>

    <tr>
      <td>
        `d2c.endpoints.egress.storage`
      </td>

      <td>
        IoT Hub ルーティングがメッセージをストレージ エンドポイントに正常に配信した回数。
      </td>
    </tr>

    <tr>
      <td>
        `d2c.endpoints.egress.storage.blobs`
      </td>

      <td>
        IoT Hub ルーティングが BLOB をストレージ エンドポイントに配信した回数。
      </td>
    </tr>

    <tr>
      <td>
        `d2c.endpoints.egress.storage.bytes`
      </td>

      <td>
        ストレージ エンドポイントに配信される IoT Hub ルーティングのデータ量 (バイト)。
      </td>
    </tr>

    <tr>
      <td>
        `d2c.endpoints.latency.builtIn.events`
      </td>

      <td>
        IoT Hub へのメッセージ受信と、組み込みエンドポイント (メッセージ/イベント) へのテレメトリ メッセージ受信の間の平均待機時間 (ミリ秒)。
      </td>
    </tr>

    <tr>
      <td>
        `d2c.endpoints.latency.eventHubs`
      </td>

      <td>
        IoT Hub へのメッセージ受信と Event Hub エンドポイントへのメッセージ受信の間の平均待機時間 (ミリ秒)。
      </td>
    </tr>

    <tr>
      <td>
        `d2c.endpoints.latency.serviceBusQueues`
      </td>

      <td>
        IoT Hub へのメッセージ受信と、Service Bus キュー エンドポイントへのテレメトリ メッセージ受信の間の平均待機時間 (ミリ秒)。
      </td>
    </tr>

    <tr>
      <td>
        `d2c.endpoints.latency.serviceBusTopics`
      </td>

      <td>
        IoT Hub へのメッセージ受信と、Service Bus トピック エンドポイントへのテレメトリ メッセージ受信の間の平均待機時間 (ミリ秒)。
      </td>
    </tr>

    <tr>
      <td>
        `d2c.endpoints.latency.storage`
      </td>

      <td>
        IoT Hub へのメッセージ受信とストレージ エンドポイントへのテレメトリ メッセージ受信の間の平均待機時間 (ミリ秒)。
      </td>
    </tr>

    <tr>
      <td>
        `d2c.telemetry.egress.dropped`
      </td>

      <td>
        エンドポイントが停止したために、IoT Hub ルーティングによってメッセージがドロップされた回数。ドロップされたメッセージはフォールバック ルートには配信されないため、この値にはフォールバック ルートに配信されるメッセージはカウントされません。
      </td>
    </tr>

    <tr>
      <td>
        `d2c.telemetry.egress.fallback`
      </td>

      <td>
        IoT Hub ルーティングがフォールバック ルートに関連付けられたエンドポイントにメッセージを配信した回数。
      </td>
    </tr>

    <tr>
      <td>
        `d2c.telemetry.egress.invalid`
      </td>

      <td>
        エンドポイントとの互換性がないために、IoT Hub ルーティングがメッセージの配信に失敗した回数。この値には再試行は含まれません。
      </td>
    </tr>

    <tr>
      <td>
        `d2c.telemetry.egress.orphaned`
      </td>

      <td>
        メッセージがルーティング ルール (フォールバック ルールを含む) に一致しなかったために、IoT Hub ルーティングによって孤立した回数。
      </td>
    </tr>

    <tr>
      <td>
        `d2c.telemetry.egress.success`
      </td>

      <td>
        IoT Hub ルーティングを使用してメッセージがすべてのエンドポイントに正常に配信された回数。メッセージが複数のエンドポイントにルーティングされる場合、この値は配信が成功するたびに 1 ずつ増加します。メッセージが同じエンドポイントに複数回配信される場合、この値は配信が成功するたびに 1 ずつ増加します。
      </td>
    </tr>

    <tr>
      <td>
        `d2c.telemetry.ingress.allProtocol`
      </td>

      <td>
        IoT ハブへの送信が試行されたデバイスからクラウドへのテレメトリ メッセージの数。
      </td>
    </tr>

    <tr>
      <td>
        `d2c.telemetry.ingress.sendThrottle`
      </td>

      <td>
        デバイスのスループット スロットルによるスロットリング エラーの数。
      </td>
    </tr>

    <tr>
      <td>
        `d2c.telemetry.ingress.success`
      </td>

      <td>
        IoT ハブに正常に送信されたデバイスからクラウドへのテレメトリ メッセージの数。
      </td>
    </tr>

    <tr>
      <td>
        `d2c.twin.read.failure`
      </td>

      <td>
        失敗したすべてのデバイス開始ツイン読み取りの数。
      </td>
    </tr>

    <tr>
      <td>
        `d2c.twin.read.size`
      </td>

      <td>
        成功したすべてのデバイス開始ツイン読み取りの平均、最小、および最大。
      </td>
    </tr>

    <tr>
      <td>
        `d2c.twin.read.success`
      </td>

      <td>
        デバイスによって開始されたすべての成功したツイン読み取りの数。
      </td>
    </tr>

    <tr>
      <td>
        `d2c.twin.update.failure`
      </td>

      <td>
        失敗したすべてのデバイス開始ツイン更新の数。
      </td>
    </tr>

    <tr>
      <td>
        `d2c.twin.update.size`
      </td>

      <td>
        成功したすべてのデバイスによって開始されたツイン更新の平均、最小、および最大サイズ。
      </td>
    </tr>

    <tr>
      <td>
        `d2c.twin.update.success`
      </td>

      <td>
        デバイスによって開始された、成功したすべてのツイン更新の数。
      </td>
    </tr>

    <tr>
      <td>
        `dailyMessageQuotaUsed`
      </td>

      <td>
        今日使用されたメッセージの総数。
      </td>
    </tr>

    <tr>
      <td>
        `deviceDataUsage`
      </td>

      <td>
        IoTHub に接続されているデバイスとの間で転送されたバイト数。
      </td>
    </tr>

    <tr>
      <td>
        `deviceDataUsageV2`
      </td>

      <td>
        IoTHub に接続されているデバイスとの間で転送されたバイト数。
      </td>
    </tr>

    <tr>
      <td>
        `devices.connectedDevices.allProtocol`
      </td>

      <td>
        IoT ハブに接続されているデバイスの数。
      </td>
    </tr>

    <tr>
      <td>
        `devices.totalDevices`
      </td>

      <td>
        IoT ハブに登録されているデバイスの数。
      </td>
    </tr>

    <tr>
      <td>
        `EventGridDeliveries`
      </td>

      <td>
        Event Grid に発行された IoT Hub イベントの数。成功したリクエストと失敗したリクエストの数には、結果ディメンションを使用します。EventType ディメンションは、イベントのタイプを示します。
      </td>
    </tr>

    <tr>
      <td>
        `EventGridLatency`
      </td>

      <td>
        IoT Hub イベントが生成されてからイベントが Event Grid に発行されるまでの平均待機時間 (ミリ秒)。この数値は、すべてのイベント タイプの平均です。EventType ディメンションを使用して、特定の種類のイベントの待機時間を確認します。
      </td>
    </tr>

    <tr>
      <td>
        `jobs.cancelJob.failure`
      </td>

      <td>
        ジョブをキャンセルするために失敗したすべての呼び出しの数。
      </td>
    </tr>

    <tr>
      <td>
        `jobs.cancelJob.success`
      </td>

      <td>
        ジョブをキャンセルするために成功したすべての呼び出しの数。
      </td>
    </tr>

    <tr>
      <td>
        `jobs.completed`
      </td>

      <td>
        完了したすべてのジョブの数。
      </td>
    </tr>

    <tr>
      <td>
        `jobs.createDirectMethodJob.failure`
      </td>

      <td>
        失敗したダイレクト メソッド呼び出しジョブのすべての作成の数。
      </td>
    </tr>

    <tr>
      <td>
        `jobs.createDirectMethodJob.success`
      </td>

      <td>
        ダイレクト メソッド呼び出しジョブの作成に成功したすべての数。
      </td>
    </tr>

    <tr>
      <td>
        `jobs.createTwinUpdateJob.failure`
      </td>

      <td>
        ツイン更新ジョブの作成に失敗したすべての数。
      </td>
    </tr>

    <tr>
      <td>
        `jobs.createTwinUpdateJob.success`
      </td>

      <td>
        ツイン更新ジョブの作成に成功したすべての数。
      </td>
    </tr>

    <tr>
      <td>
        `jobs.failed`
      </td>

      <td>
        失敗したすべてのジョブの数。
      </td>
    </tr>

    <tr>
      <td>
        `jobs.listJobs.failure`
      </td>

      <td>
        ジョブをリストするための失敗したすべての呼び出しの数。
      </td>
    </tr>

    <tr>
      <td>
        `jobs.listJobs.success`
      </td>

      <td>
        ジョブをリストするための成功したすべての呼び出しの数。
      </td>
    </tr>

    <tr>
      <td>
        `jobs.queryJobs.failure`
      </td>

      <td>
        失敗したジョブ クエリ。
      </td>
    </tr>

    <tr>
      <td>
        `jobs.queryJobs.success`
      </td>

      <td>
        ジョブをクエリするための成功したすべての呼び出しの数。
      </td>
    </tr>

    <tr>
      <td>
        `RoutingDataSizeInBytesDelivered`
      </td>

      <td>
        IoT ハブによってエンドポイントに配信されるメッセージの合計サイズ (バイト単位)。EndpointName および EndpointType ディメンションを使用して、さまざまなエンドポイントに配信されるメッセージのサイズをバイト単位で表示できます。メトリック値は、メッセージが複数のエンドポイントに配信された場合や、メッセージが同じエンドポイントに複数回配信された場合など、配信されるメッセージごとに増加します。
      </td>
    </tr>

    <tr>
      <td>
        `RoutingDeliveries`
      </td>

      <td>
        IoT Hub がルーティングを使用してすべてのエンドポイントにメッセージを配信しようとした回数。成功または失敗した試行の数を確認するには、結果ディメンションを使用します。無効、削除、孤立などの失敗の理由を確認するには、FailureReasonCategory ディメンションを使用します。EndpointName ディメンションと EndpointType ディメンションを使用して、さまざまなエンドポイントに配信されたメッセージの数を把握することもできます。メトリック値は、メッセージが複数のエンドポイントに配信された場合や、メッセージが同じエンドポイントに複数回配信された場合など、配信試行ごとに 1 ずつ増加します。
      </td>
    </tr>

    <tr>
      <td>
        `RoutingDeliveryLatency`
      </td>

      <td>
        IoT Hub へのメッセージ受信とエンドポイントへのテレメトリ メッセージ受信の間の平均待機時間 (ミリ秒)。EndpointName ディメンションと EndpointType ディメンションを使用すると、さまざまなエンドポイントまでのレイテンシーを把握できます。
      </td>
    </tr>

    <tr>
      <td>
        `totalDeviceCount`
      </td>

      <td>
        IoT ハブに登録されているデバイスの数。
      </td>
    </tr>

    <tr>
      <td>
        `twinQueries.failure`
      </td>

      <td>
        失敗したすべてのツイン クエリの数。
      </td>
    </tr>

    <tr>
      <td>
        `twinQueries.resultSize`
      </td>

      <td>
        成功したすべてのツイン クエリの結果サイズの平均、最小、最大。
      </td>
    </tr>

    <tr>
      <td>
        `twinQueries.success`
      </td>

      <td>
        成功したすべてのツイン クエリの数。
      </td>
    </tr>
  </tbody>
</table>