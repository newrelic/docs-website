---
title: Google Cloud Spannerモニタリング統合
tags:
  - Integrations
  - Google Cloud Platform integrations
  - GCP integrations list
metaDescription: 'New Relic''s Google Cloud Spanner integration: how to activate it and what data it reports.'
freshnessValidatedDate: never
translationType: machine
---

[Google CloudNew Relic](https://cloud.google.com/spanner/)[Google Cloud Platform と (GCP)](https://cloud.google.com) [New Relicの](/docs/infrastructure/introduction-infra-monitoring) には 、 Spanner データをNew Relic に報告するための統合が含まれます。このドキュメントでは、GCP Cloud Spanner 統合を有効にする方法と、レポートできるデータについて説明します。

## 特徴 [#features]

Google Cloud Spanner サービスは、クラウド用に構築されたグローバルに分散されたリレーショナルデータベースサービスです。 [Google Spanner Console](https://cloud.google.com/spanner/docs/quickstart-console) を使用して、開発者は Cloud Spanner インスタンスの作成、スキーマの追加、データの書き込みと変更、クエリーの実行を行うことができます。

## 統合をアクティブ化する [#activate]

統合を有効にするには、標準的な手順に従って [GCP サービスを New Relic](/docs/connect-google-cloud-platform-services-infrastructure) に接続してください。

## ポーリング頻度 [#polling]

New Relic の統合は、統合に応じて異なるポーリング間隔に従って GCP サービスに問い合わせを行います。Google Cloud Spanner のポーリング間隔は 5 分です。解像度は1分ごとに1データポイントです。

## データを見つけて使用する [#find-data]

インテグレーションを有効化し、数分待つと（[ポーリング頻度](#polling)に基づきます）、 New Relic UIにデータが表示されます。 <InlinePopover type="dashboards" />や集計設定へのリンクを含む[データを検索して使用する](/docs/infrastructure/integrations/find-use-infrastructure-integration-data)には、 <DNT>**[one.newrelic.com &gt; All capabilities](https://one.newrelic.com/all-capabilities) &gt; Infrastructure &gt; GCP &gt; (select an integration)**</DNT>にアクセスしてください。

## メトリックデータ [#metrics]

NewRelicでのGCPSpanner統合の[指標データ](/docs/integrations/new-relic-integrations/getting-started/#metric)を表示するには、 `GcpSpannerInstanceSample` イベントと`GcpSpannerDatabaseSample`[イベント](/docs/data-apis/understand-data/new-relic-data-types/#event-data)およびそれらに関連する属性の[NRQLクエリを作成](/docs/integrations/new-relic-integrations/getting-started/use-integration-data-new-relic-insights#nrql)します。

### GcpSpannerInstanceSample [#gcp-spanner-instance-sample]

New Relicで`GcpSpannerInstanceSample`イベントをクエリして、次の属性のデータを表示します。

<table>
  <thead>
    <tr>
      <th style={{ width: "300px" }}>
        属性
      </th>

      <th>
        説明
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `instance.autoscaling.HighPriorityCpuUtilizationTarget`
      </td>

      <td>
        自動スケーリングに使用される優先度の高い CPU 使用率ターゲット。
      </td>
    </tr>

    <tr>
      <td>
        `instance.autoscaling.MaxNodes`
      </td>

      <td>
        オートスケーラーがインスタンスに割り当てることができるノードの最大数。
      </td>
    </tr>

    <tr>
      <td>
        `instance.autoscaling.MaxProcessingUnits`
      </td>

      <td>
        オートスケーラーがインスタンスに割り当てることができる処理ユニットの最大数。
      </td>
    </tr>

    <tr>
      <td>
        `instance.autoscaling.MinNodes`
      </td>

      <td>
        オートスケーラーがインスタンスに割り当てることができるノードの最小数。
      </td>
    </tr>

    <tr>
      <td>
        `instance.autoscaling.MinProcessingUnits`
      </td>

      <td>
        オートスケーラーがインスタンスに割り当てることができる処理ユニットの最小数。
      </td>
    </tr>

    <tr>
      <td>
        `instance.autoscaling.StorageUtilizationTarget`
      </td>

      <td>
        自動スケーリングに使用されるストレージ使用率ターゲット。
      </td>
    </tr>

    <tr>
      <td>
        `instance.backup.UsedBytes`
      </td>

      <td>
        使用されているバックアップ ストレージ (バイト単位)。
      </td>
    </tr>

    <tr>
      <td>
        `instance.cpu.SmoothedUtilization`
      </td>

      <td>
        プロビジョニングされた CPU の 24 時間の平滑化使用率。値は通常 0.0 から 1.0 までの数値ですが (1.0 を超える場合もあります)、グラフでは値が 0% から 100% (またはそれ以上) のパーセンテージとして表示されます。
      </td>
    </tr>

    <tr>
      <td>
        `instance.cpu.Utilization`
      </td>

      <td>
        プロビジョニングされた CPU の使用率。値は通常 0.0 から 1.0 までの数値ですが (1.0 を超える場合もあります)、グラフでは値が 0% から 100% (またはそれ以上) のパーセンテージとして表示されます。
      </td>
    </tr>

    <tr>
      <td>
        `instance.cpu.UtilizationByOperationType`
      </td>

      <td>
        操作タイプ別の、プロビジョニングされた CPU の使用率。値は通常 0.0 から 1.0 までの数値ですが (1.0 を超える場合もあります)、グラフでは値が 0% から 100% (またはそれ以上) のパーセンテージとして表示されます。現在、システム タスクの CPU 使用率は含まれていません。
      </td>
    </tr>

    <tr>
      <td>
        `instance.cpu.UtilizationByPriority`
      </td>

      <td>
        優先度別の、プロビジョニングされた CPU の使用率。値は通常 0.0 から 1.0 までの数値ですが (1.0 を超える場合もあります)、グラフでは値が 0% から 100% (またはそれ以上) のパーセンテージとして表示されます。
      </td>
    </tr>

    <tr>
      <td>
        `instance.dataBoost.ProcessingUnitSeconds`
      </td>

      <td>
        DataBoost 操作に使用される合計処理ユニット。
      </td>
    </tr>

    <tr>
      <td>
        `instance.LeaderPercentageByRegion`
      </td>

      <td>
        cloudリージョン別のリーダーの割合。 値は通常 0.0 から 1.0 までの数値で、グラフでは 0% から 100% までのパーセンテージとして値が表示されます。
      </td>
    </tr>

    <tr>
      <td>
        `instance.nodes`
      </td>

      <td>
        ノードの総数。
      </td>
    </tr>

    <tr>
      <td>
        `instance.ProcessingUnits`
      </td>

      <td>
        処理ユニットの合計数。
      </td>
    </tr>

    <tr>
      <td>
        `instance.sessions`
      </td>

      <td>
        使用中のセッション数
      </td>
    </tr>

    <tr>
      <td>
        `instance.storage.LimitBytes`
      </td>

      <td>
        インスタンスのストレージ制限（バイト単位）。
      </td>
    </tr>

    <tr>
      <td>
        `instance.storage.LimitBytesPerProcessingUnit`
      </td>

      <td>
        処理単位あたりのストレージ制限（バイト単位）。
      </td>
    </tr>

    <tr>
      <td>
        `instance.storage.UsedBytes`
      </td>

      <td>
        使用されるストレージをバイト単位で表示します。
      </td>
    </tr>

    <tr>
      <td>
        `instance.storage.Utilization`
      </td>

      <td>
        ストレージ制限の一部として使用されるストレージ。
      </td>
    </tr>
  </tbody>
</table>

### GcpSpannerDatabaseSample [#gcp-spanner-database-sample]

New Relicで`GcpSpannerDatabaseSample`イベントをクエリして、次の属性のデータを表示します。

<table>
  <thead>
    <tr>
      <th style={{ width: "300px" }}>
        属性
      </th>

      <th>
        説明
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `api.apiRequests`
      </td>

      <td>
        Cloud Spanner API requests 。
      </td>
    </tr>

    <tr>
      <td>
        `api.ReceivedBytes`
      </td>

      <td>
        Cloud Spannerが受信した非圧縮のリクエストバイト。
      </td>
    </tr>

    <tr>
      <td>
        `api.Requests`
      </td>

      <td>
        クラウドスパナのAPIリクエストの割合。
      </td>
    </tr>

    <tr>
      <td>
        `api.RequestLatencies`
      </td>

      <td>
        データベースに対するサーバーリクエストのレイテンシーの分布。これには、クラウドスパナーのバックエンドとAPIレイヤーにおけるリクエスト処理のレイテンシーが含まれます。クライアントとサーバー間のネットワークやリバースプロキシのオーバーヘッドは含まれません。
      </td>
    </tr>

    <tr>
      <td>
        `api.RequestLatenciesByTransactionType`
      </td>

      <td>
        データベースに対するサーバーリクエストのレイテンシーの分布。これには、クラウドスパナーのバックエンドとAPIレイヤーにおけるリクエスト処理のレイテンシーが含まれます。クライアントとサーバー間のネットワークやリバースプロキシのオーバーヘッドは含まれません。
      </td>
    </tr>

    <tr>
      <td>
        `api.SentBytes`
      </td>

      <td>
        Cloud Spannerが送信した非圧縮のレスポンスバイト。
      </td>
    </tr>

    <tr>
      <td>
        `lockStat.total.LockWaitTime`
      </td>

      <td>
        データベース全体に記録されたロック競合の合計ロック待機時間。
      </td>
    </tr>

    <tr>
      <td>
        `queries`
      </td>

      <td>
        データベース名、ステータス、書き込みタイプ、および使用されているオプティマイザーのバージョン別の書き込み数。
      </td>
    </tr>

    <tr>
      <td>
        `queryStat.total.BytesReturned`
      </td>

      <td>
        転送エンコードのオーバーヘッドを除く、クエリが返したデータ バイト数。
      </td>
    </tr>

    <tr>
      <td>
        `queryStat.total.CpuTime`
      </td>

      <td>
        Cloud Spanner がクエリを実行する操作に費やした CPU 時間 (秒数)。
      </td>
    </tr>

    <tr>
      <td>
        `queryStat.total.Executions`
      </td>

      <td>
        間隔中に Cloud Spanner がクエリを確認した回数。
      </td>
    </tr>

    <tr>
      <td>
        `queryStat.total.FailedExecutions`
      </td>

      <td>
        間隔中にクエリが失敗した回数。
      </td>
    </tr>

    <tr>
      <td>
        `queryStat.total.QueryLatencies`
      </td>

      <td>
        データベース内でのクエリ実行の合計時間 (秒単位) の分布。
      </td>
    </tr>

    <tr>
      <td>
        `queryStat.total.RemoteServiceCalls`
      </td>

      <td>
        リモート サービス呼び出しの数。
      </td>
    </tr>

    <tr>
      <td>
        `queryStat.total.RemoteServiceCallsLatencies`
      </td>

      <td>
        リモートサービスコールのレイテンシ。
      </td>
    </tr>

    <tr>
      <td>
        `queryStat.total.RemoteServiceNetworkBytesSizes`
      </td>

      <td>
        リモート サービスと交換されたネットワーク バイト。
      </td>
    </tr>

    <tr>
      <td>
        `queryStat.total.RemoteServiceProcessedRows`
      </td>

      <td>
        リモート サービスによって処理された行数。
      </td>
    </tr>

    <tr>
      <td>
        `queryStat.total.RemoteServiceProcessedRowsLatencies`
      </td>

      <td>
        リモート サービスによって処理された行のレイテンシ。
      </td>
    </tr>

    <tr>
      <td>
        `queryStat.total.ReturnedRows`
      </td>

      <td>
        クエリによって返された行数。
      </td>
    </tr>

    <tr>
      <td>
        `queryStat.total.ScannedRows`
      </td>

      <td>
        削除された値を除いてクエリがスキャンした行数。
      </td>
    </tr>

    <tr>
      <td>
        `readStat.total.BytesReturned`
      </td>

      <td>
        送信エンコードのオーバーヘッドを除いて、読み取りによって返されたデータ バイトの合計数。
      </td>
    </tr>

    <tr>
      <td>
        `readStat.total.ClientWaitTime`
      </td>

      <td>
        スロットルにより待機に費やされた秒数。
      </td>
    </tr>

    <tr>
      <td>
        `readStat.total.CpuTime`
      </td>

      <td>
        プリフェッチ CPU やその他のオーバーヘッドを除いて、Cloud Spanner が読み取り実行に費やした CPU 時間の秒数。
      </td>
    </tr>

    <tr>
      <td>
        `readStat.total.Executions`
      </td>

      <td>
        間隔中に Cloud Spanner が読み取りシェイプを実行した回数。
      </td>
    </tr>

    <tr>
      <td>
        `readStat.total.LeaderRefreshDelay`
      </td>

      <td>
        マルチリージョン構成のインスタンス間で読み取りを調整するのに費やされた秒数。
      </td>
    </tr>

    <tr>
      <td>
        `readStat.total.LockingDelays`
      </td>

      <td>
        ロックによる待機に費やされた合計時間の分布（秒単位）。
      </td>
    </tr>

    <tr>
      <td>
        `readStat.total.ReturnedRows`
      </td>

      <td>
        読み取りによって返された行数。
      </td>
    </tr>

    <tr>
      <td>
        `rowDeletionPolicy.DeletedRows`
      </td>

      <td>
        最後のサンプル以降にポリシーによって削除された行の数。
      </td>
    </tr>

    <tr>
      <td>
        `rowDeletionPolicy.ProcessedWatermarkAge`
      </td>

      <td>
        現在から、最後に成功した実行の読み取りタイムスタンプまでの時間。バックグラウンド タスクが対象のデータをバッチで削除するときに実行が発生し、削除できない行があっても成功します。
      </td>
    </tr>

    <tr>
      <td>
        `rowDeletionPolicy.UndeletableRows`
      </td>

      <td>
        データベース内のすべてのテーブルで削除できない行の数。たとえば、子行が多すぎて削除するとトランザクション制限を超えてしまうような場合は、行を削除できません。
      </td>
    </tr>

    <tr>
      <td>
        `transactionStat.total.BytesWritten`
      </td>

      <td>
        トランザクションによって書き込まれたバイト数。
      </td>
    </tr>

    <tr>
      <td>
        `transactionStat.total.CommitAttempts`
      </td>

      <td>
        トランザクションのコミット試行回数。
      </td>
    </tr>

    <tr>
      <td>
        `transactionStat.total.CommitRetries`
      </td>

      <td>
        以前中止されたトランザクション試行からの再試行であるコミット試行の数。
      </td>
    </tr>

    <tr>
      <td>
        `transactionStat.total.Participants`
      </td>

      <td>
        各コミット試行の参加者総数の分布。
      </td>
    </tr>

    <tr>
      <td>
        `transactionStat.total.TransactionLatencies`
      </td>

      <td>
        トランザクションの最初の操作からコミットまたは中止までにかかった合計秒数の分布。
      </td>
    </tr>
  </tbody>
</table>