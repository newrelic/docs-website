---
title: Google Cloud Pub/Sub モニタリングの統合
tags:
  - Integrations
  - Google Cloud Platform integrations
  - GCP integrations list
metaDescription: 'New Relic''s Google Cloud Pub/Sub integration: how to activate it and what data it reports.'
translationType: machine
---

[New Relic の](/docs/infrastructure/integrations-getting-started/getting-started/introduction-infrastructure-integrations) と [Google Cloud Platform (GCP)](https://cloud.google.com/) との統合には、 [Google Cloud Pub/Sub](https://cloud.google.com/pubsub/) のデータを New Relic に報告する統合が含まれています。このドキュメントでは、GCP Pub/Sub 統合を有効にする方法と、報告されるデータについて説明します。

## 機能

Google Cloud [ストリーム分析ソリューション](https://cloud.google.com/solutions/stream-analytics) の一環として、Cloud Pub/Sub サービスは、迅速なデータ処理と分析のためにイベントストリームを取り込み、配信します。

## 統合を有効にする [#activate]

統合を有効にするには、標準的な手順に従って [GCP サービスを New Relic](/docs/connect-google-cloud-platform-services-infrastructure) に接続してください。

## ポーリング頻度 [#polling]

New Relic の統合は、統合によって異なるポーリング間隔に従って GCP サービスに問い合わせを行います。Google Cloud Pub/Sub のポーリング間隔は 5 分です。解像度は1分ごとに1データポイントです。

## データの検索と使用 [#find-data]

統合を有効にして数分（ポーリング頻度に基づく [](#polling)）待つと、データが New Relic UI に表示されます。 [ダッシュボードやアラート設定へのリンクを含むデータ](/docs/infrastructure/integrations/find-use-infrastructure-integration-data) を見つけて使用するには、 [**one.newrelic.com**](http://one.newrelic.com) **> インフラストラクチャー> GCP> (select an integration)** をご覧ください。

## メトリックデータ [#metrics]

Pub/Subトピックは、メッセージのフィードを表す名前付きエンティティで、サブスクリプションは、特定のトピックのメッセージの宛先を表す名前付きエンティティです。

New Relic で GCP Pub/Sub 統合の [メトリックデータ](/docs/telemetry-data-platform/understand-data/new-relic-data-types/#metrics) を表示するには、 [](/docs/integrations/new-relic-integrations/getting-started/use-integration-data-new-relic-insights#nrql)`GcpPubSubTopicSample` と `GcpPubSubSubscriptionSample` [イベント](/docs/insights/use-insights-ui/getting-started/introduction-new-relic-insights#event-type) とその関連属性に対する NRQL クエリを作成します。

### GcpPubSubTopicSample [#gcp-app-engine-service-sample]

Query `GcpPubSubTopicSample` イベントをNew Relicで検索すると、以下の属性のデータが表示されます。

<dd>
  <table>
    <thead>
      <tr>
        <th style={{ width: "400px" }}>
          属性
        </th>

        <th>
          説明
        </th>
      </tr>
    </thead>

    <tbody>
      <tr>
        <td>
          `topic.ByteCost`
        </td>

        <td>
          バイト単位で計測されるオペレーションのコスト。これはクォータの使用率を測定するために使用されます。
        </td>
      </tr>

      <tr>
        <td>
          `トピック.ConfigUpdates`
        </td>

        <td>
          設定変更の累積数。操作の種類と結果でグループ化されている。
        </td>
      </tr>

      <tr>
        <td>
          `topic.MessageSizes`
        </td>

        <td>
          パブリッシュメッセージのサイズ（単位：バイト）の分布。
        </td>
      </tr>

      <tr>
        <td>
          `トピック.NumRetainedAckedMessagesByRegion`
        </td>

        <td>
          トピックに保持されている確認済みメッセージの数（クラウド地域別）。
        </td>
      </tr>

      <tr>
        <td>
          `トピック.NumUnackedMessagesByRegion`
        </td>

        <td>
          トピック内の未確認メッセージ数をクラウド地域別に集計したものです。
        </td>
      </tr>

      <tr>
        <td>
          `トピック.OldestRetainedAckedMessageAgeByRegion`
        </td>

        <td>
          トピックに保持されている最も古い確認済みメッセージの年齢（秒単位）をクラウド地域別に分類したもの。
        </td>
      </tr>

      <tr>
        <td>
          `トピック.OldestUnackedMessageAgeByRegion`
        </td>

        <td>
          トピック内で最も古い未確認メッセージの年齢（秒単位）を、クラウドの地域別に分類したもの。
        </td>
      </tr>

      <tr>
        <td>
          `トピック.リテインドアックドバイトバイトバイリージョン`
        </td>

        <td>
          トピックに保持されている確認済みメッセージの総バイトサイズをクラウドのリージョン別に分類したもの。
        </td>
      </tr>

      <tr>
        <td>
          `トピック.SendMessageOperation`
        </td>

        <td>
          公開メッセージ操作の累積数。
        </td>
      </tr>

      <tr>
        <td>
          `トピック.SendRequest`
        </td>

        <td>
          公開リクエストの累積数
        </td>
      </tr>

      <tr>
        <td>
          `topic.UnackedBytesByRegion`
        </td>

        <td>
          トピック内の未確認メッセージの総バイト数を、クラウドのリージョン別に集計したものです。
        </td>
      </tr>
    </tbody>
  </table>
</dd>

### GcpPubSubSubscriptionSample [#gcp-app-engine-service-sample]

Query `GcpPubSubSubscriptionSample` イベントをNew Relicで検索すると、以下の属性のデータが表示されます。

<dd>
  <table>
    <thead>
      <tr>
        <th style={{ width: "400px" }}>
          属性
        </th>

        <th>
          説明
        </th>
      </tr>
    </thead>

    <tbody>
      <tr>
        <td>
          `subscription.BacklogBytes`
        </td>

        <td>
          サブスクリプション内の未確認メッセージ（別名：バックログメッセージ）の総バイトサイズ。
        </td>
      </tr>

      <tr>
        <td>
          `サブスクリプション.ByteCost`
        </td>

        <td>
          バイト単位で計測した累積操作コスト。クォータの使用率を測定するために使用されます。
        </td>
      </tr>

      <tr>
        <td>
          `subscription.ConfigUpdates`
        </td>

        <td>
          各サブスクリプションの構成変更の累積カウントで、操作タイプと結果によってグループ化されています。
        </td>
      </tr>

      <tr>
        <td>
          `subscription.ModaAckDeadlineMessageOperation`
        </td>

        <td>
          ModifyAckDeadlineメッセージ操作の累積回数を結果別にまとめたものです。
        </td>
      </tr>

      <tr>
        <td>
          `subscription.ModAckDeadlineRequest`
        </td>

        <td>
          ModifyAckDeadlineリクエストの累積カウントで、結果ごとにグループ化されています。
        </td>
      </tr>

      <tr>
        <td>
          `subscription.NumOutstandingMessages`
        </td>

        <td>
          サブスクリプションのプッシュエンドポイントに配信されたが、まだ確認されていないメッセージの数。
        </td>
      </tr>

      <tr>
        <td>
          `subscription.NumRetainedAckedMessages`
        </td>

        <td>
          サブスクリプションで保持される確認済みメッセージの数。
        </td>
      </tr>

      <tr>
        <td>
          `subscription.NumRetainedAckedMessagesByRegion`
        </td>

        <td>
          サブスクリプションで保持されている確認済みメッセージの数（クラウド地域別）。
        </td>
      </tr>

      <tr>
        <td>
          `subscription.NumUnackedMessagesByRegion`
        </td>

        <td>
          サブスクリプション内の未確認メッセージ数（クラウド地域別）。
        </td>
      </tr>

      <tr>
        <td>
          `subscription.NumUndeliveredMessages`
        </td>

        <td>
          サブスクリプション内の未確認メッセージ（別名：バックログメッセージ）の数。
        </td>
      </tr>

      <tr>
        <td>
          `subscription.OldestRetainedAckedMessageAge`
        </td>

        <td>
          サブスクリプションに保持されている最も古い確認済みメッセージの年齢（秒単位）。
        </td>
      </tr>

      <tr>
        <td>
          `subscription.OldestRetainedAckedMessageAgeByRegion`
        </td>

        <td>
          サブスクリプションで保持されている最も古い確認メッセージの年齢（秒単位）をクラウド地域別に分類したものです。
        </td>
      </tr>

      <tr>
        <td>
          `subscription.OldestUnackedMessageAge`
        </td>

        <td>
          サブスクリプション内の最も古い未確認メッセージ（別名：バックログメッセージ）の年齢（秒単位）。
        </td>
      </tr>

      <tr>
        <td>
          `subscription.OldestUnackedMessageAgeByRegion`
        </td>

        <td>
          サブスクリプション内の最も古い未確認メッセージの年齢（秒単位）を、クラウドのリージョンごとに分類したものです。
        </td>
      </tr>

      <tr>
        <td>
          `subscription.PullAckMessageOperation`
        </td>

        <td>
          アクノリッジ・メッセージ操作の累積数を結果別にまとめたもの。
        </td>
      </tr>

      <tr>
        <td>
          `サブスクリプション.PullAckRequest`
        </td>

        <td>
          結果別に分類されたアクノリッジ要求の累積数。
        </td>
      </tr>

      <tr>
        <td>
          `subscription.PullMessageOperation`
        </td>

        <td>
          プル・メッセージ操作の累積回数を結果別に分類したもの。
        </td>
      </tr>

      <tr>
        <td>
          `subscription.PullRequest`
        </td>

        <td>
          プルリクエストの累積数を結果ごとに分類したもの。
        </td>
      </tr>

      <tr>
        <td>
          `subscription.PushRequest`
        </td>

        <td>
          結果ごとにグループ化されたプッシュ試行の累積カウント。プルとは異なり、プッシュサーバーの実装ではユーザーメッセージをバッチ処理しないため、各リクエストには1つのユーザーメッセージしか含まれません。プッシュサーバーはエラー時に再試行するため、1つのユーザーメッセージが複数回表示されることがあります。
        </td>
      </tr>

      <tr>
        <td>
          `subscription.PushRequestLatencies`
        </td>

        <td>
          結果別に分類されたプッシュリクエストのレイテンシー（マイクロ秒）の分布。
        </td>
      </tr>

      <tr>
        <td>
          `subscription.ReveredAckedBytes`
        </td>

        <td>
          サブスクリプションで保持される確認済みメッセージの総バイトサイズ。
        </td>
      </tr>

      <tr>
        <td>
          `subscription.ReveredAckedByRegion（リテインドアックドバイトバイリージョン`
        </td>

        <td>
          サブスクリプションで保持される確認済みメッセージの総バイトサイズ（クラウド地域別）。
        </td>
      </tr>

      <tr>
        <td>
          `subscription.StreamingPullAckMessageOperation`
        </td>

        <td>
          StreamingPullのアクノリッジメッセージ操作の累積回数を結果別にまとめたもの。
        </td>
      </tr>

      <tr>
        <td>
          `subscription.StreamingPullAckRequest`
        </td>

        <td>
          非空のアクノレッジIDを持つストリーミング・プル・リクエストの累積数を結果ごとにグループ化したものです。
        </td>
      </tr>

      <tr>
        <td>
          `subscription.StreamingPullMessageOperation`
        </td>

        <td>
          ストリーミング・プル・メッセージ操作の累積回数を結果別にまとめたもの。
        </td>
      </tr>

      <tr>
        <td>
          `subscription.StreamingPullModAckDeadlineMessageOperation`
        </td>

        <td>
          StreamingPull ModifyAckDeadline操作の累積回数を結果別にまとめたものです。
        </td>
      </tr>

      <tr>
        <td>
          `subscription.StreamingPullModAckDeadlineRequest`
        </td>

        <td>
          ModifyAckDeadlineフィールドが空ではないストリーミング・プルリクエストの累積数を結果ごとにグループ化したものです。
        </td>
      </tr>

      <tr>
        <td>
          `subscription.StreamingPullResponse`
        </td>

        <td>
          ストリーミング・プル・レスポンスの累積カウントで、結果ごとにグループ化されています。
        </td>
      </tr>

      <tr>
        <td>
          `subscription.UnackedBytesByRegion`
        </td>

        <td>
          サブスクリプション内の未確認メッセージの総バイトサイズを、クラウドのリージョン別に分類したもの。
        </td>
      </tr>
    </tbody>
  </table>
</dd>

## インベントリデータ [#rds-config]

GCP Pub/Sub サービスの [在庫データ](/docs/integrations/new-relic-integrations/getting-started/understand-use-data-infrastructure-integrations#overview) を見るには、 [**one.newrelic.com**](https://one.newrelic.com) **> Infrastructure> Inventory** を検索または選択してください。

### gcp/pubsub/topic

<dd>
  <table>
    <thead>
      <tr>
        <th style={{ width: "400px" }}>
          名前
        </th>

        <th>
          説明
        </th>
      </tr>
    </thead>

    <tbody>
      <tr>
        <td>
          `name`
        </td>

        <td>
          トピック名。
        </td>
      </tr>

      <tr>
        <td>
          `プロジェクトID`
        </td>

        <td>
          GCPプロジェクト Id.
        </td>
      </tr>

      <tr>
        <td>
          `タグ`
        </td>

        <td>
          トピックのタグ
        </td>
      </tr>
    </tbody>
  </table>
</dd>

\* GCP プロジェクトが [のサービスアカウントで New Relic にリンクされている場合のみ利用可能です](/docs/integrations/google-cloud-platform-integrations/getting-started/connect-google-cloud-platform-services-infrastructure).

### gcp/pubsub/subscription

<dd>
  <table>
    <thead>
      <tr>
        <th style={{ width: "400px" }}>
          名前
        </th>

        <th>
          説明
        </th>
      </tr>
    </thead>

    <tbody>
      <tr>
        <td>
          `name`
        </td>

        <td>
          サブスクリプション名です。
        </td>
      </tr>

      <tr>
        <td>
          `プロジェクトID`
        </td>

        <td>
          GCPプロジェクト Id.
        </td>
      </tr>

      <tr>
        <td>
          `タグ`
        </td>

        <td>
          トピックのタグ
        </td>
      </tr>

      <tr>
        <td>
          `ackDeadlineSeconds*`
        </td>

        <td>
          Pub/Subがメッセージを再送する前に、サブスクライバーがメッセージの受信を確認するのを待つ時間（秒）。
        </td>
      </tr>

      <tr>
        <td>
          `secondsMessageRetention*（セカンズメッセージリテンション`
        </td>

        <td>
          メッセージが公開された瞬間から、確認されていないメッセージがサブスクリプションのバックログに保持される時間（秒単位）。
        </td>
      </tr>

      <tr>
        <td>
          `pushEndpoint*。`
        </td>

        <td>
          メッセージをプッシュすべきエンドポイントを示すURLです。
        </td>
      </tr>

      <tr>
        <td>
          `retainAckedMessages*。`
        </td>

        <td>
          承認されたメッセージを保持するかどうかを示します。trueの場合、メッセージは確認されたとしても、\`message_retention_duration\`ウィンドウから外れるまで、サブスクリプションのバックログから削除されません。
        </td>
      </tr>
    </tbody>
  </table>
</dd>

\* GCP プロジェクトが [のサービスアカウントで New Relic にリンクされている場合のみ利用可能です](/docs/integrations/google-cloud-platform-integrations/getting-started/connect-google-cloud-platform-services-infrastructure).