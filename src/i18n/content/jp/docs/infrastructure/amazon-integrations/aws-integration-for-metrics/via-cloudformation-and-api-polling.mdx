---
title: CloudFormationとAPIポーリングによる統合
tags:
  - Integration via CloudFormation
  - AWS metric integration
  - Amazon integrations
  - AWS integrations
  - Integration with API polling via CloudFormation
metaDescription: Integrate New Relic with AWS services using CloudFormation templates to automate the setup of API polling for metrics ingestion.
freshnessValidatedDate: never
translationType: machine
---

AWSアカウントとNew Relicをシームレスに統合するには、 [CloudFormation および CloudWatch Metric Streams を介した](/docs/infrastructure/amazon-integrations/aws-integration-for-metrics/via-cloudformation)統合が最も推奨されるアプローチです。 特定のデータ取得制限付きで、統合のためにAPIポーリングを利用することもできます。 詳細については、 [AWS メトリクスの取り込み](/docs/infrastructure/amazon-integrations/get-started/introduction-aws-integrations/#aws-metrics-ingestion)の比較表を参照してください。CloudWatch Metric Streamsでサポートされていないサービスに対してのみAPIポーリングを使用することをお勧めします。

## 前提条件 [#prerequisites]

AWS アカウントと New Relic の統合を開始する前に、次の前提条件を満たしていることを確認してください。

* **New Relic[Ingest \[の取り込み\] - ライセンスキーとユーザー キー](https://one.newrelic.com/api-keys)**: AWSサービスをNew Relicアカウントに接続するには、これらのキーが必要です。
* **[](https://docs.aws.amazon.com/ARG/latest/userguide/gettingstarted-prereqs-permissions.html)**新しい AWS リソースと**[ IAM](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles.html)** ロール をデプロイするための 権限: AWS アカウントにはこの権限が必要です。
* クラウド統合の**[権限](/docs/accounts/accounts-billing/new-relic-one-user-management/user-permissions/#infrastructure)**: New Relicアカウントにはこれらの権限が必要です。

## 統合手順 [#integration-steps]

CloudFormation と API ポーリングを使用して AWS アカウントを New Relic と統合するには、次の手順に従います。

1. [<DNT>**Infrastructure &gt; AWS**</DNT>](https://one.newrelic.com/infra/infrastructure/cloud-aws)に移動します。

2. 正しいアカウントを選択してください。

3. <DNT>**Set up integration**</DNT>をクリックします。

4. 各画面の指示に従って、該当するフィールドに入力します。この統合では、所定の画面で次のオプションを選択します。

   1. <DNT>**Choose Data type(s)**</DNT>： <DNT>Metrics</DNT>
   2. <DNT>**Choose a setup method**</DNT>： <DNT>Automate AWS with CloudFormation (Recommended)</DNT>
   3. <DNT>**Choose a metrics integration type**</DNT>： <DNT>API Polling</DNT>

5. <DNT>**Select services**</DNT>画面で、必要に応じて<DNT>**Show resources not supported by CloudWatch Metric Streams**</DNT>トグルを使用して、モニターするサービスを選択し、続行します。

6. <DNT>Auto-discovery</DNT> マップ上の AWS エンティティ間の関係を自動的に検出して視覚化し、その他のいくつかの柔軟性も活用します。詳細については、 [「AWS エンティティの自動検出」](/docs/infrastructure/amazon-integrations/connect/set-up-auto-discovery-of-aws-entities/)を参照してください。この機能が必要な場合は、 <DNT>**Enable Auto Discovery (optional)**</DNT>ページで有効にして続行してください。

7. <DNT>**Launch your CloudFormation in AWS**</DNT>をクリックします。CloudFormationAWS New Relicテンプレートは、 での選択に基づいて構成された とともに コンソールで開くため、変更を加えない限り追加の編集は必要ありません。

8. Ingest - ライセンスキーとユーザーキーを AWS コンソールに貼り付けます。

<Callout variant="tip">
  AWSサービスから追加のメタデータを取得するには、 AWSコンソールから<DNT>**AWS Config**</DNT>有効にします。
</Callout>

10. CloudFormation スタックをデプロイするには、AWS コンソールで<DNT>**Create stack**</DNT>選択します。スタック リソースの作成には数分かかる場合があり、メトリクス転送の構成によっては複数のスタックが生成される場合があります。 スタックの作成に失敗した場合は、 [トラブルシューティング手順](https://docs.newrelic.com/docs/logs/troubleshooting/aws-log-integration-issues/stack-creation-fails/)を参照してください。
11. スタックの作成が成功したら、New Relic プラットフォームに切り替えて、AWS にNew Relic データが表示されるまでガイド付き統合を続行します。

## 関連トピック [#related-topics]

<DocTiles>
  <DocTile title="複数のAWSアカウントからデータを収集する" path="/docs/infrastructure/amazon-integrations/manage-aws-data/aws-multi-account/">
    複数の AWS アカウントからデータを収集する方法を学びます。
  </DocTile>

  <DocTile title="AWSインテグレーションのメトリクス" path="/docs/infrastructure/amazon-integrations/manage-aws-data/aws-integrations-metrics/">
    CloudWatch メトリック ストリームからメトリクスを探索して使用します。
  </DocTile>

  <DocTile title="CloudFormation と CWMS によるAWSインテグレーション" path="/docs/infrastructure/amazon-integrations/aws-integration-for-metrics/via-cloudformation-cwms">
    CloudFormation とCloudWatch Metric Streamsを使用して、 AWSサービスをNew Relicと統合します。
  </DocTile>

  <DocTile title="Terraform によるAWSインテグレーション" path="/docs/infrastructure/amazon-integrations/aws-integration-for-metrics/terraform">
    Terraform を使用してAWSサービスをNew Relicと統合します。
  </DocTile>

  <DocTile title="AWSコンソールからの手動統合" path="/docs/infrastructure/amazon-integrations/aws-integration-for-metrics/manual">
    AWSコンソールからAWSサービスをNew Relicと手動で統合します。
  </DocTile>
</DocTiles>