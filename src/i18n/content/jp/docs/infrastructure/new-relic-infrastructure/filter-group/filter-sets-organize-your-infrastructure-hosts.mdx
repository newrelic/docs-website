---
title: フィルターセット。ホストを整理する
tags:
  - Infrastructure
  - Manage your data
  - Filter and group
metaDescription: Use filter sets to filter and group your views to particular areas of your architecture with New Relic infrastructure monitoring
translationType: machine
---

New Relic のインフラストラクチャモニタリングでは、フィルターを組み合わせてフィルターセットを作成し、最も重要な基準に基づいてホストを整理することができます。お客様のアカウントには何百ものホストが報告されている可能性があるため、重要なものに焦点を当てることは、効果的なトラブルシューティングを行うために非常に重要です。フィルターセットの効率的な使用方法については、こちらのショートビデオ（約2分50秒）をご覧ください。

<Video
  id="IJPlVfJO0UY"
  type="youtube"
/>

## カテゴリ内のパターンを見る [#benefits]

フィルターセットは、利用可能な [属性](/docs/using-new-relic/welcome-new-relic/get-started/glossary#attribute) または [タグ](/docs/new-relic-one/use-new-relic-one/core-concepts/tagging-use-tags-organize-group-what-you-monitor) を使って作成することができます。

例えば、インフラを次のようなカテゴリーに分けて整理することができます。

* 地域
* オペレーティングシステムのバージョン
* Dockerコンテナに関連するホスト
* テスト環境

フィルターセットをアカウント内の他の人と共有することができ、フィルターセット内の各ホストの色分けされた [ヘルスステータス](/docs/accounts-partnerships/education/getting-started-new-relic/glossary#health-status) をチェックすることで、インフラの問題を素早く特定することができます。

## フィルターセットの作成 [#create]

デフォルトのインフラストラクチャフィルタセットは、 **All hosts** で、これはフィルタセットを作成するためのテンプレートとなります。

フィルターセットを作成するには

1. **[one.newrelic.com](https://one.newrelic.com/all-capabilities) > Infrastructure**に移動し、 **Hosts** 、 **Inventory** 、または**Events**をクリックします。

2. **All hosts** が左サイドバーに表示されていない場合は、 **Saved filter sets> All hosts** を選択して、そのフィルターセットを開きます。

3. **All hosts** で、 **Filter hosts** をクリックします。

4. リストでは、項目をクリックすると値の一覧が表示されます。

5. **Include** or **Exclude** をクリックします（ [Filter set logic](#logic) を参照）。

6. 値を個別にクリックするか、テキストを入力して複数の値を照合します。

7. 好みのフィルターセットになるまで、フィルターを追加していきます。

8. フィルターに名前を付けるには、

   <Icon name="fe-edit-2"/>

   アイコンをクリックし、名前を入力して、 **Save** をクリックします。

## フィルターセットの編集 [#edit]

既存のフィルターセットを変更するには

1. **[one.newrelic.com](https://one.newrelic.com/all-capabilities) > Infrastructure**に移動し、 **Hosts** 、 **Inventory** 、または**Events**をクリックします。
2. サイドバーで「 **Saved filter sets** 」をクリックすると、リストが表示されます。
3. スクロールするか、検索語を入力して、フィルターセットを探します。
4. フィルターセットをクリックして開きます。
5. サイドバーで、フィルターセットを更新するオプションをクリックして、保存します。

## フィルターセットの削除 [#delete]

デフォルト以外の保存されたフィルターセットは、削除することができます。 **All hosts**.

1. **[one.newrelic.com](https://one.newrelic.com/all-capabilities) > Infrastructure > Settings > Filter sets**に移動します。

2. <Icon name="fe-trash-2"/>

   をクリックすると、フィルターセットが削除されます。

## フィルタセットをグループ化して組み合わせる [#grouping]

一部のページでは、 [**Group by**](/docs/infrastructure-group-results-specific-attributes)を使用して、グラフの結果を特定の属性別にグループ化できます。たとえば、\[**ホスト]**ページでは、 `awsRegion`でグループ化して、CPU 使用率が最も高い AWS リージョンを表示できます。

グルーピングは、選択されたフィルターセットに適用されます。フィルターセットとグルーピングを組み合わせることで、詳細なシステム情報をすばやく見つけることができます。これらのツールを使って問題を解決する例については、 [フィルターセットとグルーピングの組み合わせ](/docs/infrastructure-group-results-specific-attributes#scoping-and-grouping) を参照してください。

## フィルタセットからアラートへのフィルタのコピー [#alerts]

アラート条件を作成する際、フィルターを個別に作成することもできますし、フィルターセットからすべてのフィルターを新しいアラート条件にコピーすることもできます。この方法は、新しいアラート条件にいくつかのフィルターを追加するための簡単な方法です。

<Callout variant="important">
  フィルタセットのフィルタを新しいアラート条件にコピーすると、これらのフィルタはフィルタセットに結びつかなくなります。フィルターセットに変更を加えても、アラートのフィルターは影響を受けません。
</Callout>

フィルターセットのフィルターを新しいアラート条件にコピーするには、次のようにします。

1. **[one.newrelic.com](https://one.newrelic.com/all-capabilities) > Infrastructure**に移動し、 **Hosts** 、 **Inventory** 、または**Events**をクリックします。
2. サイドバーで「 **Saved filter sets** 」をクリックすると、リストが表示されます。
3. スクロールするか、検索語を入力して、フィルターセットを探します。
4. フィルターセットをクリックして開きます。
5. 任意のチャートにマウスオーバーして、 **<Icon name="fe-more-horizontal"/>> Create alert**.
6. アラート条件名を入力します。
7. 必要に応じてフィルターの調整を行う。
8. 残りのアラートフィールドを完成させます（ [アラート条件の作成](/docs/infrastructure/new-relic-infrastructure/infrastructure-alert-conditions/infrastructure-alerts-add-edit-or-view-host-alert-information#create-condition) 参照）。

## フィルターセットロジック [#logic]

フィルターセットを作成すると、検索結果を絞り込むための属性やタグのリストが生成されます。ここでは、フィルターセットがリストにさまざまなルールを適用する方法について説明します。

### インクルージョンとエクスクルージョン [#include-exclude]

フィルターセットを構築する際に、特定の値に一致するエンティティをフィルターに含めるか除外するかを指定します。

除外・包含の仕組みは、値の選択方法によって異なります。

<CollapserGroup>
  <Collapser
    id="match-string"
    title="おすすめです。文字列のマッチングによる値の選択"
  >
    値にマッチさせたい文字列を入力することで、値のリストを生成することができます。これは、複数の値を照合する場合に便利です。

    <Callout variant="tip">
      文字列照合は、値のリストを効率的に生成します。このアプローチは、新しいエンティティを追加してもスケーリングできます。
    </Callout>

    ここでは、文字列マッチングで使用するロジックフィルタセットを紹介します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "150px" }}>
            コンパレータ
          </th>

          <th>
            ロジック
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            インクルード
          </td>

          <td>
            \[**含める**] をクリックして、値を照合する文字列を入力すると、フィルターはコンパレータ`LIKE`を使用します。これは、結果に文字列のようなエンティティが含まれることを意味します。

            たとえば、用語 East- でフィルタリングすると、その用語を含むすべてのエンティティが返されます。
          </td>
        </tr>

        <tr>
          <td>
            除外
          </td>

          <td>
            \[**除外**] をクリックして、値を一致させる文字列を入力すると、フィルターはコンパレータ`NOT LIKE`を使用します。これは、結果が文字列のようなエンティティを除外することを意味します。

            たとえば、用語 West- でフィルタリングすると、その用語を含まないすべてのエンティティが返されます。
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="select-individually"
    title="値を個別に選択"
  >
    属性/タグのリストをクリックして、個々の値を確認することができます。

    <Callout variant="tip">
      この方法では、新しいエンティティーを追加した場合、うまく拡張できません。
    </Callout>

    ここでは、個別の値を選択して使用する論理フィルタセットを紹介します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "150px" }}>
            コンパレータ
          </th>

          <th>
            ロジック
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            インクルード
          </td>

          <td>
            \[**含める**] をクリックしてから特定の値をクリックすると、フィルターはコンパレータ`IN`を使用します。つまり、フィルターは、選択リスト内の 1 つ以上の値と完全に一致するエンティティを探します。
          </td>
        </tr>

        <tr>
          <td>
            除外
          </td>

          <td>
            \[**除外**] をクリックしてから特定の値をクリックすると、フィルタ セットはコンパレータ`NOT IN`を使用します。つまり、フィルタは、選択リスト内の 1 つ以上の値と完全に一致しないすべてのエンティティを返します。
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

### アンド/オア

フィルタ セットは、バックグラウンドで論理演算子`AND`と`OR`を使用してデータを結合します。

* 複数の属性またはタグの値をクリックすると、それらは`AND`で結合されます。
* 属性またはタグ内から値をクリックすると、それらは`OR`で結合されます。

フィルターの結果は、以下の両方が当てはまるホストを表示します。

* 選択されたインフラストラクチャ・エージェント・バージョンのいずれかを含むホスト
* 選択されたAWSのアベイラビリティーゾーンのいずれかのホスト