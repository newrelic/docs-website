---
title: New RelicのGraphQL APIであるNerdGraphの概要
tags:
  - APIs
  - NerdGraph
  - Get started
metaDescription: 'NerdGraph is New Relic''s GraphQL-format API, used to query data and do some product configurations.'
translationType: human
---

[NerdGraph](https://api.newrelic.com/graphiql)は、New Relicデータにクエリを実行して、いくつかのNew Relic機能を設定できる当社のGraphQL形式のAPIです。[New Relicアカウントにサインアップ](https://newrelic.com/signup)し、当社のモニタリングサービスを[インストール](/docs/using-new-relic/cross-product-functions/install-configure/install-new-relic/)すると、NerdGraphを使い始めることができます。

## NerdGraphとは [#overview]

New Relicには、いくつかの[API](/docs/apis/get-started/intro-apis/introduction-new-relic-apis/)があります。NerdGraphは、New Relicデータにクエリを実行して、特定の設定を実行するための推奨APIです（[機能の詳細を確認する](#tutorials)）。NerdGraphには、New RelicのさまざまなAPIおよびマイクロサービスからデータを返すための単一のAPIインタフェースがあります。NerdGraphには、時間経過とともに他の設定機能が追加される予定です。

<Callout variant="important">
  NerdGraphは、データ取り込みには使用しません。そのため、当社の[データ取り込みAPI](/docs/apis/get-started/intro-apis/introduction-new-relic-apis/#data-type-apis)を使用します。
</Callout>

NerdGraphは、フェッチするデータの過不足なしに必要なデータを正確に要求できるオープンソースAPI形式である[GraphQL](https://graphql.org)を使用して構築されています。

NerdGraphの使い方については、この7分間のビデオをご覧ください。

<Video
  id="nPPQNS_AAIU"
  type="youtube"
/>

さらにビデオチュートリアルをご覧になりたい方は、New Relic Universityの[NerdGraphの紹介](https://newrelic.wistia.com/medias/h9qfum9nh0)にアクセスしてください。または[New Relic APIのオンラインコース](https://learn.newrelic.com/new-relic-apis)をご覧ください。

## 要件とエンドポイント [#authentication]

NerdGraphの要件に関する注記：

* NerdGraphには、[GraphiQLエクスプローラー](#explorer)で生成してアクセスできるNew Relicの[ユーザーキー](/docs/apis/intro-apis/new-relic-api-keys/#user-api-key)が必要です。
* ユーザータイプと割り当てられたロールは、NerdGraphの権限に影響を与える可能性があります。詳細については、[アクセスに影響する要因](/docs/accounts/accounts-billing/account-structure/factors-affecting-access-features-data#user-permissions)を参照してください。

NerdGraphエンドポイントは次のとおりです。

* 主要なエンドポイント： `https://api.newrelic.com/graphql`
* EUデータセンターを使用するアカウントのエンドポイント： `https://api.eu.newrelic.com/graphql`

エンドポイントにアクセスするには、次のcURLコマンドを使用します：

```
curl -X POST https://api.newrelic.com/graphql \
-H 'Content-Type: application/json' \
-H 'API-Key: <var>YOUR_NEW_RELIC_USER_KEY</var>' \
-d '{ "query":  "{ requestContext { userId apiKey } }" } '
```

## GraphiQLエクスプローラーを使用する [#explorer]

GraphQLの使用を開始するには、GraphQLを使用するためのオープンソースグラフィカルインタフェースであるGraphiQLエクスプローラーを使用することをお勧めします。これを使用すると、データスキーマを検索し、組み込みのオブジェクト定義を読み込み、クエリを構築して実行できます。

GraphQLを使用するには、[ユーザーキー](/docs/apis/intro-apis/new-relic-api-keys/#user-api-key)と呼ばれるユーザー固有のNew Relic APIキーが必要です。APIキーは、GraphiQLエクスプローラーで生成でき、**APIキー**ドロップダウンを使用して既存のキーを探すこともできます。

GraphiQLエクスプローラーの場所：

* New Relicアカウントが[EUデータセンター](/docs/using-new-relic/welcome-new-relic/get-started/our-eu-us-region-data-centers)を使用している場合は、[api.eu.newrelic.com/graphiql](https://api.eu.newrelic.com/graphiql)にアクセスします。
* それ以外の場合は、[api.newrelic.com/graphiql](https://api.newrelic.com/graphiql)を使用します。

クエリの作成方法については、[GraphiQLエクスプローラーの使用に関するヒント](#make-query)を参照してください。

## NerdGraphの機能 [#tutorials]

NerdGraph機能は、主に以下の2つのカテゴリに分類できます。

* **データにクエリを実行します。**データは、プログラム的なワークフローで使用する、カスタマイズされたデータ可視化のための[New Relic Oneアプリ](https://developer.newrelic.com/build-apps)を構築するなどのさまざまな目的のためにフェッチできます。
* **機能を設定します。**現在、さまざまな設定を利用できますが、時間経過とともにさらに機能が追加されます。タグの追加、ワークロードの設定、「ゴールデンメトリクス」のカスタマイズなどを実行できます。

NerdGraphを使用すると、さまざまなデータを返す設定が行えます。NerdGraphで何ができるかを確認する1つの方法は、[NerdGraphエクスプローラー](#explorer)を使用してクエリの構築とスキーマの検索を開始することです。

以下は、最も一般的に使用されるNerdGraphの機能の一部です。

* [監視対象のエンティティに関するデータの取得](/docs/apis/nerdgraph/examples/nerdgraph-entities-api-tutorial)
* [NRQLを使用するデータのクエリ](/docs/apis/nerdgraph/examples/nerdgraph-nrql-tutorial)（NRQL：当社のクエリ言語）
* [ダッシュボードを作成する](/docs/apis/nerdgraph/examples/create-widgets-dashboards-api)

利用可能なNerdGraphドキュメントは以下になります。

<table>
  <thead>
    <tr>
      <th style={{ width: "240px" }}>
        トピック
      </th>

      <th>
        チュートリアル
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        アカウントマネジメント
      </td>

      <td>
        * [アカウントの管理](/docs/apis/nerdgraph/examples/manage-accounts-nerdgraph)
        * [APIキーを作成して管理する](/docs/apis/nerdgraph/examples/use-nerdgraph-manage-license-keys-user-keys)（データ取り込みに使用するライセンスキー、およびユーザーキー）
      </td>
    </tr>

    <tr>
      <td>
        アラート
      </td>

      <td>
        * New Relicアラートの場合：[アラート関連のすべてのチュートリアル](/docs/alerts-applied-intelligence/new-relic-alerts/advanced-alerts/alerts-nerdgraph/nerdgraph-api-examples)を見る
        * 応用インテリジェンスの場合：[インシデント相関のトポロジーを設定する](/docs/apis/nerdgraph/examples/topology-nerdgraph-tutorial)
      </td>
    </tr>

    <tr>
      <td>
        APMエージェント
      </td>

      <td>
        [APMエージェントの設定](/docs/apis/nerdgraph/examples/apm-config-nerdgraph)
      </td>
    </tr>

    <tr>
      <td>
        チャートとダッシュボード
      </td>

      <td>
        * [NRQLを使用するデータのクエリ](/docs/apis/nerdgraph/examples/nerdgraph-nrql-tutorial)（NRQL：当社のクエリ言語）
        * [ダッシュボードを作成する](/docs/apis/nerdgraph/examples/create-widgets-dashboards-api)
        * [ダッシュボードを他のアカウントにエクスポートする](/docs/apis/nerdgraph/examples/export-import-dashboards-using-api/)
        * [ダッシュボードをファイルとしてエクスポートする](/docs/apis/nerdgraph/examples/export-dashboards-pdfpng-using-api/)
        * [外部共有ダッシュボードの管理](/docs/apis/nerdgraph/examples/manage-live-chart-urls-via-api)
        * [InsightsダッシュボードAPIからNerdGraphへの移行](/docs/new-relic-one/use-new-relic-one/core-concepts/dashboards-api-migration-insights-api-nerdgraph/)
      </td>
    </tr>

    <tr>
      <td>
        クラウドインテグレーション（AWS、Azure、GCP）
      </td>

      <td>
        [クラウドインテグレーションを設定する](/docs/apis/nerdgraph/examples/nerdgraph-cloud-integrations-api-tutorial)
      </td>
    </tr>

    <tr>
      <td>
        データ管理
      </td>

      <td>
        * [イベントデータをメトリックデータに変換する](/docs/telemetry-data-platform/ingest-manage-data/convert-data-metrics/analyze-monitor-data-trends-metrics)
        * [データ保持期間](/docs/telemetry-data-platform/manage-data/manage-data-retention/#api-examples)
        * [データを破棄する](/docs/accounts/accounts/data-management/drop-data-using-nerdgraph)
      </td>
    </tr>

    <tr>
      <td>
        ディストリビューティッド（分散）トレーシング
      </td>

      <td>
        * [ディストリビューティッド（分散）トレーシングデータにクエリを実行する](/docs/apis/nerdgraph/examples/nerdgraph-distributed-trace-data-tutorial)
        * [無期限のトレースを設定する](/docs/apis/nerdgraph/examples/configure-infinite-tracing-graphql)
      </td>
    </tr>

    <tr>
      <td>
        エンティティ
      </td>

      <td>
        * [監視対象エンティティに関するデータの取得](/docs/apis/nerdgraph/examples/nerdgraph-entities-api-tutorial)
        * [エンティティの関係と依存関係を理解する](/docs/apis/nerdgraph/examples/nerdgraph-relationships-api-tutorial)（サービスマップの構築に使用する）
        * [「ゴールデンメトリクス」にクエリを実行してそれを設定する](/docs/apis/nerdgraph/examples/golden-metrics-entities-nerdgraph-api-tutorial)（重要なエンティティのメトリクス）
      </td>
    </tr>

    <tr>
      <td>
        ログ管理
      </td>

      <td>
        * [データパーティションの管理](/docs/apis/nerdgraph/examples/nerdgraph-data-partition-rules-tutorial)
        * [ログ解析ルールの管理](/docs/apis/nerdgraph/examples/nerdgraph-log-parsing-rules-tutorial/)
        * [難読化表現とルールの管理](/docs/logs/ui-data/obfuscation-ui/)
      </td>
    </tr>

    <tr>
      <td>
        New Relic Oneアプリ
      </td>

      <td>
        [New Relic Oneアプリを構築する](https://developer.newrelic.com/explore-docs/query-and-store-data)
      </td>
    </tr>

    <tr>
      <td>
        パートナーとリセラー
      </td>

      <td>
        [サブスクリプションの管理](/docs/apis/nerdgraph/tutorials/provisions-your-subscriptions-nerdgraph)（[元の価格設定モデル](/docs/accounts/original-accounts-billing/original-product-based-pricing/overview-changes-pricing-user-model/#pricing-plans)を使用しているパートナーのみ）
      </td>
    </tr>

    <tr>
      <td>
        サービスレベル
      </td>

      <td>
        [サービスレベルの設定および管理](/docs/apis/nerdgraph/examples/nerdgraph-slm)
      </td>
    </tr>

    <tr>
      <td>
        合成のモニタリング
      </td>

      <td>
        [モニターの管理](/docs/apis/nerdgraph/examples/nerdgraph-synthetics-tutorial)
      </td>
    </tr>

    <tr>
      <td>
        タグ
      </td>

      <td>
        [タグを追加および管理する](/docs/apis/nerdgraph/examples/nerdgraph-tagging-api-tutorial)
      </td>
    </tr>

    <tr>
      <td>
        ワークロード
      </td>

      <td>
        [ワークロードを表示して設定する](/docs/apis/nerdgraph/tutorials/nerdgraph-workloads-api-tutorials)
      </td>
    </tr>
  </tbody>
</table>

## NerdGraphの用語 [#terminology]

以下にGraphQLから派生する用語を示します（API形式NerdGraphが使用する用語）。

<table>
  <thead>
    <tr>
      <th style={{ width: "150px" }}>
        用語
      </th>

      <th>
        定義
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        クエリとミューテーション
      </td>

      <td>
        GraphQLの操作には、以下の2つのクラスがあります。

        * [クエリ](https://graphql.org/learn/queries)は、データのフェッチにのみ使用する基本的な要求です。クエリは静的ではなく、必要に応じて要求するデータ量を加減できます。各クエリについて、[スキーマ](https://graphql.org/learn/schema)でサポートされている限り、どのデータを取得するかを厳密に指定できます。
        * [ミューテーション](https://graphql.org/learn/queries/#mutations)は、リソースの作成や設定の変更などのアクションを実行するための要求です。ミューテーションでは、キーワード`mutation`と、ミューテーションの`name`が必要です。
      </td>
    </tr>

    <tr>
      <td>
        タイプ
      </td>

      <td>
        Data in GraphQLはタイプにまとめられます。タイプは、[スカラー](https://graphql.org/learn/schema/#scalar-types)（文字列や数字、booleanなど）またはオブジェクトタイプとなります。

        [オブジェクトタイプ](https://graphql.org/learn/schema/#object-types-and-fields)は、一連のフィールドで構成されるカスタムタイプです。たとえば、`User`と呼ばれるオブジェクトタイプは、システムのユーザーを表します。
      </td>
    </tr>

    <tr>
      <td>
        フィールド
      </td>

      <td>
        [フィールド](https://graphql.org/learn/schema/#object-types-and-fields)は、クエリを実行できるオブジェクトタイプの情報の断片を表します。フィールドは、スカラー、リスト、またはオブジェクトです。たとえば、`User`オブジェクトタイプには、`name`という文字列フィールドを指定できます。
      </td>
    </tr>

    <tr>
      <td>
        インタフェース
      </td>

      <td>
        [インタフェース](https://graphql.org/learn/schema/#interfaces)は、他のオブジェクトタイプが`implement`できる一連の一般的なフィールドを表す抽象型です。
      </td>
    </tr>
  </tbody>
</table>

## GraphiQLエクスプローラーを使用する際のヒント [#make-query]

クエリは、[NerdGraph GraphiQLエクスプローラー](https://api.newrelic.com/graphiql)を使用して実行できます。エクスプローラーには、オートコンプリート、クエリ検証などのスキーマ定義や機能が組み込まれています。

<CollapserGroup>
  <Collapser
    id="example-account-user"
    title="New Relicユーザーがアクセスできるアカウントのクエリを実行する"
  >
    `actor`（New Relicの正規ユーザー）がアクセスできるアカウント名のクエリを実行できます。

    ```
    query {
       actor {
          account(id: <var>YOUR_ACCOUNT_ID</var>) {
             name
          }
       }
    }
    ```

    応答にはリクエストで定義したクエリ構造が反映されるため、希望する特定のデータを簡単に要求できます。

    ```
    {
      "data": {
          "actor": {
             "account": {
                "name": "<var>Data Nerd</var>"
             }
          }
       }
    }
    ```
  </Collapser>

  <Collapser
    id="example-multiple-requests"
    title="1つのリクエストでユーザー、アカウント、およびNRQLのクエリを実行する"
  >
    グラフ構造には、クエリが複雑になった場合の機能が示されます。たとえば、1回のリクエストでユーザー情報やアカウント情報のクエリを実行し、NRQLクエリを実行できます。REST APIを使用すると、3つの異なるエンドポイントに対する3つの異なるリクエストが必要になります。

    ```
    query {
       actor {
          account(id: <var>YOUR_ACCOUNT_ID</var>) {
             name
             nrql(query: "<a href="/docs/insights/nrql-new-relic-query-language/nrql-resources/nrql-syntax-components-functions#state-select">SELECT</a> * <a href="/docs/insights/nrql-new-relic-query-language/nrql-resources/nrql-syntax-components-functions#sel-from">FROM</a> Transaction") {
                results
             }
          }
          user {
             name
             id
          }
       }
    }
    ```
  </Collapser>
</CollapserGroup>