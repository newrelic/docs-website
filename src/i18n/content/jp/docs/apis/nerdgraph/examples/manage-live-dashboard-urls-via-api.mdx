---
title: 'NerdGraph チュートリアル: 公開共有ダッシュボード URL の作成、更新、取り消し'
tags:
  - share dashboards externally
  - share dashboards using NerdGraph
  - public dashboard
  - public dashboard URL
metaDescription: 'Use New Relic NerdGraph to create, update, and revoke live dashboard URLs'
freshnessValidatedDate: never
translationType: machine
---

必要な[セキュリティとアクセスを設定する](/docs/query-your-data/explore-query-data/dashboards/prerequisites-to-share-dashboards-charts)と、 [NerdGraph](/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph)のクエリとミューテーションを使用して、パブリックにアクセス可能なライブダッシュボード URL を作成、管理、取り消すことができます。これは、 [New Relic UI](/docs/query-your-data/explore-query-data/dashboards/share-charts-dashboards-externally/#dashboard)から行うこともできます。

<Callout variant="caution">共有ダッシュボードがパスワードで保護されていない場合、ライブ URL を知っているすべてのユーザーがダッシュボードにアクセスして、そこに含まれるすべての情報を表示できます。不要なアクセスを防ぐには、[パスワードで保護された URL を作成する](#create-dashboard-url-with-psswd-nerdgraph)か、[既存の共有 URL に対してパスワード保護を有効にしてください](#enable-password-dashboard-url-nerdgraph)。</Callout>

NerdGraph からパブリックにアクセス可能なライブ ダッシュボード URL を作成、更新、または取り消すには、共有するダッシュボードの GUID が必要です。

1. <DNT>**[one.newrelic.com &gt; Dashboards](https://one.newrelic.com//dashboards)**</DNT>に移動します。
2. 共有したいダッシュボードを開きます。
3. <DNT>**<Icon name="fe-more-horizontal" /> &gt; Metadata**</DNT>に移動し、ダッシュボードのエンティティ GUID をコピーします。

<CollapserGroup>
  <Collapser id="create-dashboard-url-nerdgraph" title="パスワード保護なしでURLを作成する">
    1. [NerdGraph API エクスプローラー](https://one.newrelic.com/nerdgraph-graphiql)に移動します。
    2. 次の点で`dashboardCreateLiveUrl`変異を使用して[グラフAPIコール](/docs/apis/nerdgraph/get-started/nerdgraph-explorer)を構築します。

    * `GUID`: ダッシュボードのエンティティ GUID を入力します。

    * `Options`(オプション) &gt; `ttl` : URL を有効にする期間を秒単位で入力します。

      * **最小値**: 300秒(5分)
      * **最大値**: 631152000秒 (20年)
      * **デフォルト値**: 2592000秒 (30日)

    * `url`: 応答でライブ ダッシュボードの URL を取得するには、これを選択します。

    * 応答に必要なその他のフィールドを選択します。

    #### サンプル変異 [#create-public-link]

    ```graphql
    mutation {
      dashboardCreateLiveUrl(
        options: {ttl: time in seconds}
        guid: "YOUR_DASHBOARD_GUID"
      ) {
        url
      }
    }
    ```

    ライブ ダッシュボードの URL が応答に表示されます。 これはパブリック URL なので、誰とでも共有できます。

    #### サンプル回答 [#create-public-link-response]

    ```graphql
    {
      "data": {
        "dashboardCreateLiveUrl": {
          "url": "https://share.newrelic.com/dashboard/PUBLIC_LINK_ID"
        }
      }
    }
    ```

    `PUBLIC_LINK_ID`共有ダッシュボードの ID です。 これを使用して、NerdGraph を通じて共有ダッシュボード URL を更新または取り消すことができます。

    <Callout variant="important">
      New Relic プラットフォームのダッシュボードのコンテンツの更新は、共有ダッシュボード ページに反映されます。
    </Callout>
  </Collapser>

  <Collapser id="create-dashboard-url-with-psswd-nerdgraph" title="パスワード保護されたURLを作成する">
    共有ダッシュボードへの不要なアクセスを回避するために、パスワード保護されたライブ ダッシュボード URL を作成できます。

    1. [NerdGraph API エクスプローラー](https://one.newrelic.com/nerdgraph-graphiql)に移動します。
    2. 次の点で`dashboardCreateLiveUrl`変異を使用して[グラフAPIコール](/docs/apis/nerdgraph/get-started/nerdgraph-explorer)を構築します。

    * `auth` &gt; `factors` &gt; `type` : ライブダッシュボード URL のパスワード保護を有効にするには、 `PASSWORD`選択します。

    * `GUID`: ダッシュボードのエンティティ GUID を入力します。

    * `Options`(オプション) &gt; `ttl` : URL を有効にする期間を秒単位で入力します。

      * **最小値**: 300秒(5分)
      * **最大値**: 631152000秒 (20年)
      * **デフォルト値**: 2592000秒 (30日)

    * `auth` &gt; `factors` &gt; `password` &gt; `value` : 応答でライブダッシュボードのパスワードを取得するには、これを選択します。

    * `url`: 応答でライブ ダッシュボードの URL を取得するには、これを選択します。

    * 応答に必要なその他のフィールドを選択します。

    #### サンプル変異 [#create-public-link-with-password]

    ```graphql
    mutation {
      dashboardCreateLiveUrl(
        guid: "YOUR_DASHBOARD_GUID"
        options: {ttl: 3600} # Optional: Set a time-to-live for the URL
        auth: {factors: [{type: PASSWORD}]}
      ) {
        url
        uuid
        auth {
          factors {
            type
            password {
              value # REQUEST THE PASSWORD VALUE HERE
            }
          }
        }
      }
    }
    ```

    ライブ ダッシュボードの URL とパスワードが応答に表示されます。

    #### サンプル回答 [#create-public-link-with-password-response]

    ```graphql
    {
      "data": {
        "dashboardCreateLiveUrl": {
          "auth": {
            "factors": [
              {
                "password": {
                  "value": "pfd-3ZZ46#3a4On5p%&¿"
                },
                "type": "PASSWORD"
              }
            ]
          },
          "url": "https://one.newrelic.com/dashboard/f6c730bf-fced-4890-ad6e-86ab6a6e8159",
          "uuid": "f6c730bf-fced-4890-ad6e-86ab6a6e8159"
        }
      }
    }

    ```

    `uuid`共有ダッシュボードの ID です。これを使用して、NerdGraph を通じて共有ダッシュボードの URL を[更新](#update-dashboard-url-nerdgraph)または[取り消すこと](revoke-dashboard-url-nerdgraph)ができます。ダッシュボードを外部ユーザーと共有するには、応答から URL とパスワードをコピーします。パスワードは後で取得できません。パスワードを紛失した場合は、[パスワードをリセットして](#reset-password-dashboard-url-nerdgraph)ユーザーと再度共有するだけです。[パスワード管理ベストプラクティス](/docs/query-your-data/explore-query-data/dashboards/share-charts-dashboards-externally/#password-management)に従ってパスワードを安全に管理してください。
  </Collapser>

  <Collapser id="update-dashboard-url-nerdgraph" title="ライブダッシュボードの有効期限を更新する">
    共有ダッシュボードの設定を変更する[権限](/docs/query-your-data/explore-query-data/dashboards/prerequisites-to-share-dashboards-charts/#permissions-to-custom-role)があることを確認してください。

    URL の有効期間を更新するには:

    1. [NerdGraph API エクスプローラー](https://one.newrelic.com/nerdgraph-graphiql)に移動します。
    2. 次の点で`dashboardUpdateLiveUrl`変異を使用して[グラフAPIコール](/docs/apis/nerdgraph/get-started/nerdgraph-explorer)を構築します。

    * `id`: 共有ダッシュボードの URL から ID をコピーして入力します。

    * `Options` (オプション) &gt; `ttl` : URL を有効にする期間を秒単位で入力します。

      * **最小値**: 300秒(5分)
      * **最大値**: 631152000秒 (20年)
      * **デフォルト値**: 2592000秒 (30日)

    #### サンプル変異 [#update-public-link-request]

    ```graphql
    mutation {
      dashboardUpdateLiveUrl(
        id:"enter the public URL ID"
        options: { ttl: "updated duration in seconds" }
      )
    }
    ```

    応答内の URL は次のように表示されます。 これで、URL は更新された期間にわたって有効のままになります。

    #### サンプル回答 [#update-public-link-response]

    ```graphql
    {
      "data": {
        "dashboardUpdateLiveUrl": {
          "url": "https://share.newrelic.com/dashboard/PUBLIC_LINK_ID"
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="enable-password-dashboard-url-nerdgraph" title="ライブURLのパスワード保護を有効にする">
    共有ダッシュボードの設定を変更するための[権限](/docs/query-your-data/explore-query-data/dashboards/prerequisites-to-share-dashboards-charts/#permissions-to-custom-role)があることを確認してください。ライブ ダッシュボード URL のパスワード保護を有効にするには:

    1. [NerdGraph API エクスプローラー](https://one.newrelic.com/nerdgraph-graphiql)に移動します。
    2. 次の点で`dashboardUpdateLiveUrlAuth`変異を使用して[グラフAPIコール](/docs/apis/nerdgraph/get-started/nerdgraph-explorer)を構築します。

    * `auth` &gt; `factors` &gt; `type` : ライブダッシュボード URL のパスワード保護を有効にするには、 `PASSWORD`選択します。
    * `id`: 共有ダッシュボードの URL から ID をコピーして入力します。
    * `auth` &gt; `factors` &gt; `password` &gt; `value` : 応答でライブダッシュボードのパスワードを取得するには、これを選択します。
    * 応答に必要なその他のフィールドを選択します。

    #### サンプル変異 [#enable-password-protection]

    ```graphql
    mutation {
      dashboardUpdateLiveUrlAuth(
        id: "YOUR_PUBLIC_LINK_UUID"
        auth: {factors: [{type: PASSWORD}]}
      ) {
        factors {
          password {
            value # A NEW PASSWORD WILL BE GENERATED AND RETURNED
          }
          type
        }
      }
    }
    ```

    #### サンプル回答 [#enable-password-protection-response]

    応答には次のようにパスワードが表示されます。

    ```graphql
    {
      "data": {
        "dashboardUpdateLiveUrlAuth": {
          "factors": [
            {
              "password": {
                "value": "system generated password"
              },
              "type": "PASSWORD"
            }
          ]
        }
      }
    }

    ```

    共有ダッシュボードのパスワードを有効にした後、そのパスワードをユーザーと共有する必要があります。パスワードは後で取得できないため、コピーして保存してください。パスワードを紛失した場合は、[パスワードをリセットして](#reset-password-dashboard-url-nerdgraph)ユーザーと再度共有するだけです。[パスワード管理ベストプラクティス](/docs/query-your-data/explore-query-data/dashboards/share-charts-dashboards-externally/#password-management)に従ってパスワードを安全に管理してください。
  </Collapser>

  <Collapser id="disable-password-dashboard-url-nerdgraph" title="ライブURLのパスワード保護を無効にする">
    共有ダッシュボードの設定を変更するための[権限](/docs/query-your-data/explore-query-data/dashboards/prerequisites-to-share-dashboards-charts/#permissions-to-custom-role)があることを確認してください。ライブ ダッシュボード URL のパスワード保護を無効にするには:

    1. [NerdGraph API エクスプローラー](https://one.newrelic.com/nerdgraph-graphiql)に移動します。
    2. 次のプロパティ値を持つ`dashboardUpdateLiveUrlAuth`変異を使用して[、グラフAPIコール](/docs/apis/nerdgraph/get-started/nerdgraph-explorer)を構築します。

    * `auth` &gt; `factors` &gt; `type` : ライブダッシュボード URL のパスワード保護を有効にするには、 `PASSWORD`選択します。
    * `id`: 共有ダッシュボードの URL から ID をコピーして入力します。
    * `auth` &gt; `factors` : 空のままにしておきます。
    * `factors` &gt; `type` : パスワード値が削除されたことを確認するには、これを選択します。

    #### サンプル変異 [#disable-password-protection]

    ```graphql
    mutation {
      dashboardUpdateLiveUrlAuth(
        id: "YOUR_PUBLIC_LINK_UUID"
        auth: {factors: []} # Send an empty array to remove all authentication
      ) {
        factors { # This will be empty
          type 
        }
      }
    }

    ```

    ## サンプル回答 [#disable-password-protection-response]

    応答が次のように表示されることを確認します。パスワードが削除され、ライブ ダッシュボードの URL はパスワードで保護されなくなります。

    ```json
    {
      "data": {
        "dashboardUpdateLiveUrlAuth": {
          "factors": []
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="reset-password-dashboard-url-nerdgraph" title="ライブURLのパスワードをリセットする">
    共有ダッシュボードの設定を変更するための[権限](/docs/query-your-data/explore-query-data/dashboards/prerequisites-to-share-dashboards-charts/#permissions-to-custom-role)があることを確認してください。ライブダッシュボード URL のパスワードをリセットするには:

    1. [NerdGraph API エクスプローラー](https://one.newrelic.com/nerdgraph-graphiql)に移動します。
    2. 次のプロパティ値を持つ`dashboardResetLiveUrlPassword`変異を使用して[、グラフAPIコール](/docs/apis/nerdgraph/get-started/nerdgraph-explorer)を構築します。

    * `id`: 共有ダッシュボードの URL から ID をコピーして入力します。
    * `password`: 応答で新しいライブ ダッシュボード パスワードを取得するには、これを選択します。

    #### サンプル変異 [#reset-password]

    ```graphql
    mutation {
      dashboardResetLiveUrlPassword(id: "YOUR_PUBLIC_LINK_UUID") {
        password
      }
    }
    ```

    #### サンプル回答 [#reset-password-response]

    新しいパスワードは次のように応答に表示されます。

    ```graphql
    {
      "data": {
        "dashboardResetLiveUrlPassword": {
          "password": "system generated password"
        }
      }
    }
    ```

    共有ダッシュボードのパスワードをリセットした後、新しいパスワードをユーザーと共有する必要があります。パスワードは後で取得できないため、コピーして保存してください。紛失した場合は、再度リセットするだけです。[パスワード管理ベストプラクティス](/docs/query-your-data/explore-query-data/dashboards/share-charts-dashboards-externally/#password-management)に従ってパスワードを安全に管理してください。
  </Collapser>

  <Collapser id="revoke-dashboard-url-nerdgraph" title="ライブ URL を取り消す">
    持っている[権限](/docs/query-your-data/explore-query-data/dashboards/prerequisites-to-share-dashboards-charts/#permissions-to-custom-role)に基づいて、自分が作成した URL のみを取り消すことも、アカウント内のユーザーが作成したすべての URL を取り消すこともできます。 共有ダッシュボード URL を取り消すには:

    1. [NerdGraph API エクスプローラー](https://one.newrelic.com/nerdgraph-graphiql)に移動します。
    2. 次のプロパティ値を持つ`dashboardRevokeLiveUrl`変異を使用して[、グラフAPIコール](/docs/apis/nerdgraph/get-started/nerdgraph-explorer)を構築します。

    * `id`: 共有ダッシュボードの URL から ID をコピーして入力します。

    #### サンプル変異 [#revoke-public-link]

    ```graphql
    mutation {
      dashboardRevokeLiveUrl(id: "PUBLIC_LINK_ID") {
        id
      }
    }
    ```

    #### サンプル回答 [#revoke-public-link-response]

    共有ダッシュボードの URL は取り消され、アクセスできなくなります。 応答は次のようになります。

    ```json
    {
      "data": {
        "dashboardRevokeLiveUrl": {
          "id": "PUBLIC_LINK_ID" //the one you passed to the mutation
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="list-dashboard-url-nerdgraph" title="共有されているすべてのURLを一覧表示する">
    保有する[権限](/docs/query-your-data/explore-query-data/dashboards/prerequisites-to-share-dashboards-charts/#permissions-to-custom-role)に基づいて、自分が作成した URL のリスト、またはアカウント内のユーザーが作成したすべての URL のリストを取得できます。共有ダッシュボードの URL のリストを取得するには:

    1. [NerdGraph API エクスプローラー](https://one.newrelic.com/nerdgraph-graphiql)に移動します。
    2. 次の詳細を使用して[グラフAPI](/docs/apis/nerdgraph/get-started/nerdgraph-explorer)を構築します。

    * `actor` &gt; `dashboard` &gt; `liveUrls` : これを使用して、共有ダッシュボードの URL のリストを取得します。
    * `filter` &gt; `type` : ダッシュボード URL の結果をフィルターするには、 `DASHBOARD`を選択します。
    * 応答に必要なその他のフィールドを選択します。

    #### サンプルクエリ [#list-public-links]

    ```graphql
    {
      actor {
        user {
          name
        }
        dashboard {
          liveUrls(filter: { type: DASHBOARD }) {
            liveUrls {
              createdAt
              type
              uuid
            }
          }
        }
      }
    }
    ```

    応答として、共有ダッシュボード URL のリストが表示されます。
  </Collapser>
</CollapserGroup>