---
title: 'NerdGraphチュートリアル: シークレット管理サービス'
metaDescription: Learn how to use the Secrets management service to securely store and manage your secrets.
freshnessValidatedDate: never
translationType: machine
---

New Relicを使用する場合、 APIキーやアプリケーションの認証情報などの機密情報を保存する必要がある場合があります。 New Relic では、これらはシークレットと呼ばれます。<DNT>Secrets management service</DNT>は[、NerdGraph API](/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph/)を通じてこれらの秘密を一元的に保存および取得する安全な方法を提供します。

<Callout variant="important">
  シークレットは文字列形式でのみ保存できます。
</Callout>

<DNT>Secrets management service</DNT>の主な機能は次のとおりです。

* **秘密の一意のキー**: 保存時にそれぞれに一意のキーを割り当てることで、秘密が誤って公開されることを防ぐことができます。キーを使用して秘密を取得および管理します。

* **[アカウントまたは組織レベル](/docs/accounts/accounts-billing/account-structure/new-relic-account-structure/)で保存されるシークレット**: 複数のアカウントにわたってシークレットにアクセスして使用するには、シークレットを組織レベルで保存できます。シークレットが単一のアカウントに固有のものである場合は、アカウント レベルで保存できます。

* **シークレットのバージョン**: 以前のバージョンを失うことなくシークレットを更新できます。<DNT>Secrets management service</DNT>はシークレットのすべてのバージョンを追跡します。

* **シークレットの制御された削除と回復**: このサービスでは、シークレットの回復可能な削除が可能です。消去権限を持たないユーザーは、シークレットをソフト削除できます。永久削除は、消去権限を持つユーザーに制限されています。

* **ロールベースのアクセスを持つ標準シークレット**: 標準シークレットには、アカウントまたは組織内の権限を持つすべてのユーザーがアクセスできます。管理者は、 <DNT>**View**</DNT>から<DNT>**Purge**</DNT>までの権限レベルを持つカスタム ロールを割り当てることでアクセスを制御します。

* **きめ細かなアクセスが可能な共有可能なシークレット**: 共有可能なシークレットは、デフォルトでは作成者に対して非公開であり、作成者は個々のユーザー、グループ、またはシステム ID に特定の権限 (読み取り、更新、削除) を付与できます。組織管理者は、監視と管理のためにすべての共有可能な秘密に完全にアクセスできます。

## シークレット管理サービスの請求 [#secrets-management-services-billing]

<DNT>Secrets management service</DNT>は、[アドオン](/docs/accounts/accounts-billing/new-relic-one-pricing-billing/add-on-billing)または計算価格モデルの一部として提供される高度な計算製品機能です。 高度な[CCU は](/docs/licenses/license-information/product-definitions/new-relic-one-pricing-definitions/#compute-capacity-unit)、NerdGraph クエリを実行してシークレットを保存、取得、または管理するときに消費されます。

## 標準シークレットアクセス制御 [#security-and-access-control]

[標準ロール](/docs/accounts/accounts-billing/new-relic-one-user-management/user-management-concepts/#standard-roles)を持つユーザーは、次の権限を使用して、アクセス権を持つアカウントに固有の<DNT>Secrets management service</DNT>にアクセスできます。

* **読み取り専用**: ユーザーはシークレットの取得のみ可能です。シークレットを作成、更新、または削除することはできません。

* **標準ユーザー**: ユーザーは、シークレットを作成、更新、取得、および論理的に削除できます。

* **すべての製品管理者**: ユーザーは<DNT>Secrets management service</DNT>へのフルアクセス権を持ちます。シークレットのリストを作成、更新、取得、ソフト削除、完全削除、および取得できます。

* **課金ユーザー**: ユーザーはシークレットのリストを取得することしかできません。

非標準のロールを使用してアカウント レベルでシークレットを管理するには、管理者に必要な権限を持つ[カスタム ロールを作成して](/docs/accounts/accounts-billing/new-relic-one-user-management/account-user-mgmt-tutorial/#roles)もらい、それをユーザー グループに割り当てます。

組織レベルでシークレットを管理するには、管理者に[NerdGraph API 経由で組織を対象とするカスタム ロール](https://docs.newrelic.com/docs/apis/nerdgraph/examples/nerdgraph-manage-groups/#create-role)を作成し、必要な権限を追加して、ユーザー グループに割り当てるように依頼します。[組織マネージャーに](/docs/accounts/accounts-billing/new-relic-one-user-management/user-management-concepts/#admin-settings)は組織レベルでのデフォルトの権限がありますが、シークレットの管理を許可するには、管理者に依頼して<DNT>Secrets management service</DNT>固有のカスタム ロールを割り当ててもらいます。

<Callout variant="important">
  組織のポリシーと要件に従って、アカウントおよび組織レベルでユーザー ロール、権限、 <DNT>Secrets management service</DNT>へのアクセスを設定および構成します。
</Callout>

## きめ細かなアクセス権限を持つ共有可能な秘密 [#sharable-secrets]

標準シークレットはアカウントまたは組織内の権限を持つすべてのユーザーがアクセスできますが、複数のチームを持つ企業では、シークレットを特定の個人に制限する必要があることがよくあります。共有可能な秘密は、このニーズに対応します。

<Callout variant="important">
  共有可能なシークレットを操作するには、まず、[標準シークレットのアクセス制御](#security-and-access-control)で説明されている基本権限をユーザーが持っている必要があります。以下に説明するきめ細かなアクセス権限は、これらの基本要件**に加えて必要**となります。
</Callout>

共有可能なシークレットを作成すると、自動的に完全な制御権を持つ所有者になります。個別の権限を割り当てるか、複数の権限をまとめたロールを使用することで、ユーザー、グループ、またはシステム ID にアクセスを許可できます。

**個別の権限（基本アクセスに加えて付与されます）:**

* **読み取り**: 秘密の値を取得する
* **更新**: 秘密の値を変更する
* **削除**: 秘密を削除します

**定義済みのロール（基本アクセスに加えて付与されます）:**

* **シークレット所有者**: フルコントロール (読み取り、更新、削除、付与/取り消し)
* **シークレットリーダー**：読み取り専用アクセス

ニーズに応じて特定の権限を組み合わせた[カスタム ロールを作成する](\(/docs/accounts/accounts-billing/new-relic-one-user-management/account-user-mgmt-tutorial/#roles\))こともできます。組織管理者は、監視のためにすべての共有可能な秘密への完全なアクセス権を保持します。

合成モニター、ワークフロー、またはその他の自動化プロセスがシークレットにアクセスする必要がある場合は、そのシステム ID へのアクセスを許可します。システム ID は、New Relic 内の各自動化プロセスに割り当てられる一意の識別子です。New Relic UI を通じてシークレットをモニターまたはワークフローにリンクすると、その自動化プロセスのシステム ID を使用して実行時にアクセスが制御されます。

<Callout variant="important">
  標準シークレットは共有可能なシークレットに変換できません。既存の標準シークレットを移行するには、同じ値を持つ新しい共有可能なシークレットを作成し、適切なアクセス権を付与し、アプリケーションを更新して、古いシークレットを削除します。
</Callout>

## 前提条件 [#prerequisites]

<DNT>Secrets management service</DNT>を使用するには、次のものが必要です。

* [高度な計算](/docs/accounts/accounts-billing/new-relic-one-pricing-billing/add-on-billing)料金プラン
* [New Relicアカウント](https://newrelic.com/signup)
* [書き込みおよびミューテーション](\(https://docs.newrelic.com/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph/#terminology\))用のAPIユーザー キー
* シークレットを作成および管理するための適切な権限。必要なロールと権限の詳細については、 [「標準シークレットのアクセス制御」](#security-and-access-control)および[「きめ細かなアクセスが可能な共有可能なシークレット」](#sharable-secrets)を参照してください。

ユーザーの種類と割り当てられたロールは、NerdGraph の権限に影響を与える可能性があります。詳細については、 [「アクセスに影響する要因」](https://docs.newrelic.com/docs/accounts/accounts-billing/account-structure/factors-affecting-access-features-data/#user-permissions)を参照してください。

## 使用 <DNT>Secrets management service</DNT> [#use-secrets-management-service]

[NerdGraph Explorer](/docs/apis/nerdgraph/get-started/nerdgraph-explorer/)から、 [ミューテーションとクエリを](/docs/accounts/accounts-billing/account-structure/factors-affecting-access-features-data/#user-permissions)使用して<DNT>Secrets management service</DNT>を操作します。

ミューテーションとクエリで使用する一般的な属性は次のとおりです。

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        **属性名**
      </th>

      <th style={{ width: "200px" }}>
        **データ型**
      </th>

      <th>
        **説明**
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `description`
      </td>

      <td>
        弦
      </td>

      <td>
        秘密の簡単な説明。
      </td>
    </tr>

    <tr>
      <td>
        `key`
      </td>

      <td>
        弦
      </td>

      <td>
        ネームスペース内のシークレットの一意の識別子。 同じキーが異なるネームスペースに存在できます。
      </td>
    </tr>

    <tr>
      <td>
        `namespace`
      </td>

      <td>
        弦
      </td>

      <td>
        秘密を論理的にグループ化し、整理および分類して管理を強化し、競合を防止します。キーとペアになって、秘密の一意のアドレスを作成します。この属性は、New Relic を使用する複数のチームまたはプロジェクトがある環境で役立ちます。
      </td>
    </tr>

    <tr>
      <td>
        `scope`
      </td>

      <td>
        * `type`: 列挙型
        * `id`： ストリング
      </td>

      <td>
        アクセス可能性の観点から秘密を保存する範囲。定義属性は次のとおりです。

        * `type`: 複数のアカウントでシークレットを使用するには、 `Organization`を選択します。シークレットが単一のアカウントに固有の場合は、 `Account`を選択します。組織レベルでシークレットを保存するには、必要な権限を持つ[組織スコープのカスタムロール](https://docs.newrelic.com/docs/apis/nerdgraph/examples/nerdgraph-manage-groups/#create-role)が必要です。詳細については、[アクセス制御の](#security-and-access-control)セクションを参照してください。

        * `id`: 対応するアカウントまたは組織 ID。
      </td>
    </tr>

    <tr>
      <td>
        `tags`
      </td>

      <td>
        配列
      </td>

      <td>
        アプリケーション、サービス、ホストなどのエンティティにメタデータを追加するキーの値のペアとして機能します。 タグを使用すると、シークレットを整理、フィルタリング、管理する機能を強化できます。
      </td>
    </tr>

    <tr>
      <td>
        `value`
      </td>

      <td>
        弦
      </td>

      <td>
        本当の秘密。
      </td>
    </tr>

    <tr>
      <td>
        `purge`
      </td>

      <td>
        ブール値
      </td>

      <td>
        シークレットのすべてのバージョンを削除します。

        * `true`: シークレットを完全に削除します。
        * `false`: 削除されたシークレットとそのすべてのバージョンを復元できます。

        すべての製品管理者または`purge`権限を持つカスタム ロールを持つユーザーのみがシークレットを完全に削除できます。詳細については、 [「アクセス制御」](#security-and-access-control)セクションを参照してください。
      </td>
    </tr>

    <tr>
      <td>
        `version`
      </td>

      <td>
        弦
      </td>

      <td>
        シークレットの複数のバージョンを保存できるため、シークレットのバージョン番号を表します。
      </td>
    </tr>

    <tr>
      <td>
        `cursor` (オプション)
      </td>

      <td>
        弦
      </td>

      <td>
        シークレットのリストを取得するときに、応答に`nextCursor`属性が含まれている場合は、現在の結果ページ以外にも利用可能なシークレットがあることを示します。次の結果ページにアクセスするには、 `cursor`属性の`nextCursor`値を使用してクエリを再度実行します。
      </td>
    </tr>
  </tbody>
</table>

<Callout variant="important">
  実際のシークレットのみを`value`属性にコピーします。`description` 、 `key` 、 `namespace`などの他の属性で宣言されていないことを確認してください。
</Callout>

### オペレーション [#operations]

<DNT>Secrets management service</DNT>で実行できる操作は、次の 2 つのカテゴリに分類されます。

<Callout variant="tip">
  **標準シークレットと共有可能なシークレットの選択:**

  * アカウントまたは組織にアクセスできるすべてのユーザーとシークレットを共有する場合は、**標準シークレット**(`secretsManagementCreateSecret`) を使用します。
  * 特定のユーザー、グループ、またはシステム ID に権限を付与して、シークレットにアクセスできるユーザーを正確に制御する必要がある場合は、**共有可能なシークレット**(`secretsManagementCreateShareableSecret`) を使用します。
</Callout>

<CollapserGroup>
  <Collapser id="create-secret" title="秘密を保存する">
    指定されたアカウントまたは組織の権限を持つすべてのユーザーがアクセスできる標準シークレットを保存するには、次のような`secretsManagementCreateSecret`変異を使用します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **属性名**
          </th>

          <th style={{ width: "200px" }}>
            **データ型**
          </th>

          <th>
            **説明**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `description` (オプション)
          </td>

          <td>
            弦
          </td>

          <td>
            秘密の説明を入力してください。
          </td>
        </tr>

        <tr>
          <td>
            `key` （必須）
          </td>

          <td>
            弦
          </td>

          <td>
            シークレットに一意のキーを割り当てます。
          </td>
        </tr>

        <tr>
          <td>
            `namespace` (オプション)
          </td>

          <td>
            弦
          </td>

          <td>
            特定のネームスペースにシークレットを保存したい場合は、名前を割り当てます。
          </td>
        </tr>

        <tr>
          <td>
            `scope` （必須）
          </td>

          <td />

          <td>
            `type`: 列挙型`id` : 文字列
          </td>

          <td>
            * `type`:[役割](#security-and-access-control)と要件に基づいて、 `Account`または`Organization`を選択します。
            * `id`: 対応するアカウントまたは組織 ID を入力します。
          </td>
        </tr>

        <tr>
          <td>
            `tags` (オプション)
          </td>

          <td>
            配列
          </td>

          <td>
            キーと値のペアを割り当てます。
          </td>
        </tr>

        <tr>
          <td>
            `value` （必須）
          </td>

          <td>
            弦
          </td>

          <td>
            実際の秘密を入力します。
          </td>
        </tr>
      </tbody>
    </table>

    #### サンプルクエリ:

    ```graphql
    mutation {
      secretsManagementCreateSecret(
        description: "ZXY"
        key: "Test2"
        scope: { id: 1, type: ACCOUNT }
        value: "1990@123"
        namespace: "Namespace1"
      )
    }
    ```

    ### レスポンス

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **属性名**
          </th>

          <th>
            **説明**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `description`
          </td>

          <td>
            秘密の説明（提供されている場合）。
          </td>
        </tr>

        <tr>
          <td>
            `key`
          </td>

          <td>
            割り当てられたキー。
          </td>
        </tr>

        <tr>
          <td>
            `latestVersion`
          </td>

          <td>
            秘密のバージョン。新しいシークレットを作成した場合、バージョンは`0`になります。
          </td>
        </tr>

        <tr>
          <td>
            `metadata`
          </td>

          <td>
            シークレットに関連付けられたメタデータ（存在する場合）。
          </td>
        </tr>

        <tr>
          <td>
            `namespace`
          </td>

          <td>
            シークレットのネームスペース (指定されている場合)。
          </td>
        </tr>

        <tr>
          <td>
            `scope`
          </td>

          <td>
            シークレットに関連付けられたアカウントまたは組織 ID。
          </td>
        </tr>

        <tr>
          <td>
            `tags`
          </td>

          <td>
            シークレットに関連付けられているキーと値のペア（存在する場合）。
          </td>
        </tr>
      </tbody>
    </table>

    #### サンプル応答:

    ```json
     {
      "data": {
        "secretsManagementCreateSecret": {
          "description": "ZXY",
          "key": "Test2",
          "latestVersion": 0,
          "scope": {
            "id": "1",
            "type": "ACCOUNT"
          }
        }
      }
     }
    ```
  </Collapser>

  <Collapser id="create-sharable-secret" title="共有可能な秘密を保存する">
    `secretsManagementCreateShareableSecret`ミューテーションを使用して、きめ細かなアクセス制御を備えたプライベート シークレットを作成します。共有可能なシークレットを作成すると、自動的に所有者となり、誰がアクセスできるかを完全に制御できるようになります。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **属性名**
          </th>

          <th style={{ width: "200px" }}>
            **データ型**
          </th>

          <th>
            **説明**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `description` (オプション)
          </td>

          <td>
            弦
          </td>

          <td>
            秘密の説明を入力してください。
          </td>
        </tr>

        <tr>
          <td>
            `key` （必須）
          </td>

          <td>
            弦
          </td>

          <td>
            シークレットに一意のキーを割り当てます。
          </td>
        </tr>

        <tr>
          <td>
            `namespace` (オプション)
          </td>

          <td>
            弦
          </td>

          <td>
            特定のネームスペースにシークレットを保存したい場合は、名前を割り当てます。
          </td>
        </tr>

        <tr>
          <td>
            `scope` （必須）
          </td>

          <td />

          <td>
            `type`: 列挙型`id` : 文字列
          </td>

          <td>
            * `type`:[役割](#security-and-access-control)と要件に基づいて、 `Account`または`Organization`を選択します。
            * `id`: 対応するアカウントまたは組織 ID を入力します。
          </td>
        </tr>

        <tr>
          <td>
            `tags` (オプション)
          </td>

          <td>
            配列
          </td>

          <td>
            キーと値のペアを割り当てます。
          </td>
        </tr>

        <tr>
          <td>
            `value` （必須）
          </td>

          <td>
            弦
          </td>

          <td>
            実際の秘密を入力します。
          </td>
        </tr>
      </tbody>
    </table>

    #### サンプルクエリ:

    ```graphql
    mutation {
      secretsManagementCreateShareableSecret(
        scope: { type: ACCOUNT, id: 1 }
        key: "prod-api-key"
        value: "sk_live_abc123xyz"
        namespace: "production"
        description: "Private API key for production"
        tags: [{ key: "environment", value: "production" }]
      ) {
        scope {
          type
          id
        }
        key
        namespace
        latestVersion
        description
        tags {
          key
          value
        }
        metadata {
          createdAt
          updatedAt
        }
      }
    }
    ```

    ### レスポンス

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **属性名**
          </th>

          <th>
            **説明**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `description`
          </td>

          <td>
            秘密の説明（提供されている場合）。
          </td>
        </tr>

        <tr>
          <td>
            `key`
          </td>

          <td>
            割り当てられたキー。
          </td>
        </tr>

        <tr>
          <td>
            `latestVersion`
          </td>

          <td>
            秘密のバージョン。新しいシークレットを作成した場合、バージョンは`0`になります。
          </td>
        </tr>

        <tr>
          <td>
            `metadata`
          </td>

          <td>
            シークレットに関連付けられたメタデータには以下が含まれます。

            * `createdAt`: シークレットが作成されたタイムスタンプ
            * `updatedAt`: シークレットが最後に更新されたときのタイムスタンプ
          </td>
        </tr>

        <tr>
          <td>
            `namespace`
          </td>

          <td>
            シークレットのネームスペース (指定されている場合)。
          </td>
        </tr>

        <tr>
          <td>
            `scope`
          </td>

          <td>
            シークレットに関連付けられたアカウントまたは組織 ID。
          </td>
        </tr>

        <tr>
          <td>
            `tags`
          </td>

          <td>
            シークレットに関連付けられているキーと値のペア（存在する場合）。
          </td>
        </tr>
      </tbody>
    </table>

    #### サンプル応答:

    ```json
    {
     "data": {
       "secretsManagementCreateShareableSecret": {
         "scope": {
           "type": "ACCOUNT",
           "id": "1"
         },
         "key": "prod-api-key",
         "namespace": "production",
         "latestVersion": 0,
         "description": "Private API key for production",
         "tags": [
           {
             "key": "environment",
             "value": "production"
           }
         ],
         "metadata": {
           "createdAt": "2025-10-30T12:34:56.789Z",
           "updatedAt": "2025-10-30T12:34:56.789Z"
         }
       }
     }
    }
    ```

    <Callout variant="tip">
      共有可能な秘密を作成すると、自動的に所有者になります。他のユーザー、グループ、またはシステム ID にアクセスを許可するには、 `authorizationManagementGrantAccess`ミューテーションを使用します。詳細については、「[共有可能なシークレットへのアクセスを許可する」](#grant-access-sharable-secret)セクションを参照してください。
    </Callout>
  </Collapser>

  <Collapser id="retrieve-secret" title="秘密を取得する">
    `{customerAdministration {secret}}`クエリを使用して、シークレットとその詳細を取得します。現在のアカウントまたは組織のみにスコープされたシークレットを取得できます。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **属性名**
          </th>

          <th style={{ width: "200px" }}>
            **データ型**
          </th>

          <th>
            **説明**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `key` （必須）
          </td>

          <td>
            弦
          </td>

          <td>
            取得したいシークレットのキー。
          </td>
        </tr>

        <tr>
          <td>
            `namespace` (オプション)
          </td>

          <td>
            弦
          </td>

          <td>
            シークレットのネームスペース (利用可能な場合)。
          </td>
        </tr>

        <tr>
          <td>
            `scope` （必須）
          </td>

          <td />

          <td>
            `type`: 列挙型`id` : 文字列
          </td>

          <td>
            * `type`: シークレットを保存するレベル`account`または`organization`を選択します。
            * `id`: 対応するアカウントまたは組織 ID を入力します。
          </td>
        </tr>

        <tr>
          <td>
            `unlock` (オプション)
          </td>

          <td>
            弦
          </td>

          <td>
            デフォルト値`false`は、シークレットのロックを解除せずにメタデータを返します。シークレットのロックを解除して実際の値を取得する場合は、 `true`に設定します。
          </td>
        </tr>

        <tr>
          <td>
            `version` (オプション)
          </td>

          <td>
            整数
          </td>

          <td>
            取得するシークレットの特定のバージョンを入力します。バージョンを指定しない場合は、最新のバージョンが取得されます。
          </td>
        </tr>
      </tbody>
    </table>

    #### サンプルクエリ:

    ```graphql
    {
      customerAdministration {
        secret(key: "Test2", scope: { id: 1, type: ACCOUNT }, unlock: true)
      }
    }
    ```

    ### レスポンス

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **属性名**
          </th>

          <th>
            **説明**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `description`
          </td>

          <td>
            秘密の説明。
          </td>
        </tr>

        <tr>
          <td>
            `isSharable`
          </td>

          <td>
            シークレットがきめ細かなアクセス制御を備えた[共有可能なシークレット](#sharable-secrets)であるかどうかを示します。`true`の場合、シークレットはきめ細かい権限を使用し、デフォルトでは作成者に対して非公開になります。`false`の場合、アカウントまたは組織内の権限を持つすべてのユーザーがアクセスできる標準シークレットです。
          </td>
        </tr>

        <tr>
          <td>
            `key`
          </td>

          <td>
            秘密の鍵。
          </td>
        </tr>

        <tr>
          <td>
            `metadata`
          </td>

          <td>
            シークレットに関連付けられたメタデータ（存在する場合）。
          </td>
        </tr>

        <tr>
          <td>
            `namespace`
          </td>

          <td>
            シークレットのネームスペース (指定されている場合)。
          </td>
        </tr>

        <tr>
          <td>
            `retrievedValue`
          </td>

          <td>
            * `value`: `unlock`が`true`に設定されている場合の実際のシークレット値。
            * `version`: 秘密のバージョン。
          </td>
        </tr>

        <tr>
          <td>
            `scope`
          </td>

          <td>
            シークレットに関連付けられたアカウントまたは組織 ID。
          </td>
        </tr>

        <tr>
          <td>
            `tags`
          </td>

          <td>
            シークレットに関連付けられているキーと値のペア（存在する場合）。
          </td>
        </tr>
      </tbody>
    </table>

    #### サンプル応答:

    ```json
    {
      "data": {
        "customerAdministration": {
          "secret": {
            "description": "ZXY",
            "isSharable": false,
            "key": "Test2",
            "namespace": null,
            "retrievedValue": {
              "value": "1995@123",
              "version": 1
            },
            "scope": {
              "id": "1",
              "type": "ACCOUNT"
            }
          }
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="update-secret" title="シークレットを更新する">
    既存のシークレットの値を更新するには、 `secretsManagementUpdateSecret`ミューテーションを使用します。

    <Callout variant="tip">
      更新操作ごとに、シークレットの新しいバージョンが作成されます。最高バージョンは常に秘密の最新バージョンです。古いバージョンのシークレットを取得するには、 `{customerAdministration {secretVersions}}`クエリを使用できます。詳細については、 [「シークレットのすべてのバージョン情報を取得する」](#retrieve-secret-versions)セクションを参照してください。
    </Callout>

    #### 入力問題

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **属性名**
          </th>

          <th style={{ width: "200px" }}>
            **データ型**
          </th>

          <th>
            **説明**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `description` (オプション)
          </td>

          <td>
            弦
          </td>

          <td>
            既存のものを更新する場合は説明を追加します。
          </td>
        </tr>

        <tr>
          <td>
            `key` （必須）
          </td>

          <td>
            弦
          </td>

          <td>
            値を更新するシークレットのキーを入力します。
          </td>
        </tr>

        <tr>
          <td>
            `namespace` (オプション)
          </td>

          <td>
            弦
          </td>

          <td>
            シークレットのネームスペース (利用可能な場合)。
          </td>
        </tr>

        <tr>
          <td>
            `scope` （必須）
          </td>

          <td />

          <td>
            `type`: 列挙型`id` : 文字列
          </td>

          <td>
            * `type`: シークレットを保存するレベル`Account`または`Organization`を選択します。
            * `id`: 対応するアカウントまたは組織 ID を入力します。
          </td>
        </tr>

        <tr>
          <td>
            `value` （必須）
          </td>

          <td>
            弦
          </td>

          <td>
            シークレットの更新された値。
          </td>
        </tr>
      </tbody>
    </table>

    #### サンプルクエリ:

    ```graphql
    mutation {
      secretsManagementUpdateSecret(
        key: "Test2"
        scope: { id: 1, type: ACCOUNT }
        value: "1995@123"
      )
    }
    ```

    ### レスポンス

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **属性名**
          </th>

          <th>
            **説明**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `description`
          </td>

          <td>
            提供されている場合、シークレットの説明が更新されます。
          </td>
        </tr>

        <tr>
          <td>
            `key`
          </td>

          <td>
            秘密の鍵。
          </td>
        </tr>

        <tr>
          <td>
            `latestVersion`
          </td>

          <td>
            更新後のシークレットの最新バージョン番号。
          </td>
        </tr>

        <tr>
          <td>
            `metadata`
          </td>

          <td>
            シークレットに関連付けられたメタデータ（存在する場合）。
          </td>
        </tr>

        <tr>
          <td>
            `namespace`
          </td>

          <td>
            シークレットのネームスペース (存在する場合)。
          </td>
        </tr>

        <tr>
          <td>
            `scope`
          </td>

          <td>
            シークレットに関連付けられたアカウントまたは組織 ID。
          </td>
        </tr>

        <tr>
          <td>
            `tags`
          </td>

          <td>
            シークレットに関連付けられているキーと値のペア（存在する場合）。
          </td>
        </tr>
      </tbody>
    </table>

    #### サンプル応答:

    ```json
    {
      "data": {
        "secretsManagementUpdateSecret": {
          "description": "ZXY",
          "key": "Test2",
          "latestVersion": 1,
          "scope": {
            "id": "1",
            "type": "ACCOUNT"
          }
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="retrieve-secret-versions" title="シークレットのすべてのバージョン情報を取得する">
    `{customerAdministration {secretVersions}}`クエリを使用して、シークレットの最新バージョンを最大 10 個までとその詳細とともに取得します。現在のアカウントまたは組織のみにスコープされたシークレットを取得できます。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **属性名**
          </th>

          <th style={{ width: "200px" }}>
            **データ型**
          </th>

          <th>
            **説明**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `fetchDeleted` (オプション)
          </td>

          <td>
            弦
          </td>

          <td>
            シークレットの削除されていないバージョンのみを取得するには、 `false`に設定します。ソフト削除されたものも含め、シークレットのバージョンを取得するには、 `true`に設定します。
          </td>
        </tr>

        <tr>
          <td>
            `key` （必須）
          </td>

          <td>
            弦
          </td>

          <td>
            取得したいシークレットのキー。
          </td>
        </tr>

        <tr>
          <td>
            `namespace` (オプション)
          </td>

          <td>
            弦
          </td>

          <td>
            シークレットのネームスペース (利用可能な場合)。
          </td>
        </tr>

        <tr>
          <td>
            `scope` （必須）
          </td>

          <td />

          <td>
            `type`: 列挙型`id` : 文字列
          </td>

          <td>
            * `type`: シークレットを保存するレベル`account`または`organization`を選択します。
            * `id`: 対応するアカウントまたは組織 ID を入力します。
          </td>
        </tr>
      </tbody>
    </table>

    #### サンプルクエリ:

    ```graphql
    {
      customerAdministration {
        secretVersions(
          fetchDeleted: true
          key: "Test2"
          scope: { id: 1, type: ACCOUNT }
        )
      }
    }
    ```

    ### レスポンス

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **属性名**
          </th>

          <th>
            **説明**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `key`
          </td>

          <td>
            秘密の鍵。
          </td>
        </tr>

        <tr>
          <td>
            `latestVersion`
          </td>

          <td>
            シークレットの最新バージョン番号。
          </td>
        </tr>

        <tr>
          <td>
            `namespace`
          </td>

          <td>
            シークレットのネームスペース (指定されている場合)。
          </td>
        </tr>

        <tr>
          <td>
            `scope`
          </td>

          <td>
            シークレットに関連付けられたアカウントまたは組織 ID。
          </td>
        </tr>

        <tr>
          <td>
            `secretVersions`
          </td>

          <td>
            シークレットの各バージョンの詳細を含むオブジェクトの配列。以下が含まれます。

            * `createdAt`: 各バージョンが作成された日時を示すタイムスタンプ。
            * `isDeleted`: シークレット バージョンが削除されているかどうかを示します。
            * `version`: シークレットのバージョン番号。
          </td>
        </tr>
      </tbody>
    </table>

    #### サンプル応答:

    ```json
    {
      "data": {
        "customerAdministration": {
          "secretVersions": {
            "key": "Test2",
            "latestVersion": 1,
            "namespace": null,
            "scope": {
              "id": "1",
              "type": "ACCOUNT"
            },
            "secretVersions": [
              {
                "createdAt": "2025-05-26T07:52:23.920250Z",
                "isDeleted": false,
                "version": 1
              },
              {
                "createdAt": "2025-05-26T07:45:19.395796Z",
                "isDeleted": false,
                "version": 0
              }
            ]
          }
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="delete-secrets" title="シークレットを削除する">
    シークレットのすべてのバージョンを削除するには、 `secretsManagementDeleteSecret`ミューテーションを使用します。すべての製品管理者または`purge`権限を持つカスタム ロールを持つユーザーのみが、シークレットを完全に削除することを選択できます。他のユーザーはシークレットを永久に削除することはできません。シークレットを完全に削除していない場合は、 `secretsManagementRecoverSecret`ミューテーションを使用して[回復](#recover-secrets)できます。

    #### 入力属性

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **属性名**
          </th>

          <th style={{ width: "200px" }}>
            **データ型**
          </th>

          <th>
            **説明**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `key` （必須）
          </td>

          <td>
            弦
          </td>

          <td>
            削除するシークレットのキー。
          </td>
        </tr>

        <tr>
          <td>
            `namespace` (オプション)
          </td>

          <td>
            弦
          </td>

          <td>
            シークレットのネームスペース (利用可能な場合)。
          </td>
        </tr>

        <tr>
          <td>
            `purge` （必須）
          </td>

          <td>
            ブール値
          </td>

          <td>
            シークレットを完全に削除するには、値を`true`に設定します。ソフト削除の場合は、値を`false`に設定します。
          </td>
        </tr>

        <tr>
          <td>
            `scope` （必須）
          </td>

          <td />

          <td>
            `type`: 列挙型`id` : 文字列
          </td>

          <td>
            * `type`: シークレットを保存するレベルを選択します。
            * `id`: 対応するアカウントまたは組織 ID を入力します。
          </td>
        </tr>
      </tbody>
    </table>

    #### サンプルクエリ:

    ```graphql
    mutation {
      secretsManagementDeleteSecret(
        key: "Test1"
        scope: { id: 1, type: ACCOUNT }
        purge: false
      )
    }
    ```

    ### レスポンス

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **属性名**
          </th>

          <th>
            **説明**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `key`
          </td>

          <td>
            削除されたシークレットのキー。
          </td>
        </tr>

        <tr>
          <td>
            `namespace`
          </td>

          <td>
            削除されたシークレットのネームスペース (利用可能な場合)。
          </td>
        </tr>

        <tr>
          <td>
            `scope`
          </td>

          <td>
            削除されたシークレットに関連付けられているアカウントまたは組織 ID。
          </td>
        </tr>
      </tbody>
    </table>

    #### サンプル応答:

    ```json
    {
      "data": {
        "secretsManagementDeleteSecret": {
          "key": "Test1",
          "namespace": null,
          "scope": {
            "id": "1",
            "type": "ACCOUNT"
          }
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="recover-secrets" title="秘密を取り戻す">
    以前に`purge`属性を`false`に設定して`secretsManagementDeleteSecret`ミューテーションを使用して削除したシークレットを回復するには、 `secretsManagementRecoverSecret`ミューテーションを使用します。シークレットが完全に削除された場合、回復することはできません。

    #### 入力属性

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **属性名**
          </th>

          <th style={{ width: "200px" }}>
            **データ型**
          </th>

          <th>
            **説明**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `key` （必須）
          </td>

          <td>
            弦
          </td>

          <td>
            回復したい秘密の鍵。
          </td>
        </tr>

        <tr>
          <td>
            `namespace` (オプション)
          </td>

          <td>
            弦
          </td>

          <td>
            削除されたシークレットのネームスペース (利用可能な場合)。
          </td>
        </tr>

        <tr>
          <td>
            `scope` （必須）
          </td>

          <td />

          <td>
            `type`: 列挙型`id` : 文字列
          </td>

          <td>
            * `type`: シークレットが保存されたレベル`Account`または`Organization`を選択します。
            * `id`: アカウントまたは組織の対応する ID を入力します。
          </td>
        </tr>
      </tbody>
    </table>

    #### サンプルクエリ:

    ```graphql
    mutation {
      secretsManagementRecoverSecret(key: "Test1", scope: { id: 1, type: ACCOUNT })
    }
    ```

    ### レスポンス

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **属性名**
          </th>

          <th>
            **説明**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `key`
          </td>

          <td>
            回復された秘密のキー。
          </td>
        </tr>

        <tr>
          <td>
            `latestVersion`
          </td>

          <td>
            回復された秘密の最新版。
          </td>
        </tr>

        <tr>
          <td>
            `namespace`
          </td>

          <td>
            回復されたシークレットのネームスペース (利用可能な場合)。
          </td>
        </tr>

        <tr>
          <td>
            `scope`
          </td>

          <td>
            回復されたシークレットに関連付けられたアカウントまたは組織 ID。
          </td>
        </tr>
      </tbody>
    </table>

    #### サンプル応答:

    ```json
    {
      "data": {
        "secretsManagementRecoverSecret": {
          "key": "Test1",
          "latestVersion": 1,
          "namespace": null,
          "scope": {
            "id": "1",
            "type": "ACCOUNT"
          }
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="delete-secrets-version" title="シークレットの特定のバージョンを削除する">
    特定のバージョンのシークレットを削除するには、 `secretsManagementDeleteSecretVersion`ミューテーションを使用します。すべての製品管理者または`purge`権限を持つカスタム ロールを持つユーザーのみが、それを完全に削除することを選択できます。他のユーザーは秘密バージョンを永久に削除することはできません。シークレット バージョンを完全に削除していない場合は、 `secretsManagementDeleteSecretVersion`ミューテーションを使用して[回復](#recover-secrets-versions)できます。

    #### 入力属性

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **属性名**
          </th>

          <th style={{ width: "200px" }}>
            **データ型**
          </th>

          <th>
            **説明**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `key` （必須）
          </td>

          <td>
            弦
          </td>

          <td>
            いずれかのバージョンを削除するシークレットのキー。
          </td>
        </tr>

        <tr>
          <td>
            `namespace` (オプション)
          </td>

          <td>
            弦
          </td>

          <td>
            シークレットのネームスペース (利用可能な場合)。
          </td>
        </tr>

        <tr>
          <td>
            `purge` （必須）
          </td>

          <td>
            ブール値
          </td>

          <td>
            シークレット バージョンを完全に削除するには、値を`true`に設定します。ソフト削除の場合は、値を`false`に設定します。
          </td>
        </tr>

        <tr>
          <td>
            `scope` （必須）
          </td>

          <td />

          <td>
            `type`: 列挙型`id` : 文字列
          </td>

          <td>
            * `type`: シークレットを保存するレベルを選択します。
            * `id`: アカウントまたは組織の対応する ID を入力します。
          </td>
        </tr>

        <tr>
          <td>
            `version` (オプション)
          </td>

          <td>
            弦
          </td>

          <td>
            削除するシークレットの特定のバージョン。バージョンを指定しない場合は、最新バージョンが削除され、以前のバージョンが最新バージョンになります。
          </td>
        </tr>
      </tbody>
    </table>

    #### サンプルクエリ:

    ```graphql
    mutation {
      secretsManagementDeleteSecretVersion(
        key: "Test2"
        purge: false
        scope: { id: 1, type: ACCOUNT }
        version: 0
      )
    }
    ```

    ### レスポンス

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **属性名**
          </th>

          <th>
            **説明**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `key`
          </td>

          <td>
            秘密の鍵。
          </td>
        </tr>

        <tr>
          <td>
            `latestVersion`
          </td>

          <td>
            指定されたバージョンを削除した後に利用できるシークレットの最新バージョン。
          </td>
        </tr>

        <tr>
          <td>
            `namespace`
          </td>

          <td>
            シークレットのネームスペース (利用可能な場合)。
          </td>
        </tr>

        <tr>
          <td>
            `scope`
          </td>

          <td>
            シークレットに関連付けられたアカウントまたは組織 ID。
          </td>
        </tr>
      </tbody>
    </table>

    #### サンプル応答:

    ```json
    {
      "data": {
        "secretsManagementDeleteSecretVersion": {
          "key": "Test2",
          "latestVersion": 1,
          "scope": {
            "id": "1"
          }
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="recover-secrets-versions" title="秘密のバージョンを復元する">
    `secretsManagementRecoverSecretVersion`ミューテーションを使用してソフト削除したシークレットの特定のバージョンを復元するには、 `secretsManagementDeleteSecretVersion`ミューテーションを使用します。バージョンが完全に削除された場合、復元することはできません。

    #### 入力属性

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **属性名**
          </th>

          <th style={{ width: "200px" }}>
            **データ型**
          </th>

          <th>
            **説明**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `key` （必須）
          </td>

          <td>
            弦
          </td>

          <td>
            いずれかのバージョンを復元するシークレットのキー。
          </td>
        </tr>

        <tr>
          <td>
            `namespace` (オプション)
          </td>

          <td>
            弦
          </td>

          <td>
            シークレットのネームスペース (利用可能な場合)。
          </td>
        </tr>

        <tr>
          <td>
            `scope` （必須）
          </td>

          <td />

          <td>
            `type`: 列挙型`id` : 文字列
          </td>

          <td>
            * `type`: シークレットが属するレベル`Account`または`Organization`を選択します。
            * `id`: アカウントまたは組織の対応する ID を入力します。
          </td>
        </tr>

        <tr>
          <td>
            `version` (オプション)
          </td>

          <td>
            弦
          </td>

          <td>
            回復するシークレットのバージョン番号を入力します。バージョンを指定しない場合は、ソフト削除されたシークレットの最高バージョンが復元されます。
          </td>
        </tr>
      </tbody>
    </table>

    #### サンプルクエリ:

    ```graphql
    mutation {
      secretsManagementRecoverSecretVersion(
        key: "Test2"
        scope: { id: 1, type: ACCOUNT }
        version: 0
      )
    }
    ```

    ### レスポンス

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **属性名**
          </th>

          <th>
            **説明**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `key`
          </td>

          <td>
            秘密の鍵。
          </td>
        </tr>

        <tr>
          <td>
            `latestVersion`
          </td>

          <td>
            復旧後のシークレット最新版。
          </td>
        </tr>

        <tr>
          <td>
            `namespace`
          </td>

          <td>
            シークレットのネームスペース (利用可能な場合)。
          </td>
        </tr>

        <tr>
          <td>
            `scope`
          </td>

          <td>
            シークレットに関連付けられたアカウントまたは組織 ID。
          </td>
        </tr>
      </tbody>
    </table>

    #### サンプル応答:

    ```json
    {
      "data": {
        "secretsManagementRecoverSecretVersion": {
          "key": "Test2",
          "latestVersion": 1,
          "namespace": null,
          "scope": {
            "id": "1",
            "type": "ACCOUNT"
          }
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="secret-list" title="秘密のリストを取得する">
    `{customerAdministration {secrets}}`クエリを使用して、アカウントまたは組織で使用可能なシークレットのリストを取得します。現在のアカウントまたは組織のみにスコープされたシークレットを取得できます。

    <Callout variant="tip">
      リストには、アクセス権がない可能性のある共有可能なシークレットも含め、スコープ内のすべてのシークレットが含まれます。アクセス権限は、 [「シークレットの取得」](#retrieve-secret)操作を使用してシークレット値を取得するときに適用されます。
    </Callout>

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **属性名**
          </th>

          <th style={{ width: "200px" }}>
            **データ型**
          </th>

          <th>
            **説明**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `cursor` (オプション)
          </td>

          <td>
            弦
          </td>

          <td>
            秘密リスト内を移動するには、 `cursor`を使用します。シークレット リストの最初のページを取得するには、この問題は必要ありません。 次のページにアクセスする場合は、前の応答の`NextCursor`値を使用します。
          </td>
        </tr>

        <tr>
          <td>
            `filter` （必須）
          </td>

          <td>
            * `deleted` （オプション）: ブール値

            * `namespace` （オプション）: 文字列

            * `scope` （必須）

              * `type`: 列挙型
              * `id`： ストリング
          </td>

          <td>
            検索条件を適用するには、次のフィルターを追加します。

            * `deleted`: ソフト削除されたものも含めたすべてのシークレットを取得するには、 `true`に設定します。削除されていないシークレットのみを取得するには、 `false`に設定します。
            * `namespace`: シークレットをネームスペースでフィルターするには、ネームスペース名を指定します。
            * `scope`: スコープ別にシークレットをフィルタリングするには、レベル (`Account`または`Organization`) と対応する ID を指定します。
          </td>
        </tr>

        <tr>
          <td>
            `sort` (オプション)
          </td>

          <td>
            * `direction` （必須）: ブール値
            * `key` （必須）: ブール値
          </td>

          <td>
            シークレットのリストを並べ替えるには、次の属性を指定します。

            * `direction`: 昇順の場合は`ASC` 、降順の場合は`DESC`を選択します。
            * `key`: 使用可能なオプションは`CREATED_AT`です。これにより、シークレットが作成時間に基づいて並べ替えられます。
          </td>
        </tr>
      </tbody>
    </table>

    #### サンプルクエリ:

    ```graphql
    {
      customerAdministration {
        secrets(
          filter: {
            deleted: { eq: false }
            scope: { eq: { id: 1, type: ACCOUNT } }
          }
          cursor: ""
          sort: { direction: DESC, key: CREATED_AT }
        )
      }
    }
    ```

    ### レスポンス

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **属性名**
          </th>

          <th>
            **説明**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `nextCursor`
          </td>

          <td>
            秘密リストの次のページにアクセスするためのカーソル値。他にページがない場合、この値は`null`になります。
          </td>
        </tr>

        <tr>
          <td>
            `scope`
          </td>

          <td>
            シークレットに関連付けられたアカウントまたは組織 ID。
          </td>
        </tr>

        <tr>
          <td>
            `secrets`
          </td>

          <td>
            リストされた秘密の詳細には以下が含まれます:

            * `description`: シークレットの説明（ある場合）。

            * `isDeleted`: シークレットがソフト削除状態にあるかどうかを示します。

            * `isSharable`: シークレットがきめ細かなアクセス制御を備えた[共有可能なシークレット](#sharable-secrets)であるかどうかを示します。

            * `key`: 秘密の鍵。

            * `latestVersion`: シークレットの最新バージョン番号。

            * `metadata`: シークレットに関連付けられているメタデータ（存在する場合）。

              * `createdAt`: シークレットが作成された日時を示すタイムスタンプ。
              * `updatedAt`: シークレットが最後に更新された日時を示すタイムスタンプ。

            * `namespace`: シークレットのネームスペース (利用可能な場合)。

            * `tags`: シークレットに関連付けられているキーと値のペア（存在する場合）。
          </td>
        </tr>

        <tr>
          <td>
            `totalCount`
          </td>

          <td>
            ページ区切りに関係なく、アカウントまたは組織で使用可能なシークレットの合計数。
          </td>
        </tr>
      </tbody>
    </table>

    #### サンプル応答:

    ```json
    {
      "data": {
        "customerAdministration": {
          "secrets": {
            "nextCursor": "AAAADJ_Fqig86wFIH6c3ehxxpoFy0vdW2eA4pTkQFYDztd_UIeL91kCElQaCG0iORpmDdDT6KeZAVkByh4ogENST8yjxeZ5tI6vPYnyMW5rhtGwXlgt9zQRGYj1HcdpUHdfUcTC-CSsdQDLexy52XA==",
            "scope": {
              "id": "1",
              "type": "ACCOUNT"
            },
            "secrets": [
              {
                "description": "ZXY",
                "isDeleted": false,
                "isSharable": false,
                "key": "test2",
                "latestVersion": 1,
                "metadata": {
                  "createdAt": "2025-05-26T07:45:19.395796Z",
                  "updatedAt": "2025-05-26T08:08:49.130724Z"
                },
                "namespace": null,
                "tags": null
              },
              {
                "description": "XYZ",
                "isDeleted": false,
                "isSharable": false,
                "key": "test2",
                "latestVersion": 0,
                "metadata": {
                  "createdAt": "2025-05-26T07:26:32.114987Z",
                  "updatedAt": "2025-05-26T07:26:32.114987Z"
                },
                "namespace": null,
                "tags": null
              },
              {
                "description": "CBA",
                "isDeleted": false,
                "isSharable": false,
                "key": "test1",
                "latestVersion": 1,
                "metadata": {
                  "createdAt": "2025-05-26T07:15:08.987252Z",
                  "updatedAt": "2025-05-26T08:05:17.051658Z"
                },
                "namespace": null,
                "tags": null
              }
            ],
            "totalCount": 3
          }
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="grant-access-sharable-secret" title="共有可能な秘密へのアクセスを許可する">
    共有可能なシークレットを作成した後、ユーザー、グループ、システム ID、またはシステム ID グループに特定の権限を付与できます。`authorizationManagementGrantAccess`ミューテーションを使用して、承認されたエンティティと秘密を共有します。

    <Callout variant="important">
      シークレットの所有者 (作成者)、組織管理者、または`secret.create.grants`機能を持つユーザーは、共有可能なシークレットへのアクセスを許可できます。
    </Callout>

    #### 入力属性

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **属性名**
          </th>

          <th style={{ width: "200px" }}>
            **データ型**
          </th>

          <th>
            **説明**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `grantAccessOptions` （必須）
          </td>

          <td>
            オブジェクト
          </td>

          <td>
            2 つの主要コンポーネントを含む grant 設定が含まれます。

            * `entityAccessGrants`: 付与する秘密とロールを定義します
            * `grantee`: アクセスを許可するユーザーを指定します
          </td>
        </tr>

        <tr>
          <td>
            `entityAccessGrants.entity.id` （必須）
          </td>

          <td>
            弦
          </td>

          <td>
            シークレットの一意の ID。 形式は`namespace::partition::entry_key_secret`です。

            たとえば、ネームスペース`production`のアカウント`12345`にキー`prod-api-key`のシークレットを作成した場合、エンティティ ID は`production::account-12345::prod-api-key`になります。 ネームスペースが指定されていない場合は、空の文字列`::account-12345::prod-api-key`を使用します。
          </td>
        </tr>

        <tr>
          <td>
            `entityAccessGrants.entity.type` （必須）
          </td>

          <td>
            弦
          </td>

          <td>
            エンティティの種類。シークレットの場合、これは常に`secret`なります。
          </td>
        </tr>

        <tr>
          <td>
            `entityAccessGrants.roleId` （必須）
          </td>

          <td>
            弦
          </td>

          <td>
            付与するロールの固有ID。 利用可能なロール ID を見つけるには、NerdGraph API エクスプローラーを使用して、スコープ`secret`でロールをクエリします。一般的なロールには、シークレット所有者 (フル コントロール) とシークレット リーダー (読み取り専用アクセス) が含まれます。
          </td>
        </tr>

        <tr>
          <td>
            `grantee.id` （必須）
          </td>

          <td>
            弦
          </td>

          <td>
            アクセスを受信するユーザー、グループ、システム ID、またはシステム ID グループの固有 ID。
          </td>
        </tr>

        <tr>
          <td>
            `grantee.type` （必須）
          </td>

          <td>
            イナム
          </td>

          <td>
            受給者の種類。有効な値:

            * `USER`: 個人ユーザー
            * `GROUP`: ユーザーグループ
            * `SYSTEM_IDENTITY`: システム ID (自動化プロセス用)
            * `SYSTEM_IDENTITY_GROUP`: システムIDグループ
          </td>
        </tr>
      </tbody>
    </table>

    #### サンプルクエリ:

    ```graphql
    mutation {
      authorizationManagementGrantAccess(
        grantAccessOptions: {
          entityAccessGrants: {
            entity: {
              id: "production::account-1::prod-api-key",
              type: "secret"
            },
            roleId: "role-id-for-secret-reader"
          },
          grantee: {
            id: "system-identity-id-abc123",
            type: SYSTEM_IDENTITY
          }
        }
      ) {
        roles {
          id
          roleId
        }
      }
    }
    ```

    ### レスポンス

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **属性名**
          </th>

          <th>
            **説明**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `roles`
          </td>

          <td>
            付与操作によって作成されたロール割り当ての配列。以下が含まれます。

            * `id`: 助成金の一意の識別子
            * `roleId`: 付与されたロールID
          </td>
        </tr>
      </tbody>
    </table>

    #### サンプル応答:

    ```json
    {
      "data": {
        "authorizationManagementGrantAccess": {
          "roles": [
            {
              "id": "grant-id-xyz789",
              "roleId": "role-id-for-secret-reader"
            }
          ]
        }
      }
    }
    ```

    <Callout variant="tip">
      共有可能なシークレットへのアクセスを取り消すには、 `authorizationManagementRevokeAccess`ミューテーションを使用します。
    </Callout>
  </Collapser>

  <Collapser id="revoke-access-sharable-secret" title="共有可能な秘密へのアクセスを取り消す">
    `authorizationManagementRevokeAccess`ミューテーションを使用して、以前に共有可能なシークレットへのアクセスを許可されたユーザー、グループ、システム ID、またはシステム ID グループからアクセスを削除します。

    <Callout variant="important">
      シークレットの所有者 (作成者)、組織管理者、または適切な取り消し権限を持つユーザーは、共有可能なシークレットへのアクセスを削除できます。
    </Callout>

    #### 入力属性

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **属性名**
          </th>

          <th style={{ width: "200px" }}>
            **データ型**
          </th>

          <th>
            **説明**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `grantAccessOptions` （必須）
          </td>

          <td>
            オブジェクト
          </td>

          <td>
            許可操作と同じ構造の取り消し設定が含まれます。
          </td>
        </tr>

        <tr>
          <td>
            `entityAccessGrants.entity.id` （必須）
          </td>

          <td>
            弦
          </td>

          <td>
            `namespace::partition::entry_key_secret`形式のシークレットの一意の ID。
          </td>
        </tr>

        <tr>
          <td>
            `entityAccessGrants.entity.type` （必須）
          </td>

          <td>
            弦
          </td>

          <td>
            エンティティの種類。シークレットの場合、これは常に`secret`なります。
          </td>
        </tr>

        <tr>
          <td>
            `entityAccessGrants.roleId` （必須）
          </td>

          <td>
            弦
          </td>

          <td>
            取り消すロールの一意の ID。
          </td>
        </tr>

        <tr>
          <td>
            `grantee.id` （必須）
          </td>

          <td>
            弦
          </td>

          <td>
            アクセスを取り消すユーザー、グループ、システム ID、またはシステム ID グループの固有 ID。
          </td>
        </tr>

        <tr>
          <td>
            `grantee.type` （必須）
          </td>

          <td>
            イナム
          </td>

          <td>
            受給者の種類。有効な値: `USER` 、 `GROUP` 、 `SYSTEM_IDENTITY` 、 `SYSTEM_IDENTITY_GROUP` 。
          </td>
        </tr>
      </tbody>
    </table>

    #### サンプルクエリ:

    ```graphql
    mutation {
      authorizationManagementRevokeAccess(
        grantAccessOptions: {
          entityAccessGrants: {
            entity: {
              id: "production::account-12345::prod-api-key",
              type: "secret"
            }
            roleId: "role-id-for-secret-reader"
          }
          grantee: {
            id: "system-identity-id-abc123",
            type: SYSTEM_IDENTITY
          }
        }
      ) {
        roles {
          id
          roleId
        }
      }
    }
    ```

    ### レスポンス

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **属性名**
          </th>

          <th>
            **説明**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `roles`
          </td>

          <td>
            取り消された付与に関連するロール情報の配列。
          </td>
        </tr>
      </tbody>
    </table>

    #### サンプル応答:

    ```json
    {
      "data": {
        "authorizationManagementRevokeAccess": {
          "roles": [
            {
              "id": "grant-id-xyz789",
              "roleId": "role-id-for-secret-reader"
            }
          ]
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="list-access-sharable-secret" title="共有可能な秘密にアクセスできるユーザーをリストする">
    `customerAdministration/entityGrants`クエリを使用して、共有可能なシークレットへのアクセスが許可されているユーザー、グループ、システム ID、またはシステム ID グループを確認します。

    <Callout variant="tip">
      このクエリは、シークレットに対して直接行われた明示的な許可のみを返します。親スコープから継承された暗黙のアクセスまたは権限は表示されません。
    </Callout>

    #### 入力属性

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **属性名**
          </th>

          <th style={{ width: "200px" }}>
            **データ型**
          </th>

          <th>
            **説明**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `iamParent.id` （必須）
          </td>

          <td>
            弦
          </td>

          <td>
            シークレットが保存されているアカウントまたは組織の ID。
          </td>
        </tr>

        <tr>
          <td>
            `iamParent.scope` （必須）
          </td>

          <td>
            イナム
          </td>

          <td>
            親スコープ タイプ。有効な値: `ACCOUNT` 、 `ORGANIZATION` 。
          </td>
        </tr>

        <tr>
          <td>
            `entity.id` (オプション)
          </td>

          <td>
            弦
          </td>

          <td>
            `namespace::partition::entry_key_secret`形式のシークレットの一意の ID。 指定すると、この特定のシークレットの許可のみが返されます。
          </td>
        </tr>

        <tr>
          <td>
            `entity.type` （必須）
          </td>

          <td>
            弦
          </td>

          <td>
            エンティティの種類。シークレットの場合、これは常に`secret`なります。
          </td>
        </tr>

        <tr>
          <td>
            `member.id` (オプション)
          </td>

          <td>
            弦
          </td>

          <td>
            特定のユーザー、グループ、システム ID、またはシステム ID グループの ID で許可をフィルターします。
          </td>
        </tr>

        <tr>
          <td>
            `member.type` (オプション)
          </td>

          <td>
            イナム
          </td>

          <td>
            フィルタリングするメンバーのタイプ。有効な値: `USER` 、 `GROUP` 、 `SYSTEM_IDENTITY` 、 `SYSTEM_IDENTITY_GROUP` 。
          </td>
        </tr>
      </tbody>
    </table>

    #### サンプルクエリ:

    ```graphql
    {
      customerAdministration {
        entityGrants(
          filter: {
            iamParent: {
              id: { eq: "12345" }
              scope: { eq: ACCOUNT }
            }
            entity: {
              id: { eq: "production::account-12345::prod-api-key" }
              type: { eq: "secret" }
            }
          }
          cursor: ""
        ) {
          items {
            targetEntity {
              id
            }
            member {
              memberId
              memberType
            }
            id
            role {
              name
              id
            }
          }
          nextCursor
        }
      }
    }
    ```

    ### レスポンス

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **属性名**
          </th>

          <th>
            **説明**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `items`
          </td>

          <td>
            付与オブジェクトの配列。各オブジェクトには次のものが含まれます。

            * `targetEntity.id`：シークレットのエンティティID
            * `member.memberId`: ユーザー、グループ、システム ID、またはシステム ID グループの ID
            * `member.memberType`: メンバーのタイプ (ユーザー、グループ、SYSTEM\_IDENTITY、または SYSTEM\_IDENTITY\_GROUP)
            * `id`: 許可の一意の識別子（アクセスを取り消すために使用）
            * `role.name`: 付与されたロールの名前
            * `role.id`: ロールの一意の識別子
          </td>
        </tr>

        <tr>
          <td>
            `nextCursor`
          </td>

          <td>
            ページ区切りのカーソル値。次のクエリでこの値を使用して、追加の結果を取得します。
          </td>
        </tr>
      </tbody>
    </table>

    #### サンプル応答:

    ```json
    {
      "data": {
        "customerAdministration": {
          "entityGrants": {
            "items": [
              {
                "targetEntity": {
                  "id": "production::account-12345::prod-api-key"
                },
                "member": {
                  "memberId": "system-identity-id-abc123",
                  "memberType": "SYSTEM_IDENTITY"
                },
                "id": "grant-id-xyz789",
                "role": {
                  "name": "Secret Reader",
                  "id": "role-id-for-secret-reader"
                }
              }
            ],
            "nextCursor": null
          }
        }
      }
    }
    ```
  </Collapser>
</CollapserGroup>

## 関連トピック [#related-topics]

<DocTiles>
  <DocTile title="NerdGraphの概要" path="/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph">
    New RelicのGraphQL APIを使い始める
  </DocTile>

  <DocTile title="NerdGraph APIエクスプローラ" path="/docs/apis/nerdgraph/get-started/nerdgraph-explorer">
    NerdGraph APIエクスプローラーを使用してクエリとミューテーションをテストする
  </DocTile>

  <DocTile title="ユーザーグループの管理" path="/docs/apis/nerdgraph/examples/nerdgraph-manage-groups">
    カスタムロールを持つユーザーグループを作成および管理する
  </DocTile>

  <DocTile title="インフラストラクチャの秘密管理" path="/docs/infrastructure/host-integrations/installation/secrets-management">
    インフラストラクチャエージェント設定でシークレットを使用する
  </DocTile>
</DocTiles>