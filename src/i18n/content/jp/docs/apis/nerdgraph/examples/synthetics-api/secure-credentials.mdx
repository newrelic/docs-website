---
title: 安全な資格情報を管理する
tags:
  - Synthetics
  - APIs
  - NerdGraph
  - Examples
metaDescription: How to use New Relic NerdGraph API to create and manage secure credentials for synthetic monitoring.
freshnessValidatedDate: never
translationType: machine
---

[安全な資格情報を](/docs/synthetics/synthetic-monitoring/using-monitors/store-secure-credentials-scripted-browsers-api-tests)使用すると、パスワード、 APIキー、エンコードされた証明書などの機密情報を保存、保護、集中管理できます。 合成モニターはスクリプト実行中にこの情報に安全にアクセスできます。このチュートリアルでは、NerdGraph API を使用して安全な資格情報をプログラムで管理する方法の例を示します。

## 安全なクレデンシャルを作成する [#create-secure-credential]

`syntheticsCreateSecureCredential`ミューテーションを使用して安全な認証情報を作成できます。この変更により、スクリプト実行中に合成モニターがアクセスできる機密情報を安全に保存できるようになります。

### 入力

<table>
  <thead>
    <tr>
      <th>
        パラメータ
      </th>

      <th>
        データタイプ
      </th>

      <th>
        必須ですか?
      </th>

      <th>
        説明
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `accountId`
      </td>

      <td>
        整数
      </td>

      <td>
        はい
      </td>

      <td>
        安全な資格情報が作成される New Relic アカウントの

        [アカウント ID](/docs/accounts/accounts-billing/account-structure/account-id)

         。
      </td>
    </tr>

    <tr>
      <td>
        `description`
      </td>

      <td>
        弦
      </td>

      <td>
        いいえ
      </td>

      <td>
        この資格情報の目的を識別するのに役立つ説明。
      </td>
    </tr>

    <tr>
      <td>
        `key`
      </td>

      <td>
        弦
      </td>

      <td>
        はい
      </td>

      <td>
        New Relicの外形監視の安全な認証情報の一意のキー識別子。
      </td>
    </tr>

    <tr>
      <td>
        `value`
      </td>

      <td>
        弦
      </td>

      <td>
        はい
      </td>

      <td>
        安全に保存する機密値 (パスワード、 APIキーなど)。
      </td>
    </tr>
  </tbody>
</table>

### サンプルリクエスト

```graphql
mutation {
  syntheticsCreateSecureCredential(
    accountId: ACCOUNT_ID,
    description: "Your optional description",
    key: "SECURE_CREDENTIAL_NAME",
    value: "SECURE_CREDENTIAL_VALUE"
  ) {
    errors {
      description
      type
    }
  }
}
```

### サンプル回答

成功した応答はエラーに対して`null`を返します:

```json
{
  "data": {
    "syntheticsCreateSecureCredential": {
      "errors": null
    }
  }
}
```

安全な資格情報の作成中に問題が発生した場合、 `errors`配列には、何が問題であったかを説明する`description`と`type`フィールドを持つオブジェクトが含まれます。

## 安全なクレデンシャルを更新する [#update-secure-credential]

`syntheticsUpdateSecureCredential`ミューテーションを使用して、既存の安全な認証情報を更新できます。これにより、同じキー名を維持しながら、値と説明を変更できます。

### 入力

<table>
  <thead>
    <tr>
      <th>
        パラメータ
      </th>

      <th>
        データタイプ
      </th>

      <th>
        必須ですか?
      </th>

      <th>
        説明
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `accountId`
      </td>

      <td>
        整数
      </td>

      <td>
        はい
      </td>

      <td>
        安全な資格情報を含む

        [アカウント ID](/docs/accounts/accounts-billing/account-structure/account-id)

         。
      </td>
    </tr>

    <tr>
      <td>
        `description`
      </td>

      <td>
        弦
      </td>

      <td>
        いいえ
      </td>

      <td>
        安全な資格情報の説明を更新しました。
      </td>
    </tr>

    <tr>
      <td>
        `key`
      </td>

      <td>
        弦
      </td>

      <td>
        はい
      </td>

      <td>
        New Relicの外形監視の安全な認証情報の一意のキー識別子。
      </td>
    </tr>

    <tr>
      <td>
        `value`
      </td>

      <td>
        弦
      </td>

      <td>
        はい
      </td>

      <td>
        保存する新しい機密値。
      </td>
    </tr>
  </tbody>
</table>

### サンプルリクエスト

```graphql
mutation {
  syntheticsUpdateSecureCredential(
    accountId: ACCOUNT_ID
    description: "Updated description for the secure credential."
    key: "SECURE_CREDENTIAL_NAME"
    value: "SECURE_CREDENTIAL_VALUE"
  ) {
    createdAt
    lastUpdate
    errors {
      description
      type
    }
  }
}
```

### サンプル回答

成功した応答では更新されたメタデータが返され、エラーの場合は`null`返されます。

```json
{
  "data": {
    "syntheticsUpdateSecureCredential": {
      "createdAt": "2024-01-15T10:30:00Z",
      "lastUpdate": "2024-01-20T14:45:00Z",
      "errors": null
    }
  }
}
```

安全な資格情報の更新中に問題が発生した場合、 `errors`配列には、何が問題であったかを説明する`description`フィールドと`type`フィールドを持つオブジェクトが含まれます。

## 安全なクレデンシャルを削除する [#delete-secure-credential]

`syntheticsDeleteSecureCredential`ミューテーションを使用して、安全な資格情報を削除できます。削除されると、この資格情報を参照するすべてのモニターは更新されるまで失敗します。

<Callout variant="caution">
  安全な資格情報を削除する前に、アクティブなモニターがその資格情報を使用していないことを確認してください。使用中の資格情報を削除すると、それらのモニターは失敗します。
</Callout>

### 入力

<table>
  <thead>
    <tr>
      <th>
        パラメータ
      </th>

      <th>
        データタイプ
      </th>

      <th>
        必須ですか?
      </th>

      <th>
        説明
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `accountId`
      </td>

      <td>
        整数
      </td>

      <td>
        はい
      </td>

      <td>
        安全な資格情報を含む

        [アカウント ID](/docs/accounts/accounts-billing/account-structure/account-id)

         。
      </td>
    </tr>

    <tr>
      <td>
        `key`
      </td>

      <td>
        弦
      </td>

      <td>
        はい
      </td>

      <td>
        New Relicの外形監視の安全な認証情報の一意のキー識別子。
      </td>
    </tr>
  </tbody>
</table>

### サンプルリクエスト

```graphql
mutation {
  syntheticsDeleteSecureCredential(
    accountId: ACCOUNT_ID,
    key: "SECURE_CREDENTIAL_NAME"
  ) {
    errors {
      description
      type
    }
  }
}
```

### サンプル回答

成功した応答はエラーに対して`null`を返します:

```json
{
  "data": {
    "syntheticsDeleteSecureCredential": {
      "errors": null
    }
  }
}
```

安全な資格情報の削除で問題が発生した場合、 `errors`配列には、何が問題であったかを説明する`description`フィールドと`type`フィールドを持つオブジェクトが含まれます。