---
title: モニターのダウンタイムを管理する
tags:
  - Synthetics
  - APIs
  - NerdGraph
  - Examples
metaDescription: How to use New Relic NerdGraph API to create and manage monitor downtimes for synthetic monitoring.
freshnessValidatedDate: never
translationType: machine
---

モニター ダウンタイムを使用すると、合成モニターの実行を停止する期間をスケジュールできます。 これは、計画されたメンテナンス、デプロイメント、または既知の停止時にアラートを受信したくない場合に役立ちます。1 回限りのダウンタイムまたは定期的なスケジュール (毎日、毎週、毎月) を作成できます。このチュートリアルでは、NerdGraph API を使用してモニターのダウンタイムをプログラムで管理する方法の例を示します。UIを使用して監視のダウンタイムを管理するには、「 [スケジュールされたメンテナンス時間中の監視を無効にする」](/docs/synthetics/synthetic-monitoring/using-monitors/monitor-downtimes-disable-monitoring-during-scheduled-maintenance-times/)を参照してください。

<Callout variant="tip">
  タイムゾーンの値については、 [tz のタイムゾーン データベース](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones)を参照してください。たとえば、太平洋時間の場合は`America/Los_Angeles`使用します。
</Callout>

## ワンタイムモニターのダウンタイムを作る [#create-once-downtime]

`syntheticsCreateOnceMonitorDowntime`ミューテーションを使用して、1 回限りのモニター ダウンタイムを作成できます。計画的なメンテナンスや 1 度だけ発生するイベントに使用します。

### 入力

<table>
  <thead>
    <tr>
      <th>
        パラメータ
      </th>

      <th>
        データタイプ
      </th>

      <th>
        必須ですか?
      </th>

      <th>
        説明
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `accountId`
      </td>

      <td>
        整数
      </td>

      <td>
        はい
      </td>

      <td>
        ダウンタイムが作成される New Relic

        [アカウント ID](/docs/accounts/accounts-billing/account-structure/account-id)

         。
      </td>
    </tr>

    <tr>
      <td>
        `name`
      </td>

      <td>
        弦
      </td>

      <td>
        はい
      </td>

      <td>
        ダウンタイム期間の分かりやすい名前。
      </td>
    </tr>

    <tr>
      <td>
        `monitorGuids`
      </td>

      <td>
        配列
      </td>

      <td>
        いいえ
      </td>

      <td>
        ダウンタイムに含めるモニター

        [GUID](/docs/apis/nerdgraph/examples/synthetics-api/query-synthetics-data#query-monitors)

        のリスト。すべてのモニターに適用するには空のままにします。
      </td>
    </tr>

    <tr>
      <td>
        `timezone`
      </td>

      <td>
        弦
      </td>

      <td>
        はい
      </td>

      <td>
        ダウンタイム スケジュールのタイムゾーン (例: 

        `America/New_York`

         )。
      </td>
    </tr>

    <tr>
      <td>
        `startTime`
      </td>

      <td>
        弦
      </td>

      <td>
        はい
      </td>

      <td>
        ダウンタイムが

        `yyyy-MM-ddTHH:mm:ss`

        形式で開始される時刻。
      </td>
    </tr>

    <tr>
      <td>
        `endTime`
      </td>

      <td>
        弦
      </td>

      <td>
        はい
      </td>

      <td>
        ダウンタイムが

        `yyyy-MM-ddTHH:mm:ss`

        形式で終了したとき。
      </td>
    </tr>
  </tbody>
</table>

### サンプルリクエスト

```graphql
mutation {
  syntheticsCreateOnceMonitorDowntime(
    accountId: ACCOUNT_ID,
    name: "MonitorDowntimeName",
    monitorGuids: ["OptionalMonitorEntityGuid", "OptionalMonitorEntityGuid"],
    timezone: "TIMEZONE",
    startTime: "yyyy-MM-ddTHH:mm:ss",
    endTime: "yyyy-MM-ddTHH:mm:ss"
  ) {
    guid
    accountId
    name
    monitorGuids
    timezone
    startTime
    endTime
  }
}
```

## 毎日の定期的なモニターダウンタイムを作成する [#create-daily-downtime]

`syntheticsCreateDailyMonitorDowntime`ミューテーションを使用して、毎日繰り返されるモニターのダウンタイムを作成できます。毎日発生する定期的なメンテナンス ウィンドウにこれを使用します。

### 入力

<table>
  <thead>
    <tr>
      <th>
        パラメータ
      </th>

      <th>
        データタイプ
      </th>

      <th>
        必須ですか?
      </th>

      <th>
        説明
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `accountId`
      </td>

      <td>
        整数
      </td>

      <td>
        はい
      </td>

      <td>
        ダウンタイムが作成される New Relic

        [アカウント ID](/docs/accounts/accounts-billing/account-structure/account-id)

         。
      </td>
    </tr>

    <tr>
      <td>
        `name`
      </td>

      <td>
        弦
      </td>

      <td>
        はい
      </td>

      <td>
        定期的なダウンタイムのわかりやすい名前。
      </td>
    </tr>

    <tr>
      <td>
        `monitorGuids`
      </td>

      <td>
        配列
      </td>

      <td>
        いいえ
      </td>

      <td>
        ダウンタイムに含めるモニター

        [GUID](/docs/apis/nerdgraph/examples/synthetics-api/query-synthetics-data#query-monitors)

        のリスト。
      </td>
    </tr>

    <tr>
      <td>
        `timezone`
      </td>

      <td>
        弦
      </td>

      <td>
        はい
      </td>

      <td>
        ダウンタイムスケジュールのタイムゾーン。
      </td>
    </tr>

    <tr>
      <td>
        `startTime`
      </td>

      <td>
        弦
      </td>

      <td>
        はい
      </td>

      <td>
        毎日の開始時刻（ 

        `yyyy-MM-ddTHH:mm:ss`

        形式）。
      </td>
    </tr>

    <tr>
      <td>
        `endTime`
      </td>

      <td>
        弦
      </td>

      <td>
        はい
      </td>

      <td>
        毎日の終了時刻（ 

        `yyyy-MM-ddTHH:mm:ss`

        形式）。
      </td>
    </tr>

    <tr>
      <td>
        `endRepeat`
      </td>

      <td>
        オブジェクト
      </td>

      <td>
        いいえ
      </td>

      <td>
        定期的なダウンタイムを停止するタイミング。特定の日付の場合は

        `onDate`

        使用し、発生回数の場合は

        `onRepeat`

        使用します。
      </td>
    </tr>
  </tbody>
</table>

### サンプルリクエスト

```graphql
mutation {
  syntheticsCreateDailyMonitorDowntime(
    accountId: ACCOUNT_ID,
    name: "MonitorDowntimeName",
    monitorGuids: ["OptionalMonitorEntityGuid", "AnotherOptionalMonitorEntityGuid"],
    timezone: "TIMEZONE",
    startTime: "yyyy-MM-ddTHH:mm:ss",
    endTime: "yyyy-MM-ddTHH:mm:ss",
    endRepeat: {
      onDate: "yyyy-MM-ddTHH:mm:ss",
      onRepeat: 10
    }
  ) {
    guid
    accountId
    name
    monitorGuids
    timezone
    startTime
    endTime
    endRepeat {
      onDate
      onRepeat
    }
  }
}
```

## 毎週の定期的なモニター ダウンタイムを作成する [#create-weekly-downtime]

`syntheticsCreateWeeklyMonitorDowntime`ミューテーションを使用して、毎週定期的に実行されるモニターのダウンタイムを作成できます。特定の曜日に発生するメンテナンス ウィンドウにこれを使用します。

### 入力

<table>
  <thead>
    <tr>
      <th>
        パラメータ
      </th>

      <th>
        データタイプ
      </th>

      <th>
        必須ですか?
      </th>

      <th>
        説明
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `accountId`
      </td>

      <td>
        整数
      </td>

      <td>
        はい
      </td>

      <td>
        ダウンタイムが作成される New Relic

        [アカウント ID](/docs/accounts/accounts-billing/account-structure/account-id)

         。
      </td>
    </tr>

    <tr>
      <td>
        `name`
      </td>

      <td>
        弦
      </td>

      <td>
        はい
      </td>

      <td>
        毎週のダウンタイムの分かりやすい名前。
      </td>
    </tr>

    <tr>
      <td>
        `monitorGuids`
      </td>

      <td>
        配列
      </td>

      <td>
        いいえ
      </td>

      <td>
        ダウンタイムに含めるモニター

        [GUID](/docs/apis/nerdgraph/examples/synthetics-api/query-synthetics-data#query-monitors)

        のリスト。
      </td>
    </tr>

    <tr>
      <td>
        `timezone`
      </td>

      <td>
        弦
      </td>

      <td>
        はい
      </td>

      <td>
        ダウンタイムスケジュールのタイムゾーン。
      </td>
    </tr>

    <tr>
      <td>
        `startTime`
      </td>

      <td>
        弦
      </td>

      <td>
        はい
      </td>

      <td>
        週の開始時刻（ 

        `yyyy-MM-ddTHH:mm:ss`

        形式）。
      </td>
    </tr>

    <tr>
      <td>
        `endTime`
      </td>

      <td>
        弦
      </td>

      <td>
        はい
      </td>

      <td>
        週の終了時刻（ 

        `yyyy-MM-ddTHH:mm:ss`

        形式）。
      </td>
    </tr>

    <tr>
      <td>
        `maintenanceDays`
      </td>

      <td>
        配列
      </td>

      <td>
        はい
      </td>

      <td>
        曜日 (例: 

        `MONDAY`

         、 

        `TUESDAY`

         、 

        `WEDNESDAY`

         )。
      </td>
    </tr>

    <tr>
      <td>
        `endRepeat`
      </td>

      <td>
        オブジェクト
      </td>

      <td>
        いいえ
      </td>

      <td>
        定期的なダウンタイムを停止するタイミング。
      </td>
    </tr>
  </tbody>
</table>

### サンプルリクエスト

```graphql
mutation {
  syntheticsCreateWeeklyMonitorDowntime(
    accountId: ACCOUNT_ID,
    name: "MonitorDowntimeName",
    monitorGuids: ["OptionalMonitorEntityGuid", "AnotherOptionalMonitorEntityGuid"],
    timezone: "TIMEZONE",
    startTime: "yyyy-MM-ddTHH:mm:ss",
    endTime: "yyyy-MM-ddTHH:mm:ss",
    maintenanceDays: [MONDAY, WEDNESDAY, FRIDAY],
    endRepeat: {
      onDate: "yyyy-MM-ddTHH:mm:ss",
      onRepeat: 20
    }
  ) {
    guid
    accountId
    name
    monitorGuids
    timezone
    startTime
    endTime
    maintenanceDays
    endRepeat {
      onDate
      onRepeat
    }
  }
}
```

## 毎月の定期的なモニターのダウンタイムを作成する [#create-monthly-downtime]

`syntheticsCreateMonthlyMonitorDowntime`ミューテーションを使用して、毎月定期的に実行されるモニターのダウンタイムを作成できます。毎月特定の日に発生するメンテナンス ウィンドウにこれを使用します。

### 入力

<table>
  <thead>
    <tr>
      <th>
        パラメータ
      </th>

      <th>
        データタイプ
      </th>

      <th>
        必須ですか?
      </th>

      <th>
        説明
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `accountId`
      </td>

      <td>
        整数
      </td>

      <td>
        はい
      </td>

      <td>
        ダウンタイムが作成される New Relic

        [アカウント ID](/docs/accounts/accounts-billing/account-structure/account-id)

         。
      </td>
    </tr>

    <tr>
      <td>
        `name`
      </td>

      <td>
        弦
      </td>

      <td>
        はい
      </td>

      <td>
        毎月のダウンタイムの分かりやすい名前。
      </td>
    </tr>

    <tr>
      <td>
        `monitorGuids`
      </td>

      <td>
        配列
      </td>

      <td>
        いいえ
      </td>

      <td>
        ダウンタイムに含めるモニター

        [GUID](/docs/apis/nerdgraph/examples/synthetics-api/query-synthetics-data#query-monitors)

        のリスト。
      </td>
    </tr>

    <tr>
      <td>
        `timezone`
      </td>

      <td>
        弦
      </td>

      <td>
        はい
      </td>

      <td>
        ダウンタイムスケジュールのタイムゾーン。
      </td>
    </tr>

    <tr>
      <td>
        `startTime`
      </td>

      <td>
        弦
      </td>

      <td>
        はい
      </td>

      <td>
        月次開始時刻（ 

        `yyyy-MM-ddTHH:mm:ss`

        形式）。
      </td>
    </tr>

    <tr>
      <td>
        `endTime`
      </td>

      <td>
        弦
      </td>

      <td>
        はい
      </td>

      <td>
        月の終了時刻（ 

        `yyyy-MM-ddTHH:mm:ss`

        形式）。
      </td>
    </tr>

    <tr>
      <td>
        `frequency`
      </td>

      <td>
        オブジェクト
      </td>

      <td>
        はい
      </td>

      <td>
        月内のいつダウンタイムが発生するかを定義します。相対的な日付（例: 最初の月曜日）には

        `daysOfWeek`

        使用し、特定の日付（例: 各月の 15 日）には

        `daysOfMonth`

        使用します。
      </td>
    </tr>

    <tr>
      <td>
        `endRepeat`
      </td>

      <td>
        オブジェクト
      </td>

      <td>
        いいえ
      </td>

      <td>
        定期的なダウンタイムを停止するタイミング。
      </td>
    </tr>
  </tbody>
</table>

### サンプルリクエスト

```graphql
mutation {
  syntheticsCreateMonthlyMonitorDowntime(
    accountId: ACCOUNT_ID,
    name: "MonitorDowntimeName",
    monitorGuids: ["OptionalMonitorEntityGuid", "AnotherOptionalMonitorEntityGuid"],
    timezone: "TIMEZONE",
    startTime: "yyyy-MM-ddTHH:mm:ss",
    endTime: "yyyy-MM-ddTHH:mm:ss",
    frequency: {
      daysOfWeek: {
        weekDay: MONDAY,
        ordinalDayOfMonth: FIRST
      }
      daysOfMonth: [15]
    },
    endRepeat: {
      onDate: "yyyy-MM-ddTHH:mm:ss",
      onRepeat: 12
    }
  ) {
    guid
    accountId
    name
    monitorGuids
    timezone
    startTime
    endTime
    frequency {
      daysOfWeek {
        weekDay
        ordinalDayOfMonth
      }
      daysOfMonth
    }
    endRepeat {
      onDate
      onRepeat
    }
  }
}
```

## モニターのダウンタイムを更新する [#update-downtime]

`syntheticsEditMonitorDowntime`ミューテーションを使用して、既存のモニターのダウンタイムを更新できます。これにより、この単一のミューテーションを使用して、任意のダウンタイム タイプ (1 回、毎日、毎週、毎月) を変更できます。

### 入力

<table>
  <thead>
    <tr>
      <th>
        パラメータ
      </th>

      <th>
        データタイプ
      </th>

      <th>
        必須ですか?
      </th>

      <th>
        説明
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `guid`
      </td>

      <td>
        弦
      </td>

      <td>
        はい
      </td>

      <td>
        更新する既存のモニターのダウンタイムの

        [GUID](/docs/apis/nerdgraph/examples/synthetics-api/query-synthetics-data#query-monitors)

         。
      </td>
    </tr>

    <tr>
      <td>
        `name`
      </td>

      <td>
        弦
      </td>

      <td>
        いいえ
      </td>

      <td>
        ダウンタイムの名前を更新しました。
      </td>
    </tr>

    <tr>
      <td>
        `monitorGuids`
      </td>

      <td>
        配列
      </td>

      <td>
        いいえ
      </td>

      <td>
        モニター

        [GUID](/docs/apis/nerdgraph/examples/synthetics-api/query-synthetics-data#query-monitors)

        のリストを更新しました。
      </td>
    </tr>

    <tr>
      <td>
        `once`
      </td>

      <td>
        オブジェクト
      </td>

      <td>
        いいえ
      </td>

      <td>
        ワンタイムダウンタイムの設定。
      </td>
    </tr>

    <tr>
      <td>
        `daily`
      </td>

      <td>
        オブジェクト
      </td>

      <td>
        いいえ
      </td>

      <td>
        毎日繰り返すダウンタイムの設定。
      </td>
    </tr>

    <tr>
      <td>
        `weekly`
      </td>

      <td>
        オブジェクト
      </td>

      <td>
        いいえ
      </td>

      <td>
        毎週繰り返されるダウンタイムの設定。
      </td>
    </tr>

    <tr>
      <td>
        `monthly`
      </td>

      <td>
        オブジェクト
      </td>

      <td>
        いいえ
      </td>

      <td>
        毎月繰り返すダウンタイムの設定。
      </td>
    </tr>
  </tbody>
</table>

### サンプルリクエスト

```graphql
mutation {
  syntheticsEditMonitorDowntime(
    guid: "MonitorDowntimeEntityGuid",
    name: "MONITOR_DOWNTIME_NAME",
    monitorGuids: ["OptionalMonitorEntityGuid", "AnotherOptionalMonitorEntityGuid"],
    once: {
      timezone: "TIMEZONE",
      startTime: "yyyy-MM-ddTHH:mm:ss",
      endTime: "yyyy-MM-ddTHH:mm:ss"
    },
    daily: {
      timezone: "TIMEZONE",
      startTime: "yyyy-MM-ddTHH:mm:ss",
      endTime: "yyyy-MM-ddTHH:mm:ss",
      endRepeat: {
        onDate: "yyyy-MM-ddTHH:mm:ss",
        onRepeat: 30
      }
    },
    weekly: {
      timezone: "TIMEZONE",
      startTime: "yyyy-MM-ddTHH:mm:ss",
      endTime: "yyyy-MM-ddTHH:mm:ss",
      endRepeat: {
        onDate: "yyyy-MM-ddTHH:mm:ss",
        onRepeat: 20
      },
      maintenanceDays: [MONDAY, WEDNESDAY]
    },
    monthly: {
      timezone: "TIMEZONE",
      startTime: "yyyy-MM-ddTHH:mm:ss",
      endTime: "yyyy-MM-ddTHH:mm:ss",
      endRepeat: {
        onDate: "yyyy-MM-ddTHH:mm:ss",
        onRepeat: 12
      },
      frequency: {
        daysOfWeek: {
          weekDay: MONDAY,
          ordinalDayOfMonth: FIRST
        },
        daysOfMonth: [15]
      }
    }
  ) {
    guid
    accountId
    name
    monitorGuids
    timezone
    startTime
    endTime
    endRepeat {
      onDate
      onRepeat
    }
    maintenanceDays
    frequency {
      daysOfWeek {
        weekDay
        ordinalDayOfMonth
      }
      daysOfMonth
    }
  }
}
```

## モニターダウンタイムの削除 [#delete-downtime]

`syntheticsDeleteMonitorDowntime`ミューテーションを使用してモニターのダウンタイムを削除できます。削除されると、スケジュールされたダウンタイムは削除され、モニターは通常のスケジュールを再開します。

### 入力

<table>
  <thead>
    <tr>
      <th>
        パラメータ
      </th>

      <th>
        データタイプ
      </th>

      <th>
        必須ですか?
      </th>

      <th>
        説明
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `guid`
      </td>

      <td>
        弦
      </td>

      <td>
        はい
      </td>

      <td>
        削除するモニターのダウンタイムの

        [GUID](/docs/apis/nerdgraph/examples/synthetics-api/query-synthetics-data#query-monitor-downtimes)

         。
      </td>
    </tr>
  </tbody>
</table>

### サンプルリクエスト

```graphql
mutation {
  syntheticsDeleteMonitorDowntime(
    guid: "DOWNTIME_ENTITY_GUID"
  ) {
    guid
  }
}
```