---
title: 外形監視データ
tags:
  - Synthetics
  - APIs
  - NerdGraph
  - Examples
metaDescription: 'How to use New Relic NerdGraph API to query synthetic monitoring data including monitors, private locations, secure credentials, and downtimes.'
freshnessValidatedDate: never
translationType: machine
---

監視インフラストラクチャを設定したら、クエリを使用して合成エンティティに関する情報を取得できます。モニター、プライベートロケーション、認証情報、ダウンタイムに関するデータを取得するrequestsを行います。 このチュートリアルでは、NerdGraph API使用して外形監視データを作成する方法の例を示します。

合成エンティティで使用できる追加のクエリ機能については、 [NerdGraph エンティティ API チュートリアル](/docs/apis/nerdgraph/examples/nerdgraph-entities-api-tutorial/)をご覧ください。

## クエリモニター [#query-monitors]

この文章は、アカウント内のすべての合成モニターを取得し、モニターの GUID、名前、アカウント ID、モニター タイプ、関連タグなどの重要な情報を返します。 タグには、各モニターに関する追加の設定の詳細とメタデータが含まれます。

### 入力

<table>
  <thead>
    <tr>
      <th>
        パラメータ
      </th>

      <th>
        データタイプ
      </th>

      <th>
        必須ですか?
      </th>

      <th>
        説明
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `query`
      </td>

      <td>
        弦
      </td>

      <td>
        はい
      </td>

      <td>
        エンティティをフィルタリングするための検索クエリ。すべての合成モニターを取得するには、 

        `domain = 'SYNTH' AND type = 'MONITOR'`

        を使用します。
      </td>
    </tr>
  </tbody>
</table>

### サンプルクエリ

```graphql
{
  actor {
    entitySearch(query: "domain = 'SYNTH' AND type = 'MONITOR'") {
      results {
        entities {
          ... on SyntheticMonitorEntityOutline {
            guid
            name
            accountId
            monitorType
            tags {
              key
              values
            }
          }
        }
      }
    }
  }
}
```

## プライベートロケーションのクエリ [#query-private-locations]

この文章は、アカウント内のすべてのプライベートな場所を取得し、場所の GUID、名前、アカウント ID、関連するタグなどの重要な情報を返します。 ロケーションを使用すると、ファイアウォールの背後にあるプライベート アプリケーションを監視でき、その設定の詳細にはタグからアクセスできます。

### 入力

<table>
  <thead>
    <tr>
      <th>
        パラメータ
      </th>

      <th>
        データタイプ
      </th>

      <th>
        必須ですか?
      </th>

      <th>
        説明
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `query`
      </td>

      <td>
        弦
      </td>

      <td>
        はい
      </td>

      <td>
        エンティティをフィルタリングするための検索クエリ。すべてのプライベート位置を取得するには、 

        `domain = 'SYNTH' AND type = 'PRIVATE_LOCATION'`

        を使用します。
      </td>
    </tr>
  </tbody>
</table>

### サンプルクエリ

```graphql
{
  actor {
    entitySearch(query: "domain = 'SYNTH' AND type = 'PRIVATE_LOCATION'") {
      results {
        entities {
          accountId
          guid
          name
          tags {
            key
            values
          }
        }
      }
    }
  }
}
```

## クエリモニターのダウンタイム [#query-monitor-downtimes]

この文章は、アカウント内のすべてのモニター ダウンタイムを取得し、ダウンタイムの GUID、名前、アカウント ID、関連タグなどの重要な情報を返します。 モニター ダウンタイムは、合成モニターの実行が停止するスケジュールされた期間であり、計画されたメンテナンスや既知の停止時に役立ちます。 スケジュールの種類、タイムゾーン、繰り返しパターンなどの設定内容はタグに保存されます。

### 入力

<table>
  <thead>
    <tr>
      <th>
        パラメータ
      </th>

      <th>
        データタイプ
      </th>

      <th>
        必須ですか?
      </th>

      <th>
        説明
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `query`
      </td>

      <td>
        弦
      </td>

      <td>
        はい
      </td>

      <td>
        エンティティをフィルタリングするための検索クエリ。すべてのモニターのダウンタイムを取得するには、 

        `domain = 'SYNTH' AND type = 'MONITOR_DOWNTIME'`

        を使用します。
      </td>
    </tr>
  </tbody>
</table>

### サンプルクエリ

```graphql
{
  actor {
    entitySearch(query: "domain = 'SYNTH' AND type = 'MONITOR_DOWNTIME'") {
      results {
        entities {
          accountId
          guid
          name
          tags {
            key
            values
          }
        }
      }
    }
  }
}
```

## 安全なクレデンシャルを照会する [#query-secure-credentials]

このクエリは、アカウント内のすべてのセキュリティ保護された資格情報を取得し、資格情報の GUID、名前、アカウント ID、タグ、最終更新タイムスタンプなどのメタデータ情報を返します。安全な資格情報は、パスワード、 APIキー、エンコードされた証明書などの機密情報を保存、保護、集中管理するのに役立ちます。 セキュリティ上の理由から、安全な資格情報を照会すると、実際の資格情報の値そのものではなく、メタデータのみが返されます。

### 入力

<table>
  <thead>
    <tr>
      <th>
        パラメータ
      </th>

      <th>
        データタイプ
      </th>

      <th>
        必須ですか?
      </th>

      <th>
        説明
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `query`
      </td>

      <td>
        弦
      </td>

      <td>
        はい
      </td>

      <td>
        エンティティをフィルタリングするための検索クエリ。すべての安全な資格情報を取得するには、 

        `domain = 'SYNTH' AND type = 'SECURE_CRED'`

        を使用します。
      </td>
    </tr>
  </tbody>
</table>

### サンプルクエリ

```graphql
{
  actor {
    entitySearch(query: "domain = 'SYNTH' AND type = 'SECURE_CRED'") {
      results {
        entities {
          ... on SecureCredentialEntityOutline {
            accountId
            guid
            name
            tags {
              key
              values
            }
            updatedAt
          }
        }
      }
    }
  }
}
```

## クエリ監視スクリプト [#query-monitor-script]

これにより、スクリプト化されたAPIまたはスクリプト化ブラウザモニターで使用されるスクリプト コンテンツが取得されます。 スクリプトには、 APIコール、ブラウザ インタラクション、カスタム検証ロジックなどのモニターの動作を定義する JavaScript コードが含まれています。 このクエリはスクリプト化されたモニター タイプでのみ機能します。他のモニター タイプ (シンプル、ping、ステップ、証明書チェック、壊れたリンク) はカスタム スクリプトを使用しないため、エラーを返します。

### 入力

<table>
  <thead>
    <tr>
      <th>
        パラメータ
      </th>

      <th>
        データタイプ
      </th>

      <th>
        必須ですか?
      </th>

      <th>
        説明
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `id`

         （アカウント）
      </td>

      <td>
        整数
      </td>

      <td>
        はい
      </td>

      <td>
        モニターを含む New Relic アカウント ID。
      </td>
    </tr>

    <tr>
      <td>
        `monitorGuid`
      </td>

      <td>
        弦
      </td>

      <td>
        はい
      </td>

      <td>
        取得するスクリプトが含まれるスクリプト モニターの一意のエンティティ GUID。
      </td>
    </tr>
  </tbody>
</table>

### サンプルクエリ

```graphql
{
  actor {
    account(id: ACCOUNT_ID) {
      synthetics {
        script(monitorGuid: "ENTITY_GUID") {
          text
        }
      }
    }
  }
}
```

## モニター手順の照会 [#query-monitor-steps]

このクエリは、ステップ モニターに設定されたステップを取得します。ステップ モニターは、ナビゲーション、クリック、フォーム入力、アサーションなどの一連の定義済みアクションを通じて、コードレスでマルチステップのブラウザーベースの監視を提供します。各ステップには、序数、アクションを定義するタイプ、およびステップの設定データを含む値があります。 この書き込みはステップ モニターでのみ機能します。他の種類のモニターではステップベースの設定が使用されていないため、エラーが返されます。

### 入力

<table>
  <thead>
    <tr>
      <th>
        パラメータ
      </th>

      <th>
        データタイプ
      </th>

      <th>
        必須ですか?
      </th>

      <th>
        説明
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `id`

         （アカウント）
      </td>

      <td>
        整数
      </td>

      <td>
        はい
      </td>

      <td>
        モニターを含む New Relic アカウント ID。
      </td>
    </tr>

    <tr>
      <td>
        `monitorGuid`
      </td>

      <td>
        弦
      </td>

      <td>
        はい
      </td>

      <td>
        取得するステップのステップ モニターの一意のエンティティ GUID。
      </td>
    </tr>
  </tbody>
</table>

### サンプルクエリ

```graphql
{
  actor {
    account(id: ACCOUNT_ID) {
      synthetics {
        steps(monitorGuid: "ENTITY_GUID") {
          ordinal
          type
          values
        }
      }
    }
  }
}
```

## モニター ID をエンティティ GUID にマップするためのクエリ [#query-guid-mapping]

このクエリは、モニター ID を使用して合成モニターのエンティティ GUID を取得します。これは、レガシーの数値モニター ID を持っていて、それをほとんどの NerdGraph 操作に必要なエンティティ GUID 形式に変換する必要がある場合に便利です。 エンティティ GUID は、更新、削除、その他のモニター管理タスクに使用される最新の識別子であり、モニター ID は、URL またはレガシー統合に表示される古い数値識別子です。

### 入力

<table>
  <thead>
    <tr>
      <th>
        パラメータ
      </th>

      <th>
        データタイプ
      </th>

      <th>
        必須ですか?
      </th>

      <th>
        説明
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `query`
      </td>

      <td>
        弦
      </td>

      <td>
        はい
      </td>

      <td>
        モニターを見つけるための検索クエリ。

        `domainId = 'MONITOR_ID'`

        使用します。ここで、MONITOR_ID は検索するモニターの数値 ID です。
      </td>
    </tr>
  </tbody>
</table>

### サンプルクエリ

```graphql
{
  actor {
    entitySearch(
      query: "(domainId = 'MONITOR_ID')"
    ) {
      results {
        entities {
          ... on SyntheticMonitorEntityOutline {
            guid
            name
            monitorId
          }
        }
      }
    }
  }
}
```

## ランタイムアップグレードステータスのクエリ（すべてのモニター） [#query-runtime-upgrade-all]

このクエリは、アカウント内のレガシー ランタイム モニターのすべてのランタイム アップグレード テストのステータスを取得します。これらのテストでは、古いランタイム (Chrome 72 や Node.js API レガシーなど) を使用するモニターが新しいランタイム (Chrome 100+ または Node.js 16.10) で正常に実行できるかどうかを検証します。結果は[ランタイム アップグレード UI](/docs/synthetics/synthetic-monitoring/using-monitors/runtime-upgrade-ui/)に表示され、アップグレードの準備ができているモニターを識別するのに役立ちます。テスト結果は`validationStatus`タグに保存され、アップグレード テストが失敗した場合は、詳細なエラー情報が`validationError`タグに表示されます。

### 入力

<table>
  <thead>
    <tr>
      <th>
        パラメータ
      </th>

      <th>
        データタイプ
      </th>

      <th>
        必須ですか?
      </th>

      <th>
        説明
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `query`
      </td>

      <td>
        弦
      </td>

      <td>
        はい
      </td>

      <td>
        エンティティをフィルタリングするための検索クエリ。すべてのランタイム アップグレード テスト結果を取得するには、 

        `domain = 'SYNTH' AND type = 'RUNTIME_VALIDATION'`

        を使用します。
      </td>
    </tr>
  </tbody>
</table>

### サンプルクエリ

```graphql
{
  actor {
    entitySearch(query: "domain = 'SYNTH' AND type = 'RUNTIME_VALIDATION'") {
      results {
        entities {
          accountId
          guid
          name
          tags {
            key
            values
          }
        }
      }
    }
  }
}
```

## ランタイムアップグレードステータスのクエリ（特定のモニター） [#query-runtime-upgrade-specific]

このクエリは、モニター ID を使用して、特定のレガシー ランタイム モニターのランタイム アップグレード テストのステータスを取得します。これは、アカウント内のすべてのモニターではなく、特定のモニターのアップグレードの準備状況を確認する場合に便利です。 このテストでは、モニターが新しいランタイムで正常に実行できるかどうかを検証し、その結果を[ランタイム アップグレード UI](/docs/synthetics/synthetic-monitoring/using-monitors/runtime-upgrade-ui/)に入力します。テスト結果は`validationStatus`タグに保存され、アップグレード テストが失敗した場合は、詳細なエラー情報が`validationError`タグに表示されます。

### 入力

<table>
  <thead>
    <tr>
      <th>
        パラメータ
      </th>

      <th>
        データタイプ
      </th>

      <th>
        必須ですか?
      </th>

      <th>
        説明
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `query`
      </td>

      <td>
        弦
      </td>

      <td>
        はい
      </td>

      <td>
        エンティティをフィルタリングするための検索クエリ。

        `domain = 'SYNTH' AND type = 'RUNTIME_VALIDATION' AND domainId = 'MONITOR_ID'`

        使用します。ここで、MONITOR_ID は特定のモニターの数値 ID です。
      </td>
    </tr>
  </tbody>
</table>

### サンプルクエリ

```graphql
{
  actor {
    entitySearch(
      query: "domain = 'SYNTH' AND type = 'RUNTIME_VALIDATION' AND domainId = 'MONITOR_ID'"
    ) {
      results {
        entities {
          accountId
          guid
          name
          tags {
            key
            values
          }
        }
      }
    }
  }
}
```