---
title: ping監視の管理
tags:
  - Synthetics
  - APIs
  - NerdGraph
  - Examples
metaDescription: How to use New Relic NerdGraph API to create ping monitors for synthetic monitoring.
freshnessValidatedDate: never
translationType: machine
---

New Relic では、NerdGraph を使用して[ping モニター](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors)(シンプル モニターとも呼ばれます) を作成できます。Ping 監視は、定期的に HTTP requests発行して、URL またはエンドポイントにアクセスできるかどうかを確認します。 このチュートリアルでは、NerdGraph API を使用して ping モニターの作成を自動化する方法の例を示します。

## pingモニターを作成する [#create-ping-monitor]

`syntheticsCreateSimpleMonitor`ミューテーションを使用して ping モニターを作成できます。このミューテーションにより、パブリックにアクセス可能な URL またはエンドポイントの監視を構成できます。

### 入力

<table>
  <thead>
    <tr>
      <th>
        パラメータ
      </th>

      <th>
        データタイプ
      </th>

      <th>
        必須ですか?
      </th>

      <th>
        説明
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `accountId`
      </td>

      <td>
        整数
      </td>

      <td>
        はい
      </td>

      <td>
        モニターが作成される New Relic

        [アカウント ID](/docs/accounts/accounts-billing/account-structure/account-id)

         。
      </td>
    </tr>

    <tr>
      <td>
        `monitor.locations.public`
      </td>

      <td>
        配列
      </td>

      <td>
        はい
      </td>

      <td>
        モニターがチェックを実行する 

        [パブリックロケーション](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors/#setting-location)

        識別子の配列 (例: 

        `["US_EAST_1", "US_WEST_1"]`

         )。
      </td>
    </tr>

    <tr>
      <td>
        `monitor.name`
      </td>

      <td>
        弦
      </td>

      <td>
        はい
      </td>

      <td>
        ping モニターの表示名。
      </td>
    </tr>

    <tr>
      <td>
        `monitor.period`
      </td>

      <td>
        イナム
      </td>

      <td>
        はい
      </td>

      <td>
        モニターが実行される頻度。オプション: 

        `EVERY_MINUTE`

         、 

        `EVERY_5_MINUTES`

         、 

        `EVERY_10_MINUTES`

         、 

        `EVERY_15_MINUTES`

         、 

        `EVERY_30_MINUTES`

         、 

        `EVERY_HOUR`

         、 

        `EVERY_6_HOURS`

         、 

        `EVERY_12_HOURS`

         、 

        `EVERY_DAY`

         。
      </td>
    </tr>

    <tr>
      <td>
        `monitor.status`
      </td>

      <td>
        イナム
      </td>

      <td>
        はい
      </td>

      <td>
        モニターのステータス。オプション: 

        `ENABLED`

         (モニターはアクティブでチェックを実行中)、 

        `DISABLED`

         (モニターは非アクティブ)。
      </td>
    </tr>

    <tr>
      <td>
        `monitor.uri`
      </td>

      <td>
        弦
      </td>

      <td>
        はい
      </td>

      <td>
        モニターする URL またはエンドポイント (例: 

        `https://example.com`

         )。
      </td>
    </tr>

    <tr>
      <td>
        `monitor.advancedOptions.responseValidationText`
      </td>

      <td>
        弦
      </td>

      <td>
        いいえ
      </td>

      <td>
        チェックに合格するために応答に表示される必要があるテキスト。指定すると、応答本文にこのテキストが見つからない場合にモニターは失敗します。
      </td>
    </tr>

    <tr>
      <td>
        `monitor.advancedOptions.useTlsValidation`
      </td>

      <td>
        ブール値
      </td>

      <td>
        いいえ
      </td>

      <td>
        TLS/SSL証明書を検証するかどうか。 SSL 証明書チェーンの有効性を検証するには、 

        `true`

        に設定します。
      </td>
    </tr>

    <tr>
      <td>
        `monitor.apdexTarget`
      </td>

      <td>
        浮く
      </td>

      <td>
        いいえ
      </td>

      <td>
        SLA レポートの入力に使用される、モニターの Apdex ターゲット (秒単位)。デフォルトは 7.0 秒です。
      </td>
    </tr>
  </tbody>
</table>

### サンプルリクエスト

```graphql
mutation {
  syntheticsCreateSimpleMonitor(
    accountId: ACCOUNT_ID
    monitor: {
      locations: { public: ["LOCATION_1", "LOCATION_2"] }
      name: "YOUR_MONITOR_NAME"
      period: PERIOD
      status: STATUS
      uri: "MONITORED_URI"
      advancedOptions: {
        customHeaders: { name: "HEADER_NAME", value: "HEADER_VALUE" }
        redirectIsFailure: REDIRECT_IS_FAILURE
        responseValidationText: "VALIDATION_TEXT"
        shouldBypassHeadRequest: BYPASS_HEAD_REQUEST
        useTlsValidation: TLS_VALIDATION
      }
      apdexTarget: APDEX_TARGET
    }
  ) {
    errors {
      description
      type
    }
  }
}
```

### サンプル回答

成功した応答はエラーに対して`null`を返します:

```json
{
  "data": {
    "syntheticsCreateSimpleMonitor": {
      "errors": null
    }
  }
}
```

モニターの作成中に問題が発生した場合、 `errors`配列には、何が問題であったかを説明する`description`と`type`フィールドを持つオブジェクトが含まれます。

## pingモニターを更新します [#update-ping-monitor]

`syntheticsUpdateSimpleMonitor`ミューテーションを使用して既存の ping モニターを更新できます。これにより、すでに作成されている ping モニターの設定を変更できます。

### 入力

<table>
  <thead>
    <tr>
      <th>
        パラメータ
      </th>

      <th>
        データタイプ
      </th>

      <th>
        必須ですか?
      </th>

      <th>
        説明
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `guid`
      </td>

      <td>
        弦
      </td>

      <td>
        はい
      </td>

      <td>
        更新するモニターの一意のエンティティ

        [GUID](/docs/apis/nerdgraph/examples/synthetics-api/query-synthetics-data#query-monitors)

         。
      </td>
    </tr>

    <tr>
      <td>
        `monitor.locations.public`
      </td>

      <td>
        配列
      </td>

      <td>
        いいえ
      </td>

      <td>
        モニターがチェックを実行する 

        [パブリックロケーション](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors/#setting-location)

        識別子の配列 (例: 

        `["US_EAST_1", "US_WEST_1"]`

         )。
      </td>
    </tr>

    <tr>
      <td>
        `monitor.name`
      </td>

      <td>
        弦
      </td>

      <td>
        いいえ
      </td>

      <td>
        ping モニターの更新された表示名。
      </td>
    </tr>

    <tr>
      <td>
        `monitor.period`
      </td>

      <td>
        イナム
      </td>

      <td>
        いいえ
      </td>

      <td>
        モニターが実行される頻度。オプション: 

        `EVERY_MINUTE`

         、 

        `EVERY_5_MINUTES`

         、 

        `EVERY_10_MINUTES`

         、 

        `EVERY_15_MINUTES`

         、 

        `EVERY_30_MINUTES`

         、 

        `EVERY_HOUR`

         、 

        `EVERY_6_HOURS`

         、 

        `EVERY_12_HOURS`

         、 

        `EVERY_DAY`

         。
      </td>
    </tr>

    <tr>
      <td>
        `monitor.status`
      </td>

      <td>
        イナム
      </td>

      <td>
        いいえ
      </td>

      <td>
        モニターのステータス。オプション: 

        `ENABLED`

         (モニターはアクティブでチェックを実行中)、 

        `DISABLED`

         (モニターは非アクティブ)。
      </td>
    </tr>

    <tr>
      <td>
        `monitor.uri`
      </td>

      <td>
        弦
      </td>

      <td>
        いいえ
      </td>

      <td>
        モニターする URL またはエンドポイント (例: 

        `https://example.com`

         )。
      </td>
    </tr>

    <tr>
      <td>
        `monitor.advancedOptions.customHeaders`
      </td>

      <td>
        オブジェクト
      </td>

      <td>
        いいえ
      </td>

      <td>
        リクエストに含めるカスタム HTTP ヘッダー。各ヘッダーには

        `name`

        プロパティと

        `value`

        プロパティがあります。
      </td>
    </tr>

    <tr>
      <td>
        `monitor.advancedOptions.redirectIsFailure`
      </td>

      <td>
        ブール値
      </td>

      <td>
        いいえ
      </td>

      <td>
        `true`

        の場合、モニターは HTTP リダイレクト (3xx ステータス コード) を失敗として扱います。
      </td>
    </tr>

    <tr>
      <td>
        `monitor.advancedOptions.responseValidationText`
      </td>

      <td>
        弦
      </td>

      <td>
        いいえ
      </td>

      <td>
        チェックに合格するために応答に表示される必要があるテキスト。指定すると、応答本文にこのテキストが見つからない場合にモニターは失敗します。
      </td>
    </tr>

    <tr>
      <td>
        `monitor.advancedOptions.shouldBypassHeadRequest`
      </td>

      <td>
        ブール値
      </td>

      <td>
        いいえ
      </td>

      <td>
        `true`

        の場合、モニターは最初の HEAD リクエストをスキップし、 GETリクエストのみを作成します。
      </td>
    </tr>

    <tr>
      <td>
        `monitor.advancedOptions.useTlsValidation`
      </td>

      <td>
        ブール値
      </td>

      <td>
        いいえ
      </td>

      <td>
        TLS/SSL証明書を検証するかどうか。 SSL 証明書チェーンの有効性を検証するには、 

        `true`

        に設定します。
      </td>
    </tr>

    <tr>
      <td>
        `monitor.apdexTarget`
      </td>

      <td>
        浮く
      </td>

      <td>
        いいえ
      </td>

      <td>
        SLA レポートの入力に使用される、モニターの Apdex ターゲット (秒単位)。デフォルトは 7.0 秒です。
      </td>
    </tr>
  </tbody>
</table>

### サンプルリクエスト

```graphql
mutation {
  syntheticsUpdateSimpleMonitor(
    guid: "ENTITY_GUID"
    monitor: {
      locations: { public: ["LOCATION_1", "LOCATION_2"] }
      name: "YOUR_MONITOR_NAME"
      period: PERIOD
      status: STATUS
      uri: "MONITORED_URI"
      advancedOptions: {
        customHeaders: { name: "HEADER_NAME", value: "HEADER_VALUE" }
        redirectIsFailure: REDIRECT_IS_FAILURE
        responseValidationText: "VALIDATION_TEXT"
        shouldBypassHeadRequest: BYPASS_HEAD_REQUEST
        useTlsValidation: TLS_VALIDATION
      }
      apdexTarget: APDEX_TARGET
    }
  ) {
    errors {
      description
      type
    }
  }
}
```

### サンプル回答

成功した応答はエラーに対して`null`を返します:

```json
{
  "data": {
    "syntheticsUpdateSimpleMonitor": {
      "errors": null
    }
  }
}
```

モニターの更新中に問題が発生した場合、 `errors`配列には、何が問題であったかを説明する`description`と`type`フィールドを持つオブジェクトが含まれます。

## 合成モニターを削除する [#delete-monitor]

このAPI使用すると、guid で`syntheticsDeleteMonitor`ミューテーションを使用して既存のモニターを削除できます。

### 入力

<table>
  <thead>
    <tr>
      <th>
        パラメータ
      </th>

      <th>
        データタイプ
      </th>

      <th>
        必須ですか?
      </th>

      <th>
        説明
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `guid`
      </td>

      <td>
        弦
      </td>

      <td>
        はい
      </td>

      <td>
        削除するモニターの一意のエンティティ

        [GUID](/docs/apis/nerdgraph/examples/synthetics-api/query-synthetics-data#query-monitors)

         。
      </td>
    </tr>
  </tbody>
</table>

### サンプルリクエスト

```graphql
mutation {
  syntheticsDeleteMonitor(
    guid: "ENTITY_GUID"
  ) {
    deletedGuid
  }
}
```

### サンプル回答

削除が成功すると、削除されたモニターの GUID が返されます。

```json
{
  "data": {
    "syntheticsDeleteMonitor": {
      "deletedGuid": "ENTITY_GUID"
    }
  }
}
```

モニターの削除中に問題が発生した場合は、問題の詳細とともにエラーが返されます。