---
title: データアクセス制御
tags:
  - Accounts
  - Accounts and billing
  - New Relic user management
metaDescription: Control user access to specific log data with data access policies.
freshnessValidatedDate: never
translationType: machine
---

組織内の特定のデータにアクセスできるユーザーを制御することは、セキュリティ、コンプライアンス、データ ガバナンスにとって不可欠です。New Relic の[ロールベースのアクセス制御は](/docs/accounts/accounts-billing/new-relic-one-user-management/user-management-concepts)ユーザーがアクセスできる機能を管理しますが、 <DNT>**data access control**</DNT>ユーザーが表示できる特定のデータを管理します。

現在、ログ データに対してデータ アクセス制御が利用可能であり、特定の[ログ パーティション](/docs/logs/ui-data/data-partitions/)へのユーザー アクセスを制限できます。

## 使い方 [#how-it-works]

大規模な組織では、さまざまなチーム、サービス、環境にわたって膨大な量のログが生成されます。セキュリティ チームは個人を特定できる情報 (PII) が含まれる可能性のある重要なセキュリティ ログを監視する必要がありますが、開発チームは特定のマイクロサービスに関連するログのみを確認する必要があります。 <DNT>**Data access control**</DNT>使用すると、各チームがアクセスできるログ パーティションを正確に定義するポリシーを作成できます。

特定のログ パーティションへのアクセスを制限するデータ アクセス ポリシーを作成し、アクセス許可を介してユーザー グループに割り当てます。ポリシーが割り当てられたグループ内のユーザーは、そのポリシーで許可されたログ パーティションにのみアクセスできます。

すべて拒否のアプローチから始めて、必要なパーティションへのアクセスのみを許可する許可ポリシーを追加することをお勧めします。これは最小権限の原則に従い、ユーザーが必要なデータにのみアクセスできるようにします。

重要な概念:

* **データ アクセス ポリシー**: 「許可」リストまたは拒否リストを使用して、ユーザーがアクセスできるログ パーティションを定義します。
* **ポリシーの割り当て**: ポリシーは、 <DNT>*Access Management*\*</DNT> UI を介してグループに割り当てられます。
* **ワイルドカード マッチング**: 複数のパーティションを一致させるには、 `%`ワイルドカードとして使用します (例: `log_prod%` &quot;log\_prod&quot; で始まるすべてのパーティションに一致します)。
* **複数のポリシー**: ユーザーが異なるポリシーを持つ複数のグループに属している場合、最も許可の高いアクセスが適用されます。

<Callout variant="important">
  アクセスが制限されているユーザーは、[履歴エクスポート](/docs/apis/nerdgraph/examples/nerdgraph-historical-data-export/)、[集計通知](/docs/alerts/get-notified/incident-workflows/)、または[Insights API](/docs/apis/insights-apis/query-insights-event-data-api/)を通じて、制限付きログ パーティションからの情報を引き続き参照できる可能性があります。 詳細と軽減策については、[潜在的なデータ漏洩リスクを](#data-exposure-risks)参照してください。
</Callout>

## 要件 [#requirements]

データ アクセス ポリシーを作成および管理するには、次のものが必要です。

* [Pro またはエンタープライズエディション](https://newrelic.com/pricing)アカウント
* [認証ドメインマネージャーの](/docs/accounts/accounts-billing/new-relic-one-user-management/user-management-concepts#admin-settings)役割
* [コアユーザーまたはフルプラットフォームユーザー](/docs/accounts/accounts-billing/new-relic-one-user-management/user-type)タイプ

## データアクセスポリシーを作成して割り当てる [#create-policies]

UI または[NerdGraph API](/docs/apis/nerdgraph/examples/nerdgraph-data-access-control)を通じてデータ アクセス ポリシーを作成し、割り当てることができます。UI を通じてポリシーを作成するには、次の手順を参照してください。

<Steps>
  <Step>
    ### ポリシーの作成 [#create]

    1. <DNT>**[one.newrelic.com &gt; Administration](https://one.newrelic.com/admin-portal) &gt; Access Management &gt; Data access policies**</DNT>に移動します。
    2. <DNT>**Create a policy**</DNT> (既存のポリシーがある場合は<DNT>**Add a policy**</DNT> ) をクリックします。

    <img title="Add data access policy" alt="Screenshot showing how to add a data access policy" src="/images/add-data-policy.webp" />

    3. ポリシーの名前を入力します。

    4. 条件を選択してください:

       * <DNT>**Deny selected**</DNT>: 選択したログ パーティションへのアクセスをブロックします。
       * <DNT>**Allow selected**</DNT>: 選択したログ パーティションへのアクセスのみを許可します。

    5. <DNT>**Filter partitions by account**</DNT>ドロップダウンから、ログ パーティション リストを絞り込むアカウントを選択します。

    6. ポリシーに含めるログ パーティションを選択します。

       * ドロップダウンからパーティションを選択するか、
       * パーティション名またはワイルドカード (複数のパーティションに一致する場合は`log_go%`など) をコンマで区切って入力します。

    7. 設定を確認するには、 <DNT>**Review policy**</DNT>クリックします。

    8. <DNT>**Create policy**</DNT>をクリックします。

    ポリシーは<DNT>**Data access policies**</DNT>タブに表示されます。表示、編集、削除するには、 <Icon name="fe-more-horizontal" />メニュー。
  </Step>

  <Step>
    ### ポリシーをグループに割り当てる [#assign]

    1. <DNT>**Administration &gt; Access Management &gt; Grants**</DNT>に移動します。
    2. ポリシーを割り当てる権限を見つけて、 <Icon name="fe-more-horizontal" />その横にあるメニュー。
    3. <DNT>**Add data access policy**</DNT>を選択します。
    4. <DNT>**Policies**</DNT>ドロップダウンからポリシーを選択します。
    5. <DNT>**Save**</DNT>をクリックします。

    <DNT>**Policy name**</DNT>列には割り当てられたポリシーが表示されます。削除または変更するには、 <Icon name="fe-more-horizontal" />メニュー。
  </Step>
</Steps>

## 潜在的なデータ漏洩リスク [#data-exposure-risks]

データ アクセス制御により、ほとんどの New Relic 機能でログ データへのアクセスが制限されますが、ユーザーが制限されたデータを見る可能性があるシナリオもあります。

<CollapserGroup>
  <Collapser id="api-keys" title="レガシーInsights APIキー">
    **リスク**:レガシーInsights APIキーを使用するユーザーは、制限されたログ パーティションを作成できます。これらのキーはデータ アクセス ポリシーに従っていないためです。

    **緩和**：

    1. [APIキーページ](https://one.newrelic.com/admin-portal/api-keys/home)へ移動
    2. レガシーInsights APIキーを特定する
    3. これらのキーを回転または削除する
    4. データアクセスポリシーを尊重する新しい[ユーザーキー](/docs/apis/intro-apis/new-relic-api-keys/#user-key)を作成する
  </Collapser>

  <Collapser id="alerts" title="アラートと通知">
    **リスク**:

    アラート条件の書き込みログに機密データが含まれている場合、そのアカウントにアクセスできるユーザーは次のことができます。

    * 制限されたパーティションを作成する条件を含む、あらゆるアラート条件から通知を受け取る
    * これらのイベントには、制限されたデータが含まれる可能性があります: `NrAiSignal` 、 `NrAiIncident` 、 `NrAiIssue` 、 `NrAiNotification` 、または `NrIntegrationError`
    * 条件が制限されたパーティションをクエリする場合でも、条件の詳細ページと問題ページを表示します。

    **緩和**：

    1. アラートと通知ワークフローにアクセスできない[カスタムロールを](/docs/accounts/accounts-billing/new-relic-one-user-management/account-user-mgmt-tutorial/#roles)作成する
    2. アラートを管理すべきでないユーザーに割り当てる
    3. アラート条件で機密フィールドのファセットを回避する
  </Collapser>

  <Collapser id="data-partition-modify" title="データ パーティション ルール機能へのアクセスを変更する">
    **リスク**:

    <DNT>**Data partitions rules**</DNT>機能への<DNT>**Modify**</DNT>アクセス権を持つユーザーは、データ パーティションの設定を変更できます。 これにより、ユーザーはパーティション ルールまたは設定を変更することで、制限されたログ データにアクセスできるようになります。この機能は、データ アクセス制御の制限を回避します。

    **緩和**：

    * このアクセスは、パーティション設定を管理する必要がある信頼できるアドミニストレーターにのみ許可してください。
    * ログの表示のみが必要なユーザーの場合は、この機能のない[カスタム ロール](/docs/accounts/accounts-billing/new-relic-one-user-management/account-user-mgmt-tutorial/#roles)を作成します。
  </Collapser>

  <Collapser id="query-keys-modify" title="クエリキー機能へのアクセスを変更する">
    **リスク**: <DNT>**Query keys**</DNT>機能への<DNT>**Modify**</DNT>アクセス権を持つユーザーは、アカウント全体のクエリ機能を提供する書き込みキーを作成できます。 これらのキーは、ユーザー レベルのデータ アクセス制限を回避します。これにより、制限されたパーティションを含むアカウント全体のログ データを照会できるようになります。

    **緩和**：

    * このアクセスは、書き込みキーを作成する必要がある信頼できるアドミニストレーターにのみ許可してください。
    * 通常のユーザーに対して、この機能のない[カスタム ロール](/docs/accounts/accounts-billing/new-relic-one-user-management/account-user-mgmt-tutorial/#roles)を作成します。
  </Collapser>
</CollapserGroup>

## 関連トピック [#related-topics]

<DocTiles>
  <DocTile title="ユーザー管理の概念" path="/docs/accounts/accounts-billing/new-relic-one-user-management/user-management-concepts">
    ユーザーの種類、役割、ユーザー管理機能について学習します。
  </DocTile>

  <DocTile title="NerdGraphでユーザーを管理する" path="/docs/apis/nerdgraph/examples/nerdgraph-manage-users">
    NerdGraph API を使用して、ユーザーとアクセス権限をプログラムで管理します。
  </DocTile>

  <DocTile title="ログパーティション" path="/docs/logs/ui-data/data-partitions/">
    制御とパフォーマンスを向上させるためにログ データをパーティションに整理する方法を理解します。
  </DocTile>

  <DocTile title="NerdGraph でデータアクセスポリシーを管理する" path="/docs/apis/nerdgraph/examples/nerdgraph-data-access-control">
    NerdGraph API を使用してデータ アクセス ポリシーを作成および管理する方法を学習します。
  </DocTile>
</DocTiles>