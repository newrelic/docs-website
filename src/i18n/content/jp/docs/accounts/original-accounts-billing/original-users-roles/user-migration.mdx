---
title: ユーザーをNew Relic Oneのユーザーモデルに移行する
metaDescription: 'For New Relic organizations with users on our original user model: how to migrate your users to our new model.'
translationType: machine
---

import userMigrationPage1 from 'images/user-migration-page-1.png'

import loginMultipleAccountsView from 'images/login-multiple-accounts-view.png'

import userMigrationPage2 from 'images/user-migration-page-2.png'

import userMigrationPage3 from 'images/user-migration-page-3.png'

import userMigrationPage4 from 'images/user-migration-page-4.png'

import userMigrationPage5 from 'images/user-migration-page-5.png'

import userMigrationPage6 from 'images/user-migration-page-6.png'

import userMigrationPage7 from 'images/user-migration-page-7.png'

import userMigrationPage8 from 'images/user-migration-page-8.png'

2021年4月12日以降、元のユーザーモデルのユーザーがいる一部のお客様は、セルフサービスを利用して、それらのユーザーをNewRelicOneユーザーモデルに移行できるようになります。

## 背景 [#background]

2020年7月30日、NewRelicOneユーザーモデルと呼ばれる新しい改良されたユーザーモデルをリリースしました。この新しいモデルは、ユーザーとその役割およびアカウントへのアクセスを管理するための、よりシンプルで効率的な方法を提供します。

当初、この新しいモデルは主に新規顧客が利用できましたが、既存のNewRelic組織のユーザーは元のユーザーモデルのままでした。ただし、一部の[要件](#requirements)を満たす元のユーザーモデルの組織では、移行ウィザードを使用してユーザーを新しいモデルに移行できます。その移行プロセスが完了すると、ユーザーはNew Relic Oneユーザーモデルを[使用し、ユーザーとアカウントへのアクセスを管理するための新しい手順を実行できるようになります](/docs/accounts/accounts-billing/new-relic-one-user-management/introduction-managing-users/)。

## 利点 [#benefits]

ユーザーをこのモデルに移行すると、以下のようなメリットがあります。

* 複数のアカウントのすべてのユーザーを一度に表示し、管理することができます。
* ユーザーを追加・管理するための手順が少ない。
* 柔軟な認証方法
* ユーザー管理のためのより詳細な役割
* ProおよびEnterpriseのお客様向け：IDプロバイダを介した自動ユーザー管理へのアクセス。

[新しいユーザーモデルのメリットの詳細をご覧ください。](https://blog.newrelic.com/product-news/user-management-and-access-security/)

## 要件 [#requirements]

要件は、以下のとおりです。

* あなたとあなたのユーザーは、 [元のユーザーモデル](/docs/accounts/original-accounts-billing/original-product-based-pricing/overview-user-models)を使用している必要があります。自分がどちらであるかわからない場合は、「 [ユーザーモデルの決定](/docs/accounts/original-accounts-billing/original-users-roles/overview-user-models/#determine-user-model)」を参照してください。
* ユーザー移行ウィザードを使用するには、 [所有者の役割](/docs/accounts/original-accounts-billing/original-users-roles/users-roles-original-user-model/#roles)があり、完全なプラットフォームユーザーである必要があります。

## ユーザーを移行すべきかどうかの判断 [#recommendations]

**これらの注意事項は、New Relic の担当者がサポートしている場合には適用されません。** その場合には、お客様のアカウント担当者が指導します。

このような状況では、ユーザー移行ウィザードを**使用しない**ことをお勧めします。

* 組織に30を超えるアカウントがある場合（New Relicの担当者からサポートを受けている場合を除く）。これは、ユーザーで**はなく**、30以上の[アカウント](/docs/accounts/accounts-billing/account-structure/new-relic-account-structure)を持つことを意味することに注意してください。
* [新しいユーザーモデルの影響と制限](/docs/accounts/original-accounts-billing/original-product-based-pricing/overview-user-models/#differences) のいずれかが自分にマイナスの影響を与える可能性があると考える場合。
* ユーザー管理機能にアカウントレベルのロールを必要とする場合。ユーザー管理に関連するロール（ユーザーの追加と更新、ユーザータイプの変更、アクセス許可の作成）は、現在、組織全体に適用され、特定のアカウントに割り当てることはできません。

ユーザー移行ウィザードを使用すべきかどうかについて質問がある場合は、New Relic のアカウント担当者にご相談ください。

## オプション：ユーザーのユーザータイプを確認する [#user-type]

[New Relic One の料金モデル](/docs/accounts/accounts-billing/new-relic-one-pricing-billing/new-relic-one-pricing-billing) の組織では、ユーザーの [ユーザータイプ](/docs/accounts/accounts-billing/new-relic-one-user-management/user-type) が課金の要因となります。

現在NewRelicOneの料金モデルを使用している場合でも、まもなく[その料金モデルに切り替える](/docs/accounts/original-accounts-billing/original-product-based-pricing/switch-new-models)予定の場合でも、ユーザーの移行を行う前にユーザーのユーザータイプを編集することは理にかなっています。その理由の1つは、元の**ユーザーとロール**のUIを使用すると、ユーザーがNew Relicを最後に使用した時刻を確認できるため（新しいUIにはまだこれがありません）、作成するユーザータイプを決定するのに役立ちます。彼ら。これを行う方法のヒントについては、 [「ユーザータイプの編集」](/docs/accounts/original-accounts-billing/original-users-roles/users-roles-original-user-model/#full-user-count)を参照してください。

## オプションです。ユーザー管理の概念を理解する [#before-beginning]

特定のアカウントまたは特定の役割へのユーザーのアクセスを制御する必要があるほど、新しいユーザー管理の概念に関するいくつかの基本を理解するのに役立ちます。簡単な要約は次のとおりです。

* ユーザーは、"認証ドメイン" と呼ばれるコンテナに入っています。ドメインは、ユーザーがどのように New Relic に追加されるかを管理します (UI を使って手動で、または SCIM を使って自動的に)。また、ユーザーがどのようにログインするか (メール/パスワードを使って手動で行うか、SAML SSO を使って行うか)についても管理します。ほとんどの組織では、認証ドメインは1つまたは2つだけで、デフォルトの手動設定用と、より自動化された方法用があります。
* ユーザーは、1つまたは複数のグループに割り当てることができます（たとえば、当社のデフォルトの **Admin** グループや、 **Contractors** などのカスタムグループなど）。大規模な組織では、ユーザーが複数のグループに割り当てられることがよくあります。
* あるユーザーグループに特定のロールと特定のアカウントへのアクセス権を与えたい場合は、 **アクセスグラント** を作成する必要があります。たとえば、 **Contractors** グループに、1つまたは複数のアカウントで、当社のデフォルトの **All product admin** ロールへのアクセスを与えるか、そのグループにカスタムロールを与えるとします。

詳細について：

* [ユーザー管理の概念を](/docs/accounts/accounts-billing/new-relic-one-user-management/user-management-concepts#understand-concepts)確認します。
* この[計画スプレッドシートの例](https://docs.google.com/spreadsheets/d/1FnguDXRUX9FGY14oV4Gx6O08v4vNC2Pv0GGCsU7Pxuw/edit?usp=sharing)を使用して、グループを計画し、助成金にアクセスします。

## ステップ0：移行ウィザードを見つけて開始します [#start-migration]

始める前に、 [要件](#requirements) および上記のその他の推奨事項を確認してください。ウィザードの使用を開始するには

1. [one.newrelic.com](https://one.newrelic.com) から、トップナビゲーションの **Apps** をクリックします。
2. アプリのテーブルで、 **User migration walkthrough** アプリをクリックします。
3. さらにヘルプとコンテキストが必要な場合は、特定の移行ウィザードページに関するヒントについて、以下のセクションを参照してください。このドキュメントでわかりにくい点がある場合は、このページの\[**問題の作成**]ボタンを使用してフィードバックを送信してください。

## ステップ1：アドミンの作成 [#page1]

<img
  title="user-migration-page-1.png"
  alt="User migration page 1"
  src={userMigrationPage1}
/>

このページでは、移行する管理者を選択します。この手順では、選択した管理者の新しいモデルにユーザーレコードを作成し、それらを**管理者**グループに割り当てます。完了すると、選択した管理者はNew Relicにログインすると新しいユーザーレコードを利用できるようになり（下の画像を参照）、移行ウィザードのプロセスが完了するまで、古いユーザーレコードと新しいユーザーレコードの両方にアクセスできます。ここで選択した管理者は、新しいユーザーレコードから移行ウィザードを使用できます。これは、他のチームメンバーを選択して移行を完了する場合に役立つことがあります。

移行プロセスが完了した後は、いつでも管理者を追加したり、既存の管理者を削除して編集したりできることに注意してください。これは、今すぐ多くまたはすべての管理者を引き継ぎ、後で設定を調整する理由になる場合があります。

\[**管理者の追加**]ページの使用に関するヒントを次に示します。

* 移行が行われているアカウントを確実に理解する必要があります。ユーザーの移行は、選択した親アカウント（\[**含まれるアカウント**]ドロップダウンに表示）とその子アカウント（ **\[関連するすべてのアカウント**を表示]ボタンを使用して表示）にのみ適用されます。期待するすべてのアカウントが表示されない場合は、組織に複数の親/子アカウント構造があることが原因である可能性があります。これは、移行プロセスを複数回実行する必要があることを意味します。

* もし、一部のユーザーだけを新しいユーザーモデルに移行して開始する予定であれば、元のユーザーモデルのユーザーを管理するための管理者がいるように、元のユーザーモデルの管理者をいくつか残しておくことをお勧めします。

  <img
    title="Login UI for email addresses with multiple user records"
    alt="A screenshot of what is shown when you have an email address associated with multiple New Relic logins"
    src={loginMultipleAccountsView}
  />

  <figcaption>
    新しいモデルのユーザーが作成され、移行プロセスが完了していない場合、ユーザーは元のユーザーレコードと新しいユーザーレコードの両方にアクセスできる可能性があります。
  </figcaption>

## ステップ2：組織の設定 [#page2]

<img
  title="user-migration-page-2.png"
  alt="User migration page 2"
  src={userMigrationPage2}
/>

a）より多くの構成オプションを可能にするガイド付きセットアップ、またはb）より少ないステップでの自動セットアップを選択できます。これを選択するためのいくつかのヒント：

* 移行するユーザーにSAMLSSOまたはSCIMを使用しておらず、移行したすべてのユーザーにすべてのアカウントへのアクセスを許可している場合は、自動セットアップオプションを使用することをお勧めします。 （後で、アカウントへのユーザーアクセスのパーティション化をいつでも行うことができることに注意してください。）
* SCIMプロビジョニングについて：近い将来、SCIMプロビジョニングを介してNew Relicユーザーを管理することを計画している場合は、SCIMを有効にして移行できるように、移行を待つことを検討する必要があります。これは、ユーザーが移行されると、ユーザーは特定の認証ドメインに存在し、ユーザーがそのドメインに追加されると、ドメインはSCIMと非SCIM（手動）を切り替えることができないためです。

## ステップ3：組織の名称 [#page3]

<img
  title="user-migration-page-3.png"
  alt="User migration page 3"
  src={userMigrationPage3}
/>

組織の名前は、説明的でわかりやすいものにしましょう。

## ステップ4：認証ドメインの設定 [#page4]

<img
  title="user-migration-page-4.png"
  alt="User migration page 4"
  src={userMigrationPage4}
/>

このセクションでは、ユーザーのプロビジョニング方法（New Relicに追加）と認証方法（ログイン）を制御します。 SAML SSOまたはSCIMセットアップを選択するには、移行ウィザードを終了し、NewRelicUIおよびIDプロバイダーの他の場所で設定してからウィザードに戻る必要があることに注意してください。

ここでは、2つの認証ドメイン部について詳しく説明します。

### ユーザーの管理（手動プロバイダーとIDプロバイダー） [#managing-users]

ユーザーの追加と管理の方法については、**手動**または**IDプロバイダー**（SCIM）を選択できます。 IDプロバイダーを使用してSCIMを介してユーザーをプロビジョニングするオプションは、組織に[ProまたはEnterpriseエディション](https://newrelic.com/pricing)がある場合にのみ使用できます。

**IDプロバイダー**を選択した場合は[、自動ユーザー管理の手順](/docs/accounts/accounts/automated-user-management/automated-user-provisioning-single-sign#how-to)に従う必要があります。これらの手順を完了したら、ユーザー移行ウィザードとドキュメントに戻ります。この手順を完了したら、できるだけ早くユーザー移行プロセスを完了することを強くお勧めします。アセットを移行して元のユーザーレコードを削除する後の手順を完了しない場合、ユーザーは同じログインに関連付けられた2つのユーザーレコードを持っているか（[ステップ1のログインスクリーンショットを](#page1)参照）、そうでない場合は、期待するアセットが欠落している可能性があります（ダッシュボードのように）。

IDプロバイダーをNewRelicと同期し、アクセス許可を設定するためのヒント：

* Okta、Azure、またはOneLoginのいずれかでNew Relicアプリを既に使用している場合は、古いバージョンを使用している可能性があります。古いアプリのタイトルは「アカウント別のNewRelic」ですが、新しい必須アプリのタイトルは「組織別のNewRelic」です。
* これらの手順を完了すると、新しいユーザーレコードが新しいユーザーモデルで作成され、IDプロバイダーの構成に基づいてNewRelicで同期されます。ユーザーのプロビジョニングが完了したら、新しい[**ユーザー管理**UI](#manage-users)にそれらのユーザーレコードが表示されることを確認します。後で、ステップ6で、既存のユーザーのアセット（ダッシュボード、お気に入りなど）を新しく作成されたユーザーレコードに移行します。
* 新しいNewRelicユーザー管理UIにアクセスするには、新しいユーザーレコードを介してログインする必要があります。これには、ログアウト、ログインし直し、メールを確認して、メールに関連付けられているすべてのログインを確認する必要がある場合があります。
* IDプロバイダーがNewRelicと同期されていて、ユーザーとグループがNew Relicにいる場合は、アクセス許可を設定する必要があります。アクセス許可の仕組みの基本については、アクセス[許可](/docs/accounts/accounts-billing/new-relic-one-user-management/user-management-concepts/#understand-concepts)を参照してください。チュートリアルについては、 [ユーザー管理チュートリアル](/docs/accounts/accounts-billing/new-relic-one-user-management/tutorial-add-new-user-groups-roles-new-relic-one-user-model/#group-access)を参照してください。
* New Relicではユーザーまたはグループを編集できないことに注意してください。すべてのユーザーおよびグループの変更は、IDプロバイダーから行う必要があります。

### ログイン方法（手動とSSO） [#login-methods]

ログイン方法では、これらのユーザーのログイン方法を選択できます。a）電子メール/パスワードログインまたはb）シングルサインオン（SSO）のいずれかを選択できます。 SSOは、ProまたはEnterpriseエディションを使用している組織でのみ使用できることに注意してください。

SCIMではなくSSOを使用している場合は、SSO [を設定するための追加の手順を](/docs/accounts/accounts-billing/new-relic-one-user-management/authentication-domains-saml-sso-scim-more/#saml)完了する必要があります。 （前の手順でSCIMの手順をすでに実行している場合は、SAML SSOをすでに設定している必要があります。）

SAML SSOを設定するためのヒント：

* Okta、Azure、またはOneLoginのいずれかでNew Relicアプリを既に使用している場合は、古いバージョンを使用している可能性があります。古いアプリのタイトルは「アカウント別のNewRelic」ですが、新しい必須アプリのタイトルは「組織別のNewRelic」です。
* 新しいNewRelicユーザー管理UIにアクセスするには、新しいユーザーレコードを介してログインしていることを確認する必要があります。これには、ログアウトして再度ログインし、メールを確認して、そのメールに関連付けられているすべてのログインを確認する必要がある場合があります。
* SSOの設定手順を完了してから、移行ウィザードに戻って移行プロセスを続行できます。
* 複数の認証方法を選択する場合は、新しい[認証ドメイン](/docs/accounts/accounts-billing/new-relic-one-user-management/authentication-domains-saml-sso-scim-more/#auth-domain-definition)を追加する必要があることに注意してください。

## ステップ5: 既存のユーザーのインポート [#import-users]

<img
  title="user-migration-page-5.png"
  alt="User migration page 5"
  src={userMigrationPage5}
/>

NewRelicユーザーを追加および管理するには2つの方法があります。手順とヒントに使用する方法を選択します。

<CollapserGroup>
  <Collapser
    id="manual-provision"
    title="NewRelicUIから手動でユーザーを追加および管理する"
  >
    **推奨**：ユーザーのインポートを選択する前に、既存の元のユーザーモデルユーザーの完全なリストをダウンロードしてください。これは便利なリソースであり、必要に応じてバックアップとして機能します。このリストを使用して、どのユーザーがどのアカウントにアクセスできるかを把握したり、後のステップでグループを作成して許可にアクセスしたりすることもできます。

    この移行中に、ユーザーを一括でアップロードする機能を提供して、ユーザーを手動で追加するタスクをはるかに簡単にします。元のユーザーモデルユーザーをダウンロードした後、すべてのユーザーまたは一部のユーザーをアップロードできます。このユーザーリストを確認し、移行したくないユーザー（たとえば、組織でもう働いていないユーザー）を[、元のユーザーモデルのNewRelicUIと同様に提供されたリストから削除することをお勧めします。](/docs/accounts/original-accounts-billing/original-users-roles/users-roles-original-user-model#deleting)

    ユーザーリストを再アップロードしてこのステップを完了すると、New Relic One のユーザーモデル上にユーザーレコードが作成されます。後のステップで、これらのユーザーのアセットを移行できるようになります。

    この手順を完了して新しいユーザーレコードを作成したら、移行プロセスの残りの部分をできるだけ早く完了することを強くお勧めします。アセットを移行して元のユーザーレコードを削除する手順を完了しない場合、ユーザーは同じログインに関連付けられた2つのユーザーレコードを持っているか（[ステップ1のログインスクリーンショットを](#page1)参照）、そうでない場合は、期待するアセットが欠落している可能性があります（ダッシュボード）。

    ヒント：

    * パスワードをリセットする必要はありません。ユーザーのログインにユーザー名/パスワードを使用する場合、ユーザーは、ユーザー用に作成された新しいユーザーレコードに対して同じログイン資格情報を持ちます。ユーザーが保留中の電子メール検証ステータス（検証中）を持っている場合、それも移行されます。
    * 新しいユーザーの電子メールアドレスが、元のユーザー記録の電子メールアドレスと一致することを確認してください（大文字小文字の一致を含む）。メールアドレスは、ユーザーを照合するためのキーバリューとして使用され、後のステップでは、ユーザーに関連する資産を移行するために使用されます。
  </Collapser>

  <Collapser
    id="aum"
    title="IDプロバイダー（SCIM）からのユーザーの追加と管理"
  >
    **SCIMプロビジョニングを使用している場合は、この手順でユーザーをインポートする必要はありません。**

    **推奨**：既存の元のユーザーモデルユーザーのリストをダウンロードすることをお勧めします。これは便利なリソースであり、必要に応じてバックアップとして機能します。このリストを使用して、どのユーザーがどのアカウントにアクセスできるかを把握したり、後のステップでグループを作成して許可にアクセスしたりすることもできます。

    前のステップ（ステップ＃4）で、 [IDプロバイダーをNew Relicと同期するためのステップを](/docs/accounts/accounts/automated-user-management/automated-user-provisioning-single-sign/#how-to)完了して、NewRelic認証ドメインUIとユーザー管理UIでそれらのグループとユーザーを表示できるようにする必要があります。まだ行っていない場合は、今すぐ行ってください。グループとユーザーはIDプロバイダーとNewRelicの間で同期されるため、このステップでユーザーをアップロードする必要はありません。
  </Collapser>
</CollapserGroup>

## ステップ6：アクセス設定 [#access-settings]

<img
  title="user-migration-page-6.png"
  alt="User migration page 6"
  src={userMigrationPage6}
/>

この手順では、ユーザーグループがアクセスできる役割とアカウントを設定します。ユーザーアクセスを特定のアカウントと役割にマップする必要がある場合は、この段階でグループとアクセス許可を設定する必要があります。 （ステップ4でSCIMセットアップの一部としてアクセス許可を以前にセットアップしたことがある場合は、このステップをスキップできます。）

グループにアクセスを許可するアカウントと役割ごとにアクセス許可を作成する必要があります。アクセス許可を理解するのに役立つリソース：

* アクセス許可の仕組みの基本については、アクセス[許可](/docs/accounts/accounts-billing/new-relic-one-user-management/user-management-concepts/#understand-concepts)を参照してください。
* アクセス許可を作成する方法のチュートリアルについては、 [ユーザー管理のチュートリアル](/docs/accounts/accounts-billing/new-relic-one-user-management/tutorial-add-new-user-groups-roles-new-relic-one-user-model/#group-access)を参照してください。
* アクセス許可の計画については、 [グループとアクセス許可計画のスプレッドシートを](https://docs.google.com/spreadsheets/d/1FnguDXRUX9FGY14oV4Gx6O08v4vNC2Pv0GGCsU7Pxuw/edit?usp=sharing)参照してください。

## ステップ7：ユーザー資産の移行 [#migrate-assets]

<img
  title="user-migration-page-7.png"
  alt="User migration page 7"
  src={userMigrationPage7}
/>

この手順が完了すると、ユーザーの個人資産が新しいユーザーレコードに移行され、元のユーザーレコードが削除されます。現在NewRelicにログインしているユーザーの場合、この手順を完了すると、ログアウトするか、現在のブラウザセッションが期限切れになるまで、現在のNewRelicセッションが中断されることはありません。

移行されるユーザー資産は次のとおりです。

* ダッシュボード
* お気に入り
* ウィークリーメールの設定
* 電子メールのオプトイン/アウトの設定
* ユーザー別 [ユーザーキー](/docs/apis/intro-apis/new-relic-api-keys/#user-api-key)
* New Relic Oneアプリ [NerdStorageデータ](https://developer.newrelic.com/explore-docs/nerdstorage)

ユーザーがNewRelicを使用する複数の組織にアクセスできる場合（たとえば、そのユーザーが請負業者である場合）、それらのすべての組織がユーザーを移行するまで、元のユーザーモデルレコードは完全に削除されません。このようなユーザーは、元のユーザーレコードと1つ以上の新しいユーザーレコードの両方を持ち、その場合は、ログイン時に表示されます（ [1ページのセクションのログインスクリーンショットを参照](#page1)）。

## ステップ8：レビューと仕上げ [#review-finish]

<img
  title="user-migration-page-8.png"
  alt="User migration page 8"
  src={userMigrationPage8}
/>

一度にではなくセグメントでユーザーを移行する場合は、さまざまなユーザーグループで移行ワークフローを複数回実行できます。組織内のすべてのユーザーが移行された場合にのみ、\[**セットアップの完了**]をクリックできます。

## トラブルシューティング [#troubleshooting]

移行後のよくあるトラブル

* 管理者レベルのロールが割り当てられているにもかかわらず、New Relic プラットフォームの機能にアクセスしようとするとエラーメッセージが表示される場合は、組織に対応するロール (**Organization manager** and/or **Authentication domain manager**) は割り当てられているものの、アカウントに対応するロールが割り当てられていないためだと思われます。特定のアカウントで New Relic の機能にアクセスするには、少なくとも 1 つのアカウントに対応するロール (たとえば、 **All product admin** またはカスタム ロール) が必要です。

* 移行が完了した、または移行の途中であるにもかかわらず、元のユーザー管理UI（ **アカウント設定** タブからアクセスするUI）が表示される場合、元のユーザーモデルのレコードにまだログインしていることが原因である可能性があります。この場合の改善策をいくつか紹介します。

  * New Relic からログアウトし、 **Verify email** オプションを選択して、再度ログインします。メールの確認が完了したら、"Organization" と書かれたログインオプションを選択し、"Original New Relic account と書かれたオプションは選択しないでください。"
  * それでも問題が解決しない場合は、ブラウザのキャッシュをクリアして、再度ログインを試みてください。

## 終わった後 [#manage-users]

ユーザーが新しいユーザーモデルに移行されると、 [account dropdown](/docs/using-new-relic/welcome-new-relic/get-started/glossary/#account-dropdown) をクリックし、 **Administration** をクリックし、これらの UI ページを使用することで、ユーザーを見つけて管理することができます。

* **ユーザー管理**: これを使って、ユーザーの表示と追加、ユーザータイプの変更（ベーシックとフル）、グループの変更、ユーザーのアップグレード要求の承認を行います。
* **組織とアクセス**: これを使って、アクセスグラントの作成（グループにロールやアカウントへのアクセスを許可する）や、認証ドメインの設定（SAML SSOの設定やSCIMの設定など）を行います。

アクセスグラントを計画する際のヒントについては、 [Tips on access grants](#before-beginning) をご覧ください。

これらのツールやコンセプトの詳細については、 [ユーザー管理のドキュメント](/docs/accounts/accounts-billing/new-relic-one-user-management/introduction-managing-users) を参照してください。