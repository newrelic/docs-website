---
title: イベントデータの保持（元の価格設定モデル）
tags:
  - Accounts
  - Original accounts and billing
  - Original data retention
metaDescription: 'For New Relic accounts on our original pricing model: event data retention periods, and how to extend retention.'
translationType: machine
---

import flex2 from 'images/flex-2.png'

<Callout variant="important">
  このドキュメントは、[元の価格設定モデル](/docs/accounts/original-accounts-billing/product-pricing/product-based-pricing)を使用している組織を対象としています。現在使用している価格モデルがわかりませんか？[価格設定モデルの概要を](/docs/accounts/original-accounts-billing/original-product-based-pricing/overview-pricing-models)参照してください。
</Callout>

[元の価格設定モデルを使用している](/docs/accounts/original-accounts-billing/original-product-based-pricing/overview-pricing-models)組織の場合、さまざまな製品がさまざまな[イベントデータ](/docs/using-new-relic/data/understand-data/new-relic-data-types#event-data)を報告します。製品が異なれば、データ保持期間も異なり、イベントデータ保持を延長する方法も異なります。[柔軟なイベント保持](#flex-retention)により、イベントデータ保持の長さをカスタマイズできます。

## データ保持UI [#find]

データ保持を理解し、利用可能なオプションを確認する最良の方法は、UIに移動することです。これが推奨される理由の1つは、組織が設定を編集した可能性があり、ここに記載されているデフォルト設定ではなくなっている可能性があるためです。

**データ保持**UIページは、[データ管理ハブ](/docs/data-apis/manage-data/manage-your-data)にあります。

## イベントデータ保持の概要 [#overview-event-retention]

元の価格設定モデルの場合、すべてのNew Relic製品サブスクリプションには、さまざまなタイプのデータが保持される期間を管理する一定レベルの[データ保持](/docs/accounts/accounts/data-management/data-retention-components#products)が付属しています。

さまざまな製品サブスクリプションがイベントデータの保持にどのように影響するかを示す例を次に示します。

* Free / Lite APMサブスクリプション：デフォルトで報告されたイベントは1日間利用できます。利用可能なカスタムイベントはありません。
* Pro APMサブスクリプション：デフォルトで報告されたイベントは8日間利用できます。[カスタムイベント](/docs/insights/insights-data-sources/custom-data/report-custom-event-data)は1日間利用できます（ [Insights Pro](#insights-pro)で拡張できます）。

## イベントの保持を延長する

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        製品
      </th>

      <th>
        方法
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        APM、ブラウザ、モバイル
      </td>

      <td>
        イベントデータの保持は、これらの製品の有料サブスクリプションで拡張できます（[製品データの保持](/docs/accounts/accounts/data-management/data-retention-components)を参照）。デフォルトで報告されたイベントとカスタムイベントの両方の保持をさらに延長するには、 [InsightsProサブスクリプション](#insights-pro)が必要です。
      </td>
    </tr>

    <tr>
      <td>
        インフラストラクチャー
      </td>

      <td>
        イベントデータの保持は、有料のインフラストラクチャサブスクリプションで拡張できます。[インフラストラクチャデータ保持ルール](/docs/accounts/accounts/data-management/overview-data-retention-components)を参照してください。
      </td>
    </tr>

    <tr>
      <td>
        合成モニタリング
      </td>

      <td>
        イベントデータの保持は、有料のSyntheticsサブスクリプションで拡張できます。[Syntheticsデータ保持ルール](/docs/synthetics/new-relic-synthetics/getting-started/synthetics-data-retention)を参照してください。
      </td>
    </tr>

    <tr>
      <td>
        カスタムイベント
      </td>

      <td>
        エージェントAPIまたは[イベントAPI](/docs/insights/insights-data-sources/custom-data/introduction-event-api)によって報告される[カスタムイベント](/docs/insights/insights-data-sources/custom-data/report-custom-event-data)：拡張機能には[InsightsProサブスクリプション](#insights-pro)が必要です。
      </td>
    </tr>
  </tbody>
</table>

## インサイトプロ

元の価格設定モデルを使用している組織の場合、有料のInsightsサブスクリプションが、次のイベントデータ保持の拡張を管理します。

* APM、ブラウザ、モバイル、サーバーレス製品
* エージェントAPIまたは[イベントAPI](/docs/insights/insights-data-sources/custom-data/introduction-event-api)からの[カスタムイベント](/docs/insights/insights-data-sources/custom-data/report-custom-event-data)

Insightsサブスクリプションによって管理されるデータ保持を確認するには、[使用法UI](/docs/accounts/accounts-billing/new-relic-one-pricing-billing/billing-ui)に移動し、 **Insightsの使用法**を選択します。

Insights Proサブスクリプションでは、 [柔軟な保持を使用して、イベントデータを保持する期間をカスタマイズできます](/docs/accounts/accounts/subscription-pricing/flexible-retention-define-how-long-new-relic-retains-event-data)。これにより、必要な限り、必要なデータのみを保持できます。

<CollapserGroup>
  <Collapser
    id="retention-calculation"
    title="保存されたイベントの数の計算方法"
  >
    これは、InsightsProサブスクリプションのデフォルトで保存されたイベントの数がどのように計算されるかについての説明です。（ [柔軟な保持](/docs/accounts/accounts/subscription-pricing/flexible-retention-define-how-long-new-relic-retains-event-data)を使用すると、保持期間をよりきめ細かく制御できることに注意してください。）

    保存されるイベントは、1）時間の経過とともに保存されるイベントの合計（1週間に生成されるイベントに基づいて計算）、および2）使用可能なデータ保持の週に基づいて計算されます。この方程式は次のように表すことができます。

    ```
    events stored = (events generated per week) * (weeks of retention)
    ```

    Insights Proサブスクリプションは、特定の週数のデータ保持と、その保持期間中の特定の数のイベントを提供します。

    例えば：

    * （1週間あたり2億件のトランザクション）\*（4週間の保持）=Insightsに保存された8億件のイベント
    * （1週間あたり1600万件のトランザクション）\*（50週間の保持）=Insightsに保存された8億件のイベント

    Insights Proサブスクリプションの場合、データはボリュームではなく保持ウィンドウに基づいてパージされます。保持期間を過ぎると、システムから削除されます。

    例：Insightsライセンスが4週間の保存期間で8億件のイベントを対象としている場合、データは4週間を超えるとパージが開始されます。サブスクリプションレベルを超えるデータの一時的な急増は引き続き記録されますが、サブスクリプションレベルをアップグレードするか、収集されるデータを減らすことで、一貫した超過を解決する必要があります。

    [Insights Proサブスクリプション](#insights-pro)をお持ちでないお客様の場合、New Relicは、ホストあたり1分あたり4,000イベント以下の制限までイベントを抑制またはダウンサンプリングする場合があります。
  </Collapser>

  <Collapser
    id="usage-overage"
    title="InsightsProイベントの超過の例"
  >
    この例では、Insights Proサブスクリプションがあり、4週間で8億イベントのライセンスがあり、1週間あたり2億イベントのレートです。APM Pro、Browser Pro、およびMobileEnterpriseがあります。サブスクリプションを介して5週間目のデータが追加され、プラン内に保存されている合計10億のイベントにぶつかります。

    * 9億7500万のイベントを使用している場合**は、保持を超えていません**。
    * 12億5千万のイベントを使用している場合**は**、保持を超えています。
  </Collapser>

  <Collapser
    id="disable-events"
    title="トランザクションおよびページビューイベントレポートの無効化/有効化"
  >
    <Callout variant="tip">
      **所有者または管理者**
    </Callout>

    Insights**データの要約**UIページは、報告されている[イベント](/docs/using-new-relic/data/understand-data/new-relic-data-types#events-new-relic)のタイプを確認するために使用されます。このページを使用して、 `PageView`および`Transaction`イベントのレポートを有効または無効にすることもできます。

    **データの概要**を表示するには：

    1. **[Insights.newrelic.com](https://insights.newrelic.com) >データの管理**に移動します。

    2. \[**概要**]タブを選択します。

       注： `PageView`または`Transaction`イベントレポートを無効にすると、一部のNewRelicUI要素に影響を与える可能性があります。このデータに依存する一部のUIページに空のグラフが表示される場合があります。

    3. **[Insights.newrelic.com](https://insights.newrelic.com/) >データの管理>概要**に移動します。

    4. \[**概要**]タブから、\[**データソースの構成**]を選択します。

    5. 適切なスイッチをオンまたはオフに切り替えてから、保存します。

       `Transaction`をオンまたはオフに切り替えると、レポートエージェントが自動的に再起動します。

       イベントレポートの構成の詳細については、「[イベントデータの保持](/docs/insights/use-insights-ui/manage-account-data/extend-event-data-retention)」を参照してください。
  </Collapser>
</CollapserGroup>

## 柔軟なデータ保持 [#flex-retention]

元の価格設定モデルを使用している組織の場合、 [Insights Pro](#insights-pro)のサブスクリプションを使用すると、**柔軟な保持**にアクセスできます。これにより、特定の種類の[イベントデータ](/docs/insights/use-insights-ui/manage-account-data/insights-data-retention)を保持する方法を定義できます。これにより、必要な限り、必要なイベントデータのみを保持できます。[UI](#ui-overview)または[GraphQLAPIを使用し](#api-examples)て、柔軟な保持を管理できます。

この機能を使用するための要件：

* [InsightsProサブスクリプション](https://newrelic.com/infrastructure/pricing)または同等のトライアル。
* [InsightsProサブスクリプションによって管理されるイベント](#insights-pro)にのみ適用されます。
* この機能を使用するには、アカウントの[所有者](/docs/accounts/accounts/roles-permissions/users-roles#roles)またはアカウントのデータ保持[アドオンマネージャー](/docs/accounts/accounts/roles-permissions/users-roles#add-on)である必要があります。

<CollapserGroup>
  <Collapser
    id="how-it-works"
    title="使い方"
  >
    標準のイベントデータ保持がどのように機能するかを理解するには、最初に[イベントデータ保持](/docs/insights/use-insights-ui/manage-account-data/extend-event-data-retention)をお読みください。

    **柔軟な保持**を使用して、アカウント全体で適用可能な[イベント名前空間](/docs/accounts/new-relic-account-usage/insights-usage/insights-usage-event-queries#namespace)のデータ保持を指定します。これにより、データのイベントごとの名前空間制御が可能になります。イベント名前空間に指定した保持は、その名前空間の下のすべてのイベントタイプで共有されます。一部の名前空間が自分に関係がない場合は、それらのイベントデータを完全に収集することを回避できます。

    保持値は、[含まれている保持](#glossary)より低くしたり、[デフォルトの保持](#glossary)より高くしたりすることはできません。

    [UI](#ui-overview)または[API](#api-examples)のいずれかでデータ保持を制御できます。

    <img
      title="flex-2.png"
      alt="flex-2.png"
      src={flex2}
    />
  </Collapser>

  <Collapser
    id="ui-overview"
    title="UIを介して保持を管理する"
  >
    [GraphQL API](#api-examples)またはUIを使用して、データ保持を制御できます。

    UIでこれを行うには、[データ保持UI](/docs/telemetry-data-platform/manage-data/manage-data-retention)に移動します。保持の変更は、更新後24時間以内に有効になります。
  </Collapser>

  <Collapser
    id="glossary"
    title="用語集"
  >
    柔軟な保持で使用される用語を理解するには、以下を参照してください。

    <table>
      <thead>
        <tr>
          <th style={{ width: "150px" }}>
            学期
          </th>

          <th>
            説明
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            イベント名前空間
          </td>

          <td>
            イベントの名前空間は、単一のデータ保持値を共有する1つ以上のイベントタイプに対応します。詳細については、「 [イベントの名前空間（タイプ）」を参照してください。](/docs/accounts/new-relic-account-usage/insights-usage/insights-usage-event-queries#namespace)[NerdGraphを使用](#api-list-namespaces)して、カスタマイズ可能なイベント名前空間のリストを取得することもできます。
          </td>
        </tr>

        <tr>
          <td>
            保持値
          </td>

          <td>
            イベントデータが保存される期間を指定する数値（日数）。
          </td>
        </tr>

        <tr>
          <td>
            保持ルール
          </td>

          <td>
            現在の保持をオーバーライドするために指定するイベント名前空間と保持値のペア。
          </td>
        </tr>

        <tr>
          <td>
            ライセンス保持
          </td>

          <td>
            InsightsProサブスクリプション契約によって週単位で決定される保持期間。
          </td>
        </tr>

        <tr>
          <td>
            含まれている保持
          </td>

          <td>
            データが保存されているが、InsightsProサブスクリプションでは課金されない保持期間。詳細については[、特定の製品のデータ保持の詳細を参照してください](/docs/accounts/accounts/data-management/data-retention-components)。
          </td>
        </tr>

        <tr>
          <td>
            有料保持
          </td>

          <td>
            データが保存され、InsightsProサブスクリプションに基づいて課金される保持期間。デフォルトでは、ライセンスされた保持によってこの値が決定されますが、柔軟な保持によりオーバーライドできます。
          </td>
        </tr>

        <tr>
          <td>
            デフォルトの保持
          </td>

          <td>
            箱から出てきた保持期間。これは、**含まれている保持**と**ライセンスさ**れた保持の合計に基づいています。
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

APIを使用した保持設定の管理については、「[データ保持の管理](/docs/telemetry-data-platform/manage-data/manage-data-retention/#api-examples)」を参照してください。