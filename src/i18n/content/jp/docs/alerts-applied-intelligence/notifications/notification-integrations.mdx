---
title: アラートとアプライド・インテリジェンス通知の統合
tags:
  - Alerts and applied intelligence
  - Applied intelligence
  - Incident intelligence
  - Destinations
metaDescription: Alerts and applied intelligence notification integrations are specific services and platforms you can use to send notifications from New Relic.
freshnessValidatedDate: never
translationType: machine
---

import accountsJiraDestination from 'images/accounts_screenshot-crop_jira-destination.webp'

import accountsJiraTemplate from 'images/accounts_screenshot-crop_jira-template.webp'

import accountsBridgeEventPattern from 'images/accounts_screenshot-crop_bridge-event-pattern.webp'

import accountsServiceNowDestination from 'images/accounts_screenshot-crop_service-now-destination.webp'

import accountsServiceNowCreateDestination from 'images/accounts_screenshot-crop_servicenow-create-destination.webp'

import accountsServiceNowMessageTemplate from 'images/accounts_screenshot-crop_service-now-message-template.webp'

import accountsWebhookServiceNowFields from 'images/accounts_screenshot-crop_webhook-serviceNowFields.webp'

import accountsSlackDestinationAuthentication from 'images/accounts_screenshot-crop_slack-destination-authentication.webp'

import accountsSlackSignIn from 'images/accounts_screenshot-crop_slack-sign-in.webp'

import accountsSlackDestinationAllowAccess from 'images/accounts_screenshot-crop_slack-destination-allow-access.webp'

import accountsSlackAuthenticationCompleted from 'images/accounts_screenshot-crop_slack-authentication-completed.webp'

import accountsSlackMessageTemplate from 'images/accounts_screenshot-crop_slack-message-template.webp'

import accountsSlackChannelTestNotification from 'images/accounts_screenshot-crop_slack-channel-test-notification.webp'

import accountsWebhookDestination from 'images/accounts_screenshot-crop_webhook-destination.webp'

import accountsWebhookPreviewError from 'images/accounts_screenshot-crop_webhook-preview-error.webp'

import accountsWebhookNotificationTemplate from 'images/accounts_screenshot-crop_webhook-notification-template.webp'

import accountsWebhookSecureUrl from 'images/accounts_screenshot-crop_webhook-secure-url.webp'

import accountsWebhookCustomHeadersAuth from 'images/accounts_screenshot-crop_webhook-custom-headers-auth.webp'

import accountsEmailConfWorkflow from 'images/accounts_screenshot-crop_email-configure-workflow.webp'

import accountsEmailSettings from 'images/accounts_screenshot-crop_email-settings.webp'

import accountsAWSEventBridgeDestination from 'images/accounts_screenshot-crop_awseventbridge-destination.webp'

import accountsPagerDutyAccountDestinationNewUi from 'images/accounts_screenshot-crop_pager-duty-account-destination-new-ui.webp'

import accountsPagerDutyAddNewWorkflow from 'images/accounts_screenshot-crop_pager-duty-add-webhook.webp'

import accountsPagerDutyAddNewRelicIntegration from 'images/accounts_screenshot-crop_pager-duty-add-new-relic-integration.webp'

import accountsPagerDutyIntegrationOpened from 'images/accounts_screenshot-crop_pager-duty-integration-opened.webp'

import accountsPagerDutyServiceDestination from 'images/accounts_screenshot-crop_pager-duty-service-destination.webp'

import accountsMigrateSlackNewWorkflow from 'images/accounts_screenshot-crop_slack-new-workflow.webp'

import accountsMigrateSlackRemoveLegacy from 'images/accounts_screenshot-crop_slack-remove-legacy.webp'

アラートと応用インテリジェンス通知の統合により、特定のサービスとプラットフォームを New Relic プラットフォームに接続できます。これらの接続を使用して、New Relic から通知を送信できます。これらの通知を通じて、レビューが必要な問題に関する情報や、検出された問題についての決定に役立つ情報が得られます。

## 統合内容 [#detail]

それぞれの具体的な通知機能の統合についてはこちらをご覧ください。

<CollapserGroup>
  <Collapser
    className="freq-link"
    id="jira"
    title="アトラシアン Jira"
  >
    New Relic を Atlassian Jira (クラウド) と統合し、Jira 課題を自動的に作成、更新、クローズします。

    <Video
      type="wistia"
      id="vp5rigddko"
    />

    ### 権限 [#jira-permissions]

    <Callout variant="important">
      この統合は、JIRA オンプレミスまたはデータ センター インストールをサポートしていません。
    </Callout>

    Jira `API-Token` から必要な権限は `BROWSE_PROJECTS`、 `ASSIGN_ISSUES`、 `CLOSE_ISSUES`、 `CREATE_ISSUES`、 `EDIT_ISSUES`、 `RESOLVE_ISSUES`、 `TRANSITION_ISSUES`、 `USER_PICKER`、および `ADD_COMMENTS`です。

    双方向同期トグルを有効にするには、提供されたJira `API-Key`に`Admin`ロールが必要です。

    ### Jiraのデスティネーションを設定する [#set-up-jira]

    Jira 課題を作成し、Jira と New Relic が更新を共有できるようにし、同期を維持します。

    Jira 宛先を作成するには、次の手順に従います。

    1. <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Alerts & AI**</DoNotTranslate>に移動し、 <DoNotTranslate>**Destinations**</DoNotTranslate>をクリックして、 <DoNotTranslate>**Jira**</DoNotTranslate>を選択します。

    2. 次の情報を入力します。

       * <DoNotTranslate>**Name:**</DoNotTranslate>

         宛先を識別するためのカスタム名。

       * <DoNotTranslate>**URL:**</DoNotTranslate>

         宛先の URL。

       * <DoNotTranslate>**Username:**</DoNotTranslate>

         ユーザーの電子メール アドレス。

       * <DoNotTranslate>**API token:**</DoNotTranslate>

         アトラシアン アカウントから生成されます。

    宛先を保存する前に、 <DoNotTranslate>**Test connection**</DoNotTranslate>ボタンをクリックして接続を確認することをお勧めします。

    <img
      width="80%;"
      title="Jira destination configuration."
      alt="A screenshot of a Jira destination configuration."
      src={accountsJiraDestination}
    />

    ### 2ウェイ・シンク [#jira-two-way]

    双方向同期はワークフローに適用できます。有効にするには、双方向統合トグルをオンにします。

    オンにすると、Jira アカウントに [Jira Webhook](https://developer.atlassian.com/server/jira/platform/webhooks/) が作成されます。Webhook には、New Relic へのアクセスの詳細 (URL と API キー) が含まれています。

    ### New Relicのワークフローとの同期 [#two-way-sync-workflows]

    * New Relic 課題のクローズは、Jira 課題のステータスが`done`に変化するとトリガーされます。
    * New Relic 問題の承認は、Jira 問題のステータスが`in-progress`に変化するとトリガーされます。

    ### Workflowsでメッセージ テンプレートを構成する [#configure-jira-message-template]

    Jira 課題のテンプレートを構成するには、次の手順に従います。

    1. <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Alerts & AI > Workflows**</DoNotTranslate>

       に移動して既存のワークフローをクリックするか、

       <DoNotTranslate>**+ Add a new workflow**</DoNotTranslate>

       ボタンをクリックします。

    2. 既存の宛先を選択するか、新しい宛先を作成します。

    3. 宛先に接続したら、プロジェクトを選択し、使用する Jira 課題タイプを選択します。

    4. 課題タイプを選択すると、構成されたプロジェクトのフィールドが Jira インスタンスに自動的にマッピングされます。

    開始しやすいように、必須および推奨のフィールドと値が自動的に入力されます。続行する前に、すべての必須フィールドに値が含まれていることを確認してください。

    ### テスト通知の送信 [#send-jira-test]

    デフォルトのフィールド値を含むテスト通知をクリックすると、Jira の課題が表示されます。成功すると、Jira でインシデントを表示するためのリンクが表示されます。

    <img
      width="80%;"
      title="The Jira-specific custom variables menu."
      alt="A screenshot of the Jira-specific custom variables menu."
      src={accountsJiraTemplate}
    />

    <figcaption>
      Jira 通知メッセージ テンプレート。
    </figcaption>
  </Collapser>

  <Collapser
    className="freq-link"
    id="eventBridge"
    title="AWS EventBridge"
  >
    New Relic と[AWS EventBridge](https://aws.amazon.com/eventbridge/)を使用して、AWS Lambda、Amazon シンプル通知サービス (SNS) キュー、CloudWatch ログなどのターゲットに通知をカスタマイズして配信します。

    <Video
      type="wistia"
      id="24mucmd1mj"
    />

    ### EventBridgeの宛先を設定します [#set-up-eventbridge]

    <Callout variant="important">
      New Relicは、 [SaaSパートナーイベントソース](https://aws.amazon.com/eventbridge/integrations/)としてAWSにリストされています。
    </Callout>

    AWS EventBridge 宛先を作成するには、次の手順に従います。

    1. <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Alerts & AI**</DoNotTranslate>に移動し、 <DoNotTranslate>**Destinations**</DoNotTranslate>をクリックして、 <DoNotTranslate>**AWS EventBridge**</DoNotTranslate>を選択します。

    2. 次の情報を入力します。

       * <DoNotTranslate>**Name:**</DoNotTranslate> 宛先を識別するためのカスタム名。
       * <DoNotTranslate>**AWS region:**</DoNotTranslate> これは AWS リージョン エンドポイントです。 イベント ソースがホストされているリージョンを選択します。
       * <DoNotTranslate>**AWS account ID:**</DoNotTranslate> AWS アカウント ID。 これは 12 桁の番号です。

       <img
         width="80%;"
         title="AWS EventBridge destination"
         alt="AWS EventBridge destination"
         src={accountsAWSEventBridgeDestination}
       />

    ### イベントソースを選択してください [#eventbridge-source]

    AWSアカウントIDを使用してEventBridgeの宛先を設定したら、新しいイベントソースを作成すると、EventBridgeで利用できるようになります。

    1. 宛先名を選択または作成します。

    2. イベントソースを選択または作成します。

       新しいイベントソースを作成すると、AWSEventBridgeアカウントに統合パートナーのイベントソースとして作成されます。

    ### AWSアカウントでイベントソースを関連付け、ルールを作成します [#eventbridge-rule]

    イベント ソースをイベント バスに関連付けるには、次の手順を実行します。

    1. AWS EventBridge コンソールのナビゲーション ペインで<DoNotTranslate>**Partner event sources**</DoNotTranslate>を選択します。

    2. パートナー イベント ソースの横にあるボタンを選択し、 <DoNotTranslate>**Associate with event bus**</DoNotTranslate>を選択します。

       イベント ソースのステータスが<DoNotTranslate>**Pending**</DoNotTranslate>から<DoNotTranslate>**Active**</DoNotTranslate>に変わり、イベント バスの名前がイベント ソース名と一致するように更新されます。 これで、New Relic からのイベントに一致するルールの作成を開始できるようになりました。

    3. イベント バスのルールを作成します。

       New Relic から送信された通知に対応するには、New-Relic イベントをフィルタリングするイベント パターンを使用してルールを作成する必要があります。

       <img
         width="80%;"
         title="Event pattern with the newrelic partner prefix."
         alt="A screenshot of rule Event pattern."
         src={accountsBridgeEventPattern}
       />

       詳細な手順について[は、イベントソースルールを作成する](https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-saas.html#eb-create-rule-partner-events)方法についてこのAWSドキュメントを使用してください。

    ### ワークフローでメッセージ イベント テンプレートを構成する [#message-eventbridge]

    <DoNotTranslate>**Workflows**</DoNotTranslate>に移動し、既存のワークフローまたは<DoNotTranslate>**Add a new Workflow**</DoNotTranslate>ボタンをクリックして、EventBridge の宛先を選択します。 New Relic から EventBridge に通知を送信する場合、メッセージ テンプレートを使用してその通知をカスタマイズできます。

    デフォルトのテンプレートを使用することも、独自のテンプレートをカスタマイズすることもできます。 [変数メニュー](/docs/alerts-applied-intelligence/notifications/message-templates/#variables-menu)から<DoNotTranslate>**Variables**</DoNotTranslate>を選択し、[ハンドルバー構文](/docs/alerts-applied-intelligence/notifications/message-templates/#handlebars-syntax)を適用してイベントを充実させます。

    EventBridge API には JSON が必要で、テンプレート プレビューにはレンダリングされた JSON が表示されます。イベントテンプレートが有効な JSON に準拠すると、テスト通知を AWS EventBridge に送信できます。詳細については、 [JSON の使用例を](/docs/alerts-applied-intelligence/notifications/message-templates/#usage-examples)参照してください。
  </Collapser>

  <Collapser
    className="freq-link"
    id="email"
    title="メール"
  >
    [ワークフロー](/docs/alerts-applied-intelligence/applied-intelligence/incident-workflows/incident-workflows/)の通知チャネルとして<DoNotTranslate>**Email**</DoNotTranslate>を選択すると、電子メールの宛先が自動的に作成されるため、 <DoNotTranslate>**Destinations**</DoNotTranslate>メニューから構成する必要はありません。 各電子メールの宛先は、関連付けられているワークフローに固有であるため、宛先フィードでは重複して表示される可能性があります。

    電子メール通知を送信するには:

    1. <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Alerts & AI**</DoNotTranslate>に移動します。

    2. 左側のナビゲーション パネルで<DoNotTranslate>**Workflows**</DoNotTranslate>を選択します。

    3. <DoNotTranslate>**+ Add a workflow**</DoNotTranslate>をクリックします。

       <img
         width="80%;"
         title="Configure your workflow"
         alt="Configure your workflow"
         src={accountsEmailConfWorkflow}
       />

    4. ワークフローの名称を入力してください。このフィールドは必須で、ユニークである必要があります。

    5. 必要なデータをフィルタリングします。 <DoNotTranslate>**Basic**</DoNotTranslate>と<DoNotTranslate>**Advanced**</DoNotTranslate>のオプションから選択して、送信する問題を追加できます。

    6. <DoNotTranslate>**Additional settings**</DoNotTranslate>をクリックしてデータを強化します。 <DoNotTranslate>**Enrich your data**</DoNotTranslate>を有効にして NRQL クエリを構築します。

    7. <DoNotTranslate>**Save and exit**</DoNotTranslate>をクリックします。

    8. 通知方法として<DoNotTranslate>**Email**</DoNotTranslate>を選択します。

       <img
         width="60%;"
         title="Email settings"
         alt="A screenshot of the email settings."
         src={accountsEmailSettings}
       />

    9. 通知を送信するメールを追加します。1 人以上の受信者を追加できます。

       * メールアドレスを検索することで、New Relic アカウントを持つユーザーを見つけることができます。

       * New Relic アカウントやメール配信リストを持っていないユーザーを追加するには、そのユーザーの完全なメールアドレスを入力します。

       * メール設定に追加されたメール アドレスの各リストは、独自の一意の宛先を作成し、宛先フィードに表示されます。

       * 既存の宛先に関連付けられている電子メール アドレスを使用して宛先を作成すると、2 つを結合するオプションを提供するプロンプトが表示されます。

         <DoNotTranslate>**Merge**</DoNotTranslate>

         を選択すると宛先が結合され、通知が目的の受信者に効率的にルーティングされます。

       * [通知ログ](/docs/alerts-applied-intelligence/notifications/destinations/#notifications-log)で宛先ごとの電子メール通知を追跡できます。

    10. 電子メール メッセージをカスタマイズします。

        * 電子メールの件名については、デフォルトのペイロードを使用するか、必要なデータを含めるようにカスタマイズできます。

        * 電子メールの本文には、変更できないデフォルトのデータが含まれていますが、独自にカスタマイズした詳細を追加することもできます。 これらのカスタマイズは、

          <DoNotTranslate>**Custom Details**</DoNotTranslate>

          セクションに表示されます。

        * メールを充実させるには、[変数メニュー](/docs/alerts-applied-intelligence/notifications/message-templates/#variables-menu)から変数を選択し、[ハンドルバーの構文](/docs/alerts-applied-intelligence/notifications/message-templates/#handlebars-syntax)を適用します。

    11. <DoNotTranslate>**Send test notification**</DoNotTranslate>をクリックして、電子メール通知が受信箱に届くことを確認します。

    12. <DoNotTranslate>**Save**</DoNotTranslate>をクリックします。

    13. <DoNotTranslate>**Activate workflow**</DoNotTranslate>をクリックします。

    ワークフローのメイン ページから、ワークフロー ID を有効化、編集、削除、または作成したワークフローをクリップボードにコピーできます。
  </Collapser>

  <Collapser
    className="freq-link"
    id="mobile_push"
    title="New Relic モバイルプッシュ"
  >
    New Relic iOS または Android モバイルアプリにプッシュ通知を送信します。

    <Video
      type="wistia"
      id="s29hxnyi4v"
    />

    ### モバイル プッシュ先を設定する [#set-mobile_push-destination]

    モバイル プッシュの宛先を作成するには、次のものが必要です。

    * <DoNotTranslate>**Push destination name:**</DoNotTranslate> 一意の宛先名。

    * <DoNotTranslate>**User id:**</DoNotTranslate> これは、現在ログインしているユーザーに基づいて自動的に入力されます。

      <Callout variant="important">
        現在、モバイル プッシュ宛先を作成できるのは、[変更機能](/docs/alerts-applied-intelligence/notifications/destinations#requirements)を持つ現在ログインしているユーザーのみです。 ユーザーに対してプッシュ先を 1 つだけ作成することもできます。 複数作成しようとすると、エラーが表示されます。 宛先を保存する前に、 <DoNotTranslate>**Test connection**</DoNotTranslate>ボタンを使用して接続をテストすることをお勧めします。
      </Callout>

    ### ワークフローでプッシュ通知を受け取るタイミングを構成する [#mobile]

    <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Alerts & AI > Workflows**</DoNotTranslate>に移動して既存のワークフローをクリックするか、 <DoNotTranslate>**+Add a new workflow**</DoNotTranslate>ボタンをクリックしてモバイル通知を選択します。 モバイル プッシュを設定するには、モバイル通知をクリックし、目的の宛先を選択します。
  </Collapser>

  <Collapser
    className="freq-link"
    id="opsgeniewebhook_templates"
    title="オプスジェニー"
  >
    ### Atlassian Opsgenie の Webhook テンプレート

    Webhook テンプレートを使用してワークフローから Opsgenie に通知を送信する:[ワークフロー用の Opsgenie Webhook テンプレート](https://support.atlassian.com/opsgenie/docs/integrate-opsgenie-with-new-relic-alerts-new/)
  </Collapser>

  <Collapser
    className="freq-link"
    id="pagerduty"
    title="PagerDuty"
  >
    New Relic を PagerDuty と統合して、PagerDuty インシデントを自動的に作成、更新、確認、解決します。

    <Video
      type="wistia"
      id="lvzd77zj17"
    />

    PagerDutyと統合する方法は2つあります。

    * <DoNotTranslate>**[Account level integration using REST API Keys (recommended)](#pagerduty-ali)**</DoNotTranslate>

      : この完全に自動化された統合は、双方向同期と、単一の New Relic 宛先に複数の PagerDuty サービスを定義する機能をサポートします。

    * <DoNotTranslate>**[Service integration using Events API keys](#pagerduty-sli)**</DoNotTranslate>

      : この単一サービス統合はサービスレベル統合キーを使用し、固有の PagerDuty サービスごとに個別の New Relic 宛先が必要です。

    ### アカウントレベルの統合 [#pagerduty-ali]

    この完全に自動化された統合は、双方向同期と、単一の New Relic 宛先に複数の PagerDuty サービスを定義する機能をサポートします。

    ### 権限 [#pd-permissions]

    この統合には、以下のアクションを実行する権限が必要です。

    * [リストサービス](https://developer.pagerduty.com/api-reference/b3A6Mjc0ODE5Ng-list-services)

    * [インテグレーションの作成](https://developer.pagerduty.com/api-reference/b3A6Mjc0ODIwMw-create-a-new-integration)

    * [Webhookサブスクリプションの作成](https://developer.pagerduty.com/api-reference/b3A6MjkyNDc4NA-create-a-webhook-subscription)

    * [ノートの作成](https://developer.pagerduty.com/api-reference/b3A6Mjc0ODE1MA-create-a-note-on-an-incident)

    * [リストチーム](https://developer.pagerduty.com/api-reference/b3A6Mjc0ODIyMw-list-teams)

    * [ユーザー一覧](https://developer.pagerduty.com/api-reference/b3A6Mjc0ODIzMw-list-users)

      この統合には REST API キーが必要です。PagerDuty には 2 種類の REST API キーがあります。

    * [一般アクセス キー](https://support.pagerduty.com/docs/generating-api-keys#section-generating-a-general-access-rest-api-key): 上記のすべての権限が含まれており、PagerDuty 管理者とアカウント所有者がアクセスできます。[PagerDuty の説明を参照してください](https://support.pagerduty.com/docs/api-access-keys#generate-a-general-access-rest-api-key)。

    * [パーソナルユーザートークン](https://support.pagerduty.com/docs/generating-api-keys#section-generating-a-personal-rest-api-key): お客様のアカウントに高度な権限がある場合、固有のパーソナルREST APIキーを作成することができます。個人用REST APIキーを使用して行われたリクエストは、ユーザーのパーミッションに制限されます。ユーザートークンAPIキーを提供することを選択した場合、それが上記の必要なパーミッションを持っていることを確認してください。 [PagerDutyの説明書をご覧ください](https://support.pagerduty.com/docs/api-access-keys#generate-a-user-token-rest-api-key).

      <Callout variant="tip">
        個人ユーザー トークンの場合、実際のユーザーに属さない専用の統合ユーザーを使用することをお勧めします。
      </Callout>

    ### デスティネーションの設定 [#set-up-pagerduty]

    PagerDutyのデスティネーションを作成するには

    1. <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Alerts & AI**</DoNotTranslate>に移動し、 <DoNotTranslate>**Destinations**</DoNotTranslate>をクリックして、 <DoNotTranslate>**PagerDuty**</DoNotTranslate>を選択します。

    2. 次の情報を入力します。

       * <DoNotTranslate>**Name**</DoNotTranslate>

         : 宛先を識別するためのカスタム名。

       * <DoNotTranslate>**API Key**</DoNotTranslate>

         : この統合では、REST API キーを提供するように求められます。 PagerDuty には、 [一般アクセス トークン](https://support.pagerduty.com/docs/generating-api-keys#section-generating-a-general-access-rest-api-key)と[ユーザー トークン](https://support.pagerduty.com/docs/generating-api-keys#section-generating-a-personal-rest-api-key)の 2 種類の REST API キーがあります。

       宛先を保存する前に、 <DoNotTranslate>**Test connection**</DoNotTranslate>ボタンをクリックして接続をテストすることをお勧めします。

       <img
         width="80%;"
         title="PagerDuty account-level destination configuration"
         alt="A screenshot of a PagerDuty account-level destination configuration"
         src={accountsPagerDutyAccountDestinationNewUi}
       />

    ### 2ウェイ・シンク [#two-way-pagerduty]

    双方向同期を有効にするには、 <DoNotTranslate>**two-way integration**</DoNotTranslate>トグルをオンにします。 オンにすると、選択した PagerDuty サービスに対して後の段階で PagerDuty サブスクリプションが作成されます ([メッセージ テンプレートのカスタマイズを](#message-pagerduty)参照)。 Webhook には、New Relic へのアクセスの詳細 (URL および New Relic API キー) が含まれています。 デフォルトでは、New Relic によって作成された PagerDuty インシデントに対する状態の変更はすべて New Relic に同期されます。

    <Callout variant="important">
      特定のサービスで Intelligent Alert Grouping を使用している PagerDuty Event Intelligence または Digital Operations の顧客の場合、New Relic に送り返される PagerDuty インシデントに潜在的な不一致が発生する可能性があります。
    </Callout>

    ### New Relicのワークフローとの同期 [#two-way-sync-workflows]

    * PagerDuty のインシデントが解決されると、New Relic issue の閉鎖がトリガーされます。

    * PagerDuty のインシデントが承認されると、New Relic のインシデントの承認がトリガーされます。

      ### ワークフローでメッセージ テンプレートを構成する [#message-pagerduty]

      メッセージテンプレートを設定するには

      1. <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Alerts & AI > Workflows**</DoNotTranslate>

         に移動して既存のワークフローをクリックするか、

         <DoNotTranslate>**+ Add a new workflow**</DoNotTranslate>

         ボタンをクリックして PagerDuty 通知機能を選択します。

      2. 宛先を選択するか、新しい宛先を作成します。

      3. PagerDutyのサービスを選択します。

      4. ユーザーを選択します。選択したユーザーに代わって、New Relic がノートを投稿します。

      5. 詳細をPagerDutyのカスタム詳細セクションに送信します。 デフォルトのペイロードを使用することも、課題ペイロードのフリー テキストまたは動的変数を使用してカスタマイズすることもできます。 [変数メニュー](/docs/alerts-applied-intelligence/notifications/message-templates/#variables-menu)から変数を選択し、[ハンドルバー構文](/docs/alerts-applied-intelligence/notifications/message-templates/#handlebars-syntax)を適用してペイロードを強化します。 右側の

         <DoNotTranslate>**preview**</DoNotTranslate>

         セクションには、テンプレートがレンダリングされた後に予想されるペイロードが表示されます。 ペイロードが有効な JSON を形成していない場合は、エラーが表示され、テンプレートを保存できません。

    PagerDuty アラートのカスタム詳細は自動的に入力されます。

    ### テスト通知の送信 [#test-notification-pagerduty]

    デフォルトのフィールド値を含むテスト通知をクリックすると、PagerDuty インシデントがどのように表示されるかを確認できます。成功すると、インシデントが作成され、リンクが表示されます。

    <img
      width="80%;"
      title="PagerDuty service-level workflow configuration."
      alt="A screenshot of a PagerDuty service-level workflow configuration."
      src={accountsPagerDutyAddNewWorkflow}
    />

    ### サービス統合 [#pagerduty-sli]

    この統合では、New Relic でインシデントを作成するサービスに New Relic PagerDuty 統合をセットアップする必要があります。PagerDuty サービスで New Relic 統合を作成するには:

    1. <DoNotTranslate>**Services > Service Directory**</DoNotTranslate>に移動し、統合を追加するサービスを選択します。

    2. <DoNotTranslate>**Integrations**</DoNotTranslate>タブを選択し、 <DoNotTranslate>**Add an integration**</DoNotTranslate>をクリックします。

    3. リスト内で New Relic 統合を見つけてマークし、 <DoNotTranslate>**Add**</DoNotTranslate>をクリックします。

       <img
         title="PagerDuty New Relic integration."
         width="70%;"
         alt="New Relic integration."
         src={accountsPagerDutyAddNewRelicIntegration}
       />

    4. 右側をクリックして、 <DoNotTranslate>**Integration Key**</DoNotTranslate>を表示してコピーします。

       <img
         title="PagerDuty New Relic integration key."
         alt="New Relic integration key."
         src={accountsPagerDutyIntegrationOpened}
       />

    ### メッセージテンプレートの設定 [#message-pagerduty]

    メッセージテンプレートを設定するには

    1. <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Alerts & AI > Workflows**</DoNotTranslate>

       に移動して既存のワークフローをクリックするか、

       <DoNotTranslate>**+ Add a new workflow**</DoNotTranslate>

       ボタンをクリックして PagerDuty 通知機能を選択します。

    2. 宛先を選択するか、新しい宛先を作成します。

    3. (オプション）デフォルトのインシデントサマリーを編集します。

    なお、PagerDuty Alertsのカスタム詳細は自動的に入力されます。

    ### テスト通知の送信 [#test-notification-pagerduty]

    デフォルトのフィールド値でテスト通知をクリックすると、PagerDutyのインシデントがどのように表示されるかを確認できます。
  </Collapser>

  <Collapser
    className="freq-link"
    id="servicenow"
    title="ServiceNow（インシデント・マネジメント）"
  >
    <Callout>
      この統合をインストールすることはお勧めしません。代わりに、New Relic ワークフローとの新しい認定済み統合を使用することをお勧めします。インストール方法と使用方法については、[次のセクション](#servicenow-certified)を参照してください。
    </Callout>

    New Relic を ServiceNow ITSM と統合し、ServiceNow インシデントを自動的に作成、更新、解決します。

    <Video
      type="wistia"
      id="6or6n8am4k"
    />

    ### 役割 [#roles-servicenow]

    統合の一環として、ServiceNowのインシデントテーブルからフィールドを取得し、その他のオプション値も取得します。以下のパーミッションが必要です。

    * テーブル`sys_dictionary` 、 `sys_choice` 、 `sys_user` 、および`task`の完全な読み取り権限。

    * `incident`への読み取り/書き込み権限。

    * `caller`列のユーザーを取得するには、 `sys_user`テーブルの読み取り権限が必要です。

      すぐに使用できる非詳細ロール`personalize_choices` 、 `personalize_dictionary` 、 `rest_service`または`snc_platform_rest_api_access` 、および`itil`には上記の権限があります。双方向統合を有効にするには、 `api_key_credentials`テーブルに対する読み取り/書き込み権限が必要です。ロール`credentials_admin`と`discovery_admin`がこれらを提供します。

    ### デスティネーションの設定 [#set-up-service-destination]

    ServiceNow 宛先を作成するには:

    1. <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Alerts & AI**</DoNotTranslate>に移動し、 <DoNotTranslate>**Destinations**</DoNotTranslate>をクリックして、 <DoNotTranslate>**ServiceNow**</DoNotTranslate>を選択します。

    2. 次の情報を入力します。

       * <DoNotTranslate>**Destination Name:**</DoNotTranslate>

         宛先を識別するためのカスタム名。

       * <DoNotTranslate>**Domain:**</DoNotTranslate>

         宛先の URL。

       * <DoNotTranslate>**Username:**</DoNotTranslate>

         ユーザーの名前。

       * <DoNotTranslate>**Password:**</DoNotTranslate>

         ユーザーのパスワード。

       宛先を保存する前に、 <DoNotTranslate>**Test connection**</DoNotTranslate>ボタンをクリックして接続をテストすることをお勧めします。

       ### 2ウェイ・シンク [#two-way-snow]

       <DoNotTranslate>**two-way integration**</DoNotTranslate>を構成するには:

       1. `two-way integration`トグルをオンにします。
       2. この [XML ファイルを開いてダウンロードします。この XML ファイル](https://storage.googleapis.com/newrelic-notifications/snow-two-way-sync/Newrelic-Snow-Sync-Configurations.xml)には、New Relic にイベントをトリガーするビジネス ルールが含まれています。
       3. ServiceNow サイドバー メニューで、 <DoNotTranslate>**System Definition > Business Rules**</DoNotTranslate>に移動します。
       4. いずれかの列ヘッダーにあるメニュー アイコンをクリックし、 <DoNotTranslate>**Import XML**</DoNotTranslate>を選択して、ダウンロードした XML ファイルをアップロードします。

       宛先を保存すると、New Relic API キーが`api_key_credentials`に保存されます。キーは、New Relic への REST コールバック呼び出しの一部としてヘッダーで送信されます。

       ### ワークフローとの同期 [#two-way-sync-snow-workflows]

       * ServiceNow インシデントの状態が解決済みに変わると、New Relic の問題のクローズがトリガーされます。
       * ServiceNow インシデントの状態がオープンから変化すると、New Relic の問題の承認がトリガーされます。

    ### ワークフローでメッセージ テンプレートを構成する [#configure-servicenow-message-template]

    1. <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Alerts & AI > Workflows**</DoNotTranslate>に移動し、既存のワークフローをクリックするか、 <DoNotTranslate>**+ Add a new workflow**</DoNotTranslate>ボタンをクリックします。

    2. ServiceNow の宛先を選択します。

    3. 接続が成功すると、ServiceNowのインシデントテーブルのカラムがアカウントから取得され、自動的にServiceNowインスタンスにマッピングされます。

       簡単に開始できるように、必須フィールドと推奨フィールドにはデフォルト値が事前に入力されています。サポートされているフィールドにカスタム値を追加する場合、課題ペイロードから動的な値を追加することも、独自の値を書き込むこともできます。必須でないフィールドを削除して、独自のフィールドを追加できます。

    ### テスト通知の送信 [#send-servicenow-test]

    <DoNotTranslate>**Send test notification**</DoNotTranslate>をクリックすると、デフォルトのフィールド値を持つ ServiceNow インシデントが表示されます。 成功すると、作成されたインシデントへのリンクが表示されます。

    <img
      width="80%;"
      title="ServiceNow incident template."
      alt="A screenshot of some recommended ServiceNow-incident fields and values."
      src={accountsServiceNowMessageTemplate}
    />

    <figcaption>
      ServiceNow-Incident テンプレートのフィールドを選択、編集、または削除します。
    </figcaption>
  </Collapser>

  <Collapser
    className="freq-link"
    id="servicenow-certified"
    title="ServiceNow (認定アプリケーション)"
  >
    認定された ServiceNow と New Relic ワークフローの統合は、ServiceNow ストアで入手できます。ServiceNow を使用する場合は、次の点に注意してください。

    * ServiceNow インスタンスは、New Relic の問題通知を`New Relic Issues`として保存します。

    * ServiceNow でルーティング ポリシーを構成し、特定のポリシーに一致する場合にそれらの問題を表すまたは対応するタスクまたはその他のレコードを生成できます。

    * ServiceNow の確認または終了イベントにより、New Relic の問題を確認または終了できます。

    * New Relic の問題を ServiceNow で実行可能なタスクに自動的に変換できます。

    * ServiceNow は、問題に関する New Relic からの更新を受け取ることができます。

    * ポリシー エンジンは、New Relic <InlinePopover type="alerts"/>が到着したときにそれらの認定を許可します。

    * エンティティを構成アイテムと照合し、それらを使用可能なタスク テーブルに関連付けます。

    * ServiceNow から New Relic エンリッチメントを送信し、画像として表示できます。

      ServiceNow アプリケーション宛先または Webhook 宛先を使用して、ServiceNow を New Relic と統合できます。

    <table>
      <thead>
        <tr>
          <th>
            New Relic 宛先タイプ
          </th>

          <th>
            ServiceNow
          </th>

          <th>
            Webhook
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            ペイロード
          </td>

          <td>
            New Relic によって制御されます
          </td>

          <td>
            あなたが管理する JSON ペイロード
          </td>
        </tr>

        <tr>
          <td>
            ServiceNow から New Relic を更新する機能
          </td>

          <td>
            含まれています。New Relic 接続は、宛先の作成時に自動的に作成されます。
          </td>

          <td>
            含まれています。New Relic 接続を手動で作成する必要があります。
          </td>
        </tr>

        <tr>
          <td>
            ルーティングポリシー
          </td>

          <td>
            付属
          </td>

          <td>
            付属
          </td>
        </tr>

        <tr>
          <td>
            ターゲットフィールドを直接更新する機能
          </td>

          <td>
            はい、デフォルトの New Relic Flow デザイナーとともにエンティティのタグを使用します。
          </td>

          <td>
            はい、エンティティのタグを使用し、デフォルトの New Relic Flow デザイナーとともに Webhook ペイロードで指定します。
          </td>
        </tr>
      </tbody>
    </table>

    ### ServiceNow アプリケーションの宛先を設定する [#servicenow-destination]

    <Callout variant="important">
      新しい宛先を作成するためのアクセス権がない場合は、アカウント名とアカウント番号を記載した電子メールを[notificationWorkflows@newrelic.com](mailto:notificationWorkflows@newrelic.com)に送信してください。
    </Callout>

    ServiceNow 宛先を作成するには、次の手順に従います。

    1. ServiceNow ストアで New Relic アプリケーション[をダウンロードし](https://store.servicenow.com/sn_appstore_store.do#!/store/application/d117597d1b9b9d9078faddf7b04bcba7/1.0.0?referer=%2Fstore%2Fsearch%3Flistingtype%3Dallintegrations%25253Bancillary_app%25253Bcertified_apps%25253Bcontent%25253Bindustry_solution%25253Boem%25253Butility%25253Btemplate%26q%3Dnew%2520relic&sl=sh) てインストールします。

    2. ServiceNow 内でユーザーを作成します。 必ず<DoNotTranslate>**Web service access only**</DoNotTranslate>オプションを有効にし、作成したユーザーに`x_newre_core.inbound_api`ロールを付与してください。 生成されたパスワードをコピーして保存します。

    3. <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Alerts & AI**</DoNotTranslate>に移動し、 <DoNotTranslate>**Destinations**</DoNotTranslate>をクリックして、 <DoNotTranslate>**ServiceNow**</DoNotTranslate>を選択します。

       <img
         width="80%;"
         title="Create a ServiceNow destination"
         alt="Create a ServiceNow destination"
         src={accountsServiceNowCreateDestination}
       />

    4. <DoNotTranslate>**Next**</DoNotTranslate>をクリックします。

    5. ドメイン、ユーザー名、パスワードを追加します。ドメインには`*.service-now.com`を含める必要があります。手順 2 でコピーしたパスワードを追加します。

    6. <DoNotTranslate>**Next**</DoNotTranslate>をクリックします。

    7. 目的地に名前を付けます。

    8. <DoNotTranslate>**Save destination**</DoNotTranslate>をクリックします。

       ### Webhook の宛先を設定する [#servicenow-webhook-destination]

       Webhook 宛先を作成するには、次の手順に従います。

    9. ServiceNow ストアで New Relic アプリケーションを[ダウンロードし](https://store.servicenow.com/sn_appstore_store.do#!/store/application/d117597d1b9b9d9078faddf7b04bcba7/1.1.0)てインストールします。

    10. ServiceNow 内でユーザーを作成します。 必ず<DoNotTranslate>**Web service access only**</DoNotTranslate>オプションを有効にし、作成したユーザーに`x_newre_core.inbound_api`ロールを付与してください。 生成されたパスワードをコピーして保存します。

    11. <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Alerts & AI**</DoNotTranslate>に移動し、 <DoNotTranslate>**Destinations**</DoNotTranslate>をクリックして、 <DoNotTranslate>**Webhook**</DoNotTranslate>を選択します。

    12. 次のフィールドに入力します。

        * <DoNotTranslate>**Webhook name**</DoNotTranslate>: Webhookを識別するための名前。

        * <DoNotTranslate>**Endpoint URL**</DoNotTranslate>: 宛先のエンドポイント URL。 これには、 `*.service-now.com/api/x_newre_core/new_relic/issue/notification`を含める必要があります (例: `https://my_instance.service-now.com/api/x_newre_core/new_relic/issue/notification` 。

        * <DoNotTranslate>**Use authorization**</DoNotTranslate>: <DoNotTranslate>**Basic authorization**</DoNotTranslate>オプションを有効にし、ユーザー名とコピーしたパスワードを入力して ServiceNow を認証します。

          <img
            width="80%;"
            title="Create a webhook destination"
            alt="Create a webhook destination"
            src={accountsWebhookDestination}
          />

    13. <DoNotTranslate>**Save destination**</DoNotTranslate>をクリックします。

    Webhook 宛先の作成方法を示す短いビデオを以下に示します。

    <Video
      type="wistia"
      id="0er0remkv0"
    />

    Webhook ペイロードに`serviceNowFields`を追加するには:

    1. <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Alerts & AI**</DoNotTranslate>に移動し、 <DoNotTranslate>**Workflows**</DoNotTranslate>をクリックします。

    2. クリック<Icon name="fe-more-horizontal"/>既存の Webhook の アイコンをクリックして<DoNotTranslate>**Edit**</DoNotTranslate>を選択するか、 <DoNotTranslate>**+ Add a new workflow**</DoNotTranslate>ボタンをクリックします。

    3. <DoNotTranslate>**Webhook**</DoNotTranslate>チャンネルをクリックします。

    4. 必要な`serviceNowFields`属性を追加して、デフォルトのペイロードを変更します。

       <img
         width="80%;"
         title="Adding the `serviceNowFields` attributes"
         alt="Adding the `serviceNowFields` attributes"
         src={accountsWebhookServiceNowFields}
       />

    5. <DoNotTranslate>**Send test notification**</DoNotTranslate>をクリックして変更を確認します。

    6. <DoNotTranslate>**Save message**</DoNotTranslate>をクリックします。

    7. <DoNotTranslate>**Activate workflow**</DoNotTranslate>をクリックします。
  </Collapser>

  <Collapser
    className="freq-link"
    id="slack"
    title="スラック"
  >
    通知メッセージを Slack チャネルに送信します。詳細については[、古い Slack Webhook 宛先から新しい Slack アプリに移行する](#migrate-slack)方法をご覧ください。

    <Video
      type="wistia"
      id="zs92j5i31v"
    />

    ### 前提条件 [#slack-prereqs]

    Slack ワークスペースには[、New Relic アプリケーション](https://newrelic.slack.com/apps/AP92KQJS3-new-relic?tab=more_info)(または、 `one.eu.newrelic`の顧客の場合は[EU アプリ](https://slack.com/apps/AS5D75HQQ-new-relic-eu?tab=more_info)) がインストールされている必要があります。アプリケーションを個別にインストールするには、ワークスペース管理者がアプリケーションを承認する必要があります。サポートが必要な場合は、 [support@newrelic.com](mailto:support@newrelic.com)までお問い合わせください。

    ### Slackの宛先を設定する [#set-slack-destination]

    1. <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Alerts & AI**</DoNotTranslate>に移動し、 <DoNotTranslate>**Destinations**</DoNotTranslate>をクリックして、 <DoNotTranslate>**Slack**</DoNotTranslate>を選択します。

    2. <DoNotTranslate>**Authenticate in one click**</DoNotTranslate>ボタンをクリックして Slack ランディング ページに移動し、OAuth2 認証プロセスを続行します。 必要なワークスペースにサインインしていない場合は、サインインするために Slack にリダイレクトされます。

       <img
         width="60%;"
         title="Create a Slack destination with a click."
         alt="A screenshot of the one-click Slack authentication."
         src={accountsSlackDestinationAuthentication}
       />

    3. ワークスペース名を追加するか、関連するワークスペースを選択して、 <DoNotTranslate>**Continue**</DoNotTranslate>をクリックします。

       <img
         width="50%;"
         title="add a Slack workspace."
         alt="add a workspace."
         src={accountsSlackSignIn}
       />

    4. 選択したワークスペースにサインインしている場合、New Relic が指定されたアクションを実行することを許可します。

       <img
         width="40%;"
         title="select a workspace and configure permissions."
         alt="A screenshot permissions configurations."
         src={accountsSlackDestinationAllowAccess}
       />

    5. <DoNotTranslate>**Allow**</DoNotTranslate>をクリックして、目的のページに戻ります。

       <img
         width="80%;"
         title="authentication completed successfully."
         alt="A screenshot completed authentication."
         src={accountsSlackAuthenticationCompleted}
       />

    ### ワークフローで Slack メッセージ テンプレートを構成する [#configure-slack-message-settings]

    1. <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Alerts & AI > Workflows**</DoNotTranslate>に移動し、既存のワークフローをクリックするか、 <DoNotTranslate>**+ Add a workflow**</DoNotTranslate>ボタンをクリックします。

    2. メッセージを送信する宛先 (ワークスペース) と Slack チャネルを選択します。必要なワークスペースに事前定義された宛先がない場合は、新しい宛先を作成できます。プライバシー上の理由から、ユーザーはプライベート チャネルを選択するために一度認証を受ける必要があります。プライベート チャネルを選択すると、ボットが自動的にチャネルに追加されます。

    3. デフォルトの通知を使用することも、カスタムの詳細で強化することもできます。[変数メニュー](/docs/alerts-applied-intelligence/notifications/message-templates/#variables-menu)から変数を選択し、[ハンドルバー構文](/docs/alerts-applied-intelligence/notifications/message-templates/#handlebars-syntax)を適用してペイロードを充実させます。

    4. <DoNotTranslate>**Send test notification**</DoNotTranslate>ボタンをクリックして、事前定義されたサンプル ペイロードを含むテスト通知をチャネルに送信します。 これにより、選択した Slack チャネルにメッセージが作成されます。

       <img
         width="80%;"
         title="Authenticate to select private channels."
         alt="Slack settings, user is not authenticated."
         src={accountsSlackMessageTemplate}
       />
  </Collapser>

  <Collapser
    className="freq-link"
    id="Splunk_on_call_templates"
    title="Splunk オンコール (VictorOps)"
  >
    ### Splunk オンコールの Webhook テンプレート

    [Webhook テンプレート](https://help.victorops.com/knowledge-base/new-relic-integration-guide/#about-splunk-on-call-and-new-relic)を使用してワークフローから Splunk On-call に通知を送信する
  </Collapser>

  <Collapser
    className="freq-link"
    id="webhook"
    title="Webhook"
  >
    ワークフローで Webhook Notifier を使用して、指定された HTTPS エンドポイントに通知メッセージを送信する必要があります。デフォルトでは、Notifier はリクエストのコンテンツ タイプが JSON であると想定し、指定されたエンドポイントに対して HTTP POST リクエストを作成します。Webhook Notifier の構成を開始すると、すぐに使用できるデフォルトの JSON ペイロード構造が提供されます。ただし、さらにカスタマイズが必要な場合は、Handlebars テンプレート構文を使用してペイロードを変更できます。これにより、ペイロード内の変数を動的に設定し、特定のニーズに合わせて調整することができます。

    ペイロードに加えて、Webhook リクエストに追加の HTTP ヘッダーを含めることもできます。これは、追加情報または認証トークンを受信側エンドポイントに渡す場合に役立ちます。Webhook を設定するためのビデオチュートリアルは次のとおりです。

    <Video
      type="wistia"
      id="feyutwgew8"
    />

    ### Webhookの宛先を設定する [#set-webhook-destination]

    Webhook 宛先を作成するには、次の手順に従います。

    1. <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Alerts & AI**</DoNotTranslate>に移動し、 <DoNotTranslate>**Destinations**</DoNotTranslate>をクリックして、 <DoNotTranslate>**Webhook**</DoNotTranslate>を選択します。

    2. 次の情報を入力します。

       * <DoNotTranslate>**Webhook name:**</DoNotTranslate>

         Webhook の参照名。

       * <DoNotTranslate>**Endpoint URL:**</DoNotTranslate>

         HTTP POST リクエストが送信されるターゲット アプリケーションのエンドポイント。

       * <DoNotTranslate>**Use authorization:**</DoNotTranslate>

         (オプション) `Basic Authentication` 、 `OAuth 2.0` 、または`Bearer Token`から選択できます。

       <img
         width="80%;"
         title="Webhook destination configuration"
         alt="Webhook destination configuration"
         src={accountsWebhookDestination}
       />

    Webhook の操作に慣れておらず、サービスを作成せずに構成をテストして Webhook ペイロードを検査したい場合は、HTTP キャッチオール サービスを使用できます。[Beeceptor](https://beeceptor.com) と [Webhook.site は](https://webhook.site) 、HTTP ペイロードを受信してイベントの JSON ペイロードを検査できる指定された URL を提供するサービスの例です。この機能は、開発プロセスを開始する前に関連情報を収集するのに役立ちます。

    このペイロードを使用する新しいサービスを構築している場合は、ローカルでテストする必要があります。実稼働サーバーにデプロイする前に、ローカル環境で Webhook をテストおよびデバッグするには、ローカル トンネルを使用することをお勧めします。これらのトンネルを使用すると、New Relic からの Webhook リクエストをローカル マシンで受信できるため、開発中にパブリックにアクセスできるサーバーが必要なくなります。Beeceptor や ngrok などのツールを使用すると、目的のアプリケーション ポートまたはアドレスを指定してリクエストをローカル サーバーに転送する一時的なパブリック URL を作成できます。これにより、ローカル開発環境で Webhook ペイロードを直接観察して分析できるため、反復とデバッグが迅速化されます。

    ### 2ウェイ・シンク [#two-way-webhook]

    ワークフローから送信された通知については、 [Nerdgraph](/docs/apis/nerdgraph/examples/nerdgraph-issues-api-via-github/#resolve-ack-issues)を使用して問題を承認またはクローズできます。Webhook を使用した双方向同期をテストする場合、Beeceptor のカスタマイズされた応答ステータスとペイロード テンプレートを使用できます。これにより、受信したイベントを確認するときに、必要な応答を草案することができます。

    ### 安全なURL [#secure-url-webhook]

    URL のパスと構造体に、サービス ID や API キーなどの機密情報を追加できます。 これらの秘密が公開されるのを避けるために、ユーザーと内部メトリックス コレクションの両方からドメインを越えた機密情報を暗号化するオプションを追加しました。

    サービスは通知を送信するときにのみ完全な URL を使用します。 ただし、安全な URL を保存したら、保存した URL を完全に上書きするように URL を手動で更新する必要があります。

    <img
      width="80%;"
      title="Webhook destination secure URL"
      alt="Webhook destination secure URL"
      src={accountsWebhookSecureUrl}
    />

    ### カスタムヘッダー認証 [#custom-headers-auth-webhook]

    一部のユーザーは、API キーや個人 ID などの機密情報をヘッダーで渡す場合があります。 機密情報の漏洩を防ぐために、値を暗号化し、ユーザーや内部ログからのデータをマスクするカスタム ヘッダーを作成できます。 それを念頭に置いて：

    * 暗号化された情報の値が変更された場合は、値を完全に削除して書き換える必要があります。
    * 宛先とチャネルの両方に同じヘッダー キーを追加した場合、宛先が優先されます。 チャネルは使用されません。

    <img
      width="80%;"
      title="Webhook destination custom headers authentication"
      alt="Webhook destination custom headers authentication"
      src={accountsWebhookCustomHeadersAuth}
    />

    ### Webhookイベントテンプレートの設定 [#configure-webhook-event-template]

    リストからWebhookの宛先を選択し、 `HTTP-POST`リクエストを設定します。

    リクエスト設定では、以下のことが求められます。

    1. テンプレートの名前を設定します。
    2. あらかじめ設定されている目的地を目的地リストから選択するか、新しい目的地を作成します。
    3. カスタムヘッダーの追加（オプション）。
    4. リクエストのペイロードを設定します。

    ### ワークフローで Webhook ペイロードをカスタマイズする [#customize-webhook-payload]

    <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Alerts & AI > Workflows**</DoNotTranslate>に移動して既存のワークフローをクリックするか、 <DoNotTranslate>**+ Add a new workflow**</DoNotTranslate>ボタンをクリックして Webhook の宛先を選択します。

    <Callout variant="important">
      リクエストの content-type はデフォルトで JSON であるため、ペイロードも JSON 形式である必要があります。形式に慣れるには[、使用例](/docs/alerts-applied-intelligence/notifications/message-templates/#usage-examples)を参照してください。
    </Callout>

    デフォルトのペイロードを使用することも、必要なデータを含めるようにカスタマイズすることもできます。 [変数メニュー](/docs/alerts-applied-intelligence/notifications/message-templates/#variables-menu)から変数を選択し、[ハンドルバー構文を](/docs/alerts-applied-intelligence/notifications/message-templates/#handlebars-syntax)適用して Webhook を強化します。 右側の<DoNotTranslate>**Preview**</DoNotTranslate>セクションには、テンプレートがレンダリングされた後に予想されるペイロードが表示されます。 ペイロードが有効な JSON を形成していない場合は、エラーが発生し、テンプレートを保存できません。

    <img
      width="80%;"
      title="An invalid Json payload."
      alt="A screenshot of an invalid Json payload."
      src={accountsWebhookPreviewError}
    />

    <Callout variant="tip">
      未定義のタイプエラーは、属性が最近インデックスに登録されていないか、存在しないことを示している可能性があります。エラーを修正するには、 `if else`ステートメントを追加してみてください。例えば、 `"closed_at": {{#if issueClosedAtUtc}} {{ json issueClosedAtUtc }} {{else}}"None"{{/if}}`
    </Callout>

    Webhook ペイロードが有効な JSON に準拠している場合は、定義した Webhook 宛先にテスト通知を送信できます。すべてが正しく接続されていることを確認するために、テスト通知を送信することをお勧めします。

    <img
      width="80%;"
      title="A test webhook notification template."
      alt="A screenshot of a test webhook notification template."
      src={accountsWebhookNotificationTemplate}
    />
  </Collapser>

  <Collapser
    className="freq-link"
    id="xMatters_templates"
    title="xMatters"
  >
    ### xMatters の Webhook テンプレート

    Webhook テンプレートを使用して、ワークフローから xMatters に通知を送信します。

    ```handlebars
    {
      {{#if nrAccountId}}"account_id": {{nrAccountId}},{{/if}}
      "account_name": {{json accumulations.tag.account.[0]}},
      {{#if accumulations.tag.action}}"action":{{json accumulations.tag.action.[0]}},{{/if}}
      "closed_violations_count": {
        "critical": {{#if closedIncidentsCount}}{{closedIncidentsCount}}{{else}}0{{/if}},
        "warning": 0,
        "total": {{#if closedIncidentsCount}}{{closedIncidentsCount}}{{else}}0{{/if}}
      },
      "condition_family_id": {{accumulations.conditionFamilyId.[0]}},
      "condition_id": {{accumulations.conditionFamilyId.[0]}},
      "condition_name": {{json accumulations.conditionName.[0]}},
      {{#if accumulations.evaluationName}}"condition_metric_name": {{json accumulations.evaluationName.[0]}},{{/if}}
      {{#if accumulations.evaluationMetricValueFunction}}"condition_metric_value_function": {{json accumulations.evaluationMetricValueFunction.[0]}},{{/if}}
      "current_state": {{#if issueClosedAt}}"closed"{{else if issueAcknowledgedAt}}"acknowledged"{{else}}"open"{{/if}},
      "details": {{json issueTitle}},
      "duration": {{#if issueDurationMs}}{{issueDurationMs}}{{else}}0{{/if}},
      "event_type": "INCIDENT",
      "incident_acknowledge_url": {{json issueAckUrl}},
      "incident_url": {{json issuePageUrl}},
      "incident_id": {{json issueId}},
      "metadata": {
        {{#if locationStatusesObject}}"location_statuses": {{locationStatusesObject}},{{/if}}
        {{#if accumulations.metadata_entity_type}}"entity.type": {{json accumulations.metadata_entity_type.[0]}},{{/if}}
        {{#if accumulations.metadata_entity_name}}"entity.name": {{json accumulations.metadata_entity_name.[0]}}{{/if}}
      },
      "open_violations_count": {
        "critical": {{#if openIncidentsCount}}{{openIncidentsCount}}{{else}}0{{/if}},
        "warning": 0,
        "total": {{#if openIncidentsCount}}{{openIncidentsCount}}{{else}}0{{/if}}
      },
      "policy_name": {{json accumulations.policyName.[0]}},
      {{#if policyUrl}}"policy_url": {{json policyUrl}},{{/if}}
      "radar_entity": {
        "accountId": {{json accumulations.tag.accountId.[0]}},
        "domain": {{json accumulations.conditionProduct.[0]}},
        "domainId": {{json issueId}},
        "entityGuid": {{json entitiesData.entities.[0].id}},
        "name": {{#if accumulations.targetName}}{{json accumulations.targetName.[0]}}{{else if entitiesData.entities}}{{json entitiesData.entities.[0].name}}{{else}}"NA"{{/if}},
        "type": {{#if entitiesData.types.[0]}}{{json entitiesData.types.[0]}}{{else}}"NA"{{/if}}
      },
      {{#if accumulations.runbookUrl}}"runbook_url": {{json accumulations.runbookUrl.[0]}},{{/if}}
      "severity": {{#eq HIGH priority}}"WARNING"{{else}}{{json priority}}{{/eq}},
      "state": {{json state}},
      "status": {{json status}},
      "targets": [
        {
          "id": {{#if entitiesData.entities.[0].id}}{{json entitiesData.entities.[0].id}}{{else if accumulations.nrqlEventType}}{{json accumulations.nrqlEventType.[0]}}{{else}}"N/A"{{/if}},
          "name": {{#if accumulations.targetName}}{{json accumulations.targetName.[0]}}{{else if entitiesData.entities}}{{json entitiesData.entities.[0].name}}{{else}}"NA"{{/if}},
          "link": {{json issuePageUrl}},
          "product": {{json accumulations.conditionProduct.[0]}},
          "type": {{#if entitiesData.types.[0]}}{{json entitiesData.types.[0]}}{{else}}"NA"{{/if}},
          "labels": {
            {{#each accumulations.rawTag}}{{#if this.[0]}}"{{@key}}":{{json this.[0]}},{{/if}}{{/each}}
            "NewRelic": "targetLabels"
          }
        }
      ],
      "timestamp": {{#if closedAt}}{{closedAt}}{{else if acknowledgedAt}}{{acknowledgedAt}}{{else}}{{createdAt}}{{/if}},
      "timestamp_utc_string": {{json issueUpdatedAt}},
      "version": "1.0",
      {{#if accumulations.conditionDescription}}"VIOLATION DESCRIPTION": {{json accumulations.conditionDescription.[0]}},{{/if}}
      {{#if violationChartUrl}}"violation_chart_url": {{json violationChartUrl}},{{/if}}
      "violation_callback_url": {{json issuePageUrl}}
    }
    ```
  </Collapser>
</CollapserGroup>

## 従来の Slack の宛先を新しい Slack の宛先に移行する [#migrate-slack]

従来の Slack の宛先を新しい Slack の宛先に移行するには、次の手順に従います。

1. 新しい Slack の宛先を設定します。

2. 従来の Slack 宛先に送信するワークフローごとに、次の操作を実行します。

   * 従来の通知とともに送信された Slack チャネルを見つけて保存します。

   <img
     width="80%;"
     title="Migrate Slack, create a new workflow."
     alt="Migrate Slack, create a new workflow."
     src={accountsMigrateSlackNewWorkflow}
   />

   * 通知をテストして、機能することを確認します。

   * 既存の従来の Slack 通知機能を削除します。

     <img
       width="80%;"
       title="Migrate Slack, remove the existing legacy slack notifier."
       alt="Migrate Slack, remove the existing legacy slack notifier."
       src={accountsMigrateSlackRemoveLegacy}
     />

   * <DoNotTranslate>**Test workflow**</DoNotTranslate>をクリックして、フィルタに一致する実際の問題を確認します (存在する場合)。

   * ワークフローを保存します。

## APIオプション [#api]

NerdGraph APIを使用して、[宛先](/docs/apis/nerdgraph/examples/nerdgraph-api-notifications-destinations)と[通知チャネル](/docs/apis/nerdgraph/examples/nerdgraph-api-notifications-channels)を表示および構成することもできます。