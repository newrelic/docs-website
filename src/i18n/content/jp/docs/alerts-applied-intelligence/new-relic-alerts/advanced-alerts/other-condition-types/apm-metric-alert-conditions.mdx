---
title: APMおよびブラウザ監視メトリクスのアラート条件
tags:
  - Alerts and applied intelligence
  - Alerts
  - Alert conditions
metaDescription: How to create NRQL alert conditions for APM and browser monitoring metrics.
translationType: human
---

import accountsTopTwenty from 'images/accounts_screenshot-full_top-twenty.webp'

import accountsExternalServiceGraph from 'images/accounts_screenshot-full_external-service-graph.webp'

import accountsResponseTimeQuery from 'images/accounts_screenshot-full_response-time-query.webp'

import accountsExternalCallsQuery from 'images/accounts_screenshot-full_external-calls-query.webp'

import accountsNrqlConditionBuilderModal from 'images/accounts_screenshot-full_nrql-condition-builder-modal.webp'

New Relic <InlinePopover type="apm"/>とブラウザ監視メトリクスのアラート条件はさまざまな方法で作成できますが、NRQLを使用することをお勧めします。NRQLアラート条件を使用すると、追加の制御、検出時間の改善、すべてのデータタイプにわたる一貫性が得られます。

2021年に、New Relic全体でチャートとクエリからNRQLアラート条件をより簡単に作成できるようになりました。NRQLを使用して<InlinePopover type="apm"/>外部サービス条件を作成する方法例については、下を参照してください。

APMとブラウザ監視メトリクスのアラート条件の設定は2つのプロセスからなります。最初に、エンティティを識別してから、NRQL条件を作成する必要があります。

## APM条件の例

ここでは、APMがモニタリングするアプリの条件の設定方法を説明します。

### 最初に：エンティティの識別 [#identity-entity]

まず、アラート条件を設定するエンティティを特定します。

1. **[one.newrelic.com](https://one.newrelic.com/all-capabilities) > APM（ツールバー内）**の順に移動します。

2. アラートを作成するサービスを探します。

3. サービスをクリックします。

4. 左のナビゲーションペインで、\[**External services（外部サービス）**]をクリックします。

5. \[**}Top 20 external services（トップ20外部サービス）**]で、目的のサービスを見つけてクリックします。

   <img
     title="top-twenty.png"
     alt="Screen capture showing the list of the top 20 external services to choose from."
     src={accountsTopTwenty}
   />

6. ページの右側には、**Response time（レスポンスタイム）**]と\[**External calls per minute（毎分の外部呼び出し数）**（スループット）のグラフがあります。この2つのオプションからアラートを作成するオプションを選択します。

7. 選択するグラフの右上隅で、3つのドットをクリックし、\[**Create alert condition（アラート条件の作成）**]を選択します。

   <Callout variant="tip">
     3つのドットが表示されない場合は、ページの最上部にある\[**Show new view（新しいビューを表示）**]オプションが有効になっていることを確認します。
   </Callout>

   <img
     title="external_service_graph.png"
     alt="Screenshot showing the menu options."
     src={accountsExternalServiceGraph}
   />

8. これによってNRQLアラート条件ビルダでモードが起動され、クエリが事前入力されます。

   * レスポンスタイムを選択すると、クエリは次のようになります。

     <img
       title="response_time_query.png"
       alt="Example showing a query for response time."
       src={accountsResponseTimeQuery}
     />

   * 毎分の外部呼び出し数を選択すると、クエリは次のようになります。

     <img
       title="external-calls-query.png"
       alt="Example show an external calls query."
       src={accountsExternalCallsQuery}
     />

条件ビルダーにクエリが事前入力されていると、続いてNRQLアラート条件を作成できます。

### 次に：NRQLアラート条件の作成 [#create-condition]

モーダルで、以下を完了させます。

1. 条件名を入力します。

2. **信号の定義**で、`LIMIT`、`SINCE...AGO`および`TIMESERIES`句が削除され、NRQLクエリ構文が有効であることを観察します。

   <Callout variant="tip">
     結果が返されない場合は、モーダルの左上隅の現在のアカウントを見て、正しいアカウントであることを確認します。正しくない場合は、モーダルをクローズし、ページ左上隅のアカウントピッカーで正しいアカウントが選択されていることをダブルチェックします。
   </Callout>

   <img
     title="nrql_condition_builder_modal.png"
     alt="Screenshot showing you the NRQL alert condition builder pre-populated with your query."
     src={accountsNrqlConditionBuilderModal}
   />

3. 残りのフィールドに入力し、フォームの下部近くでポリシーを選択または作成して、条件を保存します。

オプション：[APMメトリックタイムスライスデータをNRQLでクエリする方法](/docs/query-your-data/nrql-new-relic-query-language/nrql-query-tutorials/query-apm-metric-timeslice-data-nrql#timeslice-conversion)を参照してください。