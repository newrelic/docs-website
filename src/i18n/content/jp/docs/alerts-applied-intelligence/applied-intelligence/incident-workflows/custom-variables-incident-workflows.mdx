---
title: ワークフロー変数
tags:
  - Alerts and applied intelligence
  - Applied intelligence
  - workflows
  - Enrichments
  - Issues
metaDescription: 'For New Relic applied intelligence, an explanations of the variables used for workflows.'
translationType: machine
---

import alertsWorkflowVariables from 'images/alerts_screenshot-crop_workflow-variables.webp'

New Relic の応用インテリジェンス [ワークフロー](/docs/alerts-applied-intelligence/applied-intelligence/incident-workflows/incident-workflows)に使用される変数の説明。

<img
  title="Applied intelligence workflow variables"
  alt="Applied intelligence workflow variables"
  src={alertsWorkflowVariables}
/>

<figcaption>
  ワークフローを作成するとき、変数を使用して、a) どのタイプの問題が通知を生成するか、b) 通知ペイロードの内容に何を含めるかを制御できます。このスクリーンショットは、通知ペイロード セクションを示しています。
</figcaption>

## 変数 [#variables]

ワークフロー変数とその説明は次のとおりです。

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        キー (グループ化に使用される最初の単語)
      </th>

      <th>
        表示名 (グループ化に使用される最初の単語)
      </th>

      <th>
        説明
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        accumulations.conditionDescription
      </td>

      <td>
        conditionDescription
      </td>

      <td>
        条件のカスタム違反の説明。
      </td>
    </tr>

    <tr>
      <td>
        accumulations.conditionFamilyId
      </td>

      <td>
        conditionFamilyId
      </td>

      <td>
        違反を生成したインシデント検出条件の ID。
      </td>
    </tr>

    <tr>
      <td>
        accumulations.conditionName
      </td>

      <td>
        アラート条件名
      </td>

      <td>
        New Relic が条件に違反しました。
      </td>
    </tr>

    <tr>
      <td>
        積立状態商品
      </td>

      <td>
        アラート状態の製品
      </td>

      <td>
        New Relic の状態タイプ。
      </td>
    </tr>

    <tr>
      <td>
        蓄積.deepLinkUrl
      </td>

      <td>
        違反コールバック URL
      </td>

      <td>
        関連する違反コールバックへの直接リンク。
      </td>
    </tr>

    <tr>
      <td>
        Accumulations.evaluation.metricValueFunction
      </td>

      <td>
        カスタム指標値関数
      </td>

      <td>
        カスタムメトリック値関数。
      </td>
    </tr>

    <tr>
      <td>
        累積.評価.名前
      </td>

      <td>
        <InlinePopover type="apm"/>条件メトリック名
      </td>

      <td>
        <InlinePopover type="apm"/>条件メトリック名
      </td>
    </tr>

    <tr>
      <td>
        蓄積.nrqlQuery
      </td>

      <td>
        NRQLクエリ
      </td>

      <td>
        条件のNRQLクエリ。
      </td>
    </tr>

    <tr>
      <td>
        蓄積.起源
      </td>

      <td>
        発行元
      </td>

      <td>
        インシデントを作成した New Relic またはサードパーティのソース。
      </td>
    </tr>

    <tr>
      <td>
        accumulations.policyName
      </td>

      <td>
        アラートポリシー名
      </td>

      <td>
        違反を生成したインシデント検出ポリシー名。
      </td>
    </tr>

    <tr>
      <td>
        蓄積.runbookUrl
      </td>

      <td>
        ランブックの URL
      </td>

      <td>
        Runbook URL のリスト。
      </td>
    </tr>

    <tr>
      <td>
        蓄積.ソース
      </td>

      <td>
        発行元
      </td>

      <td>
        インシデントを報告するシステム。
      </td>
    </tr>

    <tr>
      <td>
        蓄積.タグ.アカウント
      </td>

      <td>
        New Relic アカウント
      </td>

      <td>
        New Relic アカウント。
      </td>
    </tr>

    <tr>
      <td>
        Accumulations.tag.affectedService
      </td>

      <td>
        影響を受けるサービス
      </td>

      <td>
        影響を受けるサービスのリスト。
      </td>
    </tr>

    <tr>
      <td>
        累積.タグ.割り当てグループ
      </td>

      <td>
        担当グループ
      </td>

      <td>
        割り当てグループのリスト。
      </td>
    </tr>

    <tr>
      <td>
        蓄積.タグ.原因サービス
      </td>

      <td>
        コーズサービス
      </td>

      <td>
        原因サービスのリスト。
      </td>
    </tr>

    <tr>
      <td>
        承認者
      </td>

      <td>
        承認者
      </td>

      <td>
        問題を認識したユーザー。
      </td>
    </tr>

    <tr>
      <td>
        activatedAt
      </td>

      <td>
        問題が発生した時刻
      </td>

      <td>
        問題のアクティブ化のタイムスタンプ。
      </td>
    </tr>

    <tr>
      <td>
        annotations.description
      </td>

      <td>
        問題の説明
      </td>

      <td>
        すべてのインシデントの説明のリスト。
      </td>
    </tr>

    <tr>
      <td>
        アノテーション.タイトル
      </td>

      <td>
        問題のタイトル
      </td>

      <td>
        すべてのインシデントのタイトルのリスト。
      </td>
    </tr>

    <tr>
      <td>
        注釈.ワイルドカード
      </td>

      <td>
        アラート ファセット
      </td>

      <td>
        アラート ファセット。
      </td>
    </tr>

    <tr>
      <td>
        閉鎖者
      </td>

      <td>
        閉店日
      </td>

      <td>
        問題をクローズしたユーザーの ID。
      </td>
    </tr>

    <tr>
      <td>
        closedAt
      </td>

      <td>
        課題の終了日
      </td>

      <td>
        問題が終了したときのタイムスタンプ。問題がクローズされていない場合は null。
      </td>
    </tr>

    <tr>
      <td>
        閉鎖インシデント数
      </td>

      <td>
        クローズされたインシデント数
      </td>

      <td>
        この問題に関してクローズされたインシデントの合計数。
      </td>
    </tr>

    <tr>
      <td>
        createdAt
      </td>

      <td>
        課題の作成日
      </td>

      <td>
        問題作成時のタイムスタンプ。
      </td>
    </tr>

    <tr>
      <td>
        dataMLModules.components
      </td>

      <td>
        機械学習コンポーネント
      </td>

      <td>
        New Relic の応用インテリジェンス機械学習コンポーネントのリスト。
      </td>
    </tr>

    <tr>
      <td>
        dataMLModules.goldenSignals
      </td>

      <td>
        機械学習のゴールデンシグナル
      </td>

      <td>
        New Relic の応用インテリジェンス機械学習ゴールデン シグナルのリスト。
      </td>
    </tr>

    <tr>
      <td>
        dataMLModules.suggestedResponders
      </td>

      <td>
        機械学習が提案する応答者
      </td>

      <td>
        (非推奨) New Relic 応用インテリジェンス機械学習が提案するレスポンダーのリスト。
      </td>
    </tr>

    <tr>
      <td>
        entitiesData.Entities
      </td>

      <td>
        影響を受けるエンティティのデータ
      </td>

      <td>
        影響を受けるエンティティの名前、ID、タイプ、種類を説明するオブジェクトのリスト。
      </td>
    </tr>

    <tr>
      <td>
        entitiesData.ids
      </td>

      <td>
        影響を受けるエンティティ ID
      </td>

      <td>
        影響を受けるすべてのエンティティ ID のセット。
      </td>
    </tr>

    <tr>
      <td>
        エンティティデータの種類
      </td>

      <td>
        影響を受けるエンティティの種類
      </td>

      <td>
        影響を受けるすべてのエンティティの種類のセット。
      </td>
    </tr>

    <tr>
      <td>
        entitiesData.names
      </td>

      <td>
        影響を受けるエンティティ名
      </td>

      <td>
        影響を受けるすべてのエンティティ名のセット。
      </td>
    </tr>

    <tr>
      <td>
        entitiesData.types
      </td>

      <td>
        影響を受けるエンティティのタイプ
      </td>

      <td>
        影響を受けるすべてのエンティティ タイプのセット。
      </td>
    </tr>

    <tr>
      <td>
        影響を受けたエンティティ数
      </td>

      <td>
        影響を受けるエンティティの数
      </td>

      <td>
        この問題の影響を受けるエンティティの数。
      </td>
    </tr>

    <tr>
      <td>
        incidentIds
      </td>

      <td>
        インシデントID
      </td>

      <td>
        問題のすべての集約インシデントのリスト。
      </td>
    </tr>

    <tr>
      <td>
        isCorrelated
      </td>

      <td>
        問題は相関しています
      </td>

      <td>
        問題に相関がある場合 (true、false)。
      </td>
    </tr>

    <tr>
      <td>
        認められている
      </td>

      <td>
        問題は認識されています
      </td>

      <td>
        問題が認識された場合 (true、false)。
      </td>
    </tr>

    <tr>
      <td>
        issueAckUrl
      </td>

      <td>
        発行確認URL
      </td>

      <td>
        問題を確認するための直接リンク。
      </td>
    </tr>

    <tr>
      <td>
        issueCloseUrl
      </td>

      <td>
        クローズURLを発行する
      </td>

      <td>
        問題を解決するための直接リンク。
      </td>
    </tr>

    <tr>
      <td>
        issuePageUrl
      </td>

      <td>
        発行ページのURL
      </td>

      <td>
        関連する問題ページへの直接リンク。
      </td>
    </tr>

    <tr>
      <td>
        issueActivatedAtUtc
      </td>

      <td>
        Issue ActivatedAt UTC string
      </td>

      <td>
        UTC での発行アクティベーションの文字列形式。
      </td>
    </tr>

    <tr>
      <td>
        issueClosedAtUtc
      </td>

      <td>
        課題の終了時刻（UTC） string
      </td>

      <td>
        UTC での問題終了の文字列形式。
      </td>
    </tr>

    <tr>
      <td>
        issueCreatedAtUtc
      </td>

      <td>
        Issue CreatedAt UTC string
      </td>

      <td>
        UTC での問題作成の文字列形式。
      </td>
    </tr>

    <tr>
      <td>
        問題確認済み
      </td>

      <td>
        AcknowledgedAt 文字列を発行する
      </td>

      <td>
        UTC で確認された問題の文字列形式。
      </td>
    </tr>

    <tr>
      <td>
        発行終了時刻
      </td>

      <td>
        ClosedAt 文字列を発行する
      </td>

      <td>
        UTC での問題終了の文字列形式。
      </td>
    </tr>

    <tr>
      <td>
        issueDurationMs
      </td>

      <td>
        発行期間 (ミリ秒)
      </td>

      <td>
        問題が開始されてからのミリ秒数。
      </td>
    </tr>

    <tr>
      <td>
        issueDurationText
      </td>

      <td>
        テキストの問題の期間
      </td>

      <td>
        問題の期間を人間にわかりやすく表現したもの。
      </td>
    </tr>

    <tr>
      <td>
        issueId
      </td>

      <td>
        課題ID
      </td>

      <td>
        問題の一意の ID。
      </td>
    </tr>

    <tr>
      <td>
        問題のタイトル
      </td>

      <td>
        問題のタイトル
      </td>

      <td>
        通常、最初の事件のタイトル。
      </td>
    </tr>

    <tr>
      <td>
        issueUpdatedAt
      </td>

      <td>
        UpdatedAt UTC 文字列を発行します
      </td>

      <td>
        問題更新のタイムスタンプ (UTC)。
      </td>
    </tr>

    <tr>
      <td>
        labels.accountIds
      </td>

      <td>
        環境に関連付けられたアカウント ID を発行する
      </td>

      <td>
        New Relic に適用されたインテリジェンス環境に関連付けられたアカウント ID。
      </td>
    </tr>

    <tr>
      <td>
        labels.aggregationKeys
      </td>

      <td>
        アラート集約キーにラベルを付ける
      </td>

      <td>
        New Relic インシデント検出の元のインシデント ID。
      </td>
    </tr>

    <tr>
      <td>
        labels.originalAccountIds
      </td>

      <td>
        アカウントIDにラベルを付ける
      </td>

      <td>
        インシデント検出ポリシーのアカウント ID。
      </td>
    </tr>

    <tr>
      <td>
        labels.policyIds
      </td>

      <td>
        アラートポリシーIDにラベルを付ける
      </td>

      <td>
        違反を生成したインシデント検出ポリシー ID。
      </td>
    </tr>

    <tr>
      <td>
        ラベル.targetId
      </td>

      <td>
        ターゲット ID
      </td>

      <td>
        ターゲットID。
      </td>
    </tr>

    <tr>
      <td>
        ミュート状態
      </td>

      <td>
        ミューティング状態を発行する
      </td>

      <td>
        計算された問題のミュート状態 (MUTED、NOT_MUTED)。
      </td>
    </tr>

    <tr>
      <td>
        nrAccountId
      </td>

      <td>
        アカウントID
      </td>

      <td>
        アカウントID。
      </td>
    </tr>

    <tr>
      <td>
        openIncidentsCount
      </td>

      <td>
        未解決のインシデント数
      </td>

      <td>
        この問題に関する未解決のインシデントの合計数。
      </td>
    </tr>

    <tr>
      <td>
        所有者 （オーナー）
      </td>

      <td>
        オーナー
      </td>

      <td>
        問題を認めた人。
      </td>
    </tr>

    <tr>
      <td>
        ポリシーの URL
      </td>

      <td>
        アラートポリシーのURL
      </td>

      <td>
        アラート ポリシーの URL。
      </td>
    </tr>

    <tr>
      <td>
        プライオリティ
      </td>

      <td>
        発行の優先度
      </td>

      <td>
        問題の優先度レベル (CRITICAL、HIGH、MEDIUM、LOW)。
      </td>
    </tr>

    <tr>
      <td>
        プライオリティーテキスト
      </td>

      <td>
        発行優先テキスト
      </td>

      <td>
        発行の優先度を小文字で表します (Critical、High、Medium、Low)。
      </td>
    </tr>

    <tr>
      <td>
        実際の問題数
      </td>

      <td>
        発行数
      </td>

      <td>
        発行数。
      </td>
    </tr>

    <tr>
      <td>
        ステート
      </td>

      <td>
        問題の状態
      </td>

      <td>
        問題のライフサイクル状態 (CREATED、ACTIVATED、CLOSED)。
      </td>
    </tr>

    <tr>
      <td>
        ステートテキスト
      </td>

      <td>
        発行状態のテキスト
      </td>

      <td>
        問題のライフサイクル状態を小文字で示します (アクティブ (オープン)、クローズ)。
      </td>
    </tr>

    <tr>
      <td>
        ステータス
      </td>

      <td>
        発行相関ステータス
      </td>

      <td>
        問題の相関ステータス。
      </td>
    </tr>

    <tr>
      <td>
        トータルインシデント
      </td>

      <td>
        インシデント数
      </td>

      <td>
        問題内で集計または関連付けられているインシデントの数。
      </td>
    </tr>

    <tr>
      <td>
        triggeredAt
      </td>

      <td>
        発生した問題
      </td>

      <td>
        トリガーされた問題通知のタイムスタンプ。
      </td>
    </tr>

    <tr>
      <td>
        triggerEvent
      </td>

      <td>
        発行通知トリガーイベント
      </td>

      <td>
        通知トリガー イベント (STATE_CHANGE、INCIDENT_ADDED、INCIDENT_CLOSED、CLOSE_INACTIVE、CLOSED_TTL、USER_ACTION、PRIORITY_CHANGED、MERGE_REQUEST)。
      </td>
    </tr>

    <tr>
      <td>
        updatedAt
      </td>

      <td>
        問題の更新日時
      </td>

      <td>
        最後に更新された問題のタイムスタンプ。
      </td>
    </tr>

    <tr>
      <td>
        違反グラフの URL
      </td>

      <td>
        違反チャートのURL
      </td>

      <td>
        違反チャートの画像へのリンク。
      </td>
    </tr>

    <tr>
      <td>
        ワークフロー名
      </td>

      <td>
        ワークフロー名
      </td>

      <td>
        トリガーされたワークフローの名前。
      </td>
    </tr>
  </tbody>
</table>

## ワークフローのデータエンリッチメントの例 [#enrichment-examples]

条件に違反したエンティティに関する情報を取得するには、クエリの`where`ステートメントの一部としてカスタム変数を使用できます。たとえば、EC2インスタンスの状態を取得するには、次を使用します。

```
SELECT latest(ec2State) FROM ComputeSample where provider = 'Ec2Instance' and entityName in {{entitiesData.names}}
```

クエリは単一のフィールドのみを使用するため、このクエリは単一の値（たとえば、 `stopped` ）を返します。変数`entitiesData.names`は、エンティティの識別子のリストです。他のエンティティプロパティも同じように使用できます。

カスタム変数を使用することで、ワークフローのデータクエリをさまざまな方法で強化することができます。

<CollapserGroup>
  <Collapser
    id="application-drop"
    title="アプリケーションのトラフィックが低下したときのクエリ"
  >
    アプリケーションへのトラフィックが低下したときに知りたいことがあります。&#x7B;&#x7B;entitiesData.names}} 変数を、アプリケーションの名前の代わりに使用することができます。

    ```
    SELECT count(*) FROM Transaction WHERE appName in {{entitiesData.names}} since 10 minutes ago
    ```
  </Collapser>

  <Collapser
    id="non-web-transactions-time"
    title="非ウェブ取引時間"
  >
    影響を受ける企業がリクエスト/トランザクションの処理に費やす平均時間(プロセスタイプ別に分類)

    ```
    SELECT average(apm.service.overview.other) * 1000 FROM Metric WHERE appName IN {{entitiesData.names}} FACET `segmentName` TIMESERIES
    ```
  </Collapser>

  <Collapser
    id="throughput"
    title="スループット"
  >
    影響を受けるエニティーが処理する1分あたりのリクエスト数

    ```
    SELECT rate(count(apm.service.transaction.duration), 1 minute) as 'Non-web throughput' FROM Metric WHERE (appName IN {{entitiesData.names}}) AND (transactionType = 'Other') TIMESERIES
    ```
  </Collapser>

  <Collapser
    id="error-rate"
    title="エラー率"
  >
    影響を受けた企業が処理した総リクエスト数に対するエラーの割合

    ```
    SELECT count(apm.service.error.count) / count(apm.service.transaction.duration) as 'Non-web errors' FROM Metric WHERE (appName IN {{entitiesData.names}}) AND (transactionType = 'Other') TIMESERIES
    ```
  </Collapser>

  <Collapser
    id="transaction-failures"
    title="トランザクションに失敗した場合の問い合わせ"
  >
    アプリケーション トランザクションがいつ失敗したかを知りたい場合があります。このクエリは、&#x7B;&#x7B;entitiesData.names}} によってフィルター処理された最新の HTTP ステータス コード レスポンスを示します。アラート ポリシーのしきい値に違反した変数。

    ```
    From Transaction select latest(http.statusCode), average(duration) where appName in {{entitiesData.names}}
    ```
  </Collapser>

  <Collapser
    id="kubernetes-consumption"
    title="Query for Kubernetesの消費の概要"
  >
    このようなクエリを使用して、Kubernetesポッド内のエンティティの数とそのインジェスト時間を取得します。どのエンティティの取り込み時間が大きいかを特定することで、その問題への対処を開始し、潜在的な改善策を見つけることができます。

    ```
    SELECT uniqueCount(displayName), sum(nr.ingestTimeMs) from K8sServiceSample where entityName = {{entitiesData.names}} since 1 hour ago.
    ```
  </Collapser>
</CollapserGroup>