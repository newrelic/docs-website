---
title: ワークフローの変数
tags:
  - Alerts and applied intelligence
  - Applied intelligence
  - workflows
  - Enrichments
  - Issues
metaDescription: 'For applied intelligence, an explanations of the variables used for workflows.'
translationType: machine
---

[ワークフローに使用される変数の説明](/docs/alerts-applied-intelligence/applied-intelligence/incident-workflows/incident-workflows).

## 変数 [#variables]

issue entityの変数を使用して、送信したいissueの種類と通知に表示されるメッセージ・テンプレートを選択します。

ここに、変数の包括的なリストがあります。

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        キー（最初の単語がグループ化に使われます）
      </th>

      <th>
        表示名（最初の単語はグループ化に使用されます）
      </th>

      <th>
        説明
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        accumulations.conditionDescription
      </td>

      <td>
        conditionDescription
      </td>

      <td>
        条件のカスタム違反の説明
      </td>
    </tr>

    <tr>
      <td>
        accumulations.conditionFamilyId
      </td>

      <td>
        conditionFamilyId
      </td>

      <td>
        違反を発生させたインシデント検出条件のID
      </td>
    </tr>

    <tr>
      <td>
        accumulations.conditionName
      </td>

      <td>
        アラートコンディション名
      </td>

      <td>
        New Relicの違反状態
      </td>
    </tr>

    <tr>
      <td>
        アキュムレーション.オリジン
      </td>

      <td>
        発行元
      </td>

      <td>
        問題を発生させたNew Relicまたはサードパーティのソース
      </td>
    </tr>

    <tr>
      <td>
        accumulations.policyName
      </td>

      <td>
        アラートポリシー名
      </td>

      <td>
        違反が発生したインシデント検知ポリシー名
      </td>
    </tr>

    <tr>
      <td>
        アキュムレーション.ソース
      </td>

      <td>
        発行元
      </td>

      <td>
        ソースから報告されたターゲットシステム
      </td>
    </tr>

    <tr>
      <td>
        activatedAt
      </td>

      <td>
        イシュー・アクティベート・アット
      </td>

      <td>
        課題起動のタイムスタンプ
      </td>
    </tr>

    <tr>
      <td>
        annotations.description
      </td>

      <td>
        課題内容
      </td>

      <td>
        全インシデント記述のリスト
      </td>
    </tr>

    <tr>
      <td>
        アノテーション.タイトル
      </td>

      <td>
        課題名
      </td>

      <td>
        全インシデントのタイトル一覧
      </td>
    </tr>

    <tr>
      <td>
        closedAt
      </td>

      <td>
        課題の終了日
      </td>

      <td>
        課題のクローズのタイムスタンプ、課題がクローズされていない場合はnull
      </td>
    </tr>

    <tr>
      <td>
        createdAt
      </td>

      <td>
        課題の作成日
      </td>

      <td>
        課題作成時のタイムスタンプ
      </td>
    </tr>

    <tr>
      <td>
        entitiesData.Entities
      </td>

      <td>
        影響を受けた事業者のデータ
      </td>

      <td>
        衝撃を受けたエンティティの名前、ID、タイプ、種類を記述したオブジェクトのリスト
      </td>
    </tr>

    <tr>
      <td>
        entitiesData.ids
      </td>

      <td>
        影響を受けた事業者のID
      </td>

      <td>
        影響を受けたすべてのエンティティIDのセット
      </td>
    </tr>

    <tr>
      <td>
        エンティティデータの種類
      </td>

      <td>
        影響を受けた事業者の種類
      </td>

      <td>
        影響を受けるすべてのエンティティの種類のセット
      </td>
    </tr>

    <tr>
      <td>
        entitiesData.names
      </td>

      <td>
        影響を受ける組織名
      </td>

      <td>
        影響を受けるすべてのエンティティ名のセット
      </td>
    </tr>

    <tr>
      <td>
        entitiesData.types
      </td>

      <td>
        影響を受ける事業者の種類
      </td>

      <td>
        影響を受けるすべてのエンティティタイプのセット
      </td>
    </tr>

    <tr>
      <td>
        incidentIds
      </td>

      <td>
        インシデントID
      </td>

      <td>
        問題のすべての集約されたインシデントのリスト
      </td>
    </tr>

    <tr>
      <td>
        isCorrelated
      </td>

      <td>
        問題は相関している
      </td>

      <td>
        イシューは相関しているか
      </td>
    </tr>

    <tr>
      <td>
        issuePageUrl
      </td>

      <td>
        課題ページのURL
      </td>

      <td>
        関連する課題のページへの直接リンク
      </td>
    </tr>

    <tr>
      <td>
        issueActivatedAtUtc
      </td>

      <td>
        Issue ActivatedAt UTC string
      </td>

      <td>
        課題の有効化（UTC）の文字列形式
      </td>
    </tr>

    <tr>
      <td>
        issueClosedAtUtc
      </td>

      <td>
        課題の終了時刻（UTC） string
      </td>

      <td>
        UTCにおけるissue closureの文字列フォーマット
      </td>
    </tr>

    <tr>
      <td>
        issueCreatedAtUtc
      </td>

      <td>
        Issue CreatedAt UTC string
      </td>

      <td>
        UTCでの課題作成の文字列形式
      </td>
    </tr>

    <tr>
      <td>
        issueId
      </td>

      <td>
        課題ID
      </td>

      <td>
        課題の一意のID
      </td>
    </tr>

    <tr>
      <td>
        labels.accountIds
      </td>

      <td>
        課題環境 関連するアカウントID
      </td>

      <td>
        アカウントIDに関連付けられた新しいRelicアプライドインテリジェンス環境
      </td>
    </tr>

    <tr>
      <td>
        labels.aggregationKeys
      </td>

      <td>
        ラベル アラート アグリゲーションキー
      </td>

      <td>
        New Relic Incident detection オリジナルのインシデントID
      </td>
    </tr>

    <tr>
      <td>
        labels.originalAccountIds
      </td>

      <td>
        ラベル アカウントID
      </td>

      <td>
        インシデント検知ポリシーのアカウントID
      </td>
    </tr>

    <tr>
      <td>
        labels.policyIds
      </td>

      <td>
        ラベル・アラート・ポリシーID
      </td>

      <td>
        違反が発生したインシデント検出ポリシーID
      </td>
    </tr>

    <tr>
      <td>
        プライオリティ
      </td>

      <td>
        課題の優先順位
      </td>

      <td>
        課題の優先度
      </td>
    </tr>

    <tr>
      <td>
        プライオリティーテキスト
      </td>

      <td>
        課題 優先度 テキスト
      </td>

      <td>
        課題の優先順位を小文字で表示
      </td>
    </tr>

    <tr>
      <td>
        ステート
      </td>

      <td>
        課題 州
      </td>

      <td>
        課題の現状
      </td>
    </tr>

    <tr>
      <td>
        ステートテキスト
      </td>

      <td>
        発行状態のテキスト
      </td>

      <td>
        課題の状態を小文字で表示
      </td>
    </tr>

    <tr>
      <td>
        ステータス
      </td>

      <td>
        課題状況
      </td>

      <td>
        課題の現状
      </td>
    </tr>

    <tr>
      <td>
        トータルインシデント
      </td>

      <td>
        インシデント数
      </td>

      <td>
        イシューの中で集約または相関しているインシデントの数
      </td>
    </tr>

    <tr>
      <td>
        triggeredAt
      </td>

      <td>
        イシュー・トリガー・アット
      </td>

      <td>
        通知された課題のタイムスタンプ
      </td>
    </tr>

    <tr>
      <td>
        triggerEvent
      </td>

      <td>
        課題通知トリガーイベント
      </td>

      <td>
        通知トリガーイベント
      </td>
    </tr>

    <tr>
      <td>
        updatedAt
      </td>

      <td>
        問題の更新日
      </td>

      <td>
        課題の最終更新日のタイムスタンプ
      </td>
    </tr>

    <tr>
      <td>
        ワークフロー名
      </td>

      <td>
        ワークフロー名
      </td>

      <td>
        トリガーされたワークフローの名前
      </td>
    </tr>
  </tbody>
</table>

## ワークフローのデータエンリッチメントの例 [#enrichment-examples]

条件に違反したエンティティに関する情報を取得するには、クエリの`where`ステートメントの一部としてカスタム変数を使用できます。たとえば、EC2インスタンスの状態を取得するには、次を使用します。

```
SELECT latest(ec2State) FROM ComputeSample where provider = 'Ec2Instance' and entityName in <var>{{entitiesData.names}}</var>
```

クエリは単一のフィールドのみを使用するため、このクエリは単一の値（たとえば、 `stopped` ）を返します。変数`entitiesData.names`は、エンティティの識別子のリストです。他のエンティティプロパティも同じように使用できます。

カスタム変数を使用することで、ワークフローのデータクエリをさまざまな方法で強化することができます。

<CollapserGroup>
  <Collapser
    id="application-drop"
    title="アプリケーションのトラフィックが低下したときのクエリ"
  >
    アプリケーションへのトラフィックが低下したときに知りたいことがあります。&#x7B;&#x7B;entitiesData.names}} 変数を、アプリケーションの名前の代わりに使用することができます。

    ```
    SELECT count(*) FROM Transaction WHERE appName in {{entitiesData.names}} since 10 minutes ago
    ```
  </Collapser>

  <Collapser
    id="non-web-transactions-time"
    title="非ウェブ取引時間"
  >
    影響を受ける企業がリクエスト/トランザクションの処理に費やす平均時間(プロセスタイプ別に分類)

    ```
    SELECT average(apm.service.overview.other) * 1000 FROM Metric WHERE appName IN {{entitiesData.names}} FACET `segmentName` TIMESERIES
    ```
  </Collapser>

  <Collapser
    id="throughput"
    title="スループット"
  >
    影響を受けるエニティーが処理する1分あたりのリクエスト数

    ```
    SELECT rate(count(apm.service.transaction.duration), 1 minute) as 'Non-web throughput' FROM Metric WHERE (appName IN {{entitiesData.names}}) AND (transactionType = 'Other') TIMESERIES
    ```
  </Collapser>

  <Collapser
    id="error-rate"
    title="エラー率"
  >
    影響を受けた企業が処理した総リクエスト数に対するエラーの割合

    ```
    SELECT count(apm.service.error.count) / count(apm.service.transaction.duration) as 'Non-web errors' FROM Metric WHERE (appName IN {{entitiesData.names}}) AND (transactionType = 'Other') TIMESERIES
    ```
  </Collapser>

  <Collapser
    id="transaction-failures"
    title="トランザクションに失敗した場合の問い合わせ"
  >
    アプリケーションのトランザクションがいつ失敗したのかを知りたい場合があります。このクエリは、 <var>&#x7B;&#x7B;entitiesData.names}}</var> 変数でフィルタリングされた最新のHTTPステータスコードレスポンスのうち、アラートポリシーの閾値に違反したものを表示します。

    ```
    From Transaction select latest(http.statusCode), average(duration) where appName in {{entitiesData.names}}
    ```
  </Collapser>

  <Collapser
    id="kubernetes-consumption"
    title="Query for Kubernetesの消費の概要"
  >
    このようなクエリを使用して、Kubernetesポッド内のエンティティの数とそのインジェスト時間を取得します。どのエンティティの取り込み時間が大きいかを特定することで、その問題への対処を開始し、潜在的な改善策を見つけることができます。

    ```
    SELECT uniqueCount(displayName), sum(nr.ingestTimeMs) from K8sServiceSample where entityName = {{entitiesData.names}} since 1 hour ago.
    ```
  </Collapser>
</CollapserGroup>