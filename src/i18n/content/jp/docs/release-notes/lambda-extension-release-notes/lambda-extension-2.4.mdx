---
subject: Lambda-Extension
releaseDate: '2025-12-02'
version: 2.4.0
translationType: machine
---

## メジャーリリース: Rust の書き換え

New Relic Lambda Extension を`Go (v2.3.24`) から**Rust**に完全に書き直し、パフォーマンスとメモリの安全性を向上し、コールド スタート時間を短縮しました。

## 新機能

* **APMモードのサポート**: Lambda関数がアプリケーション エンティティとしてNew Relic APMプラットフォームに直接レポートできるようになりました

  * 有効にする `NEW_RELIC_APM_LAMBDA_MODE=true`
  * メトリクス、スパン、エラー、イベント、および賭けトレースを完全にサポート
  * プラットフォーム ログがAPMメトリクス (`apm.lambda.transaction.*`) に変換されました
  * ディストリビューティッド（分散）トレーシング コンテキストによるタイムアウトと障害に対するエラー イベントの強化
  * 詳細については、 [APMモードのドキュメントを](https://docs.newrelic.com/docs/serverless-function-monitoring/aws-lambda-monitoring/instrument-lambda-function/upgrade-to-apm-experience/)参照してください。

* **リクエストスコープ処理**: ペイロード相関とライフサイクル管理の改善

* **インテリジェントバッファ管理**: リクエストコンテキストの前に到着したエージェントペイロードを自動クリーンアップで処理します。

## パフォーマンスの改善

* **より高速なコールドスタート**: 最小限の依存関係とLTOによる最適化されたRustコンパイル
* **メモリ使用量の削減**: ゼロコストの抽象化によりメモリ フットプリントを削減
* **Concurrent Processing** : ログ、プラットフォーム メトリクス、エージェント テレメトリーの並列処理
* **接続プーリング**: 呼び出し間での HTTP クライアント接続の再利用

## セキュリティと信頼性

* **メモリの安全性**: Rustの所有権システムはメモリ リークとバッファ オーバーフローを防止します
* **パニックセーフティ**: グローバルパニックハンドラは拡張機能の障害による Lambda のクラッシュを防ぎます
* **型安全性**: コンパイル時の保証により、実行時エラーのクラス全体が排除されます。

## 技術的な変更

* Go `v1.23`から Rust 2021 エディションに移行しました
* Tokio非同期ランタイム上に構築
* Rust用AWS SDK v1 (AWS-config 1.8、AWS-sdk-secretsmanager 1.88、AWS-sdk-ssm 1.93)
* 懸念事項を明確に分離したモジュラーアーキテクチャー

## 構成

下位互換性を保つため、既存の環境変数はすべて変更されません。主な変数:

* `NEW_RELIC_LICENSE_KEY`: New Relic ライセンスキー
* `NEW_RELIC_APM_LAMBDA_MODE`: APM モードを有効にする (デフォルト: false)
* `NEW_RELIC_EXTENSION_SEND_FUNCTION_LOGS`: 関数ログを送信する（デフォルト: false）
* `NEW_RELIC_LAMBDA_LOG_LEVEL`: 拡張ログレベルは`info` 、 `debug` 、 `warn` 、 `error` 、 `trace` 、 `all`

完全な設定の詳細は[README](https://github.com/newrelic/newrelic-lambda-extension/blob/2a5c012f5082d2f8f056252e87d2d3eecad5479a/README.md)に記載されています。

## 移行に関する注意事項

* **ドロップイン交換**: 既存ユーザーはコードの変更は不要
* **環境変数**: すべての設定は同じままです
* **バイナリ互換性**: 既存のNew Relicエージェントとの互換性を維持します。
* **パフォーマンス**: コールドスタートが20～40%高速化し、メモリ使用量が低減します。

***

## \[2.3.24] - Go実装（レガシー）

Rust 移行前の最後の Go ベースのバージョン。参照およびレガシー サポートのために維持されます。