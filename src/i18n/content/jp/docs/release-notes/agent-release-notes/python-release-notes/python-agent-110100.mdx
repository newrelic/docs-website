---
subject: Python agent
releaseDate: '2025-11-03'
version: 11.1.0
downloadLink: 'https://pypi.python.org/pypi/newrelic'
features:
  - Add new environment variables for attribute filter settings
  - Add support for async generators in transaction decorators
  - Add support for additional models in AWS Bedrock
  - Add instrumentation for new methods in AWS Kinesis
  - Add support for Python 3.14
bugs:
  - Fix a bug in aiomysql which caused RecursionError when using ConnectionPool
  - Fix a bug where properties were not properly passed in the producer for kombu
  - Fix an error when shutdown_agent is called from within the harvest thread
translationType: machine
---

## メモ

このリリースの Python エージェントでは、Python 3.14 のサポート、属性フィルター設定用の新しい環境変数、トランザクション デコレータの非同期ジェネレータのサポート、 [AWS Bedrock](https://aws.amazon.com/bedrock/)の追加モデル、 [AWS Kinesis](https://aws.amazon.com/kinesis/)の新しいメソッドが追加されています。このリリースでは、 `ConnectionPool`が複数回ラップされているときに`RecursionError`引き起こす[aiomysql](https://pypi.org/project/aiomysql/)のバグ、 [kombu](https://pypi.org/project/kombu/)のプロデューサーでプロパティが適切に渡されないバグ、および`shutdown_agent`収集スレッド内から呼び出されたときにエラーが発生するバグも修正されています。

[Python パッケージ インデックス](https://pypi.python.org/pypi/newrelic)経由で`easy_install/pip/distribute`を使用するか、 [Conda-Forge パッケージ インデックス](https://anaconda.org/conda-forge/newrelic)経由で`conda`を使用してエージェントをインストールするか、 [New Relic ダウンロード サイト](https://download.newrelic.com/python_agent/release)から直接ダウンロードします。

## 特徴

* Python 3.14のサポートを追加

  * Python 3.14 のサポートを追加します。

* 属性フィルター設定用の環境変数を追加する

  * 以下の設定は、環境変数を通じて設定できるようになりました。

    | 構成設定                                      | 環境変数                                                |
    | ----------------------------------------- | --------------------------------------------------- |
    | `attributes.enabled`                      | `NEW_RELIC_ATTRIBUTES_ENABLED`                      |
    | `attributes.exclude`                      | `NEW_RELIC_ATTRIBUTES_EXCLUDE`                      |
    | `attributes.include`                      | `NEW_RELIC_ATTRIBUTES_INCLUDE`                      |
    | `browser_monitoring.attributes.enabled`   | `NEW_RELIC_BROWSER_MONITORING_ATTRIBUTES_ENABLED`   |
    | `browser_monitoring.attributes.exclude`   | `NEW_RELIC_BROWSER_MONITORING_ATTRIBUTES_EXCLUDE`   |
    | `browser_monitoring.attributes.include`   | `NEW_RELIC_BROWSER_MONITORING_ATTRIBUTES_INCLUDE`   |
    | `error_collector.attributes.enabled`      | `NEW_RELIC_ERROR_COLLECTOR_ATTRIBUTES_ENABLED`      |
    | `error_collector.attributes.exclude`      | `NEW_RELIC_ERROR_COLLECTOR_ATTRIBUTES_EXCLUDE`      |
    | `error_collector.attributes.include`      | `NEW_RELIC_ERROR_COLLECTOR_ATTRIBUTES_INCLUDE`      |
    | `span_events.attributes.enabled`          | `NEW_RELIC_SPAN_EVENTS_ATTRIBUTES_ENABLED`          |
    | `span_events.attributes.exclude`          | `NEW_RELIC_SPAN_EVENTS_ATTRIBUTES_EXCLUDE`          |
    | `span_events.attributes.include`          | `NEW_RELIC_SPAN_EVENTS_ATTRIBUTES_INCLUDE`          |
    | `transaction_events.attributes.enabled`   | `NEW_RELIC_TRANSACTION_EVENTS_ATTRIBUTES_ENABLED`   |
    | `transaction_events.attributes.exclude`   | `NEW_RELIC_TRANSACTION_EVENTS_ATTRIBUTES_EXCLUDE`   |
    | `transaction_events.attributes.include`   | `NEW_RELIC_TRANSACTION_EVENTS_ATTRIBUTES_INCLUDE`   |
    | `transaction_segments.attributes.enabled` | `NEW_RELIC_TRANSACTION_SEGMENTS_ATTRIBUTES_ENABLED` |
    | `transaction_segments.attributes.exclude` | `NEW_RELIC_TRANSACTION_SEGMENTS_ATTRIBUTES_EXCLUDE` |
    | `transaction_segments.attributes.include` | `NEW_RELIC_TRANSACTION_SEGMENTS_ATTRIBUTES_INCLUDE` |
    | `transaction_tracer.attributes.enabled`   | `NEW_RELIC_TRANSACTION_TRACER_ATTRIBUTES_ENABLED`   |
    | `transaction_tracer.attributes.exclude`   | `NEW_RELIC_TRANSACTION_TRACER_ATTRIBUTES_EXCLUDE`   |
    | `transaction_tracer.attributes.include`   | `NEW_RELIC_TRANSACTION_TRACER_ATTRIBUTES_INCLUDE`   |

* トランザクション デコレータに非同期ジェネレータのサポートを追加する

  * 以前は、トランザクション デコレータは非同期ジェネレータをラップすることをサポートしていませんでした。このサポートが追加され、非同期ジェネレーター トランザクションはイベント ループの待機時間やその他の統計を自動的に測定するようになりました。

* AWS Bedrock 計装に追加モデルのサポートを追加

  * botocoreおよびaiobotocoreを通じてAWS Bedrock 計装を更新し、以下の追加モデルをサポートします。

    * クロード・ソネット 3+ モデル
    * リージョンがプレフィックスとして付いたモデル（リージョン対応）

* 新しい Kinesis メソッド用の計装を追加

  * 新しいAWS Kinesis メソッドをサポートするためにbotocore計装を追加

    * `describe_account_settings`
    * `update_account_settings`
    * `update_max_record_size`
    * `update_stream_warm_throughput`

## バグ修正

* [aiomysql](https://pypi.org/project/aiomysql/) ConnectionPool での再帰エラーを防ぐ

  * 以前は、プールされた接続を使用すると、 [aiomysql](https://pypi.org/project/aiomysql/)で`RecursionError`が発生していました。繰り返しのラッピングにより、プールされた接続の周囲に深い`ObjectProxy`チェーンが作成されました。これは修正されました。

* [kombu](https://pypi.org/project/kombu/)のプロデューサーでプロパティが適切に渡されないバグを修正しました

  * `kombu.messaging.Producer.publish()`の計装により、プロパティが誤って辞書内にネストされ、プロパティが間違った場所に配置され、下流のパッケージによって読み取られなくなるバグを修正しました。

* `shutdown_agent`が収集スレッド内から呼び出されたときのエラーを修正しました

  * 以前は、 `shutdown_agent`収集スレッド内から呼び出されたときに`RuntimeError`が発生する可能性がありました。これにより、クラッシュを防ぐガードが追加され、問題が修正されます。

## サポートステートメント

最新のエージェント バージョンが利用可能になったらすぐに更新することをお勧めします。最新バージョンにアップグレードできない場合は、エージェントを 90 日以内のバージョンに更新してください。エージェントを最新の状態に保つ方法の[詳細](/docs/new-relic-solutions/new-relic-one/install-configure/update-new-relic-agent/)については、こちらをご覧ください。

エージェントのリリースとサポート日については、New Relic Python エージェントの[EOL ポリシーを](/docs/apm/agents/python-agent/getting-started/python-agent-eol-policy/)参照してください。