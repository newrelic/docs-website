---
subject: Python agent
releaseDate: '2025-09-25'
version: 11.0.0
downloadLink: 'https://pypi.python.org/pypi/newrelic'
features:
  - Removes support for Python 3.7
  - Removes and or deprecates various APIs and settings
  - 'Deprecates [aioredis](https://pypi.org/project/aioredis/) instrumentation'
  - Raises the minimum supported version of `setuptools` and `setuptools_scm`
  - 'Adds new instrumentation for [AutoGen](https://github.com/microsoft/autogen)'
  - 'Adds new instrumentation for [Pyzeebe](https://pypi.org/project/pyzeebe/)'
  - Adds new MCP (Model Context Protocol) named spans
bugs:
  - Fixes a crash in psycopg
  - Ensures MCP spans are only recorded when AI monitoring is enabled
translationType: machine
---

## メモ

<Callout variant="caution">
  このバージョンのエージェントは撤回されました。
</Callout>

このリリースの Python エージェントでは、次の変更が加えられています。

* Python 3.7のサポートを削除
* さまざまなAPIと設定を削除または廃止します
* [aioredis](https://pypi.org/project/aioredis/)計装を廃止します
* `setuptools`のサポートされている最小バージョンを上げ、 `setuptools_scm`
* [AutoGen](https://github.com/microsoft/autogen)用の新しい計装を追加
* [Pyzeebe](https://pypi.org/project/pyzeebe/)用の新しい計装を追加
* 新しいMCP（モデルコンテキストプロトコル）名前付きスパンを追加します
* psycopgのクラッシュを修正
* AIモニタリングが有効な場合にのみMCPスパンが記録されるようにします

[Python パッケージ インデックス](https://pypi.python.org/pypi/newrelic)経由で`easy_install/pip/distribute`を使用してエージェントをインストールするか、 [New Relic ダウンロード サイト](https://download.newrelic.com/python_agent/release)から直接ダウンロードします。

## 削除された機能

* Python 3.7のサポートを削除

  * Python 3.7 は 2023 年 6 月 27 日に EOL となりました。Python エージェントでは、そのサポートが廃止されました。

* さまざまな非推奨APIを削除します

  * 次の API は削除されました:

    | レガシーAPI                                   | リプレースメントAPI                                                                                                                                                          |
    | ----------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
    | `accept_distributed_trace_payload`        | [`accept_distributed_trace_headers`](/docs/agents/python-agent/python-agent-api/acceptdistributedtraceheaders-python-agent-api)                                      |
    | `add_custom_parameter`                    | [`add_custom_attribute`](/docs/apm/agents/python-agent/python-agent-api/addcustomattribute-python-agent-api)                                                         |
    | `add_custom_parameters`                   | [`add_custom_attributes`](/docs/apm/agents/python-agent/python-agent-api/addcustomattributes-python-agent-api)                                                       |
    | `create_distributed_trace_payload`        | [`insert_distributed_trace_headers`](/docs/apm/agents/python-agent/python-agent-api/insertdistributedtraceheaders-python-agent-api)                                  |
    | `get_browser_timing_footer`               | この機能は[`get_browser_timing_header()`](/docs/apm/agents/python-agent/python-agent-api/getbrowsertimingheader-python-agent-api)にラップされています                               |
    | `record_exception`                        | [`notice_error()`](/docs/agents/python-agent/python-agent-api/notice_error)                                                                                          |
    | `NewRelicLogHandler`                      | `NewRelicLogForwardingHandler`                                                                                                                                       |
    | `lambda_handler` ＆ `LambdaHandlerWrapper` | これらの API は[`newrelic-lambda`](/docs/serverless-function-monitoring/aws-lambda-monitoring/instrument-lambda-function/sdk-based-instrumentation/#python)パッケージに移動されました。 |

* さまざまな非推奨の設定を削除します

  * 以下の設定は削除されました:

    | レガシー設定                                  | 置換設定                                                                                                                                                                  |
    | --------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
    | `transaction_tracer.capture_attributes` | [`transaction_tracer.attributes.enabled`](/docs/apm/agents/python-agent/configuration/python-agent-configuration#cfg-tt-attributes-enabled)                           |
    | `error_collector.capture_attributes`    | [`error_collector.attributes.enabled`](/docs/apm/agents/python-agent/configuration/python-agent-configuration#cfg-error-attributes-enabled)                           |
    | `browser_monitoring.capture_attributes` | [`browser_monitoring.attributes.enabled`](/docs/apm/agents/python-agent/configuration/python-agent-configuration#cfg-browser-attributes-enabled)                      |
    | `analytics_events.enabled`              | [`transaction_events.enabled`](/docs/apm/agents/python-agent/configuration/python-agent-configuration#transaction-events-enabled)                                     |
    | `analytics_events.capture_attributes`   | [`transaction_events.attributes.enabled`](/docs/apm/agents/python-agent/configuration/python-agent-configuration#cfg-events-attributes-enabled)                       |
    | `error_collector.ignore_errors`         | [`error_collector.ignore_classes`](/docs/apm/agents/python-agent/configuration/python-agent-configuration#error-ignore)                                               |
    | `strip_exception_messages.whitelist`    | [`strip_exception_messages.allowlist`](/docs/apm/agents/python-agent/configuration/python-agent-configuration#strip_exception_messages_allowlist)                     |
    | `ssl`                                   | これは現在`true`にハードコードされているため、設定オプションとしては削除されました。                                                                                                                         |
    | `ignored_params`                        | 代わりに`newrelic.attributes.exclude = request.parameters.{name}`使用してください。各リクエストのキーをカンマで区切って`newrelic.attributes.exclude`リストに追加します。 キーの先頭に必ず`request.parameters`を付けてください。 |
    | `agent_limits.merge_stats_maximum`      | これは、サーバー側の設定を優先して完全に無視されるようになりました。                                                                                                                                    |

## 非推奨の機能

* [aioredis](https://pypi.org/project/aioredis/)の計装は非推奨になりました

  * [aioredis](https://pypi.org/project/aioredis/)パッケージは非推奨となり、代わりにサブモジュール`redis.asyncio`が含まれる[redis](https://pypi.org/project/redis/)が推奨されます。その結果、 `aioredis`の計装も非推奨になりました。 代わりに`redis`ライブラリを使用してください。この計装は将来のリリースで削除される予定です。

* 他の言語エージェントと一致するように、既存の収穫設定の一部を廃止します。

  * 他の言語エージェントの規則との一貫性を保つために、次の収集設定は非推奨になりました。

    | レガシー設定                                                    | 置換設定                                                                                                                                                                            |
    | --------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
    | `event_harvest_config.harvest_limits.analytic_event_data` | [`transaction_events.max_samples_stored`](/docs/apm/agents/python-agent/configuration/python-agent-configuration#transaction-events-max-samples-stored)                         |
    | `event_harvest_config.harvest_limits.span_event_data`     | [`span_events.max_samples_stored`](/docs/apm/agents/python-agent/configuration/python-agent-configuration#cfg-tt-max-samples-stored)                                            |
    | `event_harvest_config.harvest_limits.error_event_data`    | [`error_collector.max_event_samples_stored`](/docs/apm/agents/python-agent/configuration/python-agent-configuration#error-max-event-samples-stored)                             |
    | `event_harvest_config.harvest_limits.custom_event_data`   | [`custom_insights_events.max_samples_stored`](/docs/apm/agents/python-agent/configuration/python-agent-configuration#custom-insights-events-max-samples-stored)                 |
    | `event_harvest_config.harvest_limits.log_event_data`      | [`application_logging.forwarding.max_samples_stored`](/docs/apm/agents/python-agent/configuration/python-agent-configuration#application-logging-forwarding-max-samples-stored) |

    これは、これらの設定の名前を`*.max_samples_stored`から`event_harvest_config.harvest_limits.*`フォームに変更した以前の変更を元に戻したものです。この決定は覆され、設定名を変更しなかった他の言語エージェントと一致するように、元の設定名が復元されました。非推奨の設定は今のところは引き続き機能しますが、将来のリリースでは削除される予定です。

* WSGI環境辞書によるエージェントの設定を非推奨にします

  * 以前は WSGI environ 辞書を通じて構成可能だった以下の設定は非推奨になりました。これらの設定は、環境変数または設定ファイルを通じて構成してください。

    * `newrelic.set_background_task`
    * `newrelic.suppress_apdex_metric`
    * `newrelic.suppress_transaction_trace`
    * `newrelic.capture_request_params`
    * `newrelic.disable_browser_autorum`

* `setuptools<61.2`または `setuptools_scm<6.4`

  * `setuptools`と`setuptools_scm`のサポートされる最小バージョンがそれぞれ`61.2`と`6.4`に増加されました。これは、パッケージ メタデータとビルド手順を構成するための`pyproject.toml`の使用をサポートするためのものです。エージェントは、より新しいビルド ツールを使用してビルドできるようになり、 `pyproject.toml`ファイルがないことに関する警告がログに記録されなくなりました。
  * この変更により、パッケージに新しいバージョン属性`newrelic.__version__`と`newrelic.__version_tuple__`が追加され、実行時にエージェントのバージョンをプログラムで確認できるようになります。

## 新機能

* [AutoGen](https://github.com/microsoft/autogen)用の新しい計装を追加

  * [AutoGen](https://github.com/microsoft/autogen)のエージェントとツールの計装 (名前付きスパンとカスタム`Llm`イベント) を追加します

* [Pyzeebe](https://pypi.org/project/pyzeebe/)用の新しい計装を追加

  * [Pyzeebe](https://pypi.org/project/pyzeebe/)に自動計装およびフレームワーク固有のエージェント プロパティを追加

* 新しいMCP（モデルコンテキストプロトコル）名前付きスパンを追加します

  * ツール マネージャー経由で行われる MCP (モデル コンテキスト プロトコル) ツール呼び出しに新しい名前付きスパンを追加して、ストリーミング可能な HTTP をサポートします。

## バグ修正

* `psycopg>=3.2.0`を呼び出すときに発生するクラッシュを修正しました `as_string()`

  * `as_string()`メソッドで引数が不要になり、クラッシュが発生する可能性がある`psycopg>=3.2.0`の問題を修正しました。この問題は修正され、このメソッドの両方のシグネチャがサポートされるようになりました。

* AIモニタリングが有効な場合にのみMCP（モデルコンテキストプロトコル）スパンが記録されるようにします

  * 設定`ai_monitoring.enabled`が有効になっている場合にのみ、MCP (モデル コンテキスト プロトコル) スパンが記録されるようにします。

## サポートステートメント

最新のエージェント バージョンが利用可能になったらすぐに更新することをお勧めします。最新バージョンにアップグレードできない場合は、エージェントを 90 日以内のバージョンに更新してください。エージェントを最新の状態に保つ方法の[詳細](/docs/new-relic-solutions/new-relic-one/install-configure/update-new-relic-agent/)については、こちらをご覧ください。

エージェントのリリースとサポート日については、New Relic Python エージェントの[EOL ポリシーを](/docs/apm/agents/python-agent/getting-started/python-agent-eol-policy/)参照してください。