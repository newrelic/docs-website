---
subject: Java agent
releaseDate: '2026-01-14'
version: 9.0.0
downloadLink: 'https://download.newrelic.com/newrelic/java-agent/newrelic-agent/9.0.0/'
features:
  - “Config to delete stale agent temp jars”
  - “Inclusion option for selectively instrumenting applications”
bugs:
  - “Fix IllegalAccessError in AWS S3 Instrumentation”
  - “Fix mislabeled instrumentation version for logback-class-1.5.20”
  - “Fix logging message for max attribute value”
  - “Correct Otel-style Sampler priorities”
security: []
translationType: machine
---

<ButtonGroup>
  <ButtonLink role="button" to="https://download.newrelic.com/newrelic/java-agent/newrelic-agent/9.0.0/" variant="primary">
    このエージェントのバージョンをダウンロード
  </ButtonLink>
</ButtonGroup>

## 新機能と改善点

* 起動時に古いエージェント一時 jar を削除する設定を @jtduffy が[2676](https://github.com/newrelic/newrelic-java-agent/pull/2676)に追加
* [2638](https://github.com/newrelic/newrelic-java-agent/pull/2638)で選択的にインストゥルメントされたアプリケーション @jtduffy の除外設定を補完する「inclusion」オプションを追加しました。
  * この機能を使用するには、環境変数`NEW_RELIC_STARTUP_JAVA_ARTIFACT_INCLUDES`またはシステム プロパティ`newrelic.config.startup_java_artifact_includes`を設定します。インストゥルメントされるアーティファクトをカンマ区切りのリストとして指定します。

## 修正

* [2503](https://github.com/newrelic/newrelic-java-agent/pull/2503)で @jtduffy が S3AsyncClient\_Instrumentation からラッパー クラスを移動して IllegalAccessError を解決しました。
* @jasonjkeller による logback-classic-1.5.20 のログイベントの誤ったラベルの計装バージョンを修正[(2594)](https://github.com/newrelic/newrelic-java-agent/pull/2594)
* [2680](https://github.com/newrelic/newrelic-java-agent/pull/2680)で @jeffalder による最大属性値のログメッセージを修正しました
* [2583](https://github.com/newrelic/newrelic-java-agent/pull/2583)で @jtduffy によってトレース比サンプラーの優先順位が修正されました

## 撤去

* [2572](https://github.com/newrelic/newrelic-java-agent/pull/2572)で @obenkenobi によって非推奨の jdbc-inet-\* モジュールが削除されました
* 非推奨の java.completable-future-jdk8 を削除します計装 by @obenkenobi in [2562](https://github.com/newrelic/newrelic-java-agent/pull/2562)
* [2567 年](https://github.com/newrelic/newrelic-java-agent/pull/2567)に @obenkenobi による AWS ラップ計装を削除
* [2614](https://github.com/newrelic/newrelic-java-agent/pull/2614)で @obenkenobi によって jdbc-sybase-6 モジュールが削除されました
* [2568 年](https://github.com/newrelic/newrelic-java-agent/pull/2568)に @obenkenobi による play 2.3 計装を削除
* 非推奨のthrift-0.8を削除します[2569](https://github.com/newrelic/newrelic-java-agent/pull/2569)の@obenkenobiによるモジュール
* @obenkenobi によって[2570](https://github.com/newrelic/newrelic-java-agent/pull/2570)で非推奨の Solr 4.0 および 5.0 モジュールが削除されました
* 非推奨モジュール grails-1.3 を削除します@obenkenobi による[2573](https://github.com/newrelic/newrelic-java-agent/pull/2573)
* 非推奨モジュール hibernate-3.3 を削除します@obenkenobi による[2574](https://github.com/newrelic/newrelic-java-agent/pull/2574)
* [2620 年](https://github.com/newrelic/newrelic-java-agent/pull/2620)に @sharvath-newrelic によって非推奨のフッター インジェクションAPIを削除
* @obenkenobi による[2561](https://github.com/newrelic/newrelic-java-agent/pull/2561)の非推奨 Struts 1 ポイントカットを削除します
* [2575](https://github.com/newrelic/newrelic-java-agent/pull/2575)で@sharvath-newrelicによって非推奨のモジュールglassfish-3が削除されました
* @obenkenobi によって、 [2571](https://github.com/newrelic/newrelic-java-agent/pull/2571)で非推奨の Rabbit-amqp モジュール 2.5.0、2.4.1、1.7.2 が削除されました。
* [2589年](https://github.com/newrelic/newrelic-java-agent/pull/2589)に@jtduffyによってデプロイメントマーカー機能が削除されました

## 最新バージョンへのアップデート [#procedures]

現在使用中のJavaエージェントのバージョンを特定するには、`java -jar newrelic.jar -v`を実行します。Javaエージェントのバージョンがコンソールに出力されます。

次に、最新バージョンのJavaエージェントにアップデートするには、以下の手順に従います。

1. **すべて**の[Javaエージェントのルートディレクトリ](/docs/agents/manage-apm-agents/troubleshooting/find-agent-root-directory#java-agent)を別の場所にバックアップします。そのディレクトリの名前を`NewRelic_Agent#.#.#`に変更します。ここで、`#.#.#`はエージェントのバージョン番号です。
2. [エージェントをダウンロードします](/docs/release-notes/agent-release-notes/java-release-notes)。
3. 新しいエージェントのダウンロードファイルを解凍し、`newrelic-api.jar`と`newrelic.jar`を元の[Javaエージェントのルートディレクトリ](/docs/agents/manage-apm-agents/troubleshooting/find-agent-root-directory#java-agent)にコピーします。
4. 古い`newrelic.yml`とzipからダウンロードした新しい`newrelic.yml`を比較し、[必要に応じてファイルを更新します](#diff)。
5. Javaディスパッチャを再起動します。

Javaエージェントのアップデート後に問題が発生する場合は、バックアップしたNew Relicエージェントディレクトリから復元します。

## エージェント設定の差分のアップデート [#diff]

エージェントの新しいバージョンをリリースする際に、`newrelic.yml`に新しい設定を追加します。`diff`または別の差分ユーティリティを使用して変更内容を確認してから、新しい設定を古いファイルに追加できます。ライセンスキー、アプリ名、デフォルト設定の変更など、ファイルに対して行ったカスタマイズを上書きしないようにしてください。

たとえば、 Javaバージョン 7.10.0 および 7.11.0 のデフォルトの`newrelic.yml`ファイルを`diff`すると、コンソールに表示される結果は次のようになります。

```yaml
➜ diff newrelic_7.10.0.yml newrelic_7.11.0.yml
...
107a108,119
>       # Whether the log events should include context from loggers with support for that.
>       context_data:
>
>         # When true, application logs will contain context data.
>         enabled: false
>
>         # A comma separated list of attribute keys whose values should be sent to New Relic.
>         #include:
>
>         # A comma separated list of attribute keys whose values should not be sent to New Relic.
>         #exclude:
>
125a138
>
128c141
<     enabled: false
---
>     enabled: true
...
```

この例では、これらの行はJavaエージェント バージョン 7.11.0 のデフォルトの`newrelic.yml`に追加されました。 7.11.0 以降に移行する場合は、これらの新しい行を元の`newrelic.yml`に追加する必要があります。

## サポートステートメント:

* New Relic では、最新の機能とパフォーマンス上のメリットを確実に得られるよう、エージェントを定期的にアップグレードすることをお勧めします。さらに、古いリリースは[サポート終了](https://docs.newrelic.com/docs/using-new-relic/cross-product-functions/install-configure/notification-changes-new-relic-saas-features-distributed-software/)になるとサポートされなくなります。