---
subject: Node.js agent
releaseDate: '2026-01-29'
version: 13.11.0
downloadLink: 'https://www.npmjs.com/package/newrelic'
security: []
bugs:
  - Added defensive code in `lib/subscribers/middleware-wrapper.js` to prevent crash when attempting to associate an error on an incoming http request
  - Updated `pg` instrumentation to properly capture the TraceSegment duration for promise based queries
  - Updated `Supportability/Nodejs/PartialGranularity/NrIds/Dropped` metric to only keep track of spans that got dropped when `nr.ids` execeeded 63 spans.
features:
  - Added timestamp to OpenAI `LlmChatCompletionSummary`
  - Added `timestamp` to LangChain input `LlmChatCompletionMessage`
  - Added `timestamp` to Google Gen AI `LlmChatCompletionMessage`
  - Added `timestamp` to AWS Bedrock `LlmChatCompletionMessage`
  - Added essential tracing mode for span links
translationType: machine
---

## メモ

#### 特徴

* AI モニタリング`LlmChatCompletionMessage`メッセージに`timestamp`追加しました

  * AWS Bedrock `LlmChatCompletionMessage`に`timestamp`を追加しました ([#3685](https://github.com/newrelic/node-newrelic/pull/3685)) ([ea297c8](https://github.com/newrelic/node-newrelic/commit/ea297c86772c1ae377a16e636db8bbcf53ef1547))
  * Google Gen AI `LlmChatCompletionMessage`に`timestamp`を追加しました ([#3686](https://github.com/newrelic/node-newrelic/pull/3686)) ([f4dd09e](https://github.com/newrelic/node-newrelic/commit/f4dd09ec332c47396277f6aaeff2f6f15daad97a))
  * LangChain入力`LlmChatCompletionMessage`に`timestamp`を追加しました（ [#3658](https://github.com/newrelic/node-newrelic/pull/3658) ）（[0bce235](https://github.com/newrelic/node-newrelic/commit/0bce235ce02f772bc089bf947afadf312c735c1b) ）

* OpenAI `LlmChatCompletionSummary`にタイムスタンプを追加しました ([#3689](https://github.com/newrelic/node-newrelic/pull/3689)) ([55b0310](https://github.com/newrelic/node-newrelic/commit/55b03100323eefb3578816cff69f2b919e4b7bdd))

* 部分粒度トレースの追加サポート（本番環境では使用できません）

  * スパリンクの必須トレースモードを追加しました ([#3670](https://github.com/newrelic/node-newrelic/pull/3670)) ([83dfb84](https://github.com/newrelic/node-newrelic/commit/83dfb84b842e0245392425ce61e92a2789fcaf06))
  * `nr.ids` 63 スパンを超えたときにドロップされたスパンのみを追跡するように、 `Supportability/Nodejs/PartialGranularity/NrIds/Dropped`メトリクスを更新しました。 ([#3684](https://github.com/newrelic/node-newrelic/pull/3684)) ([9797cf3](https://github.com/newrelic/node-newrelic/commit/9797cf38aa2808b29da9623158edb221b1819548))

#### バグ修正

* 受信 HTTP リクエストのエラーを関連付ける際にクラッシュを防ぐため、 `lib/subscribers/middleware-wrapper.js`に防御コードを追加しました ([#3697](https://github.com/newrelic/node-newrelic/pull/3697)) ([658e78b](https://github.com/newrelic/node-newrelic/commit/658e78ba564eae996d790bb3334bda6847c7e2bd))
* Promise ベースの書き込みの TraceSegment 期間を適切にキャプチャするために`pg`計装を更新しました ([#3695](https://github.com/newrelic/node-newrelic/pull/3695)) ([0051697](https://github.com/newrelic/node-newrelic/commit/005169776a3f3fe9d988174857b3c96e6131aea3))

#### コードリファクタリング

* AI モニタリング抽象サブスクライバーを追加し、それらを使用するようにすべての AI モニタリング サブスクライバーを更新しました ([#3676](https://github.com/newrelic/node-newrelic/pull/3676)) ([08cd38b](https://github.com/newrelic/node-newrelic/commit/08cd38b5b34b4f1a2636ccc12d359484af6b3e83))

#### ドキュメント

* 互換性レポートを更新しました ([#3675](https://github.com/newrelic/node-newrelic/pull/3675)) ([cc898f4](https://github.com/newrelic/node-newrelic/commit/cc898f4d8b0f520e120f330ff9e90fe7baaebedc))

#### 雑用

* TimedEvent の制限を 100 に追加しました ([#3683](https://github.com/newrelic/node-newrelic/pull/3683)) ([0d595d8](https://github.com/newrelic/node-newrelic/commit/0d595d8579b5a58e49908bc24321ce7b526ddff2))
* 制限 100 を超えた場合のサポート機能メトリクス`Supportability/Nodejs/SpanEvent/<Links|Events>/Dropped`を追加しました ([#3688](https://github.com/newrelic/node-newrelic/pull/3688)) ([a247d31](https://github.com/newrelic/node-newrelic/commit/a247d31fc9c24752be50a73d4ddfc7a088a68ce6))
* `sonarjs/no-dead-store` eslint の次の行を無効にする機能を削除しました ([#3692](https://github.com/newrelic/node-newrelic/pull/3692)) ([593fa15](https://github.com/newrelic/node-newrelic/commit/593fa15a033437b95fe375cf6034b8453c7d2b36))

#### 継続的なインテグレーション

* 秒エージェントが存在する場合の CI の問題を修正しました ([#3677](https://github.com/newrelic/node-newrelic/pull/3677)) ([23da654](https://github.com/newrelic/node-newrelic/commit/23da6547e72f49bf798046330e8cfa74a0b4d2af))

#### テスト

* 部分的なトレースでスパンイベントがドロップされていることをアサートする ([#3680](https://github.com/newrelic/node-newrelic/pull/3680)) ([25e3781](https://github.com/newrelic/node-newrelic/commit/25e3781098343b9ca9e4aed0cd5c9e0f94266926))

### サポートステートメント:

最新のエージェント バージョンが利用可能になったらすぐに更新することをお勧めします。最新バージョンにアップグレードできない場合は、エージェントを 90 日以内のバージョンに更新してください。エージェントを最新の状態に保つ方法の詳細については、こちらをご覧ください。( [https://docs.newrelic.com/docs/new-relic-solutions/new-relic-one/install-configure/update-new-relic-agent/](https://docs.newrelic.com/docs/new-relic-solutions/new-relic-one/install-configure/update-new-relic-agent/) )

エージェントのリリースとサポート日については、New Relic Node.js エージェントの EOL ポリシーを参照してください。( [https://docs.newrelic.com/docs/apm/agents/nodejs-agent/getting-started/nodejs-agent-eol-policy/](https://docs.newrelic.com/docs/apm/agents/nodejs-agent/getting-started/nodejs-agent-eol-policy/) )