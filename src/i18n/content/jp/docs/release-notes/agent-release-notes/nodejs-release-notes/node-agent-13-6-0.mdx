---
subject: Node.js agent
releaseDate: '2025-10-27'
version: 13.6.0
downloadLink: 'https://www.npmjs.com/package/newrelic'
security: []
bugs:
  - Updated `ioredis` instrumentation to handle breakage of errors when using `.pipeline`
  - Updated `openai` `instrumentStream` function to handle empty chunk when `include_usage` is set
features:
  - Added instrumentation for http2 client methods
translationType: machine
---

## メモ

#### 特徴

* http2 クライアント メソッドの計装を追加 ( [#3284](https://github.com/newrelic/node-newrelic/pull/3284) ) ([bda7aea](https://github.com/newrelic/node-newrelic/commit/bda7aeaac16ce9f54bd28de72aa7465be96cd157) )

#### バグ修正

* `.pipeline`の使用時に発生するエラーを処理するために`ioredis`計装 を更新しました。 （ [#3457](https://github.com/newrelic/node-newrelic/pull/3457) ） （[49f4d93](https://github.com/newrelic/node-newrelic/commit/49f4d93a59045f35406dfdbd3248dca0652727d6) ）
* `include_usage`が設定されている場合に空のチャンクを処理するように`openai` `instrumentStream`関数を更新しました ( [#3427](https://github.com/newrelic/node-newrelic/pull/3427) ) ([f804940](https://github.com/newrelic/node-newrelic/commit/f8049405003f0811450f75468e0bddfb1f05ec2b) )

#### コードリファクタリング

* `express`計装を更新して発行されたイベント ( [#3424](https://github.com/newrelic/node-newrelic/pull/3424) ) ([bbf3d01](https://github.com/newrelic/node-newrelic/commit/bbf3d010bc402953e53cae5200af6bfb55a6446d) ) をサブスクライブします。
* よりパフォーマンスの高い for...of または for インデックス ループのために、 `Array.forEach`の計装のインスタンスを更新しました ( [#3463](https://github.com/newrelic/node-newrelic/pull/3463) ) ([99484ce](https://github.com/newrelic/node-newrelic/commit/99484ce0e7a963fbbc3cbc22f4956ce19e5eecc2) )
* よりパフォーマンスの高い for...of または for インデックス ループのために`Array.forEach`のインスタンスを更新しました ( [#3440](https://github.com/newrelic/node-newrelic/pull/3440) ) ([48c37bf](https://github.com/newrelic/node-newrelic/commit/48c37bf7f85291553666d4512ca995b6a5b136a2) )
* `aws-bedrock` LLM イベントのトークン計算を更新しました ( [#3445](https://github.com/newrelic/node-newrelic/pull/3445) ) ([9450181](https://github.com/newrelic/node-newrelic/commit/945018171da713487a0b5b674e68bdbb211e655e) )
* `google-genai` LLM イベントのトークン計算を更新しました ( [#3431](https://github.com/newrelic/node-newrelic/pull/3431) ) ([41d32be](https://github.com/newrelic/node-newrelic/commit/41d32befe1d9c3201b62253a5de76c918d98a025) )
* `openai` LLM イベントのトークン計算を更新しました ( [#3430](https://github.com/newrelic/node-newrelic/pull/3430) ) ([b8678cc](https://github.com/newrelic/node-newrelic/commit/b8678cc92bb986eae7efec4b516f66406307e841) )

#### ドキュメント

* 互換性レポートを更新しました ( [#3459](https://github.com/newrelic/node-newrelic/pull/3459) ) ([f253b97](https://github.com/newrelic/node-newrelic/commit/f253b97c039caa9e9110055d93e0c32e2d6911a8) )

#### 雑用

* リリースワークフローの更新 ( [#3444](https://github.com/newrelic/node-newrelic/pull/3444) ) ([d1ec158](https://github.com/newrelic/node-newrelic/commit/d1ec158f46d034160b665f8b0785c020ba39b820) )

#### テスト

* agent\_helper に`randomString`ヘルパーを追加し、ioredis で使用してフラッピー テストを回避しました。また、kafka、elasticsearch、opensearch テストのランダム文字列のローカル インスタンスも更新しました ( [#3462](https://github.com/newrelic/node-newrelic/pull/3462) ) ([4deb6d8](https://github.com/newrelic/node-newrelic/commit/4deb6d80d9daa7fd9d4c077a5cc52f358ed44e61) )
* テストの途中でインデックスが削除されるのを避けるために、 `flushall`ではなく`flushdb`を実行することで、ioredis と ioredis-esm 間の競合を修正しました ( [#3464](https://github.com/newrelic/node-newrelic/pull/3464) ) ([5e3f0a8](https://github.com/newrelic/node-newrelic/commit/5e3f0a81bfcf8bc8cf04559f29d3a76c1262bcc7) )
* クラッシュを発生させるために意図的にメソッドのスペルを間違える Express 非同期エラーテストを修正しました ( [#3435](https://github.com/newrelic/node-newrelic/pull/3435) ) ([ff9f064](https://github.com/newrelic/node-newrelic/commit/ff9f0646c4fc23e367c1e190eb8091423c690103) )
* AWS-sdk-v3 common.js の semver 要件を移動しました ( [#3461](https://github.com/newrelic/node-newrelic/pull/3461) ) ([6a380ef](https://github.com/newrelic/node-newrelic/commit/6a380ef580268be131417587a2dda5adf3545e68) )
* Next.js テストを`<16.0.0`に固定しました ( [#3446](https://github.com/newrelic/node-newrelic/pull/3446) ) ([10787a1](https://github.com/newrelic/node-newrelic/commit/10787a1f4e325b7321173ee5b2fab0809af5e8d1) )
* `@langchain/core`の最小テストバージョンを 1.0.0 に更新しました ( [#3437](https://github.com/newrelic/node-newrelic/pull/3437) ) ([b61f67a](https://github.com/newrelic/node-newrelic/commit/b61f67a4c6d59f0b2a49e0de93a6d38e56d214fd) )

### サポートステートメント:

最新のエージェント バージョンが利用可能になったらすぐに更新することをお勧めします。最新バージョンにアップグレードできない場合は、エージェントを 90 日以内のバージョンに更新してください。エージェントを最新の状態に保つ方法の詳細については、こちらをご覧ください。( [https://docs.newrelic.com/docs/new-relic-solutions/new-relic-one/install-configure/update-new-relic-agent/](https://docs.newrelic.com/docs/new-relic-solutions/new-relic-one/install-configure/update-new-relic-agent/) )

エージェントのリリースとサポート日については、New Relic Node.js エージェントの EOL ポリシーを参照してください。( [https://docs.newrelic.com/docs/apm/agents/nodejs-agent/getting-started/nodejs-agent-eol-policy/](https://docs.newrelic.com/docs/apm/agents/nodejs-agent/getting-started/nodejs-agent-eol-policy/) )