---
subject: Ruby agent
releaseDate: '2025-12-02'
version: 9.24.0
downloadLink: 'https://rubygems.org/downloads/newrelic_rpm-9.24.0.gem'
features:
  - Deprecation reminder for SqlSampler#notice_sql API
  - Deprecation notice for second and third arguments in Datastores.notice_sql API
  - Deprecation notice for second argument in Datastores.notice_statement API
  - Deprecation notice for proc's second and third arguments in Datastores.wrap API
bugs: []
security: []
translationType: machine
---

<Callout variant="important">
  最新のエージェント バージョンが利用可能になったらすぐに更新することをお勧めします。最新バージョンにアップグレードできない場合は、エージェントを 90 日以内のバージョンに更新してください。[エージェントを最新の状態に保つ方法](/docs/new-relic-solutions/new-relic-one/install-configure/update-new-relic-agent/)の詳細については、こちらをご覧ください。

  エージェントのリリースとサポート日については、New Relic Ruby エージェントの[EOL ポリシーを](/docs/apm/agents/ruby-agent/getting-started/ruby-agent-eol-policy/)参照してください。
</Callout>

## バージョン9.24.0

* **機能: SqlSampler#notice\_sql API の廃止に関するお知らせ**

  `NewRelic::Agent::SqlSampler#notice_sql`メソッドは非推奨であり、将来のメジャー バージョンで削除される予定です。代わりに、ユーザーは`NewRelic::Agent::Datastores.notice_sql`を呼び出す必要があります。[PR#3345](https://github.com/newrelic/newrelic-ruby-agent/pull/3345)

* **機能: Datastores.notice\_sql の 2 番目と 3 番目の引数の非推奨通知API**

  `NewRelic::Agent::Datastores.notice_sql`メソッドの 2 番目 (`scoped_metric`) および 3 番目 (`elapsed`) の引数は非推奨です。それらはしばらくの間、この方法では使用されていません。代わりに、これらの値は、API が呼び出されたときに現在のセグメントに基づいて設定されます。[PR#3345](https://github.com/newrelic/newrelic-ruby-agent/pull/3345)

* **機能: Datastores.notice\_statement の 2 番目の引数の非推奨通知API**

  `NewRelic::Agent::Datastores.notice_statement`メソッドの 2 番目の引数 (`elapsed`) は非推奨です。この方法は、しばらくの間使用されていません。代わりに、この値は API が呼び出されたときに現在のセグメントに基づいて設定されます。[PR#3346](https://github.com/newrelic/newrelic-ruby-agent/pull/3346)

* **機能: Datastores.wrap API の proc の 2 番目と 3 番目の引数の非推奨通知**

  `NewRelic::Agent::Datastores.wrap`メソッドは変更されています。将来のメジャー バージョンでは、proc は単一の引数 (yield の結果) のみを受け入れるようになります。スコープ付きメトリック名と経過引数は、 `Datastores.notice_sql`メソッドから削除されるため削除されます。 スコープ付きメトリック名と経過値は、ラップが実行されるときに現在のセグメントから導出されます。 [PR#3346](https://github.com/newrelic/newrelic-ruby-agent/pull/3346)