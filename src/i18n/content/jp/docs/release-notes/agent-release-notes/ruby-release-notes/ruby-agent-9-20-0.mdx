---
subject: Ruby agent
releaseDate: '2025-07-31'
version: 9.20.0
downloadLink: 'https://rubygems.org/downloads/newrelic_rpm-9.20.0.gem'
features:
  - Add ECS Docker ID for Fargate
  - 'Add NewRelic::Helper.version_satisfied?'
  - Add code.stacktrace attribute on datastore spans when duration exceeds configured threshold
  - Consolidate "Unknown" constant values
bugs:
  - Fix Brewfile source links
  - Fix error when using HTTPX 1.5.0
  - Bugfixes and improvements to debug level agent logs
  - Fix risk of server-side forgery for Slack workflow script
  - Replace JSON.load calls with JSON.parse
security: []
translationType: machine
---

<Callout variant="important">
  最新のエージェント バージョンが利用可能になったらすぐに更新することをお勧めします。最新バージョンにアップグレードできない場合は、エージェントを 90 日以内のバージョンに更新してください。[エージェントを最新の状態に保つ方法](/docs/new-relic-solutions/new-relic-one/install-configure/update-new-relic-agent/)の詳細については、こちらをご覧ください。

  エージェントのリリースとサポート日については、New Relic Ruby エージェントの[EOL ポリシーを](https://docs.newrelic.com/docs/apm/agents/ruby-agent/getting-started/ruby-agent-eol-policy/)参照してください。
</Callout>

## バージョン9.20.0

* **機能: Fargate 用の ECS Docker ID の追加**

  以前は、Ruby エージェントは AWS ECS Fargate 環境で実行されているときに Docker ID を記録しませんでした。Docker ID が正しく記録されるようになりました。[PR#3172](https://github.com/newrelic/newrelic-ruby-agent/pull/3172)

* **機能: NewRelic::Helper.version\_satisfied? を追加します。**

  エージェントには、バージョンの比較を簡素化する新しいヘルパー メソッドがあります。`NewRelic::Helper.version_satisfied?` 、左側のバージョン番号、文字列としての比較演算子、および右側のバージョン番号の 3 つの引数を受け入れます。この貢献に対して[@kekke-n](https://github.com/kekke-n)に感謝します。[PR#3182](https://github.com/newrelic/newrelic-ruby-agent/pull/3182)

* **機能: 期間が設定された閾値を超えた場合に、データストア スパンに code.stacktrace プロパティを追加します。**

  期間が構成された炎症値を超えると、エージェントは`code.stacktrace`プロパティをデータストア スパンに追加します。 閾値は、 `transaction_tracer.stack_trace_threshold`設定オプションを使用して設定されます。 [PR#3220](https://github.com/newrelic/newrelic-ruby-agent/pull/3220)

* **機能: 「不明」な定数値を統合する**

  「Unknown」のさまざまな大文字化スタイルへのすべての参照は、2 つの定数`NewRelic::UNKNOWN`と`NewRelic::UNKNOWN_LOWER`に統合されました。[@tsubasa1122](https://github.com/@tsubasa1122)さん、ご協力ありがとうございました！[PR#3185](https://github.com/newrelic/newrelic-ruby-agent/pull/3185)

* **バグ修正: Brewfile のソースリンクを修正**

  以前は、Multiverse README の Brewfile へのリンクが壊れていました。問題を修正するための PR を送信してくださった[@emmanuel-ferdman](https://github.com/emmanuel-ferdman)に感謝します。[PR#3191](https://github.com/newrelic/newrelic-ruby-agent/pull/3191)

* **バグ修正: HTTPX 1.5.0 使用時のエラーを修正**

  以前、エージェントは新しい HTTPX バージョン 1.5.0 の使用時にエラーが発生しました。これは、HTTPX が応答を保存する方法が変更されたためです。エージェントは、この変更を適切に処理するように更新され、HTTPX 1.5.0 の使用時にエラーが発生しなくなりました。[PR#3203](https://github.com/newrelic/newrelic-ruby-agent/pull/3203)

* **バグ修正: デバッグレベルエージェントログのバグ修正と改善**

  設定ソースにエージェントを読み込む際のデバッグレベルでの情報ログを改善します。 [PR#3221](https://github.com/newrelic/newrelic-ruby-agent/pull/3221)

* **バグ修正: Slack ワークフロー スクリプトのサーバー側での偽造のリスクを修正**

  社内では、Slack に更新を投稿する GitHub アクション ワークフローを使用して、リリースされた gem を追跡しています。\[@odaysec] は、このワークフローにおけるサーバー側の偽造のリスクを軽減できる方法を特定しました。ありがとう！[PR#3184](https://github.com/newrelic/newrelic-ruby-agent/pull/3184)

* **バグ修正: JSON.load 呼び出しを JSON.parse に置き換えます**

  一般的に、JSON.parse は JSON.load よりも安全だと考えられています。この件を指摘していただいた[@odaysec さん](https://github.com/odaysec)、ありがとうございます\![PR#3183](https://github.com/newrelic/newrelic-ruby-agent/pull/3183) [PR#3230](https://github.com/newrelic/newrelic-ruby-agent/pull/3230)