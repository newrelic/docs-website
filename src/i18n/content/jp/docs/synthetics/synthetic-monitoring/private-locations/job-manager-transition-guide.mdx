---
title: Synthetics ジョブ マネージャー移行ガイド
tags:
  - Synthetics
  - Synthetic monitoring
  - Private locations
metaDescription: Upgrade your private locations from containerized private minion (CPM) to the synthetics job manager
freshnessValidatedDate: never
translationType: machine
---

2022 年の初めに、スクリプトの作成を簡素化し、スクリプト化されたモニターに Chrome 100 および[ Node.js 16](/docs/synthetics/synthetic-monitoring/using-monitors/new-runtime)[ へのアクセスを提供し、 NerdGraph API を使用した自動モニター管理を導入する公共の](/docs/apis/nerdgraph/examples/nerdgraph-synthetics-tutorial) 場所 用の新しいランタイムをリリースしました。

Synthetics ジョブ マネージャーは、最新のランタイムでモニターをプライベートな場所にもたらし、モニターを実際のユーザーのエクスペリエンスにより近づけることができます。

## 合成用の小さなコンテナー イメージ [#docker]

ジョブ マネージャーは、実行するジョブに合わせて調整されたランタイム固有のコンテナー イメージから合成を実行します。CPM は従来のランタイムとアーティファクトを 1 つの拡大するファイルにバンドルしていましたが、ジョブ マネージャーは代わりに、Chrome、ノード、およびジョブ管理の作業を個別の小さなイメージに分割します。

プライベートな場所のジョブ構成をより詳細に制御できるジョブ マネージャーでは、次のこともできます。

* モニターに必要ない場合は、ランタイム イメージのサブセットを実行しないようにします。
* シンセティック ジョブ マネージャーの更新とは別に、ランタイム イメージ (ping、API、およびブラウザー) を更新します。
* 必要に応じて展開を構成およびサイズ設定します。

## ジョブ マネージャーによる展開の簡素化 [#deploy]

ファイル共有を使用してプライベートな場所でジョブを調整する CPM とは異なり、ジョブ マネージャー[は HTTP を介して Web サービスと通信し](/docs/synthetics/synthetic-monitoring/private-locations/install-job-manager)ます。これにより、docker 構成でマウントされたボリュームを指定したり、Kubernetes 構成で永続ボリュームを指定したりするなど、特定の展開要件が削除されます。

展開を簡素化することで、ジョブ マネージャーは次のことを行います。

* 高度なセキュリティ環境でアクセス許可関連のエラーが発生する可能性を減らします。
* ping 以外の監視ジョブ用に固有の docker ネットワークを作成しないことで、内部エンジン エラーのリスクを軽減します。
* すべてのコンポーネントにわたる Kubernetes ラベル、注釈、ノード セレクター、容認、およびアフィニティの展開時のサポートを向上させます。

## プライベート ロケーション モニターをインストールして構成する [#monitorMigration]

ジョブ マネージャーをダウンロードする準備はできましたか?開始するためのいくつかのオプションがあります。インストール手順については[インストール ドキュメント](/docs/synthetics/synthetic-monitoring/private-locations/install-job-manager)を確認するか、新規または既存の[プライベート ロケーション](/docs/synthetics/synthetic-monitoring/private-locations/private-locations-overview-monitor-internal-sites-add-new-locations)の操作については[構成ドキュメント](/docs/synthetics/synthetic-monitoring/private-locations/job-manager-configuration)を参照してください。

CPM とジョブ マネージャーの両方を同じプライベート ロケーション キーで構成できますが、CPM は従来のランタイムを使用するモニターを実行し、ジョブ マネージャーは最新のランタイムを使用するモニターを実行し、ping モニターは両方によって負荷分散されて実行されます。 CPM およびジョブ マネージャー。

同じホスト内で複数の Docker プライベート ロケーション コンテナーを実行している場合、ポートの競合が発生します。このポートの競合を回避するには、ジョブ マネージャーのセットアップを開始するときに必ず次のことを行ってください。

* 異なるホストでジョブ マネージャーと CPM を実行します。
* 各ジョブ マネージャーを個別のホストで実行します。
* 各 CPM を異なるホストで実行します。

新たなスタートをしたいですか？ジョブ マネージャー用の新しいプライベート ロケーションを作成します。プライベートな場所の構成と移行パスは、個人的な好みに依存します。

## モニターをアップグレードする [#upgrade]

Synthetics ジョブ マネージャーは、従来のランタイムと互換性がありません。一方、CPM は最新のランタイムと互換性がありません。ジョブ マネージャーと CPM がキーを共有している場合、CPM はレガシー ランタイムのモニターを処理し、ジョブ マネージャーは最新のランタイムのモニターを処理します。つまり、CPM は、Chrome 100 または Node.js 16 を使用するスクリプト化されたモニターをデプロイできません。

モニターをアップグレードする場合:

1. <DoNotTranslate>**[one.newrelic.com > Synthetic monitoring](https://one.newrelic.com/synthetics-nerdlets)**</DoNotTranslate>

   に移動し、編集するモニターを選択します。

2. <DoNotTranslate>**Settings**</DoNotTranslate>

   タブで

   <DoNotTranslate>**General**</DoNotTranslate>

   をクリックします。

3. ドロップダウン メニューから最新のランタイム ビューに切り替えます。 スクリプト化された API モニターの場合は、Node.js 16 を選択します。 シナリオ化ブラウザモニターの場合は、Chrome 100+ を選択します。

4. コンテナー化されたプライベート ミニオンと合成ジョブ マネージャーに個別のプライベート ロケーションを使用する場合は、ロケーションの選択を更新します。

5. <DoNotTranslate>**Validate**</DoNotTranslate>

   をクリックして、モニターが新しいランタイムで機能することを確認します。 必要に応じてスクリプトを変更します。

6. 保存する。

<Callout variant="tip">
  一般的なアップグレード エラーと解決策については[、ランタイム アップグレードのトラブルシューティング ガイドを参照して](/docs/synthetics/synthetic-monitoring/troubleshooting/runtime-upgrade-troubleshooting)ください。
</Callout>

新しいランタイムにアップグレードすることにしましたか?プログラムでモニターを更新するには、 [NerdGraph API](/docs/apis/nerdgraph/examples/nerdgraph-synthetics-tutorial/#update-monitors)を確認してください。

## バージョン要件 [#requirements]

一部の機能では、最小バージョンのジョブ マネージャーとランタイム コンテナー イメージが必要です。

<table id="min-versions">
  <thead>
    <tr>
      <th>
        機能
      </th>

      <th>
        ジョブマネージャーのバージョン
      </th>

      <th>
        ランタイムバージョン
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        ステップモニター
      </td>

      <td>
        リリース-332
      </td>

      <td>
        ノードbrowserランタイム v2.2.22
      </td>
    </tr>

    <tr>
      <td>
        リンク切れモニター
      </td>

      <td>
        リリース-341
      </td>

      <td>
        ノード API ランタイム v1.2.54
      </td>
    </tr>

    <tr>
      <td>
        証明書チェックモニター
      </td>

      <td>
        リリース-341
      </td>

      <td>
        ノード API ランタイム v1.2.54
      </td>
    </tr>

    <tr>
      <td>
        VSE のサポート
      </td>

      <td>
        リリース-345
      </td>

      <td>
        該当なし
      </td>
    </tr>

    <tr>
      <td>
        ユーザー定義変数
      </td>

      <td>
        リリース-347
      </td>

      <td>
        該当なし
      </td>
    </tr>

    <tr>
      <td>
        カスタムノードモジュール
      </td>

      <td>
        リリース360
      </td>

      <td>
        ノードbrowserランタイム v2.2.49 ノード API ランタイム v1.2.63
      </td>
    </tr>
  </tbody>
</table>