---
title: Elasticsearch OpenTelemetryインテグレーションのトラブルシューティング
tags:
  - OpenTelemetry
  - Elasticsearch
  - Integrations
  - Troubleshooting
metaDescription: Troubleshoot common issues with the Elasticsearch OpenTelemetry integration and resolve data collection problems.
freshnessValidatedDate: never
translationType: machine
---

[Elasticsearch OpenTelemetryインストレーション](/docs/opentelemetry/integrations/elasticsearch/elasticsearch-otel-integration-install)を完了しても、 New Relicにデータが表示されない場合は、以下で問題を見つけて解決手順に従ってください。

<CollapserGroup>
  <Collapser id="troubleshoot-collector-stopped" title="Collectorサービスが停止または失敗しました">
    <strong>確認方法</strong>

    ```bash
    sudo systemctl status otelcol-contrib
    ```

    <strong>解像度</strong>

    * サービスが非アクティブの場合は、開始します。
      <InlineCode>
        sudo systemctl start otelcol-contrib
      </InlineCode>
    * サービスが失敗した場合は、設定エラーを修正して再起動してください。
      <InlineCode>
        sudo systemctl restart otelcol-contrib
      </InlineCode>
  </Collapser>

  <Collapser id="troubleshoot-collector-logs-errors" title="Collectorレポートのスクレイピングまたはエクスポート エラー">
    <strong>確認方法</strong>

    ```bash
    sudo journalctl -u otelcol-contrib.service -f
    ```

    <strong>解像度</strong>

    ログ出力を確認し、根本原因（接続の問題、認証の失敗、権限の問題など）を解決します。
  </Collapser>

  <Collapser id="troubleshoot-connection-refused" title="Elasticsearch を呼び出すときに接続が拒否されました">
    <strong>エラーサンプル</strong>: <InlineCode>
      dial tcp \[::1]:9200: connect: connection refused
    </InlineCode>

    <strong>解像度</strong>

    * <InlineCode>
        config.yaml
      </InlineCode>
      の
      <InlineCode>
        endpoint
      </InlineCode>
      が Elasticsearch のホストとポートと一致していることを確認します。
    * Elasticsearch が実行中であり、コレクター ホストからアクセスできることを確認します。
  </Collapser>

  <Collapser id="troubleshoot-403" title="New Relicへのエクスポート時に403 Forbiddenが発生する">
    <strong>エラーサンプル</strong>: <InlineCode>
      permanent error: 403 Forbidden
    </InlineCode>

    <strong>解像度</strong>

    1. <InlineCode>
         /etc/systemd/system/otelcol-contrib.service.d/environment.conf
       </InlineCode>の<InlineCode>
         NEWRELIC\_LICENSE\_KEY
       </InlineCode>を確認してください。

    2. systemd をリロードし、コレクターを再起動します。

       ```bash
       sudo systemctl daemon-reload
       sudo systemctl restart otelcol-contrib
       ```
  </Collapser>

  <Collapser id="troubleshoot-permission-denied" title="ログ収集時にアクセスが拒否されました">
    <strong>エラーサンプル</strong>: <InlineCode>
      permission denied
    </InlineCode>または <InlineCode>
      cannot open file
    </InlineCode>

    <strong>解像度</strong>

    1. コレクター ユーザーを Elasticsearch グループに追加します。
       ```bash
       sudo usermod -a -G elasticsearch otelcol-contrib
       ```
    2. コレクターを再起動します。
       <InlineCode>
         sudo systemctl restart otelcol-contrib
       </InlineCode>
  </Collapser>

  <Collapser id="troubleshoot-api-reachability" title="コレクターからElasticsearch APIにアクセスできません">
    <strong>確認方法</strong>

    ```bash
    # Unsecured cluster
    curl -I http://localhost:9200

    # With authentication
    curl -u username:password -k https://localhost:9200
    ```

    <strong>解像度</strong>

    クラスターが正常であること、資格情報が有効であること、ファイアウォールまたはセキュリティ設定でアクセスが許可されていることを確認します。
  </Collapser>

  <Collapser id="troubleshoot-missing-entity" title="New Relic UI に Elasticsearch エンティティが見つかりません">
    <strong>解像度</strong>

    * <InlineCode>
        resourcedetection
      </InlineCode>
      プロセッサがすべてのメトリクス パイプラインに含まれていることを確認してください。
    * <InlineCode>
        elasticsearch.cluster.name
      </InlineCode>
      が
      <InlineCode>
        resource/cluster_name_override
      </InlineCode>
      プロセッサ経由で設定されていることを確認します。
  </Collapser>

  <Collapser id="troubleshoot-logs-missing" title="メトリクスは存在するがログがない">
    <strong>解像度</strong>

    * <InlineCode>
        filelog
      </InlineCode>
      受信パスが正しく絶対的であることを確認してください。
    * ログ パイプラインに
      <InlineCode>
        filelog
      </InlineCode>
      レシーバーと
      <InlineCode>
        otlphttp
      </InlineCode>
      エクスポーターの両方が含まれていることを確認します。
  </Collapser>
</CollapserGroup>