---
title: OpenTelemetry Kafka メトリクスリファレンス
tags:
  - Integrations
  - OpenTelemetry
  - Kafka
  - Metrics
metaDescription: 'Complete reference for Kafka metrics collected via OpenTelemetry including Kafka metrics receiver, JMX metrics, and client metrics.'
freshnessValidatedDate: never
translationType: machine
---

This page documents the metrics collected when monitoring Apache Kafka with OpenTelemetry. Metrics are collected via the [Kafka metrics receiver](https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/kafkametricsreceiver), JMX metrics (from OpenTelemetry Java Agent or Prometheus JMX Exporter), and [OpenTelemetry Java agent](https://opentelemetry.io/docs/languages/java/automatic/) for client-side metrics.

## メトリクスの収集方法 [#collection-methods]

OpenTelemetry Kafka monitoring uses two complementary collection methods:

* **[Kafka メトリクス レシーバー](https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/kafkametricsreceiver)**: Kafka のブートストラップ ポートに接続して、クラスタ、トピック、パーティション、および消費者グループ メトリクスを収集します
* **JMX metrics**: Collected via OpenTelemetry Java Agent (self-hosted) or Prometheus JMX Exporter (Kubernetes) to gather detailed broker metrics and JVM metrics

## Kafka メトリクス レシーバー メトリクス [#kafka-metrics-receiver]

これらのメトリクスは、Kafka プロトコル (ブートストラップ ポート) を使用して Kafka ブローカーから収集されます。 [kafkametricsreceiver のメタデータ](https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/receiver/kafkametricsreceiver/metadata.yaml)に基づいており、一部のメトリクスはデフォルトまたは通常の設定で無効になっています。

<CollapserGroup>
  <Collapser id="cluster-metrics" title="クラスターメトリクス">
    <table>
      <thead>
        <tr>
          <th style={{ width: "300px" }}>
            メトリクス名
          </th>

          <th>
            説明
          </th>

          <th>
            タイプ
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `kafka.brokers`
          </td>

          <td>
            クラスター内のブローカーの合計数
          </td>

          <td>
            ゲージ（int）
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="topic-metrics" title="トピックメトリクス">
    <table>
      <thead>
        <tr>
          <th style={{ width: "300px" }}>
            メトリクス名
          </th>

          <th>
            説明
          </th>

          <th>
            タイプ
          </th>

          <th>
            属性
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `kafka.topic.partitions`
          </td>

          <td>
            トピック内のパーティション数
          </td>

          <td>
            合計（整数）
          </td>

          <td>
            トピック
          </td>
        </tr>

        <tr>
          <td>
            `kafka.topic.min_insync_replicas`
          </td>

          <td>
            トピックの同期レプリカの最小数
          </td>

          <td>
            ゲージ（int）
          </td>

          <td>
            トピック
          </td>
        </tr>

        <tr>
          <td>
            `kafka.topic.replication_factor`
          </td>

          <td>
            トピックの複製係数
          </td>

          <td>
            ゲージ（int）
          </td>

          <td>
            トピック
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="partition-metrics" title="パーティションメトリクス">
    <table>
      <thead>
        <tr>
          <th style={{ width: "300px" }}>
            メトリクス名
          </th>

          <th>
            説明
          </th>

          <th>
            タイプ
          </th>

          <th>
            属性
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `kafka.partition.replicas_in_sync`
          </td>

          <td>
            パーティションの同期レプリカの数
          </td>

          <td>
            合計（整数）
          </td>

          <td>
            トピック、パーティション
          </td>
        </tr>

        <tr>
          <td>
            `kafka.partition.replicas_in_sync.total`
          </td>

          <td>
            トピックのすべてのパーティションにわたって集計された同期レプリカの合計数
          </td>

          <td>
            合計（整数）
          </td>

          <td>
            トピック
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="consumer-group-metrics" title="消費者団体メトリクス">
    <table>
      <thead>
        <tr>
          <th style={{ width: "300px" }}>
            メトリクス名
          </th>

          <th>
            説明
          </th>

          <th>
            タイプ
          </th>

          <th>
            属性
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `kafka.consumer_group.members`
          </td>

          <td>
            コンシューマー グループのメンバー数
          </td>

          <td>
            合計（整数）
          </td>

          <td>
            グループ
          </td>
        </tr>

        <tr>
          <td>
            `kafka.consumer_group.offset`
          </td>

          <td>
            トピックのパーティションにおける消費者グループの現在のオフセット
          </td>

          <td>
            ゲージ（int）
          </td>

          <td>
            グループ、トピック、パーティション
          </td>
        </tr>

        <tr>
          <td>
            `kafka.consumer_group.offset_sum`
          </td>

          <td>
            トピックのパーティションにわたる消費者グループのオフセットの合計
          </td>

          <td>
            ゲージ（int）
          </td>

          <td>
            グループ、トピック
          </td>
        </tr>

        <tr>
          <td>
            `kafka.consumer_group.lag`
          </td>

          <td>
            トピックの分割における消費者グループの現在のおおよその遅れ
          </td>

          <td>
            ゲージ（int）
          </td>

          <td>
            グループ、トピック、パーティション
          </td>
        </tr>

        <tr>
          <td>
            `kafka.consumer_group.lag_sum`
          </td>

          <td>
            トピックのすべてのパーティションにわたる消費者グループ ラグの現在のおおよその合計
          </td>

          <td>
            ゲージ（int）
          </td>

          <td>
            グループ、トピック
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

## JMX metrics [#jmx-metrics]

JMX metrics provide detailed Kafka broker and JVM telemetry. These metrics are collected using:

* **Self-hosted Kafka**: [OpenTelemetry Java Agent](/docs/opentelemetry/integrations/kafka/self-hosted#jmx-config) with custom JMX configuration
* **Kubernetes (Strimzi)**: [Prometheus JMX Exporter](/docs/opentelemetry/integrations/kafka/kubernetes-strimzi#configure-jmx-exporter) with New Relic custom configuration

Both methods collect the same set of Kafka broker and JVM metrics documented below:

<CollapserGroup>
  <Collapser id="jmx-kafka-metrics" title="Kafka broker metrics">
    These metrics provide comprehensive Kafka broker telemetry including cluster health, broker performance, and per-topic metrics.

    ### Cluster-wide metrics

    これらのメトリクスはコントローラー ブローカーから収集され、クラスタ全体の情報を提供します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "350px" }}>
            メトリクス名
          </th>

          <th>
            説明
          </th>

          <th>
            タイプ
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `kafka.partition.offline`
          </td>

          <td>
            クラスター内のオフラインのパーティションの数
          </td>

          <td>
            ゲージ
          </td>
        </tr>

        <tr>
          <td>
            `kafka.leader.election.rate`
          </td>

          <td>
            リーダー選挙の集計
          </td>

          <td>
            カウンター
          </td>
        </tr>

        <tr>
          <td>
            `kafka.unclean.election.rate`
          </td>

          <td>
            不正なリーダー選出回数 - 増加はブローカーの失敗を示す
          </td>

          <td>
            カウンター
          </td>
        </tr>

        <tr>
          <td>
            `kafka.cluster.topic.count`
          </td>

          <td>
            クラスター内のトピックの総数
          </td>

          <td>
            ゲージ
          </td>
        </tr>

        <tr>
          <td>
            `kafka.cluster.partition.count`
          </td>

          <td>
            クラスター内のパーティションの総数
          </td>

          <td>
            ゲージ
          </td>
        </tr>

        <tr>
          <td>
            `kafka.broker.fenced.count`
          </td>

          <td>
            クラスター内のフェンスブローカーの数
          </td>

          <td>
            ゲージ
          </td>
        </tr>

        <tr>
          <td>
            `kafka.partition.non_preferred_leader`
          </td>

          <td>
            リーダーが優先リーダーではないトピックパーティションの数
          </td>

          <td>
            ゲージ
          </td>
        </tr>
      </tbody>
    </table>

    ### Broker-level metrics

    <table>
      <thead>
        <tr>
          <th style={{ width: "350px" }}>
            メトリクス名
          </th>

          <th>
            説明
          </th>

          <th>
            タイプ
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `kafka.message.count`
          </td>

          <td>
            ブローカーが受信したメッセージの数
          </td>

          <td>
            カウンター
          </td>
        </tr>

        <tr>
          <td>
            `kafka.request.count`
          </td>

          <td>
            ブローカーが受信したrequestsの数
          </td>

          <td>
            カウンター
          </td>
        </tr>

        <tr>
          <td>
            `kafka.request.failed`
          </td>

          <td>
            失敗したrequestsの数
          </td>

          <td>
            カウンター
          </td>
        </tr>

        <tr>
          <td>
            `kafka.request.time.total`
          </td>

          <td>
            requests処理に費やされた合計時間（ミリ秒）
          </td>

          <td>
            カウンター
          </td>
        </tr>

        <tr>
          <td>
            `kafka.request.time.avg`
          </td>

          <td>
            平均リクエスト処理時間（ミリ秒）
          </td>

          <td>
            ゲージ
          </td>
        </tr>

        <tr>
          <td>
            `kafka.request.time.50p`
          </td>

          <td>
            50 番目のパーセンタイル要求時間 (ミリ秒)
          </td>

          <td>
            ゲージ
          </td>
        </tr>

        <tr>
          <td>
            `kafka.request.time.99p`
          </td>

          <td>
            99 番目のパーセンタイル要求時間 (ミリ秒)
          </td>

          <td>
            ゲージ
          </td>
        </tr>

        <tr>
          <td>
            `kafka.network.io`
          </td>

          <td>
            ブローカーが 1 秒あたりに受信または送信したバイト数 (方向属性: in/out を含む)
          </td>

          <td>
            カウンター
          </td>
        </tr>

        <tr>
          <td>
            `kafka.purgatory.size`
          </td>

          <td>
            煉獄で待機しているrequestsの数（生成およびフェッチ操作）
          </td>

          <td>
            ゲージ
          </td>
        </tr>

        <tr>
          <td>
            `kafka.partition.count`
          </td>

          <td>
            ブローカー上のパーティションの数
          </td>

          <td>
            ゲージ
          </td>
        </tr>

        <tr>
          <td>
            `kafka.partition.under_replicated`
          </td>

          <td>
            このブローカー上の複製不足のパーティションの数
          </td>

          <td>
            ゲージ
          </td>
        </tr>

        <tr>
          <td>
            `kafka.isr.operation.count`
          </td>

          <td>
            同期レプリカ操作（縮小または拡張）
          </td>

          <td>
            カウンター
          </td>
        </tr>

        <tr>
          <td>
            `kafka.lag.max`
          </td>

          <td>
            フォロワーとリーダーのレプリカ間の最大遅延
          </td>

          <td>
            ゲージ
          </td>
        </tr>

        <tr>
          <td>
            `kafka.controller.active.count`
          </td>

          <td>
            このブローカーがアクティブコントローラであるかどうか（0または1）
          </td>

          <td>
            ゲージ
          </td>
        </tr>

        <tr>
          <td>
            `kafka.logs.flush.count`
          </td>

          <td>
            ログフラッシュ回数
          </td>

          <td>
            カウンター
          </td>
        </tr>

        <tr>
          <td>
            `kafka.logs.flush.time.50p`
          </td>

          <td>
            ログのフラッシュ時間 - 50 番目のパーセンタイル (ミリ秒)
          </td>

          <td>
            ゲージ
          </td>
        </tr>

        <tr>
          <td>
            `kafka.logs.flush.time.99p`
          </td>

          <td>
            ログのフラッシュ時間 - 99 パーセンタイル (ミリ秒)
          </td>

          <td>
            ゲージ
          </td>
        </tr>

        <tr>
          <td>
            `kafka.partition.under_min_isr`
          </td>

          <td>
            同期中のレプリカの数が最小値より少ないパーティションの数
          </td>

          <td>
            ゲージ
          </td>
        </tr>

        <tr>
          <td>
            `kafka.broker.uptime`
          </td>

          <td>
            ブローカーの稼働時間（ミリ秒）
          </td>

          <td>
            ゲージ
          </td>
        </tr>

        <tr>
          <td>
            `kafka.broker.leader.count`
          </td>

          <td>
            このブローカーがリーダーであるパーティションの数
          </td>

          <td>
            ゲージ
          </td>
        </tr>
      </tbody>
    </table>

    **プロパティ:**多くのメトリクスには、リクエスト タイプ (フェッチ、生成など) を示す`type`プロパティ、ISR 操作 (縮小、拡張など) の`state` 、またはネットワークI/O (入力、出力) の`direction`プロパティが含まれます。

    ### トピックごとのメトリクス

    <table>
      <thead>
        <tr>
          <th style={{ width: "350px" }}>
            メトリクス名
          </th>

          <th>
            説明
          </th>

          <th>
            タイプ
          </th>

          <th>
            属性
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `kafka.prod.msg.count`
          </td>

          <td>
            トピックごとに受信したメッセージの数
          </td>

          <td>
            カウンター
          </td>

          <td>
            トピック
          </td>
        </tr>

        <tr>
          <td>
            `kafka.topic.io`
          </td>

          <td>
            トピックごとに受信または送信されたバイト数
          </td>

          <td>
            カウンター
          </td>

          <td>
            トピック、方向（内外）
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="jmx-jvm-metrics" title="JVMメトリクス">
    <table>
      <thead>
        <tr>
          <th style={{ width: "350px" }}>
            メトリクス名
          </th>

          <th>
            説明
          </th>

          <th>
            タイプ
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `jvm.memory.heap.used`
          </td>

          <td>
            現在使用されているヒープメモリ（バイト）
          </td>

          <td>
            ゲージ
          </td>
        </tr>

        <tr>
          <td>
            `jvm.memory.heap.max`
          </td>

          <td>
            利用可能な最大ヒープメモリ（バイト）
          </td>

          <td>
            ゲージ
          </td>
        </tr>

        <tr>
          <td>
            `jvm.memory.heap.committed`
          </td>

          <td>
            コミットされたヒープメモリ（バイト）
          </td>

          <td>
            ゲージ
          </td>
        </tr>

        <tr>
          <td>
            `jvm.gc.collections.count`
          </td>

          <td>
            発生したガベージコレクションの合計数
          </td>

          <td>
            カウンター
          </td>
        </tr>

        <tr>
          <td>
            `jvm.gc.collections.elapsed`
          </td>

          <td>
            おおよその累積収集経過時間（ミリ秒）
          </td>

          <td>
            カウンター
          </td>
        </tr>

        <tr>
          <td>
            `jvm.thread.count`
          </td>

          <td>
            合計スレッド数（Kafka の典型的な範囲は 100 ～ 300 スレッド）
          </td>

          <td>
            ゲージ
          </td>
        </tr>

        <tr>
          <td>
            `jvm.system.cpu.load_1m`
          </td>

          <td>
            システム負荷平均 (1 分) - CPU 数を超える場合の集計
          </td>

          <td>
            ゲージ
          </td>
        </tr>

        <tr>
          <td>
            `jvm.cpu.count`
          </td>

          <td>
            利用可能なプロセッサの数
          </td>

          <td>
            ゲージ
          </td>
        </tr>

        <tr>
          <td>
            `jvm.cpu.recent_utilization`
          </td>

          <td>
            JVM プロセスの最近の CPU 使用率 (0.0 ～ 1.0)
          </td>

          <td>
            ゲージ
          </td>
        </tr>

        <tr>
          <td>
            `jvm.system.cpu.utilization`
          </td>

          <td>
            システム全体の最近の CPU 使用率 (0.0 ～ 1.0)
          </td>

          <td>
            ゲージ
          </td>
        </tr>

        <tr>
          <td>
            `jvm.file_descriptor.count`
          </td>

          <td>
            開いているファイル記述子の数 - ulimit の 80% を超える場合の集計
          </td>

          <td>
            ゲージ
          </td>
        </tr>

        <tr>
          <td>
            `jvm.class.count`
          </td>

          <td>
            現在ロードされているクラス数
          </td>

          <td>
            ゲージ
          </td>
        </tr>

        <tr>
          <td>
            `jvm.memory.pool.used`
          </td>

          <td>
            世代別メモリプール使用量（G1 Old Gen、Eden、Survivor）（バイト単位）
          </td>

          <td>
            ゲージ
          </td>
        </tr>

        <tr>
          <td>
            `jvm.memory.pool.max`
          </td>

          <td>
            最大メモリプールサイズ（バイト）
          </td>

          <td>
            ゲージ
          </td>
        </tr>

        <tr>
          <td>
            `jvm.memory.pool.used_after_last_gc`
          </td>

          <td>
            最後の GC 後に使用されたメモリ - 保持されているメモリ ベースライン (バイト) を示します
          </td>

          <td>
            ゲージ
          </td>
        </tr>
      </tbody>
    </table>

    **プロパティ:** JVMメトリクスには、 `name` (GC コレクター名またはメモリ プール名の場合) のようなプロパティが含まれます。
  </Collapser>
</CollapserGroup>

## Kafka クライアント メトリクス ( OpenTelemetry Javaエージェント) [#kafka-client-metrics]

これらのメトリクスは、Kafka 計装が有効になっている[OpenTelemetry Javaエージェントを使用して Kafka プロデューサーおよび消費者アプリケーション インストゥルメント](https://opentelemetry.io/docs/languages/java/automatic/)から収集されます。 これらは、Kafka ブローカーを使用したアプリケーション インタラクションへのクライアント側の可視性を提供し、アプリケーション パースペクティブを提供することでブローカー側のメトリクスを補完します。

<CollapserGroup>
  <Collapser id="producer-metrics" title="プロデューサーメトリクス">
    ### 接続とネットワークのメトリクス

    | メトリクス名                                     | 説明          | 属性             |
    | ------------------------------------------ | ----------- | -------------- |
    | `kafka.producer.connection_count`          | アクティブな接続の数  | クライアントID       |
    | `kafka.producer.connection_creation_rate`  | 新規接続確立率     | クライアントID       |
    | `kafka.producer.connection_creation_total` | 作成された接続の合計数 | クライアントID       |
    | `kafka.producer.connection_close_rate`     | 閉じられた接続の割合  | クライアントID       |
    | `kafka.producer.network_io_rate`           | ネットワーク運用率   | クライアントID       |
    | `kafka.producer.network_io_total`          | 総ネットワーク操作数  | クライアントID       |
    | `kafka.producer.outgoing_byte_rate`        | 送信バイトのレート   | クライアントID、ノードID |
    | `kafka.producer.outgoing_byte_total`       | 送信バイト合計     | クライアントID、ノードID |

    ### リクエストとレスポンスのメトリクス

    | メトリクス名                               | 説明                | 属性             |
    | ------------------------------------ | ----------------- | -------------- |
    | `kafka.producer.request_rate`        | 送信されたrequestsの割合  | クライアントID、ノードID |
    | `kafka.producer.request_total`       | 送信されたrequests合計数  | クライアントID、ノードID |
    | `kafka.producer.request_size_avg`    | 平均リクエストサイズ        | クライアントID、ノードID |
    | `kafka.producer.request_size_max`    | 最大リクエストサイズ        | クライアントID、ノードID |
    | `kafka.producer.request_latency_avg` | 平均リクエストレイテンシ（ミリ秒） | クライアントID、ノードID |
    | `kafka.producer.request_latency_max` | 最大リクエストレイテンシ（ミリ秒） | クライアントID、ノードID |
    | `kafka.producer.response_rate`       | 回答率               | クライアントID、ノードID |
    | `kafka.producer.response_total`      | 受け取った回答の総数        | クライアントID、ノードID |
    | `kafka.producer.requests_in_flight`  | 実行中のrequestsの数    | クライアントID       |

    ### 記録メトリクス

    | メトリクス名                                   | 説明                        | 属性            |
    | ---------------------------------------- | ------------------------- | ------------- |
    | `kafka.producer.record_send_rate`        | 送信されたレコードのレート             | クライアントID、トピック |
    | `kafka.producer.record_send_total`       | 送信されたレコードの合計数             | クライアントID、トピック |
    | `kafka.producer.record_error_rate`       | レコード送信エラー率                | クライアントID、トピック |
    | `kafka.producer.record_error_total`      | レコード送信エラーの合計数             | クライアントID、トピック |
    | `kafka.producer.record_retry_rate`       | レコード再試行率                  | クライアントID、トピック |
    | `kafka.producer.record_retry_total`      | レコード再試行回数合計               | クライアントID、トピック |
    | `kafka.producer.record_size_avg`         | 平均レコードサイズ                 | クライアントID      |
    | `kafka.producer.record_size_max`         | 最大レコードサイズ                 | クライアントID      |
    | `kafka.producer.record_queue_time_avg`   | レコードが送信バッファ内で費やす平均時間（ミリ秒） | クライアントID      |
    | `kafka.producer.record_queue_time_max`   | レコードが送信バッファ内で費やす最大時間（ミリ秒） | クライアントID      |
    | `kafka.producer.records_per_request_avg` | リクエストあたりの平均レコード数          | クライアントID      |

    ### スループット メトリクス

    | メトリクス名                                | 説明          | 属性            |
    | ------------------------------------- | ----------- | ------------- |
    | `kafka.producer.byte_rate`            | 生成されたバイトの速度 | クライアントID、トピック |
    | `kafka.producer.byte_total`           | 生成された合計バイト数 | クライアントID、トピック |
    | `kafka.producer.compression_rate`     | 平均圧縮率       | クライアントID、トピック |
    | `kafka.producer.compression_rate_avg` | 平均圧縮比       | クライアントID      |

    ### メトリクスのバッチ処理

    | メトリクス名                             | 説明       | 属性       |
    | ---------------------------------- | -------- | -------- |
    | `kafka.producer.batch_size_avg`    | 平均バッチサイズ | クライアントID |
    | `kafka.producer.batch_size_max`    | 最大バッチサイズ | クライアントID |
    | `kafka.producer.batch_split_rate`  | バッチ分割率   | クライアントID |
    | `kafka.producer.batch_split_total` | バッチ分割の合計 | クライアントID |

    ### バッファメトリクス

    | メトリクス名                                      | 説明                | 属性       |
    | ------------------------------------------- | ----------------- | -------- |
    | `kafka.producer.buffer_total_bytes`         | バッファメモリ合計         | クライアントID |
    | `kafka.producer.buffer_available_bytes`     | 利用可能なバッファメモリ      | クライアントID |
    | `kafka.producer.buffer_exhausted_rate`      | バッファ枯渇率           | クライアントID |
    | `kafka.producer.buffer_exhausted_total`     | バッファ消費合計          | クライアントID |
    | `kafka.producer.bufferpool_wait_ratio`      | バッファスペースを待つ時間の割合  | クライアントID |
    | `kafka.producer.bufferpool_wait_time_total` | バッファスペースを待機する合計時間 | クライアントID |

    ### I/Oメトリクス

    | メトリクス名                               | 説明             | 属性       |
    | ------------------------------------ | -------------- | -------- |
    | `kafka.producer.io_ratio`            | I/Oに費やされた時間の割合 | クライアントID |
    | `kafka.producer.io_time_ns_avg`      | 平均I/O時間（ns）    | クライアントID |
    | `kafka.producer.io_wait_time_ns_avg` | 平均I/O待機時間（ns）  | クライアントID |
    | `kafka.producer.io_wait_ratio`       | I/O を待つ時間の割合   | クライアントID |
    | `kafka.producer.iotime_total`        | 合計I/O時間        | クライアントID |
    | `kafka.producer.io_waittime_total`   | 合計I/O待機時間      | クライアントID |

    ### メトリクスのスロットリング

    | メトリクス名                                     | 説明             | 属性       |
    | ------------------------------------------ | -------------- | -------- |
    | `kafka.producer.produce_throttle_time_avg` | 平均スロットル時間（ミリ秒） | クライアントID |
    | `kafka.producer.produce_throttle_time_max` | 最大スロットル時間（ミリ秒） | クライアントID |

    ### 認証メトリクス

    | メトリクス名                                                     | 説明              | 属性       |
    | ---------------------------------------------------------- | --------------- | -------- |
    | `kafka.producer.successful_authentication_rate`            | 認証成功率           | クライアントID |
    | `kafka.producer.successful_authentication_total`           | 成功した認証の合計       | クライアントID |
    | `kafka.producer.successful_authentication_no_reauth_total` | 再認証なしで認証に成功     | クライアントID |
    | `kafka.producer.successful_reauthentication_rate`          | 再認証成功率          | クライアントID |
    | `kafka.producer.successful_reauthentication_total`         | 再認証成功回数         | クライアントID |
    | `kafka.producer.failed_authentication_rate`                | 認証失敗率           | クライアントID |
    | `kafka.producer.failed_authentication_total`               | 失敗した認証の合計       | クライアントID |
    | `kafka.producer.failed_reauthentication_rate`              | 再認証失敗率          | クライアントID |
    | `kafka.producer.failed_reauthentication_total`             | 再認証失敗回数         | クライアントID |
    | `kafka.producer.reauthentication_latency_avg`              | 平均再認証レイテンシ (ms) | クライアントID |
    | `kafka.producer.reauthentication_latency_max`              | 最大再認証レイテンシ (ms) | クライアントID |

    ### その他のメトリクス

    | メトリクス名                           | 説明                    | 属性       |
    | -------------------------------- | --------------------- | -------- |
    | `kafka.producer.metadata_age`    | 現在のメタデータの経過時間（秒）      | クライアントID |
    | `kafka.producer.waiting_threads` | バッファスペースを待機しているスレッドの数 | クライアントID |
    | `kafka.producer.select_rate`     | 選択通話率                 | クライアントID |
    | `kafka.producer.select_total`    | 選択通話合計                | クライアントID |
  </Collapser>

  <Collapser id="consumer-metrics" title="消費者メトリクス">
    ### 接続とネットワークのメトリクス

    | メトリクス名                                     | 説明          | 属性             |
    | ------------------------------------------ | ----------- | -------------- |
    | `kafka.consumer.connection_count`          | アクティブな接続の数  | クライアントID       |
    | `kafka.consumer.connection_creation_rate`  | 新規接続確立率     | クライアントID       |
    | `kafka.consumer.connection_creation_total` | 作成された接続の合計数 | クライアントID       |
    | `kafka.consumer.connection_close_rate`     | 閉じられた接続の割合  | クライアントID       |
    | `kafka.consumer.connection_close_total`    | 閉じられた接続の合計数 | クライアントID       |
    | `kafka.consumer.network_io_rate`           | ネットワーク運用率   | クライアントID       |
    | `kafka.consumer.network_io_total`          | 総ネットワーク操作数  | クライアントID       |
    | `kafka.consumer.outgoing_byte_rate`        | 送信バイトのレート   | クライアントID、ノードID |
    | `kafka.consumer.incoming_byte_rate`        | 受信バイトの速度    | クライアントID、ノードID |

    ### リクエストとレスポンスのメトリクス

    | メトリクス名                               | 説明                | 属性             |
    | ------------------------------------ | ----------------- | -------------- |
    | `kafka.consumer.request_rate`        | 送信されたrequestsの割合  | クライアントID、ノードID |
    | `kafka.consumer.request_total`       | 送信されたrequests合計数  | クライアントID、ノードID |
    | `kafka.consumer.request_size_avg`    | 平均リクエストサイズ        | クライアントID、ノードID |
    | `kafka.consumer.request_size_max`    | 最大リクエストサイズ        | クライアントID、ノードID |
    | `kafka.consumer.request_latency_avg` | 平均リクエストレイテンシ（ミリ秒） | クライアントID、ノードID |
    | `kafka.consumer.request_latency_max` | 最大リクエストレイテンシ（ミリ秒） | クライアントID、ノードID |
    | `kafka.consumer.response_rate`       | 回答率               | クライアントID、ノードID |
    | `kafka.consumer.response_total`      | 受け取った回答の総数        | クライアントID、ノードID |

    ### 消費メトリクス

    | メトリクス名                                   | 説明               | 属性            |
    | ---------------------------------------- | ---------------- | ------------- |
    | `kafka.consumer.bytes_consumed_rate`     | 消費バイト数           | クライアントID、トピック |
    | `kafka.consumer.bytes_consumed_total`    | 消費バイト数合計         | クライアントID、トピック |
    | `kafka.consumer.records_consumed_rate`   | 消費されたレコードの割合     | クライアントID、トピック |
    | `kafka.consumer.records_consumed_total`  | 消費されたレコードの合計     | クライアントID、トピック |
    | `kafka.consumer.records_per_request_avg` | リクエストあたりの平均レコード数 | クライアントID、トピック |

    ### 消費者ラグ メトリクス

    | メトリクス名                            | 説明         | 属性                    |
    | --------------------------------- | ---------- | --------------------- |
    | `kafka.consumer.records_lag`      | 記録数の現在の遅れ  | パーティション、クライアントID、トピック |
    | `kafka.consumer.records_lag_avg`  | 平均的な消費者の遅れ | パーティション、クライアントID、トピック |
    | `kafka.consumer.records_lag_max`  | 最大消費者ラグ    | パーティション、クライアントID、トピック |
    | `kafka.consumer.records_lead`     | 現在記録数でリード  | パーティション、クライアントID、トピック |
    | `kafka.consumer.records_lead_avg` | 平均的な消費者リード | パーティション、クライアントID、トピック |
    | `kafka.consumer.records_lead_min` | 最小消費者リード   | パーティション、クライアントID、トピック |

    ### メトリクスを取得する

    | メトリクス名                                   | 説明                 | 属性            |
    | ---------------------------------------- | ------------------ | ------------- |
    | `kafka.consumer.fetch_rate`              | フェッチrequestsのレート   | クライアントID      |
    | `kafka.consumer.fetch_total`             | 合計フェッチrequests     | クライアントID      |
    | `kafka.consumer.fetch_size_avg`          | 平均フェッチサイズ          | クライアントID、トピック |
    | `kafka.consumer.fetch_size_max`          | 最大フェッチサイズ          | クライアントID、トピック |
    | `kafka.consumer.fetch_latency_avg`       | 平均フェッチレイテンシ（ミリ秒）   | クライアントID      |
    | `kafka.consumer.fetch_latency_max`       | 最大フェッチレイテンシ（ミリ秒）   | クライアントID      |
    | `kafka.consumer.fetch_throttle_time_avg` | 平均フェッチスロットル時間（ミリ秒） | クライアントID      |
    | `kafka.consumer.fetch_throttle_time_max` | 最大フェッチスロットル時間（ミリ秒） | クライアントID      |

    ### 消費者グループのコーディネート メトリクス

    | メトリクス名                                       | 説明                | 属性       |
    | -------------------------------------------- | ----------------- | -------- |
    | `kafka.consumer.assigned_partitions`         | 割り当てられたパーティションの数  | クライアントID |
    | `kafka.consumer.commit_rate`                 | オフセットコミット率        | クライアントID |
    | `kafka.consumer.commit_total`                | 合計オフセットコミット       | クライアントID |
    | `kafka.consumer.commit_latency_avg`          | 平均コミットレイテンシ（ミリ秒）  | クライアントID |
    | `kafka.consumer.commit_latency_max`          | 最大コミットレイテンシ（ミリ秒）  | クライアントID |
    | `kafka.consumer.heartbeat_rate`              | 送信されたハートビートのレート   | クライアントID |
    | `kafka.consumer.heartbeat_total`             | 送信されたハートビートの合計    | クライアントID |
    | `kafka.consumer.heartbeat_response_time_max` | 最大ハートビート応答時間 (ms) | クライアントID |
    | `kafka.consumer.last_heartbeat_seconds_ago`  | 最後のハートビートからの秒数    | クライアントID |
    | `kafka.consumer.last_poll_seconds_ago`       | 前回の投票からの秒数        | クライアントID |

    ### メトリクスの再調整

    | メトリクス名                                          | 説明                      | 属性       |
    | ----------------------------------------------- | ----------------------- | -------- |
    | `kafka.consumer.rebalance_total`                | 合計リバランス                 | クライアントID |
    | `kafka.consumer.rebalance_rate_per_hour`        | 1時間あたりのリバランス            | クライアントID |
    | `kafka.consumer.rebalance_latency_avg`          | 平均リバランス レイテンシ (ms)      | クライアントID |
    | `kafka.consumer.rebalance_latency_max`          | 最大リバランス レイテンシ (ms)      | クライアントID |
    | `kafka.consumer.rebalance_latency_total`        | 合計リバランス時間（ミリ秒）          | クライアントID |
    | `kafka.consumer.failed_rebalance_total`         | 失敗したリバランスの合計            | クライアントID |
    | `kafka.consumer.failed_rebalance_rate_per_hour` | 1時間あたりのリバランス失敗数         | クライアントID |
    | `kafka.consumer.last_rebalance_seconds_ago`     | 前回の再バランスからの秒数           | クライアントID |
    | `kafka.consumer.partition_assigned_latency_avg` | 平均パーティション割り当てレイテンシ（ミリ秒） | クライアントID |
    | `kafka.consumer.partition_assigned_latency_max` | 最大パーティション割り当てレイテンシ (ms) | クライアントID |
    | `kafka.consumer.partition_revoked_latency_avg`  | 平均パーティション失効レイテンシ (ms)   | クライアントID |
    | `kafka.consumer.partition_revoked_latency_max`  | 最大パーティション失効レイテンシ (ms)   | クライアントID |
    | `kafka.consumer.partition_lost_latency_avg`     | 平均パーティション損失レイテンシ (ms)   | クライアントID |
    | `kafka.consumer.partition_lost_latency_max`     | 最大パーティション損失レイテンシ (ms)   | クライアントID |

    ### 同期グループ メトリクス

    | メトリクス名                         | 説明          | 属性       |
    | ------------------------------ | ----------- | -------- |
    | `kafka.consumer.sync_rate`     | グループ同期率     | クライアントID |
    | `kafka.consumer.sync_total`    | グループ同期の合計   | クライアントID |
    | `kafka.consumer.sync_time_avg` | 平均同期時間（ミリ秒） | クライアントID |
    | `kafka.consumer.sync_time_max` | 最大同期時間（ミリ秒） | クライアントID |
    | `kafka.consumer.join_rate`     | グループ参加率     | クライアントID |
    | `kafka.consumer.join_total`    | グループ参加総数    | クライアントID |
    | `kafka.consumer.join_time_avg` | 平均参加時間（ミリ秒） | クライアントID |
    | `kafka.consumer.join_time_max` | 最大参加時間（ミリ秒） | クライアントID |

    ### I/Oメトリクス

    | メトリクス名                               | 説明             | 属性       |
    | ------------------------------------ | -------------- | -------- |
    | `kafka.consumer.io_ratio`            | I/Oに費やされた時間の割合 | クライアントID |
    | `kafka.consumer.io_time_ns_avg`      | 平均I/O時間（ns）    | クライアントID |
    | `kafka.consumer.io_wait_time_ns_avg` | 平均I/O待機時間（ns）  | クライアントID |
    | `kafka.consumer.io_wait_ratio`       | I/O を待つ時間の割合   | クライアントID |
    | `kafka.consumer.iotime_total`        | 合計I/O時間        | クライアントID |
    | `kafka.consumer.io_waittime_total`   | 合計I/O待機時間      | クライアントID |

    ### ポーリングメトリクス

    | メトリクス名                                 | 説明                             | 属性       |
    | -------------------------------------- | ------------------------------ | -------- |
    | `kafka.consumer.poll_idle_ratio_avg`   | ポーリング中に消費者がアイドル状態になっている時間の平均割合 | クライアントID |
    | `kafka.consumer.time_between_poll_avg` | ポーリング間の平均時間（ミリ秒）               | クライアントID |
    | `kafka.consumer.time_between_poll_max` | ポーリング間の最大時間（ミリ秒）               | クライアントID |

    ### 認証メトリクス

    | メトリクス名                                                     | 説明              | 属性       |
    | ---------------------------------------------------------- | --------------- | -------- |
    | `kafka.consumer.successful_authentication_rate`            | 認証成功率           | クライアントID |
    | `kafka.consumer.successful_authentication_total`           | 成功した認証の合計       | クライアントID |
    | `kafka.consumer.successful_authentication_no_reauth_total` | 再認証なしで認証に成功     | クライアントID |
    | `kafka.consumer.successful_reauthentication_rate`          | 再認証成功率          | クライアントID |
    | `kafka.consumer.successful_reauthentication_total`         | 再認証成功回数         | クライアントID |
    | `kafka.consumer.failed_authentication_rate`                | 認証失敗率           | クライアントID |
    | `kafka.consumer.failed_authentication_total`               | 失敗した認証の合計       | クライアントID |
    | `kafka.consumer.failed_reauthentication_rate`              | 再認証失敗率          | クライアントID |
    | `kafka.consumer.failed_reauthentication_total`             | 再認証失敗回数         | クライアントID |
    | `kafka.consumer.reauthentication_latency_avg`              | 平均再認証レイテンシ (ms) | クライアントID |
    | `kafka.consumer.reauthentication_latency_max`              | 最大再認証レイテンシ (ms) | クライアントID |

    ### その他のメトリクス

    | メトリクス名                        | 説明     | 属性       |
    | ----------------------------- | ------ | -------- |
    | `kafka.consumer.select_rate`  | 選択通話率  | クライアントID |
    | `kafka.consumer.select_total` | 選択通話合計 | クライアントID |
  </Collapser>
</CollapserGroup>

## メトリックの属性 [#metric-attributes]

メトリクスは、次のプロパティを使用してフィルタリングおよびグループ化できます。

**共通の属性:**

* `kafka.cluster.name` - カフカの名前 (すべてメトリクス)
* `instrumentation.provider` - 常に`opentelemetry` (すべてのメトリクス)
* `topic` - Kafkaトピック名
* `partition` - パーティション番号
* `group` - 消費者グループ名
* `broker.id` - ブローカー識別子 (JMX メトリクス)
* `client-id` - クライアント識別子 (クライアント メトリクス)
* `node-id` - ブローカーノード識別子 (クライアントメトリクス)
* `type` - リクエストの種類（例：フェッチ、生成）
* `direction` - データの方向（入力、出力）
* `state` - ISR動作状態（縮小、拡大）
* `name` - GCコレクターまたはメモリプール名( JVMメトリクス)

## 次のステップ [#next-steps]

* [Query and visualize your data](/docs/opentelemetry/integrations/kafka/find-and-query-data) - Find metrics in New Relic UI, write NRQL queries, create dashboards, and set up alerts
* [Query metric data types](/docs/data-apis/understand-data/metric-data/query-metric-data-type/) - Learn advanced techniques for working with OpenTelemetry metrics