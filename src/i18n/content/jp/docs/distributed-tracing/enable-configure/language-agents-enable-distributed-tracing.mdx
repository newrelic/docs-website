---
title: 言語エージェントおよびディストリビューティッド（分散）トレーシング
tags:
  - Understand dependencies
  - Distributed tracing
  - Enable and configure
metaDescription: How to enable distributed tracing or Infinite Tracing for APM agents.
---

import clogo from 'images/clogo.png'

import gologo from 'images/gologo.png'

import javalogo from 'images/javalogo.png'

import dotnetlogo from 'images/dotnetlogo.png'

import nodejslogo from 'images/nodejslogo.png'

import pythonlogo from 'images/pythonlogo.png'

import phplogo from 'images/phplogo.png'

import rubylogo from 'images/rubylogo.png'

New Relicには、C、Go、Java、Node.js、.NET、PHP、PythonおよびRubyのAPM言語エージェントがあります。これらはそれぞれ、ディストリビューティッド（分散）トレーシングのパワーを活用する方法を提供しています。

* [標準ディストリビューティッド（分散）トレーシングのクイックスタート（推奨）:](#quick-start-apm) 早く始める方法
* [無限トレーシング:](#infinite-tracing) 標準ディストリビューティッド（分散）トレーシングの高度な代替
* [古いAPMエージェント:](#older-agents) 古いAPMエージェントがある場合のトレーシングオプション
* [手動インストゥルメント:](#manual-instrumentation) 自動インストゥルメントが機能しない場合のヒント

<Callout variant="tip">
  始める前に状況について理解を深めたい場合は、次のトピックをチェックしてください。

  * [スパンサンプリングのしくみ](/docs/understand-dependencies/distributed-tracing/get-started/how-new-relic-distributed-tracing-works#sampling)は、ディストリビューティッド（分散）トレーシングオプションについて説明しています。
  * [APMへの影響](/docs/apm/distributed-tracing/getting-started/transition-guide-distributed-tracing)が、現在のAPMユーザーであるが、ディストリビューティッド（分散）トレーシングを設定していない場合は何を期待すべきかを物語っています。
</Callout>

## 標準ディストリビューティッド（分散）トレーシングのクイックスタート（推奨）: [#quick-start-apm]

サービスにNew Relic APMエージェントをインストールしていない、または追加サービスをインストゥルメントする場合は、これが[標準ディストリビューティッド（分散）トレーシング](/docs/distributed-tracing/concepts/how-new-relic-distributed-tracing-works/#head-based)を設定する最善のアプローチです。

<Callout variant="tip">
  ディストリビューティッド（分散）トレーシングを設定するにはNew Relicアカウントが必要です。アカウントがない場合は、すぐに  
        [無料アカウントを作成](/docs/accounts/accounts-billing/account-setup/create-your-new-relic-account)できます。
</Callout>

### 手順1: サービスの特定

各トレースデータをNew Relicに送信できるように、どのサービスをインストゥルメントするかを把握します。

### 手順2: 各サービスをAPMエージェントにインストゥルメント [#update-agents]

各サービスのインストゥルメントに役立つさまざまな言語のインストレーション支援があります。

インストゥルメントする各サービスのインストレーション支援を実行し、各インストレーションが一意のアプリケーション名となるようにする必要があります。

任務を開始するには、言語のリンクをクリックします。

<TechTileGrid>
  <TechTile
    name="New Relic APM: C"
    to="https://one.newrelic.com/launcher/nr1-core.settings?pane=eyJuZXJkbGV0SWQiOiJ0dWNzb24ucGxnLWluc3RydW1lbnQtZXZlcnl0aGluZyJ9&cards[0]=eyJuZXJkbGV0SWQiOiJzZXR1cC1uZXJkbGV0cy5zZXR1cC1jLWludGVncmF0aW9uIiwiYWNjb3VudElkIjoyNjQwNDA5fQ==&platform[accountId]=2498654&platform[timeRange][duration]=1800000&platform[$isFallbackTimeRange]=true"
    icon={<img src={clogo} alt="C"/>}
  />

  <TechTile
    name="New Relic APM: Golang"
    to="https://one.newrelic.com/launcher/nr1-core.settings?pane=eyJuZXJkbGV0SWQiOiJ0dWNzb24ucGxnLWluc3RydW1lbnQtZXZlcnl0aGluZyJ9&cards[0]=eyJuZXJkbGV0SWQiOiJzZXR1cC1uZXJkbGV0cy5zZXR1cC1nby1pbnRlZ3JhdGlvbiIsImFjY291bnRJZCI6MjY0MDQwOX0=&platform[accountId]=2498654&platform[timeRange][duration]=1800000&platform[$isFallbackTimeRange]=true"
    icon={<img src={gologo} alt="Golang"/>}
  />

  <TechTile
    name="New Relic APM: Java"
    to="https://one.newrelic.com/launcher/nr1-core.settings?pane=eyJuZXJkbGV0SWQiOiJ0dWNzb24ucGxnLWluc3RydW1lbnQtZXZlcnl0aGluZyJ9&cards[0]=eyJuZXJkbGV0SWQiOiJzZXR1cC1uZXJkbGV0cy5zZXR1cC1qYXZhLWludGVncmF0aW9uIiwiYWNjb3VudElkIjoyNjQwNDA5fQ==&platform[accountId]=2498654&platform[timeRange][duration]=1800000&platform[$isFallbackTimeRange]=true"
    icon={<img src={javalogo} alt="Java"/>}
  />

  <TechTile
    name="New Relic APM: .NET"
    to="https://one.newrelic.com/launcher/nr1-core.settings?pane=eyJuZXJkbGV0SWQiOiJ0dWNzb24ucGxnLWluc3RydW1lbnQtZXZlcnl0aGluZyJ9&cards[0]=eyJuZXJkbGV0SWQiOiJzZXR1cC1uZXJkbGV0cy5zZXR1cC1kb3RuZXQtaW50ZWdyYXRpb24iLCJhY2NvdW50SWQiOjI2NDA0MDl9&platform[accountId]=2498654&platform[timeRange][duration]=1800000&platform[$isFallbackTimeRange]=true"
    icon={<img src={dotnetlogo} alt=".NET"/>}
  />

  <TechTile
    name="New Relic APM: Node.js"
    to="https://one.newrelic.com/launcher/nr1-core.settings?pane=eyJuZXJkbGV0SWQiOiJ0dWNzb24ucGxnLWluc3RydW1lbnQtZXZlcnl0aGluZyJ9&cards[0]=eyJuZXJkbGV0SWQiOiJzZXR1cC1uZXJkbGV0cy5zZXR1cC1ub2RlLWludGVncmF0aW9uIiwiYWNjb3VudElkIjoyNjQwNDA5fQ==&platform[accountId]=2498654&platform[timeRange][duration]=1800000&platform[$isFallbackTimeRange]=true"
    icon={<img src={nodejslogo} alt="Node.js"/>}
  />

  <TechTile
    name="New Relic APM: PHP"
    to="https://one.newrelic.com/launcher/nr1-core.settings?pane=eyJuZXJkbGV0SWQiOiJ0dWNzb24ucGxnLWluc3RydW1lbnQtZXZlcnl0aGluZyJ9&cards[0]=eyJuZXJkbGV0SWQiOiJzZXR1cC1uZXJkbGV0cy5zZXR1cC1waHAtaW50ZWdyYXRpb24iLCJhY2NvdW50SWQiOjI2NDA0MDl9&platform[accountId]=2498654&platform[timeRange][duration]=1800000&platform[$isFallbackTimeRange]=true"
    icon={<img src={phplogo} alt="PHP"/>}
  />

  <TechTile
    name="New Relic APM: Python"
    to="https://one.newrelic.com/launcher/nr1-core.settings?pane=eyJuZXJkbGV0SWQiOiJ0dWNzb24ucGxnLWluc3RydW1lbnQtZXZlcnl0aGluZyJ9&cards[0]=eyJuZXJkbGV0SWQiOiJzZXR1cC1uZXJkbGV0cy5zZXR1cC1weXRob24taW50ZWdyYXRpb24iLCJhY2NvdW50SWQiOjI2NDA0MDl9&platform[accountId]=2498654&platform[timeRange][duration]=1800000&platform[$isFallbackTimeRange]=true"
    icon={<img src={pythonlogo} alt="Python"/>}
  />

  <TechTile
    name="New Relic APM: Ruby"
    to="https://one.newrelic.com/launcher/nr1-core.settings?pane=eyJuZXJkbGV0SWQiOiJ0dWNzb24ucGxnLWluc3RydW1lbnQtZXZlcnl0aGluZyJ9&cards[0]=eyJuZXJkbGV0SWQiOiJzZXR1cC1uZXJkbGV0cy5zZXR1cC1ydWJ5LWludGVncmF0aW9uIiwiYWNjb3VudElkIjoyNjQwNDA5fQ==&platform[accountId]=2498654&platform[timeRange][duration]=1800000&platform[$isFallbackTimeRange]=true"
    icon={<img src={rubylogo} alt="Ruby"/>}
  />
</TechTileGrid>

<Callout variant="tip">
  インストレーション支援があるこのクイックスタートアプローチでは、実行する各サービスのディストリビューティッド（分散）トレーシングが自動的に有効化されますが、ディストリビューティッド（分散）トレーシングに参加するNew Relic APMエージェントがすでにある場合は、手動でディストリビューティッド（分散）トレーシングを有効化する必要があります。[古いAPMエージェントのオプション](#older-agents)を参照してください。
</Callout>

### 手順3: トレースの表示 [#view-traces]

各サービスをAPMエージェントにインストゥルメント後、アプリケーションにトラフィックを生成すると、トレースを取得できます。UIでトレースを表示する方法は、以下の2つです。

<CollapserGroup>
  <Collapser
    id="entity-explorer"
    title="特定のサービスを含むトレースの表示"
  >
    以下は、特定のサービスのトレースを表示できる方法の1つです。

    1. **[one.newrelic.com](https://one.newrelic.com/)**に移動します。
    2. 上部のメニューバーで**APM**をクリックします。
    3. サービスをクリックします。
    4. 左側のナビゲーションの**モニター**セクションで、**ディストリビューティッド（分散）トレーシング**をクリックします。
    5. 必要なトレースが表示されない場合は、`trace.id`でフィルタリングできます。
  </Collapser>

  <Collapser
    id="dt-launcher"
    title="アカウント全体でトレースを表示"
  >
    このオプションを使用すると、アクセスできる組織のすべてのNew Relicアカウント全体ですべてのトレースを検索できます。

    1. **[one.newrelic.com](https://one.newrelic.com/)**に移動します。
    2. 上部のメニューバーの**データを参照**をクリックしてから、**トレース**をクリックします。
    3. 左のペインでエンティティを選択します。
    4. 必要なトレースが表示されない場合は、`trace.id`でフィルタリングできます。
  </Collapser>
</CollapserGroup>

UIでトレースを検索する追加ヘルプ:

* [ディストリビューティッド (分散) トレーシングUIの理解と使用](/docs/distributed-tracing/ui-data/understand-use-distributed-tracing-ui)
* [ディストリビューティッド（分散）トレーシングデータのクエリ](/docs/understand-dependencies/distributed-tracing/ui-data/query-distributed-trace-data)

## 無限トレーシング（高度なオプション）のセットアップ [#infinite-tracing]

APMエージェント（上）の標準ディストリビューティッド（分散）トレーシングはトレースの最大10%を取得しますが、すべてのデータを分析し、最も関連のあるトレースを検索すると、無限トレーシングを設定できます。この標準ディストリビューティッド（分散）トレーシングの代替は、C SDKを除く、すべてのAPM言語エージェントに使用できます。

<Callout variant="tip">
  この機能の詳細については、[無限トレーシング](/docs/understand-dependencies/distributed-tracing/infinite-tracing/introduction-infinite-tracing)を参照してください。
</Callout>

始める前に、[要件](/docs/understand-dependencies/distributed-tracing/infinite-tracing/introduction-infinite-tracing#requirements)を満たしていることを確認します。

### 手順1: 上のクイックスタートのディストリビューティッド（分散）トレーシングのインストゥルメントを完了します。

無限トレーシング設定は、標準ディストリビューティッド（分散）トレーシングの[クイックスタート](#quick-start-apm)からインストゥルメンテーション手順で構築されます。

### 手順2: トレースオブザーバの設定 [#provision-trace-observer]

トレースオブザーバは、すべてのトレースを収集および分析するNew Relic AWSベースのサービスです。[トレースオブザーバ](/docs/understand-dependencies/distributed-tracing/infinite-tracing/set-trace-observer)の手順に従います。終了したら、ここにトレースオブザーバ情報を返し、次の手順でエージェントの設定を続行します。

### 手順3: 無限トレーシングのエージェントの設定

無限トレーシング設定には、標準ディストリビューティッド（分散）トレーシングとトレースオブザーバに関する情報が含まれます。下の言語エージェントの設定を検索します。

<CollapserGroup>
  <Collapser
    id="c-sdk-config"
    title="C SDK"
  >
    無限トレーシングはC SDKには使用できません。
  </Collapser>

  <Collapser
    id="go-config"
    title="Go"
  >
    設定の概要は、次のとおりです。設定の詳細については、[Goアプリケーションのディストリビューティッド（分散）トレーシングの有効化](/docs/agents/go-agent/features/enable-distributed-tracing-go-agent)を参照してください。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            タイプ
          </th>

          <th>
            必要な設定
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            無限トレーシング
          </td>

          <td>
            設定オプション:

            * `newrelic.Config`構成:

              ```
              app, err := newrelic.NewApplication(
                  newrelic.ConfigAppName(<var>YOUR_APP_NAME</var>),
                  newrelic.ConfigLicense(<var>YOUR_LICENSE_KEY</var>),
                  func(cfg *newrelic.Config) {
                      cfg.DistributedTracer.Enabled = true
                      cfg.InfiniteTracing.TraceObserver.Host = <var>YOUR_TRACE_OBSERVER_HOST</var>
                  },
              )
              ```

            * 環境変数：

              ```
              NEW_RELIC_DISTRIBUTED_TRACING_ENABLED=true
              NEW_RELIC_INFINITE_TRACING_TRACE_OBSERVER_HOST=<a href="/docs/understand-dependencies/distributed-tracing/infinite-tracing/set-trace-observer#ui-endpoints"><var>YOUR_TRACE_OBSERVER_HOST</var></a>
              ```
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="java-config"
    title="Java"
  >
    設定の概要は、次のとおりです。設定の詳細については、[Javaエージェント設定: 設定ファイル](/docs/agents/java-agent/configuration/java-agent-configuration-config-file)を参照してください。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            タイプ
          </th>

          <th>
            必要な設定
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            無限トレーシング
          </td>

          <td>
            設定オプション:

            * 設定ファイル（`newrelic.yml`) （`共通`スタンザで2スペースを意図）:

              ```
              distributed_tracing:
                  enabled: true
                infinite_tracing:
                  trace_observer:
                    host: <a href="/docs/understand-dependencies/distributed-tracing/infinite-tracing/set-trace-observer#ui-endpoints"><var>"YOUR_TRACE_OBSERVER_HOST"</var></a>
              ```

            * Javaシステムプロパティ:

              ```
              -Dnewrelic.config.distributed_tracing.enabled=true
              -Dnewrelic.config.infinite_tracing.trace_observer.host=<var>"YOUR_TRACE_OBSERVER_HOST"</var>
              ```

            * 環境変数：

              ```
              NEW_RELIC_DISTRIBUTED_TRACING_ENABLED=true
              NEW_RELIC_INFINITE_TRACING_TRACE_OBSERVER_HOST=<a href="/docs/understand-dependencies/distributed-tracing/infinite-tracing/set-trace-observer#ui-endpoints"><var>"YOUR_TRACE_OBSERVER_HOST"</var></a>
              ```
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="dot-net-config"
    title=".NET"
  >
    設定の概要は、次のとおりです。設定の詳細については、[.NETエージェント設定](/docs/agents/net-agent/configuration/net-agent-configuration#distributed_tracing)を参照してください。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            タイプ
          </th>

          <th>
            必要な設定
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            無限トレーシング
          </td>

          <td>
            設定オプション:

            * 設定ファイル（`newrelic.config`）：

              ```
              <configuration . . . >
                 <distributedTracing enabled="true" />
                 <infiniteTracing>
                    <trace_observer host="<a href='/docs/understand-dependencies/distributed-tracing/infinite-tracing/set-trace-observer#ui-endpoints'><var>YOUR_TRACE_OBSERVER_HOST</var></a>" />
                 </infiniteTracing>
              </configuration>
              ```

            * 環境変数：

              ```
              NEW_RELIC_DISTRIBUTED_TRACING_ENABLED=true
              NEW_RELIC_INFINITE_TRACING_TRACE_OBSERVER_HOST="<a href="/docs/understand-dependencies/distributed-tracing/infinite-tracing/set-trace-observer#ui-endpoints"><var>YOUR_TRACE_OBSERVER_HOST</var></a>"
              ```
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="node-config"
    title="Node.js"
  >
    設定の概要は、次のとおりです。設定の詳細については、[Node.jsエージェント設定](/docs/agents/nodejs-agent/installation-configuration/nodejs-agent-configuration#distributed-tracing)を参照してください。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            タイプ
          </th>

          <th>
            必要な設定
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            無限トレーシング
          </td>

          <td>
            設定オプション:

            設定ファイル（`newrelic.js`）：

            ```
            distributed_tracing: {
              enabled: true
            }
            infinite_tracing: {
              trace_observer: {
                host: '<a href="/docs/understand-dependencies/distributed-tracing/infinite-tracing/set-trace-observer#ui-endpoints"><var>YOUR_TRACE_OBSERVER_HOST</var></a>'
              }
            }
            ```

            環境変数：

            ```
            NEW_RELIC_DISTRIBUTED_TRACING_ENABLED=true
            NEW_RELIC_INFINITE_TRACING_TRACE_OBSERVER_HOST="<var>YOUR_TRACE_OBSERVER_HOST</var>"
            ```
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="php-config"
    title="PHP"
  >
    設定の概要は、次のとおりです。設定の詳細については、[PHPエージェント向けディストリビューティッド（分散）トレーシング](/docs/agents/php-agent/features/distributed-tracing-php-agent)を参照してください。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            タイプ
          </th>

          <th>
            必要な設定
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            無限トレーシング
          </td>

          <td>
            設定オプション:

            * 設定ファイル（`newrelic.ini`）：

              ```
              newrelic.distributed_tracing_enabled = true
              newrelic.span_events_enabled = true
              newrelic.infinite_tracing.trace_observer.host= "<var><a href="/docs/understand-dependencies/distributed-tracing/infinite-tracing/set-trace-observer#ui-endpoints">YOUR_TRACE_OBSERVER_HOST</a>"</var>
              ```
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="python-config"
    title="Python"
  >
    設定の概要は、次のとおりです。設定の詳細については、[Pythonエージェント設定](/docs/agents/python-agent/configuration/python-agent-configuration#distributed-tracing-settings)を参照してください。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            タイプ
          </th>

          <th>
            必要な設定
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            無限トレーシング
          </td>

          <td>
            このインストレーションコマンドでライブラリをプルダウンしてから、設定ファイルまたは環境変数を設定します。

            ```
            pip install newrelic[infinite-tracing]
            ```

            設定オプション:

            設定ファイル（`newrelic.ini`）：

            ```
            distributed_tracing.enabled = true
            infinite_tracing.trace_observer_host= <var>YOUR_TRACE_OBSERVER_HOST</var>
            ```

            環境変数：

            ```
            NEW_RELIC_DISTRIBUTED_TRACING_ENABLED=true
            NEW_RELIC_INFINITE_TRACING_TRACE_OBSERVER_HOST="<a href="/docs/understand-dependencies/distributed-tracing/infinite-tracing/set-trace-observer#ui-endpoints"><var>YOUR_TRACE_OBSERVER_HOST</var></a>"
            ```
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="ruby-config"
    title="Ruby"
  >
    設定の概要は、次のとおりです。設定の詳細については、[Rubyエージェント設定](/docs/agents/ruby-agent/configuration/ruby-agent-configuration#distributed_tracing)を参照してください。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            タイプ
          </th>

          <th>
            必要な設定
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            無限トレーシング
          </td>

          <td>
            設定オプション:

            * 設定ファイル（`newrelic.yml`）：

              ```
              distributed_tracing: 
                enabled: true
              infinite_tracing: 
                trace_observer: 
                  host: '<a href="/docs/understand-dependencies/distributed-tracing/infinite-tracing/set-trace-observer#ui-endpoints"><var>YOUR_TRACE_OBSERVER_HOST</var></a>'
              ```

            * 環境変数：

              ```
              NEW_RELIC_DISTRIBUTED_TRACING_ENABLED=true
              NEW_RELIC_INFINITE_TRACING_TRACE_OBSERVER_HOST="<a href="/docs/understand-dependencies/distributed-tracing/infinite-tracing/set-trace-observer#ui-endpoints"><var>YOUR_TRACE_OBSERVER_HOST</var></a>"
              ```
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

### 手順 4. （オプション）無限トレーシングのカスタマイズ

エージェント設定を追加すると、New Relic UIにデータの表示が開始されるはずです。データ分析に時間を費やすと、以下の無限トレーシングの一部を調整する必要があります。

* [トレースオブザーバモニタリングの設定](/docs/distributed-tracing/infinite-tracing/infinite-tracing-configure-trace-observer-monitoring)
* [span属性トレースフィルターの設定](/docs/distributed-tracing/infinite-tracing/infinite-tracing-configure-span-attribute-trace-filter)
* [ランダムトレースフィルターの設定](/docs/distributed-tracing/infinite-tracing/infinite-tracing-configure-random-trace-filter)

## 古いAPMエージェントのオプション [#older-agents]

古いAPMエージェントがある場合は、このセクションを使用して必要なディストリビューティッド（分散）トレーシング機能がサポートされているかを把握します。

互換性情報に従うのは、基本設定を標準ディストリビューティッド（分散）トレーシングへの切り替えを示すセクションです。古いエージェントが無限トレーシングをサポートし、設定する場合は、[上の](#infinite-tracing)手順を参照します。

### 互換性ガイド

下の言語エージェントを検索し、既存のエージェントがディストリビューティッド（分散）トレーシングを使用できるかを確認します。

<CollapserGroup>
  <Collapser
    id="c-sdk"
    title="C SDK"
  >
    必要なC SDKバージョンを[インストール（コンパイル）](/docs/agents/c-sdk/install-configure/install-c-sdk-compile-link-your-code)、またはそのバージョンに[更新](/docs/agents/c-sdk/install-configure/update-your-c-sdk-library)します。最善の結果を得るには、[最新バージョンのC SDK](/docs/release-notes/agent-release-notes/c-sdk-release-notes)に更新してください。

    <table>
      <thead>
        <tr>
          <th style={{ width: "250px" }}>
            オプション
          </th>

          <th>
            C SDKのバージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            標準ディストリビューティッド（分散）トレーシング
          </td>

          <td>
            1.1.0 以上（W3Cトレースコンテキストは利用できません）
          </td>
        </tr>

        <tr>
          <td>
            無限トレーシング
          </td>

          <td>
            利用不可
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="go-version"
    title="Go"
  >
    必要なGoエージェントバージョンを[インストール](/docs/agents/go-agent/installation/install-new-relic-go)、またはそのバージョンに[更新](/docs/agents/go-agent/installation/install-new-relic-go)します。最善の結果を得るには、[Goエージェントの最新バージョン](/docs/release-notes/agent-release-notes/go-release-notes)に更新してください。

    <table>
      <thead>
        <tr>
          <th style={{ width: "250px" }}>
            オプション
          </th>

          <th>
            Goエージェントのバージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            標準ディストリビューティッド（分散）トレーシング
          </td>

          <td>
            2.1.0 以上

            W3Cトレースコンテキストを使用：3.1.0以上
          </td>
        </tr>

        <tr>
          <td>
            無限トレーシング
          </td>

          <td>
            v3.5.0（W3Cトレースコンテキストを含む）

            サポートされている環境: Go 1.9以上
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="java"
    title="Java"
  >
    必要なJavaエージェントバージョンを[インストール](/docs/agents/java-agent/installation/install-java-agent)、またはそのバージョンに[更新](/docs/agents/java-agent/installation/upgrade-java-agent)します。最善の結果を得るには、[最新のJavaエージェントバージョンに更新](/docs/release-notes/agent-release-notes/java-release-notes)します。

    <Callout variant="important">
      JVMの`networkaddress.cache.ttl`セキュリティ設定は永久に設定しないでください（つまり、`-1`)。このネットワーキングプロパティの詳細情報については、[Oracle Network Propertiesのドキュメント](https://docs.oracle.com/javase/7/docs/technotes/guides/net/properties.html)にアクセスしてください。
    </Callout>

    <table>
      <thead>
        <tr>
          <th style={{ width: "250px" }}>
            タイプ
          </th>

          <th>
            Javaエージェントバージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            標準ディストリビューティッド（分散）トレーシング
          </td>

          <td>
            4.3.0以上

            W3Cトレースコンテキストを使用: 5.10以上
          </td>
        </tr>

        <tr>
          <td>
            無限トレーシング
          </td>

          <td>
            5.12.1以上（W3Cトレースコンテキストを含む）

            サポートされている環境：

            * Java 8: 252以上に更新

            * Java 9以上のすべてのバージョン

              <Callout variant="tip">
                特別な場合については、[無限トレーシング: Java 7および8でのSSLの設定](/docs/understand-dependencies/distributed-tracing/other-requirements/infinite-tracing-configuring-ssl-java-7-8)を参照してください。
              </Callout>
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="dot-net-version"
    title=".NET"
  >
    必要な.NETエージェントバージョンを[インストール](/docs/agents/net-agent/installation/net-agent-install-introduction)、またはそのバージョンに[更新](/docs/agents/net-agent/installation/update-net-agent)します。最善の結果を得るには、[最新の.NETエージェントバージョン](/docs/release-notes/agent-release-notes/net-release-notes)に更新します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "250px" }}>
            オプション
          </th>

          <th>
            .NETエージェントのバージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            標準ディストリビューティッド（分散）トレーシング
          </td>

          <td>
            8.6.45.0以上

            W3Cトレースコンテキストを使用: 8.27.139.0以上
          </td>
        </tr>

        <tr>
          <td>
            無限トレーシング
          </td>

          <td>
            8.30.0（W3Cトレースコンテキストを含む）

            サポートされている環境：

            * .NET Framework 4.5以上
            * .NET Core 2.0以上
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="node-version"
    title="Node.js"
  >
    必要なNode.jsエージェントバージョンを[インストール](/docs/agents/nodejs-agent/installation-configuration/install-nodejs-agent)、またはそのバージョンに[更新](/docs/agents/nodejs-agent/installation-configuration/upgrade-nodejs-agent)します。最善の結果を得るには、[最新のNode.jsエージェントバージョン](/docs/release-notes/agent-release-notes/nodejs-release-notes)に更新します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "250px" }}>
            オプション
          </th>

          <th>
            Node.jsエージェントバージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            標準ディストリビューティッド（分散）トレーシング
          </td>

          <td>
            4.7.0以上

            W3Cトレースコンテキストを使用: 6.4以上
          </td>
        </tr>

        <tr>
          <td>
            無限トレーシング
          </td>

          <td>
            7.3.0 （W3Cトレースコンテキストを含む）

            サポートされている環境: Nodeバージョン10.10.0以上
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="php-version"
    title="PHP"
  >
    必要なPHPエージェントバージョンを[インストール](/docs/agents/php-agent/getting-started/introduction-new-relic-php)、またはそのバージョンに[更新](/docs/agents/php-agent/installation/upgrade-php-agent)します。最善の結果を得るには、[最新PHPエージェントバージョン](/docs/release-notes/agent-release-notes/php-release-notes)に更新します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "250px" }}>
            オプション
          </th>

          <th>
            PHPエージェントのバージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            標準ディストリビューティッド（分散）トレーシング
          </td>

          <td>
            8.4以上

            W3Cトレースコンテキストを使用: 9.8以上
          </td>
        </tr>

        <tr>
          <td>
            無限トレーシング
          </td>

          <td>
            9.12.0.268以上
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="python-version"
    title="Python"
  >
    必要なPythonエージェントバージョンを[インストール](/docs/agents/python-agent/installation/standard-python-agent-install)、またはそのバージョンに[更新](/docs/agents/python-agent/installation-configuration/upgrade-python-agent)します。最善の結果を得るには、[最新のPythonエージェントのバージョン](/docs/release-notes/agent-release-notes/python-release-notes)に更新します。

    <table>
      <thead>
        <tr>
          <th style={{ width: "250px" }}>
            オプション
          </th>

          <th>
            Pythonエージェントのバージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            標準ディストリビューティッド（分散）トレーシング
          </td>

          <td>
            4.2.0.100以上

            W3Cトレースコンテキストを使用: 5.6以上
          </td>
        </tr>

        <tr>
          <td>
            無限トレーシング
          </td>

          <td>
            5.12.0.140（W3Cトレースコンテキストを含む）

            サポートされている環境: CPythonのみ（pypyはサポートされていません）
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="ruby-version"
    title="Ruby"
  >
    必要なRubyエージェントバージョンを[インストール](/docs/agents/ruby-agent/installation/install-new-relic-ruby-agent)、またはそのバージョンに[更新](/docs/agents/ruby-agent/installation/update-ruby-agent)します。最善の結果を得るには、[Rubyエージェントの最新バージョン](/docs/release-notes/agent-release-notes/ruby-release-notes)に更新します。

    また、無限トレーシング用の追加のRuby エージェントgemをインストールします。

    <table>
      <thead>
        <tr>
          <th style={{ width: "250px" }}>
            オプション
          </th>

          <th>
            Rubyエージェントのバージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            標準ディストリビューティッド（分散）トレーシング
          </td>

          <td>
            [newrelic_rpm](https://rubygems.org/gems/newrelic_rpm) 5.3.0.346 以上

            W3Cトレースコンテキストを使用: [newrelic_rpm](https://rubygems.org/gems/newrelic_rpm) 6.9以上
          </td>
        </tr>

        <tr>
          <td>
            無限トレーシング
          </td>

          <td>
            [newrelic_rpm ](https://rubygems.org/gems/newrelic_rpm)6.11.0.365 以上（W3Cトレースコンテキストを含む）

            [newrelic-infinite_tracing ](https://rubygems.org/gems/newrelic-infinite_tracing)6.11.0.375以上
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

### 古いエージェントの標準ディストリビューティッド（分散）トレーシングの設定 [#configure-agents]

ディストリビューティッド（分散）トレーシングは、設定全体で有効化されます。以下のエージェント特定のセクションを確認してください。エージェント設定の一般ヘルプについては、[エージェントの設定](/docs/agents/manage-apm-agents/configuration/configure-agent)を参照してください。

<Callout variant="important">
  サーバーサイドコンフィグレーションは、無限トレーシングでは使用できません。
</Callout>

<CollapserGroup>
  <Collapser
    id="c-sdk-config-standard"
    title="C SDK"
  >
    設定の概要は、次のとおりです。設定の詳細については、[Cアプリケーションについてディストリビューティッド（分散）トレーシングの有効化](/docs/agents/c-sdk/instrumentation/enable-distributed-tracing-your-c-applications)を参照してください。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            タイプ
          </th>

          <th>
            必要な設定
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            標準ディストリビューティッド（分散）トレーシング
          </td>

          <td>
            設定オプション:

            * `newrelic_app_config_t` 構成:

              ```
              newrelic_app_config_t* config;
              config = newrelic_create_app_config(app_name, license_key);
              config->distributed_tracing.enabled = true;
              ```
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="go-config-standard"
    title="Go"
  >
    設定の概要は、次のとおりです。設定の詳細については、[Goアプリケーションのディストリビューティッド（分散）トレーシングの有効化](/docs/agents/go-agent/features/enable-distributed-tracing-go-agent)を参照してください。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            タイプ
          </th>

          <th>
            必要な設定
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            標準ディストリビューティッド（分散）トレーシング
          </td>

          <td>
            設定オプション:

            * `ConfigOption`構成:

              ```
              newrelic.NewApplication(
                newrelic.ConfigAppName("Example App"),
                newrelic.ConfigLicense(os.Getenv("NEW_RELIC_LICENSE_KEY")),
                newrelic.ConfigDistributedTracerEnabled(true),
              )
              ```

            * 環境変数：

              ```
              NEW_RELIC_DISTRIBUTED_TRACING_ENABLED=true
              ```
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="java-config-standard"
    title="Java"
  >
    設定の概要は、次のとおりです。設定の詳細については、[Javaエージェント設定: 設定ファイル](/docs/agents/java-agent/configuration/java-agent-configuration-config-file)を参照してください。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            タイプ
          </th>

          <th>
            必要な設定
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            標準ディストリビューティッド（分散）トレーシング
          </td>

          <td>
            設定オプション:

            * 設定ファイル（`newrelic.yml`) （`共通`スタンザで2スペースを意図）:

              ```
              distributed_tracing:
                  enabled: true
              ```

            * Javaシステムプロパティ:

              ```
              -Dnewrelic.config.distributed_tracing.enabled=true
              ```

            * 環境変数：

              ```
              NEW_RELIC_DISTRIBUTED_TRACING_ENABLED=true
              ```
          </td>
        </tr>

        <tr>
          <td>
            無限トレーシング
          </td>

          <td>
            設定オプション:

            * 設定ファイル（`newrelic.yml`) （`共通`スタンザで2スペースを意図）:

              ```
              distributed_tracing:
                  enabled: true
              infinite_tracing:
                trace_observer:
                  host: <a href="/docs/understand-dependencies/distributed-tracing/infinite-tracing/set-trace-observer#ui-endpoints"><var>"YOUR_TRACE_OBSERVER_HOST"</var></a>
              ```

            * Javaシステムプロパティ:

              ```
              -Dnewrelic.config.distributed_tracing.enabled=true
              -Dnewrelic.config.infinite_tracing.trace_observer.host=<a href="/docs/understand-dependencies/distributed-tracing/infinite-tracing/set-trace-observer#ui-endpoints"><var>"YOUR_TRACE_OBSERVER_HOST"</var></a>
              ```

            * 環境変数：

              ```
              NEW_RELIC_DISTRIBUTED_TRACING_ENABLED=true
              NEW_RELIC_INFINITE_TRACING_TRACE_OBSERVER_HOST=<a href="/docs/understand-dependencies/distributed-tracing/infinite-tracing/set-trace-observer#ui-endpoints"><var>"YOUR_TRACE_OBSERVER_HOST"</var></a>
              ```
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="dot-net-config-standard"
    title=".NET"
  >
    設定の概要は、次のとおりです。設定の詳細については、[.NETエージェント設定](/docs/agents/net-agent/configuration/net-agent-configuration#distributed_tracing)を参照してください。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            タイプ
          </th>

          <th>
            必要な設定
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            標準ディストリビューティッド（分散）トレーシング
          </td>

          <td>
            設定オプション:

            * 設定ファイル（`newrelic.config`）：

              ```
              <configuration . . . >
                 <distributedTracing enabled="true" />
              </configuration>
              ```

            * 環境変数：

              ```
              NEW_RELIC_DISTRIBUTED_TRACING_ENABLED=true
              ```
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="node-config-standard"
    title="Node.js"
  >
    設定の概要は、次のとおりです。設定の詳細については、[Node.jsエージェント設定](/docs/agents/nodejs-agent/installation-configuration/nodejs-agent-configuration#distributed-tracing)を参照してください。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            タイプ
          </th>

          <th>
            必要な設定
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            標準ディストリビューティッド（分散）トレーシング
          </td>

          <td>
            設定オプション:

            設定ファイル（`newrelic.js`）：

            ```
            distributed_tracing: {
              enabled: true
            }
            ```

            環境変数：

            ```
            NEW_RELIC_DISTRIBUTED_TRACING_ENABLED=true
            ```
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="php-config-standard"
    title="PHP"
  >
    設定の概要は、次のとおりです。設定の詳細については、[PHPエージェント向けディストリビューティッド（分散）トレーシング](/docs/agents/php-agent/features/distributed-tracing-php-agent)を参照してください。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            タイプ
          </th>

          <th>
            必要な設定
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            標準ディストリビューティッド（分散）トレーシング
          </td>

          <td>
            設定オプション:

            * 設定ファイル（`newrelic.ini`）：

              ```
              newrelic.distributed_tracing_enabled = true
              ```
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="python-config-standard"
    title="Python"
  >
    設定の概要は、次のとおりです。設定の詳細については、[Pythonエージェント設定](/docs/agents/python-agent/configuration/python-agent-configuration#distributed-tracing-settings)を参照してください。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            タイプ
          </th>

          <th>
            必要な設定
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            標準ディストリビューティッド（分散）トレーシング
          </td>

          <td>
            設定ファイル（`newrelic.ini`）：

            ```
            distributed_tracing.enabled = true
            ```

            環境変数：

            ```
            NEW_RELIC_DISTRIBUTED_TRACING_ENABLED=true
            ```
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="ruby-config-standard"
    title="Ruby"
  >
    設定の概要は、次のとおりです。設定の詳細については、[Rubyエージェント設定](/docs/agents/ruby-agent/configuration/ruby-agent-configuration#distributed_tracing)を参照してください。

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            タイプ
          </th>

          <th>
            必要な設定
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            標準ディストリビューティッド（分散）トレーシング
          </td>

          <td>
            設定オプション:

            * 設定ファイル（`newrelic.yml`）：

              ```
              distributed_tracing:
                      enabled: true
              ```

            * 環境変数：

              ```
              NEW_RELIC_DISTRIBUTED_TRACING_ENABLED=true
              ```
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

<Callout variant="tip">
  プロキシ設定についてサポートが必要な場合は、[プロキシサポート](/docs/understand-dependencies/distributed-tracing/other-requirements/infinite-tracing-proxy-support)を参照してください。
</Callout>

## 手動でのインストゥルメント（自動インストゥルメントを行えない場合） [#agent-apis]

**推奨:**カスタムインストゥルメントを行う前に、以下をお読みになることをお勧めします。

* [ディストリビューティッド（分散）トレーシングの仕組み](/docs/apm/distributed-tracing/getting-started/how-new-relic-distributed-tracing-works)
* [データの欠落をトラブルシューティング](/docs/apm/distributed-tracing/troubleshooting/troubleshooting-missing-trace-data)

サービスでトレースヘッダーがその他のサービスに渡されない場合は、ディストリビューティッド（分散）トレーシングのペイロードAPIを使用して、[サービスの呼び出し](#calling-service)および[呼び出されたサービス](#called-service)をインストゥルメントできます。サービスの呼び出しでは、API呼び出しを使用して、呼び出されたサービスにより認められるペイロードを生成します。

<CollapserGroup>
  <Collapser
    id="calling-service"
    title="サービスの呼び出しをインストゥルメント"
  >
    サービスの呼び出しをインストゥルメントするには：

    1. サービスの呼び出しを監視する[APMエージェントのバージョン](#compatibility-requirements)が、ディストリビューティッド（分散）トレーシングをサポートしていることを確認します。

    2. ディストリビューティッド（分散）トレースペイロードを生成するエージェントAPIコールの呼び出し[: C SDK](/docs/agents/c-sdk/instrumentation/enable-distributed-tracing-your-c-applications) \| [Go](/docs/agents/go-agent/features/distributed-tracing-go#create-manually) \| [Java](/docs/agents/java-agent/api-guides/guide-using-java-agent-api#trace-calls) \| [.NET](/docs/agents/net-agent/net-agent-api/itransaction#CreateDistributedTracePayload) \| [Node.js](/docs/agents/nodejs-agent/api-guides/nodejs-agent-api#transaction-handle-createDistributedTracePayload) \| [PHP](/docs/agents/php-agent/features/distributed-tracing-php#manual) \| [Python](/docs/agents/python-agent/python-agent-api/create_distributed_trace_payload) \| [Ruby](/docs/agents/ruby-agent/api-guides/guide-using-ruby-agent-api#distributed)。

       <Callout variant="important">
         トレースでスパンの順序を適切に保つため、**ペイロードを送信するスパンのコンテキストでペイロードを生成していることを確認します**。
       </Callout>

    3. そのペイロードを、宛先のサービスに行われた呼び出し（例、はヘッダー内）に追加します。

    4. （オプション）外部の呼び出しとして呼び出しを特定します。

       * [C SDK](https://github.com/newrelic/c-sdk/blob/master/GUIDE.md#distributed-tracing)
       * [Go](/docs/agents/go-agent/get-started/instrument-go-segments#go-external-segments)
       * [Java](https://newrelic.github.io/java-agent-api/javadoc/index.html?com/newrelic/api/agent/TracedMethod.html)
       * .NET: 該当なし
       * [Node.js](/docs/agents/nodejs-agent/api-guides/nodejs-agent-api#custom-instrumentation-api)
       * PHP: 該当なし
       * [Python](/docs/agents/python-agent/python-agent-api/external-trace)
       * [Ruby](/docs/agents/ruby-agent/api-guides/guide-using-ruby-agent-api#externals)
  </Collapser>

  <Collapser
    id="called-service"
    title="呼び出されたサービスをインストゥルメント"
  >
    呼び出されたサービスをインストゥルメントするには：

    1. 呼び出されたサービスを監視する[APMエージェントのバージョン](#compatibility-requirements)が、ディストリビューティッド（分散）トレーシングをサポートしていることを確認します。

    2. 呼び出されたサービスのNew RelicエージェントがNew Relicトランザクションを特定しない場合は、エージェントAPIを使用してトランザクションを宣言します。

       <CollapserGroup>
         <Collapser
           id="c-sdk-create"
           title="C SDK"
         >
           トランザクションが進行していないことを示す方法: `newrelic_create_distributed_trace_payload()`がコールされると、`NULL`ポインターが返されます。この問題を解決するには、手順に従い、C SDKを使用して[トランザクションを作成](/docs/agents/c-sdk/instrumentation/instrument-your-app-c-sdk)します。
         </Collapser>

         <Collapser
           id="go-create"
           title="Go"
         >
           トランザクションが進行していないことを示す方法: `Transaction.InsertDistributedTraceHeaders(h http.Header)`がコールされると、ヘッダーは挿入されません。トランザクションを作成する場合は、[Goトランザクションのインストゥルメント](/docs/agents/go-agent/instrumentation/instrument-go-transactions)を参照してください。
         </Collapser>

         <Collapser title="Java">
           トランザクションが進行していないことを示す方法: `Transaction.insertDistributedTraceHeaders(Headers)`がコールされると、ヘッダーは挿入されません（このAPIにはエージェント6.4.0+が必要です）。トランザクションを作成する場合は、[Javaエージェントトランザクション関連のAPI](/docs/agents/java-agent/api-guides/guide-using-java-agent-api#transactions)を参照してください。
         </Collapser>

         <Collapser
           id="dotnet-create"
           title=".NET"
         >
           トランザクションが進行していないことを示す方法: `CreateDistributedTracePayload()` は[空のペイロード](/docs/agents/net-agent/net-agent-api/idistributedtracepayload)を返します。トランザクションを作成する場合は、[.NETカスタムインストゥルメンテーションの概要](/docs/agents/net-agent/custom-instrumentation/introduction-net-custom-instrumentation)を参照してください。
         </Collapser>

         <Collapser
           id="node-create"
           title="Node.js"
         >
           トランザクションが進行していないことを示す方法: Node.jsエージェントログはエラーが以下に似ていることをレポートします。

           ```
           No transaction found when calling Transaction.acceptDistributedTracePayload.
           ```

           [`startWebTransaction`](/docs/agents/nodejs-agent/api-guides/nodejs-agent-api#startWebTransaction)を使用してウェブトランザクションを作成、または[`startBackgroundTransaction`](/docs/agents/nodejs-agent/api-guides/nodejs-agent-api#startBackgroundTransaction)を使用して[ウェブ以外のトランザクション](/docs/apm/transactions/intro-transactions/monitor-background-processes-other-non-web-transactions)を取得します。
         </Collapser>

         <Collapser
           id="php-create"
           title="PHP"
         >
           トランザクションが進行していないことを示す方法: `newrelic_insert_distributed_trace_headers()`は`false`を返します。トランザクションを作成する場合は、[newrelic_start_transaction](/docs/agents/php-agent/php-agent-api/newrelic_start_transaction)を参照してください。
         </Collapser>

         <Collapser
           id="python-create"
           title="Python"
         >
           トランザクションが進行していないことを示す: `transaction = current_transaction()`が実行されると、`トランザクション`は`なし`です。または、`result = accept_distributed_trace_payload(payload)`を実行している場合は、結果は`False`です。

           [`background_task`](/docs/agents/python-agent/python-agent-api/background_task)を使用して、[ウェブ以外のトランザクション](/docs/apm/transactions/intro-transactions/monitor-background-processes-other-non-web-transactions#define)をレポートします。Pythonインストゥルメンテーションの詳細については、[トランザクションとセグメントの監視](/docs/agents/python-agent/api-guides/guide-using-python-agent-api#transaction-segments)を参照してください。
         </Collapser>

         <Collapser
           id="ruby-create"
           title="Ruby"
         >
           ラックベースのウェブフレームワークを使用しており、New Relicのラックインストゥルメンテーションが有効になっている場合は、Rubyエージェントがトランザクションの開始を処理します。その他の使用例については、[`add_transaction_tracer`APIメソッド](/docs/agents/ruby-agent/api-guides/ruby-custom-instrumentation#transaction-tracers)を参照してください。
         </Collapser>
       </CollapserGroup>

    3. 受信した呼び出しからペイロードを抽出します（例、ヘッダーで）。

    4. ペイロードを受け入れるコールの呼び出し: [C SDK](/docs/agents/c-sdk/instrumentation/enable-distributed-tracing-your-c-applications) \| [Go](/docs/agents/go-agent/features/distributed-tracing-go#create-manually) \| [Java](/docs/agents/java-agent/api-guides/guide-using-java-agent-api#trace-calls) \| [.NET](/docs/agents/net-agent/net-agent-api/itransaction#AcceptDistributedTracePayload) \| [PHP](/docs/agents/php-agent/features/distributed-tracing-php#manual) \| [Node.js](/docs/agents/nodejs-agent/api-guides/nodejs-agent-api#transaction-handle-acceptDistributedTracePayload) \| [Python](/docs/agents/python-agent/python-agent-api/accept_distributed_trace_payload) \| [Ruby](/docs/agents/ruby-agent/api-guides/guide-using-ruby-agent-api#distributed)。
  </Collapser>
</CollapserGroup>
