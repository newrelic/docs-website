---
title: Cloud Cost Intelligence - Azure
tags:
  - cloud cost intelligence
  - azure
  - azure cost management
  - cloud cost optimization
  - cci azure
metaDescription: 'Connect your Azure billing to New Relic Cloud Cost Intelligence to monitor, analyze, and optimize cloud spending across Azure services.'
redirect:
  - /docs/cci/financial-intelligence/cci-azure
freshnessValidatedDate: '2025-10-15T00:00:00.000Z'
translationType: machine
---

<Callout title="プレビュー">
  この機能はまだ開発中ですが、ぜひお試しください。

  この機能は現在、弊社の[プレリリース ポリシー](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy)に従ってプレビュー プログラムの一部として提供されています。
</Callout>

Azure の課金を Cloud Cost Intelligence に接続して、Azure インフラストラクチャのコストを完全に監視および最適化します。サービスおよびリソース グループ全体の支出パターン、リソースの使用状況、コストの割り当てをリアルタイムで把握できます。AzureのCloud Cost Intelligence使用すると、次のことが可能になります。

* **リソース使用率の最適化**- 十分に活用されていない、またはコストのかかる Azure サービスと VM を見つけて、サブスクリプションとリソース グループ間の割り当てを調整します。
* **経費の管理**- より適切な財務上の意思決定を行うために、計算、ストレージ、ネットワーキング、データベース サービスなど、 Azure環境の特定のコスト要因を確認します。
* **効率性の向上**- Azure のリソースと予算を効率的に使用するためのビジネス目標に沿ったリソース管理戦略に重点を置きます。
* **マルチサブスクリプションのコストを**監視 - 1 つのダッシュボードから複数のAzureサブスクリプションと管理グループにわたる支出を追跡します
* **コストの説明責任を有効にする**- Azureタグとリソース グループ組織を使用して、部門レベルのコスト割り当てとチャージバックを実装します。
* **予算を積極的に管理**- 超過を防止し財務管理を維持するために、 Azure支出額と予算制限のアラートを設定します。

## 前提条件

Azure を Cloud Cost Intelligence に接続する前に、次のものを用意してください。

* アクティブな課金アカウントを持つ**Azure サブスクリプション**。
* 監視したいサブスクリプションの**投稿者または所有者の役割**。
* **Azure Cost Management 機能へのアクセス**。
* サブスクリプションまたは管理グループの**課金閲覧権限**。
* **Azure課金エクスポートの完了 設定**: これにより、接続プロセスに必要なストレージ アカウント、コンテナー、ディレクトリ パスが確立されます。 詳細については、 [「 Azure Billing Export 設定」](#azure-billing-export-setup)を参照してください。

<CollapserGroup>
  <Collapser id="azure-billing-export-setup" title="Azure課金エクスポート設定">
    以下に指定されている要件に一致する請求エクスポートが既に存在するかどうかを確認します。

    * **一致するエクスポートが存在する場合**: 既存のエクスポートを使用してセットアップ プロセスを続行します。
    * **一致するエクスポートが存在しない場合は**、以下の手順に従って新しい請求エクスポートを作成します。

    1. Azure コスト管理にアクセスする

       1. **Azure Console &gt; Cost Management &amp; Billing &gt; Billing Scope**に移動します。
       2. **Settings** \[設定]セクションを展開し、 **Exports** \[エクスポート]をクリックします。

    2. 新しいエクスポートを作成

       1. **Create** \[作成]をクリックします。
       2. エクスポート タイプとして**Cost and Usage (FOCUS**) \[コストと使用状況 (FOCUS)]を選択します。

       <Callout variant="important">
         EA および MCA の場合、エクスポート タイプの形式は、**Cost and usage details (FOCUS) : 1.2-preview\..**
       </Callout>

       3. 識別のためにエクスポート プレフィックスを指定します。

    3. エクスポートの設定

       次の点を使用してエクスポートを構成します。

       <table>
         <thead>
           <tr>
             <th width={200}>
               パラメータ
             </th>

             <th width={200}>
               価値
             </th>

             <th>
               説明
             </th>
           </tr>
         </thead>

         <tbody>
           <tr>
             <td>
               データの種類
             </td>

             <td>
               コストと使用状況の詳細（FOCUS） - プレビュー
             </td>

             <td>
               FOCUS形式で詳細なコストと使用状況情報を提供します
             </td>
           </tr>

           <tr>
             <td>
               エクスポート名
             </td>

             <td>
               あなたの選んだわかりやすい名前
             </td>

             <td>
               エクスポート用の意味のある識別子
             </td>
           </tr>

           <tr>
             <td>
               データセットのバージョン
             </td>

             <td>
               1.2-preview (最新のデータセット スキーマ ファイル)
             </td>

             <td>
               利用可能な最新のスキーマバージョン
             </td>
           </tr>

           <tr>
             <td>
               頻度
             </td>

             <td>
               月初から現在までのコストの毎日のエクスポート
             </td>

             <td>
               毎日のエクスポートでは、月間のコスト情報を取得します。
             </td>
           </tr>

           <tr>
             <td>
               エクスポートの説明
             </td>

             <td>
               選択した意味のある説明
             </td>

             <td>
               輸出目的に関する背景
             </td>
           </tr>
         </tbody>
       </table>

    4. ストレージ設定を構成する

       エクスポートの設定が完了したら、 **Next** \[次へ]をクリックしてストレージの設定に進みます。

       次の仕様でストレージ設定を構成します。

       <table>
         <thead>
           <tr>
             <th width={200}>
               設定
             </th>

             <th width={200}>
               価値
             </th>

             <th>
               説明
             </th>
           </tr>
         </thead>

         <tbody>
           <tr>
             <td>
               ストレージタイプ
             </td>

             <td>
               BLOBストレージ
             </td>

             <td>
               コストデータ用の Azure Blob Storage
             </td>
           </tr>

           <tr>
             <td>
               保存先ストレージ
             </td>

             <td>
               既存のストレージ アカウントを使用するか、新しいアカウントを作成します
             </td>

             <td>
               請求データの保存場所
             </td>
           </tr>

           <tr>
             <td>
               コンテナとディレクトリ
             </td>

             <td>
               既存のコンテナ/ディレクトリを使用するか、新しいものを作成する
             </td>

             <td>
               請求書エクスポートの組織構造
             </td>
           </tr>

           <tr>
             <td>
               圧縮タイプ
             </td>

             <td>
               寄木細工
             </td>

             <td>
               最適なストレージ効率とクエリパフォーマンスを提供します
             </td>
           </tr>

           <tr>
             <td>
               データの上書き
             </td>

             <td>
               はい
             </td>

             <td>
               既存のデータの更新が可能
             </td>
           </tr>

           <tr>
             <td>
               ファイルのパーティション分割
             </td>

             <td>
               はい
             </td>

             <td>
               効率的なデータ組織と検索を可能にする
             </td>
           </tr>
         </tbody>
       </table>

       <Callout variant="important">
         ストレージ アカウントは**(US) East US**に置くことをお勧めします。これにより、送信データ転送コストを節約できます。ストレージ タイプは**Azure Blob ストレージ**である必要があります。
       </Callout>

    5. 設定を完了する

       1. 構成されたすべての設定を確認します。
       2. **Create**「作成」をクリックして、請求書エクスポート設定を完了します。
       3. エクスポートが**エクスポート**リストに表示されることを確認します。

       <Callout variant="tip">
         * FOCUS（FinOps Open Cost and Usage Specification）フォーマットは現在プレビュー段階です
         * データセットバージョン1.2-previewは、利用可能な最新のスキーマバージョンを表します。
         * 毎日のエクスポートは月間のコスト情報を取得します
         * Parquet 圧縮により、最適なストレージ効率とクエリ パフォーマンスが実現します。
       </Callout>
  </Collapser>
</CollapserGroup>

## Azure Cloud Cost Intelligenceに接続する

<Steps>
  <Step>
    ### アカウントを選択してください

    Azure 課金エクスポートの設定が完了したので、Azure 課金を New Relic に接続する準備が整いました。まず、New Relic アカウントを選択します。

    1. <DNT>[**one.newrelic.com**](https://one.newrelic.com) &gt; **All Capabilities** &gt; **Cloud Cost Intelligence - Azure**</DNT>に移動します。
    2. ドロップダウンからアカウントを選択し、 **Continue** \[続行]をクリックします。
  </Step>

  <Step>
    ### Azure請求アカウントを接続する

    ここで、Azure の課金データを New Relic にリンクする接続の詳細を指定します。Azure 課金アカウントと、課金エクスポートが保存されるストレージの場所の両方の情報が必要になります。

    1. 次の Azure 課金情報を入力します。

    <table>
      <thead>
        <tr>
          <th width={220}>
            フィールド
          </th>

          <th>
            説明
          </th>

          <th>
            場所
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            **Azure 契約の種類**
          </td>

          <td>
            ドロップダウンから契約の種類を選択します。
          </td>

          <td>
            **Azure Console &gt; Cost Management + Billing &gt; Settings &gt; Properties**に移動します。詳細については、 [「Azure Portal の課金アカウントとスコープ」](https://learn.microsoft.com/en-us/azure/cost-management-billing/manage/view-all-accounts)を参照してください。
          </td>
        </tr>

        <tr>
          <td>
            **テナントID**
          </td>

          <td>
            組織の Microsoft Entra ID インスタンスの一意の識別子を入力します。
          </td>

          <td>
            **[Microsoft Entra 管理センター](https://entra.microsoft.com/#home)**へアクセス
          </td>
        </tr>

        <tr>
          <td>
            **請求先アカウントID**
          </td>

          <td>
            Azure 課金アカウント ID を入力します。
          </td>

          <td>
            **Azure Console &gt; Cost Management + Billing &gt; Settings &gt; Properties**に移動します。詳細については、 [「課金管理」](https://learn.microsoft.com/en-us/azure/cost-management-billing/manage/direct-ea-administration#to-view-enrollment-properties)を参照してください。
          </td>
        </tr>

        <tr>
          <td>
            **Azure ストレージ アカウント名**
          </td>

          <td>
            セットアップ時に作成された、課金エクスポートに使用するストレージ アカウントの名前を入力します。送信データ転送コストを削減するには、**米国東部 (US)**のストレージ アカウントを使用します。ストレージ タイプは**Azure Blob ストレージ**である必要があります。
          </td>

          <td />
        </tr>

        <tr>
          <td>
            **ストレージコンテナ名**
          </td>

          <td>
            課金エクスポート ファイルを保持するストレージ アカウント内のコンテナー名を入力します。
          </td>

          <td>
            **[Microsoft Azure](https://portal.azure.com/#home) &gt; Subscription &gt; Storage account &gt; Container。****注**: このコンテナーの次のステップで、 New Relicサービス プリンシパルへのアクセスを許可する必要があります。
          </td>
        </tr>

        <tr>
          <td>
            **ディレクトリパス**
          </td>

          <td>
            コンテナ内で課金データが保存される基本パスを入力します (例: 2025 年 10 月の場合は`20251001-20251031` )。**注**: 課金エクスポートをコンテナのルートに直接公開する場合は、このフィールドを空のままにしておきます。
          </td>

          <td />
        </tr>
      </tbody>
    </table>

    2. 必要な情報をすべて入力したら、 **Continue** \[続行]をクリックして次の手順に進みます。
  </Step>

  <Step>
    ### New Relicに請求データへのアクセスを許可する

    Azure 接続の詳細を入力したので、New Relic にはストレージ コンテナーから課金データを読み取る権限が必要です。この手順により、New Relic サービス プリンシパル ( **msazurecostdata** ) が課金エクスポートに安全にアクセスできるようになります。

    1. New Relic インターフェースの**Initiate Connection** \[接続の開始]ボタンをクリックします。
    2. **Microsoft 認証**フローにリダイレクトされます。

    <Callout variant="tip">
      この手順にはAzureの承認が必要です。
    </Callout>

    3. 認証要求を確認して承認します。
    4. 承認されると、小さなファイル (0 KB) がシステムにダウンロードされます。このファイルは安全に削除できます。
  </Step>

  <Step>
    ### サービスプリンシパルが追加されたことを確認する

    認証要求を承認した後、New Relic サービス プリンシパルが Azure 環境に正常に追加されたことを確認します。

    1. **Microsoft Entra アカウント**の**Enterprise Applications** \[エンタープライズ アプリケーション]に移動します。
    2. サービス プリンシパル**msazurecostdata**がリストに表示されていることを確認します。

    <Callout variant="tip">
      エンタープライズ アプリケーションの表示に関するヘルプについては、[Microsoft Entra のドキュメント](https://learn.microsoft.com/en-us/entra/identity/enterprise-apps/view-applications-portal)を参照してください。
    </Callout>
  </Step>

  <Step>
    ### サービスプリンシパルに読み取り権限を割り当てる

    課金エクスポートへの読み取り専用アクセスのために、\*\* ストレージ BLOB データ読み取り\*\* ロールをサービス プリンシパルに割り当て、ストレージ アカウントへのアクセスと IAM ロールの割り当てを変更する権限を確保します。

    1. 課金エクスポートが公開されているストレージ アカウント コンテナーを開きます。左側のナビゲーション メニューから**Access Control (IAM)** \[アクセス制御 (IAM)]を選択します。
    2. **Role Assignments** \[ロールの割り当て]タブで、 **Add** \[追加]または**Add role assignment** \[ロールの割り当ての追加]をクリックします。
    3. 課金エクスポートへの読み取り専用アクセスを付与するには、ロール リストから**Storage Blob Data Reader** \[ストレージ BLOB データ リーダー]を選択します。
    4. **Add Members** \[メンバーの追加]セクションで、 `msazurecostdata` (検証済みのサービス プリンシパル) を検索して選択します。
    5. 役割割り当ての設定を確認します。 **Review + Assign** \[確認 + 割り当て]をクリックし、ロールの割り当てリストに`msazurecostdata`表示されていることを確認します。
  </Step>

  <Step>
    ### 接続を確認する

    上記の手順をすべて完了したら、次の点を確認してください。

    * サービス プリンシパル**msazurecostdata** はエンタープライズ アプリケーションで表示されます
    * サービス プリンシパルに**Storage Blob Data Reader** \[ストレージ BLOB データ リーダー]ロールが割り当てられている
    * ロールの割り当てが正しいストレージ アカウント コンテナーに適用されます
    * New Relicインターフェースで接続テストが正常に完了しました

    <Callout variant="tip">
      **セキュリティに関する注意**: サービス プリンシパルは、課金データに対して読み取り専用アクセス権のみを持ちます。データの書き込み、変更、削除はできません。アクセスは、指定した課金エクスポート コンテナーのみに制限されます。
    </Callout>
  </Step>

  <Step>
    ### 次のステップ

    * New RelicがAzureの課金エクスポートの処理を開始します
    * 初期データ処理には最大12時間かかる場合があります
    * 処理が完了すると、コスト概要ダッシュボードにコストデータが表示されます。

    <Callout variant="important">
      初めてデータを処理する場合は最大 12 時間かかる場合があります。
    </Callout>
  </Step>

  <Step>
    ### 自分のデータを見る

    処理が完了したら、 [**Cost Overview **\[コストの概要\]](/docs/cci/financial-intelligence/cloud-cost-insights)に移動して Azure コスト データを表示し、クラウド支出の最適化を開始します。
  </Step>
</Steps>