---
title: New Relicを使用したアラート条件の作成
metaDescription: How to create an alert with New Relic
freshnessValidatedDate: never
translationType: human
---

import alertsCreate from 'images/alerts_screenshot-crop_create-query.webp'

import alertsSignal from 'images/alerts_screenshot-crop_signal-select.webp'

import alertsTune from 'images/alerts_screenshot-crop_signal-tune.webp'

import alertsThresholds from 'images/alerts_screenshot-crop_set-thresholds.webp'

import alertsDetails from 'images/alerts_screenshot-crop_condition-details.webp'

import alertsNRQL from 'images/alerts_screenshot-crop_NRQL-query.webp'

import alertsNewCreate from 'images/alerts_screenshot-crop_create-new-query.webp'

import alertsGoldenCreate from 'images/alerts_screenshot-crop_golden-metrics.webp'

import alertsGoldenEntities from 'images/alerts_screenshot-crop_golden-metric-entities.webp'

import alertsOtherMetrics from 'images/alerts_screenshot-crop_other-metrics.webp'

New Relicでアラート条件を作成するには、チャート、NRQLクエリ、ゴールデンメトリクスを使用する3つの方法があります。作成プロセスの開始部分は選択したオプションによって異なりますが、その後の手順はすべて同じです。つまり、ある方法で条件を作成すると、それによって得た経験が、他のオプションのいずれかを使用して作成した他の条件に引き継がれます。

このチュートリアルには、前述の3つのオプションすべての手順が含まれているため、お好きな方法で最初の条件から始めることができます。最初の手順でたどりたいパスを選択するだけで、手順が終わるまでにNew Relicを使用して最初のアラート条件を作成することができます。

<Callout variant="tip">
  以下の手順で説明するオプションまたは用語の詳細が必要な場合は、[アラートドキュメント](/docs/alerts-applied-intelligence/overview/#concepts-terms)を参照してください。
</Callout>

<Steps>
  <Step>
    <Tabs>
      <TabsBar>
        <TabsBarItem id="create-alert-chart">
          チャートを使用して作成する
        </TabsBarItem>

        <TabsBarItem id="create-alert-guided">
          ガイド付きモードを使用して作成する
        </TabsBarItem>

        <TabsBarItem id="create-alert-nrql">
          NRQLを使用して作成する
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="create-alert-chart">
          チャートから開始することは、New Relicアラート条件を設定する最も簡単な方法の1つです。NRQLを最初から作成する代わりに、チャートを使用すると、既存のNRQLクエリを使用してプロセスを開始できます。

          この例では、エラー応答チャートを使用してアラート条件を設定します。開始したいチャートの種類を使用して、以下の手順に従います。

          1. 任意のダッシュボードに移動します。次に、使用するチャートを見つけて **...** メニューをクリックし、 **Create alert condition** \[アラート条件の作成]を選択します。

             <img
               title="Create chart alert"
               alt="A screenshot displaying where to create an alert condition from a chart in New Relic"
               src={alertsCreate}
               style={{ maxWidth: '65%' }}
             />

          2. アラート条件の作成に使用する信号またはデータ ストリームを選択します。物事を簡単にするために、この方法で作成された条件のデフォルトのオプションは **Build a query** \[クエリの構築] です。

             <img
               title="Defining a signal"
               alt="A screenshot detailing how to select a query for an alert condition"
               src={alertsSignal}
               style={{ maxWidth: '65%' }}
             />

          3. 必要に応じて、監視対象に一致するようにNRQLクエリを変更します。現時点では、クエリをそのままにすることをお勧めしますが、慣れてきたら<InlinePopover type="alerts"/>とNRQLクエリでは、ほぼすべての信号を監視するようにクエリを変更できます。

          4. 完了したら **Next** \[次へ] を選択して進行状況を保存し、次のステップに進みます。
        </TabsPageItem>

        <TabsPageItem id="create-alert-guided">
          <SideBySide>
            <Side>
              最も簡単に始める方法の 1 つは、 **Golden signal or metric** \[ゴールデン シグナルまたはメトリック] オプションを使用することです。この機能を選択すると、条件を作成するためのガイド付き作成パスが提供されます。あなたがしなければならないのは、必要なオプションを選択することだけです。あとは私たちにお任せください。

              次の例では特定のオプションを使用しますが、特定のニーズに合った正確なアラート条件を作成するために必要なものはすべて変更できます。

              1. **one.newrelic.com**から、 [**Alerts & AI** \[アラートと AI\]](https://one.newrelic.com/alerts-ai)を選択し、次に [**Alert conditions (policies)**](https://one.newrelic.com/alerts-ai/alerts-classic/policies) \[アラート条件 (ポリシー)] を選択します。
              2. **New alert condition** \[新しいアラート条件]を選択します。
              3. **Golden signal or metrics** \[ゴールデンシグナルまたはメトリクス]を選択します。
            </Side>
          </SideBySide>

          <SideBySide>
            <Side>
              <img
                width="70%;"
                title="golden metrics"
                alt="A screenshot displaying the golden metrics alert creation option"
                src={alertsGoldenCreate}
              />
            </Side>

            <Side>
              4. リストされたエンティティ カテゴリのいずれかを選択して、アラート条件が監視するものを決定します。この例では **On host integrations** \[ホスト統合] が選択されていますが、ニーズに適した他のオプションを選択することもできます。
              5. AWS、Kubernetes、オンホストインテグレーションなどのサービスを使用している場合は、個々のエンティティを選択する前にエンティティタイプを選択する必要もあります。エンティティタイプを選択して、次の手順のオプションを絞り込みます。
              6. 監視するエンティティを選択します。選択するエンティティが多数ある場合は、フィルターフィールドを使用してリストを短縮すると、必要なものを見つけることができます。
            </Side>
          </SideBySide>

          7. 監視したい信号を選択します。この例では **First input delay (75 percentile)** \[最初の入力遅延 (75 パーセンタイル)]を使用しますが、ニーズに適した他のオプションを使用することもできます。

             <img
               style={{ align: "left",width: "70%" }}
               title="golden metric entities"
               alt="A screenshot displaying the entities selection screen for golden metrics alerts"
               src={alertsGoldenEntities}
             />

             厳選されたゴールデンメトリクスを選択することも、過去30分間にレポートされた他のメトリクスから選択することもできます。

             <img
               title="Golden metric entities"
               alt="A screenshot displaying the other metrics option"
               src={alertsOtherMetrics}
             />

          8. 完了したら **Next** \[次へ] を選択して進行状況を保存し、次のステップに進みます。

          <Callout variant="tip">
            利用できるカテゴリは、New Relicがアカウント内で何を監視しているかによって異なります。
          </Callout>
        </TabsPageItem>

        <TabsPageItem id="create-alert-nrql">
          チャートの使用は、事前に作成されたクエリからアラート条件を作成する優れた方法ですが、場合によっては、最初からアラート条件を作成する必要があります。NRQLクエリから新しいアラート条件を作成するプロセスは、チャートから作成するプロセスとほぼ同じです。主な違いは、事前に生成されたNRQLクエリを使用するのではなく、手動でNRQLクエリを作成する点です。

          <Callout variant="tip">
            NRQLはNew Relic Query Languageの略で、すべてのチャートを強化し、データの分析とクエリに使用できる標準化されたクエリメソッドです。NRQLを初めて使用する場合は、[NRQLドキュメント](/docs/query-your-data/nrql-new-relic-query-language/get-started/introduction-nrql-new-relics-query-language/)を参照して、NRQLの[仕組み](/docs/query-your-data/nrql-new-relic-query-language/get-started/introduction-nrql-how-nrql-works/)や[入門チュートリアル](/docs/query-your-data/nrql-new-relic-query-language/get-started/introduction-nrql-tutorial/)など、NRQLの詳細をご覧ください。
          </Callout>

          <img
            title="NRQL alert"
            alt="A screenshot displaying an alert condition created with a simple NRQL query"
            src={alertsNRQL}
          />

          1. **one.newrelic.com**から、 [**Alerts & AI** \[アラートと AI\]](https://one.newrelic.com/alerts-ai)を選択し、次に [**Alert conditions (policies)**](https://one.newrelic.com/alerts-ai/alerts-classic/policies) \[アラート条件 (ポリシー)] を選択します。
          2. **New alert condition** \[新しいアラート条件]を選択します。
          3. NRQLクエリを記述して条件を作成します。たとえば、遅いトランザクションを監視したい場合は、次のように入力できます。

          ```sql
          SELECT average(duration) from Transaction facet name
          ```

          4. 完了したら **Next** \[次へ] を選択して進行状況を保存し、次のステップに進みます。
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Step>

  <Step>
    ## 信号動作に合わせて調整

    <img
      title="Tuning your signal"
      alt="A screenshot displaying how to set options for a signal in an alert condition"
      src={alertsTune}
    />

    1. **データ集計オプションを設定します**。

       * **Window duration** \[ウィンドウ期間]: **Window duration** \[ウィンドウ期間]設定を使用して、5 分ごとまたは 1 時間ごとのグループ化など、データを集計する頻度を決定します。この機能の設定は、監視しているデータの種類によって異なります。どのような設定にすべきかわからない場合は、デフォルト設定のままにしておくことができます。詳細については、 [「最初のアラートの作成」ドキュメントを](/docs/alerts-applied-intelligence/new-relic-alerts/get-started/your-first-nrql-condition/#window-duration)ご覧ください。
       * **Sliding window aggregation** \[スライディングウィンドウ集計]：[スライディングウィンドウ集計](/docs/alerts-applied-intelligence/new-relic-alerts/alert-conditions/create-nrql-alert-conditions/#sliding-window-aggregation)を使用するかどうかを選択します。この機能は、重複する集計ウィンドウを作成することにより、不規則なデータを処理する場合に、より滑らかなチャートを作成します。この機能はデフォルトでは無効になっており、最初のアラートでは無効のままにしておくことをお勧めします。
       * **Streaming method** \[ストリーミング方式]: 最も一般的に使用されるオプションは、 **Event flow** \[イベント フロー] と **Event timer** \[イベント タイマー]です。**Event flow** \[イベント フローは] 、頻繁かつ一貫してレポートするデータに最適ですが、 **Event timer** \[イベント タイマーは]、 一貫性のないデータ、まれにレポートするデータ、またはバッチで取り込むデータに最適です。個々の設定について詳しく知り、各シナリオでどの方法を使用する必要があるかを確認したい場合は、 [ドキュメントを](/docs/alerts-applied-intelligence/new-relic-alerts/advanced-alerts/understand-technical-concepts/streaming-alerts-key-terms-concepts/#aggregation-methods)参照してください。

    2. **タイミング オプションを設定します**:これは、各ウィンドウでイベントを評価する前にイベントを待機する時間を決定します。遅延が長くなると、誤ったアラートが少なくなりますが、インシデントがオープンになるまでの潜在的なダウンタイムも長くなります。この機能は、選択したオプションに応じて表示方法も異なります。 **Event flow** \[イベント フロー] および **Cadence** \[ケイデンス] のオプションでは **Delay** \[遅延] と呼ばれ、 **Event timer** \[イベント タイマー] では **Timer** \[タイマー]と呼ばれます。最初のアラートでは、デフォルトの時間設定をそのまま使用することをお勧めします。

    3. **ギャップ埋め戦略を選択します**: ギャップ埋めは、データ レポートの空白期間をユーザー定義の合成値で埋める事後対応機能です。データ レポートが散発的であると思われる場合は、空の集計ウィンドウにこのデータを入力することで、誤ったアラートを回避できます。最初のアラートでは、 **Gap-filling strategy** \[ギャップ充填戦略] で **None** \[なし]を選択します。

    4. **評価遅延を選択**：このオプションを使用すると、設定した閾値に対して新しい信号を評価する前に、New Relicが待機する時間が有効になります。これは、データストリームのレポート開始時の誤検知インシデントを防ぐのに役立ちます。最初のアラートでは、このオプションがデータに適用されることがわかっている場合を除いて、トグルを無効のままにしておくことができます。

    5. 完了したら **Next** \[次へ] を選択して進行状況を保存し、次のステップに進みます。
  </Step>

  <Step>
    ## 静的閾値の設定

    <img
      title="Set static thresholds"
      alt="A screenshot displaying how to set static thresholds for an alert condition"
      src={alertsThresholds}
    />

    1. まず、**Security level** \[セキュリティレベル]セクションで、閾値のステータスを **Critical**にするか、**Warning**にするかを選択します。
    2. 制限に達した場合にインシデントが開始される制限を設定します。これらの値は、条件で実行したい内容に応じて変化します。たとえば、エラー メッセージの条件を作成する場合は、しきい値を **5 分に 1 回以上 1 に** 設定しますが、より長い期間のレイテンシの問題に対応する条件を作成する場合は、 **少なくとも 15 分間、しきい値が 50 以上になるようにします**。
    3. 別の閾値を追加したい場合は、必要に応じて**Add threshold**または**Add lost signal threshold**を選択します。失われた信号の閾値は、レポートを停止する可能性のあるエンティティや、[null 値を返す](/docs/alerts-applied-intelligence/new-relic-alerts/alert-conditions/create-nrql-alert-conditions/#query-order)可能性のあるクエリを監視するために重要です。
    4. 完了したら **Next** \[次へ] を選択して進行状況を保存し、次のステップに進みます。
  </Step>

  <Step>
    ## アラート条件の詳細を追加する

    <img
      title="Alert condition details"
      alt="A screenshot displaying how to create the details for an alert"
      src={alertsDetails}
    />

    1. **Name** \[名前] フィールドにアラートの名前を追加します。これは、この状態を特定するのに役立ちます。また、将来編集または削除する必要がある場合にその状態を見つけるのにも役立ちます。
    2. この条件に接続するポリシーを選択します。 **Existing policy** \[既存のポリシー]がある場合は、ドロップダウンからそれを選択します。そうでない場合は、**New policy** \[新しいポリシー] を選択し、ここから作成して[ポリシーを作成 ](/docs/alerts-applied-intelligence/new-relic-alerts/alert-policies/create-edit-or-find-alert-policy/#alert-policy-name)する必要があります。
    3. アラートの追加設定を行います。これには、オープンなインシデントが自動的にクローズされるまでの時間を設定したり、インシデントの[カスタム説明](/docs/alerts-applied-intelligence/new-relic-alerts/advanced-alerts/advanced-techniques/alert-custom-incident-descriptions)を入力したりすることなどがあります。
    4. **Save condition** \[条件を保存] を選択して終了します。
  </Step>
</Steps>

これでアラート条件が作成され、システム内の症状の特定が非常に簡単になりました。アラートには多くの設定オプションが用意されているため、チームのニーズや監視対象に基づいてアラートを微調整できます。それが最初のアラート条件である場合は、その仕組みに慣れるために、さまざまなオプションを使用してチャートからさらに作成することをお勧めします。NRQLクエリから条件を作成することもできます。これについては、このチュートリアルシリーズの次のトピックで説明します。

## アラートをさらに活用

チームにとってアラートをより効率的かつ管理しやすくする上で役立つ、高度なアラート機能がいくつかあります。

* アラートをいつどこで受信するかをより詳細に制御し、問題について適切な担当者に確実に通知できるようにしたい場合は、[ワークフロー](/docs/alerts-applied-intelligence/applied-intelligence/incident-workflows/incident-workflows/)の使用方法を参照してください
* 重大なアラートのほぼ即時通知を有効にして、平均解決時間（MTTR）を短縮したい場合は、 [アプライドインテリジェンスでの異常検出](/docs/alerts-applied-intelligence/applied-intelligence/anomaly-detection/anomaly-detection-applied-intelligence/)の使用方法をご覧ください
* APIを使用してNew Relicアラートを管理する場合は、[REST APIまたはGraphQL](/docs/alerts-applied-intelligence/new-relic-alerts/advanced-alerts/alerts-api/intro-alerts-api/)を使用して実行できます

<UserJourneyControls nextStep={{"path":"/docs/tutorial-create-alerts/improve-with-alerts/","title":"次のステップ","body":"アラートによるスタックの改善方法を学ぶ"}}/>