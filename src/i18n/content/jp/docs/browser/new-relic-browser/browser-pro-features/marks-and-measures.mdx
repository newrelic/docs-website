---
title: ネイティブマークと測定値を自動的に追跡
tags:
  - Browser
  - Browser monitoring
metaDescription: Observes and reports on the performance of your webpages by automatically tracking native marks and measures.
freshnessValidatedDate: never
translationType: machine
---

[マーク](https://developer.mozilla.org/en-US/docs/Web/API/Performance/mark)と[メジャーは、](https://developer.mozilla.org/en-US/docs/Web/API/Performance/measure) Web ページのパフォーマンスを観察しレポートするのに役立つ標準のブラウザ API です。これらの汎用的なネイティブ イベントを使用すると、アプリケーション内の任意のタスクまたはプロセスの継続時間を測定できます。New Relicブラウザ監視を使用すると、自動的にマークと測定値を追跡し、それらを`BrowserPerformance`イベントとして保存できるようになり、サイトの実際のパフォーマンスをより深く把握できるようになります。

## マークと測定の監視を使用する理由は何ですか?

New Relicによるマークと測定の自動追跡は、Web アプリケーションのパフォーマンスに実用的なインサイトを提供します。 これらのイベントをキャプチャすることで、次のことが可能になります。

* コード内の遅い部分や問題のある部分を正確に特定します。
* 新しい機能やデプロイメントの影響を測定します。
* さまざまなユーザー ジャーニーにわたるパフォーマンスを比較します。
* 実際のユーザーデータに基づいてカスタムダッシュボードとアラートを構築します。

## 前提条件 [#prerequisites]

* **Pro**または**Pro + SPA**ブラウザエージェント、バージョン 1.272.0 以降。

<Callout variant="important">
  Lite Browser エージェントでは、マークとメジャーの自動検出は利用できません。
</Callout>

## 自動収集を有効にする [#enable-collection]

これらの簡単なセットアップ手順に従って、アプリケーションの監視機能とデバッグ機能を強化します。

<Steps>
  <Step>
    **[one.newrelic.com](https://one.newrelic.com) &gt; All Capabilities &gt; Browser**に移動します。
  </Step>

  <Step>
    ブラウザ アプリを選択します。
  </Step>

  <Step>
    左側のメニューで、 **Application settings** \[アプリケーション設定] をクリックします。
  </Step>

  <Step>
    **Pro**または**Pro + SPA**ブラウザ エージェントが選択されていることを確認します。
  </Step>

  <Step>
    マークを自動的に収集するには、 **Capture marks**\[マークのキャプチャ]をオンにします。メジャーを自動的に収集するには、 **Capture measures**\[メジャーのキャプチャ]をオンにします。観察されたマークまたはメジャーからカスタムアトリビュートとして詳細を収集するには、 **Add details**\[詳細の追加] をオンにします。
  </Step>
</Steps>

<img title="Marks and measures settings" alt="screenshot of the marks and measures settings panel in browser application settings" src="/images/M_and_M settings.png" />

## マークとメジャーの収集を無効にする [#disable-marks-and-measures]

既存のブラウザ アプリのマークや測定を無効にするには:

<Steps>
  <Step>
    **[one.newrelic.com](https://one.newrelic.com) &gt; All Capabilities &gt; Browser**に移動します。
  </Step>

  <Step>
    ブラウザ アプリを選択します。
  </Step>

  <Step>
    左側のメニューで、 **Application settings** \[アプリケーション設定] をクリックします。
  </Step>

  <Step>
    マークを無効にするには、 **Capture marks**\[マークのキャプチャ] をオフにします。メジャーを無効にするには、 **Capture measures**\[メジャーのキャプチャ] をオフにします。
  </Step>
</Steps>

## データ消費

`BrowserPerformance` イベントは、他のブラウザ バイトと同じ消費価格設定に従います。生成されるバイトの量は、データの数と属性によって異なります。

有効にすると、エージェントはアプリケーション内でマークや測定値が発生すると自動的にそれをキャプチャします。

## New Relicでデータを探す [#find-data]

マークとメジャーのデータは、New Relic では`BrowserPerformance`イベントとして保存され、 `entryType`フィールドの下に`mark`または`measure`として示されます。`BrowserPerformance`イベントで使用できるフィールドの詳細については、[データ ディクショナリを](https://docs.newrelic.com/attribute-dictionary/?event=BrowserPerformance)参照してください。素早く便利なダッシュボードについては、この[クイックスタート](https://newrelic.com/instant-observability/browser-marks-and-measures)を参照してください。そうでない場合は、このデータを書き込み、視覚化して、インサイトをアプリケーションのパフォーマンスに組み込むことができます。

**平均継続時間で最も遅い対策を見つける**

```nrql
FROM BrowserPerformance 
SELECT average(entryDuration) 
WHERE entryType = 'measure' 
FACET entryName 
LIMIT 10 
ORDER BY average(entryDuration) DESC
```

**ページあたりのマークと小節の数を数える**

```nrql
FROM BrowserPerformance 
SELECT count(*) 
WHERE entryType IN ('mark', 'measure') 
FACET pageUrl
```

**ブラウザ別の平均測定時間を確認する**

```nrql
FROM BrowserPerformance 
SELECT average(entryDuration) 
WHERE entryType = 'measure' 
FACET userAgentName
```

**国別に測定期間を追跡する**

```nrql
FROM BrowserPerformance 
SELECT average(entryDuration) 
WHERE entryType = 'measure' 
FACET countryCode
```

**過去24時間以内に記録されたすべての一意のメジャー名を検索します**

```nrql
FROM BrowserPerformance 
SELECT uniqueCount(entryName) 
WHERE entryType = 'measure' 
SINCE 24 hours ago
```

**デスクトップとモバイルの測定時間を比較する**

```nrql
FROM BrowserPerformance 
SELECT average(entryDuration) 
WHERE entryType = 'measure' 
FACET deviceType
```

**特定のセッションのすべての測定値を一覧表示する**

```nrql
FROM BrowserPerformance 
SELECT * 
WHERE entryType = 'measure' 
AND session = 'abcdefghijklmnop'
```

これらの書き込みを使用するか、独自のダッシュボードを作成して、カスタムダッシュボードを構築し、アラートを設定し、Web アプリケーションの実際のパフォーマンスを正確に監視します。

<Callout variant="tip">
  New Relic でのマークとメジャーの使用についてサポートが必要ですか、または詳細を知りたいですか?[ドキュメント](https://docs.newrelic.com/)をご覧いただくか、 [support.newrelic.com](https://support.newrelic.com)までお問い合わせください。
</Callout>