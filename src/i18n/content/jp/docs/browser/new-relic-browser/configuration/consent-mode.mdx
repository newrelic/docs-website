---
title: 同意モード
tags:
  - Browser
  - Browser monitoring
metaDescription: Integrate privacy policy opt-ins to let users decide whether to consent to allow the browser agent to send data over the network.
freshnessValidatedDate: never
translationType: machine
---

## この機能は何をしますか?

これにより、Web アプリケーションがブラウザエージェントによってデータを収集、送信、処理する方法に関するユーザーのプライバシー ポリシー オプトインの統合が可能になります。 この機能を有効にすると、ブラウザエージェントがネットワーク経由でデータを送信することに同意するかどうかをユーザーが決定できるようになります。

新しいプロパティは、 `browser_consent_mode`と呼ばれる Browserエージェントの init オブジェクトで使用できます。 この設定は、エージェントで同意モードを使用するかどうかを制御します。Browser Lite、Browser Pro、または Pro + SPA エージェントの[バージョン 1.303.0](/docs/release-notes/new-relic-browser-release-notes/browser-agent-release-notes/browser-agent-v1.303.0)以上で利用できます。

## どうやって使うんですか？

この機能を使用するには、アプリの設定ページにアクセスし、 `"Turn on consent"`トグルをオンにする必要があります。この設定はデフォルトではオフになっています。

設定のオン/オフを切り替える代わりに、NerdGraph を使用することもできます。これを行うには、 `browserSettings` graphQL オブジェクトで`browser_consent_mode`プロパティのミューテーション クエリを実行し、 `enabled`を`true`または`false`に設定します。

プライバシー ポリシーまたはオプトイン モーダルを Web アプリケーションに統合すると、ユーザーが次のいずれかをクリックすると、次のようになります。

1. 「はい、同意します。」

   `consent(accept?: boolean)`という新しい API の使用を呼び出す必要があります。[consent() API](/docs/browser/new-relic-browser/browser-apis/consent)を呼び出すと、デフォルトでは accept が true になります。

   **autoStart: true**を指定したBrowser機能は、同意が得られた後、データをNew Relicに送信します。

   **autoStart: false**のBrowser機能は、ネットワーク経由でデータを送信する遅延エージェント機能を開始するために、 [start() API](/docs/browser/new-relic-browser/browser-apis/start)関数を使用して呼び出す必要があります。

2. 「いいえ、同意しません。」

   デフォルトは true なので、false 引数に注意しながら`consent(false)`を呼び出す必要があります。エージェントはそのユーザーのデータをネットワーク経由で送信しません。

   <table>
     <thead>
       <tr>
         <th style={{ width: "200px" }}>
           browser\_consent\_mode
         </th>

         <th>
           consent() API
         </th>

         <th>
           結果
         </th>
       </tr>
     </thead>

     <tbody>
       <tr>
         <td>
           オフ（Off）（デフォルト）
         </td>

         <td>
           該当なし
         </td>

         <td>
           BrowserデータはNew Relicによって収集されます
         </td>
       </tr>

       <tr>
         <td>
           アクティブ化された (On)
         </td>

         <td>
           `consent()`で呼び出されるか、 `consent(true)`で呼び出されます (デフォルト)
         </td>

         <td>
           BrowserデータはNew Relicによって収集されます
         </td>
       </tr>

       <tr>
         <td>
           アクティブ化された (On)
         </td>

         <td>
           呼び出された `consent(false)`
         </td>

         <td>
           BrowserデータはNew Relicによって収集されません
         </td>
       </tr>

       <tr>
         <td>
           アクティブ化された (On)
         </td>

         <td>
           呼ばれない
         </td>

         <td>
           BrowserデータはNew Relicによって収集されません
         </td>
       </tr>
     </tbody>
   </table>

## その他の考慮事項

* `browser_consent_mode`が有効になっている場合、最大約 30 秒間、最大 1 MB のデータがエンドユーザーのブラウザーにバッファリングされ、ユーザーが同意を選択して同意 API が呼び出されるまで New Relic に送信されません。これらの制約により、同意 API が呼び出されたときに一部のデータが削除され、New Relic に送信されない可能性があります。

* [セッション ストレージ](/docs/browser/new-relic-browser/configuration/browser-app-settings-page/#browser-session-storage)が有効になっている場合、同意 API に渡された決定はページ間で保持されます。

* [セッション ストレージ](/docs/browser/new-relic-browser/configuration/browser-app-settings-page/#browser-session-storage)が無効になっている場合は、ページを読み込むたびに同意 API を呼び出す必要があります。