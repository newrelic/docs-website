---
title: ブラウザモニタリングの互換性と要件
tags:
  - Browser
  - Browser monitoring
  - Getting started
metaDescription: Browser monitoring agent compatibility and requirements.
translationType: machine
---

ブラウザモニタリングには、 [厳重なセキュリティ対策](/docs/browser/new-relic-browser/performance-quality/security-new-relic-browser) が施されており、ブラウザモニタリング機能を備えた堅牢なスタンドアロン製品を提供しています。ブラウザエージェント [をインストールする前に、お使いのシステムが以下の要件を満たしていることを確認してください。](/docs/browser/new-relic-browser/getting-started/adding-apps-new-relic-browser)

[](/docs/browser/new-relic-browser/getting-started/adding-apps-new-relic-browser)

[ブラウザモニタリングを試してみませんか？ ](/docs/browser/new-relic-browser/getting-started/adding-apps-new-relic-browser)[New Relic アカウントの作成](https://newrelic.com/signup) 無料でご利用いただけます。クレジットカードは必要ありません。

## 基本要件 [#requirements]

ブラウザにデータを報告するためには、アプリケーションが少なくとも2つの基本的な要件を満たす必要があります。

1. アプリケーションへのトラフィックは、ブラウザのJavaScriptコードを読み込んで実行し、クッキーを設定できるクライアントからのものでなければなりません。
2. アプリケーションにアクセスするクライアントは、HTTP リクエストで New Relic にデータを送信できる必要があります。ブラウザのPro機能にはHTTPSが必要です。

<Callout variant="important">
  切断リストを購読しているブラウザや、AdBlock などのコンテンツフィルタリング拡張機能を使用しているブラウザでは、New Relic にデータを送信できない場合があります。例えば、 [Enhanced Tracking Prevention disconnect list](https://disconnect.me/trackerprotection/blocked) を [Mozilla Firefox 69.0 以上](https://www.mozilla.org/en-US/firefox/69.0/releasenotes/) で使用している場合、デフォルトの設定を変更する必要があります。
</Callout>

一般的なブラウザアプリケーションのほとんどは、これらの要件を満たしています。しかし、制限された環境下にあるブラウザアプリケーションでは、New Relic へのデータ報告が困難な場合があります。

* ハイブリッド・モバイル・アプリケーション
* POS端末や家電製品などの特殊なハードウェアにインストールされるアプリケーション

詳細については、 [instrumentation for browser monitoring](/docs/browser/new-relic-browser/page-load-timing-resources/instrumentation-browser-monitoring) のドキュメントを確認し、 [エンドユーザーのネットワークアクセス](/docs/browser/new-relic-browser/troubleshooting/troubleshooting-browser-monitoring-installation#manual_network_access) を確認してください。

## ブラウザタイプ

インスツルメンテーションは、Google Chrome、Mozilla Firefox、Microsoft Internet Explorer および Edge、Apple Safari など、あらゆる種類のブラウザに対応しています。ユーザーインターフェースは、 [New Relic がサポートするブラウザのバージョン](/docs/data-analysis/user-interface-functions/view-your-data/supported-browsers-new-relics-ui) と互換性があります。

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        **例外**
      </th>

      <th>
        **コメント**
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td id="paint-timings">
        塗装のタイミング
      </td>

      <td>
        [`firstPaint`](/attribute-dictionary/browserinteraction/firstpaint) and [`firstContentfulPaint`](/attribute-dictionary/browserinteraction/firstcontentfulpaint) `BrowserInteraction`, `PageView`, and [`PageViewTiming`](/docs/browser/new-relic-browser/page-load-timing-resources/pageviewtiming-async-or-dynamic-page-details) イベントは、 [](https://developer.mozilla.org/en-US/docs/Web/API/PerformancePaintTiming#Browser_compatibility)とのみ互換性があります。

        * デスクトップおよびモバイルのChrome 60以上（AndroidウェブビューおよびChrome for Android）
        * デスクトップ用Opera 47以上
        * Opera 44以上（Androidモバイル用
        * サムスンの携帯電話向けインターネット
      </td>
    </tr>

    <tr>
      <td>
        AJAX
      </td>

      <td>
        [AJAXのタイミング機能](/docs/browser/new-relic-browser/dashboard-details/ajax-dashboard) では利用できません。

        * iPhone/iPad向けChrome
        * IE 7および8
      </td>
    </tr>

    <tr>
      <td>
        `PageAction` イベント
      </td>

      <td>
        [`PageAction` イベント](/docs/insights/new-relic-insights/adding-querying-data/inserting-custom-events-attributes-insights-javascript-api) クロスドメインを完全にサポートするブラウザが必要です `XMLHttpRequests`.Internet Explorer のバージョン 9 以下では、 `PageAction` イベントを記録することはできません。詳細は [データのクエリーについて](/docs/using-new-relic/data/understand-data/query-new-relic-data) 。
      </td>
    </tr>

    <tr>
      <td>
        セッション・トレース
      </td>

      <td>
        [セッショントレース](/docs/browser/new-relic-browser/dashboard-details/session-traces-exploring-webpages-life-cycle) は、 [Resource Timing Specification](http://www.w3.org/TR/resource-timing/) をサポートしているブラウザからのみ報告されます。
      </td>
    </tr>

    <tr>
      <td>
        SHA-256
      </td>

      <td>
        New Relic は [SHA-256](https://support.globalsign.com/customer/portal/articles/1499561-sha-256-compatibility) と互換性のあるブラウザのみをモニターすることができます。
      </td>
    </tr>
  </tbody>
</table>

## APMエージェント

ブラウザーエージェントは、APM が監視するアプリに導入することも、スタンドアロンのアプリに導入することもできます。詳細は、 [インストール手順](/docs/browser/new-relic-browser/getting-started/adding-apps-new-relic-browser) を参照してください。

APMを使用してアプリにブラウザを導入する場合は、エージェントがブラウザの監視をサポートしていることを確認してください。

* [C SDK](/docs/release-notes/agent-release-notes/c-sdk-release-notes): Version 1.0.0 以上
* [Go](/docs/release-notes/agent-release-notes/go-release-notes): バージョン2.5.0以上
* [Java](/docs/release-notes/agent-release-notes/java-release-notes): バージョン3.4.0以上
* [.NET](/docs/release-notes/agent-release-notes/net-release-notes): バージョン2.20.25.0以上
* [Node.js](/docs/release-notes/agent-release-notes/nodejs-release-notes): バージョン1.4.0以上
* [PHP](/docs/release-notes/agent-release-notes/php-release-notes): バージョン4.4.5.35以上
* [Python](/docs/release-notes/agent-release-notes/python-release-notes): バージョン 2.10.1.9 以上
* [Ruby](/docs/release-notes/agent-release-notes/ruby-release-notes): Version 3.7.0.177 以上

## 対応フレームワーク [#frameworks]

ブラウザエージェントは、すべてのフロントエンドフレームワークのデータを収集します。ただし、モニタリングは、JavaScriptフレームワークが使用する低レベルの"プリミティブ" 上で行われるため、インスツルメンテーションによって収集される詳細レベルは、特定のフレームワークによって異なる可能性があります。

<table>
  <thead>
    <tr>
      <th style={{ width: "150px" }}>
        例外
      </th>

      <th>
        コメント
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        Zone.js
      </td>

      <td>
        AngularJS を使用していて、弊社の [SPA モニタリング機能](/docs/browser/single-page-app-monitoring/get-started/welcome-single-page-app-monitoring) を使用したい場合は、Zone.js のバージョン 0.6.18 から 0.6.24 はブラウザとの互換性がないことに注意してください。いずれの場合も、エラーを避けるために、ブラウザエージェント ****を Zone.js の前にロードする必要があります。
      </td>
    </tr>

    <tr>
      <td>
        Cypress.io（サイプレス・アイオー
      </td>

      <td>
        Cypress でテストを実行すると、ブラウザが `open` および `send` メソッドのリクエストを適切に計測できないという問題がありました。そのため、以下のようなエラーが発生してしまいます。

        ```
        Cannot set property 'status' of undefined
        ```

        この問題は、コード内にブラウザエージェントが存在する状態でテストを実行しているお客様にのみ影響します。本番アプリケーションには影響ありません。
      </td>
    </tr>

    <tr>
      <td>
        html2pdf.js
      </td>

      <td>
        このライブラリは、約束事の包み方が異なるため、弊社の [Pro+SPA エージェント](/docs/browser/browser-monitoring/installation/install-browser-monitoring-agent#agent-types) とは互換性がありません。このライブラリを使用する場合は、 [Pro エージェントタイプ](/docs/browser/browser-monitoring/installation/install-browser-monitoring-agent#agent-types) を選択することをお勧めします。
      </td>
    </tr>
  </tbody>
</table>

## コンテンツ・セキュリティ・ポリシー（CSP）の考慮事項 [#csp]

正確なブラウザのパフォーマンス測定値を得るために、ブラウザは小さなインラインの [JavaScript スニペット](/docs/browser/new-relic-browser/page-load-timing/instrumentation-page-load-timing) を使用する必要があります。New Relic は、クロスサイトスクリプティング (XSS) やその他の潜在的な脆弱性を防ぐために、インラインの JavaScript を慎重に審査します。

[Content Security Policy Level 2](https://www.w3.org/TR/CSP2/) インラインスクリプトなど、許可されるJavaScriptの種類に制限を加えています。また、ページロード時にスクリプトをロードできるドメインを制限します。

<Callout variant="important">
  お客様のWebサイトでサードパーティがホストするJavaScriptの実行が許可されていない場合は、ブラウザ監視エージェントをインストールするために、組織の標準的な手順でCSPの例外を申請する必要があります。
</Callout>

CSPの例外を申請する場合は、組織の標準的な手順に従って、ウェブまたはセキュリティ・チームに連絡してください。

ブラウザの JavaScript エージェントが正しく動作するには、以下の CSP 例外が必要です。また、これらの例外をすべて、フォールバックの `default-src` 指令に追加することもできます（代わりに `script-src` および `connect-src` ）。

<table>
  <thead>
    <tr>
      <th style={{ width: "300px" }}>
        CSPの例外
      </th>

      <th>
        コメント
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `安全ではないインライン`
      </td>

      <td>
        `script-src` 指令に、または fallback `default-src` 指令に追加します。これは、エージェントがインラインスクリプトを含めてインストールされるために必要です。
      </td>
    </tr>

    <tr>
      <td>
        `https://js-agent.newrelic.com`
      </td>

      <td>
        `script-src` 指令に、または fallback `default-src` 指令に追加します。これは、エージェントが必要とする追加のスクリプトファイルがホストされる場所です。
      </td>
    </tr>

    <tr>
      <td>
        `https://bam.nr-data.net`

        `https://bam-cell.nr-data.net`

        <Callout variant="important">
          FedRAMP準拠のエンドポイントを使用している場合は、 `https://gov-bam.nr-data.net` を追加してください。
        </Callout>
      </td>

      <td>
        * `script-src` 指令に、またはフォールバック `default-src` 指令に追加します。これは、エージェントが収集したデータを送信する場所です。この URL への呼び出しの一つは JSONP 呼び出しで、これはその URL がスクリプトソースとして許可されなければならないことを意味します。
        * `connect-src` ディレクティブ、または、fallback `default-src` ディレクティブに追加します。 `connect-src` ディレクティブは、スクリプトが（XMLHttpRequest インタフェースを使用して）呼び出すことができる URL に影響を与えます。この指令を中心とした CSP の制限がある場合は、例外としてこの URL を追加します。
      </td>
    </tr>
  </tbody>
</table>