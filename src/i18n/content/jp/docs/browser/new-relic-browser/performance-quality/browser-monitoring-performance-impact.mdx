---
title: ブラウザのモニタリングとパフォーマンスへの影響
tags:
  - Browser
  - Browser monitoring
  - Performance quality
metaDescription: The negligible amount of overhead required to load browser JavaScript into a webpage results in a significant return of actionable data.
freshnessValidatedDate: never
translationType: machine
---

<InlinePopover type="browser" />の JavaScript スニペットは、Web サイトのパフォーマンスと、ページの読み込みにかかる時間に関するユーザーの認識に、ほとんど目に見えない影響を及ぼします。 JavaScript は、いずれにせよ送信される Web ページ データのパケットに含まれています。 さらに、Web ページの残りの部分が実行されるとすぐにエラーとイベントの監視が開始されます。 JavaScript をロードするために必要なオーバーヘッドはごくわずかであるため、大量の実用的なデータが返されます。

## 全体的な影響 [#overall]

JavaScriptのオーバーヘッドは、ユーザーへの影響とお客様のシステムのパフォーマンスへの影響の両方を考慮しています。

* <DNT>**User perception:**</DNT> 通常、ユーザーは 200 ミリ秒未満の Web サイトのパフォーマンス低下を検出できません。 browserの JavaScript により、ページの読み込みごとに合計時間が 15 ミリ秒未満増加します。 これは時間の経過とともに分割されるため、ユーザーは JavaScript によるパフォーマンスへの影響をまったく認識できません。
* <DNT>**Webserver and systems:**</DNT> browserアプリの監視はサーバーではなく、ユーザーのbrowser上で行われます。 処理時間は CPU 消費に影響しません。

さらに、監視対象のアプリやウェブページへの潜在的な影響を最小限に抑えるために、追加の手順を実行します。たとえば、「ローダー」スクリプトは、ページのライフ サイクル全体で監視が有効になっていることを確認するために、 `<HEAD>` で同期的に読み込まれます。このスクリプトはインラインで含まれているため、 [コンテンツ配信ネットワーク (CDN)](/docs/browser/new-relic-browser/performance-quality/security-new-relic-browser#cdn)への別のラウンドトリップ ネットワーク要求が不要になります。「ローダー」は、最初のページの読み込みに付属しています。

ページのライフ サイクルの後半で、New Relic は追加の監視スクリプトを非同期で読み込みます。これらのスクリプトは、ユーザーに知覚可能な影響を与えるべきではなく、1 ページあたり 15 ミリ秒未満の全体的なオーバーヘッドに含まれています。

## ネットワークへの影響 [#network]

また、ブラウザー監視は、データをローカルに (クライアントで) 集約し、定期的な間隔でページのライフサイクル イベント `load`、 `unload`、 `pageshow`、および `pagehide`で New Relic に送り返すことにより、エンド ユーザーのネットワーク トラフィックを最小限に抑えます。 .(ブラウザ セッションのアイドル期間中は、送信が不要な場合があります。)

### ブラウザエージェントスクリプト [#agent-scripts]

エージェントは複数のスクリプトで構成され、「ローダー」の初期サイズを縮小し、有効なエージェント機能をサポートするために必要な JavaScript のみのロードをサポートします。最初のスクリプト「ローダー」は、HTML ドキュメントにインラインで挿入されます。残りのスクリプトは、コンテンツ配信ネットワーク (js-agent.newrelic.com) からダウンロードされます。 `load` ページのライフサイクル イベントが発生したとき。ロードされるスクリプトの数は、使用されているエージェントのタイプによって異なります。 [ブラウザ エージェントの種類については、こちら を](/docs/browser/browser-monitoring/installation/install-browser-monitoring-agent/#agent-types)ご覧ください。

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        スクリプト
      </th>

      <th>
        Lite
      </th>

      <th>
        プロ
      </th>

      <th>
        プロ＋SPA
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        インラインのスクリプトサイズ
      </td>

      <td>
        10.2KB
      </td>

      <td>
        15.5KB
      </td>

      <td>
        17.5KB
      </td>
    </tr>

    <tr>
      <td>
        ダウンロードしたスクリプトのサイズ
      </td>

      <td>
        15.3KB
      </td>

      <td>
        21KB
      </td>

      <td>
        25.4KB
      </td>
    </tr>
  </tbody>
</table>

<sup>
  サイズは、gzip 圧縮を使用して縮小されたスクリプトに基づいています。
</sup>

### ブラウザエージェントのハーベスト [#agent-harvests]

Browser events are first harvested after the PageView event is successfully collected, and then every 30 seconds thereafter. If any event type exceeds 16 kB of data before the next scheduled harvest, an early harvest is triggered for that event. Additionally, a final harvest occurs whenever the document transitions to `hidden` via a `visibilitychange` event (e.g. when a user navigates away, switches tabs, closes the tab, minimizes or closes the browser, or switches from the browser to another app if they&apos;re on a mobile device).

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        データ型
      </th>

      <th>
        Lite
      </th>

      <th>
        プロ
      </th>

      <th>
        プロ＋SPA
      </th>

      <th>
        収穫頻度
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        [PageView](/attribute-dictionary/?event=PageView) イベント
      </td>

      <td>
        そう
      </td>

      <td>
        そう
      </td>

      <td>
        そう
      </td>

      <td>
        `PageView` イベントは、 `load`ページ ライフサイクル イベントの直後に 1 回収集されます。 このデータは、 New Relic UI browserダッシュボードのページビューメトリックを生成するために使用されます。 これは`bam.nr-data.net`または`bam-cell.nr-data.net`への JSONP 呼び出しです。 すべてのエージェントは<DNT>**required**</DNT>で`PageView`イベントを収集します。
      </td>
    </tr>

    <tr>
      <td>
        [PageViewTiming](/attribute-dictionary/?event=PageViewTiming) イベント
      </td>

      <td>
        そう
      </td>

      <td>
        そう
      </td>

      <td>
        そう
      </td>

      <td>
        `PageViewTiming` events are harvested by all agents and includes timing data like core web vitals measurements. See the [PageViewTiming docs](/docs/browser/new-relic-browser/page-load-timing-resources/pageviewtiming-async-or-dynamic-page-details/#interactivity-metrics) for a list of reported events.
      </td>
    </tr>

    <tr>
      <td>
        [JavaScriptエラー](/attribute-dictionary/?event=JavaScriptError)メトリクス
      </td>

      <td>
        ノー
      </td>

      <td>
        そう
      </td>

      <td>
        そう
      </td>

      <td>
        `JavaScriptError` metrics are sent together with Ajax metrics as timeslice data.
      </td>
    </tr>

    <tr>
      <td>
        Ajaxメトリクス
      </td>

      <td>
        ノー
      </td>

      <td>
        そう
      </td>

      <td>
        そう
      </td>

      <td>
        タイムスライス データとして JavaScriptError メトリクスと一緒に送信されます。
      </td>
    </tr>

    <tr>
      <td>
        [AjaxRequest](/attribute-dictionary/?event=AjaxRequest)イベント
      </td>

      <td>
        ノー
      </td>

      <td>
        そう
      </td>

      <td>
        そう
      </td>

      <td>
        `AjaxRequest` events follows the 30 seconds harvest cycle unless the `SPA` agent is in use. If using the `SPA` agent, the first harvest will happen after the `load` page lifecycle event and additional harvests will either happen every 30 seconds or when the `SPA` agent notices a route change.
      </td>
    </tr>

    <tr>
      <td>
        セッション・トレース
      </td>

      <td>
        ノー
      </td>

      <td>
        そう
      </td>

      <td>
        そう
      </td>

      <td>
        Session traces can generate a large amount of data, but that can be controlled by sampling. By default, only about 90 page views per hour will be sampled to send session trace data. There is also an option to set a custom sampling rate.
      </td>
    </tr>

    <tr>
      <td>
        セッションのリプレイ
      </td>

      <td>
        ノー
      </td>

      <td>
        そう
      </td>

      <td>
        そう
      </td>

      <td>
        In addition to the the general harvest cycles, session replay harvests that include snapshots and metadata payloads will be harvested immediately.

        エンドポイントはロケールによって異なる場合がありますが、米国の例では`https://bam.nr-data.net/browser/blobs`になります。
      </td>
    </tr>

    <tr>
      <td>
        [PageAction](/attribute-dictionary/?event=PageAction) イベント
      </td>

      <td>
        ノー
      </td>

      <td>
        そう
      </td>

      <td>
        そう
      </td>

      <td />
    </tr>

    <tr>
      <td>
        [BrowserInteraction](/attribute-dictionary/?event=BrowserInteraction) イベント
      </td>

      <td>
        ノー
      </td>

      <td>
        ノー
      </td>

      <td>
        そう
      </td>

      <td>
        `BrowserInteraction` events are harvested immediately after the interaction finishes. There will always be at least one interaction that represents the initial page load. Additional interactions are collected only if the URL changes (representing route change). `AjaxRequest` events are also harvested at the same time if they occur during an interaction.
      </td>
    </tr>

    <tr>
      <td>
        Browser logs
      </td>

      <td>
        ノー
      </td>

      <td>
        そう
      </td>

      <td>
        そう
      </td>

      <td />
    </tr>

    <tr>
      <td>
        [UserAction](/attribute-dictionary/?event=UserAction) events
      </td>

      <td>
        ノー
      </td>

      <td>
        そう
      </td>

      <td>
        そう
      </td>

      <td />
    </tr>

    <tr>
      <td>
        [BrowserPerformance](/attribute-dictionary/?event=BrowserPerformance) events
      </td>

      <td>
        ノー
      </td>

      <td>
        そう
      </td>

      <td>
        そう
      </td>

      <td />
    </tr>
  </tbody>
</table>