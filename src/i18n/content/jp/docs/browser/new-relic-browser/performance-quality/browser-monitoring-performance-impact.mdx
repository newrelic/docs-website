---
title: ブラウザのモニタリングとパフォーマンスへの影響
tags:
  - Browser
  - Browser monitoring
  - Performance quality
metaDescription: The negligible amount of overhead required to load browser JavaScript into a webpage results in a significant return of actionable data.
translationType: machine
---

ブラウザモニタリングのJavaScriptスニペットは、ウェブサイトのパフォーマンスや、ページの読み込み時間に対するユーザーの認識に、ほとんど目に見えない影響をもたらします。このJavaScriptは、ウェブページのデータのパケットに含まれており、そのまま送信されます。さらに、JavaScriptはウェブページの残りの部分が実行されると同時に、エラーやイベントの監視を開始します。JavaScriptをロードするために必要なオーバーヘッドはごくわずかで、実用的なデータの大きなリターンとなります。

## 全体的な影響 [#overall]

JavaScriptのオーバーヘッドは、ユーザーへの影響とお客様のシステムのパフォーマンスへの影響の両方を考慮しています。

* **ユーザーの認識：** 一般的にユーザーは、200ms未満のウェブサイトのパフォーマンス低下を検知できません。ブラウザのJavaScriptは、ページの読み込みごとに15ms以下の時間を加算します。これは時間の経過とともに分割されるため、ユーザーがJavaScriptによるパフォーマンスへの影響を認識することはできません。
* **ウェブサーバとシステム：** ブラウザアプリの監視は、サーバではなくユーザーのブラウザ上で行われます。処理時間がCPU消費量に影響することはありません。

さらに、監視対象のアプリやウェブページへの潜在的な影響を最小限に抑えるため、追加の措置を講じています。例えば、"ローダー" スクリプトは、 `< HEAD>` に同期してロードされ、ページのライフサイクル全体でモニタリングが有効になるようにしています。このスクリプトはインラインで含まれているため、 [コンテンツデリバリネットワーク（CDN）](/docs/browser/new-relic-browser/performance-quality/security-new-relic-browser#cdn) への別のラウンドトリップネットワークリクエストは必要ありません。"ローダー" は、最初のページロード時に付属しています。

ページのライフサイクルの後半で、New Relic は追加の監視スクリプトを非同期的にロードします。このスクリプトはユーザーに知覚できるような影響を与えることはなく、1ページあたり15ms未満という全体的なオーバーヘッドに含まれています。

## ネットワークへの影響 [#network]

また、ブラウザモニタリングでは、データをローカル（クライアント内）で集約し、 `load` 、定期的な間隔で、 `unload` 、またはデータが収集されたときに New Relic にデータを送信することで、エンドユーザーのネットワークトラフィックを最小限に抑えます。(ブラウザセッションのアイドル期間中は、送信が必要ない場合もあります)。

### ブラウザエージェントスクリプト [#agent-scripts]

エージェントは2つのスクリプトで構成されています。1つ目のスクリプトは、HTMLドキュメントにインラインで挿入されます。2つ目のスクリプトは、ウィンドウのロードイベントが発生したときに、コンテンツ・デリバリー・ネットワーク（js-agent.newrelic.com）からダウンロードされます。 [ブラウザエージェントの種類についてはこちら](/docs/browser/browser-monitoring/installation/install-browser-monitoring-agent/#agent-types) 。

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        スクリプト
      </th>

      <th>
        Lite
      </th>

      <th>
        Pro
      </th>

      <th>
        プロ＋SPA
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        インラインのスクリプトサイズ
      </td>

      <td>
        8.3 KB
      </td>

      <td>
        22 KB
      </td>

      <td>
        27 KB
      </td>
    </tr>

    <tr>
      <td>
        ダウンロードしたスクリプトのサイズ
      </td>

      <td>
        27 KB
      </td>

      <td>
        27 KB
      </td>

      <td>
        38 KB
      </td>
    </tr>
  </tbody>
</table>

### ブラウザエージェントのハーベスト [#agent-harvests]

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        データ型
      </th>

      <th>
        Lite
      </th>

      <th>
        Pro
      </th>

      <th>
        プロ＋SPA
      </th>

      <th>
        収穫頻度
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        ページビューのメトリクス/イベント
      </td>

      <td>
        そう
      </td>

      <td>
        そう
      </td>

      <td>
        そう
      </td>

      <td>
        1回目のコール2つ目のスクリプトがダウンロードされると、すぐに最初のハーベストコールを行い、ページビューメトリクスと `PageView` イベントを生成します。これは、 `bam.nr-data.net` または `bam-cell.nr-data.net` へのJSONPコールです。
      </td>
    </tr>

    <tr>
      <td>
        `PageViewTiming` イベント
      </td>

      <td>
        そう
      </td>

      <td>
        そう
      </td>

      <td>
        そう
      </td>

      <td>
        すべてのエージェントタイプは、 `PageViewTiming` イベントを収集します。最初の収集は、エージェントが初期化されてから10秒後、ウィンドウロードイベントの後に行われます。その後、30秒ごとに `PageViewTiming` イベントを追加で送信しますが、送信するデータがある場合のみです。これらのハーベストコールに含まれるイベントタイプについては、データディクショナリーの [`PageViewTiming` セクション](/attribute-dictionary/?event=PageViewTiming) を参照してください。
      </td>
    </tr>

    <tr>
      <td>
        `JavaScriptError` metrics/events
      </td>

      <td>
        ノー
      </td>

      <td>
        そう
      </td>

      <td>
        そう
      </td>

      <td>
        エージェントの初期化時に最初に呼び出され、その後は60秒ごとに呼び出されます。メトリクスデータとして送信されるこれらのコールは、エージェント自身が行うAjaxコールを含んでいるため、60秒ごとに発生します。この情報は、Ajaxメトリクスにも適用されます。
      </td>
    </tr>

    <tr>
      <td>
        Ajaxメトリクス
      </td>

      <td>
        ノー
      </td>

      <td>
        そう
      </td>

      <td>
        そう
      </td>

      <td>
        JavaScriptエラーと一緒に送信されます。
      </td>
    </tr>

    <tr>
      <td>
        Ajaxイベント
      </td>

      <td>
        ノー
      </td>

      <td>
        そう
      </td>

      <td>
        そう
      </td>

      <td>
        `BrowserInteraction` イベントと一緒に送信されます。これらは、インタラクションが終了するとすぐに収集されます。インタラクションを収集するのは、最初のページロード時とルート変更時のみです。また、カスタムインタラクションを生成するためのAPIも用意しています。各インタラクションに対して個別の呼び出しが行われます。通常、これらの呼び出しは、ユーザーがページを操作することに依存するため、頻繁には行われません。この情報は、 `BrowserInteraction` イベントにも適用されます。
      </td>
    </tr>

    <tr>
      <td>
        セッション・トレース
      </td>

      <td>
        ノー
      </td>

      <td>
        そう
      </td>

      <td>
        そう
      </td>

      <td>
        エージェントが初期化されたときに最初に呼び出され、その後は送信するデータがあれば10秒ごとに呼び出されます。セッショントレースは最も多くのデータを送信しますが、サンプル数が多いのが特徴です。セッショントレースのデータを送信できるようになるのは、1時間あたり75ページビュー程度です。エージェントは、送信するのに十分なデータがあれば、10秒ごとにデータを送信します。
      </td>
    </tr>

    <tr>
      <td>
        `PageAction` イベント
      </td>

      <td>
        ノー
      </td>

      <td>
        そう
      </td>

      <td>
        そう
      </td>

      <td>
        最初の呼び出しは、エージェントの初期化時に行われ、その後、送信するデータがある場合は30秒ごとに行われます。
      </td>
    </tr>

    <tr>
      <td>
        `BrowserInteraction` イベント
      </td>

      <td>
        ノー
      </td>

      <td>
        ノー
      </td>

      <td>
        そう
      </td>

      <td>
        インタラクションが終了すると直ちに送信されます。最初のページロードを表す少なくとも1つのインタラクションが常に存在します。追加のインタラクションは、URLが変更された（ルート変更を表す）場合にのみ収集されます。Ajaxイベントの収穫頻度の詳細は、ここでも適用されます。
      </td>
    </tr>
  </tbody>
</table>