---
title: New Relic MCP を設定する
metaDescription: Step-by-step instructions to configure New Relic's Model Context Protocol server with your preferred AI development tools.
freshnessValidatedDate: never
translationType: machine
---

このガイドでは、好みの AI 開発ツールを使用して New Relic の Model Context Protocol (MCP) サーバーを設定する手順を説明します。プラットフォーム固有の手順については、以下の環境を選択してください。

<Callout variant="important">
  このページに記載されているものを含むがこれに限定されない AI ツールを New Relic AI MCP サーバーで使用すると、AI がユーザーに代わってアクションを実行することになります。ここで説明するいずれかの方法を使用する場合は、ユースケース、要件、および内部ポリシーに適した RBAC と最小限のアクセス権限を持つ適切な New Relic アカウントを作成して使用してください。
</Callout>

New Relic MCP のセットアップを開始する前に、認証セットアップを含む[前提条件](/docs/agentic-ai/mcp/overview#prerequisites)が完了していることを確認してください。次に、特定の開発環境の指示に従います。

## include-tag を使用したフィルタリングツール [#filtering-tools]

New Relic MCP ツールは、内部タグ ( `alerting` 、 `discovery` 、 `data-access`など) を使用して整理および分類されます。

次に示すように、 requestsに`include-tags` `HTTP`ヘッダーを送信することで、AI エージェントがアクセスするツールを動的にフィルタリングできます。

<Callout variant="important">
  **US/EU 地域の通知:**このトピックの設定例では、米国地域の MCP 接続 URL ( [https://mcp.newrelic.com/mcp/)](https://mcp.newrelic.com/mcp/)を使用します。New Relicアカウントが EU 地域にある場合は、すべての設定ファイルとコマンドライン引数でこの URL を地域のエンドポイントに置き換える必要があります: [https://mcp.eu.newrelic.com/mcp/](https://mcp.eu.newrelic.com/mcp/) 。
</Callout>

```json
"servers": {
    "new-relic-mcp-server": {
        "url": "https://mcp.newrelic.com/mcp/",
        "type": "http",
        "headers": {
            "api-key": "NRAK-****",
            "include-tags": "discovery,alerting"
        }
    }
}
```

利用可能なタグとそれぞれに関連付けられたツールの完全なリストについては、 [New Relic MCP ツールリファレンス](/docs/agentic-ai/mcp/tool-reference)ドキュメントを参照してください。

## クロード・コード設定 [#claude-code]

Claude Code は、OAuth (推奨) とAPIキーの両方の認証方法をサポートしています。

### OAuth方式（推奨） [#oauth]

1. Claude Code がインストールされ、構成されていることを確認してください。
2. コマンドラインを使用して MCP サーバーを追加します。

```shell
claude mcp add newrelic --transport http https://mcp.newrelic.com/mcp/
```

または、次のように`~/.claude.json`を編集します。

```json
{
  "mcpServers": {
    "newrelic": {
      "httpUrl": "https://mcp.newrelic.com/mcp/",
      "oauth": {
        "enabled": true,
        "clientId": "pUWGgnjsQ0bydqCbavTPpw==",
        "authorizationUrl": "https://login.newrelic.com/login",
        "tokenUrl": "https://mcp.newrelic.com/oauth2/token",
        "scopes": ["openid"]
      }
    }
  }
}
```

3. MCP サーバーがリストされていることを確認します。

```shell
claude mcp list
```

4. クロード開始:

```shell
claude
```

5. 認証:

```shell
/mcp auth newrelic
```

ブラウザの`OAuth`フローに従います。

### APIキー方式 [#api-key]

1. コマンドラインを使用して MCP サーバーを追加します。

```shell
claude mcp add newrelic --transport http --env NEW_RELIC_API_KEY=NRAK-YOUR-KEY https://mcp.newrelic.com/mcp/
```

または、次のように`~/.claude.json`を編集します。

```json
{
  "mcpServers": {
    "newrelic": {
      "url": "https://mcp.newrelic.com/mcp/",
      "transport": "http",
      "env": {
        "NEW_RELIC_API_KEY": "NRAK-YOUR-KEY-HERE"
      }
    }
  }
}
```

2. MCP サーバーがリストされていることを確認します。

```shell
claude mcp list
```

3. クロード開始:

```shell
claude
```

## クロードデスクトップセットアップ [#claude-desktop]

Claude Desktop では、 `OAuth`認証に`mcp-remote`プロキシが必要です。

### OAuth方式（推奨） [#oauth]

1. config ディレクトリを作成します (必要な場合)。

```shell
mkdir -p "~/Library/Application Support/Claude"
```

2. 設定ファイルを編集します: `~/Library/Application Support/Claude/claude_desktop_config.json` (macOS) または`%APPDATA%\Claude\claude_desktop_config.json` (Windows)。

```json
{
  "mcpServers": {
    "new-relic-mcp": {
      "command": "npx",
      "args": [
        "mcp-remote",
        "https://mcp.newrelic.com/mcp/"
      ]
    }
  }
}
```

3. Claude Desktop を再起動します。

### APIキー方式 [#api-key]

1. 次に示すように、 `~/Library/Application Support/Claude/claude_desktop_config.json` (macOS) または`%APPDATA%\Claude\claude_desktop_config.json` (Windows) を編集して MCP サーバーを追加します。

```json
{
  "mcpServers": {
    "newrelic": {
      "url": "https://mcp.newrelic.com/mcp/",
      "transport": "http",
      "headers": {
        "api-key": "NRAK-YOUR-KEY-HERE"
      }
    }
  }
}
```

2. Claude Desktop を再起動します。

## ウィンドサーフィンのセットアップ [#windsurf]

### OAuth 方式 (mcp-remote プロキシ経由) [#oauth]

1. 次のように構成ファイル`~/.codeium/windsurf/mcp_config.json`を編集します。

```json
{
  "mcpServers": {
    "newrelic-oauth": {
      "command": "npx",
      "args": [
        "-y",
        "mcp-remote",
        "https://mcp.newrelic.com/mcp/"
      ]
    }
  }
}
```

2. Windsurfを再起動します。

3. カスケード パネルのハンマー アイコンを使用して MCP サーバーを確認します。

### APIキー方式 [#api-key]

1. 次に示すように`~/.codeium/windsurf/mcp_config.json`を編集して MCP サーバーを追加します。

```json
{
  "mcpServers": {
    "newrelic-api": {
      "serverUrl": "https://mcp.newrelic.com/mcp/",
      "headers": {
        "api-key": "NRAK-YOUR-API-KEY"
      }
    }
  }
}
```

2. Windsurfを再起動します。

## Gemini CLI のセットアップ [#gemini-cli]

### OAuth方式 [#oauth]

1. 設定ファイルを編集します: `~/.gemini/settings.json` (Linux/macOS) または`%APPDATA%\Gemini\settings.json` (Windows)。

```json
{
  "theme": "Default",
  "selectedAuthType": "oauth-personal",
  "mcpServers": {
    "newrelic": {
      "httpUrl": "https://mcp.newrelic.com/mcp/",
      "oauth": {
        "enabled": true,
        "clientId": "pUWGgnjsQ0bydqCbavTPpw==",
        "authorizationUrl": "https://login.newrelic.com/login",
        "tokenUrl": "https://mcp.newrelic.com/oauth2/token",
        "scopes": ["openid"]
      }
    }
  }
}
```

2. Gemini CLI を起動します。

```shell
gemini
```

3. 認証:

```shell
/mcp auth newrelic
```

### APIキー方式 [#api-key]

1. 次に示すように、 `~/.gemini/settings.json` (Linux/macOS) または`%APPDATA%\Gemini\settings.json` (Windows) を編集して MCP サーバーを追加します。

```json
{
  "theme": "Default",
  "selectedAuthType": "oauth-personal",
  "mcpServers": {
    "newrelic": {
      "url": "https://mcp.newrelic.com/mcp/",
      "headers": {
        "api-key": "NRAK-YOUR-KEY-HERE"
      }
    }
  }
}
```

2. Gemini CLI を起動します。

```shell
gemini
```

3. 認証:

```shell
/mcp auth newrelic
```

## VS Codeのセットアップ [#vs-code]

VS Code は、両方の認証方法で引き続き完全にサポートされます。VS Code (バージョン 1.60 以降) が必要です。

### OAuth方式 [#oauth]

次に示すように`.vscode/mcp.json`を編集して MCP サーバーを追加します。

```json
{
  "servers": {
    "new-relic-mcp": {
      "url": "https://mcp.newrelic.com/mcp/",
      "type": "http"
    }
  }
}
```

### APIキー方式 [#api-key]

次に示すように`.vscode/mcp.json`を編集して MCP サーバーを追加します。

```json
{
  "servers": {
    "new-relic-mcp": {
      "url": "https://mcp.newrelic.com/mcp/",
      "headers": {
        "api-key": "NRAK-YOUR-API-KEY-HERE"
      }
    }
  }
}
```

### セットアップ手順

1. VS Code ワークスペースで`mcp.json`作成または開きます。

* `.vscode`ディレクトリがない場合は、プロジェクト ルートに作成します。

  * `.vscode`内に`mcp.json`という名前のファイルを作成します。
  * 上記のいずれかの方法を使用して認証設定を追加します。

2. サーバーを起動します:

   * `mcp.json`ファイルがエディターで開いていることを確認してください。
   * サーバー設定の上にあるクリック可能なリンク (CodeLens) を探します。 これをクリックすると、MCP サーバーが起動します。

接続すると、自然言語プロンプトを使用して New Relic AI と対話できるようになります。MCP サーバーは、New Relic アカウントからの認証とデータ取得を管理します。