---
title: サービスレベルに関するアラート
tags:
  - Service Level Management
  - SLI/SLO
metaDescription: 'With New Relic, you can alert on SLI/SLOs.'
translationType: machine
---

import alertsConditionThresholdsSlm from 'images/alerts_screenshot-full_condition-thresholds-slm.png'

import alertsAdvancedSignalSettingsSlm from 'images/alerts_screenshot-crop_advanced-signal-settings-slm.png'

import slmAlertsCta from 'images/slm_screenshot-full_alerts-cta.png'

import slmAlertsOptions from 'images/slm_screenshot-crop_alerts-options.png'

import slmAlertsErrorBudget from 'images/slm_screenshot-crop_alerts-error-budget.png'

サービス レベルを実装することで期待される成果の 1 つは、アラート ポリシーを調整して、実際にクライアント エクスペリエンスに損害を与え、ビジネスにリスクをもたらす問題に通知を削減できることです。

サービス レベル目標を設定すると、コンプライアンス期間が終了する前にエラー バジェットが使い果たされた場合に通知するアラートを構成できます。これらのアラートは、ビジネスに大きな影響を与えるインシデントが発生したときに表示されます。トリガーされた場合は、それらを優先する必要があり、関連するチームと協力して問題の原因の診断を開始する必要があります。

## エラー バジェット バーンレートに関するアラート [#alert-error-budget]

バーン レート アラートの背後にある考え方は、エラー バジェットは、SLO 期間中に許容できる不良イベントの数を表すというものです。定義上、すべてのエラー バジェットを一定の割合で使用すると、バーン レート = 1 になります。その場合、SLO 期間が終了する前にエラー バジェットを完全に使い切ってしまうため、許容バーン レートを超えるバーン レートは維持できません。したがって、それが長時間続く場合は、アラートを受け取ることをお勧めします。

### エラー バジェットの燃焼率に関するアラートを作成する [#create-alert-error-budget]

サービス レベルの概要とアラート条件のページに、アラートを作成するオプションがあります。

<img
  title="Alerts CTA"
  alt="Create Alerts"
  src={slmAlertsCta}
/>

<figcaption>
  **[one.newrelic.com](https://one.newrelic.com/all-capabilities) > Service Levels > Choose a service level** に移動し、 **Settings** オプションの下の **Alert conditions** をクリックします。
</figcaption>

それをクリックすると、サイドパネルが開き、リストの上部に高速書き込み率を警告するオプションが表示されます.

<img
  title="Alerts Recommended Options"
  alt="Alerts Recommended Options"
  src={slmAlertsOptions}
/>

<figcaption>
  **[one.newrelic.com](https://one.newrelic.com/all-capabilities) > Service Levels > Choose a service level** に移動し、 **Settings** オプションの下の **Alert conditions** をクリックします。 **\[アラート]** ボタンをクリックして、サイド パネルを開きます。
</figcaption>

ファスト バーン アラートは、SLO 予算消費率に関する Google の推奨事項、特にファスト バーン アラートに従います。これらのアラートは、消費量の急激な大幅な変化を警告します。修正しないと、すぐにエラー バジェットを使い果たしてしまいます。1 時間以内に 2% の SLO バジェット消費を設定します。これは、達成されないままにしておくと、サービスが 50 時間でエラー バジェットを完全に消費することを意味します。

続行するには、既存のアラート ポリシーを選択するか、新しいアラート ポリシーを作成する必要があります。

または、\[カスタマイズ] をクリックして、独自のしきい値を設定することもできます。

## エラー バジェットの消費に関するアラート [#alert-consumption]

このアラートは、その期間のエラー バジェットの 80% を消費すると警告します。

設定するには、サービス レベルの概要ページまたはアラート条件ページで **\[アラート]** をクリックし、 **\[エラー バジェットの消費]** オプションを選択します。

<img
  title="Alerts error budget.png"
  alt="Alerts Error Budget"
  src={slmAlertsErrorBudget}
/>

<figcaption>
  **[one.newrelic.com](https://one.newrelic.com/all-capabilities) > Service Levels > Choose a service level** に移動し、 **Settings** オプションの下の **Alert conditions** をクリックします。 **\[アラート]** ボタンをクリックして、サイド パネルを開きます。
</figcaption>

続行するには、既存のアラート ポリシーを選択するか、新しいアラート ポリシーを作成する必要があります。

別のしきい値を設定する場合は、 **\[カスタマイズ]** をクリックし、アラート構成カードの手順に従います。

## SLO 達成に関するアラート

SLO が長期間にわたって目標を下回った場合にアラートを設定する場合は、 **SLO コンプライアンス** オプションを選択できます。

SLI が不安定な場合、このタイプのアラートの精度は低くなる可能性があります。したがって、それを軽減するには、代わりにバーン レート アラートを使用する必要があります。

## 独自のエラー バジェット バーン レートしきい値の設定

高速書き込みアラートに関する Google の推奨に従わない場合は、独自のしきい値を設定できます。

### 条件のしきい値を設定する [#condition-thresholds]

エラー バジェット バーン レートは、SLO 期間全体を考慮して、サービスがエラー バジェットを消費する速さを示します。これを計算する式は次のとおりです。

```sql
critical burn rate = (tolerated budget consumption * SLO period [h]) / (evaluation period [h])
```

* 許容予算消費: 評価期間中に消費できる予算の量。
* SLO 期間: SLO の時間枠 (通常は時間単位)。
* 評価期間: 考慮している集計ウィンドウ (簡単にするために、アラート条件の集計ウィンドウで 1 時間を使用できます)。

ただし、発生する可能性のある最大エラー率が 100% であることを考慮すると、最大書き込み率も存在することを意味し、したがって、重大な書き込み率は次の範囲内である必要があります。

```sql
0 < critical burn rate < maximum burn rate
```

最大燃焼速度値は次のように計算されます。

```sql
maximum burn rate = 1 / (1 - SLO target)
```

最後に、アラートのしきい値を定義するために、1 時間あたりのクリティカル バーン レートにエラー バジェットを掛けます。

```sql
threshold = error budget * critical burn rate 
```

#### 例 [#condition-thresholds-example]

**99.9%**の目標を持つ**28 日間の**SLO の例で、これがどのように機能するかを見てみましょう。

28 日間の SLO の場合、Google**は、過去 1 時間**の**2%**の SLO 予算消費についてアラートを出すことを推奨しています。つまり、同じ割合で予算を消化し続けると、50 時間で SLO に違反することになります ( `100% / 2%`の結果)。

次に、次の変数があります。

* SLO 目標: `99.9%`
* SLO 期間: `28 days (28 * 24 hours)`
* 許容される予算消費: `2% (0.02)`
* 評価期間： `1 hour`

したがって：

```sql
critical burn rate per hour = (0.02 * 28 * 24) / 1 = 13.44
```

SLO の可能な最大燃焼速度値は次のとおりです。

```sql
maximum burn rate = 1 / (1 - 0.999) = 1000
```

そして最後に：

```sql
threshold = 0.1 * 13.44 = 1.344
```

これは、アラート条件のしきい値として使用する値です。クエリがしきい値 (この例では 1.344) を超える値を返した場合、評価期間 (この例では 60 分) に少なくとも 1 回、違反を開きます。 .

<img
  title="Alerts threshold.png"
  alt="Alerts threshold configuration"
  src={alertsConditionThresholdsSlm}
/>

<Callout variant="important">
  サービス レベル側で SLO 目標を編集する場合は、アラート条件の目標も忘れずに編集してください。
</Callout>

### 設定 [#extra-settings]

このアラート条件の追加パラメーターを調整することが重要です。

ウィンドウ期間を評価期間に設定します。前の例に従って、 **60 分**を設定します。これは、アラート システムが 60 分のデータを集計することを意味します。

<Callout variant="important">
  評価期間は、最大 2 時間のデータの集計をサポートします。
</Callout>

New Relic が毎分前の 60 分間のデータを評価するように、間隔ごとに**60 秒**のスライドを使用できます。

<img
  title="Alerts period.png"
  alt="Alerts evaluation period"
  src={alertsAdvancedSignalSettingsSlm}
/>

次に、通知の管理方法を決定するポリシーに条件を関連付けます。

最後に、未解決の違反をいつ自動的にクローズするかを選択できます。

### 制限 [#limitations]

New Relic アラートは、最大 2 時間分のデータを集約できます。したがって、New Relic は、SLO 期間全体にわたって SLO コンプライアンスについてアラートを出す機能をまだ提供していません。