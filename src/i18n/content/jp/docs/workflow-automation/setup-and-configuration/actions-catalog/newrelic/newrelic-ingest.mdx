---
title: New Relic Ingestアクション
tags:
  - workflow automation
  - workflow
  - workflow automation actions
  - New Relic actions
  - New Relic Ingest actions
metaDescription: A list of available new relic ingest actions in the actions catalog for workflow definitions
freshnessValidatedDate: never
translationType: machine
---

<Callout title="プレビュー">
  この機能はまだ開発中ですが、ぜひお試しください。

  この機能は現在、弊社の[プレリリース ポリシー](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy)に従ってプレビュー プログラムの一部として提供されています。
</Callout>

このページでは、ワークフロー自動化アクション カタログで使用できる New Relic 取り込みアクションの包括的なリファレンスを提供します。 これらのアクションにより、イベントとログを New Relic に送信できるようになります。

## 前提条件

ワークフロー自動化で New Relic アクションを使用する前に、次の点を確認してください。

* 適切な権限を持つ New Relic アカウント。
* New Relicライセンスキー (データを別のアカウントに送信する場合)。
* 使用を計画している特定の New Relic サービスに必要な権限。

New Relicアカウントのライセンスキーの作成および管理方法については、「[ライセンスキー」](/docs/apis/intro-apis/new-relic-api-keys/#license-key)を参照してください。

## データ取り込みアクション

<CollapserGroup>
  <Collapser id="newrelic-ingest-sendevents" title="New Relicにカスタムイベントを送信する">
    カスタムイベントをNew Relicに報告します。

    <Tabs>
      <TabsBar>
        <TabsBarItem id="createventinputs">
          入力
        </TabsBarItem>

        <TabsBarItem id="createventoutputs">
          出力
        </TabsBarItem>

        <TabsBarItem id="createventexample">
          例
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="createventinputs">
          <table>
            <thead>
              <tr>
                <th>
                  入力フィールド
                </th>

                <th>
                  オプション性
                </th>

                <th>
                  タイプ
                </th>

                <th>
                  説明
                </th>

                <th>
                  例
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **属性**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  地図
                </td>

                <td>
                  提供される場合、すべてのイベントの一部となる共通属性。

                  必要なイベント項目が共通定義をオーバーライドする場合、各イベント項目をマージします。
                </td>

                <td>
                  `"{\"page\": \"1\", \"limit\": \"10\"}"`
                </td>
              </tr>

              <tr>
                <td>
                  **イベント**
                </td>

                <td>
                  必須
                </td>

                <td>
                  リスト
                </td>

                <td>
                  イベントデータのリスト。

                  <Callout variant="important">
                    イベントでは、カスタムイベント タイプを表す`eventType`フィールドを使用する必要があります。 リクエストごとに許可されるイベントの最大数は**100**です。
                  </Callout>
                </td>

                <td>
                  `"[{\"eventType\":\"XYZ\",\"attributes\":{\"foo\":\"bar\"}}, {\"eventType\":\"ABC\",\"value\":\"1234\",\"attributes\":{\"color\":\"red\"}}]"`
                </td>
              </tr>

              <tr>
                <td>
                  **ライセンスキー**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  弦
                </td>

                <td>
                  **New Relicアカウント ライセンスキー**(必須) は、イベントの対象アカウントを指定します。 指定しない場合、システムはワークフローを実行しているアカウントのデフォルトのライセンスキーを使用します。

                  **New Relicアカウントのライセンスキー** を作成および管理するため[ のAPI キーについて詳しくお読みください](/docs/apis/intro-apis/new-relic-api-keys/#license-key) 。
                </td>

                <td>
                  `"{{ .secrets.secretName }}"`

                  ここで、 

                  `secretName`

                  はライセンスキーが保存されているキーです。
                </td>
              </tr>

              <tr>
                <td>
                  **セレクター**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  リスト
                </td>

                <td>
                  指定されたもののみを出力として取得するセレクター。
                </td>

                <td>
                  `[{\"name\": \"success\", \"expression\": \".success\"}]`
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="createventoutputs">
          <table>
            <thead>
              <tr>
                <th>
                  出力フィールド
                </th>

                <th>
                  タイプ
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **成功**
                </td>

                <td>
                  ブール値
                </td>
              </tr>

              <tr>
                <td>
                  **エラーメッセージ**
                </td>

                <td>
                  ストリング
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="createventexample">
          <table>
            <thead>
              <tr>
                <th>
                  ワークフローの例
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  ```yaml
                  name: heartbeat_newrelicIngestSendEvents

                  workflowInputs:
                  cellName:
                    type: String

                  steps:
                  - name: runAction
                    type: action
                    action: newrelic.ingest.sendEvents
                    version: 1
                    inputs:
                      attributes:
                        colour: red
                        id: 1234
                      events:
                        - eventType: HeartBeat
                          test: "OK"
                          attributes:
                            foo: bar
                        - eventType: HeartBeat1234
                          test: "OK1234"
                          attributes:
                            foo: bar
                        - eventType: HeartBeat12345
                          test: "OK12345"
                          attributes:
                            foo: bar
                            colour: yellow
                        - eventType: HeartBeat12345678
                          test: "OK12345678"
                      selectors:
                        - name: success
                          expression: ".success"
                  ```

                  **期待される出力:**

                  ```yaml
                  {
                    "success": true
                  }
                  ```

                  **イベントを取得:**

                  ワークフローを正常に実行した後、ワークフローを実行したアカウントでクエリを実行して、関連付けられたイベントを取得できます。

                  ```sql
                  SELECT * FROM HeartBeat
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>
</CollapserGroup>

<CollapserGroup>
  <Collapser id="newrelic-ingest-sendlogs" title="New Relicへのログ送信">
    New Relicへのログ送信

    <Tabs>
      <TabsBar>
        <TabsBarItem id="newrelic-ingest-sendlogsinputs">
          入力
        </TabsBarItem>

        <TabsBarItem id="newrelic-ingest-sendlogsoutputs">
          出力
        </TabsBarItem>

        <TabsBarItem id="newrelic-ingest-sendlogsexample">
          例
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="newrelic-ingest-sendlogsinputs">
          <table>
            <thead>
              <tr>
                <th>
                  入力フィールド
                </th>

                <th>
                  オプション性
                </th>

                <th>
                  タイプ
                </th>

                <th>
                  説明
                </th>

                <th>
                  例
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **属性**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  地図
                </td>

                <td>
                  共通属性は、提供される場合、すべてのログに含まれます。これらは各ログ項目と結合され、競合が発生した場合にはログ固有の値が共通属性を上書きします。
                </td>

                <td>
                  `"{\"page\": \"1\", \"limit\": \"10\"}"`
                </td>
              </tr>

              <tr>
                <td>
                  **ログ**
                </td>

                <td>
                  必須
                </td>

                <td>
                  リスト
                </td>

                <td>
                  ログのリスト。各

                  **ログに**

                  は

                  `message`

                  フィールドが必要です。リクエストごとに最大 100 ログ。
                </td>

                <td>
                  `"[{\"message\":\"XYZ\",\"attributes\":{\"foo\":\"bar\"}}, {\"message\":\"ABC\",\"value\":\"1234\",\"attributes\":{\"color\":\"red\"}}]"`
                </td>
              </tr>

              <tr>
                <td>
                  **ライセンスキー**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  弦
                </td>

                <td>
                  **New Relicアカウント ライセンスキー**(必須) は、イベントの対象アカウントを指定します。 指定しない場合、システムはワークフローを実行しているアカウントのデフォルトのライセンスキーを使用します。

                  **New Relicアカウントのライセンスキー** を作成および管理するため[ のAPI キーについて詳しくお読みください](/docs/apis/intro-apis/new-relic-api-keys/#license-key) 。
                </td>

                <td>
                  `"{{ .secrets.secretName }}"`

                  ここで、 

                  `secretName`

                  はライセンスキーが保存されているキーです。
                </td>
              </tr>

              <tr>
                <td>
                  **セレクター**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  リスト
                </td>

                <td>
                  指定されたもののみを出力として取得するセレクター。
                </td>

                <td />
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="newrelic-ingest-sendlogsoutputs">
          <table>
            <thead>
              <tr>
                <th>
                  出力フィールド
                </th>

                <th>
                  タイプ
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **成功**
                </td>

                <td>
                  ブール値
                </td>
              </tr>

              <tr>
                <td>
                  **エラーメッセージ**
                </td>

                <td>
                  ストリング
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="newrelic-ingest-sendlogsexample">
          <table>
            <thead>
              <tr>
                <th>
                  ワークフローの例
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  ```yaml
                  name: heartbeat_newrelicIngestSendLogs

                  workflowInputs:
                  cellName:
                    type: String

                  steps:
                  - name: runAction
                    type: action
                    action: newrelic.ingest.sendLogs
                    version: 1
                    inputs:
                      attributes:
                        colour: red
                        id: 1234
                      logs:
                        - message: 'Heartbeat sendLogs Action Test Message'
                          attributes:
                            foo: bar
                        - message: 'HeartBeat1234'
                          attributes:
                            foo: bar
                        - message: 'HeartBeat12345'
                          attributes:
                            foo: bar
                            colour: yellow
                        - message: 'HeartBeat12345678'
                      selectors:
                        - name: success
                          expression: ".success"
                  ```

                  **期待される出力:**

                  ```yaml
                  {
                    "success": true
                  }
                  ```

                  **ログを取得:**

                  ワークフローを正常に実行した後、ワークフローを実行したアカウントでクエリを実行して、関連するログを取得できます。

                  ```sql
                  SELECT * FROM Log
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>
</CollapserGroup>

<CollapserGroup>
  <Collapser id="newrelic.ingest.sendMetrics" title="New Relic にメトリクスを送信する">
    <Tabs>
      <TabsBar>
        <TabsBarItem id="newrelic-ingest-sendmetricsinputs">
          入力
        </TabsBarItem>

        <TabsBarItem id="newrelic-ingest-sendmetricsoutputs">
          出力
        </TabsBarItem>

        <TabsBarItem id="newrelic-ingest-sendmetricsexample">
          例
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="newrelic-ingest-sendmetricsinputs">
          <table>
            <thead>
              <tr>
                <th>
                  入力フィールド
                </th>

                <th>
                  オプション性
                </th>

                <th>
                  タイプ
                </th>

                <th>
                  例
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **メトリックス**
                </td>

                <td>
                  必須
                </td>

                <td>
                  リスト
                </td>

                <td>
                  ```yaml
                  [ { "name": "service.errors.all", "type": "count", "value": 9, "attributes": { "service.response.statuscode": "400" } }, 

                  { "name": "service.errors.all", "type": "gauge", "value": 4, "attributes": { "service.response.statuscode": "500" } }, 

                  { "name": "service.response.duration", "type": "summary", "value": { "count": 5, "sum": 0.004382655, "min": 0.0005093, "max": 0.001708826 }, "attributes": { "service.response.statuscode": "200" } } ]
                  ```
                </td>
              </tr>

              <tr>
                <td>
                  **属性**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  地図
                </td>

                <td>
                  ```yaml
                  { "timestamp": 1531414060739, "interval.ms": 10000, "attributes": { "app.name": "foo", "host.name": "dev.server.com" } }
                  ```
                </td>
              </tr>

              <tr>
                <td>
                  **ライセンスキー**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  弦
                </td>

                <td>
                  **New Relicアカウント ライセンスキー**(必須) は、イベントの対象アカウントを指定します。 指定しない場合、システムはワークフローを実行しているアカウントのデフォルトのライセンスキーを使用します。

                  **New Relicアカウントのライセンスキー** を作成および管理するため[ のAPI キーについて詳しくお読みください](/docs/apis/intro-apis/new-relic-api-keys/#license-key) 。

                  `"{{ .secrets.secretName }}"`ここで、 `secretName`はライセンスキーが保存されているキーです。
                </td>
              </tr>

              <tr>
                <td>
                  **セレクター**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  リスト
                </td>

                <td>
                  ```yaml
                  [{"name": "error", "expression": ".errorMessage"}]
                  ```
                </td>
              </tr>
            </tbody>
          </table>

          **必要なキーの値のペア** `metrics`

          `metrics`リスト内の各メトリクス データ ポイント マップは、次のキーの値構造を使用します。

          <table>
            <thead>
              <tr>
                <th>
                  属性
                </th>

                <th>
                  タイプ
                </th>

                <th>
                  オプション性
                </th>

                <th>
                  説明
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **name**
                </td>

                <td>
                  弦
                </td>

                <td>
                  必須
                </td>

                <td>
                  メトリクスの名前。 値は 255 文字未満にする必要があります。
                </td>
              </tr>

              <tr>
                <td>
                  **value**
                </td>

                <td>
                  数字または地図
                </td>

                <td>
                  必須
                </td>

                <td>
                  値は

                  [メトリクスのタイプ](/docs/data-apis/understand-data/metric-data/metric-data-type/)

                  によって異なります。 

                  `gauge`

                  および

                  `count`

                  の場合、値は単一の数値である必要があります。

                  `summary`

                  の場合、値は、カウント、合計、最小値、最大値を指定するキー値のペアを含むマップである必要があります。
                </td>
              </tr>

              <tr>
                <td>
                  **タイムスタンプ**
                </td>

                <td>
                  ロング
                </td>

                <td>
                  オプション
                </td>

                <td>
                  [Unix 時間](https://currentmillis.com/)

                  でのメトリクスの開始時刻。 デフォルトでは UTC タイムゾーンが使用されます。このフィールドは、秒、マイクロ秒、ナノ秒もサポートします。ただし、データは保存およびクエリのためにミリ秒単位に変換されます。メトリクスは、タイムスタンプが報告されてから過去 48 時間以上、または今後 24 時間以上経過した場合に削除されます。
                </td>
              </tr>

              <tr>
                <td>
                  **インターバル.ms**
                </td>

                <td>
                  正のロング
                </td>

                <td>
                  `count`

                  および

                  `summary`

                  [メトリクス タイプ](/docs/data-apis/understand-data/metric-data/metric-data-type/)

                  には必須です。
                </td>

                <td>
                  時間ウィンドウの長さ。
                </td>
              </tr>

              <tr>
                <td>
                  **タイプ**
                </td>

                <td />

                <td>
                  推奨
                </td>

                <td>
                  `count`

                   、 

                  `gauge`

                   、 

                  `summary`

                  のみをサポートします。詳細については、

                  [サポートされているメトリクス タイプを](/docs/data-apis/understand-data/metric-data/metric-data-type/)

                  参照してください。 タイプを指定しない場合は、デフォルトで

                  `gauge`

                  になります。
                </td>
              </tr>

              <tr>
                <td>
                  **属性**
                </td>

                <td>
                  文字列、JSON数値、またはブール値
                </td>

                <td>
                  推奨
                </td>

                <td>
                  この特定のメトリクスに関連付けられたキーの値ペアのマップ。 値は文字列、JSON 数値、またはブール値にすることができます。キーは大文字と小文字が区別され、255 文字未満にする必要があります。
                </td>
              </tr>
            </tbody>
          </table>

          <Callout variant="important">
            API 、 `timestamp`が必須です。 アクション内では、 `timestamp`はオプションであり、メトリクスの取り込み前に指定されていない場合はデフォルトで現在の時刻に設定されます。
          </Callout>

          **メトリック間で属性を共有する** `common`

          複数のメトリクスに一連のプロパティを含める（各メトリクスに同じプロパティを追加しない）場合は、 `common`ブロックを使用できます。 これは、関連するすべてのメトリクス データ ポイントに適用される情報を指定するオプションのマップです。 同じキーがメトリクス データ ポイントに存在する場合、 `common`セクションの値は上書きされます。

          ブロックを含むことができます。

          <table>
            <thead>
              <tr>
                <th>
                  属性
                </th>

                <th>
                  タイプ
                </th>

                <th>
                  オプション性
                </th>

                <th>
                  説明
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **タイムスタンプ**
                </td>

                <td>
                  ロング
                </td>

                <td />

                <td>
                  メトリックの開始時刻を 

                  [Unix時間](https://currentmillis.com/)

                   で表したものです。デフォルトでは、UTCタイムゾーンの現在の時刻になります。このフィールドは、秒、マイクロ秒、およびナノ秒もサポートしています。ただし、データは保存や後のクエリのためにミリ秒に変換されます。
                </td>
              </tr>

              <tr>
                <td>
                  **インターバル.ms**
                </td>

                <td>
                  正のロング
                </td>

                <td>
                  `count`

                  および 

                  `summary`
                </td>

                <td>
                  時間ウィンドウの長さ。
                </td>
              </tr>

              <tr>
                <td>
                  **属性**
                </td>

                <td>
                  文字列、JSON数値、またはブール値
                </td>

                <td />

                <td>
                  この特定のメトリックに関連するキーと値のペアのマップ。値には、文字列、JSONの数値、またはブーリアンを使用できます。
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="newrelic-ingest-sendmetricsoutputs">
          <table>
            <thead>
              <tr>
                <th>
                  出力フィールド
                </th>

                <th>
                  タイプ
                </th>

                <th>
                  例
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **requestId**
                </td>

                <td>
                  弦
                </td>

                <td>
                  `13325ef9-0001-b193-510f-019ba20b0792`
                </td>
              </tr>

              <tr>
                <td>
                  **成功**
                </td>

                <td>
                  ブール値
                </td>

                <td>
                  `success: true | false`
                </td>
              </tr>

              <tr>
                <td>
                  **エラーメッセージ**
                </td>

                <td>
                  弦
                </td>

                <td>
                  `Failure reason as message.`
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="newrelic-ingest-sendmetricsexample">
          <table>
            <thead>
              <tr>
                <th>
                  ワークフローの例
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  ```yaml
                    - name: sendMetrics
                      type: action
                      action: newrelic.ingest.sendMetrics
                      version: 1
                      inputs:
                        metrics:
                          - name: service.errors.all
                            type: count
                            value: 9
                            timestamp: 1531414060739
                            attributes:
                              service.response.statuscode: 400
                          - name: service.response.duration
                            type: guage
                            value: 4
                            timestamp: 1531414060733
                            attributes:
                              service.response.statuscode: 500
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>
</CollapserGroup>