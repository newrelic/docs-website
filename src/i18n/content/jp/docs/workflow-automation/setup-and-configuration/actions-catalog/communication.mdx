---
title: コミュニケーションアクション
tags:
  - workflow automation
  - workflow
  - workflow automation actions
  - communication actions
  - slack actions
  - ms teams actions
metaDescription: A list of available actions in the actions catalog for workflow definitions
freshnessValidatedDate: never
translationType: machine
---

<Callout title="プレビュー">
  この機能はまだ開発中ですが、ぜひお試しください。

  この機能は現在、弊社の[プレリリース ポリシー](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy)に従ってプレビュー プログラムの一部として提供されています。
</Callout>

このページでは、ワークフロー自動化アクション カタログで使用できる通信アクションの包括的なリファレンスを提供します。これらのアクションを使用すると、Slack チャネルへのメッセージの送信、反応の取得など、コミュニケーション プラットフォームをワークフロー定義に統合できます。

## 前提条件

ワークフロー自動化でコミュニケーションアクションを使用する前に、次の点を確認してください。

* 適切な権限を持つ Slack ワークスペース。
* ワークフロー自動化でシークレットとして設定された Slack ボット トークン。
* メッセージを送信する Slack チャネルへのアクセス。

Slack 統合の設定方法については、 [「Slack 設定の追加」を](/docs/autoflow/overview#add-the-slack-integration)参照してください。

## Slackアクション

<CollapserGroup>
  <Collapser id="slack.chat.postMessage" title="Slackチャンネルにメッセージを投稿する">
    オプションのファイル添付を使用して、メッセージを Slack チャネルに送信します。

    <Tabs>
      <TabsBar>
        <TabsBarItem id="chatpostMessageinputs">
          入力
        </TabsBarItem>

        <TabsBarItem id="chatpostMessageoutputs">
          出力
        </TabsBarItem>

        <TabsBarItem id="chatpostMessageexample">
          例
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="chatpostMessageinputs">
          <table>
            <thead>
              <tr>
                <th>
                  入力フィールド
                </th>

                <th>
                  オプション性
                </th>

                <th>
                  タイプ
                </th>

                <th>
                  例
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **トークン**
                </td>

                <td>
                  必須
                </td>

                <td>
                  シークレット
                </td>

                <td>
                  `${{ :secrets:slackToken }}`
                </td>
              </tr>

              <tr>
                <td>
                  **チャネル**
                </td>

                <td>
                  必須
                </td>

                <td>
                  ストリング
                </td>

                <td>
                  `my-slack-channel`
                </td>
              </tr>

              <tr>
                <td>
                  **テキスト**
                </td>

                <td>
                  必須
                </td>

                <td>
                  ストリング
                </td>

                <td>
                  `Hello World!`
                </td>
              </tr>

              <tr>
                <td>
                  **スレッドT**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  ストリング
                </td>

                <td>
                  `<digits>.<digits>`
                </td>
              </tr>

              <tr>
                <td>
                  **添付ファイル**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  マップ
                </td>

                <td />
              </tr>

              <tr>
                <td>
                  **添付ファイル.ファイル名**
                </td>

                <td>
                  必須
                </td>

                <td>
                  ストリング
                </td>

                <td>
                  `file.txt`
                </td>
              </tr>

              <tr>
                <td>
                  **添付ファイルの内容**
                </td>

                <td>
                  必須
                </td>

                <td>
                  ストリング
                </td>

                <td>
                  `Hello\nWorld!`
                </td>
              </tr>
            </tbody>
          </table>

          <Callout variant="important">
            * **token**: Slack ボットを使用します。 これは秘密の構文として渡す必要があります。トークンの設定手順については、 [「Slack 構成の追加」](/docs/autoflow/overview#add-the-slack-integration)を参照してください。
            * **channel** : メッセージを送信するチャネルの名前、またはチャネル ID。詳細については、 [Slack API を](https://api.slack.com/methods/chat.postMessage#arg_channel/)参照してください。
            * **text** : 指定された`channel`で Slack に投稿されるメッセージ。
            * **threadTs** : 親メッセージに属するタイムスタンプ。スレッド内でメッセージの返信を作成するために使用されます。
            * **attachment** : 指定された`channel`にメッセージ付きのファイルを添付できるようにします。
            * **attachment.filename** : Slack にアップロードするファイルのファイル名を指定します。
            * **attachment.content**:UTF8 としてアップロードするファイルの内容。
          </Callout>
        </TabsPageItem>

        <TabsPageItem id="chatpostMessageoutputs">
          <table>
            <thead>
              <tr>
                <th>
                  出力フィールド
                </th>

                <th>
                  タイプ
                </th>

                <th>
                  例
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **スレッドT**
                </td>

                <td>
                  ストリング
                </td>

                <td>
                  `<digits>.<digits>`
                </td>
              </tr>

              <tr>
                <td>
                  **チャンネルID**
                </td>

                <td>
                  ストリング
                </td>

                <td>
                  `<string>`
                </td>
              </tr>
            </tbody>
          </table>

          <Callout variant="important">
            * **threadTs** : メッセージのタイムスタンプ。今後の postMessage 呼び出しでスレッドに返信を投稿するために使用される場合があります。
            * **channelID** : メッセージが投稿されるチャネルの ID。
          </Callout>
        </TabsPageItem>

        <TabsPageItem id="chatpostMessageexample">
          **例1: Slackチャンネルにメッセージを投稿する**

          <table>
            <thead>
              <tr>
                <th>
                  ワークフローの例
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  ```yaml
                  name: SendMessage

                  steps:
                    - name: send_slack_message
                      type: action
                      action: slack.chat.postMessage
                      version: 1
                      inputs:
                        token: ${{ :secrets:slackToken }}
                        channel: ${{ .workflowInputs.channel }}
                        text: ${{ .workflowInputs.text }}
                  ```

                  **予想される入力:**

                  ```json
                  {
                    "inputs": [
                      {
                        "key" : "channel",
                        "value" : "my-channel"
                      },
                      {
                        "key" : "text",
                        "value" : "This is my message *with bold text* and `code backticks`"
                      }
                    ]
                  }
                  ```

                  **期待される出力:**

                  ```json
                  [
                    {
                      "threadTs": "1718897637.400609",
                      "channelID": "C063JK1RHN1"
                    }
                  ]
                  ```
                </td>
              </tr>
            </tbody>
          </table>

          **例2: ファイルを添付する**

          <table>
            <thead>
              <tr>
                <th>
                  ワークフローの例
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  ```yaml
                  name: SendFileMessage

                  steps:
                    - name: postCsv
                      type: action
                      action: slack.chat.postMessage
                      version: 1
                      inputs:
                        token: ${{ :secrets:slackToken }}
                        channel: my-channel
                        text: "Please find the attached file:"
                        attachment:
                          filename: 'file.txt'
                          content: "Hello\nWorld!"
                  ```

                  **期待される出力:**

                  ```json
                  [
                    {
                      "threadTs": "1718897637.400609",
                      "channelID": "C063JK1RHN1"
                    }
                  ]
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>
</CollapserGroup>

<CollapserGroup>
  <Collapser id="slack.chat.getReactions" title="Slackチャンネルからメッセージへの反応を取得する">
    Slack チャネルからメッセージに対する反応を取得します。

    <Tabs>
      <TabsBar>
        <TabsBarItem id="chatgetreactionsinputs">
          入力
        </TabsBarItem>

        <TabsBarItem id="chatgetreactionsoutputs">
          出力
        </TabsBarItem>

        <TabsBarItem id="chatgetreactionsexample">
          例
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="chatgetreactionsinputs">
          <table>
            <thead>
              <tr>
                <th>
                  入力フィールド
                </th>

                <th>
                  オプション性
                </th>

                <th>
                  タイプ
                </th>

                <th>
                  例
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **トークン**
                </td>

                <td>
                  必須
                </td>

                <td>
                  シークレット
                </td>

                <td>
                  `${{ :secrets:slackToken }}`
                </td>
              </tr>

              <tr>
                <td>
                  **チャンネルID**
                </td>

                <td>
                  必須
                </td>

                <td>
                  ストリング
                </td>

                <td>
                  `C063JK1RHN1`
                </td>
              </tr>

              <tr>
                <td>
                  **タイムアウト**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  int
                </td>

                <td>
                  60
                </td>
              </tr>

              <tr>
                <td>
                  **スレッドT**
                </td>

                <td>
                  必須
                </td>

                <td>
                  ストリング
                </td>

                <td>
                  `<digits>.<digits>`
                </td>
              </tr>

              <tr>
                <td>
                  **セレクター**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  リスト
                </td>

                <td>
                  `[{\"name\": \"reactions\", \"expression\": \".reactions \"}]`
                </td>
              </tr>
            </tbody>
          </table>

          <Callout variant="important">
            * **token**: Slack ボットを使用します。 これは秘密の構文として渡す必要があります。トークンの設定手順については、 [「Slack 構成の追加」](/docs/autoflow/overview#add-the-slack-integration)を参照してください。
            * **channelID** : メッセージの反応を取得するためのチャネルID。
            * **timeout** : 反応を待つ時間（秒数）。デフォルトは 60 秒、最大許容時間は 600 秒 (10 分) です。
            * **threadTs** : メッセージに属するタイムスタンプ。そのメッセージの反応を取得するために使用されます。
            * **selectors** : 指定された唯一のものを出力として取得するセレクター。
          </Callout>
        </TabsPageItem>

        <TabsPageItem id="chatgetreactionsoutputs">
          <table>
            <thead>
              <tr>
                <th>
                  出力フィールド
                </th>

                <th>
                  タイプ
                </th>

                <th>
                  例
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **反応**
                </td>

                <td>
                  リスト
                </td>

                <td>
                  `<list>`
                </td>
              </tr>
            </tbody>
          </table>

          <Callout variant="important">
            * **reactions**: キャプチャされたすべての反応を含む要素のリスト、またはタイムアウトが発生した場合は空のリスト。
          </Callout>
        </TabsPageItem>

        <TabsPageItem id="chatgetreactionsexample">
          **例1: Slackで反応を得る**

          <table>
            <thead>
              <tr>
                <th>
                  ワークフローの例
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  ```yaml
                  name: GetReactions

                  steps:
                    - name: getReactions
                      type: action
                      action: slack.chat.getReactions
                      version: 1
                      inputs:
                        token: ${{ :secrets:slackToken }}
                        channelID: ${{ .steps.promptUser.outputs.channelID }}
                        threadTs: ${{ .steps.promptUser.outputs.threadTs }}
                        timeout: ${{ .workflowInputs.timeout }}
                        selectors: ${{ .workflowInputs.selectors }}
                  ```

                  **予想される入力:**

                  ```json
                  {
                    "inputs": [
                      {
                        "key" : "channelID",
                        "value" : "C063JK1RHN1"
                      },
                      {
                        "key" : "threadTs",
                        "value" : "1718897637.400609"
                      },
                      {
                        "key" : "selectors",
                        "value" : "[{\"name\": \"reactions\", \"expression\": \".reactions \"}]"
                      }
                    ]
                  }
                  ```

                  **期待される出力:**

                  ```json
                  [
                    {
                      "name": "grinning",
                      "users": [
                        "W222222"
                      ],
                      "count": 1
                    },
                    {
                      "name": "question",
                      "users": [
                        "W333333"
                      ],
                      "count": 1
                    }
                  ]
                  ```

                  またはタイムアウトになった場合:

                  ```json
                  []
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>
</CollapserGroup>