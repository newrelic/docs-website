---
title: AWS EC2 アクション
tags:
  - workflow automation
  - workflow
  - workflow automation actions
  - AWS actions
  - AWS EC2 actions
metaDescription: A list of available aws ec2 actions in the actions catalog for workflow definitions
freshnessValidatedDate: never
translationType: machine
---

<Callout title="プレビュー">
  この機能はまだ開発中ですが、ぜひお試しください。

  この機能は現在、弊社の[プレリリース ポリシー](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy)に従ってプレビュー プログラムの一部として提供されています。
</Callout>

このページでは、ワークフロー自動化アクション カタログで使用できる AWS EC2 アクションの包括的なリファレンスを提供します。これらのアクションにより、EC2 インスタンスとスナップショットの管理が可能になります。

## 前提条件

ワークフロー自動化で AWS アクションを使用する前に、次の点を確認してください。

* 適切な権限を持つ AWS アカウント。
* 設定された AWS 認証情報 (IAM ユーザー認証情報、IAM ロール ARN、またはセッション認証情報)。
* 使用する予定の特定のAWSサービスに必要な IAM 権限。

IAM ユーザーおよび IAM ロールを作成する方法、およびワークフロー オートメーションAWSアクションと統合するための静的 AWS 認証情報とセッションAWS認証情報を設定する方法については[、「 AWS認証情報のセットアップ」を](/docs/workflow-automation/setup-and-configuration/set-up-aws-credentials/)参照してください。

<CollapserGroup>
  <Collapser id="aws-ec2-runinstances" title="AWS EC2インスタンスを実行する">
    権限のある AMI を使用して、指定された数のインスタンスをリリースします。

    いくつかのオプションを指定することも、デフォルトのオプションのままにすることもできます。以下のルールが適用されます。

    * サブネット ID を指定しない場合は、デフォルトの VPC からデフォルトのサブネットが自動的に選択されます。デフォルトの VPC がない場合は、リクエストでサブネット ID を指定する必要があります。
    * いずれかの AMI にユーザーがサブスクライブしていない製品コードが添付されている場合、リクエストは失敗します。

    <Tabs>
      <TabsBar>
        <TabsBarItem id="aws-ec2-runinstances-inputs">
          入力
        </TabsBarItem>

        <TabsBarItem id="aws-ec2-runinstances-outputs">
          出力
        </TabsBarItem>

        <TabsBarItem id="aws-ec2-runinstances-example">
          例
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="aws-ec2-runinstances-inputs">
          <table>
            <thead>
              <tr>
                <th>
                  入力フィールド
                </th>

                <th>
                  オプション性
                </th>

                <th>
                  タイプ
                </th>

                <th>
                  例
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **awsRoleArn**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  弦
                </td>

                <td>
                  `arn:aws:iam::123456789012:role/my-workflow-role`
                </td>
              </tr>

              <tr>
                <td>
                  **awsAccessKeyId**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  弦
                </td>

                <td>
                  `${{ :secrets:<awsAccessKeyId> }}`
                </td>
              </tr>

              <tr>
                <td>
                  **awsSecretAccessKey**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  弦
                </td>

                <td>
                  `${{ :secrets:<awsSecretAccessKey> }}`
                </td>
              </tr>

              <tr>
                <td>
                  **awsSessionToken**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  弦
                </td>

                <td>
                  `${{ :secrets:<awsSessionToken> }}`
                </td>
              </tr>

              <tr>
                <td>
                  **リージョン**
                </td>

                <td>
                  必須
                </td>

                <td>
                  弦
                </td>

                <td>
                  `region: "us-east-2"`
                </td>
              </tr>

              <tr>
                <td>
                  **imageId**
                </td>

                <td>
                  必須
                </td>

                <td>
                  弦
                </td>

                <td>
                  `"ami-0ca4d5db4872d0c28"`
                </td>
              </tr>

              <tr>
                <td>
                  **instanceType**
                </td>

                <td>
                  必須
                </td>

                <td>
                  弦
                </td>

                <td>
                  `"t2.micro"`
                </td>
              </tr>

              <tr>
                <td>
                  **minCount**
                </td>

                <td>
                  必須
                </td>

                <td>
                  Int
                </td>

                <td>
                  `1`
                </td>
              </tr>

              <tr>
                <td>
                  **maxCount**
                </td>

                <td>
                  必須
                </td>

                <td>
                  Int
                </td>

                <td>
                  `10`
                </td>
              </tr>

              <tr>
                <td>
                  **パラメーター**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  地図
                </td>

                <td>
                  `{"EbsOptimized": false, "TagSpecifications": [{"ResourceType": "instance", "Tags": [{"Key": "Name", "Value": "My-Web-Server"}]}]}`
                </td>
              </tr>

              <tr>
                <td>
                  **セレクター**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  リスト
                </td>

                <td>
                  `[{\"name\": \"response\", \"expression\": \".response\"}, {\"name\": \"success\", \"expression\": \".success\"}, {\"name\": \"errorMessage\", \"expression\": \".errorMessage\"}]`
                </td>
              </tr>
            </tbody>
          </table>

          <Callout variant="important">
            幅広い入力をサポートするために、 `parameters`マップは利用可能なオプションの引数をすべて受け入れます。これにより、複数のフィールドを追加してrequestsを動的に構築できます。
          </Callout>
        </TabsPageItem>

        <TabsPageItem id="aws-ec2-runinstances-outputs">
          <table>
            <thead>
              <tr>
                <th>
                  出力フィールド
                </th>

                <th>
                  タイプ
                </th>

                <th>
                  例
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **response**
                </td>

                <td>
                  オブジェクト
                </td>

                <td>
                  レスポンス構文については、 [run\_instances - Boto3 1.40.50 ドキュメント](https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/ec2/client/run_instances.html)を参照してください。
                </td>
              </tr>

              <tr>
                <td>
                  **成功**
                </td>

                <td>
                  ブール値
                </td>

                <td>
                  `success: true | false`
                </td>
              </tr>

              <tr>
                <td>
                  **エラーメッセージ**
                </td>

                <td>
                  弦
                </td>

                <td>
                  `errorMessage: ""`
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="aws-ec2-runinstances-example">
          <table>
            <thead>
              <tr>
                <th>
                  ワークフローの例
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  ```yaml
                    name: ec2_run_instance
                    workflowInputs:
                      arnRole:
                        type: String
                        required: true
                    steps:
                      - name: RunInstance
                        type: action
                        action: aws.ec2.runInstances
                        version: '1'
                        inputs:
                          awsRoleArn: ${{.workflowInputs.arnRole}}
                          region: us-east-2
                          imageId: ami-0ca4d5db4872d0c28
                          instanceType: t2.micro
                          minCount: 1
                          maxCount: 1
                          parameters:
                            EbsOptimized: false
                            TagSpecifications:
                              - ResourceType: instance
                                Tags:
                                  - Key: Name
                                    Value: My-Test-Instance
                          selectors:
                            - name: instanceId
                              expression: .response.Instances[0].InstanceId
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>

  <Collapser id="aws-ec2-describeinstances" title="インスタンスを説明する">
    指定されたインスタンスまたはすべてのインスタンスについて説明します。

    <Tabs>
      <TabsBar>
        <TabsBarItem id="aws-ec2-describeinstances-inputs">
          入力
        </TabsBarItem>

        <TabsBarItem id="aws-ec2-describeinstances-outputs">
          出力
        </TabsBarItem>

        <TabsBarItem id="aws-ec2-describeinstances-example">
          例
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="aws-ec2-describeinstances-inputs">
          <table>
            <thead>
              <tr>
                <th>
                  入力フィールド
                </th>

                <th>
                  オプション性
                </th>

                <th>
                  タイプ
                </th>

                <th>
                  例
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **awsRoleArn**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  弦
                </td>

                <td>
                  `arn:aws:iam::123456789012:role/my-workflow-role`
                </td>
              </tr>

              <tr>
                <td>
                  **awsAccessKeyId**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  弦
                </td>

                <td>
                  `${{ :secrets:<awsAccessKeyId> }}`
                </td>
              </tr>

              <tr>
                <td>
                  **awsSecretAccessKey**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  弦
                </td>

                <td>
                  `${{ :secrets:<awsSecretAccessKey> }}`
                </td>
              </tr>

              <tr>
                <td>
                  **awsSessionToken**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  弦
                </td>

                <td>
                  `${{ :secrets:<awsSessionToken> }}`
                </td>
              </tr>

              <tr>
                <td>
                  **リージョン**
                </td>

                <td>
                  必須
                </td>

                <td>
                  弦
                </td>

                <td>
                  `region: "us-east-2"`
                </td>
              </tr>

              <tr>
                <td>
                  **instanceIds**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  リスト
                </td>

                <td>
                  `"[\"i-0123456789abcdef0\", \"i-0fedcba9876543210\"]"`
                </td>
              </tr>

              <tr>
                <td>
                  **フィルター**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  リスト
                </td>

                <td>
                  `"[{\"Name\": \"instance-state-name\", \"Values\": [\"running\"]}]"`
                </td>
              </tr>

              <tr>
                <td>
                  **nextToken**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  弦
                </td>

                <td>
                  `"abcdefgh"`
                </td>
              </tr>

              <tr>
                <td>
                  **最大結果**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  Int
                </td>

                <td>
                  100
                </td>
              </tr>

              <tr>
                <td>
                  **セレクター**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  リスト
                </td>

                <td>
                  `[{\"name\": \"response\", \"expression\": \".response\"}, {\"name\": \"success\", \"expression\": \".success\"}, {\"name\": \"errorMessage\", \"expression\": \".errorMessage\"}]`
                </td>
              </tr>
            </tbody>
          </table>

          <Callout variant="important">
            アクション入力では、AWS 認証情報 (ショート、ロング、ロール) の少なくとも 1 つを指定する必要があります。ロールが他の認証情報よりも優先されます。
          </Callout>
        </TabsPageItem>

        <TabsPageItem id="aws-ec2-describeinstances-outputs">
          <table>
            <thead>
              <tr>
                <th>
                  出力フィールド
                </th>

                <th>
                  タイプ
                </th>

                <th>
                  例
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **response**
                </td>

                <td>
                  オブジェクト
                </td>

                <td>
                  ```yaml
                      {"response":<aws api response>}} 
                  ```

                  応答構文については、 [describe\_instances を](https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/ec2/client/describe_instances.html)参照してください。
                </td>
              </tr>

              <tr>
                <td>
                  **成功**
                </td>

                <td>
                  ブール値
                </td>

                <td>
                  `success: true | false`
                </td>
              </tr>

              <tr>
                <td>
                  **エラーメッセージ**
                </td>

                <td>
                  弦
                </td>

                <td>
                  `errorMessage: "The parameter instancesSet cannot be used with the parameter maxResults"`
                </td>
              </tr>
            </tbody>
          </table>

          <Callout variant="important">
            * インスタンスIDを指定した場合、出力には指定したインスタンスのみの情報が含まれます。
            * フィルターを指定すると、出力にはフィルター条件を満たすインスタンスの情報のみが含まれます。
            * インスタンス ID またはフィルターを指定しない場合、出力にはすべてのインスタンスの情報が含まれます。
            * パラメーター`instanceIds`は`maxResults`では使用できません。
          </Callout>
        </TabsPageItem>

        <TabsPageItem id="aws-ec2-describeinstances-example">
          <table>
            <thead>
              <tr>
                <th>
                  ワークフローの例
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  ```yaml
                  name: ab-ec2-describe-test
                  description: ''
                  workflowInputs:
                    arnRole:
                      type: String
                  steps:
                    - name: aws_ec2_describeInstances_1
                      type: action
                      action: aws.ec2.describeInstances
                      version: '1'
                      inputs:
                        awsRoleArn: ${{ .workflowInputs.arnRole }}
                        region: us-east-2
                        instanceIds:
                          - i-123456789abcdef0
                      next: end
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>

  <Collapser id="aws-ec2-startinstances" title="インスタンスを再起動する">
    以前に停止した Amazon EBS ベースのインスタンスを起動します。

    <Tabs>
      <TabsBar>
        <TabsBarItem id="aws-ec2-startinstances-inputs">
          入力
        </TabsBarItem>

        <TabsBarItem id="aws-ec2-startinstances-outputs">
          出力
        </TabsBarItem>

        <TabsBarItem id="aws-ec2-startinstances-example">
          例
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="aws-ec2-startinstances-inputs">
          <table>
            <thead>
              <tr>
                <th>
                  入力フィールド
                </th>

                <th>
                  オプション性
                </th>

                <th>
                  タイプ
                </th>

                <th>
                  例
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **awsRoleArn**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  弦
                </td>

                <td>
                  `arn:aws:iam::123456789012:role/my-workflow-role`
                </td>
              </tr>

              <tr>
                <td>
                  **awsAccessKeyId**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  弦
                </td>

                <td>
                  `${{ :secrets:<awsAccessKeyId> }}`
                </td>
              </tr>

              <tr>
                <td>
                  **awsSecretAccessKey**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  弦
                </td>

                <td>
                  `${{ :secrets:<awsSecretAccessKey> }}`
                </td>
              </tr>

              <tr>
                <td>
                  **awsSessionToken**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  弦
                </td>

                <td>
                  `${{ :secrets:<awsSessionToken> }}`
                </td>
              </tr>

              <tr>
                <td>
                  **リージョン**
                </td>

                <td>
                  必須
                </td>

                <td>
                  弦
                </td>

                <td>
                  `region: "us-east-2"`
                </td>
              </tr>

              <tr>
                <td>
                  **instanceIds**
                </td>

                <td>
                  必須
                </td>

                <td>
                  リスト
                </td>

                <td>
                  `"[\"i-0123456789abcdef0\", \"i-0fedcba9876543210\"]"`
                </td>
              </tr>

              <tr>
                <td>
                  **セレクター**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  リスト
                </td>

                <td>
                  `[{\"name\": \"response\", \"expression\": \".response\"}, {\"name\": \"success\", \"expression\": \".success\"}, {\"name\": \"errorMessage\", \"expression\": \".errorMessage\"}]`
                </td>
              </tr>
            </tbody>
          </table>

          <Callout variant="tip">
            アクション入力では、AWS 認証情報 (ショート、ロング、ロール) の少なくとも 1 つを指定する必要があります。ロールは他の認証情報よりも優先されます。
          </Callout>
        </TabsPageItem>

        <TabsPageItem id="aws-ec2-startinstances-outputs">
          <table>
            <thead>
              <tr>
                <th>
                  出力フィールド
                </th>

                <th>
                  タイプ
                </th>

                <th>
                  例
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **response**
                </td>

                <td>
                  オブジェクト
                </td>

                <td>
                  ```yaml
                  {"response":{
                      'StartingInstances': [
                          {
                              'InstanceId': 'string',
                              'CurrentState': {
                                  'Code': 123,
                                  'Name': 'pending'|'running'|'shutting-down'|'terminated'|'stopping'|'stopped'
                              },
                              'PreviousState': {
                                  'Code': 123,
                                  'Name': 'pending'|'running'|'shutting-down'|'terminated'|'stopping'|'stopped'
                              }
                          },
                      ]
                  }

                  }

                  } 
                  ```

                  レスポンス構文は[start\_instances - Boto3 1.40.50 ドキュメント](https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/ec2/client/start_instances.html)を参照してください
                </td>
              </tr>

              <tr>
                <td>
                  **成功**
                </td>

                <td>
                  ブール値
                </td>

                <td>
                  `success: true | false`
                </td>
              </tr>

              <tr>
                <td>
                  **エラーメッセージ**
                </td>

                <td>
                  弦
                </td>

                <td>
                  `errorMessage: "The parameter instancesSet cannot be used with the parameter maxResults"`
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="aws-ec2-startinstances-example">
          <table>
            <thead>
              <tr>
                <th>
                  ワークフローの例
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  ```yaml
                  name: ab-ec2-startInstance-test
                  description: ''
                  workflowInputs:
                    arnRole:
                      type: String
                    region:
                      type: String
                      defaultValue: us-west-2
                    instanceIds:
                      type: list
                      defaultValue: ["i-123456789abcdef0"]
                  steps:
                    - name: aws_ec2_startInstances_1
                      type: action
                      action: aws.ec2.startInstances
                      version: '1'
                      inputs:
                        awsRoleArn: ${{ .workflowInputs.arnRole }}
                        region: ${{ .workflowInputs.region }}
                        instanceIds: ${{ .workflowInputs.instanceIds }}
                      next: end
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>

  <Collapser id="aws-ec2-stopinstances" title="インスタンスを停止する">
    Amazon EBS ベースのインスタンスを停止します

    <Tabs>
      <TabsBar>
        <TabsBarItem id="aws-ec2-stopinstances-inputs">
          入力
        </TabsBarItem>

        <TabsBarItem id="aws-ec2-stopinstances-outputs">
          出力
        </TabsBarItem>

        <TabsBarItem id="aws-ec2-stopinstances-example">
          例
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="aws-ec2-stopinstances-inputs">
          <table>
            <thead>
              <tr>
                <th>
                  入力フィールド
                </th>

                <th>
                  オプション性
                </th>

                <th>
                  タイプ
                </th>

                <th>
                  例
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **awsRoleArn**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  弦
                </td>

                <td>
                  `arn:aws:iam::123456789012:role/my-workflow-role`
                </td>
              </tr>

              <tr>
                <td>
                  **awsAccessKeyId**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  弦
                </td>

                <td>
                  `${{ :secrets:<awsAccessKeyId> }}`
                </td>
              </tr>

              <tr>
                <td>
                  **awsSecretAccessKey**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  弦
                </td>

                <td>
                  `${{ :secrets:<awsSecretAccessKey> }}`
                </td>
              </tr>

              <tr>
                <td>
                  **awsSessionToken**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  弦
                </td>

                <td>
                  `${{ :secrets:<awsSessionToken> }}`
                </td>
              </tr>

              <tr>
                <td>
                  **リージョン**
                </td>

                <td>
                  必須
                </td>

                <td>
                  弦
                </td>

                <td>
                  `region: "us-east-2"`
                </td>
              </tr>

              <tr>
                <td>
                  **instanceIds**
                </td>

                <td>
                  必須
                </td>

                <td>
                  リスト
                </td>

                <td>
                  `"[\"i-0123456789abcdef0\", \"i-0fedcba9876543210\"]"`
                </td>
              </tr>

              <tr>
                <td>
                  **冬眠**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  ブール値
                </td>

                <td>
                  true または false (デフォルト: 

                  `false`

                  )
                </td>
              </tr>

              <tr>
                <td>
                  **力**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  ブール値
                </td>

                <td>
                  true または false (デフォルト: 

                  `false`

                  )
                </td>
              </tr>

              <tr>
                <td>
                  **セレクター**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  リスト
                </td>

                <td>
                  `[{\"name\": \"response\", \"expression\": \".response\"}, {\"name\": \"success\", \"expression\": \".success\"}, {\"name\": \"errorMessage\", \"expression\": \".errorMessage\"}]`
                </td>
              </tr>
            </tbody>
          </table>

          <Callout variant="important">
            アクション入力では、AWS 認証情報 (ショート、ロング、ロール) の少なくとも 1 つを指定する必要があります。ロールは他の認証情報よりも優先されます。
          </Callout>
        </TabsPageItem>

        <TabsPageItem id="aws-ec2-stopinstances-outputs">
          <table>
            <thead>
              <tr>
                <th>
                  出力フィールド
                </th>

                <th>
                  タイプ
                </th>

                <th>
                  例
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **response**
                </td>

                <td>
                  オブジェクト
                </td>

                <td>
                  ```yaml
                  {
                      'StoppingInstances': [
                          {
                              'InstanceId': 'string',
                              'CurrentState': {
                                  'Code': 123,
                                  'Name': 'pending'|'running'|'shutting-down'|'terminated'|'stopping'|'stopped'
                              },
                              'PreviousState': {
                                  'Code': 123,
                                  'Name': 'pending'|'running'|'shutting-down'|'terminated'|'stopping'|'stopped'
                              }
                          },
                      ]
                  }
                  ```

                  レスポンス構文は[stop\_instancesを](https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/ec2/client/stop_instances.html)参照できます
                </td>
              </tr>

              <tr>
                <td>
                  **成功**
                </td>

                <td>
                  ブール値
                </td>

                <td>
                  `success: true | false`
                </td>
              </tr>

              <tr>
                <td>
                  **エラーメッセージ**
                </td>

                <td>
                  弦
                </td>

                <td>
                  `errorMessage: "An error occurred (InvalidInstanceID.Malformed) when calling the StopInstances operation: The instance ID 'i-123456789' is malformed"`
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="aws-ec2-stopinstances-example">
          <table>
            <thead>
              <tr>
                <th>
                  ワークフローの例
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  ```yaml
                  name: ec2_stop_instance
                  description: ''
                  workflowInputs:
                    arnRole:
                      type: String
                    region:
                      type: String
                      defaultValue: us-west-2
                    instanceIds:
                      type: list
                      defaultValue: ["i-123456789abcdef0"]
                  steps:
                    - name: aws_stop_instances_1
                      type: action
                      action: aws.ec2.stopInstances
                      version: '1'
                      inputs:
                        awsRoleArn: ${{ .workflowInputs.arnRole }}
                        region: ${{ .workflowInputs.region }}
                        instanceIds: ${{ .workflowInputs.instanceIds }}
                      next: end
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>

  <Collapser id="aws-ec2-rebootinstances" title="インスタンスの再起動を要求する">
    指定されたインスタンスの再起動を要求します。この操作は非同期であり、指定されたインスタンスを再起動する要求をキューに追加するだけです。インスタンスが有効であり、自分のものである場合、操作は成功します。終了したインスタンスを再起動する要求は無視されます。

    インスタンスが数分以内に正常にシャットダウンしない場合、Amazon EC2 はハードリブートを実行します。

    <Tabs>
      <TabsBar>
        <TabsBarItem id="aws-ec2-rebootinstances-inputs">
          入力
        </TabsBarItem>

        <TabsBarItem id="aws-ec2-rebootinstances-outputs">
          出力
        </TabsBarItem>

        <TabsBarItem id="aws-ec2-rebootinstances-example">
          例
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="aws-ec2-rebootinstances-inputs">
          <table>
            <thead>
              <tr>
                <th>
                  入力フィールド
                </th>

                <th>
                  オプション性
                </th>

                <th>
                  タイプ
                </th>

                <th>
                  例
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **awsRoleArn**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  弦
                </td>

                <td>
                  `arn:aws:iam::123456789012:role/my-workflow-role`
                </td>
              </tr>

              <tr>
                <td>
                  **awsAccessKeyId**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  弦
                </td>

                <td>
                  `${{ :secrets:<awsAccessKeyId> }}`
                </td>
              </tr>

              <tr>
                <td>
                  **awsSecretAccessKey**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  弦
                </td>

                <td>
                  `${{ :secrets:<awsSecretAccessKey> }}`
                </td>
              </tr>

              <tr>
                <td>
                  **awsSessionToken**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  弦
                </td>

                <td>
                  `${{ :secrets:<awsSessionToken> }}`
                </td>
              </tr>

              <tr>
                <td>
                  **リージョン**
                </td>

                <td>
                  必須
                </td>

                <td>
                  弦
                </td>

                <td>
                  `region: "us-east-2"`
                </td>
              </tr>

              <tr>
                <td>
                  **instanceIds**
                </td>

                <td>
                  必須
                </td>

                <td>
                  リスト
                </td>

                <td>
                  `"[\"i-0123456789abcdef0\", \"i-0fedcba9876543210\"]"`
                </td>
              </tr>

              <tr>
                <td>
                  **セレクター**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  リスト
                </td>

                <td>
                  `[{\"name\": \"response\", \"expression\": \".response\"}, {\"name\": \"success\", \"expression\": \".success\"}, {\"name\": \"errorMessage\", \"expression\": \".errorMessage\"}]`
                </td>
              </tr>
            </tbody>
          </table>

          <Callout variant="important">
            アクション入力では、AWS 認証情報 (ショート、ロング、ロール) の少なくとも 1 つを指定する必要があります。ロールは他の認証情報よりも優先されます。
          </Callout>
        </TabsPageItem>

        <TabsPageItem id="aws-ec2-rebootinstances-outputs">
          <table>
            <thead>
              <tr>
                <th>
                  出力フィールド
                </th>

                <th>
                  タイプ
                </th>

                <th>
                  例
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **response**
                </td>

                <td>
                  オブジェクト
                </td>

                <td>
                  [reboot_instances - Boto3 1.40.56 ドキュメント](https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/ec2/client/reboot_instances.html)
                </td>
              </tr>

              <tr>
                <td>
                  **成功**
                </td>

                <td>
                  ブール値
                </td>

                <td>
                  `success: true | false`
                </td>
              </tr>

              <tr>
                <td>
                  **エラーメッセージ**
                </td>

                <td>
                  弦
                </td>

                <td>
                  `errorMessage: ""`
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="aws-ec2-rebootinstances-example">
          <table>
            <thead>
              <tr>
                <th>
                  ワークフローの例
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  ```yaml
                  name: reboot-ec2-test
                  description: ''
                  workflowInputs:
                    arnRole:
                      type: String
                    region:
                      type: String
                      defaultValue: us-west-2
                    instanceIds:
                      type: list
                      defaultValue: ["i-123456789abcdef0"]
                  steps:
                    - name: aws_ec2_rebootInstances_1
                      type: action
                      action: aws.ec2.rebootInstances
                      version: '1'
                      inputs:
                        awsRoleArn: ${{ .workflowInputs.arnRole }}
                        region: ${{ .workflowInputs.region }}
                        instanceIds: ${{ .workflowInputs.instanceIds }}
                      next: end
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>

  <Collapser id="aws-ec2-terminateinstances" title="インスタンスを終了する">
    指定されたインスタンスをシャットダウンします。この操作は[べき等性](https://docs.aws.amazon.com/ec2/latest/devguide/ec2-api-idempotency.html)があり、インスタンスを複数回終了した場合、各呼び出しは成功します。

    複数のインスタンスを指定し、リクエストが失敗した場合 (たとえば、1 つの間違ったインスタンス ID が原因で)、どのインスタンスも終了されません。

    <Tabs>
      <TabsBar>
        <TabsBarItem id="aws-ec2-terminateinstances-inputs">
          入力
        </TabsBarItem>

        <TabsBarItem id="aws-ec2-terminateinstances-outputs">
          出力
        </TabsBarItem>

        <TabsBarItem id="aws-ec2-terminateinstances-example">
          例
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="aws-ec2-terminateinstances-inputs">
          <table>
            <thead>
              <tr>
                <th>
                  入力フィールド
                </th>

                <th>
                  オプション性
                </th>

                <th>
                  タイプ
                </th>

                <th>
                  例
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **awsRoleArn**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  弦
                </td>

                <td>
                  `arn:aws:iam::123456789012:role/my-workflow-role`
                </td>
              </tr>

              <tr>
                <td>
                  **awsAccessKeyId**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  弦
                </td>

                <td>
                  `${{ :secrets:<awsAccessKeyId> }}`
                </td>
              </tr>

              <tr>
                <td>
                  **awsSecretAccessKey**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  弦
                </td>

                <td>
                  `${{ :secrets:<awsSecretAccessKey> }}`
                </td>
              </tr>

              <tr>
                <td>
                  **awsSessionToken**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  弦
                </td>

                <td>
                  `${{ :secrets:<awsSessionToken> }}`
                </td>
              </tr>

              <tr>
                <td>
                  **リージョン**
                </td>

                <td>
                  必須
                </td>

                <td>
                  弦
                </td>

                <td>
                  `region: "us-east-2"`
                </td>
              </tr>

              <tr>
                <td>
                  **instanceIds**
                </td>

                <td>
                  必須
                </td>

                <td>
                  リスト
                </td>

                <td>
                  `"[\"i-0123456789abcdef0\", \"i-0fedcba9876543210\"]"`
                </td>
              </tr>

              <tr>
                <td>
                  **セレクター**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  リスト
                </td>

                <td>
                  `[{\"name\": \"response\", \"expression\": \".response\"}, {\"name\": \"success\", \"expression\": \".success\"}, {\"name\": \"errorMessage\", \"expression\": \".errorMessage\"}]`
                </td>
              </tr>
            </tbody>
          </table>

          <Callout variant="important">
            アクション入力では、AWS 認証情報 (ショート、ロング、ロール) の少なくとも 1 つを指定する必要があります。ロールは他の認証情報よりも優先されます。
          </Callout>
        </TabsPageItem>

        <TabsPageItem id="aws-ec2-terminateinstances-outputs">
          <table>
            <thead>
              <tr>
                <th>
                  出力フィールド
                </th>

                <th>
                  タイプ
                </th>

                <th>
                  例
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **response**
                </td>

                <td>
                  オブジェクト
                </td>

                <td>
                  ```yaml
                  {
                      'TerminatingInstances': [
                          {
                              'InstanceId': 'string',
                              'CurrentState': {
                                  'Code': 123,
                                  'Name': 'pending'|'running'|'shutting-down'|'terminated'|'stopping'|'stopped'
                              },
                              'PreviousState': {
                                  'Code': 123,
                                  'Name': 'pending'|'running'|'shutting-down'|'terminated'|'stopping'|'stopped'
                              }
                          },
                      ]
                  }
                  ```

                  レスポンス構文については、 [terminate\_instances - Boto3 1.40.50 ドキュメント](https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/ec2/client/terminate_instances.html)を参照してください。
                </td>
              </tr>

              <tr>
                <td>
                  **成功**
                </td>

                <td>
                  ブール値
                </td>

                <td>
                  `success: true | false`
                </td>
              </tr>

              <tr>
                <td>
                  **エラーメッセージ**
                </td>

                <td>
                  弦
                </td>

                <td>
                  `errorMessage: "An error occurred (InvalidInstanceID.Malformed) when calling the TerminateInstances operation: The instance ID 'i-012345678' is malformed"`
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="aws-ec2-terminateinstances-example">
          <table>
            <thead>
              <tr>
                <th>
                  ワークフローの例
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  ```yaml
                  name: ec2-terminate-test
                  description: ''
                  workflowInputs:
                    arnRole:
                      type: String
                    region:
                      type: String
                      defaultValue: us-west-2
                    instanceIds:
                      type: list
                      defaultValue: ["i-123456789abcdef0"]
                  steps:
                    - name: aws_ec2_terminateInstances_1
                      type: action
                      action: aws.ec2.terminateInstances
                      version: '1'
                      inputs:
                        awsRoleArn: ${{ .workflowInputs.arnRole }}
                        region: ${{ .workflowInputs.region }}
                        instanceIds: ${{ .workflowInputs.instanceIds }}
                      next: end
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>

  <Collapser id="aws-ec2-createSnapshot" title="スナップショット EBS ボリューム">
    EBS ボリュームのスナップショットを作成し、Amazon S3 に保存します。スナップショットは、バックアップ、EBS ボリュームのコピーの作成、インスタンスをシャットダウンする前にデータの保存に使用できます。

    ソース EBS ボリュームの場所によって、スナップショットを作成できる場所が決まります。

    <Tabs>
      <TabsBar>
        <TabsBarItem id="aws-ec2-createSnapshot-inputs">
          入力
        </TabsBarItem>

        <TabsBarItem id="aws-ec2-createSnapshot-outputs">
          出力
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="aws-ec2-createSnapshot-inputs">
          <table>
            <thead>
              <tr>
                <th>
                  入力フィールド
                </th>

                <th>
                  オプション性
                </th>

                <th>
                  タイプ
                </th>

                <th>
                  例
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **awsRoleArn**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  弦
                </td>

                <td>
                  `arn:aws:iam::123456789012:role/my-workflow-role`
                </td>
              </tr>

              <tr>
                <td>
                  **awsAccessKeyId**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  弦
                </td>

                <td>
                  `${{ :secrets:<awsAccessKeyId> }}`
                </td>
              </tr>

              <tr>
                <td>
                  **awsSecretAccessKey**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  弦
                </td>

                <td>
                  `${{ :secrets:<awsSecretAccessKey> }}`
                </td>
              </tr>

              <tr>
                <td>
                  **awsSessionToken**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  弦
                </td>

                <td>
                  `${{ :secrets:<awsSessionToken> }}`
                </td>
              </tr>

              <tr>
                <td>
                  **リージョン**
                </td>

                <td>
                  必須
                </td>

                <td>
                  弦
                </td>

                <td>
                  `region: "us-east-2"`
                </td>
              </tr>

              <tr>
                <td>
                  **description**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  弦
                </td>

                <td>
                  `"This is a test snapshot"`
                </td>
              </tr>

              <tr>
                <td>
                  **前哨基地アーン**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  弦
                </td>

                <td>
                  `"arn:aws:ec2:us-east-1:123456789012:outpost/op-1a2b3c4d5e6f7g8h9"`
                </td>
              </tr>

              <tr>
                <td>
                  **ボリュームID**
                </td>

                <td>
                  必須
                </td>

                <td>
                  弦
                </td>

                <td>
                  `"vol-0123456789abcdef0"`
                </td>
              </tr>

              <tr>
                <td>
                  **タグ仕様**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  リスト
                </td>

                <td>
                  `[{"ResourceType":"snapshot","Tags":[{"Key":"testKey","Value":"testValue"}]}]`
                </td>
              </tr>

              <tr>
                <td>
                  **位置**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  弦
                </td>

                <td>
                  `"regional"`
                </td>
              </tr>

              <tr>
                <td>
                  **セレクター**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  リスト
                </td>

                <td>
                  `[{\"name\": \"response\", \"expression\": \".response\"}, {\"name\": \"success\", \"expression\": \".success\"}, {\"name\": \"errorMessage\", \"expression\": \".errorMessage\"}]`
                </td>
              </tr>
            </tbody>
          </table>

          <Callout variant="important">
            AWS 認証情報 (ショート、ロング、ロール) の少なくとも 1 つを入力する必要があります。ロールが他の認証情報よりも優先されます。
          </Callout>
        </TabsPageItem>

        <TabsPageItem id="aws-ec2-createSnapshot-outputs">
          <table>
            <thead>
              <tr>
                <th>
                  出力フィールド
                </th>

                <th>
                  タイプ
                </th>

                <th>
                  例
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **response**
                </td>

                <td>
                  オブジェクト
                </td>

                <td>
                  ```yaml
                  {
                      'OwnerAlias': 'string',
                      'OutpostArn': 'string',
                      'Tags': [
                          {
                              'Key': 'string',
                              'Value': 'string'
                          },
                      ],
                      'StorageTier': 'archive'|'standard',
                      'RestoreExpiryTime': datetime(2015, 1, 1),
                      'SseType': 'sse-ebs'|'sse-kms'|'none',
                      'AvailabilityZone': 'string',
                      'TransferType': 'time-based'|'standard',
                      'CompletionDurationMinutes': 123,
                      'CompletionTime': datetime(2015, 1, 1),
                      'FullSnapshotSizeInBytes': 123,
                      'SnapshotId': 'string',
                      'VolumeId': 'string',
                      'State': 'pending'|'completed'|'error'|'recoverable'|'recovering',
                      'StateMessage': 'string',
                      'StartTime': datetime(2015, 1, 1),
                      'Progress': 'string',
                      'OwnerId': 'string',
                      'Description': 'string',
                      'VolumeSize': 123,
                      'Encrypted': True|False,
                      'KmsKeyId': 'string',
                      'DataEncryptionKeyId': 'string'
                  }
                  ```

                  応答構文については[create\_snapshot を](https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/ec2/client/create_snapshot.html)参照してください。
                </td>
              </tr>

              <tr>
                <td>
                  **成功**
                </td>

                <td>
                  ブール値
                </td>

                <td>
                  `success: true | false`
                </td>
              </tr>

              <tr>
                <td>
                  **エラーメッセージ**
                </td>

                <td>
                  弦
                </td>

                <td>
                  `errorMessage: "The parameter instancesSet cannot be used with the parameter maxResults"`
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>

  <Collapser id="aws-ec2-deleteSnapshot" title="スナップショットを削除する">
    指定されたスナップショットを削除します。

    登録された AMI によって使用される EBS ボリュームのルートデバイスのスナップショットを削除することはできません。スナップショットを削除する前に、まず AMI を登録解除する必要があります。

    <Tabs>
      <TabsBar>
        <TabsBarItem id="aws-ec2-deleteSnapshot-inputs">
          入力
        </TabsBarItem>

        <TabsBarItem id="aws-ec2-deleteSnapshot-outputs">
          出力
        </TabsBarItem>

        <TabsBarItem id="aws-ec2-deleteSnapshot-example">
          例
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="aws-ec2-deleteSnapshot-inputs">
          <table>
            <thead>
              <tr>
                <th>
                  入力フィールド
                </th>

                <th>
                  オプション性
                </th>

                <th>
                  タイプ
                </th>

                <th>
                  例
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **awsRoleArn**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  弦
                </td>

                <td>
                  `arn:aws:iam::123456789012:role/my-workflow-role`
                </td>
              </tr>

              <tr>
                <td>
                  **awsAccessKeyId**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  弦
                </td>

                <td>
                  `${{ :secrets:<awsAccessKeyId> }}`
                </td>
              </tr>

              <tr>
                <td>
                  **awsSecretAccessKey**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  弦
                </td>

                <td>
                  `${{ :secrets:<awsSecretAccessKey> }}`
                </td>
              </tr>

              <tr>
                <td>
                  **awsSessionToken**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  弦
                </td>

                <td>
                  `${{ :secrets:<awsSessionToken> }}`
                </td>
              </tr>

              <tr>
                <td>
                  **リージョン**
                </td>

                <td>
                  必須
                </td>

                <td>
                  弦
                </td>

                <td>
                  `region: "us-east-2"`
                </td>
              </tr>

              <tr>
                <td>
                  **snapshotId**
                </td>

                <td>
                  必須
                </td>

                <td>
                  弦
                </td>

                <td>
                  `"snapshot-id-1"`
                </td>
              </tr>

              <tr>
                <td>
                  **セレクター**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  弦
                </td>

                <td>
                  `[{\"name\": \"response\", \"expression\": \".response\"}, {\"name\": \"success\", \"expression\": \".success\"}, {\"name\": \"errorMessage\", \"expression\": \".errorMessage\"}]`
                </td>
              </tr>
            </tbody>
          </table>

          <Callout variant="tip">
            AWS 認証情報 (ショート、ロング、ロール) の少なくとも 1 つを入力する必要があります。ロールは他の認証情報よりも優先されます。
          </Callout>
        </TabsPageItem>

        <TabsPageItem id="aws-ec2-deleteSnapshot-outputs">
          <table>
            <thead>
              <tr>
                <th>
                  出力フィールド
                </th>

                <th>
                  タイプ
                </th>

                <th>
                  例
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **response**
                </td>

                <td>
                  オブジェクト
                </td>

                <td>
                  応答なしの場合 `success : true`

                  応答構文については、 [delete\_snapshot - Boto3 1.40.55 ドキュメント](https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/ec2/client/delete_snapshot.html)を参照してください。
                </td>
              </tr>

              <tr>
                <td>
                  **成功**
                </td>

                <td>
                  ブール値
                </td>

                <td>
                  `success: true | false`
                </td>
              </tr>

              <tr>
                <td>
                  **エラーメッセージ**
                </td>

                <td>
                  弦
                </td>

                <td>
                  `errorMessage: "Failed to delete snapshot"`
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="aws-ec2-deleteSnapshot-example">
          <table>
            <thead>
              <tr>
                <th>
                  ワークフローの例
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  ```yaml
                  name: ec2-deleteSnapshot-test
                  description: ''
                  workflowInputs:
                    arnRole:
                      type: String
                    region:
                      type: String
                      defaultValue: us-west-2
                    snapshotId:
                      type: list
                      defaultValue: snapshot-id-1
                  steps:
                    - name: aws_ec2_deleteSnapshot_1
                      type: action
                      action: aws.ec2.deleteSnapshot
                      version: '1'
                      inputs:
                        awsRoleArn: ${{ .workflowInputs.arnRole }}
                        region: ${{ .workflowInputs.region }}
                        snapshotId: ${{ .workflowInputs.snapshotId }}
                      next: end
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>
</CollapserGroup>