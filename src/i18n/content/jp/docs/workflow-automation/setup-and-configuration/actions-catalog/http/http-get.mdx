---
title: HTTP 取得
tags:
  - workflow automation
  - workflow
  - workflow automation actions
  - HTTP actions
  - HTTP GET
metaDescription: A list of available http get in the actions catalog for workflow definitions
freshnessValidatedDate: never
translationType: machine
---

<Callout title="プレビュー">
  この機能はまだ開発中ですが、ぜひお試しください。

  この機能は現在、弊社の[プレリリース ポリシー](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy)に従ってプレビュー プログラムの一部として提供されています。
</Callout>

このページでは、ワークフロー自動化アクション カタログで使用できる HTTP Get に関する包括的なリファレンスを提供します。これらのアクションにより、HTTP GETリクエスト操作を実行できるようになります。

## 前提条件

ワークフロー自動化で HTTP アクションを使用する前に、次の点を確認してください。

* 目標APIエンドポイントのURL。
* 必要な認証資格情報 ( APIキー、VPN など)。
* API リクエスト/レスポンス形式の理解。

<Callout variant="tip">
  HTTP アクションは、任意のヘッダー値の秘密の構文をサポートしているため、 APIキーなどの機密データを安全に渡すことができます。 詳細については、[シークレット マネージャー](/docs/workflow-automation/limitations-and-faq/workflow-best-practices/#secure-credentials)を参照してください。
</Callout>

## 自動リクエストヘッダー [#automatic-headers]

ワークフロー オートメーションによって実行されるすべての HTTP requestsには、次のヘッダーが自動的に含まれます。

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        ヘッダー
      </th>

      <th>
        形式
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `X-Abuse-Info`
      </td>

      <td>
        `Request sent by a New Relic WorkflowAutomation. {runId}`

        <br />

        `{runId}`

        はワークフロー実行IDです
      </td>
    </tr>

    <tr>
      <td>
        `User-Agent`
      </td>

      <td>
        `NewRelic/WorkflowAutomation (region={region}; https://newrelic.com ; support@newrelic.com)`

        <br />

        `{region}`

        はNew Relicのリージョンです
      </td>
    </tr>
  </tbody>
</table>

## ウェブデータのリクエスト [#http-get]

HTTP GET呼び出しを実行して、 APIエンドポイントからデータを取得します。

<Callout variant="important">
  入力に機密データ（ `Api-Key`ヘッダーなど）を渡す必要がある場合は、 [secretsManagementCreateSecret](https://onenr.io/0KQXX6BmdQa) NerdGraph ミューテーションを介して保存された値を使用できます。

  **例**

  ```yaml
  {
    "inputs": [
      {
        "key": "headers",
        "value": "{\"Api-Key\": \"${{ :secrets:NR_API_KEY }}\"}"
      }
    ]
  }
  ```
</Callout>

<Tabs>
  <TabsBar>
    <TabsBarItem id="httpgetinputs">
      入力
    </TabsBarItem>

    <TabsBarItem id="httpgetoutputs">
      出力
    </TabsBarItem>

    <TabsBarItem id="httpgetexample">
      例
    </TabsBarItem>
  </TabsBar>

  <TabsPages>
    <TabsPageItem id="httpgetinputs">
      <table>
        <thead>
          <tr>
            <th>
              入力フィールド
            </th>

            <th>
              オプション性
            </th>

            <th>
              タイプ
            </th>

            <th>
              説明
            </th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>
              **url**
            </td>

            <td>
              必須
            </td>

            <td>
              弦
            </td>

            <td>
              リクエストのターゲット URL。スキームを含める必要があります: 

              `https://example.com`

               。動的な値については、

              [ワークフロー入力の使用を](/docs/workflow-automation/workflow-examples/basic-patterns/workflow-inputs)

              参照してください。
            </td>
          </tr>

          <tr>
            <td>
              **urlパラメータ**
            </td>

            <td>
              オプション
            </td>

            <td>
              地図
            </td>

            <td>
              URL に追加するのは間違いありません。 文字列化された JSON オブジェクトを受け取ります。
            </td>
          </tr>

          <tr>
            <td>
              **ヘッダ**
            </td>

            <td>
              オプション
            </td>

            <td>
              地図
            </td>

            <td>
              リクエストに追加するヘッダー。文字列化された JSON オブジェクトを受け取ります。
            </td>
          </tr>

          <tr>
            <td>
              **セレクター**
            </td>

            <td>
              オプション
            </td>

            <td>
              リスト
            </td>

            <td>
              指定されたもののみを出力として取得するセレクター。
            </td>
          </tr>
        </tbody>
      </table>

      ### セレクター

      **目的:** API 応答から特定のデータを抽出します。

      **構造：**

      * `name`: 抽出された値を格納する変数名
      * `expression`: レスポンスを解析するためのJSONPathまたは式
      * JSONレスポンスを解析するには`responseBody | fromjson`を使用します
      * ドット表記を使用して追加のフィルターをチェーンします (例: `.abbreviation`)
    </TabsPageItem>

    <TabsPageItem id="httpgetoutputs">
      <table>
        <thead>
          <tr>
            <th>
              出力フィールド
            </th>

            <th>
              タイプ
            </th>

            <th>
              説明
            </th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>
              **レスポンスボディ**
            </td>

            <td>
              弦
            </td>

            <td>
              応答の本文。
            </td>
          </tr>

          <tr>
            <td>
              **ステータスコード**
            </td>

            <td>
              Int
            </td>

            <td>
              応答のステータス コード。
            </td>
          </tr>

          <tr>
            <td>
              **成功**
            </td>

            <td>
              ブール値
            </td>

            <td>
              リクエストのステータス。
            </td>
          </tr>

          <tr>
            <td>
              **エラーメッセージ**
            </td>

            <td>
              弦
            </td>

            <td>
              失敗の理由をメッセージとして表示します。
            </td>
          </tr>
        </tbody>
      </table>
    </TabsPageItem>

    <TabsPageItem id="httpgetexample">
      <table>
        <thead>
          <tr>
            <th>
              ワークフロー定義
            </th>

            <th>
              入力
            </th>

            <th>
              出力
            </th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>
              ```yaml
              name: httpGetTest
              steps:
                - name: query
                  type: action
                  action: http.get
                  version: 1
                  inputs:
                    url: ${{ .workflowInputs.url }}
                    urlParams: ${{ .workflowInputs.urlParams }}
                    headers: ${{ .workflowInputs.headers }}
                    selectors: ${{ .workflowInputs.selectors }}
              ```
            </td>

            <td>
              ```yaml
              {
                "inputs": [
                  {
                    "key": "url",
                    "value": "https://example.com"
                  },
                  {
                    "key": "urlParams",
                    "value": "{\"foo\": \"bar\"}"
                  },
                  {
                    "key": "headers",
                    "value": "{\"baz\": \"bat\"}"
                  },
                  {
                    "key": "selectors",
                    "value": "[{\"name\": \"responseBody\", \"expression\": \".responseBody\"}, {\"name\": \"statusCode\", \"expression\": \".statusCode\"}]"
                  }
                ]
              }
              ```
            </td>

            <td>
              ```yaml
              Success case:
                {
                  "responseBody": "<!doctype html>\n<html>...</html>\n",
                  "statusCode": 200
                  "success": true
                }

              Failure case:
                {
                  "errorMessage": "An unexpected error failed to call http get endpoint.",
                  "success": false
                }
              ```
            </td>
          </tr>
        </tbody>
      </table>
    </TabsPageItem>
  </TabsPages>
</Tabs>