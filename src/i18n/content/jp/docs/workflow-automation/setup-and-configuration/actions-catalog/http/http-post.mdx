---
title: HTTPポスト
tags:
  - workflow automation
  - workflow
  - workflow automation actions
  - HTTP actions
  - HTTP POST
metaDescription: A list of available http post in the actions catalog for workflow definitions
freshnessValidatedDate: never
translationType: machine
---

<Callout title="プレビュー">
  この機能はまだ開発中ですが、ぜひお試しください。

  この機能は現在、弊社の[プレリリース ポリシー](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy)に従ってプレビュー プログラムの一部として提供されています。
</Callout>

このページでは、ワークフロー自動化アクション カタログで使用できる http post に関する包括的なリファレンスを提供します。これらのアクションにより、HTTP POST リクエスト操作が可能になります。

## 前提条件

ワークフロー自動化で HTTP アクションを使用する前に、次の点を確認してください。

* 目標APIエンドポイントのURL。
* 必要な認証資格情報 ( APIキー、VPN など)。
* API リクエスト/レスポンス形式の理解。

<Callout variant="tip">
  HTTP アクションは、任意のヘッダー値の秘密の構文をサポートしているため、 APIキーなどの機密データを安全に渡すことができます。 詳細については、[シークレット管理を](/docs/workflow-automation/limitations-and-faq/workflow-best-practices/#secure-credentials)参照してください。
</Callout>

## 自動リクエストヘッダー [#automatic-headers]

ワークフロー オートメーションによって実行されるすべての HTTP requestsには、次のヘッダーが自動的に含まれます。

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        ヘッダー
      </th>

      <th>
        形式
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `X-Abuse-Info`
      </td>

      <td>
        `Request sent by a New Relic WorkflowAutomation. {runId}`

        <br />

        `{runId}`

        はワークフロー実行IDです
      </td>
    </tr>

    <tr>
      <td>
        `User-Agent`
      </td>

      <td>
        `NewRelic/WorkflowAutomation (region={region}; https://newrelic.com ; support@newrelic.com)`

        <br />

        `{region}`

        はNew Relicのリージョンです
      </td>
    </tr>
  </tbody>
</table>

## サーバーにデータを送信する [#http-post]

HTTP POST 呼び出しを実行して、 APIエンドポイントにデータを送信します。

<Callout variant="important">
  API キー ヘッダーなどの機密データを入力に渡す必要がある場合は、 [secretsManagementCreateSecret](https://onenr.io/0KQXX6BmdQa) NerdGraph ミューテーションを介して保存された値を使用できます。

  **例**

  ```yaml
    {
      "inputs": [
        {
          "key": "headers",
          "value": "{\"Api-Key\": \"${{ :secrets:NR_API_KEY }}\"}"
        }
      ]
    }
  ```
</Callout>

<Tabs>
  <TabsBar>
    <TabsBarItem id="httppostinputs">
      入力
    </TabsBarItem>

    <TabsBarItem id="httppostoutputs">
      出力
    </TabsBarItem>

    <TabsBarItem id="httppostexample">
      例
    </TabsBarItem>
  </TabsBar>

  <TabsPages>
    <TabsPageItem id="httppostinputs">
      <table>
        <thead>
          <tr>
            <th>
              入力フィールド
            </th>

            <th>
              オプション性
            </th>

            <th>
              タイプ
            </th>

            <th>
              説明
            </th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>
              **url**
            </td>

            <td>
              必須
            </td>

            <td>
              弦
            </td>

            <td>
              リクエストのターゲット URL。スキームには次の内容が含まれている必要があります。 

              `https://example.com`
            </td>
          </tr>

          <tr>
            <td>
              **urlパラメータ**
            </td>

            <td>
              オプション
            </td>

            <td>
              地図
            </td>

            <td>
              URL に追加するのは間違いありません。 文字列化された JSON オブジェクトを受け取ります。
            </td>
          </tr>

          <tr>
            <td>
              **ヘッダ**
            </td>

            <td>
              オプション
            </td>

            <td>
              地図
            </td>

            <td>
              リクエストに追加するヘッダー。文字列化された JSON オブジェクトを受け取ります。
            </td>
          </tr>

          <tr>
            <td>
              **体**
            </td>

            <td>
              オプション
            </td>

            <td>
              弦
            </td>

            <td>
              リクエスト本体。
            </td>
          </tr>

          <tr>
            <td>
              **セレクター**
            </td>

            <td>
              オプション
            </td>

            <td>
              リスト
            </td>

            <td>
              指定されたもののみを出力として取得するセレクター。
            </td>
          </tr>
        </tbody>
      </table>
    </TabsPageItem>

    <TabsPageItem id="httppostoutputs">
      <table>
        <thead>
          <tr>
            <th>
              出力フィールド
            </th>

            <th>
              タイプ
            </th>

            <th>
              説明
            </th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>
              **レスポンスボディ**
            </td>

            <td>
              弦
            </td>

            <td>
              応答の本文。
            </td>
          </tr>

          <tr>
            <td>
              **ステータスコード**
            </td>

            <td>
              Int
            </td>

            <td>
              応答のステータス コード。
            </td>
          </tr>

          <tr>
            <td>
              **成功**
            </td>

            <td>
              ブール値
            </td>

            <td>
              リクエストのステータス。
            </td>
          </tr>

          <tr>
            <td>
              **エラーメッセージ**
            </td>

            <td>
              弦
            </td>

            <td>
              失敗の理由をメッセージとして表示します。
            </td>
          </tr>
        </tbody>
      </table>
    </TabsPageItem>

    <TabsPageItem id="httppostexample">
      <table>
        <thead>
          <tr>
            <th>
              ワークフロー定義
            </th>

            <th>
              入力
            </th>

            <th>
              出力
            </th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>
              ```yaml
                name: httpPostTest

                steps:
                  - name: query
                    type: action
                    action: http.post
                    version: 1
                    inputs:
                      url: ${{ .workflowInputs.url }}
                      urlParams: ${{ .workflowInputs.urlParams }}
                      headers: ${{ .workflowInputs.headers }}
                      body: ${{ .workflowInputs.body }}
                      selectors: ${{ .workflowInputs.selectors }}
              ```
            </td>

            <td>
              ```yaml
                {
                  "inputs": [
                    {
                      "key": "url",
                      "value": "https://example.com"
                    },
                    {
                      "key": "headers",
                      "value": "{\"Content-Type\":\"application/json\"}"
                    },
                    {
                      "key": "urlParams",
                      "value": "{\"foo\": \"bar\"}"
                    },
                    {
                      "key": "body",
                      "value": "{\"foo\": \"bar\"}"
                    },
                    {
                      "key": "selectors",
                      "value": "[{\"name\": \"responseBody\", \"expression\": \".responseBody\"}, {\"name\": \"statusCode\", \"expression\": \".statusCode\"}]"
                    }
                  ]
                }
              ```
            </td>

            <td>
              ```yaml
                Success case:
                  {
                    "success": true,
                    "responseBody": "",
                    "statusCode": 200
                  }

                Failure case:
                  {
                    "errorMessage": "An unexpected error failed to call http post endpoint.",
                    "success": false
                  }
              ```
            </td>
          </tr>
        </tbody>
      </table>
    </TabsPageItem>
  </TabsPages>
</Tabs>