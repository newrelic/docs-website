---
title: New Relic NRDBアクション
tags:
  - workflow automation
  - workflow
  - workflow automation actions
  - New Relic actions
  - New Relic NRDB actions
metaDescription: A list of available new relic nrdb actions in the actions catalog for workflow definitions
freshnessValidatedDate: never
translationType: machine
---

<Callout title="プレビュー">
  この機能はまだ開発中ですが、ぜひお試しください。

  この機能は現在、弊社の[プレリリース ポリシー](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy)に従ってプレビュー プログラムの一部として提供されています。
</Callout>

このページでは、ワークフロー自動化アクション カタログで利用可能な New Relic NRDB アクションに関する包括的なリファレンスを提供します。これらのアクションにより、New Relic データベースをクエリできるようになります。

## 前提条件

ワークフロー自動化で New Relic アクションを使用する前に、次の点を確認してください。

* 適切な権限を持つ New Relic アカウント。
* New Relicライセンスキー (データを別のアカウントに送信する場合)。
* 使用を計画している特定の New Relic サービスに必要な権限。

New Relicアカウントのライセンスキーの作成および管理方法については、「[ライセンスキー」](/docs/apis/intro-apis/new-relic-api-keys/#license-key)を参照してください。

<CollapserGroup>
  <Collapser id="newrelic.nrdb.query" title="NRQLクロスアカウントクエリ">
    NerdGraph API を介してクロスアカウント NRQL クエリを実行します。

    <Tabs>
      <TabsBar>
        <TabsBarItem id="nrdbqueryinputs">
          入力
        </TabsBarItem>

        <TabsBarItem id="nrdbqueryoutputs">
          出力
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="nrdbqueryinputs">
          <table>
            <thead>
              <tr>
                <th>
                  入力
                </th>

                <th>
                  オプション性
                </th>

                <th>
                  タイプ
                </th>

                <th>
                  説明
                </th>

                <th>
                  例
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **クエリ**
                </td>

                <td>
                  必須
                </td>

                <td>
                  弦
                </td>

                <td>
                  NRQL クエリ ステートメント。
                </td>

                <td />
              </tr>

              <tr>
                <td>
                  **アカウント ID**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  intのリスト
                </td>

                <td>
                  **New Relic Account ID は、**

                  実行の目標アカウントを指定します。 指定しない場合は、クエリはワークフローの実行アカウントに対して実行されます。
                </td>

                <td />
              </tr>

              <tr>
                <td>
                  **セレクター**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  リスト
                </td>

                <td>
                  指定された唯一のものを出力として取得するセレクター。
                </td>

                <td>
                  ```yaml
                      steps:
                    - name: queryForLog
                      type: action
                      action: newrelic.nrdb.query
                      version: 1
                      inputs:
                        accountIds: [12345]
                        query: FROM Log SELECT * WHERE message LIKE 'DEMO%'
                        selectors:
                          - name: resultsAsString
                            expression: '.results | tostring'
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="nrdbqueryoutputs">
          <table>
            <thead>
              <tr>
                <th>
                  出力
                </th>

                <th>
                  タイプ
                </th>

                <th>
                  説明
                </th>

                <th>
                  例
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **結果**
                </td>

                <td />

                <td>
                  クエリの結果を含むオブジェクトの配列。詳細については、 

                  [Expressions プロパティを](/docs/workflow-automation/workflow-automation-apis/definition-schema/#expression-properties)

                  参照してください。
                </td>

                <td />
              </tr>

              <tr>
                <td>
                  **成功**
                </td>

                <td>
                  ブール値
                </td>

                <td>
                  リクエストのステータス。
                </td>

                <td />
              </tr>

              <tr>
                <td>
                  **エラーメッセージ**
                </td>

                <td>
                  弦
                </td>

                <td>
                  失敗の理由をメッセージとして表示します。
                </td>

                <td>
                  ```yaml
                        {
                      "success": true
                      results=[
                        { message=[INFO] - Workflow: test has ended, messageId=39af98 }, 
                        { message=[INFO] - Workflow: test - Step query has started, messageId=649c612 },
                        ...
                      ]
                    }
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>
</CollapserGroup>

<CollapserGroup>
  <Collapser id="newrelic.nrdb.query" title="NRDB クエリ">
    NerdGraph API を介してアカウント間 NRQL クエリを実行します。

    <Tabs>
      <TabsBar>
        <TabsBarItem id="newrelic-nrdb-queryinputs">
          入力
        </TabsBarItem>

        <TabsBarItem id="newrelic-nrdb-queryoutputs">
          出力
        </TabsBarItem>

        <TabsBarItem id="newrelic-nrdb-queryexample">
          例
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="newrelic-nrdb-queryinputs">
          <table>
            <thead>
              <tr>
                <th>
                  入力フィールド
                </th>

                <th>
                  オプション性
                </th>

                <th>
                  タイプ
                </th>

                <th>
                  説明
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **クエリ**
                </td>

                <td>
                  必須
                </td>

                <td>
                  弦
                </td>

                <td>
                  NRQL クエリ ステートメント。
                </td>
              </tr>

              <tr>
                <td>
                  **アカウント ID**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  intのリスト
                </td>

                <td>
                  **New Relic Account IDs**

                   \[New Relic アカウント ID]入力は、クエリが実行されるアカウントを指定するアカウント ID のリストを受け入れます。この入力が指定されていない場合、クエリはデフォルトでワークフローの実行アカウントに設定されます。
                </td>
              </tr>

              <tr>
                <td>
                  **フォーマット**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  イナム
                </td>

                <td>
                  結果のタイプを指定するには、 

                  `JSON`

                  または

                  `CSV`

                  のみを受け入れます。デフォルトは

                  `JSON`

                  です。
                </td>
              </tr>

              <tr>
                <td>
                  **セレクター**
                </td>

                <td>
                  オプション
                </td>

                <td>
                  リスト
                </td>

                <td>
                  指定された唯一のものを出力として取得するセレクター。
                </td>
              </tr>
            </tbody>
          </table>

          ### 例

          ```yaml
          steps:
            - name: queryForLog
              type: action
              action: newrelic.nrdb.query
              version: 1
              inputs:
                accountIds: [12345]
                query: FROM Log SELECT * WHERE message LIKE 'DEMO%'
                selectors:
                  - name: resultsAsString
                    expression: '.results | tostring'
          ```
        </TabsPageItem>

        <TabsPageItem id="newrelic-nrdb-queryoutputs">
          <table>
            <thead>
              <tr>
                <th>
                  出力フィールド
                </th>

                <th>
                  タイプ
                </th>

                <th>
                  説明
                </th>

                <th>
                  例
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **結果**
                </td>

                <td />

                <td>
                  クエリの結果を含むオブジェクトの配列。詳細については、 

                  [Expressions プロパティを](/docs/workflow-automation/workflow-automation-apis/definition-schema/#expression-properties)

                  参照してください。
                </td>

                <td />
              </tr>

              <tr>
                <td>
                  **成功**
                </td>

                <td>
                  ブール値
                </td>

                <td>
                  リクエストのステータス。
                </td>

                <td />
              </tr>

              <tr>
                <td>
                  **エラーメッセージ**
                </td>

                <td>
                  弦
                </td>

                <td>
                  失敗の理由をメッセージとして表示します。
                </td>

                <td>
                  ```yaml
                  {
                    "success": true
                    results=[
                      { message=[INFO] - Workflow: test has ended, messageId=39af98 }, 
                      { message=[INFO] - Workflow: test - Step query has started, messageId=649c612 },
                      ...
                    ]
                  }
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="newrelic-nrdb-queryexample">
          <table>
            <thead>
              <tr>
                <th>
                  ワークフローの例
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  ```yaml
                    - name: sendMetrics
                      type: action
                      action: newrelic.ingest.sendMetrics
                      version: 1
                      inputs:
                        metrics:
                          - name: service.errors.all
                            type: count
                            value: 9
                            timestamp: 1531414060739
                            attributes:
                              service.response.statuscode: 400
                          - name: service.response.duration
                            type: guage
                            value: 4
                            timestamp: 1531414060733
                            attributes:
                              service.response.statuscode: 500
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>
</CollapserGroup>