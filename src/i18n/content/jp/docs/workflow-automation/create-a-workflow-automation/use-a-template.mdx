---
title: テンプレートを使用してワークフロー自動化を作成する
tags:
  - workflow automation
  - create your own workflow
  - build a workflow using New Relic
  - workflow template
metaDescription: 'Jump-start your automation with pre-built workflow templates. Deploy in minutes, customize to your needs, and automate common tasks.'
freshnessValidatedDate: never
translationType: machine
---

<Callout title="プレビュー">
  この機能はまだ開発中ですが、ぜひお試しください。

  この機能は現在、弊社の[プレリリース ポリシー](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy)に従ってプレビュー プログラムの一部として提供されています。
</Callout>

テンプレートは、Slack へのレポートの送信、デプロイメントのロールバック、EC2 インスタンスのサイズ変更など、一般的なシナリオ向けに事前構成されたワークフローを提供します。 数分でデプロイし、チームのプロセスに合わせてカスタマイズします。

## テンプレートを使用する理由は何ですか?

* **より迅速に開始**: 作業自動化を数分でデプロイ
* **ベストプラクティスに従う**: 実証済みのパターンとエラー処理を使用する
* **例で学ぶ**: アクションがどのように接続され、データがどのように流れるかを確認します
* **エラーを減らす**: テスト済みの設定から始める

## あなたが始める前に

ほとんどのテンプレートには認証情報と統合が必要です。

* **AWS テンプレート**: 権限のある[AWS 認証情報](/docs/workflow-automation/setup-and-configuration/set-up-aws-credentials)(EC2、API Gateway、Systems Manager、または SQS)。
* **Slack 通知**: ボット トークンとチャンネル アクセスを備えた Slack アプリ。
* **すべてのテンプレート**: New Relicアカウントおよびエンティティ GUID (監視リソースの一意の識別子)。

<Callout variant="tip">
  **まだ資格情報をお持ちではありませんか?**まずテンプレートを参照してください。デプロイする前に資格情報を設定します。
</Callout>

## テンプレートをデプロイする

<Steps>
  <Step>
    ### 適切なテンプレートを見つける

    以下の[テンプレート ライブラリ](#workflow-automation-templates)を参照してください。それぞれ、機能、使用時期、要件、および動作方法を示します。
  </Step>

  <Step>
    ### デプロイして構成する

    1. **[one.newrelic.com](https://one.newrelic.com) &gt; All Capabilities &gt; Workflow Automation**にアクセスしてください。
    2. **Use a Template** \[テンプレートの使用を]選択
    3. テンプレートを選択してください
    4. 入力内容を入力します（資格情報、エンティティ GUID、クエリ、チャネル）
    5. セレクト**Deploy** \[デプロイ]

    ワークフローがアクティブになりました。
  </Step>

  <Step>
    ### テストと検証

    実稼働前にテストする:

    1. 手動でトリガーする（[オンデマンドでワークフローを開始するを](/docs/workflow-automation/create-a-workflow-automation/start-schedule#on-demand)参照）
    2. 実行履歴での実行の監視
    3. 出力を確認する（Slack メッセージ、AWS の変更、ログ）
    4. エラーを確認し、設定を調整する

    <Callout variant="important">
      **まず非本番環境でテストします。**一部のテンプレートではインフラストラクチャが変更されます。実稼働で使用する前に検証します。
    </Callout>
  </Step>
</Steps>

## テンプレートをカスタマイズする

デプロイメント後にワークフローを変更する:

* **条件付きロジックを追加**: 条件に基づいてステップをスキップする
* **チェーンテンプレート**: 出力を他のワークフローの入力として使用する
* **通知の調整**：形式、受信者、チャネルを変更する
* **カスタムアクションの追加**: HTTP requestsまたはデータ変換を含める

詳細については、 [「独自のワークフローを作成する」](/docs/workflow-automation/create-a-workflow-automation/create-your-own)を参照してください。

## トラブルシューティングテンプレート

ワークフローが失敗したり、期待どおりに動作しない場合は、次の手順に従ってください。

1. **実行履歴を確認します**。**Workflow Automation &gt; \[あなたのワークフロー] &gt; Run History**、実行ログとエラーメッセージを確認します。

2. **一般的な問題を確認する**: 次の問題の解決策については、 [「ワークフロー自動化のトラブルシューティング」](/docs/workflow-automation/troubleshooting)を参照してください。

   * AWS 認証情報と権限のエラー
   * Slack 統合の問題
   * エンティティ GUID の問題
   * NRQL失敗
   * ワークフローのタイムアウト
   * テンプレート固有のトラブルシューティング

<Callout variant="important">
  **テンプレートを安全にテストする**: 必ず最初に本番環境以外の環境でテストしてください。 インフラストラクチャを変更するテンプレート (EC2、API ゲートウェイ) は、誤って構成された場合、可用性に影響を与える可能性があります。
</Callout>

## ワークフロー自動化テンプレート

<CollapserGroup>
  <Collapser id="send-report-to-slack" title="Slackにレポートを送信する">
    **機能:**

    New RelicデータをNRQL （ New Relic書き込み言語）で作成し、結果を CSV としてフォーマットし、Slack に投稿します。

    **いつ使うのか:**

    定期レポートを自動化します: 日次パフォーマンス概要、週次エラー率、時間別の実行量、またはカスタムメトリック。

    **必要なもの:**

    * **Slack** : チャンネル投稿権限を持つボットトークン
    * **New Relic** : アカウントアクセスと有効なNRQL書き込み

    **使い方：**

    1. NRQL実行します
    2. 結果をCSVに変換します
    3. Slackへの投稿
    4. ログのステータス
  </Collapser>

  <Collapser id="api-gateway-rollback" title="APIゲートウェイのロールバック">
    **機能:**

    デプロイメントの問題を検出し、チームの承認を得た後、 AWS API Gateway を以前の設定にロールバックします。

    **いつ使うのか:**

    スパイクエラー、インテグレーションの中断、またはインシデントの原因となる悪いデプロイメントを元に戻します。 高リスクの変更に対するセーフティネット。

    **必要なもの:**

    * **AWS** : API Gateway と Systems Manager の権限
    * **Slack** : 通知と承認のためのアプリ
    * **New Relic** : API ゲートウェイ エンティティ GUID

    **使い方：**

    1. デプロイメント履歴を取得します
    2. 現在の問題と相関関係がある
    3. Slackの承認をリクエスト
    4. 承認された場合はロールバックを実行します
    5. チームに通知してクリーンアップする

    <Callout variant="important">
      **手動承認が必要です。**Slack の反応によるチームの承認がなければロールバックされません。
    </Callout>
  </Collapser>

  <Collapser id="ec2-instance-management" title="EC2インスタンス管理">
    **機能:**

    CPU またはリソースが急増したときに EC2 インスタンスのサイズを自動的に変更します。

    **いつ使うのか:**

    トラフィックの急増時の CPU スパイクを処理し、制限に達したインスタンスをスケーリングし、予測できない負荷パターンを管理します。

    **必要なもの:**

    * **AWS** : EC2 および Systems Manager の権限
    * **Slack** : 通知と承認のためのアプリ
    * **New Relic** : アラート条件監視 EC2、 [AWS CloudWatch Metric Streams](https://docs.newrelic.com/install/aws-cloudwatch/) 、 [EC2 監視統合](/docs/infrastructure/amazon-integrations/aws-integrations-list/aws-ec2-monitoring-integration/#activate)

    <Callout variant="tip">
      **CloudWatch Metric Streamsを使用します。** カスタムネームスペースを含む、 AWSメトリクスの完全なカバレッジを提供します。
    </Callout>

    **使い方：**

    1. 集計を取得してインスタンスを特定
    2. Slackの承認をリクエスト
    3. 自動化ドキュメントを作成する
    4. インスタンスを停止、変更、起動する
    5. 進捗状況を更新してクリーンアップします
  </Collapser>

  <Collapser id="json-parsing" title="JSON解析">
    **機能:**

    外部ステータス ページから JSON を取得し、コンポーネントのヘルスを解析し、New Relic にログを記録します。

    **いつ使うのか:**

    サードパーティの依存関係 (決済処理業者、認証プロバイダー、データ サービス) を監視し、障害と問題を関連付け、統合ダッシュボードを作成します。

    **必要なもの:**

    * **API アクセス**: JSON を返すパブリック ステータス エンドポイント
    * **New Relic** : ログ記録用のアカウント

    **使い方：**

    1. エンドポイントからJSONを取得します
    2. コンポーネントの健全性を解析する
    3. 運用状況を分類する
    4. フィルターを使用してNew Relicにログを記録する

    <Callout variant="tip">
      **5 ～ 15 分ごとにスケジュールを設定して、**サードパーティの信頼性の履歴ビューを構築します。
    </Callout>
  </Collapser>

  <Collapser id="deployment-rollback" title="デプロイメントのロールバック">
    **機能:**

    デプロイメント後のアプリケーションの健全性を監視し、問題が発生した場合に通知を送信します。

    **いつ使うのか:**

    デプロイメント後の新しいリリースを監視し、運用環境のみの問題を検出し、健全性の低下に対してワークフローのロールバックをトリガーします。

    **必要なもの:**

    * **New Relic** : 監視用のエンティティ GUID
    * **通知**（いずれかまたは両方を選択）：AWS SQS 権限または HTTP Webhook エンドポイント

    **使い方：**

    1. 1～5分ごとに健康状態を監視
    2. まとめ重大度を評価します
    3. 劣化時に通知（SQS/Webhook）を送信します
    4. すべてのヘルスチェックをログに記録します
    5. 停止または回復するまで継続します

    <Callout variant="tip">
      **[変更追跡 (変更追跡機能)](/docs/change-tracking/change-tracking-introduction)と併用して、**問題をデプロイメントと関連付けます。
    </Callout>
  </Collapser>
</CollapserGroup>

## 次のステップ

### 実行と管理

* **[ワークフローの開始とスケジュール](/docs/workflow-automation/create-a-workflow-automation/start-schedule)**: 手動でトリガーするか、自動的にスケジュールする
* **[ワークフローの管理](/docs/workflow-automation/create-a-workflow-automation/managing-workflow)**: ワークフローの編集、複製、削除

### カスタムビルド

* **[独自のワークフローを作成する](/docs/workflow-automation/create-a-workflow-automation/create-your-own)**:カスタムロジックでゼロから構築
* **[ベストプラクティス](/docs/workflow-automation/limitations-and-faq/workflow-best-practices)**: 信頼性が高く、本番環境に対応した自動化のパターン

### 規模

* **[ワークフロー オートメーション API](/docs/workflow-automation/workflow-automation-apis/using-workflow-automation-api)** : CI/CDまたはインフラストラクチャ-as-code と統合
* **[ワークフローの制限](/docs/workflow-automation/limitations-and-faq/workflow-limits)**: タイムアウト、レート制限、制約