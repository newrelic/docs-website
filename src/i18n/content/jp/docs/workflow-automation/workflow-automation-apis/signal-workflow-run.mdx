---
title: シグナルワークフロー実行
tags:
  - workflow automation
  - workflow
  - Signal Workflow Run
  - workflow automation API
metaDescription: Actions trigger a signal to an existing running workflow.
freshnessValidatedDate: never
translationType: machine
---

この API は、実行中の既存のワークフローへのシグナルをトリガーします。これを使用してコールバックを送信し、ワークフローによって評価されて次のステップに進むことができます。問題は信号とともに渡される可能性があります。

## パラメーター

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        パラメータ
      </th>

      <th>
        タイプ
      </th>

      <th>
        必須
      </th>

      <th>
        説明
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `accountId`
      </td>

      <td>
        数
      </td>

      <td>
        はい
      </td>

      <td>
        あなたのアカウントID。
      </td>
    </tr>

    <tr>
      <td>
        `runId`
      </td>

      <td>
        弦
      </td>

      <td>
        はい
      </td>

      <td>
        実行中のワークフローの一意の識別子。

        `StartWorkflowRun`

         API から取得されました。
      </td>
    </tr>

    <tr>
      <td>
        `signalName`
      </td>

      <td>
        弦
      </td>

      <td>
        はい
      </td>

      <td>
        ワークフローの待機ステップで定義されたシグナルの名前。
      </td>
    </tr>

    <tr>
      <td>
        `signalInputs`
      </td>

      <td>
        配列
      </td>

      <td>
        いいえ
      </td>

      <td>
        シグナルとともにデータを渡すためのオプションのキーの値のペア。
      </td>
    </tr>
  </tbody>
</table>

## 例 [#example]

以下のワークフロー定義と既に実行中のワークフローを前提とします

```yaml
  name: signalDemo

  steps:
    - name: waitStep
      type: wait
      seconds: 300
      signals:
        - name: approve
          next: signalHandler
        - name: cancel
          next: signalHandler

    - name: NoSignalReceived
      type: action
      action: newrelic.ingest.sendLogs
      version: 1
      inputs:
        logs:
          - message: "no signals received"
      next: end

    - name: signalHandler
      type: action
      action: newrelic.ingest.sendLogs
      version: 1
      inputs:
        logs:
          - message: "signal '${{ .steps.waitStep.outputs.signalName }}' was received with: '${{ .steps.waitStep.outputs.signalInputs | tostring }}'"
```

このワークフローを開始すると、開始時にこのrunIdが返されます `107e6df2-aa17-41bc-8065-bfa46bde810b`

ワークフローはこの変異によって通知される。

```graphql
mutation {
  workflowAutomationSignalWorkflowRun(
    accountId: 11933347
    runId: "107e6df2-aa17-41bc-8065-bfa46bde810b"
    signalName: "approve"
    signalInputs: [
      {key: "foo", value: "bar"}
    ]
  ) {
    runId
  }
}
```

## ログ出力の例

ワークフローが`options: {logLevel: DEBUG}`で開始された場合、ログには次の内容が記録されます。

<img title="Screenshot displaying Logs if the workflow was started with the options: {logLevel: DEBUG}" alt="Screenshot displaying Logs if the workflow was started with the options: {logLevel: DEBUG}" src="/images/signal-workflow-run.webp" />

## レスポンス

突然変異により以下が返されます:

* `runId`: シグナルを受信したワークフロー実行の一意の識別子。