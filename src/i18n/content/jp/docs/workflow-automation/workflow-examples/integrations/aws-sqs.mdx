---
title: AWS SQS メッセージング
tags:
  - workflow automation
  - workflow
  - aws
  - sqs
metaDescription: Send messages to AWS SQS queues using IAM role authentication.
freshnessValidatedDate: never
translationType: machine
---

IAM ロール認証を使用して AWS SQS キューにメッセージを送信します。

## 前提条件

**1. AWS IAMロールの設定**

* New Relicが引き受けることができるIAMロール
* ロールにはSQSにメッセージを送信する権限が必要です
* 設定手順については[AWS認証情報の設定を](/docs/workflow-automation/setup-and-configuration/set-up-aws-credentials)参照してください。

**2. AWS SQSキュー**

* 指定されたリージョン内の既存の SQS キュー

**3. 必須入力値**

* **awsRoleArn** : IAM ロールの ARN (例: `arn:aws:iam::123456789012:role/NewRelicIntegrationRole`)
* **awsQueueUrl** : 完全な SQS キュー URL (形式: `https://sqs.{region}.amazonaws.com/{account-id}/{queue-name}`)
* **awsRegion** : (オプション) デフォルトは `us-west-2`

## このワークフローが行うこと

* SQSキューにメッセージを送信する
* AWS IAMロール認証を使用する
* メッセージIDと成功ステータスを返す

**キーアクション**: `aws.execute.api` 、 `(sqs.send_message)`

```yaml
name: aws_execute_api_sqs_example

workflowInputs:
  awsRoleArn:
    type: String
  awsRegion:
    type: String
    defaultValue: us-west-2
  awsQueueUrl:
    type: String

steps:
  - name: sendSqsMessage
    type: action
    action: aws.execute.api
    version: 1
    inputs:
      awsRoleArn: ${{ .workflowInputs.awsRoleArn }}
      region: ${{ .workflowInputs.awsRegion }}
      service: sqs
      api: send_message
      parameters:
        QueueUrl: "${{ .workflowInputs.awsQueueUrl }}"
        MessageBody: |
          {
            "message": "deployment is bad",
            "status": "not good"
          }
      selectors:
        - name: success
          expression: '.success'
        - name: messageId
          expression: '.response.MessageId'
```

## 次のステップ

* **[REST APIポーリング](/docs/workflow-automation/workflow-examples/integrations/rest-api-polling)**:外部APIをポーリングしてデータを処理する
* **[デプロイメントのロールバック](/docs/workflow-automation/workflow-examples/advanced/deployment-rollback)**: ロールバック通知に SQS を使用する