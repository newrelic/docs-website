---
title: 'サービス マップ: エンティティを視覚化する'
tags:
  - Understand dependencies
  - Understand system dependencies
  - Service maps
metaDescription: 'New Relic''s service maps are visual, customizable representations of your application architecture.'
freshnessValidatedDate: '2023-10-23T00:00:00.000Z'
translationType: machine
---

サービス マップは、フロントエンドからバックエンドまでのアーキテクチャ全体を視覚的に表現したもので、システムを構成する相互接続されたコンポーネントの包括的な概要を提供します。 このマップには、アプリケーション、データベース、ホスト、サーバー、およびプロセス外サービス ( [Web 外部](#externals)と呼ばれる) 間の関係が動的に表示されます。

<img
  title="Service map experience"
  alt="A screenshot of the service map experience. The screenshot shows a UI separated by white lines into three tiers. They're ordered vertically with user experience as the top tier, services as the second tier, and infrastructure as the third tier."
  src="/images/Solutions_screenshot-full_service-map.webp"
/>

<figcaption>
  <DNT>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > APM > (choose an entity) > Service map**</DNT>: サービス マップには依存関係とそのパフォーマンスが表示されます。
</figcaption>

## サービスマップを利用する [#using-service-maps]

サービス マップは[分散トレース](/docs/apm/distributed-tracing/getting-started/introduction-distributed-tracing)と連携して、エンティティ間の関係を結び付けます。分散トレースを有効にしていない場合でもサービス マップは機能しますが、すべてのエージェントに対して分散トレースを有効にすることをお勧めします。これにより、サービス マップを使用する際のより一貫したエクスペリエンスが保証されます。

サービス マップにアクセスするには:

1. <DNT>
     **[one.newrelic.com](https://one.newrelic.com/all-capabilities)**
   </DNT>

   に移動し、

   <DNT>
     **APM & services**
   </DNT>

   、

   <DNT>
     **Mobile**
   </DNT>

   、または

   <DNT>
     **Browser**
   </DNT>

   のいずれかを選択します。

2. エンティティを選択します。

3. 左側で、

   <DNT>
     **Service map**
   </DNT>

   クリックします。

### 特定のエンティティからのマップ [#map-specific-entity]

カーソルをテンプレートの上に置いて<DNT>**Map from this entity**</DNT>をクリックすると、テンプレートの視点からテンプレート間の関係が表示されます。 サービス マップはそれに応じて更新されます。

<img
  title="Map from this entity"
  alt="A screenshot of the tooltip that appears when you hover your cursor over an entity."
  src="/images/solutions_screenshot-full_map-entity-example.webp"
  style={{ width: "70%" }}
/>

<img
  title="Example of map from this entity"
  alt="A screenshot of how service map updates after mapping from a specific entity."
  src="/images/solutions_screenshot-crop_mapfromthisentityexample.webp"
/>

### エンティティのフィルタリング [#filter-map]

<img
  title="Search, filter, and explore your entities"
  alt="A GIF of how service map updates when filtering the health status, timewarp, entity type, and relationship depth."
  src="/images/solutions_screenshot-full_filter-service-map.gif"
/>

以下に基づいてサービス マップをフィルタリングできます。

* <DNT>**Health status**</DNT>: 影響を受けるアプライアンスの周囲の稼働ステータスの色を削除します。

* <DNT>**Entity types**</DNT>: マップから特定のエンティティを非表示にします。

* <DNT>**Timewarp**</DNT>: 過去 3 時間にエンティティの健全性がどのように変化したかを調べます。

* <DNT>**Relationship depth**</DNT>：

  * <DNT>
      **Depth 1**
    </DNT>

    : (デフォルト) 稼働ステータスに関係なく、メイン アプライアンスに直接接続されているすべてのアプライアンスを表示します。

  * <DNT>
      **Depth 2**
    </DNT>

    : メインのアプライアンスから 2 ホップ離れた、劣化したアプライアンス (アラート付き) に焦点を当てます。 メイン エンタープライズ に直接接続する エンタープライズ は、このビューには含まれません。

  * <DNT>
      **Depth 3**
    </DNT>

    : 深さ 2 と同様に、深さ 3 はアラートのある劣化したアプライアンスに集中しますが、検索範囲をメインのアプライアンスから 3 ホップ離れたアプライアンスに拡張します。 メインエンティティへの直接接続は除外されたままです。

  <Callout variant="tip">
    エンティティの表示を深さ 2 および 3 の劣化したエンティティに制限する目的は、サービス マップが乱雑で圧倒されるのを防ぐことです。関係の深さを増すと、エンティティのネットワークの奥深くに進みますが、問題が発生しているエンティティのみが表示されます。これは、システム内の最も重大な問題に焦点を当てるのに役立ちます。
  </Callout>

### エンティティのパフォーマンス指標を表示する [#performance-data]

右側のペインには、すべてのエンティティのパフォーマンスに関する詳細なデータが含まれています。

<img
  title="Service maps right pane"
  alt="A gif that scrolls through the right pane in service maps. It shows different graphs that correspond to the above paragraph."
  src="/images/solutions_screenshot-full_service-maps-right-pane.gif"
/>

まとめると、マップは正確な瞬間を見つけて、システムに発生したインシデントの場所を特定するのに役立ちます。

## GraphQL API を使用してサービス関係を探索する [#api]

GraphQL クエリとミューテーションを実行するツールである NerdGraph エクスプローラーで、サービス マップで利用できるのと同じ関係接続を見つけることができます。開始するには、 [「NerdGraph チュートリアル: エンティティ データの表示」](/docs/apis/nerdgraph/examples/nerdgraph-entities-api-tutorial/)を参照してください。

## トラブルシューティング [#troubleshoot]

サービス マップ内の特定のエンティティを表示できない場合は、 [「欠落しているデータまたは難読化されたデータ」](/docs/troubleshooting-missing-or-obfuscated-data-new-relic-one)を参照してください。

インストルメント化されていないエンティティがある場合は、 [「サービス マップのインスツルメント化されていないエンティティ」](/docs/new-relic-solutions/new-relic-one/ui-data/service-maps/uninstrumented-entities-service-maps)を参照してください。

## マップ内の外部とデータベースについて [#externals]

New Relic UIでは、プロセス外サービスは[ウェブ外部](/docs/using-new-relic/welcome-new-relic/get-started/glossary#web-external)またはバックグラウンド外部データと呼ばれます。外部サービスとデータベースは、サービスマップにおいて他のエンティティタイプとは若干異なる機能を有しています：

* サービス マップに表示される他のエンティティとは異なり、

  <DNT>
    **externals**
  </DNT>

  は集約です。 マップ内の外部サービスをクリックすると、1 つの外部エンティティにまとめられたすべての外部サービスのリストが表示されます。 これは、一部のエンティティでは数十の外部情報が報告される場合があるため、マップの乱雑さを軽減するためです。

* エージェントレスの性質のため、データベースにはアラートを設定できません。データベースに対して行われたサービス呼び出しのみが New Relic に報告されます。
