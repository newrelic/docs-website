---
title: React ãƒ•ãƒƒã‚¯ã‚’ä½¿ç”¨ã—ã¦ New Relic ã‚¢ãƒ—ãƒªã‚’æ§‹ç¯‰ã™ã‚‹
tags:
  - New Relic solutions
  - Build with New Relic
metaDescription: Build a simple New Relic app with React hooks
freshnessValidatedDate: never
translationType: machine
---

<br />

`nr1` CLI ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 2.49.1 ä»¥é™ã§ã¯ã€ [React ãƒ•ãƒƒã‚¯](https://reactjs.org/docs/hooks-intro.html)ã‚’ä½¿ç”¨ã—ã¦ New Relic ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã‚«ã‚¹ã‚¿ãƒ  ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ§‹ç¯‰ã§ãã¾ã™ã€‚ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ã€å‹•ä½œä¸­ã® React ãƒ•ãƒƒã‚¯ã® Nerdlet ã®ä¾‹ã‚’ã„ãã¤ã‹ç´¹ä»‹ã—ã¾ã™!

## ã‚ãªãŸãŒå§‹ã‚ã‚‹å‰ã«

Nerdpack ã®é–‹ç™ºã«ã¯ã€New Relic ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¨ New Relic CLI ã® `nr1`ãŒå¿…è¦ã§ã™ã€‚

ã¾ã è¡Œã£ã¦ã„ãªã„å ´åˆ:

* New Relic ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«[ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—ã™ã‚‹](https://newrelic.com/signup/)
* [Node.js](https://nodejs.org/en/download/)ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹
* [CLI ã‚¯ã‚¤ãƒƒã‚¯ ã‚¹ã‚¿ãƒ¼ãƒˆ](https://one.newrelic.com/launcher/developer-center.launcher?pane=eyJuZXJkbGV0SWQiOiJkZXZlbG9wZXItY2VudGVyLmRldmVsb3Blci1jZW50ZXIifQ==)ã‚’å®Œäº†ã™ã‚‹

ã“ã‚Œã§ã€ `my-awesome-nerdpack`ã¨ã„ã† Nerdpack ãŒã§ãã¾ã—ãŸã€‚ã“ã® Nerdpack ã«ã¯ã€åå‰ã‚’ä»˜ã‘ãŸ Nerdlet ã¨ãƒ©ãƒ³ãƒãƒ£ãƒ¼ãŒã‚ã‚Šã¾ã™ (ãŸã ã—ã€ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ©ãƒ³ãƒãƒ£ãƒ¼åã€Œlauncherã€ã¨ Nerdlet åã€Œhomeã€ã‚’ä½¿ç”¨ã—ã¾ã™)ã€‚ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ã€ã“ã® Nerdpack ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

æœ€å¾Œã«ã€ `nr1` ãŒæœ€æ–°ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ã€æœ€å°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 2.49.1 ãŒå¿…è¦ã§ã™ã€‚

```sh
nr1 update
nr1 version
[output] @datanerd/nr1/{purple}2.49.1{normal} darwin-x64 node-v14.15.1
```

<Callout variant="tip">
  VSCode ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã€ã‚¢ãƒ—ãƒªã®ãƒ“ãƒ«ãƒ‰ã«ä½¿ç”¨ã§ãã‚‹ [æ‹¡å¼µæ©Ÿèƒ½](https://marketplace.visualstudio.com/items?itemName=new-relic.nr1) ã¨ [æ‹¡å¼µãƒ‘ãƒƒã‚¯](https://marketplace.visualstudio.com/items?itemName=new-relic.new-relic-extension-pack) ãŒã‚ã‚Šã¾ã™ã€‚
</Callout>

```jsx fileName=index.js
import React from 'react';

export default class HomeNerdlet extends React.Component {
  render() {
    return <h1>Hello, home Nerdlet!</h1>;
  }
}
```

## ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§æ›´æ–°ã—ã¦æä¾›ã™ã‚‹

`nr1`ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€Nerdpack ã®ãƒ­ãƒ¼ã‚«ãƒ« ãƒ“ãƒ«ãƒ‰ã‚’ New Relic ã«æä¾›ã§ãã¾ã™ã€‚ã“ã‚Œã¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å…¬é–‹ã™ã‚‹å‰ã«ã€å®Ÿç¨¼åƒç’°å¢ƒã«ä¼¼ãŸç’°å¢ƒã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é–‹ç™ºã™ã‚‹ã®ã«å½¹ç«‹ã¡ã¾ã™ã€‚

ã‚³ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã™ã‚‹å‰ã«ã€Nerdpack ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã‚’ã‚ˆãç†è§£ã—ã¦ãŠã„ã¦ãã ã•ã„ã€‚

```txt lineHighlight=3-10,12
my-awesome-nerdpack/
â”œâ”€â”€â”€README.md
â”œâ”€â”€â”€launchers/
â”‚   â””â”€â”€â”€launcher/
â”‚       â””â”€â”€â”€nr1.json
â”œâ”€â”€â”€nerdlets/
â”‚   â””â”€â”€â”€home
â”‚       â”œâ”€â”€â”€index.js
â”‚       â”œâ”€â”€â”€nr1.json
â”‚       â””â”€â”€â”€styles.scss
â”œâ”€â”€â”€node_modules/
â”œâ”€â”€â”€nr1.json
â”œâ”€â”€â”€package-lock.json
â””â”€â”€â”€package.json
```

*launchers* ãŠã‚ˆã³ *nerdlets* ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ­ã‚¸ãƒƒã‚¯ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚ ã»ã¨ã‚“ã©ã®ã‚³ãƒ¼ãƒ‰ã‚’æ›´æ–°ã™ã‚‹ã®ã¯ã€ã“ã‚Œã‚‰ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã™ã€‚Nerdpack å…¨ä½“ã® *nr1.json* ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯ã€Nerdpackã€Nerdletsã€ãŠã‚ˆã³ãƒ©ãƒ³ãƒãƒ£ãƒ¼ã«é–¢ã™ã‚‹ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ãŒä¿æŒã•ã‚Œã¾ã™ã€‚

<Callout variant="tip">
  Nerdpack ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ ã®è©³ç´°ã«ã¤ã„ã¦ã¯ã€[ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’](/docs/new-relic-solutions/build-nr-ui/nerdpack-file-structure/)ãŠèª­ã¿ãã ã•ã„ã€‚
</Callout>

<Steps>
  <Step>
    *my-awesome-nerdpack/nerdlets/home/index.js*ã§ã€ *HomeNerdlet* ã‚¯ãƒ©ã‚¹ã‚’é–¢æ•°ã«å¤‰æ›´ã—ã¾ã™ã€‚

    ```jsx fileName=index.js
    import React from 'react';

    function HomeNerdlet () {
        return <h1>Hello, home Nerdlet!</h1>;
    }

    export default HomeNerdlet
    ```
  </Step>

  <Step>
    æ¬¡ã«ã€ãƒ˜ãƒƒãƒ€ãƒ¼ã®ä»£ã‚ã‚Šã« Billboard ãƒãƒ£ãƒ¼ãƒˆã‚’è¿”ã—ã¾ã™ã€‚

    ```jsx fileName=index.js
    import React from 'react';
    import { BillboardChart} from 'nr1'

    function HomeNerdlet () {

      const clickCount = {
        metadata: {
            id: '1',
            name: 'Count',
            viz: 'main',
        },
        data: [
          { "y": 10 }
        ]
      }
      return <BillboardChart data={[clickCount]}/>
    }

    export default HomeNerdlet
    ```

    <br />

    ä»Šã®ã¨ã“ã‚ã€Billboard ãƒãƒ£ãƒ¼ãƒˆã«é™çš„ãªå€¤ã‚’è¡¨ç¤ºã—ã¦ã„ã¾ã™ãŒã€å¾Œã®æ‰‹é †ã§ã€é–¢æ•°ã®ãƒ­ãƒ¼ã‚«ãƒ«çŠ¶æ…‹ã‚’ä½¿ç”¨ã—ã¦å‹•çš„ãªå€¤ã‚’æŒ‡å®šã—ã¾ã™ã€‚
  </Step>

  <Step>
    ã¾ã è¡Œã£ã¦ã„ãªã„å ´åˆã¯ã€Nerdpack ã®ãƒ«ãƒ¼ãƒˆ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æä¾›ã—ã¾ã™ã€‚

    ```bash
    nr1 nerdpack:serve
    [output] Found and loaded {success}2 {plain}nr1.json files on MyAwesomeNerdpack ({purple}aad7ebb6-8901-43d0-a681-0719b2c60a11{plain}) Nerdpack.
    [output]
    [output] {purple}Nerdpack:
    [output]  {success}âœ”  MyAwesomeNerdpack {plain}({purple}aad7ebb6-8901-43d0-a681-0719b2c60a11{plain}) {blue}nr1.json
    [output]
    [output] {purple}Launchers:
    [output]  {success}âœ”  launcher {blue}launchers/launcher/nr1.json
    [output]
    [output] {purple}Nerdlets:
    [output]  {success}âœ”  home {blue}nerdlets/home/nr1.json
    [output]
    [output] There is no certificate created yet.
    [output]  {success}âœ”  {plain}New certificate created.
    [output]
    [output] Webpack bundle analyzer is enabled (you need to wait for the first build to finish)
    [output]  â””  You can head to {blue}http://127.0.0.1:27888
    [output]
    [output] {blue}NOTE: {plain}To verify how your assets will look in production, you need to
    [output]       add "--mode=prod" when starting the development server.
    [output]
    [output] ğŸ›   Built artifact files for:ex.js...
    [output]  â  {purple}aad7ebb6-8901-43d0-a681-0719b2c60a11--home {plain}built {success}âœ”
    [output]
    [output]  {success}âœ”  {plain}Nerdpack built successfully!
    [output]  {yellow}â˜…  {plain}Starting as orchestrator...
    [output]
    [output]  {success}âœ”  {plain}Server ready! Test it at: {blue}https://one.newrelic.com/?nerdpacks=local
    [output]  {blue}â†©  {plain}Server will reload automatically if you modify any file!
    [output]
    [output]  {blue}â„¹  {plain}Additionally, you can test the following artifacts at:
    [output]
    [output] {purple}Launchers:
    [output]  â  {success}launcher {blue}https://onenr.io/0z7wkEkMnjL
    [output]  {blue}â„¹  {plain}You can use "npm start -- --mode=prod" to run the development server in prod mode.
    ```
  </Step>

  <Step>
    å‡ºåŠ›ã®ä¸‹éƒ¨ã«ã‚ã‚‹ URL ã‚’ä½¿ç”¨ã—ã¦ã€ãƒ©ãƒ³ãƒãƒ£ãƒ¼ã‚’é–‹ãã¾ã™ã€‚

    ```bash
    [output] {purple}Launchers:
    [output]  *  {success}launcher {blue}https://onenr.io/0z7wkEkMnjL
    [output]  {blue}â„¹  {plain}You can use "npm start -- --mode=prod" to run the development server in prod mode.
    ```
  </Step>

  <Step>
    ã“ã“ã§ã¯ã€ã€Œ10ã€ã¨ã„ã†æ•°å­—ã‚’ç¤ºã™ Billboard ãƒãƒ£ãƒ¼ãƒˆã« Nerdlet ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚

    <img title="Static billboard chart in the browser" alt="Static billboard chart in the browser" src="/images/react-hooks-screenshot-static-billboard-local.webp" />
  </Step>
</Steps>

ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å¤‰æ›´ã™ã‚‹ã¨ Nerdlet ãŒè‡ªå‹•çš„ã«ãƒªãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹ãŸã‚ã€ã‚µãƒ¼ãƒãƒ¼ã‚’å®Ÿè¡Œã—ãŸã¾ã¾ã«ã—ã¾ã™ã€‚

## Nerdlet ã§ `useState()` ãƒ•ãƒƒã‚¯ã‚’ä½¿ç”¨ã™ã‚‹

ä»¥å‰ã¯ã€ãƒ“ãƒ«ãƒœãƒ¼ãƒ‰ ãƒãƒ£ãƒ¼ãƒˆã«é™çš„ãªå€¤ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã—ãŸã€‚ã“ã“ã§ã€é–¢æ•°ã®ãƒ­ãƒ¼ã‚«ãƒ«çŠ¶æ…‹ã‚’ä½¿ç”¨ã—ã¦å‹•çš„ãªå€¤ã‚’ä¿å­˜ã—ã€ãã®å€¤ã‚’ãƒãƒ£ãƒ¼ãƒˆã«è¡¨ç¤ºã—ã¾ã™ã€‚

<Steps>
  <Step>
    *my-awesome-nerdpack/nerdlets/home/index.js*ã§ã€é–¢æ•°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ `useState()` ã‚’å‘¼ã³å‡ºã—ã¾ã™ã€‚

    ```jsx fileName=index.js
    import React, {useState} from 'react';
    import { BillboardChart} from 'nr1'

    function HomeNerdlet () {
      const [count, setCount] = useState(0);

      const clickCount = {
        metadata: {
            id: '1',
            name: 'Count',
            viz: 'main',
        },
        data: [
          { "y": 10 }
        ]
      }
      return <BillboardChart data={[clickCount]}/>
    }

    export default HomeNerdlet
    ```

    <br />

    ã“ã“ã§ã¯ã€ `useState()`ã‚’å‘¼ã³å‡ºã—ã¾ã™ã€‚ã“ã®ãƒ•ãƒƒã‚¯ã¯ã€é…åˆ—ã«ã‚­ãƒ£ãƒ—ãƒãƒ£ã™ã‚‹ 2 ã¤ã®å€¤ã‚’è¿”ã—ã¾ã™ã€‚

    * `count`: ãƒ­ãƒ¼ã‚«ãƒ«çŠ¶æ…‹ã®ç¾åœ¨ã®å€¤ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¯ 0 ã§ã€ã“ã‚Œã¯ `useState()`ã«æ¸¡ã—ãŸå¼•æ•°ã§ã™ã€‚
    * `setCount`: æ›´æ–°ã«ä½¿ç”¨ã™ã‚‹é–¢æ•° `count`
  </Step>

  <Step>
    Billboard ãƒãƒ£ãƒ¼ãƒˆ ãƒ‡ãƒ¼ã‚¿ã‚’ `count`ã‚’ä½¿ç”¨ã™ã‚‹ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã™ã€‚

    ```jsx fileName=index.js
    import React, {useState} from 'react';
    import { BillboardChart} from 'nr1'

    function HomeNerdlet () {
      const [count, setCount] = useState(0);

      const clickCount = {
        metadata: {
          id: '1',
          name: 'Count',
          viz: 'main',
        },
        data: [
          { "y": count }
        ]
      }
      return <BillboardChart data={[clickCount]}/>
    }

    export default HomeNerdlet
    ```

    <br />

    ç¾åœ¨ã€çŠ¶æ…‹ã‚’æ›´æ–°ã—ãªã„ãŸã‚ã€count ã®å€¤ã¯ã™ã¹ã¦ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã§ `0` ã«ãªã‚Šã¾ã™ã€‚ãã‚Œã‚’è¡Œã†æ–¹æ³•ãŒå¿…è¦ã§ã™ã€‚
  </Step>

  <Step>
    ã‚°ãƒ©ãƒ•ã®æ¨ªã«ã€ `count`ã‚’ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆã™ã‚‹ãƒœã‚¿ãƒ³ã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã—ã¾ã™ã€‚

    ```jsx fileName=index.js
    import React, {useState} from 'react';
    import { BillboardChart} from 'nr1'

    function HomeNerdlet () {
      const [count, setCount] = useState(0);

      const clickCount = {
        metadata: {
            id: '1',
            name: 'Count',
            viz: 'main',
        },
        data: [
          { "y": count }
        ]
      }
      return (
        <div>
          <BillboardChart data={[clickCount]}/>
          <button onClick={() => setCount(count + 1)}>
            Increment count
          </button>
        </div>
      );
    }

    export default HomeNerdlet
    ```

    <br />

    ã“ã“ã§ã¯ã€ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ãŸã³ã«ã‚«ã‚¦ãƒ³ãƒˆã‚’ 1 ãšã¤å¢—ã‚„ã™ãƒœã‚¿ãƒ³ã‚’ Nerdlet ã«è¿½åŠ ã—ã¾ã—ãŸã€‚
  </Step>

  <Step>
    Nerdlet ã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹ãƒ–ãƒ©ã‚¦ã‚¶ã«ç§»å‹•ã—ã¦ã€å¤‰æ›´ã‚’ç¢ºèªã—ã¾ã™ã€‚

    <img title="Increment count with button click" alt="Increment count with button click" src="/images/react-hooks-screenshot-button-increment.webp" />

    ãƒœã‚¿ãƒ³ã‚’æ•°å›ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚«ã‚¦ãƒ³ãƒˆã‚’å¢—ã‚„ã—ã¾ã™ã€‚
  </Step>
</Steps>

## Nerdlet ã§ `useEffect()` ãƒ•ãƒƒã‚¯ã‚’ä½¿ç”¨ã™ã‚‹

Nerdlet ã« Billboard ãƒãƒ£ãƒ¼ãƒˆã¨ãƒœã‚¿ãƒ³ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸã€‚ã‚°ãƒ©ãƒ•ã«ã¯ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸå›æ•°ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ `useEffect()` ã‚’ä½¿ç”¨ã—ã¦ `count`ã‚’è‡ªå‹•çš„ã«ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆã—ã¾ã™ã€‚

<Steps>
  <Step>
    *my-awesome-nerdpack/nerdlets/home/index.js*ã§ã€ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚

    ```jsx fileName=index.js
    import React, {useState, useEffect} from 'react';
    import { BillboardChart} from 'nr1'

    function HomeNerdlet () {
      const [count, setCount] = useState(0);

      useEffect(() => {
        setTimeout(() => {
          setCount(() => count + 1);
        }, 1000);
      });

      const clickCount = {
        metadata: {
            id: '1',
            name: 'Count',
            viz: 'main',
        },
        data: [
          { "y": count }
        ]
      }
      return (
        <div>
          <BillboardChart data={[clickCount]}/>
        </div>
      );
    }

    export default HomeNerdlet
    ```

    <br />

    `useEffect()` 1 ç§’ã”ã¨ã« `count` å€¤ã‚’è‡ªå‹•çš„ã«å¢—ã‚„ã—ã¾ã™ã€‚ã‚«ã‚¦ãƒ³ãƒˆã‚’è‡ªå‹•åŒ–ã—ãŸã®ã§ã€ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆ ãƒœã‚¿ãƒ³ã‚‚å‰Šé™¤ã—ã¾ã—ãŸã€‚
  </Step>

  <Step>
    ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã«ç§»å‹•ã—ã¦ã€æ›´æ–°ã‚’ç¢ºèªã—ã¾ã™ã€‚

    <img title="Auto increment with Effect Hook" alt="Auto increment with Effect Hook" src="/images/react-hooks-screenshot-auto-increment.webp" />
  </Step>
</Steps>

## æ¦‚è¦

ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ã€æ¬¡ã®æ–¹æ³•ã«ã¤ã„ã¦å­¦ç¿’ã—ã¾ã—ãŸã€‚

* ãƒ­ãƒ¼ã‚«ãƒ«ã® New Relic Nerdpack ã‚’ä½œæˆã™ã‚‹
* Nerdpack ã§ãƒ•ãƒƒã‚¯ã‚’ä½¿ç”¨ã™ã‚‹