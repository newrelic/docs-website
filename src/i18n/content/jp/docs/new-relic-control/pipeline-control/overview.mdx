---
title: Pipeline制御の概要
metaDescription: Pipeline control allows you to manage the flow of data from your monitored entities to New Relic.
freshnessValidatedDate: never
translationType: machine
---

Pipeline Control は、New Relic Control のデータ管理コンポーネントです。テレメトリーデータのフィルタリング、変換、管理を行い、コストを削減し、信号品質を向上させ、コンプライアンスを維持するのに役立ちます。

Pipeline Controlは、独立して、または一緒に使用できる 2 つの処理レイヤーがあります。

## Pipeline Controlゲートウェイ

**ゲートウェイ ルールは**インフラストラクチャ内で実行されます。

* データが**ネットワークから出る前に**処理する（出力コストを削減）
* 組織全体の設定 (ルールは組織内のすべてのアカウントに適用されます)
* 完全な変換、フィルタリング、サンプリング機能
* インフラストラクチャを管理します (Kubernetesプロイメントが必要です)
* ゲートウェイで受信したデータ量に基づいて課金されます

ゲートウェイは次のような場合に最適です。

* データがインフラストラクチャから出る前にフィルタリングすることで、ネットワークの出力コストを削減します。
* すべてのMELTタイプに対するより豊富なデータ変換機能（例：ログを解析し、属性を正規化し、メタデータで強化する
* コンプライアンス要件を満たすために、機密データがネットワークから送信される前に削除または難読化する
* より大量のデータを処理するには、ゲートウェイはcloudルールよりも安価です

ゲートウェイの詳細については、 [「ゲートウェイの概要」を](/docs/new-relic-control/pipeline-control/gateway/overview)参照してください。

## Pipeline Control cloudルール

データが New Relic エンドポイントに到達した後、**クラウド ルールは**New Relic のインフラストラクチャで実行されます。

* **New Relic に到達した**データを処理します（インフラストラクチャ管理は不要）
* アカウント固有のルール（各ルールは単一の New Relic アカウントに適用されます）
* データと属性をフィルタリングするためのNRQLベースのドロップルール
* インフラストラクチャのセットアップや管理は不要
* ドロップされたデータ（aCCU あたり 7.5 GB）とスキャンされた数十億のイベント（aCCU あたり 2.237 BSE）に基づいて課金されます。

クラウド ルールは次のような場合に最適です。

* ゲートウェイインフラストラクチャを管理せずに、シンプルなドロップルールが必要な場合
* 処理要件は控えめであり、本格的なゲートウェイの展開を正当化するものではありません
* フィルタリングのボリュームが全体の取り込み量の割合として低い場合、 cloudルールの料金設定の方がコスト効率が高い可能性があります

詳細:[クラウドルールを作成する](/docs/new-relic-control/pipeline-control/cloud-rules/create-pipeline-rules)

## 両方を併用する

ゲートウェイ ルールとcloudルールを同時に使用することもできます。

* テレメトリー ソース (例: エージェントはゲートウェイを経由するかどうかを個別に設定できます
* 多層防御戦略により機密データが確実に削除される
* ゲートウェイをプライマリ処理に使用しながら、 cloud API / UI経由で一部のルールを管理するのに便利

## 比較表

| 機能                | ゲートウェイルール                     | クラウドルール                            |
| ----------------- | ----------------------------- | ---------------------------------- |
| **処理場所**          | インフラストラクチャ（Kubernetes）        | New Relic cloud                    |
| **処理すると**         | データがネットワークから出ていく前に            | データがNew Relicに到達した後                |
| **セットアップが必要です**   | はい (Kubernetesクラスタ、 Helmチャート) | いいえ                                |
| **設定方法**          | YAMLまたはUI                     | UI または NerdGraph API (NRQL ベース)    |
| **ルールのスコープ**      | 組織全体                          | アカウント固有                            |
| **機能**            | 変換、データ/属性の削除、サンプルの評価          | データ/属性を削除する                        |
| **サポートされているデータ型** | メトリクス、イベント、ログ、トレース            | メトリクス、イベント、ログ、トレース                 |
| **最適な用途**         | 大量処理、変換、出力コスト削減、コンプライアンス      | シンプルなドロップルール、低ボリューム、インフラストラクチャ管理不要 |

詳細な価格情報とコスト計算については、 [「Pipeline Control のコスト」を](/docs/new-relic-control/pipeline-control/costs)参照してください。

## 前提条件

### cloudルールの場合

* Pipeline Control cloudルールを管理するための RBAC 権限を持つロールのNew Relicアカウント
* フィルタリングルールを作成するためのNRQLの理解

### ゲートウェイ用

* 組織製品管理者または組織マネージャー権限を持つ New Relic アカウント

<Callout variant="important" title="重要">
  組織プロダクト管理者または組織マネージャー ユーザーロールには、次のことが求められます。

  * ゲートウェイをインストールする
  * ゲートウェイにクラスターを追加する
  * ゲートウェイの設定
  * ゲートウェイルールを表示
</Callout>

* Kubernetesの運用と管理に関する知識
* Kubernetesクラスタのデプロイへの管理者アクセスとクラスタ内のリソースの管理
* ネットワーク内でプライベート DNS ホスト名を作成および管理する権限
* DNSレコードを作成および管理するための権限
* ローカルにインストールされたHelm

<Callout variant="important">
  * Pipeline Controlルールは、ルールを作成した瞬間から到着するデータにのみ適用され、 [すでに取り込まれた](/docs/telemetry-data-platform/ingest-manage-data/manage-data/manage-data-retention#data-deletion)データは削除されません。
  * ルールを作成するときは、設定した条件を満たすデータをルールが正確に識別して破棄するようにする責任があります。また、ルールと New Relic に開示するデータを監視する責任も負います。
</Callout>

## 次のステップ

ニーズに応じてアプローチを選択してください。

* **ゲートウェイから始める**: [Pipeline Controlゲートウェイのセットアップとデプロイ](/docs/new-relic-control/pipeline-control/gateway/set-up-and-deploy-pipeline-control)
* **クラウドルールから始める**:[パイプラインルールを作成する](/docs/new-relic-control/pipeline-control/cloud-rules/create-pipeline-rules)