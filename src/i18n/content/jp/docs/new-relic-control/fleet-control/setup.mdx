---
title: Fleet Controlを設定する
tags:
  - fleet-control
  - setup
  - getting-started
  - kubernetes
  - deployment
  - agent-management
metaDescription: Learn how to get started with Fleet Control by creating your first fleet and running your first deployment.
freshnessValidatedDate: never
translationType: machine
---

<Callout title="機能の可用性">
  Fleet Control for Kubernetesクラスタは一般提供 (GA) されています。 ホスト上のエージェントの管理のサポートは現在パブリック プレビュー段階です。

  サポートされているエージェントとその環境の完全なリストについては、[エージェントのタイプの互換性に関するドキュメント](/docs/new-relic-control/agent-control/agent-types)を参照してください。

  パブリック プレビュー機能は、弊社の[プレリリース ポリシー](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy)に従って提供されます。
</Callout>

このガイドでは、Fleet Control を使い始めるための最も早い方法を説明します。最初のフリートを作成し、基本的なデプロイメントを実行するための重要な「ハッピー パス」ワークフローについて説明します。

## ワークフローの概要

Fleet Control のセットアップ プロセスには特定の順序があります。Agent Controlをインストールする*前に*、フリートを作成する必要があります。これは、インストレーション プロセスでフリートを関連付ける必要があるためです。 Agent Controlがインストールされると、エンティティがそのフリートに自動的に割り当てられます。 したがって、ワークフローは次のようになります。

1. New Relic プラットフォームで**フリートを作成します**。
2. **Agent Controlエンティティにインストールします**。 インストレーション ウィザードは、フリートの詳細を使用して各エンティティを割り当て、それを「割り当てられた管理対象エンティティ」にします。
3. **デプロイメントを実行して**、現在フリートの一部となっているエンティティにエージェントをインストールして構成します。

## 前提条件

これらのアクションを実行するには、**Organization Manager** \[組織マネージャーの]ロールまたは同等のフリート管理権限を持つカスタム ロールが必要です。

## ステップ1: 最初の艦隊を作成する

最初のステップは艦隊を作成することです。Fleet Controlでは、**フリートは**、同一の計装設定を共有する、管理されたエンティティ ( Kubernetesクラスタなど) の同種のコレクションです。 フリートは論理的なグループとして機能し、環境全体にわたって大規模なエージェント バージョンと設定を一貫して管理できるようにし、設定のドリフトや観察のギャップを防ぎます。

1. 適切なアカウントで New Relic プラットフォームにログインします。

2. **All capabilities → New Relic Control**に移動します。
   * **ヒント:**ピン アイコンをクリックすると、 **New Relic Control を**左側のナビゲーション バーにピン留めして簡単にアクセスできます。

3. **New Relic Control**メニューから、 **Fleet Control**セクションの**Fleets**を選択します。

4. メインの「フリート」ページで、 **Create a fleet**\[フリートの作成]ボタンをクリックします。

5. モーダル内:

   * 艦隊に意味のある**Name** \[名前]\(たとえば、 `prod-us-east-1-platform-k8s` ) とオプションの**Description** \[説明]を入力します。
   * **Type of Fleet** \[艦隊の種類]を選択します。このガイドでは、一般公開されている**Kubernetes**を選択します。ホスト サポートは現在パブリック プレビュー段階です。
   * **Access management** \[アクセス管理は]デフォルトのままにします。これは、FGA (きめ細かなアクセス制御) のオプション設定です。

6. **Create Fleet**\[フリートの作成]をクリックします。

<img title="Create a fleet modal" alt="The 'Create a fleet' modal with input fields for a fleet name, description, and environment type." src="/images/fleet-control-creation-modal.webp" />

フリートが作成されると、 Agent Controlのインストールを続行するために必要なコンポーネントが揃います。

## ステップ2: Agent Controlをインストールする

フリートが存在するようになったので、関連付けるエンティティにAgent Controlをインストールします。

[Agent Controlセットアップ ドキュメント](/docs/new-relic-control/agent-control/setup)の指示に従ってください。 ウィザードには、 Agent Controlをインストールし、管理対象のテンプレートを作成したフリートに割り当てる`values.yaml`ファイルとHelmコマンドが用意されています。 完了すると、エンティティはフリート内に**Assigned Managed Entities** \[割り当てられた管理対象エンティティ]として表示されます。

## ステップ 3: エージェント設定を作成する

New Relic Infrastructureエージェントをデプロイする前に、その設定を作成する必要があります。 作成した設定はすべてグローバルに保存され、New Relic アカウント全体で使用できるようになります。

1. **New Relic Control の**左側メニューで、**Configurations** \[設定]をクリックします。

2. **Create configuration** \[設定の作成]ボタンをクリックします。

3. モーダル内:

   * **Environnement** \[環境]については、 **Kubernetes**を選択します。
   * **Agent type** \[エージェントタイプ]には、 **New Relic Infrastructure**を選択します。
   * 設定に意味のある一意の名前を付けます。 設定はグローバルなので、明確な名前が重要です。 例: `New Relic default infra config` 。

4. Click **Continue**.

5. 2つのパネルが表示されます。右側のパネルにはデフォルトのテンプレートが含まれています。テンプレート全体をコピーするには、 **Copy**\[コピー]ボタンをクリックします。

6. コピーしたテキストを左側の設定パネルに貼り付けます。

7. **Save**［保存］をクリックします。設定がグローバルに保存されました。

<img title="Create a fleet configuration editor" alt="The 'Create a configuration editor' with template and content panes for easily authoring a configuration." src="/images/fleet-control-config-editor.webp" />

## ステップ4: 最初のデプロイメントを作成して実行する

デプロイメントとは、フリート内の管理対象エンティティ上でエージェントをインストール、削除、または構成できる、制御された一連のアクションです。ここで、New Relic Infrastructure エージェントをデプロイするためのものを作成します。

1. **Fleets** \[フリート]タブに戻り、先ほど作成したフリートを選択します。
2. フリートの概要ページで、 **Create a deployment**\[デプロイメントの作成] をクリックします。 (フリートに既存のデプロイメントがある場合は、 **Deployments**\[デプロイメント]タブに移動し、 **Create deployment**\[デプロイメントの作成]をクリックします)。
3. デプロイメントに必須の**Name** \[名前]を付けます。意味のある名前を付けると、歴史的な背景がわかり、トラブルシューティングに役立ちます。変更、バージョン、またはチケット ID を含むパターンを検討してください。たとえば、 `v1.0-initial-infra-deploy`または`add-logging-JIRA-123`です。
4. **Add an agent**\[エージェントの追加]をクリックします。
5. 設定を作成したエージェント タイプ: **New Relic Infrastructure**を選択します。
6. 利用可能な設定のリストから、作成した`New Relic default infra config`を選択します。 バージョンはデフォルトで`v1`になります。
7. **Add to deployment**\[デプロイメントに追加]をクリックします。エージェントとそれに関連付けられた設定が、**Agents**\[エージェント]というテーブルに表示されます。
8. **Save draft**\[下書きを保存]をクリックします。
9. 準備ができたら、 **Start deployment** \[デプロイメントの開始]をクリックします。 確認モーダルが表示されます。
10. モーダルで、 **Start deployment** \[デプロイメントの開始] をクリックしてリリースします。

<img title="Create a fleet deployment pane" alt="The 'Create a fleet deployment pane' allows the user to create a deployment consisting of actions that can install, delete, or configure agents." src="/images/fleet-control-deployment-pane-gke.webp" />

「進行中」画面には、ステータス、影響を受ける管理対象エンティティとエージェントの数、およびデプロイメント ID が表示されます。完了すると、ページが更新され、「完了」ステータスと、インストゥルメントで行われたデプロイメント、エージェント、および特定の管理対象エンティティの詳細を示す概要表が表示されます。

<img title="Fleet Control deployment progress" alt="The 'Fleet Control deployment progress' allows the user to understand the current status of their deployment." src="/images/fleet-control-deployment-progress.webp" />

## 次のステップ

最初の艦隊のデプロイおめでとうございます! 大規模な計装を管理するための核となるワークフローを学習しました。

学習した内容を基に、[フリートの管理](/docs/new-relic-control/fleet-control/manage-fleets)に関するページをご覧ください。このガイドでは、Fleet Control のより詳細な日常的な機能について、次のような追加の詳細を説明します。

* エージェント設定を作成し、バージョンを付けます。
* 艦隊の詳細と設定を管理します。
* 最上位の**Managed Entities** \[管理対象エンティティ] タブを使用して、割り当てられたエンティティと未割り当てのエンティティの両方を含む、 Agent Controlがインストールされているすべてのインフラストラクチャを表示します。
* 特定のフリートに飛び込み、その**Agents** \[エージェント]タブで**効果的な設定を**表示し、さまざまなデプロイメントおよび計装ステータスを理解します。