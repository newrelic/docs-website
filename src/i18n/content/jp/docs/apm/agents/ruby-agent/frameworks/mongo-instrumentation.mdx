---
title: Mongoのインストルメント
tags:
  - Agents
  - Ruby agent
  - Instrumented gems
metaDescription: New Relic Ruby agent support for MongoDB
translationType: machine
---

Rubyエージェントには、 [`mongo`](https://rubygems.org/gems/mongo "新しいウィンドウで開くリンク") gemを使ったMongoDBのクエリに対するインスツルメンテーションが組み込まれています。

## コンテンツ [#qiklinks]

## 対応機種 [#supported_gems]

Rubyエージェントのgem対応状況をバージョン別にまとめています。

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        **ジェムバージョン**
      </th>

      <th>
        **コメント**
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `mongo` 1.8 and 1.9
      </td>

      <td>
        New Relic の Ruby エージェント 3.7.1 以降でサポートされます。
      </td>
    </tr>

    <tr>
      <td>
        `mongo` 2.0
      </td>

      <td>
        サポートされていない
      </td>
    </tr>

    <tr>
      <td>
        `mongo` 2.1 以上
      </td>

      <td>
        New Relic の Ruby エージェント 3.13.1 以上が必要です。
      </td>
    </tr>

    <tr>
      <td>
        その他の宝石
      </td>

      <td>
        Mongoid 2/3/4 と Moped のサポートは、現在のところサードパーティ製の gems でのみ提供されています。関連するプロジェクトへのリンクは、 [extends_newrelic_rpm](https://github.com/newrelic/extends_newrelic_rpm) を参照してください。
      </td>
    </tr>
  </tbody>
</table>

## サードパーティとextends_newrelic_rpmのインストゥルメンテーション [#third_party_instrumentation]

`extends_newrelic_rpm` および `newrelic_mongo` ジェムは、どちらも `mongo` に対する基本的なインスツルメンテーションを提供します。New Relic では、これらのジェムを使って Mongo のインスツルメンテーションを、Ruby エージェントに組み込まれた Mongo サポートと一緒に実行することは推奨していません。データベース全体の時間などの指標が二重にカウントされる可能性があるからです。

また、 `extends_newrelic_rpm` と `newrelic_mongo` の2つのジェムはどちらも別の設定を使用しており、これらのジェムを完全に削除することがあなたの環境では不可能な場合、それらを無効にするために使用することができます。これらのサードパーティージェムについては、 `disable_mongodb: false` を **newrelic.yml** で設定してください。

## 計測器の無効化 [#Disabling_instrumentation]

エージェントでMongoインスツルメンテーションを無効にするには、以下を **newrelic.yml** に追加します。

```
disable_mongo: true
```