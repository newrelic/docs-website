---
title: Mongoのインストルメント
tags:
  - Agents
  - Ruby agent
  - Instrumented gems
metaDescription: New Relic Ruby agent support for MongoDB
translationType: machine
---

Ruby エージェントには、 [`mongo`](https://rubygems.org/gems/mongo "リンクが新しいウィンドウで開きます") gem を介して作成された MongoDB クエリ用の組み込みのインストルメンテーションがあります。

## 対応機種 [#supported_gems]

Rubyエージェントのgem対応状況をバージョン別にまとめています。

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        **ジェムバージョン**
      </th>

      <th>
        **コメントコメント**
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `mongo` 1.8 と 1.9
      </td>

      <td>
        New Relic の Ruby エージェント 3.7.1 以降でサポートされます。
      </td>
    </tr>

    <tr>
      <td>
        `mongo` 2.0
      </td>

      <td>
        サポートされていない
      </td>
    </tr>

    <tr>
      <td>
        `mongo` 2.1以上
      </td>

      <td>
        New Relic の Ruby エージェント 3.13.1 以上が必要です。
      </td>
    </tr>

    <tr>
      <td>
        その他の宝石
      </td>

      <td>
        Mongoid 2/3/4 と Moped のサポートは、現在のところサードパーティ製の gems でのみ提供されています。関連するプロジェクトへのリンクは、 [extends_newrelic_rpm](https://github.com/newrelic/extends_newrelic_rpm) を参照してください。
      </td>
    </tr>
  </tbody>
</table>

## サードパーティとextends_newrelic_rpmのインストゥルメンテーション [#third_party_instrumentation]

`extends_newrelic_rpm`と`newrelic_mongo`の gem は両方とも、 `mongo`の基本的なインストルメンテーションを提供します。New Relic では、Ruby エージェントの組み込みの Mongo サポートと並行して、これらの gem を介して Mongo インストルメンテーションを実行することはお勧めしません。これにより、全体的なデータベース時間などのメトリックが二重にカウントされる場合があります。

また、 `extends_newrelic_rpm`と`newrelic_mongo`の gem はどちらも個別の設定を使用しており、環境内でこれらの gem を完全に削除できない場合は、それらを無効にするために使用できます。これらのサードパーティの gem については、 **newrelic.yml**で`disable_mongodb: false`を設定してください。

## 計測器の無効化 [#Disabling_instrumentation]

エージェントでMongoインスツルメンテーションを無効にするには、以下を **newrelic.yml** に追加します。

```
disable_mongo: true
```