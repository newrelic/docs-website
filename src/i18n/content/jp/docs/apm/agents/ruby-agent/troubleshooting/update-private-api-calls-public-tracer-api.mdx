---
title: プライベートなAPIコールをパブリックなTracer APIに更新
type: troubleshooting
tags:
  - Agents
  - Ruby agent
  - Troubleshooting
metaDescription: Update deprecated API calls for the New Relic Ruby agent.
translationType: machine
---

## 問題

New Relic Ruby agent version [6.0.0](/docs/releases/ruby) では、一般にはサポートされていない多くの API が非推奨または削除されました。削除されたメソッドのいずれかを使用している場合は、Ruby エージェント バージョン 6.0.0 以降にアップグレードする前に、推奨される代替メソッドで API を更新する必要があります。また、廃止されたメソッドを使用している場合は、6.0.0以上のバージョンのエージェントとの互換性を確保するために、できるだけ早くAPIを更新することをお勧めします。

## 解決策

以下の推奨代替品でAPIをアップデートしてください。

<CollapserGroup>
  <Collapser
    id="external-start-segment"
    title={<InlineCode>External.Start.Segment</InlineCode>}
  >
    `NewRelic::Agent::Tracer.start_external_request_segment に置き換えてください。`
  </Collapser>

  <Collapser
    id="transaction-create-segment"
    title={<InlineCode>Transaction.create_segment</InlineCode>}
  >
    `NewRelic::Agent::Tracer.start_segment に置き換えてください。`
  </Collapser>

  <Collapser
    id="transaction-start"
    title={<InlineCode>トランザクションの開始</InlineCode>}
  >
    `NewRelic::Agent::Tracer.start_transaction_or_segment に置き換えてください。`
  </Collapser>

  <Collapser
    id="transaction-start-datastore-segment"
    title={<InlineCode>Transaction.start_datastore_segment</InlineCode>}
  >
    `NewRelic::Agent::Tracer.start_datastore_segment に置き換えてください。`
  </Collapser>

  <Collapser
    id="transaction-start-segment"
    title={<InlineCode>Transaction.start_segment</InlineCode>}
  >
    `NewRelic::Agent::Tracer.start_segment に置き換えてください。`
  </Collapser>

  <Collapser
    id="transaction-wrap"
    title={<InlineCode>トランザクション.ラップ</InlineCode>}
  >
    `に置き換える NewRelic::Agent::Tracer.in_transaction`
  </Collapser>

  <Collapser
    id="transaction-state-current-transaction"
    title={<InlineCode>TransactionState.current_transaction</InlineCode>}
  >
    `NewRelic::Agent::Tracer.current_transaction に置き換えてください。`
  </Collapser>
</CollapserGroup>