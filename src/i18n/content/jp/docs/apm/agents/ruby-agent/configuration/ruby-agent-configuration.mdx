---
title: Rubyエージェントの設定
tags:
  - Agents
  - Ruby agent
  - Configuration
metaDescription: 'APM for Ruby: how to configure the Ruby agent, including editing the config file and setting environment variables.'
freshnessValidatedDate: never
translationType: machine
---

New Relic Ruby エージェントの設定は、設定ファイルでの設定、環境変数での設定、またはプログラムによるサーバーサイドでの設定があります。本ドキュメントでは、Ruby エージェントで利用可能な設定オプションについてまとめています。

構成オプションのデフォルト値が`(Dynamic)`の場合、これはRubyエージェントが実行時にデフォルトを計算することを意味します。構成設定の値は、デフォルトで別の設定の値になります。

## 構成方法と優先順位 [#Options]

Rubyエージェントを構成するための主要な（デフォルトの）方法は、 `config`サブディレクトリーの構成ファイル（ `newrelic.yml` ）を使用することです。環境変数を使用して構成値を設定するには：

1. プレフィックス`NEW_RELIC_`を設定の名前に追加します。
2. ピリオド`.`をアンダースコア`_`に置き換えます。

また、 [サーバーサイドの設定](/docs/agents/manage-apm-agents/configuration/server-side-agent-configuration) を介して、UIでいくつかの値を設定することもできます。

Rubyエージェントでは、この優先順位に従って設定を行います。

1. 環境変数
2. サーバー側の構成
3. 構成ファイル（ `newrelic.yml` ）
4. デフォルトのコンフィギュレーション設定

つまり、環境変数は他のすべての設定や情報を上書きし、サーバー側の設定は設定ファイルやデフォルトのコンフィグ設定を上書きする、といった具合です。

## コンフィグファイルオプションの表示と編集 [#Edit]

Rubyエージェントの`newrelic.yml`は標準のYAML設定ファイルです。 通常、上部に`Defaults`セクションが含まれ、その下に各アプリケーション環境のセクション ( `Development` 、 `Test` 、 `Staging` 、および`Production` ) が含まれます。

Ruby エージェントは、特定の環境変数を調べてアプリケーションの環境を導出し、 `newrelic.yml`構成ファイルのどのセクションを読み取るかを決定します。これは、本番環境で`log_level`構成設定に`info`を使用し、開発環境でより詳細な`log_level`構成設定 ( `debug`など) が必要な場合に役立ちます。

`newrelic.yml`設定ファイルの例を次に示します。

```yaml
common: &default_settings
  license_key: 'YOUR_LICENSE_KEY'
  app_name: 'My Application Name'
production:
  <<: *default_settings
  log_level: info
development:
  <<: *default_settings
  log_level: debug
```

Ruby エージェントは、アプリケーション環境を見つけるために、次の環境変数をこの順序で探します。

1. `NEW_RELIC_ENV`
2. `RUBY_ENV`
3. `RAILS_ENV`
4. `APP_ENV`
5. `RACK_ENV`

Ruby エージェントがこれらの環境変数の値を検出しない場合は、アプリケーション環境をデフォルトで`development`に設定し、 `newrelic.yml`構成ファイルの`development`セクションから読み取ります。

Rails アプリで Ruby エージェントを実行する場合、エージェントは最初に`NEW_RELIC_ENV`環境変数を検索して、アプリケーション環境と使用する`newrelic.yml`のセクションを見つけます。`NEW_RELIC_ENV`が存在しない場合、エージェントは Rails 環境 ( `RAILS_ENV` ) を使用します。

設定ファイルを編集する際には、次のことを確認してください。

* インデントはスペース2つ分のみ。
* **`error_collector`**などのセクションで、関連する場合のみインデントします。

正しくインデントしないと、エージェントは起動時に`Unable to parse configuration file`エラーをスローする可能性があります。

使用可能なRubyエージェント構成オプションの最新のリストを表示するには、 `rake newrelic:config:docs`コマンドを使用します。このドキュメントでは、最も一般的なオプションについて説明します。

## 設定ファイルの更新 [#Updates]

このドキュメントは、Rubyエージェントの最新リリースに適用されます。以前のバージョンの詳細については、 `newrelic.yml`自体のコメントを参照してください。

新しいリリース後に`newrelic.yml`ファイルを更新するには、エージェントgemのベースディレクトリにあるテンプレートを使用します。新しいgemバージョンに更新するときは、[インストールディレクトリ](/docs/agents/manage-apm-agents/troubleshooting/find-agent-root-directory#ruby-agent)の`config/newrelic.yml`と`newrelic.yml`を調べるか差分をとって、新しい構成オプションを利用してください。

<Callout variant="important">
  gemを更新しても、 `config/newrelic.yml`は自動的に更新されません。
</Callout>

## 一般 [#general]

これらの設定は、エージェントの設定に利用できます。一部の設定は、New Relic のサブスクリプションレベルによって異なります。

<CollapserGroup>
  <Collapser id="agent_enabled" title="agent_enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_AGENT_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、Rubyエージェントの実行を許可します。
  </Collapser>

  <Collapser id="app_name" title="app_name">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `(Dynamic)`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_APP_NAME`
          </td>
        </tr>
      </tbody>
    </table>

    NewRelicUIでデータを集約するために使用する[アプリケーション名](/docs/apm/new-relic-apm/installation-configuration/name-your-application)を指定します。[同時に複数のアプリに](/docs/apm/new-relic-apm/installation-configuration/using-multiple-names-app)データを報告するには、名前のリストをセミコロン`;`で区切って指定します。たとえば、 `MyApp`または`MyStagingApp;Instance1` 。
  </Collapser>

  <Collapser id="license_key" title="ライセンスキー">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `""`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_LICENSE_KEY`
          </td>
        </tr>
      </tbody>
    </table>

    あなたのNew Relic <InlinePopover type="licenseKey" />。
  </Collapser>

  <Collapser id="log_level" title="log_level">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `"info"`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_LOG_LEVEL`
          </td>
        </tr>
      </tbody>
    </table>

    ログメッセージの詳細レベルを設定します。冗長性を高める場合に考えられるログレベルは、 `error` 、 `warn` 、 `info` 、または`debug`です。
  </Collapser>

  <Collapser id="active_support_custom_events_names" title="active_support_custom_events_names">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            配列
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_ACTIVE_SUPPORT_CUSTOM_EVENTS_NAMES`
          </td>
        </tr>
      </tbody>
    </table>

    サブスクライブして計測する ActiveSupport カスタム イベント名の配列。例えば、

    * one.custom.event
    * 別のイベント
    * a.second.event
  </Collapser>

  <Collapser id="api_key" title="api_key">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `""`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_API_KEY`
          </td>
        </tr>
      </tbody>
    </table>

    あなたのNew Relic <InlinePopover type="userKey" />。 New Relic REST API v2 を使用して`newrelic deployments`コマンドでデプロイメントを記録する場合に必要です。
  </Collapser>

  <Collapser id="backport_fast_active_record_connection_lookup" title="backport_fast_active_record_connection_lookup">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_BACKPORT_FAST_ACTIVE_RECORD_CONNECTION_LOOKUP`
          </td>
        </tr>
      </tbody>
    </table>

    Rails 6で導入されたActiveRecordの接続検索の高速化をバックポートし、ActiveRecordをインストルメントする際のエージェントのパフォーマンスを向上させます。この設定は、ActiveRecordにパッチを当てる他のgemと互換性がないかもしれないことに注意してください。
  </Collapser>

  <Collapser id="ca_bundle_path" title="ca_bundle_path">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `nil`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_CA_BUNDLE_PATH`
          </td>
        </tr>
      </tbody>
    </table>

    ローカル CA バンドルへのパスを手動でオーバーライドします。この CA バンドルは、 New Relicのデータ収集サービスによって提示された SSL 証明書を検証します。
  </Collapser>

  <Collapser id="capture_memcache_keys" title="capture_memcache_keys">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_CAPTURE_MEMCACHE_KEYS`
          </td>
        </tr>
      </tbody>
    </table>

    トランザクショントレースからのmemcacheキーのキャプチャを有効または無効にします。
  </Collapser>

  <Collapser id="capture_params" title="capture_params">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_CAPTURE_PARAMS`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはHTTPリクエストパラメータをキャプチャし、それらをトランザクショントレース、トレースされたエラー、および[`TransactionError`イベント](/attribute-dictionary?attribute_name=&events_tids%5B%5D=8241)に添付します。

    <Callout variant="caution">
      `capture_params`設定を使用する場合、Ruby エージェントは秘密情報をフィルタリングしようとしません。`Recommendation:`リクエストから機密情報をフィルターするには、代わりに[`attributes.include`設定](/docs/agents/ruby-agent/attributes/enable-disable-attributes-ruby)を使用します。 詳細については、 <a href="/docs/agents/ruby-agent/attributes/ruby-attribute-examples#ex_req_params">Ruby 属性の例を</a>参照してください。
    </Callout>
  </Collapser>

  <Collapser id="clear_transaction_state_after_fork" title="clear_transaction_state_after_fork">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_CLEAR_TRANSACTION_STATE_AFTER_FORK`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントは`Agent.drop_buffered_data`の`Tracer::State`をクリアします。
  </Collapser>

  <Collapser id="config_path" title="config_path">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `(Dynamic)`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_CONFIG_PATH`
          </td>
        </tr>
      </tbody>
    </table>

    `newrelic.yml`へのパス。定義されていない場合、エージェントは次のディレクトリを (順番に) チェックします。

    * `config/newrelic.yml`
    * `newrelic.yml`
    * `$HOME/.newrelic/newrelic.yml`
    * `$HOME/newrelic.yml`
  </Collapser>

  <Collapser id="exclude_newrelic_header" title="exclude_newrelic_header">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_EXCLUDE_NEWRELIC_HEADER`
          </td>
        </tr>
      </tbody>
    </table>

    newrelicのdistributed tracingヘッダを送信リクエストで抑制することを許可します。
  </Collapser>

  <Collapser id="force_install_exit_handler" title="force_install_exit_handler">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_FORCE_INSTALL_EXIT_HANDLER`
          </td>
        </tr>
      </tbody>
    </table>

    シャットダウン前にキャッシュされたすべてのデータをコレクターに送信する終了ハンドラーが強制的にインストールされます。これは、通常は検出されないはずのシナリオを検出した場合にも当てはまります。このオプションの既知の使用例は、Sinatra が別のフレームワーク内の埋め込みサービスとして実行される場合です。エージェントは Sinatra アプリを検出し、結果として`at_exit`ハンドラーをスキップします。Sinatra は、通常、アプリケーション全体を`at_exit`ブロック内で実行しますが、そのような状況でエージェントの`at_exit`ハンドラーもインストールされていると、誤動作が発生します。注意: この設定と同時に`send_data_on_exit`も`true`に設定する必要があります。
  </Collapser>

  <Collapser id="high_security" title="high_security">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_HIGH_SECURITY`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、[高セキュリティモード](/docs/accounts-partnerships/accounts/security/high-security)を有効にします。この設定を有効にする前に、高セキュリティモードの影響を理解してください。
  </Collapser>

  <Collapser id="labels" title="ラベル">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `""`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_LABELS`
          </td>
        </tr>
      </tbody>
    </table>

    このエージェントから送信されるデータに適用される[ラベル名](/docs/data-analysis/user-interface-functions/labels-categories-organize-your-apps-servers)と値の辞書。コロンで区切られた`:`ペアのセミコロンで区切られた`;`文字列として表現することもできます。たとえば、 `Server:One;Data Center:Primary` 。
  </Collapser>

  <Collapser id="log_file_name" title="log_file_name">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `"newrelic_agent.log"`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_LOG_FILE_NAME`
          </td>
        </tr>
      </tbody>
    </table>

    ログファイルの名前を定義します。
  </Collapser>

  <Collapser id="log_file_path" title="log_file_path">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `"log/"`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_LOG_FILE_PATH`
          </td>
        </tr>
      </tbody>
    </table>

    エージェント・ログ・ファイルのパスを定義します（ファイル名を除く）。
  </Collapser>

  <Collapser id="marshaller" title="マーシャラー">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `"json"`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_MARSHALLER`
          </td>
        </tr>
      </tbody>
    </table>

    NewRelic[コレクター](/docs/apm/new-relic-apm/getting-started/glossary#collector)にデータを送信するためのマーシャラーを指定します。現在、この設定の有効な値は`json`のみです。
  </Collapser>

  <Collapser id="monitor_mode" title="monitor_mode">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_MONITOR_MODE`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはアプリに関するデータをNewRelic[コレクター](/docs/using-new-relic/welcome-new-relic/get-started/glossary/#collector)に送信します。
  </Collapser>

  <Collapser id="prepend_active_record_instrumentation" title="prepend_active_record_instrumentation">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_PREPEND_ACTIVE_RECORD_INSTRUMENTATION`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、ActiveRecordインストルメンテーションに`alias_method`ではなく`Module#prepend`を使用します。
  </Collapser>

  <Collapser id="proxy_host" title="proxy_host">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `nil`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_PROXY_HOST`
          </td>
        </tr>
      </tbody>
    </table>

    プロキシサーバーを介して New Relic [コレクター](/docs/using-new-relic/welcome-new-relic/get-started/glossary/#collector) と通信するためのホストを定義します。
  </Collapser>

  <Collapser id="proxy_pass" title="proxy_pass">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `nil`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_PROXY_PASS`
          </td>
        </tr>
      </tbody>
    </table>

    プロキシサーバーを経由して New Relic [コレクター](/docs/using-new-relic/welcome-new-relic/get-started/glossary/#collector) と通信するためのパスワードを定義します。
  </Collapser>

  <Collapser id="proxy_port" title="プロキシポート">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            整数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `8080`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_PROXY_PORT`
          </td>
        </tr>
      </tbody>
    </table>

    プロキシサーバーを経由して New Relic [コレクター](/docs/using-new-relic/welcome-new-relic/get-started/glossary/#collector) と通信するためのポートを定義します。
  </Collapser>

  <Collapser id="proxy_user" title="proxy_user">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `nil`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_PROXY_USER`
          </td>
        </tr>
      </tbody>
    </table>

    プロキシサーバーを介して New Relic [コレクター](/docs/using-new-relic/welcome-new-relic/get-started/glossary/#collector) と通信するためのユーザーを定義します。
  </Collapser>

  <Collapser id="security_policies_token" title="security_policies_token">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `""`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SECURITY_POLICIES_TOKEN`
          </td>
        </tr>
      </tbody>
    </table>

    言語エージェントセキュリティポリシーの設定を適用します。
  </Collapser>

  <Collapser id="send_data_on_exit" title="send_data_on_exit">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SEND_DATA_ON_EXIT`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、シャットダウンする前にNewRelic[コレクター](/docs/using-new-relic/welcome-new-relic/get-started/glossary/#collector)にデータを送信するExitハンドラーを有効にします。
  </Collapser>

  <Collapser id="sync_startup" title="sync_startup">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SYNC_STARTUP`
          </td>
        </tr>
      </tbody>
    </table>

    `true`に設定すると、アプリケーションの起動時にNewRelic[コレクター](/docs/using-new-relic/welcome-new-relic/get-started/glossary/#collector)への同期接続を強制します。非常に短期間のプロセスの場合、これはNewRelicエージェントがレポートする時間を確保するのに役立ちます。
  </Collapser>

  <Collapser id="thread_local_tracer_state" title="スレッドローカルトレーサー状態">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_THREAD_LOCAL_TRACER_STATE`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、トレーサーの状態ストレージはスレッドローカル、それ以外の場合はファイバーローカルです。
  </Collapser>

  <Collapser id="timeout" title="タイムアウト">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            整数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `120`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_TIMEOUT`
          </td>
        </tr>
      </tbody>
    </table>

    エージェントがコレクターへの接続を試みる際の最大秒数を定義します。
  </Collapser>

  <Collapser id="allow_all_headers" title="allow_all_headers">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_ALLOW_ALL_HEADERS`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、すべての宛先のすべての HTTP リクエスト ヘッダーのキャプチャが有効になります。
  </Collapser>

  <Collapser id="automatic_custom_instrumentation_method_list" title="automatic_custom_instrumentation_method_list">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            配列
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_AUTOMATIC_CUSTOM_INSTRUMENTATION_METHOD_LIST`
          </td>
        </tr>
      </tbody>
    </table>

    エージェントが自動的にカスタム インストゥルメンテーションを追加できるRubyメソッドを表す、 `CLASS#METHOD` (インスタンス メソッドの場合) および/または`CLASS.METHOD` (クラス メソッドの場合) の文字列の配列。 これには、メソッドを定義するソースコードを変更する必要はありません。

    モジュールまたはクラスの名前空間を含む完全修飾クラス名 ( `::`区切り文字を使用) を使用します。

    以下は、`Image` クラスの `render_png` インスタンス メソッドと、`User` クラスの `notify` クラス メソッドを定義するRubyソースコードです。両方とも `MyCompany` モジュール ネームスペース内にあります。

    ```rb
    	module MyCompany
    		class Image
    			def render_png
    				# code to render a PNG
    			end
    		end

    		class User
    			def self.notify
    				# code to notify users
    			end
    		end
    	end
    ```

    そのソースコードを考慮すると、 `newrelic.yml`構成ファイルは次のように両方のメソッドのインストゥルメンテーションをリクエストする可能性があります。

    ```yaml
    	automatic_custom_instrumentation_method_list:
    		- MyCompany::Image#render_png
    		- MyCompany::User.notify
    ```

    この設定例では、YAML 配列構文を使用して両方のメソッドを指定しています。 あるいは、カンマで区切られた文字列を使用することもできます。

    ```yaml
    	automatic_custom_instrumentation_method_list: 'MyCompany::Image#render_png, MyCompany::User.notify'
    ```

    リスト内のカンマの周囲の空白はオプションです。 `NEW_RELIC_AUTOMATIC_CUSTOM_INSTRUMENTATION_METHOD_LIST`環境変数を介してメソッドのリストを使用してエージェントを構成する場合は、次のコンマ区切りの文字列形式を使用します。

    ```sh
    	export NEW_RELIC_AUTOMATIC_CUSTOM_INSTRUMENTATION_METHOD_LIST='MyCompany::Image#render_png, MyCompany::User.notify'
    ```
  </Collapser>

  <Collapser id="defer_rails_initialization" title="defer_rails_initialization">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_DEFER_RAILS_INITIALIZATION`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントが Ruby on Rails を使用するアプリケーションにある場合、エージェントは `config/initializers` の実行後に開始されます。

    <Callout variant="caution">
      このオプションは、環境変数によってのみ設定できます。
    </Callout>
  </Collapser>
</CollapserGroup>

## トランザクショントレーサー [#transaction-tracer]

[トランザクショントレース](/docs/apm/traces/transaction-traces/transaction-traces) 機能は、選択したトランザクションから、呼び出しシーケンスの概要、費やした時間の内訳、SQL クエリのリストとそのクエリプラン（mysql および postgresql の場合）などの詳細な情報を収集します。利用可能な機能は、お客様の New Relic のサブスクリプションレベルによって異なります。

<CollapserGroup>
  <Collapser id="transaction_tracer-enabled" title="transaction_tracer.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_TRACER_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、[トランザクショントレース](/docs/apm/traces/transaction-traces/transaction-traces)の収集を有効にします。
  </Collapser>

  <Collapser id="transaction_tracer-explain_enabled" title="transaction_tracer.explain_enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_TRACER_EXPLAIN_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、段階レースでの Explain プランの収集が有効になります。 [`slow_sql.explain_enabled`](#slow_sql-explain_enabled)が別途設定されていない場合、この設定は低速 SQL トレースの説明プランにも適用されます。
  </Collapser>

  <Collapser id="transaction_tracer-explain_threshold" title="transaction_tracer.explain_threshold">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            浮く
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `0.5`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_TRACER_EXPLAIN_THRESHOLD`
          </td>
        </tr>
      </tbody>
    </table>

    エージェントが説明プランを収集するしきい値（秒単位）。 [`explain_enabled`](#transaction_tracer.explain_enabled)がtrueの場合にのみ関連します。
  </Collapser>

  <Collapser id="transaction_tracer-limit_segments" title="transaction_tracer.limit_segments">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            整数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `4000`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_TRACER_LIMIT_SEGMENTS`
          </td>
        </tr>
      </tbody>
    </table>

    1つのトランザクション・トレースに記録するトランザクション・トレース・ノードの最大数。
  </Collapser>

  <Collapser id="transaction_tracer-record_redis_arguments" title="transaction_tracer.record_redis_arguments">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_TRACER_RECORD_REDIS_ARGUMENTS`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはRedisコマンド引数をトランザクショントレースに記録します。
  </Collapser>

  <Collapser id="transaction_tracer-record_sql" title="transaction_tracer.record_sql">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `"obfuscated"`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_TRACER_RECORD_SQL`
          </td>
        </tr>
      </tbody>
    </table>

    SQL の難読化レベルは、段階トレース ノードで報告されます。 デフォルトでは、これは`obfuscated`に設定されており、数値リテラルと文字列リテラルが削除されます。

    * エージェントにクエリ情報をキャプチャさせたくない場合は、これを`none`に設定します。
    * エージェントがすべてのクエリ情報を元の形式でキャプチャするようにする場合は、これを`raw`に設定します。
    * [高セキュリティモード](/docs/agents/manage-apm-agents/configuration/high-security-mode)を有効にすると、これは自動的に`obfuscated`に設定されます。
  </Collapser>

  <Collapser id="transaction_tracer-stack_trace_threshold" title="transaction_tracer.stack_trace_threshold">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            浮く
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `0.5`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_TRACER_STACK_TRACE_THRESHOLD`
          </td>
        </tr>
      </tbody>
    </table>

    閾値を秒単位で指定します。エージェントは、スタックトレースの継続時間がこの閾値を超えた場合、トランザクショントレースノードにスタックトレースを含めます。
  </Collapser>

  <Collapser id="transaction_tracer-transaction_threshold" title="transaction_tracer.transaction_threshold">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            浮く
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `(Dynamic)`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_TRACER_TRANSACTION_THRESHOLD`
          </td>
        </tr>
      </tbody>
    </table>

    しきい値を秒単位で指定します。このしきい値よりも長い期間のトランザクションは、トランザクショントレースの対象となります。 float値または文字列`apdex_f`を指定します。
  </Collapser>
</CollapserGroup>

## エラーコレクター [#error-collector]

エージェントは、デフォルトでは、すべてのアンキャッチャー例外を収集して報告します。これらの設定オプションにより、エラー収集をカスタマイズすることができます。

無視されたエラーと予想されるエラーの[詳細については、APM のエラー分析に関するこのページを参照してください](/docs/agents/manage-apm-agents/agent-data/manage-errors-apm-collect-ignore-or-mark-expected/)。`NewRelic::Agent.notice_error` Ruby メソッドを介して予想されるエラーを設定[するには、Ruby エージェント API を参照してください](/docs/agents/ruby-agent/api-guides/sending-handled-errors-new-relic/)。

<CollapserGroup>
  <Collapser id="error_collector-capture_events" title="error_collector.capture_events">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_ERROR_COLLECTOR_CAPTURE_EVENTS`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントは [`TransactionError`イベント](/docs/insights/new-relic-insights/decorating-events/error-event-default-attributes-insights)を収集します。
  </Collapser>

  <Collapser id="error_collector-enabled" title="error_collector.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_ERROR_COLLECTOR_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはトレースされたエラーとエラーカウントメトリックをキャプチャします。
  </Collapser>

  <Collapser id="error_collector-expected_classes" title="error_collector.expected_classes">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            配列
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `None`
          </td>
        </tr>
      </tbody>
    </table>

    エージェントが期待通りに扱うべきエラークラスのリストです。

    <Callout variant="caution">
      このオプションは、環境変数で設定することはできません。
    </Callout>
  </Collapser>

  <Collapser id="error_collector-expected_messages" title="error_collector.expected_messages">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ハッシュ
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `{}`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `None`
          </td>
        </tr>
      </tbody>
    </table>

    メッセージのリストへのエラー・クラスのマップです。ここで指定されたクラスのエラーが発生したとき、そのエラーメッセージにここで指定された文字列のいずれかが含まれていれば、そのエラーは期待どおりに処理されます。

    <Callout variant="caution">
      このオプションは、環境変数で設定することはできません。
    </Callout>
  </Collapser>

  <Collapser id="error_collector-expected_status_codes" title="error_collector.expected_status_codes">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `""`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_ERROR_COLLECTOR_EXPECTED_STATUS_CODES`
          </td>
        </tr>
      </tbody>
    </table>

    コンマで区切られたステータスコードのリスト（場合によっては範囲を含む）。これらのステータスコードに関連したエラー（該当する場合）は、期待通りに処理されます。
  </Collapser>

  <Collapser id="error_collector-ignore_classes" title="error_collector.ignore_classes">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            配列
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `["ActionController::RoutingError", "Sinatra::NotFound"]`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `None`
          </td>
        </tr>
      </tbody>
    </table>

    エージェントが無視すべきエラークラスのリストです。

    <Callout variant="caution">
      このオプションは、環境変数で設定することはできません。
    </Callout>
  </Collapser>

  <Collapser id="error_collector-ignore_messages" title="error_collector.ignore_messages">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ハッシュ
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `{ThreadError: ["queue empty"]}`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `None`
          </td>
        </tr>
      </tbody>
    </table>

    メッセージのリストへのエラー・クラスのマップです。ここで指定されたクラスのエラーが発生したとき、そのエラーメッセージにここで指定された文字列のいずれかが含まれていれば、そのエラーは無視されます。

    <Callout variant="caution">
      このオプションは、環境変数で設定することはできません。
    </Callout>
  </Collapser>

  <Collapser id="error_collector-ignore_status_codes" title="error_collector.ignore_status_codes">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `""`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_ERROR_COLLECTOR_IGNORE_STATUS_CODES`
          </td>
        </tr>
      </tbody>
    </table>

    コンマで区切られたステータスコードのリスト（場合によっては範囲を含む）。これらのステータスコードに関連するエラーは、該当する場合は無視されます。
  </Collapser>

  <Collapser id="error_collector-max_backtrace_frames" title="エラーコレクタ.max_backtrace_frames">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            整数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `50`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_ERROR_COLLECTOR_MAX_BACKTRACE_FRAMES`
          </td>
        </tr>
      </tbody>
    </table>

    エラー バックトレース内のフレームの最大数を定義します。 この量を超えるバックトレースは途中で切り捨てられ、スタックトレースの先頭と末尾は保持されます。
  </Collapser>

  <Collapser id="error_collector-max_event_samples_stored" title="エラーコレクタ.max_event_samples_stored">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            整数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `100`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_ERROR_COLLECTOR_MAX_EVENT_SAMPLES_STORED`
          </td>
        </tr>
      </tbody>
    </table>

    収集サイクルごとに報告される [`TransactionError`イベント](/docs/insights/new-relic-insights/decorating-events/error-event-default-attributes-insights) の最大数を定義します。
  </Collapser>
</CollapserGroup>

## ブラウザの監視 [#browser-monitoring]

<InlinePopover type="browser" />[ページ読み込みタイミング](/docs/browser/new-relic-browser/page-load-timing/page-load-timing-process)機能 (リアルユーザー監視またはRUMとも呼ばれます) は、実際のユーザーが Web サイトで体験しているパフォーマンスをインサイトに提供します。 これは、各ページのヘッダーとフッターに少量の JavaScript コードを挿入することにより、ユーザーのブラウザーが Web ページをダウンロードしてレンダリングするのにかかる時間を測定することで実現されます。

<CollapserGroup>
  <Collapser id="browser_monitoring-auto_instrument" title="browser_monitoring.auto_instrument">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_BROWSER_MONITORING_AUTO_INSTRUMENT`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、ページの読み込みタイミングのためにJavaScriptヘッダーの[自動挿入](/docs/browser/new-relic-browser/installation-configuration/adding-apps-new-relic-browser#select-apm-app)を有効にします（実際のユーザー監視またはRUMと呼ばれることもあります）。
  </Collapser>

  <Collapser id="browser_monitoring-content_security_policy_nonce" title="browser_monitoring.content_security_policy_nonce">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_BROWSER_MONITORING_CONTENT_SECURITY_POLICY_NONCE`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、ブラウザ監視ブラウザで[Content Security Policy Nonce](https://content-security-policy.com/nonce/)の自動インジェクションを有効にします。 現時点では、自動インジェクションは Rails 5.2 以降でのみ機能します。
  </Collapser>
</CollapserGroup>

## トランザクション・イベント [#transaction-events]

<CollapserGroup>
  <Collapser id="transaction_events-enabled" title="transaction_events.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_EVENTS_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、トランザクションイベントのサンプリングを有効にします。
  </Collapser>

  <Collapser id="transaction_events-max_samples_stored" title="transaction_events.max_samples_stored">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            整数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `1200`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_EVENTS_MAX_SAMPLES_STORED`
          </td>
        </tr>
      </tbody>
    </table>

    1つのハーベストから報告されるトランザクションイベントの最大数を定義する。
  </Collapser>
</CollapserGroup>

## アプリケーションログ [#application-logging]

Ruby エージェントは[、コンテキスト内の APM ログを](/docs/apm/new-relic-apm/getting-started/get-started-logs-context)サポートします。Ruby エージェントのログを構成するためのヒントについて[は、コンテキストで Ruby ログを構成する](/docs/logs/logs-context/configure-logs-context-ruby)を参照してください。

使用可能なロギング関連の構成オプションには、次のものがあります。

<CollapserGroup>
  <Collapser id="application_logging-enabled" title="application_logging.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_APPLICATION_LOGGING_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、ログの装飾とログイベントおよびメトリックの収集を有効にします。
  </Collapser>

  <Collapser id="application_logging-forwarding-enabled" title="application_logging.forwarding.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_APPLICATION_LOGGING_FORWARDING_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはアプリケーションによって発行されたログレコードをキャプチャします。
  </Collapser>

  <Collapser id="application_logging-forwarding-log_level" title="application_logging.forwarding.log_level">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `"debug"`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_APPLICATION_LOGGING_FORWARDING_LOG_LEVEL`
          </td>
        </tr>
      </tbody>
    </table>

    ログイベントを New Relic に転送する必要がある最小レベルを設定します。

    これは[、Ruby の`Logger::Severity`定数](https://github.com/ruby/logger/blob/113b82a06b3076b93a71cd467e1605b23afb3088/lib/logger/severity.rb)の整数値に基づいています。

    その目的は、構成に指定されたレベルのログと、より高い重大度レベルのログを転送することです。

    たとえば、この値を「debug」に設定すると、すべてのログイベントが New Relic に転送されます。この値を「error」に設定すると、「error」、「fatal」、および「unknown」レベルのログ イベントのみが転送されます。

    有効な値 (最小値から最大値の順):

    * &quot;デバッグ&quot;
    * &quot;info&quot;
    * 「警告する」
    * &quot;エラー&quot;
    * &quot;致命的&quot;
    * &quot;知らない&quot;
  </Collapser>

  <Collapser id="application_logging-forwarding-custom_attributes" title="application_logging.forwarding.custom_attributes">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ハッシュ
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `{}`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_APPLICATION_LOGGING_FORWARDING_CUSTOM_ATTRIBUTES`
          </td>
        </tr>
      </tbody>
    </table>

    New Relic に転送されるすべてのログ イベントにカスタム属性として追加するキーと値のペアを含むハッシュ。環境変数を使用して送信する場合、値は「key1=value1,key2=value2」のような形式にする必要があります。
  </Collapser>

  <Collapser id="application_logging-forwarding-labels-enabled" title="application_logging.forwarding.labels.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_APPLICATION_LOGGING_FORWARDING_LABELS_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `true`場合、エージェントはログ レコードに[ラベル](https://docs.newrelic.com/docs/apm/agents/ruby-agent/configuration/ruby-agent-configuration/#labels)を添付します。
  </Collapser>

  <Collapser id="application_logging-forwarding-labels-exclude" title="application_logging.forwarding.labels.exclude">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            配列
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_APPLICATION_LOGGING_FORWARDING_LABELS_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    ログ レコードから除外するラベルを含む、大文字と小文字を区別しない配列またはコンマ区切りの文字列。
  </Collapser>

  <Collapser id="application_logging-forwarding-max_samples_stored" title="application_logging.forwarding.max_samples_stored">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            整数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `10000`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_APPLICATION_LOGGING_FORWARDING_MAX_SAMPLES_STORED`
          </td>
        </tr>
      </tbody>
    </table>

    一度にメモリにバッファリングするログレコードの最大数を定義します。
  </Collapser>

  <Collapser id="application_logging-local_decorating-enabled" title="application_logging.local_decorating.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_APPLICATION_LOGGING_LOCAL_DECORATING_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはログをメタデータで装飾して、エンティティ、ホスト、トレース、およびスパンにリンクします。
  </Collapser>

  <Collapser id="application_logging-metrics-enabled" title="application_logging.metrics.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_APPLICATION_LOGGING_METRICS_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはアプリケーションのロギングに関連するメトリックをキャプチャします。
  </Collapser>
</CollapserGroup>

## AIモニタリング [#ai-monitoring]

このセクションには、AIモニタリングを設定するためのRubyエージェント設定が含まれています。

<Callout variant="important">トレースとフィードバックデータを取得するには、ディストリビューティッド（分散）トレーシングを有効にする必要があります。 Ruby エージェント 8.0.0 以降ではデフォルトでオンになっています。</Callout>

<CollapserGroup>
  <Collapser id="ai_monitoring-enabled" title="ai_monitoring.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_AI_MONITORING_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `false`の場合、すべての LLM インストゥルメンテーション (現時点では OpenAI のみ) が無効になり、メトリック、イベント、スパンは送信されません。 `high_security`モードが有効な場合、AI モニタリングは自動的に無効になります。
  </Collapser>

  <Collapser id="ai_monitoring-record_content-enabled" title="ai_monitoring.record_content.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_AI_MONITORING_RECORD_CONTENT_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `false`の場合、LLM インストゥルメンテーション (現時点では OpenAI のみ) は、特定の LLM イベントの入出力コンテンツをキャプチャしません。

    除外される属性には次のものが含まれます。

    * `content` LlmChatCompletionMessage イベントから
    * `input` LlmEmbedding イベントから

    これは、LLM との間で送受信される機密データの記録を防ぐためのオプションのセキュリティ設定です。
  </Collapser>
</CollapserGroup>

## 属性 [#attributes]

[アトリビュート](/docs/features/agent-attributes) は、イベントやトランザクションのプロパティを決定する情報を含むキーとバリューのペアです。これらのキー・バリュー・ペアは、APMのトランザクション・トレース、APMのトレースされたエラー、ダッシュボードのトランザクション・イベント、ダッシュボードのページ・ビューで見ることができます。どの属性がこれらの各送信先に送信されるかを正確にカスタマイズできます。

<CollapserGroup>
  <Collapser id="attributes-enabled" title="attributes.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、すべての宛先の属性のキャプチャを有効にします。
  </Collapser>

  <Collapser id="attributes-exclude" title="attributes.exclude">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            配列
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_ATTRIBUTES_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    すべての宛先から除外する属性のプレフィックス。最後にワイルドカードとして`*`を許可します。
  </Collapser>

  <Collapser id="attributes-include" title="attributes.include">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            配列
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_ATTRIBUTES_INCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    すべての宛先に含める属性のプレフィックス。最後にワイルドカードとして`*`を許可します。
  </Collapser>

  <Collapser id="browser_monitoring-attributes-enabled" title="browser_monitoring.attributes.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_BROWSER_MONITORING_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはブラウザの監視から属性を取得します。
  </Collapser>

  <Collapser id="browser_monitoring-attributes-exclude" title="browser_monitoring.attributes.exclude">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            配列
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_BROWSER_MONITORING_ATTRIBUTES_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    ブラウザの監視から除外する属性のプレフィックス。最後にワイルドカードとして`*`を許可します。
  </Collapser>

  <Collapser id="browser_monitoring-attributes-include" title="browser_monitoring.attributes.include">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            配列
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_BROWSER_MONITORING_ATTRIBUTES_INCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    ブラウザの監視に含める属性のプレフィックス。最後にワイルドカードとして`*`を許可します。
  </Collapser>

  <Collapser id="error_collector-attributes-enabled" title="error_collector.attributes.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_ERROR_COLLECTOR_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはエラー収集から属性をキャプチャします。
  </Collapser>

  <Collapser id="error_collector-attributes-exclude" title="error_collector.attributes.exclude">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            配列
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_ERROR_COLLECTOR_ATTRIBUTES_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    エラー収集から除外する属性のプレフィックス。最後にワイルドカードとして`*`を許可します。
  </Collapser>

  <Collapser id="error_collector-attributes-include" title="error_collector.attributes.include">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            配列
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_ERROR_COLLECTOR_ATTRIBUTES_INCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    エラー収集に含める属性のプレフィックス。最後にワイルドカードとして`*`を許可します。
  </Collapser>

  <Collapser id="span_events-attributes-enabled" title="span_events.attributes.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SPAN_EVENTS_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはスパンイベントの属性をキャプチャします。
  </Collapser>

  <Collapser id="span_events-attributes-exclude" title="span_events.attributes.exclude">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            配列
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SPAN_EVENTS_ATTRIBUTES_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    スパンイベントから除外する属性のプレフィックス。最後にワイルドカードとして`*`を許可します。
  </Collapser>

  <Collapser id="span_events-attributes-include" title="span_events.attributes.include">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            配列
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SPAN_EVENTS_ATTRIBUTES_INCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    スパンイベントに含める属性のプレフィックス。最後にワイルドカードとして`*`を許可します。
  </Collapser>

  <Collapser id="transaction_events-attributes-enabled" title="transaction_events.attributes.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_EVENTS_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはトランザクションイベントから属性をキャプチャします。
  </Collapser>

  <Collapser id="transaction_events-attributes-exclude" title="transaction_events.attributes.exclude">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            配列
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_EVENTS_ATTRIBUTES_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    トランザクションイベントから除外する属性のプレフィックス。最後にワイルドカードとして`*`を許可します。
  </Collapser>

  <Collapser id="transaction_events-attributes-include" title="transaction_events.attributes.include">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            配列
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_EVENTS_ATTRIBUTES_INCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    トランザクションイベントに含める属性のプレフィックス。最後にワイルドカードとして`*`を許可します。
  </Collapser>

  <Collapser id="transaction_segments-attributes-enabled" title="transaction_segments.attributes.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_SEGMENTS_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはトランザクションセグメントの属性をキャプチャします。
  </Collapser>

  <Collapser id="transaction_segments-attributes-exclude" title="transaction_segments.attributes.exclude">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            配列
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_SEGMENTS_ATTRIBUTES_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    トランザクションセグメントから除外する属性のプレフィックス。最後にワイルドカードとして`*`を許可します。
  </Collapser>

  <Collapser id="transaction_segments-attributes-include" title="transaction_segments.attributes.include">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            配列
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_SEGMENTS_ATTRIBUTES_INCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    トランザクションセグメントに含める属性のプレフィックス。最後にワイルドカードとして`*`を許可します。
  </Collapser>

  <Collapser id="transaction_tracer-attributes-enabled" title="transaction_tracer.attributes.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_TRACER_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはトランザクショントレースから属性をキャプチャします。
  </Collapser>

  <Collapser id="transaction_tracer-attributes-exclude" title="transaction_tracer.attributes.exclude">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            配列
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_TRACER_ATTRIBUTES_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    トランザクショントレースから除外する属性のプレフィックス。最後にワイルドカードとして`*`を許可します。
  </Collapser>

  <Collapser id="transaction_tracer-attributes-include" title="transaction_tracer.attributes.include">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            配列
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_TRACER_ATTRIBUTES_INCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    トランザクショントレースに含める属性のプレフィックス。最後にワイルドカードとして`*`を許可します。
  </Collapser>
</CollapserGroup>

## 監査ログ [#audit-log]

<CollapserGroup>
  <Collapser id="audit_log-enabled" title="audit_log.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_AUDIT_LOG_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、NewRelic[コレクター](/docs/using-new-relic/welcome-new-relic/get-started/glossary/#collector)との通信をログに記録する監査ログを有効にします。
  </Collapser>

  <Collapser id="audit_log-endpoints" title="audit_log.endpoints">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            配列
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `[".*"]`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_AUDIT_LOG_ENDPOINTS`
          </td>
        </tr>
      </tbody>
    </table>

    監査ログに含めることが許可されているエンドポイントのリスト。
  </Collapser>

  <Collapser id="audit_log-path" title="監査ログのパス">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `log/newrelic_audit.log`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_AUDIT_LOG_PATH`
          </td>
        </tr>
      </tbody>
    </table>

    監査ログファイルのパス（ファイル名を含む）を指定します。
  </Collapser>
</CollapserGroup>

## オートスタート [#autostart]

<CollapserGroup>
  <Collapser id="autostart-denylisted_constants" title="autostart.denylisted_constants">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `"Rails::Command::ConsoleCommand,Rails::Command::CredentialsCommand,Rails::Command::Db::System::ChangeCommand,Rails::Command::DbConsoleCommand,Rails::Command::DestroyCommand,Rails::Command::DevCommand,Rails::Command::EncryptedCommand,Rails::Command::GenerateCommand,Rails::Command::InitializersCommand,Rails::Command::NotesCommand,Rails::Command::RoutesCommand,Rails::Command::RunnerCommand,Rails::Command::SecretsCommand,Rails::Console,Rails::DBConsole"`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_AUTOSTART_DENYLISTED_CONSTANTS`
          </td>
        </tr>
      </tbody>
    </table>

    エージェントが自動的に起動しないようにする定数のリストを指定します。個々の定数はコンマ`,`で区切ります。たとえば、 `"Rails::Console,UninstrumentedBackgroundJob"` 。
  </Collapser>

  <Collapser id="autostart-denylisted_executables" title="autostart.denylisted_executables">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `"irb,rspec"`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_AUTOSTART_DENYLISTED_EXECUTABLES`
          </td>
        </tr>
      </tbody>
    </table>

    エージェントがインストルメントしてはならない実行可能ファイルのコンマ区切りリストを定義します。たとえば、 `"rake,my_ruby_script.rb"`です。
  </Collapser>

  <Collapser id="autostart-denylisted_rake_tasks" title="autostart.denylisted_rake_tasks">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `"about,assets:clean,assets:clobber,assets:environment,assets:precompile,assets:precompile:all,db:create,db:drop,db:fixtures:load,db:migrate,db:migrate:status,db:rollback,db:schema:cache:clear,db:schema:cache:dump,db:schema:dump,db:schema:load,db:seed,db:setup,db:structure:dump,db:version,doc:app,log:clear,middleware,notes,notes:custom,rails:template,rails:update,routes,secret,spec,spec:features,spec:requests,spec:controllers,spec:helpers,spec:models,spec:views,spec:routing,spec:rcov,stats,test,test:all,test:all:db,test:recent,test:single,test:uncommitted,time:zones:all,tmp:clear,tmp:create,webpacker:compile"`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_AUTOSTART_DENYLISTED_RAKE_TASKS`
          </td>
        </tr>
      </tbody>
    </table>

    エージェントがインストルメントしてはならないRakeタスクのコンマ区切りリストを定義します。たとえば、 `"assets:precompile,db:migrate"`です。
  </Collapser>
</CollapserGroup>

## クラウド [#cloud]

<CollapserGroup>
  <Collapser id="cloud-aws-account_id" title="クラウド.AWS AWSアカウントID">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `nil`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_CLOUD_AWS_ACCOUNT_ID`
          </td>
        </tr>
      </tbody>
    </table>

    このアプリに関連付けられた AWS アカウントの AWS アカウント ID
  </Collapser>
</CollapserGroup>

## コード レベルの指標 [#code-level-metrics]

<CollapserGroup>
  <Collapser id="code_level_metrics-enabled" title="code_level_metrics.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_CODE_LEVEL_METRICS_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはトレース メソッドのソースコード レベルのメトリクスを報告します。 参照: [https://docs.newrelic.com/docs/apm/agents/ruby-agent/features/ruby-codestream-integration/](https://docs.newrelic.com/docs/apm/agents/ruby-agent/features/ruby-codestream-integration/)
  </Collapser>
</CollapserGroup>

## クロスアプリケーショントレーサー [#cross-application-tracer]

<CollapserGroup>
  <Collapser id="cross_application_tracer-enabled" title="cross_application_tracer.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_CROSS_APPLICATION_TRACER_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    <DNT>**DEPRECATED**</DNT> [「distributed\_tracing.enabled」](#distributed_tracing-enabled)を参照してください。

    `true`の場合、 `distributed_tracing.enabled`が`false`に設定されているときに[クロスアプリケーショントレースを](/docs/agents/ruby-agent/features/cross-application-tracing-ruby/)有効にします。
  </Collapser>
</CollapserGroup>

## カスタム属性 [#custom-attributes]

<CollapserGroup>
  <Collapser id="custom_attributes-enabled" title="custom_attributes.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_CUSTOM_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `false`の場合、カスタム属性はイベントで送信されません。
  </Collapser>
</CollapserGroup>

## カスタムイベント [#custom-events]

<CollapserGroup>
  <Collapser id="custom_insights_events-enabled" title="custom_insights_events.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_CUSTOM_INSIGHTS_EVENTS_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントは[カスタムイベント](/docs/insights/new-relic-insights/adding-querying-data/inserting-custom-events-new-relic-apm-agents)をキャプチャします。
  </Collapser>

  <Collapser id="custom_insights_events-max_samples_stored" title="custom_insights_events.max_samples_stored">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            整数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `3000`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_CUSTOM_INSIGHTS_EVENTS_MAX_SAMPLES_STORED`
          </td>
        </tr>
      </tbody>
    </table>

    * 一度にメモリにバッファリングするカスタムイベントの最大数を指定します。
    * [AI モニタリング](/docs/ai-monitoring/intro-to-ai-monitoring)のエージェントを構成する場合は、最大値`100000`に設定します。 これにより、エージェントは最大量の LLM イベントをキャプチャできるようになります。
  </Collapser>
</CollapserGroup>

## データストアトレーサー [#datastore-tracer]

<CollapserGroup>
  <Collapser id="datastore_tracer-database_name_reporting-enabled" title="datastore_tracer.database_name_reporting.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_DATASTORE_TRACER_DATABASE_NAME_REPORTING_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `false`の場合、エージェントは`database_name`パラメータをトランザクションに追加しないか、SQLトレースを遅くします。
  </Collapser>

  <Collapser id="datastore_tracer-instance_reporting-enabled" title="datastore_tracer.instance_reporting.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_DATASTORE_TRACER_INSTANCE_REPORTING_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `false`の場合、エージェントはデータストアインスタンスメトリックを報告せず、トランザクションに`host`または`port_path_or_id`パラメータを追加したりSQLトレースを遅くしたりしません。
  </Collapser>
</CollapserGroup>

## 無効化 [#disabling]

これらの設定を使用して、エージェントの起動時に計測の種類を切り替えます。

<CollapserGroup>
  <Collapser id="disable_action_cable_instrumentation" title="ディセーブル・アクション・ケーブル・インスツルメンテーション">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_DISABLE_ACTION_CABLE_INSTRUMENTATION`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、アクションケーブルの計装を無効にします。
  </Collapser>

  <Collapser id="disable_action_controller" title="disable_action_controller">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_DISABLE_ACTION_CONTROLLER`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、アクション コントローラーの計測を無効にします。
  </Collapser>

  <Collapser id="disable_action_mailbox" title="disable_action_mailbox">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_DISABLE_ACTION_MAILBOX`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、アクション メールボックスの計測を無効にします。
  </Collapser>

  <Collapser id="disable_action_mailer" title="disable_action_mailer">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_DISABLE_ACTION_MAILER`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、Action Mailer インストルメンテーションを無効にします。
  </Collapser>

  <Collapser id="disable_activejob" title="disable_activejob">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_DISABLE_ACTIVEJOB`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、アクティブなジョブの計測を無効にします。
  </Collapser>

  <Collapser id="disable_active_storage" title="ディセーブル・アクティブ・ストレージ">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_DISABLE_ACTIVE_STORAGE`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、アクティブ ストレージの計測を無効にします。
  </Collapser>

  <Collapser id="disable_active_support" title="disable_active_support">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_DISABLE_ACTIVE_SUPPORT`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、Active Support インスツルメンテーションを無効にします。
  </Collapser>

  <Collapser id="disable_active_record_instrumentation" title="disable_active_record_instrumentation">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_DISABLE_ACTIVE_RECORD_INSTRUMENTATION`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、Active Record インストルメンテーションを無効にします。
  </Collapser>

  <Collapser id="disable_active_record_notifications" title="アクティブ・レコード・ノティフィケーションの無効化">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_DISABLE_ACTIVE_RECORD_NOTIFICATIONS`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、Active Record 4+ のインストルメンテーションを無効にします
  </Collapser>

  <Collapser id="disable_cpu_sampler" title="Disable_cpu_sampler">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_DISABLE_CPU_SAMPLER`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはホストプロセスのCPU使用率をサンプリングしません。
  </Collapser>

  <Collapser id="disable_delayed_job_sampler" title="ディセーブル・ディレイド・ジョブ・サンプラー">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_DISABLE_DELAYED_JOB_SAMPLER`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントは遅延ジョブキューの深さを測定しません。
  </Collapser>

  <Collapser id="disable_gc_profiler" title="ディセーブル_gc_profiler">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_DISABLE_GC_PROFILER`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、ガベージ コレクションに費やされた時間を測定するための`GC::Profiler`の使用を無効にします
  </Collapser>

  <Collapser id="disable_memory_sampler" title="ディスエーブルメモリーサンプラー（Disable_memory_sampler">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_DISABLE_MEMORY_SAMPLER`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはホストプロセスのメモリ使用量をサンプリングしません。
  </Collapser>

  <Collapser id="disable_middleware_instrumentation" title="ディセーブルミドルウェア・インストゥルメンテーション（Disable_Middleware_Instrumentation">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_DISABLE_MIDDLEWARE_INSTRUMENTATION`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはサードパーティのミドルウェアをインストルメンテーションにラップしません ( `Rack::Builder`または Rails を介してインストールされているかどうかに関係なく)。

    <Callout variant="important">
      ミドルウェア インストルメンテーションが無効になっている場合、アプリケーションが応答コードを変更する可能性のあるミドルウェアを使用している場合、トランザクションで報告される HTTP ステータス コードに変更された値が反映されない可能性があります。
    </Callout>
  </Collapser>

  <Collapser id="disable_samplers" title="Disable_Samplers">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_DISABLE_SAMPLERS`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、サンプラーメトリックの収集を無効にします。サンプラーメトリックは、イベントベースではないメトリックです（CPU時間やメモリ使用量など）。
  </Collapser>

  <Collapser id="disable_sequel_instrumentation" title="ディセーブル_sequel_instrumentation">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_DISABLE_SEQUEL_INSTRUMENTATION`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、 [Sequelインストルメンテーション](/docs/agents/ruby-agent/frameworks/sequel-instrumentation)を無効にします。
  </Collapser>

  <Collapser id="disable_sidekiq" title="ディセーブル_サイドキーク">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_DISABLE_SIDEKIQ`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、 [Sidekiqインストルメンテーション](/docs/agents/ruby-agent/background-jobs/sidekiq-instrumentation)を無効にします。
  </Collapser>

  <Collapser id="disable_roda_auto_middleware" title="disable_roda_auto_middleware">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_DISABLE_RODA_AUTO_MIDDLEWARE`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、Roda のエージェント ミドルウェアを無効にします。このミドルウェアは、 [ページの読み込みタイミング](/docs/browser/new-relic-browser/getting-started/new-relic-browser) や [エラー収集](/docs/apm/applications-menu/events/view-apm-error-analytics)などの高度な機能のサポートを担当します。
  </Collapser>

  <Collapser id="disable_sinatra_auto_middleware" title="ディセーブル_Sinatra_Auto_Middleware">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_DISABLE_SINATRA_AUTO_MIDDLEWARE`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、Sinatraのエージェントミドルウェアを無効にします。このミドルウェアは、[クロスアプリケーショントレース](/docs/apm/transactions/cross-application-traces/cross-application-tracing)、[ページの読み込みタイミング](/docs/browser/new-relic-browser/getting-started/new-relic-browser)、[エラー収集](/docs/apm/applications-menu/events/view-apm-error-analytics)などの高度な機能のサポートを担当します。

    <Callout variant="important">
      クロス アプリケーション トレースは廃止され、[分散トレース](/docs/apm/distributed-tracing/getting-started/introduction-distributed-tracing)が優先されます。Ruby エージェント バージョン 8.0.0 以降では、デフォルトで分散トレースがオンになっています。ミドルウェアは、分散トレースをサポートする必要はありません。

      クロスアプリケーショントレースを引き続き使用するには、 `newrelic.yml`構成ファイルの次のオプションを更新します。

      ```yaml
      	cross_application_tracer:
      		enabled: true
      	distributed_tracing:
      		enabled: false
      ```
    </Callout>
  </Collapser>

  <Collapser id="disable_view_instrumentation" title="ディスエイブル・ビュー・インスツルメンテーション">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_DISABLE_VIEW_INSTRUMENTATION`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、ビューインストルメンテーションを無効にします。
  </Collapser>

  <Collapser id="disable_vm_sampler" title="ディスエーブルドVMサンプラー（Disable_vm_sampler">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_DISABLE_VM_SAMPLER`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントは[RubyVMからパフォーマンス測定値をサンプリングし](/docs/agents/ruby-agent/features/ruby-vm-measurements)ません。
  </Collapser>
</CollapserGroup>

## 分散型トレーシング [#distributed-tracing]

<CollapserGroup>
  <Collapser id="distributed_tracing-enabled" title="distributed_tracing.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_DISTRIBUTED_TRACING_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    分散トレーシングでは、リクエストが分散システムを通過する経路を確認することができます。分散トレーシングを有効にすると、New Relic の一部の機能の動作が変わるため、この機能を有効にする前に [移行ガイド](/docs/transition-guide-distributed-tracing) をよく確認してください。
  </Collapser>

  <Collapser id="distributed_tracing-sampler-remote_parent_sampled" title="distributed_tracing.sampler.remote_parent_sampled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `"default"`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_DISTRIBUTED_TRACING_SAMPLER_REMOTE_PARENT_SAMPLED`
          </td>
        </tr>
      </tbody>
    </table>

    この設定は、リモート 親がサンプリングされ、トレース フラグが traceparent に設定されているときのトランザクション サンプリングの動作を制御します。使用可能な値は`default` 、 `always_on` 、 `always_off`です。
  </Collapser>

  <Collapser id="distributed_tracing-sampler-remote_parent_not_sampled" title="distributed_tracing.sampler.remote_parent_not_sampled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `"default"`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_DISTRIBUTED_TRACING_SAMPLER_REMOTE_PARENT_NOT_SAMPLED`
          </td>
        </tr>
      </tbody>
    </table>

    この設定は、リモート 親がサンプリングされず、トレース フラグが traceparent に設定されていない場合のトランザクション サンプリングの動作を制御します。使用可能な値は`default` 、 `always_on` 、 `always_off`です。
  </Collapser>
</CollapserGroup>

## Elasticsearch [#elasticsearch]

<CollapserGroup>
  <Collapser id="elasticsearch-capture_cluster_name" title="elasticsearch.capture_cluster_name">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_ELASTICSEARCH_CAPTURE_CLUSTER_NAME`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントは、段階トレース内のElasticsearchクラスタ名をキャプチャします。
  </Collapser>

  <Collapser id="elasticsearch-capture_queries" title="elasticsearch.capture_queries">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_ELASTICSEARCH_CAPTURE_QUERIES`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはトランザクション追跡で Elasticsearch クエリをキャプチャします。
  </Collapser>

  <Collapser id="elasticsearch-obfuscate_queries" title="elasticsearch.obfuscate_queries">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_ELASTICSEARCH_OBFUSCATE_QUERIES`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはトランザクション追跡で Elasticsearch クエリを難読化します。
  </Collapser>
</CollapserGroup>

## Heroku [#heroku]

<CollapserGroup>
  <Collapser id="heroku-use_dyno_names" title="heroku.use_dyno_names">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_HEROKU_USE_DYNO_NAMES`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはホスト名としてHerokudyno名を使用します。
  </Collapser>

  <Collapser id="heroku-dyno_name_prefixes_to_shorten" title="heroku.dyno_name_prefixes_to_shorten">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            配列
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `["scheduler", "run"]`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_HEROKU_DYNO_NAME_PREFIXES_TO_SHORTEN`
          </td>
        </tr>
      </tbody>
    </table>

    通常、エージェントは、末尾にドットとプロセス ID を付けて dyno 名を報告します (例: `worker.3` )。末尾のデータなしで報告するプレフィックスを指定することで、この末尾のデータを削除できます (たとえば、 `worker` )。
  </Collapser>
</CollapserGroup>

## 無限のトレース [#infinite-tracing]

<CollapserGroup>
  <Collapser id="infinite_tracing-trace_observer-host" title="infinite_tracing.trace_observer.host">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `""`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INFINITE_TRACING_TRACE_OBSERVER_HOST`
          </td>
        </tr>
      </tbody>
    </table>

    トレース オブザーバ ホストのホスト名を設定します。設定すると、通常のエージェント サンプリング決定に関係なく、さらにサンプリングを決定するために、記録されたすべてのスパンをトレース オブザーバに送信することで、テールベースのサンプリングが有効になります。
  </Collapser>

  <Collapser id="infinite_tracing-trace_observer-port" title="infinite_tracing.trace_observer.port">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            整数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `443`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INFINITE_TRACING_TRACE_OBSERVER_PORT`
          </td>
        </tr>
      </tbody>
    </table>

    トレース オブザーバー ホストの TCP/IP ポートを構成します。
  </Collapser>

  <Collapser id="infinite_tracing-batching" title="infinite_tracing.batching">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INFINITE_TRACING_BATCHING`
          </td>
        </tr>
      </tbody>
    </table>

    `true` (デフォルト) の場合、トレース オブザーバーに送信されるデータは、各スパンを個別に送信する代わりにバッチ処理されます。
  </Collapser>

  <Collapser id="infinite_tracing-compression_level" title="無限トレース.圧縮レベル">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            シンボル
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `:high`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INFINITE_TRACING_COMPRESSION_LEVEL`
          </td>
        </tr>
      </tbody>
    </table>

    トレース オブザーバーに送信されるデータの圧縮レベルを構成します。次のいずれかになります: `:none` 、 `:low` 、 `:medium` 、 `:high` 。圧縮を無効にするにはレベルを`:none`に設定します。
  </Collapser>
</CollapserGroup>

## 計装 [#instrumentation]

<CollapserGroup>
  <Collapser id="instrumentation-active_support_broadcast_logger" title="インストルメンテーション.active_support_broadcast_logger">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `auto`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_ACTIVE_SUPPORT_BROADCAST_LOGGER`
          </td>
        </tr>
      </tbody>
    </table>

    起動時の`ActiveSupport::BroadcastLogger`の自動計測を制御します。`auto` 、 `prepend` 、 `chain` 、 `disabled`のいずれかになります。Rails バージョン 7.1 以上で使用されます。
  </Collapser>

  <Collapser id="instrumentation-active_support_logger" title="Instrumentation.active_support_logger">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `auto`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_ACTIVE_SUPPORT_LOGGER`
          </td>
        </tr>
      </tbody>
    </table>

    起動時の`ActiveSupport::Logger`の自動計測を制御します。`auto` 、 `prepend` 、 `chain` 、 `disabled`のいずれかになります。Rails 7.1 より前のバージョンで使用されます。
  </Collapser>

  <Collapser id="instrumentation-async_http" title="インストルメンテーション.async_http">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `auto`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_ASYNC_HTTP`
          </td>
        </tr>
      </tbody>
    </table>

    起動時の Async::HTTP の自動計測を制御します。`auto` 、 `prepend` 、 `chain` 、 `disabled`のいずれかになります。
  </Collapser>

  <Collapser id="instrumentation-bunny" title="インストルメント.バニー">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `auto`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_BUNNY`
          </td>
        </tr>
      </tbody>
    </table>

    起動時のバニーの自動計測を制御します。`auto` 、 `prepend` 、 `chain` 、 `disabled`のいずれかになります。
  </Collapser>

  <Collapser id="instrumentation-aws_sdk_firehose" title="instrumentation.aws_sdk_firehose">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `auto`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_AWS_SDK_FIREHOSE`
          </td>
        </tr>
      </tbody>
    </table>

    起動時の AWS-sdk-firehose ライブラリの自動インストゥルメンテーションを制御します。 `auto` 、 `prepend` 、 `chain` 、 `disabled`のいずれかになります。
  </Collapser>

  <Collapser id="instrumentation-aws_sdk_lambda" title="instrumentation.aws_sdk_lambda">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `auto`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_AWS_SDK_LAMBDA`
          </td>
        </tr>
      </tbody>
    </table>

    起動時の aws\_sdk\_lambda ライブラリの自動インストゥルメンテーションを制御します。 `auto` 、 `prepend` 、 `chain` 、 `disabled`のいずれかになります。
  </Collapser>

  <Collapser id="instrumentation-aws_sdk_kinesis" title="instrumentation.aws_sdk_kinesis">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `auto`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_AWS_SDK_KINESIS`
          </td>
        </tr>
      </tbody>
    </table>

    起動時の AWS-sdk-kinesis ライブラリの自動インストゥルメンテーションを制御します。 `auto` 、 `prepend` 、 `chain` 、 `disabled`のいずれかになります。
  </Collapser>

  <Collapser id="instrumentation-ruby_kafka" title="instrumentation.ruby_kafka">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `"auto"`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_RUBY_KAFKA`
          </td>
        </tr>
      </tbody>
    </table>

    起動時のruby-kafkaライブラリの自動インストゥルメンテーションを制御します。 `auto` 、 `prepend` 、 `chain` 、 `disabled`のいずれかになります。
  </Collapser>

  <Collapser id="instrumentation-opensearch" title="instrumentation.opensearch">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `auto`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_OPENSEARCH`
          </td>
        </tr>
      </tbody>
    </table>

    起動時の opensearch-ruby ライブラリの自動インストゥルメンテーションを制御します。 `auto` 、 `prepend` 、 `chain` 、 `disabled`のいずれかになります。
  </Collapser>

  <Collapser id="instrumentation-rdkafka" title="instrumentation.rdkafka">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `"auto"`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_RDKAFKA`
          </td>
        </tr>
      </tbody>
    </table>

    起動時の rdkafka ライブラリの自動インストゥルメンテーションを制御します。 `auto` 、 `prepend` 、 `chain` 、 `disabled`のいずれかになります。
  </Collapser>

  <Collapser id="instrumentation-aws_sqs" title="instrumentation.aws_sqs">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `"auto"`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_AWS_SQS`
          </td>
        </tr>
      </tbody>
    </table>

    起動時の AWS-sdk-sqs ライブラリの自動インストゥルメンテーションを制御します。 次のいずれかになります: `auto` 、 `prepend` 、 `chain` 、 `disabled` 。
  </Collapser>

  <Collapser id="instrumentation-dynamodb" title="instrumentation.dynamodb">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `auto`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_DYNAMODB`
          </td>
        </tr>
      </tbody>
    </table>

    起動時の AWS-sdk-dynamodb ライブラリの自動インストゥルメンテーションを制御します。 `auto` 、 `prepend` 、 `chain` 、 `disabled`のいずれかになります。
  </Collapser>

  <Collapser id="instrumentation-fiber" title="instrumentation.fiber">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `auto`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_FIBER`
          </td>
        </tr>
      </tbody>
    </table>

    起動時のファイバー クラスの自動インスツルメンテーションを制御します。`auto` 、 `prepend` 、 `chain` 、 `disabled`のいずれかになります。
  </Collapser>

  <Collapser id="instrumentation-concurrent_ruby" title="instrumentation.concurrent_ruby">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `auto`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_CONCURRENT_RUBY`
          </td>
        </tr>
      </tbody>
    </table>

    起動時の並行 Ruby ライブラリの自動インスツルメンテーションを制御します。`auto` 、 `prepend` 、 `chain` 、 `disabled`のいずれかになります。
  </Collapser>

  <Collapser id="instrumentation-curb" title="インストルメンテーション・カーブ">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `auto`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_CURB`
          </td>
        </tr>
      </tbody>
    </table>

    起動時の Curb の自動計測を制御します。`auto` 、 `prepend` 、 `chain` 、 `disabled`のいずれかになります。
  </Collapser>

  <Collapser id="instrumentation-delayed_job" title="instrumentation.delayed_job">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `auto`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_DELAYED_JOB`
          </td>
        </tr>
      </tbody>
    </table>

    起動時の遅延ジョブの自動計測を制御します。`auto` 、 `prepend` 、 `chain` 、 `disabled`のいずれかになります。
  </Collapser>

  <Collapser id="instrumentation-elasticsearch" title="インストルメンテーション.elasticsearch">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `auto`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_ELASTICSEARCH`
          </td>
        </tr>
      </tbody>
    </table>

    起動時の elasticsearch ライブラリの自動インストルメンテーションを制御します。`auto` 、 `prepend` 、 `chain` 、 `disabled`のいずれかになります。
  </Collapser>

  <Collapser id="instrumentation-ethon" title="インストルメンテーション.ethon">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `auto`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_ETHON`
          </td>
        </tr>
      </tbody>
    </table>

    起動時のethonの自動インストゥルメンテーションを制御します。 `auto` 、 `prepend` 、 `chain`のいずれかになります。 `disabled`
  </Collapser>

  <Collapser id="instrumentation-excon" title="インストルメンテーション.エクソン">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `enabled`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_EXCON`
          </td>
        </tr>
      </tbody>
    </table>

    起動時の Excon の自動計測を制御します。`enabled` 、 `disabled`のいずれかになります。
  </Collapser>

  <Collapser id="instrumentation-grape" title="instrumentation.grape">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `auto`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_GRAPE`
          </td>
        </tr>
      </tbody>
    </table>

    起動時の Grape の自動計測を制御します。`auto` 、 `prepend` 、 `chain` 、 `disabled`のいずれかになります。
  </Collapser>

  <Collapser id="instrumentation-grpc_client" title="instrumentation.grpc_client">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `auto`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_GRPC_CLIENT`
          </td>
        </tr>
      </tbody>
    </table>

    起動時の gRPC クライアントの自動インストルメンテーションを制御します。`auto` 、 `prepend` 、 `chain` 、 `disabled`のいずれかになります。
  </Collapser>

  <Collapser id="instrumentation-grpc-host_denylist" title="instrumentation.grpc.host_denylist">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            配列
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_GRPC_HOST_DENYLIST`
          </td>
        </tr>
      </tbody>
    </table>

    New Relic がトラフィックを無視する gRPC ホスト名に一致する、コンマで区切られたホスト名パターンのリストを指定します。New Relic の gRPC クライアント インストルメンテーションは、これらのパターンのいずれかに一致するホストにストリーミングされたトラフィックを無視し、New Relic の gRPC サーバー インストルメンテーションは、ホスト名がこれらのパターンのいずれかに一致するホスト上で実行されているサーバーのトラフィックを無視します。デフォルトでは、gRPC インストルメンテーション自体が有効になっている場合、トラフィックは無視されません。例えば、 `"private.com$,exception.*"`
  </Collapser>

  <Collapser id="instrumentation-grpc_server" title="instrumentation.grpc_server">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `auto`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_GRPC_SERVER`
          </td>
        </tr>
      </tbody>
    </table>

    起動時の gRPC サーバーの自動インストルメンテーションを制御します。`auto` 、 `prepend` 、 `chain` 、 `disabled`のいずれかになります。
  </Collapser>

  <Collapser id="instrumentation-httpclient" title="instrumentation.httpclient">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `auto`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_HTTPCLIENT`
          </td>
        </tr>
      </tbody>
    </table>

    起動時の HTTPClient の自動インストルメンテーションを制御します。`auto` 、 `prepend` 、 `chain` 、 `disabled`のいずれかになります。
  </Collapser>

  <Collapser id="instrumentation-httprb" title="インスツルメンテーション.httprb">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `auto`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_HTTPRB`
          </td>
        </tr>
      </tbody>
    </table>

    起動時の http.rb gem の自動インストルメンテーションを制御します。`auto` 、 `prepend` 、 `chain` 、 `disabled`のいずれかになります。
  </Collapser>

  <Collapser id="instrumentation-httpx" title="インストルメンテーション.httpx">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `auto`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_HTTPX`
          </td>
        </tr>
      </tbody>
    </table>

    起動時のhttpxの自動インストゥルメンテーションを制御します。 `auto` 、 `prepend` 、 `chain`のいずれかになります。 `disabled`
  </Collapser>

  <Collapser id="instrumentation-logger" title="インスツルメンテーション.ロガー">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `auto`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_LOGGER`
          </td>
        </tr>
      </tbody>
    </table>

    Ruby標準ライブラリLoggerの起動時の自動計測を制御します。`auto` 、 `prepend` 、 `chain` 、 `disabled`のいずれかになります。
  </Collapser>

  <Collapser id="instrumentation-logstasher" title="instrumentation.logstasher">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `auto`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_LOGSTASHER`
          </td>
        </tr>
      </tbody>
    </table>

    起動時の LogStasher ライブラリの自動インストゥルメンテーションを制御します。 次のいずれかになります: `auto` 、 `prepend` 、 `chain` 、 `disabled` 。
  </Collapser>

  <Collapser id="instrumentation-memcache" title="instrumentation.memcache">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `auto`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_MEMCACHE`
          </td>
        </tr>
      </tbody>
    </table>

    起動時に Memcache の dalli gem の自動インスツルメンテーションを制御します。`auto` 、 `prepend` 、 `chain` 、 `disabled`のいずれかになります。
  </Collapser>

  <Collapser id="instrumentation-memcached" title="instrumentation.memcached">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `auto`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_MEMCACHED`
          </td>
        </tr>
      </tbody>
    </table>

    起動時に Memcache の memcached gem の自動インストルメンテーションを制御します。`auto` 、 `prepend` 、 `chain` 、 `disabled`のいずれかになります。
  </Collapser>

  <Collapser id="instrumentation-memcache_client" title="instrumentation.memcache_client">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `auto`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_MEMCACHE_CLIENT`
          </td>
        </tr>
      </tbody>
    </table>

    起動時に Memcache の memcache-client gem の自動インストルメンテーションを制御します。`auto` 、 `prepend` 、 `chain` 、 `disabled`のいずれかになります。
  </Collapser>

  <Collapser id="instrumentation-mongo" title="instrumentation.mongo">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `enabled`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_MONGO`
          </td>
        </tr>
      </tbody>
    </table>

    起動時の Mongo の自動計測を制御します。`enabled` 、 `disabled`のいずれかになります。
  </Collapser>

  <Collapser id="instrumentation-net_http" title="インスツルメンテーション.ネット_http">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `auto`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_NET_HTTP`
          </td>
        </tr>
      </tbody>
    </table>

    起動時の`Net::HTTP`の自動計測を制御します。`auto` 、 `prepend` 、 `chain` 、 `disabled`のいずれかになります。
  </Collapser>

  <Collapser id="instrumentation-ruby_openai" title="instrumentation.ruby_openai">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `auto`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_RUBY_OPENAI`
          </td>
        </tr>
      </tbody>
    </table>

    起動時の ruby-openai gem の自動インストゥルメンテーションを制御します。 次のいずれかになります: `auto` 、 `prepend` 、 `chain` 、 `disabled` 。高セキュリティ モードではデフォルトで`disabled`になります。
  </Collapser>

  <Collapser id="instrumentation-puma_rack" title="instrumentation.puma_rack">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `auto`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_PUMA_RACK`
          </td>
        </tr>
      </tbody>
    </table>

    `Puma::Rack`の自動計測を制御します。有効にすると、エージェントは`Puma::Rack::Builder`の`to_app`メソッドにフックして、アプリケーションの起動時に計測する gem を見つけます。`auto` 、 `prepend` 、 `chain` 、 `disabled`のいずれかです。
  </Collapser>

  <Collapser id="instrumentation-puma_rack_urlmap" title="instrumentation.puma_rack_urlmap">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `auto`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_PUMA_RACK_URLMAP`
          </td>
        </tr>
      </tbody>
    </table>

    起動時の`Puma::Rack::URLMap`の自動計測を制御します。`auto` 、 `prepend` 、 `chain` 、 `disabled`のいずれかになります。
  </Collapser>

  <Collapser id="instrumentation-rack" title="インストルメント・ラック">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `auto`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_RACK`
          </td>
        </tr>
      </tbody>
    </table>

    Rack の自動計測を制御します。有効にすると、エージェントは`Rack::Builder`の`to_app`メソッドにフックして、アプリケーションの起動時に計測する gem を見つけます。`auto` 、 `prepend` 、 `chain` 、 `disabled`のいずれかです。
  </Collapser>

  <Collapser id="instrumentation-rack_urlmap" title="instrumentation.rack_urlmap">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `auto`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_RACK_URLMAP`
          </td>
        </tr>
      </tbody>
    </table>

    起動時の`Rack::URLMap`の自動計測を制御します。`auto` 、 `prepend` 、 `chain` 、 `disabled`のいずれかになります。
  </Collapser>

  <Collapser id="instrumentation-rake" title="instrumentation.rake">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `auto`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_RAKE`
          </td>
        </tr>
      </tbody>
    </table>

    起動時の rake の自動計測を制御します。`auto` 、 `prepend` 、 `chain` 、 `disabled`のいずれかになります。
  </Collapser>

  <Collapser id="instrumentation-redis" title="instrumentation.redis">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `auto`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_REDIS`
          </td>
        </tr>
      </tbody>
    </table>

    起動時の Redis の自動インストルメンテーションを制御します。`auto` 、 `prepend` 、 `chain` 、 `disabled`のいずれかになります。
  </Collapser>

  <Collapser id="instrumentation-resque" title="インストルメント・レスク">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `auto`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_RESQUE`
          </td>
        </tr>
      </tbody>
    </table>

    起動時の resque の自動計測を制御します。`auto` 、 `prepend` 、 `chain` 、 `disabled`のいずれかになります。
  </Collapser>

  <Collapser id="instrumentation-roda" title="計装.ろだ">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `auto`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_RODA`
          </td>
        </tr>
      </tbody>
    </table>

    起動時の Roda の自動計測を制御します。`auto` 、 `prepend` 、 `chain` 、 `disabled`のいずれかになります。
  </Collapser>

  <Collapser id="instrumentation-sinatra" title="instrumentation.sinatra">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `auto`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_SINATRA`
          </td>
        </tr>
      </tbody>
    </table>

    起動時の Sinatra の自動計測を制御します。`auto` 、 `prepend` 、 `chain` 、 `disabled`のいずれかになります。
  </Collapser>

  <Collapser id="instrumentation-stripe" title="インストルメンテーション.ストライプ">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `"enabled"`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_STRIPE`
          </td>
        </tr>
      </tbody>
    </table>

    起動時の Stripe の自動計測を制御します。`enabled` 、 `disabled`のいずれかになります。
  </Collapser>

  <Collapser id="instrumentation-view_component" title="instrumentation.view_component">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `auto`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_VIEW_COMPONENT`
          </td>
        </tr>
      </tbody>
    </table>

    起動時に ViewComponent の自動実行を制御します。 `auto` 、 `prepend` 、 `chain` 、 `disabled`のいずれかになります。
  </Collapser>

  <Collapser id="instrumentation-thread" title="Instrumentation.thread">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `auto`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_THREAD`
          </td>
        </tr>
      </tbody>
    </table>

    起動時に Thread クラスの自動計測を制御して、エージェントが非同期トランザクション内でスパンを正しくネストできるようにします。これにより、エージェントは作成されたすべてのスレッドを自動的にトレースできなくなります ( `instrumentation.thread.tracing`を参照)。`auto` 、 `prepend` 、 `chain` 、 `disabled`のいずれかになります。
  </Collapser>

  <Collapser id="instrumentation-thread-tracing" title="Instrumentation.thread.tracing">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_THREAD_TRACING`
          </td>
        </tr>
      </tbody>
    </table>

    起動時に Thread クラスの自動インスツルメンテーションを制御し、アプリケーションで作成されたすべてのスレッドにトレースを自動的に追加します。
  </Collapser>

  <Collapser id="instrumentation-tilt" title="インストルメント・ティルト">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `auto`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_TILT`
          </td>
        </tr>
      </tbody>
    </table>

    起動時の Tilt テンプレート レンダリング ライブラリの自動インストルメンテーションを制御します。`auto` 、 `prepend` 、 `chain` 、 `disabled`のいずれかになります。
  </Collapser>

  <Collapser id="instrumentation-typhoeus" title="インストルメント.タイポウズ">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `auto`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_TYPHOEUS`
          </td>
        </tr>
      </tbody>
    </table>

    起動時の Typhoeus の自動計測を制御します。`auto` 、 `prepend` 、 `chain` 、 `disabled`のいずれかになります。
  </Collapser>
</CollapserGroup>

## メッセージトレーサー [#message-tracer]

<CollapserGroup>
  <Collapser id="message_tracer-segment_parameters-enabled" title="message_tracer.segment_parameters.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_MESSAGE_TRACER_SEGMENT_PARAMETERS_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはメッセージに関するメタデータを収集し、それらをセグメントパラメータとして添付します。
  </Collapser>
</CollapserGroup>

## Mongo [#mongo]

<CollapserGroup>
  <Collapser id="mongo-capture_queries" title="mongo.capture_queries">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_MONGO_CAPTURE_QUERIES`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはトランザクショントレースでMongoクエリをキャプチャします。
  </Collapser>

  <Collapser id="mongo-obfuscate_queries" title="mongo.obfuscate_queries">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_MONGO_OBFUSCATE_QUERIES`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはトランザクショントレースでMongoクエリを難読化します。
  </Collapser>
</CollapserGroup>

## オープンサーチ [#opensearch]

<CollapserGroup>
  <Collapser id="opensearch-capture_queries" title="opensearch.capture_queries">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_OPENSEARCH_CAPTURE_QUERIES`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントは、発言トレースで OpenSearch 書き込みをキャプチャします。
  </Collapser>

  <Collapser id="opensearch-obfuscate_queries" title="opensearch.obfuscate_queries">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_OPENSEARCH_OBFUSCATE_QUERIES`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントは現場トレースで OpenSearch 書き込みを難読化します。
  </Collapser>
</CollapserGroup>

## プロセスホスト [#process-host]

<CollapserGroup>
  <Collapser id="process_host-display_name" title="process_host.display_name">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `(Dynamic)`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_PROCESS_HOST_DISPLAY_NAME`
          </td>
        </tr>
      </tbody>
    </table>

    New Relic UI で [表示するカスタムホスト名を指定する](/docs/apm/new-relic-apm/maintenance/add-rename-remove-hosts#display_name) 。
  </Collapser>
</CollapserGroup>

## Rake [#rake]

<CollapserGroup>
  <Collapser id="rake-tasks" title="rake.tasks">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            配列
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_RAKE_TASKS`
          </td>
        </tr>
      </tbody>
    </table>

    自動的にインストルメントする Rake タスクの配列を指定します。この構成オプションは、配列を正規表現リストに変換します。デフォルトですべてのタスクを許可する場合は、 `rake.tasks: [.+]`を使用します。このリストに追加されない限り、rake タスクはインストルメントされません。詳細については、 [New Relic Rake Instrumentation のドキュメント](/docs/apm/agents/ruby-agent/background-jobs/rake-instrumentation)を参照してください。
  </Collapser>

  <Collapser id="rake-connect_timeout" title="rake.connect_timeout">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            整数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `10`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_RAKE_CONNECT_TIMEOUT`
          </td>
        </tr>
      </tbody>
    </table>

    rakeタスクの前にconnectが完了するのを待つためのタイムアウト
  </Collapser>
</CollapserGroup>

## ルール [#rules]

<CollapserGroup>
  <Collapser id="rules-ignore_url_regexes" title="rules.ignore_url_regexes">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            配列
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_RULES_IGNORE_URL_REGEXES`
          </td>
        </tr>
      </tbody>
    </table>

    無視する URI に一致するパターンのリストを指定して、エージェントが無視するトランザクションを定義します。詳細については[、特定のトランザクションの無視に関するドキュメントを参照して](/docs/agents/ruby-agent/api-guides/ignoring-specific-transactions/#config-ignoring)ください。
  </Collapser>
</CollapserGroup>

## セキュリティ [#security]

<CollapserGroup>
  <Collapser id="security-agent-enabled" title="security.agent.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SECURITY_AGENT_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、セキュリティエージェントがロードされます（Ruby の &apos;require&apos; が実行されます）
  </Collapser>

  <Collapser id="security-enabled" title="security.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SECURITY_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、セキュリティ エージェントが起動します (エージェントはイベント ループで実行されます)
  </Collapser>

  <Collapser id="security-mode" title="security.mode">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `"IAST"`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SECURITY_MODE`
          </td>
        </tr>
      </tbody>
    </table>

    セキュリティ エージェントが動作するモードを定義します。現在、 `IAST`のみがサポートされています
  </Collapser>

  <Collapser id="security-validator_service_url" title="security.validator_service_url">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `"wss://csec.nr-data.net"`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SECURITY_VALIDATOR_SERVICE_URL`
          </td>
        </tr>
      </tbody>
    </table>

    セキュリティ関連データを投稿するためのエンドポイント URL を定義します
  </Collapser>

  <Collapser id="security-application_info-port" title="security.application_info.port">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            整数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `nil`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SECURITY_APPLICATION_INFO_PORT`
          </td>
        </tr>
      </tbody>
    </table>

    アプリケーションがリッスンしているポート。この設定は Passenger サーバーでは必須です。エージェントはデフォルトで他のサーバーを検出します。
  </Collapser>

  <Collapser id="security-exclude_from_iast_scan-api" title="security.exclude_from_iast_scan.api">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            配列
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SECURITY_EXCLUDE_FROM_IAST_SCAN_API`
          </td>
        </tr>
      </tbody>
    </table>

    セキュリティ エージェントが IAST スキャンで無視する API パスを定義します。無視する URI に一致する正規表現パターンの配列を受け入れます。正規表現パターンは、エンドポイントのない URL に完全に一致するものを見つける必要があります。例えば、 `[".*account.*"], [".*/\api\/v1\/.*?\/login"]`
  </Collapser>

  <Collapser id="security-exclude_from_iast_scan-http_request_parameters-header" title="security.exclude_from_iast_scan.http_request_parameters.header">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            配列
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SECURITY_EXCLUDE_FROM_IAST_SCAN_HTTP_REQUEST_PARAMETERS_HEADER`
          </td>
        </tr>
      </tbody>
    </table>

    セキュリティ エージェントが IAST スキャンで無視する HTTP 要求ヘッダーの配列。配列には、無視するヘッダーに一致するパターンのリストを指定する必要があります。
  </Collapser>

  <Collapser id="security-exclude_from_iast_scan-http_request_parameters-query" title="security.exclude_from_iast_scan.http_request_parameters.query">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            配列
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SECURITY_EXCLUDE_FROM_IAST_SCAN_HTTP_REQUEST_PARAMETERS_QUERY`
          </td>
        </tr>
      </tbody>
    </table>

    HTTP リクエストの配列は、セキュリティ担当者がIASTスキャンで無視する必要があります。 配列には、HTTP リクエストに一致する無視するパターンのリストを指定する必要があります。
  </Collapser>

  <Collapser id="security-exclude_from_iast_scan-http_request_parameters-body" title="security.exclude_from_iast_scan.http_request_parameters.body">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            配列
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SECURITY_EXCLUDE_FROM_IAST_SCAN_HTTP_REQUEST_PARAMETERS_BODY`
          </td>
        </tr>
      </tbody>
    </table>

    セキュリティ エージェントが IAST スキャンで無視する HTTP リクエスト本文キーの配列。
  </Collapser>

  <Collapser id="security-exclude_from_iast_scan-iast_detection_category-insecure_settings" title="security.exclude_from_iast_scan.iast_detection_category.insecure_settings">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SECURITY_EXCLUDE_FROM_IAST_SCAN_IAST_DETECTION_CATEGORY_INSECURE_SETTINGS`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、重大度が低い安全でない設定の検出を無効にします。たとえば、ハッシュ、暗号、Cookie、乱数ジェネレーター、信頼境界などです。
  </Collapser>

  <Collapser id="security-exclude_from_iast_scan-iast_detection_category-invalid_file_access" title="security.exclude_from_iast_scan.iast_detection_category.invalid_file_access">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SECURITY_EXCLUDE_FROM_IAST_SCAN_IAST_DETECTION_CATEGORY_INVALID_FILE_ACCESS`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、ファイル操作関連の IAST 検出 (ファイル アクセスとアプリケーションの整合性違反) を無効にします。
  </Collapser>

  <Collapser id="security-exclude_from_iast_scan-iast_detection_category-sql_injection" title="security.exclude_from_iast_scan.iast_detection_category.sql_injection">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SECURITY_EXCLUDE_FROM_IAST_SCAN_IAST_DETECTION_CATEGORY_SQL_INJECTION`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、IAST スキャンでの SQL インジェクション検出が無効になります。
  </Collapser>

  <Collapser id="security-exclude_from_iast_scan-iast_detection_category-nosql_injection" title="security.exclude_from_iast_scan.iast_detection_category.nosql_injection">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SECURITY_EXCLUDE_FROM_IAST_SCAN_IAST_DETECTION_CATEGORY_NOSQL_INJECTION`
          </td>
        </tr>
      </tbody>
    </table>

    `true`場合、IAST スキャンでの NOSQL インジェクション検出が無効になります。
  </Collapser>

  <Collapser id="security-exclude_from_iast_scan-iast_detection_category-ldap_injection" title="security.exclude_from_iast_scan.iast_detection_category.ldap_injection">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SECURITY_EXCLUDE_FROM_IAST_SCAN_IAST_DETECTION_CATEGORY_LDAP_INJECTION`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、IAST スキャンでの LDAP インジェクション検出が無効になります。
  </Collapser>

  <Collapser id="security-exclude_from_iast_scan-iast_detection_category-javascript_injection" title="security.exclude_from_iast_scan.iast_detection_category.javascript_injection">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SECURITY_EXCLUDE_FROM_IAST_SCAN_IAST_DETECTION_CATEGORY_JAVASCRIPT_INJECTION`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、IAST スキャンでの Javascript インジェクション検出が無効になります。
  </Collapser>

  <Collapser id="security-exclude_from_iast_scan-iast_detection_category-command_injection" title="security.exclude_from_iast_scan.iast_detection_category.command_injection">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SECURITY_EXCLUDE_FROM_IAST_SCAN_IAST_DETECTION_CATEGORY_COMMAND_INJECTION`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、IAST スキャンでのシステム コマンド インジェクション検出が無効になります。
  </Collapser>

  <Collapser id="security-exclude_from_iast_scan-iast_detection_category-xpath_injection" title="security.exclude_from_iast_scan.iast_detection_category.xpath_injection">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SECURITY_EXCLUDE_FROM_IAST_SCAN_IAST_DETECTION_CATEGORY_XPATH_INJECTION`
          </td>
        </tr>
      </tbody>
    </table>

    `true`場合、IAST スキャンでの XPATH インジェクション検出を無効にします。
  </Collapser>

  <Collapser id="security-exclude_from_iast_scan-iast_detection_category-ssrf" title="security.exclude_from_iast_scan.iast_detection_category.ssrf">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SECURITY_EXCLUDE_FROM_IAST_SCAN_IAST_DETECTION_CATEGORY_SSRF`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、IAST スキャンでのサーバー側リクエスト偽造 (SSRF) 検出を無効にします。
  </Collapser>

  <Collapser id="security-exclude_from_iast_scan-iast_detection_category-rxss" title="security.exclude_from_iast_scan.iast_detection_category.rxss">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SECURITY_EXCLUDE_FROM_IAST_SCAN_IAST_DETECTION_CATEGORY_RXSS`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、 IASTでの Reflected Cross-Site Script (RXSS) 検出を無効にします。
  </Collapser>

  <Collapser id="security-scan_schedule-delay" title="security.scan_schedule.delay">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            整数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `0`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SECURITY_SCAN_SCHEDULE_DELAY`
          </td>
        </tr>
      </tbody>
    </table>

    アプリケーションの起動後に IAST スキャンが開始されるまでの遅延時間 (分単位) を指定します。
  </Collapser>

  <Collapser id="security-scan_schedule-duration" title="security.scan_schedule.duration">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            整数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `0`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SECURITY_SCAN_SCHEDULE_DURATION`
          </td>
        </tr>
      </tbody>
    </table>

    IAST スキャンが実行される期間 (分単位) を示します。
  </Collapser>

  <Collapser id="security-scan_schedule-schedule" title="security.scan_schedule.schedule">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `""`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SECURITY_SCAN_SCHEDULE_SCHEDULE`
          </td>
        </tr>
      </tbody>
    </table>

    IAST スキャンをいつ実行するかを設定する cron 式を指定します。
  </Collapser>

  <Collapser id="security-scan_schedule-always_sample_traces" title="security.scan_schedule.always_sample_traces">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SECURITY_SCAN_SCHEDULE_ALWAYS_SAMPLE_TRACES`
          </td>
        </tr>
      </tbody>
    </table>

    `true`場合、IAST はバックグラウンドでトレース データを継続的に収集できます。セキュリティ エージェントは収集されたデータを使用して、スケジュールされた時間に IAST スキャンを実行します。
  </Collapser>

  <Collapser id="security-scan_controllers-iast_scan_request_rate_limit" title="security.scan_controllers.iast_scan_request_rate_limit">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            整数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `3600`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SECURITY_SCAN_CONTROLLERS_IAST_SCAN_REQUEST_RATE_LIMIT`
          </td>
        </tr>
      </tbody>
    </table>

    スキャンに 1 分あたりに許可される HTTP の最大数を設定します。requestsIAST12 から 3600 までの任意の整数が有効です。デフォルト値は 3600 です。
  </Collapser>

  <Collapser id="security-scan_controllers-scan_instance_count" title="security.scan_controllers.scan_instance_count">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            整数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `0`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SECURITY_SCAN_CONTROLLERS_SCAN_INSTANCE_COUNT`
          </td>
        </tr>
      </tbody>
    </table>

    IAST 分析を実行する特定のエンティティのアプリケーション インスタンスの数。
  </Collapser>

  <Collapser id="security-scan_controllers-report_http_response_body" title="security.scan_controllers.report_http_response_body">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SECURITY_SCAN_CONTROLLERS_REPORT_HTTP_RESPONSE_BODY`
          </td>
        </tr>
      </tbody>
    </table>

    `true`場合、HTTP 応答本文の送信が有効になります。これを無効にすると、Reflected Cross-Site スクリプト (RXSS) の脆弱性検出も無効になります。
  </Collapser>

  <Collapser id="security-iast_test_identifier" title="security.iast_test_identifier">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `nil`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SECURITY_IAST_TEST_IDENTIFIER`
          </td>
        </tr>
      </tbody>
    </table>

    CI/CD 環境で IAST を実行するときに、異なるテスト実行を区別するための一意のテスト識別子。たとえば、ビルド番号などです。
  </Collapser>
</CollapserGroup>

## サーバーレスモード [#serverless-mode]

<CollapserGroup>
  <Collapser id="serverless_mode-enabled" title="サーバーレスモードが有効">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SERVERLESS_MODE_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントは有効期間の短いサーバーレス機能での使用に適した合理化モードで動作します。 注意: 現在、 AWS Lambda 関数のみがサポートされており、このオプションは[New RelicのRuby Lambdaレイヤー](https://docs.newrelic.com/docs/serverless-function-monitoring/aws-lambda-monitoring/get-started/monitoring-aws-lambda-serverless-monitoring/)オファリングなしで使用するためのものではありません。
  </Collapser>
</CollapserGroup>

## Sidekiq [#sidekiq]

<CollapserGroup>
  <Collapser id="sidekiq-args-include" title="Sidekiq.args.include">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            配列
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SIDEKIQ_ARGS_INCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    どの Sidekiq ジョブ引数が New Relic に報告されるかをフィルタリングするためのホワイトリストとして集合的に機能する文字列の配列。Sidekiq 引数をキャプチャするには、「job.sidekiq.args.\*」別の `:'attributes.include'` 構成オプションに追加する必要があります。この配列内の各文字列は、高度なマッチングを可能にするために、 `Regexp.new` によって正規表現に変換されます。ジョブ引数ハッシュの場合、キーまたは値のいずれかが一致する場合、そのペアが含まれます。一致するすべてのジョブ引数配列要素とジョブ引数スカラーが含まれます。
  </Collapser>

  <Collapser id="sidekiq-args-exclude" title="Sidekiq.args.exclude">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            配列
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SIDEKIQ_ARGS_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    どの Sidekiq ジョブ引数が New Relic に報告されるかをフィルタリングするための拒否リストとして集合的に機能する文字列の配列。Sidekiq 引数をキャプチャするには、「job.sidekiq.args.\*」別の `:'attributes.include'` 構成オプションに追加する必要があります。この配列内の各文字列は、高度なマッチングを可能にするために、 `Regexp.new` によって正規表現に変換されます。ジョブ引数ハッシュの場合、キーまたは値のいずれかが一致する場合、そのペアは除外されます。一致するジョブ引数の配列要素とジョブ引数のスカラーはすべて除外されます。
  </Collapser>
</CollapserGroup>

## Slow SQL [#slow-sql]

<CollapserGroup>
  <Collapser id="slow_sql-enabled" title="slow_sql.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SLOW_SQL_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントは[低速のSQLクエリ](/docs/apm/applications-menu/monitoring/viewing-slow-query-details)を収集します。
  </Collapser>

  <Collapser id="slow_sql-explain_threshold" title="slow_sql.explain_threshold">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            浮く
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `0.5`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SLOW_SQL_EXPLAIN_THRESHOLD`
          </td>
        </tr>
      </tbody>
    </table>

    閾値を秒単位で指定します。エージェントは、このしきい値を超えた [低速の SQL クエリ](/docs/apm/applications-menu/monitoring/viewing-slow-query-details) と説明プランを収集します。
  </Collapser>

  <Collapser id="slow_sql-explain_enabled" title="slow_sql.explanation_enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SLOW_SQL_EXPLAIN_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントは低速のSQLクエリでExplainプランを収集します。この設定を省略すると、低速SQLのExplainプランのデフォルト設定として[`transaction_tracer.explain_enabled`](#transaction_tracer-explain_enabled)設定が適用されます。
  </Collapser>

  <Collapser id="slow_sql-record_sql" title="slow_sql.record_sql">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `obfuscated`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SLOW_SQL_RECORD_SQL`
          </td>
        </tr>
      </tbody>
    </table>

    低速 SQL クエリの難読化レベルを定義します。有効なオプションは`obfuscated` 、 `raw`または`none`です。
  </Collapser>

  <Collapser id="slow_sql-use_longer_sql_id" title="slow_sql.use_longer_sql_id">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SLOW_SQL_USE_LONGER_SQL_ID`
          </td>
        </tr>
      </tbody>
    </table>

    遅い SQL トレースの場合は、より長い`sql_id`を生成します。`sql_id`は、同様のクエリの集計に使用されます。
  </Collapser>
</CollapserGroup>

## スパンイベント [#span-events]

<CollapserGroup>
  <Collapser id="span_events-enabled" title="span_events.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SPAN_EVENTS_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、スパンイベントのサンプリングを有効にします。
  </Collapser>

  <Collapser id="span_events-queue_size" title="span_events.queue_size">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            整数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `10000`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SPAN_EVENTS_QUEUE_SIZE`
          </td>
        </tr>
      </tbody>
    </table>

    トレースオブザーバーにストリーミングする際にバッファするスパンイベントの最大数を設定します。
  </Collapser>

  <Collapser id="span_events-max_samples_stored" title="span_events.max_samples_stored">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            整数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `2000`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SPAN_EVENTS_MAX_SAMPLES_STORED`
          </td>
        </tr>
      </tbody>
    </table>

    * 単一の収集から報告されるスパン イベントの最大数を定義します。`1`から`10000`までの任意の整数が有効です。
    * [AI モニタリング](/docs/ai-monitoring/intro-to-ai-monitoring)のエージェントを構成する場合、最大値`10000`に設定します。これにより、エージェントが最大量のディストリビューティッド（分散）トレーシングを確実に捕捉します。
  </Collapser>
</CollapserGroup>

## 例外メッセージの除去 [#strip-exception-messages]

<CollapserGroup>
  <Collapser id="strip_exception_messages-enabled" title="strip_exception_messages.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_STRIP_EXCEPTION_MESSAGES_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    true の場合、エージェントは[許可されたクラス リスト](#strip_exception_messages-allowed_classes)内の例外を除くすべての例外からのメッセージを削除します。[高セキュリティモード](/docs/accounts-partnerships/accounts/security/high-security)では自動的に有効になります。
  </Collapser>

  <Collapser id="strip_exception_messages-allowed_classes" title="strip_exception_messages.allowed_classes">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `""`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_STRIP_EXCEPTION_MESSAGES_ALLOWED_CLASSES`
          </td>
        </tr>
      </tbody>
    </table>

    [strip\_exception\_messages](#strip_exception_messages-enabled)が`true`の場合に、エージェントが削除しない例外のリストを指定します。例外はコンマで区切ります。たとえば、 `"ImportantException,PreserveMessageException"` 。
  </Collapser>
</CollapserGroup>

## ストライプ [#stripe]

<CollapserGroup>
  <Collapser id="stripe-user_data-include" title="ストライプ.user_data.include">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            配列
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_STRIPE_USER_DATA_INCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    Stripe イベントの`user_data`ハッシュ内のどのキーを New Relic に報告するかを指定する文字列の配列。この配列内の各文字列は、高度な一致を可能にするために`Regexp.new`を介して正規表現に変換されます。値を`["."]`に設定すると、すべての`user_data`が報告されます。
  </Collapser>

  <Collapser id="stripe-user_data-exclude" title="ストライプ.user_data.exclude">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            配列
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_STRIPE_USER_DATA_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    Stripe イベントの`user_data`ハッシュ内のどのキーや値を New Relic に報告しないかを指定する文字列の配列。この配列内の各文字列は、高度な一致を可能にするために`Regexp.new`を介して正規表現に変換されます。各ハッシュ ペアについて、キーまたは値のいずれかが一致する場合、そのペアは報告されません。デフォルトでは、 `user_data`は報告されません。このオプションは、 `stripe.user_data.include`オプションも使用されている場合にのみ使用してください。
  </Collapser>
</CollapserGroup>

## スレッドプロファイラー [#thread-profiler]

<CollapserGroup>
  <Collapser id="thread_profiler-enabled" title="thread_profiler.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_THREAD_PROFILER_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、[スレッドプロファイラー](/docs/apm/applications-menu/events/thread-profiler-tool)の使用を有効にします。
  </Collapser>
</CollapserGroup>

## 活用 [#utilization]

<CollapserGroup>
  <Collapser id="utilization-detect_aws" title="utilization.detect_aws">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_UTILIZATION_DETECT_AWS`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはAWS環境で実行されていることを自動的に検出します。
  </Collapser>

  <Collapser id="utilization-detect_azure" title="utilization.detect_azure">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_UTILIZATION_DETECT_AZURE`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはAzure環境で実行されていることを自動的に検出します。
  </Collapser>

  <Collapser id="utilization-detect_docker" title="utilization.detect_docker">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_UTILIZATION_DETECT_DOCKER`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはDockerで実行されていることを自動的に検出します。
  </Collapser>

  <Collapser id="utilization-detect_gcp" title="utilization.detect_gcp">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_UTILIZATION_DETECT_GCP`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはGoogleCloudPlatform環境で実行されていることを自動的に検出します。
  </Collapser>

  <Collapser id="utilization-detect_kubernetes" title="utilization.detect_kubernetes">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_UTILIZATION_DETECT_KUBERNETES`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはKubernetesで実行されていることを自動的に検出します。
  </Collapser>

  <Collapser id="utilization-detect_pcf" title="utilization.detect_pcf">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_UTILIZATION_DETECT_PCF`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはPivotalCloudFoundry環境で実行されていることを自動的に検出します。
  </Collapser>
</CollapserGroup>