---
title: TraceMetadata（.NETエージェントAPI）
type: apiDoc
shortDescription: トレースをサポートするために使用されている現在の実行環境のプロパティを返します。
tags:
  - Agents
  - NET agent
  - NET agent API
metaDescription: New Relic .NET agent API call to attach custom attributes to your transaction data.
translationType: machine
---

## 構文

```cs
NewRelic.Api.Agent.TraceMetadata;
```

トレースをサポートするために使用されている現在の実行環境のプロパティを返します。

## 要件

Agentバージョン8.19以上。

すべてのアプリタイプに対応しています。

[意味のある値を得るためには、Distributed tracingを有効にする必要があります](/docs/agents/net-agent/configuration/net-agent-configuration#distributed_tracing) 。

## 説明

以下のプロパティへのアクセスを提供します。

### プロパティ

<table>
  <thead>
    <tr>
      <th width="25%">
        名前
      </th>

      <th>
        説明
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `TraceId`
      </td>

      <td>
        現在実行中のトレースを表す文字列を返します。トレース ID が利用できない場合、または分散トレースが無効になっている場合、値は`string.Empty`になります。
      </td>
    </tr>

    <tr>
      <td>
        `SpanId`
      </td>

      <td>
        現在実行中のスパンを表す文字列を返します。スパン ID を使用できない場合、または分散トレースが無効になっている場合、値は`string.Empty`になります。
      </td>
    </tr>

    <tr>
      <td>
        `IsSampled`
      </td>

      <td>
        現在のトレースが含めるためにサンプリングされている場合は`true`を返し、サンプリングされている場合は`false`を返します。
      </td>
    </tr>
  </tbody>
</table>

## 例

```cs
IAgent agent = NewRelic.Api.Agent.NewRelic.GetAgent();
TraceMetadata traceMetadata = agent.TraceMetadata;
string traceId = traceMetadata.TraceId;
string spanId = traceMetadata.SpanId;
bool isSampled = traceMetadata.IsSampled;
```