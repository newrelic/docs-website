---
title: TraceMetadata（.NETエージェントAPI）
type: apiDoc
shortDescription: トレースをサポートするために使用されている現在の実行環境のプロパティを返します。
tags:
  - Agents
  - NET agent
  - NET agent API
metaDescription: New Relic .NET agent API call to attach custom attributes to your transaction data.
translationType: machine
---

## 構文

```
NewRelic.Api.Agent.NewRelic.TraceMetadata;
```

トレースをサポートするために使用されている現在の実行環境のプロパティを返します。

## 要件

Agentバージョン8.19以上。

すべてのアプリタイプに対応しています。

[意味のある値を得るためには、Distributed tracingを有効にする必要があります](/docs/agents/net-agent/configuration/net-agent-configuration#distributed_tracing) 。

## 説明

以下のプロパティへのアクセスを提供します。

### プロパティ

<table>
  <thead>
    <tr>
      <th width="25%">
        名前
      </th>

      <th>
        説明
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        TraceId
      </td>

      <td>
        現在実行中のトレースを表す文字列を返します。トレースIDがない場合、または分散型トレースが無効な場合、値はstring.Emptyとなります。
      </td>
    </tr>

    <tr>
      <td>
        スパンId
      </td>

      <td>
        現在実行中のスパンを表す文字列を返します。スパンIDがない場合や分散型トレーシングが無効な場合は、string.Emptyが返されます。
      </td>
    </tr>

    <tr>
      <td>
        IsSampled
      </td>

      <td>
        戻り値 `真` 現在のトレースがサンプリングされて含まれている場合、 `偽` サンプリングされていない場合。
      </td>
    </tr>
  </tbody>
</table>

## 例

```
NewRelic.Api.Agent.IAgent Agent = NewRelic.Api.Agent.NewRelic.GetAgent();
var traceMetadata = Agent.TraceMetadata;
var traceId = traceMetadata.TraceId;
var spanId = traceMetadata.SpanId;
var isSampled = traceMetadata.IsSampled;
```