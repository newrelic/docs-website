---
title: C SDKの導入
tags:
  - Agents
  - C SDK
  - Get started
metaDescription: Learn how you can use New Relic C SDK's library and daemon to monitor your app's performance in Linux environments.
translationType: human
---

import apmCSDKArchitecture from 'images/apm_diagram_C-SDK-architecture.png'

<Callout
  variant="important"
  title="有効期限（EOL）の通知"
>
  2022年4月現在、C SDKを含む一部の機能のサポートを終了しています。 C++テレメトリーデータをNew Relicに送信する代わりに[OpenTelemetryを使用するオプション](/docs/apm/agents/c-sdk/get-started/otel_cpp_example)を検討してください。EOLの詳細については、[サポートフォーラムの投稿](https://discuss.newrelic.com/t/q1-bulk-eol-announcement-fy23/181744)をご覧ください。
</Callout>

C SDKは、しばしば複雑で、複数スレッドに基づくC/C++アプリケーションに対応するよう設計されています。新しいレベルの可視性が得られ、パフォーマンス上の問題を特定し解決しやすくなります。さらにデータを収集して分析し、顧客体験の向上およびビジネスにおけるデータ主導型の意思決定を支援することもできます。

C SDKは、CやC++よりも広範なアプリケーションをインストゥルメントするために使用できます。アプリケーションが[他のNew Relicでサポートされた他の言語](/docs/using-new-relic/welcome-new-relic/getting-started/glossary#agent)を使用しない場合でも、Cライブラリをインポートできれば、New RelicのC SDKを使用してNew Relicのモニタリング機能と特性を活用できます。

## Cアプリケーションの監視を開始 [#next-steps]

C SDKエージェントを使用するには:

1. アプリケーションが、C SDKに関する[互換性と要件](/docs/agents/c-sdk/get-started/c-sdk-compatibility-requirements)を満たしていることを確認します。
2. まだアカウントをお持ちできない場合は、[無料のNew Relicアカウントにサインアップ](https://newrelic.com/signup)してください。
3. ランチャーを使用、または[インストールとインストゥルメンテーションの手順](/docs/install-c-sdk-compile-link-your-code)に従い、エージェントをインストールします。数分以内に、アプリケーションから、New RelicアカウントのUIでデータを表示できるようになります。

<ButtonGroup>
  <ButtonLink
    role="button"
    to="/docs/agents/c-sdk/install-configure/install-c-sdk-compile-link-your-code"
    variant="link"
  >
    インストールドキュメントを読む
  </ButtonLink>

  <ButtonLink
    role="button"
    to="https://one.newrelic.com/launcher/nr1-core.settings?pane=eyJuZXJkbGV0SWQiOiJ0dWNzb24ucGxnLWluc3RydW1lbnQtZXZlcnl0aGluZyJ9&cards[0]=eyJuZXJkbGV0SWQiOiJzZXR1cC1uZXJkbGV0cy5zZXR1cC1jLWludGVncmF0aW9uIiwiYWNjb3VudElkIjoyNjQwNDA5fQ==&platform[accountId]=1"
    variant="primary"
  >
    Cデータを追加する
  </ButtonLink>
</ButtonGroup>

## アプリのパフォーマンスの監視 [#features]

使用アプリケーションがLinux環境でC SDKの[互換性と要件](/docs/c-agent-compatibility-requirements)を満たす場合は、ジェネリックライブラリをNew Relicと通信できるようにカスタマイズしてから、[APM](/docs/apm/new-relic-apm/getting-started/introduction-new-relic-apm)を使用してアプリのパフォーマンスのモニターを開始できます。

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        行えること
      </th>

      <th>
        設定方法
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        全体像の把握
      </td>

      <td>
        * アプリケーションとサービスのスループット、レスポンスタイム、エラー、メモリ、CPU使用トランザクションのモニターをするには、[APM**概要**ページ](/docs/apm/applications-menu/monitoring/apm-overview-page)から始め、その後に追加[APMダッシュボード](/docs/apm)でその他の詳細を調べます。
        * [デプロイメントマーカー](/docs/apm/new-relic-apm/maintenance/record-deployments)を使い、コードの変更がアプリケーションのパフォーマンスと健全性にどう影響するかを確認します。
        * [Infrastructureモニタリング](/docs/infrastructure/new-relic-infrastructure/getting-started/introduction-new-relic-infrastructure)を使用し、ホストとサーバーの詳細データを表示します。[Infrastructureエージェント](/docs/infrastructure/install-infrastructure-agent/get-started/install-infrastructure-agent-new-relic)とAPMを同じホストにインストールすると、それぞれを自動的に検出します。その後[APM UIでホストのリストを見て](/docs/infrastructure/new-relic-infrastructure/data-instrumentation/new-relic-apm-data-infrastructure)、Infrastructure UIでアプリによりInfrastructureホストをフィルタリングできます。
      </td>
    </tr>

    <tr>
      <td>
        エラーを特定し修正する
      </td>

      <td>
        * [エラー分析ツール](/docs/apm/applications-menu/error-analytics/introduction-error-analytics)を使用して、データベースの呼び出し、外部システムの呼び出し、重要なコード部分に費やされた時間を見てボトルネックを突き止めます。
        * ユーザーに影響が及ぶ前に、問題やエラーについて[アラート通知](/docs/alerts/new-relic-alerts/getting-started/introduction-new-relic-alerts)を受信します。
        * 重要なメトリクスに対して[カスタムダッシュボード](/docs/insights/use-insights-ui/explore-data/metric-explorer-search-chart-metrics-sent-new-relic-agents)を作成します。
      </td>
    </tr>

    <tr>
      <td>
        APMおよびインフラストラクチャデータのログを表示
      </td>

      <td>
        ログとアプリケーションのデータを統合して、トラブルシューティングをより簡単かつ迅速に行うことができます。別のUIページに切り替える必要はありません。

        * [コンテキストのログ](/docs/logs/logs-context/c-sdk-configure-logs-context/)では、エラーとトレースに関連するログメッセージをアプリケーションのUIで直接表示できます。
        * また、Kubernetesクラスタなど、[インフラストラクチャデータ](/docs/logs/forward-logs/forward-your-logs-using-infrastructure-agent/)のコンテキストでログを表示することもできます。
      </td>
    </tr>

    <tr>
      <td>
        ビジネスデータを分析する
      </td>

      <td>
        * ユーザー関連のデータの[クエリ](/docs/query-your-data/explore-query-data/query-builder/introduction-query-builder)を行い、ビジネスプロセスを改善する。
        * お客様のカスタムデータをNew Relicに送信します。
        * アプリケーションデータの[カスタムクエリ](/docs/query-data/nrql-new-relic-query-language/getting-started/introduction-nrql)を作成します。
        * データを作成し、[インタラクティブに視覚化](/docs/insights/use-insights-ui/manage-dashboards/create-edit-insights-dashboards)して共有します。
      </td>
    </tr>

    <tr>
      <td>
        これ以外にも！
      </td>

      <td>
        * [ブラウザモニタリング](/docs/browser/new-relic-browser/getting-started/introduction-new-relic-browser)を使用して、ページロードタイミングの問題、JavaScriptのエラー、セッショントレースのタイムラインなど、自分のアプリケーションを使っているユーザーがデスクトップで体験していることをモニターしトラブルシューティングします。
        * [Syntheticsモニタリング](/docs/synthetics/new-relic-synthetics/getting-started/introduction-new-relic-synthetics)を使用してウェブサイト、重要なビジネストランザクション、およびAPIエンドポイントをモニターするために、自動化されたスクリプト可能なツールを使用します。
        * [モバイルモニタリング](/docs/mobile-monitoring/new-relic-mobile/getting-started/introduction-new-relic-mobile)を使用して、AndroidおよびiOSアプリケーションのパフォーマンスの分析および微調整、クラッシュのトラブルシューティング、複数バージョンの比較、HTTPやその他のネットワークコンポーネントにおけるパフォーマンスの調査を行います。
      </td>
    </tr>
  </tbody>
</table>

## アーキテクチャー：Cライブラリとデーモン [#architecture]

C SDKは、以下の2つのコンポーネントに依拠して、使用アプリケーションからNew Relicへデータを送信します。

* C SDK呼び出し：このライブラリをダウンロードしてから、アプリケーションのコードに呼び出しとインストゥルメンテーションを追加します。これにより、自分にとって最も重要な種類のデータを特定しカスタマイズできるようになります。
* C SDKデーモン：これは、C SDK呼び出しからデータを蓄積し、New Relicに送信する別のバイナリです。これは、SDKとNew Relicとの間のプロキシとして機能します。

<img
  title="C SDK architecture"
  alt="C SDK architecture"
  src={apmCSDKArchitecture}
/>

<figcaption>
  **C SDKアーキテクチャー：**アプリケーションからNew Relicへデータを送信するには、アプリケーションのC SDKインストゥルメンテーションライブラリへの呼び出しを行う**前**に、デーモンを呼び出す必要があります。
</figcaption>

C SDKインストゥルメンテーションとデーモンが同時に稼働し、データをNew Relicに送信することにより、トランザクションに関するデータの表示とクエリが可能になります。使用アプリケーションとNew Relicの間のワークフローは、以下の順番で起こる必要があります。

1. デーモンとNew Relicの間で、HTTPSリンクが確立されます。デーモンはインストゥルメントされたアプリケーションを呼び出す前に、最初に呼び出す必要があります。
2. 次に、インストゥルメントされたアプリケーションとデーモンの間で、ソケットコミュニケーションが確立されます。これは、[`newrelic_new_app_config()`](https://newrelic.github.io/c-sdk/libnewrelic_8h.html#af067b3ff89a40b6fa417e18be5e847aa)および[`newrelic_create_app()`](https://newrelic.github.io/c-sdk/libnewrelic_8h.html#a61dd90439ae3cc5060021f6ab4701132)への正常な呼び出し後に発生します。

[`newrelic_create_app()`](https://newrelic.github.io/c-sdk/libnewrelic_8h.html#a61dd90439ae3cc5060021f6ab4701132)への呼び出しはノンブロッキングです。2つ目のパラメーターにより、ソケットコミュニケーションが適切に確立されるように、インストゥルメントされたアプリケーションが待つ時間を指定できます。例：

```
newrelic_app_t* app = newrelic_create_app(config, 10000);
```

デーモンの接続とアプリケーションのソケットコミュニケーションの両方が確立される前に、インストゥルメントされたアプリケーションがトランザクションを送信した場合、アプリケーションから報告されたデータは失われます。

## ソースコードのチェック [#source-code]

C SDKはオープンソースソフトウェアです。つまり、[ソースコードを参照](https://github.com/newrelic/c-sdk)して改善を送信、または独自のフォークを作成して構築できます。詳細については、[README ](https://github.com/newrelic/c-sdk/blob/main/README.md)を参照してください。