---
title: PHPエージェントの設定
tags:
  - Agents
  - PHP agent
  - Configuration
metaDescription: 'New Relic PHP agent configuration: How to edit newrelic.ini config settings (like app name, slow traces, parameters, log file levels, custom frameworks).'
freshnessValidatedDate: never
translationType: human
---

import apmPhpAgentConfigurationHierarchy from 'images/apm_diagram_php-agent-configuration-hierarchy.webp'

PHPエージェントには、レポートされたデータのタイプと量を微調整するための多くの設定があります。ほとんどのユーザーにとっては、デフォルト値で最善のオーバーヘッドと使用しやすさが実現されます。ただし、特定のニーズに対する設定は変更できます。

<Callout variant="important">
  INI設定を変更後は、必ずウェブサーバーを再起動してください。再起動しないと、[すぐに有効になりません](/docs/agents/php-agent/troubleshooting/ini-settings-not-taking-effect-immediately)。
</Callout>

## 優先度の設定 [#config-options-precedence]

以下の簡単な図は、PHPエージェントが設定で従う優先度です。[サーバー側の設定](/docs/agents/manage-apm-agents/configuration/server-side-agent-configuration)には適用されません。PHPエージェントを使用してアプリのUIで変更できる唯一の値は、アプリのエイリアスとApdex-T値です。

<img
  title="php-config-order.png"
  alt="php-config-order.png"
  src={apmPhpAgentConfigurationHierarchy}
/>

<figcaption>
  New RelicのPHPエージェントを使用すると、API設定は[ディレクトリごとの設定](/docs/agents/php-agent/configuration/php-directory-ini-settings)を上書きします。ディレクトリごとの設定は、`php.ini`ファイル設定を上書きします。サーバー側の設定には適用されません。
</figcaption>

## 設定ファイルの変数 [#inivar-background]

インストール中、[`newrelic-install`](/docs/agents/php-agent/installation/newrelic-install-script)スクリプトは、作成された設定ファイルまたは編集が必要なファイルのリストについての情報を提供します。デフォルトでは、`newrelic.ini`という名前の設定ファイルを作成しようとします。

場合によっては、設定オプションを`php.ini`ファイルに追加するよう指示されます。必要に応じて、そうしてください。どのファイルを編集する必要があるかは、PHPの特定のバージョン（1つまたは複数）が設定されている方法によって異なります。

2つの最も一般的な設定は、次のとおりです。

* 単一の`newrelic.ini`ファイルを使用します。特別のオプションなしでPHPを自分でインストールまたはコンパイルした場合は、これが通常デフォルトとなります。
* すべての`.ini`ファイルについて所定のディレクトリをスキャンします。

どのファイルを編集するか分からない場合：

* コマンドラインから、`php -i`の出力を見直します。

* ブラウザで、次のスクリプトを含むページの出力を見直します：

  ```php
  <?php phpinfo(); ?>
  ```

* `newrelic.ini`ファイルが表示されたら、それを使用します。

## 変数の範囲 [#inivar-scope]

`newrelic.ini`ファイルの各変数には、定義された範囲があります。範囲は、設定をどこで確立または変更できるかを制御します。

New Relic設定にサポートされている2つの範囲は、次のとおりです。

* **SYSTEM**：値はグローバル`newrelic.ini`ファイルでグローバルに設定されます。
* **PERDIR**: 値は[ディレクトリごと](/docs/agents/php-agent/configuration/php-directory-ini-settings)に設定されます。

それぞれを、より一般的なレベルで設定することもできます。それぞれの有効なロケーションは、次のとおりです。

<table>
  <thead>
    <tr>
      <th width={275}>
        **以下について設定できます。**
      </th>

      <th>
        SYSTEM
      </th>

      <th>
        PERDIR
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        グローバル`newrelic.ini`ファイルで設定します。
      </td>

      <td>
        <Icon
          style={{color: '#328787'}}
          name="fe-check"
        />
      </td>

      <td>
        <Icon
          style={{color: '#328787'}}
          name="fe-check"
        />
      </td>
    </tr>

    <tr>
      <td>
        ディレクトリごとに設定します。
      </td>

      <td/>

      <td>
        <Icon
          style={{color: '#328787'}}
          name="fe-check"
        />
      </td>
    </tr>
  </tbody>
</table>

<Callout variant="important">
  New Relic設定に、`ini_set()`は使用できません。
</Callout>

## 変数のタイプ [#inivar-type]

`newrelic.ini`ファイルの各変数には、定義されたタイプがあります。タイプによって使用する値の構文が指定されます。

<table>
  <thead>
    <tr>
      <th width={100}>
        **変数のタイプ**
      </th>

      <th>
        **フォーマットと内容**
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        **文字列**
      </td>

      <td>
        文字列値には、英数字とピリオドを含めることができます。値は引用符で区切られます。
      </td>
    </tr>

    <tr>
      <td>
        **ブール値**
      </td>

      <td>
        論理的な真偽設定。有効な値は、次のとおりです。

        * trueまたはenabledの場合：`on`、`true`、番号`1`。
        * falseまたはdisabledの場合：`off`、`false`、番号`0`。
      </td>
    </tr>

    <tr>
      <td>
        **数**
      </td>

      <td>
        数値には、桁数に加え、フロートを表すピリオドのみを含めることができます。別途記載がある場合を除き、すべての数字はフロートではなく整数です。
      </td>
    </tr>

    <tr>
      <td>
        **期間**
      </td>

      <td>
        期間を表す、引用符で区切られた文字列の値。文字フラグを使用して、時間コンポーネントを区切ります。フラグがない場合、時間はミリ秒となります。

        * `w`\\= 週数

        * `d`\\= 日数

        * `h`\\= 時間

        * `m`\\= 分

        * `s`\\= 秒

        * `ms`\\= ミリ秒

        * `us`\\= マイクロ秒

          期間の例：

        * `"1w3d23h10m"`\\= 1週、3日、23時間、10分

        * `"5h30m"`\\= 5時間30分

        * `"500"`\\= 500ミリ秒
      </td>
    </tr>
  </tbody>
</table>

## 一般構成設定 [#inivar-settings]

これらの設定は、`newrelic.ini`ファイルで使用できます。

<CollapserGroup>
  <Collapser
    id="inivar-appname"
    title="newrelic.appname （強く推奨）"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            文字列（引用符を使用）
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `"PHP Application"`
          </td>
        </tr>
      </tbody>
    </table>

    この設定オプションで、APMでデータがレポートされるアプリケーション名が設定されます。混同や非意図的なデータの集計を避けるために、デフォルト名を分かりやすい名前に置き換えることを強く推奨します。同じ名前のすべてのアプリケーションのデータは、New Relicにマージされるため、この設定は慎重に行ってください。

    ディレクトリごとの設定を含むすべてのアプリケーション命名オプションについては、[PHPアプリケーションの命名](/docs/agents/php-agent/configuration/name-your-php-application)を参照してください。

    設定の値は、最大で3つのアプリケーション名をセミコロンで区切ったリストです。リストの最初の名前は、**主たる**アプリケーション名です。各アカウントに[一意でなければなりません](/docs/apm/new-relic-apm/installation-configuration/name-your-application#app-name)。アプリケーション名は、キャッシュへのキーとして使用されます。[アプリに複数の名前](/docs/agents/manage-apm-agents/app-naming/use-multiple-names-app)を使用する場合、New Relicはキャッシングに最初の名前のみを使用します。したがって、各アプリケーション名は、最初の要素として**一度**しか表示されません。

    <CollapserGroup>
      <Collapser
        id="cache-example"
        title="キャッシング例"
      >
        `newrelic.appname="App1;App2"`を設定し、後でコードセット`newrelic.appname="App1;App3"`で設定すると、2番目のコードが機能しなくなります。キャッシングのため、**App1**と**App2**にレポートします。
      </Collapser>
    </CollapserGroup>

    [アプリケーション名を重複](/docs/agents/manage-apm-agents/app-naming/use-multiple-names-app)させる必要がある場合は、共通のアプリケーション名を第二または第三の位置に設定します。例：`newrelic.appname="App2;App1"`と`newrelic.appname="App3;App1"`。たとえば、アプリケーションのスーパーセットを追跡する場合にこれは有用です。
  </Collapser>

  <Collapser
    id="inivar-capture_params"
    title="newrelic.capture_params"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    <Callout variant="caution">
      この設定は非推奨となっており、想定どおりに動作しない場合があります。代わりに、[属性プロパティ](/docs/agents/php-agent/attributes/enable-or-disable-attributes#deprecated-properties)を使用します。
    </Callout>

    この値をプログラムで設定するには、[`newrelic_capture_params()`](/docs/agents/php-agent/php-agent-api/newrelic_capture_params) API関数を使用します。

    機密情報をURLで直接渡す場合は、これを無効にしてください。

    `true`に設定すると、トランザクショントレースでURL（URLの`?`の後のすべて）を介してPHPスクリプトに渡されたパラメーターの記録が有効になります。これらは、トランザクショントレースを表示すると、**パラメーター**ドロップダウンに表示されます。
  </Collapser>

  <Collapser
    id="inivar-framework"
    title="newrelic.framework"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            文字列（引用符を使用）
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            （自動検出）
          </td>
        </tr>
      </tbody>
    </table>

    New Relic PHPエージェントは、サポートしているフレームワークは自動的に検出しますが、実験的な新バージョンを使用している、またはフレームワークをカスタマイズしている場合は、問題が発生することがあります。この設定では、エージェントに指定のフレームワークに従いトランザクションに名前を付けるよう指示するのではなく、フレームワークの自動検知は無効になります。

    `"no_framework"`を指定すると、フレームワーク関連のトランザクションのネーミングがすべて無効になります。

    必要に応じて、次の値のいずれかを使用します。

    * `"cakephp"`

    * `"codeigniter"`

    * `"drupal"` （Drupal 6および7の場合）

    * `"drupal8"` （Drupal 8および9の場合）

    * `"joomla"`

    * `"laravel"`

    * `"magento"`

    * `"magento2"`

    * `"mediawiki"`

    * `"slim"`

    * `"symfony2"` （Symfony 3の場合 - Symfony 2.xはサポートされていません）

    * `"symfony4"` （Symfony 4および5の場合）

    * `"wordpress"`

    * `"yii"`

    * `"zend"`

    * `"zend2"` （Zendフレームワーク2および3の場合）

    * `"no_framework"` （1つが検出された場合でもフレームワークを強制しない）

      フレームワークの自動検知に失敗すると、このコマンドも失敗します。

      <Callout variant="tip">
        対応のフレームワークに関する最新情報については、[PHPの互換性ページ](/docs/apm/agents/php-agent/getting-started/php-agent-compatibility-requirements/)を確認してください。
      </Callout>
  </Collapser>

  <Collapser
    id="inivar-ignored_params"
    title="newrelic.ignored_params"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            文字列（引用符を使用）
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `""`
          </td>
        </tr>
      </tbody>
    </table>

    <Callout variant="caution">
      この設定は非推奨となっており、想定どおりに動作しない場合があります。代わりに、[属性プロパティ](/docs/agents/php-agent/attributes/enable-or-disable-attributes#deprecated-properties)を使用します。
    </Callout>

    `newrelic.ignored_params`設定を使用して、New Relic Serversに送信されたパラメーターのリストから除外されるパラメーター名のカンマ区切りされたリストを指定します。引用符で文字列の値を囲います。

    [`newrelic.capture_params`](#inivar-capture_params)でパラメーターのキャプチャを有効にした場合、New Relicによってキャプチャされたくない、またはトランザクションのトレースに表示したくない機密性の高いユーザーデータを持つパラメーターがある可能性がります。これを使用して、このデータの記録をブロックします。
  </Collapser>

  <Collapser
    id="inivar-license"
    title="newrelic.license （必須）"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            文字列（引用符を使用）
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `""`
          </td>
        </tr>

        <tr>
          <th>
            メモ：
          </th>

          <td>
            エージェントバージョン3.0で導入されました。
          </td>
        </tr>
      </tbody>
    </table>

    使用するNew Relic<InlinePopover type="licenseKey"/>を設定します。マルチテナントシステムでは、これはディレクトリごとに設定できます。

    <Callout variant="tip">
      旧エージェントバージョンから3.0以上にアップグレードすると、ライセンスは（理由を説明するコメントとともに）デーモン設定ファイルから削除され、ファイル`/etc/newrelic/upgrade_please.key`に保存されます。そのファイルからライセンスをコピーし、`newrelic.ini`ファイルに設定します。`upgrade_please.key`ファイルを削除します。
    </Callout>
  </Collapser>

  <Collapser
    id="inivar-loglevel"
    title="newrelic.loglevel"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            SYSTEM
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            文字列（引用符を使用）
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `"info"`
          </td>
        </tr>
      </tbody>
    </table>

    ログファイルに送信されたメッセージの詳細レベルを設定します。詳細度が低い順での可能な値は、次のとおりです。

    * `error`

    * `warning`

    * `info`

    * `verbose`

    * `debug`

    * `verbosedebug`

      エージェントの問題をNew Relicテクニカルサポートに報告する場合は、`verbosedebug`が最も有用な設定です。ただし、これにより多くの情報が非常に迅速に生成されるため、発生している問題の再現にかかる時間以上に、[`verbosedebug`レベルでエージェントを保存しない](/docs/agents/php-agent/troubleshooting/generating-logs-troubleshooting-php)ようにしてください。

      エージェントの問題をNew Relicテクニカルサポートに報告する際、これをカスタムレベルに設定し、特定のサブシステムについてのみデバッグを有効にするよう求められる場合があります。カスタムレベルは本ドキュメントの範囲外です。
  </Collapser>

  <Collapser
    id="inivar-tt-detail"
    title="newrelic.transaction_tracer.detail"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `1`
          </td>
        </tr>

        <tr>
          <th>
            メモ：
          </th>

          <td id="inivar-tt-top100">
            これは以前は`newrelic.transaction_tracer.top100`でした。
          </td>
        </tr>
      </tbody>
    </table>

    トランザクショントレースで詳細のレベルを設定します。

    * `1`に設定すると、すべてのサーバーの呼び出しがトレースされます。

    * `0`に設定すると、トレースにはNew Relicにより内部でインストゥルメントされた呼び出しと、[`newrelic.transaction_tracer.custom`](#inivar-tt-custom)を使用してユーザーが定義した呼び出しのみが含まれます。

      デフォルトのレベル`1`は、パフォーマンスに影響を与えます。パフォーマンスを改善する必要がある場合、詳細レベルを`0`に設定するようにしてください。

      すべてのサーバーの呼び出しをトレースしていない場合、トランザクショントレースの時間のブロックには**インストゥルメントされていない時間**とラベルが付けられ、特定の関数（エージェントにより内部で定義）のみがインストゥルメントされます。すべての呼び出しをレポートする場合でも、トレースに[インストゥルメントされない時間](/docs/agents/php-agent/troubleshooting/uninstrumented-time-traces)がある場合があります。
  </Collapser>

  <Collapser
    id="inivar-high-security"
    title="newrelic.high_security"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            SYSTEM
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    すべてのアプリケーションについて高セキュリティを有効にします。高セキュリティを`true`に設定すると、次の動作が有効になります。

    * newrelic-daemonが安全な接続（HTTPS）を使用している場合を除き、データはNew Relicに送信されません。PHPプロセスがnewrelic-daemonを作成する場合、`newrelic.daemon.ssl`の値にかかわらずHTTPSを使用するよう設定されます。

    * 行のクエリ文字列は、`newrelic.transaction_tracer.record_sql`の値にかかわらず収集されることはありません。

    * リクエスト属性は、`newrelic.attributes`の設定にかかわらず取得されることはありません。

    * [`newrelic_add_custom_parameter`](/docs/agents/php-agent/php-agent-api/newrelic_add_custom_parameter)および[`newrelic_set_user_attributes`](/docs/agents/php-agent/php-agent-api/newrelic_set_user_attributes) API関数は効果がなく、`false`を返します。

    * [`newrelic_record_custom_event`](/docs/agents/php-agent/php-agent-api/newrelic_record_custom_event) API関数は[New Relic](/docs/insights/new-relic-insights/understanding-insights/new-relic-insights)にイベントを送信しません。

    * エージェントはエラーから例外メッセージを除去します。

      <Callout variant="caution">
        `newrelic.high_security`設定を変更する場合、APMユーザーインタフェースでセキュリティ設定**も**変更する必要があります。2つの設定が一致しない場合、データは収集されません。詳細については、[高セキュリティ](/docs/subscriptions/high-security)を参照してください。
      </Callout>
  </Collapser>

  <Collapser
    id="inivar-labels"
    title="newrelic.labels"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            文字列（引用符を使用）
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `""`
          </td>
        </tr>
      </tbody>
    </table>

    [タグ](/docs/apm/new-relic-apm/maintenance/labels-categories-organize-your-apps-servers)を追加します。

    **タグの例**

    ```ini
    "Server:One;Data Center:Primary"
    ```
  </Collapser>

  <Collapser
    id="inivar-process_host-display_name"
    title="newrelic.process_host.display_name"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            SYSTEM
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            文字列（引用符を使用）
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `""`
          </td>
        </tr>
      </tbody>
    </table>

    [APM UIに表示される](/docs/apm/new-relic-apm/maintenance/add-rename-remove-hosts#display_name). ホスト名を設定します。設定すると、エージェントが自動的に取得するデフォルトのホスト名が上書きされます。
  </Collapser>
</CollapserGroup>

New Relic CodeStreamを使用してIDEからパフォーマンスを監視する場合は、[リポジトリをサービスに関連付け](/docs/codestream/how-use-codestream/performance-monitoring#repo-association)、[ビルドSHAまたはリリースタグをエラーに関連付ける](/docs/codestream/how-use-codestream/performance-monitoring#buildsha)必要があります。

## Daemon .ini 設定 [#inivar-daemon-settings]

これらの設定の値は、デーモン起動を制御します。デーモンの起動が必要なことをエージェントが検知すると、これらのオプションが、デーモンに適切なコマンドラインオプションに変換します。

これらのすべての設定は、`newrelic.cfg`ファイルの設定を反映します。すべての .ini設定を1か所に保管するため、これらはここで繰り返されます。`newrelic.cfg`の各設定ではここに、プレフィックスとして`newrelic.daemon.`が付いた相手があります。たとえば、`newrelic.cfg`の`ssl`設定は.iniファイルの`newrelic.daemon.ssl`です。

<Callout variant="important">
  ファイル`/etc/newrelic/newrelic.cfg`がある場合、エージェントはこれらの設定を無視し、デーモンを自動的に起動**しません**。
</Callout>

デーモンの起動方法および外部設定ファイルをいつ使用するかの詳細については、[PHPデーモン起動モード](/docs/agents/php-agent/installation/starting-php-daemon)を参照してください。

<CollapserGroup>
  <Collapser
    id="inivar-daemon-app_timeout"
    title="newrelic.daemon.app_timeout"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            SYSTEM
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            時間仕様文字列は、たとえば、`"5m"`または `"1h20m"`
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `"10m"`
          </td>
        </tr>
      </tbody>
    </table>

    アプリケーションが非アクティブと見なされてからの経過時間を設定します。非アクティブアプリケーションは、アプリケーションの上限250にはカウントされません。許容単位は`"ns"`、`"us"`、`"ms"`、`"s"`、`"m"`、および`"h"`です。

    値`0`は、「タイムアウトなし」と解釈されます。これにより、新規アプリケーションは常にアプリケーションの上限250に対しカウントされ、デーモンはアプリケーションごとに少量のメモリをオペレーティングシステムに解放できなくなります。

    **推奨:** New Relic Supportの要請がある場合を除き、この値は使用しないでください。代わりに、時折行われるバックグラウンドトランザクションには、間隔の2倍の値を使用してください。たとえば、1時間ごとのバックグラウンドジョブでは、タイムアウトを2時間に設定します。
  </Collapser>

  <Collapser
    id="inivar-daemon-app_connect_timeout"
    title="newrelic.daemon.app_connect_timeout"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            SYSTEM
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            時間仕様文字列は、たとえば、`"1s"`または `"5m"`
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `"0"`
          </td>
        </tr>
      </tbody>
    </table>

    アプリケーションに接続するデーモンに対する、エージェントの最大待ち時間を設定します。値が`"0"`の場合、エージェントはデーモンへの接続を1回しか試みません。許容単位は`"ns"`、`"us"`、`"ms"`、`"s"`、`"m"`、および`"h"`です。

    このタイムアウトが設定されていると、デーモンがまだバックエンドに接続していない場合、エージェントはただちにトランザクションを停止せず、デーモンに接続を確立する時間を許可します。

    **推奨：**タイムアウトを設定する場合、推奨値は`"15s"`です。接続に問題がある場合、エージェントはすべてのトランザクション開始時に所定のタイムアウトをブロックするため、時間のかかるバックグラウンドタスクのインストゥルメントをしている場合にのみこのタイムアウトを設定してください。
  </Collapser>

  <Collapser
    id="inivar-daemon-auditlog"
    title="newrelic.daemon.auditlog"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            SYSTEM
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            文字列（引用符を使用）
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `""`
          </td>
        </tr>
      </tbody>
    </table>

    設定では、監査ログの名前を指定します。ログには、完全なURL、日付、時間、各リクエストのエンコード化されていない非圧縮データを含む、デーモンからNew Relicサーバーに送信されたすべてのデータが含まれます。

    このファイルは、デーモンのログと同じファイルにはできません。

    <Callout variant="important">
      この監査ログは、非常に短時間で非常に大きくなる場合があります。長期間`newrelic.daemon.auditlog`設定を使用しないようにしてください。システムアドミニストレーターがセキュリティレビューを行い、どのデータが転送されるかを正確に観察できるようにすることが、主な目的です。
    </Callout>
  </Collapser>

  <Collapser
    id="inivar-daemon-collector"
    title="newrelic.daemon.collector_host"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            SYSTEM
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            文字列（引用符を使用）
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `"collector.newrelic.com"`
          </td>
        </tr>
      </tbody>
    </table>

    <InlinePopover type="licenseKey"/>の確認およびエージェントデータの送信のためにデーモンが連絡するコレクターホストの名前とオプションのポートを設定します。

    これは、単にホストの名前または`"hostname:port"`形式のポート番号のいずれかです。 ポート番号`0`を指定すると、デフォルトポート80を使用します。

    <Callout variant="caution">
      New Relic Supportからのガイダンスなしに、この値を変更しないでください。
    </Callout>
  </Collapser>

  <Collapser
    id="inivar-daemon-launch"
    title="newrelic.daemon.dont_launch"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            SYSTEM
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `0`
          </td>
        </tr>
      </tbody>
    </table>

    エージェントの起動前にデーモンを外部で起動したい場合は、この値により、エージェントがデーモンの起動をいつ許可されるかが決まります。

    * `0`：デーモンの起動には制限はなく、エージェントはデーモンをいつでも起動できます。

    * `1`：非コマンドライン（Apacheやphp-fpmなど）エージェントは、デーモンを起動できます。

    * `2`：コマンドラインエージェントのみが、デーモンを起動できます。

    * `3`：このエージェントはデーモンを起動することはありません。`newrelic.cfg`を介してデーモンを設定しており、エージェント以外から起動している場合は、この設定を使用します。

      <Callout variant="important">
        `/etc/newrelic/newrelic.cfg`がある場合、エージェントは、エージェントを介してではなく、起動スクリプトによりデーモンが起動されるものと仮定します。この設定は、`newrelic.cfg`に影響を与えず、そこに表示されません。
      </Callout>
  </Collapser>

  <Collapser
    id="inivar-daemon-location"
    title="newrelic.daemon.location"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            SYSTEM
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            文字列（引用符を使用）
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `"/usr/bin/newrelic-daemon"`
          </td>
        </tr>
      </tbody>
    </table>

    起動可能なデーモンの名前を設定します。

    この変数は、デーモンが実行可能なファイルへのフルパスを特定します。標準パッケージを使用してNew Relicシステムがインストールされた場合、デフォルトの場所は正しいものとなります。tar配布を使用してカスタムの場所にインストールした（かつ`/usr/bin`への書き込み許可がない）場合、デーモンは別の場所にある場合があります。

    この設定はPHPにのみ関連しているため、`newrelic.cfg`ファイルには表示されません。

    <Callout variant="important">
      OpenSolarisでは、`/usr`は多くの場合読み取り専用ファイルシステムです。OpenSolarisのデフォルトのデーモンの場所は`/opt/newrelic/bin/newrelic-daemon`です。
    </Callout>
  </Collapser>

  <Collapser
    id="inivar-daemon-logfile"
    title="newrelic.daemon.logfile"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            SYSTEM
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            文字列（引用符を使用）
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `"/var/log/newrelic/newrelic-daemon.log"`
          </td>
        </tr>
      </tbody>
    </table>

    デーモン固有のログメッセージを記録するためのログファイルの名前を設定します。デーモンがこのファイルに書き込める必要があります。一般的には、Apacheユーザーの場合、Apache自体が起動するとデーモンが起動されるため、Apacheプロセスを実行しているユーザーがファイルに書き込みできることを確認してください。

    <Callout variant="caution">
      デーモンのログファイルに書き込みできない場合は、デーモンは自動的に起動せず、データのレポートは行われません。

      誰がデーモンを起動できるかを制限する手段として、このファイルへの書き込み許可を使用できます。
    </Callout>
  </Collapser>

  <Collapser
    id="inivar-daemon-loglevel"
    title="newrelic.daemon.loglevel"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            SYSTEM
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            文字列（引用符を使用）
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `"info"`
          </td>
        </tr>
      </tbody>
    </table>

    New Relicのデーモンのログファイルに記録されるメッセージの詳細レベルを設定します。詳細の度合いが低い順の、可能な値は次のとおりです。

    * `error`

    * `warning`

    * `info`

    * `healthcheck`

    * `debug`

      設定が詳細なほど、多くの情報を非常に迅速に生成できます。`healthcheck`は、接続済みアプリケーションの正確な数を記録します。必要に応じて、問題を特定するために短期間の`debug`を設定します。
  </Collapser>

  <Collapser
    id="inivar-daemon-pidfile"
    title="newrelic.daemon.pidfile"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            SYSTEM
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            文字列（引用符を使用）
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            （OSにより異なります）
          </td>
        </tr>
      </tbody>
    </table>

    デーモンがプロセスID（pid）を記録するファイルの名前を設定します。

    このファイルは、デーモンがすでに実行中かどうか判断するため、デーモン起動とシャットダウンスクリプトが使用します。
  </Collapser>

  <Collapser
    id="inivar-daemon-port"
    title="newrelic.daemon.address（newrelic.daemon.portのエイリアス）"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            SYSTEM
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            文字列または数字
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `"@newrelic"` Linuxの場合、それ以外の場合は`"/tmp/.newrelic.sock"`
          </td>
        </tr>
      </tbody>
    </table>

    <Callout variant="tip">
      [v9.2.0.247](/docs/release-notes/agent-release-notes/php-release-notes/php-agent-920247)から、PHPエージェントは新たな設定である`newrelic.daemon.address`をサポートします。この設定は、`newrelic.daemon.port`のエイリアスとなるものです。New Relic PHPデーモンの場所を指定する場合にも使用できます。両方の値が設定された場合、`newrelic.daemon.address`が優先されます。
    </Callout>

    エージェントからデーモンへの通信用にソケットエンドポイントが設定されます。

    これは4つの方法で指定できます。

    * UNIXドメインソケット（UDS）として指定されたファイルを使用するには、文字列として**絶対**パス名を入力します。これが、Linux以外のシステムではデフォルトです。

    * 標準のTCPポートを使用するには、1から65534の範囲で数字を指定します。

    * 抽象ソケットを使用するには、値`@newrelic-daemon`（エージェントバージョン[5.2.0.141](/docs/release-notes/agent-release-notes/php-release-notes/php-agent-520141)以上で使用可能）を使用します。これが、Linuxシステムではデフォルトです。

    * 別のホストで実行中のデーモンに接続するには（[コンテナ環境](/docs/agents/php-agent/advanced-installation/install-php-agent-docker)で有用）、この値を`host:port`に設定します。ここで、`host`はホスト名またはIPを表し、`port`は有効なポート番号を表します。IPv4とIPv6の両方がサポートされています。これは、エージェントバージョン9.2.0.247以上で使用できます。

      <Callout variant="caution">
        エージェントからデーモンに転送されたデータは暗号化**されません**。唯一の例外は、データをデーモンに送信する前に行われる[SQL難読化](/docs/agents/php-agent/configuration/php-agent-configuration#inivar-tt-sql)です。当社では、エージェントとデーモンとの間ではプライベートネットワーク接続のみを使用することを推奨しています（これは、エージェントとデーモンが別のホストで実行中の場合にのみ適用されます）。
      </Callout>

      ポート番号を使用する場合、Unixシステムでは、ポートは1から1023の範囲にあり、デーモンはスーパーユーザーとして実行する必要があります。デーモンが標準以外のポートを使用する場合、この変数は、エージェントがデーモンとの通信に使用するポート番号も設定します。

      <Callout variant="important">
        デーモンについて`newrelic.cfg`起動メカニズムを使用中の場合は、この設定とそのファイルの[`address`](/docs/agents/php-agent/configuration/proxy-daemon-newreliccfg-settings#cfgvar-port)設定は一致する必要があります。
      </Callout>
  </Collapser>

  <Collapser
    id="inivar-daemon-proxy"
    title="newrelic.daemon.proxy"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            SYSTEM
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            文字列（引用符を使用）
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `""`
          </td>
        </tr>
      </tbody>
    </table>

    イグレスプロキシとして使用するホストとユーザー認証情報を設定します。

    これは、New Relicデータ収集サーバーにアクセスするために、サイトでプロキシが必要な場合にのみ使用します。プロキシ設定に応じて、次のいずれかの形態となります。

    * `hostname`

    * `hostname:port`

    * `user@hostname`

    * `user@hostname:port`

    * `user:password@hostname`

    * `user:password@hostname:port`

    * `proxytype://user:password@hostname:port`

      別のproxytypeが指定されている場合を除き、HTTPのプロキシタイプとなります。その場合、proxytypeは、http、socks4、socks4a、socks5のいずれかに設定できます。
  </Collapser>

  <Collapser
    id="inivar-daemon-ssl"
    title="newrelic.daemon.ssl"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            SYSTEM
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    この設定はPHPエージェントバージョン8.0以上では無視され、常にHTTPSを使用してNew Relicと通信します。

    PHPエージェントバージョンが8.0以下の場合、New Relicコレクターとの通信で安全なHTTP接続を使用するかどうかが制御されます。エージェントはデフォルトでHTTPSを介してNew Relicと通信します。New Relicは、 APMとNew Relic REST APIへのすべてのトラフィックに[HTTPSを要求](/docs/apis/rest-api-v2/troubleshooting/301-response-rest-api-calls)します。
  </Collapser>

  <Collapser
    id="inivar-daemon-ssl-ca-bundle"
    title="newrelic.daemon.ssl_ca_bundle"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            SYSTEM
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            文字列（引用符を使用）
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `""`
          </td>
        </tr>
      </tbody>
    </table>

    PEM形式のCA証明書を含むファイルの場所を設定します。設定すると、このファイルの証明書を使用して、New Relicコレクターが認証されます。ほとんどの場合、CAバンドの設定は不要です。New Relic PHPエージェントには、必要なCA証明書が同梱されます。

    [`newrelic.daemon.ssl_ca_path`](#inivar-daemon-ssl-ca-path)も設定している場合、このファイルの証明書が最初に検索され、次に`newrelic.daemon.ssl_ca_path`ディレクトリに含まれる証明書が検索されます。

    [`newrelic.daemon.ssl`](#inivar-daemon-ssl)が`false`に設定されている場合、この設定には影響しません。
  </Collapser>

  <Collapser
    id="inivar-daemon-ssl-ca-path"
    title="newrelic.daemon.ssl_ca_path"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            SYSTEM
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            文字列（引用符を使用）
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `""`
          </td>
        </tr>
      </tbody>
    </table>

    PEM形式の信頼されるCA証明書を含むディレクトリの場所を設定します。設定すると、このディレクトリの証明書を使用して、New Relicコレクターが認証されます。ほとんどの場合、CAパスの設定は不要です。New Relic PHPエージェントには、必要なCA証明書が同梱されます。

    また、[`newrelic.daemon.ssl_ca_bundle`](#inivar-daemon-ssl-ca-bundle)が設定されている場合は、最初に検索された後、`newrelic.daemon.ssl_ca_path`に含まれる証明書が検索されます。

    [`newrelic.daemon.ssl`](#inivar-daemon-ssl)が`false`に設定されている場合、この設定には影響しません。
  </Collapser>

  <Collapser
    id="inivar-daemon-start_timeout"
    title="newrelic.daemon.start_timeout"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            SYSTEM
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            時間仕様文字列は、たとえば、`"1s"`または `"5m"`
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `"0"`
          </td>
        </tr>
      </tbody>
    </table>

    デーモン起動がトリガーされた後に、エージェントが待機する必要がある最大時間を設定します。値を`"0"`にすると、エージェントは待機しません。許容単位は`"ns"`、`"us"`、`"ms"`、`"s"`、`"m"`および`"h"`です。

    指定されたタイムアウト値は、`--wait-for-port`フラグを介してデーモンに渡されます。これにより、ソケットの取得、またはタイムアウト時間が経過するまで、デーモンの起動がブロックされます。

    **推奨：**タイムアウトを設定する場合、推奨値は`"2s"`から`"5s"`です。デーモンの起動に問題がある場合、エージェントはすべてのトランザクション開始時に所定のタイムアウトをブロックするため、時間のかかるバックグラウンドタスクのインストゥルメントをしている場合にのみ、このタイムアウトを設定することが推奨されます。
  </Collapser>
</CollapserGroup>

## Logs in Context [#logs-in-context]

PHPエージェントのバージョン10.1.0では、[APM logs in Context](/docs/apm/new-relic-apm/getting-started/get-started-logs-context)とともにPHPログを転送できます。バージョン10.3.0以降は、ログメトリクスとエージェントログ転送機能がデフォルトで有効になっています。この値`newrelic.application_logging.enabled`は、Logs in Context機能の有効化または無効化を制御します。

ローカルエージェント設定ファイル（`newrelic.ini`）の設定を変更するには、ウェブサーバーを再起動し、設定変更を有効化する必要があります。再起動しないと、変更が[すぐに有効](/docs/agents/php-agent/troubleshooting/ini-settings-not-taking-effect-immediately)にならない場合があります。

<CollapserGroup>
  <Collapser
    id="cfg-application_logging_forwarding-enabled"
    title="newrelic.application_logging.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    * `true`に設定して、Logs in contextのコア機能を有効にします。有効にすると、New Relicにログが送信されるかどうかにかかわらず、追加のロギングフレームワークインストゥルメンテーションが有効になります。
    * ログメトリクスとログ転送機能のコレクションなど、この機能を完全に無効にするには、`false`に設定します。
    * Logs in Contextがデフォルトで有効化されるようになりました。この機能を無効にしている場合は、必ずアプリを再起動してください。再起動しないと、変更がすぐに有効になりません

    設定ファイルの例：

    ```ini
    newrelic.application_logging.enabled = true
    newrelic.application_logging.metrics.enabled = true
    newrelic.application_logging.forwarding.enabled = true
    ```
  </Collapser>
</CollapserGroup>

### ログの転送 [#log-forwarding]

[サポート対象のロギングフレームワーク](/docs/logs/logs-context/configure-logs-context-php)を使用している場合は、アプリのログをNew Relicに転送するようにエージェントに指示できます。

* `newrelic.application_logging.forward.enabled` ログ転送を有効または無効にする
* `newrelic.application_logging.forwarding.max_samples_stored` アプリからNew Relicに転送するログの数を制限する
* `newrelic.application_logging.forwarding.log_level` アプリからNew Relicに転送するログの種類を選択する

<CollapserGroup>
  <Collapser
    id="cfg-application_logging_forwarding-enabled"
    title="newrelic.application_logging.forwarding.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    New Relicへのアプリケーションログの送信を有効にします。

    * これを`true`に設定すると、ログがNew Relicに送信されます。これにより、Logs in Context機能を動作可能にするメタデータがリンクされるため、PHPエージェントからログが直接転送されます。PHPエージェントは、メタデータをアプリケーションログ出力に書き込みしません

    * ログをNew Relicに送信しない場合は、これを`false`に設定します。`enabled`が`false`に設定されている場合、ログデータはNew Relicに送信されず、アプリケーションログ出力は変更されません

      設定ファイルの例（`newrelic.ini`）：

      ```ini
      newrelic.application_logging.enabled = true
      ```

      既存のログ転送ソリューションがあり、エージェントをコンテキストで自動ログを使用するように更新する場合は、**古いログフォワーダーを必ず無効**にしてください。そうしないと、アプリは二重のログラインを送信します。アカウントによっては、二重請求になる場合があります。詳細については、手順に従い、[特定のログフォワーダー](/docs/logs/forward-logs/enable-log-management-new-relic#log-forwarding)を無効にしてください。

      <Callout variant="important">
        ログ転送機能を使用すると、データの取り込みが増加し、請求に影響を及ぼす可能性があります。詳細については、[データ取り込みの追跡](/docs/apm/new-relic-apm/getting-started/get-started-logs-context#ingest)に関するドキュメントを参照してください。
      </Callout>
  </Collapser>

  <Collapser
    id="cfg-application_logging_forwarding-max_samples_stored"
    title="newrelic.application_logging.forwarding.max_samples_stored"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            整数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `10000`
          </td>
        </tr>

        <tr>
          <th>
            Max：
          </th>

          <td>
            `20000`
          </td>
        </tr>
      </tbody>
    </table>

    * 値を正の整数に設定して、送信する1分あたりのログラインの最大数を指定します

    * ログの送信を事実上無効にするには、これを`0`に設定します。

    * これをより低い値に設定して、送信されるログラインの量を減らします。ログサンプリングの原因になる場合があります

    * これをより高い値に設定すると、より多くのログラインが送信されます。

      各ログは、関連トランザクションと同じ優先度を受け取ります。`max_samples_stored`によって制限されているため、一部のログが含まれない場合があります。たとえば、ロギング`max_samples_stored`が10,000に設定され、トランザクション1に10,000のログエントリがある場合、トランザクション1のログエントリのみが記録されます。トランザクション1のログが10,000未満の場合、トランザクション1のすべてのログを受け取ります。まだスペースがある場合は、トランザクション2のすべてのログを受け取るなどとなります。優先度の高いログエントリは、優先度の低いログエントリよりも保持されます。

    <Callout variant="tip">
      これは、_1分あたり_に送信するログの数を指します。`max_samples_stored`を12未満の値に設定すると、ログが送信されなくなります。 負以外の整数は有効ですが、現在サポートされている最大値は20,000です。
    </Callout>

    設定ファイルの例（`newrelic.ini`）：

    ```ini
    newrelic.application_logging.forwarding.max_samples_stored = 10000
    ```
  </Collapser>

  <Collapser
    id="cfg-application_logging_forwarding-log-level"
    title="newrelic.application_logging.forwarding.log_level"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            文字列（引用符を使用）
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `"WARNING"`
          </td>
        </tr>
      </tbody>
    </table>

    エージェントが転送したメッセージのログレベルを制御できます。認識されるログレベルは[PSR-3](https://www.php-fig.org/psr/psr-3/)仕様に従い、次の通りです（重要度が高い順）。

    * `EMERGENCY`
    * `ALERT`
    * `CRITICAL`
    * `ERROR`
    * `WARNING`
    * `NOTICE`
    * `INFO`
    * `DEBUG`

    エージェントにログレベルが指定されている場合、このログレベル以上のすべてのメッセージがレポートされます。たとえば、ログレベルを`ALERT`に設定すると、`ALERT`と`EMERGENCY`重大度のログを受信します。デフォルトのログレベルは`WARNING`です。

    設定ファイルの例（`newrelic.ini`）：

    ```ini
    newrelic.application_logging.forwarding.log_level = "INFO"
    ```
  </Collapser>
</CollapserGroup>

#### ログコンテキストデータ [#log-context-data]

PHPエージェントは、Monologライブラリのコンテキストデータをキャプチャし、そのコンテキストを属性として転送されたログに追加します。エージェントが追加するコンテキストを制御するには、`forwarding`スタンザの下にネストされている`context_data`スタンザの設定を使用します。

* `newrelic.application_logging.forwarding.context_data.enabled` Monologからのコンテキストデータをログ属性に追加する
* `newrelic.application_logging.forwarding.context_data.include` 転送されたログで見つかる属性キーを定義する
* `newrelic.application_logging.forwarding.context_data.exclude` 転送されたログで除外される属性キーを定義する

<CollapserGroup>
  <Collapser
    id="cfg-application_logging_forwarding_context_data-enabled"
    title="newrelic.application_logging.forwarding.context_data.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    * これを`true`に設定すると、コンテキストデータをログ属性として追加します
    * コンテキストデータを属性としてログに追加したくない場合は、これを`false`に設定します
  </Collapser>

  <Collapser
    id="cfg-application_logging_forwarding_context_data-include"
    title="newrelic.application_logging.forwarding.context_data.include"
  >
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            文字列のリスト
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            (なし)
          </td>
        </tr>
      </tbody>
    </table>

    属性ルールをログコンテキスト属性に適用すると、`include`ルールはルールセットで定義されていないすべての属性を削除します。これは、他のタイプのエージェント属性とは異なる動作です。

    * ログコンテキスト属性が期待どおりに表示されない場合は、`newrelic.attributes.include`ルールセットを調べて、欠落している属性が除外の一部であることを確認する必要があります。`newrelic.loglevel=verbosedebug`を設定して、エージェントからの詳細なログメッセージも有効化することをお勧めします。それが更新されたら、除外された属性に関するエージェントからのメッセージを探します。これで、包含/除外ルールを調整することができます
    * `context_data`がログ転送に対して有効になっている場合、このリストにあるすべての属性キーがログレコードに表示されます。空のリストは、デフォルトとしてすべての属性キーを送信します
    * すべての`include`リストが空の場合は、すべてのログコンテキスト属性が転送されます
  </Collapser>

  <Collapser
    id="cfg-application_logging_forwarding_context_data-exclude"
    title="newrelic.application_logging.forwarding.context_data.exclude"
  >
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            文字列のリスト
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            (なし)
          </td>
        </tr>
      </tbody>
    </table>

    * `context_data`でログ転送が有効になっている場合、このリストにあるすべての属性キーがログレコードから除外されます
    * このフィールドを空のままにすると、デフォルトの動作になります。[`include`ルールが存在する](#cfg-application_logging_forwarding_context_data-include)場合でも、属性が除外されることがあります
    * `include`と`exclude`のリストは、[属性の有効化と無効化](/docs/php/php-agent-enabling-and-disabling-attributes#cfg-attributes-enabled)で定義されたルールに従います
  </Collapser>
</CollapserGroup>

<Callout variant="important">
  PHPエージェントは、文字列キーと文字列またはスカラー（int、double、boolean）の値を持つログコンテキストデータのみを転送します。
</Callout>

### ログ装飾 [#log-decoration]

PHPエージェントは、リンクメタデータを収集しMonologログレコードに追加して、コンテキスト内のログが、サードパーティのログフォワーダーによって転送されたログデータと連携できるようにすることができます。この機能を有効にするには、`newrelic.application_logging.local_decorating.enable`オプションを使用します。

<CollapserGroup>
  <Collapser
    id="cfg-application_logging_local_decorating-enabled"
    title="newrelic.application_logging.local_decoating.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    これにより、Monologログレコードへのリンクメタデータの追加が可能になります。この機能を有効にするには、これを`true`に設定します。APMログ転送機能を使用してログをNew Relicに転送する場合は、この設定を`false`のままにしておきます。

    <Callout variant="important">
      ログ装飾機能は、PHPエージェントリリース10.13.0.1で初めて導入されました。

      ログ装飾機能では、リンクメタデータがログメッセージに含まれていることを確認するには、追加の手順が必要です。この機能の使用方法の詳細については、（コンテキスト内のPHPログ）\[/docs/logs/logs-context/configure-logs-context-php]ページを参照してください。

      ログ転送とログ装飾の両方を有効にすると、ログが重複してNew Relicに送信される可能性が非常に高くなります。
    </Callout>
  </Collapser>
</CollapserGroup>

### ログメトリクス [#log-metrics]

PHPエージェントは、[サポート対象のロギングフレームワーク](/docs/logs/logs-context/configure-logs-context-php)のログイベントに関連するメトリクスを収集できます。`newrelic.application_logging.metrics.enable`オプションで、これらのメトリクスの作成が制御されます。

<CollapserGroup>
  <Collapser
    id="cfg-application_logging_metrics-enabled"
    title="newrelic.application_logging.metrics.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    APM**サマリー**ページのチャートに表示されるログとログレベルに関するメトリクス情報の取得を有効にします。

    エージェントがログに関するメトリック情報を取得できるようにするには、この設定をtrueのままにします。

    これを`false`に設定すると、この機能を無効にできます。

    <Callout variant="important">
      ログメトリクスの収集を無効にすると、サマリーページのログチャートが空白になります。
    </Callout>
  </Collapser>
</CollapserGroup>

<Callout variant="important">
  既存のログ転送ソリューションがあり、コンテキストに応じて自動ログを使用するようにエージェントを更新する場合は、**手動のログフォワーダーを必ず無効**にしてください。そうしないと、アプリは重複したログデータを送信します。アカウントによっては、二重請求になる場合があります。詳細については、手順に従い、[特定のログフォワーダー](/docs/logs/forward-logs/enable-log-management-new-relic#log-forwarding)を無効にしてください。
</Callout>

## トランザクショントレーサー .ini 設定 [#inivar-tt-settings]

これらの設定値を使用して、トランザクショントレースを制御します。

<CollapserGroup>
  <Collapser
    id="inivar-tt-custom"
    title="newrelic.transaction_tracer.custom"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            文字列（引用符を使用）
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `""`
          </td>
        </tr>
      </tbody>
    </table>

    これを、ユーザー定義の関数またはインストゥルメントのメソッドのコンマで区切ったリストに設定します。

    ```
    "myfunction,myclass::method,otherfunction"
    ```

    内部PHP関数は、カスタムトレーシングを有することはできません。

    各PERDIRファイルをカスタム関数のリストに追加できますが、すでに追加されている関数またはメソッドを削除することはできません。プログラムで関数またはインストゥルメントするメソッドを追加する場合は、[`newrelic_add_custom_tracer()`](/docs/agents/php-agent/php-agent-api/newrelic_add_custom_tracer) API関数呼び出しを使用します。
  </Collapser>

  <Collapser
    id="inivar-tt-enable"
    title="newrelic.transaction_tracer.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    トランザクショントレーサーを有効化または無効化します。

    トレーサーは、`newrelic.transaction_tracer.threshold`値で設定された閾値より時間がかかるトランザクションの、詳細なトランザクショントレースを作成します。1収集サイクル、1アプリケーションにつき、1つのトランザクショントレースのみが保存され、それは常にそのサイクル中で最も遅いトランザクションとなります。

    [トランザクショントレース](/docs/apm/transactions/transaction-traces/transaction-traces)は、特定のトランザクションが遅い理由を診断する際に有用です。メモリとパフォーマンスがクリティカルな場合を除き、ほとんどは無効にしないでください。これを有効にしてもパフォーマンスへの影響は非常にわずかで、メモリの使用量は増えます。

    詳細については、[`newrelic.transaction_tracer.detail`](#inivar-tt-detail)を参照してください。
  </Collapser>

  <Collapser
    id="inivar-tt-expenable"
    title="newrelic.transaction_tracer.explain_enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    スロークエリの呼び出しに対するMySQLiおよびPDO MySQLライブラリからの説明プランの要求を、有効または無効にします。説明プランは、[`newrelic.transaction_tracer.slow_sql`](#inivar-tt-slowsql)が`true`に設定されていて、[`newrelic.transaction_tracer.record_sql`](#inivar-tt-sql)が`"off"`に設定されて**いない**場合にのみ利用できます。
  </Collapser>

  <Collapser
    id="inivar-tt-epthreshold"
    title="newrelic.transaction_tracer.explain_threshold"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            期間
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `"500"`
          </td>
        </tr>
      </tbody>
    </table>

    クエリが「遅い」と見なされ、[**スロークエリ**](/docs/apm/applications-menu/monitoring/databases-slow-queries-dashboard)ページの候補となる閾値を設定します。単位付きの絶対値として期間を指定します。指定がない場合、デフォルトの単位はミリ秒となります。

    **期間の例**

    * `"200ms"`
    * `"1s250ms"`
    * `"1h30m"`
    * `"750us"`
  </Collapser>

  <Collapser
    id="inivar-tt-internalfun"
    title="newrelic.transaction_tracer.internal_functions_enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            SYSTEM
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    内部関数（Cで記述され、PHP標準ライブラリまたはPECL拡張子のいずれかで提供される関数）のトレーシングのサポートを有効化または無効化します有効にすると、内部関数は、PHPで記述された関数のように[トランザクショントレース](/docs/apm/transactions/transaction-traces/introduction-transaction-traces)に表示されます。

    このオプションを有効にすると、特にPHP 5.xから多くのトレースを収集する際に、トランザクションが遅くなる場合があります。このオプションの有効化は、特に内部関数が遅いと疑われるパフォーマンス問題をデバッグする場合にのみ推奨されます。
  </Collapser>

  <Collapser
    id="inivar-tt-sql"
    title="newrelic.transaction_tracer.record_sql"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            文字列（引用符を使用）
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `"obfuscated"`
          </td>
        </tr>
      </tbody>
    </table>

    クエリの記録方法（行う場合）を設定します。

    トランザクショントレースを内部で記録する場合、スロークエリ呼び出しのクエリ全体が記録されます。このクエリをNew Relicに送信すると、セキュリティに重大な影響が生じる場合があるため、デフォルトではすべてのデータベースステートメントは、New Relicに送信する前に難読化されます。難読化ではクエリの文字列と数字を疑問符に置換するため、可逆性はありません。値も変わるため、影響がないのは、フィールド名だけとなります。

    * 機密でないデータでテストを行っており、トランザクショントレースで生クエリを表示する必要がある場合は、`"raw"`に設定します。

    * クエリを全く記録しない場合は、`"off"`に設定します。

      <Callout variant="important">
        本番環境では、常に`"obfuscated"`または`"off"`に戻してください。
      </Callout>
  </Collapser>

  <Collapser
    id="inivar-tt-slowsql"
    title="newrelic.transaction_tracer.slow_sql"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    スロークエリ機能を有効化または無効化するには、この設定を使用します。有効化すると、次のようになります。

    * 1分当たり、1アプリケーション毎に、最も遅いデータベースクエリの上位10位を記録します。

    * クエリにつながるスタックトレースを作成します。

      この変数が`false`に設定されている、またはSQL記録が無効化されている場合は、New Relicエージェントはスロークエリデータを収集しません。
  </Collapser>

  <Collapser
    id="inivar-tt-stthreshold"
    title="newrelic.transaction_tracer.stack_trace_threshold"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            期間
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `"500"`
          </td>
        </tr>
      </tbody>
    </table>

    これにより、クエリを記録中のトランザクショントレースのPHPスタック全体をエージェントが記録する上限閾値が設定されます。

    単位付きの絶対値として期間を指定します。指定がない場合、デフォルトの単位はミリ秒となります。

    **期間の例**

    * `"200ms"`

    * `"1s250ms"`

    * `"1h30m"`

    * `"750us"`

      スタックトレースはメモリを消費するため、この値をあまり低く設定しないよう注意してください。この変数は、[`newrelic.transaction_tracer.record_sql`](#inivar-tt-sql)が`"off"`に設定されている場合は意味がありません。
  </Collapser>

  <Collapser
    id="inivar-tt-threshold"
    title="newrelic.transaction_tracer.threshold"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            期間
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `"apdex_f"`
          </td>
        </tr>
      </tbody>
    </table>

    この変数を使用して、トランザクションがトレースの対象となる閾値を設定します。使用できる値は、以下のとおりです。

    * `"apdex_f"`を使用して、閾値をアプリケーションの[apdex_t](/docs/accounts-partnerships/education/getting-started-new-relic/glossary#apdex_t)値の4倍に設定します。詳細については、[Apdex: ユーザー満足度の測定](/docs/apm/new-relic-apm/apdex/apdex-measuring-user-satisfaction)を参照してください。

    * 特定の時間閾値を設定するには、その他の期間文字列を使用します。絶対値および測定単位として、期間を指定します。指定がない場合、デフォルトの単位はミリ秒となります。

      **期間の例**

    * `"200ms"`

    * `"1s250ms"`

    * `"1h30m"`

    * `"750us"`
  </Collapser>

  <Collapser
    id="inivar-tt-gather-input-queries"
    title="newrelic.transaction_tracer.gather_input_queries"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    この設定を使用して、スロークエリおよびトランザクショントレースによるDQL入力クエリの収集を有効化または無効化します。有効にすると、スロークエリおよびトランザクショントレースとともに表示されます。
  </Collapser>

  <Collapser
    id="inivar-tt-maxsegweb"
    title="newrelic.transaction_tracer.max_segments_web"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `0`
          </td>
        </tr>
      </tbody>
    </table>

    PHPエージェントがウェブトランザクションについて記録するセグメントの最大数を指定します。この最大値に達すると、サンプリングされます。

    PHPエージェントは、収集したセグメントとして、トランザクショントレースとディストリビューティッド（分散）トレースをレポートします。各セグメントは、トランザクショントレースでのメソッドまたは関数呼び出しを表します。この設定のデフォルト値は`0`です。これは、PHPエージェントがウェブトランザクション中にすべてのセグメントをキャプチャすることを表します。トランザクション終了時に、最も優先順位の高いセグメントを組み合わせて、トランザクショントレースでレポートします。

    数十万または数百万の関数呼び出しのある、長時間実行されるPHPプロセスでは、この値を`1`より大きな値に設定すると、PHPエージェントがセグメント記録時にシステムメモリを大量に消費することがなくなります。

    セグメントサイズは、対応するメソッド名、クラス名の長さ、メソッドによるその後の呼び出し数によって異なります。つまり、控えめに見積もっても、1セグメント当たり400バイトとなります。PHPエージェントをセグメントのキャプチャにつき40 MBに制限するには、この値を`100000`に設定します。この値を`2000`より低く設定すると、トランザクショントレースにレポートされるセグメントの合計数がさらに制限されます。

    この設定はPHPのウェブプロセス専用です。PHP CLIプロセスに影響はありません。CLIプロセスの制限を設定するには、`newrelic.transaction_tracer.max_segments_cli`を使用します。
  </Collapser>

  <Collapser
    id="inivar-tt-maxsegcli"
    title="newrelic.transaction_tracer.max_segments_cli"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `100000`
          </td>
        </tr>
      </tbody>
    </table>

    PHPエージェントがCLIトランザクションについて記録するセグメントの最大数が指定されます。その最大値に達すると、サンプリングされます。

    PHPエージェントは、収集したセグメントとして、トランザクショントレースとディストリビューティッド（分散）トレースをレポートします。各セグメントは、トランザクショントレースでのメソッドまたは関数呼び出しを表します。この設定のデフォルト値は`100000`です。これは、PHPエージェントがウェブトランザクション中にすべてのセグメントをキャプチャすることを表します。トランザクション終了時に、最も優先順位の高いセグメントを組み合わせて、トランザクショントレースでレポートします。

    数十万または数百万の関数呼び出しのある、長時間実行されるPHPプロセスでは、この値を`1`より大きな値に設定すると、PHPエージェントがセグメント記録時にシステムメモリを大量に消費することがなくなります。

    セグメントサイズは、対応するメソッド名、クラス名の長さ、メソッドによるその後の呼び出し数によって異なります。つまり、控えめに見積もっても、1セグメント当たり400バイトとなります。PHPエージェントをセグメントのキャプチャにつき40 MBに制限するには、この値を`100000`に設定します。この値を`2000`より低く設定すると、トランザクショントレースにレポートされるセグメントの合計数がさらに制限されます。

    この設定はPHP CLIプロセス専用です。PHPウェブプロセスに影響はありません。ウェブプロセスの制限を設定するには、`newrelic.transaction_tracer.max_segments_web`を使用します。
  </Collapser>
</CollapserGroup>

## その他のトレーサー .ini 設定 [#inivar-misctt-settings]

これらの設定値を使用して、さまざまなトレーサー機能を制御します。

<CollapserGroup>
  <Collapser
    id="inivar-cross-app-tracer-enabled"
    title="newrelic.cross_application_tracer.enabled"
  >
    <Callout variant="important">
      クロスアプリケーショントレーシングは廃止され、PHPエージェントバージョン9.21.0.311ではデフォルトで無効になっています。[ディストリビューティッド（分散）トレーシング](/docs/apm/agents/php-agent/configuration/distributed-tracing-php-agent)機能を推奨します。この機能は、[クロスアプリケーショントレーシング](/docs/traces/cross-application-traces)を改善します。
    </Callout>

    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    クロスアプリケーショントレーサーを有効化または無効化します。クロスアプリケーショントレーサーは、アプリケーション間でウェブトランザクションメトリクスとトランザクショントレースを関連付けるため、HTTPヘッダーをアウトバウンドリクエストとレスポンスに挿入します。

    ディストリビューティッド（分散）トレーシングとクロスアプリケーショントレーシングは同時に使用できません。PHPエージェントのデフォルト設定では、ディストリビューティッド（分散）トレーシングが有効になり、クロスアプリケーショントレーシングが無効になります。
  </Collapser>

  <Collapser
    id="inivar-distributed-enabled"
    title="newrelic.distributed_tracing_enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    <Callout variant="important">
      ディストリビューティッド（分散）トレーシングを有効にすると、[クロスアプリケーショントレーシング](#inivar-cross-app-tracer-enabled)が無効になります。[移行ガイド](/docs/apm/distributed-tracing/getting-started/transition-guide-distributed-tracing)を読み、New Relicの機能への影響について理解してください。
    </Callout>

    [ディストリビューティッド（分散）トレーシング](/docs/apm/agents/php-agent/configuration/distributed-tracing-php-agent)を有効化または無効化します。Node.jsエージェント9.21.0以降では、デフォルトでオンになっています。エージェントのトランザクショントレーサーとディストリビューティッド（分散）トレーシング機能が有効になっている場合、エージェントはヘッダーをアウトバウンドリクエストに挿入し、ディストリビューティッド（分散）トレーシングヘッダーの着信リクエストをスキャンします。

    ```ini
    newrelic.transaction_tracer.enabled = true
    newrelic.distributed_tracing_enabled = true
    ```

    詳細については、[PHPサービスのディストリビューティッド（分散）トレーシング](/docs/apm/agents/php-agent/configuration/distributed-tracing-php-agent)を参照してください。
  </Collapser>

  <Collapser
    id="inivar-dt-exclude-newrelic"
    title="newrelic.distributed_tracing_exclude_newrelic_header"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    アウトバウンドリクエストに添付されたNew Relicディストリビューティッド（分散）トレーシングヘッダーを除外するには、これをtrueに設定し、ディストリビューティッド（分散）トレーシング用のW3Cトレースコンテキストヘッダーにのみ依存します。これがfalseの場合、両方のタイプのヘッダーがアウトバウンドリクエストに添付されます。

    New Relicディストリビューティッド（分散）トレーシングヘッダーを使用すると、W3Cトレースコンテキストヘッダーをサポートしていない古いエージェントとの相互運用が可能になります。W3Cトレースコンテキストヘッダーをサポートするエージェントバージョンは、ディストリビューティッド（分散）トレーシング用のNew Relicヘッダーよりこのヘッダーを優先します。
  </Collapser>

  <Collapser
    id="inivar-span-enabled"
    title="newrelic.span_events_enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    スパンイベントは[ディストリビューティッド（分散）トレーシング](#inivar-distributed-enabled)にレポートされます。スパンイベントをレポートするには、[ディストリビューティッド（分散）トレーシング](/docs/apm/agents/php-agent/configuration/distributed-tracing-php-agent)が有効になっている必要があります。このオプションは、スパンイベントのレポートを有効化/無効化します。
  </Collapser>

  <Collapser
    id="inivar-span-events-max-samples-stored"
    title="newrelic.span_events.max_samples_stored"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            整数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `0`
          </td>
        </tr>
      </tbody>
    </table>

    スパンイベントは[ディストリビューティッド（分散）トレーシング](#inivar-distributed-enabled)にレポートされます。この値は、収集サイクルごとにコレクターに送信されるスパンイベントの最大数を設定します。値`0`はエージェントのデフォルトである`2000`を使用します。最大設定は`10000`です。
  </Collapser>

  <Collapser
    id="inivar-inftr-host"
    title="newrelic.infinite_tracing.trace_observer.host"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            文字列
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `""`
          </td>
        </tr>
      </tbody>
    </table>

    無限トレーシングに使用するトレースオブザーバーを設定します。空白の場合、無限トレーシングのサポートは無効になります。この場合、[ディストリビューティッド（分散）トレーシング](#inivar-distributed-enabled)とスパンイベントが有効になっている必要があります。
  </Collapser>

  <Collapser
    id="inivar-inftr-port"
    title="newrelic.infinite_tracing.trace_observer.port"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            整数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `443`
          </td>
        </tr>
      </tbody>
    </table>

    無限トレーシングトレースオブザーバーとの通信に使用するTCP/IPポートを設定します。`newrelic.infinite_tracing.trace_observer.host`が空の場合、この設定は無視されます。この設定は、通常、変更する必要はありません。
  </Collapser>

  <Collapser
    id="inivar-inftr-queue"
    title="newrelic.infinite_tracing.span_events.queue_size"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            整数（1000以上）
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `100000`
          </td>
        </tr>
      </tbody>
    </table>

    無限トレーシングトレースオブザーバーへの送信についてキューに登録可能なスパンイベント数を設定します。エージェントは、スパンバッチ内の無限トレーシングのスパンイベントを内部で管理します。これらのスパンバッチは、最大で1000スパンを保有できます。よって、スパンイベントのキューサイズは`1000`以下にはできません。それ以下にすると、1つのスパンバッチもキューに登録できません。1000以下のキューサイズを指定すると、最小サイズ`1000`が使用されます。
  </Collapser>

  <Collapser
    id="inivar-err-enabled"
    title="newrelic.error_collector.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    エラーコレクターを有効化または無効化します。有効にすると、エージェントはPHPエラーを収集し、New Relic UIにレポートします。

    エージェントは、各トランザクションの最も重大なエラー、および[収集サイクル](/docs/apm/new-relic-apm/getting-started/glossary#harvest-cycle)当たり最大20件のエラーのみを記録します。

    <Callout variant="tip">
      APMでのエラー設定の概要については、[APMでのエラーの管理](/docs/agents/manage-apm-agents/agent-data/manage-errors-apm-collect-ignore-mark-expected)を参照してください。
    </Callout>
  </Collapser>

  <Collapser
    id="inivar-err-db"
    title="newrelic.error_collector.record_database_errors"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    [有効](#inivar-err-enabled)にすると、エージェントはMySQL関数が返したエラーを、PHPエラーとして収集します。
  </Collapser>

  <Collapser
    id="inivar-err-priority"
    title="newrelic.error_collector.prioritize_api_errors"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    [`newrelic_notice_error()`](/docs/agents/php-agent/php-agent-api/newrelic_notice_error) API関数で特定されたエラーに最も高い優先度を割り当てるには、これを`true`に設定します。
  </Collapser>

  <Collapser
    id="inivar-err-ignore-exceptions"
    title="newrelic.error_collector.ignore_exceptions"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            文字列
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            (なし)
          </td>
        </tr>
      </tbody>
    </table>

    エージェントが無視すべき完全修飾例外クラス名の、カンマで区切ったリスト。捕捉されない例外が発生した場合、エージェントはリストにある各クラスについて、`$exception instanceof Class`と同様のことを実行します。これらのチェックでtrueが返された場合、エージェントは例外を記録しません。

    [サポートされているPHPリリース](/docs/agents/php-agent/getting-started/php-agent-compatibility-requirements#php-release)によっては、これらの値は例外レポートを**無効にする**場合と同じになります。

    * サポートされたPHP 5バージョン: `newrelic.error_collector.ignore_exceptions = Exceptions`
    * サポートされたPHP 7バージョン: `newrelic.error_collector.ignore_exceptions = Throwable`
  </Collapser>

  <Collapser
    id="inivar-err-ignore-errors"
    title="newrelic.error_collector.ignore_errors"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            整数または[PHPで定義されたエラー定数](http://php.net/manual/en/errorfunc.constants.php)のビット単位の式
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `0`
          </td>
        </tr>
      </tbody>
    </table>

    PHPエージェントの[エラーレベル](http://php.net/manual/en/errorfunc.constants.php)を**ignore**に設定します。この設定の値は、[PHPの`error_reporting`オプション](http://php.net/manual/en/errorfunc.configuration.php#ini.error-reporting)と同様の構文を使用します。たとえば、PHPエージェントが`E_WARNING`と`E_ERROR`レベルエラーを無視するように設定する場合は、次を使用します。

    ```ini
    newrelic.error_collector.ignore_errors = E_WARNING | E_ERROR
    ```

    または

    ```ini
    newrelic.error_collector.ignore_errors = 3
    ```

    PHPエージェントを使用して`E_WARNING`以外のすべてを無視するよう設定するには、次を使用します。

    ```ini
    newrelic.error_collector.ignore_errors = E_ALL & ~E_WARNING
    ```
  </Collapser>

  <Collapser
    id="inivar-framework-drupal-modules"
    title="newrelic.framework.drupal.modules"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            メモ：
          </th>

          <td>
            バージョン3.0以下のエージェントでは、この値のデフォルトは`false`でした。このオプションを設定すると、`newrelic.transaction_tracer.detail = 1`が暗示されます。
          </td>
        </tr>
      </tbody>
    </table>

    Drupalモジュールトラッキングを有効にするには、これを`true`に設定します。このオプションは、[`newrelic.transaction_tracer.detail`](#inivar-tt-detail)と同じパフォーマンスへの影響があります。Drupalモジュール関数と呼び出し数の記録が有効になり、ウェブトランザクションのように**モジュール**タブに表示されます。
  </Collapser>

  <Collapser
    id="inivar-framework-wordpress-hooks"
    title="newrelic.framework.wordpress.hooks"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    WordPressフックトラッキングを有効にするには、これを`true`に設定します。WordPressフック、プラグイン、テーマの記録が有効になり、 New Relic UIの[**WordPress**](/docs/agents/php-agent/frameworks-libraries/wordpress-specific-functionality)タブに表示されます。
  </Collapser>

  <Collapser
    id="inivar-wt-files"
    title="newrelic.webtransaction.name.files"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            文字列（引用符を使用）
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `""`
          </td>
        </tr>
      </tbody>
    </table>

    ファイル名を使用してウェブトランザクションに名前を付ける場合を除き、これは[`newrelic.webtransaction.name.functions`](#inivar-wt-funcs)と同じです。ファイル名は、PCREで使用する標準のPOSIX正規表現にできます。たとえば、`"controllers/actions/.*"`のようになります。
  </Collapser>

  <Collapser
    id="inivar-wt-funcs"
    title="newrelic.webtransaction.name.functions"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            文字列（引用符を使用）
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `""`
          </td>
        </tr>
      </tbody>
    </table>

    New RelicエージェントがDrupalまたはWordpressなど、特定のフレームワークを検知する場合を除き、ウェブトランザクションは最初のPHPファイルの後に命名されます。たとえば、`article.php`のようになります。

    最初のファイルがディスパッチャーの場合、この命名スキームでは有用性が低いデータが生成されます。この変数を使用して、ディスパッチャーが生成した「アクション」である関数のリストを指定します。ウェブトランザクションの名前は、関数が実行する最初のアクションとなります。

    **ディスパッチ関数命名の例**

    `index.php`が以下の名前の関数にディスパッチする場合：

    * `login`、

    * `logout`、

    * `admin`、

    * `show`および

    * `edit`

      この値を`"login,logout,admin,show,edit"`に設定します。

      ウェブトランザクションは、`/index.php`（最初のファイル名）ではなく、`login`、`logout`などと命名されます。
  </Collapser>

  <Collapser
    id="inivar-wt-remove-path"
    title="newrelic.webtransaction.name.remove_trailing_path"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    有効になっている場合、これにより、スクリプト名の後のリクエストURIの内容が削除されます。たとえば、これにより末尾の`/xyz/zy`が`/path/to/foo.php/xyz/zy`から削除されます。
  </Collapser>

  <Collapser
    id="ini-var-dt-instance-reporting"
    title="newrelic.datastore_tracer.instance_reporting.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    `false`の場合、エージェントはデータストアインスタンスメトリクスをレポートせず、`host`または`port_path_or_id`パラメーターをトランザクションまたは遅いsqlトレースに追加しません。
  </Collapser>

  <Collapser
    id="ini-var-dt-database-name-reporting"
    title="newrelic.datastore_tracer.database_name_reporting.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    `false`の場合、エージェントは`database_name`パラメーターをトランザクションまたは遅いsqlトレースに追加しません。
  </Collapser>
</CollapserGroup>

## 属性の設定 [#inivar-attribute-settings]

このセクションには、属性の収集とレポートに影響を与える設定が一覧記載されています。

<CollapserGroup>
  <Collapser
    id="inivar-attributes-enabled"
    title="newrelic.attributes.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    PHPエージェントが生成した、または[`newrelic_add_custom_parameter()`](/docs/agents/php-agent/php-agent-api/newrelic_add_custom_parameter)でユーザーが生成した属性の収集を有効化または無効化します。この設定は、その他のすべての属性設定に優先します。

    詳細については、[属性の有効化および無効化](/docs/php/php-agent-enabling-and-disabling-attributes#cfg-attributes-enabled)を参照してください。
  </Collapser>

  <Collapser
    id="inivar-attributes-enabled"
    title="newrelic.{destination}.attributes.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `true`、を除いて `browser_monitoring.attributes.enabled`
          </td>
        </tr>
      </tbody>
    </table>

    どの宛先が属性を受信するかを制御します。この設定は、`.include`および`.exclude` [設定](#inivar-attributes-include-exclude)を上書きします。

    使用可能な宛先の詳細については、[属性の有効化および無効化](/docs/agents/php-agent/attributes/enabling-and-disabling-attributes#properties)を参照してください。
  </Collapser>

  <Collapser
    id="inivar-attributes-include-exclude"
    title="newrelic.attributes.{include|exclude}"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            文字列
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            (なし)
          </td>
        </tr>
      </tbody>
    </table>

    これは、属性の宛先の細かい制御を可能にする設定オプションのファミリーです。詳細については、[属性の有効化および無効化](/docs/php/php-agent-enabling-and-disabling-attributes#cfg-attributes-include)を参照してください。
  </Collapser>
</CollapserGroup>

## カスタムイベント [#inivar-custom-events]

このセクションでは、カスタムイベントのレポートに影響する設定を示します。

<CollapserGroup>
  <Collapser
    id="inivar-custom-events-enabled"
    title="newrelic.custom_insights_events.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    [`newrelic_record_custom_event()`](/docs/agents/php-agent/php-agent-api/newrelic_record_custom_event)を通じてユーザーが生成したイベントの収集を有効または無効にします。この設定は、その他のすべての属性設定に優先します。

    詳細については、[カスタムイベントと属性のレポート](/docs/data-apis/custom-data/custom-events/apm-report-custom-events-attributes/#php-att)を参照してください。
  </Collapser>

  <Collapser
    id="inivar-custom-events-maxsamples"
    title="newrelic.custom_events.max_samples_stored"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            整数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `30000`
          </td>
        </tr>

        <tr>
          <th>
            Max：
          </th>

          <td>
            `100000`
          </td>
        </tr>
      </tbody>
    </table>

    1分あたりに送信するカスタムイベントの最大数を指定する正の整数。

    これを`0`に設定すると、カスタムイベントの送信が事実上無効になります。カスタムイベント生成を有効または無効にするには、[`newrelic.custom_insights_events.enabled`](#inivar-custom-events-enabled)を設定することを推奨します。

    これをより低い値に設定して、送信されるカスタムイベントの量を減らします（カスタムイベントサンプリングの原因になる場合があります）。これをより高い値に設定すると、より多くのカスタムイベントが送信されます。

    <Callout variant="important">
      `newrelic.custom_events.max_samples_stored` INI変数が10.4.0.316リリースで追加されました。
    </Callout>
  </Collapser>
</CollapserGroup>

## コードレベルのメトリクス [#inivar-code-level-metrics]

このセクションでは、コードレベルのメトリクスのレポートに影響する設定を示します。

<CollapserGroup>
  <Collapser
    id="inivar-code-level-metrics-enabled"
    title="newrelic.code_level_metrics.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    コードレベルのメトリクスの収集を有効または無効にします。

    <Callout variant="important">
      `newrelic.code_level_metrics.enabled` INI変数が10.4.0.316リリースで追加され、デフォルトで無効になっていました。コードレベルのメトリクスは、バージョン10.6.0からデフォルトで有効になっています。
    </Callout>
  </Collapser>

  <Collapser
    id="NEW_RELIC_METADATA_COMMIT"
    title="NEW_RELIC_METADATA_COMMIT"
  >
    <Callout variant="important">
      これは、環境変数からのみ設定できます。
    </Callout>

    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            整数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            (なし)
          </td>
        </tr>

        <tr>
          <th>
            [ ](#options)
          </th>

          <td>
            環境変数
          </td>
        </tr>
      </tbody>
    </table>

    コミットSHA。SHA全体、または最初の7文字（例：734713b）のみを使用することもできます。
  </Collapser>

  <Collapser
    id="NEW_RELIC_METADATA_RELEASE_TAG"
    title="NEW_RELIC_METADATA_RELEASE_TAG"
  >
    <Callout variant="important">
      これは、環境変数からのみ設定できます。
    </Callout>

    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            文字列
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            (なし)
          </td>
        </tr>

        <tr>
          <th>
            [ ](#options)
          </th>

          <td>
            環境変数
          </td>
        </tr>
      </tbody>
    </table>

    リリースタグ（v0.1.209 またはリリース-209など）。
  </Collapser>
</CollapserGroup>

## エラーインボックスの設定 [#errors-inbox-configuration]

次のタグのいずれかを設定すると、エラーが発生しているソフトウェアのバージョンを特定するのに役立ちます。

* `NEW_RELIC_METADATA_SERVICE_VERSION` デプロイされているコードのバージョン（多くの場合、1.2.3などのセマンティックバージョン）を含むイベントデータにtags.service.versionが作成されますが、常にそうとは限りません。
* `NEW_RELIC_METADATA_RELEASE_TAG `リリースタグを含むイベントデータにtags.releaseTagを作成します（v0.1.209またはリリース-209など）。
* `NEW_RELIC_METADATA_COMMIT` コミットSHAを含むイベントデータに対してtags.commitを作成します。SHA全体、または最初の7文字（例：734713b）のみを使用することもできます。

エラーインボックスの今後のリリースでは、ソフトウェアのどのバージョンでエラーが発生しているかを自動追跡します。どのバージョンデータも[CodeStream](/docs/codestream/how-use-codestream/performance-monitoring/#buildsha)に表示されます。

## その他の .ini 設定 [#inivar-rare-settings]

このセクションには、残りのnewrelic.ini設定が一覧記載されています。

<CollapserGroup>
  <Collapser
    id="inivar-enabled"
    title="newrelic.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            SYSTEM
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            (なし)
          </td>
        </tr>
      </tbody>
    </table>

    New Relicエージェントを有効化または無効化します。デフォルトでは、New Relic PHPエージェントはすべてのディレクトリに対して有効になっています。

    ウェブサーバーに複数のサイトがあるが、PHPエージェントに特定のサイトのみを監視させたい場合：

    1. `newrelic.ini`ファイルのグローバル（システム）レベルで`newrelic.enabled`が`true`に設定されていることを確認します。

    2. 1つ以上の特定のサイトについて、ディレクトリごと（PERDIR）に、`newrelic.enabled`を`false`に設定します。

       グローバルにエージェントを無効にする必要がある場合は、`newrelic.ini`ファイルで`newrelic.enabled`の値を`false`に設定します。

       エージェントがグローバルで無効になっている場合は、完全に初期化されません。重要な理由でグローバルに無効にしていると想定し、エージェントはPHPへの影響を可能な限りゼロに近くしようとします。

       <Callout variant="important">
         エージェントをグローバルで無効にしてから、`.htaccess`を使用してディレクトリごとに選択的に有効にすることはできません。
       </Callout>
  </Collapser>

  <Collapser
    id="inivar-logfile"
    title="newrelic.logfile"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            SYSTEM
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            文字列（引用符を使用）
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `"/var/log/newrelic/php_agent.log"`
          </td>
        </tr>
      </tbody>
    </table>

    ここでは、メッセージのロギング用ファイル名を特定します。これは、エージェントによる問題のデバッグに有用です。設定がどのようなものであっても、以下を確認してください。

    * 含まれるディレクトリとファイル自体の許可が正しい。
    * PHPが実行するユーザーがファイルに書き込みできる。通常、これはウェブサーバーと同じユーザーです。
  </Collapser>

  <Collapser
    id="inivar-analytics-events"
    title="newrelic.transaction_events.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    `true`に設定すると、エージェントは分析イベントデータを収集し、レポートします。イベントデータを使用すると、New Relic UIは、[ヒストグラム](/docs/applications-menu/histograms-viewing-data-distribution)、[パーセンタイル](/docs/applications-menu/percentiles-comparing-ranked-data)などの追加情報を表示できます。
  </Collapser>

  <Collapser
    id="inivar-error-events"
    title="newrelic.error_collector.capture_events"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    `true`に設定すると、エージェントはエラーイベントデータを収集し、レポートします。イベントデータを使用すると、New Relic UIはエラー分析を表示できます。
  </Collapser>

  <Collapser
    id="inivar-feature-flag"
    title="newrelic.feature_flag"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    この設定により、PHPエージェント内の新規および実験的な機能が有効になります。これらのフラグを使用して、PHPエージェントの後のバージョンでデフォルトで有効化される予定の機能を、選択的に可能にします。
  </Collapser>

  <Collapser
    id="inivar-autorum"
    title="newrelic.browser_monitoring.auto_instrument"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    これにより、ブラウザモニタリングのためのJavaScript断片の自動挿入が可能になります。有効化すると、エージェントがヘッダーとフッターをHTML出力に挿入し、エンドユーザー体験のためのページロードタイミングに関するメトリクスが生成されます。詳細については、[PHPでのページロードタイミング](/docs/php/page-load-timing-in-php)を参照してください。
  </Collapser>

  <Collapser
    id="inivar-autorum"
    title="newrelic.guzzle.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            PERDIR
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    [New Relicと一緒に使用する際のGuzzleライブラリ](/docs/agents/php-agent/frameworks-libraries/guzzle)のサポートを有効化または無効化します。

    * PHPエージェントバージョン6.4以上：この設定はデフォルトで`true`に設定されます。
  </Collapser>

  <Collapser
    id="inivar-autorum"
    title="newrelic.preload_framework_library_detection"
  >
    <table>
      <tbody>
        <tr>
          <th>
            範囲：
          </th>

          <td>
            SYSTEM
          </td>
        </tr>

        <tr>
          <th>
            タイプ：
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            メモ：
          </th>

          <td>
            PHPエージェントバージョン9.4に導入
          </td>
        </tr>
      </tbody>
    </table>

    プレロードが有効化されている場合に、フレームワークとライブラリの検知が可能になります。プレロードはPHPバージョン7.4で導入されました。`newrelic.preload_framework_library_detection`は、`opcache.preload`が`php.ini`ファイルで設定されている場合のみ有効になります。
  </Collapser>
</CollapserGroup>