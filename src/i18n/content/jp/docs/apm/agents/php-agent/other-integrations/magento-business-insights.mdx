---
title: Magento ビジネス インサイト
tags:
  - New Relic integrations
  - Magento
metaDescription: 'Monitor your Magento application''s performance with our comprehensive Magento business insights dashboard. Track business metrics like revenue at risk, orders at risk due to downtime, and poor system performance.'
translationType: machine
---

import apmMagentoDashboardOverview from 'images/apm_screenshot-full_magento-dashboard-overview.webp'

当社の Magento ビジネス インサイト ダッシュボードは、Magento e コマース アプリケーションのパフォーマンスの包括的なビューを提供します。ダッシュボードを使用すると、収益のリスク、ダウンタイムによる注文のリスク、システム パフォーマンスの低下など、主要なビジネス指標を簡単に追跡できます。ダッシュボードを使用して、アプリのパフォーマンスの問題を診断し、コードを最適化することもできます。

<img
  title="Magento dashboard overview"
  alt="A screenshot of a dashboard with a variety of graphs and charts showing data about a Magento ecommerce application."
  src={apmMagentoDashboardOverview}
/>

<figcaption>
  当社の Magento ビジネス インサイト ダッシュボードでは、Magento アプリのデータを一元的に表示できます。
</figcaption>

New Relic で Magento アプリの監視を開始するには、次の手順に従ってアプリ データを New Relic に送信し、Magento ビジネス インサイト ダッシュボードで表示します。

<Steps>
  <Step>
    ## インフラストラクチャエージェントをインストールします [#install-the-infra-agent]

    当社のインフラストラクチャ エージェントはホストを監視し、CPU 使用率、メモリ使用率、ストレージ使用率、ディスク使用率、ネットワーク トラフィックなどの指標を報告します。

    エージェントをインストールするには、次のいずれかのインストール方法を選択します。

    * [ガイド付きインストール](https://one.newrelic.com/launcher/nr1-core.explorer?pane=eyJuZXJkbGV0SWQiOiJucjEtY29yZS5saXN0aW5nIn0=&cards%5B0%5D=eyJuZXJkbGV0SWQiOiJucjEtaW5zdGFsbC1uZXdyZWxpYy5ucjEtaW5zdGFsbC1uZXdyZWxpYyIsImFjdGl2ZUNvbXBvbmVudCI6IlZUU09FbnZpcm9ubWVudCIsInBhdGgiOiJndWlkZWQifQ==) の手順に従って、すばやく簡単にインストール プロセスを実行してください。
    * より高度なインストール プロセスのために[エージェントを手動でインストールする](/docs/infrastructure/install-infrastructure-agent/get-started/install-infrastructure-agent/)
  </Step>

  <Step>
    ## PHPエージェントのインストール [#install-the-PHP-agent]

    当社の PHP エージェントは、AJAX パフォーマンス、エラー率、期間、コア Web バイタル、スループットなどのアプリケーションおよびブラウザー関連の指標をレポートします。

    エージェントをインストールするには、次のいずれかのインストール方法を選択します。

    * [ガイド付きインストール](https://one.newrelic.com/launcher/nr1-core.settings?pane=eyJuZXJkbGV0SWQiOiJ0dWNzb24ucGxnLWluc3RydW1lbnQtZXZlcnl0aGluZyJ9&cards%5B0%5D=eyJuZXJkbGV0SWQiOiJzZXR1cC1uZXJkbGV0cy5zZXR1cC1waHAtaW50ZWdyYXRpb24iLCJhY2NvdW50SWQiOjI2NDA0MDl9&platform%5BaccountId%5D=1) の手順に従って、すばやく簡単にインストール プロセスを実行してください。
    * より高度なインストール プロセスのために[エージェントを手動でインストールする](/docs/apm/agents/php-agent/installation/php-agent-installation-overview/)
  </Step>

  <Step>
    ## MySQL 統合をインストールする [#install-the-mysql-integration]

    当社の MySQL 統合は、データベースを監視し、ノードごとの最も遅いクエリやアクティブな接続など、データベースの使用状況と接続に関する指標を収集します。

    統合をインストールするには:

    1. **[one.newrelic.com](https://one.newrelic.com/) > Add data**に移動します。
    2. **MySQL**を検索してクリックします。
    3. アカウントを選択し、ガイド付きのインストール手順に従います。

    別の方法でエージェントをインストールする必要がある場合は、 [MySQL 監視統合 を](/install/mysql/)参照してください。
  </Step>

  <Step>
    ## Apache 統合をインストールする [#install-the-apache-integration]

    当社の Apache 統合は、TCP 接続、DNS ルックアップ、HTTPS、SSL、およびサーバーとワーカーのステータスなどのネットワーク メトリックを収集します。

    統合をインストールするには、 [ガイド付きインストール](https://one.newrelic.com/launcher/nr1-core.explorer?pane=eyJuZXJkbGV0SWQiOiJucjEtY29yZS5saXN0aW5nIn0=&cards%5B0%5D=eyJuZXJkbGV0SWQiOiJucjEtaW5zdGFsbC1uZXdyZWxpYy5ucjEtaW5zdGFsbC1uZXdyZWxpYyIsInBhdGgiOiJvaGkiLCJyZWNpcGVOYW1lIjoiYXBhY2hlLW9wZW4tc291cmNlLWludGVncmF0aW9uIiwiYWN0aXZlQ29tcG9uZW50IjoiVlRTT0NvbW1hbmQiLCJhY3RpdmVFbnZpcm9ubWVudCI6ImFwYWNoZS1vcGVuLXNvdXJjZS1pbnRlZ3JhdGlvbiJ9)の手順に従います。

    別の方法で統合をインストールする必要がある場合は、 [Apache 監視統合 を](/docs/infrastructure/host-integrations/host-integrations-list/apache-monitoring-integration)参照してください。
  </Step>

  <Step>
    ## Elasticsearch 統合をインストールする [#install-the-elasticsearch-integration]

    Elasticsearch の統合により、クラスターのステータスや現在のシャードなどのメトリックが収集されます。 [Magento バージョン 2.4 以降を](https://magentip.com/install-magento-2-4-x-on-ubuntu-with-elasticsearch/)使用している場合は、Elasticsearch 統合をインストールする必要があります。

    統合をインストールするには:

    1. **[one.newrelic.com](https://one.newrelic.com/all-capabilities) > Add data**に移動します。
    2. **Elasticsearch**を検索してクリックします。
    3. アカウントを選択し、ガイド付きのインストール手順に従います。

    別の方法で統合をインストールする必要がある場合は、 [Apache 監視統合 を](/docs/infrastructure/host-integrations/host-integrations-list/elasticsearch/elasticsearch-integration)参照してください。
  </Step>

  <Step>
    ## シンセティック モニタリングのセットアップ [#synthetic-monitoring]

    当社の合成モニターは、さまざまな場所でアプリをテストし、サーバーのダウンタイムをキャプチャします。このデータは、Magento ビジネス インサイト ダッシュボードで表示できます。

    合成モニターをセットアップするには、 [ガイド付きインストール](https://onenr.io/0EjOXrnxgQ6)の手順に従います。
  </Step>

  <Step>
    ## AWS Identity and Access Management (IAM) 統合をインストールする [#install-the-AWS-integration]

    当社の AWS IAM 統合は、アカウントごとの証明書、アカウントごとのグループ、アカウントごとの MFA デバイス、アカウントごとのロール、アカウントごとのユーザーなどのメトリクスを収集します。

    統合をインストールするには:

    1. **[one.newrelic.com](https://one.newrelic.com/) > Add data**に移動します。
    2. **Integrate your AWS account**を検索してクリックします。
    3. アカウントを選択し、ガイド付きのインストール手順に従います。

    この統合の詳細については、 [AWS IAM 統合を](/docs/infrastructure/amazon-integrations/aws-integrations-list/aws-iam-monitoring-integration)参照してください。
  </Step>

  <Step>
    ## Flex 統合を作成する [#install-the-flex-integration]

    当社のカスタム Flex 統合により、アプリ データベースのクエリを通じてビジネス メトリックを取得できます。

    Flex 統合を作成するには:

    1. `nri-flex` 構成ファイルを作成します。

       * 構成ファイルへのパス: `/etc/newrelic-infra/integrations.d/`
       * 構成ファイル名: `mysql-database-config.yml`

    2. 次のコード スニペットを構成ファイルに追加します。

       ```
       # NOTE: 'database' is an experimental API at this time
       # ref: https://github.com/newrelic/nri-flex/blob/master/docs/experimental/db.md
       ---
       integrations:
       - name: nri-flex
           # interval: 30s
           config:
           name: MySQLDbFlex
           apis:
               - database: mysql
               # connection string for an rds mysql instance. Be sure to use the writer endpoint here.  /sys is the default database. newrelic:Password is the user:pass.
               db_conn: newrelic:Root!123@tcp(localhost:3306)/magento2 
               logging:
                   open: true
               # custom_attributes: # applies to all queries
               #   host: CustomMagentoMySQL # custom host name atribute
               db_async: true # process queries async
               db_queries:
                   - name: MySQLShowVars
                   run: SHOW VARIABLES;
                   custom_attributes: # can apply additional at a nested level
                       attype: show-vars
                       host: CustomMagentoMySQL
                   - name: MySQLShowStatus
                   run: SHOW STATUS LIKE 'Max%conn%';
                   custom_attributes: # can apply additional at a nested level
                       attype: used-conns
                       host: CustomMagentoMySQL
                   - name: MySQLCustomProcessList
                   run: SELECT * FROM INFORMATION_SCHEMA.PROCESSLIST # grab all processes from MySQL
                   custom_attributes: # can apply additional at a nested level
                       attype: info-schema-query
                       host: CustomMagentoMySQL
                   - name: MYSQLSalesOrderDetails
                   run: SELECT grand_total, shipping_amount, subtotal, total_paid, discount_amount, store_currency_code, created_at, updated_at, customer_is_guest, tax_amount, customer_id, status, entity_id AS 'order_id' FROM sales_order;
                   - name: MySQLSalesOrderCumulative
                   run: SELECT AVG(grand_total) AS 'average_grand_total', SUM(grand_total) AS 'grand_total_sum', SUM(total_item_count) AS 'total_order_item_count' FROM sales_order;
                   custom_attributes: # can apply additional at a nested level
                       attype: blocking-query
                       host: CustomMagentoMySQL
                   - name: MySQLSalesOrderByStatus
                   run: SELECT status AS 'order_status', COUNT(increment_id) AS 'total_orders', (SUM(grand_total)) AS 'total_billed_amount_by_status' FROM sales_order GROUP BY status;
                   - name: MYSQLSalesOrderByCustomerGroup
                   run: SELECT SUM(salesOrder.grand_total) AS 'grand_total_sum_of_all_orders', AVG(salesOrder.grand_total) AS 'grand_total_average_of_all_orders', customerGroup.customer_group_code AS 'customer_group_code' FROM `sales_order` salesOrder JOIN `customer_group` customerGroup ON salesOrder.customer_group_id = customerGroup.customer_group_id GROUP BY salesOrder.customer_group_id;
                   - name: MYSQLSalesOrderByProduct
                   run: SELECT items.order_id AS 'Order ID', items.created_at AS 'Order Created Date', orders.status AS 'Order Status', items.name AS 'productName', items.sku AS ProductSearchcode, orders.total_item_count AS 'Order Quantity', orders.grand_total AS 'Grand Total' FROM sales_order AS orders JOIN sales_order_item AS items ON items.order_id = orders.entity_id;
                   - name: MYSQLSalesOrderByCategory
                   run: SELECT items.name AS Category, AVG(orders.grand_total) AS 'average_order_total'  FROM sales_order AS orders JOIN sales_order_item AS items ON items.order_id = orders.entity_id GROUP BY items.name;
                   - name: MYSQLSalesOrderByRegion
                   run: SELECT soa.country_id, soa.region_id, dcrn.name 'Region Name', so.entity_id AS 'Order ID', so.grand_total FROM sales_order_address soa JOIN directory_country_region_name dcrn JOIN sales_order so WHERE soa.region_id = dcrn.region_id AND so.entity_id = soa.parent_id;
                   - name: MYSQLSalesOrderByCustomer
                   run: SELECT so.customer_id, ce.email, AVG(so.grand_total) AS 'average_grand_total' FROM sales_order so JOIN customer_entity ce ON so.customer_id = ce.entity_id GROUP BY so.customer_id;
                   - name: MYSQLMagentoDetails
                   run: SELECT query_text, num_results FROM `search_query`;
                   - name: MySQLSalesOrderPayment
                   run: SELECT amount_ordered, shipping_amount, method, additional_information FROM sales_order_payment;
                   custom_attributes: # can apply additional at a nested level
                       attype: blocking-query
                       host: CustomMagentoMySQL
                   - name: MySQLSalesOrderPaymentCount
                   run: SELECT count(*) as CountOfOrderByMethod, method as PaymentMethodType FROM `sales_order_payment` group by method;
                   custom_attributes: # can apply additional at a nested level
                       attype: blocking-query
                       host: CustomMagentoMySQL
                   - name: MySQLCustomerEntity
                   run: SELECT email, created_at, is_active FROM customer_entity;
                   - name: MYSQLAbandonedCarts
                   run: SELECT customer_email, items_count AS 'Products', items_qty AS 'Quantity', subtotal, remote_ip, reserved_order_id FROM `quote` WHERE customer_email IS NOT NULL AND reserved_order_id IS NULL AND subtotal != 0.0000;
                   - name: MYSQLCustomerEntityRegisteredUsers
                   run: SELECT count(*) AS 'Registered Accounts' FROM `customer_entity`;
                   - name: MYSQLUnregisteredCustomers
                   run: SELECT customer_email FROM sales_order WHERE customer_is_guest = 1 GROUP BY customer_email;
                   - name: MYSQLSalesOrderByUnregisteredCustomers2
                   run: SELECT COUNT(entity_id) AS 'Total Order Ids', SUM(grand_total) AS 'Grand Total Sum' FROM sales_order WHERE customer_is_guest = 1;
                   - name: MYSQLCustomerEntityActiveUsers
                   run: SELECT count(is_active) AS 'Active Users' FROM `customer_entity` WHERE is_active = 1;
                   - name: MYSQLReturningCustomers
                   run: WITH ctel1 AS (SELECT COUNT(entity_id) AS 'numberOfOrders', customer_email AS 'customerEmail' FROM sales_order GROUP BY customer_email) SELECT count(*) AS 'returningCustomers' FROM ctel1 WHERE numberOfOrders > 1;
                   - name: MYSQLNewCustomers
                   run: SELECT COUNT(DISTINCT email) AS 'newCustomers' FROM customer_entity WHERE MONTH(created_at) >= MONTH(CURRENT_DATE() - INTERVAL 1 MONTH);
                   - name: MYSQLLoginsPerDay
                   run: SELECT DATE(last_visit_at) as 'Date', count(*) as 'Total Logins', count(DISTINCT customer_id) AS 'Number of Customers' FROM `customer_visitor` GROUP BY customer_id, DATE(last_visit_at);
                   - name: MYSQLBestSellersDaily
                   run: SELECT SUM(qty_ordered) as 'QuantityOrdered', product_name FROM sales_bestsellers_aggregated_daily GROUP BY product_id, product_name ORDER BY QuantityOrdered DESC;
                   - name: MYSQLRevenuePerMonthAndYear
                   run: SELECT SUM(grand_total) AS 'TotalRevenue', AVG(grand_total) AS 'AverageRevenue', YEAR(created_at) AS 'Year', MONTH(created_at) AS 'Month' FROM sales_order WHERE status = 'complete' GROUP BY YEAR(created_at), MONTH(created_at);
                   - name: MYSQLMostViewedProductsDaily
                   run: SELECT SUM(views_num) as 'viewCount', product_name FROM report_viewed_product_aggregated_daily GROUP BY product_name ORDER BY viewCount DESC;
                   - name: MYSQLConversionRate
                   run: WITH cte1 AS (SELECT soi.product_id AS 'SalesProductId', soi.name AS 'ProductName', COUNT(soi.order_id) AS 'totalOrders' FROM `sales_order_item` soi group by soi.product_id, soi.name), cte2 AS (SELECT viewed.product_id AS 'productId', COUNT(viewed.product_id) AS 'totalViews' FROM `report_viewed_product_index` viewed group by viewed.product_id) SELECT SalesProductId as 'productID', ProductName, totalViews,totalOrders,totalOrders/totalViews *100 as 'conversionRateInPercent' FROM cte1 JOIN cte2 WHERE cte1.SalesProductId = cte2.ProductId;
                   - name: MYSQLTopTenSalesOrdersByValue
                   run: SELECT entity_id AS 'orderId', total_item_count AS 'orderQuantity', created_at AS 'createdDate', grand_total AS 'grandTotal' FROM sales_order ORDER BY grand_total DESC LIMIT 10;
                   - name: MYSQLOrdersAverage
                   run: SELECT AVG(order_count) AS 'AverageNumberOfOrders', Year AS 'Year' FROM (SELECT YEAR(created_at) AS 'Year', COUNT(DISTINCT order_id) AS order_count FROM sales_order_item GROUP BY MONTH(created_at), YEAR(created_at)) subquery GROUP BY Year;
                   - name: MYSQLProductsTotal
                   run: SELECT count(*) AS 'Total Products' FROM catalog_product_entity_varchar WHERE attribute_id = 73;
                   custom_attributes: # can apply additional at a nested level
                       attype: blocking-query
                       host: CustomMagentoMySQL
       ```
  </Step>

  <Step>
    ## インフラストラクチャエージェントを再起動します

    データの読み取りを開始する前に、 [インフラストラクチャ エージェントのドキュメント](/docs/infrastructure/install-infrastructure-agent/manage-your-agent/start-stop-restart-infrastructure-agent/) の手順に従ってインフラストラクチャ エージェントを再起動します。
  </Step>

  <Step>
    ## Magento ビジネス インサイト ダッシュボードをインストールする [#install-dashboard]

    1. **[one.newrelic.com](https://one.newrelic.com/all-capabilities) > Dashboards**に移動します。
    2. 検索バーに「Magento ビジネス インサイト」と入力します。ダッシュボードが表示されます。
    3. それをクリックしてインストールします。

    Magento ダッシュボードはカスタム ダッシュボードと見なされ、 **Dashboard**\[ダッシュボード] UI で見つけることができます。ダッシュボードの使用と編集については、 [ダッシュボードのドキュメント](/docs/query-your-data/explore-query-data/dashboards/introduction-dashboards)を参照してください。
  </Step>
</Steps>

## Magento データをクエリする [#query-data]

Magento アプリ データのクエリに興味がありますか?以下は、Magento プラットフォームに登録されている顧客の総数を確認する NRQL クエリの例です。

```sql
SELECT LATEST(`Registered Accounts`) AS ‘Registered Accounts’ FROM MYSQLCustomerEntityRegisteredUsers
```

## 次は何ですか？ [#whats-next]

データのクエリとカスタム ダッシュボードの作成について詳しくは、次のドキュメントをご覧ください。

* [クエリビルダーの概要](/docs/query-your-data/explore-query-data/query-builder/introduction-query-builder)
* [カスタム ダッシュボードの概要](/docs/query-your-data/explore-query-data/dashboards/introduction-dashboards)
* [ダッシュボードの管理](/docs/query-your-data/explore-query-data/dashboards/manage-your-dashboard)