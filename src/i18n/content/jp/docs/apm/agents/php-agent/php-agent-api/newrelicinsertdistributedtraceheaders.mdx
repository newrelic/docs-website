---
title: newrelic_insert_distributed_trace_headers
type: apiDoc
shortDescription: W3C Trace Context ヘッダと New Relic Distributed Tracing ヘッダを、送信するヘッダの配列に挿入します。
tags:
  - Agents
  - PHP agent
  - PHP agent API
translationType: machine
---

## 構文

```php
newrelic_insert_distributed_trace_headers (array $headers)
```

W3C Trace Context ヘッダと New Relic Distributed Tracing ヘッダを、送信するヘッダの配列に挿入します。

## 要件

Requires PHP agent [version 9.8 or higher](/docs/release-notes/agent-release-notes/php-release-notes).

## 説明

`newrelic_insert_distributed_trace_headers` を使用して、分散トレース ヘッダーを送信ヘッダーの配列に手動で追加します。

分散トレーシングが有効な場合、 `newrelic_insert_distributed_trace_headers` は常に W3C トレース コンテキスト ヘッダーを挿入します。また、デフォルトでは New Relic Distributed Tracing ヘッダーも挿入されますが、これは `newrelic.distributed_tracing_exclude_newrelic_header` INI 設定で無効にすることができます。

## パラメーター

<table>
  <thead>
    <tr>
      <th width="25%">
        パラメータ
      </th>

      <th>
        説明
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `$headers`

        _アレイ_
      </td>

      <td>
        必要です。アウトバウンドヘッダーの（任意で空の）配列です。この引数は参照によって渡されるため、リテラルではなく変数である必要があります。
      </td>
    </tr>
  </tbody>
</table>

## 戻り値

`true` 提供された配列にヘッダーが正常に挿入された場合は、それ以外の場合は戻り値を返します。 `false`

## 例

このAPIメソッドの使用方法やタイミングの例については、 [手動で計測するアプリケーションやサービスのドキュメントを参照してください](/docs/agents/php-agent/features/distributed-tracing-php#manual) 。