---
title: newrelic_insert_distributed_trace_headers
type: apiDoc
shortDescription: W3C Trace Context ヘッダと New Relic Distributed Tracing ヘッダを、送信するヘッダの配列に挿入します。
tags:
  - Agents
  - PHP agent
  - PHP agent API
translationType: machine
---

## 構文

```
newrelic_insert_distributed_trace_headers (array $headers)
```

W3C Trace Context ヘッダと New Relic Distributed Tracing ヘッダを、送信するヘッダの配列に挿入します。

## 要件

Requires PHP agent [version 9.8 or higher](/docs/release-notes/agent-release-notes/php-release-notes).

## 説明

`newrelic_insert_distributed_trace_headers` を使って、手動でアウトバウンド・ヘッダーの配列に分散型トレーシング・ヘッダーを追加します。

Distributed Tracing が有効な場合、 `newrelic_insert_distributed_trace_headers` は常に W3C トレースコンテキストヘッダーを挿入します。また、デフォルトでは New Relic Distributed Tracing ヘッダも挿入されますが、これは `newrelic.distributed_tracing_exclude_newrelic_header` INI の設定で無効にすることができます。

## パラメータ

<table>
  <thead>
    <tr>
      <th width="25%">
        パラメーター
      </th>

      <th>
        説明
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `$headers`

        _アレイ_
      </td>

      <td>
        必要です。アウトバウンドヘッダーの（任意で空の）配列です。この引数は参照によって渡されるため、リテラルではなく変数である必要があります。
      </td>
    </tr>
  </tbody>
</table>

## 戻り値

`与えられた配列へのヘッダの挿入に成功した場合は True` 、そうでない場合は `False を返します。`

## 例

このAPIメソッドの使用方法やタイミングの例については、 [手動で計測するアプリケーションやサービスのドキュメントを参照してください](/docs/agents/php-agent/features/distributed-tracing-php#manual) 。