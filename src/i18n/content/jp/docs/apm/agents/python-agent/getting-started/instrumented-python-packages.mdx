---
title: インストルメント化されたPythonパッケージ
tags:
  - Agents
  - Python agent
  - Getting started
metaDescription: Summary of Python packages and modules that are automatically instrumented with the New Relic Python agent.
translationType: machine
---

このドキュメントは、 [Python エージェント](/docs/agents/python-agent/getting-started/new-relic-python) が [をインストールした後に、自動的にインスツルメンテーションされるパッケージとモジュールのリストです。また、必要に応じて ](/docs/agents/python-agent/getting-started/python-agent-quick-start)[カスタムインスツルメンテーション](/docs/agents/python-agent/supported-features/python-custom-instrumentation) を使用することもできます。

* 特定のパッケージやモジュールに対するインスツルメンテーションがアプリの動作を妨げる場合は、インスツルメンテーションを無効にします。
* エージェントによって自動的にインスツルメンテーションされていないサードパーティ製のパッケージやモジュールをインスツルメンテーションすること。
* 独自のコードに対して、追加機能に費やした時間を追跡するなど、より具体的なインスツルメンテーションを追加します。

追加パッケージの組み込みインストゥルメンテーションをご希望の方は、 [support.newrelic.com](https://support.newrelic.com) までご連絡ください。

## ウェブフレームワーク

<CollapserGroup>
  <Collapser
    id="aiohttp"
    title={<ExternalLink href="http://aiohttp.readthedocs.io">aiohttp</ExternalLink>}
  >
    バージョン2.2.x以上に対応。

    低速トランザクションのためのトランザクション・トレースの機能タイミングが提供されています。

    * 関数（コルーチン）を見る。

    * アプリケーションミドルウェア。

      例外的にロギングが行われます。

    * 200以外のHTTPレスポンスをもたらす、生来の例外。

      Webトランザクションは、ビュー機能にちなんで名付けられました。
  </Collapser>

  <Collapser
    id="bottle"
    title={<ExternalLink href="http://bottlepy.org/">Bottle</ExternalLink>}
  >
    低速トランザクションのためのトランザクション・トレースの機能タイミングが提供されています。

    * 機能を見る。

    * SimpleTemplate、MakoTemplate、CheetahTemplate、Jinja2Template、SimpleTalTemplateの各インターフェースによるテンプレートのレンダリング。

      例外的にロギングが行われます。

    * 例外が発生した場合は、Bottleから500件のレスポンスが発生します。

      Webトランザクションは、ビュー機能にちなんで名付けられました。

      Bottleは外部のテンプレートライブラリを使用しているため、詳細については、どのパッケージがサポートされているかを参照してください。
  </Collapser>

  <Collapser
    id="cherrypy"
    title={<ExternalLink href="http://cherrypy.org/">CherryPy</ExternalLink>}
  >
    低速トランザクションのためのトランザクション・トレースの機能タイミングが提供されています。

    * ハンドラー機能です。

      例外的にロギングが行われます。

    * CherryPyから500件のレスポンスが発生するような例外を未然に防ぎます。

      Webトランザクションは、ハンドラー機能にちなんで名付けられています。

      CherryPyは外部のテンプレートライブラリに依存しているため、詳細はどのパッケージがサポートされているかを参照してください。
  </Collapser>

  <Collapser
    id="django"
    title={<ExternalLink href="http://www.djangoproject.com/">Django</ExternalLink>}
  >
    低速トランザクションのためのトランザクション・トレースの機能タイミングが提供されています。

    * リクエストミドルウェア。

    * ビューミドルウェア。

    * テンプレートレスポンスミドルウェア。

    * レスポンスミドルウェア。

    * 例外ミドルウェア。

    * テンプレートレンダリング。

      例外的にロギングが行われます。

    * URLリゾルバによるビューハンドラの読み込み時に発生する例外です。

    * ビューハンドラの実行中に発生した例外。

    * Django から 500 レスポンスが返ってくるような例外が発生しないようにしました。

      ページロードタイミング（リアルユーザーモニタリング（RUM）と呼ばれることもあります）のサポートは以下の通りです。

    * レスポンスミドルウェアによるJavaScriptヘッダ/フッタの自動挿入（オプション）。

    * JavaScriptのヘッダ/フッタをテンプレートに手動で挿入できるテンプレートタグライブラリの提供。

      ビュー・ハンドラが呼び出される前に、リクエストやビューのミドルウェアがレスポンス・オブジェクトを返さない限り、ウェブ・トランザクションの名前はビュー・ハンドラの後に付けられます。

      また、インストゥルメンテーションを使用することで、より適切なWebトランザクションのネーミングや追加の機能トレースを実現しています。

    * [django-REST-framework](http://www.django-rest-framework.org/)

    * [ジャンゴ・ピストン](https://bitbucket.org/jespern/django-piston/wiki/Home)

    * [ジャンゴ・テイスティパイ](http://tastypieapi.org/)
  </Collapser>

  <Collapser
    id="falcon"
    title={<ExternalLink href="https://falconframework.org/">Falcon</ExternalLink>}
  >
    低速トランザクションのためのトランザクション・トレースの機能タイミングが提供されています。

    * ハンドラー機能です。

      例外的にロギングが行われます。

    * アンキャッチされた例外は、Falconからエラーレスポンスを生成します。

      Webトランザクションは、ハンドラー機能にちなんで名付けられています。
  </Collapser>

  <Collapser
    id="fastapi"
    title={<ExternalLink href="https://github.com/tiangolo/fastapi">FastAPI</ExternalLink>}
  >
    低速トランザクションのためのトランザクション・トレースの機能タイミングが提供されています。

    * ルート関数（コルーチン）。

    * アプリケーションミドルウェア。

    * 例外ハンドラー。

    * バックグラウンドタスク

      例外的にロギングが行われます。

    * ミドルウェア内部で発生する例外。

    * 例外ハンドラの内部で発生する例外。

    * FastAPI から 500 レスポンスを生成するような未解決の例外が発生します。

      Webトランザクションは、ルートハンドラーにちなんで名付けられています。
  </Collapser>

  <Collapser
    id="flask"
    title={<ExternalLink href="http://flask.pocoo.org/">Flask</ExternalLink>}
  >
    低速トランザクションのためのトランザクション・トレースの機能タイミングが提供されています。

    * 機能を見る。

    * render_template()とrender_template_string()によるテンプレートのレンダリング。

      例外的にロギングが行われます。

    * Flaskから500のレスポンスを生成してしまうような未解決の例外が発生します。

      Webトランザクションは、ビュー機能にちなんで名付けられました。

      FlaskはテンプレートにJinja2を使用しているので、下記のJinja2 instrumentationの詳細も参照してください。
  </Collapser>

  <Collapser
    id="grpc"
    title={<ExternalLink href="https://grpc.github.io/grpc/python/">gRPC</ExternalLink>}
  >
    バージョン1.4以降で対応。

    低速トランザクションのためのトランザクショントレースの機能タイミングが提供されます。

    * `ストリーム レスポンス イン プール`

    * `_unary_response_in_pool`

      例外的にロギングが行われます。

    * grpcサーバーの異常終了
  </Collapser>

  <Collapser
    id="pylons"
    title={<ExternalLink href="http://pylonsproject.org/">Pylons</ExternalLink>}
  >
    低速トランザクションのためのトランザクション・トレースの機能タイミングが提供されています。

    * コントローラー機能、ビフォーアフターの方法

    * render_genshi()、render_jinja2()、render_mako()によるテンプレートのレンダリング。

      例外的にロギングが行われます。

    * Pylonから500件のレスポンスが発生するような例外が発生しないようにする。

      Webトランザクションは、コントローラ/アクションにちなんで名付けられています。

      PylonsはテンプレートにGenshi、Jinja2、Makoを使用することができますので、以下のモジュールのインストゥルメンテーションの詳細もご覧ください。
  </Collapser>

  <Collapser
    id="pyramid"
    title={<ExternalLink href="http://pylonsproject.org/">Pyramid</ExternalLink>}
  >
    低速トランザクションのためのトランザクション・トレースの機能タイミングが提供されています。

    * ビューハンドラ機能。

      例外的にロギングが行われます。

    * ピラミッドから500件の応答が発生するような例外が発生しない。

      Web トランザクションの名前は、ビューハンドラにちなんで付けられています。
  </Collapser>

  <Collapser
    id="sanic"
    title={<ExternalLink href="https://github.com/channelcat/sanic">Sanic</ExternalLink>}
  >
    低速トランザクションのためのトランザクション・トレースの機能タイミングが提供されています。

    * 関数（コルーチン）を見る。

    * アプリケーションミドルウェア。

      例外的にロギングが行われます。

    * リクエストミドルウェアの内部で発生する例外。

    * レスポンスミドルウェアの内部で発生する例外です。

    * リクエストハンドラ内で発生する例外。

    * 例外ハンドラの内部で発生する例外。

    * アンキャッチされた例外が発生すると、SANICから500件のレスポンスが発生します。

      Web トランザクションの名前は、ビューハンドラにちなんで付けられています。
  </Collapser>

  <Collapser
    id="starlette"
    title={<ExternalLink href="https://github.com/encode/starlette">Starlette</ExternalLink>}
  >
    低速トランザクションのためのトランザクション・トレースの機能タイミングが提供されています。

    * ルート関数（コルーチン）。

    * アプリケーションミドルウェア。

    * 例外ハンドラー。

    * バックグラウンドタスク

      例外的にロギングが行われます。

    * ミドルウェア内部で発生する例外。

    * 例外ハンドラの内部で発生する例外。

    * 例外が発生した場合、Starletteから500件のレスポンスが発生します。

      Webトランザクションは、ルートハンドラーにちなんで名付けられています。
  </Collapser>

  <Collapser
    id="tornado"
    title={<ExternalLink href="http://www.tornadoweb.org/en/stable/">トルネード</ExternalLink>}
  >
    Pythonエージェントは、 [Tornado 6](/docs/agents/python-agent/web-frameworks-servers/python-agent-tornado-6-web-framework) を使用するアプリで使用できます。
  </Collapser>

  <Collapser
    id="web2py"
    title={<ExternalLink href="http://web2py.com/">Web2py</ExternalLink>}
  >
    低速トランザクションのためのトランザクション・トレースの機能タイミングが提供されています。

    * モデルの段階での全体の時間。

    * コントローラフェーズの全体時間

    * 表示段階での全体の時間。

    * モデル、コントローラ、ビューの各フェーズで実行される特定のスクリプトの実行時間。

      例外的にロギングが行われます。

    * Web2pyから500のレスポンスを生成するような例外の未解決。

      Webトランザクションの名前はビュースクリプトにちなんで付けられています。
  </Collapser>
</CollapserGroup>

## バックエンドサービス [#backend-services]

<CollapserGroup>
  <Collapser
    id="gearman"
    title={<ExternalLink href="https://pypi.python.org/pypi/gearman/">ギアマン</ExternalLink>}
  >
    指定されたウェブアプリケーションに対するバックグラウンドタスクとして記録された、ギアマンワーカーで実行されるタスク実行のタイミング。キューイングされたタスクの実行をキューイングしたり、待ったりするための、gearmanサーバーへのクライアント側の呼び出しを、Web外部としてのタイミング。
  </Collapser>

  <Collapser
    id="celery"
    title={<ExternalLink href="http://celeryproject.org/">セロリ</ExternalLink>}
  >
    指定されたWebアプリケーションに対して、バックグラウンドタスクとして記録されたタスクの実行タイミング。
  </Collapser>
</CollapserGroup>

## テンプレートレンダリング

<CollapserGroup>
  <Collapser
    id="genshi"
    title={<ExternalLink href="http://genshi.edgewall.org/">ゲンシ</ExternalLink>}
  >
    低速トランザクションのためのトランザクション・トレースの機能タイミングが提供されています。

    * テンプレートレンダリング。
  </Collapser>

  <Collapser
    id="jinja2"
    title={<ExternalLink href="http://jinja.pocoo.org/">ジンジャ2</ExternalLink>}
  >
    低速トランザクションのためのトランザクション・トレースの機能タイミングが提供されています。

    * テンプレート作成
    * テンプレートレンダリング。
  </Collapser>

  <Collapser
    id="mako"
    title={<ExternalLink href="http://www.makotemplates.org/">マコ</ExternalLink>}
  >
    低速トランザクションのためのトランザクション・トレースの機能タイミングが提供されています。

    * テンプレートレンダリング。
  </Collapser>
</CollapserGroup>

## GraphQLフレームワーク

Pythonエージェントは、GraphQLアプリケーションの操作やリゾルバを把握し、GraphQL特有のメトリクスやスパン属性をレポートします。トランザクションのネーミングやその他の機能の詳細については、 [GraphQL documentation](/docs/agents/python-agent/supported-features/python-graphQL) をご覧ください。エージェントバージョン6.10.0.165の時点で、エージェントは以下のGraphQLフレームワークをサポートしています。

* [グラフェン](https://docs.graphene-python.org/en/latest/)
* [アリアドネ](https://ariadnegraphql.org/docs/intro)
* [ストロベリー](https://strawberry.rocks/)
* [Starlette GraphQL](https://www.starlette.io/graphql/)
* [FastAPI GraphQL](https://fastapi.tiangolo.com/advanced/graphql/)

## インスタンスの詳細

エージェントは、様々なデータベースとデータベースドライバのために [インスタンスの詳細を収集します](/docs/apm/applications-menu/features/analyze-database-instance-level-performance-issues) 。特定のインスタンスやデータベース情報の種類を見ることができるかどうかは、Pythonエージェントのバージョンによって異なります。

Python エージェント [バージョン 2.72.0.52 以上](/docs/release-notes/agent-release-notes/python-release-notes) は以下をサポートしています。

<table>
  <thead>
    <tr>
      <th>
        データベース
      </th>

      <th>
        Pythonパッケージ名
      </th>

      <th>
        パッケージの最小バージョン
      </th>

      <th>
        エージェントの最小バージョン
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        [PostgreSQL](https://www.postgresql.org/)
      </td>

      <td>
        [psycopg2](https://pypi.python.org/pypi/psycopg2)
      </td>

      <td>
        2.0.14
      </td>

      <td>
        2.72.0.52
      </td>
    </tr>

    <tr>
      <td>
        [MySQL](http://www.mysql.com/)
      </td>

      <td>
        [MySQLdb](https://pypi.python.org/pypi/MySQL-python/)
      </td>

      <td>
        1.2.5
      </td>

      <td>
        2.74.0.54
      </td>
    </tr>

    <tr>
      <td>
        [Redis](http://redis.io/)
      </td>

      <td>
        [redis](https://pypi.python.org/pypi/redis)
      </td>

      <td>
        2.6.2
      </td>

      <td>
        2.74.0.54
      </td>
    </tr>

    <tr>
      <td>
        [Memcached](https://memcached.org/)
      </td>

      <td>
        [python-memcached](https://pypi.python.org/pypi/python-memcached)
      </td>

      <td>
        1.51
      </td>

      <td>
        2.76.0.55
      </td>
    </tr>

    <tr>
      <td>
        [Elasticsearch](https://www.elastic.co/products/elasticsearch)
      </td>

      <td>
        [エラスティックサーチ](https://pypi.python.org/pypi/elasticsearch)
      </td>

      <td>
        0.45
      </td>

      <td>
        2.78.0.56
      </td>
    </tr>
  </tbody>
</table>

お使いのエージェントで現在表示されていないデータストアのインスタンスレベルの情報を要求するには、 [support.newrelic.com](https://support.newrelic.com) でサポートを受けてください。

## SQLデータベースアダプタ

このセクションに記載されているPython DB-API 2.0準拠のモジュールでは、Pythonエージェントがサポートしています。

* データベースへの問い合わせのタイミング
* データベースクエリ用のSQLの取り込み
* 長いデータベースクエリのスタックトレースの取得
* MySQLとPostgreSQのみ。遅いデータベースクエリの説明プランの取得

Pythonエージェントは、Python DB-API 2.0に準拠したモジュールのデータベースクエリを追跡できるはずです。ただし、公式にサポートしているのは、このセクションで紹介しているモジュールのみです。

* [cx_Oracle](http://cx-oracle.sourceforge.net/)
* [MySQLdb](http://mysql-python.sourceforge.net/)
* [oursql](https://launchpad.net/oursql)
* [プロボスコス](https://pypi.python.org/pypi/proboscis)
* [psycopg2](http://initd.org/psycopg/)
* [psycopg2ct](http://pypi.python.org/pypi/psycopg2ct)
* [psycopg2cffi](http://pypi.python.org/pypi/psycopg2cffi)
* [pymysql](https://github.com/petehunt/PyMySQL)
* [pyodbc](https://pypi.org/project/pyodbc/)
* [ibm_db_dbi](https://pypi.python.org/pypi/ibm_db)
* [mysql-connector-python](http://dev.mysql.com/doc/connector-python/en/index.html)
* [py-postgresql](http://python.projects.pgfoundry.org/)
* [pymssql](http://www.pymssql.org/)

以下のデータベースアダプタでは、DB-API 2.0仕様外の機能（カーソルを作成せずにクエリを実行するショートカットメソッドなど）に対する追加のインスツルメンテーションを提供しています。

* [pysqlite2](http://pypi.python.org/pypi/pysqlite/)
* [sqlite3](http://docs.python.org/library/sqlite3.html)

お使いのデータベースクライアントモジュールがこのセクションに記載されていない場合は、 [support.newrelic.com](https://support.newrelic.com) でサポートを受けてください。New Relic サポートでは、動作させるための一時的な設定ファイルの変更を提案できる場合があります。

## NoSQLデータベースクライアント

以下のクライアントモジュールについて、NoSQLデータベースに対して行われる呼び出しのタイミングを提供します。

* [ピモンゴ](http://pypi.python.org/pypi/pymongo/)
* [redis](http://pypi.python.org/pypi/redis/)

## Elasticsearchクライアント

Elasticsearchへの呼び出しにかかった時間は、メインの概要図とUIの「Databases」タブの両方に表示されます。

* [エラスティックサーチ](https://www.elastic.co/guide/en/elasticsearch/client/python-api/current/index.html)
* [pyelasticsearch](http://pyelasticsearch.readthedocs.org/)

## Memcacheクライアント

memcacheリクエストのタイミングとリクエストのタイプのキャプチャは、以下のmemcacheクライアントモジュールで提供されます。

* [メモリキャッシュ](http://www.tummy.com/Community/software/python-memcached/)
* [pylibmc](http://sendapatch.se/projects/pylibmc/)
* [bmemcached](https://github.com/jaysonsantos/python-binary-memcached)
* [pymemcache](https://github.com/Pinterest/pymemcache)
* [umemcache](https://github.com/esnme/ultramemcache)

## Solrサービスクライアント

以下のSolrクライアントモジュールについて、Solrのサービスリクエストのタイミングとリクエストの種類が提供されます。

* [パイソラー](http://pypi.python.org/pypi/pysolr/)
* [ソルピー](https://pypi.org/project/solrpy/)

## メッセージブローカークライアント

メッセージ・ブローカー・トランザクションのタイミングは、以下のモジュールに対して提供されます。

* [ピカ](https://pypi.python.org/pypi/pika)

## 外部Webサービス

外部からのWebサービスリクエストのタイミングは、以下のモジュールによって行われます。

* [aiohttp](http://aiohttp.readthedocs.io)
* [ドロップボックス](https://www.dropbox.com/developers/start/setup#python)
* [フェイスピー](http://facepy.readthedocs.org/)
* [フィードパーサー](https://pypi.python.org/pypi/feedparser)
* [gRPC](https://grpc.github.io/grpc/python/)
* [httplib](http://docs.python.org/library/httplib.html)
* [httplib2](https://pypi.org/project/httplib2/)
* [httpx](https://www.python-httpx.org/)
* [ピワピ](https://code.google.com/archive/p/python-weather-api/)
* [リクエスト](http://docs.python-requests.org)
* [urllib](http://docs.python.org/library/urllib.html)
* [urllib2](http://docs.python.org/library/urllib2.html)
* [urllib3](https://urllib3.readthedocs.org/en/latest/)
* [xmlrpclib](http://docs.python.org/library/xmlrpclib.html)