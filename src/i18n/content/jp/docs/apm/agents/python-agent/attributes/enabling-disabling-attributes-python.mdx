---
title: アトリビュートの有効化と無効化（Python）
tags:
  - Agents
  - Python agent
  - Attributes
metaDescription: 'How to include and exclude specific attributes for your Python agent, including configuration settings and rules.'
translationType: machine
---

ここでは、 [Python エージェントの属性を有効または無効にするための設定について説明しています。](/docs/agents/python-agent/attributes/python-agent-attributes) 、当社のエージェントが [デスティネーションに対してどの属性を含めるか、または除外するかを決定する際のルールについて説明しています。](/docs/features/agent-attributes#destinations) 。

これには、Pythonのエージェント設定 [のうち、エージェント属性のリリースに伴い廃止された設定の概要も含まれています](#deprecated) 。

## 構成設定 [#configurationSettings]

以下のデスティネーション設定を使用して、任意の属性コレクションに対してデスティネーションを開いたり閉じたりします。

<CollapserGroup>
  <Collapser
    id="cfg-attributes-enabled"
    title="attributes.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            トゥルー
          </td>
        </tr>
      </tbody>
    </table>

    すべてのアトリビュートをオンまたはオフにします。
  </Collapser>

  <Collapser
    id="cfg-tt-attributes-enabled"
    title="transaction_tracer.attributes.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            トゥルー
          </td>
        </tr>
      </tbody>
    </table>

    トランザクション トレースのすべての属性をオンまたはオフにします。 `attributes.enabled` が `false` の場合、この構成設定がどのように設定されているかにかかわらず、トランザクション トレースにアトリビュートは送信されません。
  </Collapser>

  <Collapser
    id="cfg-error-attributes-enabled"
    title="error_collector.attributes.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            タイプ：
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            トゥルー
          </td>
        </tr>
      </tbody>
    </table>

    トレースされたエラーのすべての属性をオンまたはオフにします。 `attributes.enabled` が `false` の場合、この構成設定がどのように設定されているかにかかわらず、トレースされたエラーにアトリビュートは送信されません。
  </Collapser>

  <Collapser
    id="cfg-events-attributes-enabled"
    title="transaction_events.attributes.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            タイプ：
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            トゥルー
          </td>
        </tr>
      </tbody>
    </table>

    トランザクションイベントのすべてのアトリビュートをオンまたはオフにします。 `attributes.enabled` が `false` の場合、この構成設定がどのように設定されているかにかかわらず、トランザクションイベントにアトリビュートは送信されません。
  </Collapser>

  <Collapser
    id="cfg-browser-attributes-enabled"
    title="ブラウザモニタリングの属性を有効にする"
  >
    <table>
      <tbody>
        <tr>
          <th>
            タイプ：
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            false
          </td>
        </tr>
      </tbody>
    </table>

    ブラウザ監視のためのすべての属性をオンまたはオフにします。これは、PageViewのデスティネーションに送られるデータです。 `attributes.enabled` が `false` の場合、この構成設定がどのように設定されているかに関わらず、アトリビュートはブラウザ・モニタリングに送信されません。
  </Collapser>
</CollapserGroup>

特定のデスティネーションで特定の属性を追加または削除するには、以下の属性/デスティネーション別の `.include` または `.exclude` の設定を使用します。

<CollapserGroup>
  <Collapser
    id="cfg-attributes-include"
    title="attributes.include"
  >
    <table>
      <tbody>
        <tr>
          <th>
            タイプ：
          </th>

          <td>
            ストリングスの空間分離されたリスト
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            (なし)
          </td>
        </tr>
      </tbody>
    </table>

    属性が有効な場合、このリストにあるすべての属性キーが送信されます。
  </Collapser>

  <Collapser
    id="cfg-attributes-exclude"
    title="attributes.exclude"
  >
    <table>
      <tbody>
        <tr>
          <th>
            タイプ：
          </th>

          <td>
            スペースで区切られた文字列のリスト
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            (なし)
          </td>
        </tr>
      </tbody>
    </table>

    このリストのすべての属性キーは **not** 送信されます。
  </Collapser>

  <Collapser
    id="cfg-tt-attributes-include"
    title="transaction_tracer.attributes.include"
  >
    <table>
      <tbody>
        <tr>
          <th>
            タイプ：
          </th>

          <td>
            スペースで区切られた文字列のリスト
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            (なし)
          </td>
        </tr>
      </tbody>
    </table>

    トランザクション トレースで属性が有効になっている場合、このリストにあるすべての属性キーがトランザクション トレースで送信されます。
  </Collapser>

  <Collapser
    id="cfg-tt-attributes-exclude"
    title="transaction_tracer.attributes.exclude"
  >
    <table>
      <tbody>
        <tr>
          <th>
            タイプ：
          </th>

          <td>
            スペースで区切られた文字列のリスト
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            (なし)
          </td>
        </tr>
      </tbody>
    </table>

    このリストのすべての属性キーは、 **not** トランザクショントレースで送信されます。
  </Collapser>

  <Collapser
    id="cfg-ec-attributes-include"
    title="error_collector.attributes.include"
  >
    <table>
      <tbody>
        <tr>
          <th>
            タイプ：
          </th>

          <td>
            スペースで区切られた文字列のリスト
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            (なし)
          </td>
        </tr>
      </tbody>
    </table>

    属性がトレースエラーに有効な場合、このリストのすべての属性キーがトレースエラーで送信されます。
  </Collapser>

  <Collapser
    id="cfg-ec-attributes-exclude"
    title="error_collector.attributes.exclude"
  >
    <table>
      <tbody>
        <tr>
          <th>
            タイプ：
          </th>

          <td>
            スペースで区切られた文字列のリスト
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            (なし)
          </td>
        </tr>
      </tbody>
    </table>

    このリストのすべての属性キーは、 **not** トレースされたエラーで送信されます。
  </Collapser>

  <Collapser
    id="cfg-te-attributes-include"
    title="transaction_events.attributes.include"
  >
    <table>
      <tbody>
        <tr>
          <th>
            タイプ：
          </th>

          <td>
            スペースで区切られた文字列のリスト
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            (なし)
          </td>
        </tr>
      </tbody>
    </table>

    属性がトランザクションイベントで有効になっている場合、このリストのすべての属性キーがトランザクションイベントで送信されます。
  </Collapser>

  <Collapser
    id="cfg-te-attributes-exclude"
    title="transaction_events.attributes.exclude"
  >
    <table>
      <tbody>
        <tr>
          <th>
            タイプ：
          </th>

          <td>
            スペースで区切られた文字列のリスト
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            (なし)
          </td>
        </tr>
      </tbody>
    </table>

    このリストのすべての属性キーは、 **not** トランザクションイベントで送信されます。
  </Collapser>

  <Collapser
    id="cfg-bm-attributes-include"
    title="ブラウザ_モニタリング.属性.インクルード"
  >
    <table>
      <tbody>
        <tr>
          <th>
            タイプ：
          </th>

          <td>
            スペースで区切られた文字列のリスト
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            (なし)
          </td>
        </tr>
      </tbody>
    </table>

    **browser_monitoring** で属性が有効になっている場合、このリストにあるすべての属性キーがページビューで送信されます。
  </Collapser>

  <Collapser
    id="cfg-bm-attributes-exclude"
    title="ブラウザ_モニタリング.アトリビュート.エクスクルード"
  >
    <table>
      <tbody>
        <tr>
          <th>
            タイプ：
          </th>

          <td>
            スペースで区切られた文字列のリスト
          </td>
        </tr>

        <tr>
          <th>
            デフォルト：
          </th>

          <td>
            (なし)
          </td>
        </tr>
      </tbody>
    </table>

    このリストで見つかったすべての属性キーは、 **not** ページビューで送信されます。
  </Collapser>
</CollapserGroup>

## アトリビュートルール [#attruls]

エージェントは、これらのルールに従って、デスティネーションに対してどの属性を含めるか、または除外するかを決定します。

<CollapserGroup>
  <Collapser
    id="rule-root-precedence"
    title="Rootレベルが優先されて有効になります。"
  >
    `attributes.enabled` フィールドは、他のすべての設定に優先します。 `false` の場合、属性は報告されません。

    設定例

    ```
    attributes.enabled = false
        attributes.include = foo bar
        transaction_tracer.attributes.enabled = true
    ```

    出力例。

    ```
    Keys passed in: foo, bar, baz
        Keys included for all destinations:
        Keys excluded for all destinations: foo, bar, baz
    ```
  </Collapser>

  <Collapser
    id="rule-destination-precedence"
    title="Destination enabledはincludeやexcludeよりも優先されます。"
  >
    `YOUR_DESTINATION.attributes.enabled` フラグは、includeおよびexcludeキーよりも優先されます。

    設定例

    ```
    transaction_tracer.attributes.enabled = false
        attributes.include = one two
        transaction_tracer.attributes.include = three four
    ```

    出力例。

    ```
    Keys passed in: one, two, three, four
        Keys included for transaction traces:
        Keys excluded for transaction traces: one, two, three, four
    ```
  </Collapser>

  <Collapser
    id="rule-included-destination"
    title="属性は、デスティネーションが有効な場合に含まれます。"
  >
    デスティネーションが有効な場合、すべてのユーザー属性はデフォルトでそのデスティネーションに送信されます。

    すべてのユーザー属性のデフォルトは `true` です。ただし、デフォルトでは、すべての送信先でリクエストパラメーターが無効になっています。

    設定例

    ```
    attributes.enabled = true
        attributes.exclude = baz
    ```

    出力例。

    ```
    Keys passed in: foo, bar, baz
        Keys included: foo, bar
        Keys excluded: baz
    ```
  </Collapser>

  <Collapser
    id="rule-exclude-wins"
    title="Excludeは常にIncludeに優先します。"
  >
    includeリストとexcludeリストに同じキーが記載されている場合は、指定されたキーを持つ属性は除外されます。

    設定例

    ```
    attributes.enabled = true
        attributes.include = foo bar
        attributes.exclude = nerd bar
    ```

    出力例。

    ```
    Keys passed in: foo, bar, nerd
        Keys included: foo
        Keys excluded: nerd, bar
    ```
  </Collapser>

  <Collapser
    id="rule-keys-case-sensitive"
    title="キーは大文字と小文字を区別します。"
  >
    キーは大文字と小文字を区別します。

    設定例

    ```
    attributes.enabled = true
        attributes.exclude = username UsErNaMe
    ```

    出力例。

    ```
    Keys passed in: username, Username, USERNAME, UsErNaMe, userNAME
        Keys included: Username, USERNAME, userNAME
        Keys excluded: username, UsErNaMe
    ```
  </Collapser>

  <Collapser
    id="rule-star-wildcard"
    title={<>ワイルドカードには <InlineCode>\*</InlineCode> を使用してください。</>}
  >
    キーの最後にアスタリスク `*` を付けると、ワイルドカードとして使用できます。これは、同じプレフィックスを持つ属性のセットにマッチします。

    設定例

    ```
    attributes.enabled = true
        attributes.include = custom*
        attributes.exclude = request.parameters.*
    ```

    出力例。

    ```
    Keys passed in: custom, custom.key1, custom.key2, request.parameters., request.parameters.foo, request.parameters.bar
        Keys included: custom, custom.key1, custom.key2
        Keys excluded: request.parameters., request.parameters.foo, request.parameters.bar
    ```
  </Collapser>

  <Collapser
    id="rule-specific-wins"
    title="キーの具体的な設定が優先されます。"
  >
    複数のincludeまたはexclude属性が同じキーに影響を与える場合は、最も具体的な設定が優先されます。

    設定例

    ```
    attributes.enabled = true
        attributes.include = request.parameters.foo
        attributes.exclude = request.parameters.*
    ```

    出力例。

    ```
    Keys passed in: request.parameters., request.parameters.foo, request.parameters.bar
        Keys included: request.parameters.foo
        Keys excluded: request.parameters., request.parameters.bar
    ```
  </Collapser>

  <Collapser
    id="rule-destination-include-exclude"
    title="特定のデスティネーションに影響を与えます。"
  >
    デスティネーションにincludeまたはexclude属性が指定されている場合、そのデスティネーションにのみ影響を与えます。

    設定例

    ```
    attributes.include = foo
        transaction_events.attributes.exclude = foo
    ```

    出力例。

    ```
    Keys passed in: foo
        Keys included for transaction events: 
        Keys included for other destinations: foo
        Keys excluded for transaction events: foo
    ```
  </Collapser>
</CollapserGroup>

## 非推奨の設定項目 [#deprecated]

以下の設定項目は非推奨となりました。Pythonエージェントをアップグレードする際には、これらの設定を新しい属性の設定に切り替えてください。

<table>
  <thead>
    <tr>
      <th width={200}>
        **非推奨の設定**
      </th>

      <th>
        **新規設定**
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `capture_params`
      </td>

      <td>
        `attributes.include = request.parameters.*`

        デフォルトでは、リクエストパラメータは送信されません。 `request.parameters.*` を `attributes.include` のリストに追加すると、すべてのリクエストパラメーターがオンになります。 `capture_params` プロパティは非推奨となりました。
      </td>
    </tr>

    <tr>
      <td>
        `ignored_params`
      </td>

      <td>
        `attributes.exclude = request.parameters.{name}。`

        各リクエストパラメータキーを `attributes.exclude` リストに追加します。キーの前には必ず `request.parameters` を付けてください。 `ignored_params` プロパティは推奨されていません。
      </td>
    </tr>

    <tr>
      <td>
        `analytics_events.enabled`
      </td>

      <td>
        `transaction_events.enabled`
      </td>
    </tr>

    <tr>
      <td>
        `analytics_events.capture_attributes（アナリティクス・エベント・キャプチャー・アトリビュート`
      </td>

      <td>
        `transaction_events.capture_attributes`
      </td>
    </tr>

    <tr>
      <td>
        `analytics_events.max_samples_stored`
      </td>

      <td>
        `transaction_events.max_samples_stored`
      </td>
    </tr>

    <tr>
      <td>
        `ブラウザー・モニタリング・キャプチャー・アトリビュート`
      </td>

      <td>
        `ブラウザモニタリングの属性を有効にする`
      </td>
    </tr>

    <tr>
      <td>
        `error_collector.capture_attributes`
      </td>

      <td>
        `error_collector.attributes.enabled`
      </td>
    </tr>

    <tr>
      <td>
        `transaction_tracer.capture_attributes`
      </td>

      <td>
        `transaction_tracer.attributes.enabled`
      </td>
    </tr>
  </tbody>
</table>