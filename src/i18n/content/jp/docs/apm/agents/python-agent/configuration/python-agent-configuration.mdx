---
title: Pythonエージェントの構成
tags:
  - Agents
  - Python agent
  - Configuration
metaDescription: 'How to configure the Python agent, including editing the Python agent config file and setting environment variables.'
freshnessValidatedDate: never
translationType: machine
---

[Pythonエージェント](/docs/agents/python-agent/getting-started/introduction-new-relic-python)では、構成オプションを使用してデフォルトのエージェント動作エージェントを変更できます。

唯一必要な Python エージェント構成設定は<InlinePopover type="licenseKey" />です。 ライセンスキーは、エージェントがアプリケーション データを報告するアカウントを識別します。 アプリケーションをホストする方法に応じて、ライセンスキーは設定ファイルまたは環境変数を介して提供できます。

## 構成方法と優先順位 [#options]

Pythonエージェントを構成する主な方法は、標準の[インストールプロセス](/docs/agents/python-agent/installation-configuration/python-agent-installation)の一部として生成される[構成ファイル](#agent-configuration-file)を使用することです。[UIでサーバー側の構成を](#server-side-configuration)使用するか、[環境変数](#environment-variables)を使用して、限られた数の構成オプションを設定することもできます。[WSGIリクエスト環境ディクショナリ](#per-request-configuration)を使用して設定を渡すことにより、リクエストごとにいくつかの設定を指定することもできます。

Pythonエージェントは、次の優先順位に従って構成されます。

<img title="diagram-python-config-precedence.png" alt="diagram-python-config-precedence.png" src="/images/apm_diagram_config-settings.webp" />

<figcaption>
  Python エージェントを使用すると、リクエストごとのオプションがサーバー側の設定をオーバーライドします。 有効にすると、サーバー側の値が空白のままであっても、サーバー側の構成はエージェント構成ファイル内の<DNT>**all**</DNT>に対応する値をオーバーライドします。 エージェント構成ファイルは環境変数をオーバーライドします。 環境変数はエージェントのデフォルトをオーバーライドします。
</figcaption>

各構成方法の詳細な説明は次のとおりです。

<CollapserGroup>
  <Collapser className="freq-link" id="agent-configuration-file" title="エージェント構成ファイル">
    通常、Pythonエージェントは、エージェントのホストシステム上のローカル構成ファイルから構成します。次のいずれかの方法を使用して、起動時に構成ファイルへのパスを指定します。

    * [`newrelic.agent.initialize()`](/docs/agents/python-agent/customization-extension/python-management-api#mgmt)を呼び出すときは、最初の引数として構成ファイルへのパスを指定します。

      また

    * `NEW_RELIC_CONFIG_FILE`環境変数を設定します。`newrelic-admin`ラッパースクリプトを使用する場合、ラッパースクリプトはエージェントを自動的に呼び出すため、環境変数を使用する必要があります。

      エージェントは 2 種類の設定ファイルをサポートします。エージェント v10.2.0 以前では`.ini`構文を使用する必要がありますが、Python バージョン 3.11 以降で実行されるエージェント バージョン v10.3.0 以降では`.toml`ファイルもサポートされます。

      <Collapser className="freq-link" id="agent-configuration-file-ini" title="`.ini` 設定ファイルの形式">
        設定ファイルは、Microsoft Windows `.ini`ファイルに似た構造を使用します。 詳細については、Python ConfigParser モジュールの[ファイル形式のドキュメント](https://docs.python.org/3/library/configparser.html)を参照してください。

        基本的な構造は次のようになります。

        ```ini
        [newrelic]
        license_key = <license key>
        app_name = Python Application
        ```
      </Collapser>

      <Collapser className="freq-link" id="agent-configuration-file-toml" title="`.toml` 設定ファイル形式">
        <Callout variant="tip">
          Python 3.11 以降、設定の新しい`.toml`構文が[標準ライブラリ](https://docs.python.org/3/library/tomllib.html)に追加されました。 エージェント バージョン`10.3.0`では、この新しい形式の使用のサポートが追加されました。
        </Callout>

        設定ファイルは Tom&apos;s Obvious Minimal Language `.toml`ファイルを使用します。 詳細については、[公式のファイル形式のドキュメント](https://toml.io/en/)を参照してください。

        `.toml`構文を使用するには、設定ファイルの名前が構文タイプを示す`.toml`で終わる必要があります。 標準の`pyproject.toml` 、他のライブラリの設定と一緒に使用することも、 `newrelic.toml`のようなより具体的なファイルを使用することもできます。

        基本的な構造は次のようになります。

        ```ini
        [tool.newrelic]
        license_key = <license key>
        app_name = Python Application
        ```
      </Collapser>

      <Callout variant="tip">
        サンプル構成ファイルは、Pythonエージェントに`newrelic/newrelic.ini`として含まれています。`generate-config`コマンドを使用して`newrelic-admin`スクリプトから生成することも[、ダウンロードリポジトリ](https://download.newrelic.com/python_agent/release/)からコピーをダウンロードすることもできます。
      </Callout>
  </Collapser>

  <Collapser className="freq-link" id="server-side-configuration" title="サーバー側の構成">
    [サーバーサイド設定を使用すると、](/docs/agents/manage-apm-agents/configuration/server-side-agent-configuration) New Relic UI で特定の設定を構成できます。 これにより、エージェントが複数のホストで実行されている場合でも、すべてのエージェントに変更が自動的に適用されます。 可能な場合、このドキュメントには、個々の構成オプションの下にサーバー側構成の UI ラベルが<DNT>**Server-side label**</DNT>として含まれています。

    <Callout variant="important">
      サーバー側構成が有効な場合、エージェントは UI で設定される構成ファイル内の値<DNT>**could**</DNT>を無視します。 UI 値が空の場合でも、エージェントはこれを空の文字列として扱い、エージェント構成ファイルを使用しません。
    </Callout>
  </Collapser>

  <Collapser className="freq-link" id="environment-variables" title="環境変数">
    環境変数を使用すると、特定のコア設定のデフォルトをオーバーライドできます。 同等の設定がエージェント構成ファイルに明示的にリストされている場合、構成ファイルの設定が環境変数よりも優先されます。 利用可能な場合、環境変数は、以下の個々の構成オプションの下に<DNT>**Environ variable**</DNT>として記載されています。

    単純な構成の場合、[サーバー側の構成](#server-side-configuration)と組み合わせて環境変数を使用し、エージェント構成ファイルを完全に回避できます。これは[Heroku](/docs/agents/python-agent/hosting-services/python-agent-heroku)のデフォルト設定であり、New Relicアドオンをインストールすると、必要な環境変数が自動的に入力されます。

    New Relic CodeStreamを使用してIDEからパフォーマンスを監視する場合は、[リポジトリをサービスに関連付け](/docs/codestream/observability/repo-association)、[ビルドSHAまたはリリースタグをエラーに関連付ける](/docs/codestream/observability/error-investigation/#buildsha)必要があります。

    <table>
      <thead>
        <tr>
          <th width="400px">
            <DNT>
              **Environment variable**
            </DNT>
          </th>

          <th>
            <DNT>
              **Configuration setting**
            </DNT>
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `NEW_RELIC_ENABLED`
          </td>

          <td>
            `enabled`
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_LICENSE_KEY`
          </td>

          <td>
            `license_key`
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_APP_NAME`
          </td>

          <td>
            `app_name`
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_MONITOR_MODE`
          </td>

          <td>
            `monitor_mode`
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_DEVELOPER_MODE`
          </td>

          <td>
            `developer_mode`
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_LOG`
          </td>

          <td>
            `log_file`
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_LOG_LEVEL`
          </td>

          <td>
            `log_level`
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_HIGH_SECURITY`
          </td>

          <td>
            `high_security`
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_HOST`
          </td>

          <td>
            `host`
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_OTLP_HOST`
          </td>

          <td>
            `otlp_host`
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_PORT`
          </td>

          <td>
            `port`
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_OTLP_PORT`
          </td>

          <td>
            `otlp_port`
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_PROXY_SCHEME`
          </td>

          <td>
            `proxy_scheme`
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_PROXY_HOST`
          </td>

          <td>
            `proxy_host`
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_PROXY_PORT`
          </td>

          <td>
            `proxy_port`
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_PROXY_USER`
          </td>

          <td>
            `proxy_user`
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_PROXY_PASS`
          </td>

          <td>
            `proxy_pass`
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_AUDIT_LOG`
          </td>

          <td>
            `audit_log_file`
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_STARTUP_TIMEOUT`
          </td>

          <td>
            `startup_timeout`
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_SHUTDOWN_TIMEOUT`
          </td>

          <td>
            `shutdown_timeout`
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_LABELS`
          </td>

          <td>
            `labels`
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_PROCESS_HOST_DISPLAY_NAME`
          </td>

          <td>
            `process_host.display_name`
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_API_KEY`
          </td>

          <td>
            `api_key`
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_CA_BUNDLE_PATH`
          </td>

          <td>
            `ca_bundle_path`
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_DISTRIBUTED_TRACING_ENABLED`
          </td>

          <td>
            `distributed_tracing.enabled`
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_APDEX_T`
          </td>

          <td>
            `apdex_t`
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_GC_RUNTIME_METRICS_ENABLED`
          </td>

          <td>
            `gc_runtime_metrics.enabled`
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_MEMORY_RUNTIME_PID_METRICS_ENABLED`
          </td>

          <td>
            `memory_runtime_pid_metrics.enabled`
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_ANALYTICS_EVENTS_MAX_SAMPLES_STORED`
          </td>

          <td>
            `transaction_events.max_samples_stored`
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_CUSTOM_INSIGHTS_EVENTS_MAX_SAMPLES_STORED`
          </td>

          <td>
            `custom_insights_events.max_samples_stored`
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_CUSTOM_INSIGHTS_EVENTS_MAX_ATTRIBUTE_VALUE`
          </td>

          <td>
            `custom_insights_events.max_attribute_value`
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_ML_INSIGHTS_EVENTS_MAX_SAMPLES_STORED`
          </td>

          <td>
            `event_harvest_config.harvest_limits.ml_event_data`
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_SPAN_EVENTS_MAX_SAMPLES_STORED`
          </td>

          <td>
            `span_events.max_samples_stored`
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_ERROR_COLLECTOR_MAX_EVENT_SAMPLES_STORED`
          </td>

          <td>
            `error_collector.max_event_samples_stored`
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_FEATURE_FLAG`
          </td>

          <td>
            `feature_flag`
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="per-request-configuration" title="リクエストごとの構成">
    特定のWSGIサーバーでは、リクエストごとに[アプリ名](#app_name)と[キャプチャ属性](#attributes)の設定を上書きできます。これは、リクエストごとのWSGI環境ディクショナリに渡される追加のキー/値のペアを定義できるWSGIサーバーで可能です。

    これらの値は、文字列`on` 、 `off` 、 `true` 、 `false` 、 `1` 、および`0`で設定します。Pythonコードを使用して実装された構成メカニズムから設定された場合、TrueまたはFalseに評価されるPythonオブジェクトも受け入れられます。

    <CollapserGroup>
      <Collapser id="example-apache-mod-wsgi" title="例：Apache/mod_wsgiアプリ名">
        Apache / mod\_wsgiサーバーでは、 `SetEnv`ディレクティブを使用して構成設定をオーバーライドできます（オプションで`Location`または`Directory`ブロック内）。たとえば、完全な仮想ホストのアプリ名、またはその仮想ホストのWSGIアプリケーションによって処理されるURLのサブセットの[アプリ名](#app_name)を上書きできます。
      </Collapser>
    </CollapserGroup>

    特定のエージェント構成設定をオーバーライドできることに加えて、WSGI環境キーを使用して他の要求ごとの構成設定を設定できます。

    <CollapserGroup>
      <Collapser id="set_background_task" title="newrelic.set_background_task">
        `true`に設定すると、このWebトランザクションは代わりに[非Webトランザクション](/docs/apm/transactions/intro-transactions/monitor-background-processes-other-non-web-transactions)として報告されます。
      </Collapser>

      <Collapser id="ignore_transaction" title="newrelic.ignore_transaction">
        `true`に設定すると、このWebトランザクションは報告されません。
      </Collapser>

      <Collapser id="suppress_apdex_metric" title="newrelic.suppress_apdex_metric">
        `true`に設定すると、このWebトランザクションに対してApdexメトリックは生成されません。
      </Collapser>

      <Collapser id="suppress_transaction_trace" title="newrelic.suppress_transaction_trace">
        `true`に設定されている場合、このWebトランザクションは[トランザクショントレース](/docs/apm/transactions/transaction-traces/transaction-traces)に記録できません。
      </Collapser>

      <Collapser id="disable_browser_autorum" title="newrelic.disable_browser_autorum">
        `true`に設定すると、ページの読み込みタイミング（実際のユーザー監視またはRUMと呼ばれることもあります）のためのJavaScriptヘッダー/フッターの自動挿入が無効になります。[Webフレームワークで自動挿入が利用可能](/docs/agents/python-agent/supported-features/page-load-timing-python#restrictions_on_instrumentation)な場合にのみ適用されます。
      </Collapser>
    </CollapserGroup>

    <Callout variant="important">
      WSGIミドルウェアを使用してこれらの値を設定することは、Pythonエージェント自体のWSGIアプリケーションラッパーが外部スコープで適用された場合には機能しません。このような場合、同じ結果を得るには、エージェントAPIを呼び出す必要があります。
    </Callout>
  </Collapser>
</CollapserGroup>

## 複数の環境構成 [#config-file-deployment-environments]

エージェントは、 `ini`ファイルの場合は`[newrelic]` 、 `.toml`ファイルの場合は`[tool.newrelic]`というエージェント設定セクションからプライマリ設定を読み取ります。 追加のセクションで、特定のデプロイメント環境 (開発、ステージング、本番など) のオーバーライドを指定できます。 これらのセクションの先頭には、 `.ini`ファイルの場合は`[newrelic:environment]` 、 `.toml`ファイルの場合は`[tool.newrelic.env.environment]`を付けます ( `environment`環境の名前に置き換えられます)。

エージェントが環境ベースの構成を使用するように指定するには、次のいずれかの方法を使用します。

* [`newrelic.agent.initialize()`](/docs/agents/python-agent/customization-extension/python-management-api#mgmt)を呼び出すときは、2番目の引数として環境名を指定します。

  また

* `NEW_RELIC_ENVIRONMENT`環境変数を環境名に設定します。

環境が指定されていない場合、エージェントは`newrelic`エージェント構成セクションで指定されているデフォルト設定を使用します。

構成ファイルの基本構造は次のとおりです。

<Collapser className="freq-link" id="config-file-format-example-ini" title="`.ini` 設定ファイルの形式">
  ```ini
  [newrelic]
  ... default settings

  [newrelic:development]
  ... override settings

  [newrelic:staging]
  ... override settings

  [newrelic:production]
  ... override settings
  ```
</Collapser>

<Collapser className="freq-link" id="config-file-format-example-toml" title="`.toml` 設定ファイル形式">
  ```ini
  [tool.newrelic]
  ... default settings

  [tool.newrelic.env.development]
  ... override settings

  [tool.newrelic.env.staging]
  ... override settings

  [tool.newrelic.env.production]
  ... override settings
  ```
</Collapser>

## 一般的な構成設定 [#general-settings]

これらの設定は、エージェント構成ファイルで使用できます。

<CollapserGroup>
  <Collapser id="license_key" title="license_key（必須）">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            （無し）
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_LICENSE_KEY`
          </td>
        </tr>
      </tbody>
    </table>

    New Relic アカウントの<InlinePopover type="licenseKey" />を指定します。 このキーは、アプリのメトリクスを New Relic アカウントに関連付けます。
  </Collapser>

  <Collapser id="app_name" title="app_name（強くお勧めします）">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `Python Application`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            リクエストごとのオプション、構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [リクエストごとのオプション](#per-request-configuration)
          </th>

          <td>
            `newrelic.app_name`
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_APP_NAME`
          </td>
        </tr>
      </tbody>
    </table>

    NewRelicUIでデータを集約するために使用される[アプリケーション名](/docs/apm/new-relic-apm/installation-configuration/name-your-application)。[同時に複数のアプリに](/docs/apm/new-relic-apm/installation-configuration/using-multiple-names-app)データを報告するには、セミコロン`;`で区切られた名前のリストを指定します。セミコロンの前にスペースを入れないでください。スペースを入れると、Python構成パーサーが名前を埋め込みコメントとして解釈します。
  </Collapser>

  <Collapser id="monitor_mode" title="monitor_mode">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_MONITOR_MODE`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはアプリに関するパフォーマンスデータを収集し、このデータを[データコレクター](/docs/accounts-partnerships/education/getting-started-new-relic/glossary#collector)に報告します。
  </Collapser>

  <Collapser id="developer_mode" title="developer_mode">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_DEVELOPER_MODE`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはWebアプリを計測しますが、実際のデータは送信しません。このオフラインモードでは、アクティブなエージェントの料金は請求されません。

    開発者モードを使用し[て、エージェントの新しいバージョンを](/docs/release-notes/agent-release-notes/python-release-notes)テストするか、開発者環境でサードパーティパッケージに対してエージェントをテストします。エージェントが収集するメトリックはどこにも報告されないため、オフラインモードはAPMをローカルで実行する方法ではありません。
  </Collapser>

  <Collapser id="log_file" title="log_file">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            （無し）
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_LOG`
          </td>
        </tr>
      </tbody>
    </table>

    ログファイルの名前を設定します。これは、エージェントの問題をデバッグするのに役立ちます。これはデフォルトでは設定されていません。エージェントは、Webアプリプロセスの親ユーザーや、そのプロセスが書き込みを許可されているディレクトリを認識していないためです。詳細については、 [Pythonエージェントのロギング](/docs/agents/python-agent/installation-configuration/python-agent-logging)を参照してください。

    これをどのように設定しても、含まれているディレクトリとファイル自体のアクセス許可が正しいこと、およびWebアプリケーションを実行するユーザーがファイルに書き込めることを確認してください。

    <Callout variant="tip">
      アプリケーションの起動時の作業ディレクトリが確実でない限り、絶対パスを使用してください。ログファイルを書き出せない場合は、 `stderr`を使用して標準エラー出力に出力することもできます。これにより、通常、Webサーバーのログに出力が表示されます。
    </Callout>
  </Collapser>

  <Collapser id="log_level" title="log_level">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `info`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_LOG_LEVEL`
          </td>
        </tr>
      </tbody>
    </table>

    [ログファイルの場所](#log_file)を設定している場合は、ログメッセージの詳細レベルを設定します。この`log_level`は、Pythonロギングモジュールのログレベルには影響しません。可能な値は、詳細の昇順で、 `critical` 、 `error` 、 `warning` 、 `info` 、および`debug`です。

    エージェントの問題を報告するには、最も便利な設定は`debug`です。ただし、 `debug`は非常に迅速に多くの情報を生成するため、問題の再現にかかる時間よりも長くエージェントをこのレベルに維持しないでください。
  </Collapser>

  <Collapser id="high_security" title="high_security">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_HIGH_SECURITY`
          </td>
        </tr>
      </tbody>
    </table>

    高セキュリティ モードでは、特定のセキュリティ設定が強制され、その設定が上書きされるのを防ぐため、機密データが当社に送信されることはありません。高セキュリティ モードを有効にすると、リクエスト パラメータが収集されず、生の SQL を送信できなくなります。

    高セキュリティ モードを有効にするには、ローカルの<DNT>**.ini**</DNT>構成ファイルで`true`に設定します<DNT>**and**</DNT> <DNT>**Account settings**</DNT>ページから有効にします。 詳細については、 [「高セキュリティ」](/docs/accounts-partnerships/accounts/security/high-security)を参照してください。
  </Collapser>

  <Collapser id="proxy" title="proxy_scheme、proxy_host、proxy_port、proxy_user、proxy_pass">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            文字列
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            （無し）
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_PROXY_SCHEME`

            `NEW_RELIC_PROXY_HOST`

            `NEW_RELIC_PROXY_PORT`

            `NEW_RELIC_PROXY_USER`

            `NEW_RELIC_PROXY_PASS`
          </td>
        </tr>
      </tbody>
    </table>

    デフォルトでは、Pythonエージェントはサーバーに直接接続しようとします。ホストと[コレクター](/docs/accounts-partnerships/education/getting-started-new-relic/glossary#collector)の間にHTTPプロキシの使用を必要とするファイアウォールがある場合は、 `proxy_host`と`proxy_port`をHTTPプロキシに必要な値に設定します。プロキシ認証がHTTPプロキシによって実装されている場合は、 `proxy_user`と`proxy_pass`も設定します。

    `proxy_scheme`設定は、HTTPプロキシとの通信に使用されるプロトコルスキームを示します。`http`に設定すると、エージェントはエンドツーエンド暗号化のためにHTTPプロキシを介したSSLトンネルを使用します。

    `proxy_scheme` 、 `proxy_host` 、および`proxy_port`の設定を行う代わりに、 `proxy_host`の設定をプロキシの有効なURIに設定することもできます。スキーム、ホスト、およびポートを含めます。たとえば、 `http://proxy-host:8000` 。これは、 `NEW_RELIC_PROXY_HOST`環境変数を使用してHTTPプロキシの詳細を設定した場合にも機能します。
  </Collapser>

  <Collapser id="audit-log-file" title="audit_log_file">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            （無し）
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_AUDIT_LOG`
          </td>
        </tr>
      </tbody>
    </table>

    監査ログファイルの名前を設定します。設定されている場合、エージェントは、監視対象プロセスと[コレクター](/docs/accounts-partnerships/education/getting-started-new-relic/glossary#collector)の間でやり取りされるメッセージの詳細をログに記録します。これにより、Pythonエージェントのセキュリティを評価できます。

    起動時にアプリの作業ディレクトリがどうなるかわからない場合は、絶対パスを使用してください。これをどのように設定しても、含まれているディレクトリとファイル自体の権限が正しいことを確認してください。また、Webアプリの親ユーザーがファイルに書き込めることを確認してください。

    <Callout variant="caution">
      特に実稼働環境では、監査ログを継続的に使用しないでください。エージェントはログファイルを切り捨てたりローテーションしたりしないため、ログファイルは非常に急速に大きくなる可能性があります。
    </Callout>
  </Collapser>

  <Collapser id="labels" title="ラベル（タグ）">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            （無し）
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_LABELS`
          </td>
        </tr>
      </tbody>
    </table>

    [タグ](/docs/apm/new-relic-apm/maintenance/labels-categories-organize-your-apps-servers)を追加します。 *name:value を* コロン `:`で区切って指定し、追加のタグをセミコロン `;`で区切ります。

    <CollapserGroup>
      <Collapser id="example-2-labels" title="2つのタグ">
        ```ini
        labels = Server:One;Data Center:Primary
        ```
      </Collapser>
    </CollapserGroup>
  </Collapser>

  <Collapser id="process_host-display_name" title="process_host.display_name">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            （無し）
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_PROCESS_HOST_DISPLAY_NAME`
          </td>
        </tr>
      </tbody>
    </table>

    APMUIに[表示される](/docs/apm/new-relic-apm/maintenance/add-rename-remove-hosts#display_name)ホスト名を設定します。設定されている場合、これはエージェントが自動的にキャプチャするデフォルトのホスト名を上書きします。
  </Collapser>

  <Collapser id="api-key" title="api_key">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            （無し）
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_API_KEY`
          </td>
        </tr>
      </tbody>
    </table>

    [newrelic-adminrecord-deploy](/docs/agents/python-agent/installation-configuration/python-agent-admin-script#record-deploy)で使用される[api\_key](/docs/apis/rest-api-v2/requirements/api-keys)を設定します。
  </Collapser>

  <Collapser id="ca-bundle-path" title="ca_bundle_path">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            （無し）
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_CA_BUNDLE_PATH`
          </td>
        </tr>
      </tbody>
    </table>

    ローカルCAバンドルへのパスの手動オーバーライド。このCAバンドルは、データ収集サービスによって提示されたSSL証明書を検証するために使用されます。

    <Callout variant="tip">
      この構成オプションは、Pythonエージェントバージョン4.2.0以降でのみ使用できます。
    </Callout>
  </Collapser>

  <Collapser id="apdex-t" title="apdex_t">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            浮く
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `0.5`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_APDEX_T`
          </td>
        </tr>
      </tbody>
    </table>

    トランザクショントレースがこのしきい値を超えたときに記録します。形式は秒数です（小数点を使用できます）。

    [apdex\_t](/docs/using-new-relic/welcome-new-relic/get-started/glossary/#apdex_t)の用語集エントリを参照してください

    <Callout variant="important">
      これは、AWS Lambda で有効になっている`serverless_mode`が設定されている場合、構成ファイルまたは環境変数でのみ設定されます。それ以外の場合、ローカルの`apdex_t`値は、 `apdex_f`値の設定に使用される UI アプリケーション設定の値によってオーバーライドされます。
    </Callout>
  </Collapser>
</CollapserGroup>

## 属性

属性は、境界トレース、トレース エラー、 <InlinePopover type="browser" />、およびトランザクション イベントの情報を提供するキーの値のペアです。 以下の一般的なプロパティ設定を使用して 4 つの宛先すべての属性を構成するだけでなく、宛先ごとに属性を構成することもできます。

詳細については、 [Pythonエージェント属性](/docs/agents/python-agent/attributes/python-agent-attributes)、属性の[有効化と無効化](/docs/agents/python-agent/attributes/enabling-disabling-attributes-python)、および[属性の例](/docs/agents/python-agent/attributes/python-attribute-examples)を参照してください。

<CollapserGroup>
  <Collapser id="cfg-attributes-enabled" title="attributes.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment)
          </th>

          <td>
            `NEW_RELIC_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    この設定を使用して、すべての属性をオンまたはオフにすることができます。
  </Collapser>

  <Collapser id="cfg-attributes-include" title="attributes.include">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            スペース区切りの文字列のリスト
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            （無し）
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment)
          </th>

          <td>
            `NEW_RELIC_ATTRIBUTES_INCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    属性が有効になっている場合、このリストにある属性キーが送信されます。リスト内のキーは、以下に示すようにスペースで区切る必要があります。

    ```
    key1 key2 key3
    ```

    属性のルールは[、エージェント属性ページにあります](/docs/subscriptions/agent-attributes)。
  </Collapser>

  <Collapser id="cfg-attributes-exclude" title="attributes.exclude">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            スペース区切りの文字列のリスト
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            （無し）
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment)
          </th>

          <td>
            `NEW_RELIC_ATTRIBUTES_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    このリストにあるすべての属性キーが送信されるわけではありません。リスト内のキーは、以下に示すようにスペースで区切る必要があります。

    ```
    key1 key2 key3
    ```

    属性のルールは[、エージェント属性ページにあります](/docs/subscriptions/agent-attributes)。
  </Collapser>
</CollapserGroup>

## AIモニタリング [#ai-monitoring]

このセクションには、AI モニタリングを設定するための Python エージェント設定が含まれています。

<Callout variant="important">
  AI データをキャプチャする[には、ディストリビューティッド（分散）トレーシングを](/docs/apm/agents/nodejs-agent/installation-configuration/nodejs-agent-configuration/#dt-main)有効にする必要があります。 Python エージェント バージョン 7.0.0.166 以降では、デフォルトで有効になっています。
</Callout>

<Callout variant="important">
  AI モニタリングを有効にすると、モニタリング対象として選択したモデルとの間で送受信される入力と出力のストリーミング コピー (そこに含まれる個人情報も含む) が記録されます。 AIモニタリング機能を提供する目的で、モデルユーザーのインタラクションが第三者（New Relic）によって記録される可能性があることについて、モデルユーザーから同意を得る責任があります。
</Callout>

<CollapserGroup>
  <Collapser id="ai-monitoring-enabled" title="ai_monitoring.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment)
          </th>

          <td>
            `NEW_RELIC_AI_MONITORING_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `true`に設定すると、AI モニタリングが有効になります。

    <Callout variant="important">
      [高セキュリティ モード](/docs/apm/agents/python-agent/getting-started/apm-agent-security-python/#restricted)が有効になっている場合、この設定は無効になります。
    </Callout>
  </Collapser>

  <Collapser id="ai-monitoring-streaming" title="ai_monitoring.streaming.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment)
          </th>

          <td>
            `NEW_RELIC_AI_MONITORING_STREAMING_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `false`に設定すると、ストリーミングされた大規模言語モデル (LLM) データの概要とメッセージ イベントを記録するインストゥルメンテーションが無効になります。
  </Collapser>

  <Collapser id="ai-monitoring-record-content" title="ai_monitoring.record_content.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment)
          </th>

          <td>
            `NEW_RELIC_AI_MONITORING_RECORD_CONTENT_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `false`に設定すると、エージェントは LLM イベントでキャプチャされた入力および出力コンテンツ (プロンプトや応答のテキスト文字列など) を省略します。 これは、LLM との間で送受信される機密データを記録したくない場合のオプションのセキュリティ設定です。
  </Collapser>
</CollapserGroup>

## トランザクショントレーサーの構成 [#txn-tracer-settings]

<Callout variant="important">
  トランザクション名の末尾に角かっこ`[suffix]`を使用しないでください。エージェントは、名前から角かっこを自動的に削除します。代わりに、必要に応じて括弧`(suffix)`またはその他の記号を使用してください。
</Callout>

トランザクショントレースの詳細については、[トランザクション](/docs/traces/transaction-traces)トレースを参照してください。

<CollapserGroup>
  <Collapser id="txn-tracer-enabled" title="transaction_tracer.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            サーバー側の構成、構成ファイル
          </td>
        </tr>

        <tr>
          <th>
            [サーバー側のラベル](#server-side-configuration)
          </th>

          <td>
            `Enable transaction tracing?`
          </td>
        </tr>
      </tbody>
    </table>

    有効にすると、トランザクショントレーサー[は遅いトランザクションに関する詳細情報をキャプチャし](/docs/apm/transactions/transaction-traces/transaction-traces)ます。
  </Collapser>

  <Collapser id="txn-tracer-threshold" title="transaction_tracer.transaction_threshold">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            正のフロートまたは文字列（ `apdex_f` ）
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `apdex_f`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            サーバー側の構成、構成ファイル
          </td>
        </tr>

        <tr>
          <th>
            [サーバー側のラベル](#server-side-configuration)
          </th>

          <td>
            `Threshold`
          </td>
        </tr>
      </tbody>
    </table>

    トランザクショントレースを収集するタイミングのしきい値（秒単位）。コントローラアクションの応答時間がこのしきい値を超えると、エージェントはトランザクショントレースを記録します。有効な値は、任意の正の浮動小数点数、または`apdex_f` （ [apdex\_t](/docs/using-new-relic/welcome-new-relic/get-started/glossary/#apdex_t)の4倍）です。
  </Collapser>

  <Collapser id="txn-tracer-sql" title="transaction_tracer.record_sql">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `obfuscated`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            サーバー側の構成、構成ファイル
          </td>
        </tr>

        <tr>
          <th>
            [サーバー側のラベル](#server-side-configuration)
          </th>

          <td>
            `Record SQL?`
          </td>
        </tr>
      </tbody>
    </table>

    トランザクショントレーサーが[有効](#txn-tracer-enabled)になっている場合、エージェントはSQLステートメントを記録できます。レコーダには、 `off` （SQLを送信しない）、 `raw` （SQLステートメントを元の形式で送信する）、および`obfuscated` （数値リテラルと文字列リテラルを削除する）の3つのモードがあります。

    ほとんどのWebフレームワーク（Djangoを含む）はSQLクエリをパラメーター化するため、クエリの入力に使用される値は実際には含まれていません。これらのフレームワークのいずれかで`raw`モードを使用する場合、Pythonエージェントは値を挿入する前にのみSQLを認識します。パラメータ化されたSQLは、 `obfuscated`モードによく似ています。

    <Callout variant="important">
      [高セキュリティ モード](/docs/apm/agents/python-agent/getting-started/apm-agent-security-python/#restricted)が有効になっている場合、この設定は無効になります。
    </Callout>
  </Collapser>

  <Collapser id="txn-tracer-stack" title="transaction_tracer.stack_trace_threshold">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            浮く
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `0.5`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            サーバー側の構成、構成ファイル
          </td>
        </tr>

        <tr>
          <th>
            [サーバー側のラベル](#server-side-configuration)
          </th>

          <td>
            `Stack trace threshold`
          </td>
        </tr>
      </tbody>
    </table>

    SQL呼び出しからスタックトレースを収集するタイミングのしきい値（秒単位）。SQLステートメントがこのしきい値を超えると、エージェントは現在のスタックトレースをキャプチャします。これは、長いSQL呼び出しがアプリケーションで発生した場所を特定するのに役立ちます。
  </Collapser>

  <Collapser id="txn-tracer-explain" title="transaction_tracer.explain_enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            サーバー側の構成、構成ファイル
          </td>
        </tr>

        <tr>
          <th>
            [サーバー側のラベル](#server-side-configuration)
          </th>

          <td>
            `Enable SQL query plans?`
          </td>
        </tr>
      </tbody>
    </table>

    Pythonエージェントが遅いSQLクエリのクエリプランをキャプチャするかどうかを決定します。MySQLとPostgreSQLでのみサポートされています。
  </Collapser>

  <Collapser id="txn-tracer-explain-threshold" title="transaction_tracer.explain_threshold">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            浮く
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `0.5`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            サーバー側の構成、構成ファイル
          </td>
        </tr>

        <tr>
          <th>
            [サーバー側のラベル](#server-side-configuration)
          </th>

          <td>
            `Query plan threshold`
          </td>
        </tr>
      </tbody>
    </table>

    このしきい値を超えるトランザクショントレースのクエリは、[遅いクエリデータ](/docs/apm/applications-menu/monitoring/viewing-slow-query-details)と利用可能なExplainプランを報告します。[`transaction_tracer.explain_enabled`](#txn-tracer-explain-threshold)が`false`の場合、プランの収集は行われません。
  </Collapser>

  <Collapser id="cfg-tt-attributes-enabled" title="transaction_tracer.attributes.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment)
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_TRACER_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    この設定を使用して、トランザクショントレースのすべての属性をオンまたはオフにすることができます。ルートレベルの`attributes.enabled`が`false`の場合、この構成設定（ `transaction_tracer.attributes.enabled` ）の設定に関係なく、トランザクショントレースに属性は送信されません。
  </Collapser>

  <Collapser id="cfg-tt-attributes-include" title="transaction_tracer.attributes.include">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            スペースで区切られた文字列のリスト
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            （無し）
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment)
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_TRACER_ATTRIBUTES_INCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    トランザクショントレースで属性が有効になっている場合、このリストにあるすべての属性キーがトランザクショントレースで送信されます。詳細については、[エージェント属性ルール](/docs/apm/other-features/attributes/agent-attributes)を参照してください。
  </Collapser>

  <Collapser id="cfg-tt-attributes-exclude" title="transaction_tracer.attributes.exclude">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            スペース区切りの文字列のリスト
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            （無し）
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment)
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_TRACER_ATTRIBUTES_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    このリストにあるすべての属性キーは、トランザクショントレースで送信されるわけではありません。詳細については、[エージェント属性ルール](/docs/apm/other-features/attributes/agent-attributes)を参照してください。
  </Collapser>

  <Collapser id="txn-tracer-function" title="transaction_tracer.function_trace">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            （無し）
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル
          </td>
        </tr>
      </tbody>
    </table>

    指定された機能またはメソッドについて、エージェントは追加の機能タイミングインストルメンテーションをキャプチャします。これらの名前は、 `module:function`または`module:class.function`の形式で指定してください。

    関数名とクラス名のワイルドカード（グロブ）は、 [fnmatch](https://docs.python.org/3/library/fnmatch.html)モジュールでサポートされているパターンを使用して可能です。モジュールパスはワイルドカードではサポートされていません。パターンを`module:function*`または`module:class.*`の形式で指定します。

    たとえば、以下のファイルのすべての検証関数に関数トレースを追加する場合は、次のようになります。

    <b>
      my-app / common / utils.py
    </b>

    ```py
    def validate_credentials():
    …
    def validate_status():
    …
    def format_message():
    …
    ```

    次の行をエージェント構成ファイルに追加して、ワイルドカードを使用して`my-app/common/utils.py`内のすべての検証関数への関数トレースを含めます。

    <b>
      my-app / newrelic.ini
    </b>

    ```ini
    [newrelic]
    ...
    transaction_tracer.function_trace = common.utils:validate*
    ```

    <Callout variant="important">
      Wilcardingには、 [Pythonエージェントバージョン6.4.4.161以降が必要です](/docs/agents/python-agent/installation-configuration/upgrade-python-agent)。
    </Callout>
  </Collapser>
</CollapserGroup>

## トランザクションセグメントの構成 [#txn-segment-settings]

エージェント構成ファイルを介して使用できるトランザクションセグメント設定は次のとおりです。

<CollapserGroup>
  <Collapser id="cfg-tt-attributes-enabled" title="transaction_segments.attributes.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment)
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_SEGMENTS_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    この設定を使用して、トランザクショントレースのセグメントのすべての属性をオンまたはオフにすることができます。ルートレベルの`attributes.enabled`が`false`の場合、この構成設定（ `transaction_segments.attributes.enabled` ）の設定に関係なく、トランザクショントレースのセグメントに属性は送信されません。
  </Collapser>

  <Collapser id="cfg-tt-attributes-include" title="transaction_segments.attributes.include">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            スペースで区切られた文字列のリスト
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            （無し）
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment)
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_SEGMENTS_ATTRIBUTES_INCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    トランザクショントレースのセグメントで属性が有効になっている場合、このリストにあるすべての属性キーは、トランザクショントレースのセグメントで送信されます。詳細については、[エージェント属性ルール](/docs/apm/other-features/attributes/agent-attributes)を参照してください。
  </Collapser>

  <Collapser id="cfg-tt-attributes-exclude" title="transaction_segments.attributes.exclude">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            スペース区切りの文字列のリスト
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            （無し）
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment)
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_SEGMENTS_ATTRIBUTES_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    このリストにあるすべての属性キーは、トランザクショントレースのセグメントで送信されるわけではありません。詳細については、[エージェント属性ルール](/docs/apm/other-features/attributes/agent-attributes)を参照してください。
  </Collapser>
</CollapserGroup>

## エラーコレクターの構成 [#error-collector-settings]

エージェント構成ファイルを介して使用できるエラーコレクター設定は次のとおりです。

<Callout variant="tip">
  APMでのエラー構成の概要については、「APMでのエラーの [管理](/docs/agents/manage-apm-agents/agent-data/manage-errors-apm-collect-ignore-mark-expected)」を参照してください。
</Callout>

<CollapserGroup>
  <Collapser id="error-enabled" title="error_collector.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            サーバー側の構成、構成ファイル
          </td>
        </tr>

        <tr>
          <th>
            [サーバー側のラベル](#server-side-configuration)
          </th>

          <td>
            `Enable error collection?`
          </td>
        </tr>
      </tbody>
    </table>

    有効にすると、エラーコレクタはキャッチされなかった例外に関する情報をキャプチャします。
  </Collapser>

  <Collapser id="error-ignore" title="error_collector.ignore_classes">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            （無し）
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            サーバー側の構成、構成ファイル
          </td>
        </tr>

        <tr>
          <th>
            [サーバー側のラベル](#server-side-configuration)
          </th>

          <td>
            `Ignore these errors`
          </td>
        </tr>
      </tbody>
    </table>

    特定のエラーの収集を停止するには、これを無視するPython例外タイプ名のスペースで区切られたリストに設定します。例外名には形式`module:class`を使用します。

    <Callout variant="caution">
      `error_collector.ignore_errors` バージョン 11.0.0 で削除されました。エージェントのバージョン 6.4.0 より前では、この設定の名前は`error_collector.ignore_errors`でした。設定ファイルがまだ`ignore_errors`を使用している場合は、 `ignore_classes`使用するようにエージェントを更新します。
    </Callout>
  </Collapser>

  <Collapser id="error-ignore-status-codes" title="error_collector.ignore_status_codes">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `100-102 200-208 226 300-308 404`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            サーバー側の構成、構成ファイル
          </td>
        </tr>

        <tr>
          <th>
            [サーバー側のラベル](#server-side-configuration)
          </th>

          <td>
            `Ignore these status codes`
          </td>
        </tr>
      </tbody>
    </table>

    エージェントがエラーとして記録するのではなく無視する必要があるHTTPステータスコードを一覧表示します。追加の状況コードをスペースで区切られた整数としてリストし、開始値と終了値の間にハイフン`-`区切り文字を使用して範囲を指定します。デフォルトコードの1つを許可リストに追加するには、コードの前に感嘆符`!`を付けます。

    一部のフレームワークは例外を使用してHTTP応答を返さないため、この設定は一部のWebフレームワークとのみ互換性があります。

    <Callout variant="tip">
      この構成オプションは、Pythonエージェントバージョン6.4.0以降のサーバー側構成でのみ設定できます。
    </Callout>
  </Collapser>

  <Collapser id="error-expected" title="error_collector.expected_classes">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            （無し）
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            サーバー側の構成、構成ファイル
          </td>
        </tr>

        <tr>
          <th>
            [サーバー側のラベル](#server-side-configuration)
          </th>

          <td>
            `Expect these error class names`
          </td>
        </tr>
      </tbody>
    </table>

    指定された例外クラスがエラー率またはApdexスコアに影響を与えずに、エラーをAPMに報告するのを防ぎます。これを、予期されるPython例外タイプ名のスペースで区切られたリストに設定します。例外名には形式`module:class`を使用します。

    <Callout variant="tip">
      この構成オプションは、Pythonエージェントバージョン6.4.0以降でのみ使用できます。
    </Callout>
  </Collapser>

  <Collapser id="error-expected-status-codes" title="error_collector.expected_status_codes">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            （無し）
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            サーバー側の構成、構成ファイル
          </td>
        </tr>

        <tr>
          <th>
            [サーバー側のラベル](#server-side-configuration)
          </th>

          <td>
            `Expect these status codes`
          </td>
        </tr>
      </tbody>
    </table>

    指定されたHTTPステータスコードがエラー率またはApdexスコアに影響を与えずに、エラーをAPMに報告するのを防ぎます。ステータスコードをスペースで区切られた整数としてリストし、開始値と終了値の間にハイフン`-`区切り文字を使用して範囲を指定します。リスト内のコードの1つを無効にするには、コードの前に感嘆符`!`を付けます。

    一部のフレームワークは例外を使用してHTTP応答を返さないため、この設定は一部のWebフレームワークとのみ互換性があります。

    <Callout variant="tip">
      この構成オプションは、Pythonエージェントバージョン6.4.0以降でのみ使用できます。
    </Callout>
  </Collapser>

  <Collapser id="error-max-event-samples-stored" title="エラーコレクタ.max_event_samples_stored">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            整数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            100
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_ERROR_COLLECTOR_MAX_EVENT_SAMPLES_STORED`
          </td>
        </tr>
      </tbody>
    </table>

    PythonエージェントのインスタンスからNewRelicに送信される1分あたりのエラーイベントの制限。
  </Collapser>

  <Collapser id="cfg-error-attributes-enabled" title="error_collector.attributes.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment)
          </th>

          <td>
            `NEW_RELIC_ERROR_COLLECTOR_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    この設定を使用して、トレースされたエラーのすべての属性をオンまたはオフにすることができます。`attributes.enabled`がルートレベルで`false`の場合、この構成設定（ `error_collector.attributes.enabled` ）がどのように設定されているかに関係なく、トレースされたエラーに属性は送信されません。
  </Collapser>

  <Collapser id="cfg-ec-attributes-include" title="error_collector.attributes.include">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            スペースで区切られた文字列のリスト
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            （無し）
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment)
          </th>

          <td>
            `NEW_RELIC_ERROR_COLLECTOR_ATTRIBUTES_INCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    トレースされたエラーに対して属性が有効になっている場合、このリストにあるすべての属性キーがトレースされたエラーで送信されます。詳細については、[エージェント属性ルール](/docs/apm/other-features/attributes/agent-attributes)を参照してください。
  </Collapser>

  <Collapser id="cfg-ec-attributes-exclude" title="error_collector.attributes.exclude">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            スペースで区切られた文字列のリスト
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            （無し）
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment)
          </th>

          <td>
            `NEW_RELIC_ERROR_COLLECTOR_ATTRIBUTES_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    このリストで見つかった属性キーは、トレースされたエラーでは送信されません。詳細については、[エージェント属性ルール](/docs/apm/other-features/attributes/agent-attributes)を参照してください。
  </Collapser>

  <Collapser id="cfg-ec-capture-events" title="error_collector.capture_events">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル
          </td>
        </tr>
      </tbody>
    </table>

    有効にすると、エラーコレクターは高度な分析のためにイベントデータをキャプチャします。詳細については、 [APMエラー](/docs/apm/applications-menu/events/view-apm-errors-error-traces)を参照してください。
  </Collapser>
</CollapserGroup>

## ブラウザの監視設定 [#browser-settings]

エージェント構成ファイルを介して利用できるブラウザ監視設定は次のとおりです。

<CollapserGroup>
  <Collapser id="browser-enabled" title="browser_monitoring.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル
          </td>
        </tr>
      </tbody>
    </table>

    ブラウザの監視を有効にします。詳細について[は、Pythonでのページの読み込みタイミングを](/docs/python/page-load-timing-in-python)参照してください。

    <Callout variant="important">
      構成ファイルでブラウザーの監視を有効にする前[に、ブラウザーの監視UIのアプリケーション設定で有効にします](/docs/browser/new-relic-browser/installation-configuration/adding-apps-new-relic-browser#select-apm-app)。
    </Callout>
  </Collapser>

  <Collapser id="browser-auto" title="browser_monitoring.auto_instrument">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル
          </td>
        </tr>
      </tbody>
    </table>

    [サポートされているPythonWebフレームワーク](/docs/agents/python-agent/supported-features/page-load-timing-python#restrictions_on_instrumentation)の場合、この設定により、JavaScriptフラグメントを監視するブラウザーの自動挿入が有効になります。
  </Collapser>

  <Collapser id="browser-content-type" title="browser_monitoring.content_type">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `text/html`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル
          </td>
        </tr>
      </tbody>
    </table>

    ブラウザ監視エージェントが自動計測するHTML `Content-Type`を指定します。スペースで区切られたリストにエントリを追加します。

    <CollapserGroup>
      <Collapser id="example-instrument-xhtml-xml" title="Instrument xhtml+xmlページの応答">
        HTMLページの応答を生成し、 `application/xhtml+xml` の`Content-Type`を使用している場合は、次を使用して、許可されたコンテンツタイプをオーバーライドし、このコンテンツタイプとデフォルトの`text/html`の両方を一覧表示できます。

        ```ini
        browser_monitoring.content_type = text/html application/xhtml+xml
        ```

        <Callout variant="important">
          ブラウザ監視JavaScriptスニペットは、ページが`application/xhtml+xml`として検証されないようにしますが、ページはエンドユーザーブラウザで読み込まれてレンダリングされる必要があります。
        </Callout>
      </Collapser>
    </CollapserGroup>
  </Collapser>

  <Collapser id="cfg-browser-attributes-enabled" title="browser_monitoring.attributes.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment)
          </th>

          <td>
            `NEW_RELIC_BROWSER_MONITORING_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    この設定を使用して、ブラウザ監視のすべての属性をオンまたはオフにすることができます。これは、ページビューイベントに送信されるデータです。ルートレベルで`attributes.enabled`がfalseの場合、構成設定（ `browser_monitoring.attributes.enabled` ）がどのように設定されているかに関係なく、ブラウザの監視で属性は送信されません。
  </Collapser>

  <Collapser id="cfg-bm-attributes-include" title="browser_monitoring.attributes.include">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            スペース区切りの文字列のリスト
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            （無し）
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment)
          </th>

          <td>
            `NEW_RELIC_BROWSER_MONITORING_ATTRIBUTES_INCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    属性が`browser_monitoring`に対して有効になっている場合、このリストにあるすべての属性キーがページビューで送信されます。詳細については、[エージェント属性ルール](/docs/apm/other-features/attributes/agent-attributes)を参照してください。
  </Collapser>

  <Collapser id="cfg-bm-attributes-exclude" title="browser_monitoring.attributes.exclude">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            スペース区切りの文字列のリスト
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            （無し）
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment)
          </th>

          <td>
            `NEW_RELIC_BROWSER_MONITORING_ATTRIBUTES_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    このリストにあるすべての属性キーは、ページビューでは送信されません。詳細については、[エージェント属性ルール](/docs/apm/other-features/attributes/agent-attributes)を参照してください。
  </Collapser>
</CollapserGroup>

## トランザクションイベントの設定

エージェント構成ファイルを介して使用できるトランザクションイベント設定は次のとおりです。

<Callout variant="tip">
  これらの構成設定は、以前は`analytic_events`と呼ばれていました。構成ファイルでまだ`analytic_events`を使用している場合は、 `transaction_events`を使用するようにエージェントを更新してください。
</Callout>

<CollapserGroup>
  <Collapser id="transaction-events-enabled" title="transaction_events.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル
          </td>
        </tr>
      </tbody>
    </table>

    トランザクションイベントデータを使用すると、[ヒストグラム](/docs/applications-menu/histograms-viewing-data-distribution)や[パーセンタイル](/docs/applications-menu/percentiles-comparing-ranked-data)などの追加情報を使用できます。
  </Collapser>

  <Collapser id="transaction-events-max-samples-stored" title="transaction_events.max_samples_stored">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            整数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `1200`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_ANALYTICS_EVENTS_MAX_SAMPLES_STORED`
          </td>
        </tr>
      </tbody>
    </table>

    PythonエージェントのインスタンスからNewRelicに送信される1分あたりの分析イベントの制限。
  </Collapser>

  <Collapser id="cfg-events-attributes-enabled" title="transaction_events.attributes.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment)
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_EVENTS_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    この設定を使用して、トランザクションイベントのすべての属性をオンまたはオフにすることができます。ルートレベルで`attributes.enabled`が`false`の場合、この構成設定（ `transaction_events.attributes.enabled` ）の設定に関係なく、トランザクションイベントに属性は送信されません。
  </Collapser>

  <Collapser id="cfg-events-attributes-include" title="transaction_events.attributes.include">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            スペース区切りの文字列のリスト
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            （無し）
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment)
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_EVENTS_ATTRIBUTES_INCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    属性がトランザクションイベントに対して有効になっている場合、このリストにあるすべての属性キーがトランザクションイベントで送信されます。詳細については、[エージェント属性ルール](/docs/apm/other-features/attributes/agent-attributes)を参照してください。
  </Collapser>

  <Collapser id="cfg-events-attributes-exclude" title="transaction_events.attributes.exclude">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            スペース区切りの文字列のリスト
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            （無し）
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment)
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_EVENTS_ATTRIBUTES_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    このリストにあるすべての属性キーは、トランザクションイベントでは送信されません。トランザクションイベントから属性を除外しても、スパンイベントから除外されないことに注意してください。詳細については、[エージェント属性ルール](/docs/apm/other-features/attributes/agent-attributes)を参照してください。
  </Collapser>
</CollapserGroup>

## カスタムイベント設定

エージェント構成ファイルを介して使用できるカスタムイベント設定は次のとおりです。

<CollapserGroup>
  <Collapser id="custom-insights-events-enabled" title="custom_insights_events.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル
          </td>
        </tr>
      </tbody>
    </table>

    [`record_custom_event()`](/docs/agents/python-agent/python-agent-api/recordcustomevent-python-agent-api/)を介して Event API へのイベントの記録を許可します。

    <Callout variant="important">
      [高セキュリティ モード](/docs/apm/agents/python-agent/getting-started/apm-agent-security-python/#restricted)が有効になっている場合、この設定は無効になります。
    </Callout>
  </Collapser>

  <Collapser id="custom-insights-events-max-samples-stored" title="custom_insights_events.max_samples_stored">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            整数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `3600`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル
          </td>
        </tr>
      </tbody>
    </table>

    * Python エージェントのインスタンスがNew Relicに送信できる 1 分あたりのカスタムイベントの数を制限します。
    * [AI モニタリング](/docs/ai-monitoring/intro-to-ai-monitoring)用にエージェントを構成するときは、エージェントが最大量の LLM イベントをキャプチャできるように最大値`100000`に設定します。

    <Callout variant="important">
      [高セキュリティ モード](/docs/apm/agents/python-agent/getting-started/apm-agent-security-python/#restricted)が有効になっている場合、この設定は無効になります。
    </Callout>
  </Collapser>
</CollapserGroup>

## データストアトレーサー設定

これらのデータストアトレーサー設定は、エージェント構成ファイルを介して利用できます。

<CollapserGroup>
  <Collapser id="datastore-tracer-instance-reporting-enabled" title="datastore_tracer.instance_reporting.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル
          </td>
        </tr>
      </tbody>
    </table>

    有効にすると、エージェントは一部のデータベースドライバーのデータストアインスタンスメトリック（ホストやポートなど）を収集します。これらは、低速のクエリトレースとトランザクショントレースでも報告されます。
  </Collapser>

  <Collapser id="datastore-tracer-database-name-reporting-enabled" title="datastore_tracer.database_name_reporting.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル
          </td>
        </tr>
      </tbody>
    </table>

    有効にすると、エージェントは一部のデータベースドライバーのデータベース名を収集します。データベース名は、低速のクエリトレースとトランザクショントレースで報告されます。
  </Collapser>
</CollapserGroup>

## 分散トレース設定 [#dt-main]

分散トレースを使用すると、リクエストが分散システムを通過するときにたどるパスを確認できます。[Pythonエージェントバージョン7.0.0.166以降](/docs/agents/python-agent/installation-configuration/upgrade-python-agent)では、分散トレースはデフォルトで有効になっています。

<Callout variant="important">
  分散トレースを有効にすると、[クロスアプリケーション トレースが](#cross-application-tracer)無効になり、APM 機能に他の影響が生じます。クロスアプリケーション トレースから移行する場合は、[移行ガイド](/docs/transition-guide-distributed-tracing)をお読みください。
</Callout>

詳細について[は、Pythonサービスの分散トレースを参照してください](/docs/apm/agents/python-agent/configuration/distributed-tracing-python-agent)。

設定は次のとおりです。

<CollapserGroup>
  <Collapser id="distributed-tracing-enabled" title="distributed_tracing.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_DISTRIBUTED_TRACING_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    [分散トレース](/docs/distributed-tracing/concepts/introduction-distributed-tracing)を有効にします
  </Collapser>

  <Collapser id="distributed-tracing-sampler-remote_parent_sampled" title="distributed_tracing.sampler.remote_parent_sampled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `default`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_DISTRIBUTED_TRACING_SAMPLER_REMOTE_PARENT_SAMPLED`
          </td>
        </tr>
      </tbody>
    </table>

    * `default` これはデフォルトの動作であり、トレースをサンプリングするかどうかを決定するために、サンプリングの決定を適応サンプリング アルゴリズムに委任します。
    * `always_on`: サンプリングされていないリモート親を持つトレースを常にサンプリングします。
    * `always_off`: サンプリングされていないリモート親を持つトレースをサンプリングしません。
  </Collapser>

  <Collapser id="distributed-tracing-sampler-remote_parent_not_sampled" title="distributed_tracing.sampler.remote_parent_not_sampled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `default`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_DISTRIBUTED_TRACING_SAMPLER_REMOTE_PARENT_NOT_SAMPLED`
          </td>
        </tr>
      </tbody>
    </table>

    * `default` これはデフォルトの動作であり、トレースをサンプリングするかどうかを決定するために、サンプリングの決定を適応サンプリング アルゴリズムに委任します。
    * `always_on`: サンプリングされていないリモート親を持つトレースを常にサンプリングします。
    * `always_off`: サンプリングされていないリモート親を持つトレースをサンプリングしません。
  </Collapser>
</CollapserGroup>

## スパンイベント構成 [#txn-span-events-settings]

[スパンイベント](/docs/apm/distributed-tracing/getting-started/how-new-relic-distributed-tracing-works#data-structure)は、[分散トレース](#distributed-tracing-settings)用に収集されます。スパンイベントを報告するには、分散トレースを有効にする必要があります。構成オプションは次のとおりです。

<CollapserGroup>
  <Collapser id="cfg-tt-enabled" title="span_events.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル
          </td>
        </tr>
      </tbody>
    </table>

    この設定を使用して、Pythonエージェントがスパンを送信するかどうかをオンまたはオフにすることができます。
  </Collapser>

  <Collapser id="cfg-tt-max-samples-stored" title="span_events.max_samples_stored">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            整数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `2000`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_SPAN_EVENTS_MAX_SAMPLES_STORED`
          </td>
        </tr>
      </tbody>
    </table>

    * PythonエージェントのインスタンスからNewRelicに送信される1分あたりのスパンイベントの制限。
    * [AI モニタリング](/docs/ai-monitoring/intro-to-ai-monitoring)のエージェントを構成する場合、エージェントが最大量のディストリビューティッド（分散）トレーシングを確実に捕捉できるように、最大値`10000`に設定します。
  </Collapser>

  <Collapser id="cfg-tt-attributes-enabled" title="span_events.attributes.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment)
          </th>

          <td>
            `NEW_RELIC_SPAN_EVENTS_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    この設定を使用して、スパンイベントのすべての[属性](/docs/using-new-relic/welcome-new-relic/getting-started/glossary#attribute)をオンまたはオフにすることができます。ルートレベルの`attributes.enabled`が`false`の場合、この構成設定（ `span_events.attributes.enabled` ）の設定に関係なく、スパンイベントに属性は送信されません。詳細については、[エージェント属性ルール](/docs/apm/other-features/attributes/agent-attributes)を参照してください。
  </Collapser>

  <Collapser id="cfg-tt-attributes-include" title="span_events.attributes.include">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            スペースで区切られた文字列のリスト
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            （無し）
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment)
          </th>

          <td>
            `NEW_RELIC_SPAN_EVENTS_ATTRIBUTES_INCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    スパンイベントに対して属性が有効になっている場合、このリストにあるすべての属性キーがスパンイベントで送信されます。詳細については、[エージェント属性ルール](/docs/apm/other-features/attributes/agent-attributes)を参照してください。
  </Collapser>

  <Collapser id="cfg-tt-attributes-exclude" title="span_events.attributes.exclude">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            スペース区切りの文字列のリスト
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            （無し）
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment)
          </th>

          <td>
            `NEW_RELIC_SPAN_EVENTS_ATTRIBUTES_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    このリストにあるすべての属性キーは、スパンイベントで送信されるわけではありません。詳細については、[エージェント属性ルール](/docs/apm/other-features/attributes/agent-attributes)を参照してください。
  </Collapser>
</CollapserGroup>

## イベントハーベスト構成 [#event-harvest-config]

イベントハーベスト設定は、NewRelicに送信されるイベントタイプデータの量を制限します。これらの設定を使用するときは、次の重要な点を考慮してください。

* イベントハーベスト設定は、アプリケーション全体ではなく、エージェントの単一インスタンスの制限に影響します。アプリケーション全体に制限を設定する方法については、以下の使用例を参照してください。
* [リアルタイム ストリーミングは](/docs/agents/manage-apm-agents/agent-data/real-time-streaming)5 秒ごと (1 分あたり 12 回) にデータを送信しますが、イベント収集設定は<DNT>**minute**</DNT>あたりのイベントのレートに影響します。 リアルタイム ストリーミングを有効または無効にする場合、これらの設定を変更する必要はありません。
* リアルタイム ストリーミング (デフォルトで有効) を使用すると、New Relic はエンティティのイベント収集制限を 5 秒間隔で表示します。これは、たとえば、構成ファイルで 1200 の制限値を設定すると、New Relic では 100 として表示されることを意味します。

### 使用例

アプリケーションが10個のホストにデプロイされ、それぞれがホストごとに4つのプロセスを実行しているとします。アプリケーション全体でスパンイベントの数を1分あたり10,000イベントに制限するには、その数を10ホストで割ります。次に、ホストごとに4つのプロセスで再度分割します。

10000 /（10 \* 4）= 250

その計算に基づいて、最終的な設定は次のようになります。

span\_events.max\_samples\_stored= 250

<Callout variant="tip">
  New Relic がデータを収集する方法 (1 分間に 12 回) により、イベント データ数が 12 未満の場合、New Relic では 0 として表示されます。
</Callout>

イベントハーベストの構成設定は次のとおりです。

<CollapserGroup>
  <Collapser id="harvest-limits-analytic-event-data" title="event_harvest_config.harvest_limits.analytic_event_data">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            整数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `1200`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_ANALYTICS_EVENTS_MAX_SAMPLES_STORED`
          </td>
        </tr>
      </tbody>
    </table>

    <Callout variant="warning">
      この設定はバージョン 11.0.0 以降では非推奨になりました。代わりに[`transaction_events.max_samples_stored`](#transaction-events-max-samples-stored)使用してください。
    </Callout>

    PythonエージェントのインスタンスからNewRelicに送信される1分あたりの分析イベントの制限。
  </Collapser>

  <Collapser id="harvest-limits-custom-event-data" title="event_harvest_config.harvest_limits.custom_event_data">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            整数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `3600`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_CUSTOM_INSIGHTS_EVENTS_MAX_SAMPLES_STORED`
          </td>
        </tr>
      </tbody>
    </table>

    <Callout variant="warning">
      この設定はバージョン 11.0.0 以降では非推奨になりました。代わりに[`custom_insights_events.max_samples_stored`](#custom-insights-events-max-samples-stored)使用してください。
    </Callout>

    PythonエージェントのインスタンスがNew Relicに送信できる1分あたりのカスタムイベントの数の制限。
  </Collapser>

  <Collapser id="harvest-limits-span-event-data" title="event_harvest_config.harvest_limits.span_event_data">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            整数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `2000`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_SPAN_EVENTS_MAX_SAMPLES_STORED`
          </td>
        </tr>
      </tbody>
    </table>

    <Callout variant="warning">
      この設定はバージョン 11.0.0 以降では非推奨になりました。代わりに[`span_events.max_samples_stored`](#cfg-tt-max-samples-stored)使用してください。
    </Callout>

    * PythonエージェントのインスタンスからNewRelicに送信される1分あたりのスパンイベントの制限。
    * [AI モニタリング](/docs/ai-monitoring/intro-to-ai-monitoring)のエージェントを構成する場合、エージェントが最大量のディストリビューティッド（分散）トレーシングを確実に捕捉できるように、最大値`10000`に設定します。
  </Collapser>

  <Collapser id="harvest-limits-error-event-data" title="event_harvest_config.harvest_limits.error_event_data">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            整数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            100
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_ERROR_COLLECTOR_MAX_EVENT_SAMPLES_STORED`
          </td>
        </tr>
      </tbody>
    </table>

    <Callout variant="warning">
      この設定はバージョン 11.0.0 以降では非推奨になりました。代わりに[`error_collector.max_event_samples_stored`](#error-max-event-samples-stored)使用してください。
    </Callout>

    PythonエージェントのインスタンスからNewRelicに送信される1分あたりのエラーイベントの制限。
  </Collapser>

  <Collapser id="event-harvest-limits-ml-event-data" title="event_harvest_config.harvest_limits.ml_event_data">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            整数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            100000
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_ML_INSIGHTS_EVENTS_MAX_SAMPLES_STORED`
          </td>
        </tr>
      </tbody>
    </table>

    Python エージェントのインスタンスが New Relic に送信できる 1 分あたりの ML イベント数の制限。
  </Collapser>
</CollapserGroup>

## イベントループの可視性設定 [#event-loop]

<Callout variant="important">
  [Pythonエージェントバージョン5.0.0.124以降が必要です](/docs/agents/python-agent/installation-configuration/upgrade-python-agent)。
</Callout>

イベントループの可視性は、イベントループをブロックするトランザクションに関する情報を表示します。エージェントは、イベントループの制御を取得するためにかなりの時間待機したトランザクションに関する情報を生成します。設定は次のとおりです。

<CollapserGroup>
  <Collapser id="event-loop-visibility-enabled" title="event_loop_visibility.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル
          </td>
        </tr>
      </tbody>
    </table>

    イベントループ情報を無効にするには、これを`false`に設定します。
  </Collapser>

  <Collapser id="event-loop-visbility-blocking-threshold" title="event_loop_visibility.blocking_threshold">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            浮く
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `0.1`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル
          </td>
        </tr>
      </tbody>
    </table>

    トランザクションがイベントループ情報を生成する前にイベントループをブロックする必要がある時間のしきい値（秒単位）。
  </Collapser>
</CollapserGroup>

## 物理メモリのランタイムメトリクス [#runtime-metrics]

<Callout variant="important">
  [Python エージェント バージョン 9.9.0 以上が](/docs/agents/python-agent/installation-configuration/upgrade-python-agent)必要です。
</Callout>

これらのランタイム メトリック設定は、エージェント設定ファイルから利用できます。

<CollapserGroup>
  <Collapser id="runtime-metrics-reporting-enabled" title="memory_runtime_pid_metrics.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            true
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_MEMORY_RUNTIME_PID_METRICS_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    有効にすると、エージェントはプロセス ID ごとにランタイム メトリックを生成して送信します。
  </Collapser>
</CollapserGroup>

## ガベージコレクションのランタイムメトリック設定 [#garbage-collection-runtime-metrics]

<Callout variant="important">
  [Pythonエージェントバージョン6.2.0.156以降が必要です](/docs/agents/python-agent/installation-configuration/upgrade-python-agent)。
</Callout>

これらのガベージコレクションのランタイムメトリック設定は、エージェント構成ファイルを介して利用できます。

<CollapserGroup>
  <Collapser id="datastore-tracer-instance-reporting-enabled" title="gc_runtime_metrics.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            false
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル
          </td>
        </tr>
      </tbody>
    </table>

    有効にすると、エージェントはガベージコレクションメトリックを生成して送信します。
  </Collapser>

  <Collapser id="datastore-tracer-database-name-reporting-enabled" title="gc_runtime_metrics.top_object_count_limit">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            整数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            5
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル
          </td>
        </tr>
      </tbody>
    </table>

    エージェントは、ガベージコレクターによって収集されている最も一般的なオブジェクトタイプのオブジェクトカウントメトリックを報告します。この設定では、オブジェクトタイプごとに、サンプリングされる個々のメトリックの最大数を設定できます。
  </Collapser>
</CollapserGroup>

## コードレベルのメトリクス設定 [#codestream-integration]

エージェントでのコード レベルのメトリックの構成には、次の設定を使用できます。

<CollapserGroup>
  <Collapser id="code-level-metrics-enabled" title="code_level_metrics.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル
          </td>
        </tr>
      </tbody>
    </table>

    これを`false`に設定して、コード レベルのメトリックのエージェント属性収集を無効にします。
  </Collapser>

  <Collapser id="NEW_RELIC_METADATA_COMMIT" title="NEW_RELIC_METADATA_COMMIT">
    <Callout variant="important">
      これは、環境変数を介してのみ設定できます。
    </Callout>

    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            整数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `None`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            環境変数
          </td>
        </tr>
      </tbody>
    </table>

    コミット sha。sha 全体を使用することも、最初の 7 文字だけを使用することもできます (例: 734713b)。
  </Collapser>

  <Collapser id="NEW_RELIC_METADATA_RELEASE_TAG" title="NEW_RELIC_METADATA_RELEASE_TAG">
    <Callout variant="important">
      これは、環境変数を介してのみ設定できます。
    </Callout>

    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `None`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            環境変数
          </td>
        </tr>
      </tbody>
    </table>

    リリースタグ（v0.1.209など）またはリリース-209）。
  </Collapser>
</CollapserGroup>

## 受信トレイ構成のエラー [#errors-inbox-configuration]

次のタグのいずれかを設定すると、エラーが発生しているソフトウェアのバージョンを特定するのに役立ちます。

* `NEW_RELIC_METADATA_SERVICE_VERSION` デプロイされているコードのバージョン (多くの場合、1.2.3 などのセマンティック バージョン) を含むイベント データに tags.service.version が作成されますが、常にそうとは限りません。
* `NEW_RELIC_METADATA_RELEASE_TAG `リリースタグを含むイベントデータに tags.releaseTag を作成します (v0.1.209 など)またはリリース-209)。
* `NEW_RELIC_METADATA_COMMIT` コミット SHA を含むイベント データに対して tags.commit を作成します。sha 全体を使用することも、最初の 7 文字だけを使用することもできます (例: 734713b)。

エラー受信箱の今後のリリースでは、ソフトウェアのどのバージョンでエラーが発生しているかを自動的に追跡します。バージョン データも[CodeStream](/docs/codestream/how-use-codestream/performance-monitoring/#buildsha)に表示されます。

## アプリケーションログ設定 [#application-logging]

エージェントでのアプリケーションロギングの設定には、次の設定を使用できます。

Python エージェントのログを構成するためのヒントについて[は、コンテキストで Python ログを構成する](/docs/logs/logs-context/configure-logs-context-python)を参照してください。

<Callout variant="important">
  [Pythonエージェントバージョン7.12.0.176以降が必要です](/docs/agents/python-agent/installation-configuration/upgrade-python-agent)。
</Callout>

<CollapserGroup>
  <Collapser id="application-logging-enabled" title="application_logging.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_APPLICATION_LOGGING_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、これらのサブ機能構成も有効になっている場合は、ログの装飾とログイベントおよびログメトリックの収集を有効にします。`false`の場合、ロギングインストルメンテーション機能は有効になりません。
  </Collapser>

  <Collapser id="application-logging-forwarding-enabled" title="application_logging.forwarding.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_APPLICATION_LOGGING_FORWARDING_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはアプリケーションによって発行されたログレコードをキャプチャし、それらをNewRelicに転送します。この設定を有効にするには、 `application_logging.enabled`も`true`である必要があります。

    <Callout variant="important">
      [高セキュリティ モード](/docs/apm/agents/python-agent/getting-started/apm-agent-security-python/#restricted)が有効になっている場合、この設定は無効になります。
    </Callout>

    <Callout variant="caution">
      既存のログ転送ソリューションを使用してアプリケーションのログをすでにNewRelicに送信している場合は、ログデータの重複が請求されないように、エージェントでログ転送を有効にする前に必ず無効にしてください。
    </Callout>
  </Collapser>

  <Collapser id="application-logging-forwarding-custom-attributes" title="application_logging.forwarding.custom_attributes">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            （無し）
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_APPLICATION_LOGGING_FORWARDING_CUSTOM_ATTRIBUTES`
          </td>
        </tr>
      </tbody>
    </table>

    New Relicに転送されたすべてのログイベントにカスタムアトリビュートとして追加するキーの値のペアを持つハッシュ。 値は次のようにフォーマットする必要があります: &quot;key1:value1;key2:value2&quot;
  </Collapser>

  <Collapser id="application-logging-forwarding-labels-enabled" title="application_logging.forwarding.labels.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_APPLICATION_LOGGING_FORWARDING_LABELS_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    エージェントが New Relic に送信するログ レコードにラベルを追加するかどうかを切り替えます。
  </Collapser>

  <Collapser id="application-logging-forwarding-labels-exclude" title="application_logging.forwarding.labels.exclude">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            文字列のリスト
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            （無し）
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_APPLICATION_LOGGING_FORWARDING_LABELS_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    ログにラベルを含めることを有効にしたときに除外するラベル名のリスト（大文字と小文字を区別しない）。 この属性はワイルドカードまたは正規表現をサポートしていません。 <Callout variant="important">ラベルを属性として追加する場合、エージェントはキーに`tags.`というプレフィックスを付けます。このプレフィックスは、除外フィルタリング ルールと照合するときには含まれませ<b>ん</b>。</Callout>
  </Collapser>

  <Collapser id="application-logging-forwarding-context-data-enabled" title="application_logging.forwarding.context_data.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_APPLICATION_LOGGING_FORWARDING_CONTEXT_DATA_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントは利用可能なコンテキスト データ (エクストラ、辞書メッセージ属性、ロギング フレームワークによって提供される属性) をキャプチャし、その内容を New Relic に転送されるログの属性として追加します。この動作は、 `application_logging.forwarding.context_data`セクションの設定を通じて制御できます。
  </Collapser>

  <Collapser id="application-logging-forwarding-context-data-include" title="application_logging.forwarding.context_data.include">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            文字列のリスト
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            （無し）
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_APPLICATION_LOGGING_FORWARDING_CONTEXT_DATA_INCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    属性が`context_data`に対して有効になっている場合、このリストで見つかったすべての属性キーがトランザクション追跡で送信されます。詳細については、 [「エージェント属性ルール」](/docs/apm/other-features/attributes/agent-attributes)を参照してください。

    <Callout variant="important">
      コンテキスト属性を追加するとき、エージェントは、ロギング フレームワーク コンテキストからの属性の場合は`context.` 、辞書メッセージ コンテキストからの属性の場合は`message.`をキーの先頭に付けます。

      これらのプレフィックスは、包含/除外フィルタリング ルールと照合する場合には含まれ<b>ません</b>。
    </Callout>
  </Collapser>

  <Collapser id="application-logging-forwarding-context-data-exclude" title="application_logging.forwarding.context_data.exclude">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            文字列のリスト
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            （無し）
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_APPLICATION_LOGGING_FORWARDING_CONTEXT_DATA_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    このリストにあるすべての属性キーは context\_data で送信されるわけではありません。詳細については、 [「エージェント属性ルール」](/docs/apm/other-features/attributes/agent-attributes)を参照してください。

    <Callout variant="important">
      コンテキスト属性を追加するとき、エージェントは、ロギング フレームワーク コンテキストからの属性の場合は`context.` 、辞書メッセージ コンテキストからの属性の場合は`message.`をキーの先頭に付けます。

      これらのプレフィックスは、包含/除外フィルタリング ルールと照合する場合には含まれ<b>ません</b>。
    </Callout>
  </Collapser>

  <Collapser id="application-logging-forwarding-max-samples-stored" title="application_logging.forwarding.max_samples_stored">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            整数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            10000
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_APPLICATION_LOGGING_FORWARDING_MAX_SAMPLES_STORED`
          </td>
        </tr>
      </tbody>
    </table>

    NewRelicに1分あたりに送信するログレコードの数。この設定は、ログ転送機能を使用するときの全体的なメモリ消費を制御します。

    これをより低い値に設定して、送信されるログラインの量を減らします（ログサンプリングの原因になる場合があります）。これをより高い値に設定すると、より多くのログラインが送信されます。

    各ログは、関連するトランザクションと同じ優先度を受け取ります。トランザクション外で発生したログには、ランダムな優先度が割り当てられます。`max_samples_stored`によって制限されているため、一部のログは含まれない場合があります。たとえば、ロギング`max_samples_stored`が 10,000 に設定され、トランザクション 1 に 10,000 のログ エントリがある場合、トランザクション 1 のログ エントリのみが記録されます。トランザクション 1 のログが 10,000 未満の場合、トランザクション 1 のすべてのログを受け取ります。まだスペースがある場合は、トランザクション 2 のすべてのログを受け取ります。

    サンプリングされたトランザクションのすべてのログが記録され、それらが`max_samples_stored`の制限に達していない場合、サンプリングに含まれていなかったトランザクションのログ メッセージが送信されます。残っている場合は、トランザクション以外のログ メッセージが記録されます。
  </Collapser>

  <Collapser id="event-harvest-config-harvest-limits-log-event-data" title="event_harvest_config.harvest_limits.log_event_data">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            整数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            10000
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_APPLICATION_LOGGING_FORWARDING_MAX_SAMPLES_STORED`
          </td>
        </tr>
      </tbody>
    </table>

    <Callout variant="warning">
      この設定はバージョン 11.0.0 以降では非推奨になりました。代わりに[`application_logging.forwarding.max_samples_stored`](#application-logging-forwarding-max-samples-stored)使用してください。
    </Callout>

    NewRelicに1分あたりに送信するログレコードの数。この設定は、ログ転送機能を使用するときの全体的なメモリ消費を制御します。

    これをより低い値に設定して、送信されるログラインの量を減らします（ログサンプリングの原因になる場合があります）。これをより高い値に設定すると、より多くのログラインが送信されます。

    各ログは、関連するトランザクションと同じ優先度を受け取ります。トランザクション外で発生したログには、ランダムな優先度が割り当てられます。`max_samples_stored`によって制限されているため、一部のログは含まれない場合があります。たとえば、ロギング`max_samples_stored`が 10,000 に設定され、トランザクション 1 に 10,000 のログ エントリがある場合、トランザクション 1 のログ エントリのみが記録されます。トランザクション 1 のログが 10,000 未満の場合、トランザクション 1 のすべてのログを受け取ります。まだスペースがある場合は、トランザクション 2 のすべてのログを受け取ります。

    サンプリングされたトランザクションのすべてのログが記録され、それらが`max_samples_stored`の制限に達していない場合、サンプリングに含まれていなかったトランザクションのログ メッセージが送信されます。残っている場合は、トランザクション以外のログ メッセージが記録されます。
  </Collapser>

  <Collapser id="application-logging-metrics-enabled" title="application_logging.metrics.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_APPLICATION_LOGGING_METRICS_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントは、アプリケーションによって送信されているログ行に関連するメトリックをキャプチャします。この設定を有効にするには、 `application_logging.enabled`も`true`である必要があります。
  </Collapser>

  <Collapser id="application-logging-local-decorating-enabled" title="application_logging.local_decorating.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_APPLICATION_LOGGING_LOCAL_DECORATING_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはログをメタデータで装飾して、エンティティ、ホスト、トレース、およびスパンにリンクします。この設定を有効にするには、 `application_logging.enabled`も`true`である必要があります。
  </Collapser>
</CollapserGroup>

## 計装設定 [#instrumentation-settings]

<Callout variant="important">
  [Python エージェント バージョン 8.7.1 以降が](/docs/agents/python-agent/installation-configuration/upgrade-python-agent)必要です。
</Callout>

これらのインストルメンテーション パッケージ固有の設定は、エージェント構成ファイルから利用できます。

<CollapserGroup>
  <Collapser id="instrumentation-graphql-capture-introspection-queries" title="instrumentation.graphql.capture_introspection_queries">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_GRAPHQL_CAPTURE_INTROSPECTION_QUERIES`
          </td>
        </tr>
      </tbody>
    </table>

    有効にすると、エージェントは GraphQL でイントロスペクション クエリのトランザクションをキャプチャします。
  </Collapser>

  <Collapser id="instrumentation-kombu-consumer-enabled" title="instrumentation.kombu.consumer.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_KOMBU_CONSUMER_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    有効にすると、エージェントは Kombu の MessageTransactions を消費します。
  </Collapser>

  <Collapser id="instrumentation-kombu-ignored-exchanges" title="instrumentation.kombu.ignored_exchanges">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            文字列のリスト
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `celeryev`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_KOMBU_IGNORED_EXCHANGES`
          </td>
        </tr>
      </tbody>
    </table>

    Kombu で MessageTransactions をキャプチャするときに無視する交換のスペース区切りリスト。
  </Collapser>
</CollapserGroup>

## ミドルウェア計装フィルタ [#middleware-filters]

<Callout variant="important">
  [Python エージェント バージョン 10.17.0 以上が](/docs/agents/python-agent/installation-configuration/upgrade-python-agent)必要です。
</Callout>

これらの計装パッケージ固有の設定は、ミドルウェア計装の切り替えに使用できます。

<CollapserGroup>
  <Collapser id="instrumentation-middleware-django-enabled" title="instrumentation.middleware.django.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_INSTRUMENTATION_DJANGO_MIDDLEWARE_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    有効にすると、エージェントはDjangoのミドルウェアを監視します。
  </Collapser>

  <Collapser id="instrumentation-middleware-django-include" title="instrumentation.middleware.django.include">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            文字列のリスト
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            （無し）
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル
          </td>
        </tr>
      </tbody>
    </table>

    ミドルウェア 計装が有効な場合、このリストにあるミドルウェア名が送信されます。 リスト内の名前は、以下に示すようにスペースで区切る必要があります。

    ```
    middleware1 middleware2 middleware3
    ```

    ミドルウェア フィルタリングのルールについては、 [ミドルウェア フィルタリング ページを](/docs/apm/agents/python-agent/supported-features/django-middleware-filtering/#django-middleware-rules)参照してください。
  </Collapser>

  <Collapser id="instrumentation-middleware-django-exclude" title="instrumentation.middleware.django.exclude">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            文字列のリスト
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            （無し）
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル
          </td>
        </tr>
      </tbody>
    </table>

    このリストにあるミドルウェア名は送信されません。リスト内の名前は、以下に示すようにスペースで区切る必要があります。

    ```
    middleware1 middleware2 middleware3
    ```

    ミドルウェア フィルタリングのルールについては、 [ミドルウェア フィルタリング ページを](/docs/apm/agents/python-agent/supported-features/django-middleware-filtering/#django-middleware-rules)参照してください。
  </Collapser>
</CollapserGroup>

## 機械学習の設定 [#ml-settings]

<Callout variant="important">
  [Python エージェントのバージョン 9.1.0 以降が](/docs/agents/python-agent/installation-configuration/upgrade-python-agent)必要です。
</Callout>

エージェントでの機械学習データの構成には次の設定が使用できます。

<CollapserGroup>
  <Collapser id="machine-learning-enabled" title="machine_learning.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_MACHINE_LEARNING_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    機械学習指標のエージェント属性収集を有効にするには、 `true`に設定します。
  </Collapser>

  <Collapser id="inference-events-value-enabled" title="machine_learning.inference_events_value.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_MACHINE_LEARNING_INFERENCE_EVENT_VALUE_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    生の推論値のキャプチャを有効にするには、 `true`に設定します。

    <Callout variant="important">
      [高セキュリティ モード](/docs/apm/agents/python-agent/getting-started/apm-agent-security-python/#restricted)が有効になっている場合、この設定は無効になります。
    </Callout>
  </Collapser>

  <Collapser id="ml-insights-events-enabled" title="ml_insights_events.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル
          </td>
        </tr>
      </tbody>
    </table>

    [`record_ml_event()`](/docs/agents/python-agent/python-agent-api/recordmlevent-python-agent-api/)を介して機械学習イベントを Event API に記録できるようにします。

    <Callout variant="important">
      [高セキュリティ モード](/docs/apm/agents/python-agent/getting-started/apm-agent-security-python/#restricted)が有効になっている場合、この設定は無効になります。
    </Callout>
  </Collapser>

  <Collapser id="harvest-limits-ml-event-data" title="event_harvest_config.harvest_limits.ml_event_data">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            整数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            100000
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_ML_INSIGHTS_EVENTS_MAX_SAMPLES_STORED`
          </td>
        </tr>
      </tbody>
    </table>

    Python エージェントのインスタンスが New Relic に送信できる 1 分あたりの ML イベント数の制限。
  </Collapser>
</CollapserGroup>

## その他の構成設定 [#other-settings]

エージェント構成ファイルを介して利用できるその他の設定を以下に示します。

<CollapserGroup>
  <Collapser id="utilization-detect_aws" title="utilization.detect_aws">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはAWS環境で実行されていることを自動的に検出します。
  </Collapser>

  <Collapser id="cloud-aws-account-id" title="クラウド.AWS AWSアカウントID">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `None`
          </td>
        </tr>
      </tbody>
    </table>

    設定されている場合、アカウント ID が検査によって自動的に決定できない場合、エージェントはこのAWS `account_id` を使用してAWSエンティティをリンクします。 [AWS](https://docs.aws.amazon.com/accounts/latest/reference/manage-acct-identifiers.html#awsaccountid)有効なAWS アカウント ID の例とその検索方法については 、 アカウント ID 管理のドキュメント を参照してください。
  </Collapser>

  <Collapser id="utilization-detect_azure" title="utilization.detect_azure">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはAzure環境で実行されていることを自動的に検出します。
  </Collapser>

  <Collapser id="utilization-detect_gcp" title="utilization.detect_gcp">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはGoogleCloudPlatform環境で実行されていることを自動的に検出します。
  </Collapser>

  <Collapser id="utilization-detect_pcf" title="utilization.detect_pcf">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはPivotalCloudFoundry環境で実行されていることを自動的に検出します。
  </Collapser>

  <Collapser id="utilization-detect_docker" title="utilization.detect_docker">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはDockerで実行されていることを自動的に検出します。
  </Collapser>

  <Collapser id="slow-sql" title="slow_sql.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            サーバー側の構成、構成ファイル
          </td>
        </tr>

        <tr>
          <th>
            [サーバー側のラベル](#server-side-configuration)
          </th>

          <td>
            `Enable Slow SQL?`
          </td>
        </tr>
      </tbody>
    </table>

    有効にすると、エージェントは長時間実行されるSQLデータベースクエリから詳細をキャプチャします。
  </Collapser>

  <Collapser id="thread-profiler" title="thread_profiler.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            サーバー側の構成、構成ファイル
          </td>
        </tr>

        <tr>
          <th>
            [サーバー側のラベル](#server-side-configuration)
          </th>

          <td>
            `Enable thread profiler?`
          </td>
        </tr>
      </tbody>
    </table>

    [スレッドプロファイリングセッション](/docs/apm/applications-menu/events/thread-profiler-dashboard)をスケジュールできます。スレッドプロファイラーは、アプリケーション内のアクティブなスレッドごとに呼び出しスタックのスナップショットを定期的にキャプチャして、統計的に代表的な呼び出しツリーを構築します。
  </Collapser>

  <Collapser id="cross-application-tracer" title="cross_application_tracer.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル
          </td>
        </tr>
      </tbody>
    </table>

    [クロスアプリケーショントレース](/docs/apm/transactions/cross-application-traces/introduction-cross-application-traces)を有効にします。これにより、サービス指向アーキテクチャ内でアプリとサービスが接続されます。

    <Callout variant="caution">
      [クロスアプリケーション トレース (CAT) は](/docs/apm/transactions/cross-application-traces/introduction-cross-application-traces)バージョン 11.0.0 で完全に削除されました。
    </Callout>
  </Collapser>

  <Collapser id="strip_exception_messages_enabled" title="strip_exception_messages.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル
          </td>
        </tr>
      </tbody>
    </table>

    有効にすると、例外メッセージは[コレクター](/docs/accounts-partnerships/education/getting-started-new-relic/glossary#collector)に送信される前にエラー トレースから削除され、機密情報が誤って取得されるのを防ぎます。このオプションは、高セキュリティ モードでは自動的に有効になります。

    <Callout variant="important">
      [高セキュリティ モード](/docs/apm/agents/python-agent/getting-started/apm-agent-security-python/#restricted)が有効になっている場合、この設定は無効になります。
    </Callout>
  </Collapser>

  <Collapser id="strip_exception_messages_allowlist" title="strip_exception_messages.allowlist">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            （無し）
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル
          </td>
        </tr>
      </tbody>
    </table>

    許可リストにリストされている例外は、 `strip_exception_messages.enabled`が`true`であっても、メッセージが削除されることはありません。許可リストは、スペースで区切られた例外タイプの文字列であり、それぞれ`module:exception_name`の形式です。組み込みの例外を`exception_name`としてリストします;それらの前に`module:`を付ける必要はありません。

    <DNT>
      **Example: Built-in exception and user-defined exception**
    </DNT>

    ```py
    KeyError my_module:MyException
    ```
  </Collapser>

  <Collapser id="startup-timeout" title="startup_timeout">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            浮く
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `0.0`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_STARTUP_TIMEOUT`
          </td>
        </tr>
      </tbody>
    </table>

    デフォルトでは、エージェントは最初のトランザクション ( web または [non-web](/docs/apm/transactions/intro-transactions/monitor-background-processes-other-non-web-transactions)のいずれか) を受け取ると開始します。その後、エージェントは並行して開始し、この最初のリクエストが遅れないようにします。ただし、エージェントは登録が完了するまでデータを収集できないため、この最初の要求の詳細は記録されません。これは、New Relic の起動中に最初の 2 つのトランザクションを遅延させないために、ほとんどの Web アプリケーションで推奨される構成です。

    これを無効にするために、起動タイムアウトを秒単位で設定できます。その後、エージェントは最初のトランザクションを一時停止し、登録が完了するのを待ちます。これは、プロセスが 1 回実行されてすぐに終了する、単一のプログラム実行またはタスクを計測する場合に役立つ場合があります。

    <Callout variant="important">
      `startup_timeout`はアプリの起動を遅らせるため、ウェブアプリケーションではなく、バックグラウンドタスクキューイングシステムの起動タイムアウトのみを設定することをお勧めします。
    </Callout>
  </Collapser>

  <Collapser id="shutdown-timeout" title="shutdown_timeout">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            浮く
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `2.5`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_SHUTDOWN_TIMEOUT`
          </td>
        </tr>
      </tbody>
    </table>

    プロセスのシャットダウン時に、エージェントは[コレクター](/docs/accounts-partnerships/education/getting-started-new-relic/glossary#collector)への最後のアップロードを1回試行します。問題が発生した場合にエージェントが無期限に実行されるのを防ぐために、 `shutdown_timeout`のしきい値に達すると、プロセスは正常にシャットダウンします。このシャットダウンによりデータが失われる可能性がありますが、エージェントはアップロードプロセス中に主要なメトリックデータを優先します。

    バックグラウンドタスクキューイングシステム、特にプロセスごとに少数のタスクを実行するシステムの場合、エージェントがプロセスのシャットダウン時にすべてのデータをアップロードできるように、シャットダウンタイムアウトを増やすことができます。

    <Callout variant="tip">
      Apacheおよび他の多くのWebサーバーには3.0秒のプロセス終了タイムアウトがあるため、エージェントはデフォルトで2.5秒のタイムアウトになります。エージェントは2.5秒で終了し、プロセスに登録されている`atexit`クリーンアップコードを実行できるようにします。
    </Callout>
  </Collapser>

  <Collapser id="compressed-content-encoding" title="compressed_content_encoding">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `gzip`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル
          </td>
        </tr>
      </tbody>
    </table>

    ペイロードでデータ圧縮しきい値に達した場合、エージェントはデフォルトでgzip圧縮を使用してデータを圧縮します。構成オプション`compression_content_encoding`を`deflate`に設定して、deflate圧縮を使用できます。
  </Collapser>

  <Collapser id="package-reporting-enabled" title="package_reporting.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            true
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            構成ファイル、環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_PACKAGE_REPORTING_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    この設定を有効にすると、エージェントの起動時にパッケージとバージョン情報がキャプチャされ、APM 環境タブに表示されます。

    <Callout variant="tip">
      多数のパッケージを持つアプリケーションでは、この設定を有効にすると、すべてのパッケージとバージョン情報をキャプチャするため、CPU スパイクが発生する可能性があります。 そのような場合には、この設定を無効にすることをお勧めします。
    </Callout>

    <Callout variant="caution">
      この設定を無効にすると、古いパッケージの脆弱性を検出する機能が無効になります。
    </Callout>
  </Collapser>

  <Collapser id="NEW_RELIC_STARTUP_DEBUG" title="NEW_RELIC_STARTUP_DEBUG">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            false
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_STARTUP_DEBUG`
          </td>
        </tr>
      </tbody>
    </table>

    この設定を有効にすると、エージェントは起動スクリプトから詳細なトラブルシューティング メッセージをコンソール (STDOUT) に直接送信します。 これは、 `newrelic-admin`起動スクリプト、代替の`bootstrap/sitecustomize.py`起動スクリプト、または Kubernetes APM 自動接続の起動シーケンスでのクラッシュをデバッグするのに役立ちます。

    <Callout variant="caution">
      この環境変数設定には対応する構成ファイル設定はありません。関連するコードは構成ファイルが読み取られる前に実行されるためです。 エージェントの起動後に包括的なデバッグ ログを記録するには、[ログ レベルを](#log_level)`debug`に設定します。
    </Callout>
  </Collapser>

  <Collapser id="NEW_RELIC_K8S_OPERATOR_ENABLED" title="NEW_RELIC_K8S_オペレータが有効">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            false
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_K8S_OPERATOR_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    これは、エージェントがKubernetesクラスタに挿入されたときにレポートするために使用される情報設定です。

    <Callout variant="caution">
      この設定では、エージェントのこの機能が有効または無効になるわけ**ではありません**。
    </Callout>
  </Collapser>

  <Collapser id="NEW_RELIC_AZURE_OPERATOR_ENABLED" title="NEW_RELIC_AZURE_OPERATOR_ENABLED">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            false
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            環境変数
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment-variables)
          </th>

          <td>
            `NEW_RELIC_AZURE_OPERATOR_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    これは、エージェントが Microsoft Azure コンテナー アプリに挿入されたときにレポートするために使用される情報設定です。

    <Callout variant="caution">
      この設定では、エージェントのこの機能が有効または無効になるわけ**ではありません**。
    </Callout>
  </Collapser>
</CollapserGroup>

## Heroku

<CollapserGroup>
  <Collapser id="heroku-use_dyno_names" title="heroku.use_dyno_names">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_HEROKU_USE_DYNO_NAMES`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはホスト名としてHerokudyno名を使用します。
  </Collapser>

  <Collapser id="heroku-dyno_name_prefixes_to_shorten" title="heroku.dyno_name_prefixes_to_shorten">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            配列
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `["scheduler", "run"]`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_HEROKU_DYNO_NAME_PREFIXES_TO_SHORTEN`
          </td>
        </tr>
      </tbody>
    </table>

    通常、エージェントは、末尾にドットとプロセス ID を付けて dyno 名を報告します (例: <DNT>**worker.3**</DNT> )。末尾のデータなしで報告するプレフィックスを指定することで、この末尾のデータを削除できます (たとえば、 <DNT>**worker**</DNT> )。
  </Collapser>
</CollapserGroup>

## 内蔵計装 [#builtin-instrumentation]

Pythonエージェントは、さまざまなPythonパッケージ/モジュールをインストルメントします。このインストルメンテーションは、ターゲットPythonパッケージ/モジュールがアプリケーションによってインポートされた場合にのみ発生します。

デフォルトのインストルメンテーションを無効にするには、インストルメンテーションをトリガーしたモジュールの名前に対応する特別な`import-hook`セクションを指定します。次に、 `enabled`設定を`false`に設定して、そのモジュールのインストルメンテーションを無効にします。

<CollapserGroup>
  <Collapser id="example-disable-mysqldb" title="例：MySQLdbデータベースクエリインストルメンテーションの無効化">
    `.ini`設定ファイルに以下を追加します。

    ```ini
    [import-hook:MySQLdb]
    enabled = false
    ```

    または、 `.toml`設定ファイルの場合は次を追加します。

    ```ini
    [tool.newrelic.import-hook.MySQLdb]
    enabled = false
    ```
  </Collapser>
</CollapserGroup>