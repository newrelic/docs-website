---
title: Pythonカスタムインストゥルメンテーション
tags:
  - Agents
  - Python agent
  - Custom instrumentation
metaDescription: How to create custom instrumentation with the Python agent by updating the config file or making direct calls to the agent API.
freshnessValidatedDate: never
translationType: machine
---

[カスタムインスツルメンテーション](/docs/apm/other-features/metrics/custom-instrumentation) では、エージェントのデフォルトのモニタリングとビヘイビアを拡張して、追加の機能コールとアクティビティをターゲットにすることができます。これは、エージェントの設定ファイル、またはエージェントの API を通して行うことができます。

## コンフィグファイルまたはAPIによるインストゥルメンテーション [#options]

カスタムインストルメントを追加するには、大きく分けて2つの方法があります。

* 単にクラスの追加の関数やメソッドに費やされた時間をトレースしたい場合は、エージェントの設定ファイルで関数やメソッドのリストを特定することができます。詳細については、 [コンフィグファイルによるインスツルメンテーション](/docs/agents/python-agent/custom-instrumentation/python-custom-instrumentation-config-file) を参照してください。
* より複雑なケースの場合、またはNew Relic UIでの関数の識別方法をカスタマイズしたい場合は、アプリケーションコードにAPI呼び出しを配置できます。詳細については、 [APIを介したインストルメンテーションを](/docs/agents/python-agent/custom-instrumentation/python-custom-instrumentation-api)参照してください。

いずれの場合も、これらのメカニズムは、指定された関数呼び出しのみを対象としています。再帰的ではなく、アノテーションされた関数以下の完全なプロファイリングを可能にするものでもありません。

## その他の考慮事項 [#notes]

トレースしたい関数呼び出しを個別にアノテーションする必要があります。どの関数にアノテーションを付けるべきかわからない場合は、 [スレッドプロファイリング](/docs/applications-menu/thread-profiler) の機能を使って絞り込むことができます。

<Callout variant="caution">
  あまりにも多くのメトリクスを収集すると、アプリケーションとエージェントの両方のパフォーマンスに影響を与える可能性があります。潜在的なデータの問題を回避するために、カスタムインスツルメンテーションによって導入されるユニークなメトリクスの総数を2000以下に抑えるようにしてください。
</Callout>
