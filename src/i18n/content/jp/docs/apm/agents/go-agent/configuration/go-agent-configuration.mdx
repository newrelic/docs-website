---
title: Goエージェントの設定
tags:
  - Agents
  - Go agent
  - Configuration
metaDescription: How to change the configuration settings of New Relic Go agent.
freshnessValidatedDate: never
translationType: machine
---

Go エージェントの構成設定を編集して、New Relic がアプリを監視する方法のいくつかの側面を制御できます。例えば：

* ハイセキュリティーモードをオンにする。
* UIでのフィルタリングやソートのためのカスタムタグを追加。
* エラー、トランザクションイベント、トランザクショントレース、およびカスタムイベントの収集をオフにします。

## 構成方法と優先順位 [#options]

Goエージェントを構成する主な方法は、標準の[インストールプロセス](/docs/agents/go-agent/installation/install-new-relic-go)の一部である`newrelic.NewApplication()`の呼び出しの一部として`newrelic.Config`構造体を変更することです。[Goエージェントバージョン2.7.0以降](/docs/release-notes/agent-release-notes/go-release-notes)[では、UIでサーバー側の構成](#server-side-configuration)を使用して、限られた数の構成オプションを設定することもできます。

Go エージェントは設定のこの優先順位に従います。 有効にすると、サーバー側の値が空白のままであっても、サーバー側構成により、 `newrelic.Config`構造体の<DNT>**all**</DNT>に対応する値がオーバーライドされます。

<img title="New Relic Go agent: config order of precedence" alt="New Relic Go agent: config order of precedence" src="/images/apm_diagram_Go-agent-config-precedence.webp" />

<figcaption>
  Go エージェントでサーバー側構成が有効になっている場合、サーバー側の値が空白のままであっても、 `newrelic.Config`構造体の<DNT>**all**</DNT>に対応する値がオーバーライドされます。
</figcaption>

各構成方法の詳細な説明は次のとおりです。

<CollapserGroup>
  <Collapser id="server-side-configuration" title="サーバー側の設定（2.7.0以上）">
    [サーバーサイド設定は、](/docs/agents/manage-apm-agents/configuration/server-side-agent-configuration) [Go エージェント バージョン 2.7.0 以降](/docs/release-notes/agent-release-notes/go-release-notes)で利用できます。 これにより、UI で特定の設定を構成できます。これにより、複数のホストで実行されている場合でも、すべてのエージェントに変更が自動的に適用されます。可能な場合、このドキュメントには、個々の構成オプションの下にあるサーバー側構成の UI ラベルが<DNT>**Server-side label**</DNT>として含まれています。

    [インプロセス構成で](#in-process-config)説明されている手順に従って、アプリケーションプロセスで`newrelic.NewApplication()`を呼び出す必要があります。サーバー側で設定された構成オプションは、ローカルで設定されたものを上書きします。すべての構成オプションがサーバー側で使用できるわけではないため、 `newrelic.Config`構造体を更新することをお勧めします。

    <Callout variant="caution">
      サーバー側の設定が有効になっている場合、エージェントは UI で設定さ<DNT>**could**</DNT> `newrelic.Config`構造体内のすべての値を無視します。UI 値が空の場合でも、エージェントはこれを空の値として扱い、 `newrelic.Config`値を使用しません。
    </Callout>
  </Collapser>

  <Collapser
    id="in-process-config"
    title={<>処理中<InlineCode>
      newrelic.Config
    </InlineCode>構造体</>
    }
  >
    プロセス`newrelic.Config`構造体のローカルからGoエージェントを構成します。この構造体は、 `newrelic.NewApplication()`を呼び出すときにアクセスできます。

    1. `main`関数または`init`ブロックに以下を追加します。

       ```go
       app, err := newrelic.NewApplication(
           newrelic.ConfigAppName("Your Application Name"),
           newrelic.ConfigLicense(os.Getenv("NEW_RELIC_LICENSE_KEY")),
       )
       ```

       `newrelic.ConfigLicense`に渡される文字列リテラル値としてハードコーディングするのではなく、 `os.Getenv`を使用して環境からライセンス キーを読み取ることに注意してください。ライセンス キーやその他の機密情報をソース コードに配置しないことをお勧めします。SCM リポジトリに保存され、権限のない第三者に公開される可能性があるためです。

    2. `newrelic.Config`構造体の値を更新して、`newrelic.ConfigOption`を使用してアプリケーションを構成します。これらは、 `newrelic.Config`構造体へのポインタを受け入れる関数です。`newrelic.ConfigOption`を追加して、アプリケーションをさらに構成します。たとえば、事前定義されたオプションの1つを使用して、一般的な構成を行うことができます。

       ```go
       app, err := newrelic.NewApplication(
           newrelic.ConfigAppName("Your Application Name"),
           newrelic.ConfigLicense(os.Getenv("NEW_RELIC_LICENSE_KEY")),
           // add debug level logging to stdout
           newrelic.ConfigDebugLogger(os.Stdout),
       )
       ```

    3. または、独自の`newrelic.ConfigOption`を作成して、より複雑な構成を行うこともできます。

       ```go
       app, err := newrelic.NewApplication(
           newrelic.ConfigAppName("Your Application Name"),
           newrelic.ConfigLicense(os.Getenv("NEW_RELIC_LICENSE_KEY")),
           newrelic.ConfigDebugLogger(os.Stdout),
           func(config *newrelic.Config) {
           // add more specific configuration of the agent within a custom ConfigOption
           config.HighSecurity = true
               config.CrossApplicationTracer.Enabled = false
           },
       )
       ```
  </Collapser>
</CollapserGroup>

## 構成設定の変更 [#make-config-changes]

Goエージェントの構成を変更するには、カスタム`newrelic.ConfigOption`内から`newrelic.Config`構造体の値を設定します。たとえば、テスト目的でNew Relicの監視を一時的にオフにするには、 `Enabled`の値を`false`に変更します。

```go
app, err := newrelic.NewApplication(
    newrelic.ConfigAppName("Your Application Name"),
    newrelic.ConfigLicense(os.Getenv("NEW_RELIC_LICENSE_KEY")),
    func(config *newrelic.Config) {
    	config.Enabled = false
    },
)
```

この例と次の例では、 `config`はNew Relicの構成構造体を表していますが[、Goエージェントをインストール](/docs/agents/go-agent/get-started/get-new-relic-go)してアプリで構成を開始したときに、別の変数名を付けた可能性があります。

## 一般的な構成設定 [#general-settings]

<CollapserGroup>
  <Collapser id="license" title="ライセンス (REQUIRED)">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            （無し）
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            `newrelic.Config` 構造体
          </td>
        </tr>
      </tbody>
    </table>

    アプリのメトリクスを New Relic アカウントに関連付けるために使用される New Relic [ライセンス キー](/docs/subscriptions/license-key)を指定します。 ライセンスとアプリ名はどちらも、 [New Relic インストール プロセス](/docs/apm/agents/go-agent/installation/install-new-relic-go/#get-new-relic)の一部として設定されます。
  </Collapser>

  <Collapser id="app-name" title="AppName (REQUIRED)">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `(none)`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            `newrelic.Config` 構造体
          </td>
        </tr>
      </tbody>
    </table>

    これは、New Relic UI でデータを集約するために使用される [アプリケーション名](/docs/apm/agents/manage-apm-agents/app-naming/name-your-application/) です。 [New Relic のインストール プロセス](/docs/apm/agents/go-agent/installation/install-new-relic-go/#get-new-relic)の一環として、ライセンスとアプリ名の両方を設定します。

    [同時に複数のアプリ](/docs/apm/agents/manage-apm-agents/app-naming/use-multiple-names-app/)にデータをレポートするには、名前のリストをセミコロンで区切って指定します。 セミコロン自体の前にスペースを入れないでください。例えば：

    ```go
    app, err := newrelic.NewApplication(
        newrelic.ConfigAppName("YOUR_APP_NAME;APP_GROUP_1;ALL_APPS"),
        newrelic.ConfigLicense(os.Getenv("NEW_RELIC_LICENSE_KEY")),
    )
    ```
  </Collapser>

  <Collapser id="enabled" title="有効">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            `newrelic.Config` 構造体
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはアプリからのデータを[New Relic コレクター](/docs/new-relic-solutions/get-started/glossary/#collector)に送信します。

    New Relicの監視をオフにするには、これを`false`に設定します。

    例えば：

    ```go
    app, err := newrelic.NewApplication(
        newrelic.ConfigAppName("Your Application Name"),
        newrelic.ConfigLicense(os.Getenv("NEW_RELIC_LICENSE_KEY")),
        func(config *newrelic.Config) {
        	config.Enabled = false
        },
    )
    ```

    これを簡単にするために、 `ConfigEnabled`オプションを利用できます。

    ```go
    app, err: = newrelic.NewApplication(
        newrelic.ConfigAppName("Your Application Name"),
        newrelic.ConfigLicense(os.Getenv("NEW_RELIC_LICENSE_KEY")),
        newrelic.ConfigEnabled(false),
    )
    ```

    これは、開発環境にNew Relicをインストールしたり、トラブルシューティングを行ったりする場合に役立ちます。`Enabled`が`false`に設定されている場合：

    * New Relic Go エージェントは、New Relic コレクターと通信しません。
    * エージェントはゴルーチンを生成しません。
    * インストール時にライセンス キーは必要ありません。
  </Collapser>

  <Collapser id="labels" title="ラベル">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            マップ\[文字列]文字列
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            （無し）
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            `newrelic.Config` 構造体
          </td>
        </tr>
      </tbody>
    </table>

    [タグ](/docs/new-relic-solutions/new-relic-one/core-concepts/use-tags-help-organize-find-your-data/)を追加します。

    <CollapserGroup>
      <Collapser id="example-labels" title="4つのタグペアの作成">
        ここでは、4つのタグを設定する例を紹介します。

        ```go
        app, err := newrelic.NewApplication(
            newrelic.ConfigAppName("Your Application Name"),
            newrelic.ConfigLicense(os.Getenv("NEW_RELIC_LICENSE_KEY")),
            func(config *newrelic.Config) {
                config.Labels = map[string]string{
                    "Env":    "Dev",
                    "Label2": "label2",
                    "Label3": "label3",
                    "Label4": "label4",
                }
            },
        )
        ```
      </Collapser>
    </CollapserGroup>
  </Collapser>

  <Collapser id="logger" title="ロガー">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            インタフェース
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            （無し）
          </td>
        </tr>

        <tr>
          <th>
            [始まる](/docs/apm/agents/go-agent/configuration/go-agent-configuration/#options)
          </th>

          <td>
            `newrelic.Config` 構造体
          </td>
        </tr>
      </tbody>
    </table>

    `Logger`インターフェースを使用して、 [Go ログ ファイルを特定の場所またはログ システムに書き込む](/docs/apm/agents/go-agent/configuration/go-agent-logging/) ことができます。
  </Collapser>

  <Collapser id="high_security" title="HighSecurity">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            `newrelic.Config` 構造体
          </td>
        </tr>
      </tbody>
    </table>

    <Callout variant="important">
      この機能を利用するには、 [Enterprise tier](https://www.newrelic.com/pricing) が必要です。
    </Callout>

    [高セキュリティ モードでは、](/docs/accounts-partnerships/accounts/security/high-security)特定のセキュリティ設定が強制され、その設定が上書きされるのを防ぐため、エージェントは機密データを送信しません。高セキュリティ モードでは次のことが行われます。

    * SSLをオンにする

    * エラーメッセージ文字列の報告をオフにする

    * カスタムイベントの報告をオフにする

      この設定は、UIの対応するアカウント設定と一致する必要があります。例えば、以下のようになります。

      ```go
      app, err := newrelic.NewApplication(
          newrelic.ConfigAppName("Your Application Name"),
          newrelic.ConfigLicense(os.Getenv("NEW_RELIC_LICENSE_KEY")),
          func(config *newrelic.Config) {
              config.HighSecurity = true
          },
      )
      ```

      エージェントはデフォルトで HTTPS を介して New Relic と通信し、New Relic [は APM と REST API へのすべてのトラフィックに HTTPS](/docs/apis/rest-api-v2/troubleshooting/301-response-rest-api-calls) を要求します。
  </Collapser>

  <Collapser id="use-tls" title="UseTLS (DEPRECATED)">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            `newrelic.Config` 構造体
          </td>
        </tr>
      </tbody>
    </table>

    <Callout variant="important">
      このオプションは、 [エージェントバージョン2.0](/docs/release-notes/agent-release-notes/go-release-notes/go-agent-20) で削除されました。
    </Callout>

    New Relic へのデータ送信に HTTPS と HTTP のどちらを使用するかを制御します。エージェントは、デフォルトでは HTTPS で New Relic と通信します (TLS プロトコルを使用します)。New Relic [では、APM と New Relic REST API へのすべてのトラフィックに HTTPS](/docs/apis/rest-api-v2/troubleshooting/301-response-rest-api-calls) を要求します。
  </Collapser>

  <Collapser id="host-display-name" title="HostDisplayName">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            （無し）
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            `newrelic.Config` 構造体
          </td>
        </tr>
      </tbody>
    </table>

    これにより、 [APM UI に表示されるホスト名が](/docs/apm/agents/manage-apm-agents/configuration/add-rename-remove-hosts/#display_name)設定されます。 これはオプションの構成です。
  </Collapser>

  <Collapser id="transport" title="トランスポート">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            [http.RoundTripper](https://golang.org/pkg/net/http/#RoundTripper)
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            （無し）
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            `newrelic.Config` 構造体
          </td>
        </tr>
      </tbody>
    </table>

    これにより、New Relic コレクターとの [http.Client](https://golang.org/pkg/net/http/#Client) 通信がカスタマイズされます。 これを使用してプロキシを構成できます。
  </Collapser>

  <Collapser id="runtime-sampler" title="RuntimeSampler.Enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            `newrelic.Config` 構造体
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントは実行時統計をキャプチャします。
  </Collapser>
</CollapserGroup>

New Relic CodeStreamを使用してIDEからパフォーマンスを監視する場合は、[リポジトリをサービスに関連付け](/docs/codestream/observability/repo-association)、[ビルドSHAまたはリリースタグをエラーに関連付ける](/docs/codestream/observability/error-investigation/#buildsha)必要があります。

## 環境からの構成 [#configuring-from-the-environment]

柔軟性を高めるために、環境変数をアプリケーションのソースコードにハードコーディングする代わりに、環境変数を設定することで、多くの構成オプションを設定できます。それらを使用するには、他の構成オプションの中で`ConfigFromEnvironment()`への呼び出しを追加します。

```go
app, err := newrelic.NewApplication(
   newrelic.ConfigAppName("Your Application Name"),
   newrelic.ConfigLicense(os.Getenv("NEW_RELIC_LICENSE_KEY")),
   newrelic.ConfigFromEnvironment(),
)
```

`newrelic.ConfigFromEnvironment()`が表示されるオプションのリスト内のポイントで、環境変数が読み取られ、 `newrelic.Config`構造体の対応するエントリが更新されることに注意してください。`ConfigFromEnvironment`の後に追加の構成オプションがリストされている場合、それらは`ConfigFromEnvironment`によって設定された値をオーバーライドする可能性があります。

たとえば、次の環境変数が設定されている場合：

```ini
NEW_RELIC_LICENSE_KEY="your_license_key_here"
NEW_RELIC_APP_NAME="Your Application Name"
NEW_RELIC_CODE_LEVEL_METRICS_ENABLED="true"
NEW_RELIC_CODE_LEVEL_METRICS_PATH_PREFIX="myproject/src"
NEW_RELIC_LABELS="Env:Dev;Label2:label2;Label3:label3;Label4:label4"
```

次に、次のコード：

```go
app, err := newrelic.NewApplication(
    newrelic.ConfigFromEnvironment(),
)
```

ハードコードされた同等のものと同じ結果を達成します：

```go
app, err := newrelic.NewApplication(
    newrelic.ConfigAppName("Your Application Name"),
    newrelic.ConfigLicense("your_license_key_here"),
    newrelic.ConfigCodeLevelMetricsEnabled(true),
    newrelic.ConfigCodeLevelMetricsPathPrefix("myproject/src"),
    func(config *newrelic.Config) {
        config.Labels = map[string]string{
            "Env":    "Dev",
            "Label2": "label2",
            "Label3": "label3",
            "Label4": "label4",
        }
    },
)
```

すべての可能な構成オプションが環境変数を介して設定されるわけではありません。以下の[コラプスの環境変数と関数の表は](#env-var-table)、使用可能なすべての構成関数とそれに対応する環境変数を示しています。名前付き構成オプションは、 `Config`構造体の対応するフィールドに値を直接割り当てることで設定できますが、可能な限り構成関数や環境変数を使用することをお勧めします。

<CollapserGroup>
  <Collapser className="freq-link" id="env-var-table" title="環境変数と関数の表">
    テーブルの使用方法に関するいくつかのヒントを次に示します。

    * 環境変数が表にリストされている場合、名前付きの環境変数を設定することにより、対応するオプションを設定できます。`ConfigFromEnvironment()`関数も含める必要があります。これにより、エージェントはすべての`NEW_RELIC_*`環境変数を受け入れるようになります。

    * 構成関数がリストされている場合、 `ConfigFromEnvironment()`を使用する代わりに、その関数を使用して対応するオプションを設定できます。`ConfigFromEnvironment()`を含む、プログラムにリストされている構成関数は、コードに表示されている順序で解決されることに注意してください。これは、環境変数を作成して関数`ConfigFromEnvironment()`を呼び出すと、特定の関数を使用して以前に設定した対応する構成が上書きされることを意味します。`ConfigFromEnvironment()`の後の構成オプションは、以前の構成関数と環境変数をオーバーライドします。

    * 各関数の使用方法の詳細については、こちらのドキュメントと[Go ドキュメント サイト](https://pkg.go.dev/github.com/newrelic/go-agent/v3@v3.20.0/newrelic#ConfigOption)を参照してください。

      <table>
        <thead>
          <tr>
            <th>
              構成フィールド
            </th>

            <th>
              設定機能
            </th>

            <th>
              環境変数
            </th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>
              `AppName`
            </td>

            <td>
              `ConfigAppName`
            </td>

            <td>
              `NEW_RELIC_APP_NAME`
            </td>
          </tr>

          <tr>
            <td>
              `ApplicationLogging.Enabled`
            </td>

            <td>
              `ConfigAppLogForwardingEnabled`

              `ConfigAppLogEnabled`

              (以下の[注 1](#table-note-one)を参照)
            </td>

            <td>
              `NEW_RELIC_APPLICATION_LOGGING_ENABLED`
            </td>
          </tr>

          <tr>
            <td>
              `ApplicationLogging.Forwarding.Enabled`
            </td>

            <td>
              `ConfigAppLogForwardingEnabled`

              `ConfigAppLogDecoratingEnabled`

              `ConfigAppLogMetricsEnabled`

              (以下の[注 1](#table-note-one)を参照)
            </td>

            <td>
              `NEW_RELIC_APPLICATION_LOGGING_FORWARDING_ENABLED`
            </td>
          </tr>

          <tr>
            <td>
              `ApplicationLogging.Forwarding.MaxSamplesStored`
            </td>

            <td>
              `ConfigAppLogForwardingEnabled`

              `ConfigAppLogForwardingMaxSamplesStored`

              (以下の[注 1](#table-note-one)を参照)
            </td>

            <td>
              `NEW_RELIC_APPLICATION_LOGGING_FORWARDING_MAX_SAMPLES_STORED`
            </td>
          </tr>

          <tr>
            <td>
              `ApplicationLogging.LocalDecorating.Enabled`
            </td>

            <td>
              `ConfigAppLogDecoratingEnabled`
            </td>

            <td>
              `NEW_RELIC_APPLICATION_LOGGING_LOCAL_DECORATING_ENABLED`
            </td>
          </tr>

          <tr>
            <td>
              `ApplicationLogging.Metrics.Enabled`
            </td>

            <td>
              `ConfigAppLogMetricsEnabled`
            </td>

            <td>
              `NEW_RELIC_APPLICATION_LOGGING_METRICS_ENABLED`
            </td>
          </tr>

          <tr>
            <td>
              `Attributes.Enabled`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `Attributes.Exclude`
            </td>

            <td />

            <td>
              `NEW_RELIC_ATTRIBUTES_EXCLUDE`
            </td>
          </tr>

          <tr>
            <td>
              `Attributes.Include`
            </td>

            <td />

            <td>
              `NEW_RELIC_ATTRIBUTES_INCLUDE`
            </td>
          </tr>

          <tr>
            <td>
              `BrowserMonitoring.Attributes.Enabled`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `BrowserMonitoring.Attributes.Exclude`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `BrowserMonitoring.Attributes.Include`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `BrowserMonitoring.Enabled`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `CodeLevelMetrics.Enabled`
            </td>

            <td>
              `ConfigCodeLevelMetricsEnabled`
            </td>

            <td>
              `NEW_RELIC_CODE_LEVEL_METRICS_ENABLED`
            </td>
          </tr>

          <tr>
            <td>
              `CodeLevelMetrics.IgnoredPrefixes`
            </td>

            <td>
              `ConfigCodeLevelMetricsIngoredPrefixes`
            </td>

            <td>
              `NEW_RELIC_CODE_LEVEL_METRICS_IGNORED_PREFIXES`
            </td>
          </tr>

          <tr>
            <td>
              `CodeLevelMetrics.PathPrefixes`
            </td>

            <td>
              `ConfigCodeLevelMetricsPathPrefixes`
            </td>

            <td>
              `NEW_RELIC_CODE_LEVEL_METRICS_PATH_PREFIXES`
            </td>
          </tr>

          <tr>
            <td>
              `CodeLevelMetrics.RedactIgnoredPrefixes`
            </td>

            <td>
              `ConfigCodeLevelMetricsRedactIgnoredPrefixes`
            </td>

            <td>
              `NEW_RELIC_CODE_LEVEL_METRICS_REDACT_IGNORED_PREFIXES`
            </td>
          </tr>

          <tr>
            <td>
              `CodeLevelMetrics.RedactPathPrefixes`
            </td>

            <td>
              `ConfigCodeLevelMetricsRedactPathPrefixes`
            </td>

            <td>
              `NEW_RELIC_CODE_LEVEL_METRICS_REDACT_PATH_PREFIXES`
            </td>
          </tr>

          <tr>
            <td>
              `CodeLevelMetrics.Scope`
            </td>

            <td>
              `ConfigCodeLevelMetricsScope`
            </td>

            <td>
              `NEW_RELIC_CODE_LEVEL_METRICS_SCOPE`
            </td>
          </tr>

          <tr>
            <td>
              `CrossApplicationTracer.Enabled`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `CustomInsightsEvents.Enabled`
            </td>

            <td>
              `ConfigCustomInsightsEventsEnabled`
            </td>

            <td />
          </tr>

          <tr>
            <td>
              `CustomInsightsEvents.MaxSamplesStored`
            </td>

            <td>
              `ConfigCustomInsightsEventsMaxSamplesStored`
            </td>

            <td />
          </tr>

          <tr>
            <td>
              `DatastoreTracer.DatabaseNameReporting.Enabled`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `DatastoreTracer.InstanceReporting.Enabled`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `DatastoreTracer.QueryParameters.Enabled`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `DatastoreTracer.SlowQuery.Enabled`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `DatastoreTracer.SlowQuery.Threshold`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `DistributedTracer.Enabled`
            </td>

            <td>
              `ConfigDistributedTracerEnabled`
            </td>

            <td>
              `NEW_RELIC_DISTRIBUTED_TRACING_ENABLED`
            </td>
          </tr>

          <tr>
            <td>
              `DistributedTracer.ExcludeNewRelicHeader`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `DistributedTracer.ReservoirLimit`
            </td>

            <td>
              `ConfigDistributedTracerReservoirLimit`
            </td>

            <td />
          </tr>

          <tr>
            <td>
              `Enabled`
            </td>

            <td>
              `ConfigEnabled`
            </td>

            <td>
              `NEW_RELIC_ENABLED`
            </td>
          </tr>

          <tr>
            <td>
              `ErrorCollector.Attributes.Enabled`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `ErrorCollector.Attributes.Exclude`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `ErrorCollector.Attributes.Include`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `ErrorCollector.CaptureEvents`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `ErrorCollector.Enabled`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `ErrorCollector.IgnoreStatusCodes`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `ErrorCollector.RecordPanics`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `Error`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `Heroku.DynoNamePrefixesToShorten`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `Heroku.UseDynoNames`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `HighSecurity`
            </td>

            <td />

            <td>
              `NEW_RELIC_HIGH_SECURITY`
            </td>
          </tr>

          <tr>
            <td>
              `HostDisplayName`
            </td>

            <td />

            <td>
              `NEW_RELIC_PROCESS_HOST_DISPLAY_NAME`
            </td>
          </tr>

          <tr>
            <td>
              `Host`
            </td>

            <td />

            <td>
              `NEW_RELIC_HOST`
            </td>
          </tr>

          <tr>
            <td>
              `InfiniteTracing.SpanEvents.QueueSize`
            </td>

            <td />

            <td>
              `NEW_RELIC_INFINITE_TRACING_SPAN_EVENTS_QUEUE_SIZE`
            </td>
          </tr>

          <tr>
            <td>
              `InfiniteTracing.TraceObserver.Host`
            </td>

            <td />

            <td>
              `NEW_RELIC_INFINITE_TRACING_TRACE_OBSERVER_HOST`
            </td>
          </tr>

          <tr>
            <td>
              `InfiniteTracing.TraceObserver.Port`
            </td>

            <td />

            <td>
              `NEW_RELIC_INFINITE_TRACING_TRACE_OBSERVER_PORT`
            </td>
          </tr>

          <tr>
            <td>
              `Labels`
            </td>

            <td />

            <td>
              `NEW_RELIC_LABELS`
            </td>
          </tr>

          <tr>
            <td>
              `License`
            </td>

            <td>
              `ConfigLicense`
            </td>

            <td>
              `NEW_RELIC_LICENSE_KEY`
            </td>
          </tr>

          <tr>
            <td>
              `Logger`
            </td>

            <td>
              `ConfigLogger`

              `ConfigInfoLogger`

              `ConfigDebugLogger`

              (以下の[注 2](#table-note-two)を参照)
            </td>

            <td>
              `NEW_RELIC_LOG`

              `NEW_RELIC_LOG_LEVEL`
            </td>
          </tr>

          <tr>
            <td>
              `ModuleDependencyMetrics.Enabled`
            </td>

            <td>
              `ConfigModuleDependencyMetricsEnabled`
            </td>

            <td>
              `NEW_RELIC_MODULE_DEPENDENCY_METRICS_ENABLED`
            </td>
          </tr>

          <tr>
            <td>
              `ModuleDependencyMetrics.IgnoredPrefixes`
            </td>

            <td>
              `ConfigModuleDependencyMetricsIgnoredPrefixes`
            </td>

            <td>
              `NEW_RELIC_MODULE_DEPENDENCY_METRICS_IGNORED_PREFIXES`
            </td>
          </tr>

          <tr>
            <td>
              `ModuleDependencyMetrics.RedaceIgnoredPrefixes`
            </td>

            <td>
              `ConfigModuleDependencyMetricsRedactIgnoredPrefixes`
            </td>

            <td>
              `NEW_RELIC_MODULE_DEPENDENCY_METRICS_REDACT_IGNORED_PREFIXES`
            </td>
          </tr>

          <tr>
            <td>
              `RuntimeSampler.Enabled`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `SecurityPoliciesToken`
            </td>

            <td />

            <td>
              `NEW_RELIC_SECURITY_POLICIES_TOKEN`
            </td>
          </tr>

          <tr>
            <td>
              `Segments.Attributes.Enabled`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `Segments.Attributes.Exclude`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `Segments.Attributes.Include`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `Segments.StackTraceThreshold`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `Segments.Threshold`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `ServerlessMode.AccountID`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `ServerlessMode.ApdexThreshold`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `ServerlessMode.Enabled`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `ServerlessMode.PrimaryAppID`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `ServerlessMode.TrustedAccountKey`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `SpanEvents.Attributes.Enabled`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `SpanEvents.Attributes.Exclude`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `SpanEvents.Attributes.Include`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `SpanEvents.Enabled`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `TransactionEvents.Attributes.Enabled`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `TransactionEvents.Attributes.Exclude`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `TransactionEvents.Attributes.Include`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `TransactionEvents.Enabled`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `TransactionEvents.MaxSamplesStored`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `TransactionTracer.Attributes.Enabled`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `TransactionTracer.Attributes.Exclude`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `TransactionTracer.Attributes.Include`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `TransactionTracer.Enabled`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `TransactionTracer.Threshold.Duration`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `TransactionTracer.Threshold.IsApdexFailing`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `Transport`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `Utilization.BillingHostname`
            </td>

            <td />

            <td>
              `NEW_RELIC_UTILIZATION_BILLING_HOSTNAME`
            </td>
          </tr>

          <tr>
            <td>
              `Utilization.DetectAWS`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `Utilization.DetectAzure`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `Utilization.DetectDocker`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `Utilization.DetectGCP`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `Utilization.DetectKubernetes`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `Utilization.DetectPCF`
            </td>

            <td />

            <td />
          </tr>

          <tr>
            <td>
              `Utilization.LocalRAMMIB`
            </td>

            <td />

            <td>
              `NEW_RELIC_UTILIZATION_TOTAL_RAM_MIB`
            </td>
          </tr>

          <tr>
            <td>
              `Utilization.LogicalProcessors`
            </td>

            <td />

            <td>
              `NEW_RELIC_UTILIZATION_LOGICAL_PROCESSORS`
            </td>
          </tr>
        </tbody>
      </table>

      ### 表注 1: [#table-note-one]

      リストされた関数のいずれかを呼び出して下位機能を有効にすると、メイン機能も有効になり、他の構成値が設定されます。

      * `ConfigAppLogForwardingEnabled(true)` `ApplicationLogging.Forwarding.Enabled=true`を設定しますが、 `ApplicationLogging.Enabled=true`も設定します。
      * `ConfigAppLogForwardingEnabled(false)` `ApplicationLogging.Forwarding.Enabled=false`を設定しますが、 `ApplicationLogging.Forwarding.MaxSamplesStored=0`も設定します。
      * `ConfigAppLogDecoratingEnabled(true)` `ApplicationLogging.LocalDecorating.Enabled=true`を設定しますが、 `ApplicationLogging.Enabled=true`も設定します。
      * `ConfigAppLogDecoratingEnabled(false)` `ApplicationLogging.LocalDecorating.Enabled=false`を設定しますが、 `ApplicationLogging.Enabled`には影響しません。
      * `ConfigAppLogMetricsEnabled(true)` `ApplicationLogging.Metrics.Enabled=true`を設定しますが、 `ApplicationLogging.Enabled=true`も設定します。
      * `ConfigAppLogMetricsEnabled(false)` `ApplicationLogging.Metrics.Enabled=false`を設定しますが、 `ApplicationLogging.Enabled`には影響しません。

      ### 表注 2: [#table-note-two]

      `NEW_RELIC_LOG`環境変数を介して`Logger`を設定する場合、使用されるロガーのタイプは`NEW_RELIC_LOG_LEVEL`の値によって異なります。後者の変数が定義されていて、その値が`debug` 、 `Debug` 、 `DEBUG` 、 `d` 、または`D`の場合、標準のロガーではなくデバッグ レベルのロガーが使用されます。`NEW_RELIC_LOG`は、値`stdout` 、 `Stdout` 、 `STDOUT` 、 `stderr` 、 `Stderr` 、または`STDERR`を持つことができます。

    <Callout variant="tip">
      `newrelic.ConfigFromEnvironment`が読み取るには、環境変数の値が空でない必要があります。
    </Callout>
  </Collapser>
</CollapserGroup>

## バージョンタグを設定 [#version-tag]

NEW\_RELIC\_METADATA\_SERVICE\_VERSION を設定すると、イベント データにタグ`tag.service.version`が作成されます。このコンテキストでは、サービス バージョンはデプロイされるコードのバージョンであり、多くの場合、1.2.3 などのセマンティック バージョンですが、常にそうとは限りません。この情報を送信すると、展開されたソフトウェアのバージョンによってテレメトリをファセットできるため、エラーを生成しているソフトウェアのバージョンをすばやく特定できます。

## AIモニタリング [#ai-monitoring]

このセクションには、AIモニタリングを設定するためのGoエージェント設定が含まれています。

<Callout variant="important">
  ディストリビューティッド（分散）トレーシングが無効になっているか、高セキュリティモードを有効にしている場合、AIモニタリングはAIデータを収集しません。
</Callout>

<Callout variant="important">
  AI モニタリングを有効にすると、モニタリング対象として選択したモデルとの間で送受信される入力と出力のストリーミング コピー (そこに含まれる個人情報も含む) が記録されます。 AIモニタリング機能を提供する目的で、モデルユーザーのインタラクションが第三者（New Relic）によって記録される可能性があることについて、モデルユーザーから同意を得る責任があります。
</Callout>

<CollapserGroup>
  <Collapser id="ai-monitoring-enabled" title="AIMonitoring.Enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment)
          </th>

          <td>
            `NEW_RELIC_AI_MONITORING_ENABLED`
          </td>
        </tr>

        <tr>
          <th>
            設定機能
          </th>

          <td>
            `newrelic.ConfigAIMonitoringEnabled`
          </td>
        </tr>
      </tbody>
    </table>

    `true`に設定すると、AI モニタリングが有効になります。
  </Collapser>

  <Collapser id="ai-monitoring-streaming" title="AIMonitoring.Streaming.Enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment)
          </th>

          <td>
            `NEW_RELIC_AI_MONITORING_STREAMING_ENABLED`
          </td>
        </tr>

        <tr>
          <th>
            設定機能
          </th>

          <td>
            `newrelic.ConfigAIMonitoringStreamingEnabled`
          </td>
        </tr>
      </tbody>
    </table>

    `true`に設定すると、エージェントはストリームされた応答をキャプチャできるようになります。`false`に設定すると、エージェントはストリーミングされた応答に関するイベント データをキャプチャしませんが、メトリクスとスパンは引き続きキャプチャできます。 LLM 関数呼び出しが終了すると、スパン期間は終了します。`true`に設定すると、最終結果がストリームから読み取られたときにスパン期間が終了します。
  </Collapser>

  <Collapser id="ai-monitoring-record-content" title="AIMonitoring.RecordContent.Enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [環境変数](#environment)
          </th>

          <td>
            `NEW_RELIC_AI_MONITORING_RECORD_CONTENT_ENABLED`
          </td>
        </tr>

        <tr>
          <th>
            設定機能
          </th>

          <td>
            `newrelic.ConfigAIMonitoringRecordContentEnabled()`
          </td>
        </tr>
      </tbody>
    </table>

    `false`に設定すると、エージェントはLLMイベントでキャプチャされた入力および出力コンテンツ（プロンプトやレスポンスのテキスト文字列など）を省略します。これは、LLMとの間で送受信される機密データを記録したくない場合のオプションのセキュリティ設定です。
  </Collapser>
</CollapserGroup>

## カスタムイベントの設定 [#custom-insights-events-settings]

カスタムイベントを作成して、問い合わせや分析に利用することができます。

<CollapserGroup>
  <Collapser id="custom-insights-events-enabled" title="CustomInsightsEvents.Enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            `newrelic.Config` 構造体
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントは [カスタム イベントを](/docs/data-apis/custom-data/custom-events/apm-report-custom-events-attributes/#go)[ New Relic](/docs/insights/new-relic-insights/understanding-insights/new-relic-insights)に送信します。 この設定は、カスタム イベントを無効にする [`HighSecurity`](#high_security)によってオーバーライドされます。

    カスタムイベントを無効にするには、 [New Relic config](/docs/agents/go-agent/get-started/get-new-relic-go#get-new-relic) が開始された後に、Go アプリに以下を配置します。

    ```go
    app, err := newrelic.NewApplication(
        newrelic.ConfigAppName("Your Application Name"),
        newrelic.ConfigLicense(os.Getenv("NEW_RELIC_LICENSE_KEY")),
        func(config *newrelic.Config) {
            config.CustomInsightsEvents.Enabled = false
        },
    )
    ```
  </Collapser>
</CollapserGroup>

## トランザクションイベントの設定 [#transaction-events-settings]

トランザクションイベントは、ウェブリクエストやバックグラウンドタスクに対応するイベントを収集する際に使用します。イベントデータは、New Relic の UI で [ヒストグラム](/docs/applications-menu/histograms-viewing-data-distribution) や [パーセンタイル](/docs/applications-menu/percentiles-comparing-ranked-data) などの追加情報を表示することができます。

<CollapserGroup>
  <Collapser id="transaction-events" title="TransactionEvents.Enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            `newrelic.Config` 構造体
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはトランザクションイベントを収集します。
  </Collapser>

  <Collapser id="txn-events-attributes" title="TransactionEvents.Attributes">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            構造体
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            有効、除外事項なし
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            `newrelic.Config` 構造体
          </td>
        </tr>
      </tbody>
    </table>

    `TransactionEvents.Attributes` 3つのフィールドを持つ構造体です。

    ```go
    Enabled bool
    Include []string
    Exclude []string
    ```

    `TransactionEvents.Attributes.Enabled`を使用して、トランザクションイベントの属性収集をオンまたはオフにします。`Include`および`Exclude`を使用して、特定の属性を含めたり除外したりします。

    `allAgentAttributeNames`という名前の属性スライスをトランザクションイベントから除外する例：

    ```go
    app, err := newrelic.NewApplication(
        newrelic.ConfigAppName("Your Application Name"),
        newrelic.ConfigLicense(os.Getenv("NEW_RELIC_LICENSE_KEY")),
        func(config *newrelic.Config) {
            config.TransactionEvents.Attributes.Exclude = allAgentAttributeNames
        },
    )
    ```
  </Collapser>

  <Collapser id="transaction-events-maxsamplesstored" title="TransactionEvents.MaxSamplesStored">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            整数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `10000`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            `newrelic.Config` 構造体
          </td>
        </tr>
      </tbody>
    </table>

    New Relic に送信する 1 分あたりのトランザクションイベントの最大数を定義し、デフォルトの最大数である 10,000 トランザクションイベントまで設定します。
  </Collapser>
</CollapserGroup>

## エラーコレクターの構成 [#error-collector]

エラーコレクターの設定は以下のように行います。

<Callout variant="tip">
  New Relic のエラー設定の概要については、 [Manage errors in APM](/docs/agents/manage-apm-agents/agent-data/manage-errors-apm-collect-ignore-mark-expected) を参照してください。
</Callout>

<CollapserGroup>
  <Collapser id="error-collector-enabled" title="ErrorCollector.Enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            `newrelic.Config` 構造体、サーバー側の構成
          </td>
        </tr>

        <tr>
          <th>
            [サーバー側のラベル](#server-side-configuration)
          </th>

          <td>
            `Error Collection on/off`
          </td>
        </tr>
      </tbody>
    </table>

    `false`の場合、エージェントはエラーやエラートレースを収集しません。
  </Collapser>

  <Collapser id="error-capture-events" title="エラーコレクター.CaptureEvents">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            `newrelic.Config` 構造体
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはエラー分析イベントを収集します。
  </Collapser>

  <Collapser id="error-group-callback" title="ErrorCollector.ErrorGroupCallback">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ErrorGroupCallback
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            nil
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            `newrelic.Config` 構造体
          </td>

          <td>
            `newrelic.ConfigSetErrorGroupCallbackFunction` 設定オプション
          </td>
        </tr>
      </tbody>
    </table>

    nil でない場合、エージェントは収集時に通知されたすべてのエラーにユーザー定義のコールバック関数を適用し、それらにエラー グループを適用します。
  </Collapser>

  <Collapser id="error-ignore-status" title="ErrorCollector.IgnoreStatusCodes">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            整数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            エラーコード399以下、404は無視されます。
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            `newrelic.Config` 構造体、サーバー側の構成
          </td>
        </tr>

        <tr>
          <th>
            [サーバー側のラベル](#server-side-configuration)
          </th>

          <td>
            `Error Collection: Ignore from error collection`
          </td>
        </tr>
      </tbody>
    </table>

    どのHTTPレスポンスコードをエラーとして無視するかを設定します。

    100 以上かつ 400 未満のレスポンスコードはデフォルトで無視され、この関数を呼び出す際に指定する必要はありません。レスポンスコード0、5、404は、デフォルトでリストに含まれますが、無視リストに追加する際には指定する必要があります。

    この関数のデフォルトフォームは

    ```go
    config.ErrorCollector.IgnoreStatusCodes = []int{
        0,                   // gRPC OK
        5,                   // gRPC NOT_FOUND
        http.StatusNotFound, // 404
    }
    ```

    上記の`http.StatusNotFound`のように、応答コードをHTTPとして追加することもできます。

    <Callout variant="important">
      使用する場合、[サーバー側の構成](#server-side-configuration)は`newrelic.Config`構造体に設定された値を上書きします。したがって、サーバー側の構成が有効になっているときに404を無視するには、UIの構成セットに404を含める必要があります。
    </Callout>

    <CollapserGroup>
      <Collapser id="ignore-error-example" title="エラーコードを無視した場合の例">
        HTTPレスポンスコード418をデフォルトの無視リストに追加するには、0、5、404が含まれています。

        ```go
        app, err := newrelic.NewApplication(
            newrelic.ConfigAppName("Your Application Name"),
            newrelic.ConfigLicense(os.Getenv("NEW_RELIC_LICENSE_KEY")),
            func(config *newrelic.Config) {
                config.ErrorCollector.IgnoreStatusCodes = []int{0, 5, 404, 418}
            },
        )
        ```
      </Collapser>
    </CollapserGroup>
  </Collapser>

  <Collapser id="error-expected-status" title="ErrorCollector.ExpectStatusCodes">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            整数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            デフォルトでは、想定どおりにエラー コードは設定されません。
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            `newrelic.Config` 構造体
          </td>
        </tr>
      </tbody>
    </table>

    これは、どの HTTP 応答コードがエラーとして予期されるかを制御します。

    予期される応答コードは、アプリケーションの apdex またはエラー アラートには影響しませんが、記録されます。

    この関数のデフォルトフォームは

    ```go
    config.ErrorCollector.ExpectStatusCodes = []int{
        100,
        http.StatusAccepted,
    }
    ```

    上記の`http.StatusAccepted`などの HTTP として応答コードを追加することもできます。

    <CollapserGroup>
      <Collapser id="expected-error-example" title="エラーコードを予想どおりにマークする例">
        HTTP 応答コード 418 および 502 を予想リストに追加するには:

        ```go
        app, err := newrelic.NewApplication(
            newrelic.ConfigAppName("Your Application Name"),
            newrelic.ConfigLicense(os.Getenv("NEW_RELIC_LICENSE_KEY")),
            func(config *newrelic.Config) {
                config.ErrorCollector.ExpectStatusCodes = []int{418, 502}
            },
        )
        ```
      </Collapser>
    </CollapserGroup>
  </Collapser>

  <Collapser id="error-attributes" title="ErrorCollector.Attributes">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            構造体
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            有効、除外事項なし
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            `newrelic.Config` 構造体
          </td>
        </tr>
      </tbody>
    </table>

    `ErrorCollector.Attributes` 3つのフィールドを持つ構造体です。

    ```go
    Enabled bool
    Include []string
    Exclude []string
    ```

    `ErrorCollector.Attributes.Enabled`を使用して、エラーの属性収集をオンまたはオフにします。`Include`および`Exclude`を使用して、特定の属性を含めたり除外したりします。

    `allAgentAttributeNames`という名前の属性スライスをエラーから除外する例：

    ```go
    app, err := newrelic.NewApplication(
        newrelic.ConfigAppName("Your Application Name"),
        newrelic.ConfigLicense(os.Getenv("NEW_RELIC_LICENSE_KEY")),
        func(config *newrelic.Config) {
            config.ErrorCollector.Attributes.Exclude = allAgentAttributeNames
        },
    )
    ```
  </Collapser>
</CollapserGroup>

## トランザクショントレーサーの構成 [#transaction-tracer]

ここでは、トランザクション・トレーサの設定を変更するための設定を紹介します。トランザクション・トレースの詳細については、 [トランザクション・トレース](/docs/traces/transaction-traces) を参照してください。

<CollapserGroup>
  <Collapser id="txn-tracer-enabled" title="TransactionTracer.Enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            `newrelic.Config` 構造体、サーバー側の構成
          </td>
        </tr>

        <tr>
          <th>
            [サーバー側のラベル](#server-side-configuration)
          </th>

          <td>
            `Transaction Tracing on/off`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントは[トランザクショントレース](/docs/apm/transactions/transaction-traces/transaction-traces)（低速トランザクションに関する詳細情報）を収集します。
  </Collapser>

  <Collapser id="txn-tracer-threshold-apdex-falling" title="TransactionTracer.Threshold.IsApdexFailing">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            `newrelic.Config` 構造体、サーバー側の構成
          </td>
        </tr>

        <tr>
          <th>
            [サーバー側のラベル](#server-side-configuration)
          </th>

          <td>
            `Transaction Tracing: Threshold`
          </td>
        </tr>
      </tbody>
    </table>

    トランザクショントレースのしきい値をApdexに基づいて設定するかどうかを制御します。

    * `true`の場合、トレースしきい値は[Apdexしきい値](/docs/apm/new-relic-apm/apdex/apdex-measuring-user-satisfaction)の4倍です。
    * `false`の場合、エージェントは[`Threshold.Duration`](/docs/go-agent-configuration#txn-tracer-threshold-duration)をトランザクショントレースのしきい値として使用します。
  </Collapser>

  <Collapser id="txn-tracer-threshold-duration" title="TransactionTracer.Threshold.Duration">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            time.millisecond
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `500`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            `newrelic.Config` 構造体、サーバー側の構成
          </td>
        </tr>

        <tr>
          <th>
            [サーバー側のラベル](#server-side-configuration)
          </th>

          <td>
            `Transaction Tracing: Threshold`
          </td>
        </tr>
      </tbody>
    </table>

    `Threshold.IsApdexFailing`が`false`に設定されている場合、エージェントはこの期間をトランザクショントレースのしきい値として使用します。
  </Collapser>

  <Collapser id="txn-tracer-segment-threshold" title="TransactionTracer.Segments.Threshold">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            time.millisecond
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `2`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            `newrelic.Config` 構造体
          </td>
        </tr>
      </tbody>
    </table>

    これは、セグメントがトレースに追加される際の閾値です。
  </Collapser>

  <Collapser id="txn-tracer-segments-attributes" title="TransactionTracer.Segments.Attributes">
    <Callout variant="important">
      Go agent version 2.6.0以降で利用可能です。
    </Callout>

    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            構造体
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            有効、除外事項なし
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            `newrelic.Config` 構造体
          </td>
        </tr>
      </tbody>
    </table>

    `TransactionTracer.Segments.Attributes` 3つのフィールドを持つ構造体です。

    ```go
    Enabled bool
    Include []string
    Exclude []string
    ```

    `TransactionTracer.Segments.Attributes.Enabled`を使用して、トランザクショントレースセグメントの属性収集をオンまたはオフにします。`Include`および`Exclude`を使用して、特定の属性を含めたり除外したりします。

    `allSegmentAttributeNames`という名前の属性スライスをトレースから除外する例：

    ```go
    app, err := newrelic.NewApplication(
        newrelic.ConfigAppName("Your Application Name"),
        newrelic.ConfigLicense(os.Getenv("NEW_RELIC_LICENSE_KEY")),
        func(config *newrelic.Config) {
            config.TransactionTracer.Segments.Attributes.Exclude = allSegmentAttributeNames
        },
    )
    ```
  </Collapser>

  <Collapser id="txn-tracer-stack-threshold" title="TransactionTracer.Segments.StackTraceThreshold">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            time.millisecond
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `500`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            `newrelic.Config` 構造体、サーバー側の構成
          </td>
        </tr>

        <tr>
          <th>
            [サーバー側のラベル](#server-side-configuration)
          </th>

          <td>
            `Transaction Tracing: Stack trace threshold`
          </td>
        </tr>
      </tbody>
    </table>

    これは、セグメントがトランザクション・トレースにスタック・トレースを提供する際のしきい値です。

    <Callout variant="caution">
      この設定を下げると、エージェントのオーバーヘッドが大幅に増加する可能性があります。
    </Callout>
  </Collapser>

  <Collapser id="txn-tracer-attributes" title="TransactionTracer.Attributes">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            構造体
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            有効、除外事項なし
          </td>
        </tr>

        <tr>
          <th>
            [始まる](/docs/agents/go-agent/instrumentation/go-agent-configuration#options)
          </th>

          <td>
            `newrelic.Config` 構造体
          </td>
        </tr>
      </tbody>
    </table>

    `TransactionTracer.Attributes` 3つのフィールドを持つ構造体です。

    ```go
    Enabled bool
    Include []string
    Exclude []string
    ```

    `TransactionTracer.Attributes.Enabled`を使用して、トランザクショントレースの属性収集をオンまたはオフにします。`Include`および`Exclude`を使用して、特定の属性を含めたり除外したりします。

    `allAgentAttributeNames`という名前の属性スライスをトレースから除外する例：

    ```go
    app, err := newrelic.NewApplication(
        newrelic.ConfigAppName("Your Application Name"),
        newrelic.ConfigLicense(os.Getenv("NEW_RELIC_LICENSE_KEY")),
        func(config *newrelic.Config) {
            config.TransactionTracer.Attributes.Exclude = allAgentAttributeNames
        },
    )
    ```
  </Collapser>
</CollapserGroup>

## データストアトレーサーの設定 [#datastore-tracer]

ここでは、 [スロークエリ](/docs/apm/applications-menu/monitoring/viewing-slow-query-details) の有効化と設定を含むデータストアの設定を紹介します。

<CollapserGroup>
  <Collapser id="instance-reporting" title="DatastoreTracer.InstanceReporting.Enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            `newrelic.Config` 構造体
          </td>
        </tr>
      </tbody>
    </table>

    これにより、一部のデータベースドライバのデータストアインスタンスメトリクス（ホストやポートなど）の収集が可能になります。これらは、トランザクショントレースや [スロークエリデータ](/docs/apm/applications-menu/monitoring/viewing-slow-query-details) の一部として報告されます。
  </Collapser>

  <Collapser id="name-reporting" title="DatastoreTracer.NameReporting.Enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            `newrelic.Config` 構造体
          </td>
        </tr>
      </tbody>
    </table>

    これを使用して、低速のクエリトレースとトランザクショントレースでデータベース名を収集できるようにします。有効な属性のデフォルト値は`true`です。
  </Collapser>

  <Collapser id="data-query-enabled" title="DatastoreTracer.QueryParameters.Enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            `newrelic.Config` 構造体
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはデータストア呼び出しクエリパラメータを収集します。
  </Collapser>

  <Collapser id="slow-query" title="DatastoreTracer.SlowQuery.Enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            `newrelic.Config` 構造体
          </td>
        </tr>
      </tbody>
    </table>

    [スロークエリ](/docs/apm/applications-menu/monitoring/viewing-slow-query-details) をキャプチャするかどうかを制御します。
  </Collapser>

  <Collapser id="slow-query-threshold" title="DatastoreTracer.SlowQuery.Threshold">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            time.millisecond
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `10`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            `newrelic.Config` 構造体
          </td>
        </tr>
      </tbody>
    </table>

    エージェントは、これより遅いクエリの [低速クエリ データ](/docs/apm/applications-menu/monitoring/viewing-slow-query-details) をキャプチャします。
  </Collapser>
</CollapserGroup>

## クロスアプリケーショントレースの設定 [#cross-application-tracing]

[クロスアプリケーションのトレース](/docs/agents/go-agent/features/cross-application-tracing-go) の機能を変更するための設定です。

<Callout variant="important">
  クロスアプリケーション トレーシングは[ディストリビューティッド（分散）](/docs/agents/go-agent/features/distributed-tracing-go)トレーシングに代わって非推奨となり、将来のエージェント バージョンでは削除される予定です。
</Callout>

<CollapserGroup>
  <Collapser id="cross-tracer-enabled" title="CrossApplicationTracer.Enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            `newrelic.Config` 構造体、サーバー側の構成
          </td>
        </tr>

        <tr>
          <th>
            [サーバー側のラベル](#server-side-configuration)
          </th>

          <td>
            `Cross-application tracing on/off`
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはアウトバウンド要求にクロスアプリケーショントレースヘッダーを追加し、着信要求をスキャンしてクロスアプリケーショントレースヘッダーを探します。

    分散トレースとクロスアプリケーショントレースを同時に使用することはできません。Goエージェントのデフォルト設定では、分散トレースを無効にし、クロスアプリケーショントレースを有効にしています。
  </Collapser>
</CollapserGroup>

## 分散型トレーシングの設定 [#distributed-tracing]

<Callout variant="important">
  分散型トレースを有効にするには、Goエージェントのバージョン2.1.0以上が必要で、 [クロスアプリケーショントレースが無効になります](#cross-application-tracing) 。また、他の機能にも影響があります。有効にする前に、 [移行ガイド](/docs/transition-guide-distributed-tracing) を読んでください。
</Callout>

[Distributed tracing](/docs/agents/go-agent/features/distributed-tracing-go) では、リクエストが分散システムを通過する際のパスを確認することができます。

ディストリビューティッド（分散）トレーシングが有効になっているときは、[スパンイベント](/docs/apm/distributed-tracing/ui-data/span-event)を収集することができます。

<CollapserGroup>
  <Collapser id="distributed-enabled" title="DistributedTracer.Enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            `newrelic.Config` 構造体
          </td>
        </tr>
      </tbody>
    </table>

    Goエージェントバージョン3.16.0以降では、標準トレースはデフォルトでオンになっています。これは、エージェントがアウトバウンド要求に分散トレースヘッダーを自動的に追加し、受信要求をスキャンして分散トレースヘッダーを探すことを意味します。分散トレースを無効にするには、値を`false`に設定します。

    分散トレースの設定の詳細について[は、「Goアプリケーションの分散トレースを有効にする」を参照してください](/docs/apm/agents/go-agent/instrumentation/distributed-tracing-go-agent)。

    <Callout variant="important">
      分散トレースを有効にすると、 [クロスアプリケーショントレースが無効になります](#cross-application-tracing).
    </Callout>
  </Collapser>

  <Collapser id="dt-exclude-newrelic-header" title="DistributedTracer.ExcludeNewRelicHeader">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            `newrelic.Config` 構造体
          </td>
        </tr>
      </tbody>
    </table>

    アウトバウンドリクエストに添付されたNew Relicヘッダーを除外するには、これを`true`に設定し、ディストリビューティッド（分散）トレーシング用のトレースコンテキストヘッダーにのみ依存します。これが`false`の場合、両方のタイプのヘッダーを使用します。
  </Collapser>
</CollapserGroup>

## スパンイベントの設定 [#span-events]

[スパンイベント](/docs/apm/distributed-tracing/ui-data/span-event) は、 [分散型トレーシング](/docs/agents/java-agent/configuration/java-agent-configuration-config-file#distributed-tracing) で報告されます。スパンイベントを報告するためには、分散トレーシングを有効にする必要があります。これらの設定は、スパンイベントの収集を制御します。

<CollapserGroup>
  <Collapser id="span-events-enabled" title="SpanEvents.Enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            `newrelic.Config` 構造体
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはスパンイベントを収集します。
  </Collapser>

  <Collapser id="span-event-attributes" title="SpanEvents.Attributes">
    <Callout variant="important">
      Go agent version 2.6.0以降で利用可能です。
    </Callout>

    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            構造体
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            有効、除外事項なし
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            `newrelic.Config` 構造体
          </td>
        </tr>
      </tbody>
    </table>

    `SpanEvents.Attributes` 3つのフィールドを持つ構造体です。

    ```go
    Enabled bool
    Include []string
    Exclude []string
    ```

    `SpanEvents.Attributes.Enabled`を使用して、スパンイベントの属性収集を有効または無効にします。`Include`および`Exclude`を使用して、特定の属性を含めたり除外したりします。

    `allSpanAttributeNames`という名前の属性スライスをトレースから除外する例：

    ```go
    app, err := newrelic.NewApplication(
        newrelic.ConfigAppName("Your Application Name"),
        newrelic.ConfigLicense(os.Getenv("NEW_RELIC_LICENSE_KEY")),
        func(config *newrelic.Config) {
            config.TransactionTracer.Segments.Attributes.Exclude = allSpanAttributeNames
        },
    )
    ```
  </Collapser>
</CollapserGroup>

## Infinite Tracingの設定 [#infinite-tracing]

無限トレースを有効にするには、分散トレースを有効にし（ `newrelic.Config`構造体に`config.DistributedTracer.Enabled = true`を設定）、以下に追加の設定を追加します。例については、「 [言語エージェント：分散トレースの構成](/docs/understand-dependencies/distributed-tracing/enable-configure/language-agents-enable-distributed-tracing#go-config)」を参照してください。

<CollapserGroup>
  <Collapser id="trace-observer-host" title="InfiniteTracing.TraceObserver.Host">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ストリング
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            （無し）
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            `newrelic.Config` 構造体
          </td>
        </tr>
      </tbody>
    </table>

    Infinite Tracing トレース オブザーバーのホストエントリを取得する方法については、「[トレースオブザーバーのエンドポイントを検索または作成する](/docs/understand-dependencies/distributed-tracing/enable-configure/language-agents-enable-distributed-tracing#provision-trace-observer)」をご覧ください。
  </Collapser>
</CollapserGroup>

## アプリケーションログ設定 [#application-logging]

エージェントでのアプリケーション ログの構成には、次の設定を使用できます。コンテキストでの Go エージェント ログの使用に関するヒントについては、コンテキストでの[Go ログ を](/docs/logs/logs-context/configure-logs-context-go)参照してください。

<Callout variant="important">
  Goエージェントバージョン3.17.0以降が必要です
</Callout>

<CollapserGroup>
  <Collapser id="application-logging-enabled" title="ApplicationLogging.Enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            `newrelic.Config` 構造体
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、これらのサブ機能構成も有効になっていると、ログイベントとログメトリックの収集が有効になります。`false`の場合、ロギングインストルメンテーション機能は有効になりません。

    `ConfigAppLogEnabled()`を呼び出して ApplicationLogging を構成します。

    ```go
    app, err := newrelic.NewApplication(
        newrelic.ConfigAppLogEnabled(true),
    )
    ```
  </Collapser>

  <Collapser id="application-logging-forwarding-enabled" title="ApplicationLogging.Forwarding.Enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            `newrelic.Config` 構造体
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントはアプリケーションによって発行されたログレコードをキャプチャし、それらをNewRelicに転送します。この設定を有効にするには、 `ApplicationLogging.Enabled`も`true`である必要があります。

    `ConfigAppLogForwardingEnabled()`を呼び出してログ転送を有効にします。

    ```go
    app, err := newrelic.NewApplication(
        newrelic.ConfigAppLogForwardingEnabled(true),
    )
    ```
  </Collapser>

  <Collapser id="application-logging-forwarding-maximum-samples-stored" title="ApplicationLogging.Forwarding.MaxSamplesStored">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            整数
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `10000`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            `newrelic.Config` 構造体
          </td>
        </tr>
      </tbody>
    </table>

    NewRelicに1分あたりに送信するログレコードの数。この設定は、ログ転送機能を使用するときの全体的なメモリ消費を制御します。

    `ConfigAppLogForwardingMaxSamplesStored()`を呼び出して`ApplicationLogging.Forwarding.MaxSamplesStored`を構成します。

    ```go
    app, err := newrelic.NewApplication(
        newrelic.ConfigAppLogForwardingMaxSamplesStored(1000),
    )
    ```

    これをより低い値に設定して、送信されるログラインの量を減らします（ログサンプリングの原因になる場合があります）。これをより高い値に設定すると、より多くのログラインが送信されます。

    各ログは、関連するトランザクションと同じ優先度を受け取ります。トランザクション外で発生したログには、ランダムな優先度が割り当てられます。`MaxSamplesStored`によって制限されているため、一部のログは含まれない場合があります。たとえば、ロギング`MaxSamplesStored`が 10,000 に設定され、トランザクション 1 に 10,000 のログ エントリがある場合、トランザクション 1 のログ エントリのみが記録されます。トランザクション 1 のログが 10,000 未満の場合、トランザクション 1 のすべてのログを受け取ります。まだスペースがある場合は、トランザクション 2 のすべてのログを受け取ります。

    サンプリングされたトランザクションのすべてのログが記録され、それらが`MaxSamplesStored`の制限に達していない場合、サンプリングに含まれていなかったトランザクションのログ メッセージが送信されます。残っている場合は、トランザクション以外のログ メッセージが記録されます。
  </Collapser>

  <Collapser id="application-logging-metrics-enabled" title="ApplicationLogging.Metrics.Enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            `newrelic.Config` 構造体
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、エージェントは、アプリケーションによって送信されているログ行に関連するメトリックをキャプチャします。この設定を有効にするには、 `ApplicationLogging.Enabled`も`true`である必要があります。

    `ConfigAppLogMetricsEnabled()`を呼び出して ApplicationLogging.Metrics.Enabled を構成します。

    ```go
    app, err := newrelic.NewApplication(
        newrelic.ConfigAppLogMetricsEnabled(true),
    )
    ```
  </Collapser>
</CollapserGroup>

## モジュールの依存関係メトリック設定 [#mdm]

モジュールの依存関係メトリックは、Go エージェントでさまざまな方法で構成できます。モジュールの依存関係メトリックは、Go アプリケーションで使用されるインポートされたモジュールのリストを報告し、コードの依存関係の管理を容易にします。アプリのモジュールのバージョン情報も含まれます。

<Callout variant="important">
  Go エージェント バージョン 3.20.0 が必要です以上
</Callout>

<CollapserGroup>
  <Collapser id="mdm-enabled" title="ModuleDependencyMetrics.Enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            `newrelic.Config` 構造体
          </td>
        </tr>
      </tbody>
    </table>

    `true`の場合、モジュールの依存関係データの収集を有効にします。`false`の場合、モジュールの依存関係情報は収集されません。

    `ConfigModuleDependencyMetricsEnabled`を呼び出して ModuleDependencyMetrics を構成します。

    ```go
    app, err := newrelic.NewApplication(
        newrelic.ConfigModuleDependencyMetricsEnabled(true),
    )
    ```

    `NewApplication` への呼び出しに`ConfigFromEnvironment()`を挿入することで、環境変数を介して Go エージェント オプションの設定を有効にすることができます。これを行った場合は、環境変数を設定して、モジュールの依存関係メトリックの収集を有効または無効にすることができます。

    ```ini
    NEW_RELIC_MODULE_DEPENDENCY_METRICS_ENABLED=true
    ```
  </Collapser>

  <Collapser id="mdm-ignored-prefixes" title="ModuleDependencyMetrics.IgnoredPrefixes">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            文字列
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `nil`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            `newrelic.Config` 構造体
          </td>
        </tr>
      </tbody>
    </table>

    このモジュール パス プレフィックスのリストは、エージェントによって報告される依存関係情報から一部のモジュールを除外することを指定します。リストされたプレフィックス文字列のいずれかで始まる`import`パスを持つモジュールはすべて除外されます。デフォルトは空のリストで、見つかったすべてのモジュールを報告することを意味します。

    `ConfigModuleDependencyMetricsIgnoredPrefixes`を呼び出して、除外するパス プレフィックス文字列のリストを指定します。

    ```go
    app, err := newrelic.NewApplication(
        newrelic.ConfigModuleDependencyMetricsIgnoredPrefixes("example.com/packageAlpha", "example.com/packageBeta"),
    )
    ```

    `NewApplication` への呼び出しに`ConfigFromEnvironment()`を挿入して、環境変数を介して Go エージェント オプションの設定を有効にした場合は、環境変数を設定してパス プレフィックスを一覧表示できます。

    ```ini
    NEW_RELIC_MODULE_DEPENDENCY_METRICS_IGNORED_PREFIXES="example.com/packageAlpha,example.com/packageBeta"
    ```
  </Collapser>

  <Collapser id="mdm-redact-ignored-prefixes" title="ModuleDependencyMetrics.RedactIgnoredPrefixes">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [始まる](#options)
          </th>

          <td>
            `newrelic.Config` 構造体
          </td>
        </tr>
      </tbody>
    </table>

    通常、エージェント構成の一部として設定したすべてのオプションが報告され、New Relic UI に表示されます。`ConfigModuleDependencyIgnoredPrefixes`オプションを使用して一部のモジュールをレポートから除外することを選択した場合は、それらを構成データから編集することもできます。たとえば、機密保持のためにモジュールが除外された場合などです。

    `ConfigModuleDependencyMetricsRedactIgnoredPrefixes`を呼び出して、除外されたパスのリダクションを有効または無効にします。`true`の場合、除外されたモジュール接頭辞のリストは報告されません。`false`の場合、それらは報告されます。

    ```go
    app, err := newrelic.NewApplication(
        newrelic.ConfigModuleDependencyMetricsRedactIgnoredPrefixes(false),
    )
    ```

    `NewApplication` への呼び出しに`ConfigFromEnvironment()`を挿入して、環境変数を介して Go エージェント オプションの設定を有効にした場合は、環境変数を設定してパス プレフィックスを一覧表示できます。

    ```ini
    NEW_RELIC_MODULE_DEPENDENCY_METRICS_REDACT_IGNORED_PREFIXES=false
    ```
  </Collapser>
</CollapserGroup>

## New Relic IAST [#go-IAST]

[New Relic Interactive application Security Testing](/docs/iast/introduction/) ( IAST ) は、脆弱なペイロードを使用して生成された HTTP リクエストを再生することにより、悪用可能な脆弱性についてアプリケーションをテストします。 INIT 関数に渡される設定を使用して Go アプリ コードを更新することで、 New Relic IASTを有効にすることができます。 これらの設定は、YAML ファイルまたは環境変数を使用して行うこともできます。

INIT 関数を使用して設定されたオプションは、環境または YAML 構成よりも優先されます。ただし、これらの設定は環境内の他のエージェントに渡されるため、YAML ファイルを使用してIASTを有効にすることをお勧めします。

### セットアップ手順

次の直接依存関係を`go.mod`ファイルに追加して、統合をインポートします。

```go
import "github.com/newrelic/go-agent/v3/integrations/nrsecurityagent"
```

次に、セキュリティ エージェントを初期化して有効にします。

### IASTを有効にする

<CollapserGroup>
  <Collapser id="iast-option" title="オプション機能で有効にする">
    ```go
    err: = nrsecurityagent.InitSecurityAgent(
        app,
        nrsecurityagent.ConfigSecurityMode("IAST"),
        nrsecurityagent.ConfigSecurityValidatorServiceEndPointUrl("wss://csec.nr-data.net"),
        nrsecurityagent.ConfigSecurityEnable(true),
    )
    ```
  </Collapser>

  <Collapser id="iast-enviro" title="環境変数で有効にする">
    ConfigSecurityFromEnvironment は、nrsecurityagent 統合に、そのすべての設定情報を環境変数から取得するように指示します。

    ```go
     err: = nrsecurityagent.InitSecurityAgent(
         app,
         ConfigSecurityFromEnvironment(),
     )
    ```
  </Collapser>

  <Collapser id="iast-yaml" title="YAMLファイルから有効化">
    ConfigSecurityFromYaml は、nrsecurityagent 統合に、外部 YAML 形式のファイルを読み取ってその設定値を取得するように指示します。 このファイルへのパスは、環境変数 NEW\_RELIC\_SECURITY\_CONFIG\_PATH を設定して提供する必要があります。

    ```go
    err: = nrsecurityagent.InitSecurityAgent(
        app,
        ConfigSecurityFromYaml(),
    )
    ```

    デフォルトの YAML ファイルは次のようになります。

    ```yaml
    enabled: true

    # NR security provides two modes IAST and RASP
    # Default is IAST
    mode: IAST

    # New Relic’s SaaS connection URLs
    validator_service_url: wss://csec.nr-data.net

    # Following category of security events
    # can be disabled from generating.
    detection:
      rxss:
        enabled: true
    request:
      body_limit: 300
    ```
  </Collapser>
</CollapserGroup>

### IASTを構成する

セキュリティ エージェントは次のオプションを使用して構成できます。

<CollapserGroup>
  <Collapser id="cfg-security-agent-enabled" title="cfg.Security.Agent.Enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            設定機能
          </th>

          <td>
            ```go
            func(cfg *SecurityConfig) {
                cfg.Security.Agent.Enabled = true
            }
            ```
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SECURITY_AGENT_ENABLED`
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    すべてのセキュリティ機能を完全に無効にするには、このフラグを false に設定します。go でセキュリティ エージェントをインポートして初期化すると、それを使用することが想定されるため、この値はデフォルトで`true`になります。これは、自動的にインストゥルメントされたエージェントとは逆の動作であることに注意してください。 このプロパティは、アプリケーションの起動時に 1 回だけ読み取られます。
  </Collapser>

  <Collapser id="cfg-security-enabled" title="cfg.Security.Enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            設定機能
          </th>

          <td>
            `nrsecurityagent.ConfigSecurityEnable(false)`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SECURITY_ENABLED`
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    New Relicにセキュリティデータを送信するかどうかを決定します。これが無効で、agent.enabledがtrueの場合、セキュリティモジュールは実行されますが、データは送信されません。デフォルトはfalseです。
  </Collapser>

  <Collapser id="cfg-security-mode" title="cfg.Security.Mode">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            設定機能
          </th>

          <td>
            `nrsecurityagent.ConfigSecurityMode("IAST")`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SECURITY_MODE`
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `IAST`
          </td>
        </tr>
      </tbody>
    </table>

    New Relicセキュリティにはモード、IASTがあります。デフォルトはIASTです。IASTスキャンは侵襲性であるため、実稼働環境または実稼働データが処理される環境でこのモードを有効にしないでください。
  </Collapser>

  <Collapser id="cfg-security-validator-service-url" title="cfg.Security.Validator_service_url">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            弦
          </td>
        </tr>

        <tr>
          <th>
            設定機能
          </th>

          <td>
            `nrsecurityagent.ConfigSecurityValidatorServiceEndPointUrl("wss://csec.nr-data.net")`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SECURITY_VALIDATOR_SERVICE_URL`
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `wss://csec.nr-data.net`
          </td>
        </tr>
      </tbody>
    </table>

    New RelicセキュリティのSaaS接続のURL。これは、Securityエージェントがデータを送信するエンドポイントであり、APM Javaエージェント用に設定した環境と一致する必要があります。

    米国の実稼働環境：wss\://csec.nr-data.net
  </Collapser>

  <Collapser id="cfg-security-detection-rxss-enabled" title="cfg.Security.Detection.Rxss.Enabled">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            ブール値
          </td>
        </tr>

        <tr>
          <th>
            設定機能
          </th>

          <td>
            `nrsecurityagent.ConfigSecurityDetectionDisableRxss(true)`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SECURITY_DETECTION_RXSS_ENABLED`
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    RXSSセキュリティイベント検出を有効にします。デフォルトはtrueです。
  </Collapser>

  <Collapser id="cfg-security-request-body-limit" title="cfg.Security.Request.BodyLimit">
    <table>
      <tbody>
        <tr>
          <th>
            タイプ
          </th>

          <td>
            Int
          </td>
        </tr>

        <tr>
          <th>
            設定機能
          </th>

          <td>
            `nrsecurityagent.ConfigSecurityRequestBodyLimit(300)`
          </td>
        </tr>

        <tr>
          <th>
            環境変数
          </th>

          <td>
            `NEW_RELIC_SECURITY_REQUEST_BODY_LIMIT`
          </td>
        </tr>

        <tr>
          <th>
            デフォルト
          </th>

          <td>
            300
          </td>
        </tr>
      </tbody>
    </table>

    セキュリティ リクエスト ボディ制限は、リクエスト ボディから読み取るときに消費できるメモリ量を KB 単位で制限します。デフォルトでは「300」です。
  </Collapser>

  ### アプリケーションのセキュリティに敏感な部分を計装する

  `nrgin` 、 `nrgrpc` 、 `nrmicro` 、 `fasthttp` 、または`nrmongo`統合には、処理するデータのセキュリティ分析をサポートするコードが含まれるようになりました。

  さらに、Go エージェントは、データストア セグメント、SQL 操作、トランザクション、ラップされた HTTP 呼び出しとエンドポイントを含むインストゥルメントで示されたコードに対して脆弱性スキャンを実行します。
</CollapserGroup>