---
title: エージェントロギングへ
tags:
  - Agents
  - Go agent
  - Configuration
metaDescription: You can set up several logging levels for your New Relic Go agent; this is useful for troubleshooting your New Relic Golang integration.
freshnessValidatedDate: never
translationType: machine
---

[New Relic for Go](/docs/agents/go-agent/get-started/new-relic-go)ロギングは、標準の[Goログパッケージ](https://golang.org/pkg/log/)とNewRelic `Logger`パッケージを使用します。ロギングは、NewRelic統合の[トラブルシューティング](/docs/agents/go-agent/troubleshooting/no-data-appears-go)に役立ちます。たとえば、[インストール](/docs/agents/go-agent/get-started/install-new-relic-go)や[構成](/docs/agents/go-agent/instrumentation/go-agent-configuration)の問題があります。

## ログファイルの書き込み [#write-logfiles]

Go エージェントのメソッドを使用してログ ファイルと監査ファイルを書き込むには、 [エージェントの GitHub リポジトリの log.go を](https://github.com/newrelic/go-agent/blob/20541a9393ae651949eb75b82666d4a7c2a10dec/v3/newrelic/log.go)参照してください。

## Logrus 統合 [#logrus]

New Relic 、さまざまなユースケースに対応する 2 つの Logrus 統合を提供します。

### エージェントのログ記録 (Go エージェントのデバッグ メッセージ用) [#agent-logging]

この統合を使用して、Go エージェントの内部ログメッセージを Logrus に送信します。 これはエージェント自体のトラブルシューティングに役立ちます。

**統合:** [`nrlogrus`](https://github.com/newrelic/go-agent/tree/master/v3/integrations/nrlogrus)

以下は、エージェント ロギングにNew Relic Logrus インテグレーションを使用する例です。

1. 必要なパッケージをインポートします。

   ```go
   import (
       "os"

       "github.com/newrelic/go-agent/v3/integrations/nrlogrus"
       "github.com/newrelic/go-agent/v3/newrelic"
       "github.com/sirupsen/logrus"
   )
   ```

2. エージェント ログに Logrus を使用するように Go エージェントを構成します。

   ```go
   app, err := newrelic.NewApplication(
       newrelic.ConfigAppName("Your Application Name"),
       newrelic.ConfigLicense(os.Getenv("NEW_RELIC_LICENSE_KEY")),
       func(config *newrelic.Config) {
           logrus.SetLevel(logrus.DebugLevel)
           config.Logger = nrlogrus.StandardLogger()
       },
   )
   ```

### アプリケーションログ (コンテキスト内のログ) [#application-logging]

この統合を使用して、自動トレース相関を使用してアプリケーションの Logrus ログメッセージをNew Relicに送信します。 これにより、[コンテキスト内でのログ](/docs/logs/logs-context/configure-logs-context-go/)が有効になり、アプリのUIでエラーやトレースに関連するログメッセージを直接確認できるようになります。

**統合:** [`logcontext-v2/nrlogrus`](https://github.com/newrelic/go-agent/tree/master/v3/integrations/logcontext-v2/nrlogrus)

以下は、アプリケーションのロギングにNew Relic Logrus インテグレーションを使用する例です。

1. 必要なパッケージをインポートします。

   ```go
   import (
       "context"
       "os"

       "github.com/newrelic/go-agent/v3/integrations/logcontext-v2/nrlogrus"
       "github.com/newrelic/go-agent/v3/newrelic"
       "github.com/sirupsen/logrus"
   )
   ```

2. New Relic Formatter を使用するように Logrus を設定します。

   ```go
   app, err := newrelic.NewApplication(
       newrelic.ConfigAppName("Your Application Name"),
       newrelic.ConfigLicense(os.Getenv("NEW_RELIC_LICENSE_KEY")),
       newrelic.ConfigAppLogForwardingEnabled(true),
   )

   logger := logrus.New()
   logger.SetFormatter(nrlogrus.NewFormatter(app, &logrus.TextFormatter{}))
   ```

3. トランザクション コンテキストを使用してアプリケーションでロガーを使用します。

   ```go
   txn := app.StartTransaction("myTransaction")
   defer txn.End()

   ctx := newrelic.NewContext(context.Background(), txn)
   logger.WithContext(ctx).Info("This log will be correlated with the transaction")
   ```

その他の例については、 [logcontext-v2/nrlogrus の例を](https://github.com/newrelic/go-agent/tree/master/v3/integrations/logcontext-v2/nrlogrus/example)参照してください。

## その他サポートされているロギング統合 [#other-integrations]

Logrus に加えて、 New Relic他のいくつかの人気のある Go ロギング ライブラリの統合を提供します。

### エージェントロギング統合 [#other-agent-logging]

これらの統合により、Go エージェントの内部デバッグ メッセージがロギング フレームワークに送信されます。

* **[nrzap](https://github.com/newrelic/go-agent/tree/master/v3/integrations/nrzap)** - Uber の Zap ロガーとの統合
* **[nrslog](https://github.com/newrelic/go-agent/tree/master/v3/integrations/nrslog)** - Go の標準ライブラリ`log/slog`パッケージとの統合
* **[nrzerolog](https://github.com/newrelic/go-agent/tree/master/v3/integrations/nrzerolog)** - Zerolog との統合
* **[nrlogxi](https://github.com/newrelic/go-agent/tree/master/v3/integrations/nrlogxi)** - Logxi との統合

### コンテキスト内のログの統合 [#other-logs-context]

これらの統合により、アプリケーション ログのコンテキスト内のログが有効になります。

* **[logcontext-v2/zerologWriter](https://github.com/newrelic/go-agent/tree/master/v3/integrations/logcontext-v2/zerologWriter)** - トレース相関を使用して Zerolog ログメッセージを New Relic に送信します
* **[logcontext-v2/logWriter](https://github.com/newrelic/go-agent/tree/master/v3/integrations/logcontext-v2/logWriter)** - 標準ライブラリ`log`パッケージのメッセージをトレース相関とともに New Relic に送信します。

各統合は、上記の Logrus の例と同様のパターンに従います。 詳細な使用手順と例については、それぞれの GitHub リポジトリを参照してください。

## APMおよびインフラストラクチャデータのログを表示 [#logs-context]

[コンテキスト内でログを](/docs/logs/logs-context/configure-logs-context-go/)使用すると、アプリのUIでエラーやトレースに関連するログメッセージを直接確認できます。 Kubernetesクラスタなどのインフラ[ストラクチャ データ](/docs/logs/forward-logs/forward-your-logs-using-infrastructure-agent/)のコンテキストでログを確認することもできます。 別の UI ページに切り替える必要はありません。

コンテキスト内のログを有効にするには、上記の[ログ イン コンテキスト統合の](#other-logs-context)いずれかを使用します。 特に Logrus については、 [`logcontext-v2/nrlogrus`](#application-logging)統合をご覧ください。