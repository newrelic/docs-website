---
title: Node.jsエージェントの更新
tags:
  - Agents
  - Nodejs agent
  - Installation and configuration
metaDescription: 'How to update your APM Node.js agent, and notes on EOL support for early agent versions.'
freshnessValidatedDate: never
translationType: machine
---

New Relic エージェントは[セマンティック バージョニング](https://semver.org/)に従って、メジャー バージョン リリースに重大な変更が含まれていることを示します。メジャー バージョンでは、メンテナーの規定によりサポート終了となった言語ランタイムのサポートが中止される場合があります。さらに、メジャー バージョンではサポートが終了し、特定の計装が削除される場合があります。

New Relic の最新の機能、拡張機能、重要なセキュリティパッチを最大限に活用するために、Node.js エージェントを最新バージョンにアップデートすることをお勧めします。特定のエージェントのアップデートに関する詳細については、 [Node.js エージェントのリリースノート](/docs/release-notes/agent-release-notes/nodejs-release-notes) を参照してください。リリースノートには、該当する場合にはダウンロードリンクと、最新バージョンをダウンロードして [インストールするための手順が記載されています](/docs/agents/nodejs-agent/installation-configuration/install-nodejs-agent) 。

* `newrelic`モジュールが`package.json`にリストされている場合は、 `npm install`を実行します。
* `newrelic`モジュールのみをターゲットにする場合は、 `npm update newrelic`を実行します。

推奨事項: 更新されたバージョンを本番環境に移行する前にテストしてください。 問題が発生した場合は、Node.js エージェントの[トラブルシューティング手順](/docs/agents/nodejs-agent/troubleshooting/troubleshooting-your-nodejs-installation)に従ってください。

エージェントをアンインストールして特定のバージョンのエージェントをインストールする必要がある場合は、このアンインストール[ガイド](/docs/apm/agents/nodejs-agent/installation-configuration/uninstall-nodejs-agent/)に従ってから、 `npm install newrelic@LIST_VERSION_HERE`を使用して特定のバージョンのエージェントを再インストールするか、package.json でバージョンを更新して`npm install`を実行します。

## Node.jsエージェント バージョン 13 にアップグレードする [#node-agent-v13]

Node.js バージョン 13 にアップグレードする前に、主な変更点についてこの情報を確認してください。

<table>
  <thead>
    <tr>
      <th style={{ width: "250px" }}>
        <DNT>
          **Major changes with Node.js agent v13**
        </DNT>
      </th>

      <th>
        <DNT>
          **Comments**
        </DNT>
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        <DNT>**BREAKING**</DNT>: Node.js 18 のサポートを廃止しました。
      </td>

      <td>
        * 詳細については、当社の [サポートポリシー](/docs/agents/nodejs-agent/getting-started/compatibility-requirements-nodejs-agent) をご覧ください。
      </td>
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>: `fastify`の最小サポートバージョンを 3.0.0 に更新しました。`pino`を 8.0.0 に、 `koa-router`を 12.0.0 にアップグレードします。
      </td>
    </tr>

    <tr>
      <td>
        新しいAWS Bedrock API を使用して AI モニタリングの互換性ドキュメントを更新しました
      </td>
    </tr>
  </tbody>
</table>

## Node.jsエージェント バージョン 12 にアップグレードする [#node-agent-v12]

Node.js バージョン 12 にアップグレードする前に、主な変更点についてこの情報を確認してください。

kafkajs 計装にプロデューサーとコンシューマーのメトリクスを追加しました

`@newrelic/native-metrics`を 11.0.0 に更新しました

MySQL host:port メトリクスが記録されていることを確認

<table>
  <thead>
    <tr>
      <th style={{ width: "250px" }}>
        <DNT>
          **Major changes with Node.js agent v12**
        </DNT>
      </th>

      <th>
        <DNT>
          **Comments**
        </DNT>
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        <DNT>**BREAKING**</DNT>: Node.js 16 のサポートを廃止しました。
      </td>

      <td>
        * 詳細については、当社の [サポートポリシー](/docs/agents/nodejs-agent/getting-started/compatibility-requirements-nodejs-agent) をご覧ください。
      </td>
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>: レガシーコンテキストマネージャーを削除しました。
      </td>
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>: `redis <2.6.0`のサポートが削除されました。
      </td>

      <td />
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>: `director`の計装を削除しました。
      </td>
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>: バージョン 2 と 3 のサポートを終了するために`mongodb`計装を更新しました。
      </td>

      <td />
    </tr>

    <tr>
      <td>
        amqplib スパンに server.address を追加しました。
      </td>
    </tr>

    <tr>
      <td>
        次の計装をエージェントに移行しました。
      </td>

      <td>
        `@newrelic/next`経由でNext.js計装 をロードする必要はなくなりました。 代わりに、 `NODE_OPTIONS='-r newrelic' next start`経由でエージェントをロードする必要があります。
      </td>
    </tr>

    <tr />

    <tr>
      <td />
    </tr>

    <tr />
  </tbody>
</table>

## Node.js エージェント バージョン 11 へのアップグレード [#node-agent-v11]

Node.js バージョン 11 にアップグレードする前に、大きな変更点がないかこの情報を確認してください。

<table>
  <thead>
    <tr>
      <th style={{ width: "250px" }}>
        <DNT>
          **Major changes with Node.js agent v11**
        </DNT>
      </th>

      <th>
        <DNT>
          **Comments**
        </DNT>
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        Node.js 20 の公式パリティ サポートを追加しました。
      </td>

      <td />
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>: Node.js 14 のサポートを廃止しました。
      </td>

      <td>
        * 詳細については、当社の [サポートポリシー](/docs/agents/nodejs-agent/getting-started/compatibility-requirements-nodejs-agent) をご覧ください。
      </td>
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>: ESM ローダーを更新して Node.js 20 をサポートしました。
      </td>

      <td>
        * アプリケーションを実行するときは、 `--experimental-loader` 引数と `-r` 引数の両方を使用する必要があります。
        * `node --experimental-loader newrelic/esm-loader.mjs -r newrelic path/to/app.js`
      </td>
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>: デフォルトのコンテキスト マネージャーを AsyncLocalContextManager に更新しました。
      </td>

      <td>
        * 以前のデフォルトの LegacyContextManager は、 `config.feature_flag.legacy_context_manager` の機能フラグを `true`に設定することで復元できます。
        * 環境変数を使用したい場合は、 `NEW_RELIC_FEATURE_FLAG_LEGACY_CONTEXT_MANAGER` を `true`に設定できます。
        * このコンテキスト マネージャーは将来のバージョンでは削除される予定であることに注意してください。この従来のコンテキスト マネージャーの使用に戻す必要がある場合は、 [New Relic サポート](https://support.newrelic.com/s/) または [GitHub の問題](https://github.com/newrelic/node-newrelic/issues/new?assignees=&labels=bug%2C+needs-triage&projects=&template=bug_report.md&title=)に報告してください。
      </td>
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>: `shim.handleCATHeaders`の名前を`shim.handleMqTracingHeaders`に変更しました。
      </td>

      <td />
    </tr>

    <tr>
      <td>
        New Relic の依存関係を、Node.js バージョンのサポートが更新されたバージョンに更新する
      </td>

      <td>
        * @newrelic/aws-sdk v7.0.0
        * @newrelic/koa v8.0.0
        * @newrelic/native-metrics v10.0.0
        * @newrelic/スーパーエージェント v7.0.0
        * @newrelic/test-utilities v8.0.0
      </td>
    </tr>
  </tbody>
</table>

## Node.jsバージョンのサポート [#node-support-v11]

Node.js 16 は、New Relic Node.js v11 エージェントでサポートされる最も古いバージョンです。Node.js 14 および 15 は v11 ではサポートされていません。Node.js 15 以前を実行しているお客様には、次の 2 つのオプションがあります。

* サポートされているバージョンの Node.js にアップグレードし、New Relic Node.js v11 エージェントの新機能を活用してください。
* New Relic Node.js v10 エージェントを使用し続けますが、エージェント バージョンの更新でのみ利用できる新機能は使用できません。

<Callout variant="tip">
  できるだけ早く Node.js の新しいバージョンにアップグレードしてください。New Relic Node.js エージェントの次のメジャー バージョンでは、Node.js 16 のサポートが削除される可能性があります。
</Callout>

## Node.js エージェント バージョン 10 へのアップグレード [#node-agent-v10]

Node.js バージョン 10 にアップグレードする前に、大きな変更点がないかこの情報を確認してください。

<table>
  <thead>
    <tr>
      <th style={{ width: "250px" }}>
        <DNT>
          **Major changes with Node.js agent v11**
        </DNT>
      </th>

      <th>
        <DNT>
          **Comments**
        </DNT>
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        * 同じ解決された moduleName に対して複数のインストルメンテーション フック (onRequire、onResolved) を登録する機能が追加されました。
      </td>

      <td>
        * これは最初からエージェントの制限でした。
        * API を使用して api.instrument、api.instrumentDatastore、api.instrumentWebframework、api.instrumentMessages、または api.instrumentConglomerate を計測した場合、既存の計測フックがオーバーライドされます。
        * その結果、Node.js エージェントが設計どおりに機能しなくなります。
      </td>
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>: `config.transaction_tracer.record_sql`のデフォルトをオフから難読化に更新しました。 つまり、SQL ステートメントはキャプチャされますが、難読化されます。
      </td>
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>: ルート (URL) 構造体は、トランザクション、ルート セグメント、およびスパンの`request.parameters.route.*`属性として保存されるようになりました。
      </td>

      <td>
        * クエリ パラメーターは、request.parameters.\* というプレフィックスが付いた属性として使用できます。トランザクションとスパンについて。
        * ルート パラメーターは、request.parameters.route.\* というプレフィックスが付いた属性として使用できます。トランザクションとスパンについて。
        * ルート パラメーター (別名 URL パラメーター) はさまざまな Web フレームワークの共通機能であり、API ルート定義の一部としてプレースホルダーを作成できます。
      </td>
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>: WebFrameworkShim クラスから captureUrlParams を削除しました。
      </td>
    </tr>

    <tr>
      <td>
        <DNT>**DEPRECATION NOTICE**</DNT>: 複数回ラップされたアイテムをアンラップしようとすると、shim.unwrap と shim.unwrapOnce は機能しなくなります。
      </td>

      <td>
        * これは、同じモジュールを複数回インストゥルメントできるようになったので、登録されているすべてのインスツルメンテーションを破壊せずに安全にラップを解除することができないためです。次のメジャー リリースでは shim.unwrap と shim.unwrapOnce を削除する予定です。
      </td>
    </tr>

    <tr>
      <td>
        New Relic の依存関係を、Node.js バージョンのサポートが更新されたバージョンに更新する
      </td>

      <td>
        * @newrelic/aws-sdk v7.0.0
        * @newrelic/koa v8.0.0
        * @newrelic/native-metrics v10.0.0
        * @newrelic/スーパーエージェント v7.0.0
        * @newrelic/test-utilities v8.0.0
      </td>
    </tr>
  </tbody>
</table>

## Node.jsバージョンのサポート [#node-support-v10]

Node.js 14 は、New Relic Node.js v10 エージェントでサポートされる最も古いバージョンです。Node.js 12 および 13 は v10 ではサポートされていません。Node.js 13 以前を実行しているお客様には、次の 2 つのオプションがあります。

* サポートされているバージョンの Node.js にアップグレードし、New Relic Node.js v10 エージェントの新機能を活用してください。
* アップデート エージェント バージョンでのみ利用可能な新機能を使用する機能なしで、New Relic Node.js v8 エージェントにとどまります。

<Callout variant="tip">
  できるだけ早く Node.js の新しいバージョンにアップグレードしてください。New Relic Node.js エージェントの次のメジャー バージョンでは、Node.js 14 のサポートが削除される可能性があります。
</Callout>

## Node.js エージェント バージョン 9 にアップグレードする [#node-agent-v9]

Node.js バージョン 9 にアップグレードする前に、主な変更点についてこの情報を確認してください。

<table>
  <thead>
    <tr>
      <th style={{ width: "250px" }}>
        <DNT>
          **Major changes with Node.js agent v9**
        </DNT>
      </th>

      <th>
        <DNT>
          **Comments**
        </DNT>
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        Node.js 18 の公式パリティ サポートが追加されました。
      </td>

      <td />
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>: Node.js 12 のサポートを廃止しました。
      </td>

      <td>
        * 詳細については、当社の [サポートポリシー](/docs/agents/nodejs-agent/getting-started/compatibility-requirements-nodejs-agent) をご覧ください。
      </td>
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>: エージェントは、「証明書」設定 (通常はプロキシを使用) を使用するときに、 New Relic証明書バンドルを自動的に含めなくなりました。
      </td>

      <td>
        * 「証明書」構成 (通常はプロキシを使用) を使用する場合、エージェントには New Relic 証明書バンドルが含まれなくなりました。これにより現在の環境が破壊される場合は、Mozilla から提供されているような CA バンドルを入手することをお勧めします。
      </td>
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>: エージェントは、仕様およびその他のエージェントに準拠するために、ポート443への外部HTTPSリクエストを行う際にポートを除外するようになりました。
      </td>

      <td>
        * デフォルトの HTTPS ポートを使用する場合、以前の外部セグメントは`External/example.com:443`という名前になります。
        * 外部セグメントの名前は`External/example.com`になります。
      </td>
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>: `await_support`機能フラグを介して非同期フックベースの Promise コンテキスト追跡を無効にする機能が削除されました。 これにより、レガシー プロミス インストゥルメンテーションも削除されます。
      </td>

      <td>
        * `await_support`機能フラグをリリースしました。エージェントは、async\_hooks に依存して async promise の伝播を追跡するようになりました。最終的な結果は、 `feature_flag.await_support`を false に設定した場合、レガシー インストルメンテーションは promise チェーン内のすべての関数を個別のセグメントとして追跡します。
      </td>
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>: 廃止された[oracle](https://www.npmjs.com/package/oracle) npm パッケージのインストゥルメンテーションを削除しました。
      </td>

      <td />
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>: `pg`の最小バージョンを 8.2.x に更新しました。 これは、Node.js 14 以降で実行される最も古いサポート バージョンです。
      </td>

      <td />
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>: hapi の最小サポートバージョンを v20.0.0 に更新しました。
      </td>

      <td>
        * v20.0.0 より前のすべてのバージョンは、セキュリティ上の理由から、hapi によって非推奨になっています。[サポート ポリシーを参照して](https://hapi.dev/policies/support/)ください。
      </td>
    </tr>

    <tr>
      <td>
        New Relic の依存関係を、Node.js バージョンのサポートが更新されたバージョンに更新する
      </td>

      <td>
        * @newrelic/aws-sdk v5.0.0
        * @newrelic/koa v7.0.0
        * @newrelic/native-metrics v9.0.0
        * @newrelic/superagent v6.0.0
        * @newrelic/test-utilities v7.0.0
      </td>
    </tr>
  </tbody>
</table>

## Node.jsバージョンのサポート [#node-support-v9]

Node.js 14 は、New Relic Node.js v9 エージェントでサポートされている最も古いバージョンです。Node.js 12 および 13 は v9 ではサポートされていません。Node.js 13 以前を実行しているお客様には、次の 2 つのオプションがあります。

* サポートされているバージョンの Node.js にアップグレードして、New Relic Node.js v9 エージェントの新機能を活用してください。
* アップデート エージェント バージョンでのみ利用可能な新機能を使用する機能なしで、New Relic Node.js v8 エージェントにとどまります。

<Callout variant="tip">
  できるだけ早く Node.js の新しいバージョンにアップグレードしてください。New Relic Node.js エージェントの次のメジャー バージョンでは、Node.js 14 のサポートが削除される可能性があります。
</Callout>

## Node.jsエージェントバージョン8へのアップグレード [#node-agent-v8]

Node.jsのバージョン8にアップグレードする前に、主要な変更点についてこの情報を確認してください。

<table>
  <thead>
    <tr>
      <th style={{ width: "250px" }}>
        <DNT>
          **Major changes with Node.js agent v8**
        </DNT>
      </th>

      <th>
        <DNT>
          **Comments**
        </DNT>
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        Node.js 16 の公式パリティ サポートが追加されました。
      </td>

      <td />
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>: Node.js v10.x のサポートを廃止しました。
      </td>

      <td>
        * 詳細については、当社の [サポートポリシー](/docs/agents/nodejs-agent/getting-started/compatibility-requirements-nodejs-agent) をご覧ください。
      </td>
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>: 機能フラグとして`serverless_mode`を削除しました。
      </td>

      <td>
        * 標準の`serverless_mode`構成はまだ存在します。
      </td>
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>: &apos;certificates&apos; 設定 (通常はプロキシを使用) を使用する場合、エージェントにはNew Relic証明書バンドルが自動的に含まれなくなりました。
      </td>

      <td>
        * これにより現在の環境が壊れていることがわかった場合は、機能フラグを利用して、この機能を一時的に復元できます。構成例: `feature_flag: { certificate_bundle: true }` 。この場合、Mozilla などの環境用の証明書バンドルを取得することをお勧めします。New Relic バンドルと機能フラグは、次のメジャー リリースで完全に削除されます。
        * config.feature\_flags.certificate\_bundleのデフォルトをfalseに設定しました。
      </td>
    </tr>

    <tr>
      <td>
        New Relic Dependencies を更新された Node.js バージョンのサポートを含むバージョンに更新する
      </td>

      <td>
        * @newrelic/aws-sdk v4.0.1
        * @newrelic/koa v6.0.1
        * @newrelic/native-metrics v7.0.1
        * newrelic/superagent v5.0.1
        * @newrelic/test-utilities v6.0.0
      </td>
    </tr>
  </tbody>
</table>

## Node.jsバージョンのサポート [#node-support-v8]

Node.js v12 は、New Relic Node.js v8 エージェントでサポートされている最も古いバージョンです。Node.js 10 および 11 は v8 ではサポートされていません。Node.js 11 以前を実行しているお客様には、次の 2 つのオプションがあります。

* サポートされているバージョンの Node.js にアップグレードして、New Relic Node.js v8 エージェントの新機能を活用してください。
* New Relic Node.js v7エージェントのままでは、エージェントのバージョンを更新した場合にのみ利用できる新機能を使用することができません。

<Callout variant="tip">
  できるだけ早く Node.js の新しいバージョンにアップグレードしてください。New Relic Node.js エージェントの次のメジャー バージョンでは、Node.js 12 のサポートが削除される可能性があります。
</Callout>

## Node.jsエージェントバージョン7へのアップグレード [#node-agent-v7]

Node.jsのバージョン7にアップグレードする前に、主要な変更点についてこの情報を確認してください。

<table>
  <thead>
    <tr>
      <th style={{ width: "250px" }}>
        <DNT>
          **Major changes with Node.js agent v7**
        </DNT>
      </th>

      <th>
        <DNT>
          **Comments**
        </DNT>
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        <DNT>**BREAKING**</DNT> 非推奨の`httpResponseCode` 、 `response.status` 、 `httpResponseMessage` HTTP レスポンス属性を削除しました
      </td>

      <td>
        * <DNT>**v6.4.2-v6.14.0:**</DNT> エージェント v6.4.2 以降、これらの属性は非推奨としてマークされましたが、新しい属性への移行期間を設けるために残されました。
        * <DNT>**v7:**</DNT> http 応答属性レポートが有効になっている場合、 `http.statusCode`と`http.statusText`レポートされます。
      </td>
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT> 非推奨の`setIgnoreTransaction` API メソッドを削除しました
      </td>

      <td>
        * <DNT>**v5 - v6:**</DNT> エージェント v5.0.0 以降、このメソッドは非推奨としてマークされましたが、新しいメソッドへの移行期間を設けるために残されました。
        * <DNT>**v7:**</DNT> アプリケーションは API メソッド[`transactionHandle.ignore()`](https://newrelic.github.io/node-newrelic/TransactionHandle.html#ignore)を使用する必要があります。
      </td>
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT> `api.custom_parameters_enabled`設定項目と関連する環境変数`NEW_RELIC_API_CUSTOM_PARAMETERS`を削除しました。
      </td>

      <td>
        * [`newrelic.addCustomAttribute`](https://newrelic.github.io/node-newrelic/API.html#addCustomAttribute)と[`newrelic.addCustomAttributes`](https://newrelic.github.io/node-newrelic/API.html#addCustomAttributes)を有効にするには、アプリケーションは設定[`api.custom_attributes_enabled`または関連する環境変数`NEW_RELIC_API_CUSTOM_ATTRIBUTES`](/docs/agents/nodejs-agent/installation-configuration/nodejs-agent-configuration/#custom-attributes)を使用する必要があります。
      </td>
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT> 非推奨のディストリビューティッド（分散）トレーシングAPIメソッド`createDistributedTracePayload()`と `acceptDistributedTracePayload()`
      </td>

      <td>
        * <DNT>**v6.4.0-v6.14.0:**</DNT> エージェント v6.4.0 以降、これらのメソッドは非推奨としてマークされましたが、新しいメソッドへの移行期間を設けるために残されました。
        * <DNT>**v7:**</DNT> アプリケーションは API メソッド[`transactionHandle.insertDistributedTraceHeaders(headers)`](https://newrelic.github.io/node-newrelic/TransactionHandle.html#insertDistributedTraceHeaders)と[`transactionHandle.acceptDistributedTraceHeaders(transportType, headers) `](https://newrelic.github.io/node-newrelic/TransactionHandle.html#acceptDistributedTraceHeaders)を使用する必要があります。 これらのメソッドを使用すると、Node.js エージェントは、`transactionHandle.acceptDistributedTraceHeaders(headers)` を呼び出すときに W3C の `traceparent` ヘッダーと `tracestate` ヘッダーを受け入れ、`transactionHandle.insertDistributedTraceHeaders(headers)` を呼び出すときにNew Relic （分散）トレーシング ヘッダーとともに W3C ヘッダーを含めるようになります。ただし、 New Relicヘッダー形式が[`distributed_tracing.exclude_newrelic_header:true` を使用して無効になっている場合を除きます。](/docs/agents/nodejs-agent/installation-configuration/nodejs-agent-configuration/#dt-exclude-newrelic-header)
      </td>
    </tr>

    <tr>
      <td>
        New Relic Dependencies を更新された Node.js バージョンのサポートを含むバージョンに更新する
      </td>

      <td>
        * @newrelic/aws-sdk v3.0.0
        * @newrelic/koa v5.0.0
        * @newrelic/native-metrics v6.0.0
        * @newrelic/superagent v4.0.0
        * @newrelic/test-utilities v5.0.0
      </td>
    </tr>
  </tbody>
</table>

## Node.jsバージョンのサポート [#node-support-v7]

Node.js v10 は、New Relic Node.js v7 エージェントでサポートされている最も古いバージョンです。Node.js 8 および 9 は v7 ではサポートされていません。Node.js 9 以前を実行しているお客様には、次の 2 つのオプションがあります。

* サポートされているバージョンの Node.js にアップグレードして、New Relic Node.js v7 エージェントの新機能を活用してください。
* New Relic Node.js v6 エージェントのままでは、エージェントのバージョンを更新したときにのみ利用できる新機能を使用できません。

[Node.js 10 は更新を受け取りません](https://github.com/nodejs/Release/tree/cecdcf#end-of-life-releases)。できるだけ早く Node.js の新しいバージョンにアップグレードしてください。Node.js 10 のサポートは、New Relic Node.js エージェント v8 で廃止されました。

## Node.jsエージェントバージョン6へのアップグレード [#node-agent-v6]

Node.jsエージェント・バージョン6にアップグレードする前に、主要な変更点についてこの情報を確認してください。

<table>
  <thead>
    <tr>
      <th style={{ width: "250px" }}>
        <DNT>
          **Major changes with Node.js agent v6**
        </DNT>
      </th>

      <th>
        <DNT>
          **Comments**
        </DNT>
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        Koaフレームワークの公式計測モジュールをv3.0.0にアップグレードしました。
      </td>

      <td>
        * <DNT>**v6:**</DNT> @koa/router v8.0.2 までのサポートが追加されました。 @koa/router v8.0.3 以降は現在サポートされていません。
        * <DNT>**v6:**</DNT> Node.js v12 のサポートが追加され、Node.js v6、7、9 のサポートが削除されました。 サポートされる最小バージョンは Node.js v8 です。
        * また、GithubにあるNew Relicの [Koa Release Notesもご覧ください。](https://github.com/newrelic/node-newrelic-koa/blob/master/NEWS.md) 。
      </td>
    </tr>

    <tr>
      <td>
        非推奨の`max_samples_per_minute`構成パラメーターを削除しました。これは`max_samples_stored`動作に置き換えられました
      </td>

      <td>
        * <DNT>**v1 - v5:**</DNT> `max_samples_per_minute` エージェントが 1 分間に収集するイベントの最大数を定義します。 アプリケーションが以前に上限として`max_samples_per_minute`を使用していた場合、サーバー上でデータがドロップされないように、閾値を有効な最大値まで下げる必要がある場合があります。 10k未満をお勧めします。
        * <DNT>**v5:**</DNT> エージェント v5 以前では、 `max_samples_stored` 、エージェントが[New Relic コレクター](/docs/accounts-partnerships/education/getting-started-new-relic/glossary#collector)と通信できない場合に保存するイベントの最大数を定義しました。
        * <DNT>**v6:**</DNT> `max_samples_stored`の新しい動作は、エージェントが 1 分あたりに収集するイベントの最大数を定義します。 この数を超える場合、エージェントは統計サンプルを収集します。 この設定の使用方法は、他のAPMエージェントと一致しています。
        * <DNT>**Troubleshooting tips:**</DNT> イベント データが不足している場合は、 `max_samples_stored`の値を増やすか、デフォルト値に戻します。 `max_samples_stored`の値は 10,000 を超えてはなりません。
      </td>
    </tr>
  </tbody>
</table>

## Node.jsバージョンのサポート [#node-support-v6]

Node.js 8 は、New Relic Node.js v6 エージェントでサポートされている最も古いバージョンです。Node.js 6、7、9 は v6 ではサポートされていません。Node.js 6、7、および 9 を実行しているお客様には、次の 2 つのオプションがあります。

* サポートされているバージョンの Node.js にアップグレードして、New Relic Node.js v6 エージェントの新機能を活用してください。
* New Relic Node.js v5エージェントのままでは、エージェントのバージョンを更新したときにのみ利用できる新機能を使用できません。

[Node.js 8 は更新を受け取らなくなりまし](https://github.com/nodejs/Release/tree/cecdcf#end-of-life-releases)たが、New Relic は当面の間、これらのバージョンの Node.js を引き続きサポートします。

<Callout variant="tip">
  できるだけ早く Node.js の新しいバージョンにアップグレードしてください。New Relic Node.js エージェントの次のメジャー バージョンでは、Node.js 8 のサポートが削除される可能性があります。
</Callout>

## Node.jsエージェントバージョン5へのアップグレード [#node-agent-v5]

Node.js agent v5 にアップグレードする前に、主要な変更点についてこの情報を確認してください。また、New Relic の [Node.js v5 移行ガイド（GitHub](https://github.com/newrelic/node-newrelic/blob/819db2f3f9051960e034f36540817450f663241f/Migration%20Guide.md) ）もご覧ください。

<table>
  <thead>
    <tr>
      <th style={{ width: "250px" }}>
        <DNT>
          **Major changes with Node.js v5 agent**
        </DNT>
      </th>

      <th>
        <DNT>
          **Comments**
        </DNT>
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        非推奨の`addCustomParameter`メソッドを削除しました。
      </td>

      <td>
        * <DNT>**v2 - v4:**</DNT> エージェント v2.7.0 以降、これらのメソッドは非推奨としてマークされましたが、新しいメソッドへの移行期間を設けるために残されました。
        * <DNT>**v5:**</DNT> アプリケーションは API メソッド[`newrelic.addCustomAttribute()`](https://newrelic.github.io/node-newrelic/API.html#addCustomAttribute)と[`newrelic.addCustomAttributes()`](https://newrelic.github.io/node-newrelic/API.html#addCustomAttributes)を使用する必要があります。 これらは古い方法の代替品です。
      </td>
    </tr>

    <tr>
      <td>
        非推奨の`create*Transaction`メソッドを削除しました。
      </td>

      <td>
        * <DNT>**v2 - v4:**</DNT> エージェント v2.0.2 以降、これらのメソッドは非推奨としてマークされましたが、新しいメソッドへの移行期間を設けるために残されました。
        * <DNT>**v5:**</DNT> アプリケーションは API メソッド[`newrelic.startWebTransaction()`](https://newrelic.github.io/node-newrelic/API.html#startWebTransaction)および[`newrelic.startBackgroundTransaction()`](https://newrelic.github.io/node-newrelic/API.html#startBackgroundTransaction)に更新する必要があります。
        * <DNT>**Troubleshooting tips:**</DNT> これらの新しい方法は、古い方法に代わるものではあり**ません**。 これらの新しい方法に移行する前に、[カスタムインストゥルメンテーション ガイド](/docs/agents/nodejs-agent/supported-features/nodejs-custom-instrumentation#web-txn)を確認してください。
      </td>
    </tr>

    <tr>
      <td>
        非推奨の`createTracer`メソッドを削除しました。
      </td>

      <td>
        * <DNT>**v3 - v4:**</DNT> エージェント v3.3.0 以降では、このメソッドは非推奨となり、代わりに`newrelic.startSegment()`が使用されるようになりました。
        * <DNT>**v5:**</DNT> アプリケーションを[`newrelic.startSegment()`](https://newrelic.github.io/node-newrelic/API.html#startSegment)に更新する必要があります。
      </td>
    </tr>

    <tr>
      <td>
        `node-cassandra-cql`インストルメンテーションを削除しました。
      </td>

      <td>
        * <DNT>**v4:**</DNT> npm パッケージ[`node-cassandra-cql`](https://www.npmjs.com/package/node-cassandra-cql)を使用するアプリケーションは、Cassandra のデータストア メトリックを取得します。
        * <DNT>**v5:**</DNT> Cassandra データストアメトリックを取得するには、アプリケーションを[`cassandra-driver`](https://www.npmjs.com/package/cassandra-driver)パッケージに移行する必要があります。 このモジュールは同じ開発者によって積極的に保守されています。 `node-cassandra-cql`パッケージは 2014 年 2 月に廃止され、代わりに`cassandra-driver`パッケージが導入されました。
      </td>
    </tr>

    <tr>
      <td>
        非推奨の`capture_params`および`ignored_params`構成を削除しました。
      </td>

      <td>
        * <DNT>**v2 - v4:**</DNT> エージェント v2.7.0 以降では、これらの設定引数によって警告がログに記録され、値は新しい属性設定に自動的にアップグレードされるようになりました。
        * <DNT>**v5:**</DNT> 警告は引き続きログに記録されますが、設定は無視され、自動アップグレードは行われなくなります。
        * <DNT>**Troubleshooting tips:**</DNT> アプリケーションが`ignored_params`設定 にリストされている場合は、それらを[`attributes.exclude`](/docs/agents/nodejs-agent/installation-configuration/nodejs-agent-configuration#attributes_exclude)に移動する必要があります。
      </td>
    </tr>
  </tbody>
</table>

## Node.jsバージョンのサポート [#node-support-v5]

Node.js 6 は、New Relic Node.js v5 エージェントでサポートされている最も古いバージョンです。Node.js 4 および 5 は v5 ではサポートされていません。Node.js 4 または 5 を実行しているお客様には、次の 2 つのオプションがあります。

* サポートされているバージョンの Node.js にアップグレードして、New Relic Node.js v5 エージェントの新機能を活用してください。
* New Relic Node.js v4 エージェントのままでは、エージェントのバージョンを更新したときにのみ利用できる新機能を使用できません。

[Node.js 7 および 9 は更新を受け取らなくなりまし](https://github.com/nodejs/Release/tree/cecdcf#end-of-life-releases)たが、New Relic は当面の間、これらのバージョンの Node.js を引き続きサポートします。

<Callout variant="tip">
  できるだけ早く Node.js の新しいバージョンにアップグレードしてください。New Relic Node.js エージェントの次のメジャー バージョンでは、Node.js 6 および 7 のサポートが削除される可能性があります。
</Callout>

## v5での機能フラグ [#v5-feature-flags]

New Relic for Node.js v5.の時点で。

* `custom_instrumentation`: この機能は構成できなくなりました。
* `custom_metrics`: この機能は構成できなくなりました。
* `synthetics`: この機能は構成できなくなりました。
* `native_metrics`: この機能は、 `plugins.native_metrics.enabled`構成値によって制御されるようになりました。

## Node.jsエージェントバージョン4へのアップグレード [#node-agent-v4]

Node.js agent v4 にアップグレードする前に、主要な変更点についてこの情報を確認してください。また、New Relic の [Node.js v4 移行ガイドを GitHub](https://github.com/newrelic/node-newrelic/blob/819db2f3f9051960e034f36540817450f663241f/Migration%20Guide.md#upgrading-to-agent-v4) でご覧いただけます。

<CollapserGroup>
  <Collapser id="https-proxy-agent" title="https-proxy-agentのv0からv2へのアップグレード">
    Node.js v4 エージェントの主な変更点には、 `https-proxy-agent`の v0 から v2 へのアップグレードが含まれます。この依存関係は、New Relic Node.js エージェントが使用した`https-proxy-agent`の[セキュリティの問題](/docs/using-new-relic/new-relic-security/security-bulletins/security-bulletin-nr18-08)により更新されました。`https-proxy` v2 はノード v0.10 および v0.12 と互換性がないため、New Relic は、これらのエージェント バージョンを廃止しました。New Relic の Node.js エージェントの v3 から v4 に移行するために必要なアクションはありません。
  </Collapser>

  <Collapser id="v4-node-version" title="Node.jsバージョンのサポート">
    Node.js 4 は、New Relic Node.js v4 エージェントでサポートされている最も古いバージョンです。Node.js 0.10 および 0.12 は v4 ではサポートされていません。Node.js 0.10 または 0.12 を実行しているお客様には、次の 2 つのオプションがあります。

    * サポートされているバージョンの Node.js にアップグレードして、New Relic Node.js v4 エージェントの新機能を活用してください。

    * New Relic Node.js v3 エージェントのままでは、エージェントのバージョンが更新された場合にのみ利用できる新機能を利用することができません。

      [Node.js 4、5、および 7 も更新を受け取りません](https://github.com/nodejs/Release/tree/1d8fca#end-of-life-releases)が、New Relic は当面の間、これらのバージョンの Node.js を引き続きサポートします。

      <Callout variant="tip">
        できるだけ早く Node.js の新しいバージョンにアップグレードしてください。New Relic Node.js エージェントの次のメジャー バージョンでは、Node.js 4 および 5 のサポートが削除される可能性があります。
      </Callout>
  </Collapser>
</CollapserGroup>

## Node.jsエージェントバージョン3へのアップグレード [#node-agent-v3]

Node.js エージェント agent v3 にアップグレードする前に、主要な変更点についてこの情報を確認してください。また、New Relic の [Node.js v3 移行ガイド（GitHub](https://github.com/newrelic/node-newrelic/blob/819db2f3f9051960e034f36540817450f663241f/Migration%20Guide.md#upgrading-to-agent-v3) ）もご覧ください。

<CollapserGroup>
  <Collapser id="changes-v3" title="Node.js v3 agentの主な変更点">
    <table>
      <thead>
        <tr>
          <th style={{ width: "250px" }}>
            <DNT>
              **Major changes with Node.js v3 agent**
            </DNT>
          </th>

          <th>
            <DNT>
              **Comments**
            </DNT>
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            SSL設定の削除
          </td>

          <td>
            * <DNT>**v2:**</DNT> v2 エージェントでは、暗号化なしで New Relic に接続するようにエージェントを構成することができました。
            * <DNT>**v3:**</DNT> Node.js エージェント v3 は、通信を保護するために常に TLS 暗号化を使用して New Relic サーバーに接続します。 エージェントがこれを無効にするように構成されている場合、警告がログに記録され、設定は無視されます。
          </td>
        </tr>

        <tr>
          <td>
            リクエスト パラメータにプレフィックスが付きました `request.parameters.`
          </td>

          <td>
            * <DNT>**v2:**</DNT> v2 エージェントは、ルート引数 ( `/users/:userId` ) やクエリ引数 ( `/users?userId=123` ) などのリクエスト引数を引数名 ( `userId` ) として収集します。
            * <DNT>**v3:**</DNT> v3 エージェントは、すべてのリクエストの先頭に文字列`request.parameters.`を付加します。 たとえば、 `userId` `request.parameters.userId`として表示されます。
            * <DNT>**Troubleshooting tips:**</DNT> ダッシュボード、アラートポリシー、またはリクエスト フォーラムに基づくその他のNRQLクエリがある場合は、それらを新しいフォーラム名で更新します。
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="v3-feature-flags" title="v3での機能フラグ">
    New Relic Node.js エージェント v3 以降、 `send_request_uri_attribute`機能は構成できなくなりました。
  </Collapser>
</CollapserGroup>

## Node.jsエージェントバージョン2へのアップグレード [#node-agent-v2]

Node.js agent v2 にアップグレードする前に、主要な変更点についてこの情報を確認してください。また、New Relic の [Node.js v2 移行ガイドを GitHub](https://github.com/newrelic/node-newrelic/blob/819db2f3f9051960e034f36540817450f663241f/Migration%20Guide.md#upgrading-to-agent-v2) でご覧いただけます。

<CollapserGroup>
  <Collapser id="changes-v2" title="Node.js v2 agentの主な変更点">
    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            <DNT>
              **Major changes with Node.js v2 agent**
            </DNT>
          </th>

          <th>
            <DNT>
              **Comments**
            </DNT>
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            ネーミングと無視のルールが逆転
          </td>

          <td>
            * <DNT>**v1:**</DNT> v1 エージェントでは、構成プロパティ`rules.name`および`rules.ignore`で定義されたルールが逆の順序で適用され、リストの最初のルールが最後に適用されました。
            * <DNT>**v2:**</DNT> Node.js エージェント v2 は、定義された順序でルールを適用するため、リストの最初のルールが最初に適用されます。
            * <DNT>**Troubleshooting tips:**</DNT> v1 エージェントで命名規則を使用していて問題に気付いた場合は、設定で規則の順序を逆にしてください。
          </td>
        </tr>

        <tr>
          <td>
            重複していないHTTPリクエストのトランザクション
          </td>

          <td>
            * <DNT>**v1:**</DNT> v1 エージェントは、HTTP サーバーの`request`イベントで各リスナーに対して新しいトランザクションを開始しました。 `request`イベントに複数のリスナーを持つアプリケーションでは、この結果、ほとんどの場合、正しく名前が付けられない余分なトランザクションが作成されました。
            * <DNT>**v2:**</DNT> v2 エージェントは、発行された`request`イベントごとに 1 つのトランザクションのみを作成します。
            * <DNT>**Troubleshooting tips:**</DNT> 複数の`request`イベント リスナーを使用し、余分なトランザクションを削除するために`newrelic.ignoreTransaction()`への呼び出しを追加した場合は、それらの呼び出しを削除します。
          </td>
        </tr>

        <tr>
          <td>
            アウトバウンド・リクエスト・エラーの飲み込みが悪くなった
          </td>

          <td>
            * <DNT>**v1:**</DNT> v1 エージェントは、送信 HTTP 要求オブジェクトによって発行された未処理の`error`イベントを取り込みました。
            * <DNT>**v2:**</DNT> v2 エージェントではこの動作が削除されます。 代わりに、v2 エージェントは通常の Node.js 実行を変更しません。 つまり、 `error`イベントは常に発行されます。
            * <DNT>**Troubleshooting tips:**</DNT> 送信リクエストを行っており、現在`error`イベントをリッスンしていない場合は、リスナーを追加し、アプリケーションに応じてエラーを処理します。
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="config-options" title="v2で更新された設定オプション">
    `newrelic.js`で、最新バージョンとの互換性のために使用する[Node.js エージェント構成](/docs/agents/nodejs-agent/installation-configuration/nodejs-agent-configuration)プロパティを編集します。

    <table>
      <thead>
        <tr>
          <th width={200}>
            <DNT>
              **Deprecated property**
            </DNT>
          </th>

          <th>
            <DNT>
              **New property**
            </DNT>
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `capture_params`
          </td>

          <td>
            `attributes.enabled: false`

            デフォルトでは、リクエスト属性は New Relic に送信されません。`attributes.enabled: true`を設定して、トレースにエージェント定義またはカスタムの属性を含めます。`capture_params`プロパティは廃止されました。
          </td>
        </tr>

        <tr>
          <td>
            `ignored_params`
          </td>

          <td>
            `attributes.exclude: []`

            要求属性キーを`attributes.exclude`リストに追加します。現在、完全一致である必要はなく、ワイルドカード ( `*` ) を各項目に追加して、より広範なフィルタリングを行うことができます。`ignored_params`プロパティは廃止されました。
          </td>
        </tr>
      </tbody>
    </table>

    これらの [Node.js エージェント設定](/docs/agents/nodejs-agent/installation-configuration/nodejs-agent-configuration) プロパティには、以下のような特定の宛先に対するオーバーライドもあります。

    * `transaction_tracer`

    * `transaction_events`

    * `error_collector`

    * `browser_monitoring`

      たとえば、ルート`attributes.enabled`が`true`で`transaction_tracer.attributes.enabled: false`を設定すると、属性がトランザクション追跡で収集されることは制限されますが、他のすべての属性は引き続き許可されます。
  </Collapser>

  <Collapser id="deprecated-apis" title="v2で非推奨となったAPIメソッド">
    Node.jsエージェントの以下のメソッドは非推奨となっており、New Relicはエージェントのv5で削除しました。それぞれのメソッドには、より柔軟で信頼性の高い方法で同じタスクを達成する簡単な代替手段があります。

    <CollapserGroup>
      <Collapser
        id="newrelic_createWebTransaction"
        title={<InlineCode>newrelic.createWebTransaction()</InlineCode>
        }
      >
        [`newrelic.startWebTransaction()`](#newrelic_start_transaction)と[`newrelic.getTransaction()`](#newrelic_getTransaction)に置き換えます。
      </Collapser>

      <Collapser
        id="newrelic_createBackgroundTransaction"
        title={<InlineCode>newrelic.createBackgroundTransaction()</InlineCode>
        }
      >
        [`newrelic.startBackgroundTransaction()`](#newrelic_start_transaction)と[`newrelic.getTransaction()`](#newrelic_getTransaction)に置き換えます。
      </Collapser>

      <Collapser
        id="newrelic_addCustomParameter"
        title={<InlineCode>newrelic.addCustomParameter()</InlineCode>
        }
      >
        [`newrelic.addCustomAttribute()`](#newrelic_add_custom_attribute)に置き換えます。
      </Collapser>

      <Collapser
        id="newrelic_addCustomParameter"
        title={<InlineCode>newrelic.addCustomParameters()</InlineCode>
        }
      >
        [`newrelic.addCustomAttributes()`](#newrelic_add_custom_attributes)に置き換えます。
      </Collapser>
    </CollapserGroup>
  </Collapser>

  <Collapser id="api-methods" title="新しいv2エージェントAPIメソッド">
    New Relic Node.js v2 エージェントでは、以下の API メソッドが新しくなりました。

    <CollapserGroup>
      <Collapser
        id="newrelic_getTransaction"
        title={<InlineCode>newrelic.getTransaction()</InlineCode>
        }
      >
        このメソッドは、現在実行中のトランザクションへの参照を取得します。と合わせて使用します。

        * `newrelic.startWebTransaction`
        * `newrelic.startBackgroundTransaction`
        * [トラブルシューティング用のコールバックベースのメッセージコンシューマーサービス](/docs/agents/nodejs-agent/troubleshooting/troubleshoot-message-consumers)
      </Collapser>

      <Collapser
        id="newrelic_start_transaction"
        title={<><InlineCode>
          newrelic.startWebTransaction()
        </InlineCode><InlineCode>
          newrelic.startBackgroundTransaction()
        </InlineCode></>
        }
      >
        これらの新しい API メソッドは、古い`create*Transaction`メソッドを置き換えます。それらは使いやすく、Promise とシームレスに連携します。v1 メソッドとは異なり、提供されたコールバックはすぐに呼び出されます。
      </Collapser>

      <Collapser
        id="newrelic_instrument"
        title={<><InlineCode>
          newrelic.instrument()
        </InlineCode><InlineCode>
          newrelic.instrumentDatastore()
        </InlineCode><InlineCode>
          newrelic.instrumentWebframework()
        </InlineCode><InlineCode>
          newrelic.instrumentMessages()
        </InlineCode></>
        }
      >
        これらのメソッドを使用して、 New Relic Node.js エージェントによってすでにインストゥルメントされたモジュールを含む、サードパーティ モジュールのカスタムインストゥルメンテーションを追加します。 詳細については、GitHub にあるNew Relicの[Node.js インストゥルメンテーション サンプル アプリケーションを](https://github.com/newrelic/newrelic-node-examples/tree/4284ee7eab69708238db0a44f97ff7e839e165cf/custom-instrumentation/instrument)参照してください。
      </Collapser>

      <Collapser
        id="newrelic_add_custom_attribute"
        title={<InlineCode>newrelic.addCustomAttribute()</InlineCode>
        }
      >
        カスタムのトレース属性を追加するには、このメソッドを使用します。
      </Collapser>

      <Collapser
        id="newrelic_add_custom_attributes"
        title={<InlineCode>newrelic.addCustomAttributes()</InlineCode>
        }
      >
        複数のカスタムトレース属性を追加する場合は、この方法を使用します。
      </Collapser>
    </CollapserGroup>
  </Collapser>

  <Collapser id="node-support" title="v2 の Node.js バージョンのサポート">
    New Relic Node.js v2 エージェントでサポートされている Node.js の最も古いバージョンは 0.10 です。2014 年 7 月以降更新されていない Node.js 0.8 は、v2 ではサポートされていません。Node.js 0.8 を実行しているお客様には、次の 2 つのオプションがあります。

    * サポートされているバージョンの Node.js にアップグレードして、New Relic Node.js v2 エージェントの新機能を活用してください。

    * New Relic Node.js v1 エージェントのままでは、エージェントのバージョンが更新された場合にのみ利用できる新機能を使用することができません。

      [Node.js 0.10 も更新を受信しなくなりまし](https://github.com/nodejs/LTS/tree/2b4253#lts-schedule1)たが、New Relic は当面の間、このバージョンの Node.js を引き続きサポートします。

      推奨事項: できるだけ早く Node.js の新しいバージョンにアップグレードしてください。
  </Collapser>

  <Collapser id="npm-versions" title="v2時点でのnpmのバージョンサポート">
    New Relic Node.js エージェントには、npm バージョン 2.0.0 以降が必要になりました。このバージョンの npm は、Node.js 0.10.44 以降にパッケージ化されています。

    以前のバージョンの Node.js 0.10 を使用している場合は、最初に npm 2.0.0 以降をインストールするか、新しいバージョンの Node.js にアップグレードする必要があります。npm バージョン 2 をインストールするには:

    ```bash
    npm install --global npm@2
    ```
  </Collapser>

  <Collapser id="v2-feature-flags" title="v2での機能フラグ">
    New Relic Node.js agent v2.の時点で。

    * `express_segments`: この機能は構成できなくなりました。
    * `cat`: この機能は、 `cross_application_tracer.enabled`構成値によって制御されるようになりました。
  </Collapser>

  <Collapser id="framework-minimum" title="v2時点でのフレームワークの最小バージョン">
    New Relic Node.js agent v2.の時点で。

    <table>
      <thead>
        <tr>
          <th style={{ width: "150px" }}>
            <DNT>
              **Module**
            </DNT>
          </th>

          <th style={{ width: "175px" }}>
            <DNT>
              **V2 minimum**
            </DNT>
          </th>

          <th style={{ width: "175px" }}>
            <DNT>
              **Minimum before v2**
            </DNT>
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            エクスプレス
          </td>

          <td>
            4.6.0
          </td>

          <td>
            2.0.0
          </td>
        </tr>

        <tr>
          <td>
            mysql
          </td>

          <td>
            2.0.0
          </td>

          <td>
            0.9.0
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>