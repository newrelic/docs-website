---
title: Node.jsエージェントの互換性と要件
tags:
  - Agents
  - Nodejs agent
  - Getting started
metaDescription: 'The New Relic Node.js agent supports these frameworks, architectures, and operating systems.'
---

Node.js用エージェントは、[Node Package Manager（npm）リポジトリ](https://npmjs.org/package/newrelic)と[GitHub](https://github.com/newrelic/node-newrelic)で公開されています。Node.jsエージェントをインストールする前に、お使いのアプリケーションが以下のシステム要件を満たしていることを確認します。

New Relicアカウントをまだお持ちでない場合は、[New Relicアカウントを新たに作成します](https://newrelic.com/signup)。永久無料です。

## Node.jsバージョンのサポート [#version]

<Callout variant="tip">
  パフォーマンスを最大化するために、Node.jsの最新のアクティブな長期サポート（LTS）バージョンを使用してください。
</Callout>

### 新しいNode.jsリリースのサポート [#support-new]

当社は、以下のアクティブな長期サポートスケジュールの開始により、[Node.jsリリースの最新偶数バージョン](https://nodejs.org/en/about/releases/)をサポートします。バージョンサポートポリシーは、[一般的なエージェントおよびプラグイン有効期限（EOL）ポリシー](/docs/agents/manage-apm-agents/maintenance/new-relic-agent-plugin-end-life-policy)を置き換えません。

提案される時間範囲を以下に示します。実際のリリース日は異なる可能性があります。

<table>
  <thead>
    <tr>
      <th style={{ width: "100px" }}>
        Node.jsのバージョン
      </th>

      <th>
        アクティブな長期サポート（LTS）開始日
      </th>

      <th>
        サポート付きNode.jsエージェントの初期リリース日
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        18
      </td>

      <td>
        2022年10月
      </td>

      <td>
        2022年4月～10月
      </td>
    </tr>

    <tr>
      <td>
        16
      </td>

      <td>
        2021年10月
      </td>

      <td>
        Node.jsエージェントv8.0.0を含む2021年7月26日
      </td>
    </tr>
  </tbody>
</table>

### EOLに到達するNode.jsリリースのサポート終了日 [#support-end]

新しい長期サポートエージェントバージョンのサポートが利用可能になると、同じ期間中に有効期限を迎えるNode.jsエージェントのバージョンのサポートは同時に終了します。

提案される時間範囲を以下に示します。実際のリリース日は異なる可能性があります。

<table>
  <thead>
    <tr>
      <th style={{ width: "100px" }}>
        Node.jsのバージョン
      </th>

      <th>
        有効期限（EOL）日
      </th>

      <th>
        Node.jsエージェントのサポート終了の初期リリース日
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        12
      </td>

      <td>
        2022年4月
      </td>

      <td>
        2022年4月～10月
      </td>
    </tr>

    <tr>
      <td>
        10
      </td>

      <td>
        2021年4月
      </td>

      <td>
        2021年7月26日現在で、Node.jsエージェントのv8を使用したNode.js 10のサポートを終了しました。この移行の簡単な準備方法などの詳細については、[エクスプローラーハブの投稿](https://discuss.newrelic.com/t/important-upcoming-changes-to-support-and-capabilities-across-browser-node-js-agent-query-builder-net-agent-apm-errors-distributed-tracing/153373)を参照してください。
      </td>
    </tr>
  </tbody>
</table>

## Node.js 12のエラー [#node12-errors]

Node.js 12の場合、以下の変更によってNode.jsエージェントが影響を受けます。

未処理の拒否となったエラーは、拒否されたpromise作成時にアクティブであったトランザクションに絞り込まれません。これは、init非同期hookのトリガーに責任を有するpromiseはそのpromiseのwrapインスタンス上を通過しないためです。これによって、スケジュールされていたトランザクションに指定のpromise拒否を関連付けるリンクが遮断されます。

## サポートされているNode.jsフレームワーク [#supported-frameworks]

* [Express](https://www.npmjs.com/package/express) 4.6.0以上
* [Restify](https://www.npmjs.com/package/restify)
* [Connect](https://www.npmjs.com/package/connect)
* [Hapi](https://www.npmjs.com/package/hapi)
* [Koa](https://www.npmjs.com/package/koa) 2.0.0以上（エージェントとともに[外部モジュール](https://github.com/newrelic/node-newrelic-koa)がロードされます）

サポートされているフレームワークをデフォルトのルーターとともに使用している場合、Node.jsエージェントはフレームワークのルート名をそのまま読み取ることができます。ただし、フレームワークが提供する名前より固有な名前が必要な場合は、New Relicが[Node.jsトランザクションネーミングAPI](/docs/nodejs/nodejs-transaction-naming-api) によって提供する1つ以上のツールを使用できます。

## オペレーティングシステム [#operating-system]

* Linux
* SmartOS
* MacOS 10.7以上
* Windows Server 2008以上

## データストア [#database]

Node.jsエージェントは、以下のデータストアに対するNode.jsアプリケーション呼び出しのパフォーマンスを監視します。

* [Cassandra](https://www.npmjs.com/package/cassandra-driver)
* [Memcached](https://www.npmjs.com/package/memcached)
* [MongoDB](https://www.npmjs.com/package/mongodb)
* MySQL（[mysql](https://www.npmjs.com/package/mysql)と[mysql2](https://www.npmjs.com/package/mysql2)パッケージ経由）
* [Redis](https://www.npmjs.com/package/redis)
* [Postgres](https://www.npmjs.com/package/pg)（[ネイティブ](https://www.npmjs.com/package/pg-native)と[ピュアのJavaScript](https://www.npmjs.com/package/pg-js)パッケージを含む）

## インスタンスの詳細

[さまざまなデータベースとデータベースドライバを対象にインスタンスの詳細](/docs/apm/applications-menu/features/analyze-database-instance-level-performance-issues)を収集します。APMにおいて特定のインスタンスおよびデータベース情報の種類が見えるかどうかは、エージェントのバージョンによって異なります。

New RelicのNode.jsエージェントの[バージョン1.31.0](/docs/release-notes/agent-release-notes/nodejs-release-notes/node-agent-1310)以上では、以下をサポートします。

<table>
  <thead>
    <tr>
      <th>
        データベース
      </th>

      <th>
        `npm`モジュール名
      </th>

      <th>
        最小モジュールバージョン
      </th>

      <th>
        エージェントの最小バージョン
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        [PostgreSQL](https://www.postgresql.org/)
      </td>

      <td>
        [pg](https://www.npmjs.com/package/pg)
      </td>

      <td>
        4.0.0
      </td>

      <td>
        1.31.0
      </td>
    </tr>

    <tr>
      <td>
        [Redis](http://redis.io/)
      </td>

      <td>
        [redis](https://www.npmjs.com/package/redis)
      </td>

      <td>
        2.0.0
      </td>

      <td>
        1.31.0
      </td>
    </tr>

    <tr>
      <td>
        [MongoDB](https://www.mongodb.com/)
      </td>

      <td>
        [mongodb](https://www.npmjs.com/package/mongodb)
      </td>

      <td>
        2.1.0
      </td>

      <td>
        1.32.0
      </td>
    </tr>

    <tr>
      <td>
        [MySQL](http://www.mysql.com/)
      </td>

      <td>
        [mysql](https://www.npmjs.com/package/mysql)
      </td>

      <td>
        2.4.1
      </td>

      <td>
        1.32.0
      </td>
    </tr>

    <tr>
      <td>
        [Memcached](https://memcached.org/)
      </td>

      <td>
        [memcached](https://www.npmjs.com/package/memcached)
      </td>

      <td>
        1.0.0
      </td>

      <td>
        1.33.0
      </td>
    </tr>
  </tbody>
</table>

現在、New Relicエージェントにリストされてないデータストアからインスタンスレベルの情報をリクエストするには、[support.newrelic.com](https://support.newrelic.com)までお問い合わせください。

## メッセージキュー [#message-queues]

[メッセージキューのインストゥルメンテーション](/docs/agents/nodejs-agent/troubleshooting/troubleshoot-message-consumers)は、[New Relic Node.js エージェントv2以上](/docs/release-notes/agent-release-notes/nodejs-release-notes)でのみ使用可能です。現在サポートされているメッセージキューのインストゥルメンテーション：

* `amqplib`

他のメッセージキューライブラリには、[カスタムインストゥルメンテーション](/docs/agents/nodejs-agent/supported-features/nodejs-custom-instrumentation#message-client)を使用します。

## ホスティングサービス

* [Google App Engine（GAE）フレキシブル環境](/docs/agents/nodejs-agent/hosting-services/install-new-relic-nodejs-agent-gae-flexible-environment)
* AWS EC2
* [Microsoft Azure](/docs/nodejs/nodejs-agent-on-microsoft-azure)
* [Heroku](/docs/nodejs/nodejs-agent-on-heroku)

## プロセスマネージャ

一般に、Node.jsの起動、停止、および再開を処理するプロセスマネージャは（[Forever](https://www.npmjs.com/package/forever)など）、Node.jsエージェントと互換性がある必要があります。[PM2](https://www.npmjs.com/package/pm2)を使用している場合、PM2の最小サポートバージョンは2.0です。

## セキュリティ要件

標準的な [データ収集のセキュリティ対策](/docs/accounts-partnerships/accounts/security/data-security)として、アプリサーバーはSHA-2（256ビット）をサポートしている必要があります。SHA-1はサポートされていません。

## エージェントを他のNew Relic機能に接続する [#digital-intelligence-platform]

Node.jsエージェントはその他の機能と統合し、[full-stack observability](http://docs/full-stack-observability/monitor-everything/get-started-new-relic-monitoring-tools/get-started-full-stack-observability)を実現します。

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        製品
      </th>

      <th>
        インテグレーション
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        [ブラウザのモニタリング](/docs/browser/new-relic-browser/getting-started/introduction-new-relic-browser)
      </td>

      <td>
        [自動インストゥルメンテーションを有効化](/docs/browser/new-relic-browser/installation/install-new-relic-browser-agent#select-apm-app)すると、Node.jsエージェントはBrowserモニタリングの利点を追加できます。Browserモニタリングのインジェクションを有効にした後、[Node.jsエージェントを使用してBrowserモニタリングをインストールするためのガイド](/docs/agents/nodejs-agent/extend-your-instrumentation/browser-monitoring-nodejs-agent/)に従うだけです。これらの手順が完了したら、[APMの**概要**ページ](/docs/apm/applications-menu/monitoring/apm-overview-page)でBrowserデータを表示、特定のアプリに対してAPMとBrowserデータ間を素早く切り替えできます。設定オプションと手動インストゥルメンテーションについては、[BrowserモニタリングとNode.jsエージェント](/docs/agents/nodejs-agent/supported-features/new-relic-browser-nodejs-agent)を参照してください。
      </td>
    </tr>

    <tr>
      <td>
        [インフラストラクチャのモニタリング](/docs/infrastructure/new-relic-infrastructure/getting-started/introduction-new-relic-infrastructure)
      </td>

      <td>
        インフラストラクチャとAPMエージェントを同じホストにインストールすると、自動的に相互に検出します。その後、APM UIにホストのリストを表示し、インフラストラクチャUIでAPMアプリでインフラストラクチャホストをフィルタリングできます。詳細については、[インフラストラクチャモニターにおけるAPMデータ](/docs/infrastructure/new-relic-infrastructure/data-instrumentation/new-relic-apm-data-infrastructure)を参照してください。
      </td>
    </tr>

    <tr>
      <td>
        [New Relicのダッシュボード](/docs/insights/use-insights-ui/getting-started/introduction-new-relic-insights)
      </td>

      <td>
        Node.jsエージェントは、NRQLクエリの[デフォルトのイベントと属性](/docs/insights/insights-data-sources/default-events-attributes/apm-default-event-attributes)を送信します。高度な分析のために、[カスタムイベントを記録](/docs/insights/insights-data-sources/custom-data/insert-custom-events-new-relic-apm-agents)することもできます。
      </td>
    </tr>

    <tr>
      <td>
        [合成のモニタリング](/docs/synthetics/new-relic-synthetics/getting-started/introduction-new-relic-synthetics)
      </td>

      <td>
        [合成トランザクショントレース](/docs/synthetics/new-relic-synthetics/using-monitors/collect-synthetic-transaction-traces)は、合成モニターからのリクエストを基盤となるAPMトランザクションに接続します。
      </td>
    </tr>
  </tbody>
</table>