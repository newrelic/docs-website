---
title: Node.jsエージェントの互換性と要件
tags:
  - Agents
  - Nodejs agent
  - Getting started
metaDescription: 'The New Relic Node.js agent supports these frameworks, architectures, and operating systems.'
translationType: human
---

Node.jsエージェントには、最も一般的なNode.jsフレームワーク、アプリケーションサーバー、データベース、およびメッセージキューシステムのビルトイン・インストゥルメンテーションが含まれています。追加設定なしでインストゥルメントされていないフレームワークとライブラリに関しては、[Node.jsエージェントAPI](/docs/apm/agents/nodejs-agent/api-guides/nodejs-agent-api/)でエージェントを拡張できます。

Node.js用エージェントは、[Node Package Manager（npm）リポジトリ](https://npmjs.org/package/newrelic)と[GitHub](https://github.com/newrelic/node-newrelic)で公開されています。New RelicのNode.jsエージェントを試してみませんか？[New Relicアカウントを作成します](https://newrelic.com/signup)。

## エージェントのインストール要件

[エージェントをインストールする](/docs/apm/agents/nodejs-agent/installation-configuration/install-nodejs-agent)前に、お使いのシステムが最小要件を満たしていることを確認してください。パフォーマンスを最大化するために、Node.jsの最新のアクティブな長期サポート（LTS）バージョンを使用してください。

<CollapserGroup>
  <Collapser
    id="operating systems"
    title="互換性のあるオペレーティングシステム"
  >
    Node.jsエージェントは、次のオペレーティングシステムに対応しています。

    * Linux
    * SmartOS
    * MacOS 10.7以上
    * Windows Server 2008以降、推奨時間範囲は次のとおりです。実際のリリース日は異なる可能性があります。
  </Collapser>

  <Collapser
    id="host"
    title="ホスティングサービス"
  >
    また、以下のホスティングサービスにも対応しています。

    * [Google App Engine（GAE）フレキシブル環境](/docs/agents/nodejs-agent/hosting-services/install-new-relic-nodejs-agent-gae-flexible-environment)
    * AWS EC2
    * [Microsoft Azure](/docs/nodejs/nodejs-agent-on-microsoft-azure)
    * [Heroku](/docs/nodejs/nodejs-agent-on-heroku)
  </Collapser>

  <Collapser
    id="security"
    title="セキュリティ要件"
  >
    標準的な [データ収集のセキュリティ対策](/docs/accounts-partnerships/accounts/security/data-security)として、アプリサーバーはSHA-2（256ビット）をサポートしている必要があります。SHA-1はサポートされていません。
  </Collapser>

  <Collapser
    id="system"
    title="システム要件"
  >
    当社は、以下のアクティブな長期サポートスケジュールの開始により、[Node.jsリリースの最新偶数バージョン](https://nodejs.org/en/about/releases/)をサポートします。バージョンサポートポリシーは、一般的な有効期限（EOL）ポリシーを置き換えません。

    提案される時間範囲を以下に示します。実際のリリース日は異なる可能性があります。

    <table>
      <thead>
        <tr>
          <th style={{ width: "100px" }}>
            Node.jsのバージョン
          </th>

          <th>
            アクティブな長期サポート（LTS）開始日
          </th>

          <th>
            サポート付きNode.jsエージェントの初期リリース日
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            18
          </td>

          <td>
            2022年10月
          </td>

          <td>
            2022年8月3日、Node.jsエージェントのv9.0.0を使用
          </td>
        </tr>

        <tr>
          <td>
            16
          </td>

          <td>
            2021年10月
          </td>

          <td>
            Node.jsエージェントv8.0.0を含む2021年7月26日
          </td>
        </tr>

        <tr>
          <td>
            14
          </td>

          <td>
            2020年10月
          </td>

          <td>
            2020年11月9日、Node.jsエージェントv7.0.0
          </td>
        </tr>
      </tbody>
    </table>

    古いNode.jsバージョンのEOLの推奨時間範囲を以下に示します。実際のリリース日は異なる可能性があります。

    <table>
      <thead>
        <tr>
          <th style={{ width: "100px" }}>
            Node.jsのバージョン
          </th>

          <th>
            有効期限（EOL）日
          </th>

          <th>
            Node.jsエージェントのサポート終了の初期リリース日
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            12
          </td>

          <td>
            2022年4月
          </td>

          <td>
            2022年8月3日現在、Node.jsエージェントのv9を使用したNode.js 12のサポートを終了しました。
          </td>
        </tr>

        <tr>
          <td>
            10
          </td>

          <td>
            2021年4月
          </td>

          <td>
            2021年7月26日現在で、Node.jsエージェントのv8を使用したNode.js 10のサポートを終了しました。この移行の簡単な準備方法などの詳細については、[サポートフォーラムの投稿](https://discuss.newrelic.com/t/important-upcoming-changes-to-support-and-capabilities-across-browser-node-js-agent-query-builder-net-agent-apm-errors-distributed-tracing/153373)を参照してください。
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

## Node.jsを備えたインストゥルメント [#instrument]

インストール後、エージェントはサポートされているNode.jsライブラリとフレームワークのカタログを使用して自動インストゥルメントします。これにより、ウェブアプリケーションやサーバーに固有の詳細情報に即座にアクセスできます。

未対応のフレームワークまたはライブラリの場合、[Node.jsエージェントAPI](/docs/apm/agents/nodejs-agent/api-guides/nodejs-agent-api)を使用してエージェントを自身でインストゥルメントする必要があります。

<CollapserGroup>
  <Collapser
    id="Datastores"
    title="データストア"
  >
    Node.jsエージェントは、以下のデータストアに対するNode.jsアプリケーション呼び出しのパフォーマンスを監視します。

    <table>
      <thead>
        <tr>
          <th>
            データストア
          </th>

          <th>
            メモ
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            [Cassandra](https://www.npmjs.com/package/cassandra-driver)
          </td>

          <td/>
        </tr>

        <tr>
          <td>
            [Memcached](https://www.npmjs.com/package/memcached)
          </td>

          <td/>
        </tr>

        <tr>
          <td>
            [MongoDB](https://www.npmjs.com/package/mongodb)
          </td>

          <td/>
        </tr>

        <tr>
          <td>
            MySQL
          </td>

          <td>
            [mysql](https://www.npmjs.com/package/mysql)と[mysql2](https://www.npmjs.com/package/mysql2)パッケージ経由
          </td>
        </tr>

        <tr>
          <td>
            [Redis](https://www.npmjs.com/package/redis)
          </td>

          <td/>
        </tr>

        <tr>
          <td>
            [Postgres](https://www.npmjs.com/package/pg)
          </td>

          <td>
            [ネイティブ](https://www.npmjs.com/package/pg-native)と[ピュアのJavaScript](https://www.npmjs.com/package/pg-js)パッケージを含む
          </td>
        </tr>

        <tr>
          <td>
            [Prisma](https://www.prisma.io/)
          </td>

          <td>
            Prismaインストゥルメンテーションは、Prisma自体をデータストアとして扱い、Prismaが使用するように設定された基礎となるSQLまたはNoSQLをデータストアとして扱いません。つまり、メトリクスとトレースによりPrisma ORMクエリ（`find`や`updateMany`）が表示され、SQLステートメント（`SELECT`や`UPDATE`）は表示されません。例外として、未処理のPrismaクエリは、実際の未処理のSQLまたはNoSQLクエリを記録します。
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="gRPC"
    title="gRPC"
  >
    * [grpc-js](https://www.npmjs.com/package/@grpc/grpc-js)ライブラリは、単項、ストリーミング、双方向のクライアント呼び出しでサポートされています。
  </Collapser>

  <Collapser
    id="http"
    title="HTTP/1.1"
  >
    Node.jsエージェントは、ネイティブ`http`モジュールをインストゥルメントします。

    また、人気のある[undici](https://www.npmjs.com/package/undici)クライアントも実験的なサポートを受けています。undiciを使用するには、`feature_flag.undici_instrumentation = true`を`newrelic.js` [設定ファイル](/docs/apm/agents/nodejs-agent/installation-configuration/nodejs-agent-configuration/#methods-and-precedence)で設定してください。

    [aws-sdk](https://www.npmjs.com/package/aws-sdk)を使用したAmazon Web Services（AWS）へのすべての呼び出しが追跡されます。
  </Collapser>

  <Collapser
    id="instance"
    title="インスタンスの詳細"
  >
    [さまざまなデータベースとデータベースドライバを対象にインスタンスの詳細](/docs/apm/applications-menu/features/analyze-database-instance-level-performance-issues)を収集します。APMにおいて特定のインスタンスおよびデータベース情報の種類が見えるかどうかは、エージェントのバージョンによって異なります。

    New RelicのNode.jsエージェントの[バージョン1.31.0](/docs/release-notes/agent-release-notes/nodejs-release-notes/node-agent-1310)以上では、以下をサポートします。

    <table>
      <thead>
        <tr>
          <th>
            データベース
          </th>

          <th>
            `npm` モジュール名
          </th>

          <th>
            最小モジュールバージョン
          </th>

          <th>
            エージェントの最小バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            [PostgreSQL](https://www.postgresql.org/)
          </td>

          <td>
            [pg](https://www.npmjs.com/package/pg)
          </td>

          <td>
            4.0.0
          </td>

          <td>
            1.31.0
          </td>
        </tr>

        <tr>
          <td>
            [Redis](http://redis.io/)
          </td>

          <td>
            [redis](https://www.npmjs.com/package/redis)
          </td>

          <td>
            2.0.0
          </td>

          <td>
            1.31.0
          </td>
        </tr>

        <tr>
          <td>
            [MongoDB](https://www.mongodb.com/)
          </td>

          <td>
            [mongodb](https://www.npmjs.com/package/mongodb)
          </td>

          <td>
            2.1.0
          </td>

          <td>
            1.32.0
          </td>
        </tr>

        <tr>
          <td>
            [MySQL](http://www.mysql.com/)
          </td>

          <td>
            [mysql](https://www.npmjs.com/package/mysql)
          </td>

          <td>
            2.4.1
          </td>

          <td>
            1.32.0
          </td>
        </tr>

        <tr>
          <td>
            [Memcached](https://memcached.org/)
          </td>

          <td>
            [memcached](https://www.npmjs.com/package/memcached)
          </td>

          <td>
            1.0.0
          </td>

          <td>
            1.33.0
          </td>
        </tr>

        <tr>
          <td>
            [Amazon DynamoDB](https://aws.amazon.com/dynamodb/)
          </td>

          <td>
            [aws-sdk](https://www.npmjs.com/package/aws-sdk) - バージョン2と3の両方。
          </td>

          <td>
            2.380.0
          </td>

          <td>
            6.1.0
          </td>
        </tr>

        <tr>
          <td>
            [Prisma](https://prisma.io/)
          </td>

          <td>
            [@prisma/クライアント](https://www.npmjs.com/package/@prisma/client)
          </td>

          <td>
            4.0.0
          </td>

          <td>
            9.11.0
          </td>
        </tr>
      </tbody>
    </table>

    現在、New Relicエージェントにリストされてないデータストアからインスタンスレベルの情報をリクエストするには、[support.newrelic.com](https://support.newrelic.com)までお問い合わせください。
  </Collapser>

  <Collapser
    id="logging"
    title="ロギングライブラリ"
  >
    [コンテキストでAPMログ](/docs/apm/new-relic-apm/getting-started/get-started-logs-context)をサポートするために、Node.jsエージェントは次のライブラリをインストゥルメントします。

    * [winston](https://www.npmjs.com/package/winston)
    * [pino](https://www.npmjs.com/package/pino)
    * [bunyan](https://www.npmjs.com/package/bunyan)
  </Collapser>

  <Collapser
    id="messages"
    title="メッセージキュー"
  >
    [メッセージキューのインストゥルメンテーション](/docs/agents/nodejs-agent/troubleshooting/troubleshoot-message-consumers)は、[New Relic Node.js エージェントv2以上](/docs/release-notes/agent-release-notes/nodejs-release-notes)でのみ使用可能です。現在サポートされているメッセージキューのインストゥルメンテーション：

    * [amqplib](https://www.npmjs.com/package/amqplib)。
    * [Amazon SQS](https://www.npmjs.com/package/aws-sdk) - AWS SDKのバージョン2と3の両方。
    * [Amazon SNS](https://www.npmjs.com/package/aws-sdk) - AWS SDKのバージョン2と3の両方。

    他のメッセージキューライブラリには、[カスタムインストゥルメンテーション](/docs/agents/nodejs-agent/supported-features/nodejs-custom-instrumentation#message-client)を使用します。
  </Collapser>

  <Collapser
    id="langtech"
    title="対応言語とテクノロジー"
  >
    [TypeScript](https://www.npmjs.com/package/typescript)はJavaScriptにコンパイルできるプログラミング言語です。インストール後、Node.jsエージェントはTypeScriptアプリを自動インストゥルメントし、すぐにパフォーマンスデータにアクセスできるようにします。

    [ESモジュールは](https://nodejs.org/api/esm.html#introduction)、共有/再利用のためにJavaScriptコードをパッケージ化するための公式標準です。Node.jsエージェントは、Node.jsバージョン16.12.0以降およびエージェントのバージョン9.1.0以降を実行する、ESモジュールアプリケーションの**実験的**サポートを提供します。以降およびエージェントのバージョン9.1.0以降追加情報と手順については、[ESモジュールのドキュメント](/docs/apm/agents/nodejs-agent/installation-configuration/es-modules)を参照してください。
  </Collapser>

  <Collapser
    id="support"
    title="サポートされているNode.jsフレームワーク"
  >
    * [Express](https://www.npmjs.com/package/express) 4.6.0以上
    * [Restify](https://www.npmjs.com/package/restify)
    * [Connect](https://www.npmjs.com/package/connect)
    * [Hapi](https://www.npmjs.com/package/hapi)
    * [Koa](https://www.npmjs.com/package/koa) 2.0.0以上（エージェントとともに[外部モジュール](https://github.com/newrelic/node-newrelic-koa)がロードされます）
    * [Fastify](https://www.npmjs.com/package/fastify)
    * [Next.js](https://www.npmjs.com/package/next) 12.0.9以降（ミドルウェア インストゥルメンテーションには12.2.0以降が必要）

    サポートされているフレームワークをデフォルトのルーターとともに使用している場合、Node.jsエージェントはフレームワークのルート名をそのまま読み取ることができます。ただし、フレームワークが提供する名前より固有な名前が必要な場合は、New Relicが[Node.jsトランザクションネーミングAPI](/docs/nodejs/nodejs-transaction-naming-api) によって提供する1つ以上のツールを使用できます。

    <Callout title="有効期限（EOL）の通知">
      2021年11月に、いくつかの機能のサポートを終了しました。これには、Node.jsエージェント用のHapi 19.2より前のOracle Driver PackageとHapiバージョンが含まれています。この移行の簡単な準備方法などの詳細については、[サポートフォーラムの投稿](https://discuss.newrelic.com/t/important-upcoming-changes-to-capabilities-and-support-across-node-agents-suggested-pagerduty-responders-incident-workflows-and-kubernetes-instrumentation/164481?u=dholloran)を参照してください。
    </Callout>
  </Collapser>
</CollapserGroup>

## エージェントを他のNew Relic機能に接続する [#digital-intelligence-platform]

Node.jsエージェントはその他の機能と統合し、スタック全体でのオブザーバビリティを実現します。

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        製品
      </th>

      <th>
        インテグレーション
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        [ブラウザのモニタリング](/docs/browser/new-relic-browser/getting-started/introduction-new-relic-browser)
      </td>

      <td>
        [自動インストゥルメンテーションを有効化](/docs/browser/new-relic-browser/installation/install-new-relic-browser-agent#select-apm-app)すると、Node.jsエージェントはBrowserモニタリングの利点を追加できます。Browserモニタリングのインジェクションを有効にした後、[Node.jsエージェントを使用してBrowserモニタリングをインストールするためのガイド](/docs/agents/nodejs-agent/extend-your-instrumentation/browser-monitoring-nodejs-agent/)に従うだけです。これらの手順が完了したら、[APMの**概要**ページ](/docs/apm/applications-menu/monitoring/apm-overview-page)でBrowserデータを表示、特定のアプリに対してAPMとBrowserデータ間を素早く切り替えできます。設定オプションと手動インストゥルメンテーションについては、[BrowserモニタリングとNode.jsエージェント](/docs/agents/nodejs-agent/supported-features/new-relic-browser-nodejs-agent)を参照してください。
      </td>
    </tr>

    <tr>
      <td>
        [インフラストラクチャのモニタリング](/docs/infrastructure/new-relic-infrastructure/getting-started/introduction-new-relic-infrastructure)
      </td>

      <td>
        インフラストラクチャとAPMエージェントを同じホストにインストールすると、自動的に相互に検出します。その後、APM UIにホストのリストを表示し、インフラストラクチャUIでAPMアプリでインフラストラクチャホストをフィルタリングできます。詳細については、[インフラストラクチャモニターにおけるAPMデータ](/docs/infrastructure/new-relic-infrastructure/data-instrumentation/new-relic-apm-data-infrastructure)を参照してください。
      </td>
    </tr>

    <tr>
      <td>
        [New Relicのダッシュボード](/docs/insights/use-insights-ui/getting-started/introduction-new-relic-insights)
      </td>

      <td>
        Node.jsエージェントは、NRQLクエリの[デフォルトのイベントと属性](/docs/insights/insights-data-sources/default-events-attributes/apm-default-event-attributes)を送信します。高度な分析のために、[カスタムイベントを記録](/docs/insights/insights-data-sources/custom-data/insert-custom-events-new-relic-apm-agents)することもできます。
      </td>
    </tr>

    <tr>
      <td>
        [合成のモニタリング](/docs/synthetics/new-relic-synthetics/getting-started/introduction-new-relic-synthetics)
      </td>

      <td>
        [合成トランザクショントレース](/docs/synthetics/new-relic-synthetics/using-monitors/collect-synthetic-transaction-traces)は、合成モニターからのリクエストを基盤となるAPMトランザクションに接続します。
      </td>
    </tr>
  </tbody>
</table>