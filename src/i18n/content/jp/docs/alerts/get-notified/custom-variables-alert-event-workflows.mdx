---
title: ワークフロー変数
tags:
  - Alerts
  - workflows
  - Enrichments
  - Issues
metaDescription: 'For New Relic alerts, explanations of the variables used for workflows.'
freshnessValidatedDate: never
translationType: machine
---

New Relic アラート[ワークフロー](/docs/alerts/get-notified/alert-event-workflows)に使用される変数の説明。

<img title="Alerts workflow variables" alt="Alerts workflow variables" src="/images/alerts_screenshot-crop_workflow-variables.webp" />

<figcaption>
  蓄積条件記述ワークフローを作成するとき、変数を使用すると、a) どのような種類の問題が通知を生成するか、b) 通知ペイロードの内容に何が含まれるかを制御することができます。このスクリーンショットは、通知ペイロード セクションを示しています。
</figcaption>

## 変数 [#variables]

ワークフロー変数とその説明は次のとおりです。

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        キー (グループ化に使用される最初の単語)
      </th>

      <th>
        表示名 (グループ化に使用される最初の単語)
      </th>

      <th>
        説明
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `accumulations.conditionDescription`
      </td>

      <td>
        conditionDescription
      </td>

      <td>
        カスタム違反の説明のリスト。
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.conditionFamilyId`
      </td>

      <td>
        conditionFamilyId
      </td>

      <td>
        条件 ID のリスト。
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.conditionName`
      </td>

      <td>
        アラート条件名
      </td>

      <td>
        New Relic の条件が違反されました。
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.conditionProduct`
      </td>

      <td>
        アラート状態の製品
      </td>

      <td>
        New Relic の状態タイプ。
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.deepLinkUrl`
      </td>

      <td>
        違反コールバック URL
      </td>

      <td>
        関連する違反コールバックへの直接リンク。
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.evaluation.metricValueFunction`
      </td>

      <td>
        カスタム指標値関数
      </td>

      <td>
        カスタムメトリック値関数。
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.evaluation.name`
      </td>

      <td>
        <InlinePopover type="apm" />条件メトリクス名
      </td>

      <td>
        <InlinePopover type="apm" />条件メトリクス名
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.nrqlQuery`
      </td>

      <td>
        NRQLクエリ
      </td>

      <td>
        条件のNRQLクエリ。
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.origins`
      </td>

      <td>
        発行元
      </td>

      <td>
        イベントを作成したNew Relicまたはサードパーティのソース。
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.policyName`
      </td>

      <td>
        アラートポリシー名
      </td>

      <td>
        ポリシー名のリスト。
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.runbookUrl`
      </td>

      <td>
        ランブックの URL
      </td>

      <td>
        Runbook URL のリスト。
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.sources`
      </td>

      <td>
        発行元
      </td>

      <td>
        イベントを報告するシステム。
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.tag.account`
      </td>

      <td>
        New Relic アカウント
      </td>

      <td>
        New Relic アカウント。
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.tag.affectedService`
      </td>

      <td>
        影響を受けるサービス
      </td>

      <td>
        影響を受けるサービスのリスト。
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.tag.assignmentGroup`
      </td>

      <td>
        担当グループ
      </td>

      <td>
        割り当てグループのリスト。
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.tag.causeService`
      </td>

      <td>
        コーズサービス
      </td>

      <td>
        原因サービスのリスト。
      </td>
    </tr>

    <tr>
      <td>
        `acknowledgedBy`
      </td>

      <td>
        承認者
      </td>

      <td>
        問題を認識したユーザー。
      </td>
    </tr>

    <tr>
      <td>
        `activatedAt`
      </td>

      <td>
        問題が発生した時刻
      </td>

      <td>
        問題のアクティブ化のタイムスタンプ。
      </td>
    </tr>

    <tr>
      <td>
        `annotations.description`
      </td>

      <td>
        問題の説明
      </td>

      <td>
        問題の説明のリスト。
      </td>
    </tr>

    <tr>
      <td>
        `annotations.title`
      </td>

      <td>
        問題のタイトル
      </td>

      <td>
        問題のタイトルの一覧。
      </td>
    </tr>

    <tr>
      <td>
        `annotations.wildcard`
      </td>

      <td>
        アラート ファセット
      </td>

      <td>
        アラート ファセット。
      </td>
    </tr>

    <tr>
      <td>
        `closedBy`
      </td>

      <td>
        閉店日
      </td>

      <td>
        問題をクローズしたユーザーの ID。
      </td>
    </tr>

    <tr>
      <td>
        `closedAt`
      </td>

      <td>
        課題の終了日
      </td>

      <td>
        問題が終了したときのタイムスタンプ。問題がクローズされていない場合は null。
      </td>
    </tr>

    <tr>
      <td>
        `closedIncidentsCount`
      </td>

      <td>
        閉店イベント数
      </td>

      <td>
        この号でクローズされたイベントの合計数。
      </td>
    </tr>

    <tr>
      <td>
        `createdAt`
      </td>

      <td>
        課題の作成日
      </td>

      <td>
        問題作成時のタイムスタンプ。
      </td>
    </tr>

    <tr>
      <td>
        `dataMLModules.components`
      </td>

      <td>
        機械学習コンポーネント
      </td>

      <td>
        New Relic アラートの機械学習コンポーネントのリスト。
      </td>
    </tr>

    <tr>
      <td>
        `dataMLModules.goldenSignals`
      </td>

      <td>
        機械学習のゴールデンシグナル
      </td>

      <td>
        New Relic アラートの機械学習ゴールデンシグナルのリスト。
      </td>
    </tr>

    <tr>
      <td>
        `dataMLModules.suggestedResponders`
      </td>

      <td>
        機械学習が提案する応答者
      </td>

      <td>
        (非推奨) New Relic アラートの機械学習による推奨応答者の一覧。
      </td>
    </tr>

    <tr>
      <td>
        `entitiesData.entities`
      </td>

      <td>
        影響を受けるエンティティのデータ
      </td>

      <td>
        影響を受けるエンティティの名前、ID、タイプ、種類を説明するオブジェクトのリスト。
      </td>
    </tr>

    <tr>
      <td>
        `entitiesData.ids`
      </td>

      <td>
        影響を受けるエンティティ ID
      </td>

      <td>
        影響を受けるすべてのエンティティ ID のセット。
      </td>
    </tr>

    <tr>
      <td>
        `entitiesData.kinds`
      </td>

      <td>
        影響を受けるエンティティの種類
      </td>

      <td>
        影響を受けるすべてのエンティティの種類のセット。
      </td>
    </tr>

    <tr>
      <td>
        `entitiesData.names`
      </td>

      <td>
        影響を受けるエンティティ名
      </td>

      <td>
        影響を受けるすべてのエンティティ名のセット。
      </td>
    </tr>

    <tr>
      <td>
        `entitiesData.types`
      </td>

      <td>
        影響を受けるエンティティのタイプ
      </td>

      <td>
        影響を受けるすべてのエンティティ タイプのセット。
      </td>
    </tr>

    <tr>
      <td>
        `impactedEntitiesCount`
      </td>

      <td>
        影響を受けるエンティティの数
      </td>

      <td>
        この問題の影響を受けるエンティティの数。
      </td>
    </tr>

    <tr>
      <td>
        `incidentIds`
      </td>

      <td>
        インシデントID
      </td>

      <td>
        すべての号の集計イベントのリスト。
      </td>
    </tr>

    <tr>
      <td>
        `isCorrelated`
      </td>

      <td>
        問題は相関しています
      </td>

      <td>
        問題が相関している場合 ( `true` 、 `false` )。
      </td>
    </tr>

    <tr>
      <td>
        `isAcknowledged`
      </td>

      <td>
        問題は認識されています
      </td>

      <td>
        問題が認識された場合 ( `true` 、 `false` )。
      </td>
    </tr>

    <tr>
      <td>
        `issueAckUrl`
      </td>

      <td>
        発行確認URL
      </td>

      <td>
        問題を確認するための直接リンク。
      </td>
    </tr>

    <tr>
      <td>
        `issueCloseUrl`
      </td>

      <td>
        クローズURLを発行する
      </td>

      <td>
        問題を解決するための直接リンク。
      </td>
    </tr>

    <tr>
      <td>
        `issuePageUrl`
      </td>

      <td>
        発行ページのURL
      </td>

      <td>
        関連する問題ページへの直接リンク。
      </td>
    </tr>

    <tr>
      <td>
        `issueActivatedAtUtc`
      </td>

      <td>
        Issue ActivatedAt UTC string
      </td>

      <td>
        UTC での発行アクティベーションの文字列形式。
      </td>
    </tr>

    <tr>
      <td>
        `issueClosedAtUtc`
      </td>

      <td>
        課題の終了時刻（UTC） string
      </td>

      <td>
        UTC での問題終了の文字列形式。
      </td>
    </tr>

    <tr>
      <td>
        `issueCreatedAtUtc`
      </td>

      <td>
        Issue CreatedAt UTC string
      </td>

      <td>
        UTC での問題作成の文字列形式。
      </td>
    </tr>

    <tr>
      <td>
        `issueAcknowledgedAt`
      </td>

      <td>
        AcknowledgedAt 文字列を発行する
      </td>

      <td>
        UTC で確認された問題の文字列形式。
      </td>
    </tr>

    <tr>
      <td>
        `issueClosedAt`
      </td>

      <td>
        ClosedAt 文字列を発行する
      </td>

      <td>
        UTC での問題終了の文字列形式。
      </td>
    </tr>

    <tr>
      <td>
        `issueDurationMs`
      </td>

      <td>
        発行期間 (ミリ秒)
      </td>

      <td>
        問題が開始されてからのミリ秒数。
      </td>
    </tr>

    <tr>
      <td>
        `issueDurationText`
      </td>

      <td>
        テキストの問題の期間
      </td>

      <td>
        問題の期間を人間にわかりやすく表現したもの。
      </td>
    </tr>

    <tr>
      <td>
        `issueId`
      </td>

      <td>
        課題ID
      </td>

      <td>
        問題の一意の ID。
      </td>
    </tr>

    <tr>
      <td>
        `issueTitle`
      </td>

      <td>
        問題のタイトル
      </td>

      <td>
        号のタイトル。通常は最初のイベントのタイトルです。
      </td>
    </tr>

    <tr>
      <td>
        `issueUpdatedAt`
      </td>

      <td>
        UpdatedAt UTC 文字列を発行します
      </td>

      <td>
        問題更新のタイムスタンプ (UTC)。
      </td>
    </tr>

    <tr>
      <td>
        `labels.accountIds`
      </td>

      <td>
        環境に関連付けられたアカウント ID を発行する
      </td>

      <td>
        New Relic は環境に関連付けられたアカウント ID にアラートを出します。
      </td>
    </tr>

    <tr>
      <td>
        `labels.aggregationKeys`
      </td>

      <td>
        アラート集約キーにラベルを付ける
      </td>

      <td>
        New Relic集中イベント検出オリジナルのインシデントID。
      </td>
    </tr>

    <tr>
      <td>
        `labels.originalAccountIds`
      </td>

      <td>
        アカウントIDにラベルを付ける
      </td>

      <td>
        イベント検出ポリシーのアカウントID。
      </td>
    </tr>

    <tr>
      <td>
        `labels.policyIds`
      </td>

      <td>
        アラートポリシーIDにラベルを付ける
      </td>

      <td>
        以降を生成したイベント検出ポリシー ID。
      </td>
    </tr>

    <tr>
      <td>
        `abels.targetId`
      </td>

      <td>
        ターゲット ID
      </td>

      <td>
        ターゲットID。
      </td>
    </tr>

    <tr>
      <td>
        `mutingState`
      </td>

      <td>
        ミューティング状態を発行する
      </td>

      <td>
        問題の計算されたミュート状態 ( `MUTED` 、 `NOT_MUTED` )。
      </td>
    </tr>

    <tr>
      <td>
        `nrAccountId`
      </td>

      <td>
        アカウントID
      </td>

      <td>
        アカウントID。
      </td>
    </tr>

    <tr>
      <td>
        `openIncidentsCount`
      </td>

      <td>
        オープンイベント数
      </td>

      <td>
        この号に関するオープンなイベントの合計数。
      </td>
    </tr>

    <tr>
      <td>
        `owner`
      </td>

      <td>
        オーナー
      </td>

      <td>
        問題を認めた人。
      </td>
    </tr>

    <tr>
      <td>
        `policyUrl`
      </td>

      <td>
        アラートポリシーのURL
      </td>

      <td>
        アラート ポリシーの URL。
      </td>
    </tr>

    <tr>
      <td>
        `priority`
      </td>

      <td>
        発行の優先度
      </td>

      <td>
        問題の優先度レベル ( `CRITICAL` 、 `HIGH` 、 `MEDIUM` 、 `LOW` )。
      </td>
    </tr>

    <tr>
      <td>
        `priorityText`
      </td>

      <td>
        発行優先テキスト
      </td>

      <td>
        発行の優先度は小文字 ( `Critical` 、 `High` 、 `Medium` 、 `Low` ) です。
      </td>
    </tr>

    <tr>
      <td>
        `realIssueCount`
      </td>

      <td>
        発行数
      </td>

      <td>
        発行数。
      </td>
    </tr>

    <tr>
      <td>
        `state`
      </td>

      <td>
        問題の状態
      </td>

      <td>
        問題のライフサイクル状態 ( `CREATED` 、 `ACTIVATED` 、 `CLOSED` )。
      </td>
    </tr>

    <tr>
      <td>
        `stateText`
      </td>

      <td>
        発行状態のテキスト
      </td>

      <td>
        問題のライフサイクル状態を小文字で示します ( `active` (オープン済み)、 `closed` )。
      </td>
    </tr>

    <tr>
      <td>
        `status`
      </td>

      <td>
        発行相関ステータス
      </td>

      <td>
        問題の相関ステータス。
      </td>
    </tr>

    <tr>
      <td>
        `totalIncidents`
      </td>

      <td>
        イベント累計数
      </td>

      <td>
        問題内で集計または関連付けられている集中イベントの数。
      </td>
    </tr>

    <tr>
      <td>
        `triggeredAt`
      </td>

      <td>
        発生した問題
      </td>

      <td>
        トリガーされた問題通知のタイムスタンプ。
      </td>
    </tr>

    <tr>
      <td>
        `triggerEvent`
      </td>

      <td>
        発行通知トリガーイベント
      </td>

      <td>
        通知トリガー イベント ( `STATE_CHANGE` 、 `INCIDENT_ADDED` 、 `INCIDENT_CLOSED` 、 `CLOSE_INACTIVE` 、 `CLOSE_TTL` 、 `USER_ACTION` 、 `PRIORITY_CHANGED` 、 `MERGE_REQUEST` )。
      </td>
    </tr>

    <tr>
      <td>
        `updatedAt`
      </td>

      <td>
        問題の更新日時
      </td>

      <td>
        最後に更新された問題のタイムスタンプ。
      </td>
    </tr>

    <tr>
      <td>
        `violationChartUrl`
      </td>

      <td>
        違反グラフの URL
      </td>

      <td>
        違反チャートの画像へのリンク。
      </td>
    </tr>

    <tr>
      <td>
        `workflowName`
      </td>

      <td>
        ワークフロー名
      </td>

      <td>
        トリガーされたワークフローの名前。
      </td>
    </tr>
  </tbody>
</table>

## ワークフローのデータエンリッチメントの例 [#enrichment-examples]

条件に違反したエンティティに関する情報を取得するには、クエリの `WHERE` ステートメントの一部としてカスタム変数を使用できます。たとえば、EC2 インスタンスの状態を取得するには、次を使用します。

```sql
SELECT latest(ec2State) FROM ComputeSample WHERE provider = 'Ec2Instance' AND entityName IN {{entitiesData.names}}
```

クエリは単一のフィールドのみを使用するため、このクエリは単一の値（たとえば、 `stopped` ）を返します。変数`entitiesData.names`は、エンティティの識別子のリストです。他のエンティティプロパティも同じように使用できます。

カスタム変数を使用することで、ワークフローのデータクエリをさまざまな方法で強化することができます。

<CollapserGroup>
  <Collapser id="application-drop" title="アプリケーションのトラフィックが低下したときのクエリ">
    アプリケーションへのトラフィックがいつ低下するかを知りたい場合があります。 アプリケーション名の代わりに`{{entitiesData.names}}`変数を使用できます。

    ```sql
    SELECT count(*) FROM Transaction WHERE appName IN {{entitiesData.names}} SINCE 10 minutes ago
    ```
  </Collapser>

  <Collapser id="non-web-transactions-time" title="非ウェブ取引時間">
    影響を受ける企業がリクエスト/トランザクションの処理に費やす平均時間(プロセスタイプ別に分類)

    ```sql
    SELECT average(apm.service.overview.other) * 1000 FROM Metric WHERE appName IN {{entitiesData.names}} FACET `segmentName` TIMESERIES
    ```
  </Collapser>

  <Collapser id="throughput" title="スループット">
    影響を受けるエニティーが処理する1分あたりのリクエスト数

    ```sql
    SELECT rate(count(apm.service.transaction.duration), 1 minute) AS 'Non-web throughput' FROM Metric WHERE (appName IN {{entitiesData.names}}) AND (transactionType = 'Other') TIMESERIES
    ```
  </Collapser>

  <Collapser id="error-rate" title="エラー率">
    影響を受けた企業が処理した総リクエスト数に対するエラーの割合

    ```sql
    SELECT count(apm.service.error.count) / count(apm.service.transaction.duration) AS 'Non-web errors' FROM Metric WHERE (appName IN {{entitiesData.names}}) AND (transactionType = 'Other') TIMESERIES
    ```
  </Collapser>

  <Collapser id="transaction-failures" title="トランザクションに失敗した場合の問い合わせ">
    アプリケーションのトランザクションがいつ失敗したかを知りたい場合があります。 この文章は、アラートポリシー値に違反した、 `{{entitiesData.names}}`変数によってフィルタリングされた最新の HTTP ステータス コード応答を示します。

    ```sql
    SELECT latest(http.statusCode), average(duration) FROM Transaction WHERE appName IN {{entitiesData.names}}
    ```
  </Collapser>

  <Collapser id="kubernetes-consumption" title="Query for Kubernetesの消費の概要">
    このようなクエリを使用して、Kubernetesポッド内のエンティティの数とそのインジェスト時間を取得します。どのエンティティの取り込み時間が大きいかを特定することで、その問題への対処を開始し、潜在的な改善策を見つけることができます。

    ```sql
    SELECT uniqueCount(displayName), sum(nr.ingestTimeMs) FROM K8sServiceSample WHERE entityName IN {{entitiesData.names}} SINCE 1 hour ago
    ```
  </Collapser>

  <Collapser id="tags-from-facet" title="トリガーファセット値を使用したクエリ">
    アラート条件書き込みがファセット化されている場合は、まとめイベントをトリガーする`FACET`値を使用できます。 たとえば、アラート条件が次の場合:

    ```sql
    SELECT average(duration) FROM BrowserInteraction FACET appName
    ```

    次のように特定の`appName`を使用してクエリを実行できます。

    ```sql
    SELECT uniques(host) FROM Transaction WHERE appName IN {{accumulations.tag.appName}}
    ```
  </Collapser>
</CollapserGroup>