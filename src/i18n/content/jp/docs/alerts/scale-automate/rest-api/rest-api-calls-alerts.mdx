---
title: アラートについてのREST APIコール
tags:
  - Alerts
  - REST API alerts
metaDescription: How to use the New Relic REST API Explorer to add and manage alerts.
freshnessValidatedDate: never
translationType: human
---

当社のREST APIは、New RelicのオリジナルAPIで、New Relicのアラート設定をプログラムで設定します（[当社の優先APIであるNerdGraphの詳細をご覧ください](/docs/alerts-applied-intelligence/new-relic-alerts/advanced-alerts/alerts-nerdgraph/nerdgraph-api-examples)）。

[REST APIエクスプローラー](/docs/apm/apis/api-explorer-v2/getting-started-new-relics-api-explorer)には、使用可能なAPIコールごとに`curl`リクエストフォーマット、使用可能なパラメーター、取りうるレスポンス状態コード、JSONレスポンス構造も含まれます。[UI でアラート条件を作成する](/docs/alerts/create-alert/create-alert-condition/alert-conditions/)こともできます。

## REST APIを使用する前に [#before-start]

REST APIを使用してアラートデータを管理する前に、 [NerdGraph APIを使用したアラートの使用の概要](/docs/alerts/scale-automate/nerdgraph/nerdgraph-api-examples/)ドキュメントをご確認ください。

インフラストラクチャのアラートについては、 [InfrastructureモニタリングアラートのREST API](/docs/infrastructure/new-relic-infrastructure/infrastructure-alert-conditions/rest-api-calls-new-relic-infrastructure-alerts/)を参照してください。

## REST APIで使用可能なデータと機能 [#data]

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        <DNT>
          **REST API functions**
        </DNT>
      </th>

      <th>
        <DNT>
          **Comments**
        </DNT>
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        アカウントデータを表示
      </td>

      <td>
        一般に、どの[ロール](/docs/accounts-partnerships/accounts/account-setup/users-roles)でも、<DNT>**GET &gt; List**</DNT>関数を使用可能な<InlinePopover type="userKey" />を使用して、アラートデータを<DNT>**view**</DNT>ことができます。アカウントの所有者と管理者は、自身のAPIキーを使用できます。

        リストの出力には[ページ番号](/docs/apis/rest-api-v2/requirements/pagination-api-output)が付けられることに注意してください。使用可能な機能：

        * [アラートポリシー](#policies-list)
        * [APM、ブラウザ監視、モバイル監視](#conditions-list)の条件（[一部制限あり](#excluded)）
        * [外部サービス](#ext-conditions-list)の条件
        * [合成モニタリング](#synthetics-conditions)の条件
        * [複数の場所における合成モニタリング](#multilocation-synthetics-conditions)の条件
        * NRQLの条件 （[いくつかの制限が適用されます。](#excluded)）
        * [イベント](#events)
        * [インシデント](/docs/alerts/organize-alerts/specify-when-alerts-create-incidents/)
      </td>
    </tr>

    <tr>
      <td>
        アカウントデータのメンテナンス
      </td>

      <td>
        アカウントに`Owner`または`Admin`のロールがある場合、<DNT>**and**</DNT>[ユーザーキー](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key)およびアラート管理の権限が付与されたカスタムロールがある場合、ユーザーキーを使用して、<DNT>**POST &gt; Create**</DNT> 、 <DNT>**PUT &gt; Add**</DNT> 、 <DNT>**PUT &gt; Update**</DNT> 、 <DNT>**DELETE**</DNT>を含むすべてのメンテナンス機能を利用できます。
      </td>
    </tr>
  </tbody>
</table>

## REST APIから除外される条件 [#excluded]

以下の条件には、APIで使用可能なエンドポイントはありません。

* APM：ウェブトランザクションパーセンタイル、条件ターゲティングラベル、異常
* NRQL：異常

## アラートポリシー [#alert-policies]

これらのAPI関数には、[ポリシー](https://api.newrelic.com/docs/#/Alerts%20Policies)を簡単に作成、削除、リストすることができるAPIエクスプローラーへのリンクが含まれます。

<Callout variant="important">
  お客様の組織がEUデータセンターでデータをホストする場合は、適切な[EU地域アカウント向けAPIエンドポイント](/docs/using-new-relic/welcome-new-relic/getting-started/introduction-eu-region-data-center#endpoints)を使用していることを確認してください。
</Callout>

<CollapserGroup>
  <Collapser id="policies-create" title="新しいポリシーを作成する">
    新しいポリシーを追加するには、[ユーザーキー](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key)を使用して、APIコールに以下の2つの値を含めます。

    <table>
      <thead>
        <tr>
          <th style={{ width: "230px" }}>
            <DNT>
              **Required values**
            </DNT>
          </th>

          <th>
            <DNT>
              **Definition**
            </DNT>
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `incident_preference`
          </td>

          <td>
            アラートが[インシデントを作成する](/docs/alerts/organize-alerts/specify-when-alerts-create-incidents/)方法を決めます。以下のいずれかの方法で行う必要があります。

            * `PER_POLICY` （デフォルト）：[ポリシー](/docs/alerts/organize-alerts/specify-when-alerts-create-incidents/#preference-policy)別のロールアップ。
            * `PER_CONDITION`：[条件](/docs/alerts/organize-alerts/specify-when-alerts-create-incidents/#preference-condition)別のロールアップ。
            * `PER_CONDITION_AND_TARGET`：[ターゲットと条件](/docs/alerts/organize-alerts/specify-when-alerts-create-incidents/#preference-target)別のロールアップ。
          </td>
        </tr>

        <tr>
          <td>
            [ポリシー `name`](/docs/alerts/organize-alerts/create-edit-or-find-alert-policy/)
          </td>

          <td>
            ポリシー`name`は必須です。変更しないままにすると、`string`というポリシーが作成されます。
          </td>
        </tr>
      </tbody>
    </table>

    <DNT>
      **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Policies/post_alerts_policies_json) &gt; Alerts Policies &gt; POST &gt; Create**
    </DNT>

    ```shell
    curl -X POST 'https://api.newrelic.com/v2/alerts_policies.json' \
         -H "$API_KEY" -i \
         -H 'Content-Type: application/json' \
         -d \
    '{
      "policy": {
        "incident_preference": "string",
        "name": "string"
      }
    }'
    ```
  </Collapser>

  <Collapser id="policies-update" title="ポリシーを更新する">
    このAPIを使用して、既存のポリシーの`name`と`incident_preference`を更新します。[ユーザーキー](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key)が必要になります。

    <table>
      <thead>
        <tr>
          <th style={{ width: "230px" }}>
            <DNT>
              **Required values**
            </DNT>
          </th>

          <th>
            <DNT>
              **Definition**
            </DNT>
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `id`
          </td>

          <td>
            ポリシーのIDを確認するには、以下のオプションのいずれかを使用します。

            * UIから：ポリシーのUIページで、ポリシー名の下にあるIDを検索します。
            * APIを使用する場合：[リストポリシーAPI](/docs/alerts/rest-api-alerts/new-relic-alerts-rest-api/rest-api-calls-new-relic-alerts#policies-list)を使用します。
          </td>
        </tr>

        <tr>
          <td>
            `incident_preference`
          </td>

          <td>
            アラートが[インシデントを作成する](/docs/alerts/organize-alerts/specify-when-alerts-create-incidents/)方法を決めます。以下のいずれかの方法で行う必要があります。

            * `PER_POLICY` （デフォルト）：[ポリシー](/docs/alerts/organize-alerts/specify-when-alerts-create-incidents/#preference-policy)別のロールアップ。
            * `PER_CONDITION`：[条件](/docs/alerts/organize-alerts/specify-when-alerts-create-incidents/#preference-condition)別のロールアップ。
            * `PER_CONDITION_AND_TARGET`：[条件と信号](/docs/alerts/organize-alerts/specify-when-alerts-create-incidents/#preference-signal)別のロールアップ。
          </td>
        </tr>

        <tr>
          <td>
            [ポリシー `name`](/docs/alerts/organize-alerts/create-edit-or-find-alert-policy/)
          </td>

          <td>
            ポリシー`name`。`name`を変更しない場合は、デフォルトで`string`というポリシーに設定されます。

            [List policies API](/docs/alerts/rest-api-alerts/new-relic-alerts-rest-api/rest-api-calls-new-relic-alerts#policies-list)を使用して、ポリシーの正確な名前を確認します。
          </td>
        </tr>
      </tbody>
    </table>

    <DNT>
      **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Policies/put_alerts_policies__policy_id__json) &gt; Alerts Policies &gt; PUT &gt; Update**
    </DNT>

    ```shell
    curl -X PUT 'https://api.newrelic.com/v2/alerts_policies/{id}.json' \
         -H "$API_KEY" -i \
         -H 'Content-Type: application/json' \
         -d \
    '{
      "policy": {
        "incident_preference": "string",
        "name": "string"
      }
    }'
    ```
  </Collapser>

  <Collapser id="policies-delete" title="既存のポリシーを削除する">
    既存のポリシーを削除するには、[ユーザーキー](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key)を使用して、`policy_id`（<DNT>**[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Policies/get_alerts_policies_json) &gt; Alerts Policies &gt; GET &gt; List**</DNT>から入手可能）をAPIコールに含めます。

    <DNT>
      **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Policies/delete_alerts_policies__policy_id__json) &gt; Alerts Policies &gt; DELETE**
    </DNT>

    ```shell
    curl -X DELETE 'https://api.newrelic.com/v2/alerts_policies/$POLICY_ID.json' \
         -H "$API_KEY" -i
    ```
  </Collapser>

  <Collapser id="policies-list" title="既存のポリシーをリストする">
    アカウントの既存ポリシーのリストを表示するには、[ユーザーキー](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key)を使用して以下のオプションの値をAPIコールに含めます。

    * オプションのポリシー`name`フィルター

    * オプションの[ページ番号付け](/docs/apis/rest-api-v2/requirements/pagination-api-output)の値

      <DNT>
        **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Policies/get_alerts_policies_json) &gt; Alerts Policies &gt; GET &gt; List**
      </DNT>

      ```shell
      curl -X GET 'https://api.newrelic.com/v2/alerts_policies.json' \
           -H "$API_KEY" -i
      ```
  </Collapser>
</CollapserGroup>

## APM、ブラウザ、モバイルの条件 [#conditions]

このAPI関数には、ポリシーの[条件](/docs/alerts/new-relic-alerts-beta/configuring-alert-policies/define-alert-conditions)を簡単に作成、更新、削除、リストできるAPIエクスプローラーへのリンクが含まれます。こうしたコールは、以下のタイプのエンティティ向け条件となります：

* APM：アプリとキートランザクション
* Browser：アプリとキートランザクション
* Mobile：モバイルアプリ

<DNT>**Exception:**</DNT> 次のAPMの条件は、このAPIエンドポイントからは<DNT>**not available**</DNT>取得できません。

* 条件ターゲティングラベル（ダイナミックターゲティング）
* ウェブトランザクションのパーセンタイル条件
* 異常条件

<Callout variant="important">
  APIエクスプローラーは、[外部サービス](#ext-services-conditions)（APMおよびモバイル）や[外形監視](#synthetics-conditions)など、<DNT>**separate endpoints**</DNT>個別のエンドポイントを使用して他のタイプの条件に関する情報を提供します。検索または更新中にすべてのタイプのアラート条件を考慮します。アカウントがEUデータセンターでデータをホストする場合は、適切な[EUリージョンアカウント向けAPIエンドポイント](/docs/using-new-relic/welcome-new-relic/getting-started/introduction-eu-region-data-center#endpoints)を使用していることを確認してください。
</Callout>

<CollapserGroup>
  <Collapser id="conditions-create" title="ポリシーの条件を作成する">
    ポリシーに条件を追加するには、以下の値をAPIコールに含めます：

    * ご利用の<InlinePopover type="userKey" />

    * `policy_id`（<DNT>**[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Policies/get_alerts_policies_json) &gt; Alerts Policies &gt; GET &gt; List**</DNT>から入手可能）

    * APIコールで必須とされる`condition`値（APIエクスプローラーページと[アラート条件のAPI用語集](/docs/alerts/new-relic-alerts/rest-api-alerts/alerts-conditions-api-field-names)で説明されています）

      <DNT>
        **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Conditions/post_alerts_conditions_policies__policy_id__json) &gt; Alerts Conditions &gt; POST &gt; Create**
      </DNT>

      ```shell
      curl -X POST 'https://api.newrelic.com/v2/alerts_conditions/policies/$POLICY_ID.json' \
           -H "$API_KEY" -i \
           -H 'Content-Type: application/json' \
           -d \
      '{
        "condition": {
          "type": "string",
          "name": "string",
          "enabled": boolean,
          "entities": [
            integer
          ],
          "metric": "string",
          "gc_metric": "string",
          "condition_scope": "string",
          "violation_close_timer": integer,
          "runbook_url": "string",
          "terms": [
            {
              "duration": "string",
              "operator": "string",
              "priority": "string",
              "threshold": "string",
              "time_function": "string"
            }
          ],
          "user_defined": {
            "metric": "string",
            "value_function": "string"
          }
        }
      }'
      ```

      JSONレスポンスは、条件の更新や削除に必要な条件`id`を返します。条件`id`は<DNT>**[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Conditions/get_alerts_conditions_json) &gt; Alerts Conditions &gt; GET &gt; List**</DNT>からも表示できます。
  </Collapser>

  <Collapser id="conditions-update" title="ポリシーの条件を更新する">
    ポリシーの条件を更新するには、以下の値をAPIコールに含めます：

    * [ユーザーキー](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key)

    * 条件`id`（<DNT>**[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Conditions/get_alerts_conditions_json) &gt; Alerts Conditions &gt; GET &gt; List**</DNT>から入手可能）

    * APIコールで必須とされる`condition`値（APIエクスプローラーページと[アラート条件のAPI用語集](/docs/alerts/new-relic-alerts/rest-api-alerts/alerts-conditions-api-field-names)で説明されています）

      <DNT>
        **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Conditions/put_alerts_conditions__condition_id__json) &gt; Alerts Conditions &gt; PUT &gt; Update**
      </DNT>

      ```shell
      curl -X PUT 'https://api.newrelic.com/v2/alerts_conditions/$CONDITION_ID.json' \
           -H "$API_KEY" -i \
           -H 'Content-Type: application/json' \
           -d \
      '{
        "condition": {
          "type": "string",
          "name": "string",
          "enabled": boolean,
          "entities": [
            integer
          ],
          "metric": "string",
          "metric": "string",
          "gc_metric": "string",
          "condition_scope": "string",
          "violation_close_timer": integer,
          "runbook_url": "string",
          "terms": [
            {
              "duration": "string",
              "operator": "string",
              "priority": "string",
              "threshold": "string",
              "time_function": "string"
            }
          ],
          "user_defined": {
            "metric": "string",
            "value_function": "string"
          }
        }
      }'
      ```
  </Collapser>

  <Collapser id="conditions-delete" title="ポリシーから条件を削除する">
    ポリシーから条件を削除するには、以下の値をAPIコールに含めます：

    * [ユーザーキー](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key)

    * `condition_id`（<DNT>**[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Conditions/get_alerts_conditions_json) &gt; Alerts Conditions &gt; GET &gt; List**</DNT>から入手可能）

      <DNT>
        **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Conditions/delete_alerts_conditions__condition_id__json) &gt; Alerts Conditions &gt; DELETE &gt; Delete**
      </DNT>

      ```shell
      curl -X DELETE 'https://api.newrelic.com/v2/alerts_conditions/$CONDITION_ID.json' \
           -H "$API_KEY" -i
      ```
  </Collapser>

  <Collapser id="conditions-list" title="ポリシーの既存の条件をリストする">
    ご利用のポリシーについて既存条件の一覧を表示するには、[ユーザーキー](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key)、およびAPIコールの関連[`policy_id`](#policies-list)を使用します。

    <DNT>
      **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Conditions/get_alerts_conditions_json) &gt; Alerts Conditions &gt; GET &gt; List**
    </DNT>

    ```shell
    curl -X GET 'https://api.newrelic.com/v2/alerts_conditions.json?policy_id=$POLICY_ID' \
         -H "$API_KEY" -i
    ```
  </Collapser>
</CollapserGroup>

## NRQLの条件 [#conditions-nrql]

このAPI関数には、ポリシーのNRQL[条件](/docs/alerts/new-relic-alerts-beta/configuring-alert-policies/define-alert-conditions)を簡単に作成、更新、削除、リストできるAPIエクスプローラーへのリンクが含まれます。

<DNT>**Exception:**</DNT> NRQL異常の条件は、このエンドポイントからは<DNT>**not available**</DNT>入手できません。

<Callout variant="important">
  お客様の組織がEUデータセンターでデータをホストする場合は、適切な[EU地域アカウント向けAPIエンドポイント](/docs/using-new-relic/welcome-new-relic/getting-started/introduction-eu-region-data-center#endpoints)を使用していることを確認してください。
</Callout>

<CollapserGroup>
  <Collapser id="create-nrql-conditions" title="ポリシーのNRQL条件を作成する">
    推奨事項: NRQL データのストリーミング方法により、 `aggregation_method`を`EVENT_FLOW`に設定し、 `aggregation_window`にはデフォルト設定の`60`を使用し、 `aggregation_delay`には`120`を使用します。`EVENT_FLOW`は、ほとんどの使用例で機能しますが、どの使用例が`EVENT_TIMER`に適しているかについては、 [集計方法の選択](/docs/alerts/create-alert/fine-tune/streaming-alerts-key-terms-concepts/#aggregation-methods)を参照してください。

    <DNT>
      **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20NRQL%20Conditions/post_alerts_nrql_conditions_policies__policy_id__json) &gt; Alerts NRQL Conditions &gt; POST &gt; Create**
    </DNT>

    ポリシーのNRQL条件を作成する：

    ```shell
    curl -X POST 'https://api.newrelic.com/v2/alerts_nrql_conditions/policies/$POLICY_ID.json' \
         -H "$API_KEY" -i \
         -H 'Content-Type: application/json' \
         -d \
    '{
      "nrql_condition": {
        "type": "string",
        "name": "string",
        "runbook_url": "string",
        "enabled": boolean,
        "terms": [
          {
            "duration": "string",
            "operator": "string",
            "priority": "string",
            "threshold": "string",
            "time_function": "string"
          }
        ],
        "value_function": "string",
        "nrql": {
          "query": "string"
        },
        "signal": {
          "aggregation_window": "string",
          "slide_by": "integer",
          "aggregation_method": "string",
          "aggregation_delay": integer,
          "aggregation_timer": integer,
          "fill_option": "string",
          "fill_value": "string"
        },
        "expiration": {
          "expiration_duration": "string",
          "open_violation_on_expiration": boolean,
          "close_violations_on_expiration": boolean
        }
      }
    }'
    ```

    `type`を除外するか`static`と設定すると、標準的なNRQLアラートにデフォルト設定されます。

    <Callout variant="important">
      [AdvancedおよびCore Compute価格設定プラン](https://newrelic.com/pricing/compute#pricing_plan-compute)の顧客には、スライディングウィンドウ集計を利用する際に追加のCCU料金が発生する場合があります。この方法は変動を平滑化することでデータ分析を強化しますが、他の方法に比べてコストが増加する可能性があります。詳細については、[スライディングウィンドウの価格設定セクション](/docs/nrql/using-nrql/create-smoother-charts-sliding-windows/#pricing)を参照してください。AdvancedまたはCore Computeのどちらの価格設定プランを利用しているかを確認するには、注文を参照してください。
    </Callout>
  </Collapser>

  <Collapser id="update-nrql-conditions" title="ポリシーのNRQL条件を更新する">
    ポリシーのNRQL条件を更新するには、以下の値をAPIコールに含めます：

    * [ユーザーキー](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key)

    * 条件の`id`（[APIエクスプローラー<Icon name="fe-external-link" />](https://api.newrelic.com/docs/#/Alerts%20NRQL%20Conditions/get_alerts_nrql_conditions_json) <DNT>**Alerts NRQL Conditions &gt; GET &gt; List**</DNT>から入手可能）

    * APIコールで必須とされる`condition`値（APIエクスプローラーページと[アラート条件のAPI用語集](/docs/alerts/new-relic-alerts/rest-api-alerts/alerts-conditions-api-field-names)で説明されています）

      <DNT>
        **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20NRQL%20Conditions/put_alerts_nrql_conditions__condition_id__json) &gt; Alerts NRQL Conditions &gt; PUT &gt; Update**
      </DNT>

      ```shell
      curl -X PUT 'https://api.newrelic.com/v2/alerts_nrql_conditions/$CONDITION_ID.json' \
           -H "$API_KEY" -i \
           -H 'Content-Type: application/json' \
           -d \
      '{
        "nrql_condition": {
          "name": "string",
          "runbook_url": "string",
          "enabled": boolean,
          "terms": [
            {
              "duration": "string",
              "operator": "string",
              "priority": "string",
              "threshold": "string",
              "time_function": "string"
            }
          ],
          "value_function": "string",
          "nrql": {
            "query": "string"
          }
        }
      }'
      ```
  </Collapser>

  <Collapser id="delete-nrql-conditions" title="ポリシーのNRQL条件を削除する">
    ポリシーからNRQL条件を削除するには、以下の値をAPIコールに含めます：

    * [ユーザーキー](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key)

    * 条件の`id`（[APIエクスプローラー<Icon name="fe-external-link" />](https://api.newrelic.com/docs/#/Alerts%20NRQL%20Conditions/get_alerts_nrql_conditions_json) <DNT>**Alerts NRQL Conditions &gt; GET &gt; List**</DNT>から入手可能）

      <DNT>
        **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20NRQL%20Conditions/delete_alerts_nrql_conditions__condition_id__json) &gt; Alerts NRQL Conditions &gt; DELETE &gt; Delete**
      </DNT>

      ```shell
      curl -X DELETE 'https://api.newrelic.com/v2/alerts_nrql_conditions/$CONDITION_ID.json' \
           -H "$API_KEY" -i
      ```
  </Collapser>

  <Collapser id="list-nrql-conditions" title="ポリシーの既存のNRQL条件をリストする">
    ご利用のアラートポリシーについて既存条件の一覧を表示するには、ユーザーキー、およびAPIコールの関連[`policy_id`](#policies-list)を使用します。

    <DNT>
      **\[API Explorer][https://api.newrelic.com/docs/#/Alerts%20NRQL%20Conditions/get\_alerts\_nrql\_conditions\_json](https://api.newrelic.com/docs/#/Alerts%20NRQL%20Conditions/get_alerts_nrql_conditions_json)) &gt; Alerts NRQL Conditions &gt; GET &gt; List**
    </DNT>

    ```shell
    curl -X GET 'https://api.newrelic.com/v2/alerts_nrql_conditions.json' \
         -H "$API_KEY" -i \
         -d 'policy_id=$POLICY_ID'
    ```
  </Collapser>
</CollapserGroup>

## 外部サービスの条件 [#ext-services-conditions]

このAPI関数には、ポリシーの[条件](/docs/alerts/new-relic-alerts-beta/configuring-alert-policies/define-alert-conditions)を簡単に作成、更新、削除、リストできるAPIエクスプローラーへのリンクが含まれます。以下のコールは外部サービスの条件です。APIコールは、<InlinePopover type="apm" />およびモバイル監視アプリで使用できます。

<Callout variant="important">
  お客様の組織がEUデータセンターでデータをホストする場合は、適切な[EU地域アカウント向けAPIエンドポイント](/docs/using-new-relic/welcome-new-relic/getting-started/introduction-eu-region-data-center#endpoints)を使用していることを確認してください。
</Callout>

<CollapserGroup>
  <Collapser id="ext-conditions-create" title="外部サービス：ポリシーの条件を作成する">
    APMまたはモバイルモニタリングアプリを有するポリシーの外部サービスに条件を追加するには、以下の値をAPIコールに含めます：

    * [ユーザーキー](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key)

    * `policy_id`（<DNT>**[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Policies/get_alerts_policies_json) &gt; Alerts Policies &gt; GET &gt; List**</DNT>から入手可能）

    * APIコールで必須とされる`external_service_condition`値（APIエクスプローラーページと[アラート条件のAPI用語集](/docs/alerts/new-relic-alerts/rest-api-alerts/alerts-conditions-api-field-names)で説明されています）

      <DNT>
        **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20External%20Service%20Conditions/post_alerts_external_service_conditions_policies__policy_id__json) &gt; Alerts External Service Conditions &gt; POST &gt; Create**
      </DNT>

      ```shell
      curl -X POST 'https://api.newrelic.com/v2/alerts_external_service_conditions/policies/$POLICY_ID.json' \
           -H "$API_KEY" -i \
           -H 'Content-Type: application/json' \
           -d \
      '{
        "external_service_condition": {
          "type": "string",
          "name": "string",
          "enabled": boolean,
          "entities": [
            integer
          ],
          "external_service_url": "string",
          "metric": "string",
          "runbook_url": "string",
          "terms": [
            {
              "duration": "string",
              "operator": "string",
              "priority": "string",
              "threshold": "string",
              "time_function": "string"
            }
          ]
        }
      }'
      ```

      JSONレスポンスは、条件の更新や削除に必要な条件`id`を返します。条件`id`は<DNT>**[API Explorer](https://api.newrelic.com/docs/#/Alerts%20External%20Service%20Conditions/get_alerts_external_service_conditions_json) &gt; Alerts External Service Conditions &gt; GET &gt; List**</DNT>からも表示できます。
  </Collapser>

  <Collapser id="ext-conditions-update" title="外部サービス：ポリシーの条件を更新する">
    APMまたはモバイルモニタリングアプリを有するポリシーの外部サービスの条件を更新するには、以下の値をAPIコールに含めます：

    * [ユーザーキー](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key)

    * 外部サービス条件の`id`（<DNT>**[API Explorer](https://api.newrelic.com/docs/#/Alerts%20External%20Service%20Conditions/get_alerts_external_service_conditions_json) &gt; Alerts External Service Conditions &gt; GET &gt; List**</DNT>から入手可能）

    * APIコールで必須とされる`external_service_condition`値（APIエクスプローラーページと[アラート条件のAPI用語集](/docs/alerts/new-relic-alerts/rest-api-alerts/alerts-conditions-api-field-names)で説明されています）

      <DNT>
        **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20External%20Service%20Conditions/put_alerts_external_service_conditions__condition_id__json) &gt; Alerts External Service Conditions &gt; PUT &gt; Update**
      </DNT>

      ```shell
      curl -X PUT 'https://api.newrelic.com/v2/alerts_external_service_conditions/$CONDITION_ID.json' \
           -H "$API_KEY" -i \
           -H 'Content-Type: application/json' \
           -d \
      '{
        "external_service_condition": {
          "type": "string",
          "name": "string",
          "enabled": boolean,
          "entities": [
            integer
          ],
          "external_service_url": "string",
          "metric": "string",
          "runbook_url": "string",
          "terms": [
            {
              "duration": "string",
              "operator": "string",
              "priority": "string",
              "threshold": "string",
              "time_function": "string"
            }
          ]
        }
      }'
      ```
  </Collapser>

  <Collapser id="ext-conditions-delete" title="外部サービス：条件をポリシーから削除する">
    APMまたはモバイルモニタリングアプリを有するポリシーの外部サービスの条件を削除するには、以下の値をAPIコールに含めます：

    * [ユーザーキー](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key)

    * `condition_id`（<DNT>**[API Explorer](https://api.newrelic.com/docs/#/Alerts%20External%20Service%20Conditions/get_alerts_external_service_conditions_json) &gt; Alerts External Service Conditions &gt; GET &gt; List**</DNT>から入手可能）

      <DNT>
        **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20External%20Service%20Conditions/delete_alerts_external_service_conditions__condition_id__json) &gt; Alerts External Service Conditions &gt; DELETE**
      </DNT>

      ```shell
      curl -X DELETE 'https://api.newrelic.com/v2/alerts_external_service_conditions/$CONDITION_ID.json' \
           -H "$API_KEY" -i
      ```
  </Collapser>

  <Collapser id="ext-conditions-list" title="外部サービス：ポリシーの既存の条件をリストアップする">
    外部サービスアプリ（APMまたはモバイル監視）でポリシーの既存条件の一覧を表示するには、[ユーザーキー](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key)、およびAPIコールの関連[`policy_id`](#policies-list)を使用します。

    <DNT>
      **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20External%20Service%20Conditions/get_alerts_external_service_conditions_json) &gt; Alerts External Service Conditions &gt; GET &gt; List**
    </DNT>

    ```shell
    curl -X GET 'https://api.newrelic.com/v2/alerts_external_service_conditions.json' \
         -H "$API_KEY" -i \
         -d 'policy_id=$POLICY_ID'
    ```
  </Collapser>
</CollapserGroup>

## 合成モニタリングの条件 [#synthetics-conditions]

以下のAPI関数には、アラートポリシーの[条件](/docs/alerts/new-relic-alerts-beta/configuring-alert-policies/define-alert-conditions)を簡単に作成、更新、削除、リストできるAPIエクスプローラーへのリンクが含まれます。APIコールは、合成モニタリングと共に使用できます。

<CollapserGroup>
  <Collapser id="synthetics-conditions-create" title="合成モニタリング：ポリシーの条件を作成する">
    合成モニタリングのポリシーに条件を追加するには、以下の値をAPIコールに含めます：

    * [ユーザーキー](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key)

    * `policy_id`（<DNT>**[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Policies/get_alerts_policies_json) &gt; Alerts Policies &gt; GET &gt; List**</DNT>から入手可能）

    * APIコールで必須とされる`synthetics_condition`値（APIエクスプローラーページと[アラート条件のAPI用語集](/docs/alerts/new-relic-alerts/rest-api-alerts/alerts-conditions-api-field-names)で説明されています）

      <DNT>
        **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Synthetics%20Conditions/post_alerts_synthetics_conditions_policies__policy_id__json) &gt; Alerts Synthetics Conditions &gt; POST &gt; Create**
      </DNT>

      ```shell
      curl -X POST 'https://api.newrelic.com/v2/alerts_synthetics_conditions/policies/$POLICY_ID.json' \
           -H "$API_KEY" -i \
           -H 'Content-Type: application/json' \
           -d \
      '{
        "synthetics_condition": {
          "name": "string",
          "monitor_id": "string",
          "runbook_url": "string",
          "enabled": boolean
        }
      }'
      ```

      JSONレスポンスは、条件の更新や削除に必要な条件`id`を返します。条件`id`は<DNT>**[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Synthetics%20Conditions/get_alerts_synthetics_conditions_json) &gt; Alerts Synthetics Conditions &gt; GET &gt; List**</DNT>からも表示できます。
  </Collapser>

  <Collapser id="conditions-update" title="ポリシーの条件を更新する">
    ポリシーの条件を更新するには、以下の値をAPIコールに含めます：

    * [ユーザーキー](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key)

    * 条件`id`（<DNT>**[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Conditions/get_alerts_conditions_json) &gt; Alerts Conditions &gt; GET &gt; List**</DNT>から入手可能）

    * APIコールで必須とされる`condition`値（APIエクスプローラーページと[アラート条件のAPI用語集](/docs/alerts/new-relic-alerts/rest-api-alerts/alerts-conditions-api-field-names)で説明されています）

      <DNT>
        **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Conditions/put_alerts_conditions__condition_id__json) &gt; Alerts Conditions &gt; PUT &gt; Update**
      </DNT>

      ```shell
      curl -X PUT 'https://api.newrelic.com/v2/alerts_conditions/$CONDITION_ID.json' \
           -H "X-Api-Key:$API_KEY" -i \
           -H "$API_KEY" -i \
           -H 'Content-Type: application/json' \
           -d \
      '{
        "condition": {
          "type": "string",
          "name": "string",
          "enabled": boolean,
          "entities": [
            integer
          ],
          "metric": "string",
          "metric": "string",
          "gc_metric": "string",
          "condition_scope": "string",
          "violation_close_timer": integer,
          "runbook_url": "string",
          "terms": [
            {
              "duration": "string",
              "operator": "string",
              "priority": "string",
              "threshold": "string",
              "time_function": "string"
            }
          ],
          "user_defined": {
            "metric": "string",
            "value_function": "string"
          }
        }
      }'
      ```
  </Collapser>

  <Collapser id="synthetics-conditions-delete" title="Syntheticモニタリング：条件をポリシーから削除する">
    合成モニタリングのポリシーの条件を削除するには、以下の値をAPIコールに含めます：

    * [ユーザーキー](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key)

    * `condition_id`（<DNT>**[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Synthetics%20Conditions/get_alerts_synthetics_conditions_json) &gt; Alerts Synthetics Conditions &gt; GET &gt; List**</DNT>から入手可能）

      <DNT>
        **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Synthetics%20Conditions/delete_alerts_synthetics_conditions__condition_id__json) &gt; Alerts Synthetics Conditions &gt; DELETE**
      </DNT>

      ```shell
      curl -X DELETE 'https://api.newrelic.com/v2/alerts_synthetics_conditions/$CONDITION_ID.json' \
           -H "$API_KEY" -i
      ```
  </Collapser>

  <Collapser id="synthetics-conditions-list" title="Syntheticモニタリング：ポリシーの既存の条件をリストする">
    外形監視の既存のポリシー条件一覧を表示するには、[ユーザーキー](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key)、およびAPIコールの関連[`policy_id`](#policies-list)を使用します。

    <DNT>
      **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Synthetics%20Conditions/get_alerts_synthetics_conditions_json) &gt; Alerts Synthetics Conditions &gt; GET &gt; List**
    </DNT>

    ```shell
    curl -X GET 'https://api.newrelic.com/v2/alerts_synthetics_conditions.json' \
         -H "$API_KEY" -i \
         -d 'policy_id=$POLICY_ID'
    ```
  </Collapser>
</CollapserGroup>

## 複数の場所における合成モニタリングの条件 [#multilocation-synthetics-conditions]

以下のAPI関数には、アラートポリシーの[条件](/docs/alerts/new-relic-alerts-beta/configuring-alert-policies/define-alert-conditions)を簡単に作成、更新、削除、リストできるAPIエクスプローラーへのリンクが含まれます。APIコールは、合成モニタリングを使用して複数場所の条件に使用できます。条件を作成または更新する前に、[複数場所のアラート条件のルール](/docs/alerts-applied-intelligence/new-relic-alerts/advanced-alerts/advanced-techniques/multi-location-synthetic-monitoring-alert-conditions/#rules)をお読みください。

<CollapserGroup>
  <Collapser id="multilocation-synthetics-conditions-create" title="複数の場所における合成：ポリシーの条件を作成する">
    複数の場所における合成モニタリングのポリシーに条件を追加するには、以下の値をAPIコールに含めます：

    * [ユーザーキー](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key)

    * `policy_id`（<DNT>**[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Policies/get_alerts_policies_json) &gt; Alerts Policies &gt; GET &gt; List**</DNT>から入手可能）

    * APIコールで必須とされる`location_failure_condition`値（APIエクスプローラーページと[アラート条件のAPI用語集](/docs/alerts/new-relic-alerts/rest-api-alerts/alerts-conditions-api-field-names)で説明されています）

      <DNT>
        **[API Explorer](https://api.newrelic.com/docs/#/Deprecation%20Notice%20-%20Alerts%20Location%20Failure%20Conditions/post_alerts_location_failure_conditions_policies__policy_id__json) &gt; Alerts Location Failure Conditions &gt; POST &gt; Create**
      </DNT>

      ```shell
      curl -X POST 'https://api.newrelic.com/v2/alerts_location_failure_conditions/policies/$POLICY_ID.json' \
           -H "$API_KEY" -i \
           -H 'Content-Type: application/json' \
           -d \
      '{
        "location_failure_condition": {
          "name": "string",
          "runbook_url": "string",
          "enabled": boolean,
          "entities":
          [
            "string"
          ],
          "terms": [
            {
              "priority": "string",
              "threshold": integer,
            }
          ],
          "violation_time_limit_seconds": integer
        }
      }'
      ```

      JSONレスポンスは、条件の更新や削除に必要な条件`id`を返します。条件`id`は<DNT>**[API Explorer](https://api.newrelic.com/docs/#/Deprecation%20Notice%20-%20Alerts%20Location%20Failure%20Conditions/get_alerts_location_failure_conditions_policies__policy_id__json) &gt; Alerts Location Failure Conditions &gt; GET &gt; List**</DNT>からも表示できます。
  </Collapser>

  <Collapser id="multilocation-synthetics-conditions-update" title="複数の場所における合成：ポリシーの条件を更新する">
    複数の場所における合成モニタリングのポリシーの条件を更新するには、以下の値をAPIコールに含めます：

    * [ユーザーキー](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key)

    * 条件`id`（<DNT>**[API Explorer](https://api.newrelic.com/docs/#/Deprecation%20Notice%20-%20Alerts%20Location%20Failure%20Conditions/get_alerts_location_failure_conditions_policies__policy_id__json) &gt; Alerts Location Failure Conditions &gt; GET &gt; List**</DNT>から入手可能）

    * APIコールで必須とされる`location_failure_condition`値（APIエクスプローラーページと[アラート条件のAPI用語集](/docs/alerts/new-relic-alerts/rest-api-alerts/alerts-conditions-api-field-names)で説明されています）

      <DNT>
        **[API Explorer](https://api.newrelic.com/docs/#/Deprecation%20Notice%20-%20Alerts%20Location%20Failure%20Conditions/put_alerts_location_failure_conditions__condition_id__json) &gt; Alerts Location Failure Conditions &gt; PUT &gt; Update**
      </DNT>

      ```shell
      curl -X PUT 'https://api.newrelic.com/v2/alerts_location_failure_conditions/$CONDITION_ID.json' \
           -H "$API_KEY" -i \
           -H 'Content-Type: application/json' \
           -d \
      '{
        "location_failure_condition": {
          "name": "string",
          "runbook_url": "string",
          "enabled": boolean,
          "entities":
          [
            "string"
          ],
          "terms": [
            {
              "priority": "string",
              "threshold": integer,
            }
          ],
          "violation_time_limit_seconds": integer
        }
      }'
      ```
  </Collapser>

  <Collapser id="multilocation-synthetics-conditions-delete" title="複数の場所における合成：ポリシーの条件を削除する">
    複数の場所における合成モニタリングのポリシーの条件を削除するには、以下の値をAPIコールに含めます：

    * [ユーザーキー](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key)

    * `condition_id`（<DNT>**[API Explorer](https://api.newrelic.com/docs/#/Deprecation%20Notice%20-%20Alerts%20Location%20Failure%20Conditions/get_alerts_location_failure_conditions_policies__policy_id__json) &gt; Alerts Location Failure Conditions &gt; GET &gt; List**</DNT>から入手可能）

      <DNT>
        **[API Explorer](https://api.newrelic.com/docs/#/Deprecation%20Notice%20-%20Alerts%20Location%20Failure%20Conditions/delete_alerts_location_failure_conditions__condition_id__json) &gt; Alerts Location Failure Conditions &gt; DELETE**
      </DNT>

      ```shell
      curl -X DELETE 'https://api.newrelic.com/v2/alerts_location_failure_conditions/$CONDITION_ID.json' \
           -H "$API_KEY" -i
      ```
  </Collapser>

  <Collapser id="multilocation-synthetics-conditions-list" title="複数の場所における合成：ポリシーの既存の条件をリストアップする">
    複数の場所における外形監視の既存のポリシー条件一覧を表示するには、[ユーザーキー](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key)、およびAPIコールの関連[`policy_id`](#policies-list)を使用します。

    <DNT>
      **[API Explorer](https://api.newrelic.com/docs/#/Deprecation%20Notice%20-%20Alerts%20Location%20Failure%20Conditions/get_alerts_location_failure_conditions_policies__policy_id__json) &gt; Alerts Location Failure Conditions &gt; GET &gt; List**
    </DNT>

    ```shell
    curl -X GET 'https://api.newrelic.com/v2/alerts_location_failure_conditions/policies/$POLICY_ID.json' \
         -H "$API_KEY" -i
    ```
  </Collapser>
</CollapserGroup>

## アラートエンティティ条件 [#alert-entity-conditions]

こうしたAPI関数には、アラートポリシーに対する条件のエンティティをリスト、追加、削除できるAPIエクスプローラーへのリンクが含まれます。

<Callout variant="important">
  お客様の組織がEUデータセンターでデータをホストする場合は、適切な[EU地域アカウント向けAPIエンドポイント](/docs/using-new-relic/welcome-new-relic/getting-started/introduction-eu-region-data-center#endpoints)を使用していることを確認してください。
</Callout>

<CollapserGroup>
  <Collapser id="list-condition-by-entity" title="エンティティ別に条件をリストする">
    APM、ブラウザ、モバイル、キートランザクションにおいて、[エンティティ](/docs/alerts/new-relic-alerts-beta/getting-started/alerts-glossary#alert-entity)に適用される[条件](/docs/alerts/new-relic-alerts-beta/getting-started/alerts-glossary#alert-condition)を表示するには、以下の値をAPIコールに含めます：

    * [ユーザーキー](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key)

    * `entity_id`は監視対象の特定の[エンティティ（アラートターゲット）](/docs/alerts/new-relic-alerts-beta/getting-started/alerts-glossary#alert-entity)です。

    * `entity_type`は、次のいずれかである必要があります：

      * `Application`
      * `BrowserApplication`
      * `MobileApplication`
      * `KeyTransaction`

      <DNT>
        **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Entity%20Conditions/get_alerts_entity_conditions__entity_id__json) &gt; Alerts Entity Conditions &gt; GET &gt; list**
      </DNT>

      ```shell
      curl -X GET 'https://api.newrelic.com/v2/alerts_entity_conditions/$ENTITY_ID.json' \
           -H "$API_KEY" -i \
           -G -d 'entity_type=$ENTITY_TYPE'
      ```
  </Collapser>

  <Collapser id="add-entity" title="条件にエンティティを追加する">
    条件に[エンティティ](/docs/alerts/new-relic-alerts-beta/getting-started/alerts-glossary#alert-entity)を追加するには、以下の値をAPIコールに含めます：

    * [ユーザーキー](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key)

    * `entity_id`は監視対象の[エンティティ（アラートターゲット）](/docs/alerts/new-relic-alerts-beta/getting-started/alerts-glossary#alert-entity)です。APMアプリケーション、ブラウザアプリ、キートランザクション、モバイルアプリの数値IDです。

    * `condition_id`（<DNT>**[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Conditions/get_alerts_conditions_json) &gt; Alerts Conditions &gt; GET &gt; List**</DNT>から入手可能）

    * `entity_type`は、次のいずれかである必要があります：

      * `Application`
      * `BrowserApplication`
      * `MobileApplication`
      * `KeyTransaction`

      <DNT>
        **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Conditions/get_alerts_conditions_json) &gt; Alerts Entity Conditions &gt; PUT &gt; Add**
      </DNT>

      ```shell
      curl -X PUT 'https://api.newrelic.com/v2/alerts_entity_conditions/$ENTITY_ID.json' \
           -H "$API_KEY" -i \
           -H 'Content-Type: application/json' \
           -G -d 'entity_type=$ENTITY_TYPE&condition_id=$CONDITION_ID'
      ```
  </Collapser>

  <Collapser id="remove_entity" title="エンティティを条件から削除する">
    監視している[エンティティ](/docs/alerts/new-relic-alerts-beta/getting-started/alerts-glossary#alert-entity)を条件から削除するには、以下の値をAPIコールに含めます：

    * [ユーザーキー](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#user-api-key)

    * `entity_id`は削除されることになる特定の監視対象[エンティティ（アラートターゲット）](/docs/alerts/new-relic-alerts-beta/getting-started/alerts-glossary#alert-entity)です。APMアプリケーション、ブラウザアプリ、キートランザクション、モバイルアプリの数値IDです。

    * `condition_id`（<DNT>**[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Conditions/get_alerts_conditions_json) &gt; Alerts Conditions &gt; GET &gt; List**</DNT>から入手可能）

    * `entity_type`は、次のいずれかである必要があります：

      * `Application`
      * `BrowserApplication`
      * `MobileApplication`
      * `KeyTransaction`

      <DNT>
        **[API Explorer](https://api.newrelic.com/docs/#/Alerts%20Entity%20Conditions/delete_alerts_entity_conditions__entity_id__json) &gt; Alerts Entity Conditions &gt; DELETE &gt; Remove**
      </DNT>

      ```shell
      curl -X DELETE 'https://api.newrelic.com/v2/alerts_entity_conditions/$ENTITY_ID.json' \
           -H "$API_KEY" -i \
           -G -d 'entity_type=$ENTITY_ID&condition_id=$CONDITION_ID'
      ```
  </Collapser>
</CollapserGroup>