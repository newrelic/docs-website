---
title: Configurar ATP para el host
metaDescription: Step-by-step guide to install and configure the Adaptive Telemetry Processor (ATP) with NRDOT Collector Host distribution.
tags:
  - Open source telemetry integrations
  - OpenTelemetry
  - NRDOT
  - Adaptive Telemetry Processor
  - ATP
  - Configuration
  - Setup
  - Installation
freshnessValidatedDate: never
translationType: machine
---

<Callout title="Avance">
  Todavía estamos trabajando en esta característica, ¡pero nos encantaría que la probaras!

  Esta función se proporciona actualmente como parte de una vista previa de conformidad con nuestras [políticas de prelanzamiento](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy/).
</Callout>

Aprenda a instalar y configurar el Adaptive Telemetry Processor (ATP) con el NRDOT Collector. ATP se incluye en la distribución estándar de NRDOT para reducir el volumen de datos de telemetría, al tiempo que se mantiene la visibilidad crítica.

## Opciones de instalación [#installation-options]

Seleccione el método de instalación que coincida con su configuración actual:

<Tabs>
  <TabsBar>
    <TabsBarItem id="new">Nueva instalación</TabsBarItem> <TabsBarItem id="upgrade">Actualizar desde NRDOT</TabsBarItem> <TabsBarItem id="native">Migrar desde el agente nativo</TabsBarItem>
  </TabsBar>

  <TabsPages>
    <TabsPageItem id="new">
      <Steps>
        <Step>
          ### Antes de que empieces [#prereq]

          Asegúrese de tener:

          * Su clave de licencia de New Relic
          * Privilegios de root o sudo.
          * Acceso de red a los lanzamientos de GitHub
        </Step>

        <Step>
          ### Instalar el host del colector NRDOT [#install-nrdot]

          ATP viene preempaquetado con la distribución del colector NRDOT. Según su sistema operativo, seleccione el método de instalación:

          <CollapserGroup>
            <Collapser id="deb" title="Para Debian/Ubuntu">
              1. Configura las variables de entorno:

                 ```bash
                 export collector_distro="nrdot-collector"
                 export collector_version="<NRDOT_COLLECTOR_LATEST_VERSION>" #Fetch the latest version from GitHub releases available at https://github.com/newrelic/nrdot-collector-releases/releases
                 export collector_arch="amd64"  # Use 'arm64' for ARM processors
                 export license_key="<YOUR_NEW_RELIC_LICENSE_KEY>"
                 ```

              2. Descargue el paquete NRDOT:

                 ```bash
                 curl "https://github.com/newrelic/nrdot-collector-releases/releases/download/${collector_version}/${collector_distro}_${collector_version}_linux_${collector_arch}.deb" \
                   --location \
                   --output collector.deb
                 ```

              3. Instale el paquete descargado:

                 ```bash
                 sudo dpkg -i collector.deb
                 ```

              4. Configure el colector NRDOT para usar variables de entorno definidas:

                 ```bash
                 echo "NEW_RELIC_LICENSE_KEY=${license_key}" | sudo tee -a /etc/${collector_distro}/${collector_distro}.conf > /dev/null
                 ```

              5. Inicie el servicio de colector NRDOT:

                 ```bash
                 sudo systemctl reload-or-restart "${collector_distro}.service"
                 ```
            </Collapser>

            <Collapser id="rhel" title="Para RHEL/CentOS">
              1. Configura las variables de entorno:

                 ```bash
                 export collector_distro="nrdot-collector"
                 export collector_version="<NRDOT_COLLECTOR_LATEST_VERSION>" #Fetch the latest version from GitHub releases available at https://github.com/newrelic/nrdot-collector-releases/releases
                 export collector_arch="x86_64"  # Use 'arm64' for ARM processors
                 export license_key="<YOUR_NEW_RELIC_LICENSE_KEY>"
                 ```

              2. Descargue el paquete NRDOT:

                 ```bash
                 curl "https://github.com/newrelic/nrdot-collector-releases/releases/download/${collector_version}/${collector_distro}_${collector_version}_linux_${collector_arch}.rpm" \
                   --location \
                   --output collector.rpm
                 ```

              3. Instale el paquete descargado:

                 ```bash
                 sudo rpm -i collector.rpm
                 ```

              4. Configure el colector NRDOT para usar variables de entorno definidas:

                 ```bash
                 echo "NEW_RELIC_LICENSE_KEY=${license_key}" | sudo tee -a /etc/${collector_distro}/${collector_distro}.conf > /dev/null
                 ```

              5. Inicie el servicio de colector NRDOT:

                 ```bash
                 sudo systemctl reload-or-restart "${collector_distro}.service"
                 ```
            </Collapser>

            <Collapser id="binary" title="Para binario manual">
              1. Configura las variables de entorno:

                 ```bash
                 export collector_distro="nrdot-collector"
                 export collector_version="<NRDOT_COLLECTOR_LATEST_VERSION>" #Fetch the latest version from GitHub releases available at https://github.com/newrelic/nrdot-collector-releases/releases
                 export collector_arch="amd64"  # Use 'arm64' for ARM processors
                 export license_key="<YOUR_NEW_RELIC_LICENSE_KEY>"
                 ```

              2. Descargue el colector NRDOT:

                 ```bash
                 # Download the tarball
                 curl "https://github.com/newrelic/nrdot-collector-releases/releases/download/${collector_version}/${collector_distro}_${collector_version}_linux_${collector_arch}.tar.gz" \
                   --location \
                   --output collector.tar.gz
                 ```

              3. Extraiga el colector NRDOT:

                 ```bash
                 # Extract contents
                 tar -xzf collector.tar.gz
                 ```

              4. Ejecute el colector:

                 ```bash
                 # Run collector in foreground
                 NEW_RELIC_LICENSE_KEY="${license_key}" ./nrdot-collector --config ./config.yaml
                 ```
            </Collapser>
          </CollapserGroup>
        </Step>

        <Step>
          ### Configurar ATP [#configure-atp]

          Una vez instalado el colector NRDOT, edite el archivo de configuración del colector para habilitar y personalizar ATP. Las rutas de los archivos de configuración varían según el método de instalación:

          * Para las instalaciones DEB/RPM, el archivo de configuración se encuentra en `/etc/nrdot-collector/config.yaml`.
          * Para las instalaciones manuales de binarios, el archivo de configuración se encuentra dentro de la carpeta extraída.

          Para editar el archivo de configuración:

          1. Abra el archivo de configuración (`config.yaml`) con un editor de texto:

             * Para instalaciones DEB/RPM:

             ```bash
             sudo nano /etc/nrdot-collector/config.yaml
             ```

             * Para instalaciones manuales de binarios:

             ```bash
             nano config.yaml
             ```

          2. Para recopilar las métricas de procesos, en la sección `scrapers` del receptor `hostmetrics`, agregue la siguiente configuración `process`:

             ```yaml
             receivers:
               hostmetrics:
                 scrapers:
                   # Your existing scrapers...
                   process:
                     metrics:
                       process.cpu.utilization:
                         enabled: true
                       process.memory.utilization:
                         enabled: true
                     mute_process_name_error: true
                     mute_process_exe_error: true
                     mute_process_io_error: true
                     mute_process_user_error: true
             ```

          3. Para habilitar ATP, ubique la sección `processors` existente y agregue la configuración `adaptivetelemetry` debajo de ella:

             ```yaml
             processors:
               adaptivetelemetry:
                 enable_storage: true
                 retention_minutes: 30
                 include_process_list:
                   - "/usr/bin/postgres"
                   - "/usr/sbin/nginx" # Replace with your target processes
                 metric_thresholds:
                   process.cpu.utilization: 0.05     # 5% CPU
                   process.memory.utilization: 0.05  # 5% memory
             ```

          4. Agregue el procesador ATP a su pipeline de métricas en la sección `service`:

             ```yaml
             service:
               pipelines:
                 metrics/host:
                   receivers: [hostmetrics]
                   processors:
                     - memory_limiter
                     - adaptivetelemetry  # ADD THIS LINE
                     - metricstransform
                     - filter/exclude_cpu_utilization
                     - filter/exclude_memory_utilization
             ```

          5. *(Opcional)* Actualice la configuración de ATP, como los umbrales de métricas, según sea necesario. Para más detalles sobre las opciones de configuración, consulte los [Parámetros de configuración](#config-parameters).

          6. Almacene el archivo de configuración.

          7. Reinicie el colector NRDOT para aplicar los cambios:

          ```bash
          sudo systemctl restart nrdot-collector
          ```
        </Step>

        <Step>
          ### Acceda a los datos de ATP en New Relic [#access-data]

          Una vez que el ATP esté configurado, comienza a recopilar datos de su host Linux. Puede acceder a estos datos en la UI de New Relic OpenTelemetry. Para obtener más información sobre la UI de OpenTelemetry de New Relic, consulte [OpenTelemetry APM UI](/docs/opentelemetry/get-started/apm-monitoring/opentelemetry-apm-ui).

          **Para ver los datos de métricas del proceso ATP en New Relic:**

          1. Vaya a **<DNT>[one.newrelic.com](https://one.newrelic.com) &gt; All Entities</DNT>**.

             O

             Vaya a <DNT>**[one.newrelic.com](https://one.newrelic.com) &gt; Catalogs &gt; Infrastructure**</DNT>.

          2. Busque la entidad donde instaló el colector NRDOT con ATP.

          3. Seleccione la entidad y luego haga clic en **<DNT>Process</DNT>** en el panel izquierdo.

             En la página <DNT>Process</DNT>, puede ver todos los procesos que se ejecutan en su host, junto con sus ID y las métricas de utilización de CPU y memoria. También muestra la relación padre-hijo entre procesos si un proceso genera otros procesos.

             <img style={{ align: 'left' }} title="ATP process metrics in New Relic OpenTelemetry UI" alt="ATP process metrics in New Relic OpenTelemetry UI" src="/images/atp-process-metrics.webp" />
        </Step>
      </Steps>

      /* ### Configurar ATP [#atp-configuration] Agregue la configuración del procesador ATP a su `config.yaml` archivo. Este es un ejemplo de configuración completo: ```yaml processors: adaptivetelemetry: enable_storage: true retention_minutes: 30 include_process_list: - &quot;stress-ng&quot; metric_thresholds: process.cpu.utilization: 0.05 process.memory.utilization: 0.05 process.memory.virtual: 20971520 # 20 MB process.threads: 16 process.open_file_descriptors: 30 process.disk.io: 204800 # 200KB process.disk.operations: 300 process.context_switches: 8 process.paging.faults: 50 process.cpu.time: 0.01 # Habilitar capas de inteligencia enable_dynamic_thresholds: true dynamic_smoothing_factor: 0.1 min_thresholds: process.cpu.utilization: 0.0005 process.memory.utilization: 0.0005 max_thresholds: process.cpu.utilization: 0.30 process.memory.utilization: 0.30 # Puntuación compuesta multimétrica enable_multi_metric: true composite_threshold: 1.5 weights: process.cpu.utilization: 0.5 process.memory.utilization: 0.5 # Detección de anomalías enable_anomaly_detection: true anomaly_history_size: 15 anomaly_change_threshold: 50.0 anomaly_min_data_points: 3 service: pipelines: metrics: receivers: [hostmetrics] processors: [adaptivetelemetry, batch] exporters: [otlp] ``` */
    </TabsPageItem>

    <TabsPageItem id="upgrade">
      <Steps>
        <Step>
          ### Antes de que empieces [#upgrade-prereq]

          Asegúrese de tener:

          * NRDOT Collector existente versión `1.11.0` o posterior
          * Su clave de licencia de New Relic
          * Privilegios de root o sudo
          * Respaldo de la configuración actual
        </Step>

        <Step>
          ### Respaldar la configuración actual [#backup-config]

          Resguarde su configuración actual antes de continuar:

          ```bash
          sudo cp /etc/nrdot-collector/config.yaml /etc/nrdot-collector/config.yaml.bak
          ```
        </Step>

        <Step>
          ### Actualizar el colector NRDOT [#upgrade-collector]

          Para actualizar el colector NRDOT a la versión más reciente con soporte para ATP, vuelva a ejecutar los comandos de instalación de la versión más reciente. Esto sobrescribirá el binario antiguo conservando su archivo de configuración existente.

          <CollapserGroup>
            <Collapser id="upgrade-deb" title="Para Debian/Ubuntu">
              1. Configura las variables de entorno:

                 ```bash
                 export collector_distro="nrdot-collector"
                 export collector_version="<NRDOT_COLLECTOR_LATEST_VERSION>" #Fetch the latest version from GitHub releases available at https://github.com/newrelic/nrdot-collector-releases/releases
                 export collector_arch="amd64"  # Use 'arm64' for ARM processors
                 ```

              2. Descargue la última versión del colector NRDOT:

                 ```bash
                 curl "https://github.com/newrelic/nrdot-collector-releases/releases/download/${collector_version}/${collector_distro}_${collector_version}_linux_${collector_arch}.deb" \
                   --location \
                   --output collector.deb
                 ```

              3. Instale el paquete del colector NRDOT descargado:

                 ```bash
                 sudo dpkg -i collector.deb
                 ```
            </Collapser>

            <Collapser id="upgrade-rpm" title="Para RHEL/CentOS">
              1. Configura las variables de entorno:

                 ```bash
                 export collector_distro="nrdot-collector"
                 export collector_version="<NRDOT_COLLECTOR_LATEST_VERSION>"
                 export collector_arch="x86_64"  # Use 'arm64' for ARM processors
                 ```

              2. Descargue la última versión del colector NRDOT:

                 ```bash
                 curl "https://github.com/newrelic/nrdot-collector-releases/releases/download/${collector_version}/${collector_distro}_${collector_version}_linux_${collector_arch}.rpm" \
                   --location \
                   --output collector.rpm
                 ```

              3. Instale el paquete del colector NRDOT descargado:

                 ```bash
                 sudo rpm -U collector.rpm
                 ```
            </Collapser>

            <Collapser id="upgrade-manual" title="Para binario manual">
              1. Detenga el colector en ejecución y respalde su configuración:

                 ```bash
                 pkill -f nrdot-collector
                 cp config.yaml config.yaml.bak
                 ```

              2. Siga los pasos de instalación en la pestaña **New Installation** → sección **For manual binary** para completar los pasos restantes.

                 <Callout variant="caution">
                   Esto sobrescribirá su config.yaml actual, por lo que la copia de seguridad en el Paso 1 era necesaria.
                 </Callout>
            </Collapser>
          </CollapserGroup>
        </Step>

        <Step>
          ### Configurar ATP [#configure-atp-upgrade]

          La actualización conservó su configuración anterior, por lo que su `config.yaml` aún no contiene la nueva configuración de ATP. Debe agregarlos manualmente.

          Para editar el archivo de configuración:

          1. Abra el archivo de configuración (`config.yaml`) con un editor de texto usando privilegios de root o sudo:

             * Para instalaciones DEB/RPM:

             ```bash
             sudo nano /etc/nrdot-collector/config.yaml
             ```

             * Para instalaciones manuales de binarios:

             ```bash
             nano config.yaml
             ```

          2. Para recopilar las métricas de procesos, en la sección `scrapers` del receptor `hostmetrics`, agregue la siguiente configuración `process`:

             ```yaml
             processes:
             process:
               metrics:
                 process.cpu.utilization:
                   enabled: true
                 process.memory.utilization:
                   enabled: true
               mute_process_name_error: true
               mute_process_exe_error: true
               mute_process_io_error: true
               mute_process_user_error: true
             ```

          3. Para habilitar ATP, ubique la sección `processors` existente y agregue la configuración `adaptivetelemetry` debajo de ella:

             ```yaml
             processors:
               # Your existing processors...
               adaptivetelemetry:
                 enable_storage: true
                 retention_minutes: 30
                 include_process_list:
                   - "/usr/bin/postgres"
                   - "/usr/sbin/nginx" # Replace with your target processes
                 metric_thresholds:
                   process.cpu.utilization: 0.05     # 5% CPU
                   process.memory.utilization: 0.05  # 5% memory
             ```

          4. Agregue el procesador ATP a su pipeline de métricas en la sección `service`:

             ```yaml
             service:
               pipelines:
                 metrics/host:
                   receivers: [hostmetrics]
                   processors:
                     - memory_limiter
                     - adaptivetelemetry  # ADD THIS LINE
                     - metricstransform
                     - filter/exclude_cpu_utilization
                     - filter/exclude_memory_utilization
             ```

          5. *(Opcional)* Actualice la configuración de ATP, como los umbrales de métricas, según sea necesario. Para más detalles sobre las opciones de configuración, consulte los [Parámetros de configuración](#config-parameters).

          6. Almacene el archivo de configuración.

          7. Reinicie el colector NRDOT para aplicar los cambios:

             ```bash
             sudo systemctl restart nrdot-collector
             ```
        </Step>

        <Step>
          ### Acceda a los datos de ATP en New Relic [#access-data]

          Una vez que el ATP esté configurado, comienza a recopilar datos de su host Linux. Puede acceder a estos datos en la UI de New Relic OpenTelemetry. Para obtener más información sobre la UI de OpenTelemetry de New Relic, consulte [OpenTelemetry APM UI](/docs/opentelemetry/get-started/apm-monitoring/opentelemetry-apm-ui).

          **Para ver los datos de métricas del proceso ATP en New Relic:**

          1. Vaya a **<DNT>[one.newrelic.com](https://one.newrelic.com) &gt; All Entities</DNT>**.

             O

             Vaya a <DNT>**[one.newrelic.com](https://one.newrelic.com) &gt; Catalogs &gt; Infrastructure**</DNT>.

          2. Busque la entidad donde instaló el colector NRDOT con ATP.

          3. Seleccione la entidad y luego haga clic en **<DNT>Process</DNT>** en el panel izquierdo.

             En la página <DNT>Process</DNT>, puede ver todos los procesos que se ejecutan en su host, junto con sus ID y las métricas de utilización de CPU y memoria. También muestra la relación padre-hijo entre procesos si un proceso genera otros procesos.

             <img style={{ align: 'left' }} title="ATP process metrics in New Relic OpenTelemetry UI" alt="ATP process metrics in New Relic OpenTelemetry UI" src="/images/atp-process-metrics.webp" />
        </Step>
      </Steps>
    </TabsPageItem>

    <TabsPageItem id="native">
      Para instalar ATP migrando desde el agente de infraestructura nativo de New Relic a la distribución de host del recopilador NRDOT, debe desinstalar el agente nativo y configurar NRDOT con ATP.

      <Steps>
        <Step>
          ### Antes de que empieces [#prereq-native]

          Asegúrese de tener:

          * Su clave de licencia de New Relic
          * Privilegios de root o sudo
          * Planificar para una interrupción mínima del servicio
        </Step>

        <Step>
          ### Detener y deshabilitar el agente nativo [#stop-native-agent]

          1. Para detener el agente de infraestructura existente para evitar conflictos de datos, ejecute:

             ```bash
             # Stop the service
             sudo systemctl stop newrelic-infra
             ```

          2. Para evitar que el agente de infraestructura se inicie en el arranque, ejecuta:

             ```bash
             # Disable from starting on boot
             sudo systemctl disable newrelic-infra
             ```
        </Step>

        <Step>
          ### Instalar el host del colector NRDOT [#install-nrdot-native]

          ATP viene preempaquetado con la distribución del colector NRDOT. Según su sistema operativo, seleccione el método de instalación:

          <CollapserGroup>
            <Collapser id="deb-native" title="Para Debian/Ubuntu">
              1. Configura las variables de entorno:

                 ```bash
                 export collector_distro="nrdot-collector"
                 export collector_version="<NRDOT_COLLECTOR_LATEST_VERSION>" #Fetch the latest version from GitHub releases available at https://github.com/newrelic/nrdot-collector-releases/releases
                 export collector_arch="amd64"  # Use 'arm64' for ARM processors
                 export license_key="<YOUR_NEW_RELIC_LICENSE_KEY>"
                 ```

              2. Descargue el paquete NRDOT:

                 ```bash
                 curl "https://github.com/newrelic/nrdot-collector-releases/releases/download/${collector_version}/${collector_distro}_${collector_version}_linux_${collector_arch}.deb" \
                   --location \
                   --output collector.deb
                 ```

              3. Instale el paquete descargado:

                 ```bash
                 sudo dpkg -i collector.deb
                 ```

              4. Configure el colector NRDOT para usar variables de entorno definidas:

                 ```bash
                 echo "NEW_RELIC_LICENSE_KEY=${license_key}" | sudo tee -a /etc/${collector_distro}/${collector_distro}.conf > /dev/null
                 ```

              5. Inicie el servicio de colector NRDOT:

                 ```bash
                 sudo systemctl reload-or-restart "${collector_distro}.service"
                 ```
            </Collapser>

            <Collapser id="rhel-native" title="Para RHEL/CentOS">
              1. Configura las variables de entorno:

                 ```bash
                 export collector_distro="nrdot-collector"
                 export collector_version="<NRDOT_COLLECTOR_LATEST_VERSION>" #Fetch the latest version from GitHub releases available at https://github.com/newrelic/nrdot-collector-releases/releases
                 export collector_arch="x86_64"  # Use 'arm64' for ARM processors
                 export license_key="<YOUR_NEW_RELIC_LICENSE_KEY>"
                 ```

              2. Descargue el paquete NRDOT:

                 ```bash
                 curl "https://github.com/newrelic/nrdot-collector-releases/releases/download/${collector_version}/${collector_distro}_${collector_version}_linux_${collector_arch}.rpm" \
                   --location \
                   --output collector.rpm
                 ```

              3. Instale el paquete descargado:

                 ```bash
                 sudo rpm -i collector.rpm
                 ```

              4. Configure el colector NRDOT para usar variables de entorno definidas:

                 ```bash
                 echo "NEW_RELIC_LICENSE_KEY=${license_key}" | sudo tee -a /etc/${collector_distro}/${collector_distro}.conf > /dev/null
                 ```

              5. Inicie el servicio de colector NRDOT:

                 ```bash
                 sudo systemctl reload-or-restart "${collector_distro}.service"
                 ```
            </Collapser>

            <Collapser id="binary-native" title="Para binario manual">
              1. Configura las variables de entorno:

                 ```bash
                 export collector_distro="nrdot-collector"
                 export collector_version="<NRDOT_COLLECTOR_LATEST_VERSION>" #Fetch the latest version from GitHub releases available at https://github.com/newrelic/nrdot-collector-releases/releases
                 export collector_arch="amd64"  # Use 'arm64' for ARM processors
                 export license_key="<YOUR_NEW_RELIC_LICENSE_KEY>"
                 ```

              2. Descargue el colector NRDOT:

                 ```bash
                 # Download the tarball
                 curl "https://github.com/newrelic/nrdot-collector-releases/releases/download/${collector_version}/${collector_distro}_${collector_version}_linux_${collector_arch}.tar.gz" \
                   --location \
                   --output collector.tar.gz
                 ```

              3. Extraiga el colector NRDOT:

                 ```bash
                 # Extract contents
                 tar -xzf collector.tar.gz
                 ```

              4. Ejecute el colector:

                 ```bash
                 # Run collector in foreground
                 NEW_RELIC_LICENSE_KEY="${license_key}" ./nrdot-collector --config ./config.yaml
                 ```
            </Collapser>
          </CollapserGroup>
        </Step>

        <Step>
          ### Configurar ATP [#configure-atp-native]

          Una vez instalado el colector NRDOT, edite el archivo de configuración del colector para habilitar y personalizar ATP. Las rutas de los archivos de configuración varían según el método de instalación:

          * Para las instalaciones DEB/RPM, el archivo de configuración se encuentra en `/etc/nrdot-collector/config.yaml`.
          * Para las instalaciones manuales de binarios, el archivo de configuración se encuentra dentro de la carpeta extraída.

          Para editar el archivo de configuración:

          1. Abra el archivo de configuración (`config.yaml`) con un editor de texto:

             * Para instalaciones DEB/RPM:

             ```bash
             sudo nano /etc/nrdot-collector/config.yaml
             ```

             * Para instalaciones manuales de binarios:

             ```bash
             nano config.yaml
             ```

          2. Para recopilar las métricas de procesos, en la sección `scrapers` del receptor `hostmetrics`, agregue la siguiente configuración `process`:

             ```yaml
             receivers:
               hostmetrics:
                 scrapers:
                   # Your existing scrapers...
                   process:
                     metrics:
                       process.cpu.utilization:
                         enabled: true
                       process.memory.utilization:
                         enabled: true
                     mute_process_name_error: true
                     mute_process_exe_error: true
                     mute_process_io_error: true
                     mute_process_user_error: true
             ```

          3. Para habilitar ATP, ubique la sección `processors` existente y agregue la configuración `adaptivetelemetry` debajo de ella:

             ```yaml
             processors:
               adaptivetelemetry:
                 enable_storage: true
                 retention_minutes: 30
                 include_process_list:
                   - "/usr/bin/postgres"
                   - "/usr/sbin/nginx" # Replace with your target processes
                 metric_thresholds:
                   process.cpu.utilization: 0.05     # 5% CPU
                   process.memory.utilization: 0.05  # 5% memory
             ```

          4. Agregue el procesador ATP a su pipeline de métricas en la sección `service`:

             ```yaml
             service:
               pipelines:
                 metrics/host:
                   receivers: [hostmetrics]
                   processors:
                     - memory_limiter
                     - adaptivetelemetry  # ADD THIS LINE
                     - metricstransform
                     - filter/exclude_cpu_utilization
                     - filter/exclude_memory_utilization
             ```

          5. *(Opcional)* Actualice la configuración de ATP, como los umbrales de métricas, según sea necesario. Para más detalles sobre las opciones de configuración, consulte los [Parámetros de configuración](#config-parameters).

          6. Almacene el archivo de configuración.

          7. Reinicie el colector NRDOT para aplicar los cambios:

          ```bash
          sudo systemctl restart nrdot-collector
          ```
        </Step>

        <Step>
          ### Verificar la migración [#verify-migration]

          Una vez que la instalación sea exitosa, verifique que los datos estén fluyendo a New Relic:

          1. Para verificar el estado del servicio, ejecute:

             ```bash
             sudo systemctl status nrdot-collector
             ```

          2. Para consultar los logs, ejecute:

             ```bash
             sudo journalctl -u nrdot-collector -f
             ```
        </Step>

        <Step>
          ### Acceda a los datos de ATP en New Relic [#access-data]

          Una vez que el ATP esté configurado, comienza a recopilar datos de su host Linux. Puede acceder a estos datos en la UI de New Relic OpenTelemetry. Para obtener más información sobre la UI de OpenTelemetry de New Relic, consulte [OpenTelemetry APM UI](/docs/opentelemetry/get-started/apm-monitoring/opentelemetry-apm-ui).

          **Para ver los datos de métricas del proceso ATP en New Relic:**

          1. Vaya a **<DNT>[one.newrelic.com](https://one.newrelic.com) &gt; All Entities</DNT>**.

             O

             Vaya a <DNT>**[one.newrelic.com](https://one.newrelic.com) &gt; Catalogs &gt; Infrastructure**</DNT>.

          2. Busque la entidad donde instaló el colector NRDOT con ATP.

          3. Seleccione la entidad y luego haga clic en **<DNT>Process</DNT>** en el panel izquierdo.

             En la página <DNT>Process</DNT>, puede ver todos los procesos que se ejecutan en su host, junto con sus ID y las métricas de utilización de CPU y memoria. También muestra la relación padre-hijo entre procesos si un proceso genera otros procesos.

             <img style={{ align: 'left' }} title="ATP process metrics in New Relic OpenTelemetry UI" alt="ATP process metrics in New Relic OpenTelemetry UI" src="/images/atp-process-metrics.webp" />
        </Step>
      </Steps>
    </TabsPageItem>
  </TabsPages>
</Tabs>

## Parámetro de configuración [#config-parameters]

<CollapserGroup>
  <Collapser id="core-settings" title="Configuración principal">
    <table>
      <thead>
        <tr>
          <th>
            **Parámetro**
          </th>

          <th>
            **Tipo**
          </th>

          <th>
            **Por defecto**
          </th>

          <th>
            **Descripción**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `enable_storage`
          </td>

          <td>
            booleano
          </td>

          <td>
            `true`
          </td>

          <td>
            Habilite el almacenamiento persistente. Las rutas de almacenamiento se determinan automáticamente: Linux: `/var/lib/nrdot-collector/adaptiveprocess.db`, Windows: `%LOCALAPPDATA%\nrdot-collector\adaptiveprocess.db`
          </td>
        </tr>

        <tr>
          <td>
            `retention_minutes`
          </td>

          <td>
            entero
          </td>

          <td>
            `30`
          </td>

          <td>
            Cuánto tiempo retener el estado del proceso en minutos
          </td>
        </tr>

        <tr>
          <td>
            `include_process_list`
          </td>

          <td>
            matriz
          </td>

          <td>
            `[]`
          </td>

          <td>
            Nombres de procesos para incluir siempre (omite el filtrado)
          </td>
        </tr>

        <tr>
          <td>
            `metric_thresholds`
          </td>

          <td>
            mapa
          </td>

          <td>
            `{}`
          </td>

          <td>
            Umbrales estáticos por tipo de métrica
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="dynamic-thresholds" title="Umbrales dinámicos">
    <table>
      <thead>
        <tr>
          <th>
            **Parámetro**
          </th>

          <th>
            **Tipo**
          </th>

          <th>
            **Por defecto**
          </th>

          <th>
            **Descripción**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `enable_dynamic_thresholds`
          </td>

          <td>
            booleano
          </td>

          <td>
            `false`
          </td>

          <td>
            Habilitar el ajuste de umbral adaptativo
          </td>
        </tr>

        <tr>
          <td>
            `dynamic_smoothing_factor`
          </td>

          <td>
            Flotante
          </td>

          <td>
            `0.1`
          </td>

          <td>
            Factor de suavizado para la adaptación de umbrales (0.0-1.0)
          </td>
        </tr>

        <tr>
          <td>
            `min_thresholds`
          </td>

          <td>
            mapa
          </td>

          <td>
            `{}`
          </td>

          <td>
            Valores de umbral mínimo por métrica
          </td>
        </tr>

        <tr>
          <td>
            `max_thresholds`
          </td>

          <td>
            mapa
          </td>

          <td>
            `{}`
          </td>

          <td>
            Valores máximos de umbral por métrica
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="multi-metric-scoring" title="Puntuación compuesta multimétrica">
    <table>
      <thead>
        <tr>
          <th>
            **Parámetro**
          </th>

          <th>
            **Tipo**
          </th>

          <th>
            **Por defecto**
          </th>

          <th>
            **Descripción**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `enable_multi_metric`
          </td>

          <td>
            booleano
          </td>

          <td>
            `false`
          </td>

          <td>
            Habilitar la puntuación compuesta en las métricas
          </td>
        </tr>

        <tr>
          <td>
            `composite_threshold`
          </td>

          <td>
            Flotante
          </td>

          <td>
            `1.5`
          </td>

          <td>
            Umbral para la evaluación de la puntuación compuesta. Este puntaje debe ser mayor que `0.0`
          </td>
        </tr>

        <tr>
          <td>
            `weights`
          </td>

          <td>
            mapa
          </td>

          <td>
            `{}`
          </td>

          <td>
            Valores de peso por métrica para la puntuación compuesta
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="anomaly-detection" title="Detección de anomalías">
    <table>
      <thead>
        <tr>
          <th>
            **Parámetro**
          </th>

          <th>
            **Tipo**
          </th>

          <th>
            **Por defecto**
          </th>

          <th>
            **Descripción**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `enable_anomaly_detection`
          </td>

          <td>
            booleano
          </td>

          <td>
            `false`
          </td>

          <td>
            Habilitar capa de detección de anomalías
          </td>
        </tr>

        <tr>
          <td>
            `anomaly_history_size`
          </td>

          <td>
            entero
          </td>

          <td>
            `15`
          </td>

          <td>
            Número de puntos de datos históricos a rastrear
          </td>
        </tr>

        <tr>
          <td>
            `anomaly_change_threshold`
          </td>

          <td>
            Flotante
          </td>

          <td>
            `50.0`
          </td>

          <td>
            Umbral de cambio porcentual para anomalías
          </td>
        </tr>

        <tr>
          <td>
            `anomaly_min_data_points`
          </td>

          <td>
            entero
          </td>

          <td>
            `3`
          </td>

          <td>
            Puntos de datos mínimos requeridos antes de la detección de anomalías
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

/\* ## Pautas de umbrales de métricas ### Utilización de CPU (escala 0.0-1.0) - \*\*Filtrado ligero\*\*: \`0.10\` (10% CPU) - \*\*Filtrado estándar\*\*: \`0.05\` (5% CPU) - \*\*Filtrado agresivo\*\*: \`0.02\` (2% CPU) ### Utilización de memoria (escala 0.0-1.0) - \*\*Filtrado ligero\*\*: \`0.10\` (10% memoria) - \*\*Filtrado estándar\*\*: \`0.05\` (5% memoria) - \*\*Filtrado agresivo\*\*: \`0.02\` (2% memoria) ### Uso de memoria (bytes) - \*\*Procesos pequeños\*\*: \`52428800\` (50 MB) - \*\*Procesos medianos\*\*: \`104857600\` (100 MB) - \*\*Procesos grandes\*\*: \`209715200\` (200 MB) ### Umbrales de E/S (bytes) - \*\*E/S ligera\*\*: \`1048576\` (1 MB) - \*\*E/S media\*\*: \`5242880\` (5 MB) - \*\*E/S pesada\*\*: \`10485760\` (10 MB) ## Coincidencia de nombres de procesos ATP busca coincidencias de nombres de procesos usando la ruta completa: ### Ejemplos - ✅ \*\*Correcto\*\*: \`/usr/sbin/nginx\` - ✅ \*\*Correcto\*\*: \`/usr/bin/java\` - ❌ \*\*Incorrecto\*\*: \`&quot;nginx&quot;\` no coincidirá ### Nombres de procesos comunes \`\`\`yaml include\_process\_list: # Servidores web - &quot;nginx&quot; - &quot;apache2&quot; - &quot;httpd&quot; # Bases de datos - &quot;postgres&quot; - &quot;mysql&quot; - &quot;redis&quot; - &quot;mongodb&quot; # Aplicaciones - &quot;java&quot; - &quot;python&quot; - &quot;node&quot; - &quot;php-fpm&quot; \`\`\` \*/

## Recursos relacionados [#related-resources]

<DocTiles>
  <DocTile title="Resolución de problemas" path="/docs/opentelemetry/nrdot/atp/troubleshooting">
    Aprenda a solucionar problemas de ATP para su entorno.
  </DocTile>

  <DocTile title="Consulta tus datos" path="/docs/opentelemetry/nrdot/atp/query">
    Aprenda a consultar datos de ATP en New Relic usando NRQL.
  </DocTile>

  <DocTile title="Características-avanzadas" path="/docs/opentelemetry/nrdot/atp/advanced-features">
    Aprenda a habilitar funciones avanzadas para su implementación de ATP.
  </DocTile>
</DocTiles>