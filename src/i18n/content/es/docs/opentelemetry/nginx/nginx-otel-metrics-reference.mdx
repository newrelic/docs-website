---
title: Referencia de métricas y atributos de NGINX OpenTelemetry
metaDescription: 'Complete reference of NGINX metrics collected via OpenTelemetry, including resource attributes for both on-host and Kubernetes deployments.'
freshnessValidatedDate: never
translationType: machine
---

Esta referencia cubre todas las métricas y atributos recopilados por el receptor OpenTelemetry NGINX, aplicable tanto a implementaciones en host como en Kubernetes.

## Métricas principales de NGINX [#core-metrics]

El [nginxreceiver](https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/nginxreceiver) de OpenTelemetry Collector Contrib recopila las siguientes métricas del módulo de estado stub de NGINX:

<table>
  <thead>
    <tr>
      <th style={{ width: "350px" }}>
        Métrica
      </th>

      <th>
        Descripción
      </th>

      <th>
        Tipo
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `nginx.connections_accepted`
      </td>

      <td>
        El número total de conexiones de cliente aceptadas. Utilice esto para rastrear las tasas de aceptación de conexiones a lo largo del tiempo.
      </td>

      <td>
        Suma
      </td>
    </tr>

    <tr>
      <td>
        `nginx.connections_handled`
      </td>

      <td>
        El número total de conexiones manejadas. Generalmente, el valor del parámetro es el mismo que nginx.connections\_accepted a menos que se hayan alcanzado algunos límites de recursos (por ejemplo, el límite worker\_connections). Una brecha entre aceptadas y manejadas sugiere restricciones de recursos.
      </td>

      <td>
        Suma
      </td>
    </tr>

    <tr>
      <td>
        `nginx.connections_current`
      </td>

      <td>
        El número actual de conexiones nginx por estado. Los estados incluyen: <strong>activo</strong> (conexiones activas totales), <strong>reading</strong> (leyendo encabezados de solicitud), <strong>writing</strong> (escribiendo respuestas), <strong>waiting</strong> (conexiones keep-alive esperando la siguiente solicitud).
      </td>

      <td>
        Suma
      </td>
    </tr>

    <tr>
      <td>
        `nginx.requests`
      </td>

      <td>
        Número total de solicitudes realizadas al servidor desde que se inició. Utilice los cálculos de tasa para derivar las solicitudes por segundo para el monitoreo del rendimiento.
      </td>

      <td>
        Suma
      </td>
    </tr>
  </tbody>
</table>

**Consejos de planificación de capacidad:**

* Las conexiones altas `waiting` pueden indicar oportunidades de ajuste de keep-alive
* La brecha entre `accepted` y `handled` conexiones sugiere restricciones de recursos
* Las relaciones solicitud-conexión ayudan a optimizar las configuraciones de los trabajadores

## Atributos de recursos [#resource-attributes]

Los atributos de recursos brindan contexto sobre su implementación de NGINX y varían según si está utilizando la implementación en el host o en Kubernetes.

### atributo común [#common-attributes]

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        Atributo
      </th>

      <th style={{ width: "350px" }}>
        Descripción
      </th>

      <th>
        Valores de ejemplo
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `state`
      </td>

      <td>
        El estado de una conexión (aplicable a la métrica `nginx.connections_current`)
      </td>

      <td>
        `active`, `reading`, `writing`, `waiting`
      </td>
    </tr>

    <tr>
      <td>
        `nginx.server.endpoint`
      </td>

      <td>
        La URL del punto final de estado stub de NGINX
      </td>

      <td>
        `http://localhost:8080/stub_status`
      </td>
    </tr>
  </tbody>
</table>

### Atributos de implementación en el host [#on-host-attributes]

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        Atributo
      </th>

      <th style={{ width: "350px" }}>
        Descripción
      </th>

      <th>
        Valores de ejemplo
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `nginx.deployment.name`
      </td>

      <td>
        Un nombre único para identificar esta implementación de NGINX
      </td>

      <td>
        `production-web-01`, `staging-api`
      </td>
    </tr>

    <tr>
      <td>
        `nginx.display.name`
      </td>

      <td>
        Un nombre fácil de mostrar que combina el prefijo &quot;server&quot; con el nombre de la implementación
      </td>

      <td>
        `server:production-web-01`
      </td>
    </tr>

    <tr>
      <td>
        `host.name`
      </td>

      <td>
        El nombre de host del sistema donde se está ejecutando NGINX
      </td>

      <td>
        `web-server-01.example.com`
      </td>
    </tr>

    <tr>
      <td>
        `host.id`
      </td>

      <td>
        El identificador único del sistema host
      </td>

      <td>
        `i-1234567890abcdef0`
      </td>
    </tr>

    <tr>
      <td>
        `logtype`
      </td>

      <td>
        El tipo de log que se está recopilando (solo aplicable a los logs). Utilizado por las [reglas de análisis](https://docs.newrelic.com/docs/logs/ui-data/built-log-parsing-rules/#nginx) integradas de New Relic. Este atributo solo está disponible cuando el reenvío de logs está habilitado.
      </td>

      <td>
        `nginx` (para logs de acceso), `nginx-error` (para logs de errores)
      </td>
    </tr>
  </tbody>
</table>

### Atributos de implementación de Kubernetes [#kubernetes-attributes]

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        Atributo
      </th>

      <th style={{ width: "350px" }}>
        Descripción
      </th>

      <th>
        Valores de ejemplo
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `k8s.cluster.name`
      </td>

      <td>
        El nombre del clúster de Kubernetes
      </td>

      <td>
        `nginx-cluster`, `production-k8s`
      </td>
    </tr>

    <tr>
      <td>
        `k8s.namespace.name`
      </td>

      <td>
        El espacio de nombres de Kubernetes donde se está ejecutando el pod de NGINX
      </td>

      <td>
        `default`, `web-services`, `production`
      </td>
    </tr>

    <tr>
      <td>
        `k8s.pod.name`
      </td>

      <td>
        El nombre del pod de Kubernetes que ejecuta NGINX
      </td>

      <td>
        `nginx-deployment-7d4b8c6f9-x5z8w`
      </td>
    </tr>

    <tr>
      <td>
        `nginx.deployment.name`
      </td>

      <td>
        Establecido en el nombre del pod para implementaciones de Kubernetes
      </td>

      <td>
        `nginx-deployment-7d4b8c6f9-x5z8w`
      </td>
    </tr>

    <tr>
      <td>
        `nginx.display.name`
      </td>

      <td>
        Un nombre para mostrar completo que incluye información del clúster, el espacio de nombres y el pod
      </td>

      <td>
        `server:k8s:nginx-cluster:default:pod:nginx-deployment-7d4b8c6f9-x5z8w:nginx:8080`
      </td>
    </tr>
  </tbody>
</table>

## Detalles de la recopilación de métricas [#collection-details]

### Frecuencia de recopilación

* **Intervalo predeterminado**: 30 segundos
* **Configurable**: Se puede ajustar en la configuración de OpenTelemetry Collector

### Fuente de datos

Todas las métricas se recopilan del [módulo stub\_status](https://nginx.org/en/docs/http/ngx_http_stub_status_module.html) de NGINX, que debe estar habilitado y configurado para exponer un punto final HTTP.

### Tipos métricos

* **Sumar métricas**: Valores acumulativos que representan totales a lo largo del tiempo
* **Cálculos de tasa**: Utilice la función `rate()` de New Relic para convertir las métricas acumulativas en tasas por segundo para el monitoreo

## Documentación relacionada [#related-docs]

**Guías de configuración:**

* [Monitoree NGINX en entornos autohospedados](/docs/opentelemetry/nginx/nginx-otel-host/) - Configuración completa para implementaciones en el host
* [Monitoree NGINX en Kubernetes](/docs/opentelemetry/nginx/nginx-otel-kubernetes/) - Configuración completa para implementaciones de Kubernetes

**Uso de datos:**

* [Encuentre y consulte sus datos de NGINX](/docs/opentelemetry/nginx/find-and-query-your-data/) - Dashboards, consultas NRQL y alertas

**Referencia técnica:**

* [Documentación del receptor NGINX](https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/receiver/nginxreceiver/documentation.md) - Detalles técnicos de OpenTelemetry