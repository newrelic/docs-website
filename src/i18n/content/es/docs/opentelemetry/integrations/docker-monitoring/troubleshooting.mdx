---
title: Solucionar problemas de monitoreo de contenedores Docker
tags:
  - Integrations
  - OpenTelemetry
  - Docker
  - Troubleshooting
metaDescription: 'Troubleshoot common issues with Docker container monitoring using OpenTelemetry Collector, including collector problems, missing metrics, and configuration issues.'
freshnessValidatedDate: never
translationType: machine
---

Si tiene problemas con su configuración de monitoreo de Docker, consulte estos problemas comunes y sus soluciones.

<Tabs>
  <TabsBar>
    <TabsBarItem id="nrdot-troubleshooting">
      Colector NRDOT
    </TabsBarItem>

    <TabsBarItem id="otelcol-troubleshooting">
      OpenTelemetry Collector Contrib
    </TabsBarItem>
  </TabsBar>

  <TabsPages>
    <TabsPageItem id="nrdot-troubleshooting">
      <Callout variant="tip">
        **Solución de problemas generales de NRDOT**: Para problemas de inicio del colector, validación de la configuración, conectividad de red y diagnósticos de NrIntegrationError, consulta la [Guía de solución de problemas de NRDOT](https://github.com/newrelic/nrdot-collector-releases/blob/main/distributions/TROUBLESHOOTING.md). Los siguientes problemas son específicos del monitoreo de contenedores Docker.
      </Callout>

      <CollapserGroup>
        <Collapser id="nrdot-no-metrics" title="No aparecen métricas de Docker en New Relic">
          **Problema**: Los contenedores Docker están en ejecución, pero no aparecen métricas de Docker en New Relic después de más de 10 minutos.

          **Diagnósticos**:

          ```bash
          # Check Docker daemon accessibility
          docker info

          # Test Docker socket permissions
          ls -l /var/run/docker.sock

          # Verify containers are running
          docker ps

          # Check collector logs for Docker-specific errors
          journalctl -u nrdot-collector | grep -i "docker"
          ```

          **Soluciones**:

          1. **Acceso al socket de Docker**: Agregue el usuario nrdot-collector al grupo docker:

             ```bash
             sudo usermod -aG docker nrdot-collector
             sudo systemctl restart nrdot-collector
             ```

          2. **Versión de la API de Docker**: Asegúrese de que la versión de la API de Docker sea 1.25+:

             ```bash
             docker version --format '{{.Client.APIVersion}}'
             ```
        </Collapser>

        <Collapser id="nrdot-permission-errors" title="Errores de permiso denegado">
          **Problema**: Los logs del colector muestran &quot;permiso denegado&quot; al acceder al socket de Docker.

          **Diagnósticos**:

          ```bash
          # Check socket ownership and permissions
          ls -la /var/run/docker.sock

          # Check collector user membership
          groups nrdot-collector

          # Check collector logs for permission errors
          journalctl -u nrdot-collector | grep -i "permission denied"
          ```

          **Soluciones**:

          ```bash
          # Option 1: Add collector user to docker group (recommended)
          sudo usermod -aG docker nrdot-collector
          sudo systemctl restart nrdot-collector

          # Option 2: Adjust socket permissions (less secure)
          sudo chmod 666 /var/run/docker.sock

          # Option 3: Run collector as root (not recommended for production)
          # Modify systemd service file User= setting
          ```
        </Collapser>

        <Collapser id="nrdot-incomplete-metrics" title="Métricas de contenedor incompletas o faltantes">
          **Problema**: Algunos contenedores muestran métricas mientras que otros no, o las métricas son esporádicas.

          **Diagnósticos**:

          ```bash
          # Check for containers with networking issues
          docker inspect $(docker ps -q) | grep -A5 "NetworkSettings"

          # Review collector configuration
          cat /etc/nrdot-collector/docker-stats-config.yaml | grep -A10 "docker_stats:"

          # Check for resource constraints
          docker stats --no-stream

          # Check collector logs for specific errors
          journalctl -u nrdot-collector | grep -i "docker_stats"
          ```

          **Soluciones**:

          * **Visibilidad de contenedores**: Asegúrese de que todos los contenedores sean accesibles a través de la ruta del socket de Docker configurada en el recopilador
          * **Límites de recursos**: Aumente los valores de tiempo de espera del colector si los contenedores tardan en responder. Editar su `/etc/nrdot-collector/docker-stats-config.yaml`:
            ```yaml
            receivers:
              docker_stats:
                timeout: 10s  # Increase from default 5s
                collection_interval: 30s  # Reduce frequency if needed
            ```
          * **Espacios de nombres de red**: Algunos contenedores en espacios de nombres de red restringidos pueden no ser accesibles
        </Collapser>

        <Collapser id="nrdot-no-logs" title="La recopilación de logs no funciona">
          **Problema**: Se configuró la recolección de logs, pero los logs del contenedor no aparecen en New Relic.

          **Diagnósticos**:

          ```bash
          # Check log directory permissions
          ls -la /var/lib/docker/containers/

          # Verify receiver creator is discovering containers
          journalctl -u nrdot-collector | grep -i "receiver.*creator\|docker.*observer"

          # Check if containers have exposed ports (required for discovery)
          docker ps --format 'table {{.Names}}\t{{.Ports}}'

          # Verify logs pipeline is configured
          journalctl -u nrdot-collector | grep -i "logs"
          ```

          **Soluciones**:

          1. **Permisos de archivo**: Otorgar acceso al directorio de logs:

             ```bash
             sudo chmod -R 755 /var/lib/docker/containers/
             # Or add collector to docker group
             sudo usermod -aG docker nrdot-collector
             sudo systemctl restart nrdot-collector
             ```

          2. **Exposición de puertos del contenedor**: Exponga los puertos para el descubrimiento de contenedores:

             ```bash
             # When running containers, expose at least one port
             docker run -p 8080:8080 my-app:latest
             # Or use --expose flag
             docker run --expose 80 my-app:latest
             ```

          3. **Verifique la configuración de logs**: Asegúrese de que su configuración de recolección de logs esté incluida:

             ```bash
             # Check systemd override
             sudo systemctl cat nrdot-collector | grep -A2 "ExecStart="
             # Should point to: --config=/etc/nrdot-collector/docker-stats-config.yaml (or combined config with logs)
             ```

          4. **Consultar logs en New Relic**:

             ```sql
             FROM Log SELECT * WHERE newrelic.source='api.logs.otlp' SINCE 1 hour ago
             ```
        </Collapser>
      </CollapserGroup>
    </TabsPageItem>

    <TabsPageItem id="otelcol-troubleshooting">
      <CollapserGroup>
        <Collapser id="collector-issues" title="El Colector no se inicia o se bloquea">
          **Problema**: OpenTelemetry Collector falla al iniciar o se cierra de inmediato.

          **Diagnósticos**:

          ```bash
          # Check collector status
          sudo systemctl status otelcol-contrib

          # View recent logs
          journalctl -u otelcol-contrib --since "1 hour ago" -f

          # Test configuration syntax
          otelcol-contrib --config-validate --config=/etc/otelcol-contrib/config.yaml
          ```

          **Soluciones**:

          * **Errores de configuración**: Corrija los errores de sintaxis YAML y asegúrese de que todos los campos obligatorios estén presentes
          * **Permisos faltantes**: Asegúrese de que el usuario del recopilador tenga acceso de lectura al archivo de configuración
          * **Variables de entorno**: Verifique que `NEWRELIC_LICENSE_KEY` y `NEWRELIC_OTLP_ENDPOINT` estén configuradas correctamente
        </Collapser>

        <Collapser id="no-metrics" title="No aparecen métricas en New Relic">
          **Problema**: Los contenedores de Docker se están ejecutando, pero no aparecen métricas en New Relic después de más de 10 minutos.

          **Diagnósticos**:

          ```bash
          # Verify collector is running and processing data
          journalctl -u otelcol-contrib | grep -i "docker\|error\|export"

          # Check Docker daemon accessibility
          docker info

          # Test Docker socket permissions
          ls -l /var/run/docker.sock

          # Verify containers are running
          docker ps
          ```

          **Soluciones**:

          1. **Acceso al socket de Docker**: Agregue el usuario del recopilador al grupo docker:

             ```bash
             sudo usermod -aG docker otelcol-contrib
             sudo systemctl restart otelcol-contrib
             ```

          2. **Problemas con la clave de licencia**: Verifique que su clave de licencia sea correcta y tenga los permisos adecuados:

             ```bash
             echo $NEWRELIC_LICENSE_KEY
             # Should be 40-character NRAK-prefixed key for US, or EU equivalent
             ```

          3. **Conectividad de red**: Pruebe la accesibilidad del endpoint OTLP:

             ```bash
             # For US region
             curl -v -H "api-key: $NEWRELIC_LICENSE_KEY" https://otlp.nr-data.net/v1/metrics

             # For EU region
             curl -v -H "api-key: $NEWRELIC_LICENSE_KEY" https://otlp.eu01.nr-data.net/v1/metrics
             ```

          4. **Versión de la API de Docker**: Asegúrese de que la versión de la API de Docker sea 1.25+:

             ```bash
             docker version --format '{{.Client.APIVersion}}'
             ```
        </Collapser>

        <Collapser id="permission-errors" title="Errores de permiso denegado">
          **Problema**: Los logs del colector muestran &quot;permiso denegado&quot; al acceder al socket de Docker.

          **Diagnósticos**:

          ```bash
          # Check socket ownership and permissions
          ls -la /var/run/docker.sock

          # Check collector user membership
          groups otelcol-contrib
          ```

          **Soluciones**:

          ```bash
          # Option 1: Add collector user to docker group (recommended)
          sudo usermod -aG docker otelcol-contrib
          sudo systemctl restart otelcol-contrib

          # Option 2: Adjust socket permissions (less secure)
          sudo chmod 666 /var/run/docker.sock

          # Option 3: Run collector as root (not recommended for production)
          # Modify systemd service file User= setting
          ```
        </Collapser>

        <Collapser id="incomplete-metrics" title="Métricas de contenedor incompletas o faltantes">
          **Problema**: Algunos contenedores muestran métricas mientras que otros no, o las métricas son esporádicas.

          **Diagnósticos**:

          ```bash
          # Check for containers with networking issues
          docker inspect $(docker ps -q) | grep -A5 "NetworkSettings"

          # Review collector configuration
          grep -A20 "docker_stats:" /etc/otelcol-contrib/config.yaml

          # Check for resource constraints
          docker stats --no-stream
          ```

          **Soluciones**:

          * **Visibilidad de contenedores**: Asegúrese de que todos los contenedores sean accesibles a través de la ruta del socket de Docker configurada en el recopilador

          * **Límites de recursos**: Aumente los valores de tiempo de espera del colector si los contenedores tardan en responder:

            ```yaml
            docker_stats:
              timeout: 10s  # Increase from default 5s
              collection_interval: 30s  # Reduce frequency if needed
            ```

          * **Espacios de nombres de red**: Algunos contenedores en espacios de nombres de red restringidos pueden no ser accesibles
        </Collapser>

        <Collapser id="performance-issues" title="Alto uso de memoria o CPU por el recopilador">
          **Problema**: OpenTelemetry Collector consume recursos del sistema excesivos.

          **Diagnósticos**:

          ```bash
          # Monitor collector resource usage
          top -p $(pgrep otelcol-contrib)

          # Check metric collection frequency
          grep -A10 "docker_stats:" /etc/otelcol-contrib/config.yaml

          # Count active containers
          docker ps --format 'table {{.Names}}\t{{.Status}}' | wc -l
          ```

          **Soluciones**:

          * **Ajustar el intervalo de recolección**: Reduzca la frecuencia de monitoreo para entornos con un alto número de contenedores:

            ```yaml
            docker_stats:
              collection_interval: 30s  # Increase from 15s
            ```

          * **Desactive las métricas costosas**: Desactive las métricas por CPU si no son necesarias:

            ```yaml
            docker_stats:
              metrics:
                container.cpu.usage.percpu:
                  enabled: false
            ```

          * **Configure el procesamiento por lotes**: Optimice el procesamiento por lotes para su entorno:

            ```yaml
            batch:
              timeout: 60s
              send_batch_size: 1024
            ```
        </Collapser>

        <Collapser id="no-logs" title="La recopilación de logs no funciona">
          **Problema**: Se configuró la recolección de logs, pero los logs del contenedor no aparecen en New Relic.

          **Diagnósticos**:

          ```bash
          # Check log directory permissions
          ls -la /var/lib/docker/containers/

          # Verify receiver creator is discovering containers
          journalctl -u otelcol-contrib | grep -i "receiver.*creator\|docker.*observer"

          # Check if containers have exposed ports (required for discovery)
          docker ps --format 'table {{.Names}}\t{{.Ports}}'
          ```

          **Soluciones**:

          1. **Permisos de archivo**: Otorgar acceso al directorio de logs:

             ```bash
             sudo chmod -R 755 /var/lib/docker/containers/
             # Or add collector to docker group
             sudo usermod -aG docker otelcol-contrib
             ```

          2. **Exposición de puertos del contenedor**: Exponga los puertos para el descubrimiento de contenedores:

             ```bash
             # When running containers, expose at least one port
             docker run -p 8080:8080 my-app:latest
             # Or use --expose flag
             docker run --expose 80 my-app:latest
             ```

          3. **Configuración del observador**: Verifique la configuración del observador de Docker:

             ```yaml
             docker_observer:
               endpoint: unix:///var/run/docker.sock
               use_hostname_if_present: true
               use_container_labels: true
             ```
        </Collapser>

        <Collapser id="wrong-account" title="Los datos no aparecen en la cuenta correcta de New Relic">
          **Problema**: Las métricas aparecen en la cuenta u organización de New Relic incorrecta.

          **Diagnósticos**:

          ```bash
          # Verify license key format and region
          echo $NEWRELIC_LICENSE_KEY | cut -c1-4
          # Should show "NRAK" for US accounts

          # Check configured endpoint
          echo $NEWRELIC_OTLP_ENDPOINT
          ```

          **Soluciones**:

          * **Cuentas de EE. UU.**: Use `https://otlp.nr-data.net`
          * **Cuentas de la UE**: Use `https://otlp.eu01.nr-data.net`
          * **Verifique la clave de licencia**: Asegúrese de usar la clave de licencia de la cuenta correcta
        </Collapser>
      </CollapserGroup>

      Si los problemas persisten, consulte la [guía de solución de problemas de OpenTelemetry Collector](https://opentelemetry.io/docs/collector/troubleshooting/) y la [documentación de OpenTelemetry de New Relic](/docs/opentelemetry/opentelemetry-introduction/).
    </TabsPageItem>
  </TabsPages>
</Tabs>

## Próximos pasos [#next-steps]

Si ha resuelto sus problemas:

* **Volver a la configuración**: Regrese a la [guía de configuración de monitoreo de Docker](/docs/opentelemetry/integrations/docker-monitoring/self-hosted) para completar su configuración
* **Explora tus datos**: Aprende a consultar y visualizar tus métricas de Docker con la [guía de referencia de métricas](/docs/opentelemetry/integrations/docker-monitoring/metrics-reference)
* **Configura alertas**: Crea un monitoreo proactivo con [condiciones de alerta](/docs/alerts/create-alert/create-alert-condition/create-nrql-alert-conditions/) para métricas críticas de contenedores