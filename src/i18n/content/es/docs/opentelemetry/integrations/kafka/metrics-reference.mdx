---
title: Referencia de métricas de OpenTelemetry Kafka
tags:
  - Integrations
  - OpenTelemetry
  - Kafka
  - Metrics
metaDescription: 'Complete reference for Kafka metrics collected via OpenTelemetry including Kafka metrics receiver, JMX metrics, and client metrics.'
freshnessValidatedDate: never
translationType: machine
---

This page documents the metrics collected when monitoring Apache Kafka with OpenTelemetry. Metrics are collected via the [Kafka metrics receiver](https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/kafkametricsreceiver), JMX metrics (from OpenTelemetry Java Agent or Prometheus JMX Exporter), and [OpenTelemetry Java agent](https://opentelemetry.io/docs/languages/java/automatic/) for client-side metrics.

## Métodos de recopilación de métricas [#collection-methods]

OpenTelemetry Kafka monitoring uses two complementary collection methods:

* **[Receptor de métricas de Kafka](https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/kafkametricsreceiver)**: Se conecta al puerto de inicio de Kafka para recopilar métricas de clúster, tema, partición y grupo de consumidores
* **JMX metrics**: Collected via OpenTelemetry Java Agent (self-hosted) or Prometheus JMX Exporter (Kubernetes) to gather detailed broker metrics and JVM metrics

## Métricas del receptor de métricas de Kafka [#kafka-metrics-receiver]

Estas métricas se recopilan de los brokers de Kafka utilizando el protocolo Kafka (puerto de arranque). Basado en los [metadatos del receptor de métricas de Kafka](https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/receiver/kafkametricsreceiver/metadata.yaml), con algunas métricas deshabilitadas de forma predeterminada o en configuraciones típicas.

<CollapserGroup>
  <Collapser id="cluster-metrics" title="Racimo métrico">
    <table>
      <thead>
        <tr>
          <th style={{ width: "300px" }}>
            Nombre de la métrica
          </th>

          <th>
            Descripción
          </th>

          <th>
            Tipo
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `kafka.brokers`
          </td>

          <td>
            Número total de brokers en el clúster
          </td>

          <td>
            Medidor (int)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="topic-metrics" title="Métricas de tema">
    <table>
      <thead>
        <tr>
          <th style={{ width: "300px" }}>
            Nombre de la métrica
          </th>

          <th>
            Descripción
          </th>

          <th>
            Tipo
          </th>

          <th>
            Atributo
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `kafka.topic.partitions`
          </td>

          <td>
            Número de particiones en el tema
          </td>

          <td>
            Suma (int)
          </td>

          <td>
            tema
          </td>
        </tr>

        <tr>
          <td>
            `kafka.topic.min_insync_replicas`
          </td>

          <td>
            Réplicas mínimas en sincronización de un tema
          </td>

          <td>
            Medidor (int)
          </td>

          <td>
            tema
          </td>
        </tr>

        <tr>
          <td>
            `kafka.topic.replication_factor`
          </td>

          <td>
            Factor de replicación de un tema
          </td>

          <td>
            Medidor (int)
          </td>

          <td>
            tema
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="partition-metrics" title="Métricas de partición">
    <table>
      <thead>
        <tr>
          <th style={{ width: "300px" }}>
            Nombre de la métrica
          </th>

          <th>
            Descripción
          </th>

          <th>
            Tipo
          </th>

          <th>
            Atributo
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `kafka.partition.replicas_in_sync`
          </td>

          <td>
            Número de réplicas sincronizadas para una partición
          </td>

          <td>
            Suma (int)
          </td>

          <td>
            tema, partición
          </td>
        </tr>

        <tr>
          <td>
            `kafka.partition.replicas_in_sync.total`
          </td>

          <td>
            Número total de réplicas sincronizadas agregadas en todas las particiones para un tema
          </td>

          <td>
            Suma (int)
          </td>

          <td>
            tema
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="consumer-group-metrics" title="Métricas del grupo de consumidores">
    <table>
      <thead>
        <tr>
          <th style={{ width: "300px" }}>
            Nombre de la métrica
          </th>

          <th>
            Descripción
          </th>

          <th>
            Tipo
          </th>

          <th>
            Atributo
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `kafka.consumer_group.members`
          </td>

          <td>
            Recuento de miembros en el grupo de consumidores
          </td>

          <td>
            Suma (int)
          </td>

          <td>
            grupo
          </td>
        </tr>

        <tr>
          <td>
            `kafka.consumer_group.offset`
          </td>

          <td>
            Desplazamiento actual del grupo de consumidores en la partición del tema
          </td>

          <td>
            Medidor (int)
          </td>

          <td>
            grupo, tema, partición
          </td>
        </tr>

        <tr>
          <td>
            `kafka.consumer_group.offset_sum`
          </td>

          <td>
            Suma del offset del grupo de consumidores en las particiones del tema
          </td>

          <td>
            Medidor (int)
          </td>

          <td>
            grupo, tema
          </td>
        </tr>

        <tr>
          <td>
            `kafka.consumer_group.lag`
          </td>

          <td>
            Retraso aproximado actual del grupo de consumidores en la partición del tema
          </td>

          <td>
            Medidor (int)
          </td>

          <td>
            grupo, tema, partición
          </td>
        </tr>

        <tr>
          <td>
            `kafka.consumer_group.lag_sum`
          </td>

          <td>
            Suma aproximada actual del retraso del grupo de consumidores en todas las particiones del tema
          </td>

          <td>
            Medidor (int)
          </td>

          <td>
            grupo, tema
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

## JMX metrics [#jmx-metrics]

JMX metrics provide detailed Kafka broker and JVM telemetry. These metrics are collected using:

* **Self-hosted Kafka**: [OpenTelemetry Java Agent](/docs/opentelemetry/integrations/kafka/self-hosted#jmx-config) with custom JMX configuration
* **Kubernetes (Strimzi)**: [Prometheus JMX Exporter](/docs/opentelemetry/integrations/kafka/kubernetes-strimzi#configure-jmx-exporter) with New Relic custom configuration

Both methods collect the same set of Kafka broker and JVM metrics documented below:

<CollapserGroup>
  <Collapser id="jmx-kafka-metrics" title="Kafka broker metrics">
    These metrics provide comprehensive Kafka broker telemetry including cluster health, broker performance, and per-topic metrics.

    ### Cluster-wide metrics

    Estas métricas se recopilan del broker del controlador y proporcionan información de todo el clúster:

    <table>
      <thead>
        <tr>
          <th style={{ width: "350px" }}>
            Nombre de la métrica
          </th>

          <th>
            Descripción
          </th>

          <th>
            Tipo
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `kafka.partition.offline`
          </td>

          <td>
            El número de particiones sin conexión en el clúster
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `kafka.leader.election.rate`
          </td>

          <td>
            El recuento de elección de líder
          </td>

          <td>
            Encimera
          </td>
        </tr>

        <tr>
          <td>
            `kafka.unclean.election.rate`
          </td>

          <td>
            Recuento de elección de líder no limpio: el aumento indica fallas del broker
          </td>

          <td>
            Encimera
          </td>
        </tr>

        <tr>
          <td>
            `kafka.cluster.topic.count`
          </td>

          <td>
            El número total de temas en el clúster
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `kafka.cluster.partition.count`
          </td>

          <td>
            El número total de particiones en el clúster
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `kafka.broker.fenced.count`
          </td>

          <td>
            El número de brokers bloqueados en el clúster
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `kafka.partition.non_preferred_leader`
          </td>

          <td>
            El recuento de particiones de tema para las cuales el líder no es el líder preferido
          </td>

          <td>
            Medidor
          </td>
        </tr>
      </tbody>
    </table>

    ### Broker-level metrics

    <table>
      <thead>
        <tr>
          <th style={{ width: "350px" }}>
            Nombre de la métrica
          </th>

          <th>
            Descripción
          </th>

          <th>
            Tipo
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `kafka.message.count`
          </td>

          <td>
            El número de mensajes recibidos por el broker
          </td>

          <td>
            Encimera
          </td>
        </tr>

        <tr>
          <td>
            `kafka.request.count`
          </td>

          <td>
            El número de solicitudes recibidas por el broker
          </td>

          <td>
            Encimera
          </td>
        </tr>

        <tr>
          <td>
            `kafka.request.failed`
          </td>

          <td>
            El número de solicitudes fallidas
          </td>

          <td>
            Encimera
          </td>
        </tr>

        <tr>
          <td>
            `kafka.request.time.total`
          </td>

          <td>
            El tiempo total dedicado al procesamiento de solicitudes (ms)
          </td>

          <td>
            Encimera
          </td>
        </tr>

        <tr>
          <td>
            `kafka.request.time.avg`
          </td>

          <td>
            Tiempo promedio de procesamiento de solicitudes (ms)
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `kafka.request.time.50p`
          </td>

          <td>
            Tiempo de solicitud del percentil 50 (ms)
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `kafka.request.time.99p`
          </td>

          <td>
            Tiempo de solicitud del percentil 99 (ms)
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `kafka.network.io`
          </td>

          <td>
            Bytes recibidos o enviados por el broker por segundo (incluye el atributo de dirección: entrada/salida)
          </td>

          <td>
            Encimera
          </td>
        </tr>

        <tr>
          <td>
            `kafka.purgatory.size`
          </td>

          <td>
            El número de solicitudes esperando en el purgatorio (operaciones de producción y obtención)
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `kafka.partition.count`
          </td>

          <td>
            El número de particiones en el broker
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `kafka.partition.under_replicated`
          </td>

          <td>
            El número de particiones sub-replicadas en este broker
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `kafka.isr.operation.count`
          </td>

          <td>
            Operaciones de réplica en sincronización (reducir o expandir)
          </td>

          <td>
            Encimera
          </td>
        </tr>

        <tr>
          <td>
            `kafka.lag.max`
          </td>

          <td>
            Retraso máximo entre réplicas seguidoras y líderes
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `kafka.controller.active.count`
          </td>

          <td>
            Si este broker es el controlador activo (0 o 1)
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `kafka.logs.flush.count`
          </td>

          <td>
            Recuento de vaciado de logs
          </td>

          <td>
            Encimera
          </td>
        </tr>

        <tr>
          <td>
            `kafka.logs.flush.time.50p`
          </td>

          <td>
            Tiempo de descarga de log - percentil 50 (ms)
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `kafka.logs.flush.time.99p`
          </td>

          <td>
            Tiempo de descarga de log - Percentil 99 (ms)
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `kafka.partition.under_min_isr`
          </td>

          <td>
            El número de particiones donde el número de réplicas en sincronización es menor que el mínimo
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `kafka.broker.uptime`
          </td>

          <td>
            Tiempo de actividad del broker (ms)
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `kafka.broker.leader.count`
          </td>

          <td>
            Número de particiones para las cuales este broker es el líder
          </td>

          <td>
            Medidor
          </td>
        </tr>
      </tbody>
    </table>

    **Atributos:** Muchas métricas incluyen el atributo `type` que indica el tipo de solicitud (por ejemplo, fetch, produce), o `state` para las operaciones ISR (por ejemplo, shrink, expand), o `direction` para E/S de red (entrada, salida).

    ### Métricas por tema

    <table>
      <thead>
        <tr>
          <th style={{ width: "350px" }}>
            Nombre de la métrica
          </th>

          <th>
            Descripción
          </th>

          <th>
            Tipo
          </th>

          <th>
            Atributo
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `kafka.prod.msg.count`
          </td>

          <td>
            El número de mensajes recibidos por tema
          </td>

          <td>
            Encimera
          </td>

          <td>
            tema
          </td>
        </tr>

        <tr>
          <td>
            `kafka.topic.io`
          </td>

          <td>
            Los bytes recibidos o enviados por tema
          </td>

          <td>
            Encimera
          </td>

          <td>
            tema, dirección (entrada/salida)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="jmx-jvm-metrics" title="JVM métrica">
    <table>
      <thead>
        <tr>
          <th style={{ width: "350px" }}>
            Nombre de la métrica
          </th>

          <th>
            Descripción
          </th>

          <th>
            Tipo
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `jvm.memory.heap.used`
          </td>

          <td>
            Memoria heap actual utilizada (bytes)
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `jvm.memory.heap.max`
          </td>

          <td>
            Memoria máxima de montón disponible (bytes)
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `jvm.memory.heap.committed`
          </td>

          <td>
            Memoria de montón confirmada (bytes)
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `jvm.gc.collections.count`
          </td>

          <td>
            Número total de recolecciones de basura que han ocurrido
          </td>

          <td>
            Encimera
          </td>
        </tr>

        <tr>
          <td>
            `jvm.gc.collections.elapsed`
          </td>

          <td>
            El tiempo transcurrido de recopilación acumulado aproximado (ms)
          </td>

          <td>
            Encimera
          </td>
        </tr>

        <tr>
          <td>
            `jvm.thread.count`
          </td>

          <td>
            Recuento total de subprocesos (rango típico de Kafka de 100 a 300 subprocesos)
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `jvm.system.cpu.load_1m`
          </td>

          <td>
            Promedio de carga del sistema (1 minuto) - alerta si es mayor que el recuento de CPU
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `jvm.cpu.count`
          </td>

          <td>
            Número de procesadores disponibles
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `jvm.cpu.recent_utilization`
          </td>

          <td>
            Utilización reciente de CPU para el proceso JVM (0.0 a 1.0)
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `jvm.system.cpu.utilization`
          </td>

          <td>
            Utilización reciente de la CPU para todo el sistema (0.0 a 1.0)
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `jvm.file_descriptor.count`
          </td>

          <td>
            Número de descriptores de archivos abiertos - alerta si es mayor al 80% de ulimit
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `jvm.class.count`
          </td>

          <td>
            Recuento de clases cargadas actualmente
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `jvm.memory.pool.used`
          </td>

          <td>
            Uso del grupo de memoria por generación (G1 Old Gen, Eden, Survivor) en bytes
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `jvm.memory.pool.max`
          </td>

          <td>
            Tamaño máximo del grupo de memoria (bytes)
          </td>

          <td>
            Medidor
          </td>
        </tr>

        <tr>
          <td>
            `jvm.memory.pool.used_after_last_gc`
          </td>

          <td>
            Memoria utilizada después de la última GC - muestra la línea base de memoria retenida (bytes)
          </td>

          <td>
            Medidor
          </td>
        </tr>
      </tbody>
    </table>

    **Atributos:** Las métricas de JVM incluyen atributos como `name` (para nombres de recolectores de GC o nombres de grupos de memoria).
  </Collapser>
</CollapserGroup>

## Métricas del cliente Kafka (agente OpenTelemetry Java) [#kafka-client-metrics]

Estas métricas se recopilan de las aplicaciones de productor y consumidor de Kafka instrumentadas con el [agente OpenTelemetry Java](https://opentelemetry.io/docs/languages/java/automatic/) con la instrumentación de Kafka habilitada. Estos proporcionan visibilidad del lado del cliente en las interacciones de la aplicación con los brokers de Kafka y complementan las métricas del lado del broker al proporcionar la perspectiva de la aplicación.

<CollapserGroup>
  <Collapser id="producer-metrics" title="Métricas del productor">
    ### Métricas de conexión y red

    | Nombre de la métrica                       | Descripción                            | Atributo                 |
    | ------------------------------------------ | -------------------------------------- | ------------------------ |
    | `kafka.producer.connection_count`          | Número de conexiones activas           | identificador de cliente |
    | `kafka.producer.connection_creation_rate`  | Tasa de nuevas conexiones establecidas | identificador de cliente |
    | `kafka.producer.connection_creation_total` | Total de conexiones creadas            | identificador de cliente |
    | `kafka.producer.connection_close_rate`     | Tasa de conexiones cerradas            | identificador de cliente |
    | `kafka.producer.network_io_rate`           | Tasa de operaciones de red             | identificador de cliente |
    | `kafka.producer.network_io_total`          | Operaciones de red totales             | identificador de cliente |
    | `kafka.producer.outgoing_byte_rate`        | Tasa de bytes salientes                | client-id, node-id       |
    | `kafka.producer.outgoing_byte_total`       | Total de bytes salientes               | client-id, node-id       |

    ### Métricas de solicitud y respuesta

    | Nombre de la métrica                 | Descripción                         | Atributo                 |
    | ------------------------------------ | ----------------------------------- | ------------------------ |
    | `kafka.producer.request_rate`        | Tasa de solicitudes enviadas        | client-id, node-id       |
    | `kafka.producer.request_total`       | Total de solicitudes enviadas       | client-id, node-id       |
    | `kafka.producer.request_size_avg`    | Tamaño promedio de la solicitud     | client-id, node-id       |
    | `kafka.producer.request_size_max`    | Tamaño máximo de solicitud          | client-id, node-id       |
    | `kafka.producer.request_latency_avg` | Latencia promedio de solicitud (ms) | client-id, node-id       |
    | `kafka.producer.request_latency_max` | Latencia máxima de solicitud (ms)   | client-id, node-id       |
    | `kafka.producer.response_rate`       | Tasa de respuestas recibidas        | client-id, node-id       |
    | `kafka.producer.response_total`      | Total de respuestas recibidas       | client-id, node-id       |
    | `kafka.producer.requests_in_flight`  | Número de solicitudes en curso      | identificador de cliente |

    ### Registrar métricas

    | Nombre de la métrica                     | Descripción                                                       | Atributo                 |
    | ---------------------------------------- | ----------------------------------------------------------------- | ------------------------ |
    | `kafka.producer.record_send_rate`        | Tasa de registros enviados                                        | ID de cliente, tema      |
    | `kafka.producer.record_send_total`       | Total de registros enviados                                       | ID de cliente, tema      |
    | `kafka.producer.record_error_rate`       | Tasa de errores de envío de registros                             | ID de cliente, tema      |
    | `kafka.producer.record_error_total`      | Total de errores de envío de registros                            | ID de cliente, tema      |
    | `kafka.producer.record_retry_rate`       | Tasa de reintentos de registros                                   | ID de cliente, tema      |
    | `kafka.producer.record_retry_total`      | Total de reintentos de registros                                  | ID de cliente, tema      |
    | `kafka.producer.record_size_avg`         | Tamaño promedio del registro                                      | identificador de cliente |
    | `kafka.producer.record_size_max`         | Tamaño máximo de registro                                         | identificador de cliente |
    | `kafka.producer.record_queue_time_avg`   | Tiempo promedio que los registros pasan en el búfer de envío (ms) | identificador de cliente |
    | `kafka.producer.record_queue_time_max`   | Tiempo máximo que los registros pasan en el búfer de envío (ms)   | identificador de cliente |
    | `kafka.producer.records_per_request_avg` | Promedio de registros por solicitud                               | identificador de cliente |

    ### Métricas de rendimiento

    | Nombre de la métrica                  | Descripción                     | Atributo                 |
    | ------------------------------------- | ------------------------------- | ------------------------ |
    | `kafka.producer.byte_rate`            | Tasa de bytes producidos        | ID de cliente, tema      |
    | `kafka.producer.byte_total`           | Total de bytes producidos       | ID de cliente, tema      |
    | `kafka.producer.compression_rate`     | Tasa de compresión promedio     | ID de cliente, tema      |
    | `kafka.producer.compression_rate_avg` | Relación de compresión promedio | identificador de cliente |

    ### Métricas de agrupación por lotes

    | Nombre de la métrica               | Descripción                 | Atributo                 |
    | ---------------------------------- | --------------------------- | ------------------------ |
    | `kafka.producer.batch_size_avg`    | Tamaño promedio del lote    | identificador de cliente |
    | `kafka.producer.batch_size_max`    | Tamaño máximo del lote      | identificador de cliente |
    | `kafka.producer.batch_split_rate`  | Tasa de divisiones de lotes | identificador de cliente |
    | `kafka.producer.batch_split_total` | Divisiones totales de lotes | identificador de cliente |

    ### Métricas de búfer

    | Nombre de la métrica                        | Descripción                                        | Atributo                 |
    | ------------------------------------------- | -------------------------------------------------- | ------------------------ |
    | `kafka.producer.buffer_total_bytes`         | Memoria total del búfer                            | identificador de cliente |
    | `kafka.producer.buffer_available_bytes`     | Memoria de búfer disponible                        | identificador de cliente |
    | `kafka.producer.buffer_exhausted_rate`      | Tasa de agotamiento del búfer                      | identificador de cliente |
    | `kafka.producer.buffer_exhausted_total`     | Agotamientos totales del búfer                     | identificador de cliente |
    | `kafka.producer.bufferpool_wait_ratio`      | Fracción de tiempo de espera del espacio del búfer | identificador de cliente |
    | `kafka.producer.bufferpool_wait_time_total` | Tiempo total de espera para el espacio del búfer   | identificador de cliente |

    ### Métricas de E/S

    | Nombre de la métrica                 | Descripción                           | Atributo                 |
    | ------------------------------------ | ------------------------------------- | ------------------------ |
    | `kafka.producer.io_ratio`            | Fracción de tiempo dedicado a E/S     | identificador de cliente |
    | `kafka.producer.io_time_ns_avg`      | Tiempo promedio de E/S (ns)           | identificador de cliente |
    | `kafka.producer.io_wait_time_ns_avg` | Tiempo promedio de espera de E/S (ns) | identificador de cliente |
    | `kafka.producer.io_wait_ratio`       | Fracción de tiempo de espera de E/S   | identificador de cliente |
    | `kafka.producer.iotime_total`        | Tiempo total de E/S                   | identificador de cliente |
    | `kafka.producer.io_waittime_total`   | Tiempo total de espera de E/S         | identificador de cliente |

    ### Métricas de estrangulamiento

    | Nombre de la métrica                       | Descripción                              | Atributo                 |
    | ------------------------------------------ | ---------------------------------------- | ------------------------ |
    | `kafka.producer.produce_throttle_time_avg` | Tiempo promedio de estrangulamiento (ms) | identificador de cliente |
    | `kafka.producer.produce_throttle_time_max` | Tiempo máximo de estrangulamiento (ms)   | identificador de cliente |

    ### Métricas de autenticación

    | Nombre de la métrica                                       | Descripción                                  | Atributo                 |
    | ---------------------------------------------------------- | -------------------------------------------- | ------------------------ |
    | `kafka.producer.successful_authentication_rate`            | Tasa de autenticaciones exitosas             | identificador de cliente |
    | `kafka.producer.successful_authentication_total`           | Total de autenticaciones exitosas            | identificador de cliente |
    | `kafka.producer.successful_authentication_no_reauth_total` | Autenticaciones exitosas sin reautenticación | identificador de cliente |
    | `kafka.producer.successful_reauthentication_rate`          | Tasa de reautenticaciones exitosas           | identificador de cliente |
    | `kafka.producer.successful_reauthentication_total`         | Total de reautenticaciones exitosas          | identificador de cliente |
    | `kafka.producer.failed_authentication_rate`                | Tasa de autenticaciones fallidas             | identificador de cliente |
    | `kafka.producer.failed_authentication_total`               | Autenticaciones fallidas totales             | identificador de cliente |
    | `kafka.producer.failed_reauthentication_rate`              | Tasa de reautenticaciones fallidas           | identificador de cliente |
    | `kafka.producer.failed_reauthentication_total`             | Reautenticaciones totales fallidas           | identificador de cliente |
    | `kafka.producer.reauthentication_latency_avg`              | Latencia promedio de reautenticación (ms)    | identificador de cliente |
    | `kafka.producer.reauthentication_latency_max`              | Latencia máxima de reautenticación (ms)      | identificador de cliente |

    ### Métricas misceláneas

    | Nombre de la métrica             | Descripción                                      | Atributo                 |
    | -------------------------------- | ------------------------------------------------ | ------------------------ |
    | `kafka.producer.metadata_age`    | Antigüedad de los metadatos actuales (segundos)  | identificador de cliente |
    | `kafka.producer.waiting_threads` | Número de subprocesos esperando espacio de búfer | identificador de cliente |
    | `kafka.producer.select_rate`     | Tasa de llamadas selectas                        | identificador de cliente |
    | `kafka.producer.select_total`    | Llamadas selectas totales                        | identificador de cliente |
  </Collapser>

  <Collapser id="consumer-metrics" title="Métricas del consumidor">
    ### Métricas de conexión y red

    | Nombre de la métrica                       | Descripción                            | Atributo                 |
    | ------------------------------------------ | -------------------------------------- | ------------------------ |
    | `kafka.consumer.connection_count`          | Número de conexiones activas           | identificador de cliente |
    | `kafka.consumer.connection_creation_rate`  | Tasa de nuevas conexiones establecidas | identificador de cliente |
    | `kafka.consumer.connection_creation_total` | Total de conexiones creadas            | identificador de cliente |
    | `kafka.consumer.connection_close_rate`     | Tasa de conexiones cerradas            | identificador de cliente |
    | `kafka.consumer.connection_close_total`    | Total de conexiones cerradas           | identificador de cliente |
    | `kafka.consumer.network_io_rate`           | Tasa de operaciones de red             | identificador de cliente |
    | `kafka.consumer.network_io_total`          | Operaciones de red totales             | identificador de cliente |
    | `kafka.consumer.outgoing_byte_rate`        | Tasa de bytes salientes                | client-id, node-id       |
    | `kafka.consumer.incoming_byte_rate`        | Tasa de bytes entrantes                | client-id, node-id       |

    ### Métricas de solicitud y respuesta

    | Nombre de la métrica                 | Descripción                         | Atributo           |
    | ------------------------------------ | ----------------------------------- | ------------------ |
    | `kafka.consumer.request_rate`        | Tasa de solicitudes enviadas        | client-id, node-id |
    | `kafka.consumer.request_total`       | Total de solicitudes enviadas       | client-id, node-id |
    | `kafka.consumer.request_size_avg`    | Tamaño promedio de la solicitud     | client-id, node-id |
    | `kafka.consumer.request_size_max`    | Tamaño máximo de solicitud          | client-id, node-id |
    | `kafka.consumer.request_latency_avg` | Latencia promedio de solicitud (ms) | client-id, node-id |
    | `kafka.consumer.request_latency_max` | Latencia máxima de solicitud (ms)   | client-id, node-id |
    | `kafka.consumer.response_rate`       | Tasa de respuestas recibidas        | client-id, node-id |
    | `kafka.consumer.response_total`      | Total de respuestas recibidas       | client-id, node-id |

    ### Métricas de consumo

    | Nombre de la métrica                     | Descripción                         | Atributo            |
    | ---------------------------------------- | ----------------------------------- | ------------------- |
    | `kafka.consumer.bytes_consumed_rate`     | Tasa de bytes consumidos            | ID de cliente, tema |
    | `kafka.consumer.bytes_consumed_total`    | Bytes totales consumidos            | ID de cliente, tema |
    | `kafka.consumer.records_consumed_rate`   | Tasa de registros consumidos        | ID de cliente, tema |
    | `kafka.consumer.records_consumed_total`  | Total de registros consumidos       | ID de cliente, tema |
    | `kafka.consumer.records_per_request_avg` | Promedio de registros por solicitud | ID de cliente, tema |

    ### Métricas de retraso del consumidor

    | Nombre de la métrica              | Descripción                              | Atributo                   |
    | --------------------------------- | ---------------------------------------- | -------------------------- |
    | `kafka.consumer.records_lag`      | Retraso actual en el número de registros | partición, client-id, tema |
    | `kafka.consumer.records_lag_avg`  | Retraso promedio del consumidor          | partición, client-id, tema |
    | `kafka.consumer.records_lag_max`  | Retraso máximo del consumidor            | partición, client-id, tema |
    | `kafka.consumer.records_lead`     | Líder actual en número de registros      | partición, client-id, tema |
    | `kafka.consumer.records_lead_avg` | Promedio de retraso del consumidor       | partición, client-id, tema |
    | `kafka.consumer.records_lead_min` | Liderazgo mínimo del consumidor          | partición, client-id, tema |

    ### Obtener métricas

    | Nombre de la métrica                     | Descripción                                           | Atributo                 |
    | ---------------------------------------- | ----------------------------------------------------- | ------------------------ |
    | `kafka.consumer.fetch_rate`              | Tasa de solicitudes de obtención                      | identificador de cliente |
    | `kafka.consumer.fetch_total`             | Total de solicitudes de obtención                     | identificador de cliente |
    | `kafka.consumer.fetch_size_avg`          | Tamaño promedio de obtención                          | ID de cliente, tema      |
    | `kafka.consumer.fetch_size_max`          | Tamaño máximo de extracción                           | ID de cliente, tema      |
    | `kafka.consumer.fetch_latency_avg`       | Latencia promedio de obtención (ms)                   | identificador de cliente |
    | `kafka.consumer.fetch_latency_max`       | Latencia máxima de extracción (ms)                    | identificador de cliente |
    | `kafka.consumer.fetch_throttle_time_avg` | Tiempo promedio de estrangulamiento de obtención (ms) | identificador de cliente |
    | `kafka.consumer.fetch_throttle_time_max` | Tiempo máximo de estrangulamiento de obtención (ms)   | identificador de cliente |

    ### Métricas de coordinación del grupo de consumidores

    | Nombre de la métrica                         | Descripción                               | Atributo                 |
    | -------------------------------------------- | ----------------------------------------- | ------------------------ |
    | `kafka.consumer.assigned_partitions`         | Número de particiones asignadas           | identificador de cliente |
    | `kafka.consumer.commit_rate`                 | Tasa de confirmaciones de desplazamiento  | identificador de cliente |
    | `kafka.consumer.commit_total`                | Total de confirmaciones de offset         | identificador de cliente |
    | `kafka.consumer.commit_latency_avg`          | Latencia promedio de confirmación (ms)    | identificador de cliente |
    | `kafka.consumer.commit_latency_max`          | Latencia máxima de confirmación (ms)      | identificador de cliente |
    | `kafka.consumer.heartbeat_rate`              | Tasa de latidos enviados                  | identificador de cliente |
    | `kafka.consumer.heartbeat_total`             | Total de latidos enviados                 | identificador de cliente |
    | `kafka.consumer.heartbeat_response_time_max` | Tiempo máximo de respuesta de latido (ms) | identificador de cliente |
    | `kafka.consumer.last_heartbeat_seconds_ago`  | Segundos desde el último latido           | identificador de cliente |
    | `kafka.consumer.last_poll_seconds_ago`       | Segundos desde la última encuesta         | identificador de cliente |

    ### Métricas de reequilibrio

    | Nombre de la métrica                            | Descripción                                         | Atributo                 |
    | ----------------------------------------------- | --------------------------------------------------- | ------------------------ |
    | `kafka.consumer.rebalance_total`                | Reequilibrios totales                               | identificador de cliente |
    | `kafka.consumer.rebalance_rate_per_hour`        | Reequilibrios por hora                              | identificador de cliente |
    | `kafka.consumer.rebalance_latency_avg`          | Latencia promedio de reequilibrio (ms)              | identificador de cliente |
    | `kafka.consumer.rebalance_latency_max`          | Latencia máxima de reequilibrio (ms)                | identificador de cliente |
    | `kafka.consumer.rebalance_latency_total`        | Tiempo total de reequilibrio (ms)                   | identificador de cliente |
    | `kafka.consumer.failed_rebalance_total`         | Total de reequilibrios fallidos                     | identificador de cliente |
    | `kafka.consumer.failed_rebalance_rate_per_hour` | Rebalances fallidos por hora                        | identificador de cliente |
    | `kafka.consumer.last_rebalance_seconds_ago`     | Segundos desde el último reequilibrio               | identificador de cliente |
    | `kafka.consumer.partition_assigned_latency_avg` | Latencia promedio de asignación de particiones (ms) | identificador de cliente |
    | `kafka.consumer.partition_assigned_latency_max` | Latencia máxima de asignación de partición (ms)     | identificador de cliente |
    | `kafka.consumer.partition_revoked_latency_avg`  | Latencia promedio de revocación de partición (ms)   | identificador de cliente |
    | `kafka.consumer.partition_revoked_latency_max`  | Latencia máxima de revocación de partición (ms)     | identificador de cliente |
    | `kafka.consumer.partition_lost_latency_avg`     | Latencia promedio de pérdida de partición (ms)      | identificador de cliente |
    | `kafka.consumer.partition_lost_latency_max`     | Latencia máxima de pérdida de partición (ms)        | identificador de cliente |

    ### Métricas del grupo de sincronización

    | Nombre de la métrica           | Descripción                            | Atributo                 |
    | ------------------------------ | -------------------------------------- | ------------------------ |
    | `kafka.consumer.sync_rate`     | Tasa de sincronizaciones de grupo      | identificador de cliente |
    | `kafka.consumer.sync_total`    | Sincronizaciones totales del grupo     | identificador de cliente |
    | `kafka.consumer.sync_time_avg` | Tiempo promedio de sincronización (ms) | identificador de cliente |
    | `kafka.consumer.sync_time_max` | Tiempo máximo de sincronización (ms)   | identificador de cliente |
    | `kafka.consumer.join_rate`     | Tasa de uniones de grupo               | identificador de cliente |
    | `kafka.consumer.join_total`    | Uniones totales de grupo               | identificador de cliente |
    | `kafka.consumer.join_time_avg` | Tiempo promedio de unión (ms)          | identificador de cliente |
    | `kafka.consumer.join_time_max` | Tiempo máximo de unión (ms)            | identificador de cliente |

    ### Métricas de E/S

    | Nombre de la métrica                 | Descripción                           | Atributo                 |
    | ------------------------------------ | ------------------------------------- | ------------------------ |
    | `kafka.consumer.io_ratio`            | Fracción de tiempo dedicado a E/S     | identificador de cliente |
    | `kafka.consumer.io_time_ns_avg`      | Tiempo promedio de E/S (ns)           | identificador de cliente |
    | `kafka.consumer.io_wait_time_ns_avg` | Tiempo promedio de espera de E/S (ns) | identificador de cliente |
    | `kafka.consumer.io_wait_ratio`       | Fracción de tiempo de espera de E/S   | identificador de cliente |
    | `kafka.consumer.iotime_total`        | Tiempo total de E/S                   | identificador de cliente |
    | `kafka.consumer.io_waittime_total`   | Tiempo total de espera de E/S         | identificador de cliente |

    ### Métricas de sondeo

    | Nombre de la métrica                   | Descripción                                                                     | Atributo                 |
    | -------------------------------------- | ------------------------------------------------------------------------------- | ------------------------ |
    | `kafka.consumer.poll_idle_ratio_avg`   | Fracción promedio de tiempo que el consumidor está inactivo durante la encuesta | identificador de cliente |
    | `kafka.consumer.time_between_poll_avg` | Tiempo promedio entre encuestas (ms)                                            | identificador de cliente |
    | `kafka.consumer.time_between_poll_max` | Tiempo máximo entre encuestas (ms)                                              | identificador de cliente |

    ### Métricas de autenticación

    | Nombre de la métrica                                       | Descripción                                  | Atributo                 |
    | ---------------------------------------------------------- | -------------------------------------------- | ------------------------ |
    | `kafka.consumer.successful_authentication_rate`            | Tasa de autenticaciones exitosas             | identificador de cliente |
    | `kafka.consumer.successful_authentication_total`           | Total de autenticaciones exitosas            | identificador de cliente |
    | `kafka.consumer.successful_authentication_no_reauth_total` | Autenticaciones exitosas sin reautenticación | identificador de cliente |
    | `kafka.consumer.successful_reauthentication_rate`          | Tasa de reautenticaciones exitosas           | identificador de cliente |
    | `kafka.consumer.successful_reauthentication_total`         | Total de reautenticaciones exitosas          | identificador de cliente |
    | `kafka.consumer.failed_authentication_rate`                | Tasa de autenticaciones fallidas             | identificador de cliente |
    | `kafka.consumer.failed_authentication_total`               | Autenticaciones fallidas totales             | identificador de cliente |
    | `kafka.consumer.failed_reauthentication_rate`              | Tasa de reautenticaciones fallidas           | identificador de cliente |
    | `kafka.consumer.failed_reauthentication_total`             | Reautenticaciones totales fallidas           | identificador de cliente |
    | `kafka.consumer.reauthentication_latency_avg`              | Latencia promedio de reautenticación (ms)    | identificador de cliente |
    | `kafka.consumer.reauthentication_latency_max`              | Latencia máxima de reautenticación (ms)      | identificador de cliente |

    ### Métricas misceláneas

    | Nombre de la métrica          | Descripción               | Atributo                 |
    | ----------------------------- | ------------------------- | ------------------------ |
    | `kafka.consumer.select_rate`  | Tasa de llamadas selectas | identificador de cliente |
    | `kafka.consumer.select_total` | Llamadas selectas totales | identificador de cliente |
  </Collapser>
</CollapserGroup>

## Atributo métrico [#metric-attributes]

Las métricas se pueden filtrar y agrupar utilizando los siguientes atributos:

**Atributos comunes:**

* `kafka.cluster.name` - Nombre del clúster de Kafka (todas las métricas)
* `instrumentation.provider` - Siempre `opentelemetry` (todas las métricas)
* `topic` - Nombre del tema de Kafka
* `partition` - Número de partición
* `group` - Nombre del grupo de consumidores
* `broker.id` - Identificador del broker (métricas JMX)
* `client-id` - Identificador del cliente (métricas del cliente)
* `node-id` - Identificador del nodo del broker (métricas del cliente)
* `type` - Tipo de solicitud (por ejemplo, fetch, produce)
* `direction` - Dirección de datos (entrada, salida)
* `state` - Estado de la operación ISR (encoger, expandir)
* `name` - Nombre del recolector de GC o del grupo de memoria (métricas de JVM)

## Próximos pasos [#next-steps]

* [Query and visualize your data](/docs/opentelemetry/integrations/kafka/find-and-query-data) - Find metrics in New Relic UI, write NRQL queries, create dashboards, and set up alerts
* [Query metric data types](/docs/data-apis/understand-data/metric-data/query-metric-data-type/) - Learn advanced techniques for working with OpenTelemetry metrics