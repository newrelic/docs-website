---
title: Resolución de problemas New Relic OTLP
tags:
  - Integrations
  - Open source telemetry integrations
  - OpenTelemetry
  - OTLP
  - Troubleshoot
metaDescription: Troubleshoot common OTLP ingest errors
freshnessValidatedDate: '2024-05-06T00:00:00.000Z'
translationType: machine
---

New Relic apoyó [la ingesta nativa de OTLP](/docs/opentelemetry/best-practices/opentelemetry-otlp/) durante varios años. En el proceso de trabajar en los casos de soporte que surgen de vez en cuando, aprendimos sobre los problemas comunes que enfrentan los usuarios. Para algunos, el problema es fácil de identificar y solucionar. Otros son tortuosamente complicados, dado que Internet no es confiable y hay muchos componentes (software, redes, hardware, etc.) involucrados bajo el control de varias partes, como clientes, New Relic e infraestructura de redes públicas fuera del control de cualquiera de ellos. . Con tanta complejidad, configuración y puntos de falla, puede resultar difícil determinar cuál es el culpable y cuál es la mejor manera de abordarlo.

Trabajar en un caso de soporte puede llevar mucho tiempo y, en ocasiones, resultar frustrante para los clientes (¡y para New Relic!). Por lo tanto, elaboramos esta guía de resolución de problemas para ayudar a establecer un entendimiento compartido y brindar herramientas para autodiagnosticar y solucionar problemas cuando sea posible.

Primero, revise [los requisitos y recomendaciones de configuración de New Relic OTLP](/docs/opentelemetry/best-practices/opentelemetry-otlp/). Contiene consejos y contexto esenciales que cualquiera que desee emplear OTLP con New Relic debe conocer.

A continuación, consulte las secciones siguientes:

* [Resolución general de problemas](#general-troubleshooting): resolución de problemas para cuestiones generales de OTLP
* [Catálogo de problemas](#issue-catalog): problemas comunes de los clientes y medidas de mitigación

## Resolución general de problemas [#general-troubleshooting]

Cuando tenga un problema con el extremo OTLP New Relic , primero siga estos pasos básicos de resolución de problemas. Si terminas abriendo un de ticket soporte, estas son las primeras cosas que te preguntamos:

* **Habilite logs de diagnóstico.** Cerciorar de que su cliente OTLP tenga habilitado el logging de modo que pueda ver detalles sobre cualquier error que pueda estar ocurriendo. El mecanismo para habilitar el log varía según la implementación. Consulte los documentos relevantes.
* **Pruebe que el extremo OTLP de New Relic sea accesible.** Un simple comando de shell `curl http://otlp.nr-data.net` de la máquina en cuestión puede ayudar a determinar si hay algún problema de configuración de la red local (es decir, restricción del firewall) impide la conectividad con New Relic.
* **Busque [`NrIntegrationError`](/docs/data-apis/manage-data/nrintegrationerror/) evento.** La ingesta de New Relic OTLP realiza una validación mínima sincrónicamente antes de devolver un código de estado exitoso. Si no ve indicaciones de errores de exportación en su log de aplicación, pero no ve datos en New Relic, intente consultar `NrIntegrationError`. Puede haber problemas con tus datos que fueron detectados durante la validación asincrónica.
* **Determine si el problema está localizado.** A menudo, los errores se localizan en una aplicación o entorno específico. En estos casos, es útil evaluar las diferencias entre las áreas que son problemáticas y funcionan correctamente.
* **Busque signos de clave de API no válida.** El endoint OTLP de New Relic [requiere configurar un encabezado `api-key` ](/docs/opentelemetry/best-practices/opentelemetry-otlp/#api-key). La clave de API no válida o faltante es un problema común que se presenta con códigos de estado HTTP 403 o 401, o códigos de estado gRPC no autenticado o licencia denegada. Si ve estos, verifique que su clave de API sea válida y esté configurada correctamente.
* **Compruebe si la exportación se realizó correctamente luego de volver a intentarlo.** [Recomendamos que el reintento esté habilitado](/docs/opentelemetry/best-practices/opentelemetry-otlp/#retry) y esperamos que los intentos de exportación ocasionalmente fallen inicialmente con errores transitorios, pero tengan éxito luego de volver a intentarlo. Sin embargo, tenemos un [SLA](/docs/licenses/license-information/referenced-policies/service-level-availability-commitment/). Si sospecha que los errores transitorios son lo suficientemente frecuentes como para exceder nuestro SLA, abra un caso de soporte.
* **Compruebe si hay señales de que no se están reintentando los errores transitorios.** A pesar de nuestros mejores esfuerzos, puede haber casos extremos en los que el extremo OTLP de New Relic devuelva códigos de estado no recuperables para errores transitorios. Si cree que se encontró con esta situación, abra un caso de soporte.

## Catálogo de ediciones [#issue-catalog]

La siguiente tabla cataloga los problemas que vimos que los clientes encontraron con el extremo OTLP de New Relic . Muchos son fáciles de resolver con la configuración adecuada. La columna **Fingerprint** muestra un log típico cuando una aplicación encuentra una clase particular de problema. Consulte las columnas **Known resolution** y **Notes** para conocer los pasos de mitigación.

| Versión del protocolo OTLP | Tipo                                               | Idioma / Ecosistema | Fingerprint                                                                                                                                                                                                                                                                                                     | Resolución conocida                                                                                                          | Notas                                                                                                                                                                                                                                                                                                                                        |
| -------------------------- | -------------------------------------------------- | ------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| HTTP                       | 401 - Unauthorized                                 | Java                | `io.opentelemetry.exporter.internal.http.HttpExporter - Failed to export spans. Server responded with HTTP status code 401.`                                                                                                                                                                                    | [Incluir clave de API](/docs/opentelemetry/best-practices/opentelemetry-otlp/#api-key)                                       | Falta el encabezado `api-key`                                                                                                                                                                                                                                                                                                                |
| HTTP                       | 401 - Unauthorized                                 | Recolector          | `Exporting failed. The error is not retryable. Dropping data. {"kind": "exporter", "data_type": "traces", "name": "otlphttp", "error": "Permanent error: error exporting items, request to https://otlp.nr-data.net/v1/traces responded with HTTP Status Code 401, Message=, Details=[]", "dropped_items": 4}`  | [Incluir clave de API](/docs/opentelemetry/best-practices/opentelemetry-otlp/#api-key)                                       | Falta el encabezado `api-key`                                                                                                                                                                                                                                                                                                                |
| HTTP                       | 401 - Unauthorized                                 | Go                  | `failed to upload metrics: failed to send metrics to https://otlp.nr-data.net/v1/metrics: 401 Unauthorized`                                                                                                                                                                                                     | [Incluir clave de API](/docs/opentelemetry/best-practices/opentelemetry-otlp/#api-key)                                       | Falta el encabezado `api-key`                                                                                                                                                                                                                                                                                                                |
| HTTP                       | 403 - Forbidden                                    | Java                | `io.opentelemetry.exporter.internal.http.HttpExporter - Failed to export spans. Server responded with HTTP status code 403.`                                                                                                                                                                                    | [Verificar clave de API](/docs/opentelemetry/best-practices/opentelemetry-otlp/#api-key)                                     | Encabezado `api-key` no válido                                                                                                                                                                                                                                                                                                               |
| HTTP                       | 403 - Forbidden                                    | Java                | `Exporting failed. The error is not retryable. Dropping data. {"kind": "exporter", "data_type": "traces", "name": "otlphttp", "error": "Permanent error: error exporting items, request to https://otlp.nr-data.net/v1/traces responded with HTTP Status Code 403, Message=, Details=[]", "dropped_items": 14}` | [Verificar clave de API](/docs/opentelemetry/best-practices/opentelemetry-otlp/#api-key)                                     | Encabezado `api-key` no válido                                                                                                                                                                                                                                                                                                               |
| HTTP                       | 403 - Forbidden                                    | Go                  | `traces export: failed to send to https://otlp.nr-data.net/v1/traces: 403 Forbidden`                                                                                                                                                                                                                            | [Verificar clave de API](/docs/opentelemetry/best-practices/opentelemetry-otlp/#api-key)                                     | Encabezado `api-key` no válido                                                                                                                                                                                                                                                                                                               |
| HTTP                       | 403 - Forbidden                                    | .NET                | `Exporter failed send data to collector to {0} endpoint. Data will not be sent. Exception: {1}{https://otlp.nr-data.net:4317/v1/traces}{System.Net.Http.HttpRequestException: Response status code does not indicate success: 403 (Forbidden).`                                                                 | [Verificar clave de API](/docs/opentelemetry/best-practices/opentelemetry-otlp/#api-key)                                     | Encabezado `api-key` no válido                                                                                                                                                                                                                                                                                                               |
| HTTP                       | Se acabó el tiempo                                 | Java                | `io.opentelemetry.exporter.internal.http.HttpExporter - Failed to export spans. The request could not be executed. Full error message: timeout`                                                                                                                                                                 | [Ajustar el procesamiento por lotes/tiempo de espera](/docs/opentelemetry/best-practices/opentelemetry-otlp/#payload-limits) | Ocurre después de que se agota el tiempo de exportación. Verifique la configuración del tiempo de espera y el estado de la red del cliente.<br/>Si descartó la configuración y la red del lado del cliente, abra el caso de soporte.                                                                                                         |
| HTTP                       | Se acabó el tiempo                                 | Recolector          | `max elapsed time expired failed to make an HTTP request: Post \"https://otlp.nr-data.net/v1/traces\": context deadline exceeded (Client.Timeout exceeded while awaiting headers)`                                                                                                                              | [Ajustar el procesamiento por lotes/tiempo de espera](/docs/opentelemetry/best-practices/opentelemetry-otlp/#payload-limits) | Normalmente ocurre después de que fallan los reintentos y se agota el tiempo de espera de exportación. Puede estar relacionado con la red del cliente, la configuración de reintento/tiempo de espera del cliente o la red/servidores de New Relic.<br/>Si descartó la configuración y la red del lado del cliente, abra el caso de soporte. |
| HTTP                       | Se acabó el tiempo                                 | Go                  | `failed to upload metrics: context deadline exceeded: retry-able request failure`                                                                                                                                                                                                                               | [Ajustar el procesamiento por lotes/tiempo de espera](/docs/opentelemetry/best-practices/opentelemetry-otlp/#payload-limits) | Ocurre después de que se agota el tiempo de exportación. Verifique la configuración del tiempo de espera y el estado de la red del cliente.<br/>Si descartó la configuración y la red del lado del cliente, abra el caso de soporte.                                                                                                         |
| HTTP                       | Límite de tarifa                                   | Recolector          | `Exporting failed. Will retry the request after interval. {"kind": "exporter", "data_type": "metrics", "name": "otlphttp", "error": "Throttle (29s), error: error exporting items, request to https://otlp.nr-data.net:443/v1/metrics responded with HTTP Status Code 429", "interval": "29s"}`                 | [Sintonizar el procesamiento por lotes](/docs/opentelemetry/best-practices/opentelemetry-otlp/#payload-limits)               | Excede el límite de velocidad.<br/>Ajuste la configuración de procesamiento por lotes para reducir la tasa de solicitudes.                                                                                                                                                                                                                   |
| gRPC                       | Código 2 - Desconocido<br/>Se acabó el tiempo      | Java                | `io.opentelemetry.exporter.internal.grpc.GrpcExporter - Failed to export spans. Server responded with gRPC status code 2. Error message: timeout`                                                                                                                                                               | [Ajustar el procesamiento por lotes/tiempo de espera](/docs/opentelemetry/best-practices/opentelemetry-otlp/#payload-limits) | Ocurre después de que se agota el tiempo de exportación. Verifique la configuración del tiempo de espera y el estado de la red del cliente.<br/>Si descartó la configuración y la red del lado del cliente, abra el caso de soporte.                                                                                                         |
| gRPC                       | Código 2 - Desconocido<br/>HTTP 500                | Recolector          | `rpc error: code = Unknown desc = unexpected HTTP status code received from server: 500 (Internal Server Error); malformed header: missing HTTP content-type`                                                                                                                                                   |                                                                                                                              | El proveedor de redes New Relic produjo un código de estado no recuperable para un error transitorio.<br/>Si esto sucede repetidamente, abra el caso de soporte.                                                                                                                                                                             |
| gRPC                       | Código 2 - Desconocido<br/>HTTP 530                | Recolector          | `rpc error: code = Unknown desc = unexpected HTTP status code received from server: 530 (); transport: received unexpected content-type \"text/html; charset=UTF-8\"`                                                                                                                                           |                                                                                                                              | El proveedor de redes New Relic produjo un código de estado no recuperable para un error transitorio.<br/>Si esto sucede repetidamente, abra el caso de soporte.                                                                                                                                                                             |
| gRPC                       | Código 4 - Fecha límite excedida                   | Recolector          | `rpc error: code = DeadlineExceeded desc = context deadline exceeded`                                                                                                                                                                                                                                           | [Ajustar el procesamiento por lotes/tiempo de espera](/docs/opentelemetry/best-practices/opentelemetry-otlp/#payload-limits) | Normalmente ocurre después de que fallan los reintentos y se agota el tiempo de espera de exportación. Puede estar relacionado con la red del cliente, la configuración de reintento/tiempo de espera del cliente o la red/servidores de New Relic.<br/>Si descartó la configuración y la red del lado del cliente, abra el caso de soporte. |
| gRPC                       | Código 7 - No autenticado                          | Java                | `io.opentelemetry.exporter.internal.grpc.GrpcExporter - Failed to export spans. Server responded with gRPC status code 7.`                                                                                                                                                                                      | [Incluir clave de API](/docs/opentelemetry/best-practices/opentelemetry-otlp/#api-key)                                       | Falta el encabezado `api-key`                                                                                                                                                                                                                                                                                                                |
| gRPC                       | Código 7 - No autenticado                          | .NET                | `Exporter failed send data to collector to {0} endpoint. Data will not be sent. Exception: {1}{https://otlp.nr-data.net:4317/}{Grpc.Core.RpcException: Status(StatusCode="Unauthenticated", Detail="")`                                                                                                         | [Incluir clave de API](/docs/opentelemetry/best-practices/opentelemetry-otlp/#api-key)                                       | Falta el encabezado `api-key`                                                                                                                                                                                                                                                                                                                |
| gRPC                       | Código 8 - Recurso agotado                         | Recolector          | `rpc error: code = ResourceExhausted desc = Too many requests", "dropped_items": 1024`                                                                                                                                                                                                                          | [Sintonizar el procesamiento por lotes](/docs/opentelemetry/best-practices/opentelemetry-otlp/#payload-limits)               | Excede el límite de velocidad.<br/>Ajuste la configuración de procesamiento por lotes para reducir la tasa de solicitudes.                                                                                                                                                                                                                   |
| gRPC                       | Código 13 - Interno                                | Java                | `io.opentelemetry.exporter.internal.grpc.GrpcExporter - Failed to export spans. Server responded with gRPC status code 13.`                                                                                                                                                                                     |                                                                                                                              | No hay suficiente información para diagnosticar. Podría ser que el proveedor de redes de New Relic produjo un código de estado no recuperable para un error transitorio.<br/>Si esto sucede repetidamente, abra un caso de soporte.                                                                                                          |
| gRPC                       | Código 13 - Interno<br/>HTTP 400                   | Recolector          | `rpc error: code = Internal desc = unexpected HTTP status code received from server: 400 (Bad Request)`                                                                                                                                                                                                         |                                                                                                                              | El proveedor de redes New Relic produjo un código de estado no recuperable para un error transitorio.<br/>Si esto sucede repetidamente, abra un caso de soporte.                                                                                                                                                                             |
| gRPC                       | Código 14 - No disponible<br/>Reajuste de conexion | Recolector          | `rpc error: code = Unavailable desc = error reading from server: read tcp 100.127.0.171:47470->162.247.241.110:4317: read: connection reset by peer`                                                                                                                                                            | [Reintento de sintonización](/docs/opentelemetry/best-practices/opentelemetry-otlp/#retry)                                   | Debería resolver con un nuevo intento. Cerciorar de que el recolector tenga recursos suficientes para manejar la contrapresión de reintento.                                                                                                                                                                                                 |
| gRPC                       | Código 14 - No disponible<br/>HTTP 502             | Recolector          | `rpc error: code = Unavailable desc = unexpected HTTP status code received from server: 502 (Bad Gateway); transport: received unexpected content-type "text/html"`                                                                                                                                             | [Reintento de sintonización](/docs/opentelemetry/best-practices/opentelemetry-otlp/#retry)                                   | Debería resolver con un nuevo intento. Cerciorar de que el recolector tenga recursos suficientes para manejar la contrapresión de reintento.                                                                                                                                                                                                 |
| gRPC                       | Código 14 - No disponible<br/>HTTP 503             | Recolector          | `rpc error: code = Unavailable desc = unexpected HTTP status code received from server: 503 (Service Unavailable)`                                                                                                                                                                                              | [Reintento de sintonización](/docs/opentelemetry/best-practices/opentelemetry-otlp/#retry)                                   | Debería resolver con un nuevo intento. Cerciorar de que el recolector tenga recursos suficientes para manejar la contrapresión de reintento.                                                                                                                                                                                                 |
| gRPC                       | Código 16 - Licencia denegada                      | Java                | `io.opentelemetry.exporter.internal.grpc.GrpcExporter - Failed to export spans. Server responded with gRPC status code 16.`                                                                                                                                                                                     | [Verificar clave de API](/docs/opentelemetry/best-practices/opentelemetry-otlp/#api-key)                                     | Encabezado `api-key` no válido                                                                                                                                                                                                                                                                                                               |
| gRPC                       | Código 16 - Licencia denegada                      | .NET                | `Exporter failed send data to collector to {0} endpoint. Data will not be sent. Exception: {1}{https://otlp.nr-data.net:4317/}{Grpc.Core.RpcException: Status(StatusCode="PermissionDenied", Detail="")`                                                                                                        | [Verificar clave de API](/docs/opentelemetry/best-practices/opentelemetry-otlp/#api-key)                                     | Encabezado `api-key` no válido                                                                                                                                                                                                                                                                                                               |
