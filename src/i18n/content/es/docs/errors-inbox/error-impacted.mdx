---
title: 'Alcance del error: usuarios, sesiones y dispositivos afectados'
metaDescription: 'Triage more effectively by viewing how many users, sessions, or devices are impacted by an error group.'
freshnessValidatedDate: never
translationType: machine
---

El agente New Relic captura automáticamente datos sobre el alcance de los errores que afectan a su aplicación. Al organizar por grupo de errores, puedes ver el impacto a través de tres métricas clave:

* **Usuario impactado**: El número de usuarios únicos afectados por errores
* **Sesiones afectadas**: la cantidad de sesiones únicas del navegador afectadas (respaldo para la entidad del navegador)
* **Dispositivos afectados**: la cantidad de dispositivos celulares únicos afectados (respaldo para la entidad móvil)

Cuando los datos afectados por el usuario no están disponibles, New Relic muestra automáticamente la métrica de respaldo adecuada según el tipo de entidad. Esto lo ayuda a priorizar dónde centrar sus esfuerzos de depuración mostrándole los errores con el mayor alcance de impacto.

<img title="An image showing how to navigate impact metrics in errors inbox" alt="This is an image of the main errors inbox showing users, sessions, and devices impacted" src="/images/errors-inbox_screenshot-full_users-impacted.webp" />

<figcaption>
  Vaya a **[one.newrelic.com](https://one.newrelic.com) &gt; APM &amp; Services &gt; Errors (Errors Inbox) &gt; Triage**: Puede encontrar el impacto métrico en la segunda columna de la tabla **Error groups** , ubicada debajo de los seriales de tiempo **Error count** y **Error rate** .
</figcaption>

## Impacto de retroceso métrico [#fallback-metrics]

New Relic prioriza mostrar los datos de impacto más relevantes para su tipo de aplicación específica. Cuando los datos de **Users impacted** no están disponibles, el sistema recurre automáticamente a la métrica específica de la entidad:

* **Entidad de Browser **: muestra las **Sessions impacted** : la cantidad de sesiones de navegador únicas afectadas por errores
* **Entidad móvil**: muestra los **Devices impacted**: la cantidad de dispositivos celulares únicos afectados por errores

Estas métricas de respaldo se recopilan automáticamente sin requerir configuración adicional, a diferencia del usuario impactado que puede necesitar un atributo personalizado. Esto garantiza que siempre tenga visibilidad del alcance de los errores que afectan a su aplicación, independientemente de su configuración.

## atributo personalizado para rastrear al usuario impactado [#custom-attributes]

En algunos casos, un evento de error puede no tener atributos que identifiquen al usuario final afectado por ese evento de error. Puede agregar manualmente un atributo personalizado para que nuestro agente capture metadatos que identifiquen al usuario en el momento de la ingesta.

Para los casos en los que necesite agregar un atributo personalizado, recomendamos revisar [las convenciones de atributos deOpenTelemetry](/docs/more-integrations/open-source-telemetry-integrations/opentelemetry/opentelemetry-introduction) porque existen múltiples convenciones comunes para nombrar el atributo usuario final.

Por ejemplo, [los estándaresOpenTelemetry ](https://opentelemetry.io/docs/reference/specification/trace/semantic_conventions/span-general/#general-identity-attributes)emplean los siguientes atributos en orden de prioridad:

* `userId`
* `user`

Puedes revisar cómo New Relic procesa los atributos personalizados leyendo nuestro documento sobre cómo [recopilar eventos personalizados](/docs/data-apis/custom-data/custom-events/collect-custom-attributes/#enabling-custom).

## Consulta para impacto métrico [#query]

El impacto métrico para los grupos de errores se registra como [tipos de datos métricos](/docs/data-apis/understand-data/metric-data/metric-data-type/) con nombres métricos específicos:

<CollapserGroup>
  <Collapser className="freq-link" id="users" title="usuario afectado">
    Puedes consultar el número de usuarios impactados usando `newrelic.error.group.userImpact` como nombre de métrica en NRQL consulta:

    ```sql
    SELECT uniqueCount(newrelic.error.group.userImpact) 
    FROM Metric 
    WHERE metricName='newrelic.error.group.userImpact'
    ```

    Esta consulta métrica NRQL captura el número aproximado de usuarios únicos en el periodo de tiempo seleccionado. Los atributos adicionales proporcionados por la métrica `userImpact` que se pueden emplear en una cláusula `FACET` son `error.group.guid` y `entity.guid`.
  </Collapser>

  <Collapser className="freq-link" id="sessions" title="Sesiones impactadas">
    Puedes consultar el número de sesiones impactadas usando `newrelic.error.group.sessionImpact` como nombre de métrica en NRQL consulta:

    ```sql
    SELECT uniqueCount(newrelic.error.group.sessionImpact) 
    FROM Metric 
    WHERE metricName='newrelic.error.group.sessionImpact'
    ```
  </Collapser>

  <Collapser className="freq-link" id="devices" title="Dispositivos afectados">
    Puedes consultar el número de dispositivos impactados usando `newrelic.error.group.deviceUuidImpact` como nombre de métrica en NRQL consulta:

    ```sql
    SELECT uniqueCount(newrelic.error.group.deviceUuidImpact) 
    FROM Metric 
    WHERE metricName='newrelic.error.group.deviceUuidImpact'
    ```
  </Collapser>
</CollapserGroup>

## alerta sobre impacto métrico [#alert]

Al crear una [condición de alerta NRQL](/docs/alerts-applied-intelligence/new-relic-alerts/alert-conditions/create-alert-conditions/), los desarrolladores pueden activar <InlinePopover type="alerts" />cuando el alcance de los errores excede un umbral. Puedes crear alertas para cualquiera de las métricas de impacto:

* **Usuario impactado**: alerta cuando el impacto del usuario excede su umbral
* **Sesiones afectadas**: alerta cuando el impacto en la sesión del navegador supera su umbral
* **Dispositivos afectados**: alerta cuando el impacto del dispositivo móvil supera su umbral

La creación de esta alerta requiere determinar la [consulta NRQL](/docs/query-your-data/nrql-new-relic-query-language/get-started/introduction-nrql-new-relics-query-language/) que mide la cantidad de usuarios afectados de la manera que mejor capture su caso de uso.

Como ejemplo, la siguiente consulta NRQL mide la cantidad de usuarios únicos que se han visto afectados por un [grupo de errores](/docs/errors-inbox/errors-inbox/#groups) procedente de una entidad específica:

<CollapserGroup>
  <Collapser className="freq-link" id="user" title="alertas sobre usuarios impactados">
    ```sql
    SELECT uniqueCount(newrelic.error.group.userImpact) 
    FROM Metric 
    WHERE metricName='newrelic.error.group.userImpact' 
    AND entity.guid='RXxCUk9XU9182nNEFQUExJQ0FLsU9OfDgzNzgwNw' FACET error.group.guid TIMESERIES
    ```

    Lea más sobre el uso de la función [`uniqueCount()`](/docs/alerts-applied-intelligence/new-relic-alerts/alert-conditions/create-nrql-alert-conditions/) , [cómo encontrar el GUID de entidad](/docs/new-relic-solutions/new-relic-one/core-concepts/what-entity-new-relic/#find) para sus entidades.

    De manera similar, la siguiente consulta NRQL mide el número total de usuarios afectados por errores de todas las entidades de la cuenta en la última hora:

    ```sql
    SELECT count(newrelic.error.group.userImpact) 
    FROM Metric 
    WHERE metricName='newrelic.error.group.userImpact' SINCE 1 hour ago TIMESERIES
    ```
  </Collapser>

  <Collapser className="freq-link" id="session" title="alertas sobre sesiones impactadas">
    Para la aplicación del navegador, puede crear alertas basadas en las sesiones afectadas:

    ```sql
    SELECT uniqueCount(newrelic.error.group.sessionImpact) 
    FROM Metric 
    WHERE metricName='newrelic.error.group.sessionImpact' 
    AND entity.guid='YOUR_BROWSER_ENTITY_GUID' FACET error.group.guid TIMESERIES
    ```
  </Collapser>

  <Collapser className="freq-link" id="device" title="alertas sobre dispositivos afectados">
    Para la aplicación móvil, puede crear alertas basadas en los dispositivos afectados:

    ```sql
    SELECT uniqueCount(newrelic.error.group.deviceUuidImpact) 
    FROM Metric 
    WHERE metricName='newrelic.error.group.deviceUuidImpact' 
    AND entity.guid='YOUR_MOBILE_ENTITY_GUID' FACET error.group.guid TIMESERIES
    ```
  </Collapser>
</CollapserGroup>

Una vez que haya decidido una consulta NRQL, puede usarla para crear una [condición de alerta NRQL](/docs/alerts-applied-intelligence/new-relic-alerts/alert-conditions/create-nrql-alert-conditions/#create).

Para mejorar la relación señal-ruido de sus alertas activadas, consulte [los consejos para la creación de alertas](/docs/alerts-applied-intelligence/new-relic-alerts/alert-conditions/create-nrql-alert-conditions/#condition-tips), [cómo se evalúan los umbrales de alerta](/docs/alerts-applied-intelligence/new-relic-alerts/alert-conditions/create-nrql-alert-conditions/#advanced-signal) y [ejemplos de condición de alerta](/docs/alerts-applied-intelligence/new-relic-alerts/alert-conditions/create-nrql-alert-conditions/#examples).

## Establecer usuario impactado con el método setUser [#set-users]

Puede emplear un método de agente para identificar un usuario final para la métrica de **Users impacted**. Las sesiones y los dispositivos afectados se recopilan automáticamente sin configuración adicional. Vea los detalles de implementación de cada agente a continuación:

<table>
  <thead>
    <tr>
      <th>
        Agente
      </th>

      <th>
        Método para identificar a un usuario final
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        Browser
      </td>

      <td>
        [`newrelic.setUserId(value: string|null)`](/docs/browser/new-relic-browser/browser-apis/setuserid/)
      </td>
    </tr>

    <tr>
      <td>
        Go
      </td>

      <td>
        [`txn.SetUserID("example user ID")`](/docs/apm/agents/go-agent/api-guides/guide-using-go-agent-api/#user-tracking)
      </td>
    </tr>

    <tr>
      <td>
        Java
      </td>

      <td>
        [`NewRelic.setUserId(String userId);`](/docs/apm/agents/java-agent/attributes/java-agent-attributes/#user-attributes)
      </td>
    </tr>

    <tr>
      <td>
        Móvil
      </td>

      <td>
        [`setUserId`](/docs/data-apis/custom-data/custom-events/report-mobile-monitoring-custom-events-attributes/#track-user)
      </td>
    </tr>

    <tr>
      <td>
        .NET
      </td>

      <td>
        [`SetUserId`](/docs/apm/agents/net-agent/net-agent-api/itransaction/#setuserid)
      </td>
    </tr>

    <tr>
      <td>
        Node.js
      </td>

      <td>
        [`setUserID(id)`](https://newrelic.github.io/node-newrelic/API.html#setUserID)
      </td>
    </tr>

    <tr>
      <td>
        PHP
      </td>

      <td>
        [`newrelic_set_user_id(string $user_id)`](https://docs.newrelic.com/docs/apm/agents/php-agent/php-agent-api/newrelic_set_user_id/)
      </td>
    </tr>

    <tr>
      <td>
        Python
      </td>

      <td>
        [`newrelic.agent.set_user_id(user_id)`](https://docs.newrelic.com/docs/apm/agents/python-agent/python-agent-api/setuserid-python-agent-api)
      </td>
    </tr>

    <tr>
      <td>
        Ruby
      </td>

      <td>
        [`NewRelic::Agent.set_user_id`](/docs/apm/agents/ruby-agent/api-guides/sending-handled-errors-new-relic/#user-tracking)
      </td>
    </tr>
  </tbody>
</table>