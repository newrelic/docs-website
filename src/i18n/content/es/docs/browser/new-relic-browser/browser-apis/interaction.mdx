---
title: interaction (SPA API)
type: apiDoc
shortDescription: Devuelve un nuevo objeto API que está vinculado a la interacción SPA actual.
tags:
  - Browser
  - Browser monitoring
  - Browser agent and SPA API
metaDescription: SPA API call for browser monitoring to return a new API object that is bound to the current interaction.
freshnessValidatedDate: never
translationType: machine
---

## Sintaxis

```js
newrelic.interaction([JSON object $options])
```

Devuelve un nuevo objeto de controlador que está vinculado a la interacción SPA actual, o una nueva interacción si no existe ninguna.

## Requisitos

* Browser Pro+SPA agente (v963 o superior)

* El parámetro `$options` requiere v1.285.0+

* Si está utilizando npm para instalar el agente del navegador, debe habilitar la característica `spa` al crear una instancia de la clase `BrowserAgent` . En la matriz `features` , agregue lo siguiente:

  ```js
  import { Spa } from '@newrelic/browser-agent/features/spa';

  const options = {
    info: { ... },
    loader_config: { ... },
    init: { ... },
    features: [
      Spa
    ]
  }
  ```

  Para obtener más información, consulte la [documentación de instalación del navegador npm](https://www.npmjs.com/package/@newrelic/browser-agent#new-relic-browser-agent).

## Descripción

La llamada [de monitoreo SPA](/docs/browser/single-page-app-monitoring/get-started/introduction-single-page-app-monitoring) `interaction()` devuelve un nuevo identificador vinculado a la interacción actual.

* <DNT>**New interaction:**</DNT> Si se llama a esta función y no hay ninguna interacción abierta o en curso, se crea una nueva interacción [personalizada](/docs/browser/single-page-app-monitoring/use-spa-data/spa-data-collection#api-custom-events).
  * Una interacción personalizada seguirá la heurística predeterminada y se cerrará automáticamente en la próxima navegación suave completa, *a menos que* se especifique `waitForEnd`.

* <DNT>**New object:**</DNT> Si se llama a esta función mientras hay una interacción en curso, se crea un nuevo identificador que hace referencia a la interacción actual.

  * Es posible que varios identificadores apunten a la misma interacción. Cada llamada `.interaction` crea un nuevo identificador.
  * El identificador apuntará a la interacción abierta, ya sea que comenzó desde un evento de usuario como un `click` o desde una llamada `.interaction` activada por API anterior.
  * Esta función no puede reemplazar su propio efecto ni el de un evento de usuario. Es decir, no puede sobreescribir ninguna interacción abierta existente con una nueva interacción impulsada por API.

## Parámetros

<table>
  <thead>
    <tr>
      <th width="25%">
        Parámetro
      </th>

      <th>
        Descripción
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `$options`

        *Objeto JSON*
      </td>

      <td>
        Opcional: especifica opciones que afectan el comportamiento de la interacción.

        * `waitForEnd` - El valor predeterminado es `false`. Para mantener abierta de manera forzada la interacción hasta que se llame al método `.end` en su controlador, configúrelo en `true`. Una vez marcada esta interacción, no se podrá deshacer.
      </td>
    </tr>
  </tbody>
</table>

## Valores de retorno

Este método devuelve un objeto JS nativo que apunta a un posible [evento`BrowserInteraction` ](/docs/insights/explore-data/attributes/browser-default-attributes-insights#browserinteraction-attributes). Cada vez que se llama a este método para el mismo `BrowserInteraction` mientras aún no finalizó, se crea un nuevo objeto, pero aún hace referencia a la misma interacción.

## Ejemplos

Los métodos de API de SPA deben emplear en `newrelic.interaction()`. Puede asignar el valor o identificador devuelto a otra variable para su uso posterior. Por ejemplo:

```js
let myInteraction = newrelic.interaction();
...
myInteraction.save();
```

Si bien el identificador nombrado se puede almacenar y usar desde fuera de una interacción, tenga en cuenta que los métodos SPA no tendrán efecto una vez finalizada la interacción.

La duración de la interacción también se puede personalizar mediante el siguiente método:

```js
// Say an interaction is already open from a user click.
const userInteraction = newrelic.interaction({ waitForEnd: true }); // grabs the current interaction in-progress & keep it open
// URL changes & DOM is modified. Because of those condition being met, interaction will be saved but is kept open.
fetch('myurl.com/endpoint').then(() => userInteraction.end()) // associate this request to the interaction before completing this BrowserInteraction

const myCustomIxn = newrelic.interaction({ waitForEnd: true }) // create a new api-triggered interaction
// This interaction will be kept open indefinitely until `.end` is called, and no new interaction will start, custom or otherwise. AjaxRequest will continue to buffer under this interaction until it is closed.
```