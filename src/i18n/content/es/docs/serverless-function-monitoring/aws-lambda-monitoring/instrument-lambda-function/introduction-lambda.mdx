---
title: Introducción al monitoreo de AWS Lambda
metaDescription: This provides an overview of New Relic's AWS Lambda monitoring and details how to link your accounts.
freshnessValidatedDate: never
translationType: machine
---

La instrumentación de New Relic para AWS Lambda ofrece una visibilidad profunda del funcionamiento interno de sus funciones. Al agregar el agente New Relic a su función, cada invocación es monitoreada por New Relic. Esto le permite rastrear la duración de las invocaciones de funciones, monitorear errores y registrar detalles sobre el evento de origen y las respuestas de su función.

\* AWS Lambda proporciona un servicio de cálculo altamente escalable y basado en eventos, que le permite crear y ejecutar aplicaciones y servicios backend sin la necesidad de aprovisionar o gestionar servidores. A medida que su arquitectura sin servidor en Lambda crece en sofisticación y asume roles críticos para el negocio, lograr una visibilidad integral de su rendimiento, salud operativa e interacción dentro de su ecosistema de aplicaciones más amplio se vuelve esencial para mantener la confiabilidad y la eficiencia. Su aplicación moderna depende en gran medida de numerosas funciones Lambda AWS que interactúan con varios otros microservicios, bases de datos y API de terceros. En entornos tan complejos, es posible que se enfrente a varios desafíos de observabilidad: \* \*\*Dificultad para identificar las causas raíz:\*\* Cuando ocurren problemas de rendimiento como ralentizaciones intermitentes o fallan transacciones críticas que involucran la función Lambda, identificar la función exacta que falla o la fuente del problema puede ser un rompecabezas complejo. \* \*\*Vistas de monitoreo en aislamiento:\*\* Es posible que se encuentre navegando entre una UI de monitoreo de servidor dedicada y sus vistas tradicionales de monitoreo del rendimiento de aplicaciones (APM), lo que dificulta obtener una imagen única y unificada del rendimiento. \*\*Correlación de datos ineficaz:\*\* Puede resultar complicado correlacionar eficazmente datos de rendimiento y eventos cuando la información reside en sistemas de monitoreo APM y sin servidor separados. \* \*\*Seguimiento incompleto de extremo a extremo:\*\* Es posible que enfrente desafíos para rastrear sin problemas una sola solicitud de extremo a extremo a medida que atraviesa la función Lambda y otros servicios dentro de su entorno distribuido. \*\*Monitoreo limitado para Lambda:\*\* A menudo existe una incapacidad para aplicar todo el poder de diagnóstico y el flujo de trabajo familiar de las herramientas APM directamente a su función Lambda. \*\*Esfuerzo manual para obtener información valiosa:\*\* Con frecuencia se requiere un esfuerzo manual significativo para juntar información dispar de varias fuentes para comprender el contexto completo de un problema que involucra Lambda. Para abordar estos desafíos de observabilidad y brindar una experiencia de monitoreo verdaderamente unificada, New Relic está mejorando la forma en que las funciones Lambda AWS se integran en nuestra plataforma. Esta iniciativa lleva sus funciones sin servidor directamente a la experiencia New Relic APM, tratándolas como ciudadanos de primera clase junto con sus otros servicios instrumentados. Nuestro objetivo es proporcionar telemetría rica y basada en aplicaciones para su función Lambda, haciendo que sea más fácil que nunca comprender su rendimiento en contexto completo. \*/

## Característica clave [#key-features]

* **Obtenga una vista unificada:** monitoree su función Lambda dentro de la misma interfaz APM que emplea para sus otros servicios. Vea la telemetría sin servidor, incluido el rendimiento métrico, las trazas, los logs (cuando estén configurados) y los errores, todo correlacionado en un solo lugar, lo que elimina la necesidad de cambiar entre diferentes UI.

* **Aproveche todo el poder de APM:** aplique el conjunto completo de funciones New Relic APM directamente a su función Lambda. Esto incluye rastreo distribuido avanzado, análisis de errores detallado con Bandeja de entrada de errores, mapas de servicios que incorporan su función Lambda, dashboards y más. Para obtener más información, consulte la [documentación de APM](https://docs.newrelic.com/docs/apm/new-relic-apm/getting-started/introduction-apm/).

* **Consiga un seguimiento completo de solicitudes de extremo a extremo:** rastree sin problemas requests a medida que fluyen desde sus servicios frontend u otros microservicios, a través de su función Lambda AWS y hacia cualquier componente conectado. Esto proporciona una imagen clara e ininterrumpida de la latencia y dependencia de las solicitudes en toda la arquitectura. Para obtener más información, consulte la [documentación de rastreo distribuido](https://docs.newrelic.com/docs/distributed-tracing/concepts/introduction-distributed-tracing/).

* **Simplifique el análisis de causa raíz:** al consolidar los datos sin servidor con el resto de la telemetría de su aplicación en APM, puede identificar y diagnosticar rápidamente los problemas, ya sea que se originen dentro de una función Lambda o en un servicio ascendente/descendente.

* **Comprenda mejor el impacto sin servidor:** vea claramente cómo su función Lambda contribuye a la salud general y al rendimiento de su aplicación y transacciones comerciales clave, brindando información más profunda y valiosa sobre su rol dentro de sus servicios digitales.

<img title="New Relic Lambda Entities in APM" alt="New Relic Lambda Entities in APM" src="/images/lambda_overview.webp" />

## ¿Cómo puedes configurar la monitorización AWS Lambda ? [#config]

Para monitorear su AWS Lambda con New Relic, puede configurar la instrumentación en diferentes entornos, tiempos de ejecución y métodos de implementación. Los siguientes pasos le guiarán a través del proceso de configuración:

<Steps>
  <Step>
    ### Compatibilidad y requisitos [#req]

    Cerciorar de que su AWS Lambda cumpla con nuestros [requisitos y compatibilidad](/docs/serverless-function-monitoring/aws-lambda-monitoring/instrument-lambda-function/compatibility-requirement-lambda-monitoring).
  </Step>

  <Step>
    ### (Opcional) Vincula tu cuenta de AWS a New Relic [#link]

    Al vincular cuentas, le otorga licencia a New Relic para crear un inventario de su cuenta AWS y recopilar automáticamente métricas de CloudWatch para su función Lambda. Una vez que vinculó las cuentas, los recursos en su cuenta AWS aparecerán como entidad en el [explorador de entidades](/docs/new-relic-solutions/new-relic-one/core-concepts/new-relic-explorer-view-performance-across-apps-services-hosts/#find). La función Lambda entidad se encontrará en la vista sin servidor de funciones.

    Puede vincular su cuenta de AWS y New Relic mediante uno de los siguientes métodos de integración.

    <Tabs>
      <TabsBar>
        <TabsBarItem id="2">Sondeo</TabsBarItem> <TabsBarItem id="1">de API de AWS Metric Streams (recomendado)</TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="1">
          Para que New Relic monitoree su función Lambda, necesita configurar una integración entre New Relic y AWS. Recomendamos emplear [Metric Streams](/install/aws-cloudwatch) para ayudar a reducir la latencia y evitar la limitación de nuestras requests de sondeo.
        </TabsPageItem>

        <TabsPageItem id="2">
          Si no está empleando una integración de Streams métrica, puede optar por configurar una integración [API Polling](/docs/infrastructure/amazon-integrations/connect/set-up-aws-api-polling) en su lugar. De forma predeterminada, una integración de sondeo de API con el servicio Lambda habilitado sondeará cada 5 minutos las métricas de CloudWatch.

          Puede emplear [newrelic-lambda-cli](https://github.com/newrelic/newrelic-lambda-cli) para configurar una integración API Polling, pero no una integración de métrica Streams.

          ```sh
          newrelic-lambda integrations install --nr-account-id YOUR_NR_ACCOUNT_ID \
          --nr-api-key YOUR_NEW_RELIC_USER_KEY
          ```

          Un paso en el [comando de instalación de integración](https://github.com/newrelic/newrelic-lambda-cli?tab=readme-ov-file#aws-lambda-integration) creará un secreto `NEW_RELIC_LICENSE_KEY` en [AWS Secrets Manager](https://aws.amazon.com/secrets-manager/) para mejorar la seguridad. Esto se puede configurar con un indicador `--disable-license-key-secret` , junto con otras opciones e indicadores.
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Step>

  <Step>
    ### instrumento su función AWS Lambda [#instrument]

    Para instrumentar su función Lambda, necesita un agente y una extensión. Estos componentes están agrupados en la [capa Lambda](https://github.com/newrelic/newrelic-lambda-layers) de New Relic. Si usar capas Lambda no es una opción para usted, puede incorporar manualmente el agente y la extensión a su función. Según los requisitos de su función Lambda, seleccione uno de los siguientes métodos de instrumentación:

    <Tabs>
      <TabsBar>
        <TabsBarItem id="layered-instrumentation">Instrumentación en capas</TabsBarItem> <TabsBarItem id="sdk-based-instrumentation">Instrumentación basada en SDK</TabsBarItem> <TabsBarItem id="containerized-instrumentation">Instrumentación en contenedores</TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="layered-instrumentation">
          Emplee este método si su función Lambda está empaquetada como un archivo Zip y puede agregar capas. Las capas son un mecanismo de distribución para bibliotecas, tiempos de ejecución personalizados y otras dependencias. Para obtener más información, consulte la documentación [de instrumentación en capas](/docs/serverless-function-monitoring/aws-lambda-monitoring/instrument-lambda-function/instrument-your-own/) .
        </TabsPageItem>

        <TabsPageItem id="sdk-based-instrumentation">
          Emplee este método si su función Lambda no puede emplear capas, garantizando una implementación rápida sin la necesidad de modificar capas. Para obtener más información, consulte la documentación [de instrumentación basada en SDK](/docs/serverless-function-monitoring/aws-lambda-monitoring/instrument-lambda-function/sdk-based-instrumentation/) .
        </TabsPageItem>

        <TabsPageItem id="containerized-instrumentation">
          Emplee este método si su función Lambda se ejecuta dentro de un contenedor. contenedor proporciona un entorno de ejecución consistente y aislado para su aplicación. New Relic proporciona una imagen de Docker prediseñada que incluye la capa Lambda de New Relic, la extensión Lambda de New Relic y el agente de New Relic. Para obtener más información, consulte la documentación [de instrumentación en contenedores](/docs/serverless-function-monitoring/aws-lambda-monitoring/instrument-lambda-function/containerized-images/).
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Step>

  <Step>
    ### Configurar variables de entorno [#env-variables]

    <Callout variant="tip">
      * Cuando instrumenta la capa Lambda de New Relic con la CLI de New Relic, sus variables de entorno obligatorias se configuran automáticamente. Sin embargo, es posible que desee cambiar algunas de las configuraciones predeterminadas y configurar su función Lambda con las variables de entorno que coincidan con sus necesidades de monitoreo.
      * Si está empleando la extensión Lambda de New Relic, deberá configurar las variables de entorno manualmente.
    </Callout>

    [Las variables de entorno](/docs/serverless-function-monitoring/aws-lambda-monitoring/instrument-lambda-function/env-variables-lambda) se emplean para configurar el agente New Relic y la extensión Lambda. Es importante configurar estas variables correctamente para garantizar que sus funciones Lambda se monitoreen correctamente.
  </Step>

  <Step>
    ### Encuentra tus datos en New Relic [#data]

    Luego de instrumentar su función Lambda AWS, puede buscar y usar los datos en la interfaz New Relic APM. Los datos están organizados en varias áreas clave, cada una de las cuales proporciona información valiosa sobre el rendimiento y el estado de su función Lambda.
  </Step>
</Steps>

## Pruebe nuestras funciones de ejemplo [#example]

Luego de instrumentar la capa Lambda de New Relic, le recomendamos encarecidamente que pruebe nuestras funciones de ejemplo. Estos ejemplos de trabajo deben emplear como punto de partida para instrumentar su propia función serverless. El uso de estos ejemplos puede ayudarlo a familiarizar con la capa New Relic Lambda, probar el enlace de la cuenta y pueden usar como referencia para su propia instrumentación. Cada ejemplo demuestra cómo agregar licencias, técnicas específicas del tiempo de ejecución para empaquetar su controlador, gestionar la retención log de funciones en CloudWatch y más.

Si bien hay muchas formas de gestionar y desplegar la función Lambda, AWS CloudFormation es el mecanismo que empleamos para nuestros ejemplos.

Nuestros ejemplos se publican, junto con la extensión New Relic Lambda, en este [repositorio de GitHub](https://github.com/newrelic/newrelic-lambda-extension). Hay uno para cada tiempo de ejecución de Lambda que admite New Relic:

* [Node.js](https://github.com/newrelic/newrelic-lambda-extension/tree/main/examples/sam/node)
* [Python](https://github.com/newrelic/newrelic-lambda-extension/tree/main/examples/sam/python)
* [Go](https://github.com/newrelic/newrelic-lambda-extension/tree/main/examples/sam/go)
* [Java](https://github.com/newrelic/newrelic-lambda-extension/tree/main/examples/sam/java)
* [Ruby](https://github.com/newrelic/newrelic-lambda-extension/tree/main/examples/sam/ruby)
* [.NET](https://github.com/newrelic/newrelic-lambda-extension/tree/main/examples/sam/dotnet)

También puedes aprender a emplear el instrumento rastreo distribuido en una aplicación sin servidor no trivial en nuestro [ejemplo de rastreo distribuido](https://github.com/newrelic/newrelic-lambda-extension/tree/main/examples/sam/distributedtracing). Ilustra la propagación manual de trazas para SQS y SNS, dos de los servicios más populares que pueden invocar la función Lambda, con funciones de Node, Python, Ruby y Java.

<Callout variant="tip">
  Al realizar pruebas manualmente, telemetry data pueden retrasar. Recomendamos esperar siete segundos antes de volver a invocar la función, lo que permitirá que se entregue cualquier telemetría almacenada en el búfer.
</Callout>

## Consideración de costos [#costs]

La implementación de monitoreo sin servidor para AWS Lambda puede generar cargos adicionales de AWS. La función Lambda `newrelic-log-ingestion`, que informa datos a New Relic, se considera un servicio de terceros y cualquier cargo de AWS asociado es responsabilidad del usuario. Al usar [`newrelic-lambda-extension`](https://github.com/newrelic/newrelic-lambda-extension) incluido en [las capas Lambda New Relic ](https://github.com/newrelic/newrelic-lambda-layers), puede evitar enviar logs y telemetry data a través de CloudWatch, aunque es posible configurar la función `newrelic-log-ingestion` como respaldo de CloudWatch para necesidades de alta disponibilidad.

Habilitar la supervisión del servidor para AWS Lambda puede resultar en cargos de Amazon Sitio web Services. Nuestra función Lambda `newrelic-log-ingestion`, que nos informa sus datos Lambda, se considera un [servicio de terceros](/docs/licenses/license-information/general-usage-licenses/acceptable-use-policy): los cargos de AWS resultantes de su uso son su responsabilidad.

Si emplea nuestra [extensión newrelic-lambda](https://github.com/newrelic/newrelic-lambda-extension) incluida en nuestras [capas New Relic Lambda](https://github.com/newrelic/newrelic-lambda-layers), puede evitar enviar los logs y telemetría a través de CloudWatch y la función [newrelic-log-ingestion](https://github.com/newrelic/aws-log-ingestion). También es posible configurar la función [newrelic-log-ingestion](https://github.com/newrelic/aws-log-ingestion) como un método [de respaldo de CloudWatch](/docs/serverless-function-monitoring/aws-lambda-monitoring/instrument-lambda-function/cloud-watch-fallback/) para funciones que requieren alta disponibilidad de datos de observabilidad.

## Precios [#pricing]

Su uso de New Relic APM + Serverless Convergence se factura como una entidad APM de acuerdo con su pedido. Para obtener más detalles sobre los precios, comunicar con nuestro equipo de ventas o consulte su pedido.

## Artículos relacionados [#related-docs]

<DocTiles>
  <DocTile title="Instrumentación en capas" path="/docs/serverless-function-monitoring/aws-lambda-monitoring/instrument-lambda-function/instrument-your-own">
    Instrumente su función Lambda con el enfoque en capas de New Relic.
  </DocTile>

  <DocTile title="Instrumentación del SDK" path="/docs/serverless-function-monitoring/aws-lambda-monitoring/instrument-lambda-function/sdk-based-instrumentation">
    Instrumento tu función Lambda usando SDK.
  </DocTile>

  <DocTile title="Instrumentación en contenedores" path="/docs/serverless-function-monitoring/aws-lambda-monitoring/instrument-lambda-function/containerized-images">
    Instrumente su función Lambda con el enfoque contenedorizado de New Relic.
  </DocTile>
</DocTiles>