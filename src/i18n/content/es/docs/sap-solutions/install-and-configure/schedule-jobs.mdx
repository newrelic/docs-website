---
title: Programar trabajos
metaDescription: 'Efficiently schedule critical jobs for New Relic SAP monitoring with our guide. Ensure optimal data flow with tailored frequencies for RFC checks, data collection, and error handling to maintain continuous system insights.'
freshnessValidatedDate: never
translationType: machine
---

Hay tres programas que deben programar. Prográmelos empleando la transacción `SM36`:

<table>
  <thead>
    <tr>
      <th style={{ width: "400px" }}>
        **Programa ABAP**
      </th>

      <th>
        **Funcionalidad**
      </th>

      <th>
        **Frecuencia recomendada**
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        [`/NEWR/REGISTRY_RFC_CHECK`](#rfc-check)
      </td>

      <td>
        Verificar las conexiones RFC a los Sistemas Monitoreados y NR extremos de API
      </td>

      <td>
        Cada 3 minutos
      </td>
    </tr>

    <tr>
      <td>
        [`/NEWR/ABAP_COLLECTION_MANAGERN`](#abap-collection-manager)
      </td>

      <td>
        Recopilación de datos: se deben programar múltiples trabajos en función de los sistemas conectados y los proveedores de datos.
      </td>

      <td>
        Cada 5 minutos
      </td>
    </tr>

    <tr>
      <td>
        [`/NEWR/RESEND_FAILED_API_TRANS`](#resubmit-program)
      </td>

      <td>
        Volver a enviar transmisiones fallidas
      </td>

      <td>
        Cada 15 minutos
      </td>
    </tr>
  </tbody>
</table>

## Programa de verificación de RFC [#rfc-check]

Programe `/NEWR/REGISTRY_RFC_CHECK` cada 1 a 3 minutos, cerciorar de que se ejecute con más frecuencia que el trabajo de recopilación de datos. Emplee el nombre del trabajo `NR_RFC_CHECK`.

## Programar el gestor de recopilación de datos ABAP [#abap-collection-manager]

Programe tres trabajos de recopilación de datos con variantes centradas en los siguientes grupos de proveedores de datos. Para obtener instrucciones sobre cómo programar trabajos del administrador de colecciones antes de `SP03`, consulte [Variantes y trabajos anteriores a SP03](/docs/sap-solutions/additional-resources/variants-and-jobs-before-sp03). Separe los proveedores de datos en tres grupos para la programación.

* **TRACE**: En este grupo se encuentran los proveedores de datos relacionados con el rendimiento base de datos (STAD):

  * Incluye proveedores relacionados con la base de datos de rendimiento, como `NR.SAP.TRANSACTION` (proveedor de datos de traza), `NR.SAP.TRANSACTION.COMPLETE` (recopilación completa de base de datos de rendimiento con proceso RFC en segundo plano paralelo), `NR.SAP.SYSTEM.PROCESS`, `NR_SAP_PROGRAM`, `NR_SAP_WORKLOAD_COMPLETE` y `NR.SAP.WORKLOAD.COMPLETE`.
  * `NR.SAP.SYSTEM.PROCESS` y `NR_SAP_PROGRAM` se suspenden luego de `SP02`.

* **IDOC**: En los sistemas de producción, la recopilación de IDOC puede tardar un tiempo significativo:
  * Incluye proveedores relacionados con IDOC como `NR_SAP_IDOC` (proveedor principal de datos de eventos de estado de IDOC), `NR_SAP_IDOC_COMPLETE` (recuperación completa de IDOC con recopilación de RFC de BG) y `NR_SAP_IDOC_Configuration` (descarga de datos maestros de IDOC para mejorar el rendimiento del proveedor de datos de IDOC).

* **SYSTEM**: Resto de proveedores de datos.

### Crear variantes para /NEWR/ONE\_COLLECTION

A partir de SP03, `/NEWR/ABAP_COLLECTION_MANAGERN` y `RSBTONEJOB2` se combinan en `/NEWR/ONE_COLLECTION`. Este programa incluye todos los parámetros de `/NEWR/ABAP_COLLECTION_MANAGERN` y los nombres de trabajos de `RSBTONEJOB2` y funciona de manera similar. Para programar trabajos, cree variantes para `/NEWR/ONE_COLLECTION` empleando los siguientes valores:

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        **Nombre de la variante**
      </th>

      <th>
        **traza**
      </th>

      <th>
        **IDOC**
      </th>

      <th>
        **SISTEMA**
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        **Nombre del trabajo**
      </td>

      <td>
        `NR_COLLECTION_TRACE`
      </td>

      <td>
        `NR_COLLECTION_IDOC`
      </td>

      <td>
        `NR_COLLECTION_SYSTEM`
      </td>
    </tr>

    <tr>
      <td>
        **ID de cuenta de New Relic**
      </td>

      <td>
        Cuenta SAP empleada para recibir datos
      </td>

      <td>
        Cuenta SAP empleada para recibir datos
      </td>

      <td>
        Cuenta SAP empleada para recibir datos
      </td>
    </tr>

    <tr>
      <td>
        **Registros por transacción**
      </td>

      <td>
        El valor predeterminado es 10000
      </td>

      <td>
        El valor predeterminado es 10000
      </td>

      <td>
        El valor predeterminado es 10000
      </td>
    </tr>

    <tr>
      <td>
        **Nombre del proveedor de datos**
      </td>

      <td>
        Seleccionar valores individuales:

        * `NR.SAP.TRANSACTION`
        * `NR.SAP.TRANSACTION.COMPLETE`
        * `NR.SAP.SYSTEM.PROCESS`
        * `NR_SAP_PROGRAM`
        * `NR_SAP_WORKLOAD_COMPLETE`
        * `NR.SAP.WORKLOAD.COMPLETE`
      </td>

      <td>
        Seleccionar valores individuales:

        * `NR_SAP_IDOC`
        * `NR_SAP_IDOC_COMPLETE`
        * `NR_SAP_IDOC_Configuration`
      </td>

      <td>
        Excluir valores individuales:

        * `NR.SAP.TRANSACTION`
        * `NR.SAP.TRANSACTION.COMPLETE`
        * `NR.SAP.SYSTEM.PROCESS`
        * `NR_SAP_PROGRAM`
        * `NR_SAP_WORKLOAD_COMPLETE`
        * `NR.SAP.WORKLOAD.COMPLETE`
        * `NR_SAP_IDOC`
        * `NR_SAP_IDOC_COMPLETE`
        * `NR_SAP_IDOC_Configuration`
      </td>
    </tr>

    <tr>
      <td>
        **Modo de ejecución**
      </td>

      <td>
        Tratamiento secuencial
      </td>

      <td>
        Tratamiento secuencial
      </td>

      <td>
        Procesamiento paralelo
      </td>
    </tr>

    <tr>
      <td>
        **Mínimo WP requerido**
      </td>

      <td>
        Si el sistema DIA WP &gt;= 30, configúrelo en 6; de lo contrario, configúrelo en 3.
      </td>

      <td>
        N/A
      </td>

      <td>
        Si el sistema DIA WP &gt;= 30, configúrelo en 6; de lo contrario, configúrelo en 3.
      </td>
    </tr>
  </tbody>
</table>

<img title="SAP ABAP Collection Manager" alt="A screenshot displaying the SAP ABAP Collection Manager" src="/images/abap-collection-manager.webp" width="" />

### Programar trabajos de recolección

1. Iniciar transacción `SM36`.
2. Introduzca el **Job Name** para cada trabajo y configure la **Job Class** en **C**.

<CollapserGroup>
  <Collapser id="job-names" title="Nombres de trabajos">
    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nombre del trabajo**
          </th>

          <th>
            `NR_COLLECTION_TRACE`
          </th>

          <th>
            `NR_COLLECTION_IDOC`
          </th>

          <th>
            `NR_COLLECTION_SYSTEM`
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            **Programa**
          </td>

          <td>
            `/NEWR/ONE_COLLECTION`
          </td>

          <td>
            `/NEWR/ONE_COLLECTION`
          </td>

          <td>
            `/NEWR/ONE_COLLECTION`
          </td>
        </tr>

        <tr>
          <td>
            **Variante**
          </td>

          <td>
            traza
          </td>

          <td>
            IDOC
          </td>

          <td>
            SISTEMA
          </td>
        </tr>

        <tr>
          <td>
            **Frecuencia de ejecución**
          </td>

          <td>
            Cada 5 minutos
          </td>

          <td>
            Cada 5 minutos
          </td>

          <td>
            Cada 5 minutos
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

3. Haga clic en **Step**, ingrese el **Program Name** `/NEWR/ONE_COLLECTION` y seleccione la **Variant**.
4. Haga clic en **Start Condition**, configure la **Start Date** y **Time** de inicio y marque la casilla **Periodic Job**.
5. Vaya a **Period Values**, haga clic en **Other Period** e ingrese **5** para los minutos.

## Programar reenvío del programa [#resubmit-program]

1. Cree una variante denominada **DEFAULT** para el programa `/NEWR/RESEND_FAILED_API_TRANS` para volver a enviar las transmisiones fallidas para la cuenta de New Relic en caso de un error de transmisión.

2. Especifique los siguientes valores:

   * [**ID de cuenta de New Relic**](/docs/accounts/accounts-billing/account-setup/account-id)
   * **Códigos de respuesta HTTP**: Excluye `000` y `413`, y el rango `200` a `299`.

   <img title="Resend failed API transactions" alt="A screenshot displaying the resend failed API transactions" src="/images/resend-failed-api-transaction.webp" width="700" />

3. Programe este trabajo para que se ejecute cada 15 minutos para volver a enviar transmisiones fallidas, como aquellas con el código de respuesta HTTP `500`, y purgar periódicamente las entradas del log de transmisión.