---
title: Instalación sobre un clúster híbrido con nodos Windows y Linux.
tags:
  - Kubernetes
  - Windows
  - Linux
  - Installation
metaDescription: Learn how to install New Relic to a hybrid Windows and Linux Kubernetes cluster.
freshnessValidatedDate: '2024-04-05T00:00:00.000Z'
translationType: machine
---

Este documento aclara la instalación de la integración de Kubernetes para un clúster mixto de Windows y Linux.

## Requisitos previos [#prerequisites]

Asegúrese de haber completado lo siguiente antes de continuar:

* Un clúster con nodos de Windows y Linux, incluida la capacidad de extraer imágenes de contenedor a los nodos de Windows.

* Configure el repositorio Helm y cree un namespace:

  ```shell
  helm repo add newrelic https://helm-charts.newrelic.com
  helm repo update
  kubectl create namespace newrelic
  ```

## Instalar el paquete de gráficos actual [#install-chart-bundle]

El gráfico `newrelic/nri-bundle` es el habitual con las últimas actualizaciones para todo lo relacionado con los nodos de Linux. Puede configurar el gráfico `newrelic-logging` para instalarlo en Windows. Esta característica es confiable y está respaldada en el cuadro de registro.

Puede utilizar otros gráficos, pero debe configurar un `NodeSelector` para evitar la programación en Windows. Si una instalación falla en un clúster mixto que utiliza los valores predeterminados de la instalación guiada, agregue los valores `nodeSelector` .

Cree el archivo de valores con su editor de texto favorito, llamémoslo `values.yaml`. Puede descargar un `values.yaml` archivo inicial desde la New Relic UI. Agregue la integración de Kubernetes y elija **Helm** como método de instrumentación.

```yaml
global:
  licenseKey: mykey
  cluster: mycluster
  lowDataMode: true
 
newrelic-infrastructure:
  enabled: true
  nodeSelector:
    kubernetes.io/os: linux
 
kube-state-metrics:
  enabled: true
  image:
    tag: v2.10.0
  nodeSelector:
    kubernetes.io/os: linux
 
nri-kube-events:
  enabled: true
  nodeSelector:
    kubernetes.io/os: linux
 
newrelic-logging:
  enabled: true
  enableWindows: true
 
nri-metadata-injection:
  enabled: true
  nodeSelector:
    kubernetes.io/os: linux
 
newrelic-prometheus-agent:
  enabled: true
  verboseLog: true
  config:
    kubernetes:
      integrations_filter:
        enabled: false
  nodeSelector:
    kubernetes.io/os: linux
```

## Instalar el paquete [#install-bundle]

Ejecute este comando para instalar el paquete:

```shell
helm upgrade --install newrelic-bundle newrelic/nri-bundle --namespace newrelic -f values-newrelic.yaml

```

Cuando regrese Helm, todos los pods deberían iniciarse, incluido un pod de registro en cada nodo de Windows. Aún no hay ningún otro pod New Relic en los nodos de Windows.

## Instalación de la vista previa de newrelic-infrastructure para nodos de Windows [#newrelic-infra]

Cree el archivo de valores para el gráfico `newrelic-infrastructure` v2. Por ejemplo, `windows-values.yaml`. El siguiente ejemplo es para un clúster con un grupo de nodos o un grupo de nodos de Windows 2022. Ajuste la sección `windowsOsList` con los valores correctos siguiendo [estas instrucciones](/docs/kubernetes-pixie/kubernetes-integration/installation/kubernetes-integration-install-configure/#windows-install). Esto se aplica si estás ejecutando 2019 o 2022.

```yaml
global:
  licenseKey: mykey
  cluster: mycluster
 
enableLinux: false
enableWindows: true
windowsOsList:
  - version: 2022
    imageTag: 2-windows-ltsc2022-alpha
    buildNumber: 10.0.20348
windowsNodeSelector:
  kubernetes.io/os: windows
```

Instale la versión v2.7.2 del gráfico `newrelic-infrastructure` . Ejecute este comando:

```shell
helm upgrade --install newrelic-windows newrelic/newrelic-infrastructure --namespace newrelic --version 2.7.2 -f windows-values.yaml
```

Cuando regrese Helm, debería ver el pod `newrelic-windows-newrelic-infrastructure` en cada nodo de Windows.

## Resultados previstos [#expected-results]

Una vez que todo esté configurado, la New Relic UI debería mostrar sus nodos de Windows en el clúster de Kubernetes. Verás la infraestructura métrica, el módulo de ejecución y toda la información relacionada.