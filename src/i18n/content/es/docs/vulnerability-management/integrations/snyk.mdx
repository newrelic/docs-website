---
title: Enviar datos de Snyk a New Relic
metaDescription: Send your security data from Snyk directly to New Relic.
freshnessValidatedDate: never
translationType: machine
---

Esta guía describe cómo integrar New Relic Gestión de vulnerabilidades con <DNT>Snyk</DNT> Webhooks. Los webhooks en <DNT>Snyk</DNT> son una característica beta que solo está disponible para <DNT>Snyk's Business</DNT> o clientes empresariales. Como característica beta, el <DNT>Webhook API</DNT> y la estructura pueden cambiar sin previo aviso, así que actúe con discreción al emplear Webhooks para la automatización de sus procesos de seguridad.

Si bien haremos todo lo posible para mantenernos sincronizados con los cambios en <DNT>Snyk Webhooks</DNT>, si notas que no estamos sincronizados, infórmanos.

Luego de completar estos pasos, verás las nuevas vulnerabilidades detectadas por <DNT>Snyk</DNT> en tu cuenta de New Relic en tiempo real y podrás crear un dashboard de análisis de los problemas recién detectados.

Para obtener más información, consulte la [documentación oficial <DNT>Snyk</DNT> ](https://snyk.docs.apiary.io/#reference/webhooks).

## Requisitos previos [#prereqs]

* Un token API <DNT>Snyk</DNT>
* New Relic<InlinePopover type="licenseKey"/>
* Debes ser un administrador de organización <DNT>Snyk</DNT> para configurar Webhooks a través de API

## Configuración del webhook [#webhook-config]

Para configurar su webhook, siga los siguientes pasos:

<Steps>
  <Step>
    ### Obtenga su token API de Snyk [#snky-API-token]

    En la de UI Snyk, en el menú de usuario, haga clic <DNT>**Account settings**</DNT> en y copie su <DNT>Snyk</DNT> API token clave. Lea más en la [documentación oficial de Snyk](https://docs.snyk.io/snyk-admin/snyk-broker/snyk-broker-code-agent/setting-up-the-code-agent-broker-client-deployment/step-1-obtaining-the-required-tokens-for-the-setup-procedure/obtaining-your-snyk-api-token).
  </Step>

  <Step>
    ### New Relic <DNT>**License - Insert**</DNT> [#nr-license-key]

    Seleccione un <DNT>**License - Insert**</DNT> <InlinePopover type="licenseKey"/>en su cuenta New Relic o cree una nueva.

    <Callout variant="important">
      Además de sus claves <DNT>Snyk</DNT> y New Relic, debe generar un secreto de firma aleatorio. Snyk lo requiere, pero New Relic no lo emplea al recibir datos.
    </Callout>
  </Step>

  <Step>
    ### Compilar ID de organizaciones de Snyk [#sny-org-ids]

    Obtenga una lista de los <DNT>Snyk</DNT> ID de organización a los que tiene acceso ejecutando el siguiente comando:

    ```shell
    curl -H "content-type: application/json" \
    -H "authorization: token YOUR_SNYK_API_TOKEN" \
    "https://api.snyk.io/api/v1/orgs" | jq -r '.orgs[] | "\(.id)\t\(.name)"'
    ```

    <Callout variant="important">
      Para ejecutar este comando, necesita instalar [jq](https://stedolan.github.io/jq/), un procesador JSON de línea de comando.
    </Callout>
  </Step>

  <Step>
    ### Cree un webhook en cada organización de Snyk [#create-webhook]

    Debe configurar un webhook por separado para cada organización <DNT>Snyk</DNT>.

    Ejecute el siguiente comando para crear un webhook que se publicará en el procesador de ingesta de seguridad en New Relic cada vez que se pruebe un proyecto. Esto se envía a través del tipo de evento [project_snapshot](https://snyk.docs.apiary.io/#introduction/consuming-webhooks/event-types) .

    ```shell
    curl -X POST -H "content-type: application/json" \
    -H "authorization: token <SNYK_API_TOKEN>" \
    --data '{"url": 
        "https://security-ingest-processor.service.newrelic.com/v1/security/webhooks/snyk?Api-Key=YOUR_NEW_RELIC_LICENSE_KEY",
        "secret": "YOUR_SIGNING_SECRET"}' \
    "https://api.snyk.io/api/v1/org/<SNYK_ORG_ID>/webhooks"
    ```
  </Step>

  <Step>
    ### Probar una conexión de webhook [#confirm-webhook]

    El siguiente comando devuelve una matriz de resultados con un ID de webhook y una URL para cada webhook configurado en la organización:

    ```shell
    curl -H "content-type: application/json" \
    -H "authorization: token YOUR_SNYK_API_TOKEN" \
    "https://api.snyk.io/api/v1/org/YOUR_SNYK_ORG_ID/webhooks"
    ```

    Para probar un webhook, copie el ID del webhook que desea probar y ejecute el siguiente comando:

    ```shell
    curl -X POST --data "" -H "content-type: application/json" \
    -H "authorization: token YOUR_SNYK_API_TOKEN" \
    "https://api.snyk.io/api/v1/org/YOUR_SNYK_ORG_ID/webhooks/YOUR_WEBHOOK_ID/ping"
    ```

    El comando devolverá `OK` si ha configurado el webhook correctamente.
  </Step>
</Steps>

## Probar un webhook manualmente [#webhook-test]

Es posible que tengas que activar un análisis manual de un proyecto dentro de <DNT>Snyk</DNT> para que los datos fluyan hacia New Relic. Puede hacerlo a través de la <DNT>Snyk</DNT> CLI o API, o desde la <DNT>Snyk</DNT> UI, haciendo clic en <DNT>**Retest now**</DNT> en un objetivo de escaneo dentro de un proyecto.

Consulte la documentación oficial <DNT>Snyk</DNT> sobre [cómo ejecutar pruebas manuales](https://docs.snyk.io/getting-started/running-tests#run-tests-manually).

<img
  title="Test a webhook manually"
  alt="Test a webhook manually"
  src="/images/vulnerability-management_screenshot-crop_test-webhook.webp"
/>

<figcaption>
  Haga clic en <DNT>**Retest now**</DNT> en un objetivo de escaneo dentro de un proyecto.
</figcaption>

## Verifique que sus datos de Snyk se envíen a New Relic [#verify-snyk-sending]

Verifique iniciar sesión en New Relic para verificar que los <DNT>Snyk</DNT> hallazgos de su prueba manual se entregaron correctamente ingresando `logtype:security` para filtrar por evento de seguridad.

1. Vaya a <DNT>**[one.newrelic.com](https://one.newrelic.com) &amp;gt; All capabilities &amp;gt; Logs**</DNT>.
2. En la barra de búsqueda, ingrese `logtype:security` y haga clic en <DNT>**Query logs**</DNT>.

<img
  title="Logs screen"
  alt="Logs screen"
  src="/images/vulnerability-management_screenshot-crop_verify-snyk-data.webp"
/>

<figcaption>
  <DNT>
    **[one.newrelic.com](https://one.newrelic.com) &amp;gt; All capabilities &amp;gt; Logs**
  </DNT>
</figcaption>

El Snyk Webhook transporta solo los retornos <DNT>**New Issues**</DNT> y <DNT>**Removed Issues**</DNT> que ocurren con cada prueba. New Relic analizará solo el <DNT>**New Issues**</DNT>. Si la prueba manual no revela ningún problema nuevo, no verá ningún log de seguridad nuevo en New Relic. En este caso, verá un mensaje de inicio de sesión en New Relic para el transporte exitoso del webhook del siguiente modo:

```sql
SnykWebhook scan reported 879 byte payload with 0 events (0 unique issue ids) from '' errors=no
```

## Ver datos de Snyk en New Relic [#view-data-NR]

Una vez que configuró uno o más eventos de webhook, podrá ver los resultados del envío de <DNT>Snyk</DNT> webhook a nuestro extremo de ingesta de seguridad en New Relic.

Consulte las 3 formas que puede emplear para identificar <DNT>Snyk</DNT> datos en New Relic:

### Visualización de datos en Gestión de vulnerabilidades [#view-data]

Puede encontrar esta página en <DNT>**[one.newrelic.com](https://one.newrelic.com) &amp;gt; All capabilities &amp;gt; Vulnerability Management**</DNT>.

Esta vista le ofrece una visión general de todas las vulnerabilidades de su software, incluidos los datos que se consumieron desde la integración <DNT>Snyk</DNT>. Emplee las distintas pestañas para identificar y clasificar vulnerabilidades.

<img
  title="Vulnerability management screen"
  alt="Vulnerability management screen"
  src="/images/accounts_screenshot-full_vm-landing.webp"
/>

<figcaption>
  <DNT>**[one.newrelic.com](https://one.newrelic.com) &amp;gt; All capabilities &amp;gt; Vulnerability Management**</DNT>.
</figcaption>

### Consultando evento de vulnerabilidades [#query-vuln-events]

Cuando se procesan <DNT>Snyk</DNT> eventos, se almacenan en la tabla <DNT>**Vulnerability**</DNT>. Para consultar esta tabla y ver los datos sin procesar, haga lo siguiente:

1. Vaya a <DNT>**[one.newrelic.com](https://one.newrelic.com) &amp;gt; All capabilities &amp;gt; Query your data**</DNT>.

2. Ingrese la siguiente consulta:

   ```sql
   FROM Vulnerability SELECT * where source = 'Snyk' since 7 days ago
   ```

   <img
     title="Query vulnerability events"
     alt="Query vulnerability events"
     src="/images/vulnerability-management_screenshot-full_query-vuln-events.webp"
   />

   <figcaption>
     <DNT>
       **[one.newrelic.com](https://one.newrelic.com) &amp;gt; All capabilities &amp;gt; Query your data**
     </DNT>
   </figcaption>

### Dashboard Snyk [#snyk-dashboard]

Puede instalar el dashboard <DNT>Snyk</DNT> prediseñado desde el [mercado de observabilidad instantáneaNew Relic ](https://newrelic.com/instant-observability/snyk).

Este dashboard ofrece otra vista de los datos de vulnerabilidades y puede usar el widget de gráfico para crear sus propias vistas dashboard a partir de sus datos de integración de Snyk.

<img
  title="Snyk dashboard"
  alt="Snyk dashboard"
  src="/images/vm_screenshot-full_snyk-dashboard.webp"
/>

<figcaption>
  Instale el [dashboardSnyk de observabilidad instantánea](https://newrelic.com/instant-observability/snyk).
</figcaption>
