---
title: Enviar datos de Snyk a New Relic
metaDescription: Send your security data from Snyk directly to New Relic.
freshnessValidatedDate: never
translationType: machine
---

import vulnerabilitymanagementTestWebhook from 'images/vulnerability-management_screenshot-crop_test-webhook.webp'

import vulnerabilitymanagementVerifySnykData from 'images/vulnerability-management_screenshot-crop_verify-snyk-data.webp'

import accountsVmLanding from 'images/accounts_screenshot-full_vm-landing.webp'

import vulnerabilitymanagementQueryVulnEvents from 'images/vulnerability-management_screenshot-full_query-vuln-events.webp'

import vmSnykDashboard from 'images/vm_screenshot-full_snyk-dashboard.webp'

Esta guía describe cómo integrar New Relic Gestión de vulnerabilidades con Snyk Webhooks. Los webhooks en Snyk son una característica beta que solo está disponible para clientes Business o Enterprise de Snyk. Como característica beta, la API y la estructura de Webhook pueden cambiar sin previo aviso, por lo tanto, tenga discreción al utilizar Webhooks para la automatización de sus procesos de seguridad.

Si bien haremos todo lo posible para mantenernos sincronizados con los cambios en Snyk Webhooks, si nota que no estamos sincronizados, háganoslo saber.

Después de completar estos pasos, verá las nuevas vulnerabilidades detectadas por Snyk en su cuenta New Relic en tiempo real y podrá crear un panel de análisis de los problemas recién detectados.

Para obtener más información, consulte la [documentación oficial de Snyk](https://snyk.docs.apiary.io/#reference/webhooks).

## Requisitos previos [#prereqs]

* Un token API de Snyk

* New Relic

  <InlinePopover type="licenseKey"/>

* Debes ser administrador de una organización de Snyk para configurar Webhooks a través de API

## Configuración del webhook [#webhook-config]

Para configurar su webhook, siga los siguientes pasos:

<Steps>
  <Step>
    ### Obtenga su token API de Snyk [#snky-API-token]

    En la UI usuario de Snyk, en el menú de usuario, haga clic en <DoNotTranslate>**Account settings**</DoNotTranslate> y copie su clave de token API de Snyk. Lea más en la [documentación oficial de Snyk](https://docs.snyk.io/snyk-admin/snyk-broker/snyk-broker-code-agent/setting-up-the-code-agent-broker-client-deployment/step-1-obtaining-the-required-tokens-for-the-setup-procedure/obtaining-your-snyk-api-token).
  </Step>

  <Step>
    ### Clave de licencia New Relic <DoNotTranslate>**License - Insert**</DoNotTranslate> [#nr-license-key]

    Seleccione un <DoNotTranslate>**License - Insert**</DoNotTranslate> <InlinePopover type="licenseKey"/>en su cuenta New Relic o cree una nueva.

    <Callout variant="important">
      Además de sus claves Snyk y New Relic, debe generar un secreto de firma aleatorio. Snyk lo requiere, pero New Relic no lo utiliza al recibir datos.
    </Callout>
  </Step>

  <Step>
    ### Compilar ID de organizaciones de Snyk [#sny-org-ids]

    Obtenga una lista de los ID de organizaciones de Snyk a los que tiene acceso ejecutando el siguiente comando:

    ```shell
    curl -H "content-type: application/json" \
    -H "authorization: token YOUR_SNYK_API_TOKEN" \
    "https://api.snyk.io/api/v1/orgs" | jq -r '.orgs[] | "\(.id)\t\(.name)"'
    ```

    <Callout variant="important">
      Para ejecutar este comando, necesita instalar [jq](https://stedolan.github.io/jq/), un procesador JSON de línea de comando.
    </Callout>
  </Step>

  <Step>
    ### Cree un webhook en cada organización de Snyk [#create-webhook]

    Debe configurar un webhook por separado para cada organización de Snyk.

    Ejecute el siguiente comando para crear un webhook que se publicará en el procesador de ingesta de seguridad en New Relic cada vez que se pruebe un proyecto. Esto se envía a través del tipo de evento [project_snapshot](https://snyk.docs.apiary.io/#introduction/consuming-webhooks/event-types) .

    ```shell
    curl -X POST -H "content-type: application/json" \
    -H "authorization: token <SNYK_API_TOKEN>" \
    --data '{"url": 
        "https://security-ingest-processor.service.newrelic.com/v1/security/webhooks/snyk?Api-Key=YOUR_NEW_RELIC_LICENSE_KEY",
        "secret": "YOUR_SIGNING_SECRET"}' \
    "https://api.snyk.io/api/v1/org/<SNYK_ORG_ID>/webhooks"
    ```
  </Step>

  <Step>
    ### Probar una conexión de webhook [#confirm-webhook]

    El siguiente comando devuelve una matriz de resultados con un ID de webhook y una URL para cada webhook configurado en la organización:

    ```shell
    curl -H "content-type: application/json" \
    -H "authorization: token YOUR_SNYK_API_TOKEN" \
    "https://api.snyk.io/api/v1/org/YOUR_SNYK_ORG_ID/webhooks"
    ```

    Para probar un webhook, copie el ID del webhook que desea probar y ejecute el siguiente comando:

    ```shell
    curl -X POST --data "" -H "content-type: application/json" \
    -H "authorization: token YOUR_SNYK_API_TOKEN" \
    "https://api.snyk.io/api/v1/org/YOUR_SNYK_ORG_ID/webhooks/YOUR_WEBHOOK_ID/ping"
    ```

    El comando devolverá `OK` si ha configurado el webhook correctamente.
  </Step>
</Steps>

## Probar un webhook manualmente [#webhook-test]

Es posible que deba activar un escaneo manual de un proyecto dentro de Snyk para que los datos fluyan hacia New Relic. Puede hacerlo a través de la CLI o API de Snyk, o desde la UI de Snyk, haciendo clic en <DoNotTranslate>**Retest now**</DoNotTranslate> en un objetivo de escaneo dentro de un proyecto.

Consulte la documentación oficial de Snyk sobre [cómo ejecutar pruebas manuales](https://docs.snyk.io/getting-started/running-tests#run-tests-manually).

<img
  title="Test a webhook manually"
  alt="Test a webhook manually"
  src={vulnerabilitymanagementTestWebhook}
/>

<figcaption>
  Haga clic en <DoNotTranslate>**Retest now**</DoNotTranslate> en un objetivo de escaneo dentro de un proyecto.
</figcaption>

## Verifique que sus datos de Snyk se envíen a New Relic [#verify-snyk-sending]

Verifique iniciar sesión en New Relic para verificar que los hallazgos de Snyk de su prueba manual se entregaron correctamente ingresando `logtype:security` para filtrar por evento de seguridad.

1. Vaya a

   <DoNotTranslate>**[one.newrelic.com](https://one.newrelic.com) > All capabilities > Logs**</DoNotTranslate>

   .

2. En la barra de búsqueda, ingrese `logtype:security` y haga clic en

   <DoNotTranslate>**Query logs**</DoNotTranslate>

   .

<img
  title="Logs screen"
  alt="Logs screen"
  src={vulnerabilitymanagementVerifySnykData}
/>

<figcaption>
  <DoNotTranslate>
    **[one.newrelic.com](https://one.newrelic.com) > All capabilities > Logs**
  </DoNotTranslate>
</figcaption>

El Snyk Webhook transporta solo los retornos <DoNotTranslate>**New Issues**</DoNotTranslate> y <DoNotTranslate>**Removed Issues**</DoNotTranslate> que ocurren con cada prueba. New Relic analizará solo el <DoNotTranslate>**New Issues**</DoNotTranslate>. Si la prueba manual no revela ningún problema nuevo, no verá ningún registro de seguridad nuevo en New Relic. En este caso, verá un mensaje de inicio de sesión en New Relic para el transporte exitoso del webhook del siguiente modo:

```sql
SnykWebhook scan reported 879 byte payload with 0 events (0 unique issue ids) from '' errors=no
```

## Ver datos de Snyk en New Relic [#view-data-NR]

Una vez que haya configurado uno o más eventos de webhook, podrá ver los resultados del webhook de Snyk que se envía a nuestro extremo de ingesta de seguridad en New Relic.

Consulte las 3 formas que puede utilizar para identificar los datos de Snyk en New Relic:

### Visualización de datos en Gestión de vulnerabilidades [#view-data]

Puede encontrar esta página en <DoNotTranslate>**[one.newrelic.com](https://one.newrelic.com) > All capabilities > Vulnerability Management**</DoNotTranslate>.

Esta vista le brinda una vista panorámica de todas las vulnerabilidades de su software, incluidos los datos que se han consumido desde la integración de Snyk. Utilice las distintas pestañas para identificar y clasificar vulnerabilidades.

<img
  title="Vulnerability management screen"
  alt="Vulnerability management screen"
  src={accountsVmLanding}
/>

<figcaption>
  <DoNotTranslate>**[one.newrelic.com](https://one.newrelic.com) > All capabilities > Vulnerability Management**</DoNotTranslate>.
</figcaption>

### Consultando evento de vulnerabilidades [#query-vuln-events]

Cuando se procesan los eventos Snyk, se almacenan en la tabla <DoNotTranslate>**Vulnerability**</DoNotTranslate> . Para consultar esta tabla y ver los datos sin procesar, haga lo siguiente:

1. Vaya a <DoNotTranslate>**[one.newrelic.com](https://one.newrelic.com) > All capabilities > Query your data**</DoNotTranslate>.

2. Ingrese la siguiente consulta:

   ```sql
   FROM Vulnerability SELECT * where source = 'Snyk' since 7 days ago
   ```

   <img
     title="Query vulnerability events"
     alt="Query vulnerability events"
     src={vulnerabilitymanagementQueryVulnEvents}
   />

   <figcaption>
     <DoNotTranslate>
       **[one.newrelic.com](https://one.newrelic.com) > All capabilities > Query your data**
     </DoNotTranslate>
   </figcaption>

### Dashboard Snyk [#snyk-dashboard]

Puede instalar el dashboard Snyk prediseñado desde el [mercado de observabilidad instantánea de New Relic](https://newrelic.com/instant-observability/snyk).

Este dashboard ofrece otra vista de los datos de vulnerabilidades y puede usar el widget de gráfico para crear sus propias vistas dashboard a partir de sus datos de integración de Snyk.

<img
  title="Snyk dashboard"
  alt="Snyk dashboard"
  src={vmSnykDashboard}
/>

<figcaption>
  Instale el [dashboardSnyk de observabilidad instantánea](https://newrelic.com/instant-observability/snyk).
</figcaption>