---
title: Enviar un reporte a Slack
tags:
  - workflow automation
  - workflow
  - slack
  - reporting
metaDescription: 'Execute NRQL queries, convert results to CSV, and post to Slack channels.'
freshnessValidatedDate: never
translationType: machine
---

Ejecutar la consulta NRQL, convertir los resultados a CSV y publicar en Slack.

**Requisitos:**

* Consulta NRQL
* Token de Slack en secretos.

**Lo que hace este flujo de trabajo:**

* Ejecute la consulta NRQL contra la cuenta de New Relic
* Generar CSV a partir de los resultados de la consulta
* Publicar CSV en el canal de Slack con mensaje

**Acciones clave**: `newrelic.nrdb.query`, `utils.transform.toCSV`, `slack.chat.postMessage`

```yaml
  name: nrqlToSlackReport

  workflowInputs:
    accountId:
      type: Int
    nrqlQuery:
      type: String
      defaultValue: 'FROM Transaction SELECT count(*) FACET appName SINCE 1 hour ago'
    slackChannel:
      type: String

  steps:
    - name: queryData
      type: action
      action: newrelic.nrdb.query
      version: 1
      inputs:
        accountIds:
          - ${{ .workflowInputs.accountId }}
        query: ${{ .workflowInputs.nrqlQuery }}

    - name: convertToCSV
      type: action
      action: utils.transform.toCSV
      version: 1
      inputs:
        data: ${{ .steps.queryData.outputs.results | tostring }}

    - name: postToSlack
      type: action
      action: slack.chat.postMessage
      version: 1
      inputs:
        token: ${{ :secrets:slack_token }}
        channel: ${{ .workflowInputs.slackChannel }}
        text: 'NRQL Query Report'
        attachment:
          filename: 'query-results.csv'
          content: ${{ .steps.convertToCSV.outputs.csv }}
```

## Que sigue

* **[AWS SQS](/docs/workflow-automation/workflow-examples/integrations/aws-sqs)**: Enviar mensajes a las colas de SQS
* **[Encuesta de la API REST](/docs/workflow-automation/workflow-examples/integrations/rest-api-polling)**: Encuestar las API externas