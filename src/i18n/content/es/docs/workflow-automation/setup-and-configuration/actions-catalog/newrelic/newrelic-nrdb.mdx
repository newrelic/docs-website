---
title: Acciones de NRDB de New Relic
tags:
  - workflow automation
  - workflow
  - workflow automation actions
  - New Relic actions
  - New Relic NRDB actions
metaDescription: A list of available new relic nrdb actions in the actions catalog for workflow definitions
freshnessValidatedDate: never
translationType: machine
---

<Callout title="avance">
  Todavía estamos trabajando en esta característica, ¡pero nos encantaría que la probaras!

  Esta característica se proporciona actualmente como parte de un programa de vista previa de conformidad con nuestras [políticas de prelanzamiento](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy).
</Callout>

Esta página proporciona una referencia completa de las acciones nrdb de New Relic disponibles en el catálogo de acciones de automatización de flujo de trabajo. Estas acciones le permitirán consultar la base de datos de New Relic.

## Requisitos previos

Antes de emplear las acciones New Relic en la automatización del flujo de trabajo, cerciorar de tener lo siguiente:

* Una cuenta de New Relic con las licencias adecuadas.
* Una clave de licencia de New Relic (si se envían datos a una cuenta diferente).
* Las licencias necesarias para los servicios específicos de New Relic que planea emplear.

Consulte [la clave de licencia](/docs/apis/intro-apis/new-relic-api-keys/#license-key) para obtener información sobre cómo crear y gestionar su clave de licencia de cuenta de New Relic.

<CollapserGroup>
  <Collapser id="newrelic.nrdb.query" title="Consulta NRQL cuentas cruzadas">
    Ejecuta una consulta NRQL entre cuentas a través de la API de NerdGraph.

    <Tabs>
      <TabsBar>
        <TabsBarItem id="nrdbqueryinputs">
          Entradas
        </TabsBarItem>

        <TabsBarItem id="nrdbqueryoutputs">
          Salidas
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="nrdbqueryinputs">
          <table>
            <thead>
              <tr>
                <th>
                  Aporte
                </th>

                <th>
                  Opcionalidad
                </th>

                <th>
                  Tipo
                </th>

                <th>
                  Descripción
                </th>

                <th>
                  Ejemplo
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **consulta**
                </td>

                <td>
                  Requerido
                </td>

                <td>
                  Cadena
                </td>

                <td>
                  La instrucción de consulta NRQL.
                </td>

                <td />
              </tr>

              <tr>
                <td>
                  **ID de cuenta**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  Lista de int
                </td>

                <td>
                  **Los ID de cuentaNew Relic **

                  especifican las cuentas objetivo para la ejecución de la consulta. Si no se proporciona, la consulta se ejecuta en la cuenta de ejecución del flujo de trabajo.
                </td>

                <td />
              </tr>

              <tr>
                <td>
                  **selectores**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  Lista
                </td>

                <td>
                  Los selectores para obtener como resultado el único parámetro especificado.
                </td>

                <td>
                  ```yaml
                      steps:
                    - name: queryForLog
                      type: action
                      action: newrelic.nrdb.query
                      version: 1
                      inputs:
                        accountIds: [12345]
                        query: FROM Log SELECT * WHERE message LIKE 'DEMO%'
                        selectors:
                          - name: resultsAsString
                            expression: '.results | tostring'
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="nrdbqueryoutputs">
          <table>
            <thead>
              <tr>
                <th>
                  Producción
                </th>

                <th>
                  Tipo
                </th>

                <th>
                  Descripción
                </th>

                <th>
                  Ejemplo
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **resultados**
                </td>

                <td />

                <td>
                  Una matriz de objetos que contienen los resultados de la consulta. Consulte 

                  [la propiedad Expresiones](/docs/workflow-automation/workflow-automation-apis/definition-schema/#expression-properties)

                   para obtener más información.
                </td>

                <td />
              </tr>

              <tr>
                <td>
                  **éxito**
                </td>

                <td>
                  Booleano
                </td>

                <td>
                  Estado de la solicitud.
                </td>

                <td />
              </tr>

              <tr>
                <td>
                  **mensaje de error**
                </td>

                <td>
                  Cadena
                </td>

                <td>
                  Mensaje de motivo del fallo.
                </td>

                <td>
                  ```yaml
                        {
                      "success": true
                      results=[
                        { message=[INFO] - Workflow: test has ended, messageId=39af98 }, 
                        { message=[INFO] - Workflow: test - Step query has started, messageId=649c612 },
                        ...
                      ]
                    }
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>
</CollapserGroup>

<CollapserGroup>
  <Collapser id="newrelic.nrdb.query" title="Consultar NRDB">
    Ejecuta una consulta NRQL entre cuentas a través de la API de NerdGraph.

    <Tabs>
      <TabsBar>
        <TabsBarItem id="newrelic-nrdb-queryinputs">
          Entradas
        </TabsBarItem>

        <TabsBarItem id="newrelic-nrdb-queryoutputs">
          Salidas
        </TabsBarItem>

        <TabsBarItem id="newrelic-nrdb-queryexample">
          Ejemplo
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="newrelic-nrdb-queryinputs">
          <table>
            <thead>
              <tr>
                <th>
                  Campo de entrada
                </th>

                <th>
                  Opcionalidad
                </th>

                <th>
                  Tipo
                </th>

                <th>
                  Descripción
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **consulta**
                </td>

                <td>
                  Requerido
                </td>

                <td>
                  Cadena
                </td>

                <td>
                  La instrucción de consulta NRQL.
                </td>
              </tr>

              <tr>
                <td>
                  **ID de cuenta**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  Lista de int
                </td>

                <td>
                  La entrada 

                  **New Relic Account IDs**

                   acepta una lista de IDs de cuenta que especifican contra qué cuentas se ejecutará la consulta. Si no se proporciona esta entrada, la consulta se establece de forma predeterminada en la cuenta de ejecución del flujo de trabajo.
                </td>
              </tr>

              <tr>
                <td>
                  **formato**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  Enumeración
                </td>

                <td>
                  Para especificar el tipo de los resultados, acepta solo 

                  `JSON`

                   o 

                  `CSV`

                  . Por defecto es 

                  `JSON`

                  .
                </td>
              </tr>

              <tr>
                <td>
                  **selectores**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  Lista
                </td>

                <td>
                  Los selectores para obtener como resultado el único parámetro especificado.
                </td>
              </tr>
            </tbody>
          </table>

          ### Ejemplo

          ```yaml
          steps:
            - name: queryForLog
              type: action
              action: newrelic.nrdb.query
              version: 1
              inputs:
                accountIds: [12345]
                query: FROM Log SELECT * WHERE message LIKE 'DEMO%'
                selectors:
                  - name: resultsAsString
                    expression: '.results | tostring'
          ```
        </TabsPageItem>

        <TabsPageItem id="newrelic-nrdb-queryoutputs">
          <table>
            <thead>
              <tr>
                <th>
                  Campo de salida
                </th>

                <th>
                  Tipo
                </th>

                <th>
                  Descripción
                </th>

                <th>
                  Ejemplo
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **resultados**
                </td>

                <td />

                <td>
                  Una matriz de objetos que contienen los resultados de la consulta. Consulte 

                  [la propiedad Expresiones](/docs/workflow-automation/workflow-automation-apis/definition-schema/#expression-properties)

                   para obtener más información.
                </td>

                <td />
              </tr>

              <tr>
                <td>
                  **éxito**
                </td>

                <td>
                  Booleano
                </td>

                <td>
                  Estado de la solicitud.
                </td>

                <td />
              </tr>

              <tr>
                <td>
                  **mensaje de error**
                </td>

                <td>
                  Cadena
                </td>

                <td>
                  Mensaje de motivo del fallo.
                </td>

                <td>
                  ```yaml
                  {
                    "success": true
                    results=[
                      { message=[INFO] - Workflow: test has ended, messageId=39af98 }, 
                      { message=[INFO] - Workflow: test - Step query has started, messageId=649c612 },
                      ...
                    ]
                  }
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="newrelic-nrdb-queryexample">
          <table>
            <thead>
              <tr>
                <th>
                  Ejemplo de flujo de trabajo
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  ```yaml
                    - name: sendMetrics
                      type: action
                      action: newrelic.ingest.sendMetrics
                      version: 1
                      inputs:
                        metrics:
                          - name: service.errors.all
                            type: count
                            value: 9
                            timestamp: 1531414060739
                            attributes:
                              service.response.statuscode: 400
                          - name: service.response.duration
                            type: guage
                            value: 4
                            timestamp: 1531414060733
                            attributes:
                              service.response.statuscode: 500
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>
</CollapserGroup>