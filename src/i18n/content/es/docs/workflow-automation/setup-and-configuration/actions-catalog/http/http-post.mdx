---
title: Publicación HTTP
tags:
  - workflow automation
  - workflow
  - workflow automation actions
  - HTTP actions
  - HTTP POST
metaDescription: A list of available http post in the actions catalog for workflow definitions
freshnessValidatedDate: never
translationType: machine
---

<Callout title="avance">
  Todavía estamos trabajando en esta característica, ¡pero nos encantaría que la probaras!

  Esta característica se proporciona actualmente como parte de un programa de vista previa de conformidad con nuestras [políticas de prelanzamiento](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy).
</Callout>

Esta página proporciona una referencia completa para las publicaciones http disponibles en el catálogo de acciones de automatización del flujo de trabajo. Estas acciones le permiten realizar operaciones de solicitud de publicación http.

## Requisitos previos

Antes de emplear acciones HTTP en la automatización de flujos de trabajo, cerciorar de tener:

* Objetivo extremos de URL de API.
* Cualquier credencial de autenticación requerida (clave de API, token, etc.).
* Comprensión de los formatos de solicitud/respuesta de la API.

<Callout variant="tip">
  Las acciones HTTP admiten la sintaxis secreta para cualquier valor de encabezado, lo que le permite pasar de forma segura datos confidenciales como la clave de API. Consulte [Gestión de secretos](/docs/workflow-automation/limitations-and-faq/workflow-best-practices/#secure-credentials) para obtener más información.
</Callout>

## Encabezados de solicitud automáticos [#automatic-headers]

Todas requests HTTP realizadas por flujo de trabajo Automation incluyen automáticamente los siguientes encabezados:

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        Encabezamiento
      </th>

      <th>
        Formato
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `x-abuse-info`
      </td>

      <td>
        `Request sent by a New Relic WorkflowAutomation. {runId}`

        <br />

        donde 

        `{runId}`

         es el ID de ejecución del flujo de trabajo
      </td>
    </tr>

    <tr>
      <td>
        `User-Agent`
      </td>

      <td>
        `NewRelic/WorkflowAutomation (region={region}; https://newrelic.com ; support@newrelic.com)`

        <br />

        donde 

        `{region}`

         es la región New Relic
      </td>
    </tr>
  </tbody>
</table>

## Enviar datos a un servidor [#http-post]

Realiza una llamada HTTP POST para enviar datos a un extremo de API.

<Callout variant="important">
  Si necesita pasar datos confidenciales a una entrada, por ejemplo, un encabezado de clave de API, puede usar valores almacenados a través de la mutación NerdGraph [secretsManagementCreateSecret](https://onenr.io/0KQXX6BmdQa).

  **Ejemplo**

  ```yaml
    {
      "inputs": [
        {
          "key": "headers",
          "value": "{\"Api-Key\": \"${{ :secrets:NR_API_KEY }}\"}"
        }
      ]
    }
  ```
</Callout>

<Tabs>
  <TabsBar>
    <TabsBarItem id="httppostinputs">
      Entradas
    </TabsBarItem>

    <TabsBarItem id="httppostoutputs">
      Salidas
    </TabsBarItem>

    <TabsBarItem id="httppostexample">
      Ejemplo
    </TabsBarItem>
  </TabsBar>

  <TabsPages>
    <TabsPageItem id="httppostinputs">
      <table>
        <thead>
          <tr>
            <th>
              Campo de entrada
            </th>

            <th>
              Opcionalidad
            </th>

            <th>
              Tipo
            </th>

            <th>
              Descripción
            </th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>
              **url**
            </td>

            <td>
              Requerido
            </td>

            <td>
              Cadena
            </td>

            <td>
              La URL de destino para la solicitud. El esquema debe estar incluido: 

              `https://example.com`
            </td>
          </tr>

          <tr>
            <td>
              **parámetros de URL**
            </td>

            <td>
              Opcional
            </td>

            <td>
              Mapa
            </td>

            <td>
              El parámetro consulta que se agregará a la URL. Toma un objeto JSON en formato de cadena.
            </td>
          </tr>

          <tr>
            <td>
              **encabezados**
            </td>

            <td>
              Opcional
            </td>

            <td>
              Mapa
            </td>

            <td>
              Las cabeceras que se deben agregar a la solicitud. Toma un objeto JSON en formato de cadena.
            </td>
          </tr>

          <tr>
            <td>
              **cuerpo**
            </td>

            <td>
              Opcional
            </td>

            <td>
              Cadena
            </td>

            <td>
              El cuerpo de la solicitud.
            </td>
          </tr>

          <tr>
            <td>
              **selectores**
            </td>

            <td>
              Opcional
            </td>

            <td>
              Lista
            </td>

            <td>
              Los selectores para obtener únicamente el parámetro especificado como resultado.
            </td>
          </tr>
        </tbody>
      </table>
    </TabsPageItem>

    <TabsPageItem id="httppostoutputs">
      <table>
        <thead>
          <tr>
            <th>
              Campo de salida
            </th>

            <th>
              Tipo
            </th>

            <th>
              Descripción
            </th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>
              **cuerpo de respuesta**
            </td>

            <td>
              Cadena
            </td>

            <td>
              El cuerpo de la respuesta.
            </td>
          </tr>

          <tr>
            <td>
              **código de estado**
            </td>

            <td>
              En t
            </td>

            <td>
              El código de estado de la respuesta.
            </td>
          </tr>

          <tr>
            <td>
              **éxito**
            </td>

            <td>
              Booleano
            </td>

            <td>
              Estado de la solicitud.
            </td>
          </tr>

          <tr>
            <td>
              **mensaje de error**
            </td>

            <td>
              Cadena
            </td>

            <td>
              Mensaje de motivo del fallo.
            </td>
          </tr>
        </tbody>
      </table>
    </TabsPageItem>

    <TabsPageItem id="httppostexample">
      <table>
        <thead>
          <tr>
            <th>
              Definición de flujo de trabajo
            </th>

            <th>
              Aporte
            </th>

            <th>
              Producción
            </th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>
              ```yaml
                name: httpPostTest

                steps:
                  - name: query
                    type: action
                    action: http.post
                    version: 1
                    inputs:
                      url: ${{ .workflowInputs.url }}
                      urlParams: ${{ .workflowInputs.urlParams }}
                      headers: ${{ .workflowInputs.headers }}
                      body: ${{ .workflowInputs.body }}
                      selectors: ${{ .workflowInputs.selectors }}
              ```
            </td>

            <td>
              ```yaml
                {
                  "inputs": [
                    {
                      "key": "url",
                      "value": "https://example.com"
                    },
                    {
                      "key": "headers",
                      "value": "{\"Content-Type\":\"application/json\"}"
                    },
                    {
                      "key": "urlParams",
                      "value": "{\"foo\": \"bar\"}"
                    },
                    {
                      "key": "body",
                      "value": "{\"foo\": \"bar\"}"
                    },
                    {
                      "key": "selectors",
                      "value": "[{\"name\": \"responseBody\", \"expression\": \".responseBody\"}, {\"name\": \"statusCode\", \"expression\": \".statusCode\"}]"
                    }
                  ]
                }
              ```
            </td>

            <td>
              ```yaml
                Success case:
                  {
                    "success": true,
                    "responseBody": "",
                    "statusCode": 200
                  }

                Failure case:
                  {
                    "errorMessage": "An unexpected error failed to call http post endpoint.",
                    "success": false
                  }
              ```
            </td>
          </tr>
        </tbody>
      </table>
    </TabsPageItem>
  </TabsPages>
</Tabs>