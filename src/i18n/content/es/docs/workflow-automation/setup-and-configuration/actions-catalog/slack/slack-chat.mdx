---
title: Acciones de Slack
tags:
  - workflow automation
  - workflow
  - workflow automation actions
  - Slack actions
  - communication actions
  - Slack Chat actions
metaDescription: A list of available slack chat actions in the actions catalog for workflow definitions
freshnessValidatedDate: never
translationType: machine
---

<Callout title="avance">
  Todavía estamos trabajando en esta característica, ¡pero nos encantaría que la probaras!

  Esta característica se proporciona actualmente como parte de un programa de vista previa de conformidad con nuestras [políticas de prelanzamiento](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy).
</Callout>

Esta página proporciona una referencia completa de las acciones de chat de Slack disponibles en el catálogo de acciones de automatización del flujo de trabajo. Estas acciones le permiten aflojar las operaciones de mensajería.

## Requisitos previos

Antes de emplear acciones de comunicación en la automatización del flujo de trabajo, cerciorar de tener:

* Un espacio de trabajo de Slack con las licencias adecuadas.
* Un token de bot de Slack configurado como secreto en la automatización del flujo de trabajo.
* Acceso a los canales de Slack donde deseas enviar mensajes.

## Configurar la integración de Slack [#slack-configuration]

Esta sección detalla las instrucciones para configurar una aplicación Slack con los permisos de alcance mínimos para permitir las acciones de Slack de automatización del flujo de trabajo.

### Crear una aplicación de Slack

1. Vaya a la [Slack API](https://api.slack.com/apps) &gt; **Create New App &gt; From Scratch**

2. Dale un nombre a tu aplicación y selecciona un espacio de trabajo, luego haz clic en **Create App**.

3. Al crear, vaya a **App Home** en la navegación izquierda y asegúrese de que su bot esté en línea.

   <img width="40%;" style={{align: "left"}} title="Always show My Bot as Online" alt="The Slack App Home page with the My Bot online status highlighted." src="/images/my-bot-always-online.webp" />

### Configurar permisos de OAuth

1. En la navegación izquierda, seleccione **OAuth &amp; Permissions**.

2. Desplácese hacia abajo hasta la sección **Bot Token Scopes** y agregue los siguientes ámbitos para permitir los usos de la acción de automatización del flujo de trabajo:

   * `chat:write` - Requerido para publicar un mensaje
   * `reactions:read` - Requerido para obtener reacción de un hilo
   * `files:write` - Requerido para subir un archivo adjunto a un hilo

   <img width="40%;" style={{align: "left"}} title="Workflow automation Slack scopes" alt="The image of the scope that needs to be added for workflow automation Slack actions." src="/images/slack-workflow-scopes.webp" />

3. Desplazar hacia arriba y haga clic en el botón **Install to \[espacio de trabajo]** para iniciar la configuración de OAuth con su espacio de trabajo de Slack.

4. Deberías ver un mensaje de confirmación. Haz clic en **Allow** para confirmar.

5. Tras el éxito, copia el **Bot token** y guárdalo para el siguiente paso. El token debe comenzar con `xoxb-...`.

### Agregar la aplicación a los canales

Ahora que la aplicación Slack está creada y configurada, agrégala a los canales de Slack que quieras usar editando las **Integraciones** de ese canal y agregando la aplicación Slack.

### Configuración de New Relic

Una vez que haya configurado una aplicación de Slack y obtenido un token de bot, almacene esta credencial en la gestión de secretos de New Relic utilizando la mutación de GraphQL a continuación:

```graphql
mutation {
  secretsManagementCreateSecret(
    scope: {type: ACCOUNT id: "12345678"}
    namespace: "slack"
    key: "my-app-bot-token"
    description: "A slack token to send messages with newrelic workflow automation"
    value: "xoxb-..."
  ) {
    key
  }
}
```

Configura los siguientes valores:

* `id` - Su ID de cuenta de New Relic
* `namespace` - Opcional, use cualquier cadena alfanumérica para categorizar su secreto
* `key` - Use una cadena alfanumérica para hacer referencia a este secreto
* `description` - Descripción opcional para el secreto
* `value` - El token del bot de Slack que copió del paso anterior

Puede ejecutar esta mutación utilizando el [explorador NerdGraph GraphiQL](https://one.newrelic.com/nerdgraph-graphiql) con su clave de API de usuario de New Relic. Una vez enviado correctamente, debería ver un resultado similar a este:

```json
{
  "data": {
    "secretsManagementCreateSecret": {
      "key": "my-app-bot-token"
    }
  }
}
```

### Usar el token de Slack en los flujos de trabajo

Use la función de automatización del flujo de trabajo aprovechando el secreto del token del bot de Slack almacenado con su espacio de nombres y nombres de clave.

**Ejemplo:**

```yaml
name: to-slack

steps:
  - name: postCsv
    type: action
    action: slack.chat.postMessage
    version: 1
    inputs:
      channel: test-channel-workflow
      text: "Hello World!"
      token: ${{ :secrets:slack:my-app-bot-token }}
```

<Callout variant="tip">
  Si no usó un espacio de nombres, elimine la parte `:namespace` de la entrada del token, así: `${{ :secrets:my-app-bot-token }}`
</Callout>

## Acciones de Slack

<CollapserGroup>
  <Collapser id="slack-chat-postmessage" title="Publica un mensaje en el canal de Slack.">
    Envía un mensaje a un canal de Slack, con un archivo adjunto opcional.

    <Tabs>
      <TabsBar>
        <TabsBarItem id="chatpostmessageinputs">
          Entradas
        </TabsBarItem>

        <TabsBarItem id="chatpostmessageoutputs">
          Salidas
        </TabsBarItem>

        <TabsBarItem id="chatpostmessageexample">
          Ejemplo
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="chatpostmessageinputs">
          <table>
            <thead>
              <tr>
                <th>
                  Campo de entrada
                </th>

                <th>
                  Opcionalidad
                </th>

                <th>
                  Tipo
                </th>

                <th>
                  Descripción
                </th>

                <th>
                  Ejemplo
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **token**
                </td>

                <td>
                  Requerido
                </td>

                <td>
                  Secreto
                </td>

                <td>
                  El token del bot de Slack que se utilizará. Esto debe pasarse como una sintaxis secreta. Consulte 

                  [Agregar configuración de Slack](#slack-configuration)

                   para obtener instrucciones sobre cómo configurar un token.
                </td>

                <td>
                  `${{ :secrets:slackToken }}`
                </td>
              </tr>

              <tr>
                <td>
                  **canal**
                </td>

                <td>
                  Requerido
                </td>

                <td>
                  Cadena
                </td>

                <td>
                  El nombre del canal, o un ID de canal, para enviar el mensaje. Consulte 

                  [la API de Slack](https://docs.slack.dev/reference/methods/chat.postMessage/#arg_channel)

                   para obtener más información.
                </td>

                <td>
                  `my-slack-channel`
                </td>
              </tr>

              <tr>
                <td>
                  **texto**
                </td>

                <td>
                  Requerido
                </td>

                <td>
                  Cadena
                </td>

                <td>
                  El mensaje que se publicará en Slack en el 

                  `channel`

                   especificado.
                </td>

                <td>
                  `Hello World!`
                </td>
              </tr>

              <tr>
                <td>
                  **hilosTs**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  Cadena
                </td>

                <td>
                  marca de tiempo que pertenece al mensaje principal, empleada para crear una respuesta de mensaje en un hilo.
                </td>

                <td>
                  `<digits>.<digits>`
                </td>
              </tr>

              <tr>
                <td>
                  **adjunto**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  Mapa
                </td>

                <td>
                  Permite anexar un archivo con un mensaje al 

                  `channel`

                   especificado.
                </td>

                <td />
              </tr>

              <tr>
                <td>
                  **archivo adjunto**
                </td>

                <td>
                  Requerido
                </td>

                <td>
                  Cadena
                </td>

                <td>
                  Especifique el nombre del archivo cargado en Slack.
                </td>

                <td>
                  `file.txt`
                </td>
              </tr>

              <tr>
                <td>
                  **contenido del archivo adjunto**
                </td>

                <td>
                  Requerido
                </td>

                <td>
                  Cadena
                </td>

                <td>
                  El contenido del archivo a cargar como UTF8.
                </td>

                <td>
                  `Hello\nWorld!`
                </td>
              </tr>

              <tr>
                <td>
                  **selectores**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  Lista
                </td>

                <td>
                  Los selectores para obtener como resultado el único parámetro especificado.
                </td>

                <td>
                  `[{\"name\": \"threadTs\", \"expression\": \".threadTs\"}, {\"name\": \"channelID\", \"expression\": \".channelID\")\"}]`
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="chatpostmessageoutputs">
          <table>
            <thead>
              <tr>
                <th>
                  Campo de salida
                </th>

                <th>
                  Tipo
                </th>

                <th>
                  Descripción
                </th>

                <th>
                  Ejemplo
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **hilosTs**
                </td>

                <td>
                  Cadena
                </td>

                <td>
                  marca de tiempo del hilo del mensaje. Se puede emplear en futuras llamadas 

                  `postMessage`

                   para publicar una respuesta en un hilo.
                </td>

                <td>
                  `<digits>.<digits>`
                </td>
              </tr>

              <tr>
                <td>
                  **ID de canal**
                </td>

                <td>
                  Cadena
                </td>

                <td>
                  Id del canal donde se publica el mensaje.
                </td>

                <td>
                  `<string>`
                </td>
              </tr>

              <tr>
                <td>
                  **éxito**
                </td>

                <td>
                  Booleano
                </td>

                <td>
                  Estado de la solicitud
                </td>

                <td>
                  `true / false`
                </td>
              </tr>

              <tr>
                <td>
                  **mensaje de error**
                </td>

                <td>
                  Cadena
                </td>

                <td>
                  Motivo del fallo como mensaje
                </td>

                <td>
                  `<string>`
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="chatpostmessageexample">
          **Ejemplo 1: Enviar mensaje de Slack**

          <table>
            <thead>
              <tr>
                <th>
                  Ejemplo de flujo de trabajo
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  ```yaml
                  name: SendMessage

                  steps:
                    - name: send_slack_message
                      type: action
                      action: slack.chat.postMessage 
                      version: 1
                      inputs:
                        token: ${{ :secrets:dn_staging_slack_token }}
                        channel: ${{ .workflowInputs.channel }}
                        text: ${{ .workflowInputs.text }}
                        selectors:
                          - name: threadTs
                            expression: ".threadTs"
                          - name: channelID
                            expression: ".channelID"
                  ```

                  **Entradas:**

                  ```json
                  {
                    "inputs": [
                      {
                        "key" : "channel",
                        "value" : "test-channel-workflow"
                      },
                      {
                        "key" : "text",
                        "value" : "This is my message *with bold text* and `code backticks`"
                      }
                    ]
                  }
                  ```

                  **Resultado esperado:**

                  ```json
                  [
                    {
                      "threadTs": "1718897637.400609",
                      "channelID": "C063JK1RHN1"
                      "success": true
                    }
                  ]
                  ```
                </td>
              </tr>
            </tbody>
          </table>

          **Ejemplo 2: Anexar un archivo**

          <table>
            <thead>
              <tr>
                <th>
                  Ejemplo de flujo de trabajo
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  ```yaml
                  name: SendFileMessage

                  steps:

                    - name: postCsv
                      type: action
                      action: slack.chat.postMessage
                      version: 1
                      inputs:
                        token: ${{ :secrets:dn_staging_slack_token }}
                        channel: test-channel-workflow
                        text: "Please find the attached file:"
                        attachment:
                          filename: 'file.txt'
                          content: "Hello\nWorld!"
                  ```

                  **Resultado esperado:**

                  ```json
                  [
                    {
                      "threadTs": "1718897637.400609",
                      "channelID": "C063JK1RHN1"
                      "success": true
                    }
                  ]
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>
</CollapserGroup>

<CollapserGroup>
  <Collapser id="slack-chat-getreactions" title="Obtén una reacción a un mensaje del canal de Slack.">
    Obtén una reacción a un mensaje del canal de Slack.

    <Tabs>
      <TabsBar>
        <TabsBarItem id="chatgetreactionsinputs">
          Entradas
        </TabsBarItem>

        <TabsBarItem id="chatgetreactionsoutputs">
          Salidas
        </TabsBarItem>

        <TabsBarItem id="chatgetreactionsexample">
          Ejemplo
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="chatgetreactionsinputs">
          <table>
            <thead>
              <tr>
                <th>
                  Campo de entrada
                </th>

                <th>
                  Opcionalidad
                </th>

                <th>
                  Tipo
                </th>

                <th>
                  Descripción
                </th>

                <th>
                  Ejemplo
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **token**
                </td>

                <td>
                  Requerido
                </td>

                <td>
                  Secreto
                </td>

                <td>
                  El token del bot de Slack que se utilizará. Esto debe pasarse como una sintaxis secreta. Consulte 

                  [Agregar configuración de Slack](#slack-configuration)

                   para obtener instrucciones sobre cómo configurar un token.
                </td>

                <td>
                  `${{ :secrets:slackToken }}`
                </td>
              </tr>

              <tr>
                <td>
                  **ID de canal**
                </td>

                <td>
                  Requerido
                </td>

                <td>
                  Cadena
                </td>

                <td>
                  El ID del canal, para obtener las reacciones del mensaje. Ver 

                  [método`reactions.get`](https://docs.slack.dev/reference/methods/reactions.get/#arg_channel)
                </td>

                <td>
                  `C063JK1RHN1`
                </td>
              </tr>

              <tr>
                <td>
                  **se acabó el tiempo**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  En t
                </td>

                <td>
                  El tiempo en segundos que hay que esperar para obtener cualquier reacción. El valor predeterminado es 60 s, el máximo permitido es 600 s (10 min).
                </td>

                <td>
                  60
                </td>
              </tr>

              <tr>
                <td>
                  **hilosTs**
                </td>

                <td>
                  Requerido
                </td>

                <td>
                  Cadena
                </td>

                <td>
                  marca de tiempo que pertenece al mensaje, empleada para obtener la reacción de ese mensaje.
                </td>

                <td>
                  `<digits>.<digits>`
                </td>
              </tr>

              <tr>
                <td>
                  **selectores**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  Lista
                </td>

                <td>
                  Los selectores para obtener como resultado el único parámetro especificado.
                </td>

                <td>
                  `[{\"name\": \"reactions\", \"expression\": \".reactions \"}]`
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="chatgetreactionsoutputs">
          <table>
            <thead>
              <tr>
                <th>
                  Campo de salida
                </th>

                <th>
                  Tipo
                </th>

                <th>
                  Descripción
                </th>

                <th>
                  Ejemplo
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **reacciones**
                </td>

                <td>
                  Lista
                </td>

                <td>
                  Lista de elementos con todas las reacciones capturadas o una lista vacía si se agotó el tiempo de espera.
                </td>

                <td>
                  `<list>`
                </td>
              </tr>

              <tr>
                <td>
                  **éxito**
                </td>

                <td>
                  Booleano
                </td>

                <td>
                  Estado de la solicitud
                </td>

                <td>
                  `true / false`
                </td>
              </tr>

              <tr>
                <td>
                  **mensaje de error**
                </td>

                <td>
                  Cadena
                </td>

                <td>
                  Motivo del fallo como mensaje
                </td>

                <td>
                  `Invalid slack token`
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="chatgetreactionsexample">
          **Ejemplo 1: Slack obtiene reacciones**

          <table>
            <thead>
              <tr>
                <th>
                  Ejemplo de flujo de trabajo
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  ```yaml
                  name: GetReactions

                  steps:
                      - name: getReactions
                      type: action
                      action: slack.chat.getReactions
                      version: 1
                      inputs:
                        token: ${{ :secrets:dn_staging_slack_token }}
                        channelID: ${{ .steps.promptUser.outputs.channelID }}
                        threadTs: ${{ .steps.promptUser.outputs.threadTs }}
                        timeout: ${{ .workflowInputs.timeout }}
                        selectors: ${{ .workflowInputs.selectors }}
                  ```

                  **Entradas:**

                  ```json
                  {
                    "inputs": [
                      {
                        "key" : "channelID",
                        "value" : "C063JK1RHN1"
                      },
                      {
                        "key" : "threadTs",
                        "value" : "1718897637.400609"
                      },
                      {
                        "key" : "selectors",
                        "value" : "[{\"name\": \"reactions\", \"expression\": \".reactions \"}]"
                      }
                    ]
                  }
                  ```

                  **Salidas:**

                  ```json
                  [
                              {
                                  "name": "grinning",
                                  "users": [
                                      "W222222"
                                  ],
                                  "count": 1
                              },
                              {
                                  "name": "question",
                                  "users": [
                                      "W333333"
                                  ],
                                  "count": 1
                              }
                          ]

                  or if it is timed out,
                  []
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>
</CollapserGroup>