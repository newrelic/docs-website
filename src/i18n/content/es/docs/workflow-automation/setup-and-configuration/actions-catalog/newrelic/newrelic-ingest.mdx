---
title: Acciones de ingesta New Relic
tags:
  - workflow automation
  - workflow
  - workflow automation actions
  - New Relic actions
  - New Relic Ingest actions
metaDescription: A list of available new relic ingest actions in the actions catalog for workflow definitions
freshnessValidatedDate: never
translationType: machine
---

<Callout title="avance">
  Todavía estamos trabajando en esta característica, ¡pero nos encantaría que la probaras!

  Esta característica se proporciona actualmente como parte de un programa de vista previa de conformidad con nuestras [políticas de prelanzamiento](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy).
</Callout>

Esta página proporciona una referencia completa de las acciones de ingesta de New Relic disponibles en el catálogo de acciones de automatización de flujo de trabajo. Estas acciones le permiten enviar eventos y logs a New Relic.

## Requisitos previos

Antes de emplear las acciones New Relic en la automatización del flujo de trabajo, cerciorar de tener lo siguiente:

* Una cuenta de New Relic con las licencias adecuadas.
* Una clave de licencia de New Relic (si se envían datos a una cuenta diferente).
* Las licencias necesarias para los servicios específicos de New Relic que planea emplear.

Consulte [la clave de licencia](/docs/apis/intro-apis/new-relic-api-keys/#license-key) para obtener información sobre cómo crear y gestionar su clave de licencia de cuenta de New Relic.

## acciones de ingesta de datos

<CollapserGroup>
  <Collapser id="newrelic-ingest-sendevents" title="Enviar evento personalizado a New Relic">
    Informa un evento personalizado a New Relic.

    <Tabs>
      <TabsBar>
        <TabsBarItem id="createventinputs">
          Entradas
        </TabsBarItem>

        <TabsBarItem id="createventoutputs">
          Salidas
        </TabsBarItem>

        <TabsBarItem id="createventexample">
          Ejemplo
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="createventinputs">
          <table>
            <thead>
              <tr>
                <th>
                  Campo de entrada
                </th>

                <th>
                  Opcionalidad
                </th>

                <th>
                  Tipo
                </th>

                <th>
                  Descripción
                </th>

                <th>
                  Ejemplo
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **Atributo**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  Mapa
                </td>

                <td>
                  Atributo común que forma parte de todos los eventos cuando se proporcionan.

                  La fusión de cada elemento de evento cuando es necesario anula la definición común.
                </td>

                <td>
                  `"{\"page\": \"1\", \"limit\": \"10\"}"`
                </td>
              </tr>

              <tr>
                <td>
                  **evento**
                </td>

                <td>
                  Requerido
                </td>

                <td>
                  Lista
                </td>

                <td>
                  La lista de datos de eventos.

                  <Callout variant="important">
                    evento requiere el uso de un campo `eventType` que representa el tipo de evento personalizado. El máximo de eventos permitidos por solicitud es **100**.
                  </Callout>
                </td>

                <td>
                  `"[{\"eventType\":\"XYZ\",\"attributes\":{\"foo\":\"bar\"}}, {\"eventType\":\"ABC\",\"value\":\"1234\",\"attributes\":{\"color\":\"red\"}}]"`
                </td>
              </tr>

              <tr>
                <td>
                  **clave de licencia**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  Cadena
                </td>

                <td>
                  La **clave de licencia de cuenta deNew Relic **(obligatoria) especifica la cuenta de destino para su evento. Si no se proporciona, el sistema emplea la clave de licencia predeterminada de la cuenta que ejecuta el flujo de trabajo.

                  [Obtenga más información sobre nuestra clave de API](/docs/apis/intro-apis/new-relic-api-keys/#license-key) para crear y gestionar su **clave de licencia de cuentaNew Relic **.
                </td>

                <td>
                  `"{{ .secrets.secretName }}"`

                  , donde 

                  `secretName`

                   es la clave bajo la cual se almacena la clave de licencia.
                </td>
              </tr>

              <tr>
                <td>
                  **selectores**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  Lista
                </td>

                <td>
                  Los selectores para obtener únicamente el parámetro especificado como resultado.
                </td>

                <td>
                  `[{\"name\": \"success\", \"expression\": \".success\"}]`
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="createventoutputs">
          <table>
            <thead>
              <tr>
                <th>
                  Campo de salida
                </th>

                <th>
                  Tipo
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **éxito**
                </td>

                <td>
                  Booleano
                </td>
              </tr>

              <tr>
                <td>
                  **mensaje de error**
                </td>

                <td>
                  cadena
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="createventexample">
          <table>
            <thead>
              <tr>
                <th>
                  Ejemplo de flujo de trabajo
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  ```yaml
                  name: heartbeat_newrelicIngestSendEvents

                  workflowInputs:
                  cellName:
                    type: String

                  steps:
                  - name: runAction
                    type: action
                    action: newrelic.ingest.sendEvents
                    version: 1
                    inputs:
                      attributes:
                        colour: red
                        id: 1234
                      events:
                        - eventType: HeartBeat
                          test: "OK"
                          attributes:
                            foo: bar
                        - eventType: HeartBeat1234
                          test: "OK1234"
                          attributes:
                            foo: bar
                        - eventType: HeartBeat12345
                          test: "OK12345"
                          attributes:
                            foo: bar
                            colour: yellow
                        - eventType: HeartBeat12345678
                          test: "OK12345678"
                      selectors:
                        - name: success
                          expression: ".success"
                  ```

                  **Resultado esperado:**

                  ```yaml
                  {
                    "success": true
                  }
                  ```

                  **Recuperar evento:**

                  Tras ejecutar correctamente un flujo de trabajo, puede recuperar el evento asociado ejecutando una consulta en la cuenta que ejecutó el flujo de trabajo:

                  ```sql
                  SELECT * FROM HeartBeat
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>
</CollapserGroup>

<CollapserGroup>
  <Collapser id="newrelic-ingest-sendlogs" title="Enviar log a New Relic">
    Enviar log a New Relic

    <Tabs>
      <TabsBar>
        <TabsBarItem id="newrelic-ingest-sendlogsinputs">
          Entradas
        </TabsBarItem>

        <TabsBarItem id="newrelic-ingest-sendlogsoutputs">
          Salidas
        </TabsBarItem>

        <TabsBarItem id="newrelic-ingest-sendlogsexample">
          Ejemplo
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="newrelic-ingest-sendlogsinputs">
          <table>
            <thead>
              <tr>
                <th>
                  Campo de entrada
                </th>

                <th>
                  Opcionalidad
                </th>

                <th>
                  Tipo
                </th>

                <th>
                  Descripción
                </th>

                <th>
                  Ejemplo
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **Atributo**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  Mapa
                </td>

                <td>
                  Los atributos comunes se incluyen en todos los logs cuando se proporcionan. Estos se fusionan con cada elemento del log, y los valores específicos del log anulan los atributos comunes cuando ocurren conflictos.
                </td>

                <td>
                  `"{\"page\": \"1\", \"limit\": \"10\"}"`
                </td>
              </tr>

              <tr>
                <td>
                  **logs**
                </td>

                <td>
                  Requerido
                </td>

                <td>
                  Lista
                </td>

                <td>
                  Lista de logs. Cada 

                  **log**

                   requiere un campo 

                  `message`

                   . Máximo de 100 logs por solicitud.
                </td>

                <td>
                  `"[{\"message\":\"XYZ\",\"attributes\":{\"foo\":\"bar\"}}, {\"message\":\"ABC\",\"value\":\"1234\",\"attributes\":{\"color\":\"red\"}}]"`
                </td>
              </tr>

              <tr>
                <td>
                  **clave de licencia**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  Cadena
                </td>

                <td>
                  La **clave de licencia de cuenta deNew Relic **(obligatoria) especifica la cuenta de destino para su evento. Si no se proporciona, el sistema emplea la clave de licencia predeterminada de la cuenta que ejecuta el flujo de trabajo.

                  [Obtenga más información sobre nuestra clave de API](/docs/apis/intro-apis/new-relic-api-keys/#license-key) para crear y gestionar su **clave de licencia de cuentaNew Relic **.
                </td>

                <td>
                  `"{{ .secrets.secretName }}"`

                  , donde 

                  `secretName`

                   es la clave bajo la cual se almacena la clave de licencia.
                </td>
              </tr>

              <tr>
                <td>
                  **selectores**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  Lista
                </td>

                <td>
                  Los selectores para obtener únicamente el parámetro especificado como resultado.
                </td>

                <td />
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="newrelic-ingest-sendlogsoutputs">
          <table>
            <thead>
              <tr>
                <th>
                  Campo de salida
                </th>

                <th>
                  Tipo
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **éxito**
                </td>

                <td>
                  Booleano
                </td>
              </tr>

              <tr>
                <td>
                  **mensaje de error**
                </td>

                <td>
                  cadena
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="newrelic-ingest-sendlogsexample">
          <table>
            <thead>
              <tr>
                <th>
                  Ejemplo de flujo de trabajo
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  ```yaml
                  name: heartbeat_newrelicIngestSendLogs

                  workflowInputs:
                  cellName:
                    type: String

                  steps:
                  - name: runAction
                    type: action
                    action: newrelic.ingest.sendLogs
                    version: 1
                    inputs:
                      attributes:
                        colour: red
                        id: 1234
                      logs:
                        - message: 'Heartbeat sendLogs Action Test Message'
                          attributes:
                            foo: bar
                        - message: 'HeartBeat1234'
                          attributes:
                            foo: bar
                        - message: 'HeartBeat12345'
                          attributes:
                            foo: bar
                            colour: yellow
                        - message: 'HeartBeat12345678'
                      selectors:
                        - name: success
                          expression: ".success"
                  ```

                  **Resultado esperado:**

                  ```yaml
                  {
                    "success": true
                  }
                  ```

                  **Recuperar logs:**

                  Tras ejecutar correctamente un flujo de trabajo, puede recuperar el log asociado ejecutando una consulta en la cuenta que ejecutó el flujo de trabajo:

                  ```sql
                  SELECT * FROM Log
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>
</CollapserGroup>

<CollapserGroup>
  <Collapser id="newrelic.ingest.sendMetrics" title="Enviar métrica a New Relic">
    <Tabs>
      <TabsBar>
        <TabsBarItem id="newrelic-ingest-sendmetricsinputs">
          Entradas
        </TabsBarItem>

        <TabsBarItem id="newrelic-ingest-sendmetricsoutputs">
          Salidas
        </TabsBarItem>

        <TabsBarItem id="newrelic-ingest-sendmetricsexample">
          Ejemplo
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="newrelic-ingest-sendmetricsinputs">
          <table>
            <thead>
              <tr>
                <th>
                  Campo de entrada
                </th>

                <th>
                  Opcionalidad
                </th>

                <th>
                  Tipo
                </th>

                <th>
                  Ejemplo
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **métrica**
                </td>

                <td>
                  Requerido
                </td>

                <td>
                  Lista
                </td>

                <td>
                  ```yaml
                  [ { "name": "service.errors.all", "type": "count", "value": 9, "attributes": { "service.response.statuscode": "400" } }, 

                  { "name": "service.errors.all", "type": "gauge", "value": 4, "attributes": { "service.response.statuscode": "500" } }, 

                  { "name": "service.response.duration", "type": "summary", "value": { "count": 5, "sum": 0.004382655, "min": 0.0005093, "max": 0.001708826 }, "attributes": { "service.response.statuscode": "200" } } ]
                  ```
                </td>
              </tr>

              <tr>
                <td>
                  **Atributo**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  Mapa
                </td>

                <td>
                  ```yaml
                  { "timestamp": 1531414060739, "interval.ms": 10000, "attributes": { "app.name": "foo", "host.name": "dev.server.com" } }
                  ```
                </td>
              </tr>

              <tr>
                <td>
                  **clave de licencia**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  Cadena
                </td>

                <td>
                  La **clave de licencia de cuenta deNew Relic **(obligatoria) especifica la cuenta de destino para su evento. Si no se proporciona, el sistema emplea la clave de licencia predeterminada de la cuenta que ejecuta el flujo de trabajo.

                  [Obtenga más información sobre nuestra clave de API](/docs/apis/intro-apis/new-relic-api-keys/#license-key) para crear y gestionar su **clave de licencia de cuentaNew Relic **.

                  `"{{ .secrets.secretName }}"`, donde `secretName` es la clave bajo la cual se almacena la clave de licencia.
                </td>
              </tr>

              <tr>
                <td>
                  **selectores**
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  Lista
                </td>

                <td>
                  ```yaml
                  [{"name": "error", "expression": ".errorMessage"}]
                  ```
                </td>
              </tr>
            </tbody>
          </table>

          **Pares clave-valor requeridos en el** `metrics`

          Cada punto de datos de métrica en la lista `metrics` utiliza la siguiente estructura clave-valor:

          <table>
            <thead>
              <tr>
                <th>
                  Atributo
                </th>

                <th>
                  Tipo
                </th>

                <th>
                  Opcionalidad
                </th>

                <th>
                  Descripción
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **nombre**
                </td>

                <td>
                  Cadena
                </td>

                <td>
                  Requerido
                </td>

                <td>
                  El nombre de la métrica. El valor debe tener menos de 255 caracteres.
                </td>
              </tr>

              <tr>
                <td>
                  **valor**
                </td>

                <td>
                  Número o Mapa
                </td>

                <td>
                  Requerido
                </td>

                <td>
                  El valor varía según el 

                  [tipo de métrica](/docs/data-apis/understand-data/metric-data/metric-data-type/)

                  . Para 

                  `gauge`

                   y 

                  `count`

                  , el valor debe ser un solo número. Para 

                  `summary`

                  , el valor debe ser un mapa con pares clave-valor que especifiquen el conteo, la suma, el mínimo y el máximo.
                </td>
              </tr>

              <tr>
                <td>
                  **timestamp**
                </td>

                <td>
                  Largo
                </td>

                <td>
                  Opcional
                </td>

                <td>
                  La hora de inicio de la métrica en 

                  [tiempo Unix](https://currentmillis.com/)

                  . El valor predeterminado utiliza la zona horaria UTC. Este campo también admite segundos, microsegundos y nanosegundos. Sin embargo, los datos se convertirán a milisegundos para su almacenamiento y consulta. Las métricas se descartan si tienen una marca de tiempo de más de 48 horas en el pasado o más de 24 horas en el futuro desde el momento en que se informan.
                </td>
              </tr>

              <tr>
                <td>
                  **intervalo.ms**
                </td>

                <td>
                  Largo positivo
                </td>

                <td>
                  Requerido para 

                  `count`

                   y 

                  `summary`

                   

                  [tipos de métricas](/docs/data-apis/understand-data/metric-data/metric-data-type/)

                  .
                </td>

                <td>
                  La duración de la ventana de tiempo.
                </td>
              </tr>

              <tr>
                <td>
                  **tipo**
                </td>

                <td />

                <td>
                  Recomendado
                </td>

                <td>
                  Solo admite 

                  `count`

                  , 

                  `gauge`

                  , 

                  `summary`

                  , consulte 

                  [tipos de métricas admitidos](/docs/data-apis/understand-data/metric-data/metric-data-type/)

                   para obtener más información. Si no especifica un tipo, esto se establecerá de forma predeterminada en un 

                  `gauge`

                  .
                </td>
              </tr>

              <tr>
                <td>
                  **Atributo**
                </td>

                <td>
                  Cadenas de texto, números JSON o booleanos
                </td>

                <td>
                  Recomendado
                </td>

                <td>
                  Un mapa de pares clave-valor asociados con esta métrica específica. Los valores pueden ser cadenas, números JSON o booleanos. Las claves distinguen entre mayúsculas y minúsculas y deben tener menos de 255 caracteres.
                </td>
              </tr>
            </tbody>
          </table>

          <Callout variant="important">
            La API de métricas exige un `timestamp`. Dentro de la acción, el `timestamp` es opcional y, si no se proporciona antes de la ingesta de métricas, toma por defecto la hora actual.
          </Callout>

          **Compartir atributo a través de métrica con** `common`

          Si desea incluir un conjunto de atributos en múltiples métricas (y no agregar los mismos atributos para cada métrica), puede usar el bloque `common`. Este es un mapa opcional que especifica información que se aplica a todos los puntos de datos de métricas asociados. Los valores en la sección `common` se anularán si la misma clave existe en un punto de datos de métrica.

          El bloque puede incluir:

          <table>
            <thead>
              <tr>
                <th>
                  Atributo
                </th>

                <th>
                  Tipo
                </th>

                <th>
                  Opcionalidad
                </th>

                <th>
                  Descripción
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **timestamp**
                </td>

                <td>
                  Largo
                </td>

                <td />

                <td>
                  La hora de inicio de la métrica en 

                  [tiempo Unix](https://currentmillis.com/)

                  . El valor predeterminado es la hora actual en la zona horaria UTC. Este campo también admite segundos, microsegundos y nanosegundos. Sin embargo, los datos se convertirán a milisegundos para su almacenamiento y consulta posterior.
                </td>
              </tr>

              <tr>
                <td>
                  **intervalo.ms**
                </td>

                <td>
                  Largo positivo
                </td>

                <td>
                  Requerido para 

                  `count`

                   y 

                  `summary`
                </td>

                <td>
                  La duración de la ventana de tiempo.
                </td>
              </tr>

              <tr>
                <td>
                  **Atributo**
                </td>

                <td>
                  Cadenas de texto, números JSON o booleanos
                </td>

                <td />

                <td>
                  Un mapa de pares de valores principales asociados con esta métrica específica. Los valores pueden ser cadenas, números JSON o booleanos.
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="newrelic-ingest-sendmetricsoutputs">
          <table>
            <thead>
              <tr>
                <th>
                  Campo de salida
                </th>

                <th>
                  Tipo
                </th>

                <th>
                  Ejemplo
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **requestId**
                </td>

                <td>
                  Cadena
                </td>

                <td>
                  `13325ef9-0001-b193-510f-019ba20b0792`
                </td>
              </tr>

              <tr>
                <td>
                  **éxito**
                </td>

                <td>
                  Booleano
                </td>

                <td>
                  `success: true | false`
                </td>
              </tr>

              <tr>
                <td>
                  **mensaje de error**
                </td>

                <td>
                  Cadena
                </td>

                <td>
                  `Failure reason as message.`
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="newrelic-ingest-sendmetricsexample">
          <table>
            <thead>
              <tr>
                <th>
                  Ejemplo de flujo de trabajo
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  ```yaml
                    - name: sendMetrics
                      type: action
                      action: newrelic.ingest.sendMetrics
                      version: 1
                      inputs:
                        metrics:
                          - name: service.errors.all
                            type: count
                            value: 9
                            timestamp: 1531414060739
                            attributes:
                              service.response.statuscode: 400
                          - name: service.response.duration
                            type: guage
                            value: 4
                            timestamp: 1531414060733
                            attributes:
                              service.response.statuscode: 500
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>
</CollapserGroup>