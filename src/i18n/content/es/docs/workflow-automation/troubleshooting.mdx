---
title: Solucionar problemas de automatizaci贸n de flujo de trabajo
tags:
  - workflow automation
  - troubleshooting
  - workflow errors
metaDescription: 'Common issues and solutions for Workflow Automation including AWS credentials, workflow execution, and dashboard problems.'
freshnessValidatedDate: never
translationType: machine
---

<Callout title="avance">
  Todav铆a estamos trabajando en esta caracter铆stica, 隆pero nos encantar铆a que la probaras!

  Esta caracter铆stica se proporciona actualmente como parte de un programa de vista previa de conformidad con nuestras [pol铆ticas de prelanzamiento](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy).
</Callout>

Esta p谩gina proporciona soluciones a problemas comunes que puede encontrar al usar la automatizaci贸n de flujo de trabajo. Para obtener ayuda adicional, consulte el [foro de soporte de New Relic](https://discuss.newrelic.com/) o p贸ngase en contacto con [el soporte de New Relic](https://support.newrelic.com/).

## Credenciales y autenticaci贸n de AWS

<CollapserGroup>
  <Collapser id="access-denied-errors" title="Errores de acceso denegado">
    **Problema:** Su flujo de trabajo falla con un error de autorizaci贸n de AWS.

    **Soluciones:**

    1. **Verifique su ID de cuenta:** Verifique que emple贸 `253490767857` (no `754728514883`) en la pol铆tica de confianza. El ID de cuenta de integraci贸n en la nube (`754728514883`) es diferente del ID de cuenta de automatizaci贸n de flujo de trabajo.
    2. **Verificar ID externo:** Confirme que el ID externo en su pol铆tica de confianza coincide exactamente con el ID de su cuenta de New Relic (que se encuentra en [la configuraci贸n de la cuenta](/docs/accounts/accounts-billing/account-structure/account-id)).
    3. **Revisa las licencias:** Cerci贸rate de que tu rol o usuario de IAM tenga las licencias espec铆ficas de AWS que requiere tu flujo de trabajo. Consulta la tabla de [licencias de AWS necesarios](/docs/workflow-automation/setup-and-configuration/set-up-aws-credentials#required-aws-permissions).
    4. **Prueba con la CLI de AWS:** Ejecuta `aws sts assume-role` localmente para verificar que el rol sea asumible:
       ```bash
       aws sts assume-role \
       --role-arn "arn:aws:iam::YOUR_ACCOUNT:role/NewRelicWorkflowAutomationRole" \
       --role-session-name "TestSession" \
       --external-id "YOUR_NR_ACCOUNT_ID"
       ```
  </Collapser>
</CollapserGroup>

### &quot; tokenno v谩lido&quot; o credenciales caducadas

**Problema:** el flujo de trabajo falla con errores de vencimiento token.

**Soluciones:**

1. **Para el token de sesi贸n:** compruebe la timestampde expiraci贸n; el token de sesi贸n suele durar entre 1 y 12 horas. Genera nuevos antes de que caduquen usando:
   ```bash
   aws sts assume-role \
     --role-arn "arn:aws:iam::YOUR_ACCOUNT:role/YOUR_ROLE" \
     --role-session-name "WorkflowAutomationSession"
   ```
2. **Para las claves de acceso:** Verifique que tanto el ID de la clave de acceso como la clave de acceso secreta est茅n almacenados correctamente en el administrador de secretos. Vuelva a comprobar los valores en [el explorador GraphiQL de NerdGraph](https://one.newrelic.com/nerdgraph-graphiql).
3. **Verifique la sintaxis de los secretos:** cerciorar de usar el formato `${{ :secrets:keyName }}`, no `${{ secrets.keyName }}`. El prefijo de dos puntos (`:secrets:`) es obligatorio.

### No encuentro mi rol ARN

**Problema:** Necesitas el ARN pero no puedes localizarlo en AWS.

**Soluci贸n:**

1. Inicia sesi贸n en la [consola de AWS IAM](https://console.aws.amazon.com/iam/)
2. Selecciona **Roles** en el men煤 de navegaci贸n.
3. Busque el nombre de su rol (ej., `NewRelicWorkflowAutomationRole`)
4. Seleccione el rol; el ARN aparece en la secci贸n Resumen.
5. El formato ARN es: `arn:aws:iam::<YOUR_AWS_ACCOUNT>:role/<ROLE_NAME>`

### flujo de trabajo no puede acceder a recursos espec铆ficos AWS

**Problema:** Tu rol tiene licencias, pero el flujo de trabajo a煤n no puede acceder a ciertos recursos.

**Soluciones:**

1. **Licencias a nivel de recurso:** Compruebe si su pol铆tica de IAM restringe el acceso a ARN de recursos espec铆ficos. Es posible que necesite agregar un comod铆n (`*`) para realizar pruebas y luego restringirlo a recursos espec铆ficos.
   ```json
   {
     "Effect": "Allow",
     "Action": "ec2:DescribeInstances",
     "Resource": "*"  // Change from specific ARN to * for testing
   }
   ```
2. **Pol铆ticas de control de servicios (SCP):** Si se encuentra en una organizaci贸n de AWS, las SCP podr铆an bloquear ciertas acciones. P贸ngase en contacto con su administrador de AWS para revisar las pol铆ticas de la organizaci贸n.
3. **Error de regi贸n:** cerciorar de que sus licencias de IAM especifiquen la regi贸n correcta de AWS donde se encuentran sus recursos. Actualiza el par谩metro `awsRegion` del flujo de trabajo para que coincida con la ubicaci贸n de tu recurso.

## Problemas de ejecuci贸n del flujo de trabajo

### Referencia de resoluci贸n r谩pida de problemas

Emplee esta tabla para un diagn贸stico r谩pido de problemas comunes en el flujo de trabajo:

| **S铆ntoma**                                                          | **Controlar**                                                       | **Soluci贸n**                                                                            |
| -------------------------------------------------------------------- | ------------------------------------------------------------------- | --------------------------------------------------------------------------------------- |
| El flujo de trabajo falla en un paso espec铆fico.                     | Consulte los logs de ejecuci贸n para ver el mensaje de error.        | Corrija la configuraci贸n, las credenciales o los datos de entrada para esa acci贸n.      |
| El flujo de trabajo se ejecuta, pero produce resultados incorrectos. | Verificar el paso de datos entre pasos                              | Verificar la sintaxis de la plantilla `${{ .steps.name.outputs.field }}`                |
| El flujo de trabajo programado no se ejecuta.                        | Revisa el historial de ejecuci贸n para ver las ejecuciones omitidas. | Verificar la configuraci贸n de la programaci贸n y el estado del flujo de trabajo (Activo) |
| El flujo de trabajo agota el tiempo de espera.                       | Comprobar duraci贸n de la ejecuci贸n                                  | Reducir la frecuencia de las votaciones o dividirlos en flujos de trabajo m谩s peque帽os  |
| Los cambios no surten efecto.                                        | Consulta el historial de versiones                                  | Actualizar las ejecuciones programadas para usar la nueva versi贸n                       |

Para obtener instrucciones detalladas sobre c贸mo ver los logs y el historial de ejecuci贸n, consulte [Monitorear las ejecuciones del flujo de trabajo](/docs/workflow-automation/create-a-workflow-automation/managing-workflow#monitor-runs).

### El flujo de trabajo se muestra con el estado &quot;Fallido&quot;.

**Problema:** Aparece un flujo de trabajo con el estado Fallido en el dashboard.

**Soluciones:**

1. **Consulta el historial de ejecuci贸n**:

   * Vaya a **[one.newrelic.com](https://one.newrelic.com) &gt; All Capabilities &gt; Workflow Automation**
   * Haz clic en el nombre del flujo de trabajo
   * Consulta **Run history** para ver qu茅 ejecuci贸n fall贸.

2. **Revisar los logs de ejecuci贸n**:

   * Haz clic en **View logs** de la ejecuci贸n fallida para identificar la acci贸n espec铆fica que fall贸.
   * Busque el mensaje de error que indique la causa ra铆z.

3. **Causas comunes**:

   * **Credenciales no v谩lidas**: token caducado, sintaxis de secretos incorrecta o claves secretas err贸neas.
   * **Licencias faltantes**: Licencias insuficientes AWS IAM, 谩mbitos token de bots de Slack o acceso a API
   * **Cambios en los recursos objetivo**: Se eliminaron instancias EC2, se eliminaron canales de Slack o se renombr贸 la base de datos.
   * **Se superaron los l铆mites de frecuenciaAPI **: Demasiadas requests a servicios externos (AWS, Slack, etc.).
   * **Tiempos de espera de la red**: Las API externas tardan demasiado en responder.

4. **Solucionar y volver a ejecutar**: Luego de resolver el problema, active manualmente el flujo de trabajo empleando la [API StartWorkflowRun](/docs/workflow-automation/workflow-automation-apis/start-workflow-run) para verificar que funciona.

### La ejecuci贸n del flujo de trabajo tarda demasiado.

**Problema:** La ejecuci贸n del flujo de trabajo excede la duraci贸n o el tiempo de espera esperados.

**Soluciones:**

1. **Revisar la secuencia de acciones**: Consultar los logs para identificar las acciones lentas. Busque acciones con tiempos de ejecuci贸n superiores a 30 segundos.

2. **Optimizar consultas**: Si emplea consultas NRQL, optim铆celas para obtener un mejor rendimiento:

   * Agrega rangos de tiempo espec铆ficos en lugar de consultar todos los datos.
   * Emplee `LIMIT` para reducir el tama帽o del conjunto de resultados
   * Filtrar tempranamente con cl谩usulas `WHERE`

3. **Compruebe las API externas**: Las respuestas lentas de los servicios integrados (AWS, Slack) pueden retrasar la ejecuci贸n. Pruebe el tiempo de respuesta API por separado.

4. **Considere los l铆mites del flujo de trabajo**: revise [los l铆mites del flujo de trabajo](/docs/workflow-automation/limitations-and-faq/workflow-limits) para las restricciones de tiempo de espera (normalmente 15 minutos por flujo de trabajo).

5. **Divida el flujo de trabajo m谩s peque帽o**: divida el flujo de trabajo complejo en automatizaciones m谩s peque帽as y enfocadas que puedan ejecutar en paralelo.

### Los cambios en el flujo de trabajo no surten efecto.

**Problema:** Editaste un flujo de trabajo, pero los cambios no se aplican cuando se ejecuta.

**Soluciones:**

1. **Verifique que almacen贸**: Compruebe que hizo clic en **Save** luego de editar la configuraci贸n del flujo de trabajo.

2. **Comprueba la versi贸n**:

   * Ir a los detalles del flujo de trabajo
   * Haz clic en la pesta帽a **Version history**.
   * Cerci贸rate de que tus 煤ltimos cambios aparezcan como una nueva versi贸n.
   * Verifique que esta versi贸n est茅 marcada como activa.

3. **Actualizar ejecuciones programadas**: Si el flujo de trabajo se ejecuta seg煤n una programaci贸n, actualice la programaci贸n para usar la nueva versi贸n:

   * Vaya a **[one.newrelic.com](https://one.newrelic.com) &gt; All Capabilities &gt; Workflow Automation**
   * Encuentra carreras programadas
   * Actualiza el cronograma para que haga referencia a la nueva versi贸n del flujo de trabajo.

4. **Borrar cach茅**: El almacenamiento en cach茅 Browser podr铆a mostrar una configuraci贸n antigua; actualice la p谩gina manualmente (Ctrl+Shift+R o Cmd+Shift+R).

## Problemas con dashboard de flujo de trabajo

### No puedo encontrar un flujo de trabajo en el dashboard

**Problema:** Un flujo de trabajo que creaste no aparece en la lista dashboard.

**Soluciones:**

1. **Comprobar filtros**:

   * Haz clic en el men煤 desplegable del filtro.
   * Seleccione &quot;Todos&quot; para los filtros de estado
   * Limpiar la barra de b煤squeda

2. **Verificar cuenta**: Confirme que inici贸 sesi贸n en la cuenta correcta de New Relic donde se cre贸 el flujo de trabajo. Comprueba el selector de cuentas en la esquina superior derecha.

3. **Verificar licencias**: cerciorar de que su rol de usuario tenga acceso para ver el flujo de trabajo. Contacta con tu administrador de New Relic si necesitas licencias de acceso al flujo de trabajo.

4. **Actualiza la p谩gina**: El almacenamiento en cach茅 Browser a veces puede ocultar los cambios recientes. Prueba a realizar una actualizaci贸n completa (Ctrl+Shift+R o Cmd+Shift+R).

### No se puede eliminar un flujo de trabajo

**Problema:** La opci贸n Eliminar aparece deshabilitada o la eliminaci贸n falla.

**Soluciones:**

1. **Verificar licencias**: Verifique que su rol de usuario tenga licencias de eliminaci贸n para flujo de trabajo. Si es necesario, p贸ngase en contacto con el administrador de su cuenta.

2. **Detener ejecuciones programadas**: Cancele cualquier ejecuci贸n programada activa antes de eliminarla:

   * Navegue hasta los detalles del flujo de trabajo
   * Ve a la pesta帽a **Scheduled runs**
   * Cancela todos los horarios activos

3. **Comprobar dependencia**: Algunos flujos de trabajo no se pueden eliminar si otras automatizaciones dependen de ellos. Comprobar si el flujo de trabajo es referenciado por:

   * Otro flujo de trabajo que lo llama
   * pol铆tica de alertas que lo desencadenan
   * Sistemas externos que lo inician mediante API

4. **Contacta con el soporte**: Si el problema persiste luego de intentar lo anterior, contacta con [el soporte de New Relic](https://support.newrelic.com/) para obtener ayuda.

## Problemas espec铆ficos de integraci贸n

### La notificaci贸n de holgura no aparece

**Problema:** El flujo de trabajo se completa correctamente, pero los mensajes de Slack no aparecen.

**Soluciones:**

1. **Verifique el ID del canal**: cerciorar de usar el **ID** del canal de Slack (por ejemplo, `C01234ABCD`), no el nombre del canal. Encuentra el ID en Slack:

   * Haz clic derecho en el nombre del canal
   * Seleccionar **View channel details**.
   * Copia el ID del canal que aparece en la parte inferior.

2. **Comprobar licencias del bot**: Verifique que su bot de Slack tenga las siguientes licencias:

   * `chat:write` - Publicar mensajes
   * `channels:read` - Ver canales p煤blicos
   * `groups:read` - Ver canales privados (si corresponde)

3. **Verificar que el bot est茅 en el canal**: Agregar el bot al canal objetivo:

   * Escriba `/invite @YourBotName` en el canal
   * Confirma que el bot aparece en la lista de miembros

4. **Comprobar token en secretos**: Verifique que el token de Slack almacenado en el administrador de secretos sea correcto y no caduc贸.

### Las operaciones de AWS Systems Manager fallan.

**Problema:** Los documentos o comandos de automatizaci贸n de SSM no se ejecutan.

**Soluciones:**

1. **Verifique las licencias de SSM**: Cerciorar de que el rol de IAM tenga estas licencias:
   ```json
   {
     "Effect": "Allow",
     "Action": [
       "ssm:CreateDocument",
       "ssm:DeleteDocument",
       "ssm:StartAutomationExecution",
       "ssm:GetAutomationExecution"
     ],
     "Resource": "*"
   }
   ```
2. **Comprobar agente SSM**: Verifique que las instancias EC2 de destino tengan el agente SSM instalado y en ejecuci贸n:
   ```bash
   aws ssm describe-instance-information --region us-east-1
   ```
3. **Verificar perfil de instancia**: Las instancias EC2 necesitan un perfil de instancia IAM con licencias SSM para ejecutar comandos.
4. **Comprobar que el documento existe**: Si emplea un documento SSM existente, verifique que exista en su cuenta y regi贸n de AWS.

## Problemas espec铆ficos de la plantilla

### No se encontr贸 el GUID de la entidad.

**Problema:** Las plantillas fallan con errores `Entity not found`.

**Soluciones:**

1. **Encuentra el GUID de entidad correcto**:

   * Ve a la p谩gina del recurso monitorear en New Relic.
   * Comprueba la URL o los metadatos de la entidad para obtener el GUID.
   * Emplee [la b煤squeda de entidades](/docs/new-relic-solutions/new-relic-one/core-concepts/what-entity-new-relic#find) para localizar entidades

2. **Verifica que la entidad exista en la cuenta correcta**: Confirma que est谩s empleando la entidad de la misma cuenta donde se desarrolla el flujo de trabajo.

3. **Confirmar datos de reportes de la entidad**: Compruebe que la entidad muestre ****reciente; es posible que se elimin贸 una entidad obsoleta.

4. **Para entidad AWS **: Cerciorar de que [la integraci贸n](/docs/infrastructure/amazon-integrations/get-started/introduction-aws-integrations) est茅 activa

<Callout variant="tip">
  **Los GUID de entidad son espec铆ficos de cada cuenta.** Mover el flujo de trabajo entre cuentas requiere actualizar todos los GUID de la entidad.
</Callout>

### La consulta NRQL no devuelve resultados

**Problema:** Las plantillas que emplean NRQL consultan completamente pero devuelven conjuntos de datos vac铆os.

**Soluciones:**

1. **Prueba la consulta primero**: Emplea [el generador de consultas](/docs/query-your-data/explore-query-data/query-builder/introduction-query-builder) para validar la consulta antes de agregarla a las plantillas.

2. **Verifique el tipo de datos y los nombres de los eventos**:

   * Use `FROM Transaction`, no `FROM Transactions`
   * Comprobar que los nombres de los atributos coincidan exactamente (distinguiendo entre may煤sculas y min煤sculas)

3. **Ajustar rangos de tiempo**: Para datos dispersos, ampliar la ventana de tiempo:

   * Agregue `SINCE 1 hour ago` para datos recientes
   * Emplee `SINCE 1 day ago` para tendencias

4. **Simplifica y prueba de forma incremental**: comienza con una consulta b谩sica y agrega filtros uno a la vez.

5. **Comprobar [la sintaxis NRQL](/docs/query-your-data/nrql-new-relic-query-language/get-started/introduction-nrql-new-relics-query-language)**: Verificar que la estructura de la consulta cumpla con los requisitos NRQL.

### Falla el despliegue de la plantilla

**Problema:** La plantilla no se despliega o muestra errores durante el despliegue.

**Soluciones:**

1. **Verifique todos los datos requeridos**: Cerciorar de completar todos los campos obligatorios (credenciales, GUID, consulta).
2. **Verificar formato de credenciales**: Los secretos deben usar el formato `${{ :secrets:keyName }}` con el prefijo de dos puntos.
3. **Prueba las credenciales de forma independiente**: Antes de implementar, prueba las credenciales AWS con la CLI AWS y el token de Slack en APIde Slack.
4. **Revisa los requisitos de la plantilla**: Cada plantilla enumera requisitos previos espec铆ficos; verifica que se cumplan todos.
5. **Compruebe si hay caracteres especiales**: Algunos campos (nombres de canales, consulta) pueden presentar problemas con caracteres especiales; emplee caracteres alfanum茅ricos siempre que sea posible.

### Aprobaci贸n flujo de trabajo no responde

**Problema:** Las plantillas que requieren aprobaci贸n de Slack (reversi贸n de API Gateway, cambio de tama帽o de EC2) no detectan reacciones.

**Soluciones:**

1. **Verificar los 谩mbitos token del bot**:

   * `reactions:read` - Requerido para detectar reacciones de emojis
   * `chat:write` - Obligatorio publicar mensajes de aprobaci贸n

2. **Formato de reacci贸n**: Emplee el emoji exacto especificado en el flujo de trabajo (normalmente  para aprobar,  para rechazar).

3. **Verifique la configuraci贸n de tiempo de espera**: requests de aprobaci贸n caducan luego del tiempo de espera configurado (normalmente de 5 a 10 minutos).

4. **Cerci贸rate de que el bot pueda leer los mensajes**: El bot debe estar en el canal y tener licencia para leer el historial de mensajes.

5. **Prueba con aprobaci贸n simple**: Crea un flujo de trabajo de prueba con solo l贸gica de aprobaci贸n para aislar el problema.

### Problemas de administraci贸n de instancias EC2

**Problema:** La plantilla EC2 no puede redimensionar ni gestionar la instancia.

**Soluciones:**

1. **Verifique [CloudWatch Metric Streams](/install/aws-cloudwatch/) est茅 configurado**: Requerido para las m茅tricas de EC2 en tiempo real.
2. **Marque [la integraci贸n de monitoreo EC2](/docs/infrastructure/amazon-integrations/aws-integrations-list/aws-ec2-monitoring-integration/#activate) activa**: garantiza que los datos de la instancia fluyan a New Relic
3. **Confirmar estado de la instancia**: la instancia debe estar en estado `running` o `stopped` ; los estados de transici贸n (pendiente, deteniendo) provocan fallos.
4. **Verifique la compatibilidad del tipo de instancia**: no todos los tipos de instancia admiten todas las operaciones de cambio de tama帽o; consulte [la documentaci贸n del tipo de instanciaAWS](https://aws.amazon.com/ec2/instance-types/)
5. **Comprobar licencias de inicio/parada**: el rol de IAM necesita `ec2:StopInstances` y `ec2:StartInstances` adem谩s de `ec2:ModifyInstanceAttribute`

### La plantilla de an谩lisis JSON no registra los datos.

**Problema:** La plantilla de an谩lisis JSON se ejecuta correctamente, pero no aparecen datos en los logs New Relic.

**Soluciones:**

1. **Verificar extremos de API**: Pruebe la URL de la p谩gina de estado en un navegador; cerciorar de que devuelve un JSON v谩lido.
2. **Comprobar la estructura JSON**: La plantilla espera un formato espec铆fico; verificar que los campos de estado del componente coincidan con la estructura esperada.
3. **Revisar los filtros de log**: Cerciorar de que la acci贸n de registro emplee el tipo de evento y el atributo correctos.
4. **Prueba con un extremo simple**: Usa un extremo JSON b谩sico (como `https://httpbin.org/json`) para verificar que la mec谩nica de plantillas funciona.
5. **Comprobar licencias de la cuenta**: Verificar que el flujo de trabajo tenga licencia para escribir logs en New Relic.

## Pr贸ximos pasos

Si sigues teniendo problemas luego de probar estas soluciones:

* **[Foro de la comunidad de automatizaci贸n de flujos de trabajo](https://discuss.newrelic.com/)**: Haz preguntas y obt茅n ayuda de otros usuarios.
* **[Soporte de New Relic](https://support.newrelic.com/)**: Contacta con soporte para problemas espec铆ficos de tu cuenta.
* **[flujo de trabajo mejores pr谩cticas](/docs/workflow-automation/limitations-and-faq/workflow-best-practices)**: Aprenda patrones para un flujo de trabajo confiable
* **[L铆mites del flujo de trabajo](/docs/workflow-automation/limitations-and-faq/workflow-limits)**: Comprender las restricciones y cuotas del sistema.