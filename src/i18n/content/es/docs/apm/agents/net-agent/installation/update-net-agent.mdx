---
title: Actualizar el agente .NET
tags:
  - Agents
  - NET agent
  - Installation
metaDescription: 'For New Relic .NET agent (Framework or Core): how to update the .NET agent.'
freshnessValidatedDate: never
translationType: machine
---

Cómo actualizar el agente APM .NET.

## Verifique la versión de su agente .NET [#your_version]

1. Consulte las [notas de la versión](/docs/releases/dotnet) para encontrar la última versión del agente.

2. Verifique la versión del agente .NET que tiene instalado actualmente usando

   <DNT>
     **Windows Programs and Features**
   </DNT>

   o usando su administrador de paquetes de Linux.

## Antes de que empieces [#before-start]

Hay varias formas de instalar el agente .NET, lo que significa que hay varias formas de actualizarlo. En este documento, nos centramos en los procedimientos de actualización para la instalación más sencilla, con el agente .NET instalado directamente en un host Windows o Linux.

Si tiene otras instalaciones, consulte estos documentos de instalación para esas configuraciones para obtener más contexto:

* [Aplicaciones web de Azure](/docs/apm/agents/net-agent/azure-installation/install-net-agent-azure-web-apps/#site-extention-update)
* Ventana acoplable: [para Windows](/install/dotnet/?deployment=windowsInstall&docker=yesDocker) | para [linux](/install/dotnet/?deployment=linux&docker=yesDocker)
* [Nuget](/docs/apm/agents/net-agent/install-guides/install-net-agent-using-nuget)

## Instalaciones de Windows y Linux [#windows-linux]

Siga las instrucciones de actualización para su agente:

* [Windows](#updating_net)
* [Linux](#updating_net_core)

## Actualizar el agente .NET (Windows) [#updating_net]

<Callout variant="important">
  Antes de actualizar:

  * La actualización del agente requiere

    <DNT>
      **Administrator**
    </DNT>

    derechos en su grupo de administración de Windows. Para obtener más información, consulte la [documentación de permisos](/docs/apm/agents/net-agent/getting-started/net-agent-compatibility-requirements-net-framework/#user-rights).

  * Si la versión de su agente es inferior a 7.0 o está utilizando la versión 4.0 o inferior de .NET framework , consulte [Actualización del agente .NET legacy](#updating_older_net).

  * Si su aplicación está alojada en IIS, asegúrese de

    <DNT>
      **stop IIS**
    </DNT>

    antes de actualizar el agente .NET.
</Callout>

<CollapserGroup>
  <Collapser
    id="update-framework-standard"
    title="Instalación estándar"
  >
    1. Asegúrese de tener [instalado .NET 4.5 o superior en su sistema](/docs/apm/agents/net-agent/getting-started/net-agent-compatibility-requirements-net-framework/#net-version).

    2. Detener IIS.

    3. Descargue y ejecute el paquete de instalación MSI apropiado para su [arquitectura](/docs/apm/agents/net-agent/getting-started/net-agent-compatibility-requirements-net-framework/#architecture):

       * [Instalador de 32 bits](https://download.newrelic.com/dot_net_agent/latest_release/NewRelicDotNetAgent_x86.msi)
       * [Instalador de 64 bits](https://download.newrelic.com/dot_net_agent/latest_release/NewRelicDotNetAgent_x64.msi)

    4. Una vez finalizado el paquete del instalador, inicie IIS.
  </Collapser>
</CollapserGroup>

## Actualizar el agente .NET (Linux) [#updating_net_core]

<Callout variant="important">
  Para las versiones 10.0.0 o superiores del agente .NET, el nombre del paquete es `newrelic-dotnet-agent`. Para las versiones 9.9.0 o inferiores del agente .NET, el nombre del paquete es `newrelic-netcore20-agent`. El resto de este documento hace referencia a `newrelic-dotnet-agent`; reemplácelo con el nombre anterior si tiene instalada una versión anterior del agente. Cuando actualice a la versión 10.0.0 o superior desde una inferior, deberá cambiar las variables de entorno `CORECLR_NEWRELIC_HOME` y `CORECLR_PROFILER_PATH` debido al cambio de nombre del paquete.
</Callout>

Utilice uno de los siguientes métodos para actualizar a la última versión del agente .NET de New Relic:

<CollapserGroup>
  <Collapser
    id="updating-core-zip"
    title="archivo tar.gz o deb"
  >
    1. Cierre su(s) aplicación(es).
    2. Descargue el archivo apropiado para su [arquitectura](/docs/apm/agents/net-agent/getting-started/net-agent-compatibility-requirements-net-core/#architecture) desde el [sitio de descarga](https://download.newrelic.com/dot_net_agent/latest_release/).
    3. Instale el archivo en su ubicación de instalación preferida. Para el archivo tar.gz: extraiga el archivo zip encima de los archivos existentes.
    4. Inicie su(s) aplicación(es).
  </Collapser>

  <Collapser
    id="yum"
    title="yum (CentOS, Oracle Linux o RHEL)"
  >
    1. Cierre su(s) aplicación(es).

    2. Utilice lo siguiente para actualizar el agente:

       ```bash
       sudo yum update newrelic-dotnet-agent
       ```

    3. Inicie su(s) aplicación(es).
  </Collapser>

  <Collapser
    id="apt"
    title="apt (Debian, Linux Mint o Ubuntu)"
  >
    1. Cierre su(s) aplicación(es).

    2. Utilice lo siguiente para obtener una lista de actualizaciones disponibles e instalarlas:

       ```bash
       sudo apt-get update && sudo apt-get install --only-upgrade newrelic-dotnet-agent
       ```

    3. Inicie su(s) aplicación(es).
  </Collapser>

  <Collapser
    id="rpm"
    title="rpm (CentOS, Oracle Linux o RHEL)"
  >
    1. Cierre su(s) aplicación(es).

    2. Descargue el archivo rpm apropiado para su [arquitectura](/docs/apm/agents/net-agent/getting-started/net-agent-compatibility-requirements-net-core/#architecture) desde el [sitio de descarga](https://download.newrelic.com/dot_net_agent/latest_release/).

    3. Utilice lo siguiente para actualizar el agente:

       ```bash
       sudo rpm -Uvh FILE_NAME.rpm
       ```

    4. Inicie su(s) aplicación(es).
  </Collapser>
</CollapserGroup>

## Actualizar agente de .NET framework anterior (inferior a 7.0) [#updating_older_net]

Si está pensando en actualizar una versión del agente de .NET framework inferior a 7.0, revise las siguientes notas. Para ver la versión del agente que tiene, consulte [Comprobar la versión del agente](#your_version). Para obtener una lista completa de los cambios del agente, consulte las [notas de la versión de .NET](/docs/release-notes/agent-release-notes/net-release-notes).

<CollapserGroup>
  <Collapser
    id="old-framework-versions"
    title="Detalles de la versión del agente de .NET framework legacy"
  >
    <Callout variant="important">
      Para implementar una aplicación dirigida a .NET framework 4.0 o anterior, debe utilizar una versión del agente de .NET framework anterior a 7.0. Consulte [soporte para .NET Frameworks 4.0 o anterior](/docs/apm/agents/net-agent/troubleshooting/technical-support-net-framework-40-or-lower/) para obtener más información.
    </Callout>

    <table>
      <thead>
        <tr>
          <th style={{ width: "150px" }}>
            Si la versión es inferior a...
          </th>

          <th>
            Hacer esto...
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td id="70">
            7.0
          </td>

          <td>
            La versión 7.0 y superior del agente de .NET framework admite aplicaciones que tienen como objetivo .NET framework 4.5 o superior.
          </td>
        </tr>

        <tr>
          <td id="612">
            6.12
          </td>

          <td>
            Las versiones 6.12 o superiores no son compatibles con Windows Server 2003. Si necesita Windows Server 2003, utilice las versiones 6.11 o inferiores. Para obtener más información, obtenga soporte en [support.newrelic.com](https://support.newrelic.com) o [descargue el agente](https://download.newrelic.com/).
          </td>
        </tr>

        <tr>
          <td id="611">
            6.11
          </td>

          <td>
            Anteriormente, [la base de datos](/docs/apm/apm-ui-pages/monitoring/databases-page-view-operations-throughput-response-time/) y las llamadas [externas](/docs/apm/apm-ui-pages/monitoring/external-services/external-services-intro/) que ocurrían fuera de una transacción generaban métricas que se podían ver en sus respectivas páginas en la UI de APM. Ahora estas métricas no se mostrarán. En una aplicación no web estas llamadas se pueden "envolver" en una [transacción personalizada](/docs/apm/agents/net-agent/custom-instrumentation/create-transactions-xml-net/) para poder ver su métrica.
          </td>
        </tr>

        <tr>
          <td id="60">
            6.0
          </td>

          <td>
            Para obtener [soporte asíncrono](/docs/apm/agents/net-agent/custom-instrumentation/create-transactions-xml-net/) si la versión de su agente .NET es anterior a la 6.0, haga lo siguiente según corresponda:

            1. Elimine la siguiente configuración de la aplicación en `newrelic.config` si existe:

               ```xml
               <appSettings>
                 <add key="AsyncMode" value="false" />
               </appSettings>
               ```

            2. Asegúrese de que el host de su aplicación tenga instalado .NET 4.5 o superior.

            3. Dígale a .NET que use el nuevo pipeline de procesamiento de solicitudes ASP agregando las siguientes líneas a su `web.config`:

               ```xml
               <configuration>
                 <appSettings>
                   <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
                 </appSettings>
               <configuration>
               ```

               O

               Especifique que la versión de .NET framework sea 4.5.2 o superior agregando las siguientes líneas a `web.config`:

               ```xml
               <configuration>
                 <system.web>
                   <httpRuntime targetFramework="YOUR_TARGET_NET_VERSION" /> 
                 </system.web>
               <configuration>
               ```
          </td>
        </tr>

        <tr id="50">
          <td>
            5.0 (para API web)
          </td>

          <td>
            Para ver la transacción de API web, debe optar por una [corrección de errores de .NET framework ](https://devblogs.microsoft.com/dotnet/all-about-httpruntime-targetframework/)si se aplican las siguientes condiciones:

            * Utiliza ASP.NET Web API v1.

            * Su aplicación tiene como objetivo el agente .NET framework versión 4.0. (Este problema no afecta a la versión 4.5 o superior).

            * Está actualizando desde el agente de .NET framework a la versión 5.0 o superior.

              Para aplicar la solución:

            1. Asegúrese de que el host de su aplicación tenga instalado .NET 4.5.

            2. Añade este `appSetting` a tu <DNT>**web.config**</DNT>:

               ```xml
               <configuration>
                 <appSettings>
                   <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
                 </appSettings>
               <configuration>
               ```

               Para obtener más información sobre este error de .NET framework , consulte:

               * [¿Por qué HttpContext.Current es nulo después de esperar?](https://stackoverflow.com/questions/18383923/why-is-httpcontext-current-null-after-await)
               * [Todo sobre httpRuntime targetFramework](https://devblogs.microsoft.com/dotnet/all-about-httpruntime-targetframework/).
          </td>
        </tr>

        <tr id="500">
          <td>
            5.0 (para métrica)
          </td>

          <td>
            Las métricas que no forman parte de una transacción no se mostrarán en la UI. <DNT>**Exception:**</DNT> Puede ver [la base de datos](/docs/apm/apm-ui-pages/monitoring/databases-page-view-operations-throughput-response-time/) y las métricas [externas](/docs/apm/apm-ui-pages/monitoring/external-services/external-services-intro/) en sus respectivas páginas en la UI de APM. Otras métricas similares (como los métodos instrumentados) se pueden hacer visibles "envolviéndolas" en una [transacción personalizada](/docs/apm/agents/net-agent/custom-instrumentation/create-transactions-xml-net/).

            Es posible que sea necesario actualizar su [instrumentación personalizada](/docs/apm/agents/net-agent/custom-instrumentation/introduction-net-custom-instrumentation/) para utilizar [transacciones personalizadas](/docs/apm/agents/net-agent/custom-instrumentation/create-transactions-xml-net/). Para ver un ejemplo de lo que verá en la UI, consulte esta [publicación de la comunidad técnica en línea de New Relic](https://discuss.newrelic.com/t/change-in-non-web-transaction-reporting-with-version-5-x/28721).
          </td>
        </tr>

        <tr id="44">
          <td>
            4.4
          </td>

          <td>
            New Relic mejoró el nombre de las transacciones. Sin embargo, estos cambios pueden afectar los nombres de las transacciones de las métricas existentes, incluida [la clave de transacción](/docs/apm/transactions/key-transactions/introduction-key-transactions/), la métrica "alerta sobre cualquier cosa" y [la consulta](/docs/query-your-data/explore-query-data/query-builder/use-advanced-nrql-mode-query-data/) basada en los nombres de las transacciones. Debe volver a crear esta configuración utilizando el nuevo nombre de transacción después de la actualización.
          </td>
        </tr>

        <tr id="42">
          <td>
            4.2
          </td>

          <td>
            New Relic eliminó la transacción HTTP "externa" ("`.svc`") para la aplicación WCF alojada con el modo de compatibilidad `asp.net` deshabilitado. Ahora solo se informa la transacción WCF.

            Este cambio da como resultado datos de rendimiento más precisos. También evita que se informen errores de código de estado HTTP por transacción WCF fallida.
          </td>
        </tr>

        <tr id="41">
          <td>
            4.1
          </td>

          <td>
            New Relic implementó almacenamiento de datos métricos para traza SQL. Los nombres métricos para la actividad de la base de datos se actualizaron para informar bajo almacenamiento de datos.
          </td>
        </tr>

        <tr id="40">
          <td>
            4.0
          </td>

          <td>
            La aplicación MVC2 ya no genera segmentos específicos de MVC ni tiene nombres de transacciones basados en rutas MVC.
          </td>
        </tr>

        <tr id="30">
          <td>
            3.0
          </td>

          <td>
            El agente .NET de New Relic pasó a depender de .NET 3.5. Su aplicación aún puede tener como objetivo .NET 2.0, pero debe tener .NET 3.5 instalado en la computadora en la que se ejecuta el agente.
          </td>
        </tr>

        <tr id="220">
          <td>
            2.20
          </td>

          <td>
            La versión 2.19.3.0 fue la última versión del agente .NET que requirió la API de llamada `GetBrowserTimingFooter()` y `GetBrowserTimingHeader()` para <InlinePopover type="browser"/>. En la versión del agente 2.20.24.0 o superior, solo necesita llamar `GetBrowserTimingHeader()`. `GetBrowserTimingFooter()` no tiene ningún efecto. <DNT>**Recommendation:**</DNT> Elimine estas referencias de su código.
          </td>
        </tr>

        <tr id="29">
          <td>
            2.9
          </td>

          <td>
            El archivo de configuración cambió de `newrelic.xml` a `newrelic.config`. El instalador del agente más nuevo intenta convertir `newrelic.xml` (si está presente) en `newrelic.config`.
          </td>
        </tr>

        <tr id="22">
          <td>
            2.2 o anterior
          </td>

          <td>
            Para actualizar desde una versión del agente .NET inferior a 2.2, debe desinstalar el agente antiguo antes de instalar la nueva versión. Siga los procedimientos estándar para su versión de Windows para desinstalar el agente. Es posible que su sistema operativo requiera un reinicio.

            Es posible que experimente `cocreateinstance` errores con <DNT>**services.exe**</DNT> cuando actualice un instalador antiguo (2.1.3.494 o anterior) o realice otros cambios en las variables de entorno. Para resolver este problema, consulte [la documentación de Microsoft](https://learn.microsoft.com/en-us/windows/win32/procthread/changing-environment-variables).
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>
