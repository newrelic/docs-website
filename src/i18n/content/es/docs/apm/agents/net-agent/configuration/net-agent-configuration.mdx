---
title: Configuración del agente .NET
tags:
  - Agents
  - NET agent
  - Configuration
metaDescription: 'How to configure the New Relic .NET agent using newrelic.config, including startup and instrumentation options, and disabling unwanted features.'
freshnessValidatedDate: never
translationType: machine
---

Podrá configurar nuestro agente .NET para adaptarlo a su entorno después de [crear una cuenta New Relic](https://newrelic.com/signup) (es gratis, para siempre) e [instalar el agente .NET](/install/dotnet).

## Descripción general de la configuración [#config-overview]

Las opciones de configuración del agente APM le permiten controlar algunos aspectos de cómo se comporta el agente. Algunas de estas opciones de configuración son parte del proceso de instalación básico (como configurar su clave de licencia y el nombre de la aplicación), pero la mayoría son configuraciones más avanzadas, como establecer un nivel de logs, configurar el acceso al host proxy, excluir ciertos atributos y habilitar rastreo distribuido.

El agente .NET obtiene su configuración del archivo `newrelic.config` , que se genera como parte del [proceso de instalación](/docs/agents/net-agent/installation//install/dotnet-agent). De forma predeterminada, solo se crea un archivo `newrelic.config` global, pero también puede crear archivos `newrelic.config` locales de la aplicación para un control más preciso sobre un sistema de múltiples aplicaciones. Otras formas de configurar las opciones de configuración incluyen: usar variables de entorno o configurar la configuración del lado del servidor desde la UI. Para obtener más información sobre las distintas opciones de configuración y qué anula qué, consulte [Prioridad de las configuraciones de configuración](/docs/agents/net-agent/configuration/net-agent-configuration#config-options-precedence).

La compatibilidad con .NET framework y .NET Core utiliza las mismas opciones de configuración y tiene la misma característica APM, a menos que se indique lo contrario.

Si realiza cambios en el archivo de configuración y desea validar que esté en el formato correcto, puede compararlo con el archivo XSD (por ejemplo, en `C:\ProgramData\New Relic\.NET Agent\newrelic.xsd` para Windows) con cualquier validador XSD.

<Callout variant="important">
  <DNT>**For IIS**</DNT>: después de cambiar su archivo `newrelic.config` o `app.config` , realice un `IISRESET` desde un símbolo del sistema administrativo. Los ajustes del nivel de logs no requieren un reinicio.
</Callout>

## Métodos de configuración y niveles de prioridad. [#config-options-precedence]

Tras la instalación, el archivo de configuración del agente .NET (`newrelic.config`) se aplica a todas las aplicaciones de monitor, pero puede configurar el agente de otras maneras. A continuación se muestra un diagrama que muestra cómo las diferentes opciones de configuración tienen prioridad entre sí:

<img
  title="net-config-precedence-core.png"
  alt="New Relic .NET agent configuration settings precedence"
  src="/images/apm_diagram_net-agent-configuration-hierarchy.webp"
/>

<figcaption>
  Este diagrama explica el orden de prioridad de las diferentes formas en que puede configurar el agente .NET.
</figcaption>

A continuación se detallan los métodos de configuración que se muestran en el diagrama y sus niveles de prioridad:

<table>
  <thead>
    <tr>
      <th style={{ width: "230px" }}>
        <DNT>
          **.NET configuration**
        </DNT>
      </th>

      <th>
        <DNT>
          **Details and precedence**
        </DNT>
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `web.config` o `app.config` o `appsettings.json`
      </td>

      <td>
        Los ajustes de configuración establecidos en estos archivos tienen la máxima prioridad.

        Si el agente está deshabilitado en el `newrelic.config` local o global:

        * La configuración de `NewRelic.AgentEnabled` en `appsettings.json`

          <DNT>
            **will enable the agent**
          </DNT>

          .

        * La configuración `NewRelic.AgentEnabled` en un archivo `web.config` o `app.config`

          <DNT>
            **will be ignored**
          </DNT>

          .
      </td>
    </tr>

    <tr>
      <td>
        Variables de entorno
      </td>

      <td>
        Segunda prioridad más alta. Para obtener más información sobre estos, consulte [Variables de entorno .NET](#environment-variables).
      </td>
    </tr>

    <tr>
      <td>
        Configuración del lado del servidor
      </td>

      <td>
        Tercera prioridad más alta. Está disponible un número limitado de opciones [de configuración del lado del servidor](/docs/agents/manage-apm-agents/configuration/server-side-agent-configuration) ; las otras configuraciones provendrán de otras fuentes de configuración.
      </td>
    </tr>

    <tr id="local">
      <td>
        Aplicación local `newrelic.config`
      </td>

      <td>
        Cuarta precedencia más alta. Puede crear archivos `newrelic.config` de aplicación local para configurar aplicaciones individuales en un sistema de múltiples aplicaciones. Estos archivos de configuración locales anulan la configuración del archivo global `newrelic.config` .

        El agente busca archivos de configuración locales de la aplicación en los siguientes directorios, en este orden:

        * Un directorio especificado en su archivo `web.config` o `app.config` con la propiedad `NewRelic.ConfigFile`

        * El directorio raíz de la aplicación web (con `app.config` o `web.config`)

        * El directorio que contiene el archivo ejecutable de su aplicación.

          Tenga en cuenta que el archivo de configuración local de la aplicación debe estar completo y validarse con el archivo XSD (por ejemplo, en `C:\ProgramData\New Relic\.NET Agent\newrelic.xsd` para Windows).
      </td>
    </tr>

    <tr>
      <td>
        Predeterminado (global) `newrelic.config`
      </td>

      <td>
        Fuente predeterminada y prioridad más baja. Configurará todas las aplicaciones en un host en ausencia de otros archivos de configuración. El archivo de configuración global se encuentra en el directorio de inicio del agente New Relic: `%PROGRAMDATA%\New Relic\.NET Agent`
      </td>
    </tr>
  </tbody>
</table>

## Variables de entorno requeridas [#environment-variables]

Nuestro agente .NET se basa en variables de entorno para indicarle a .NET Common Language Runtime (CLR) que adjunte New Relic a sus procesos. Algunos [procedimientos de instalación del agente .NET](/docs/agents/net-agent/installation/new-relic-net-agent-install-introduction) (como el instalador MSI) configurarán automáticamente estas variables; algunos procedimientos requerirán que los configure manualmente.

<Callout variant="caution">
  Recomendación de seguridad: debe considerar qué usuario puede configurar las variables de entorno del sistema. También debe proteger las cuentas bajo las cuales se ejecuta su aplicación para evitar que las variables de entorno del usuario anulen las variables de entorno del sistema.
</Callout>

<CollapserGroup>
  <Collapser
    id="net-framework-env-variables"
    title="Variables de entorno framework .NET"
  >
    Para .NET framework, se requieren las siguientes variables:

    ```ini
    COR_ENABLE_PROFILING=1
    COR_PROFILER={71DA0A04-7777-4EC6-9643-7D28B46A8A41}
    NEWRELIC_INSTALL_PATH="INSERT_THE_PATH_TO_THE_AGENT_DIRECTORY"
    ```

    El instalador del agente .NET de Windows (.msi) los agregará a IIS de forma predeterminada o como variables de entorno de todo el sistema al habilitar `Instrument All`.

    Cuando utilice el instalador del agente .NET de Windows, asegúrese de que `NEWRELIC_INSTALL_PATH` esté configurado en `C:\Program Files\New Relic\.NET Agent\`. Aquí es donde se colocan las DLL del agente en el sistema.

    Para obtener más detalles sobre estas variables, así como valores correctos para otros escenarios de instalación, consulte [Comprender las variables de entorno del agente .NET](/docs/apm/agents/net-agent/other-installation/understanding-net-agent-environment-variables/).

    Al instalar el agente a través del paquete Nuget, el agente requiere [un conjunto diferente de variables de entorno](/docs/apm/agents/net-agent/install-guides/install-net-agent-using-nuget/#nuget-framework).
  </Collapser>

  <Collapser
    id="net-core-env-variables"
    title="Variables de entorno de .NET Core"
  >
    Para .NET Core, se requieren las siguientes variables:

    <DNT>
      **Linux:**
    </DNT>

    ```ini
    CORECLR_ENABLE_PROFILING=1
    CORECLR_PROFILER={36032161-FFC0-4B61-B559-F6C5D41BAE5A}
    CORECLR_NEWRELIC_HOME=path/to/agent/directory
    CORECLR_PROFILER_PATH="${CORECLR_NEWRELIC_HOME}/libNewRelicProfiler.so"
    ```

    <DNT>
      **Windows (MSI Installer):**
    </DNT>

    ```ini
    CORECLR_ENABLE_PROFILING=1
    CORECLR_PROFILER={36032161-FFC0-4B61-B559-F6C5D41BAE5A}
    NEWRELIC_INSTALL_PATH=C:\Program Files\New Relic\.NET Agent\
    CORECLR_NEWRELIC_HOME=C:\ProgramData\New Relic\.NET Agent\
    ```

    El instalador del agente Windows .NET los agregará a IIS de forma predeterminada o como variables de entorno de todo el sistema al habilitar `Instrument All`. Excepción: `CORECLR_ENABLE_PROFILING` debe configurarse manualmente para poder implementar una aplicación .NET Core no alojada en IIS. Consulte [Compatibilidad y requisitos de .NET framework](/docs/agents/net-agent/getting-started/net-agent-compatibility-requirements-net-framework) para la aplicación .NET framework .

    Para obtener más detalles sobre estas variables, así como valores correctos para otros escenarios de instalación, consulte [Comprender las variables de entorno del agente .NET](/docs/apm/agents/net-agent/other-installation/understanding-net-agent-environment-variables/).

    Al instalar el agente a través del paquete Nuget en Windows, el agente requiere un [conjunto diferente de variables de entorno](/docs/apm/agents/net-agent/install-guides/install-net-agent-using-nuget/#nuget-windows).
  </Collapser>
</CollapserGroup>

Si su sistema ha utilizado anteriormente servicios de monitoreo (que no son de New Relic), es posible que tenga un "conflicto de generador de perfiles" al intentar instalar y utilizar el agente de New Relic. Más detalles:

<CollapserGroup>
  <Collapser
    id="profiler-conflicts"
    title="Explicación del conflicto generador de perfiles"
  >
    El agente .NET de New Relic se basa en variables de entorno para indicarle a .NET Common Language Runtime (CLR) que cargue New Relic en sus procesos. Las variables de entorno relacionadas con la instalación son variables de Microsoft, no variables de New Relic. Pueden ser utilizados por otros perfiladores .NET y sólo se puede adjuntar un generador de perfiles a un proceso a la vez. Por esta razón, si ha utilizado productos de monitoreo de aplicación anteriores, puede tener [conflictos con el generador de perfiles](/docs/agents/net-agent/troubleshooting/profiler-conflicts).
  </Collapser>
</CollapserGroup>

Para obtener instrucciones de instalación específicas, consulte la [documentación de instalación del agente .NET](/docs/agents/net-agent/installation/new-relic-net-agent-install-introduction).

## Variables de entorno opcionales [#optional-environment-variables]

Algunas opciones de configuración en el agente .NET de New Relic se pueden configurar mediante variables de entorno como alternativa a configurarlas en un archivo de configuración. A continuación se muestra una lista de variables de entorno reconocidas por el agente .NET con valores de ejemplo.

```ini
NEW_RELIC_LICENSE_KEY=YOUR_LICENSE_KEY
NEW_RELIC_APP_NAME=Descriptive Name
MAX_TRANSACTION_SAMPLES_STORED=500
MAX_EVENT_SAMPLES_STORED=500
NEW_RELIC_DISTRIBUTED_TRACING_ENABLED=true
NEW_RELIC_SPAN_EVENTS_ENABLED=false
NEW_RELIC_SPAN_EVENTS_MAX_SAMPLES_STORED=2000
NEW_RELIC_INFINITE_TRACING_TRACE_OBSERVER_HOST=myhost.infinitetracing.com
NEW_RELIC_LABELS="foo:bar;zip:zap"
NEW_RELIC_PROCESS_HOST_DISPLAY_NAME=Custom Name
NEW_RELIC_HOST=gov-collector.newrelic.com
NEW_RELIC_PROXY_HOST=hostname
NEW_RELIC_PROXY_URI_PATH=path/to/something.aspx
NEW_RELIC_PROXY_PORT=5000
NEW_RELIC_PROXY_USER=YOUR_USER_NAME
NEW_RELIC_PROXY_PASS=YOUR_PROXY_PASSWORD
NEW_RELIC_PROXY_DOMAIN=mydomain.com
NEW_RELIC_PROXY_PASS_OBFUSCATED=YOUR_OBFUSCATED_PROXY_PASSWORD
NEW_RELIC_CONFIG_OBSCURING_KEY=YOUR_OBSCURING_KEY
NEW_RELIC_SEND_DATA_ON_EXIT=true
NEW_RELIC_SEND_DATA_ON_EXIT_THRESHOLD_MS=2000
NEW_RELIC_HIGH_SECURITY=true
NEW_RELIC_DISABLE_SAMPLERS=true
NEW_RELIC_LOG=MyApp.log
NEW_RELIC_LOG_ENABLED=true
NEWRELIC_LOG_LEVEL=info
NEW_RELIC_LOG_CONSOLE=true
NEWRELIC_PROFILER_LOG_DIRECTORY=path\to\a\directory # not configurable via config file
NEWRELIC_LOG_DIRECTORY=path\to\a\directory # Insert a directory where you want to put the agent and profiler logs. You can't set this directory for both agent and profiler logs in the configuration file.
NEW_RELIC_LOG_ROLLING_STRATEGY=day
NEW_RELIC_LOG_MAX_FILE_SIZE_MB=100
NEW_RELIC_LOG_MAX_FILES=2
NEW_RELIC_ERROR_COLLECTOR_IGNORE_ERROR_CODES=401, 403.18
NEW_RELIC_ERROR_COLLECTOR_EXPECTED_ERROR_CODES=401, 501-503
NEW_RELIC_APPLICATION_LOGGING_ENABLED=true
NEW_RELIC_APPLICATION_LOGGING_METRICS_ENABLED=true
NEW_RELIC_APPLICATION_LOGGING_FORWARDING_ENABLED=true
NEW_RELIC_APPLICATION_LOGGING_FORWARDING_CONTEXT_DATA_ENABLED=true
NEW_RELIC_APPLICATION_LOGGING_FORWARDING_CONTEXT_DATA_INCLUDE="myCustomAttribute1, myOtherCustomAttribute*"
NEW_RELIC_APPLICATION_LOGGING_FORWARDING_CONTEXT_DATA_EXCLUDE="myCustomAttribute2, myOtherCustomAttributeMoreSpecificName"
NEW_RELIC_APPLICATION_LOGGING_FORWARDING_MAX_SAMPLES_STORED=10000
NEW_RELIC_APPLICATION_LOGGING_FORWARDING_LOG_LEVEL_DENYLIST="debug, warn"
NEW_RELIC_APPLICATION_LOGGING_LOCAL_DECORATING_ENABLED=true
NEW_RELIC_ALLOW_ALL_HEADERS=true
NEW_RELIC_ATTRIBUTES_ENABLED=true
NEW_RELIC_ATTRIBUTES_INCLUDE=request.headers.*,foo.bar
NEW_RELIC_ATTRIBUTES_EXCLUDE=request.headers.cookie,request.headers.authorization
NEW_RELIC_UTILIZATION_DETECT_AWS=true
NEW_RELIC_UTILIZATION_DETECT_AZURE=true
NEW_RELIC_UTILIZATION_DETECT_GCP=true
NEW_RELIC_UTILIZATION_DETECT_PCF=true
NEW_RELIC_UTILIZATION_DETECT_DOCKER=true
NEW_RELIC_UTILIZATION_DETECT_KUBERNETES=true
NEW_RELIC_FORCE_NEW_TRANSACTION_ON_NEW_THREAD=true
NEW_RELIC_CODE_LEVEL_METRICS_ENABLED=true
NEW_RELIC_AI_MONITORING_ENABLED=true
NEW_RELIC_AI_MONITORING_RECORD_CONTENT_ENABLED=true
```

<CollapserGroup>
  <Collapser
    id="net-framework-32on64-env-variables"
    title="Admite aplicaciones de 32 bits en sistemas de 64 bits."
  >
    El instalador MSI de 64 bits para el agente .NET de New Relic instala automáticamente el conjunto del generador de perfiles de 32 bits junto con el conjunto de 64 bits y, a partir de la versión 10.16.0, habilita automáticamente la compatibilidad con IIS de 32 bits. Para aplicaciones no alojadas en IIS, puede configurar la variable de entorno requerida manualmente.

    ```ini
    COR_PROFILER_PATH_32="C:\Program Files (x86)\New Relic\.NET Agent\NewRelic.Profiler.dll"
    ```
  </Collapser>
</CollapserGroup>

Si está utilizando New Relic CodeStream para monitor el rendimiento de su IDE, es posible que también desee [asociar el repositorio con sus servicios](/docs/codestream/how-use-codestream/performance-monitoring#repo-association) y [asociar SHA de compilación o etiqueta de lanzamiento con errores](/docs/codestream/how-use-codestream/performance-monitoring#buildsha).

## Configuración Errors Inbox [#errors-inbox-configuration]

Configurar una de las siguientes etiquetas le ayudará a identificar qué versiones de su software están produciendo los errores.

* `NEW_RELIC_METADATA_SERVICE_VERSION` creará tags.service.version en los datos del evento que contienen la versión de su código que se desplegará, en muchos casos una versión semántica como 1.2.3, pero no siempre.
* `NEW_RELIC_METADATA_RELEASE_TAG `creará tags.releaseTag en los datos del evento que contienen la etiqueta de lanzamiento (como v0.1.209 o release-209).
* `NEW_RELIC_METADATA_COMMIT` creará tags.commit on event data containing the commit sha. Se puede utilizar el sha completo o sólo los primeros siete caracteres (por ejemplo, 734713b).

Una próxima versión de Errors Inbox rastreará automáticamente qué versiones de su software están produciendo errores. Todos los datos de la versión también se mostrarán en [CodeStream](/docs/codestream/how-use-codestream/performance-monitoring/#buildsha).

## Opciones de configuración, newrelic.config [#setup]

Emplee estas opciones para instalar y configurar su agente a través del archivo `newrelic.config` . El agente .NET admite las siguientes categorías de opciones de configuración:

* [Elemento de configuración](#configuration)
* [Elemento de servicio](#service)
* [Elemento clave que oscurece](#obscuring-key)
* [Elemento proxy](#proxy)
* [Elemento log](#log)
* [Elemento de aplicación (configuración)](#application-configuration)
* [Elemento de transmisión de datos](#data-transmission)
* [Nombre de host](#host-name)

### Elemento de configuración [#configuration]

El elemento raíz del documento de configuración es un elemento `configuration` .

```xml
<configuration xmlns="urn:newrelic-config"
  agentEnabled="true"
  maxStackTraceLines="50">
```

El elemento `configuration` admite el siguiente atributo:

<CollapserGroup>
  <Collapser
    id="config-agentEnabled"
    title="agentEnabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Habilite o deshabilite el agente New Relic.
  </Collapser>

  <Collapser
    id="config-maxStackTraceLines"
    title="maxStackTraceLines"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Entero
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `80`
          </td>
        </tr>
      </tbody>
    </table>

    El número máximo de marcos stack a trazar en cualquier volcado stack .
  </Collapser>
</CollapserGroup>

### Elemento de servicio [#service]

El primer hijo del elemento `configuration` es un elemento `service` . El elemento de servicio configura la conexión del agente al servicio New Relic.

```xml
<service licenseKey="YOUR_LICENSE_KEY"
  sendEnvironmentInfo="true"
  syncStartup="false"
  sendDataOnExit="false"
  sendDataOnExitThreshold="60000"
  autoStart="true"/>
```

El elemento `service` admite el siguiente atributo:

<CollapserGroup>
  <Collapser
    id="service-licenseKey"
    title={<>clave de licencia <strong>(obligatoria)</strong></>}
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Cadena
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            (ninguno)
          </td>
        </tr>
      </tbody>
    </table>

    Su [clave de licencia](/docs/apis/intro-apis/new-relic-api-keys/#ingest-license-key) de New Relic. New Relic utiliza la clave de licencia para hacer coincidir los datos de su aplicación con la cuenta correcta en la UI. Configure la clave de licencia mediante la variable de entorno.

    Alternativamente, configure la variable de entorno `NEW_RELIC_LICENSE_KEY` en el entorno de la aplicación:

    ```ini
    NEW_RELIC_LICENSE_KEY=YOUR_LICENSE_KEY
    ```
  </Collapser>

  <Collapser
    id="service-sendEnvironmentInfo"
    title="sendEnvironmentInfo"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Indica al agente que registre la información del entorno de ejecución. La información del entorno incluye el sistema operativo, la versión del agente y qué ensamblados están disponibles.
  </Collapser>

  <Collapser
    id="service-syncStartup"
    title="syncStartup"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Bloquee el inicio de la aplicación hasta que el agente se conecte a New Relic. Si se establece en `true`, la primera transacción puede tardar mucho más en completarse, porque está bloqueada hasta que finaliza la conexión con New Relic.
  </Collapser>

  <Collapser
    id="service-sendDataOnExit"
    title="sendDataOnExit"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Bloquee el cierre de la aplicación mientras el agente inicia un ciclo de recolección final y envía todos los datos a New Relic.

    Alternativamente, configure la variable de entorno `NEW_RELIC_SEND_DATA_ON_EXIT` en el entorno de la aplicación:

    ```ini
    NEW_RELIC_SEND_DATA_ON_EXIT=true
    ```
  </Collapser>

  <Collapser
    id="service-sendDataOnExitThreshold"
    title="sendDataOnExitThreshold"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Entero
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `60000`
          </td>
        </tr>

        <tr>
          <th>
            Unidad
          </th>

          <td>
            Milisegundos
          </td>
        </tr>
      </tbody>
    </table>

    La cantidad mínima de tiempo que debe ejecutarse el proceso antes de que el agente bloquee su cierre. Esta configuración solo se aplica cuando [`sendDataOnExit`](#service-sendDataOnExit) es `true`.

    Alternativamente, configure la variable de entorno `NEW_RELIC_SEND_DATA_ON_EXIT_THRESHOLD_MS` en el entorno de la aplicación:

    ```ini
    NEW_RELIC_SEND_DATA_ON_EXIT_THRESHOLD_MS=2000
    ```
  </Collapser>

  <Collapser
    id="service-completeTransactionsOnThread"
    title="completar transacciones en hilo"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Si `false`, el agente emplea un subproceso del grupo para completar el procesamiento de la transacción.

    Si es verdadero, el agente completará el procesamiento de la transacción en el hilo de solicitud.
  </Collapser>

  <Collapser
    id="service-forceNewTransactionOnNewThread"
    title="forceNewTransactionOnNewThread"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Si es `false`, el agente intenta reutilizar la transacción existente cuando se encuentran métodos instrumentados personalizados en escenarios asíncronos/enhebrados.

    Si es `true`, el agente intenta crear una nueva transacción cuando se encuentran métodos instrumentados personalizados en escenarios asíncronos/enhebrados.

    Como alternativa, se puede utilizar la variable de entorno `NEW_RELIC_FORCE_NEW_TRANSACTION_ON_NEW_THREAD` para controlar este comportamiento.

    ```ini
    NEW_RELIC_FORCE_NEW_TRANSACTION_ON_NEW_THREAD=true
    ```
  </Collapser>

  <Collapser
    id="service-requestTimeout"
    title="requestTimeout"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Entero
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `2000` (con [`sendDataOnExit`](#service-sendDataOnExit) habilitado)

            `120000` (con [`sendDataOnExit`](#service-sendDataOnExit) deshabilitado)
          </td>
        </tr>

        <tr>
          <th>
            Unidad
          </th>

          <td>
            Milisegundos
          </td>
        </tr>
      </tbody>
    </table>

    El tiempo de espera de la solicitud del agente al comunicarse con New Relic.
  </Collapser>

  <Collapser
    id="service-autoStart"
    title="autoStart"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Inicie automáticamente el agente .NET cuando se acceda al primer método instrumentado.
  </Collapser>

  <Collapser
    id="service-host"
    title="anfitrión"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Cadena
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            (ninguno)
          </td>
        </tr>
      </tbody>
    </table>

    Proporciona la capacidad de configurar un [extremo compatible con FedRAMP](/docs/security/security-privacy/compliance/fedramp-compliant-endpoints/) para que lo utilice el agente, con el valor `gov-collector.newrelic.com`.

    ```xml
    <service licenseKey="YOUR_LICENSE_KEY"
      host="gov-collector.newrelic.com" />
    ```

    También puede utilizar la variable de entorno `NEW_RELIC_HOST`.

    ```ini
    NEW_RELIC_HOST=gov-collector.newrelic.com
    ```
  </Collapser>
</CollapserGroup>

### Elemento clave que oscurece [#obscuring-key]

El elemento `obscuringKey` es un elemento secundario opcional del elemento `service` . El agente .NET utiliza este valor para desofuscar los valores de configuración admitidos. Por ejemplo, cuando se proporciona una [contraseña de proxy ofuscada](#proxy-password) , se desofuscará utilizando esta clave.

```xml
<service licenseKey="YOUR_LICENSE_KEY">
  <obscuringKey>OBSCURING_KEY</obscuringKey>
</service>
```

La clave de oscurecimiento también se puede configurar configurando la variable de entorno `NEW_RELIC_CONFIG_OBSCURING_KEY` .

<Callout variant="caution">
  Recomendación de seguridad: la colocación de la clave oculta en el mismo archivo de configuración que un valor ofuscado puede suponer un riesgo para la seguridad. Considere colocar la clave de oscurecimiento y [la contraseña de proxy ofuscada](#proxy-password) en variables de entorno y limitar el acceso a las variables de entorno dentro de su entorno.
</Callout>

### Elemento proxy [#proxy]

El elemento `proxy` es un elemento secundario opcional del elemento `service` . El elemento `proxy` se utiliza cuando el agente se comunica con el servicio backend de New Relic a través de un proxy.

```xml
<service licenseKey="YOUR_LICENSE_KEY">
  <proxy
    host="hostname"
    port="PROXY_PORT"
    uriPath="path/to/something.aspx"
    domain="mydomain.com"
    user="PROXY_USERNAME"
    password="PROXY_PASSWORD"
    passwordObfuscated="OBFUSCATED_PROXY_PASSWORD"/>
</service>
```

El elemento `proxy` admite el siguiente atributo:

<CollapserGroup>
  <Collapser
    id="proxy-host"
    title="anfitrión"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Cadena
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            (ninguno)
          </td>
        </tr>
      </tbody>
    </table>

    Define el host proxy.

    Alternativamente, configure la variable de entorno `NEW_RELIC_PROXY_HOST` en el entorno de la aplicación.
  </Collapser>

  <Collapser
    id="proxy-port"
    title="port"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Entero
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `8080`
          </td>
        </tr>
      </tbody>
    </table>

    Define el puerto del proxy.

    Alternativamente, configure la variable de entorno `NEW_RELIC_PROXY_PORT` en el entorno de la aplicación.
  </Collapser>

  <Collapser
    id="proxy-uripath"
    title="uriPath"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Cadena
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            (ninguno)
          </td>
        </tr>
      </tbody>
    </table>

    Opcionalmente, defina una ruta de URI de proxy.

    Alternativamente, configure la variable de entorno `NEW_RELIC_PROXY_URI_PATH` en el entorno de la aplicación.
  </Collapser>

  <Collapser
    id="proxy-domain"
    title="dominio"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Cadena
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            (ninguno)
          </td>
        </tr>
      </tbody>
    </table>

    Opcionalmente, defina un dominio para usar al autenticarse con el servidor proxy.

    Alternativamente, configure la variable de entorno `NEW_RELIC_PROXY_DOMAIN` en el entorno de la aplicación.
  </Collapser>

  <Collapser
    id="proxy-user"
    title="usuario"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Cadena
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            (ninguno)
          </td>
        </tr>
      </tbody>
    </table>

    Opcionalmente, defina un nombre de usuario para la autenticación.

    Alternativamente, configure la variable de entorno `NEW_RELIC_PROXY_USER` en el entorno de la aplicación.
  </Collapser>

  <Collapser
    id="proxy-password"
    title="contraseña"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Cadena
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            (ninguno)
          </td>
        </tr>
      </tbody>
    </table>

    Opcionalmente, defina una contraseña para la autenticación.

    Alternativamente, configure la variable de entorno `NEW_RELIC_PROXY_PASS` en el entorno de la aplicación.
  </Collapser>

  <Collapser
    id="proxy-password"
    title="passwordObfuscated"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Cadena
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            (ninguno)
          </td>
        </tr>
      </tbody>
    </table>

    Para mayor seguridad, el agente .NET admite el uso de una contraseña de proxy ofuscada con el atributo `passwordObfuscated` . La contraseña del proxy ofuscada se genera mediante el siguiente comando [CLI de New Relic](https://github.com/newrelic/newrelic-cli) :

    ```bash
    newrelic agent config obfuscate --key OBSCURING_KEY --value "PLAIN_TEXT_PROXY_PASSWORD"
    ```

    Alternativamente, configure la variable de entorno `NEW_RELIC_PROXY_PASS_OBFUSCATED` en el entorno de la aplicación.

    <Callout variant="important">
      Cuando se utiliza una contraseña de proxy ofuscada, también se debe configurar la [clave de oscurecimiento](#obscuring-key) .
    </Callout>
  </Collapser>
</CollapserGroup>

### Elemento log [#log]

El elemento `log` es hijo del elemento `configuration` . El elemento `log` configura el logging de New Relic. El agente genera su propio archivo de registro para mantener su información de logging separada del registro de su aplicación.

```xml
<log enabled="true"
  level="info"
  auditLog="false"
  console="false"
  directory="PATH\TO\LOG\DIRECTORY"
  fileName="FILENAME.log" />
```

El elemento `log` admite el siguiente atributo:

<CollapserGroup>
  <Collapser
    id="log-level"
    title="nivel"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Cadena
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `info`
          </td>
        </tr>
      </tbody>
    </table>

    Define el nivel de detalle registrado en el archivo de registro. Los valores posibles, en orden creciente de detalle, son:

    * `off`

    * `error`

    * `warn`

    * `info`

    * `debug`

    * `finest`

    * `all`

      Alternativamente, configure la variable de entorno `NEWRELIC_LOG_LEVEL` en el entorno de la aplicación.

      <Callout variant="important">
        Aumentar el nivel de logs aumentará el impacto en el rendimiento de New Relic.
      </Callout>
  </Collapser>

  <Collapser
    id="log-auditLog"
    title="auditLog"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Registra todos los datos enviados y recibidos de New Relic tanto en un archivo de registro auditlog como en el archivo de registro estándar.
  </Collapser>

  <Collapser
    id="log-console"
    title="consola"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Enviar mensaje de log a la consola, además del archivo de log. Alternativamente, configure la variable de entorno `NEW_RELIC_LOG_CONSOLE` en el entorno de la aplicación.
  </Collapser>

  <Collapser
    id="log-enabled"
    title="activado"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Si está deshabilitado, no se intenta ningún logging. Diseñado para sistemas de archivos de solo lectura. Alternativamente, configure la variable de entorno `NEW_RELIC_LOG_ENABLED` en el entorno de la aplicación.
  </Collapser>

  <Collapser
    id="log-directory"
    title="directorio"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Cadena
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `C:\ProgramData\New Relic\.NET Agent\Logs`
          </td>
        </tr>
      </tbody>
    </table>

    El directorio que contiene el archivo de registro generado por el agente. Si se omite, se utilizará de forma predeterminada un directorio llamado `Logs` en el área de instalación del agente New Relic.

    Alternativamente, configure la variable de entorno `NEWRELIC_LOG_DIRECTORY` en el entorno de la aplicación. También puedes enviar tu registro de generador de perfiles a un directorio personalizado, pero solo puedes hacerlo con la variable de entorno `NEWRELIC_PROFILER_LOG_DIRECTORY` en el entorno de la aplicación:

    ```ini
    NEWRELIC_LOG_DIRECTORY=path\to\a\directory
    NEWRELIC_PROFILER_LOG_DIRECTORY=path\to\a\directory # not configurable via config file
    ```
  </Collapser>

  <Collapser
    id="log-fileName"
    title="Nombre del archivo"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Cadena
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            (ninguno)
          </td>
        </tr>
      </tbody>
    </table>

    Define un nombre para el archivo de registro. Si no define un `fileName`, el nombre se deriva del nombre del proceso de supervisión.

    Alternativamente, configure la variable de entorno `NEW_RELIC_LOG` en el entorno de la aplicación:

    ```ini
    NEW_RELIC_LOG=MyApp.log
    ```
  </Collapser>

  <Collapser
    id="log-logRollingStrategy"
    title="logRollingStrategy"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Cadena
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `size`
          </td>
        </tr>
      </tbody>
    </table>

    Define la estrategia de rodadura del archivo de registro del agente. Los valores posibles son:

    * `size` (predeterminado): el archivo de registro se desplaza cuando alcanza el tamaño especificado en `maxLogFileSizeMB`.

    * `day`: El archivo de registro se da vuelta a medianoche.

      Alternativamente, configure la variable de entorno `NEW_RELIC_LOG_ROLLING_STRATEGY` en el entorno de la aplicación:

      ```ini
      NEW_RELIC_LOG_ROLLING_STRATEGY=day
      ```

      Compatible con el agente .NET v10.21.0 y superior.
  </Collapser>

  <Collapser
    id="log-logMaxFiles"
    title="logMaxFiles"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Entero
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `4`
          </td>
        </tr>
      </tbody>
    </table>

    Define la cantidad de archivos de log de agente que se retendrán por instancia del agente; varias aplicaciones que se ejecutan en el mismo host crearán cada una esta cantidad de archivos. Cuando se alcanza el número máximo de archivos de log , se elimina el archivo de log más antiguo. Un valor de `0` especifica que no hay un número máximo de archivos de log.

    Alternativamente, configure la variable de entorno `NEW_RELIC_LOG_MAX_FILES` en el entorno de la aplicación:

    ```ini
    NEW_RELIC_LOG_MAX_FILES=2
    ```

    Compatible con el agente .NET v10.21.0 y superior.
  </Collapser>

  <Collapser
    id="log-maxLogFileSizeMB"
    title="maxLogFileSizeMB"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Entero
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            50
          </td>
        </tr>
      </tbody>
    </table>

    Define el tamaño máximo del archivo de registro del agente en megabytes antes de que se renueve. Válido solo cuando `logRollingStrategy` está establecido en `size`. Un valor de `0` especifica que no existe un tamaño máximo de archivo de registro.

    Alternativamente, configure la variable de entorno `NEW_RELIC_LOG_MAX_FILE_SIZE_MB` en el entorno de la aplicación:

    ```ini
    NEW_RELIC_LOG_MAX_FILE_SIZE_MB=100
    ```

    Compatible con el agente .NET v10.21.0 y superior.
  </Collapser>
</CollapserGroup>

### Elemento de aplicación (requerido) [#application-configuration]

El elemento `application` es hijo del elemento `configuration` . Este elemento obligatorio define el nombre de su aplicación y habilita o deshabilita el muestreo.

<CollapserGroup>
  <Collapser
    id="app-name"
    title="nombre"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Cadena
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `My Application`
          </td>
        </tr>
      </tbody>
    </table>

    El [nombre de su aplicación .NET](/docs/agents/net-agent/installation-and-configuration/naming-your-net-application) es hijo del elemento `application` . New Relic agregará sus datos de acuerdo con este nombre. Por ejemplo, si tiene dos aplicaciones en ejecución llamadas `AppA` y `AppB`, verá dos aplicaciones en la interfaz de New Relic: `AppA` y `AppB`.

    También puedes asignar [hasta tres nombres](/docs/agents/manage-apm-agents/app-naming/use-multiple-names-app) a tu aplicación. El primer nombre es el nombre principal. Por ejemplo:

    ```xml
    <application>
      <name>MY APPLICATION PRIMARY</name>
      <name>SECOND APP NAME</name>
      <name>THIRD APP NAME</name>
    </application>
    ```

    Alternativamente, configure la variable de entorno `NEW_RELIC_APP_NAME` en el entorno de la aplicación:

    ```ini
    NEW_RELIC_APP_NAME=Descriptive Name
    ```

    Para varios nombres:

    ```ini
    NEW_RELIC_APP_NAME="App Name, App Name 2, App Name 3"
    ```
  </Collapser>

  <Collapser
    id="app-disableSamplers"
    title="disableSamplers"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Los muestreadores recopilan información sobre el consumo de memoria y CPU. Establezca esto en `true` para deshabilitar el muestreo.

    Alternativamente, configure la variable de entorno `NEW_RELIC_DISABLE_SAMPLERS` en el entorno de la aplicación:

    ```ini
    NEW_RELIC_DISABLE_SAMPLERS=true
    ```
  </Collapser>
</CollapserGroup>

### Elemento de transmisión de datos [#data-transmission]

El elemento `dataTransmission` es hijo del elemento `configuration` . Este elemento afecta la forma en que se envían los datos a New Relic y puede usarse si tiene requisitos específicos de transmisión de datos.

```xml
<dataTransmission
  putForDataSend="false"
  compressedContentEncoding="deflate"/>
```

El elemento `dataTransmission` admite el siguiente atributo:

<CollapserGroup>
  <Collapser
    id="data-transmission-putfordatasend"
    title="putForDataSend"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Define el método HTTP utilizado al enviar datos a New Relic. Establezca esto en `true` para habilitar el uso del método `PUT` al enviar datos. El método `POST` se utiliza de forma predeterminada.
  </Collapser>
</CollapserGroup>

### Nombre de host

Si la etiqueta de nombre de host predeterminada en la UI de APM no es útil, puede decorar ese nombre en la UI de New Relic con un nombre para mostrar. Después de reiniciar el proceso de la aplicación y el agente .NET vuelve a informar, el nombre para mostrar aparecerá en la lista desplegable <DNT>**Servers**</DNT> . Esta configuración de nombre de host no afecta la lista de hosts en [la página <DNT>**Summary**</DNT> de su aplicación](/docs/apm/applications-menu/monitoring/apm-overview-page-view-transaction-apdex-usage-data).

Para establecer un nombre para mostrar, elija una de las siguientes opciones. La variable de entorno tiene prioridad sobre el valor del archivo de configuración. Luego reinicie su aplicación para ver sus cambios en la UI de New Relic.

<CollapserGroup>
  <Collapser
    id="host-name-config"
    title="Configurar usando el archivo de configuración"
  >
    Establezca el atributo `displayName` en el elemento `processHost` en `newrelic.config`. El elemento `processHost` es hijo del elemento `configuration` .

    ```xml
    <configuration . . . >
      <processHost displayName="CUSTOM_NAME" />
    </configuration>
    ```
  </Collapser>

  <Collapser
    id="host-name-env_variable"
    title="Establecer usando variable de entorno"
  >
    Establezca la variable de entorno `NEW_RELIC_PROCESS_HOST_DISPLAY_NAME` :

    ```ini
    NEW_RELIC_PROCESS_HOST_DISPLAY_NAME="CUSTOM_NAME"
    ```
  </Collapser>
</CollapserGroup>

## Utilización de la plataforma en la nube [#cloud-platform-util]

El elemento de configuración `utilization` controla cómo el agente recopila información de utilización y la envía al servicio New Relic para determinar el precio. El agente puede recopilar información de instancias EC2 de Amazon Web Services (AWS), docker contenedor, Microsoft Azure, Google Cloud Platform, Pivotal Cloud Foundry y Kubernetes.

```xml
<configuration . . . >
  <utilization detectAws="true" detectAzure="true" detectGcp="true" detectPcf="true" detectDocker="true" detectKubernetes="true" />
</configuration>
```

El elemento `utilization` admite el siguiente atributo:

<CollapserGroup>
  <Collapser
    id="detectAws"
    title="detectAws"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Determina si el agente sondea la API de metadatos de AWS.

    Alternativamente, este comportamiento se puede controlar mediante la variable de entorno `NEW_RELIC_UTILIZATION_DETECT_AWS` :

    ```ini
    NEW_RELIC_UTILIZATION_DETECT_AWS=false
    ```
  </Collapser>

  <Collapser
    id="detectAzure"
    title="detectAzure"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Determina si el agente sondea la API de metadatos de Microsoft Azure.

    Alternativamente, este comportamiento se puede controlar mediante la variable de entorno `NEW_RELIC_UTILIZATION_DETECT_AZURE` :

    ```ini
    NEW_RELIC_UTILIZATION_DETECT_AZURE=false
    ```
  </Collapser>

  <Collapser
    id="detectGcp"
    title="detectGcp"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Determina si el agente sondea la API de metadatos de GCP.

    Alternativamente, este comportamiento se puede controlar mediante la variable de entorno `NEW_RELIC_UTILIZATION_DETECT_GCP` :

    ```ini
    NEW_RELIC_UTILIZATION_DETECT_GCP=false
    ```
  </Collapser>

  <Collapser
    id="detectPcf"
    title="detectPcf"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Determina si el agente sondea la información PCF de las variables de entorno.

    Alternativamente, este comportamiento se puede controlar mediante la variable de entorno `NEW_RELIC_UTILIZATION_DETECT_PCF` :

    ```ini
    NEW_RELIC_UTILIZATION_DETECT_PCF=false
    ```
  </Collapser>

  <Collapser
    id="detectDocker"
    title="detectDocker"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Determina si el agente lee la información Docker del sistema de archivos.

    Alternativamente, este comportamiento se puede controlar mediante la variable de entorno `NEW_RELIC_UTILIZATION_DETECT_DOCKER` :

    ```ini
    NEW_RELIC_UTILIZATION_DETECT_DOCKER=false
    ```
  </Collapser>

  <Collapser
    id="detectKubernetes"
    title="detectKubernetes"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Determina si el agente sondea la información de Kubernetes a partir de variables de entorno.

    Alternativamente, este comportamiento se puede controlar mediante la variable de entorno `NEW_RELIC_UTILIZATION_DETECT_KUBERNETES` :

    ```ini
    NEW_RELIC_UTILIZATION_DETECT_KUBERNETES=false
    ```
  </Collapser>
</CollapserGroup>

## Opciones de instrumentación [#instrumentation]

Utilice estas opciones para configurar qué elementos de su aplicación y entorno utilizará. New Relic para .NET admite las siguientes categorías de opciones de instrumentación:

* [Elemento de instrumentación](#instrumentation-element)
* [Elemento de reglas](#instrumentation-rules)
* [Elemento de aplicación (instrumentación)](#application-instrumentation)
* [Elemento atributo](#agent-attributes)

### Elemento de instrumentación

El elemento `instrumentation` es hijo del elemento `configuration` . De forma predeterminada, el agente .NET instrumenta los procesos de trabajo asp de IIS y los roles web y de trabajo de Microsoft Azure. Para instrumentar otros procesos, consulte [instrumentado aplicación personalizada](/docs/agents/net-agent/features/instrumenting-custom-applications).

### Elemento de reglas (instrumentación) [#instrumentation-rules]

<Callout variant="important">
  Esta característica está disponible en .NET agente 10.21.0 y superiores.
</Callout>

El elemento `rules` es hijo del elemento `instrumentation` . El elemento `rules` admite cualquier número de elementos secundarios `ignore` , lo que indica al generador de perfiles que NO utilice ningún método definido en el ensamblado especificado. Los métodos definidos en otras asambleas seguirán estando instrumentados.

```xml
<instrumentation>
  <rules>
    <ignore assemblyName="NameOfAssemblyToIgnore" />
  </rules>
</instrumentation>
```

La regla `ignore` le permite definir opcionalmente un nombre de clase. En el siguiente ejemplo, solo se ignorarán los métodos definidos en `MyNamespace.MyClass` en el ensamblado `MyAssembly` . El generador de perfiles no ignorará otros métodos en otras clases, tanto dentro de ese ensamblaje como dentro de otros ensamblajes.

```xml
<instrumentation>
  <rules>
    <ignore assemblyName="MyAssembly" className="MyNamespace.MyClass" />
  </rules>
</instrumentation>
```

Se puede especificar más de una regla de ignorar. El siguiente ejemplo deshabilita la instrumentación de Confluent Kafka y StackExchange Redis .

```xml
<instrumentation>
  <rules>
    <ignore assemblyName="Confluent.Kafka" />
    <ignore assemblyName="StackExchange.Redis" />
  </rules>
</instrumentation>
```

Tenga en cuenta que la instrumentación personalizada no se puede ignorar mediante el elemento `rules` .

### Elemento de aplicación (instrumentación) [#application-instrumentation]

El elemento `applications` es hijo del elemento `instrumentation` . El elemento `applications` admite `application` elementos secundarios que especifican qué aplicaciones no web utilizar. El elemento `application` contiene un atributo `name` .

<Callout variant="important">
  No es lo mismo que el elemento [`application` (configuración)](#application-configuration) , que es [hijo del elemento `configuration`](#application) .
</Callout>

```xml
<instrumentation>
  <applications>
    <application name="MyService1.exe" />
    <application name="MyService2.exe" />
    <application name="MyService3.exe" />
  </applications>
</instrumentation>
```

### Elemento atributo [#agent-attributes]

Un atributo es un par de valores principales que determina las propiedades de un evento o transacción. Cada parámetro se envía a APM traza de la transacción, APM error traza, `Transaction` evento, `TransactionError` evento o `PageView` evento. El elemento principal `attributes` habilita o deshabilita la recopilación de atributos para el agente .NET y define un atributo específico para recopilar o excluir. También puede configurar los ajustes del atributo según su destino: [colección de errores](#error-attributes), [traza de la transacción](#tracer-attributes), [instrumentaciónbrowser ](#browser-attributes)y [evento de transacción](#transaction-attributes).

En este ejemplo, el agente excluye todos los atributos cuya clave comienza con `myApiKey` (`myApiKey.bar`, `myApiKey.value`) pero recopila el atributo personalizado `myApiKey.foo`.

```xml
<attributes enabled="true">
  <exclude>myApiKey.*</exclude>
  <include>myApiKey.foo</include>
</attributes>
```

Puede ver el atributo .NET APM en la página [de atributos del agente .NET](/docs/agents/net-agent/attributes/net-agent-attributes) . También puede definir un atributo personalizado con la llamada API del agente [`AddCustomAttribute`](/docs/agents/net-agent/net-agent-api/itransaction/#addcustomattribute).

<CollapserGroup>
  <Collapser
    id="agent-attributes-enabled"
    title="activado"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Habilita o deshabilita la colección de atributos. Cuando se establece en `false` en el elemento de atributo principal, esta configuración anula todas las configuraciones de atributo para destinos individuales.

    Alternativamente, configure la variable de entorno `NEW_RELIC_ATTRIBUTES_ENABLED` en el entorno de la aplicación.
  </Collapser>

  <Collapser
    id="agent-attributes-include"
    title="incluir"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Cadena
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            (ninguno)
          </td>
        </tr>
      </tbody>
    </table>

    Si los atributos están habilitados, el agente recopilará todas las claves de atributos especificadas en esta lista. Para especificar varias claves de atributos, especifique cada una individualmente. También puede utilizar un carácter comodín `*` al final de una clave para que coincida con varios atributos (por ejemplo, `myApiKey.*`). Para obtener más información, consulte [reglas de atributos](/docs/agents/net-agent/attributes/enabling-disabling-attributes#attruls).

    Alternativamente, configure la variable de entorno `NEW_RELIC_ATTRIBUTES_INCLUDE` en el entorno de la aplicación. Esta variable de entorno acepta una lista delimitada por comas de nombres de atributos.

    <Callout variant="caution">
      Cuando se emplea la variable de entorno `NEW_RELIC_ATTRIBUTES_INCLUDE` se sobreescribir el conjunto predeterminado de inclusiones en `newrelic.config` . Consulte [aquí](#allow-all-headers-enabled) para obtener una lista detallada de las inclusiones y exclusiones predeterminadas.
    </Callout>
  </Collapser>

  <Collapser
    id="agent-attributes-exclude"
    title="excluir"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Cadena
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            (ninguno)
          </td>
        </tr>
      </tbody>
    </table>

    Si los atributos están habilitados, el agente no recopilará las claves de atributos especificadas en esta lista. Para especificar varias claves de atributos, especifique cada una individualmente. También puede utilizar un carácter comodín `*` al final de una clave para que coincida con varios atributos (por ejemplo, `myApiKey.*`). Para obtener más información, consulte [reglas de atributos](/docs/agents/net-agent/attributes/enabling-disabling-attributes#attruls).

    Alternativamente, configure la variable de entorno `NEW_RELIC_ATTRIBUTES_EXCLUDE` en el entorno de la aplicación. Esta variable de entorno acepta una lista delimitada por comas de nombres de atributos.

    <Callout variant="caution">
      Cuando se emplea la variable de entorno `NEW_RELIC_ATTRIBUTES_EXCLUDE` , se sobreescribir el conjunto predeterminado de exclusiones en `newrelic.config` . Consulte [aquí](#allow-all-headers-enabled) para obtener una lista detallada de las inclusiones y exclusiones predeterminadas.
    </Callout>
  </Collapser>
</CollapserGroup>

## Opciones caracteristicas [#features]

Utilice estas opciones para habilitar, deshabilitar y configurar la característica New Relic. New Relic para .NET te permite configurar la siguiente característica:

* [Grupos de aplicaciones](#include_exclude_apps)
* [Colección de errores](#error_collector)
* [Modo de alta seguridad](#high_security_mode)
* [Eliminar mensajes de excepción](#strip_exception_messages)
* [Evento de transacción](#transaction_events)
* [Evento personalizado](#custom_events)
* [Parámetro personalizado](#custom_parameters)
* [Etiqueta/etiquetas](#labels-tags)
* [Instrumentación browser](#browser_monitoring)
* [Consulta lenta](#slow_sql)
* [Traza de la transaccion](#transaction_tracer)
* [Rastreador de almacenamiento de datos](#datastore_tracer)
* [rastreo distribuido](#distributed_tracing)
* [Rastreo infinito](#infinite_tracing)
* [Multiaplicación traza](#cross_application_tracer)
* [Evento de duración](#span-events)
* [Capturar encabezados de solicitud HTTP](#capture_http_request_headers)
* [Logging de aplicaciones](#application_logging)
* [Nivel de código métrico](#code_level_metrics)
* [Monitoreo de IA](#ai_monitoring)

### Grupos de aplicaciones [#include_exclude_apps]

<Callout variant="important">
  Esto solo se aplica al [archivo de configuración global](#config-options-precedence) de un sistema.
</Callout>

<Callout variant="important">
  Esta configuración solo se aplica cuando el modelo de hospedaje de IIS está configurado en proceso.
</Callout>

El elemento `applicationPools` es hijo del elemento `configuration` . El elemento `applicationPools` especifica para el generador de perfiles exactamente qué grupos de aplicaciones corresponden al instrumento y utiliza el mismo nombre que el nombre del grupo de aplicaciones de IIS. Este elemento de configuración es útil cuando es posible que necesite instrumentar solo un pequeño subconjunto de sus grupos de aplicaciones. Por ejemplo, un servidor determinado puede tener varios cientos de grupos de aplicaciones, pero el agente .NET solo necesita instrumentar algunos de esos grupos.

A continuación se muestra un ejemplo de cómo deshabilitar la instrumentación para grupos de aplicaciones específicos:

```xml
<applicationPools>
  <applicationPool name="Foo" instrument="false"/>
  <applicationPool name="Bar" instrument="false"/>
</applicationPools>
```

A continuación se muestra un ejemplo de cómo deshabilitar la instrumentación para todos los grupos de aplicaciones que se ejecutan actualmente en el servidor y habilitar la instrumentación para grupos de aplicaciones específicos:

```xml
<applicationPools>
  <defaultBehavior instrument="false"/>
  <applicationPool name="Foo" instrument="true"/>
  <applicationPool name="Bar" instrument="true"/>
</applicationPools>
```

El elemento `applicationPools` admite los siguientes elementos:

<CollapserGroup>
  <Collapser
    id="appPool-defaultBehavior"
    title="defaultBehavior"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Define cómo se comportará el agente .NET a nivel "global" para grupos de aplicaciones servidos a través de IIS. El agente .NET instrumentó todos los grupos de aplicaciones de forma predeterminada. Cuando `true`, los grupos de aplicaciones enumerados en [applicationPool](#appPool-applicationPool) con un atributo `instrument` establecido en falso no se instrumentarán.

    Básicamente, cuando se establece en `false`, la lista del grupo de aplicaciones actúa como una lista de 'permitidos'. Cuando se establece en `true`, la lista del grupo de aplicaciones actúa como una lista de denegación.
  </Collapser>

  <Collapser
    id="appPool-applicationPool"
    title="applicationPool"
  >
    Define el comportamiento de la instrumentación para un grupo de aplicaciones específico. El atributo `name` es el nombre de un grupo de aplicaciones. Habilite o deshabilite la creación de perfiles en el atributo `instrument` . Defina esta aplicación en el atributo `name` .
  </Collapser>
</CollapserGroup>

### Colección de errores [#error_collector]

El elemento `errorCollector` es hijo del elemento `configuration` . `errorCollector` configura la recopilación de errores, que captura información sobre excepciones no detectadas y las envía a New Relic.

```xml
<errorCollector enabled="true" captureEvents="true" maxEventSamplesStored="100">
  <ignoreClasses>
    <errorClass>System.IO.FileNotFoundException</errorClass>
    <errorClass>System.Threading.ThreadAbortException</errorClass>
  </ignoreClasses>
  <ignoreMessages>
    <errorClass name="System.Exception">
       <message>Ignore message</message>
       <message>Ignore too</message>
    </errorClass>
  </ignoreMessages>
  <ignoreStatusCodes>
    <code>401</code>
    <code>404</code>
  </ignoreStatusCodes>
  <expectedClasses>
    <errorClass>System.ArgumentNullException</errorClass>
    <errorClass>System.ArgumentOutOfRangeException</errorClass>
  </expectedClasses>
  <expectedMessages>
    <errorClass name="System.Exception">
       <message>Expected message</message>
       <message>Expected too</message>
    </errorClass>
  </expectedMessages>
  <expectedStatusCodes>403,500-505</expectedStatusCodes>
  <attributes enabled="true">
    <exclude>myApiKey.*</exclude>
    <include>myApiKey.foo</include>
  </attributes>
</errorCollector>
```

<Callout variant="tip">
  Para obtener una descripción general de la configuración de errores en APM, consulte [Administrar errores en APM](/docs/agents/manage-apm-agents/agent-data/manage-errors-apm-collect-ignore-mark-expected).
</Callout>

<Callout variant="important">
  `expectedClasses`, `expectedMessages` y `expectedStatusCodes` las opciones de configuración requieren [la versión 8.31.0.0 o superior del agente .NET](/docs/agents/net-agent/installation/update-net-agent).
</Callout>

El elemento `errorCollector` admite los siguientes elementos y atributos:

<CollapserGroup>
  <Collapser
    id="error-enabled"
    title="activado"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Habilite o deshabilite el selector de errores.
  </Collapser>

  <Collapser
    id="error-captureEvents"
    title="captureEvents"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Habilite o deshabilite la captura de eventos de error.
  </Collapser>

  <Collapser
    id="error-maxEventSamplesStored"
    title="maxEventSamplesStored"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Entero
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `100`
          </td>
        </tr>
      </tbody>
    </table>

    Límite de depósito para evento de error.
  </Collapser>

  <Collapser
    id="error-ignoreClasses"
    title="ignoreClasses"
  >
    Una lista de nombres de clases completos que se ignorarán. El número máximo de combinaciones de clase de error y mensaje que <DNT>**SHOULD**</DNT> debe informar es 50. Si se enumeran más de 50, solo se emplearán los primeros 50 <DNT>**SHOULD**</DNT> .
  </Collapser>

  <Collapser
    id="error-ignoreMessages"
    title="ignoreMessages"
  >
    Un mapa opcional de nombres de clases completos para una lista de cadenas que coinciden con una subcadena del mensaje de error. El número máximo de combinaciones de clase de error y mensaje que <DNT>**SHOULD**</DNT> debe informar es 50. Si se enumeran más de 50, solo se emplearán los primeros 50 <DNT>**SHOULD**</DNT> .
  </Collapser>

  <Collapser
    id="error-ignoreErrors"
    title="ignoreErrors (obsoleto)"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Cadena
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            (ninguno)
          </td>
        </tr>
      </tbody>
    </table>

    Enumera excepciones específicas para no informar a New Relic. Se debe utilizar el nombre completo de la excepción, como `System.IO.FileNotFoundException`.
  </Collapser>

  <Collapser
    id="error-ignoreStatusCodes"
    title="ignoreStatusCodes"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Cadena
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            (ninguno)
          </td>
        </tr>
      </tbody>
    </table>

    Enumera códigos de error HTTP específicos que no se deben informar a New Relic. Puede usar códigos de error HTTP integrales estándar, como solo `401`, o puede usar códigos de estado completos de Microsoft con puntos decimales, como `401.4` o `403.18`. Los códigos de estado deben ser iguales o mayores que `400`.

    Esto también se puede configurar mediante una variable de entorno, especificando varios códigos con una lista separada por comas:

    ```ini
    NEW_RELIC_ERROR_COLLECTOR_IGNORE_ERROR_CODES=401, 403.18
    ```

    <Callout variant="tip">
      Los errores personalizados informados con la [API`NoticeError()` ](/docs/agents/net-agent/net-agent-api/noticeerror-net-agent)del agente aún se informan a New Relic incluso si la transacción asociada tiene un código de estado HTTP configurado aquí.
    </Callout>
  </Collapser>

  <Collapser
    id="error-expectedClasses"
    title="expectedClasses"
  >
    Una lista de nombres de clases completos que se marcarán como se esperaba. El número máximo de combinaciones de clase de error y mensaje que <DNT>**SHOULD**</DNT> debe informar es 50. Si se enumeran más de 50, solo se utilizarán los primeros 50 <DNT>**SHOULD**</DNT>
  </Collapser>

  <Collapser
    id="error-expectedMessages"
    title="expectedMessages"
  >
    Un mapa opcional de nombres de clases completos para una lista de cadenas que coinciden con una subcadena del mensaje de error. El número máximo de combinaciones de clase de error y mensaje que <DNT>**SHOULD**</DNT> debe informar es 50. Si se enumeran más de 50, solo se utilizarán los primeros 50 <DNT>**SHOULD**</DNT>
  </Collapser>

  <Collapser
    id="error-expectedStatusCodes"
    title="expectedStatusCodes"
  >
    Una lista de códigos de estado separados por comas. La lista puede incluir rangos de números enteros empleando un solo guión (`-`) e incluirá tanto el número entero inicial como el final del rango.

    Esto también se puede configurar mediante la variable de entorno:

    ```ini
    NEW_RELIC_ERROR_COLLECTOR_EXPECTED_ERROR_CODES=401, 501-503
    ```
  </Collapser>

  <Collapser
    id="error-attributes"
    title="Atributo"
  >
    Utilice este subelemento para personalizar la configuración del atributo de su agente para el error de traza. Este subelemento utiliza la misma configuración que el elemento `attributes` principal: [`enabled`](#agent-attributes-enabled), [`include`](#agent-attributes-include) y [`exclude`](#agent-attributes-exclude).
  </Collapser>
</CollapserGroup>

### Modo de alta seguridad [#high_security_mode]

El elemento `highSecurity` es hijo del elemento `configuration` . Para habilitar [el modo de alta seguridad](/docs/subscriptions/high-security), establezca esta propiedad en `true` y habilite la propiedad de alta seguridad en la interfaz de usuario de New Relic. Al habilitar la alta seguridad se activa SSL; el parámetro de solicitud, el parámetro personalizado y los encabezados de solicitud HTTP no se recopilan; los mensajes de excepción de eliminación están habilitados; y la consulta no se puede enviar a New Relic en su forma original.

<CollapserGroup>
  <Collapser
    id="highsecurity-enabled"
    title="activado"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Habilite o deshabilite el modo de alta seguridad. Ejemplo:

    ```xml
    <highSecurity enabled="true"/>
    ```

    Alternativamente, configure la variable de entorno `NEW_RELIC_HIGH_SECURITY` en el entorno de la aplicación:

    ```ini
    NEW_RELIC_HIGH_SECURITY=true
    ```
  </Collapser>
</CollapserGroup>

### Eliminar mensajes de excepción [#strip_exception_messages]

El elemento `stripExceptionMessages` es hijo del elemento `configuration` . Para habilitar mensajes de excepción de eliminación, establezca esta propiedad en `true`. De forma predeterminada, esto está configurado en falso, lo que significa que el agente envía mensajes de todas las excepciones al recolector de New Relic. Si habilita el modo de alta seguridad, esto cambia automáticamente a verdadero y el agente elimina los mensajes de las excepciones.

<CollapserGroup>
  <Collapser
    id="stripExceptionMessages-enabled"
    title="activado"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Habilite o deshabilite los mensajes de excepción de eliminación. Ejemplo:

    ```xml
    <stripExceptionMessages enabled="true"/>
    ```
  </Collapser>
</CollapserGroup>

### Evento de transacción [#transaction_events]

El elemento `transactionEvents` es hijo del elemento `configuration` . Utilice `transactionEvents` para configurar el evento de transacción.

```xml
<transactionEvents enabled="true" maximumSamplesStored="10000">
  <attributes enabled="true">
    <exclude>myApiKey.*</exclude>
    <include>myApiKey.foo</include>
  </attributes>
</transactionEvents>
```

El elemento `transactionEvents` admite el siguiente atributo:

<CollapserGroup>
  <Collapser
    id="transaction-enabled"
    title="activado"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Activa o desactiva la grabadora de eventos.
  </Collapser>

  <Collapser
    id="transaction-maximumSamplesStored"
    title="maximumSamplesStored"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Entero
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `10000`
          </td>
        </tr>
      </tbody>
    </table>

    El número máximo de transacciones muestreadas que el agente puede almacenar en la memoria a la vez. Este será el número máximo de transacciones que el agente puede enviar por minuto.

    Alternativamente, configure la variable de entorno `MAX_TRANSACTION_SAMPLES_STORED` en el entorno de la aplicación:

    ```ini
    MAX_TRANSACTION_SAMPLES_STORED=500
    ```
  </Collapser>

  <Collapser
    id="transaction-attributes"
    title="Atributo"
  >
    Utilice este subelemento para personalizar la configuración del atributo de agente para el evento de transacción. Este subelemento utiliza la misma configuración que el elemento `attributes` principal: [`enabled`](#agent-attributes-enabled), [`include`](#agent-attributes-include) y [`exclude`](#agent-attributes-exclude).

    <Callout variant="tip">
      Estas configuraciones de atributos son específicas del evento `transaction` . Los ajustes del atributo se pueden aplicar globalmente a todos los tipos de eventos [con este ajuste de configuración](/docs/agents/net-agent/configuration/net-agent-configuration#agent-attributes).
    </Callout>

    <Callout variant="caution">
      Cuando rastreo distribuido y/o Infinite Tracing están habilitados, la información de los eventos de transacción se aplica al evento Span raíz de la transacción. Considere aplicar cualquier configuración de atributo para evento de transacción para abarcar evento y/o aplicarla como configuración de atributo global.
    </Callout>
  </Collapser>
</CollapserGroup>

### Evento personalizado [#custom_events]

El elemento `customEvents` es hijo del elemento `configuration` . Utilice `customEvents` para configurar [el evento personalizado](/docs/insights/new-relic-insights/adding-querying-data/inserting-custom-events-new-relic-apm-agents#net-att).

```xml
<customEvents enabled="true" maximumSamplesStored="10000"/>
```

El elemento `customEvents` admite el siguiente atributo:

<CollapserGroup>
  <Collapser
    id="customevents-enabled"
    title="activado"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Activa o desactiva la grabadora de eventos.
  </Collapser>

  <Collapser
    id="customevents-maximumSamplesStored"
    title="maximumSamplesStored"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Entero
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `10000`
          </td>
        </tr>
      </tbody>
    </table>

    El número máximo de eventos personalizados muestreados que el agente puede almacenar en la memoria a la vez. Este será el número máximo de eventos personalizados que el agente podrá enviar por minuto.

    Alternativamente, configure la variable de entorno `MAX_EVENT_SAMPLES_STORED` en el entorno de la aplicación:

    ```ini
    MAX_EVENT_SAMPLES_STORED=500
    ```

    * Si está configurando el agente para [el monitoreo de IA](/docs/ai-monitoring/intro-to-ai-monitoring/), le recomendamos establecer el valor en `100000`.
  </Collapser>
</CollapserGroup>

### Parámetro personalizado [#custom_parameters]

El elemento `customParameters` es hijo del elemento `configuration` . Utilice `customParameters` para configurar [el parámetro personalizado](/docs/insights/insights-data-sources/custom-data/add-custom-attributes-apm-data).

```xml
<customParameters enabled="true" />
```

El elemento `customParameters` admite el siguiente atributo:

<CollapserGroup>
  <Collapser
    id="customparameters-enabled"
    title="activado"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Habilite o deshabilite la captura de parámetros personalizados.
  </Collapser>
</CollapserGroup>

### Etiquetas (etiqueta)

El elemento `labels` es hijo del elemento `configuration` .

Esto establece nombres y valores [de etiquetas](/docs/new-relic-one/use-new-relic-one/core-concepts/tagging-use-tags-organize-group-what-you-monitor) . La lista es una lista delimitada por punto y coma de pares de nombres y valores separados por dos puntos. También puede utilizar con la variable de entorno `NEW_RELIC_LABELS` . Ejemplo:

```xml
<labels>foo:bar;zip:zap</labels>
```

```ini
NEW_RELIC_LABELS="foo:bar;zip:zap"
```

### Instrumentación browser [#browser_monitoring]

El elemento `browserMonitoring` es hijo del elemento `configuration` . `browserMonitoring` configura <InlinePopover type="browser"/>en su aplicación .NET. browser le brinda información valiosa sobre la experiencia de rendimiento final de su usuario. Esto se logra midiendo el tiempo que le toma al navegador de su usuario descargar y renderizar sus páginas web inyectando una pequeña cantidad de código JavaScript en el encabezado y pie de página de cada página.

```xml
// If you use both the Exclude and Attribute elements
// the Exclude element must be listed first.
<browserMonitoring autoInstrument="true">
  <requestPathsExcluded>
    <path regex="url-regex-1"/>
    <path regex="url-regex-2"/>
    ...
    <path regex="url-regex-n"/>
  </requestPathsExcluded>
  <attributes enabled="true">
    <exclude>myApiKey.*</exclude>
    <include>myApiKey.foo</include>
  </attributes>
</browserMonitoring>
```

El elemento `browserMonitoring` admite el siguiente atributo:

<CollapserGroup>
  <Collapser
    id="browsermon-autoInstrument"
    title="autoInstrument"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    De forma predeterminada, el agente inyecta automáticamente el JavaScript del agente del navegador. Para desactivar la inyección automática, establezca este atributo en `false`.

    <Callout variant="important">
      La instrumentación automática solo está disponible para aplicaciones .NET framework ; las aplicaciones .NET Core deben usar [instrumentación manual](/docs/apm/agents/net-agent/other-features/browser-monitoring-net-agent/#manual_instrumentation). La instrumentación automática no está disponible para la aplicación ASP..NET Core, ya sea que esté supervisada por .NET framework o por el agente Core.
    </Callout>
  </Collapser>

  <Collapser
    id="browser-attributes"
    title="Atributo"
  >
    Utilice este subelemento para personalizar la configuración del atributo de agente para [el monitoreo del navegador](/docs/browser/new-relic-browser/page-load-timing/instrumentation-page-load-timing). Este subelemento utiliza la misma configuración que el elemento `attributes` principal: [`enabled`](#agent-attributes-enabled), [`include`](#agent-attributes-include) y [`exclude`](#agent-attributes-exclude).
  </Collapser>

  <Collapser
    id="browser-path-exclusion"
    title="requestPathsExcluded"
  >
    Utilice este subelemento para evitar que el agente del navegador se inyecte en páginas específicas. El elemento se utiliza de la siguiente manera:

    ```xml
    <requestPathsExcluded>
      <path regex="url-regex-1"/>
      <path regex="url-regex-2"/>
      ...
      <path regex="url-regex-n"/>
    </requestPathsExcluded>
    ```

    El agente no inyectará el agente del navegador en páginas cuya URL coincida con una de las expresiones regulares especificadas. La expresión regular debe seguir [las pautas de Microsoft para la clase Regex](https://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex(v=vs.110).aspx).

    Es una referencia al directorio virtual de la ruta en su aplicación y no a la URL completa de la ruta que desea excluir. Por ejemplo, para excluir las páginas en `https://www.mywebsite.com/mywebpages/` , simplemente insertaría `/mywebpages/` como valor de expresión regular de la ruta.

    El elemento `requestPathsExcluded` debe usarse en los casos en que sea imposible o no deseable utilizar la llamada [`DisableBrowserMonitoring()`](/docs/agents/net-agent/net-agent-api/disablebrowsermonitoring-net-agent) . Para minimizar un posible impacto en el rendimiento, intente utilizar la menor cantidad posible de expresiones regulares y manténgalas lo más simples posible.
  </Collapser>
</CollapserGroup>

### Consulta lenta [#slow_sql]

El elemento `slowSql` es hijo del elemento `configuration` . `slowSql` configura la captura de información sobre las ejecuciones de consulta lenta y captura y ofusca los planes explicativos para estas consultas.

```xml
<slowSql enabled="true"/>
```

El elemento `slowSql` admite el siguiente atributo:

<CollapserGroup>
  <Collapser
    id="catracer-enabled"
    title="activado"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Activa o desactiva el rastreo de consulta lenta.
  </Collapser>
</CollapserGroup>

### Traza de la transaccion [#transaction_tracer]

El elemento `transactionTracer` es hijo del elemento `configuration` . `transactionTracer` configura [la traza de la transacción](/docs/traces/transaction-traces). En la traza se incluye la secuencia exacta de llamadas de la transacción, incluidas las declaraciones de consulta emitidas.

```xml
<transactionTracer enabled="true"
    transactionThreshold="apdex_f"
    recordSql="obfuscated"
    explainEnabled="true"
    explainThreshold="500"
    maxSegments="3000"
    maxExplainPlans="20">
  <attributes enabled="true">
    <exclude>myApiKey.*</exclude>
    <include>myApiKey.foo</include>
  </attributes>
 </transactionTracer>
```

El elemento `transactionTracer` admite el siguiente atributo:

<CollapserGroup>
  <Collapser
    id="tracer-enabled"
    title="activado"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Activa o desactiva [la traza de la transacción](/docs/apm/transactions/transaction-traces/transaction-traces).
  </Collapser>

  <Collapser
    id="tracer-transactionThreshold"
    title="transactionThreshold"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Cadena
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `apdex_f`
          </td>
        </tr>
      </tbody>
    </table>

    Define el umbral para la traza de la transacción. Si una transacción demora más que el umbral, es elegible para ser traza. Consulte [los conceptos básicos de la traza de la transacción](/docs/apm/transactions/transaction-traces/transaction-traces#basics) para obtener más información sobre las reglas que rigen la traza.

    El valor predeterminado es `apdex_f`, que establece el umbral en cuatro veces el valor `apdex_t` de la aplicación. Para obtener más información sobre `apdex_t`, consulte [Apdex](/docs/site/apdex-measuring-user-satisfaction).

    También puede establecer el umbral para que sea un valor de tiempo específico en milisegundos.
  </Collapser>

  <Collapser
    id="tracer-recordSql"
    title="recordSql"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Cadena
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `obfuscated`
          </td>
        </tr>
      </tbody>
    </table>

    Seleccione una política de seguimiento de consultas. Las opciones son `off`, que no registra nada; `obfuscated`, que registra una versión ofuscada de la consulta; o `raw`, que registra la consulta exactamente como se envía a la base de datos.

    <Callout variant="caution">
      La grabación de consultas sin procesar puede capturar información confidencial.
    </Callout>
  </Collapser>

  <Collapser
    id="tracer-explainEnabled"
    title="explainEnabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Cuando `true`, el agente captura `EXPLAIN` extractos para consulta lenta con duraciones superiores a `explainThreshold`. Tenga en cuenta que habilitar esta característica puede tener implicaciones en el rendimiento porque los planes se capturan para cada transacción hasta el valor `maxExplainPlans` .
  </Collapser>

  <Collapser
    id="tracer-explainThreshold"
    title="explainThreshold"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Entero
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `500`
          </td>
        </tr>

        <tr>
          <th>
            Unidad
          </th>

          <td>
            Milisegundos
          </td>
        </tr>
      </tbody>
    </table>

    El agente recopila [datos de consulta lenta](/docs/apm/applications-menu/monitoring/viewing-slow-query-details) para consultas que superan este umbral, junto con los planes explicativos disponibles, como parte de la traza de la transacción.
  </Collapser>

  <Collapser
    id="tracer-maxSegments"
    title="maxSegments"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Entero
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `3000`
          </td>
        </tr>
      </tbody>
    </table>

    El número máximo de segmentos a recoger en una traza de la transacción.
  </Collapser>

  <Collapser
    id="tracer-maxExplainPlans"
    title="maxExplainPlans"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Entero
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `20`
          </td>
        </tr>
      </tbody>
    </table>

    El número máximo de planes explicativos que se pueden cobrar por transacción.
  </Collapser>

  <Collapser
    id="tracer-maxStackTrace"
    title="maxStackTrace"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Entero
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `0`
          </td>
        </tr>
      </tbody>
    </table>

    De forma predeterminada, `maxStackTrace` está configurado en `0`, lo que deshabilita el rastreo del stack como parte de una traza de la transacción. Si este valor se establece mayor que `0`, entonces se capturará el rastreo de la stack para la traza de la transacción.
  </Collapser>

  <Collapser
    id="tracer-attributes"
    title="Atributo"
  >
    Utilice este subelemento para personalizar la configuración de atributos de su agente para la traza de la transacción. Este subelemento utiliza la misma configuración que el elemento `attributes` principal: [`enabled`](#agent-attributes-enabled), [`include`](#agent-attributes-include) y [`exclude`](#agent-attributes-exclude).
  </Collapser>
</CollapserGroup>

### Rastreador de almacenamiento de datos [#datastore_tracer]

El elemento `datastoreTracer` es hijo del elemento `configuration` .

```xml
<datastoreTracer>
  <instanceReporting enabled="true"  />
  <databaseNameReporting enabled="true" />
  <queryParameters enabled="false" />
</datastoreTracer>
```

El elemento `datastoreTracer` admite los siguientes subelementos:

<CollapserGroup>
  <Collapser
    id="instance-reporting"
    title="instanceReporting"
  >
    Utilice este subelemento para habilitar la recopilación de almacenamiento de datos instancia métrica (como el host y el puerto) para [algún controlador de la base de datos](/docs/agents/net-agent/features/net-agent-instance-level-database-information). Estos se informan en consulta lenta traza y traza de la transacción. El valor predeterminado del atributo `enabled` es `true`.
  </Collapser>

  <Collapser
    id="database-name-reporting"
    title="databaseNameReporting"
  >
    Utilice este subelemento para habilitar la recopilación del nombre de la base de datos en consulta lenta traza y traza de la transacción para [algún controlador de la base de datos](/docs/agents/net-agent/features/net-agent-instance-level-database-information). El valor predeterminado del atributo `enabled` es `true`.
  </Collapser>

  <Collapser
    id="datastore-tracer-query-parameters"
    title="queryParameters"
  >
    Utilice este subelemento para habilitar la recopilación del parámetro de consulta SQL en consulta lenta traza. El valor predeterminado del atributo `enabled` es `false`.

    <Callout variant="caution">
      * El parámetro de consulta de grabación puede capturar información confidencial.
      * La opción de configuración `transactionTracer.recordSql` debe establecerse en `raw` o esta opción se ignora.
    </Callout>
  </Collapser>
</CollapserGroup>

### rastreo distribuido [#distributed_tracing]

El elemento `distributedTracing` es hijo del elemento `configuration` .

```xml
<distributedTracing enabled="false"
   excludeNewrelicHeader="false"/>
```

Rastreo distribuido te permite ver el camino que sigue una solicitud a medida que viaja a través de un sistema distribuido. Requiere [.NET agente versión 8.6.45.0 o superior](/docs/agents/net-agent/installation/update-net-agent) y está activado de forma predeterminada en los agentes .NET 9.0.0.0 y superiores.

<Callout variant="important">
  Habilitar [rastreo distribuido](/docs/understand-dependencies/distributed-tracing/get-started/introduction-distributed-tracing) deshabilita [el rastreo de múltiples aplicaciones](#cross_application_tracer) y tiene otros efectos en la característica APM. Antes de habilitar, lea la [guía de planificación](/docs/transition-guide-distributed-tracing).
</Callout>

Para obtener más información sobre cómo configurar rastreo distribuido, consulte [Habilitar rastreo distribuido para su aplicación .NET](/docs/apm/agents/net-agent/configuration/distributed-tracing-net-agent).

El elemento `distributedTracing` admite el siguiente atributo:

<CollapserGroup>
  <Collapser
    id="tracer-enabled"
    title="activado"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Alternativamente, habilite rastreo distribuido a través de la variable de entorno `NEW_RELIC_DISTRIBUTED_TRACING_ENABLED` en el entorno de la aplicación:

    ```ini
    NEW_RELIC_DISTRIBUTED_TRACING_ENABLED=true
    ```
  </Collapser>

  <Collapser
    id="excludeNewrelicHeader"
    title="excludeNewrelicHeader"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    De forma predeterminada, las versiones compatibles del agente utilizan tanto el encabezado `newrelic` como los encabezados [W3C Trace Context](/docs/understand-dependencies/distributed-tracing/get-started/how-new-relic-distributed-tracing-works#headers) para rastreo distribuido. El encabezado rastreo distribuido `newrelic` permite la interoperabilidad con agentes más antiguos que no admiten encabezados W3C Trace Context . Las versiones del agente que admiten encabezados W3C Trace Context los priorizarán sobre `newrelic` encabezados para rastreo distribuido.

    Si no desea utilizar el encabezado `newrelic`, configurarlo en `true` hará que el agente excluya el encabezado `newrelic` y solo use encabezados W3C Trace Context para rastreo distribuido.
  </Collapser>
</CollapserGroup>

Rastreo distribuido informes abarcan evento. Los informes de eventos de intervalo están habilitados de forma predeterminada, pero [rastreo distribuido](/docs/apm/distributed-tracing/getting-started/introduction-distributed-tracing) debe estar habilitado para que se informen los intervalos. Para deshabilitar el evento span, elija una de las siguientes opciones:

<CollapserGroup>
  <Collapser
    id="span-events-disable-config"
    title="Deshabilitar evento span a través del archivo de configuración"
  >
    Establezca el elemento `<spanEvents>` en `false` para deshabilitarlo a través del archivo `newrelic.config` . Este elemento es hijo del elemento `<configuration>` .

    ```xml
    <configuration . . . >
      <spanEvents enabled="false" />
    </configuration>
    ```
  </Collapser>

  <Collapser
    id="span-events-disable-env_variable"
    title="Deshabilitar evento span a través de variable de entorno"
  >
    Establezca la variable de entorno `NEW_RELIC_SPAN_EVENTS_ENABLED` en el entorno de la aplicación:

    ```ini
    NEW_RELIC_SPAN_EVENTS_ENABLED=false
    ```
  </Collapser>
</CollapserGroup>

### Rastreo infinito [#infinite_tracing]

[Infinite Tracing](/docs/distributed-tracing/infinite-tracing/introduction-infinite-tracing) amplía el servicio de distribución de rastreo empleando un observador de traza externo al agente. Observa el 100% de la traza de su aplicación en varios servicios y proporciona datos accionables para que pueda resolver los problemas más rápido.

Para activar [Infinite Tracing](/docs/distributed-tracing/infinite-tracing/introduction-infinite-tracing), asegúrese de tener [la versión 8.30 o superior del agente .NET](/docs/release-notes/agent-release-notes/net-release-notes) y habilite rastreo distribuido. Luego agregue las siguientes configuraciones adicionales:

```xml
<configuration . . . >
  <distributedTracing enabled="true" />
  <infiniteTracing>
    <trace_observer host="YOUR_TRACE_OBSERVER_HOST" />
  </infiniteTracing>
</configuration>
```

<Callout variant="important">
  Los intervalos de seguimiento infinito se pueden limitar mediante la configuración [`transactionTracer.maxSegments`](/docs/apm/agents/net-agent/configuration/net-agent-configuration/#tracer-maxSegments) .
</Callout>

El elemento `infiniteTracing` admite los siguientes elementos:

<CollapserGroup>
  <Collapser
    id="trace_observer"
    title="trace_observer"
  >
    El elemento `trace_observer` identifica un host observador que es independiente del agente. Para obtener ayuda para obtener una entrada de host de observador de traza Infinite Tracing válida, consulte [Buscar o crear un extremo de observador de traza](/docs/understand-dependencies/distributed-tracing/enable-configure/language-agents-enable-distributed-tracing#provision-trace-observer "https&#x3A;//docs.newrelic.com/docs/understand-dependencies/distributed-tracing/enable-configure/language-agents-enable-distributed-tracing#provision-trace-observer").

    El observador de traza también se puede configurar utilizando la variable de entorno `NEW_RELIC_INFINITE_TRACING_TRACE_OBSERVER_HOST` .

    <Callout variant="important">
      Al configurar el observador de traza, no debe proporcionar el protocolo como parte del host. Por ejemplo, utilice `myhost.infinitetracing.com` en lugar de `https://myhost.infinitetracing.com`.
    </Callout>
  </Collapser>
</CollapserGroup>

### Multiaplicación traza [#cross_application_tracer]

El elemento `crossApplicationTracer` es hijo del elemento `configuration` . `crossApplicationTracer` vincula la traza de la transacción a través de la aplicación. Cuando se vinculan en una arquitectura orientada a servicios, todas las aplicaciones instrumentadas que se comunican entre sí a través de HTTP ahora "vincularán" la traza de la transacción con la aplicación a la que llaman y la aplicación por la que son llamados. [El seguimiento de múltiples aplicaciones](/docs/traces/cross-application-traces) facilita la comprensión de la relación de rendimiento entre los servicios y la aplicación.

<Callout variant="important">
  El rastreo de aplicaciones múltiples ha quedado obsoleto a partir de [la versión 9.0.0 del agente](/docs/release-notes/agent-release-notes/net-release-notes/net-agent-9000/) y está deshabilitado de forma predeterminada. Se eliminará en una futura versión del agente. Para utilizar CAT con v9+ del agente, debe configurar tanto `crossApplicationTracer.enabled = true` como `distributedTracing.enabled = false`. Habilitar [distributed tracing](/docs/understand-dependencies/distributed-tracing/get-started/introduction-distributed-tracing) deshabilitará [el rastreo multiaplicación](#cross_application_tracer).
</Callout>

```xml
<crossApplicationTracer enabled="true"/>
```

El elemento `crossApplicationTracer` admite el siguiente atributo:

<CollapserGroup>
  <Collapser
    id="catracer-enabled"
    title="activado"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Activar o desactivar el rastreo multiaplicación
  </Collapser>
</CollapserGroup>

### Evento de duración

El elemento `spanEvents` es hijo del elemento `configuration` . Utilice `spanEvents` para configurar el evento span.

```xml
<spanEvents enabled="true">
  <attributes enabled="true">
    <exclude>myApiKey.*</exclude>
    <include>myApiKey.foo</include>
  </attributes>
</spanEvents>
```

El elemento `spanEvents` admite el siguiente atributo:

<CollapserGroup>
  <Collapser
    id="span-enabled"
    title="activado"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Activa o desactiva la grabadora de eventos.
  </Collapser>

  <Collapser
    id="span-max-samples-stored"
    title="maximumSamplesStored"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            En t
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `2000`
          </td>
        </tr>
      </tbody>
    </table>

    El número máximo de eventos de intervalo muestreado que el agente puede almacenar en la memoria a la vez. Este será el número máximo de intervalos de eventos que el agente puede enviar por minuto.

    * Esto también se puede configurar utilizando la variable de entorno `NEW_RELIC_SPAN_EVENTS_MAX_SAMPLES_STORED` .

    * No recomendamos configurar más de 10k. El servidor limitará los datos a 10k por minuto.

    * Si está configurando el agente para [el monitoreo de IA](/docs/ai-monitoring/intro-to-ai-monitoring/), le recomendamos establecer el valor en `10000`.

      <Callout variant="important">
        Esta opción de configuración sólo está disponible en .NET agente v9.0 o superior.
      </Callout>
  </Collapser>

  <Collapser
    id="span-attributes"
    title="Atributo"
  >
    Utilice este subelemento para personalizar la configuración de atributos de su agente para el evento span. Este subelemento utiliza la misma configuración que el elemento `attributes` principal: [`enabled`](#agent-attributes-enabled), [`include`](#agent-attributes-include) y [`exclude`](#agent-attributes-exclude).

    <Callout variant="tip">
      Estas configuraciones de atributos son específicas del evento span. La configuración del atributo se puede aplicar globalmente a todos los tipos de eventos [con esta configuración](/docs/agents/net-agent/configuration/net-agent-configuration#agent-attributes).
    </Callout>
  </Collapser>
</CollapserGroup>

### Capturar encabezados de solicitud HTTP [#capture_http_request_headers]

El elemento `allowAllHeaders` es hijo del elemento `configuration` . Establezca esto en `true` para permitir que el agente .NET capture todos los encabezados de solicitud HTTP y los aplique a `Span` y `Transaction` evento como `request.headers.{http-header-name}` atributo. Establezca esto en `false` para permitir que el agente .NET solo recopile los siguientes encabezados de solicitud HTTP&#x3A;

* `request.headers.referer`
* `request.headers.accept`
* `request.headers.content-length`
* `request.headers.host`
* `request.headers.user-agent`

<CollapserGroup>
  <Collapser
    id="allow-all-headers-enabled"
    title="activado"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Habilite o deshabilite la captura de encabezados de solicitud HTTP. Ejemplo:

    Alternativamente, configure la variable de entorno `NEW_RELIC_ALLOW_ALL_HEADERS` en el entorno de la aplicación:

    ```xml
    <allowAllHeaders enabled="true" />
    <attributes enabled="true">
       <include>request.headers.*</include>
    </attributes>
    ```
  </Collapser>
</CollapserGroup>

<Callout variant="important">
  La configuración `allowAllHeaders` solo está disponible en la versión 8.40.0+ del agente .NET. Cuando se utiliza `allowAllHeaders` para capturar el atributo, el atributo del encabezado de solicitud capturado todavía está siendo controlado por la configuración del [atributo](/docs/agents/net-agent/configuration/net-agent-configuration/#agent-attributes) de nivel raíz y de destino. Sin configurar el `request.header.*` en la lista `include` debajo del elemento `attributes` (consulte lo siguiente), el agente .NET aún filtra todos los atributos de encabezado. El `newrelic.config` predeterminado está configurado para incluir el `request.header.*`.

  ```xml
  <allowAllHeaders enabled="true" />
  <attributes enabled="true">
    <include>request.headers.*</include>
    ...
  </attributes>
  ```

  El valor predeterminado `newrelic.config` también está configurado para excluir explícitamente los siguientes encabezados de solicitud HTTP para evitar que el agente .NET recopile datos no deseados.

  ```xml
  <attributes enabled="true">
    <exclude>request.headers.cookie</exclude>
    <exclude>request.headers.authorization</exclude>
    <exclude>request.headers.proxy-authorization</exclude>
    <exclude>request.headers.x-*</exclude>
  </attributes>
  ```
</Callout>

### Logging de aplicaciones [#application_logging]

<Callout variant="important">
  Estas opciones de configuración solo están disponibles con las versiones 9.7.1 y superiores del agente .NET. Las opciones relacionadas con datos de contexto (atributo personalizado) solo están disponibles en las versiones del agente .NET 10.4.0 y superiores.
</Callout>

El elemento `applicationLogging` es hijo del elemento `configuration` . Utilice `applicationLogging` para configurar la instrumentación de la actividad de logging de su aplicación.

Hay tres subcaracterísticas principales:

1. Métrica: recopile métrica sobre el número total de líneas de log escritas por ciclo de cosecha (`Logging/lines`), así como el número de líneas log escritas en niveles de logging particulares (por ejemplo, `Logging/lines/ERROR`).

2. Reenvío de logs: cuando esté habilitado, el agente capturará datos log y los enviará a New Relic.

   * Datos de contexto (a través de [`AddCustomAttribute`](/docs/apm/agents/net-agent/net-agent-api/itransaction/#addcustomattribute)): cuando esté habilitado, el agente capturará y reenviará cualquier atributo log personalizado. Los elementos `include` y `exclude` son listas separadas por comas de nombres de atributos para incluir o excluir, siguiendo las [mismas reglas](/docs/apm/agents/net-agent/attributes/enable-disable-attributes-net/#attruls) que la configuración de otros atributos de agente. Ambos están vacíos de forma predeterminada, lo que da como resultado que todos los datos del contexto log se capturen y reenvíen.
   * Filtrado de niveles de logs: cuando se configura con uno o más niveles de logs en una lista separada por comas, el agente evitará que los mensajes en esos niveles sean capturados y reenviados.

3. Decoración log local: cuando esté habilitado, su registro existente se decorará con metadatos que vinculan el registro con otros datos de New Relic, como los errores.

Para obtener más detalles, consulte [nuestros documentos sobre el uso de logs en el contexto del agente .NET](/docs/logs/logs-context/net-configure-logs-context-all).

```xml
<applicationLogging enabled="true">
  <metrics enabled="true" />
  <forwarding enabled="true" maxSamplesStored="10000" logLevelDenyList="">
    <contextData enabled="false" include="" exclude="" />
  </forwarding>
  <localDecorating enabled="false" />
</applicationLogging>
```

Estas características también se pueden configurar mediante variables de entorno:

```ini
NEW_RELIC_APPLICATION_LOGGING_ENABLED=true
NEW_RELIC_APPLICATION_LOGGING_METRICS_ENABLED=true
NEW_RELIC_APPLICATION_LOGGING_FORWARDING_ENABLED=true
NEW_RELIC_APPLICATION_LOGGING_FORWARDING_CONTEXT_DATA_ENABLED=true
NEW_RELIC_APPLICATION_LOGGING_FORWARDING_CONTEXT_DATA_INCLUDE="myCustomAttribute1, myOtherCustomAttribute*"
NEW_RELIC_APPLICATION_LOGGING_FORWARDING_CONTEXT_DATA_EXCLUDE="myCustomAttribute2, myOtherCustomAttributeMoreSpecificName"
NEW_RELIC_APPLICATION_LOGGING_FORWARDING_MAX_SAMPLES_STORED=10000
NEW_RELIC_APPLICATION_LOGGING_FORWARDING_LOG_LEVEL_DENYLIST="debug, warn"
NEW_RELIC_APPLICATION_LOGGING_LOCAL_DECORATING_ENABLED=true
```

El elemento `applicationLogging` admite los siguientes atributos y subelementos:

<CollapserGroup>
  <Collapser
    id="applog-enabled"
    title="activado"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Habilite o deshabilite todas las características de la instrumentación de logging. Si es `true`, la configuración de subcaracterística individual entra en vigor. Si `false`, no se habilita ninguna característica de instrumentación de logging.

    O emplee la variable de entorno `NEW_RELIC_APPLICATION_LOGGING_ENABLED` .
  </Collapser>

  <Collapser
    id="applog-metrics"
    title="métrica"
  >
    Utilice este subelemento para habilitar la recopilación de métricas de registro (como `Logging/lines`) para el marco de registro .NET común. El valor predeterminado del atributo `enabled` es `true`.

    O emplee la variable de entorno `NEW_RELIC_APPLICATION_LOGGING_METRICS_ENABLED` .
  </Collapser>

  <Collapser
    id="applog-forwarding"
    title="reenvío"
  >
    Emplee este subelemento para habilitar el reenvío del registro de su aplicación a New Relic. El valor predeterminado del atributo `enabled` es `true`, también puede emplear la variable de entorno `NEW_RELIC_APPLICATION_LOGGING_FORWARDING_ENABLED` .

    El valor predeterminado del atributo `maxSamplesStored` es `10000`, también puede usar la variable env `NEW_RELIC_APPLICATION_LOGGING_FORWARDING_MAX_SAMPLES_STORED` para esta configuración. Establezca esto en un valor más bajo para reducir la cantidad de líneas log enviadas (puede causar ejemplificación log ). Establezca esto en un valor más alto para enviar más líneas log .

    Cada log recibe la misma prioridad que su transacción asociada. Los logs que ocurren fuera de una transacción recibirán una prioridad aleatoria. Es posible que algunos logs no se incluyan porque están limitados por `maxSamplesStored`. Por ejemplo, si el logging `maxSamplesStored` se establece en 10 000 y la transacción 1 tiene 10 000 entradas log , solo se registrarán las entradas log de la transacción 1. Si la transacción 1 tiene menos de 10 000 logs, recibirá todos los logs de la transacción 1. Si todavía hay espacio, recibirás todo el logde la transacción 2, y así sucesivamente.

    Si después de todo se registran los logs de transacciones muestreadas y no han alcanzado el límite en `maxSamplesStored`, entonces se envían mensajes de logde transacciones que no estaban en nuestro muestreo. Si queda alguno, se registran mensajes de logfuera de la transacción.

    Emplee el atributo `logLevelDenyList` (o la variable de entorno `NEW_RELIC_APPLICATION_LOGGING_FORWARDING_LOG_LEVEL_DENYLIST`) para filtrar mensajes de log del nivel de logespecificado. El valor de este atributo es una lista de niveles separados por comas que no distinguen entre mayúsculas y minúsculas. Fuera de mayúsculas y minúsculas, la cadena de nivel de logdebe coincidir exactamente con el nivel de logque se está filtrando; no se admiten comodines ni expresiones regulares. Por ejemplo, si el valor se estableció en `logLevelDenyList="debug,warn"`, cualquier mensaje de log con el nivel de logde `Debug` o `Warn` no será capturado ni reenviado, pero un log con un nivel de `Warning` aún ser enviado a New Relic.

    <Callout variant="caution">
      Si ya está enviando el logde su aplicación a New Relic utilizando una solución de reenvío de logs existente, asegúrese de desactivarla antes de habilitar el reenvío de logs en el agente, para evitar que se le facture por datos log duplicados.
    </Callout>
  </Collapser>

  <Collapser
    id="contextData"
    title="contextData (atributo personalizado)"
  >
    Utilice este subelemento, que es hijo del elemento `forwarding` , para configurar la captura y el reenvío de datos de contexto de registro ([atributo personalizado](/docs/apm/agents/net-agent/net-agent-api/itransaction/#addcustomattribute)), en las versiones del agente 10.4.0 y superiores.

    Establezca el atributo `enabled` en `true` para habilitar la captura y el reenvío de datos de contexto de registro a New Relic; también puede emplear la variable de entorno `NEW_RELIC_APPLICATION_LOGGING_FORWARDING_CONTEXT_DATA_ENABLED`. El valor predeterminado es `false`.

    El atributo `include` es una lista separada por comas de nombres de atributo para incluir cuando la captura de datos de contexto está habilitada; también puede usar la variable de entorno `NEW_RELIC_APPLICATION_LOGGING_FORWARDING_CONTEXT_DATA_INCLUDE`. El valor predeterminado es una cadena vacía, que significa "incluir todo".

    El atributo `exclude` es una lista de nombres de atributos separados por comas para excluir cuando la captura de datos de contexto está habilitada; también puede usar la variable de entorno `NEW_RELIC_APPLICATION_LOGGING_FORWARDING_CONTEXT_DATA_EXCLUDE`. El valor predeterminado es una cadena vacía, que significa "no excluir nada".

    Las listas de inclusión y exclusión siguen las [mismas reglas de precedencia que la configuración de otros atributos del agente](/docs/apm/agents/net-agent/attributes/enable-disable-attributes-net/#attruls).
  </Collapser>

  <Collapser
    id="localDecorating"
    title="Decoración log locales"
  >
    Utilice este subelemento para habilitar la decoración del registro de su aplicación con metadatos de enlace de New Relic. El valor predeterminado del atributo `enabled` es `false`. Se requieren algunos cambios de configuración adicionales para la decoración log local; consulte [.NET: Configurar logs en el contexto](/docs/logs/logs-context/net-configure-logs-context-all#2-decorate) para obtener más información.
  </Collapser>
</CollapserGroup>

### Nivel de código métrico [#code_level_metrics]

El elemento `codeLevelMetrics` es hijo del elemento `configuration` . Utilice `codeLevelMetrics` para habilitar la compatibilidad métrica a nivel de código en CodeStream a través de metadatos de métodos instrumentados adicionales capturados como atributo en el evento span.

Para obtener más detalles, consulte nuestra documentación para [la integración de New Relic CodeStream](/docs/apm/agents/net-agent/other-features/net-codestream-integration).

```xml
<codeLevelMetrics enabled="true" />
```

Esto también se puede configurar mediante la variable de entorno:

```ini
NEW_RELIC_CODE_LEVEL_METRICS_ENABLED=true
```

### Monitoreo de IA [#ai_monitoring]

De forma predeterminada, el monitoreo de IA está deshabilitado. Para habilitar el monitoreo de IA, establezca el atributo `enabled` en `true` en el elemento `aiMonitoring` . El elemento `aiMonitoring` es hijo del elemento `configuration` .

```xml
<aiMonitoring enabled="true" />
```

Esto también se puede configurar mediante la variable de entorno:

```ini
NEW_RELIC_AI_MONITORING_ENABLED=true
```

El elemento `aiMonitoring` admite los siguientes subelementos:

<CollapserGroup>
  <Collapser
    id="aiMonitoring_recordContent"
    title="recordContent"
  >
    Utilice este subelemento para permitir que todas las entradas y salidas del evento LLM se envíen a New Relic. El valor predeterminado del atributo `enabled` es `true`. La grabación de contenido está deshabilitada en el modo de alta seguridad.

    Tenga en cuenta que si la grabación de contenido está deshabilitada, los clientes deben proporcionar el recuento token de LLM llamando a la [API`SetLlmTokenCountingCallback` ](/docs/agents/net-agent/net-agent-api/setllmtokencountingcallback-net-agent-api). Si no se proporciona esta devolución de llamada, el agente no podrá proporcionar el recuento token LLM.

    ```xml
    <aiMonitoring enabled="true">
      <recordContent enabled="false" />
    </aiMonitoring>
    ```

    Esto también se puede configurar mediante la variable de entorno:

    ```ini
    NEW_RELIC_AI_MONITORING_RECORD_CONTENT_ENABLED=false
    ```
  </Collapser>
</CollapserGroup>

## Configuraciones en app.config o web.config [#app-config-settings]

Para aplicaciones de consola de ASP.NET y .NET framework , también puede configurar las siguientes opciones en `app.config` o `web.config` de su aplicación, dentro del elemento más externo, `<configuration>`:

<CollapserGroup>
  <Collapser
    id="app-cfg-agent-enabled"
    title="Activar y desactivar el agente"
  >
    ```xml
    <appSettings>
       <add key="NewRelic.AgentEnabled" value="false" />
    </appSettings>
    ```

    <Callout variant="important">
      Si el agente está deshabilitado en el `newrelic.config` local o global, la configuración `NewRelic.AgentEnabled` en estos archivos **no** habilitará el agente.
    </Callout>
  </Collapser>

  <Collapser
    id="app-cfg-application-name"
    title="Nombre de la aplicación"
  >
    Para obtener más información, consulte [Asigne un nombre a su aplicación .NET](/docs/agents/net-agent/installation-configuration/name-your-net-application).

    ```xml
    <appSettings>
      <add key="NewRelic.AppName" value="Descriptive Name" />
    </appSettings>
    ```
  </Collapser>

  <Collapser
    id="app-cfg-license-key"
    title="Clave de licencia"
  >
    ```xml
    <appSettings>
      <add key="NewRelic.LicenseKey" value="YOUR_LICENSE_KEY" />
    </appSettings>
    ```
  </Collapser>

  <Collapser
    id="app-cfg-location"
    title="Cambiar la ubicación de newrelic.config"
  >
    Designa una ubicación alternativa para el archivo de configuración fuera de la raíz local de la aplicación o de la ubicación de configuración global. La ubicación ingresada debe ser una ruta absoluta.

    ```xml
    <appSettings>
      <add key="NewRelic.ConfigFile" value="C:\Path-to-alternate-config-dir\newrelic.config" />
    </appSettings>
    ```
  </Collapser>
</CollapserGroup>

## Configuración en appsettings.json [#appsettings-json]

Para aplicaciones .NET Core, puede configurar las siguientes opciones en `appsettings.json` si se cumple lo siguiente:

* El archivo `appsettings.json` debe estar ubicado en el directorio de trabajo actual de la aplicación.

* La solicitud debe tener la siguiente dependencia:

  * [`Microsoft.Extensions.Configuration`](https://www.nuget.org/packages/Microsoft.Extensions.Configuration)
  * [`Microsoft.Extensions.Configuration.Json`](https://www.nuget.org/packages/Microsoft.Extensions.Configuration.Json)
  * [`Microsoft.Extensions.Configuration.EnvironmentVariables`](https://www.nuget.org/packages/Microsoft.Extensions.Configuration.EnvironmentVariables)

<CollapserGroup>
  <Collapser
    id="appsettings-json-agent-enabled"
    title="Activar y desactivar el agente"
  >
    ```json
    {
       "NewRelic.AgentEnabled":"false"
    }
    ```

    <Callout variant="important">
      Si el agente está deshabilitado en el `newrelic.config` local o global, la configuración `NewRelic.AgentEnabled` en estos archivos habilitará el agente.
    </Callout>
  </Collapser>

  <Collapser
    id="appsettings-json-application-name"
    title="Nombre de la aplicación"
  >
    Para obtener más información, consulte [Asigne un nombre a su aplicación .NET](/docs/agents/net-agent/installation-configuration/name-your-net-application).

    ```json
    {
      "NewRelic.AppName": "Descriptive Name"
    }
    ```
  </Collapser>

  <Collapser
    id="appsettings-json-application-license-key"
    title="Clave de licencia"
  >
    ```json
    {
      "NewRelic.LicenseKey": "YOUR_LICENSE_KEY"
    }
    ```
  </Collapser>

  <Collapser
    id="appsettings-json-location"
    title="Cambiar la ubicación de newrelic.config"
  >
    Designa una ubicación alternativa para el archivo de configuración fuera de la raíz local de la aplicación o de la ubicación de configuración global. La ubicación ingresada debe ser una ruta absoluta.

    ```json
    {
      "NewRelic.ConfigFile": "C:\Path-to-alternate-config-dir\newrelic.config"
    }
    ```
  </Collapser>
</CollapserGroup>

<Callout variant="important">
  Para [aplicaciones ASP..NET Core](https://asp.net/), el agente .NET leerá desde `appsettings.{environment}.json` si configura la variable `ASPNETCORE_ENVIRONMENT` .
</Callout>
