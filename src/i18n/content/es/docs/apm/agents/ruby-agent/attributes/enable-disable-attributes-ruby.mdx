---
title: Activar y desactivar atributo (Ruby)
tags:
  - Agents
  - Ruby agent
  - Attributes
metaDescription: 'How to include and exclude specific attributes for your New Relic Ruby agent, including properties and rules.'
freshnessValidatedDate: never
translationType: machine
---

Esto describe las propiedades para habilitar o deshabilitar el atributo y las reglas que New Relic usa al determinar qué atributo incluir o excluir para un [destino](/docs/agents/manage-apm-agents/agent-data/agent-attributes#destinations). Esto también incluye un resumen de las propiedades del agente Ruby que han quedado obsoletas o eliminadas con el lanzamiento del atributo del agente New Relic.

## Propiedades

Utilice las siguientes propiedades para habilitar o deshabilitar el atributo:

<CollapserGroup>
  <Collapser
    id="attributes-enabled"
    title="attributes.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            Variable ambiental
          </th>

          <td>
            `NEW_RELIC_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    Si `true`, habilita la captura del atributo para todos los destinos.
  </Collapser>

  <Collapser
    id="transaction_tracer-attributes-enabled"
    title="transaction_tracer.attributes.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            (Dinámica)
          </td>
        </tr>

        <tr>
          <th>
            Variable ambiental
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_TRACER_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    Si `true`, el agente captura atributo de la traza de la transacción.
  </Collapser>

  <Collapser
    id="transaction_events-attributes-enabled"
    title="transaction_events.attributes.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            (Dinámica)
          </td>
        </tr>

        <tr>
          <th>
            Variable ambiental
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_EVENTS_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    Si `true`, el agente captura el atributo del evento de transacción.
  </Collapser>

  <Collapser
    id="error_collector-attributes-enabled"
    title="error_collector.attributes.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            (Dinámica)
          </td>
        </tr>

        <tr>
          <th>
            Variable ambiental
          </th>

          <td>
            `NEW_RELIC_ERROR_COLLECTOR_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    Si es `true`, el agente captura el atributo de la colección de errores.
  </Collapser>

  <Collapser
    id="browser_monitoring-attributes-enabled"
    title="browser_monitoring.attributes.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            (Dinámica)
          </td>
        </tr>

        <tr>
          <th>
            Variable ambiental
          </th>

          <td>
            `NEW_RELIC_BROWSER_MONITORING_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    Si es `true`, el agente captura el atributo de <InlinePopover type="browser"/>.
  </Collapser>

  <Collapser
    id="span-events-attributes-enabled"
    title="span_events.attributes.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            (Dinámica)
          </td>
        </tr>

        <tr>
          <th>
            Variable ambiental
          </th>

          <td>
            `NEW_RELIC_SPAN_EVENTS_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    Si `true`, el agente captura el atributo en el evento span.
  </Collapser>

  <Collapser
    id="transaction-segments-attributes-enabled"
    title="transaction_segments.attributes.enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Booleano
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            (Dinámica)
          </td>
        </tr>

        <tr>
          <th>
            Variable ambiental
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_SEGMENTS_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </table>

    Si `true`, el agente captura el atributo en los segmentos de transacción.
  </Collapser>

  <Collapser
    id="attributes-exclude"
    title="attributes.exclude"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Matriz
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Variable ambiental
          </th>

          <td>
            `NEW_RELIC_ATTRIBUTES_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    Prefijo de atributo a excluir de todos los destinos. Permite `*` como comodín al final.
  </Collapser>

  <Collapser
    id="transaction_tracer-attributes-exclude"
    title="transaction_tracer.attributes.exclude"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Matriz
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Variable ambiental
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_TRACER_ATTRIBUTES_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    Prefijo de atributo a excluir de la traza de la transacción. Permite `*` como comodín al final.
  </Collapser>

  <Collapser
    id="transaction_events-attributes-exclude"
    title="transaction_events.attributes.exclude"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Matriz
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Variable ambiental
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_EVENTS_ATTRIBUTES_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    Prefijo de atributo a excluir del evento de transacción. Permite `*` como comodín al final.
  </Collapser>

  <Collapser
    id="error_collector-attributes-exclude"
    title="error_collector.attributes.exclude"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Matriz
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Variable ambiental
          </th>

          <td>
            `NEW_RELIC_ERROR_COLLECTOR_ATTRIBUTES_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    Prefijo del atributo a excluir de la colección de errores. Permite `*` como comodín al final.

    Para evitar la recopilación [de mensajes de error](/attribute-dictionary?attribute_name=error.message) , utilice la configuración [strip_exception_messages](/docs/agents/ruby-agent/configuration/ruby-agent-configuration#strip_exception_messages-enabled) .
  </Collapser>

  <Collapser
    id="browser_monitoring-attributes-exclude"
    title="browser_monitoring.attributes.exclude"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Matriz
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Variable ambiental
          </th>

          <td>
            `NEW_RELIC_BROWSER_MONITORING_ATTRIBUTES_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    Prefijo de atributo a excluir de <InlinePopover type="browser"/>. Permite `*` como comodín al final.
  </Collapser>

  <Collapser
    id="span-events-attributes-exclude"
    title="span_events.attributes.exclude"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Matriz
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Variable ambiental
          </th>

          <td>
            `NEW_RELIC_SPAN_EVENTS_ATTRIBUTES_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    Prefijo de atributo a excluir del evento span. Permite `*` como comodín al final.
  </Collapser>

  <Collapser
    id="transaction-segments-attributes-exclude"
    title="transaction_segments.attributes.exclude"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Matriz
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Variable ambiental
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_SEGMENTS_ATTRIBUTES_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    Prefijo de atributo a excluir de segmentos de transacción. Permite `*` como comodín al final.
  </Collapser>

  <Collapser
    id="attributes-include"
    title="attributes.include"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Matriz
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Variable ambiental
          </th>

          <td>
            `NEW_RELIC_ATTRIBUTES_INCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    Prefijo de atributo a incluir en todos los destinos. Permite `*` como comodín al final.
  </Collapser>

  <Collapser
    id="transaction_tracer-attributes-include"
    title="transaction_tracer.attributes.include"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Matriz
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Variable ambiental
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_TRACER_ATTRIBUTES_INCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    Prefijo de atributo a incluir en la traza de la transacción. Permite `*` como comodín al final.
  </Collapser>

  <Collapser
    id="transaction_events-attributes-include"
    title="transaction_events.attributes.include"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Matriz
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Variable ambiental
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_EVENTS_ATTRIBUTES_INCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    Prefijo de atributo a incluir en evento de transacción. Permite `*` como comodín al final.
  </Collapser>

  <Collapser
    id="error_collector-attributes-include"
    title="error_collector.attributes.include"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Matriz
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Variable ambiental
          </th>

          <td>
            `NEW_RELIC_ERROR_COLLECTOR_ATTRIBUTES_INCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    Prefijo del atributo a incluir en la colección de errores. Permite `*` como comodín al final.
  </Collapser>

  <Collapser
    id="browser_monitoring-attributes-include"
    title="browser_monitoring.attributes.include"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Matriz
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Variable ambiental
          </th>

          <td>
            `NEW_RELIC_BROWSER_MONITORING_ATTRIBUTES_INCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    Prefijo de atributo a incluir en el monitoreo del navegador. Permite `*` como comodín al final.
  </Collapser>

  <Collapser
    id="span-events-attributes-include"
    title="span_events.attributes.include"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Matriz
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Variable ambiental
          </th>

          <td>
            `NEW_RELIC_SPAN_EVENTS_ATTRIBUTES_INCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    Prefijo de atributo a incluir en span evento. Permite `*` como comodín al final.
  </Collapser>

  <Collapser
    id="transaction-segments-attributes-include"
    title="transaction_segments.attributes.include"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Tipo
          </th>

          <td>
            Matriz
          </td>
        </tr>

        <tr>
          <th>
            Por defecto
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Variable ambiental
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_SEGMENTS_ATTRIBUTES_INCLUDE`
          </td>
        </tr>
      </tbody>
    </table>

    Prefijo de atributo a incluir en segmentos de transacción. Permite `*` como comodín al final.
  </Collapser>
</CollapserGroup>

## Reglas de atributos [#attruls]

New Relic sigue estas reglas al determinar qué atributo incluir o excluir para un destino.

<CollapserGroup>
  <Collapser
    id="rule-root-precedence"
    title="El nivel raíz tiene prioridad para habilitado."
  >
    El campo `attributes.enabled` prevalece sobre todas las demás configuraciones. Cuando `false`, no se informará ningún atributo a New Relic.

    Configuración de ejemplo:

    ```
    attributes.enabled: false
        attributes.include: foo, bar
        transaction_tracer.attributes.enabled: true
    ```

    Salida de ejemplo:

    ```
    Keys passed in: foo, bar, baz
        Keys included for all destinations:
        Keys excluded for all destinations: foo, bar, baz
    ```
  </Collapser>

  <Collapser
    id="rule-destination-precedence"
    title="El destino habilitado tiene prioridad sobre incluir y excluir."
  >
    Las marcas `YOUR_DESTINATION.attributes.enabled` tienen prioridad sobre las claves de inclusión y exclusión.

    Configuración de ejemplo:

    ```
    transaction_tracer.attributes.enabled: false
        attributes.include: one, two
        transaction_tracer.attributes.include: three, four
    ```

    Salida de ejemplo:

    ```
    Keys passed in: one, two, three, four
        Keys included for transaction traces:
        Keys excluded for transaction traces: one, two, three, four
    ```
  </Collapser>

  <Collapser
    id="rule-included-destination"
    title="El atributo se incluye si el destino está habilitado."
  >
    Si un destino está habilitado, todos los atributos del usuario se envían a ese destino de forma predeterminada.

    <DNT>**Note:**</DNT> Todos los atributos de usuario están predeterminados en `true`. Sin embargo, de forma predeterminada, los parámetros de solicitud están deshabilitados para todos los destinos.

    Configuración de ejemplo:

    ```
    attributes.enabled: true
        attributes.exclude: baz
    ```

    Salida de ejemplo:

    ```
    Keys passed in: foo, bar, baz
        Keys included: foo, bar
        Keys excluded: baz
    ```
  </Collapser>

  <Collapser
    id="rule-exclude-wins"
    title="Excluir siempre reemplaza a incluir."
  >
    Si la misma clave aparece en las listas de inclusión y exclusión, entonces se excluirá el atributo con la clave especificada.

    Configuración de ejemplo:

    ```
    attributes.enabled: true
        attributes.include: foo, bar
        attributes.exclude: nerd, bar
    ```

    Salida de ejemplo:

    ```
    Keys passed in: foo, bar, nerd
        Keys included: foo
        Keys excluded: nerd, bar
    ```
  </Collapser>

  <Collapser
    id="rule-keys-case-sensitive"
    title="Las claves distinguen entre mayúsculas y minúsculas."
  >
    Las claves distinguen entre mayúsculas y minúsculas.

    Configuración de ejemplo:

    ```
    attributes.enabled: true
        attributes.exclude: username, UsErNaMe
    ```

    Salida de ejemplo:

    ```
    Keys passed in: username, Username, USERNAME, UsErNaMe, userNAME
        Keys included: Username, USERNAME, userNAME
        Keys excluded: username, UsErNaMe
    ```
  </Collapser>

  <Collapser
    id="rule-star-wildcard"
    title={<>Utilice <InlineCode>\*</InlineCode> como comodín.</>}
  >
    Puede utilizar un asterisco `*` al final de una clave como comodín. Esto coincidirá con un conjunto de atributos con el mismo prefijo.

    Configuración de ejemplo:

    ```
    attributes.enabled: true
        attributes.include: custom*
        attributes.exclude: request.parameters.*
    ```

    Salida de ejemplo:

    ```
    Keys passed in: custom, custom.key1, custom.key2, request.parameters., request.parameters.foo, request.parameters.bar
        Keys included: custom, custom.key1, custom.key2
        Keys excluded: request.parameters., request.parameters.foo, request.parameters.bar
    ```
  </Collapser>

  <Collapser
    id="rule-specific-wins"
    title="La configuración más específica de una clave tiene prioridad."
  >
    Si varios atributos de inclusión o exclusión afectan a la misma clave, la configuración más específica tendrá prioridad.

    Configuración de ejemplo:

    ```
    attributes.enabled: true
        attributes.include: request.parameters.foo
        attributes.exclude: request.parameters.*
    ```

    Salida de ejemplo:

    ```
    Keys passed in: request.parameters., request.parameters.foo, request.parameters.bar
        Keys included: request.parameters.foo
        Keys excluded: request.parameters., request.parameters.bar
    ```
  </Collapser>

  <Collapser
    id="rule-destination-include-exclude"
    title="Incluir o excluir afecta al destino específico."
  >
    Si el atributo incluir o excluir se especifica en un destino, solo afecta a ese destino.

    Configuración de ejemplo:

    ```
    attributes.include: foo
        transaction_events.attributes.exclude: foo
    ```

    Salida de ejemplo:

    ```
    Keys passed in: foo
        Keys included for transaction events:
        Keys included for other destinations: foo
        Keys excluded for transaction events: foo
    ```
  </Collapser>
</CollapserGroup>

## Propiedades relacionadas con URI [#uri]

De forma predeterminada, el agente Ruby informa identificadores uniformes de recursos (URI) a New Relic en varios lugares diferentes, incluidos los siguientes destinos:

* El atributo `request.uri` del [evento de error](/docs/apm/applications-menu/error-analytics/error-analytics-manage-error-traces)
* El atributo `http.url` del [evento span](/docs/apm/distributed-tracing/getting-started/introduction-distributed-tracing)
* El atributo `url` de [la traza SQL lenta](/docs/apm/applications-menu/monitoring/view-slow-query-details)
* El atributo `uri` de [segmentos de solicitud externos](/docs/agents/ruby-agent/features/http-client-tracing-ruby)

New Relic recomienda informar estos URI, ya que pueden contener información de depuración útil. Si sus URI contienen datos confidenciales que no desea informar, como direcciones de correo electrónico o ID de cuentas, puede desactivar los informes de URI. Para deshabilitar los informes de URI, agregue cualquiera de los nombres de atributos anteriores a la lista `attributes.exclude` .

Por ejemplo, agregar la siguiente clave a su archivo de configuración evitará que el agente informe cualquiera de las propiedades relacionadas con el URI:

```
attributes.exclude: uri
```

## Propiedades obsoletas y eliminadas [#deprecated]

Las siguientes propiedades han quedado obsoletas o eliminadas. Cambie a la nueva configuración de atributos para estas propiedades cuando actualice su agente Ruby.

<table>
  <thead>
    <tr>
      <th width={200}>
        <DNT>
          **Deprecated property**
        </DNT>
      </th>

      <th>
        <DNT>
          **New property**
        </DNT>
      </th>

      <th>
        <DNT>
          **Removed Version**
        </DNT>
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `capture_params`
      </td>

      <td>
        `attributes.include: request.parameters.*`
      </td>

      <td>
        N/A
      </td>
    </tr>

    <tr>
      <td>
        `resque.capture_params`
      </td>

      <td>
        `attributes.include: job.resque.args.*`
      </td>

      <td>
        9.0.0
      </td>
    </tr>

    <tr>
      <td>
        `sidekiq.capture_params`
      </td>

      <td>
        `attributes.include: job.sidekiq.args.*`
      </td>

      <td>
        9.0.0
      </td>
    </tr>

    <tr>
      <td>
        `transaction_tracer.capture_attributes`
      </td>

      <td>
        `transaction_tracer.attributes.enabled`
      </td>

      <td>
        9.0.0
      </td>
    </tr>

    <tr>
      <td>
        `error_collector.capture_attributes`
      </td>

      <td>
        `error_collector.attributes.enabled`
      </td>

      <td>
        9.0.0
      </td>
    </tr>

    <tr>
      <td>
        `browser_monitoring.capture_attributes`
      </td>

      <td>
        `browser_monitoring.attributes.enabled`
      </td>

      <td>
        9.0.0
      </td>
    </tr>

    <tr>
      <td>
        `analytics_events.capture_attributes`
      </td>

      <td>
        `transaction_events.attributes.enabled`
      </td>

      <td>
        9.0.0
      </td>
    </tr>
  </tbody>
</table>
