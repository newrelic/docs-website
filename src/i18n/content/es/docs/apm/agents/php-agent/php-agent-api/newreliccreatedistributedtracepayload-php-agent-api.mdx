---
title: newrelic_create_distributed_trace_payload (API del agente PHP)
type: apiDoc
shortDescription: Crea una carga útil rastreo distribuida.
tags:
  - Agents
  - PHP agent
  - PHP agent API
metaDescription: Distributed tracing allows you to see the path a request takes as it travels through a distributed system. Use this API to create a distributed trace payload.
freshnessValidatedDate: never
translationType: machine
---

## Sintaxis

```php
newrelic_create_distributed_trace_payload()
```

Crea una carga útil rastreo distribuida.

## Requisitos

Requiere [la versión 8.4 o superior](/docs/release-notes/agent-release-notes/php-release-notes) del agente PHP.

## Descripción

[rastreo distribuido](/docs/agents/php-agent/features/distributed-tracing-php) permite ver el camino que sigue una solicitud a medida que viaja a través de un sistema distribuido.

<Callout variant="important">
  Con [la versión 9.10 o](/docs/release-notes/agent-release-notes/php-release-notes) superior del agente PHP, las siguientes funciones JSON ahora se consideran obsoletas y se eliminarán en una versión futura:

  ```php
  newrelic_create_distributed_trace_payload()
  newrelic_accept_distributed_trace_payload($payload)
  newrelic_accept_distributed_trace_payload_httpsafe($payload)
  ```

  En su lugar, utilice la API que sea compatible con la compatibilidad con W3C Trace Context, agregada en la versión 9.8 del agente. Con esto, la API para aplicaciones instrumentadas manualmente ha cambiado de las funciones relacionadas con la carga útil JSON a las siguientes formas de matriz de encabezado:

  ```php
  newrelic_insert_distributed_trace_headers($outbound_headers)
  newrelic_accept_distributed_trace_headers($inbound_headers)
  ```
</Callout>

## Valores de retorno

Este método devuelve un objeto de tipo `newrelic\DistributedTracePayload.`Este objeto tiene dos métodos que representarán una carga útil distribuida de rastreo como texto.

```php
$payload = newrelic_create_distributed_trace_payload(); // renders the payload as a JSON string
$jsonText = $payload->text(); // renders the payload as an string suitable for transport via HTTP (query string, POST param, HTTP headers, etc.)
$httpSafeString = $payload->httpSafe();
```

## Ejemplos

Para ver ejemplos de cómo y cuándo utilizar este método API, consulte la documentación para [instrumentar aplicaciones y servicios manualmente](/docs/agents/php-agent/features/distributed-tracing-php#manual).
