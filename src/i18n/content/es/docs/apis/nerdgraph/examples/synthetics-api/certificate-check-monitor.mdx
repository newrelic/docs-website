---
title: Gestionar monitores de comprobación de certificados
tags:
  - Synthetics
  - APIs
  - NerdGraph
  - Examples
metaDescription: How to use New Relic NerdGraph API to create and update certificate check monitors for synthetic monitoring.
freshnessValidatedDate: never
translationType: machine
---

New Relic le permite emplear NerdGraph para crear [monitores de verificación de certificados](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors). Los monitores de verificación de certificados rastrean las fechas de vencimiento de los certificados SSL y le notifican cuando los certificados están a punto de vencer. Este tutorial proporciona ejemplos de cómo emplear la API NerdGraph para automatizar la creación de monitores de verificación de certificados.

## Crear un monitor de verificación de certificados [#create-certificate-check]

Puede crear un monitor de verificación de certificado empleando la mutación `syntheticsCreateCertCheckMonitor`. Esta mutación le permite configurar el monitoreo de la expiración del certificado SSL en cualquier dominio.

### parámetro de entrada

<table>
  <thead>
    <tr>
      <th>
        Parámetro
      </th>

      <th>
        Tipo de datos
      </th>

      <th>
        ¿Es obligatorio?
      </th>

      <th>
        Descripción
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `accountId`
      </td>

      <td>
        Entero
      </td>

      <td>
        Sí
      </td>

      <td>
        [ID de su cuenta de](/docs/accounts/accounts-billing/account-structure/account-id)

         New Relic donde se creará el monitor.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.domain`
      </td>

      <td>
        Cadena
      </td>

      <td>
        Sí
      </td>

      <td>
        El dominio que se debe monitorear para verificar la expiración del certificado (por ejemplo, 

        `example.com`

        ).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.locations.public`
      </td>

      <td>
        Matriz
      </td>

      <td>
        Sí
      </td>

      <td>
        matriz de 

        [ubicación pública](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors/#setting-location)

         identificador donde el monitor ejecutará comprobaciones (por ejemplo, 

        `["US_EAST_1", "US_WEST_1"]`

        ).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.name`
      </td>

      <td>
        Cadena
      </td>

      <td>
        Sí
      </td>

      <td>
        El nombre para mostrar de su monitor de verificación de certificado.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.numberDaysToFailBeforeCertExpires`
      </td>

      <td>
        Entero
      </td>

      <td>
        Sí
      </td>

      <td>
        Número de días antes de la expiración del certificado para que se active una falla. Por ejemplo, si se establece en 30, significa que el monitor fallará cuando al certificado le falten 30 días o menos para su vencimiento.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.period`
      </td>

      <td>
        Enumeración
      </td>

      <td>
        Sí
      </td>

      <td>
        Con qué frecuencia se ejecuta el monitor. Opciones: 

        `EVERY_MINUTE`

        , 

        `EVERY_5_MINUTES`

        , 

        `EVERY_10_MINUTES`

        , 

        `EVERY_15_MINUTES`

        , 

        `EVERY_30_MINUTES`

        , 

        `EVERY_HOUR`

        , 

        `EVERY_6_HOURS`

        , 

        `EVERY_12_HOURS`

        , 

        `EVERY_DAY`

        .
      </td>
    </tr>

    <tr>
      <td>
        `monitor.status`
      </td>

      <td>
        Enumeración
      </td>

      <td>
        Sí
      </td>

      <td>
        El estado del monitor. Opciones: 

        `ENABLED`

         (el monitor está activo y realizando comprobaciones), 

        `DISABLED`

         (el monitor está inactivo).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.apdexTarget`
      </td>

      <td>
        Flotante
      </td>

      <td>
        No
      </td>

      <td>
        Objetivo Apdex del monitor en segundos, empleado para completar reportes SLA. El valor predeterminado es 7,0 segundos.
      </td>
    </tr>
  </tbody>
</table>

### Solicitud de muestra

```graphql
mutation {
  syntheticsCreateCertCheckMonitor(
    accountId: ACCOUNT_ID
    monitor: {
      domain: "DOMAIN"
      locations: { public: ["LOCATION_1", "LOCATION_2"] }
      name: "YOUR_MONITOR_NAME"
      numberDaysToFailBeforeCertExpires: DAYS_UNTIL_EXPIRATION
      period: PERIOD
      status: STATUS
      apdexTarget: APDEX_TARGET
    }
  ) {
    errors {
      description
      type
    }
  }
}
```

### Ejemplo de respuesta

Una respuesta exitosa devuelve `null` para los errores:

```json
{
  "data": {
    "syntheticsCreateCertCheckMonitor": {
      "errors": null
    }
  }
}
```

Si hay algún problema al crear el monitor, la matriz `errors` contendrá objetos con campos `description` y `type` que explican qué salió mal.

## Actualizar un monitor de verificación de certificados [#update-certificate-check]

Puede actualizar un monitor de verificación de certificado existente empleando la mutación `syntheticsUpdateCertCheckMonitor`. Esto le permite modificar la configuración de un monitor de verificación de certificados que ya se creó.

### parámetro de entrada

<table>
  <thead>
    <tr>
      <th>
        Parámetro
      </th>

      <th>
        Tipo de datos
      </th>

      <th>
        ¿Es obligatorio?
      </th>

      <th>
        Descripción
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `guid`
      </td>

      <td>
        Cadena
      </td>

      <td>
        Sí
      </td>

      <td>
        El 

        [GUID](/docs/apis/nerdgraph/examples/synthetics-api/query-synthetics-data#query-monitors)

         de entidad única del monitor que desea actualizar.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.domain`
      </td>

      <td>
        Cadena
      </td>

      <td>
        No
      </td>

      <td>
        El dominio que se debe monitorear para verificar la expiración del certificado (por ejemplo, 

        `example.com`

        ).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.locations.public`
      </td>

      <td>
        Matriz
      </td>

      <td>
        No
      </td>

      <td>
        matriz de 

        [ubicación pública](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors/#setting-location)

         identificador donde el monitor ejecutará comprobaciones (por ejemplo, 

        `["US_EAST_1", "US_WEST_1"]`

        ).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.name`
      </td>

      <td>
        Cadena
      </td>

      <td>
        No
      </td>

      <td>
        El nombre para mostrar actualizado para su monitor de verificación de certificados.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.numberDaysToFailBeforeCertExpires`
      </td>

      <td>
        Entero
      </td>

      <td>
        No
      </td>

      <td>
        Número de días antes de la expiración del certificado para que se active una falla.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.period`
      </td>

      <td>
        Enumeración
      </td>

      <td>
        No
      </td>

      <td>
        Con qué frecuencia se ejecuta el monitor. Opciones: 

        `EVERY_MINUTE`

        , 

        `EVERY_5_MINUTES`

        , 

        `EVERY_10_MINUTES`

        , 

        `EVERY_15_MINUTES`

        , 

        `EVERY_30_MINUTES`

        , 

        `EVERY_HOUR`

        , 

        `EVERY_6_HOURS`

        , 

        `EVERY_12_HOURS`

        , 

        `EVERY_DAY`

        .
      </td>
    </tr>

    <tr>
      <td>
        `monitor.status`
      </td>

      <td>
        Enumeración
      </td>

      <td>
        No
      </td>

      <td>
        El estado del monitor. Opciones: 

        `ENABLED`

         (el monitor está activo y realizando comprobaciones), 

        `DISABLED`

         (el monitor está inactivo).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.apdexTarget`
      </td>

      <td>
        Flotante
      </td>

      <td>
        No
      </td>

      <td>
        Objetivo Apdex del monitor en segundos, empleado para completar reportes SLA. El valor predeterminado es 7,0 segundos.
      </td>
    </tr>
  </tbody>
</table>

### Solicitud de muestra

```graphql
mutation {
  syntheticsUpdateCertCheckMonitor(
    guid: ENTITY_GUID
    monitor: {
      domain: "DOMAIN"
      locations: { public: ["LOCATION_1", "LOCATION_2"] }
      name: "YOUR_MONITOR_NAME"
      numberDaysToFailBeforeCertExpires: DAYS_UNTIL_EXPIRATION
      period: PERIOD
      status: STATUS
      apdexTarget: APDEX_TARGET
    }
  ) {
    errors {
      description
      type
    }
  }
}
```

### Ejemplo de respuesta

Una respuesta exitosa devuelve `null` para los errores:

```json
{
  "data": {
    "syntheticsUpdateCertCheckMonitor": {
      "errors": null
    }
  }
}
```

Si hay algún problema al actualizar el monitor, la matriz `errors` contendrá objetos con campos `description` y `type` que explican qué salió mal.

## Eliminar un monitor de comprobación de certificados [#delete-monitor]

Cuando ya no se necesita un monitor de verificación de certificado, puede eliminarlo de forma permanente empleando la mutación `syntheticsDeleteMonitor`.

Para eliminar un monitor, consulte la sección [Eliminar monitor Sintético](/docs/apis/nerdgraph/examples/synthetics-api/ping-monitor/#delete-monitor).