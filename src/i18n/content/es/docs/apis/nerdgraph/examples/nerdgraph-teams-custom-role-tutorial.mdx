---
title: 'Tutorial de NerdGraph: Crear un rol personalizado para Teams'
tags:
  - Teams
  - APIs
  - NerdGraph
  - Examples
  - Custom roles
metaDescription: How to use New Relic NerdGraph API to create a custom role to create and manage Teams.
freshnessValidatedDate: never
translationType: machine
---

<Callout title="avance">
  Todavía estamos trabajando en esta característica, ¡pero nos encantaría que la probaras!

  Esta característica se proporciona actualmente como parte de un programa de vista previa de conformidad con nuestras [políticas de prelanzamiento](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy).
</Callout>

New Relic Teams te permite conectar la entidad que estás monitoreando con los equipos que la poseen. Cuando puede ver fácilmente quién es el propietario de una entidad, puede acelerar la resolución de problemas, mejorar la colaboración en equipo y mejorar su eficiencia operativa.

## Acceso predeterminado a Teams

New Relic proporciona acceso predeterminado a Teams a través de estos roles estándar:

* **Acceso de lectura**: todos los usuarios tienen acceso de lectura a Teams, incluidos metadatos como información de contacto, miembros del equipo y otros detalles relevantes.
* **Modificar equipos**: el usuario con el rol de **Organization Product Admin** puede modificar equipos. Este es un nuevo rol asignado a todos los usuarios que actualmente tienen el rol **All Product Admin**.
* **Crear y eliminar equipos**: los usuarios con roles de **Organization Manager** o **Authentication Manager** pueden crear y eliminar equipos.

Es posible que necesite un rol personalizado si las licencias predeterminadas no satisfacen las necesidades de su organización. Este tutorial le muestra cómo emplear las mutaciones GraphQL de NerdGraph para crear un rol personalizado para gestionar equipos.

### Descripción general del proceso

Para crear un rol personalizado de administrador de Teams, necesitarás:

1. [Recupere todas las capacidades del ámbito de la organización](#retrieve-organization-scoped-capabilities)
2. [Recuperar el ID de su organización](#retrieve-your-organization-id)
3. [Identificar los ID de licencias necesarias para Teams](#retrieve-organization-scoped-capabilities)
4. [Crear el rol personalizado para el administrador de Teams](#create-custom-role)
5. [Agregar el rol personalizado a un grupo de usuarios](#add-custom-role-to-a-user-group)

## Requisitos previos

Antes de comenzar, cerciorar de tener:

* [Requisitos generales de NerdGraph](/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph/#authentication)
* Licencias del rol de administrador de la organización para crear roles personalizados

## Mutaciones [#mutations]

New Relic proporciona varias mutaciones de NerdGraph para crear roles personalizados para los administradores de equipo.

<CollapserGroup>
  <Collapser id="retrieve-organization-scoped-capabilities" title="Recuperar capacidades del ámbito de la organización">
    Emplee la mutación `customerAdministration` para recuperar una lista de capacidades, sus ID de licencias e información relacionada.

    #### parámetro de entrada

    <table>
      <thead>
        <tr>
          <th>
            Parámetro
          </th>

          <th>
            Tipo de datos
          </th>

          <th>
            ¿Es obligatorio?
          </th>

          <th>
            Descripción
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `eq`
          </td>

          <td>
            Cadena
          </td>

          <td>
            Sí
          </td>

          <td>
            Establezca el valor en 

            `organization`

             para recuperar el rol de los equipos.
          </td>
        </tr>
      </tbody>
    </table>

    #### Solicitud de muestra

    ```graphql
      {
      customerAdministration {
        permissions(filter: {scope: {eq: "organization"}}) {
            items {
              feature
              category
              id
              product
            }
          }
        }
      }

    ```

    #### Ejemplo de respuesta

    ```graphql
    {
      "data": {
        "customerAdministration": {
          "permissions": {
            "items": [
              {
                "category": "READ",
                "feature": "Teams",
                "id": "xxxxx",
                "product": "New Relic One"
              },
              {
                "category": "OTHER",
                "feature": "Teams",
                "id": "xxxxxx",
                "product": "New Relic One"
              },
              {
                "category": "DELETE",
                "feature": "Teams",
                "id": "xxxxx",
                "product": "New Relic One"
              },
              {
                "category": "MODIFY",
                "feature": "Teams",
                "id": "xxxxxx",
                "product": "New Relic One"
              }
            ]
          }
        }
      }
    }

    ```

    **Siguiente paso**: a partir de la respuesta, identifique y copie los ID de licencias donde:

    * `category: "MANAGE"` (o la categoría apropiada para sus necesidades)
    * `feature: "Teams"`

    Necesitarás estos ID para el siguiente paso.
  </Collapser>

  <Collapser id="retrieve-your-organization-id" title="Recuperar el ID de su organización">
    Recupere el ID de su organización, que empleará en mutaciones posteriores.

    #### Solicitud de muestra

    ```graphql
      {
      actor {
        organization {
          id
          }
        }
      }

    ```

    #### Ejemplo de respuesta

    ```graphql
    {
      "data": {
        "actor": {
          "organization": {
            "id": "xxx****xxx-xx**00**-xxx-x*x*-xx**XXX**XX"
          }
        }
      }
    }

    ```

    **Próximo paso**: copie el ID de su organización de la respuesta. Lo necesitarás para crear el rol personalizado.
  </Collapser>

  <Collapser id="create-custom-role" title="Crear un rol personalizado">
    Emplee la mutación `customRoleCreate` para crear su rol personalizado para la administración de Teams.

    #### parámetro de entrada

    <table>
      <thead>
        <tr>
          <th>
            Parámetro
          </th>

          <th>
            Tipo de datos
          </th>

          <th>
            ¿Es obligatorio?
          </th>

          <th>
            Descripción
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `id`
          </td>

          <td>
            Cadena
          </td>

          <td>
            Sí
          </td>

          <td>
            El ID de la organización copiado en el paso anterior.
          </td>
        </tr>

        <tr>
          <td>
            `type`
          </td>

          <td>
            Cadena
          </td>

          <td>
            Sí
          </td>

          <td>
            Establezca el tipo en 

            `organization`

            .
          </td>
        </tr>

        <tr>
          <td>
            `name`
          </td>

          <td>
            Cadena
          </td>

          <td>
            Sí
          </td>

          <td>
            El nombre del rol.
          </td>
        </tr>

        <tr>
          <td>
            `permissionId`
          </td>

          <td>
            Matriz de números enteros
          </td>

          <td>
            Sí
          </td>

          <td>
            Los ID de licencias para la característica Teams recuperados en el primer paso.
          </td>
        </tr>

        <tr>
          <td>
            `scope`
          </td>

          <td>
            Cadena
          </td>

          <td>
            Sí
          </td>

          <td>
            Establezca el alcance en 

            `organization`

            .
          </td>
        </tr>
      </tbody>
    </table>

    #### Solicitud de muestra

    ```graphql

    mutation {
      customRoleCreate(
        container: {id: "xxx****xxx-xx**00**-xxx-x*x*-xx**XXX**XX", type: "organization"}
        name: "Teams manager"
        permissionIds: [xxxxx, xxxxx]
        scope: "organization"
      ) {
        id
      }
    }

    ```

    #### Ejemplo de respuesta

    ```graphql

    {
      "data": {
        "customRoleCreate": {
          "id": 9999999
        }
      }
    }

    ```

    **Siguiente paso**: almacenar el ID de rol devuelto. Lo necesitarás para asignar este rol a un grupo de usuarios.
  </Collapser>

  <Collapser id="add-custom-role-to-a-user-group" title="Agregar un rol personalizado a un grupo de usuarios">
    Luego de crear el rol personalizado, debes asignarlo a un grupo de usuarios en New Relic.

    ### Paso 1: recuperar los ID de grupo

    Emplee la mutación `customerAdministration` para obtener una lista de grupos de usuarios disponibles.

    #### parámetro de entrada

    <table>
      <thead>
        <tr>
          <th>
            Parámetro
          </th>

          <th>
            Tipo de datos
          </th>

          <th>
            ¿Es obligatorio?
          </th>

          <th>
            Descripción
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `id`
          </td>

          <td>
            Cadena
          </td>

          <td>
            Sí
          </td>

          <td>
            El ID de la organización copiado en el paso anterior.
          </td>
        </tr>
      </tbody>
    </table>

    #### Solicitud de muestra

    ```graphql

    {
      customerAdministration {
        groups(filter: {organizationId: {eq: "xxx****xxx-xx**00**-xxx-x*x*-xx**XXX**XX"}}) {
          nextCursor
          items {
            id
            name
            users {
              items {
                id
                email
              }
            }
          }
        }
      }
    }

    ```

    **Siguiente paso**: desde la respuesta, copie el ID del grupo al que desea asignar el rol de Teams.

    ### Paso 2: Asignar el rol a un grupo de usuarios

    Emplee la mutación `authorizationManagementGrantAccess` para asignar el rol personalizado a un grupo de usuarios.

    #### parámetro de entrada

    <table>
      <thead>
        <tr>
          <th>
            Parámetro
          </th>

          <th>
            Tipo de datos
          </th>

          <th>
            ¿Es obligatorio?
          </th>

          <th>
            Descripción
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `roleId`
          </td>

          <td>
            Cadena
          </td>

          <td>
            Sí
          </td>

          <td>
            El ID del rol personalizado del paso anterior.
          </td>
        </tr>

        <tr>
          <td>
            `groupId`
          </td>

          <td>
            Cadena
          </td>

          <td>
            Sí
          </td>

          <td>
            El ID del grupo del paso 1.
          </td>
        </tr>
      </tbody>
    </table>

    #### Solicitud de muestra

    ```graphql
    mutation {
      authorizationManagementGrantAccess(
        grantAccessOptions: {organizationAccessGrants: {roleId: "99999999"}, groupId: "xxx****xxx-xx**00**-xxx-x*x*-xx**XXX**XX"}
      ) {
        roles {
          id
          name
          organizationId
          roleId
          groupId
          displayName
        }
      }
    }

    ```

    #### Ejemplo de respuesta

    ```graphql
    {
      "data": {
        "authorizationManagementGrantAccess": {
          "roles": [
            {
              "displayName": "Teams manager",
              "groupId": null,
              "id": "99999999",
              "name": "teams_manager",
              "organizationId": "xxx****xxx-xx**00**-xxx-x*x*-xx**XXX**XX",
              "roleId": 99999
            }
          ]
        }
      }
    }

    ```
  </Collapser>
</CollapserGroup>

## Que sigue

Luego de crear y asignar con éxito su rol personalizado de Teams, el usuario del grupo asignado tendrá las licencias que usted configuró. Puede:

* Monitorea el uso del rol a través de la gestión de usuarios de tu organización
* Modifique las licencias de rol si es necesario empleando mutaciones similares de NerdGraph
* Cree roles personalizados adicionales para diferentes niveles de acceso a Teams

Para obtener más información sobre Teams, consulte nuestra [documentación de Teams](/docs/service-architecture-intelligence/teams/teams/).