---
title: Gestionar monitores de pasos
tags:
  - Synthetics
  - APIs
  - NerdGraph
  - Examples
metaDescription: How to use New Relic NerdGraph API to create and update step monitors for synthetic monitoring.
freshnessValidatedDate: never
translationType: machine
---

New Relic te permite usar NerdGraph para crear [monitores de pasos](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors). Los monitores de pasos proporcionan una monitorización basada en navegador, de múltiples pasos y sin código, que le permite configurar flujos de trabajo de usuario complejos sin escribir ningún código. Este tutorial proporciona ejemplos de cómo emplear la API NerdGraph para automatizar la creación de monitores de pasos.

## Crear un monitor de pasos [#create-step-monitor]

Puede crear un monitor de pasos empleando la mutación `syntheticsCreateStepMonitor`. Esta mutación le permite configurar un monitoreo de navegador de varios pasos con un serial de acciones predefinidas.

### parámetro de entrada

<table>
  <thead>
    <tr>
      <th>
        Parámetro
      </th>

      <th>
        Tipo de datos
      </th>

      <th>
        ¿Es obligatorio?
      </th>

      <th>
        Descripción
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `accountId`
      </td>

      <td>
        Entero
      </td>

      <td>
        Sí
      </td>

      <td>
        [ID de su cuenta de](/docs/accounts/accounts-billing/account-structure/account-id)

         New Relic donde se creará el monitor.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.browsers`
      </td>

      <td>
        Matriz
      </td>

      <td>
        Sí
      </td>

      <td>
        Browser(es) que empleará el monitor para ejecutar trabajos. Navegadores compatibles: 

        `CHROME`

        , 

        `EDGE`

        , 

        `FIREFOX`

        .
      </td>
    </tr>

    <tr>
      <td>
        `monitor.devices`
      </td>

      <td>
        Matriz
      </td>

      <td>
        Sí
      </td>

      <td>
        Dispositivos que empleará el monitor para ejecutar trabajos. Dispositivos compatibles: 

        `DESKTOP`

        , 

        `MOBILE_LANDSCAPE`

        , 

        `MOBILE_PORTRAIT`

        , 

        `TABLET_LANDSCAPE`

        , 

        `TABLET_PORTRAIT`

        .
      </td>
    </tr>

    <tr>
      <td>
        `monitor.locations.public`
      </td>

      <td>
        Matriz
      </td>

      <td>
        Sí
      </td>

      <td>
        matriz de 

        [ubicación pública](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors/#setting-location)

         identificador donde el monitor ejecutará comprobaciones (por ejemplo, 

        `["US_EAST_1", "US_WEST_1"]`

        ).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.name`
      </td>

      <td>
        Cadena
      </td>

      <td>
        Sí
      </td>

      <td>
        El nombre para mostrar su monitor de pasos.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.period`
      </td>

      <td>
        Enumeración
      </td>

      <td>
        Sí
      </td>

      <td>
        Con qué frecuencia se ejecuta el monitor. Opciones: 

        `EVERY_MINUTE`

        , 

        `EVERY_5_MINUTES`

        , 

        `EVERY_10_MINUTES`

        , 

        `EVERY_15_MINUTES`

        , 

        `EVERY_30_MINUTES`

        , 

        `EVERY_HOUR`

        , 

        `EVERY_6_HOURS`

        , 

        `EVERY_12_HOURS`

        , 

        `EVERY_DAY`

        .
      </td>
    </tr>

    <tr>
      <td>
        `monitor.runtime.runtimeType`
      </td>

      <td>
        Cadena
      </td>

      <td>
        Sí
      </td>

      <td>
        El tipo de tiempo de ejecución empleado por su monitor. 

        `CHROME_BROWSER`

         es el único valor aceptado.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.runtime.runtimeTypeVersion`
      </td>

      <td>
        Cadena
      </td>

      <td>
        Sí
      </td>

      <td>
        La versión del tipo de tiempo de ejecución empleada por su monitor. 

        `100`

         es el único valor aceptado.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.runtime.scriptLanguage`
      </td>

      <td>
        Cadena
      </td>

      <td>
        Sí
      </td>

      <td>
        El idioma empleado en su monitor. 

        `JAVASCRIPT`

         es el único valor aceptado.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.status`
      </td>

      <td>
        Enumeración
      </td>

      <td>
        Sí
      </td>

      <td>
        El estado del monitor. Opciones: 

        `ENABLED`

         (el monitor está activo y realizando comprobaciones), 

        `DISABLED`

         (el monitor está inactivo).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.steps`
      </td>

      <td>
        Matriz
      </td>

      <td>
        Sí
      </td>

      <td>
        El serial de pasos que ejecutará el monitor. Cada objeto de paso contiene: 

        `ordinal`

         (posición del paso, 0-99), 

        `type`

         (tipo de paso como 

        `NAVIGATE`

        , 

        `CLICK_ELEMENT`

        , 

        `DOUBLE_CLICK_ELEMENT`

        , 

        `ASSERT_TEXT`

        , 

        `ASSERT_TITLE`

        , etc.) y 

        `values`

         (matriz de valores específicos del tipo de paso).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.advancedOptions.enableScreenshotOnFailureAndScript`
      </td>

      <td>
        Booleano
      </td>

      <td>
        No
      </td>

      <td>
        Captura una captura de pantalla durante la ejecución del trabajo cuando ocurre una falla o se ejecuta un script.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.apdexTarget`
      </td>

      <td>
        Flotante
      </td>

      <td>
        No
      </td>

      <td>
        Objetivo Apdex del monitor en segundos, empleado para completar reportes SLA. El valor predeterminado es 7,0 segundos.
      </td>
    </tr>
  </tbody>
</table>

### Solicitud de muestra

```graphql
mutation {
  syntheticsCreateStepMonitor(
    accountId: ACCOUNT_ID
    monitor: {
      browsers: [BROWSERS]
      devices: [DEVICES]
      locations: { public: ["LOCATION_1", "LOCATION_2"] }
      name: "MONITOR_NAME"
      period: PERIOD
      runtime: {
        runtimeType: "RUNTIME_TYPE"
        runtimeTypeVersion: "RUNTIME_TYPE_VERSION"
        scriptLanguage: "SCRIPT_LANGUAGE"
      }
      status: STATUS
      steps: [
        {
          ordinal: 0,
          type: NAVIGATE,
          values: ["MONITORED_URI", "USER_AGENT"] }
        {
          ordinal: STEP_NUMBER
          type: STEP_TYPE
          values: ["CONDITIONAL_TYPE", "VALUE"]
        }
      ]
      advancedOptions: { enableScreenshotOnFailureAndScript: ENABLE_SCREENSHOT }
      apdexTarget: APDEX_TARGET
    }
  ) {
    errors {
      description
      type
    }
  }
}
```

### Ejemplo de respuesta

Una respuesta exitosa devuelve `null` para los errores:

```json
{
  "data": {
    "syntheticsCreateStepMonitor": {
      "errors": null
    }
  }
}
```

Si hay algún problema al crear el monitor, la matriz `errors` contendrá objetos con campos `description` y `type` que explican qué salió mal.

## Actualizar un monitor de pasos [#update-step-monitor]

Puede actualizar un monitor de pasos existente empleando la mutación `syntheticsUpdateStepMonitor`. Esto le permite modificar la configuración de un monitor de pasos que ya fue creado.

### parámetro de entrada

<table>
  <thead>
    <tr>
      <th>
        Parámetro
      </th>

      <th>
        Tipo de datos
      </th>

      <th>
        ¿Es obligatorio?
      </th>

      <th>
        Descripción
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `guid`
      </td>

      <td>
        Cadena
      </td>

      <td>
        Sí
      </td>

      <td>
        El 

        [GUID](/docs/apis/nerdgraph/examples/synthetics-api/query-synthetics-data#query-monitors)

         de entidad única del monitor que desea actualizar.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.browsers`
      </td>

      <td>
        Matriz
      </td>

      <td>
        No
      </td>

      <td>
        Browser(es) que empleará el monitor para ejecutar trabajos. Navegadores compatibles: 

        `CHROME`

        , 

        `EDGE`

        , 

        `FIREFOX`

        .
      </td>
    </tr>

    <tr>
      <td>
        `monitor.devices`
      </td>

      <td>
        Matriz
      </td>

      <td>
        No
      </td>

      <td>
        Dispositivos que empleará el monitor para ejecutar trabajos. Dispositivos compatibles: 

        `DESKTOP`

        , 

        `MOBILE_LANDSCAPE`

        , 

        `MOBILE_PORTRAIT`

        , 

        `TABLET_LANDSCAPE`

        , 

        `TABLET_PORTRAIT`

        .
      </td>
    </tr>

    <tr>
      <td>
        `monitor.locations.public`
      </td>

      <td>
        Matriz
      </td>

      <td>
        No
      </td>

      <td>
        matriz de 

        [ubicación pública](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors/#setting-location)

         identificador donde el monitor ejecutará comprobaciones (por ejemplo, 

        `["US_EAST_1", "US_WEST_1"]`

        ).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.name`
      </td>

      <td>
        Cadena
      </td>

      <td>
        No
      </td>

      <td>
        El nombre para mostrar actualizado para su monitor de pasos.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.period`
      </td>

      <td>
        Enumeración
      </td>

      <td>
        No
      </td>

      <td>
        Con qué frecuencia se ejecuta el monitor. Opciones: 

        `EVERY_MINUTE`

        , 

        `EVERY_5_MINUTES`

        , 

        `EVERY_10_MINUTES`

        , 

        `EVERY_15_MINUTES`

        , 

        `EVERY_30_MINUTES`

        , 

        `EVERY_HOUR`

        , 

        `EVERY_6_HOURS`

        , 

        `EVERY_12_HOURS`

        , 

        `EVERY_DAY`

        .
      </td>
    </tr>

    <tr>
      <td>
        `monitor.runtime.runtimeType`
      </td>

      <td>
        Cadena
      </td>

      <td>
        No
      </td>

      <td>
        El tipo de tiempo de ejecución empleado por su monitor. 

        `CHROME_BROWSER`

         es el único valor aceptado.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.runtime.runtimeTypeVersion`
      </td>

      <td>
        Cadena
      </td>

      <td>
        No
      </td>

      <td>
        La versión del tipo de tiempo de ejecución empleada por su monitor. 

        `100`

         es el único valor aceptado.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.runtime.scriptLanguage`
      </td>

      <td>
        Cadena
      </td>

      <td>
        No
      </td>

      <td>
        El idioma empleado en su monitor. 

        `JAVASCRIPT`

         es el único valor aceptado.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.status`
      </td>

      <td>
        Enumeración
      </td>

      <td>
        No
      </td>

      <td>
        El estado del monitor. Opciones: 

        `ENABLED`

         (el monitor está activo y realizando comprobaciones), 

        `DISABLED`

         (el monitor está inactivo).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.steps`
      </td>

      <td>
        Matriz
      </td>

      <td>
        No
      </td>

      <td>
        El serial de pasos que ejecutará el monitor. Cada objeto de paso contiene: 

        `ordinal`

         (posición del paso, 0-99), 

        `type`

         (tipo de paso como 

        `NAVIGATE`

        , 

        `CLICK_ELEMENT`

        , 

        `DOUBLE_CLICK_ELEMENT`

        , 

        `ASSERT_TEXT`

        , 

        `ASSERT_TITLE`

        , etc.) y 

        `values`

         (matriz de valores específicos del tipo de paso).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.advancedOptions.enableScreenshotOnFailureAndScript`
      </td>

      <td>
        Booleano
      </td>

      <td>
        No
      </td>

      <td>
        Captura una captura de pantalla durante la ejecución del trabajo cuando ocurre una falla o se ejecuta un script.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.apdexTarget`
      </td>

      <td>
        Flotante
      </td>

      <td>
        No
      </td>

      <td>
        Objetivo Apdex del monitor en segundos, empleado para completar reportes SLA. El valor predeterminado es 7,0 segundos.
      </td>
    </tr>
  </tbody>
</table>

### Solicitud de muestra

```graphql
mutation {
  syntheticsUpdateStepMonitor(
    guid: ENTITY_GUID
    monitor: {
      browsers: [BROWSERS]
      devices: [DEVICES]
      locations: { public: ["LOCATION_1", "LOCATION_2"] }
      name: "MONITOR_NAME"
      period: PERIOD
      runtime: {
        runtimeType: "RUNTIME_TYPE"
        runtimeTypeVersion: "RUNTIME_TYPE_VERSION"
        scriptLanguage: "SCRIPT_LANGUAGE"
      }
      status: STATUS
      steps: [
        {
          ordinal: 0,
          type: NAVIGATE,
          values: ["MONITORED_URI", "USER_AGENT"]
        }
        {
          ordinal: STEP_NUMBER,
          type: STEP_TYPE,
          values: ["VALUE_1", "VALUE_2"]
        }
      ]
      advancedOptions: { enableScreenshotOnFailureAndScript: ENABLE_SCREENSHOT }
      apdexTarget: APDEX_TARGET
    }
  ) {
    errors {
      description
      type
    }
  }
}
```

### Ejemplo de respuesta

Una respuesta exitosa devuelve `null` para los errores:

```json
{
  "data": {
    "syntheticsUpdateStepMonitor": {
      "errors": null
    }
  }
}
```

Si hay algún problema al actualizar el monitor, la matriz `errors` contendrá objetos con campos `description` y `type` que explican qué salió mal.

## Eliminar un monitor de pasos [#delete-monitor]

Cuando ya no se necesita un monitor de pasos, puedes eliminarlo de forma permanente empleando la mutación `syntheticsDeleteMonitor`.

Para eliminar un monitor, consulte la sección [Eliminar monitor Sintético](/docs/apis/nerdgraph/examples/synthetics-api/ping-monitor/#delete-monitor).