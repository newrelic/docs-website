---
title: Gestionar el monitor del navegador con script
tags:
  - Synthetics
  - APIs
  - NerdGraph
  - Examples
metaDescription: How to use New Relic NerdGraph API to create and update scripted browser monitors for synthetic monitoring.
freshnessValidatedDate: never
translationType: machine
---

New Relic te permite usar NerdGraph para crear [un script de monitorización del navegador](/docs/synthetics/synthetic-monitoring/scripting-monitors/introduction-scripted-browser-monitors). monitor de browser con script ejecuta código JavaScript personalizado en un entorno de navegador real, lo que le permite simular interacciones complejas de usuarios y flujos de trabajo de varios pasos. Este tutorial proporciona ejemplos de cómo emplear la API de NerdGraph para automatizar la creación de un script de monitorización del navegador.

## Crear un monitor de navegador con script [#create-scripted-browser]

Puedes crear un script de monitorización del navegador usando la mutación `syntheticsCreateScriptBrowserMonitor`. Esta mutación le permite configurar un monitoreo scriptizado personalizado que ejecuta su código JavaScript en un navegador.

### parámetro de entrada

<table>
  <thead>
    <tr>
      <th>
        Parámetro
      </th>

      <th>
        Tipo de datos
      </th>

      <th>
        ¿Es obligatorio?
      </th>

      <th>
        Descripción
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `accountId`
      </td>

      <td>
        Entero
      </td>

      <td>
        Sí
      </td>

      <td>
        [ID de su cuenta de](/docs/accounts/accounts-billing/account-structure/account-id)

         New Relic donde se creará el monitor.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.browsers`
      </td>

      <td>
        Matriz
      </td>

      <td>
        Sí
      </td>

      <td>
        Browser(es) que empleará el monitor para ejecutar trabajos. Navegadores compatibles: 

        `CHROME`

        , 

        `EDGE`

        , 

        `FIREFOX`

        .
      </td>
    </tr>

    <tr>
      <td>
        `monitor.devices`
      </td>

      <td>
        Matriz
      </td>

      <td>
        Sí
      </td>

      <td>
        Dispositivos que empleará el monitor para ejecutar trabajos. Dispositivos compatibles: 

        `DESKTOP`

        , 

        `MOBILE_LANDSCAPE`

        , 

        `MOBILE_PORTRAIT`

        , 

        `TABLET_LANDSCAPE`

        , 

        `TABLET_PORTRAIT`

        .
      </td>
    </tr>

    <tr>
      <td>
        `monitor.locations.public`
      </td>

      <td>
        Matriz
      </td>

      <td>
        Sí
      </td>

      <td>
        matriz de 

        [ubicación pública](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors/#setting-location)

         identificador donde el monitor ejecutará comprobaciones (por ejemplo, 

        `["US_EAST_1", "US_WEST_1"]`

        ).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.name`
      </td>

      <td>
        Cadena
      </td>

      <td>
        Sí
      </td>

      <td>
        El nombre para mostrar el monitor de su navegador con script.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.period`
      </td>

      <td>
        Enumeración
      </td>

      <td>
        Sí
      </td>

      <td>
        Con qué frecuencia se ejecuta el monitor. Opciones: 

        `EVERY_MINUTE`

        , 

        `EVERY_5_MINUTES`

        , 

        `EVERY_10_MINUTES`

        , 

        `EVERY_15_MINUTES`

        , 

        `EVERY_30_MINUTES`

        , 

        `EVERY_HOUR`

        , 

        `EVERY_6_HOURS`

        , 

        `EVERY_12_HOURS`

        , 

        `EVERY_DAY`

        .
      </td>
    </tr>

    <tr>
      <td>
        `monitor.runtime.runtimeType`
      </td>

      <td>
        Cadena
      </td>

      <td>
        Sí
      </td>

      <td>
        El tipo de tiempo de ejecución empleado por su monitor. 

        `CHROME_BROWSER`

         es el único valor aceptado.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.runtime.runtimeTypeVersion`
      </td>

      <td>
        Cadena
      </td>

      <td>
        Sí
      </td>

      <td>
        La versión del tipo de tiempo de ejecución empleada por su monitor. 

        `100`

         es el único valor aceptado.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.runtime.scriptLanguage`
      </td>

      <td>
        Cadena
      </td>

      <td>
        Sí
      </td>

      <td>
        El idioma empleado en su monitor. 

        `JAVASCRIPT`

         es el único valor aceptado.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.script`
      </td>

      <td>
        Cadena
      </td>

      <td>
        Sí
      </td>

      <td>
        El código JavaScript que ejecuta el monitor. Debe ser texto simple, no codificado en base64. El script puede emplear las API Selenium Webdriver para controlar el navegador.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.status`
      </td>

      <td>
        Enumeración
      </td>

      <td>
        Sí
      </td>

      <td>
        El estado del monitor. Opciones: 

        `ENABLED`

         (el monitor está activo y realizando comprobaciones), 

        `DISABLED`

         (el monitor está inactivo).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.advancedOptions.enableScreenshotOnFailureAndScript`
      </td>

      <td>
        Booleano
      </td>

      <td>
        No
      </td>

      <td>
        Captura una captura de pantalla durante la ejecución del trabajo cuando ocurre una falla o se ejecuta un script.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.apdexTarget`
      </td>

      <td>
        Flotante
      </td>

      <td>
        No
      </td>

      <td>
        Objetivo Apdex del monitor en segundos, empleado para completar reportes SLA. El valor predeterminado es 7,0 segundos.
      </td>
    </tr>
  </tbody>
</table>

### Solicitud de muestra

```graphql
mutation {
  syntheticsCreateScriptBrowserMonitor(
    accountId: ACCOUNT_ID
    monitor: {
      browsers: [BROWSERS]
      devices: [DEVICES]
      locations: { public: ["LOCATION_1", "LOCATION_2"] }
      name: "MONITOR_NAME"
      period: PERIOD
      runtime: {
        runtimeType: "RUNTIME_TYPE"
        runtimeTypeVersion: "RUNTIME_TYPE_VERSION"
        scriptLanguage: "SCRIPT_LANGUAGE"
      }
      script: "SCRIPT_CONTENT"
      status: STATUS
      advancedOptions: { enableScreenshotOnFailureAndScript: ENABLE_SCREENSHOT }
      apdexTarget: APDEX_TARGET
    }
  ) {
    errors {
      description
      type
    }
  }
}
```

### Ejemplo de respuesta

Una respuesta exitosa devuelve `null` para los errores:

```json
{
  "data": {
    "syntheticsCreateScriptBrowserMonitor": {
      "errors": null
    }
  }
}
```

Si hay algún problema al crear el monitor, la matriz `errors` contendrá objetos con campos `description` y `type` que explican qué salió mal.

## Actualizar un monitor de navegador con script [#update-scripted-browser]

Puede actualizar un script de monitor de navegador existente empleando la mutación `syntheticsUpdateScriptBrowserMonitor`. Esto le permite modificar la configuración de un monitor de navegador con script que ya fue creado.

### parámetro de entrada

<table>
  <thead>
    <tr>
      <th>
        Parámetro
      </th>

      <th>
        Tipo de datos
      </th>

      <th>
        ¿Es obligatorio?
      </th>

      <th>
        Descripción
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `guid`
      </td>

      <td>
        Cadena
      </td>

      <td>
        Sí
      </td>

      <td>
        El 

        [GUID](/docs/apis/nerdgraph/examples/synthetics-api/query-synthetics-data#query-monitors)

         de entidad única del monitor que desea actualizar.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.browsers`
      </td>

      <td>
        Matriz
      </td>

      <td>
        No
      </td>

      <td>
        Browser(es) que empleará el monitor para ejecutar trabajos. Navegadores compatibles: 

        `CHROME`

        , 

        `EDGE`

        , 

        `FIREFOX`

        .
      </td>
    </tr>

    <tr>
      <td>
        `monitor.devices`
      </td>

      <td>
        Matriz
      </td>

      <td>
        No
      </td>

      <td>
        Dispositivos que empleará el monitor para ejecutar trabajos. Dispositivos compatibles: 

        `DESKTOP`

        , 

        `MOBILE_LANDSCAPE`

        , 

        `MOBILE_PORTRAIT`

        , 

        `TABLET_LANDSCAPE`

        , 

        `TABLET_PORTRAIT`

        .
      </td>
    </tr>

    <tr>
      <td>
        `monitor.locations.public`
      </td>

      <td>
        Matriz
      </td>

      <td>
        No
      </td>

      <td>
        matriz de 

        [ubicación pública](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors/#setting-location)

         identificador donde el monitor ejecutará comprobaciones (por ejemplo, 

        `["US_EAST_1", "US_WEST_1"]`

        ).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.name`
      </td>

      <td>
        Cadena
      </td>

      <td>
        No
      </td>

      <td>
        El nombre para mostrar actualizado para el monitor de su navegador con script.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.period`
      </td>

      <td>
        Enumeración
      </td>

      <td>
        No
      </td>

      <td>
        Con qué frecuencia se ejecuta el monitor. Opciones: 

        `EVERY_MINUTE`

        , 

        `EVERY_5_MINUTES`

        , 

        `EVERY_10_MINUTES`

        , 

        `EVERY_15_MINUTES`

        , 

        `EVERY_30_MINUTES`

        , 

        `EVERY_HOUR`

        , 

        `EVERY_6_HOURS`

        , 

        `EVERY_12_HOURS`

        , 

        `EVERY_DAY`

        .
      </td>
    </tr>

    <tr>
      <td>
        `monitor.runtime.runtimeType`
      </td>

      <td>
        Cadena
      </td>

      <td>
        No
      </td>

      <td>
        El tipo de tiempo de ejecución empleado por su monitor. 

        `CHROME_BROWSER`

         es el único valor aceptado.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.runtime.runtimeTypeVersion`
      </td>

      <td>
        Cadena
      </td>

      <td>
        No
      </td>

      <td>
        La versión del tipo de tiempo de ejecución empleada por su monitor. 

        `100`

         es el único valor aceptado.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.runtime.scriptLanguage`
      </td>

      <td>
        Cadena
      </td>

      <td>
        No
      </td>

      <td>
        El idioma empleado en su monitor. 

        `JAVASCRIPT`

         es el único valor aceptado.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.script`
      </td>

      <td>
        Cadena
      </td>

      <td>
        No
      </td>

      <td>
        El código JavaScript que ejecuta el monitor. Debe ser texto simple, no codificado en base64.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.status`
      </td>

      <td>
        Enumeración
      </td>

      <td>
        No
      </td>

      <td>
        El estado del monitor. Opciones: 

        `ENABLED`

         (el monitor está activo y realizando comprobaciones), 

        `DISABLED`

         (el monitor está inactivo).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.advancedOptions.enableScreenshotOnFailureAndScript`
      </td>

      <td>
        Booleano
      </td>

      <td>
        No
      </td>

      <td>
        Captura una captura de pantalla durante la ejecución del trabajo cuando ocurre una falla o se ejecuta un script.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.apdexTarget`
      </td>

      <td>
        Flotante
      </td>

      <td>
        No
      </td>

      <td>
        Objetivo Apdex del monitor en segundos, empleado para completar reportes SLA. El valor predeterminado es 7,0 segundos.
      </td>
    </tr>
  </tbody>
</table>

### Solicitud de muestra

```graphql
mutation {
  syntheticsUpdateScriptBrowserMonitor(
    guid: ENTITY_GUID
    monitor: {
      browsers: [BROWSERS]
      devices: [DEVICES]
      locations: { public: ["LOCATION_1", "LOCATION_2"] }
      name: "MONITOR_NAME"
      period: PERIOD
      runtime: {
        runtimeType: "RUNTIME_TYPE"
        runtimeTypeVersion: "RUNTIME_TYPE_VERSION"
        scriptLanguage: "SCRIPT_LANGUAGE"
      }
      script: "SCRIPT_CONTENT"
      status: STATUS
      advancedOptions: { enableScreenshotOnFailureAndScript: ENABLE_SCREENSHOT }
      apdexTarget: APDEX_TARGET
    }
  ) {
    errors {
      description
      type
    }
  }
}
```

### Ejemplo de respuesta

Una respuesta exitosa devuelve `null` para los errores:

```json
{
  "data": {
    "syntheticsUpdateScriptBrowserMonitor": {
      "errors": null
    }
  }
}
```

Si hay algún problema al actualizar el monitor, la matriz `errors` contendrá objetos con campos `description` y `type` que explican qué salió mal.

## Actualizar el tiempo de ejecución de un script de monitor de navegador [#upgrade-monitor-runtime]

Puede actualizar un monitor del navegador con script para emplear el nuevo entorno de ejecución Chrome 100+. Esto garantiza que su monitor emplee las últimas funciones del navegador y actualizaciones de seguridad.

### parámetro de entrada

<table>
  <thead>
    <tr>
      <th>
        Parámetro
      </th>

      <th>
        Tipo de datos
      </th>

      <th>
        ¿Es obligatorio?
      </th>

      <th>
        Descripción
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `guid`
      </td>

      <td>
        Cadena
      </td>

      <td>
        Sí
      </td>

      <td>
        El 

        [GUID](/docs/apis/nerdgraph/examples/synthetics-api/query-synthetics-data#query-monitors)

         de entidad única del monitor que desea actualizar.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.runtime.runtimeType`
      </td>

      <td>
        Cadena
      </td>

      <td>
        Sí
      </td>

      <td>
        El tipo de tiempo de ejecución. 

        `CHROME_BROWSER`

         es el único valor aceptado.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.runtime.runtimeTypeVersion`
      </td>

      <td>
        Cadena
      </td>

      <td>
        Sí
      </td>

      <td>
        La versión de tiempo de ejecución. 

        `100`

         es el único valor aceptado.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.runtime.scriptLanguage`
      </td>

      <td>
        Cadena
      </td>

      <td>
        Sí
      </td>

      <td>
        El lenguaje de script. 

        `JAVASCRIPT`

         es el único valor aceptado.
      </td>
    </tr>
  </tbody>
</table>

### Solicitud de muestra

```graphql
mutation {
  syntheticsUpdateScriptBrowserMonitor(
    guid: "ENTITY_GUID",
    monitor: {
      runtime: {
        runtimeType: "CHROME_BROWSER",
        runtimeTypeVersion: "100",
        scriptLanguage: "JAVASCRIPT"
      }
    }
  ) {
    errors {
      description
      type
    }
  }
}
```

### Ejemplo de respuesta

Una respuesta exitosa devuelve `null` para los errores:

```json
{
  "data": {
    "syntheticsUpdateScriptBrowserMonitor": {
      "errors": null
    }
  }
}
```

Si hay algún problema al actualizar el entorno de ejecución del monitor, la matriz `errors` contendrá objetos con campos `description` y `type` que explican qué salió mal.

## Degradar el tiempo de ejecución de un script de monitor de navegador [#downgrade-monitor-runtime]

Puede degradar un script de monitor de navegador para emplear un entorno de ejecución legacy. Esto puede ser necesario por razones de compatibilidad, pero tenga en cuenta que los entornos de ejecución legacy finalizarán su vida útil el 22 de octubre de 2024.

<Callout variant="important">
  Los tiempos de ejecución heredados están obsoletos y finalizarán su vida útil el 22 de octubre de 2024. No se recomienda cambiar a entornos de ejecución legacy, excepto por necesidades de compatibilidad temporales.
</Callout>

### parámetro de entrada

<table>
  <thead>
    <tr>
      <th>
        Parámetro
      </th>

      <th>
        Tipo de datos
      </th>

      <th>
        ¿Es obligatorio?
      </th>

      <th>
        Descripción
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `guid`
      </td>

      <td>
        Cadena
      </td>

      <td>
        Sí
      </td>

      <td>
        El 

        [GUID](/docs/apis/nerdgraph/examples/synthetics-api/query-synthetics-data#query-monitors)

         de entidad única del monitor que desea degradar.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.runtime.runtimeType`
      </td>

      <td>
        Cadena
      </td>

      <td>
        Sí
      </td>

      <td>
        Establezca la cadena vacía 

        `""`

         para emplear el tiempo de ejecución legacy.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.runtime.runtimeTypeVersion`
      </td>

      <td>
        Cadena
      </td>

      <td>
        Sí
      </td>

      <td>
        Establezca la cadena vacía 

        `""`

         para emplear el tiempo de ejecución legacy.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.runtime.scriptLanguage`
      </td>

      <td>
        Cadena
      </td>

      <td>
        Sí
      </td>

      <td>
        Establezca la cadena vacía 

        `""`

         para emplear el tiempo de ejecución legacy.
      </td>
    </tr>
  </tbody>
</table>

### Solicitud de muestra

```graphql
mutation {
  syntheticsUpdateScriptBrowserMonitor(
    guid: "ENTITY_GUID",
    monitor: {
      runtime: {
        runtimeType: "",
        runtimeTypeVersion: "",
        scriptLanguage: ""
      }
    }
  ) {
    errors {
      description
      type
    }
  }
}
```

### Ejemplo de respuesta

Una respuesta exitosa devuelve `null` para los errores:

```json
{
  "data": {
    "syntheticsUpdateScriptBrowserMonitor": {
      "errors": null
    }
  }
}
```

Si hay algún problema al degradar el tiempo de ejecución del monitor, la matriz `errors` contendrá objetos con campos `description` y `type` que explican qué salió mal.

## Eliminar un monitor de navegador con script [#delete-monitor]

Cuando un script de monitor de navegador ya no es necesario, puedes eliminarlo permanentemente usando la mutación `syntheticsDeleteMonitor`.

Para eliminar un monitor, consulte la sección [Eliminar monitor Sintético](/docs/apis/nerdgraph/examples/synthetics-api/ping-monitor/#delete-monitor).