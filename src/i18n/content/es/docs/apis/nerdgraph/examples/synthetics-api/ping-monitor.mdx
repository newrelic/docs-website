---
title: Gestionar monitores de ping
tags:
  - Synthetics
  - APIs
  - NerdGraph
  - Examples
metaDescription: How to use New Relic NerdGraph API to create ping monitors for synthetic monitoring.
freshnessValidatedDate: never
translationType: machine
---

New Relic te permite usar NerdGraph para crear [monitores de ping](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors) (también conocidos como monitores simples). Los monitores de ping verifican si una URL o extremo es accesible realizando requests HTTP a intervalos regulares. Este tutorial proporciona ejemplos de cómo emplear la API NerdGraph para automatizar la creación de monitores de ping.

## Crear un monitor de ping [#create-ping-monitor]

Puede crear un monitor de ping empleando la mutación `syntheticsCreateSimpleMonitor`. Esta mutación le permite configurar el monitoreo para cualquier URL o extremo de acceso público.

### parámetro de entrada

<table>
  <thead>
    <tr>
      <th>
        Parámetro
      </th>

      <th>
        Tipo de datos
      </th>

      <th>
        ¿Es obligatorio?
      </th>

      <th>
        Descripción
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `accountId`
      </td>

      <td>
        Entero
      </td>

      <td>
        Sí
      </td>

      <td>
        [ID de su cuenta de](/docs/accounts/accounts-billing/account-structure/account-id)

         New Relic donde se creará el monitor.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.locations.public`
      </td>

      <td>
        Matriz
      </td>

      <td>
        Sí
      </td>

      <td>
        matriz de 

        [ubicación pública](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors/#setting-location)

         identificador donde el monitor ejecutará comprobaciones (por ejemplo, 

        `["US_EAST_1", "US_WEST_1"]`

        ).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.name`
      </td>

      <td>
        Cadena
      </td>

      <td>
        Sí
      </td>

      <td>
        El nombre para mostrar su monitor de ping.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.period`
      </td>

      <td>
        Enumeración
      </td>

      <td>
        Sí
      </td>

      <td>
        Con qué frecuencia se ejecuta el monitor. Opciones: 

        `EVERY_MINUTE`

        , 

        `EVERY_5_MINUTES`

        , 

        `EVERY_10_MINUTES`

        , 

        `EVERY_15_MINUTES`

        , 

        `EVERY_30_MINUTES`

        , 

        `EVERY_HOUR`

        , 

        `EVERY_6_HOURS`

        , 

        `EVERY_12_HOURS`

        , 

        `EVERY_DAY`

        .
      </td>
    </tr>

    <tr>
      <td>
        `monitor.status`
      </td>

      <td>
        Enumeración
      </td>

      <td>
        Sí
      </td>

      <td>
        El estado del monitor. Opciones: 

        `ENABLED`

         (el monitor está activo y realizando comprobaciones), 

        `DISABLED`

         (el monitor está inactivo).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.uri`
      </td>

      <td>
        Cadena
      </td>

      <td>
        Sí
      </td>

      <td>
        La URL o extremo a monitorear (por ejemplo, 

        `https://example.com`

        ).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.advancedOptions.responseValidationText`
      </td>

      <td>
        Cadena
      </td>

      <td>
        No
      </td>

      <td>
        Texto que debe aparecer en la respuesta para que se apruebe la verificación. Si se especifica, el monitor fallará si este texto no se encuentra en el cuerpo de la respuesta.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.advancedOptions.useTlsValidation`
      </td>

      <td>
        Booleano
      </td>

      <td>
        No
      </td>

      <td>
        Si se debe validar el TLS/certificado SSL. Establezca en 

        `true`

         para verificar la validez de la cadena del certificado SSL.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.apdexTarget`
      </td>

      <td>
        Flotante
      </td>

      <td>
        No
      </td>

      <td>
        Objetivo Apdex del monitor en segundos, empleado para completar reportes SLA. El valor predeterminado es 7,0 segundos.
      </td>
    </tr>
  </tbody>
</table>

### Solicitud de muestra

```graphql
mutation {
  syntheticsCreateSimpleMonitor(
    accountId: ACCOUNT_ID
    monitor: {
      locations: { public: ["LOCATION_1", "LOCATION_2"] }
      name: "YOUR_MONITOR_NAME"
      period: PERIOD
      status: STATUS
      uri: "MONITORED_URI"
      advancedOptions: {
        customHeaders: { name: "HEADER_NAME", value: "HEADER_VALUE" }
        redirectIsFailure: REDIRECT_IS_FAILURE
        responseValidationText: "VALIDATION_TEXT"
        shouldBypassHeadRequest: BYPASS_HEAD_REQUEST
        useTlsValidation: TLS_VALIDATION
      }
      apdexTarget: APDEX_TARGET
    }
  ) {
    errors {
      description
      type
    }
  }
}
```

### Ejemplo de respuesta

Una respuesta exitosa devuelve `null` para los errores:

```json
{
  "data": {
    "syntheticsCreateSimpleMonitor": {
      "errors": null
    }
  }
}
```

Si hay algún problema al crear el monitor, la matriz `errors` contendrá objetos con campos `description` y `type` que explican qué salió mal.

## Actualizar un monitor de ping [#update-ping-monitor]

Puede actualizar un monitor de ping existente empleando la mutación `syntheticsUpdateSimpleMonitor`. Esto le permite modificar la configuración de un monitor de ping que ya se creó.

### parámetro de entrada

<table>
  <thead>
    <tr>
      <th>
        Parámetro
      </th>

      <th>
        Tipo de datos
      </th>

      <th>
        ¿Es obligatorio?
      </th>

      <th>
        Descripción
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `guid`
      </td>

      <td>
        Cadena
      </td>

      <td>
        Sí
      </td>

      <td>
        El 

        [GUID](/docs/apis/nerdgraph/examples/synthetics-api/query-synthetics-data#query-monitors)

         de entidad única del monitor que desea actualizar.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.locations.public`
      </td>

      <td>
        Matriz
      </td>

      <td>
        No
      </td>

      <td>
        matriz de 

        [ubicación pública](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors/#setting-location)

         identificador donde el monitor ejecutará comprobaciones (por ejemplo, 

        `["US_EAST_1", "US_WEST_1"]`

        ).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.name`
      </td>

      <td>
        Cadena
      </td>

      <td>
        No
      </td>

      <td>
        El nombre para mostrar actualizado para su monitor de ping.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.period`
      </td>

      <td>
        Enumeración
      </td>

      <td>
        No
      </td>

      <td>
        Con qué frecuencia se ejecuta el monitor. Opciones: 

        `EVERY_MINUTE`

        , 

        `EVERY_5_MINUTES`

        , 

        `EVERY_10_MINUTES`

        , 

        `EVERY_15_MINUTES`

        , 

        `EVERY_30_MINUTES`

        , 

        `EVERY_HOUR`

        , 

        `EVERY_6_HOURS`

        , 

        `EVERY_12_HOURS`

        , 

        `EVERY_DAY`

        .
      </td>
    </tr>

    <tr>
      <td>
        `monitor.status`
      </td>

      <td>
        Enumeración
      </td>

      <td>
        No
      </td>

      <td>
        El estado del monitor. Opciones: 

        `ENABLED`

         (el monitor está activo y realizando comprobaciones), 

        `DISABLED`

         (el monitor está inactivo).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.uri`
      </td>

      <td>
        Cadena
      </td>

      <td>
        No
      </td>

      <td>
        La URL o extremo a monitorear (por ejemplo, 

        `https://example.com`

        ).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.advancedOptions.customHeaders`
      </td>

      <td>
        Objeto
      </td>

      <td>
        No
      </td>

      <td>
        Encabezados HTTP personalizados para incluir en la solicitud. Cada encabezado tiene una propiedad 

        `name`

         y 

        `value`

        .
      </td>
    </tr>

    <tr>
      <td>
        `monitor.advancedOptions.redirectIsFailure`
      </td>

      <td>
        Booleano
      </td>

      <td>
        No
      </td>

      <td>
        Si es 

        `true`

        , el monitor tratará las redirecciones HTTP (códigos de estado 3xx) como errores.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.advancedOptions.responseValidationText`
      </td>

      <td>
        Cadena
      </td>

      <td>
        No
      </td>

      <td>
        Texto que debe aparecer en la respuesta para que se apruebe la verificación. Si se especifica, el monitor fallará si este texto no se encuentra en el cuerpo de la respuesta.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.advancedOptions.shouldBypassHeadRequest`
      </td>

      <td>
        Booleano
      </td>

      <td>
        No
      </td>

      <td>
        Si es 

        `true`

        , el monitor omitirá la solicitud HEAD inicial y solo realizará una solicitud GET.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.advancedOptions.useTlsValidation`
      </td>

      <td>
        Booleano
      </td>

      <td>
        No
      </td>

      <td>
        Si se debe validar el TLS/certificado SSL. Establezca en 

        `true`

         para verificar la validez de la cadena del certificado SSL.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.apdexTarget`
      </td>

      <td>
        Flotante
      </td>

      <td>
        No
      </td>

      <td>
        Objetivo Apdex del monitor en segundos, empleado para completar reportes SLA. El valor predeterminado es 7,0 segundos.
      </td>
    </tr>
  </tbody>
</table>

### Solicitud de muestra

```graphql
mutation {
  syntheticsUpdateSimpleMonitor(
    guid: "ENTITY_GUID"
    monitor: {
      locations: { public: ["LOCATION_1", "LOCATION_2"] }
      name: "YOUR_MONITOR_NAME"
      period: PERIOD
      status: STATUS
      uri: "MONITORED_URI"
      advancedOptions: {
        customHeaders: { name: "HEADER_NAME", value: "HEADER_VALUE" }
        redirectIsFailure: REDIRECT_IS_FAILURE
        responseValidationText: "VALIDATION_TEXT"
        shouldBypassHeadRequest: BYPASS_HEAD_REQUEST
        useTlsValidation: TLS_VALIDATION
      }
      apdexTarget: APDEX_TARGET
    }
  ) {
    errors {
      description
      type
    }
  }
}
```

### Ejemplo de respuesta

Una respuesta exitosa devuelve `null` para los errores:

```json
{
  "data": {
    "syntheticsUpdateSimpleMonitor": {
      "errors": null
    }
  }
}
```

Si hay algún problema al actualizar el monitor, la matriz `errors` contendrá objetos con campos `description` y `type` que explican qué salió mal.

## Eliminar un monitor Sintético [#delete-monitor]

Esta API le permite eliminar un monitor existente empleando la mutación `syntheticsDeleteMonitor` con el parámetro guid.

### parámetro de entrada

<table>
  <thead>
    <tr>
      <th>
        Parámetro
      </th>

      <th>
        Tipo de datos
      </th>

      <th>
        ¿Es obligatorio?
      </th>

      <th>
        Descripción
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `guid`
      </td>

      <td>
        Cadena
      </td>

      <td>
        Sí
      </td>

      <td>
        El 

        [GUID](/docs/apis/nerdgraph/examples/synthetics-api/query-synthetics-data#query-monitors)

         de entidad única del monitor que desea eliminar.
      </td>
    </tr>
  </tbody>
</table>

### Solicitud de muestra

```graphql
mutation {
  syntheticsDeleteMonitor(
    guid: "ENTITY_GUID"
  ) {
    deletedGuid
  }
}
```

### Ejemplo de respuesta

Una eliminación exitosa devuelve el GUID del monitor eliminado:

```json
{
  "data": {
    "syntheticsDeleteMonitor": {
      "deletedGuid": "ENTITY_GUID"
    }
  }
}
```

Si hay algún problema al eliminar el monitor, se devolverá un error con detalles sobre lo que salió mal.