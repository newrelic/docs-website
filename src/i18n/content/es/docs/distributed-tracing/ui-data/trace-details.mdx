---
title: Comprender la página UI de detalles de traza
tags:
  - Distributed tracing
  - UI and data
  - Trace details
metaDescription: 'Dive deeper into New Relic''s distributed tracing feature: learn how to use and understand the trace details UI.'
freshnessValidatedDate: '2023-07-19T00:00:00.000Z'
translationType: machine
---

Una vez que seleccione una traza de la lista de trazas, será dirigido a la página de detalles de la traza en la UI. Utilice los detalles de la traza para comprender el flujo de operaciones que componen un rastreo distribuido y ajuste la vista para encontrar la información más importante para usted.

<img title="Trace details page" alt="New Relic distributed tracing UI - trace details page" src="/images/distributed-tracing-trace-details-page.webp" />

<figcaption>
  Selecciona una traza del listado de trazas para ver detalles sobre la misma.
</figcaption>

Vea formas de mostrar los tramos de su traza:

<Tabs>
  <TabsBar>
    <TabsBarItem id="timeline-view">
      Vista de línea de tiempo
    </TabsBarItem>

    <TabsBarItem id="latency-view">
      Vista de latencia
    </TabsBarItem>

    <TabsBarItem id="waterfall-view">
      Vista de la cascada
    </TabsBarItem>
  </TabsBar>

  <TabsPages>
    <TabsPageItem id="timeline-view">
      La vista de línea de tiempo es una vista de alta densidad de todos los tramos de la traza. Esta vista le permite desplazarse rápidamente por toda la traza y ver cómo la latencia y los errores se propagan a través de la traza y a través de los límites de la entidad. Puede seleccionar tramos desde esta vista para ver los detalles del tramo en la vista de cascada debajo de ella.
    </TabsPageItem>

    <TabsPageItem id="latency-view">
      La vista de latencia le muestra cuánta latencia aporta cada entidad en la traza, así como el número de intervalos de error por entidad. La latencia aportada por una entidad es el tiempo de reloj en el que tenía uno o más procesos en ejecución pero **no** estaba realizando ninguna llamada externa o de base de datos. Aquí hay dos ejemplos:

      * Si una entidad tiene un proceso que dura 500 ms, pero 400 ms de ese tiempo está realizando una llamada externa, se muestra que contribuye con 100 ms de latencia a la traza.

      * Si una entidad tiene tres procesos ejecutándose en paralelo durante un segundo y ninguno de ellos realizó llamadas externas, se muestra que contribuye con un segundo de latencia a la traza.

        <img title="Latency view" alt="Screenshot showing the distributed tracing latency view" src="/images/distributed-tracing-trace-details-page-latency-view.webp" />
    </TabsPageItem>

    <TabsPageItem id="waterfall-view">
      La vista en cascada en la sección inferior de la página muestra un flujo detallado de todas las operaciones que componen el rastreo distribuido. Esto le permite ver el contexto exacto del que surgen la latencia y los errores.

      ### Controles de cascada [#waterfall-controls]

      La vista en cascada tiene una serie de controles para que sea más fácil encontrar tramos que le interesen:

      * <DNT>**Expand all/Collapse all**</DNT>: Utilice esta opción para alternar entre mostrar cada tramo (incluido el tramo en proceso) y mostrar tramos colapsados.

      * <DNT>**Standard/Manual**</DNT>: En el modo estándar, obtienes una vista semiampliada que incluye el primer tramo de cada proceso. En el modo manual, solo ves lo que expandes.

        * Tanto <DNT>**Standard**</DNT> como <DNT>**Manual**</DNT> son anulados por <DNT>**Expand all**</DNT>, que muestra todos los intervalos.
        * Si está en modo estándar o manual y hace clic en <DNT>**Collapse all**</DNT>, la cascada se restablece al valor predeterminado para el modo que está utilizando.

      * <DNT>**Focus on**</DNT>:Si su intervalo tiene errores o anomalías, verá casillas de verificación para cada uno de estos tipos. Si marca estas casillas, su vista de cascada contraerá todos los demás tipos de tramos y solo mostrará los tramos anómalos o con errores codificados por colores. Esta es una forma rápida de encontrar tramos problemáticos.

        <img style={{ width: "70%",align: "left" }} title="Screenshot showing the color coding of focus on" alt="Screenshot showing the color coding of focus on" src="/images/distributed-tracing_screenshot-crop_focus-on-example.webp" />

      * <DNT>**Maximize**</DNT>: Esto te permite ver más tramos en la pantalla expandiendo la cascada y ocultando el mapa de entidades.

        ### Propiedades del tramo de cascada [#span-icons]

        La UI indica las propiedades del tramo con estos iconos:

        <table id="span-types">
          <thead>
            <tr>
              <th style={{ width: "130px" }}>
                Propiedad de extensión
              </th>

              <th style={{ width: "110px" }}>
                Indicador
              </th>

              <th>
                Descripción
              </th>
            </tr>
          </thead>

          <tbody>
            <tr>
              <td>
                Servicio
              </td>

              <td>
                <img title="new-relic-distributed-tracing-service-span-icon.png" alt="New Relic distributed tracing service icon" src="/images/new-relic-distributed-tracing-service-icon.webp" />
              </td>

              <td>
                Este icono representa un tramo que es el punto de entrada de un servicio.
              </td>
            </tr>

            <tr id="in-process">
              <td>
                En proceso
              </td>

              <td>
                <img title="new-relic-distributed-tracing-in-process-span-icon.png" alt="New Relic distributed tracing in-process span icon " src="/images/new-relic-distributed-tracing-inprocess-icon.webp" />
              </td>

              <td>
                Este icono representa un [lapso en proceso](#in-process), que es un lapso que tiene lugar dentro de un proceso (a diferencia de un lapso entre procesos). Ejemplos: instrumentación de middleware, tramos creados por el usuario.
              </td>
            </tr>

            <tr>
              <td>
                Almacenamiento de datos
              </td>

              <td>
                <img title="new-relic-distributed-tracing-database-span-icon.png" alt="New Relic distributed tracing datastore span icon" src="/images/new-relic-distributed-tracing-databases-icon.webp" />
              </td>

              <td>
                Este icono representa una llamada de intervalo a un almacenamiento de datos.
              </td>
            </tr>

            <tr>
              <td>
                Externo
              </td>

              <td>
                <img title="new-relic-distributed-tracing-external-span-icon.png" alt="New Relic distributed tracing external span icon" src="/images/new-relic-distributed-tracing-external-icon.webp" />
              </td>

              <td>
                Este icono representa una categoría que representa una llamada a un servicio externo realizada a través de HTTP.
              </td>
            </tr>

            <tr>
              <td>
                Aplicación browser
              </td>

              <td>
                <img title="distributed-tracing-browser-span-icon.png" alt="New Relic distributed tracing browser span icon" src="/images/distributed-tracing-browser-span-icon.webp" />
              </td>

              <td>
                Este icono representa una [extensión de aplicación del navegador](/docs/browser/new-relic-browser/browser-pro-features/browser-data-distributed-tracing).
              </td>
            </tr>

            <tr>
              <td>
                Lambda
              </td>

              <td>
                <img title="new-relic-distributed-tracing-lambda-icon.png" alt="New Relic distributed tracing external span icon" src="/images/new-relic-distributed-tracing-lambda-icon.webp" />
              </td>

              <td>
                Este icono representa un intervalo de una [función Lambda](/docs/serverless-function-monitoring/aws-lambda-monitoring/get-started/introduction-new-relic-monitoring-aws-lambda).
              </td>
            </tr>
          </tbody>
        </table>

        Algunos tramos tendrán indicadores adicionales:

        <table id="span-types-table">
          <thead>
            <tr>
              <th style={{ width: "130px" }}>
                Propiedad de extensión
              </th>

              <th style={{ width: "110px" }}>
                Indicador
              </th>

              <th>
                Descripción
              </th>
            </tr>
          </thead>

          <tbody>
            <tr id="connecting-lines">
              <td>
                Tipo de conexión
              </td>

              <td>
                <img title="new-relic-distributed-tracing-lines-image.png" alt="New Relic distributed tracing connecting lines image" src="/images/new-relic-distributed-tracing-lines-image.webp" />
              </td>

              <td>
                Las líneas continuas indican una relación directa entre padres/hijos; en otras palabras, un proceso o función llama directamente a otro. Una línea de puntos indica una relación no directa. Para más información sobre las relaciones entre tramos, consulte [estructura de traza](/docs/understand-dependencies/distributed-tracing/get-started/how-new-relic-distributed-tracing-works#trace-structure).
              </td>
            </tr>

            <tr>
              <td>
                Errores
              </td>

              <td>
                <img title="new-relic-distributed-tracing-error-icon.png" alt="New Relic distributed tracing error icon" src="/images/new-relic-distributed-tracing-error-icon.webp" />
              </td>

              <td>
                Un lapso con un error. Consulte [Cómo entender los errores de extensión](#error-tips).
              </td>
            </tr>

            <tr>
              <td>
                Anómalo
              </td>

              <td>
                <img title="new-relic-distributed-tracing-anomalous-icon.png" alt="New Relic distributed tracing datastore span icon" src="/images/new-relic-distributed-tracing-anomalous-icon.webp" />
              </td>

              <td>
                Este icono representa la detección de un [lapso anómalo](#anomalous-spans).
              </td>
            </tr>

            <tr>
              <td>
                Tramos huérfanos
              </td>

              <td>
                <img title="new-relic-distributed-tracing-fragmented-icon.png" alt="New Relic distributed tracing orphaned span icon" src="/images/new-relic-distributed-tracing-orphan-icon.webp" />
              </td>

              <td>
                Algunos tramos pueden quedar &quot;huérfanos&quot; o separados de la traza. Estos tramos aparecerán en la parte inferior de la traza. Para más detalles, ver [Traza fragmentada](#fragmented-traces).
              </td>
            </tr>

            <tr>
              <td>
                Varios nombres de aplicaciones
              </td>

              <td>
                <img title="new-relic-distributed-tracing-multiple-app-names-indicator.png" alt="New Relic distributed tracing multiple app names indicator" src="/images/new-relic-distributed-tracing-multiapp-icon.webp" />
              </td>

              <td>
                Cuando está al lado de un nombre de extensión, representa una entidad que ha tenido [configurados varios nombres de aplicaciones](/docs/agents/manage-apm-agents/app-naming/use-multiple-names-app). Seleccione esto para ver todos los nombres de aplicaciones a las que informa. Para buscar datos de traza por nombres de aplicaciones alternativos, utilice el atributo `appName` .
              </td>
            </tr>

            <tr>
              <td>
                Diferencia horaria cliente/servidor
              </td>

              <td>
                <img title="new-relic-distributed-tracing-client-server-time-indicator.png" alt="New Relic distributed tracing client-server time difference indicator" src="/images/new-relic-distributed-tracing-client-server-time-indicator.webp" />
              </td>

              <td>
                Si el indicador de duración de un lapso no está completamente coloreado (como en este ejemplo), significa que hay una discrepancia de tiempo entre la duración del lado del servidor y la duración del lado del cliente para esa actividad. Para obtener más información sobre esto, consulte [Diferencia horaria cliente/servidor](#client-server-time).
              </td>
            </tr>
          </tbody>
        </table>
    </TabsPageItem>
  </TabsPages>
</Tabs>

## Panel de detalles del tramo [#span-details]

Cuando selecciona un tramo, se abre un panel con detalles del tramo. Estos detalles pueden ser útiles para la resolución de problemas de rendimiento. Esta página tiene tres pestañas:

* <DNT>**Performance**</DNT>:Verá gráficos que muestran la duración promedio y el rendimiento para esa operación de lapso, así como también cómo el rendimiento de este lapso específico se compara con el promedio.
* <DNT>**Attributes**</DNT>: Puede obtener más información sobre el atributo en nuestro [diccionario de datos](/attribute-dictionary/?dataSource=Distributed+Tracing&event=Span).
* <DNT>**Details**</DNT>: Puede ver detalles, como el [nombre completo del tramo](/docs/distributed-tracing/ui-data/understand-use-distributed-tracing-ui/#prettified-span-names) y la fuente de datos.
* <DNT>**Span links**</DNT>:Si el lapso tiene [enlaces de lapso](#span-links), verá esta pestaña. Muestra relaciones causales con tramos de otras trazas. [Obtenga más información sobre los enlaces span](#span-links).

Lo que muestra un tramo se basa en su tipo de tramo. Por ejemplo, los detalles del intervalo de almacenamiento de datos incluirán la consulta de la base de datos. Para obtener más información sobre la estructura de la traza y cómo se determinan las propiedades de extensión, consulte [estructura de la traza](/docs/understand-dependencies/distributed-tracing/get-started/how-new-relic-distributed-tracing-works#trace-structure).

## Comprensión de los enlaces span [#span-links]

Los vínculos de tramos lo ayudan a comprender las relaciones causales entre tramos en diferentes trazas. Cuando las trazas se dividen debido a una comunicación asincrónica o a procesos de larga duración, los enlaces span le permiten navegar entre trazas relacionadas y ver la imagen completa de sus sistemas distribuidos.

### Cuando la traza se divide [#why-traces-split]

En los sistemas distribuidos modernos, la traza puede aparecer como traza separada y desconectada en los siguientes escenarios:

* <DNT>**Long-running workflows**</DNT>:Trabajos en segundo plano o flujo de trabajo que exceden los límites de duración del rastreo (más de 90 segundos para ejemplificación al inicio, más de 20 segundos para rastreo infinito) o se ejecutan durante periodos prolongados.

Al rastrear a través de cola de mensajes, generalmente se recomienda emplear enlaces span para asociar el rastreo del productor(es) y el consumidor(es). Los ejemplos incluyen:

* <DNT>**General asynchronous message queues**</DNT>: Un servicio publica mensajes en una cola (como AWS SQS, RabbitMQ o Kafka) y otro servicio los consume más tarde.
* <DNT>**Batch-processing**</DNT>: Trabajadores que procesan múltiples mensajes en lotes, donde cada mensaje se originó desde una traza diferente
* <DNT>**Fan-in pattern**</DNT>: Varios servicios producen de forma independiente mensajes que un consumidor agrega.
* <DNT>**Fan-out pattern**</DNT>: Múltiples consumidores consumen de una cola de mensajes, cada uno iniciando su propia traza

Cuando los rastros se dividen de esta manera, las relaciones tradicionales entre padres e hijos no capturan el panorama completo. Los enlaces Span llenan este vacío al crear conexiones causales explícitas.

### ¿Qué son los enlaces span? [#what-are-span-links]

Los enlaces de tramo son atributos OpenTelemetry que crean relaciones causales entre tramos que no tienen una conexión padre-hijo directa. Te permiten:

* Navegar desde un lapso de consumo hasta el lapso de producción
* Comprenda el flujo de solicitud completo incluso cuando los trazas están divididos
* Depurar problemas que trascienden límites asincrónicos

Un enlace de tramo incluye el ID de traza y el ID de tramo del tramo relacionado, lo que permite que New Relic conecte el traza por usted.

### Identificación de trazas con enlaces span [#identify-span-links]

En la UI de detalles de traza, los traza con enlaces span están marcados de varias maneras:

1. <DNT>**Span links filter badge**</DNT>:En la barra de filtro de traza, verás una insignia que muestra la cantidad de tramos con enlaces (por ejemplo, `span links (2)`).
2. <DNT>**Span count indicator**</DNT>: Al ver la lista de tramos, cada tramo muestra un recuento de enlaces si tiene enlaces de tramo.

<img title="Distributed tracing span links filter" alt="Screenshot showing the span links filter badge in the trace details UI" src="/images/distributed-tracing-span-links-filter-badge.webp" />

<figcaption>
  La insignia de filtro de enlaces de tramo aparece en la barra de filtro de traza cuando una traza contiene tramos con enlaces.
</figcaption>

### Visualización de enlaces de tramo [#view-span-links]

Para ver y navegar por los enlaces de span:

1. Desde la página de detalles de traza, seleccione un tramo de los enlaces de tramos desplegables.

2. En el panel de detalles del tramo, haga clic en la pestaña <DNT>**Span links**</DNT>.

3. Verás una lista de trazas vinculadas con la siguiente información:

   * <DNT>**Direction badge**</DNT>: `Forward` indica un lapso que ocurrió más tarde en el tiempo (sucesor), mientras que `Backward` indica un lapso que ocurrió antes (predecesor).
   * <DNT>**Trace ID**</DNT>: El ID del trazado vinculado (truncado para su visualización).
   * <DNT>**Timestamp**</DNT>: Cuando se produjo el lapso vinculado.
   * <DNT>**Duration**</DNT>: Cuánto tiempo tardó el tramo vinculado.
   * <DNT>**Errors**</DNT>: Número de errores en la traza vinculada.

4. Haga clic en un trazado vinculado para navegar hasta él. Emplee el botón Atrás de su navegador para regresar a la página original.

<img title="Span links tab showing linked traces" alt="Screenshot showing the Span links tab with forward and backward linked traces" src="/images/distributed-tracing-span-links-tab-detail.webp" />

<figcaption>
  La pestaña Enlaces de Span muestra trazas vinculadas con insignias de dirección (Adelante/Atrás), identificaciones de trazas, marca de tiempo, duraciones y recuentos de errores.
</figcaption>

<Callout variant="tip">
  <DNT>**Understanding forward vs. backward links**</DNT>

  * <DNT>**Forward links**</DNT>: Punto a traza que ocurrió como resultado del lapso actual. Ejemplo: Un mensaje fue publicado por este lapso y procesado más tarde por otro traza.
  * <DNT>**Backward links**</DNT>: Punto a traza que causo el lapso actual. Ejemplo: Este lapso está procesando un mensaje que fue publicado por un traza anterior.
</Callout>

### Cuando los enlaces span no aparecen [#span-links-troubleshooting]

Si espera ver enlaces span pero no aparecen, verifique lo siguiente:

<img title="Empty state when trace has no span links" alt="Screenshot showing the empty state message when a trace has no span links" src="/images/distributed-tracing-span-links-empty-state.webp" />

<figcaption>
  Cuando una traza no tiene enlaces de extensión, verá este mensaje en la pestaña Enlaces de extensión.
</figcaption>

<CollapserGroup>
  <Collapser id="trace-context-not-propagated" title="Contexto de traza no propagado">
    Los enlaces Span requieren una traza adecuada del contexto a través de su sistema de mensajería:

    * Cerciorar de que los encabezados de contexto de seguimiento W3C (`traceparent`, `tracestate`) estén incluidos en los encabezados o metadatos del mensaje
    * Verifique que su biblioteca o framework de mensajería admita la propagación del contexto
    * Al instrumentar manualmente, cerciorar de extraer el contexto de los mensajes y crear vínculos span programáticamente.

    Para ver ejemplos de implementación, consulte [las mejores prácticas de enlaces span de OpenTelemetry](/docs/opentelemetry/best-practices/opentelemetry-best-practices-traces/#span-links).
  </Collapser>

  <Collapser id="sampling" title="Consideraciones de muestreo">
    Tanto el trazado original como el trazado vinculado deben muestrearse para que aparezcan los vínculos entre tramos:

    * Si se elimina alguno de los trazas mediante ejemplificación, el enlace de extensión no será visible
    * Considere emplear estrategias basadas en la cabeza o ejemplificación al final que preserven trazas importantes
    * Para flujos de trabajo críticos con enlaces de tramo, es posible que desee ajustar las frecuencias de ejemplificación
  </Collapser>

  <Collapser id="data-processing" title="Datos aún no procesados">
    Puede haber una demora entre el momento en que se envían los datos de traza y el momento en que aparecen los enlaces de span:

    * Espere de 1 a 2 minutos para que los datos se procesen e indexen.
    * Verifique que ambos traza vinculados se ingirieron correctamente
    * Verifique que no esté alcanzando ningún límite de datos o de velocidad.
  </Collapser>
</CollapserGroup>

Para obtener más información sobre cómo implementar enlaces de tramo en su instrumentación, consulte nuestra [guía de mejores prácticasOpenTelemetry para traza](/docs/opentelemetry/best-practices/opentelemetry-best-practices-traces/#span-links).

## Span atributo [#span-attributes]

Si desea obtener más información sobre los datos de `Span` :

* Explore los datos de su intervalo utilizando el [generador de consultas](/docs/chart-builder/use-chart-builder/get-started/introduction-chart-builder).
* Para ver el atributo predeterminado adjunto a los datos de extensión, use el [diccionario de datos](/attribute-dictionary/?event=Span).
* Consulte estos [ejemplos de consulta](/docs/apm/distributed-tracing/ui-data/example-insights-queries-distributed-trace-data) para obtener ayuda con la consulta NRQL utilizando estos atributos.

## Ver log relacionado [#view-your-logs]

Si está utilizando nuestra característica [de logs en el contexto](/docs/logs/logs-context/configure-logs-context-apm-agents/) , podrá ver cualquier log que esté vinculado a su traza:

1. Vaya a la página de detalles de la traza haciendo clic en una traza.
2. En la esquina superior izquierda de la página de detalles del tramo, haga clic en la pestaña <DNT>**Logs**</DNT> .
3. Para obtener detalles relacionados con un mensaje de log individual, haga clic directamente en el mensaje.