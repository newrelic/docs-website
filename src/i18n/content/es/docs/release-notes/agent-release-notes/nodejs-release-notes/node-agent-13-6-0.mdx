---
subject: Node.js agent
releaseDate: '2025-10-27'
version: 13.6.0
downloadLink: 'https://www.npmjs.com/package/newrelic'
security: []
bugs:
  - Updated `ioredis` instrumentation to handle breakage of errors when using `.pipeline`
  - Updated `openai` `instrumentStream` function to handle empty chunk when `include_usage` is set
features:
  - Added instrumentation for http2 client methods
translationType: machine
---

## Notas

#### Característica

* Se agregó instrumentación para los métodos del cliente http2 ([#3284](https://github.com/newrelic/node-newrelic/pull/3284)) ([bda7aea](https://github.com/newrelic/node-newrelic/commit/bda7aeaac16ce9f54bd28de72aa7465be96cd157))

#### Corrección de errores

* Se actualizó la instrumentación `ioredis` para manejar la ruptura de errores al usar `.pipeline`. ([#3457](https://github.com/newrelic/node-newrelic/pull/3457)) ([49f4d93](https://github.com/newrelic/node-newrelic/commit/49f4d93a59045f35406dfdbd3248dca0652727d6))
* Se actualizó la función `openai` `instrumentStream` para manejar el fragmento vacío cuando se establece `include_usage` ([#3427](https://github.com/newrelic/node-newrelic/pull/3427)) ([f804940](https://github.com/newrelic/node-newrelic/commit/f8049405003f0811450f75468e0bddfb1f05ec2b))

#### Refactorización de código

* Actualizar `express` instrumentación para suscribir al evento emitido ([#3424](https://github.com/newrelic/node-newrelic/pull/3424)) ([bbf3d01](https://github.com/newrelic/node-newrelic/commit/bbf3d010bc402953e53cae5200af6bfb55a6446d))
* Instancia actualizada en instrumentación de `Array.forEach` para un bucle for...of o for index más eficiente ([#3463](https://github.com/newrelic/node-newrelic/pull/3463)) ([99484ce](https://github.com/newrelic/node-newrelic/commit/99484ce0e7a963fbbc3cbc22f4956ce19e5eecc2))
* Instancia actualizada de `Array.forEach` para un bucle for...of o for index más eficiente ([#3440](https://github.com/newrelic/node-newrelic/pull/3440)) ([48c37bf](https://github.com/newrelic/node-newrelic/commit/48c37bf7f85291553666d4512ca995b6a5b136a2))
* Actualización del cálculo token para el evento `aws-bedrock` LLM ([#3445](https://github.com/newrelic/node-newrelic/pull/3445)) ([9450181](https://github.com/newrelic/node-newrelic/commit/945018171da713487a0b5b674e68bdbb211e655e))
* Actualización del cálculo token para el evento LLM `google-genai` ([#3431](https://github.com/newrelic/node-newrelic/pull/3431)) ([41d32be](https://github.com/newrelic/node-newrelic/commit/41d32befe1d9c3201b62253a5de76c918d98a025))
* Actualización del cálculo token para el evento LLM `openai` ([#3430](https://github.com/newrelic/node-newrelic/pull/3430)) ([b8678cc](https://github.com/newrelic/node-newrelic/commit/b8678cc92bb986eae7efec4b516f66406307e841))

#### Documentación

* Reporte de compatibilidad actualizado ([#3459](https://github.com/newrelic/node-newrelic/pull/3459)) ([f253b97](https://github.com/newrelic/node-newrelic/commit/f253b97c039caa9e9110055d93e0c32e2d6911a8))

#### Tareas varias

* Actualización del lanzamiento flujo de trabajo ([#3444](https://github.com/newrelic/node-newrelic/pull/3444)) ([d1ec158](https://github.com/newrelic/node-newrelic/commit/d1ec158f46d034160b665f8b0785c020ba39b820))

#### Pruebas

* Se agregó un auxiliar `randomString` a agent\_helper y se usa en ioredis para evitar pruebas inestables; también se actualizó la instancia local de cadenas aleatorias en las pruebas de kafka, elasticsearch y opensearch ([#3462](https://github.com/newrelic/node-newrelic/pull/3462)) ([4deb6d8](https://github.com/newrelic/node-newrelic/commit/4deb6d80d9daa7fd9d4c077a5cc52f358ed44e61))
* Se solucionó el conflicto entre ioredis e ioredis-esm ejecutando `flushdb` en lugar de `flushall` para evitar que el índice se eliminara durante la prueba ([#3464](https://github.com/newrelic/node-newrelic/pull/3464)) ([5e3f0a8](https://github.com/newrelic/node-newrelic/commit/5e3f0a81bfcf8bc8cf04559f29d3a76c1262bcc7))
* Se corrigió la prueba de error asíncrono de Express para escribir mal a propósito un método y provocar un fallo ([#3435](https://github.com/newrelic/node-newrelic/pull/3435)) ([ff9f064](https://github.com/newrelic/node-newrelic/commit/ff9f0646c4fc23e367c1e190eb8091423c690103))
* Se trasladó el requisito de semver de AWS-sdk-v3 common.js ([#3461](https://github.com/newrelic/node-newrelic/pull/3461)) ([6a380ef](https://github.com/newrelic/node-newrelic/commit/6a380ef580268be131417587a2dda5adf3545e68))
* Pruebas de Next.js fijadas en `<16.0.0` ([#3446](https://github.com/newrelic/node-newrelic/pull/3446)) ([10787a1](https://github.com/newrelic/node-newrelic/commit/10787a1f4e325b7321173ee5b2fab0809af5e8d1))
* Se actualizó la versión mínima probada de `@langchain/core` a 1.0.0 ([#3437](https://github.com/newrelic/node-newrelic/pull/3437)) ([b61f67a](https://github.com/newrelic/node-newrelic/commit/b61f67a4c6d59f0b2a49e0de93a6d38e56d214fd))

### Declaración de apoyo:

Recomendamos actualizar a la última versión del agente tan pronto como esté disponible. Si no puede actualizar a la última versión, actualice su agente a una versión que no tenga más de 90 días de antigüedad. Obtenga más información sobre cómo mantener al agente actualizado. ([https:\\/\\/docs.newrelic.com\\/docs\\/new-relic-solutions\\/new-relic-one\\/install-configure\\/update-new-relic-agent\\/](https://docs.newrelic.com/docs/new-relic-solutions/new-relic-one/install-configure/update-new-relic-agent/))

Consulte la política de EOL del agente Node.js de New Relic para obtener información sobre los lanzamientos del agente y las fechas de soporte. ([https:\\/\\/docs.newrelic.com\\/docs\\/apm\\/agents\\/nodejs-agent\\/getting-started\\/nodejs-agent-eol-policy\\/](https://docs.newrelic.com/docs/apm/agents/nodejs-agent/getting-started/nodejs-agent-eol-policy/))