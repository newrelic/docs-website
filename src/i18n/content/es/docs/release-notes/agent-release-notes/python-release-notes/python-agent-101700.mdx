---
subject: Python agent
releaseDate: '2025-09-04'
version: 10.17.0
downloadLink: 'https://pypi.python.org/pypi/newrelic'
features:
  - Adds support for custom tasks in Celery
  - Adds support for graphene-django
  - Adds support for middleware filtering in Django
  - Adds support for AWS Bedrock Converse API
  - Adds support for W3CTraceParent header sampled flag
bugs:
  - Safeguard for deepest unique path in GraphQL
  - Safeguard for web request parsing
  - Fix crash in GraphQL
  - Fix crash in ElasticSearch
translationType: machine
---

## Notas

Esta versión del agente Python agrega soporte para lo siguiente:

* Tareas personalizadas en [Celery](https://pypi.org/project/celery/)
* Monitoreo de [Graphene-Django](https://pypi.org/project/graphene-django/)
* Filtrado de middleware en [Django](https://pypi.org/project/django/)
* API de AWS Bedrock [Converse](https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/bedrock-runtime/client/converse.html)
* Bandera muestreada del encabezado W3CTraceParent

Esta versión también proporciona las siguientes correcciones:

* Salvaguardias para la ruta única más profunda en GraphQL
* Medidas de seguridad para el análisis de solicitudes de URL sitio web
* Respaldo para ElasticSearch y GraphQL cuando `trace.settings==None`
* Eliminar el método `options` de la lista de clientes de ElasticSearch asíncronos

Instale el agente usando `easy_install/pip/distribute` a través del [Índice de paquetes de Python](https://pypi.python.org/pypi/newrelic) o descárguelo directamente del [sitio de descarga de New Relic](https://download.newrelic.com/python_agent/release).

## Nueva característica

* Agrega soporte para tareas personalizadas en Celery

  * Agregue soporte de monitoreo para clases de tareas personalizadas en [Celery](https://pypi.org/project/celery/). Anteriormente, solo se podían monitorear las tareas que empleaban la clase de tarea predeterminada. Nota: Esta versión del agente Python ya no admitirá versiones de Celery anteriores a [v5.2.0](https://github.com/celery/celery/releases/tag/v5.2.0).

* Agrega soporte para Graphene-Django

  * Agregue soporte de monitoreo para esquemas sincrónicos creados con [Graphene-Django](https://pypi.org/project/graphene-django/). Anteriormente, los esquemas creados con Graphene-Django solo se monitoreaban parcialmente, lo que generaba que faltaran atributos relacionados con [GraphQL](https://pypi.org/project/graphql-core/).

* Agrega soporte para filtrado de middleware en Django

  * Los usuarios ahora pueden filtrar qué middleware [Django](https://pypi.org/project/django/) monitorear. Ahora hay [tres configuraciones adicionales](/docs/apm/agents/python-agent/configuration/python-agent-configuration/#middleware-filters):

    * `instrumentation.middleware.django.enabled` (El valor predeterminado es `true`)
    * `instrumentation.middleware.django.exclude`
    * `instrumentation.middleware.django.include`

  Consulte la [página de filtrado de middleware de Django](/docs/apm/agents/python-agent/supported-features/django-middleware-filtering/) para obtener más información y ejemplos.

* Agrega soporte para la API de AWS Bedrock Converse

  * Agregue soporte de monitoreo para la API [de Converse](https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/bedrock-runtime/client/converse.html) que no es de transmisión. Esto incluye soporte para `converse` llamadas de finalización de chat realizadas empleando clientes `boto3` y `aioboto3`.

* Agrega compatibilidad con el indicador muestreado del encabezado W3CTraceParent

  * Cuando un servicio ascendente envía el encabezado W3CTraceParent con el indicador de ejemplificación establecido, New Relic tendrá en cuenta esa decisión de ejemplificación al decidir si se muestreará la transacción actual.

* Se agregó soporte para tomar decisiones de ejemplificación en función de si el padre remoto está muestreado

  * Se agregó soporte para dos nuevas opciones de configuración:

    * `distributed_tracing.sampler.remote_parent_sampled`
    * `distributed_tracing.sampler.remote_parent_not_sampled`

  * `default` es el comportamiento predeterminado y se comporta como lo hacía antes de este cambio (pasa la decisión de ejemplificación al algoritmo de ejemplificación adaptativa para determinar si se muestreará la transacción).

  * `always_on` significa que la traza que tiene un padre remoto muestreado o un padre remoto no muestreado siempre será muestreada.

  * `always_off` significa que la traza que tiene un padre remoto muestreado o un padre remoto no muestreado nunca será muestreado.

## Corrección de errores

* Agregar protección para la ruta única más profunda en GraphQL

  * Algunos usuarios estaban experimentando problemas con la ruta única más profunda en [GraphQL](https://pypi.org/project/graphql-core/) que no se generaba debido a que un nombre de campo devolvía `None`. Este problema fue solucionado.

* Agregar protección para el análisis de solicitudes sitio web

  * Algunos usuarios experimentaron un error de análisis cuando `request_uri` estaba mal formado o contenía caracteres no válidos. Esto puede suceder en este punto si el `request_uri` en el encabezado de la solicitud no es válido y no coincide con la URL (válida) proporcionada originalmente. Si bien esta protección ya se implementó en New Relic, `urllib` resolvió este problema para las versiones de Python lanzadas luego del 31 de enero de 2025.

* Se solucionó el fallo en ElasticSearch y GraphQL cuando `trace.settings==None`

  * En los casos donde `trace.settings` es `None`, la instrumentación de ElasticSearch hizo que la aplicación fallara. Se implementó un respaldo `global_settings`. Esto también resuelve el mismo problema encontrado en GraphQL.

* Eliminar el método `options` de la lista de clientes de ElasticSearch asíncronos

  * La instrumentación anterior de ElasticSearch provocó un bloqueo porque `options` estaba en la lista de métodos asincrónicos. Este método ya no está envuelto en un `DatastoreTrace` ya que no es uno que realice ninguna operación/requests de almacenamiento de datos.

## Declaración de apoyo

Recomendamos actualizar a la última versión del agente tan pronto como esté disponible. Si no puede actualizar a la última versión, actualice su agente a una versión que no tenga más de 90 días de antigüedad. Obtenga [más información](/docs/new-relic-solutions/new-relic-one/install-configure/update-new-relic-agent/) sobre cómo mantener al agente actualizado.

Consulte la New Relic Python [política](/docs/apm/agents/python-agent/getting-started/python-agent-eol-policy/) de fin de vida del agente para obtener información sobre los lanzamientos del agente y las fechas de soporte.