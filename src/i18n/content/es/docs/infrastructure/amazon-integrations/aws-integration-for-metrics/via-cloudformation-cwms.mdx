---
title: Integración a través de CloudFormation y CloudWatch Metric Streams
tags:
  - Integration via CloudFormation
  - AWS metric integration
  - Amazon integrations
  - AWS integrations
  - Integration with CloudWatch Metric Streams via CloudFormation
metaDescription: Integrate New Relic with AWS services using CloudFormation templates to automate the setup of CloudWatch Metric Streams for metrics ingestion.
freshnessValidatedDate: never
translationType: machine
---

Para una integración perfecta de su cuenta de AWS con New Relic, este es el proceso de integración más recomendado. Puede emplear API Polling para servicios no compatibles con CloudWatch Metric Streams.

## Requisitos previos [#prerequisites]

Antes de comenzar a integrar su cuenta de AWS con New Relic, cerciorar de cumplir con los siguientes requisitos previos:

* **Una [clave de licencia de New Relic Ingest y una clave de usuario](https://one.newrelic.com/api-keys)**: necesitará estas claves para conectar sus servicios de AWS a su cuenta de New Relic.
* **[Licencias](https://docs.aws.amazon.com/ARG/latest/userguide/gettingstarted-prereqs-permissions.html)** para implementar nuevos recursos AWS y **[roles de IAM](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles.html)**: necesitará esta licencia para su cuenta AWS.
* **[Licencias](/docs/accounts/accounts-billing/new-relic-one-user-management/user-permissions/#infrastructure)** para la integración en la nube: Necesitarás estas licencias para tu cuenta New Relic.

## Pasos de integración [#integration-steps]

Para integrar su cuenta de AWS con New Relic mediante CloudFormation y CloudWatch Metric Streams, siga estos pasos:

1. Navegar a [<DNT>**Infrastructure &gt; AWS**</DNT>](https://one.newrelic.com/infra/infrastructure/cloud-aws).

2. Seleccione la cuenta correcta.

3. Haga clic en <DNT>**Set up integration**</DNT>.

4. Siga las instrucciones en cada pantalla y complete los campos que correspondan. Para esta integración, elija las siguientes opciones en las pantallas dadas:

   1. <DNT>**Choose Data type(s)**</DNT>: <DNT>Metrics</DNT>
   2. <DNT>**Choose a setup method**</DNT>: <DNT>Automate AWS with CloudFormation (Recommended)</DNT>
   3. <DNT>**Choose a metrics integration type**</DNT>: <DNT>CloudWatch Metric Stream (Recommended)</DNT>

5. Si está empleando alguno de los servicios que no son compatibles con CloudWatch Metric Streams, en la página <DNT>**Choose a metrics integration type**</DNT>, seleccione <DNT>**Yes**</DNT> en el tercer paso para el sondeo API y continúe.

   <img title="AWS Integration with CWMS and API Polling" alt="AWS Integration with CWMS and API Polling" src="/images/aws-integration-cf-apipolling.webp" />

   <figcaption>
     Integración CWMS de servicios de AWS con sondeo API seleccionado para servicios no soportados.
   </figcaption>

   Realice la configuración necesaria según las instrucciones de la página <DNT>**Enable API Polling (optional)**</DNT> y continúe.

6. <DNT>Auto-discovery</DNT> detecta y visualiza automáticamente las relaciones entre sus entidades AWS en los mapas y aprovecha algunas otras flexibilidades. Para obtener más detalles, consulte [Descubrimiento automático de entidades AWS ](/docs/infrastructure/amazon-integrations/connect/set-up-auto-discovery-of-aws-entities/). Si desea esta función, habilítela en la página <DNT>**Enable Auto Discovery (optional)**</DNT> y continúe.

7. Haga clic en <DNT>**Launch your CloudFormation in AWS**</DNT>. La plantilla de CloudFormation se abre en su consola AWS con el parámetro configurado según sus selecciones en New Relic, por lo que no es necesaria ninguna edición adicional a menos que desee realizar cambios.

8. Pegue Ingest - clave de licencia y la clave de usuario en su consola AWS.

<Callout variant="tip">
  Para obtener metadatos adicionales de sus servicios de AWS, habilite <DNT>**AWS Config**</DNT> desde la consola de AWS.
</Callout>

10. Para implementar la stack CloudFormation, en la consola AWS, seleccione <DNT>**Create stack**</DNT>. La creación de los recursos stack puede tardar varios minutos y puede generar múltiples pilas, dependiendo de cómo configure el reenvío de métrica. Si falla la creación stack, consulte el [procedimiento de resolución de problemas](https://docs.newrelic.com/docs/logs/troubleshooting/aws-log-integration-issues/stack-creation-fails/).

11. Luego de crear una stack exitosa, cambie a la plataforma New Relic y continúe con la integración guiada hasta que vea sus datos AWS en New Relic.

## Temas relacionados [#related-topics]

<DocTiles>
  <DocTile title="Recopilar datos de varias cuentas de AWS" path="/docs/infrastructure/amazon-integrations/manage-aws-data/aws-multi-account/">
    Aprenda a recopilar datos de varias cuentas de AWS.
  </DocTile>

  <DocTile title="AWS integración métrica" path="/docs/infrastructure/amazon-integrations/manage-aws-data/aws-integrations-metrics/">
    Explore y emplee métrica de CloudWatch Metric Streams.
  </DocTile>

  <DocTile title="Integración AWS a través de CloudFormation y API Polling" path="/docs/infrastructure/amazon-integrations/aws-integration-for-metrics/via-cloudformation-and-api-polling">
    Integre los servicios de AWS con New Relic empleando CloudFormation y API Polling.
  </DocTile>

  <DocTile title="Integración AWS a través de Terraform" path="/docs/infrastructure/amazon-integrations/aws-integration-for-metrics/terraform">
    Integre los servicios de AWS con New Relic usando Terraform.
  </DocTile>

  <DocTile title="Integración manual desde la consola AWS" path="/docs/infrastructure/amazon-integrations/aws-integration-for-metrics/manual">
    Integre manualmente los servicios de AWS con New Relic desde la consola de AWS.
  </DocTile>
</DocTiles>