---
title: Evento de resetear Fluent Bit frecuente
type: troubleshooting
tags:
  - Infrastructure
  - Infrastructure monitoring troubleshooting
  - Troubleshoot infrastructure
  - Fluent Bit
metaDescription: Troubleshooting steps to resolve the infrastructure agent bug causing endless Fluent Bit restart events due to hostname resolution issues.
freshnessValidatedDate: never
translationType: machine
---

## Problema

El agente de New Relic Infrastructure está enviando eventos `Fluent Bit Started` y `Fluent Bit Stopped` excesivos sin reinicios reales Fluent Bit. Esto puede saturar los logs, afectar la precisión del monitoreo y aumentar la ingesta de datos, lo que potencialmente puede generar cargos de facturación inesperados.

## Causa

Esto se debe a un error en el componente de resolución de nombre de host del agente de infraestructura. El agente detecta incorrectamente cambios frecuentes en el nombre de host, lo que provoca que `LogForwarderSupervisor` envíe estos eventos de resetear Fluent Bit falsos. Es posible que vea miles de mensajes de depuración similares al siguiente ejemplo:

```
time="2024-04-20T02:46:47Z" level=debug msg="Notifying observers." change=2 component=HostnameResolver
time="2024-04-20T02:46:47Z" level=debug msg="Observer notified." component=HostnameResolver name=LogForwarderSupervisor
```

## Solución

Para resolver este problema, modifique el comportamiento de resolución del nombre de host en la configuración de su agente de infraestructura. Esta solución se aplica tanto a sistemas Windows como Linux.

Agregue la siguiente configuración a su archivo de configuración del agente de infraestructura:

**Linux**: `/etc/newrelic-infra.yml` **Windows**: `C:\Program Files\New Relic\newrelic-infra\newrelic-infra.yml`

```yml
dns_hostname_resolution: false
override_hostname: "your-server-hostname"
```

Reemplace `"your-server-hostname"` con el nombre de host de su servidor actual.

Esta configuración:

* Desactiva las búsquedas DNS inversas que pueden estar causando una detección de nombre de host inestable
* Obliga al agente a emplear un nombre de host específico, lo que evita cualquier detección de cambio de nombre de host

### Aplicar la configuración

Luego de agregar la configuración:

1. Almacene el archivo de configuración.

2. Resetear el agente de infraestructura New Relic :

   **Linux**:

   ```bash
   sudo systemctl restart newrelic-infra
   ```

   **Windows**:

   ```powershell
   Restart-Service newrelic-infra
   ```

## Verificación

Para confirmar que el problema está resuelto:

1. Monitorear los logs de su agente de infraestructura para detectar la ausencia de mensajes `HostnameResolver` repetidos.
2. Verifique el dashboard New Relic para cerciorar de que los eventos `Fluent Bit Started` y `Fluent Bit Stopped` ya no aparezcan continuamente.
3. Verifique que el reenvío de logs continúe funcionando normalmente y que los logs aparezcan como configurados.

## Recursos adicionales

* [agente de infraestructura nombre de host resolución documentación](https://github.com/newrelic/infrastructure-agent/blob/master/docs/hostname_resolution.md)
* [Valores de configuración del agente de infraestructura](/docs/infrastructure/install-infrastructure-agent/configuration/infrastructure-agent-configuration-settings/)