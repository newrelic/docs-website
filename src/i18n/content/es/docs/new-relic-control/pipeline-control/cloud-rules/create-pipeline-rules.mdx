---
title: Crear reglas de canalización
metaDescription: Learn how to create pipeline cloud rules to drop data or attributes after it reaches New Relic.
freshnessValidatedDate: never
translationType: machine
---

Las reglas de nube de Pipeline Control se ejecutan en la infraestructura de New Relic y procesan datos después de que llegan a los endpoints de New Relic. Use reglas de nube para descartar datos o atributos no deseados sin administrar ninguna infraestructura.

Las reglas de la nube son específicas de la cuenta, se crean usando NRQL y se administran a través de la interfaz de usuario de New Relic o la API de NerdGraph. Para procesar datos antes de que salgan de su red, consulte [Pipeline Control gateway](/docs/new-relic-control/pipeline-control/gateway/overview).

Para entender cuándo usar las reglas de la nube frente al gateway, consulta la [visión general de Pipeline Control](/docs/new-relic-control/pipeline-control/overview).

Tiene dos formas de crear reglas de nube a través de la UI de New Relic: el método guiado o escribiendo su propia consulta NRQL. El método guiado proporciona un asistente paso a paso para ayudarle a configurar reglas, mientras que la opción de consulta NRQL permite crear consultas personalizadas para filtrar datos con precisión. También puedes gestionar las reglas de la nube a través de una API. Para la configuración del gateway, consulte la [documentación del Gateway](/docs/new-relic-control/pipeline-control/gateway/overview).

Al crear una regla empleando el método guiado, puede especificar el tipo de datos que desea filtrar, incluidos métricas, eventos, logs o trazas. Además, puedes decidir dónde implementar la regla como una regla cloud que se ejecuta en la infraestructura de New Relico como una regla de puerta de enlace que se ejecuta en tu entorno.

<Callout variant="important">
  * Las reglas de control de pipelines solo se aplican a los datos que llegan desde el momento en que se crea la regla, no eliminan los datos que [ya se ingirieron](/docs/telemetry-data-platform/ingest-manage-data/manage-data/manage-data-retention#data-deletion).
  * Las reglas de puerta de enlace requieren la implementación de la puerta de enlace.
  * Para crear una regla, debe tener las capacidades adecuadas de control de acceso basado en roles (RBAC). Para obtener más detalles, consulte los [requisitos previos](/docs/new-relic-control/pipeline-control/overview/#prerequisites). Las reglas que cree, incluyendo toda la información que contengan, podrán ser vistas y editadas por cualquier usuario con las licencias RBAC pertinentes.
  * Al crear reglas, usted es responsable de garantizar que las reglas identifiquen y descarten con precisión los datos que cumplan las condiciones que estableció. Usted también es responsable de monitorear la regla, así como los datos que divulga a New Relic.
</Callout>

## Mediante método guiado [#via-guided-method]

Siga estos pasos para crear una regla de nube mediante el método guiado:

1. En New Relic, vaya a Control New Relic y abra la pestaña **Reglas dePipeline **.

2. Haga clic en **Crear una regla**. En el asistente que aparece, el método guiado está seleccionado por defecto.

3. Seleccione el tipo de datos que desea filtrar: **métrica**, **evento**, **Logs** o **traza** y luego haga clic **en Siguiente**.

4. Introduzca el nombre de la regla.

5. Seleccione si desea eliminar datos o atributos. Si desea eliminar registros completos, seleccione **Drop data**. Si desea eliminar atributos o propiedades específicos de datos que de otro modo se conservarían, seleccione **Drop attributes**.

6. Selecciona **Cloud rule** para desplegar la regla en la infraestructura de New Relic.

7. Opcionalmente, agregue una descripción amigable para su regla.

8. Para las reglas de nube, asegúrese de que la cuenta actual esté seleccionada.

9. Dependiendo del tipo telemetry data que seleccione anteriormente, realice la siguiente acción: **Para métrica:**

   * Seleccione la métrica para la cual desea eliminar datos.
   * Filtrar datos empleando la cláusula NRQL `WHERE` para delimitar los datos de consulta. La cláusula `WHERE` le permite agregar filtrado condicional en varios tipos de datos.
   * Si va a eliminar un atributo, emplee el menú desplegable para especificar el atributo métrico. **Para eventos:**
   * Seleccione el evento para el cual desea eliminar datos.
   * Filtrar datos empleando la cláusula NRQL `WHERE` para delimitar los datos de consulta.
   * Si va a eliminar un atributo, emplee el menú desplegable para especificar el atributo del evento. **Para logs:**
   * Seleccione la partición en la que desea eliminar datos.
   * Filtrar datos empleando la cláusula NRQL `WHERE` para delimitar los datos de consulta. Ejemplo de filtrado de logs: `level = 'INFO'` Esto le permite limitar su consulta a condiciones específicas, como filtrar logs por su nivel de logs, tipos de error u otros atributos relevantes.
   * Si va a eliminar un atributo, emplee el menú desplegable para especificarlo. **Para traza:**
   * Filtrar datos empleando la cláusula NRQL `WHERE` para delimitar los datos de consulta.
   * Si va a eliminar un atributo, emplee el menú desplegable para especificarlo.

10. Almacenar la regla. La regla es desplegar.

## Escribiendo una consulta NRQL [#nrql-query]

Siga estos pasos para crear una regla de nube escribiendo su propia consulta NRQL:

1. En New Relic, vaya a Control New Relic y abra la pestaña **Reglas dePipeline **.
2. Haga clic en **Create a rule**. Aparece el asistente para crear una nueva regla. El método guiado está seleccionado de forma predeterminada.
3. Seleccione **Write a NRQL query**.
4. Introduzca el nombre de la regla.
5. Para escribir su propia consulta NRQL para filtrar datos, haga clic en **Write your query**. El generador de consultas se abre en la parte inferior.
6. Escriba su consulta empleando la palabra clave `SELECT` y pruébela haciendo clic en **Run**. Esto le mostrará un ejemplo de los datos que se verán afectados por esta regla en el futuro cuando se ingiera. Sin embargo, los datos en reposo no se verán afectados por la regla que usted cree.
7. Cuando esté satisfecho, haga clic en **Save rule**. La palabra clave `SELECT` será reemplazada por la palabra clave `DELETE` al almacenar, de modo que la regla eliminará los datos a los que hizo referencia usando `SELECT`.
8. Selecciona **Cloud rule** para desplegar la regla en la infraestructura en la nube de New Relic.
9. Para la regla cloud , también tendrás que seleccionar la cuenta a la que quieres que se aplique la regla.
10. Haga clic en **Save**. La regla ahora se está implementando.

Para obtener la lista de funciones NRQL admitidas en las reglas de canalización, consulte [Funciones NRQL](/docs/new-relic-control/pipeline-control/nrql-functions).

## Precaución [#caution]

New Relic no puede garantizar que esta funcionalidad resolverá por completo las inquietudes sobre divulgación de datos que pueda tener. New Relic no revisa ni monitorea la efectividad de las reglas que desarrollas. Pruebe siempre y vuelva a probar su consulta y, luego de crear la regla de eliminación, cerciorar de que funcione como se espera.

Crear reglas sobre datos confidenciales puede revelar información sobre qué tipo de datos maneja, incluyendo el formato de sus datos o sistemas (por ejemplo, al hacer referencia a direcciones de email o números de tarjetas de crédito específicos).

## Próximo paso

* Para las reglas de nube, su regla ahora está desplegada y activa.
* Para la configuración del gateway, consulte la [documentación del gateway](/docs/new-relic-control/pipeline-control/gateway/overview).
* Para la configuración de la infraestructura de gateway, implemente un balanceador de carga para su clúster de gateway]\(/docs/new-relic-control/pipeline-control/load-balancer-for-gateway).