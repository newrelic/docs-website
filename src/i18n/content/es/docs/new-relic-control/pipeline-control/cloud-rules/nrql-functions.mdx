---
title: Compatibilidad con funciones NRQL en reglas de puerta de enlace (gateway)
metaDescription: Learn about the support for NRQL functions in Pipeline Control gateway rules and how to use them effectively.
freshnessValidatedDate: never
translationType: machine
---

Este documento describe las funciones NRQL admitidas en las reglas de puerta de enlace (gateway) de Control de pipelines. Emplee estas funciones para crear reglas más poderosas y precisas para filtrar y gestionar sus datos.

<table>
  <thead>
    <tr>
      <th>
        Función
      </th>

      <th>
        Descripción
      </th>

      <th>
        Ejemplo de consulta NRQL
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        [`aparse()`](/docs/nrql/nrql-syntax-clauses-functions/#func-aparse)
      </td>

      <td>
        Extrae un valor de una cadena según un patrón especificado.
      </td>

      <td>
        `DELETE FROM Log WHERE aparse(message, 'Error: %') = 'timeout'`
      </td>
    </tr>

    <tr>
      <td>
        [`dimensions()`](/docs/nrql/nrql-syntax-clauses-functions/#func-dimensions)
      </td>

      <td>
        Filtra datos en función de facetas o dimensiones asociadas a tu métrica/evento.
      </td>

      <td>
        `DELETE FROM Log WHERE dimensions() LIKE '%collectd%'`
      </td>
    </tr>

    <tr>
      <td>
        [`floor()`](/docs/nrql/nrql-syntax-clauses-functions/#floor)
      </td>

      <td>
        Devuelve el entero más grande menor o igual al número especificado.
      </td>

      <td>
        `DELETE FROM Metric WHERE floor(duration) > 5`
      </td>
    </tr>

    <tr>
      <td>
        [`getField()`](/docs/nrql/nrql-syntax-clauses-functions/#func-getfield)
      </td>

      <td>
        Extrae un campo específico de una estructura de datos compleja (por ejemplo, un objeto JSON).
      </td>

      <td>
        `DELETE FROM Metric WHERE getField(cpu_usage, percent) > 90`
      </td>
    </tr>

    <tr>
      <td>
        [`hourOf()`](/docs/nrql/nrql-syntax-clauses-functions/#func-minOf)
      </td>

      <td>
        Extrae el componente de hora de una timestamp.
      </td>

      <td>
        `DELETE FROM Log WHERE hourOf(timestamp) IN (2, 3, 4)`
      </td>
    </tr>

    <tr>
      <td>
        [`mod()`](/docs/nrql/nrql-syntax-clauses-functions/#func-mod)
      </td>

      <td>
        Devuelve el resto de una operación de división.
      </td>

      <td>
        `DELETE FROM Log WHERE mod(timestamp/1000,20) != 1`
      </td>
    </tr>

    <tr>
      <td>
        [`numeric()`](/docs/nrql/nrql-syntax-clauses-functions/#type-conversion)
      </td>

      <td>
        Convierte un valor de cadena en un tipo numérico.
      </td>

      <td>
        `DELETE FROM Log WHERE numeric(responseTime) > 1000`
      </td>
    </tr>

    <tr>
      <td>
        [`round()`](/docs/nrql/nrql-syntax-clauses-functions/#round)
      </td>

      <td>
        Redondea un número al entero más cercano o a un número específico de decimales.
      </td>

      <td>
        `DELETE FROM Metric WHERE round(latency, 2) > 0.5`
      </td>
    </tr>

    <tr>
      <td>
        [`string()`](/docs/nrql/nrql-syntax-clauses-functions/#func-string)
      </td>

      <td>
        Convierte un valor numérico u otro valor en un tipo de cadena.
      </td>

      <td>
        `DELETE FROM Log WHERE string(statusCode) = '404'`
      </td>
    </tr>

    <tr>
      <td>
        [`substring()`](/docs/nrql/nrql-syntax-clauses-functions/#func-substring)
      </td>

      <td>
        Extrae una porción específica de una cadena.
      </td>

      <td>
        `DELETE FROM Log WHERE substring(transactionId, 1, 3) = 'tmp'`
      </td>
    </tr>

    <tr>
      <td>
        `weekdayOf()`
      </td>

      <td>
        Extrae el día de la semana de una timestamp (por ejemplo, &apos;lunes&apos;, &apos;domingo&apos;).
      </td>

      <td>
        `DELETE FROM Metric WHERE weekdayOf(timestamp) IN ('Saturday', 'Sunday')`
      </td>
    </tr>
  </tbody>
</table>

## Ejemplos de múltiples funciones NRQL en reglas de puerta de enlace (gateway)

Estos ejemplos demuestran cómo se pueden combinar múltiples funciones y usarlas en escenarios más complejos para lograr un filtrado y eliminación de datos precisos.

* Esta regla elimina los datos de los contenedores que salieron, pero conserva los registros de los contenedores que salieron en los últimos 10 minutos:

```sql
DELETE FROM ContainerSample WHERE state = 'exited' AND status LIKE '%Exited%' AND NOT (status LIKE '%second%' AND numeric(aparse(status,'%Exited (%) * seconds ago%')) < 10) AND NOT (status LIKE '%About a minute ago%' OR status LIKE '%minute%' AND numeric(aparse(status,'%Exited (%) * minutes ago%')) < 10)
```

* Esta regla elimina los logs que están asociados con un patrón de logs específico (`collectd`) y que no son tipos de eventos personalizados:

```sql
DELETE FROM Log, LogExtendedRecord WHERE dimensions() LIKE '%collectd%' AND newrelic.logs.customEventType IS NULL
```

* Esta regla elimina un tipo específico de log de errores, pero los muestrea conservando solo los registros donde la timestamp es un múltiplo de 101:

```sql
DELETE FROM Log WHERE message LIKE '%lib/ladon/middleware/caching.rb:49 run> terminated with exception%' AND floor(timestamp/101) = (timestamp/101) AND newrelic.logs.customEventType IS NULL
```

Estas nuevas funciones amplían significativamente las capacidades de su consulta NRQL cuando trabaja con el gateway de Control de pipelines, permitiendo un análisis y gestión de datos más precisos.