---
title: Intégration de la sécurité AWS
metaDescription: 'Send your security data from AWS Security Hub, GuardDuty, and inspector directly to New Relic.'
freshnessValidatedDate: never
translationType: machine
---

Vous pouvez importer les résultats d&apos;AWS Security Hub dans New Relic pour obtenir une vue unique et unifiée des vulnérabilités. Le processus utilise EventBridge pour publier les résultats des services de création de rapports de sécurité AWS via une destination API AWS.

Une fois ces étapes terminées, vous verrez les nouvelles vulnérabilités détectées par les outils de sécurité AWS dans votre compte New Relic en temps réel, et vous pourrez créer un dashboard d&apos;analyse et activer <InlinePopover type="alerts" />sur les problèmes nouvellement détectés.

Vous pouvez également importer les résultats d&apos;AWS GuardDuty et Inspector et les afficher via un dashboard personnalisé ou une requête à l&apos;aide de NRDB.

## Prérequis

Pour envoyer des données de sécurité AWS à New Relic :

* [Activez AWS Security Hub](https://docs.aws.amazon.com/securityhub/latest/userguide/securityhub-settingup.html) sur votre compte AWS.
* Obtenez une [clé de licence](/docs/accounts-partnerships/install-new-relic/account-setup/license-key) New Relic pour le compte auquel vous souhaitez signaler des données.

## Créer une destination API pour l&apos;ingestion

<Steps>
  <Step>
    ### Créer une destination API [#create-api-destination]

    1. Dans votre UI AWS, accédez à <DNT>**EventBridge &gt; Integrations &gt; API destinations &gt; Create API destination**</DNT>.

    2. Remplissez l&apos;invite.

    3. Construisez votre point de terminaison à l’aide du modèle ci-dessous et entrez-le dans le point de terminaison de destination de l’API :

       ```
       https://security-ingest-processor.service.newrelic.com/v1/security/webhooks/awssecurityhub?Api-Key=NEW_RELIC_LICENSE_KEY
       ```

       <Callout variant="important">
         Utilisez le point de terminaison UE si vous utilisez une clé de licence UE : `https://security-ingest-processor.service.eu.newrelic.com/v1/security/webhooks/awssecurityhub?Api-Key=NEW_RELIC_LICENSE_KEY`
       </Callout>

    4. Sélectionnez <DNT>**POST**</DNT> comme méthode HTTP.

    5. Sélectionnez <DNT>**Create a new connection**</DNT>.
  </Step>

  <Step>
    ### Créer une nouvelle connexion [#create-new-connection]

    1. Remplissez les champs dans la nouvelle prompt.
    2. Pour <DNT>**Destination**</DNT> sélectionnez <DNT>**Other**</DNT>.
    3. Pour <DNT>**Authorization type**</DNT> sélectionnez <DNT>**API Key**</DNT>.
    4. Pour <DNT>**API Key Name**</DNT> saisissez `Api-Key` et collez votre New Relic <InlinePopover type="licenseKey" />comme valeur.
  </Step>
</Steps>

## Créer une règle EventBridge

Une fois que vous avez créé une destination d&apos;API pour l&apos;ingestion, créez une règle Eventbridge pour transférer l&apos;événement lié à la sécurité vers une destination d&apos;API pour l&apos;ingestion de New Relic.

<Steps>
  <Step>
    ### Définir les détails de la règle [#define-rule-detail]

    1. Dans votre UI AWS, accédez à <DNT>**EventBridge &gt; Rules &gt; Create Rule**</DNT>.
    2. Saisissez un nom dans le champ nom, tel que `SecurityEvent_NewRelicSIP_EventForwarder_Rule`.
    3. Saisissez une description, telle que `Forwards Security Hub, GuardDuty, and Inspector events to the New Relic Security Ingest Processor (SIP)`.
    4. Pour le bus événementiel, sélectionnez `default`.
    5. Pour le type de règle, sélectionnez `Rule with an event pattern`.
    6. Sélectionnez <DNT>**Next**</DNT>.
  </Step>

  <Step>
    ### Créer un modèle d&apos;événement [#build-event-pattern]

    1. Dans le nouveau volet, sélectionnez <DNT>**AWS events or EventBridge partner events**</DNT> comme source de l’événement.

    2. Facultatif : choisissez n’importe quel exemple d’événement Security Hub dans la liste déroulante pour tester votre règle.

    3. Pour le modèle d’événement, accédez au volet Sélectionner les modèles personnalisés et saisissez un modèle. Par exemple, le modèle ci-dessous correspond à l&apos;événement de Security Hub, Guard Duty et Inspector :

       ```json
       {
         "detail-type": [
           {
             "prefix": "Security Hub"
           },
           {
             "prefix": "GuardDuty Finding"
           },
           {
             "prefix": "Inspector2"
           }
         ]
       }
       ```
  </Step>

  <Step>
    ### Sélectionnez la destination de l’API comme cible de la règle [#select-api-destination]

    1. Pour <DNT>**Target types**</DNT>, sélectionnez <DNT>**EventBridge API destination**</DNT>.
    2. Pour <DNT>**API destination**</DNT>, sélectionnez <DNT>**Use an existing API destination**</DNT>.
    3. À l’aide de la liste déroulante, sélectionnez la destination API que vous avez créée à l’étape 1.
    4. Pour le rôle d’exécution, sélectionnez <DNT>**Create a new role for this specific resource**</DNT>.
  </Step>

  <Step>
    ### Configurer la balise (facultatif) [#configure-tags]

    Configurez votre balise selon vos besoins.
  </Step>

  <Step>
    ### Réviser et créer [#review]

    Vérifiez toutes vos sélections et apportez les modifications nécessaires.
  </Step>

  <Step>
    ### Avis dans NRDB [#review-in-nrdb]

    Pour consulter le log ingéré via AWS événement Bridge, vous pouvez utiliser la requête NRQL suivante :

    ```sql
    FROM Vulnerability SELECT * WHERE source LIKE 'AWS%' SINCE 3 MONTHS AGO
    ```

    Notez que les résultats de GuardDuty et Inspector ne s&apos;afficheront que de cette manière, tandis que les vulnérabilités de SecurityHub seront visibles dans Security RX de New Relic (si disponible).
  </Step>
</Steps>