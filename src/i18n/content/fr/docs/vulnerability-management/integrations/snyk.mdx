---
title: Envoyer les données Snyk à New Relic
metaDescription: Send your security data from Snyk directly to New Relic.
freshnessValidatedDate: never
translationType: machine
---

Ce guide décrit comment intégrer New Relic Security RX avec <DNT>Snyk</DNT> Webhooks. Les webhooks dans <DNT>Snyk</DNT> sont une fonctionnalité bêta disponible uniquement pour les clients <DNT>Snyk&apos;s Business</DNT> ou Enterprise. En tant que fonctionnalité bêta, le <DNT>Webhook API</DNT> et la structure peuvent changer sans préavis, veuillez donc faire preuve de discrétion lorsque vous utilisez des Webhooks pour l&apos;automatisation de vos processus de sécurité.

Bien que nous fassions tout notre possible pour rester en phase avec les modifications apportées à <DNT>Snyk Webhooks</DNT>, si vous remarquez que nous ne sommes pas au diapason, faites-le nous savoir.

Une fois ces étapes terminées, vous verrez les nouvelles vulnérabilités détectées par <DNT>Snyk</DNT> dans votre compte New Relic en temps réel, et vous pourrez créer un dashboard d&apos;analyse des problèmes nouvellement détectés.

Pour plus d&apos;informations, consultez la [documentation officielle <DNT>Snyk</DNT> ](https://snyk.docs.apiary.io/#reference/webhooks).

## Prérequis [#prereqs]

* Un jeton API <DNT>Snyk</DNT>
* New Relic<InlinePopover type="licenseKey" />
* Vous devez être un administrateur d&apos;organisation <DNT>Snyk</DNT> pour configurer les Webhooks via l&apos;API

## Configuration du webhook [#webhook-config]

Pour configurer votre webhook, suivez les étapes suivantes :

<Steps>
  <Step>
    ### Obtenez votre jeton API Snyk [#snky-API-token]

    Dans l&apos;interface utilisateur Snyk, sous le menu utilisateur, cliquez <DNT>**Account settings**</DNT> sur et copiez votre clé de jeton d&apos;API <DNT>Snyk</DNT>. Pour en savoir plus, consultez la [documentation officielle de Snyk](https://docs.snyk.io/snyk-admin/snyk-broker/snyk-broker-code-agent/setting-up-the-code-agent-broker-client-deployment/step-1-obtaining-the-required-tokens-for-the-setup-procedure/obtaining-your-snyk-api-token).
  </Step>

  <Step>
    ### New Relic <DNT>**License - Insert**</DNT> [#nr-license-key]

    Sélectionnez un <DNT>**License - Insert**</DNT> <InlinePopover type="licenseKey" />dans votre compte New Relic ou créez-en un nouveau.

    <Callout variant="important">
      En plus de vos clés <DNT>Snyk</DNT> et New Relic, vous devez générer un secret de signature aléatoire. Ceci est requis par Snyk mais n&apos;est pas utilisé par New Relic lors de la réception de données.
    </Callout>
  </Step>

  <Step>
    ### Compiler les identifiants d&apos;organisation Snyk [#sny-org-ids]

    Obtenez une liste des <DNT>Snyk</DNT> identifiants d&apos;organisation auxquels vous avez accès en exécutant la commande suivante :

    ```shell
    curl -H "content-type: application/json" \
      -H "authorization: token YOUR_SNYK_API_TOKEN" \
      "https://api.snyk.io/api/v1/orgs" | jq -r '.orgs[] | "\(.id)\t\(.name)"'
    ```

    <Callout variant="important">
      Pour exécuter cette commande, vous devez installer [jq](https://stedolan.github.io/jq/), une ligne de commande JSON Processeur.
    </Callout>
  </Step>

  <Step>
    ### Créer un webhook dans chaque organisation Snyk [#create-webhook]

    Vous devez configurer un webhook séparément pour chaque organisation <DNT>Snyk</DNT> .

    Exécutez la commande suivante pour créer un webhook qui publiera sur le processeur d’ingestion de sécurité de New Relic chaque fois qu’un projet est testé. Ceci est envoyé via le type d&apos;événement [project\_snapshot](https://snyk.docs.apiary.io/#introduction/consuming-webhooks/event-types) .

    ```shell
    curl -X POST -H "content-type: application/json" \
      -H "authorization: token <SNYK_API_TOKEN>" \
      --data '{"url": 
          "https://security-ingest-processor.service.newrelic.com/v1/security/webhooks/snyk?Api-Key=YOUR_NEW_RELIC_LICENSE_KEY",
          "secret": "YOUR_SIGNING_SECRET"}' \
      "https://api.snyk.io/api/v1/org/<SNYK_ORG_ID>/webhooks"
    ```

    <Callout variant="important">
      Si vous utilisez une clé de licence UE, utilisez le point de terminaison UE : `https://security-ingest-processor.service.eu.newrelic.com/v1/security/webhooks`.
    </Callout>
  </Step>

  <Step>
    ### Tester une connexion webhook [#confirm-webhook]

    La commande suivante renvoie un éventail de résultats avec un ID de webhook et une URL pour chaque webhook configuré dans l&apos;organisation :

    ```shell
    curl -H "content-type: application/json" \
      -H "authorization: token YOUR_SNYK_API_TOKEN" \
      "https://api.snyk.io/api/v1/org/YOUR_SNYK_ORG_ID/webhooks"
    ```

    Pour tester un webhook, copiez l&apos;ID du webhook que vous souhaitez tester et exécutez la commande suivante :

    ```shell
    curl -X POST --data "" -H "content-type: application/json" \
      -H "authorization: token YOUR_SNYK_API_TOKEN" \
      "https://api.snyk.io/api/v1/org/YOUR_SNYK_ORG_ID/webhooks/YOUR_WEBHOOK_ID/ping"
    ```

    La commande renverra `OK` si vous avez correctement configuré le webhook.
  </Step>
</Steps>

## Tester un Webhook manuellement [#webhook-test]

Vous devrez peut-être déclencher une analyse manuelle d&apos;un projet dans <DNT>Snyk</DNT> pour que les données circulent dans New Relic. Vous pouvez le faire via la CLI ou l&apos;API <DNT>Snyk</DNT>, ou depuis l&apos;UI <DNT>Snyk</DNT>, en cliquant <DNT>**Retest now**</DNT> sur une cible d&apos;analyse dans un projet.

Consultez la documentation officielle <DNT>Snyk</DNT> sur [l&apos;exécution de tests manuels](https://docs.snyk.io/getting-started/running-tests#run-tests-manually).

<img title="Test a webhook manually" alt="Test a webhook manually" src="/images/vulnerability-management_screenshot-crop_test-webhook.webp" />

<figcaption>
  Cliquez sur <DNT>**Retest now**</DNT> sur une cible d’analyse dans un projet.
</figcaption>

## Vérifiez que vos données Snyk sont envoyées à New Relic [#verify-snyk-sending]

Vérifiez le log dans New Relic pour vérifier que les <DNT>Snyk</DNT> résultats de votre test manuel ont été correctement transmis en saisissant `logtype:security` pour filtrer l&apos;événement de sécurité.

1. Allez à <DNT>**[one.newrelic.com](https://one.newrelic.com) &gt; All capabilities &gt; Logs**</DNT>.
2. Dans la barre de recherche, saisissez `logtype:security` et cliquez sur <DNT>**Query logs**</DNT>.

<img title="Logs screen" alt="Logs screen" src="/images/vulnerability-management_screenshot-crop_verify-snyk-data.webp" />

<figcaption>
  <DNT>
    **[one.newrelic.com](https://one.newrelic.com) &gt; All capabilities &gt; Logs**
  </DNT>
</figcaption>

Les transports Snyk Webhook renvoient uniquement <DNT>**New Issues**</DNT> et <DNT>**Removed Issues**</DNT> qui se produisent à chaque test. New Relic analysera uniquement le <DNT>**New Issues**</DNT>. Si le test manuel ne révèle aucun nouveau problème, vous ne verrez aucun nouveau log de sécurité dans New Relic. Dans ce cas, vous verrez un message de log dans New Relic pour le transport réussi du webhook du type :

```sql
SnykWebhook scan reported 879 byte payload with 0 events (0 unique issue ids) from '' errors=no
```

## Afficher les données Snyk dans New Relic [#view-data-NR]

Une fois que vous avez configuré un ou plusieurs événements webhook, vous pouvez afficher les résultats du webhook <DNT>Snyk</DNT> envoyé à notre point de terminaison d&apos;ingestion de sécurité dans New Relic.

Découvrez les 3 méthodes que vous pouvez utiliser pour identifier les données <DNT>Snyk</DNT> dans New Relic :

### Affichage des données dans Security RX [#view-data]

Vous pouvez trouver cette page à <DNT>**[one.newrelic.com](https://one.newrelic.com) &gt; All capabilities &gt; Security RX**</DNT>.

Cette vue vous donne une vue d&apos;ensemble de toutes les vulnérabilités de votre logiciel, y compris toutes les données consommées à partir de l&apos;intégration <DNT>Snyk</DNT> . Utilisez les différents onglets pour identifier et trier les vulnérabilités.

<img title="Vulnerability Management overview" alt="An image showing the summary Vulnerability Management overview page." src="/images/security_screenshot-full_security-overview.webp" />

<figcaption>
  <DNT>**[one.newrelic.com](https://one.newrelic.com) &gt; All capabilities &gt; Security RX**</DNT>.
</figcaption>

### Interrogation des vulnérabilités événement [#query-vuln-events]

Lorsque <DNT>Snyk</DNT> événements sont traités, ils sont stockés dans la table <DNT>**Vulnerability**</DNT> . Pour interroger cette table et afficher les données brutes, procédez comme suit :

1. Allez à <DNT>**[one.newrelic.com](https://one.newrelic.com) &gt; All capabilities &gt; Query your data**</DNT>.

2. Entrez la requête suivante :

   ```sql
   FROM Vulnerability SELECT * WHERE source = 'Snyk' SINCE 7 days ago
   ```

   <img title="Query vulnerability events" alt="Query vulnerability events" src="/images/vulnerability-management_screenshot-full_query-vuln-events.webp" />

   <figcaption>
     <DNT>
       **[one.newrelic.com](https://one.newrelic.com) &gt; All capabilities &gt; Query your data**
     </DNT>
   </figcaption>

### Snyk dashboard [#snyk-dashboard]

Vous pouvez installer le dashboard prédéfini <DNT>Snyk</DNT> à partir de la [place de marché New Relic Instant Observability ](https://newrelic.com/instant-observability/snyk).

Ce dashboard offre une autre vue sur les données de vulnérabilité, et vous pouvez utiliser le widget graphique pour créer vos propres vues dashboard à partir de vos données d&apos;intégration Snyk .

<img title="Snyk dashboard" alt="Snyk dashboard" src="/images/vm_screenshot-full_snyk-dashboard.webp" />

<figcaption>
  Installez le [Instant Observability Snyk dashboard](https://newrelic.com/instant-observability/snyk).
</figcaption>