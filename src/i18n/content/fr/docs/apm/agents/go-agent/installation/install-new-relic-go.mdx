---
title: Installer New Relic for Go
tags:
  - Agents
  - Go agent
  - Installation
metaDescription: Step-by-step guide to install New Relic's Go agent and start monitoring your Go applications with detailed performance insights.
freshnessValidatedDate: never
translationType: machine
---

Obtenez des informations détaillées sur les performances de vos applications Go en installant l&apos;agent New Relic Go. Ce guide vous guide à travers une installation complète avec des exemples pour les modèles d&apos;applications Go courants.

## Avant de commencer

* **Créez un compte New Relic** - Si vous n&apos;en avez pas déjà un, [créez un compte New Relic](https://newrelic.com/signup). C&apos;est gratuit, pour toujours.

* **Vérifier la compatibilité** - Assurez-vous d&apos;avoir :

  * Go 1.19 ou supérieur
  * Linux, macOS ou Windows
  * Un [framework ou une bibliothèque web](/docs/apm/agents/go-agent/get-started/go-agent-compatibility-requirements)pris en charge

* **Obtenez votre clé de licence** - Vous aurez besoin de votre <InlinePopover type="licenseKey" />pendant l&apos;installation.

## Étapes d&apos;installation

<Steps>
  <Step>
    **Installer l&apos;agent Go**

    Ajoutez l&apos;agent New Relic Go à votre projet :

    ```bash
    go get github.com/newrelic/go-agent/v3/newrelic
    ```

    <Callout variant="tip">
      **Vous utilisez les modules Go ?** L&apos;agent fonctionne de manière transparente avec les modules Go. Si vous utilisez une ancienne version de Go, vous devrez peut-être ajouter l&apos;agent à votre dossier `vendor`.
    </Callout>
  </Step>

  <Step>
    **Importer l&apos;agent**

    Ajoutez l&apos;importation à votre application Go :

    ```go
    import "github.com/newrelic/go-agent/v3/newrelic"
    ```
  </Step>

  <Step>
    **Initialiser l&apos;agent**

    Créez une instance d&apos;application dans votre fonction `main` :

    ```go
    func main() {
        app, err := newrelic.NewApplication(
            newrelic.ConfigAppName("My Go Application"),
            newrelic.ConfigLicense(os.Getenv("NEW_RELIC_LICENSE_KEY")),
        )
        if err != nil {
            log.Fatal("Failed to create New Relic application:", err)
        }

        // Wait for the application to connect
        if err := app.WaitForCompletion(5 * time.Second); err != nil {
            log.Println("Warning: New Relic application did not connect:", err)
        }

        // Your application code here
    }
    ```

    <Callout variant="important">
      **Meilleure pratique de sécurité**: utilisez toujours des variables d&apos;environnement pour votre clé de licence au lieu de la coder en dur dans votre code source.
    </Callout>
  </Step>

  <Step>
    **Instrumentez vos gestionnaires web**

    Pour les applications HTTP, enveloppez vos gestionnaires pour monitorer les transactions web :

    ```go
    // Method 1: Wrap individual handlers
    http.HandleFunc(newrelic.WrapHandleFunc(app, "/", indexHandler))
    http.HandleFunc(newrelic.WrapHandleFunc(app, "/users", usersHandler))
    http.HandleFunc(newrelic.WrapHandleFunc(app, "/api/data", apiHandler))

    // Method 2: Wrap your entire mux (recommended for many routes)
    mux := http.NewServeMux()
    mux.HandleFunc("/", indexHandler)
    mux.HandleFunc("/users", usersHandler)
    mux.HandleFunc("/api/data", apiHandler)

    http.ListenAndServe(":8080", newrelic.WrapListen(app, mux))
    ```
  </Step>

  <Step>
    **Ajoutez une gestion des erreurs de base**

    Capturez les erreurs dans vos gestionnaires :

    ```go
    func usersHandler(w http.ResponseWriter, r *http.Request) {
        // Get transaction from request context
        txn := newrelic.FromContext(r.Context())

        user, err := getUserFromDatabase(r.URL.Query().Get("id"))
        if err != nil {
            // Report error to New Relic
            txn.NoticeError(err)
            http.Error(w, "User not found", http.StatusNotFound)
            return
        }

        // Add custom attributes
        txn.AddAttribute("user.id", user.ID)
        txn.AddAttribute("user.tier", user.Tier)

        // Return user data
        json.NewEncoder(w).Encode(user)
    }
    ```
  </Step>

  <Step>
    **Déployez et vérifiez**

    1. **Définissez votre variable d&apos;environnement**:

       ```bash
       export NEW_RELIC_LICENSE_KEY="your-license-key-here"
       ```

    2. **Compiler et exécuter votre application**:

       ```bash
       go build -o myapp
       ./myapp
       ```

    3. **Générez du trafic** en visitant les URL de votre application

    4. **Vérifiez New Relic** dans les 2 à 3 minutes sur [one.newrelic.com](https://one.newrelic.com/apm)
  </Step>
</Steps>

## Exemples d&apos;installation

### Serveur HTTP simple

```go
package main

import (
    "fmt"
    "log"
    "net/http"
    "os"
    "time"

    "github.com/newrelic/go-agent/v3/newrelic"
)

func main() {
    // Initialize New Relic
    app, err := newrelic.NewApplication(
        newrelic.ConfigAppName("Simple Go Server"),
        newrelic.ConfigLicense(os.Getenv("NEW_RELIC_LICENSE_KEY")),
    )
    if err != nil {
        log.Fatal(err)
    }

    // Simple handler
    http.HandleFunc(newrelic.WrapHandleFunc(app, "/", func(w http.ResponseWriter, r *http.Request) {
        fmt.Fprintf(w, "Hello, World!")
    }))

    log.Println("Server starting on :8080")
    log.Fatal(http.ListenAndServe(":8080", nil))
}
```

### Intégration du framework Gin

```go
package main

import (
    "os"

    "github.com/gin-gonic/gin"
    "github.com/newrelic/go-agent/v3/integrations/nrgin"
    "github.com/newrelic/go-agent/v3/newrelic"
)

func main() {
    // Initialize New Relic
    app, _ := newrelic.NewApplication(
        newrelic.ConfigAppName("Gin Application"),
        newrelic.ConfigLicense(os.Getenv("NEW_RELIC_LICENSE_KEY")),
    )

    // Set up Gin with New Relic middleware
    r := gin.Default()
    r.Use(nrgin.Middleware(app))

    r.GET("/", func(c *gin.Context) {
        c.JSON(200, gin.H{"message": "Hello, World!"})
    })

    r.Run(":8080")
}
```

### Monitoring des tâches en arrière-plan

```go
func processBackgroundJob(app *newrelic.Application, jobData JobData) {
    // Create a background transaction
    txn := app.StartTransaction("background-job")
    defer txn.End()

    // Add job context
    txn.AddAttribute("job.id", jobData.ID)
    txn.AddAttribute("job.type", jobData.Type)

    // Process job with error handling
    if err := processJob(jobData); err != nil {
        txn.NoticeError(err)
        log.Printf("Job %s failed: %v", jobData.ID, err)
        return
    }

    log.Printf("Job %s completed successfully", jobData.ID)
}
```

## Que se passe-t-il ensuite ?

Après avoir terminé l&apos;installation de base, vous verrez immédiatement :

* **Dashboard APM** avec les temps de réponse, le débit et les taux d&apos;erreur pour vos points de terminaison HTTP
* **Traces de transactions** montrant les requêtes Web les plus lentes
* **Suivi des erreurs de base** pour les erreurs signalées via `txn.NoticeError()`

Pour débloquer des capacités de monitoring supplémentaires, vous devrez ajouter plus d&apos;instrumentation :

* **Monitoring de la base de données** - Nécessite [l&apos;instrumentation des segments de base de données](/docs/apm/agents/go-agent/instrumentation/instrument-go-segments)
* **Suivi des services externes** - Nécessite une [instrumentation de segment externe](/docs/apm/agents/go-agent/instrumentation/instrument-go-segments)
* **Métriques et événements personnalisés** - Nécessite une [instrumentation personnalisée](/docs/apm/agents/go-agent/instrumentation/create-custom-metrics-go)

## Dépannage

Si vous ne voyez pas de données après l&apos;installation :

1. **Vérifiez les logs de votre application** pour les messages de connexion New Relic
2. **Vérifiez que votre clé de licence** est correcte et non expirée
3. **Assurez-vous de la connectivité réseau** à New Relic (ports 80/443)
4. **Consultez le [guide de dépannage](/docs/apm/agents/go-agent/troubleshooting/no-data-appears-go)** pour une aide détaillée

<Callout variant="tip">
  **Activez le logging de débogage** pour voir ce que fait l&apos;agent :

  ```go
  config := newrelic.NewConfig("My App", os.Getenv("NEW_RELIC_LICENSE_KEY"))
  config.Logger = newrelic.NewDebugLogger(os.Stdout)
  app, _ := newrelic.NewApplication(config)
  ```
</Callout>

## Prochaines étapes

Maintenant que vous avez configuré le monitoring de base, vous pouvez améliorer votre observabilité grâce à la **configuration** et à l&apos;**instrumentation**:

* **Configuration** contrôle le comportement de l&apos;agent globalement dans l&apos;ensemble de votre application
* **L&apos;instrumentation** ajoute du code de monitoring à des opérations spécifiques que vous souhaitez suivre

### Configurer l&apos;agent

Utilisez la [configuration de l&apos;agent](/docs/apm/agents/go-agent/configuration) pour contrôler le comportement global et obtenir :

* **[Activer le tracing distribué](/docs/apm/agents/go-agent/configuration/distributed-tracing-go-agent)** - Suivez les requêtes sur plusieurs services
* **[Contrôler le logging](/docs/apm/agents/go-agent/configuration/go-agent-logging)** - Définir les niveaux de débogage et les destinations des logs
* **[Définir les seuils de performance](/docs/apm/agents/go-agent/configuration/go-agent-configuration)** - Configurer quand les requêtes sont considérées comme &quot;lentes&quot;
* **[Activer les fonctionnalités de sécurité](/docs/apm/agents/go-agent/configuration/go-agent-configuration)** - Activez le mode haute sécurité

### Ajouter l&apos;instrumentation

Utilisez [l&apos;instrumentation détaillée](/docs/apm/agents/go-agent/instrumentation) pour monitorer des opérations spécifiques et obtenir :

* **[Monitorer les requêtes de base de données](/docs/apm/agents/go-agent/instrumentation/instrument-go-segments)** - Suivez les performances SQL et les requêtes lentes
* **[Suivre les appels d&apos;API externes](/docs/apm/agents/go-agent/instrumentation/instrument-go-segments)** - Monitorer les appels de service tiers
* **[Monitorer les tâches en arrière-plan](/docs/apm/agents/go-agent/instrumentation/instrument-go-transactions)** - Suivez les transactions non web
* **[Créer des métriques personnalisées](/docs/apm/agents/go-agent/instrumentation/create-custom-metrics-go)** - Monitorez les KPI spécifiques à l&apos;entreprise

### Fonctionnalités et monitoring avancés

* **[Explorez les fonctionnalités avancées](/docs/apm/agents/go-agent/features)** telles que le monitoring du navigateur et les événements personnalisés
* **[Configurer des alertes](https://docs.newrelic.com/docs/alerts-applied-intelligence/new-relic-alerts/get-started/your-first-nrql-condition/)** pour les indicateurs de performance clés

<Callout variant="tip">
  **Gardez votre agent à jour**: [Mettez régulièrement à jour vers la dernière version](/docs/apm/agents/go-agent/installation/update-go-agent) pour obtenir de nouvelles fonctionnalités, des améliorations de performances et des correctifs de sécurité.
</Callout>