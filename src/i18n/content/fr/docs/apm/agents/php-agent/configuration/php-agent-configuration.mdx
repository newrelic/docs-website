---
title: agent PHP configuration
tags:
  - Agents
  - PHP agent
  - Configuration
metaDescription: 'New Relic PHP agent configuration: How to edit newrelic.ini config settings (like app name, slow traces, parameters, log file levels, custom frameworks).'
freshnessValidatedDate: never
translationType: machine
---

Notre agent PHP dispose d&apos;un certain nombre de paramètres permettant d&apos;affiner les types et les quantités de données signalées. Pour la plupart des utilisateurs, les valeurs par défaut produisent le meilleur mélange possible de surcharge et d&apos;utilité. Cependant, vous pouvez modifier les paramètres en fonction de vos besoins spécifiques.

<Callout variant="important">
  Redémarrez toujours votre serveur Web après avoir modifié les paramètres INI. Dans le cas contraire, elles risquent de ne pas [prendre effet immédiatement](/docs/agents/php-agent/troubleshooting/ini-settings-not-taking-effect-immediately).
</Callout>

## Ordre de priorité de configuration [#config-options-precedence]

Voici une illustration simple de l&apos;ordre de priorité que l&apos;agent PHP suit pour la configuration. [La configuration côté serveur](/docs/agents/manage-apm-agents/configuration/server-side-agent-configuration) n&amp;apos;est pas applicable. Les seules valeurs que vous pouvez modifier dans l&amp;apos; UI pour les applications utilisant l&amp;apos; agent PHP sont l&amp;apos;alias de l&amp;apos;application et sa valeur Apdex-T.

<img title="php-config-order.png" alt="php-config-order.png" src="/images/apm_diagram_php-agent-configuration-hierarchy.webp" />

<figcaption>
  Avec l&apos;agent de PHP de New Relic, les paramètres de l&apos;API [remplacent les paramètres de configuration par répertoire](/docs/agents/php-agent/configuration/php-directory-ini-settings). Les paramètres par répertoire remplacent les paramètres du fichier `php.ini` . La configuration côté serveur n&amp;apos;est pas applicable.
</figcaption>

## Variables du fichier de configuration [#inivar-background]

Lors de l&apos;installation, le script [`newrelic-install`](/docs/agents/php-agent/installation/newrelic-install-script) fournit des informations sur les fichiers de configuration qu&amp;apos;il a créés ou une liste de fichiers que vous devez modifier. Par défaut, il tentera de créer un fichier de configuration nommé `newrelic.ini`.

Dans certains cas, il peut vous être demandé d’ajouter des options de configuration à votre fichier `php.ini` . Ne faites cela que si nécessaire. Le fichier exact que vous devez modifier dépend de la façon dont votre version (ou vos versions) particulière(s) de PHP a été configurée.

Les deux configurations les plus courantes sont :

* Utilisez un seul fichier `newrelic.ini` . Il s&amp;apos;agit généralement de la valeur par défaut si vous avez installé ou compilé PHP vous-même sans options spéciales.
* Analyser un répertoire donné pour tous les `.ini` fichiers.

Si vous n&apos;êtes pas sûr du fichier à modifier :

* Depuis la ligne de commande, examinez la sortie de `php -i`.

* Dans un navigateur, examinez la sortie d’une page contenant le script :

  ```php
  <?php phpinfo(); ?>
  ```

* Si le fichier `newrelic.ini` apparaît, utilisez-le.

## Portée variable [#inivar-scope]

Chaque variable de votre fichier `newrelic.ini` a une portée définie. La portée contrôle où le paramètre peut être établi ou modifié.

Les deux portées prises en charge pour les paramètres New Relic sont :

* <DNT>**SYSTEM**</DNT>: Valeurs définies globalement dans le fichier global `newrelic.ini` .
* <DNT>**PERDIR**</DNT>:Valeurs définies pour [chaque répertoire](/docs/agents/php-agent/configuration/php-directory-ini-settings) .

Chacun peut également être défini à un niveau plus général. Les emplacements valides pour chacun sont :

<table>
  <thead>
    <tr>
      <th width={275}>
        <DNT>
          **Can be set for:**
        </DNT>
      </th>

      <th>
        système
      </th>

      <th>
        PERDRE
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        Défini dans le fichier global `newrelic.ini` .
      </td>

      <td>
        <Icon style={{color: '#328787'}} name="fe-check" />
      </td>

      <td>
        <Icon style={{color: '#328787'}} name="fe-check" />
      </td>
    </tr>

    <tr>
      <td>
        Défini sur une base par répertoire.
      </td>

      <td />

      <td>
        <Icon style={{color: '#328787'}} name="fe-check" />
      </td>
    </tr>
  </tbody>
</table>

<Callout variant="important">
  Vous ne pouvez pas utiliser `ini_set()` pour les paramètres New Relic.
</Callout>

## Type de variable [#inivar-type]

Chaque variable de votre fichier `newrelic.ini` a un type défini. Le type spécifie la syntaxe de la valeur que vous utilisez.

<table>
  <thead>
    <tr>
      <th width={100}>
        <DNT>
          **Variable type**
        </DNT>
      </th>

      <th>
        <DNT>
          **Formatting and contents**
        </DNT>
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        <DNT>
          **String**
        </DNT>
      </td>

      <td>
        Les valeurs de chaîne peuvent contenir n’importe quel caractère alphanumérique et ponctuation. La valeur est délimitée par des guillemets.
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **Boolean**
        </DNT>
      </td>

      <td>
        Un paramètre logique vrai ou faux. Les valeurs valides sont :

        * Pour vrai ou activé : `on`, `true`, le nombre `1`.
        * Pour faux ou désactivé : `off`, `false`, le nombre `0`.
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **Number**
        </DNT>
      </td>

      <td>
        Les valeurs numériques ne peuvent contenir que des chiffres, plus un point pour indiquer une virgule flottante. Sauf indication contraire, tous les nombres sont des entiers et non des virgules flottantes.
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **Duration**
        </DNT>
      </td>

      <td>
        Une valeur de chaîne délimitée par des guillemets qui représentent une durée. Utilisez des indicateurs de caractères pour délimiter les composants temporels. S&apos;il n&apos;y a pas d&apos;indicateurs, le temps est en millisecondes.

        * `w`\\= semaines

        * `d`\\= jours

        * `h`\\= heures

        * `m`\\= minutes

        * `s`\\= secondes

        * `ms`\\= millisecondes

        * `us`\\= microsecondes

          Exemples de durées :

        * `"1w3d23h10m"`\\= 1 semaine, 3 jours, 23 heures et 10 minutes

        * `"5h30m"`\\= 5 heures et 30 minutes

        * `"500"`\\= 500 millisecondes
      </td>
    </tr>
  </tbody>
</table>

## Paramètres de configuration générale [#inivar-settings]

Ces paramètres sont disponibles dans le fichier `newrelic.ini` .

<CollapserGroup>
  <Collapser id="inivar-appname" title="newrelic.appname (FORTEMENT RECOMMANDÉ)">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Chaîne (utilisez des guillemets)
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `"PHP Application"`
          </td>
        </tr>
      </tbody>
    </table>

    Cette option de configuration définit le nom de l&apos;application sous laquelle les données sont signalées dans APM. Nous vous recommandons fortement de remplacer le nom par défaut par un nom descriptif pour éviter toute confusion et toute agrégation involontaire de données. Les données de toutes les applications portant le même nom seront fusionnées dans New Relic, alors définissez cela avec soin.

    Pour toutes les options de dénomination des applications, y compris les paramètres par répertoire, voir [Nommez votre application PHP](/docs/agents/php-agent/configuration/name-your-php-application).

    La valeur du paramètre est une liste séparée par des points-virgules contenant jusqu&apos;à trois noms d&apos;application. Le premier nom de la liste est le nom de l&apos;application <DNT>**primary**</DNT> . Il [doit être unique](/docs/apm/new-relic-apm/installation-configuration/name-your-application#app-name) pour chaque compte. Le nom de l&amp;apos;application est utilisé comme clé dans un cache. Lorsque vous utilisez [plusieurs noms pour une application](/docs/agents/manage-apm-agents/app-naming/use-multiple-names-app), New Relic utilise uniquement le premier nom pour la mise en cache. Par conséquent, chaque nom d’application ne peut apparaître que comme premier élément <DNT>**once**</DNT>.

    <CollapserGroup>
      <Collapser id="cache-example" title="Exemple de mise en cache">
        Si vous définissez `newrelic.appname="App1;App2"` et plus tard dans le jeu de codes `newrelic.appname="App1;App3"`, le deuxième semblera ne pas fonctionner. Il fera rapport à <DNT>**App1**</DNT> et <DNT>**App2**</DNT> en raison de la mise en cache.
      </Collapser>
    </CollapserGroup>

    Si vous avez besoin [de noms d&apos;application qui se chevauchent](/docs/agents/manage-apm-agents/app-naming/use-multiple-names-app), définissez le nom d&amp;apos;application commun dans les deuxième ou troisième positions. Par exemple : `newrelic.appname="App2;App1"` et `newrelic.appname="App3;App1"`. Ceci est utile, par exemple, lorsque vous souhaitez suivre un sur-ensemble d’applications.
  </Collapser>

  <Collapser id="inivar-capture_params" title="newrelic.capture_params">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    <Callout variant="caution">
      Ce paramètre est obsolète et peut ne pas se comporter comme prévu. Utilisez plutôt [des propriétés d’attribut](/docs/agents/php-agent/attributes/enable-or-disable-attributes#deprecated-properties).
    </Callout>

    Pour définir cette valeur par programmation, utilisez la fonction API [`newrelic_capture_params()`](/docs/agents/php-agent/php-agent-api/newrelic_capture_params) .

    Si vous transmettez des informations sensibles directement dans l&apos;URL, gardez cette option désactivée.

    Si défini sur `true`, cela activera l&amp;apos;enregistrement des paramètres passés à un script PHP via l&amp;apos;URL (tout après le `?` dans l&amp;apos;URL) dans la trace de la transaction. Ceux-ci apparaîtront sous la liste déroulante <DNT>**Parameters**</DNT> lors de l&amp;apos;affichage de la trace de transaction.
  </Collapser>

  <Collapser id="inivar-framework" title="frameworknewrelic">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Chaîne (utilisez des guillemets)
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            (auto-détecté)
          </td>
        </tr>
      </tbody>
    </table>

    L&apos;agent PHP New Relic détecte automatiquement le framework qu&apos;il prend en charge, mais des problèmes peuvent survenir si vous utilisez de nouvelles versions expérimentales ou si vous avez personnalisé le framework. Ce paramètre désactive la détection automatique du framework, indiquant plutôt à l&apos;agent de tenter de nommer les transactions en fonction du framework spécifié.

    La spécification de `"no_framework"` désactivera entièrement la dénomination des transactions liées au framework.

    Utilisez l’une des valeurs suivantes, selon le cas :

    * `"cakephp"`

    * `"codeigniter"`

    * `"drupal"` (pour Drupal 6 et 7)

    * `"drupal8"` (pour Drupal 8 et 9)

    * `"joomla"`

    * `"laravel"`

    * `"magento"`

    * `"magento2"`

    * `"mediawiki"`

    * `"slim"`

    * `"symfony2"` (pour Symfony 3 - Symfony 2.x n&amp;apos;est pas pris en charge)

    * `"symfony4"` (pour Symfony 4 et 5)

    * `"wordpress"`

    * `"yii"`

    * `"zend"`

    * `"zend2"` (pour Zend Framework 2 et 3)

    * `"no_framework"` (pour ne forcer aucun framework même si un était détecté)

      Si la détection automatique du framework échoue, cette commande échouera également.

      <Callout variant="tip">
        Consultez la [page de compatibilité PHP](/docs/apm/agents/php-agent/getting-started/php-agent-compatibility-requirements/) pour obtenir les dernières informations sur les frameworks pris en charge.
      </Callout>
  </Collapser>

  <Collapser id="inivar-ignored_params" title="newrelic.ignored_params">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Chaîne (utilisez des guillemets)
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `""`
          </td>
        </tr>
      </tbody>
    </table>

    <Callout variant="caution">
      Ce paramètre est obsolète et peut ne pas se comporter comme prévu. Utilisez plutôt [des propriétés d’attribut](/docs/agents/php-agent/attributes/enable-or-disable-attributes#deprecated-properties).
    </Callout>

    Utilisez le paramètre `newrelic.ignored_params` pour spécifier une liste séparée par des virgules de noms de paramètres à exclure de la liste des paramètres envoyés aux serveurs New Relic . Entourez les valeurs de chaîne de guillemets.

    Si vous activez la capture de paramètres avec [`newrelic.capture_params`](#inivar-capture_params), il peut y avoir des paramètres avec des données utilisateur sensibles que vous ne souhaitez pas voir capturés par New Relic ou visibles dans la trace de transaction. Utilisez ceci pour bloquer l&amp;apos;enregistrement de ces données.
  </Collapser>

  <Collapser id="inivar-license" title="newrelic.license (OBLIGATOIRE)">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Chaîne (utilisez des guillemets)
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `""`
          </td>
        </tr>

        <tr>
          <th>
            Remarques :
          </th>

          <td>
            Introduit dans la version 3.0 de l&apos;agent.
          </td>
        </tr>
      </tbody>
    </table>

    Définit la New Relic <InlinePopover type="licenseKey" />à utiliser. Dans un système multi-locataire, cela peut être défini pour chaque répertoire.

    <Callout variant="tip">
      Lorsque vous effectuez une mise à niveau d&apos;une ancienne version d&apos;agent vers la version 3.0 ou supérieure, la licence sera supprimée de votre fichier de configuration de daemon (avec un commentaire expliquant pourquoi) et stockée dans le fichier `/etc/newrelic/upgrade_please.key`. Copiez la licence de ce fichier et définissez-la dans votre fichier `newrelic.ini` . Supprimez le fichier `upgrade_please.key` .
    </Callout>
  </Collapser>

  <Collapser id="inivar-loglevel" title="newrelic.loglevel">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            système
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Chaîne (utilisez des guillemets)
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `"info"`
          </td>
        </tr>
      </tbody>
    </table>

    Définit le niveau de détail des messages envoyés au fichier de log. Les valeurs possibles, par ordre croissant de détail, incluent :

    * `error`

    * `warning`

    * `info`

    * `verbose`

    * `debug`

    * `verbosedebug`

      Lorsque vous signalez des problèmes d&apos;agent au support technique de New Relic, `verbosedebug` est le paramètre le plus utile. Cependant, cela peut générer beaucoup d&amp;apos;informations très rapidement, [évitez donc de maintenir l&apos;agent au niveau `verbosedebug` ](/docs/agents/php-agent/troubleshooting/generating-logs-troubleshooting-php)plus longtemps qu&amp;apos;il ne faut pour reproduire le problème que vous rencontrez.

      Lorsque vous signalez des problèmes d&apos;agent au support technique de New Relic, il peut vous être demandé de définir ce niveau sur un niveau personnalisé, activant le débogage uniquement pour certains sous-systèmes. Les niveaux personnalisés dépassent le cadre de ce document.
  </Collapser>

  <Collapser id="inivar-tt-detail" title="newrelic.transaction_tracer.detail">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Nombre
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `1`
          </td>
        </tr>

        <tr>
          <th>
            Remarques :
          </th>

          <td id="inivar-tt-top100">
            C&apos;était `newrelic.transaction_tracer.top100`.
          </td>
        </tr>
      </tbody>
    </table>

    Définit le niveau de détail dans une trace de transaction :

    * Lorsque défini sur `1`, tous les appels au serveur sont tracés.

    * Lorsqu&apos;il est défini sur `0`, la trace inclut uniquement les appels instrumentés en interne par New Relic et ceux définis par l&amp;apos;utilisateur à l&amp;apos;aide de [`newrelic.transaction_tracer.custom`](#inivar-tt-custom).

      Le niveau par défaut de `1` a un impact sur les performances. Si vous devez améliorer les performances, essayez de définir le niveau de détail sur `0`.

      Lorsque tous les appels au serveur ne sont pas tracés, les blocs de temps dans la trace de la transaction seront étiquetés comme <DNT>**uninstrumented time**</DNT>, et seules certaines fonctions (définies en interne par l&amp;apos; agent) sont instrumentées. Même en signalant tous les appels, il peut y avoir [du temps non instrumenté](/docs/agents/php-agent/troubleshooting/uninstrumented-time-traces) dans la trace.
  </Collapser>

  <Collapser id="inivar-high-security" title="newrelic.high_security">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            système
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Permet une haute sécurité pour toutes les applications. Lorsque la sécurité élevée est définie sur `true`, les comportements suivants prennent effet :

    * Les données ne seront pas envoyées à New Relic à moins que le daemon newrelic n&apos;utilise une connexion sécurisée (HTTPS). Si le processus PHP génère un daemon newrelic, il sera configuré pour utiliser HTTPS quelle que soit la valeur de `newrelic.daemon.ssl`.

    * Les chaînes de requête brutes ne seront jamais collectées, quelle que soit la valeur de `newrelic.transaction_tracer.record_sql`.

    * L&apos;attribut de demande ne sera jamais capturé, quels que soient les paramètres configuration `newrelic.attributes`.

    * Les fonctions API [`newrelic_add_custom_parameter`](/docs/agents/php-agent/php-agent-api/newrelic_add_custom_parameter) et [`newrelic_set_user_attributes`](/docs/agents/php-agent/php-agent-api/newrelic_set_user_attributes) n&amp;apos;auront aucun effet et renverront `false`.

    * La fonction API [`newrelic_record_custom_event`](/docs/agents/php-agent/php-agent-api/newrelic_record_custom_event) ne soumettra aucun événement à [New Relic](/docs/insights/new-relic-insights/understanding-insights/new-relic-insights).

    * L&apos;agent supprime les messages d&apos;exception des erreurs.

      <Callout variant="caution">
        Si vous modifiez le paramètre `newrelic.high_security`, vous devez <DNT>**also**</DNT> modifier le paramètre de sécurité dans l&amp;apos;interface utilisateur APM. Si les deux paramètres ne correspondent pas, aucune donnée ne sera collectée. Pour plus d&amp;apos;informations, voir [Haute sécurité](/docs/subscriptions/high-security).
      </Callout>
  </Collapser>

  <Collapser id="inivar-labels" title="étiquettes de newrelic">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Chaîne (utilisez des guillemets)
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `""`
          </td>
        </tr>
      </tbody>
    </table>

    Ajoute [la balise](/docs/apm/new-relic-apm/maintenance/labels-categories-organize-your-apps-servers).

    <DNT>
      **Example tags**
    </DNT>

    ```ini
    "Server:One;Data Center:Primary"
    ```
  </Collapser>

  <Collapser id="inivar-process_host-display_name" title="newrelic.process_host.display_name">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            système
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Chaîne (utilisez des guillemets)
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `""`
          </td>
        </tr>
      </tbody>
    </table>

    Définit le nom d&apos;hôte à [afficher dans l&apos;UI APM](/docs/apm/new-relic-apm/maintenance/add-rename-remove-hosts#display_name). Si cette option est définie, elle remplace le nom d&amp;apos;hôte par défaut que l&amp;apos; agent capture automatiquement.
  </Collapser>
</CollapserGroup>

Si vous utilisez New Relic CodeStream pour monitorer les performances de votre IDE, vous souhaiterez peut-être également [associer un référentiel à vos services](/docs/codestream/observability/repo-association) et [associer des SHA de build ou une balise de sortie à des erreurs](/docs/codestream/observability/error-investigation/#buildsha).

## Daemon .ini paramètres [#inivar-daemon-settings]

Les valeurs de ces paramètres contrôlent le démarrage du daemon. Lorsque l&apos;agent détecte que le daemon doit être démarré, il convertit ces options en options de ligne de commande appropriées pour le daemon.

Tous ces paramètres reflètent les paramètres du fichier `newrelic.cfg` . Ils sont répétés ici pour conserver tous les .ini paramètres en un seul endroit. Chaque paramètre dans `newrelic.cfg` a son équivalent ici, avec `newrelic.daemon.` comme préfixe. Par exemple, le paramètre `ssl` dans `newrelic.cfg` est `newrelic.daemon.ssl` dans un .ini déposer.

<Callout variant="important">
  Si le fichier `/etc/newrelic/newrelic.cfg` existe, l&amp;apos;agent ignore ces paramètres et agent **ne** démarrera pas le automatiquement.
</Callout>

Pour plus d&apos;informations sur les façons de démarrer le daemon et quand utiliser un fichier de configuration externe, consultez [Modes de démarrage du daemon PHP](/docs/agents/php-agent/installation/starting-php-daemon).

<CollapserGroup>
  <Collapser id="inivar-daemon-app_timeout" title="newrelic.daemon.app_timeout">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            système
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Chaîne de spécification de temps ; par exemple, `"5m"` ou `"1h20m"`
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `"10m"`
          </td>
        </tr>
      </tbody>
    </table>

    Définit le temps écoulé après lequel une application sera considérée comme inactive. Les candidatures inactives ne sont pas comptabilisées dans la limite maximale de 250 candidatures. Les unités autorisées sont `"ns"`, `"us"`, `"ms"`, `"s"`, `"m"` et `"h"`.

    Une valeur de `0` sera interprétée comme « pas de délai d&amp;apos;attente ». Cela aura pour conséquence que les nouvelles applications seront toujours comptabilisées dans la limite de 250 applications, ainsi que que le daemon sera incapable de sortir une petite quantité de mémoire par application vers le système d&amp;apos;exploitation.

    Recommandation : n&apos;utilisez pas cette valeur à moins que le support New Relic ne la requests . Au lieu de cela, pour les transactions d’arrière-plan occasionnelles, utilisez une valeur deux fois supérieure à l’intervalle. Par exemple, pour une tâche d’arrière-plan horaire, définissez le délai d’expiration sur 2 heures.
  </Collapser>

  <Collapser id="inivar-daemon-app_connect_timeout" title="newrelic.daemon.app_connect_timeout">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            système
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Chaîne de spécification de temps ; par exemple, `"1s"` ou `"5m"`
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `"0"`
          </td>
        </tr>
      </tbody>
    </table>

    Définit le temps maximum pendant lequel l&apos;agent doit attendre que le daemon se connecte à une application. Une valeur de `"0"` oblige l&amp;apos;agent à n&amp;apos;effectuer qu&amp;apos;une seule tentative de connexion au daemon. Les unités autorisées sont `"ns"`, `"us"`, `"ms"`, `"s"`, `"m"` et `"h"`.

    Avec ce délai d&apos;expiration défini, l&apos;agent n&apos;abandonnera pas immédiatement une transaction lorsque le daemon ne s&apos;est pas encore connecté au backend, mais accordera plutôt au daemon le temps d&apos;établir la connexion.

    Recommandation : si vous définissez un délai d’expiration, la valeur recommandée est `"15s"`. Définissez ce délai d&amp;apos;expiration uniquement lorsque des tâches d&amp;apos;arrière-plan de longue durée sont instrumentées, car en cas de problèmes de connexion, l&amp;apos; agent se bloquera pendant le délai d&amp;apos;expiration donné à chaque démarrage de transaction.
  </Collapser>

  <Collapser id="inivar-daemon-auditlog" title="newrelic.daemon.auditlog">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            système
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Chaîne (utilisez des guillemets)
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `""`
          </td>
        </tr>
      </tbody>
    </table>

    Le paramètre spécifie le nom d&apos;un log d&apos;audit, qui contiendra toutes les données envoyées par le daemon aux serveurs New Relic, y compris l&apos;URL complète, la date, l&apos;heure et les données non compressées et non codées pour chaque demande.

    Ce fichier ne peut pas être le même fichier que le log de daemon.

    <Callout variant="important">
      Ce log d’audit peut devenir très volumineux, très rapidement. Évitez d’utiliser le paramètre `newrelic.daemon.auditlog` pendant des périodes prolongées. Son objectif principal est de permettre à l&amp;apos;administrateur système d&amp;apos;effectuer des examens de sécurité et d&amp;apos;observer exactement quelles données sont transmises.
    </Callout>
  </Collapser>

  <Collapser id="inivar-daemon-collector" title="newrelic.daemon.collector_host">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            système
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Chaîne (utilisez des guillemets)
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `"collector.newrelic.com"`
          </td>
        </tr>
      </tbody>
    </table>

    Définit le nom et le port facultatif de l&apos;hôte du collecteur que le daemon contactera pour vérifier votre <InlinePopover type="licenseKey" />et envoyer les données de l&amp;apos;agent.

    Il s&apos;agit soit simplement du nom de l&apos;hôte, soit du nom et du numéro de port sous la forme `"hostname:port"`. La spécification d&amp;apos;un numéro de port de `0` utilisera le port par défaut, qui est 80.

    <Callout variant="caution">
      Ne modifiez pas cette valeur sans l&apos;aide du support New Relic.
    </Callout>
  </Collapser>

  <Collapser id="inivar-daemon-launch" title="newrelic.daemon.dont_launch">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            système
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Nombre
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `0`
          </td>
        </tr>
      </tbody>
    </table>

    Si vous préférez que le daemon soit lancé en externe avant le démarrage de l&apos; agent, cette valeur détermine quand l&apos; agent est autorisé à démarrer le daemon :

    * `0`:Aucune restriction n&amp;apos;est imposée au démarrage du daemon et l&amp;apos;agent peut démarrer le daemon à tout moment.

    * `1`: Un agent hors ligne de commande (comme Apache ou php-fpm) peut démarrer le daemon.

    * `2`: Seul l&amp;apos;agent de la ligne de commande peut démarrer le daemon.

    * `3`: L&amp;apos;agent ne démarrera jamais le daemon. Utilisez ce paramètre si vous configurez le daemon via `newrelic.cfg` et le démarrez en dehors de l&amp;apos;agent.

      <Callout variant="important">
        Si `/etc/newrelic/newrelic.cfg` existe, l&amp;apos;agent suppose que le daemon est censé être démarré par son script de démarrage, et non via l&amp;apos;agent. Ce paramètre n&amp;apos;a aucune signification et n&amp;apos;apparaît pas dans `newrelic.cfg`.
      </Callout>
  </Collapser>

  <Collapser id="inivar-daemon-location" title="newrelic.daemon.location">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            système
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Chaîne (utilisez des guillemets)
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `"/usr/bin/newrelic-daemon"`
          </td>
        </tr>
      </tbody>
    </table>

    Définit le nom de l&apos;exécutable daemon sur lancement.

    Cette variable identifie le chemin complet vers le fichier exécutable du daemon. Si le système New Relic a été installé à l&apos;aide du package standard, l&apos;emplacement par défaut sera correct. Si vous avez installé un emplacement personnalisé à l&apos;aide de la distribution tar (et que vous n&apos;avez pas l&apos;autorisation d&apos;écrire sur `/usr/bin`), le daemon peut résider à un autre emplacement.

    Ce paramètre n&apos;apparaît pas dans le fichier `newrelic.cfg` car il ne concerne que PHP.

    <Callout variant="important">
      Sur OpenSolaris, `/usr` est souvent un système de fichiers en lecture seule. L&amp;apos;emplacement du daemon par défaut pour OpenSolaris est `/opt/newrelic/bin/newrelic-daemon`.
    </Callout>
  </Collapser>

  <Collapser id="inivar-daemon-logfile" title="newrelic.daemon.logfile">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            système
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Chaîne (utilisez des guillemets)
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `"/var/log/newrelic/newrelic-daemon.log"`
          </td>
        </tr>
      </tbody>
    </table>

    Définit le nom du fichier de log dans lequel enregistrer un message de log spécifique. Ce fichier doit être accessible en écriture par le daemon. Le cas le plus courant est que l&apos;utilisateur Apache finira par démarrer le daemon au démarrage d&apos;Apache lui-même. Vous devez donc vous assurer que le fichier est accessible en écriture par l&apos;utilisateur qui exécute le processus Apache.

    <Callout variant="caution">
      Si le fichier de log du daemon n&apos;est pas accessible en écriture, le daemon ne démarrera pas automatiquement, ce qui empêchera le reporting des données.

      Vous pouvez utiliser les autorisations d&apos;écriture sur ce fichier comme moyen de restreindre qui peut démarrer le daemon.
    </Callout>
  </Collapser>

  <Collapser id="inivar-daemon-loglevel" title="newrelic.daemon.loglevel">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            système
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Chaîne (utilisez des guillemets)
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `"info"`
          </td>
        </tr>
      </tbody>
    </table>

    Définit le niveau de détail des messages enregistrés dans le fichier de log de New Relic . Les valeurs possibles, par ordre croissant de détail, sont :

    * `error`

    * `warning`

    * `info`

    * `healthcheck`

    * `debug`

      Les paramètres les plus détaillés peuvent générer beaucoup d’informations très rapidement. `healthcheck` enregistre le nombre exact d&amp;apos;applications connectées. Si nécessaire, définissez `debug` sur de courtes périodes pour identifier les problèmes.
  </Collapser>

  <Collapser id="inivar-daemon-pidfile" title="newrelic.daemon.pidfile">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            système
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Chaîne (utilisez des guillemets)
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            (dépend du système d&apos;exploitation)
          </td>
        </tr>
      </tbody>
    </table>

    Définit le nom du fichier dans lequel le daemon enregistrera son ID de processus (pid).

    Ce fichier est utilisé par le script de démarrage et d&apos;arrêt du daemon pour déterminer si le daemon est déjà en cours d&apos;exécution ou non.
  </Collapser>

  <Collapser id="inivar-daemon-port" title="newrelic.daemon.address (alias de newrelic.daemon.port)">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            système
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Chaîne ou nombre
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `"@newrelic"` sous Linux, `"/tmp/.newrelic.sock"` sinon
          </td>
        </tr>
      </tbody>
    </table>

    <Callout variant="tip">
      À partir de [la version 9.2.0.247](/docs/release-notes/agent-release-notes/php-release-notes/php-agent-920247), l&amp;apos;agent PHP prend en charge un nouveau paramètre, `newrelic.daemon.address`, qui sert d&amp;apos;alias à `newrelic.daemon.port`. Vous pouvez utiliser l&amp;apos;un ou l&amp;apos;autre pour spécifier l&amp;apos;emplacement du daemon PHP New Relic. Si les deux valeurs sont définies, `newrelic.daemon.address` a la priorité.
    </Callout>

    Définit le point de terminaison du socket pour les communications entre l&apos;agent et le daemon.

    Cela peut être spécifié de quatre manières.

    * Pour utiliser un fichier spécifié comme socket de domaine UNIX (UDS), fournissez un nom de chemin <DNT>**absolute**</DNT> sous forme de chaîne. Il s&amp;apos;agit de la valeur par défaut sur les systèmes non Linux.

    * Pour utiliser un port TCP standard, spécifiez un numéro compris entre 1 et 65 534.

    * Pour utiliser un socket abstrait, utilisez la valeur `@newrelic-daemon` (disponible pour la version d&amp;apos;agent [5.2.0.141](/docs/release-notes/agent-release-notes/php-release-notes/php-agent-520141) ou supérieure). Il s&amp;apos;agit de la valeur par défaut sur le système Linux.

    * Pour vous connecter à un daemon qui s&apos;exécute sur un hôte différent (utile pour [les environnements conteneurs](/docs/agents/php-agent/advanced-installation/install-php-agent-docker)), définissez cette valeur sur `host:port`, où `host` désigne soit un nom d&amp;apos;hôte, soit une IP, et `port` désigne un numéro de port valide. IPv4 et IPv6 sont tous deux pris en charge. Ceci est disponible pour la version d&amp;apos;agent 9.2.0.247 ou supérieure.

      <Callout variant="caution">
        Les données transmises de l&apos;agent au démon ne sont **pas** cryptées. La seule exception à cette règle est l’ [obfuscation SQL](/docs/agents/php-agent/configuration/php-agent-configuration#inivar-tt-sql) qui se produit avant l’envoi de données au démon. Nous vous recommandons d&amp;apos;utiliser uniquement une connexion réseau privée entre l&amp;apos;agent et le démon (cela s&amp;apos;applique uniquement lorsque l&amp;apos;agent et le démon s&amp;apos;exécutent sur des hôtes différents).
      </Callout>

      Si vous utilisez des numéros de port, le système Unix exige que les ports compris entre 1 et 1023 nécessitent que le daemon soit exécuté en tant que super-utilisateur. Si le daemon utilise un port non standard, cette variable définit également le numéro de port que l&apos;agent utilisera pour communiquer avec le daemon.

      <Callout variant="important">
        Si vous utilisez le mécanisme de démarrage `newrelic.cfg` pour le daemon, ce paramètre et le paramètre [`address`](/docs/agents/php-agent/configuration/proxy-daemon-newreliccfg-settings#cfgvar-port) dans ce fichier doivent correspondre.
      </Callout>
  </Collapser>

  <Collapser id="inivar-daemon-proxy" title="newrelic.daemon.proxy">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            système
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Chaîne (utilisez des guillemets)
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `""`
          </td>
        </tr>
      </tbody>
    </table>

    Définit les informations d’identification de l’hôte et de l’utilisateur à utiliser comme proxy de sortie.

    Ceci n&apos;est utilisé que si votre site nécessite un proxy pour accéder aux serveurs de collecte de données New Relic. Cela peut prendre l&apos;une des formes suivantes, selon la configuration du proxy :

    * `hostname`

    * `hostname:port`

    * `user@hostname`

    * `user@hostname:port`

    * `user:password@hostname`

    * `user:password@hostname:port`

    * `proxytype://user:password@hostname:port`

      Un type de proxy HTTP est supposé, sauf si un autre type de proxy est spécifié. Dans ce cas, le type de proxy peut être http, socks4, socks4a ou socks5.
  </Collapser>

  <Collapser id="inivar-daemon-ssl" title="newrelic.daemon.ssl">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            système
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Ce paramètre est ignoré sur les versions 8.0 et supérieures de l&apos;agent PHP, et HTTPS sera toujours utilisé pour communiquer avec New Relic.

    Sur les versions de l&apos; agent PHP inférieures à 8.0, contrôle si la communication avec le collecteur New Relic doit ou non utiliser une connexion HTTP sécurisée. L&apos;agent communique avec New Relic via HTTPS par défaut, et New Relic [requiert HTTPS](/docs/apis/rest-api-v2/troubleshooting/301-response-rest-api-calls) pour tout le trafic vers APM et l&amp;apos;API REST New Relic.
  </Collapser>

  <Collapser id="inivar-daemon-ssl-ca-bundle" title="newrelic.daemon.ssl_ca_bundle">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            système
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Chaîne (utilisez des guillemets)
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `""`
          </td>
        </tr>
      </tbody>
    </table>

    Définit l&apos;emplacement d&apos;un fichier contenant des certificats CA au format PEM. Une fois définis, les certificats de ce fichier seront utilisés pour authentifier le collecteur New Relic. Dans la plupart des cas, il ne devrait pas être nécessaire de configurer un bundle CA. L&apos;agent PHP New Relic est fourni avec les certificats CA nécessaires.

    Si [`newrelic.daemon.ssl_ca_path`](#inivar-daemon-ssl-ca-path) est également défini, les certificats de ce fichier seront recherchés en premier, suivis des certificats contenus dans le répertoire `newrelic.daemon.ssl_ca_path` .

    Ce paramètre n&apos;a aucun effet lorsque [`newrelic.daemon.ssl`](#inivar-daemon-ssl) est défini sur `false`.
  </Collapser>

  <Collapser id="inivar-daemon-ssl-ca-path" title="newrelic.daemon.ssl_ca_path">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            système
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Chaîne (utilisez des guillemets)
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `""`
          </td>
        </tr>
      </tbody>
    </table>

    Définit l&apos;emplacement d&apos;un répertoire contenant des certificats d&apos;autorité de certification approuvés au format PEM. Une fois défini, les certificats de ce répertoire seront utilisés pour authentifier le collecteur New Relic. Dans la plupart des cas, il ne devrait pas être nécessaire de configurer un chemin d&apos;accès CA. L&apos;agent PHP New Relic est fourni avec les certificats CA nécessaires.

    Si [`newrelic.daemon.ssl_ca_bundle`](#inivar-daemon-ssl-ca-bundle) est également défini, il sera recherché en premier, suivi des certificats contenus dans `newrelic.daemon.ssl_ca_path`.

    Ce paramètre n&apos;a aucun effet lorsque [`newrelic.daemon.ssl`](#inivar-daemon-ssl) est défini sur `false`.
  </Collapser>

  <Collapser id="inivar-daemon-start_timeout" title="newrelic.daemon.start_timeout">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            système
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Chaîne de spécification de temps ; par exemple, `"1s"` ou `"5m"`
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `"0"`
          </td>
        </tr>
      </tbody>
    </table>

    Définit le temps maximum pendant lequel l&apos;agent doit attendre le démarrage du daemon après le déclenchement du lancement d&apos;un daemon. Une valeur de `"0"` empêche l&amp;apos;agent d&amp;apos;attendre. Les unités autorisées sont `"ns"`, `"us"`, `"ms"`, `"s"`, `"m"` et `"h"`.

    La valeur de délai d&apos;expiration spécifiée sera transmise au daemon via l&apos;indicateur `--wait-for-port` . Cela provoque le blocage du démarrage du daemon jusqu&amp;apos;à ce qu&amp;apos;un socket soit acquis ou jusqu&amp;apos;à ce que le délai d&amp;apos;attente soit écoulé.

    Recommandation : si vous définissez un délai d’expiration, la valeur recommandée est de `"2s"` à `"5s"`. Il est recommandé de définir ce délai d&amp;apos;expiration uniquement lorsque des tâches d&amp;apos;arrière-plan de longue durée sont instrumentées, car en cas de problèmes de démarrage du daemon, l&amp;apos; agent se bloquera pendant le délai d&amp;apos;expiration donné à chaque démarrage de transaction.
  </Collapser>
</CollapserGroup>

## Les logs en contexte [#logs-in-context]

agent PHP version 10.1.0 vous permet de transférer votre log PHP avec [les logs APM dans le contexte](/docs/apm/new-relic-apm/getting-started/get-started-logs-context). Depuis la version 10.3.0, les métriques de logging et la fonctionnalité agent transfert de logsont activées par défaut. La valeur `newrelic.application_logging.enabled` contrôle si la fonctionnalité logs en contexte est active ou inactive.

Gardez à l’esprit que la modification de vos paramètres dans votre fichier de configuration d’agent local (`newrelic.ini`) nécessite un redémarrage du serveur Web pour qu’ils prennent effet. Si vous ne le faites pas, les modifications risquent de ne pas [prendre effet immédiatement](/docs/agents/php-agent/troubleshooting/ini-settings-not-taking-effect-immediately).

<CollapserGroup>
  <Collapser id="cfg-application_logging_forwarding-enabled" title="newrelic.application_logging.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    * Définissez sur `true` pour activer les logs principaux en fonction du contexte. Lorsque cette option est activée, instrumentation supplémentaire du framework de logging est activée, que les logs soient ou non envoyés à New Relic.
    * Définissez sur `false` pour désactiver complètement cette fonctionnalité, y compris la collecte des métriques log et le transfert de log .
    * Les logs en contexte sont désormais activés par défaut. Si vous avez désactivé cette fonctionnalité, assurez-vous de redémarrer votre application, sinon vos modifications ne prendront pas effet immédiatement.

    Un exemple de fichier de configuration :

    ```ini
    newrelic.application_logging.enabled = true
    newrelic.application_logging.metrics.enabled = true
    newrelic.application_logging.forwarding.enabled = true
    ```
  </Collapser>
</CollapserGroup>

### Transfert de logs [#log-forwarding]

Si vous utilisez un [framework de logging pris en charge](/docs/logs/logs-context/configure-logs-context-php), vous pouvez demander à l&amp;apos; agent de transmettre votre log d&amp;apos;application à New Relic.

* `newrelic.application_logging.forwarding.enabled` active ou désactive le transfert de logs.
* `newrelic.application_logging.forwarding.max_samples_stored` limite le nombre de logs que votre application transmet à New Relic.
* `newrelic.application_logging.forwarding.log_level` vous permet de choisir les types de logs que votre application transmet à New Relic.
* `newrelic.application_logging.forwarding.labels.enabled` active ou désactive l&amp;apos;envoi de balises personnalisées (étiquettes) avec les messages de log transmis par l&amp;apos;agent.
* `newrelic.application_logging.forwarding.labels.exclude` vous permet de choisir les étiquettes envoyées avec le message de log transféré par l&amp;apos;agent.

<CollapserGroup>
  <Collapser id="cfg-application_logging_forwarding-enabled" title="newrelic.application_logging.forwarding.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Permet l&apos;envoi du log d&apos;application à New Relic.

    * Définissez ceci sur `true` pour que votre log soit envoyé à New Relic. Cela transfère le log directement depuis l&amp;apos; agent PHP avec des liens métadonnées qui permettent à notre fonctionnalité de logs en contexte de fonctionner. L&amp;apos;agent PHP n&amp;apos;écrit aucune métadonnées dans le log de sortie de application .

    * Définissez ceci sur `false` si vous ne souhaitez pas que votre log soit envoyé à New Relic. Lorsque `enabled` est défini sur `false`, aucune donnée log n&amp;apos;est envoyée à New Relic et la sortie du log de application reste inchangée.

      Exemple de fichier de configuration (`newrelic.ini`) :

      ```ini
      newrelic.application_logging.enabled = true
      ```

      Si vous disposez déjà d&apos;une solution de transfert de loget que vous mettez à jour votre agent pour utiliser les logs automatiques dans ce contexte, assurez-vous de <DNT>**disable your old log forwarder**</DNT>. Sinon, votre application enverra des lignes log en double. Selon votre compte, cela peut entraîner une double facturation. Pour plus d&amp;apos;informations, suivez les procédures pour désactiver votre [redirecteur de logspécifique](/docs/logs/forward-logs/enable-log-management-new-relic#log-forwarding).

      <Callout variant="important">
        L&apos;utilisation de la fonctionnalité de transfert de logaugmente votre ingestion de données, ce qui peut affecter votre facturation. Pour plus d&apos;informations, consultez notre documentation sur [le suivi de votre ingestion de données](/docs/apm/new-relic-apm/getting-started/get-started-logs-context#ingest).
      </Callout>
  </Collapser>

  <Collapser id="cfg-application_logging_forwarding-max_samples_stored" title="newrelic.application_logging.forwarding.max_samples_stored">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Entier
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `10000`
          </td>
        </tr>

        <tr>
          <th>
            Max:
          </th>

          <td>
            `20000`
          </td>
        </tr>
      </tbody>
    </table>

    * Définissez la valeur sur un entier positif pour spécifier le nombre maximal de lignes log par minute à envoyer.

    * Définissez cette valeur sur `0` pour désactiver efficacement l’envoi du log.

    * Définissez cette valeur sur une valeur inférieure pour réduire la quantité de lignes log envoyées. Cela peut entraîner un échantillonnage log .

    * Définissez cette valeur sur une valeur plus élevée pour envoyer plus de lignes log .

      Chaque log reçoit la même priorité que sa transaction associée. Certains logs peuvent ne pas être inclus car ils sont limités par `max_samples_stored`. Par exemple, si le logging `max_samples_stored` est défini sur 10 000 et qu&amp;apos;une transaction 1 comporte 10 000 entrées log, seules les entrées log de la transaction 1 seront enregistrées. Si la transaction 1 contient moins de 10 000 logs, vous recevez tous les logs de la transaction 1. S&amp;apos;il reste de la place, vous recevez l&amp;apos;intégralité du log de la transaction 2, et ainsi de suite. les entrées de log avec des priorités plus élevées sont conservées par rapport à celles avec des priorités plus faibles.

    <Callout variant="tip">
      Cela fait référence au nombre de logs envoyés *par minute*. La définition `max_samples_stored` sur une valeur inférieure à 12 aura pour effet de ne pas envoyer de log. Tout entier non négatif est valide, mais actuellement la valeur maximale prise en charge est 20 000.
    </Callout>

    Exemple de fichier de configuration (`newrelic.ini`) :

    ```ini
    newrelic.application_logging.forwarding.max_samples_stored = 10000
    ```
  </Collapser>

  <Collapser id="cfg-application_logging_forwarding-log-level" title="newrelic.application_logging.forwarding.log_level">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Chaîne (utilisez des guillemets)
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `"WARNING"`
          </td>
        </tr>
      </tbody>
    </table>

    Il est possible de contrôler le niveau de log des messages transmis par l&apos; agent. Les niveaux de log reconnus suivent la spécification [PSR-3](https://www.php-fig.org/psr/psr-3/) et sont les suivants (de la gravité la plus élevée à la plus faible) :

    * `EMERGENCY`
    * `ALERT`
    * `CRITICAL`
    * `ERROR`
    * `WARNING`
    * `NOTICE`
    * `INFO`
    * `DEBUG`

    Lorsqu&apos;un niveau de log est spécifié pour l&apos; agent, tous les messages de ce niveau de log et supérieurs seront signalés. Par exemple, si vous définissez votre niveau de log sur `ALERT`, vous recevrez un log pour les gravités `ALERT` et `EMERGENCY`. Le niveau de log par défaut est `WARNING`.

    Exemple de fichier de configuration (`newrelic.ini`) :

    ```ini
    newrelic.application_logging.forwarding.log_level = "INFO"
    ```
  </Collapser>

  <Collapser id="cfg-application_logging_forwarding_labels-enabled" title="newrelic.application_logging.forwarding.labels.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Permet l&apos;envoi de balises personnalisées (étiquettes) avec les logs transmis par l&apos;agent à New Relic.

    Cette fonctionnalité a été ajoutée dans la version 11.7.0 de l&apos;agent PHP.

    La balise apparaîtra comme attribut sur l&apos;événement de log avec le préfixe `tags.` inséré devant le nom de l&amp;apos;attribut.

    Exemple de fichier de configuration (`newrelic.ini`) :

    ```ini
    newrelic.application_logging.forwarding.labels.enabled = true
    ```
  </Collapser>

  <Collapser id="cfg-application_logging_forwarding_labels-exclude" title="newrelic.application_logging.forwarding.labels.exclude">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Liste de chaînes (séparées par des virgules)
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `""`
          </td>
        </tr>
      </tbody>
    </table>

    Permet de filtrer les balises personnalisées (étiquettes) envoyées avec les logs transmis par l&apos;agent.

    La valeur est une liste de chaînes séparées par des virgules. Chaque chaîne de la liste sera mise en correspondance de manière insensible à la casse avec les étiquettes actuellement définies, et toutes les correspondances exactes seront supprimées des étiquettes transmises.

    Par exemple, considérons la définition suivante des étiquettes :

    ```ini
    newrelic.labels = "Data Center, Business, Cost code"
    ```

    Les règles d&apos;exclusion suivantes filtreront les étiquettes `Business` et `Cost code` car la comparaison est effectuée de manière insensible à la casse.

    ```ini
    newrelic.application_logging.forwarding.labels.exclude = business, Cost Code
    ```

    <Callout variant="tip">
      La valeur INI `newrelic.labels` permet de définir des étiquettes qui contiennent le caractère virgule (&amp;quot;,&amp;quot;). Ces étiquettes ne peuvent pas être filtrées à l&amp;apos;aide de la valeur INI `exclude`, car elle s&amp;apos;appuie sur des virgules pour séparer les règles d&amp;apos;exclusion. Il est recommandé de ne pas utiliser le caractère virgule dans les valeurs d&amp;apos;étiquette si vous excluez ces étiquettes de l&amp;apos;ajout au log des messages.
    </Callout>
  </Collapser>
</CollapserGroup>

#### données de contexte du log [#log-context-data]

L&apos;agent PHP capture les données de contexte pour la bibliothèque Monolog et ajoute ce contexte comme attribut à votre log transféré. Vous pouvez contrôler le contexte ajouté par votre agent via les paramètres de la section `context_data`, dans la section `forwarding` .

* `newrelic.application_logging.forwarding.context_data.enabled` ajoute des données de contexte de Monolog à votre attribut de log
* `newrelic.application_logging.forwarding.context_data.include` définit les clés d&amp;apos;attribut trouvées dans votre log transféré
* `newrelic.application_logging.forwarding.context_data.exclude` définit les clés d&amp;apos;attribut exclues dans votre log transféré

<CollapserGroup>
  <Collapser id="cfg-application_logging_forwarding_context_data-enabled" title="newrelic.application_logging.forwarding.context_data.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    * Définissez cette valeur sur `true` pour ajouter des données de contexte comme attribut de log.
    * Définissez cette valeur sur `false` si vous ne souhaitez pas que les données de contexte soient ajoutées en tant qu&amp;apos;attribut à votre log.
  </Collapser>

  <Collapser id="cfg-application_logging_forwarding_context_data-include" title="newrelic.application_logging.forwarding.context_data.include">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Liste de chaînes
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Lorsque vous appliquez des règles d&apos;attribut à l&apos;attribut de contexte log, la règle `include` supprime tous les attributs non définis dans l&amp;apos;ensemble de règles. Il s’agit d’un comportement différent des autres types d’attributs agent .

    * Si les attributs de contexte log n&apos;apparaissent pas comme prévu, vous devez consulter l&apos;ensemble de règles `newrelic.attributes.include` pour confirmer que les attributs manquants font partie de l&amp;apos;exclusion. Nous vous recommandons de définir `newrelic.loglevel=verbosedebug` pour activer également le log des messages détaillés de l&amp;apos; agent. Une fois mis à jour, recherchez les messages de l&amp;apos; agent concernant l&amp;apos;attribut exclu. Cela peut vous donner des indications sur la manière d’ajuster les règles d’inclusion/exclusion.
    * Si `context_data` est activé pour le transfert de log, toutes les clés d&amp;apos;attribut trouvées dans cette liste apparaîtront dans les enregistrements log . Une liste vide enverra toutes les clés d&amp;apos;attribut par défaut.
    * Si toutes les listes `include` sont vides, tous les attributs de contexte log sont transmis.
  </Collapser>

  <Collapser id="cfg-application_logging_forwarding_context_data-exclude" title="newrelic.application_logging.forwarding.context_data.exclude">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Liste de chaînes
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    * Si `context_data` est activé pour le transfert de log, toutes les clés d&amp;apos;attribut trouvées dans cette liste sont exclues des enregistrements log .
    * Laisser ce champ vide entraîne un comportement par défaut. l&apos;attribut peut toujours être exclu si une [règle`include` existe](#cfg-application_logging_forwarding_context_data-include).
    * Les listes `include` et `exclude` suivent les règles définies dans [Activation et désactivation de l&apos;attribut](/docs/php/php-agent-enabling-and-disabling-attributes#cfg-attributes-enabled).
  </Collapser>
</CollapserGroup>

<Callout variant="important">
  L&apos;agent PHP transmet uniquement les données de contexte log qui ont une clé de chaîne et une valeur, qui est une chaîne ou un scalaire (int, double, booléen).
</Callout>

### décoration en rondins [#log-decoration]

L&apos;agent PHP peut également collecter et ajouter des liens cryptés vers les enregistrements log Monolog pour permettre aux logs en contexte de fonctionner avec les données log transmises par un redirecteur de logtiers. Pour activer cette fonctionnalité, utilisez l&apos;option `newrelic.application_logging.local_decorating.enable` :

<CollapserGroup>
  <Collapser id="cfg-application_logging_local_decorating-enabled" title="newrelic.application_logging.local_decorating.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Cela permet l&apos;ajout de liens mémoriels vers les enregistrements log Monolog. Réglez ceci sur `true` pour activer cette fonctionnalité. Laissez ce paramètre sur `false` si vous utilisez la APM fonctionnalité de transfert de logpour transférer votre log vers New Relic.

    <Callout variant="important">
      La fonctionnalité de décoration log apparaît pour la première fois dans agent PHP sortie 10.13.0.1.

      La fonctionnalité de décoration log nécessite des étapes supplémentaires pour garantir que les métadonnées de liaison sont contenues dans le message de log. Consultez la page (PHP logs en contexte)\[/docs/log/log-context/configure-log-context-php] pour plus d&apos;informations sur l&apos;utilisation de cette fonctionnalité.

      Si vous activez à la fois le transfert de loget la décoration log, il est très probable que votre log soit envoyé à New Relic en double.
    </Callout>
  </Collapser>
</CollapserGroup>

### logarithmes métriques [#log-metrics]

L&apos;agent PHP peut collecter des métriques liées à un événement de log pour [le framework de logging pris en charge](/docs/logs/logs-context/configure-logs-context-php). La création de ces métriques est contrôlée par l&amp;apos;option `newrelic.application_logging.metrics.enable` :

<CollapserGroup>
  <Collapser id="cfg-application_logging_metrics-enabled" title="newrelic.application_logging.metrics.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Permet la capture d&apos;informations métriques sur votre log et votre niveau de log, qui sont affichées dans un graphique sur la page APM <DNT>**Summary**</DNT>.

    Laissez ce paramètre sur vrai pour permettre à l&apos; agent de capturer des informations métriques sur votre log.

    Réglez ceci sur `false` pour désactiver cette fonctionnalité.

    <Callout variant="important">
      Si vous désactivez la collecte des métriques log, le graphique log sur la page de résumé apparaîtra vide.
    </Callout>
  </Collapser>
</CollapserGroup>

<Callout variant="important">
  Si vous disposez déjà d&apos;une solution de transfert de loget que vous mettez à jour votre agent pour utiliser les logs automatiques dans ce contexte, assurez-vous de <DNT>**disable your manual log forwarder**</DNT>. Sinon, votre application enverra le double de données log . Selon votre compte, cela peut entraîner une double facturation. Pour plus d&amp;apos;informations, suivez les procédures pour désactiver votre [redirecteur de logspécifique](/docs/logs/forward-logs/enable-log-management-new-relic#log-forwarding).
</Callout>

## Traceur de transaction .ini paramètres [#inivar-tt-settings]

Les valeurs de ces paramètres sont utilisées pour contrôler la trace de la transaction.

<CollapserGroup>
  <Collapser id="inivar-tt-custom" title="newrelic.transaction_tracer.custom">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Chaîne (utilisez des guillemets)
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `""`
          </td>
        </tr>
      </tbody>
    </table>

    Définissez ceci sur une liste séparée par des virgules de fonctions ou de méthodes définies par l&apos;utilisateur à instrument:

    ```
    "myfunction,myclass::method,otherfunction"
    ```

    Les fonctions PHP internes ne peuvent pas avoir de traçage personnalisé.

    Vous pouvez ajouter des fonctions personnalisées à la liste avec chaque fichier PERDIR, mais vous ne pouvez pas supprimer une fonction ou une méthode qui a déjà été ajoutée. Si vous souhaitez ajouter par programmation des fonctions ou des méthodes à instrumenter, utilisez [`newrelic_add_custom_tracer()`](/docs/agents/php-agent/php-agent-api/newrelic_add_custom_tracer) API l&amp;apos;appel de fonction .
  </Collapser>

  <Collapser id="inivar-tt-enable" title="newrelic.transaction_tracer.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Active ou désactive le traceur de transaction.

    Le traceur crée une trace de transaction détaillée pour les transactions qui prennent plus de temps que le seuil, tel que défini par la valeur `newrelic.transaction_tracer.threshold` . Une seule trace de transaction par application et par cycle de collecte est stockée et il s&amp;apos;agit toujours de la transaction la plus lente au cours de ce cycle.

    [Les traces de transaction](/docs/apm/transactions/transaction-traces/transaction-traces) sont utiles pour diagnostiquer pourquoi une transaction particulière a été lente. À moins que la mémoire et les performances ne soient essentielles, elles ne devraient presque jamais être désactivées. L&amp;apos;activation de cette option a un impact très léger sur les performances et utilise plus de mémoire.

    Pour plus d&apos;informations, voir [`newrelic.transaction_tracer.detail`](#inivar-tt-detail).
  </Collapser>

  <Collapser id="inivar-tt-expenable" title="newrelic.transaction_tracer.explain_enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Active ou désactive la demande d&apos;explication des plans de la bibliothèque MySQLi et PDO MySQL pour les appels de requête lente. Les plans explicatifs ne seront disponibles que lorsque [`newrelic.transaction_tracer.slow_sql`](#inivar-tt-slowsql) est défini sur `true` et [`newrelic.transaction_tracer.record_sql`](#inivar-tt-sql) **n&apos;est pas** défini sur `"off"`.
  </Collapser>

  <Collapser id="inivar-tt-epthreshold" title="newrelic.transaction_tracer.explain_threshold">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Durée
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `"500"`
          </td>
        </tr>
      </tbody>
    </table>

    Définit le seuil au-delà des requêtes qui sont considérées comme « lentes » et donc candidates à la page [<DNT>**Slow Queries**</DNT>](/docs/apm/applications-menu/monitoring/databases-slow-queries-dashboard) . Spécifiez la durée sous forme de valeur absolue avec des unités. L&amp;apos;unité par défaut est en millisecondes si aucune n&amp;apos;est spécifiée.

    <DNT>
      **Example durations**
    </DNT>

    * `"200ms"`
    * `"1s250ms"`
    * `"1h30m"`
    * `"750us"`
  </Collapser>

  <Collapser id="inivar-tt-internalfun" title="newrelic.transaction_tracer.internal_functions_enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            système
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Active ou désactive la prise en charge du traçage des fonctions internes (c&apos;est-à-dire des fonctions écrites en C et fournies via la bibliothèque standard PHP ou les extensions PECL). Lorsque cette option est activée, les fonctions internes apparaissent dans [la trace de la transaction](/docs/apm/transactions/transaction-traces/introduction-transaction-traces) comme les fonctions écrites en PHP.

    L&apos;activation de cette option peut entraîner un ralentissement des transactions, en particulier lors de la collecte de nombreuses traces à partir de PHP 5.x. L&apos;activation de cette option n&apos;est recommandée que lors du débogage spécifique de problèmes de performances où une fonction interne est suspectée d&apos;être lente.
  </Collapser>

  <Collapser id="inivar-tt-sql" title="newrelic.transaction_tracer.record_sql">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Chaîne (utilisez des guillemets)
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `"obfuscated"`
          </td>
        </tr>
      </tbody>
    </table>

    Définit comment les requêtes sont enregistrées (le cas échéant).

    Lors de l&apos;enregistrement de la trace de transaction en interne, la requête complète pour les appels de requête lente est enregistrée. L&apos;envoi de cette requête à New Relic peut avoir de graves conséquences en matière de sécurité. Par conséquent, par défaut, toutes les instructions de base de données sont masquées avant d&apos;être envoyées à New Relic. L&apos;obfuscation n&apos;est pas réversible, car elle remplace les chaînes et les nombres de n&apos;importe quelle requête par des points d&apos;interrogation. Les seules choses qui survivent intactes sont les noms de champs, et non leurs valeurs.

    * Si vous testez avec des données qui ne sont pas sensibles et que vous avez besoin de voir la requête brute dans la trace de transaction, définissez cette valeur sur `"raw"`.

    * Si vous ne souhaitez pas que la requête soit enregistrée du tout, définissez cette valeur sur `"off"`.

      <Callout variant="important">
        Réglez toujours cette valeur sur `"obfuscated"` ou `"off"` dans n’importe quel environnement de production.
      </Callout>
  </Collapser>

  <Collapser id="inivar-tt-slowsql" title="newrelic.transaction_tracer.slow_sql">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Utilisez ce paramètre pour activer ou désactiver la fonctionnalité de requête lente. Lorsqu&apos;il est activé, il va :

    * Enregistrez les 10 requêtes de base de données les plus lentes par application et par minute.

    * Créez une trace d&apos;appels menant à la requête.

      Si cette variable est définie sur `false` ou si l&amp;apos;enregistrement SQL est désactivé, l&amp;apos;agent New Relic ne collecte aucune donnée de requête lente.
  </Collapser>

  <Collapser id="inivar-tt-stthreshold" title="newrelic.transaction_tracer.stack_trace_threshold">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Durée
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `"500"`
          </td>
        </tr>
      </tbody>
    </table>

    Cela définit le seuil au-dessus duquel l&apos; agent enregistrera la stack PHP complète pour tracer la transaction pour laquelle les requêtes sont enregistrées.

    Spécifiez la durée sous forme de valeur absolue avec des unités. L&apos;unité par défaut est en millisecondes si aucune n&apos;est spécifiée.

    <DNT>
      **Example durations**
    </DNT>

    * `"200ms"`

    * `"1s250ms"`

    * `"1h30m"`

    * `"750us"`

      la trace des appels peut consommer de la mémoire, donc faites attention à ne pas définir cette valeur trop basse. Cette variable n&apos;a aucune signification si [`newrelic.transaction_tracer.record_sql`](#inivar-tt-sql) est défini sur `"off"`.
  </Collapser>

  <Collapser id="inivar-tt-threshold" title="newrelic.transaction_tracer.threshold">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Durée
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `"apdex_f"`
          </td>
        </tr>
      </tbody>
    </table>

    Utilisez cette variable pour définir le seuil au-delà duquel les transactions sont éligibles au traçage. Les valeurs disponibles incluent :

    * Utilisez `"apdex_f"` pour définir le seuil à 4 fois la valeur [apdex\_t](/docs/accounts-partnerships/education/getting-started-new-relic/glossary#apdex_t) de l&amp;apos;application. Pour plus d&amp;apos;informations, voir [Apdex : Mesurer la satisfaction des utilisateurs](/docs/apm/new-relic-apm/apdex/apdex-measuring-user-satisfaction).

    * Utilisez n’importe quelle autre chaîne de durée pour définir un seuil de temps spécifique. Spécifiez la durée en valeur absolue et l&apos;unité de mesure. Si aucune valeur n&apos;est spécifiée, l&apos;unité par défaut est la milliseconde.

      <DNT>
        **Example durations**
      </DNT>

    * `"200ms"`

    * `"1s250ms"`

    * `"1h30m"`

    * `"750us"`
  </Collapser>

  <Collapser id="inivar-tt-gather-input-queries" title="newrelic.transaction_tracer.gather_input_queries">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Utilisez ce paramètre pour activer ou désactiver la collecte de requêtes d&apos;entrée DQL avec requête lente et trace de transaction. Lorsqu&apos;ils sont activés, ils apparaîtront avec la requête lente et la trace de transaction.
  </Collapser>

  <Collapser id="inivar-tt-maxsegweb" title="newrelic.transaction_tracer.max_segments_web">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Nombre
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `0`
          </td>
        </tr>
      </tbody>
    </table>

    Spécifie le nombre maximal de segments que l&apos; agent PHP doit enregistrer pour la transaction Web. Une fois ce maximum atteint, l’échantillonnage aura lieu.

    L&apos;agent PHP rapporte la trace de transaction et les traces distribuées sous forme d&apos;une collection de segments. Chaque segment représente une méthode ou un appel de fonction dans une trace de transaction. La valeur par défaut de cette configuration est `0`, indiquant que l&amp;apos; agent PHP doit capturer tous les segments lors d&amp;apos;une transaction Web. À la fin d&amp;apos;une transaction, il assemble les segments les plus prioritaires à signaler dans une trace de transaction.

    Pour les processus PHP de longue durée avec des centaines de milliers ou des millions d&apos;appels de fonction, définir cette valeur sur une valeur supérieure à `1` empêche l&amp;apos;agent PHP d&amp;apos;épuiser la mémoire système lors de l&amp;apos;enregistrement des segments.

    La taille du segment peut varier en fonction de la longueur du nom de la méthode correspondante, de la longueur de son nom de classe et du nombre d&apos;appels ultérieurs effectués par la méthode. Cela dit, une estimation prudente est de 400 octets par segment. Pour limiter l&apos;agent PHP à 40 Mo pour la capture de segment, définissez cette valeur sur `100000`. Si cette valeur est définie sur une valeur inférieure à `2000`, elle limite davantage le nombre total de segments signalés pour le suivi de la transaction.

    Ce paramètre de configuration concerne uniquement les processus Web PHP ; il n&apos;affectera pas les processus PHP CLI. Pour définir une limite pour les processus CLI, utilisez `newrelic.transaction_tracer.max_segments_cli`.
  </Collapser>

  <Collapser id="inivar-tt-maxsegcli" title="newrelic.transaction_tracer.max_segments_cli">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Nombre
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `100000`
          </td>
        </tr>
      </tbody>
    </table>

    Spécifie le nombre maximal de segments que l&apos;agent PHP doit enregistrer pour les transactions CLI. Une fois ce maximum atteint, l’échantillonnage aura lieu.

    L&apos;agent PHP rapporte la trace de transaction et les traces distribuées sous forme d&apos;une collection de segments. Chaque segment représente une méthode ou un appel de fonction dans une trace de transaction. La valeur par défaut de cette configuration est `100000`, indiquant que l&amp;apos; agent PHP doit capturer tous les segments lors d&amp;apos;une transaction Web. À la fin d&amp;apos;une transaction, il assemble les segments les plus prioritaires à signaler dans une trace de transaction.

    Pour les processus PHP de longue durée avec des centaines de milliers ou des millions d&apos;appels de fonction, définir cette valeur sur une valeur supérieure à `1` empêche l&amp;apos;agent PHP d&amp;apos;épuiser la mémoire système lors de l&amp;apos;enregistrement des segments.

    La taille du segment peut varier en fonction de la longueur du nom de la méthode correspondante, de la longueur de son nom de classe et du nombre d&apos;appels ultérieurs effectués par la méthode. Cela dit, une estimation prudente est de 400 octets par segment. Pour limiter l&apos;agent PHP à 40 Mo pour la capture de segment, définissez cette valeur sur `100000`. Si cette valeur est définie sur une valeur inférieure à `2000`, elle limite davantage le nombre total de segments signalés pour le suivi de la transaction.

    Ce paramètre de configuration concerne uniquement les processus PHP CLI ; il n&apos;affectera pas les processus Web PHP. Pour définir une limite pour les processus Web, utilisez `newrelic.transaction_tracer.max_segments_web`.
  </Collapser>
</CollapserGroup>

## Autre traceur .ini paramètres [#inivar-misctt-settings]

Les valeurs de ces paramètres sont utilisées pour contrôler diverses fonctionnalités du traceur.

<CollapserGroup>
  <Collapser id="inivar-cross-app-tracer-enabled" title="newrelic.cross_application_tracer.enabled">
    <Callout variant="important">
      Le traing inter-applications est obsolète et dans l&apos;agent PHP version 9.21.0.311 a été désactivé par défaut. Nous recommandons la fonctionnalité [de tracing distribué](/docs/apm/agents/php-agent/configuration/distributed-tracing-php-agent), qui améliore le [tracing inter-application](/docs/traces/cross-application-traces).
    </Callout>

    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Activer ou désactiver le traceur inter-application . Le traceur inter-applicationinsère des en-têtes HTTP dans requests sortantes et la réponse afin de relier entre elles les métriques Web des transactions et de tracer les transactions entre les applications.

    Le tracing distribué et le tracing inter-application ne peuvent pas être utilisés simultanément. La configuration par défaut de l&apos;agent PHP active le tracing distribué et désactive le tracing inter-application .
  </Collapser>

  <Collapser id="inivar-distributed-enabled" title="newrelic.distributed_tracing_enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    <Callout variant="important">
      L&apos;activation du tracing distribué désactive [le tracing inter-application](#inivar-cross-app-tracer-enabled). Lisez le [guide de transition](/docs/apm/distributed-tracing/getting-started/transition-guide-distributed-tracing) pour comprendre les effets sur les fonctionnalités New Relic .
    </Callout>

    Activer ou désactiver [le tracing distribué](/docs/apm/agents/php-agent/configuration/distributed-tracing-php-agent). Il est activé par défaut dans l&amp;apos;agent PHP 9.21.0 et supérieur. Lorsque le traceur de transaction et la fonctionnalité de tracing distribué de agent sont activés, l&amp;apos; agent insérera des en-têtes dans requests sortantes et analysera requests entrantes pour tracer les en-têtes distribués.

    ```ini
    newrelic.transaction_tracer.enabled = true
    newrelic.distributed_tracing_enabled = true
    ```

    Pour plus d&apos;informations, consultez [le tracing distribué pour vos services PHP](/docs/apm/agents/php-agent/configuration/distributed-tracing-php-agent).
  </Collapser>

  <Collapser id="inivar-dt-exclude-newrelic" title="newrelic.distributed_tracing_exclude_newrelic_header">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Définissez cette valeur sur vrai pour exclure l&apos;en-tête de suivi distribué New Relic qui est attaché aux requests sortantes et pour vous fier uniquement aux en-têtes W3C Trace Context pour le suivi distribué. Si cela est faux, les deux types d’en-têtes sont attachés aux requests sortantes.

    L&apos;en-tête de tracing distribué de New Relic permet l&apos;interopérabilité avec les agents plus anciens qui ne prennent pas en charge les en-têtes W3C Trace Context . Les versions d&apos;agent qui prennent en charge les en-têtes W3C Trace Context les prioriseront par rapport aux en-têtes New Relic pour le tracing distribué.
  </Collapser>

  <Collapser id="inivar-span-enabled" title="newrelic.span_events_enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Span événement sont signalés pour [tracing distribué](#inivar-distributed-enabled). Le reporting Span événement nécessite que [le tracing distribué](/docs/apm/agents/php-agent/configuration/distributed-tracing-php-agent) soit activé. Cette option active/désactive le reporting des événements span.
  </Collapser>

  <Collapser id="inivar-span-events-max-samples-stored" title="newrelic.span_events.max_samples_stored">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Entier
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `0`
          </td>
        </tr>
      </tbody>
    </table>

    Span événement sont signalés pour [tracing distribué](#inivar-distributed-enabled). Cette valeur définit le nombre maximum d&amp;apos;événements span envoyés au collecteur par cycle de collecte. Une valeur de `0` utilisera la valeur par défaut de l&amp;apos;agent de `2000`. Le réglage maximum est `10000`.
  </Collapser>

  <Collapser id="inivar-inftr-host" title="newrelic.infinite_tracing.trace_observer.host">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Chaîne
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `""`
          </td>
        </tr>
      </tbody>
    </table>

    Configure l&apos;observateur de trace utilisé pour le tracing infini. Si ce champ est vide, la prise en charge du tracing infini sera désactivée. Cela nécessite que [le tracing distribué](#inivar-distributed-enabled) et l&amp;apos;événement span soient activés.
  </Collapser>

  <Collapser id="inivar-inftr-port" title="newrelic.infinite_tracing.trace_observer.port">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Entier
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `443`
          </td>
        </tr>
      </tbody>
    </table>

    Configure le port TCP/IP utilisé pour communiquer avec l&apos;observateur de trace Infinite Tracing. Ce paramètre est ignoré si `newrelic.infinite_tracing.trace_observer.host` est vide. Ce paramètre n’aura généralement pas besoin d’être modifié.
  </Collapser>

  <Collapser id="inivar-inftr-queue" title="newrelic.infinite_tracing.span_events.queue_size">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Entier (1000 ou plus)
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `100000`
          </td>
        </tr>
      </tbody>
    </table>

    Définit le nombre d&apos;événements de portée qui peuvent être mis en file d&apos;attente pour transmission à l&apos;observateur de trace Infinite Tracing. L&apos;agent gère en interne les événements SPAN pour le traçage infini dans des lots SPAN. Ces lots de span peuvent contenir un maximum de 1000 spans. Par conséquent, la taille de la file d&apos;attente des événements SPAN ne peut pas être inférieure à `1000`, sinon aucun lot SPAN ne peut être mis en file d&amp;apos;attente. Si une taille de file d&amp;apos;attente inférieure à 1 000 est spécifiée, la taille minimale de `1000` est utilisée.
  </Collapser>

  <Collapser id="inivar-err-enabled" title="newrelic.error_collector.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Activer ou désactiver le collecteur d&apos;erreurs. Lorsqu&apos;il est activé, l&apos;agent collecte et signale les erreurs PHP à l&apos;UI New Relic.

    L&apos;agent enregistre uniquement l&apos;erreur la plus grave pour chaque transaction, et jusqu&apos;à 20 erreurs par [cycle de collecte](/docs/apm/new-relic-apm/getting-started/glossary#harvest-cycle).

    <Callout variant="tip">
      Pour un aperçu de la configuration des erreurs dans APM, voir [Gérer les erreurs dans APM](/docs/agents/manage-apm-agents/agent-data/manage-errors-apm-collect-ignore-mark-expected).
    </Callout>
  </Collapser>

  <Collapser id="inivar-err-db" title="newrelic.error_collector.record_database_errors">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Lorsque [cette option est activée](#inivar-err-enabled), l&amp;apos;agent collecte les erreurs renvoyées par les fonctions MySQL comme s&amp;apos;il s&amp;apos;agissait d&amp;apos;erreurs PHP.
  </Collapser>

  <Collapser id="inivar-err-priority" title="newrelic.error_collector.prioritize_api_errors">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Définissez cette valeur sur `true` pour attribuer la priorité la plus élevée aux erreurs identifiées via la fonction API [`newrelic_notice_error()`](/docs/agents/php-agent/php-agent-api/newrelic_notice_error) .

    Remarque : toute erreur non détectée se verra attribuer une priorité encore plus élevée. Elle aura donc la priorité sur les erreurs signalées via la fonction API [`newrelic_notice_error()`](/docs/agents/php-agent/php-agent-api/newrelic_notice_error) .
  </Collapser>

  <Collapser id="inivar-err-ignore-exceptions" title="newrelic.error_collector.ignore_exceptions">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Chaîne
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Une liste séparée par des virgules de noms de classes d&apos;exceptions entièrement qualifiés que l&apos;agent doit ignorer. Lorsqu&apos;une exception non gérée se produit, l&apos;agent exécutera l&apos;équivalent de `$exception instanceof Class` pour chacune des classes répertoriées. Si l’une de ces vérifications renvoie vrai, l’agent n’enregistrera pas d’exception.

    Selon la [sortie PHP prise en charge](/docs/agents/php-agent/getting-started/php-agent-compatibility-requirements#php-release), ces valeurs sont équivalentes à un rapport d&amp;apos;exception <DNT>**disabling**</DNT> :

    * Versions PHP 5 prises en charge : `newrelic.error_collector.ignore_exceptions = Exceptions`
    * Versions PHP 7 prises en charge : `newrelic.error_collector.ignore_exceptions = Throwable`
  </Collapser>

  <Collapser id="inivar-err-ignore-errors" title="newrelic.error_collector.ignore_errors">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Entier ou expression binaire de [constantes d&apos;erreur définies par PHP](http://php.net/manual/en/errorfunc.constants.php)
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `0`
          </td>
        </tr>
      </tbody>
    </table>

    Définit les [niveaux d’erreur](http://php.net/manual/en/errorfunc.constants.php) de l’agent PHP sur <DNT>**ignore**</DNT>. La valeur de ce paramètre utilise une syntaxe similaire à [l&apos;option `error_reporting` de PHP](http://php.net/manual/en/errorfunc.configuration.php#ini.error-reporting). Par exemple, pour configurer l&amp;apos;agent PHP pour ignorer les erreurs de niveau `E_WARNING` et `E_ERROR`, utilisez :

    ```ini
    newrelic.error_collector.ignore_errors = E_WARNING | E_ERROR
    ```

    ou

    ```ini
    newrelic.error_collector.ignore_errors = 3
    ```

    Pour configurer l&apos;agent PHP afin qu&apos;il ignore tout sauf `E_WARNING`, utilisez :

    ```ini
    newrelic.error_collector.ignore_errors = E_ALL & ~E_WARNING
    ```
  </Collapser>

  <Collapser id="inivar-framework-drupal-modules" title="newrelic.framework.drupal.modules">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            Remarques :
          </th>

          <td>
            Dans l&apos;agent antérieur à la version 3.0, la valeur par défaut de cette valeur était `false`. La définition de cette option impliquait `newrelic.transaction_tracer.detail = 1`.
          </td>
        </tr>
      </tbody>
    </table>

    Pour activer le suivi des modules Drupal, définissez ceci sur `true`. Cette option a le même impact sur les performances que [`newrelic.transaction_tracer.detail`](#inivar-tt-detail). Cela permettra l&amp;apos;enregistrement des fonctions du module Drupal et du nombre d&amp;apos;appels, et ils s&amp;apos;afficheront sous l&amp;apos;onglet <DNT>**Modules**</DNT>, un peu comme le Web des transactions.
  </Collapser>

  <Collapser id="inivar-framework-wordpress-hooks" title="newrelic.framework.wordpress.hooks">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Pour activer le suivi des hooks WordPress, définissez ceci sur `true`. Cela permettra l&amp;apos;enregistrement des hooks, plugins et thèmes WordPress, et ils s&amp;apos;afficheront sous l&amp;apos;onglet dans [<DNT>**WordPress**</DNT>](/docs/agents/php-agent/frameworks-libraries/wordpress-specific-functionality) l&amp;apos;UI New Relic.
  </Collapser>

  <Collapser id="inivar-framework-wordpress-hooks-options" title="options de hooks pour newrelic framework wordpress">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Chaîne
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `"plugin_callbacks"`
          </td>
        </tr>
      </tbody>
    </table>

    Définit les options selon lesquelles les hooks WordPress sont instrumentés. L&apos;agent New Relic peut fournir différents niveaux d&apos;informations détaillées dans les hooks WordPress. Par défaut, seuls les rappels de plugins/thèmes sont instrumentés (&quot;plugin\_callbacks&quot;). Au prix d&apos;une augmentation des frais généraux de l&apos;agent, il est possible d&apos;étendre l&apos;instrumentation à toutes les fonctions de rappel de hook (« all\_callbacks »). La troisième option consiste à monitorer les hameçons sans rappel instrumenté (&quot;seuil&quot;). Cette option ne donne pas d&apos;informations détaillées sur les plugins/thèmes. En savoir plus sur l’instrumentation spécifique à WordPress [ici](/docs/agents/php-agent/frameworks-libraries/wordpress-specific-functionality).
  </Collapser>

  <Collapser id="inivar-framework-wordpress-hooks-threshold" title="newrelic.framework.wordpress.hooks.threshold">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Durée
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `1ms`
          </td>
        </tr>
      </tbody>
    </table>

    Définit le seuil au-dessus duquel l&apos;agent New Relic enregistrera l&apos;exécution du hook WordPress. Utilisé lorsque newrelic.framework framework est défini sur « seuil ».
  </Collapser>

  <Collapser id="inivar-wt-files" title="newrelic.webtransaction.name.files">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Chaîne (utilisez des guillemets)
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `""`
          </td>
        </tr>
      </tbody>
    </table>

    C&apos;est la même chose que [`newrelic.webtransaction.name.functions`](#inivar-wt-funcs), sauf qu&amp;apos;il utilise des noms de fichiers pour nommer le site Web de transaction. Les noms de fichiers peuvent être des expressions régulières POSIX standard à utiliser avec PCRE ; par exemple, `"controllers/actions/.*"`.
  </Collapser>

  <Collapser id="inivar-wt-funcs" title="newrelic.webtransaction.name.functions">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Chaîne (utilisez des guillemets)
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `""`
          </td>
        </tr>
      </tbody>
    </table>

    À moins que l&apos; agent New Relic détecte un framework spécifique, tel que Drupal ou Wordpress, les transactions Web sont nommées d&apos;après le fichier PHP initial ; par `article.php` exemple,.

    Lorsque le fichier initial est un répartiteur, ce schéma de nommage produit des données peu utiles. Utilisez cette variable pour spécifier une liste de fonctions qui sont les « actions » générées par le répartiteur. Le nom de la transaction web sera la première fonction d&apos;action exécutée.

    <DNT>
      **Example dispatch function naming**
    </DNT>

    Si `index.php` distribue aux fonctions nommées :

    * `login`,

    * `logout`,

    * `admin`,

    * `show`, et

    * `edit`

      Vous définiriez cette valeur sur `"login,logout,admin,show,edit"`.

      Le site Web de transaction sera nommé `login`, `logout`, etc. au lieu de `/index.php` (le nom du fichier initial).
  </Collapser>

  <Collapser id="inivar-wt-remove-path" title="newrelic.webtransaction.name.remove_trailing_path">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Lorsque cette option est activée, elle supprime tout contenu dans l&apos;URI de la demande après le nom du script. Par exemple, cela supprimerait le `/xyz/zy` de fin de `/path/to/foo.php/xyz/zy`.
  </Collapser>

  <Collapser id="ini-var-dt-instance-reporting" title="newrelic.datastore_tracer.instance_reporting.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Si `false`, l&amp;apos;agent ne signalera pas les métriques de l&amp;apos;instance datastore, n&amp;apos;ajoutera pas `host` le `port_path_or_id` paramètre à la transaction ou ne ralentira pas la trace SQL.
  </Collapser>

  <Collapser id="ini-var-dt-database-name-reporting" title="newrelic.datastore_tracer.database_name_reporting.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Si `false`, l&amp;apos; agent n&amp;apos;ajoutera pas le paramètre `database_name` à la transaction ou ne ralentira pas la trace SQL.
  </Collapser>
</CollapserGroup>

## Paramètres d&apos;attribut [#inivar-attribute-settings]

Cette section répertorie les paramètres qui affectent la collecte et la création de rapports d&apos;attributs.

<CollapserGroup>
  <Collapser id="inivar-attributes-enabled" title="newrelic.attributes.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Activer ou désactiver la collecte des attributs générés par l&apos; agent PHP ou générés par l&apos;utilisateur via [`newrelic_add_custom_parameter()`](/docs/agents/php-agent/php-agent-api/newrelic_add_custom_parameter). Ce paramètre aura la priorité sur tous les autres paramètres de configuration d&amp;apos;attribut.

    Pour plus d&apos;informations, voir [Activation et désactivation de l&apos;attribut](/docs/php/php-agent-enabling-and-disabling-attributes#cfg-attributes-enabled).
  </Collapser>

  <Collapser id="inivar-attributes-enabled" title="newrelic.{destination}.attributes.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `true`, sauf pour `browser_monitoring.attributes.enabled`
          </td>
        </tr>
      </tbody>
    </table>

    Contrôlez les destinations qui reçoivent l&apos;attribut. Ces paramètres de configuration remplaceront les [paramètres](#inivar-attributes-include-exclude) `.include` et `.exclude` .

    Pour plus d&apos;informations sur les destinations disponibles, voir [Activation et désactivation de l&apos;attribut](/docs/agents/php-agent/attributes/enabling-and-disabling-attributes#properties).
  </Collapser>

  <Collapser id="inivar-attributes-include-exclude" title="newrelic.attributes.{include|exclude}">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Chaîne
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Il s&apos;agit d&apos;une famille d&apos;options configuration qui permettent un contrôle précis sur les destinations des attributs. Pour plus d&apos;informations, voir [Activation et désactivation de l&apos;attribut](/docs/php/php-agent-enabling-and-disabling-attributes#cfg-attributes-include).
  </Collapser>
</CollapserGroup>

## Événements personnalisés [#inivar-custom-events]

Cette section répertorie les paramètres qui affectent le rapport d&apos;événement personnalisé.

<CollapserGroup>
  <Collapser id="inivar-custom-events-enabled" title="newrelic.custom_insights_events.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Activer ou désactiver la collecte des événements générés par l&apos;utilisateur via [`newrelic_record_custom_event()`](/docs/agents/php-agent/php-agent-api/newrelic_record_custom_event). Ce paramètre aura la priorité sur tous les autres paramètres de configuration d&amp;apos;attribut.

    Pour plus d&apos;informations, voir [Rapport événement personnalisé et attribut](/docs/data-apis/custom-data/custom-events/apm-report-custom-events-attributes/#php-att).
  </Collapser>

  <Collapser id="inivar-custom-events-maxsamples" title="newrelic.custom_events.max_samples_stored">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Entier
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `30000`
          </td>
        </tr>

        <tr>
          <th>
            Max:
          </th>

          <td>
            `100000`
          </td>
        </tr>
      </tbody>
    </table>

    Un entier positif spécifiant le nombre maximal d&apos;événements personnalisés par minute à envoyer.

    La définition de cette valeur sur `0` désactivera effectivement l&amp;apos;envoi d&amp;apos;événements personnalisés. Le paramètre [`newrelic.custom_insights_events.enabled`](#inivar-custom-events-enabled) est le moyen préféré pour activer ou désactiver la génération d&amp;apos;événements personnalisés.

    Réglez cette valeur sur une valeur inférieure pour réduire la quantité d&apos;événements personnalisés envoyés (cela peut provoquer un échantillonnage d&apos;événements personnalisés). Définissez cette valeur sur une valeur plus élevée pour envoyer plus de lignes d&apos;événements personnalisés.

    <Callout variant="important">
      La variable INI `newrelic.custom_events.max_samples_stored` a été ajoutée dans la sortie 10.4.0.316.
    </Callout>
  </Collapser>
</CollapserGroup>

## Métriques au niveau du code [#inivar-code-level-metrics]

Cette section répertorie les paramètres qui affectent le reporting des métriques du niveau du code.

<CollapserGroup>
  <Collapser id="inivar-code-level-metrics-enabled" title="newrelic.code_level_metrics.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Activer ou désactiver la collecte de métriques au niveau du code.

    <Callout variant="important">
      La variable INI `newrelic.code_level_metrics.enabled` a été ajoutée dans la sortie 10.4.0.316 et a été désactivée par défaut. Les métriques au niveau du code sont activées par défaut à partir de la version 10.6.0.
    </Callout>
  </Collapser>

  <Collapser id="NEW_RELIC_METADATA_COMMIT" title="NEW_RELIC_METADATA_COMMIT">
    <Callout variant="important">
      Cela ne peut être défini que via une variable d&apos;environnement.
    </Callout>

    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Entier
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>

        <tr>
          <th>
            [S&apos;installer](#options)
          </th>

          <td>
            Variable d&apos;environnement
          </td>
        </tr>
      </tbody>
    </table>

    Le commit sha. Le SHA entier peut être utilisé ou seulement les sept premiers caractères (par exemple, 734713b).
  </Collapser>

  <Collapser id="NEW_RELIC_METADATA_RELEASE_TAG" title="NEW_RELIC_METADATA_RELEASE_TAG">
    <Callout variant="important">
      Cela ne peut être défini que via une variable d&apos;environnement.
    </Callout>

    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Chaîne
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>

        <tr>
          <th>
            [S&apos;installer](#options)
          </th>

          <td>
            Variable d&apos;environnement
          </td>
        </tr>
      </tbody>
    </table>

    Une tag de sortie (telle que v0.1.209 ou sortie-209).
  </Collapser>
</CollapserGroup>

## Erreurs configuration de la boîte de réception [#errors-inbox-configuration]

La définition de l’une des balises suivantes vous aidera à identifier les versions de votre logiciel qui génèrent les erreurs.

* `NEW_RELIC_METADATA_SERVICE_VERSION` créera tag.service.version sur les données d&amp;apos;événement contenant la version de votre code qui est déployée, dans de nombreux cas une version sémantique telle que 1.2.3, mais pas toujours.
* `NEW_RELIC_METADATA_RELEASE_TAG `créera tag.releaseTag sur les données d&amp;apos;événement contenant la tag de sortie (comme v0.1.209 ou sortie-209).
* `NEW_RELIC_METADATA_COMMIT` créera tag.commit sur les données d&amp;apos;événement contenant le commit sha. Le SHA entier peut être utilisé ou seulement les sept premiers caractères (par exemple, 734713b).

Une prochaine version de la boîte de réception des erreurs suivra automatiquement les versions de votre logiciel qui génèrent des erreurs. Toutes les données de version seront également affichées dans [CodeStream](/docs/codestream/how-use-codestream/performance-monitoring/#buildsha).

## Paramètres de gestion des vulnérabilités [#inivar-vulnerability-management]

Cette section répertorie les paramètres qui affectent la création de rapports sur les packages PHP.

<CollapserGroup>
  <Collapser id="inivar-package-detection" title="newrelic.vulnérabilités.package.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            Remarques :
          </th>

          <td>
            Introduit dans la version 10.17 de l&apos;agent PHP
          </td>
        </tr>
      </tbody>
    </table>

    Lorsque la valeur est `true`, l&amp;apos;agent envoie des informations de détection de package qui peuvent être visualisées sur la page d&amp;apos;environnement.
  </Collapser>

  <Collapser id="inivar-package-detection-use-composer-api" title="newrelic.vulnerability_management.composer_api.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Remarques :
          </th>

          <td>
            Introduit dans la version 11.2 de l&apos;agent PHP
          </td>
        </tr>
      </tbody>
    </table>

    Lorsqu&apos;il est défini sur `true`, l&amp;apos; agent essaiera d&amp;apos;utiliser [APId&apos;exécution de Composer](https://getcomposer.org/doc/07-runtime.md) pour la détection package .
  </Collapser>
</CollapserGroup>

## Autre .ini paramètres [#inivar-rare-settings]

Cette section répertorie les paramètres newrelic.ini restants.

<CollapserGroup>
  <Collapser id="inivar-enabled" title="newrelic.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            système
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Activer ou désactiver l&apos;agent New Relic. Par défaut, l&apos;agent PHP New Relic est activé pour tous les répertoires.

    Si vous avez plusieurs sites sur votre serveur Web mais que vous souhaitez que l&apos; agent PHP monitore uniquement des sites spécifiques :

    1. Assurez-vous que `newrelic.enabled` est défini sur `true` au niveau global (système) dans votre fichier `newrelic.ini` .

    2. Définissez `newrelic.enabled` sur `false` pour un ou plusieurs sites spécifiques par répertoire (PERDIR).

       Si vous devez désactiver l&apos;agent globalement, définissez la valeur `newrelic.enabled` sur `false` dans le fichier `newrelic.ini` .

       Lorsque l&apos;agent est désactivé globalement, il ne s&apos;initialise pas complètement. Il suppose que vous le désactivez globalement pour une raison critique, et l&apos;agent tentera d&apos;avoir un impact aussi proche que possible de zéro sur PHP.

       <Callout variant="important">
         Vous ne pouvez pas désactiver globalement l&apos;agent, puis l&apos;activer de manière sélective pour chaque répertoire à l&apos;aide de `.htaccess`.
       </Callout>
  </Collapser>

  <Collapser id="inivar-logfile" title="newrelic.logfile">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            système
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Chaîne (utilisez des guillemets)
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `"/var/log/newrelic/php_agent.log"`
          </td>
        </tr>
      </tbody>
    </table>

    Ceci identifie le nom du fichier pour le logging des messages. Ceci est utile pour déboguer tout problème avec l&apos;agent. Quel que soit le réglage que vous choisissez, assurez-vous que :

    * Les autorisations pour le répertoire contenant et le fichier lui-même sont correctes.
    * L&apos;utilisateur sous lequel PHP s&apos;exécute peut écrire dans le fichier. Il s’agit généralement du même utilisateur que le serveur Web.
  </Collapser>

  <Collapser id="inivar-analytics-events" title="newrelic.transaction_events.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Lorsque défini sur `true`, l&amp;apos;agent collectera et signalera les données d&amp;apos;événements d&amp;apos;analyse. Les données d&amp;apos;événement permettent à l&amp;apos;UI New Relic d&amp;apos;afficher des informations supplémentaires telles que [l&apos;histogramme](/docs/applications-menu/histograms-viewing-data-distribution) et le [centile](/docs/applications-menu/percentiles-comparing-ranked-data).
  </Collapser>

  <Collapser id="inivar-error-events" title="newrelic.error_collector.capture_events">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Lorsque la valeur est `true`, l&amp;apos;agent collecte et signale les données d&amp;apos;événement d&amp;apos;erreur. Les données d&amp;apos;événement permettent à l&amp;apos;UI New Relic d&amp;apos;afficher des analyses d&amp;apos;erreurs.
  </Collapser>

  <Collapser id="inivar-feature-flag" title="newrelic.feature_flag">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Ce paramètre active des fonctionnalités nouvelles et expérimentales au sein de l&apos; agent PHP. Ces indicateurs sont utilisés pour activer de manière sélective les fonctionnalités qui sont censées être activées par défaut dans les versions ultérieures de l&apos; agent PHP.
  </Collapser>

  <Collapser id="inivar-autorum" title="newrelic.browser_monitoring.auto_instrument">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Cela permet l&apos;insertion automatique des fragments JavaScript pour <InlinePopover type="browser" />. Lorsque cette option est activée, l&amp;apos; agent insère un en-tête et un pied de page dans la sortie HTML qui généreront des mesures sur le temps de chargement de la page pour l&amp;apos;expérience finale de l&amp;apos;utilisateur. Pour plus d&amp;apos;informations, voir [Temps de chargement des pages en PHP](/docs/php/page-load-timing-in-php).
  </Collapser>

  <Collapser id="inivar-autorum" title="newrelic.guzzle.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            PERDRE
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Active ou désactive la prise en charge de la [bibliothèque Guzzle lorsqu&apos;elle est utilisée avec New Relic](/docs/agents/php-agent/frameworks-libraries/guzzle).

    * agent PHP version 6.4 ou supérieure : ce paramètre est défini sur `true` par défaut.
  </Collapser>

  <Collapser id="inivar-autorum" title="newrelic.preload_framework_library_detection">
    <table>
      <tbody>
        <tr>
          <th>
            Portée:
          </th>

          <td>
            système
          </td>
        </tr>

        <tr>
          <th>
            Type:
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut:
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            Remarques :
          </th>

          <td>
            Introduit dans la version 9.4 de l&apos;agent PHP
          </td>
        </tr>
      </tbody>
    </table>

    Permet la détection du framework et de la bibliothèque lorsque le préchargement est activé. Le préchargement a été introduit dans la version 7.4 de PHP. `newrelic.preload_framework_library_detection` ne prendra effet que lorsque `opcache.preload` est défini dans le fichier `php.ini` .
  </Collapser>
</CollapserGroup>