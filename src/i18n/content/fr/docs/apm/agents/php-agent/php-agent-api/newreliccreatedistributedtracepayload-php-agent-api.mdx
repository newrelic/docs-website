---
title: newrelic_create_distributed_trace_payload (API d'agent PHP)
type: apiDoc
shortDescription: Crée une tracedes charges distribuées.
tags:
  - Agents
  - PHP agent
  - PHP agent API
metaDescription: Distributed tracing allows you to see the path a request takes as it travels through a distributed system. Use this API to create a distributed trace payload.
freshnessValidatedDate: never
translationType: machine
---

## Syntaxe

```php
newrelic_create_distributed_trace_payload()
```

Crée une tracedes charges distribuées.

## Exigences

Nécessite l&apos;agent PHP [version 8.4 ou supérieure](/docs/release-notes/agent-release-notes/php-release-notes).

## Description

[Le tracing distribué](/docs/agents/php-agent/features/distributed-tracing-php) vous permet de voir le chemin emprunté par une requête lorsqu&apos;elle parcourt un système distribué.

<Callout variant="important">
  Avec agent PHP [version 9.10 ou](/docs/release-notes/agent-release-notes/php-release-notes) supérieure, les fonctions JSON suivantes sont désormais considérées comme obsolètes et seront supprimées dans une future sortie :

  ```php
  newrelic_create_distributed_trace_payload()
  newrelic_accept_distributed_trace_payload($payload)
  newrelic_accept_distributed_trace_payload_httpsafe($payload)
  ```

  Utilisez plutôt l’ API compatible avec la prise en charge W3C Trace Context, ajoutée dans la version 9.8 agent . Avec cela, l&apos; API pour l&apos;application instrumentée manuellement est passée des fonctions liées aux charges JSON aux formes d&apos;éventail d&apos;en-têtes suivantes :

  ```php
  newrelic_insert_distributed_trace_headers($outbound_headers)
  newrelic_accept_distributed_trace_headers($inbound_headers)
  ```
</Callout>

## Valeurs de retour

Cette méthode renvoie un objet de type `newrelic\DistributedTracePayload.`Cet objet possède deux méthodes qui rendront une traces distribuée chargée sous forme de texte.

```php
$payload = newrelic_create_distributed_trace_payload(); // renders the payload as a JSON string
$jsonText = $payload->text(); // renders the payload as an string suitable for transport via HTTP (query string, POST param, HTTP headers, etc.)
$httpSafeString = $payload->httpSafe();
```

## Exemples

Pour obtenir des exemples sur la manière et le moment d&apos;utiliser cette méthode API, consultez la documentation pour [instrumenter manuellement les applications et les services](/docs/agents/php-agent/features/distributed-tracing-php#manual).