---
title: API d'agent .NET
tags:
  - Agents
  - NET agent
  - API guides
metaDescription: A descriptive list of API calls that you can make using the New Relic .NET agent.
freshnessValidatedDate: never
translationType: machine
---

L&apos;agent .NET de New Relic inclut une API qui vous permet d&apos;étendre les fonctionnalités standard de l&apos;agent. Par exemple, vous pouvez utiliser l&apos;API .NET d&apos;agent pour :

* Personnalisez le nom de votre application
* Créer un paramètre de transaction personnalisé
* Signaler les erreurs et les mesures personnalisées

Vous pouvez également personnaliser certains comportements par défaut de l&apos;agent .NET en ajustant [les paramètres de configuration](/docs/agents/net-agent/configuration/net-agent-configuration) ou en utilisant [une instrumentation personnalisée](/docs/agents/net-agent/custom-instrumentation/introduction-net-custom-instrumentation).

## Exigences

Pour utiliser l&apos;API .NET deagent, assurez-vous que vous disposez de la [dernière version de l&apos;agent .NET](/docs/release-notes/agent-release-notes/net-release-notes). Ensuite, ajoutez une référence à l’agent dans votre projet en utilisant l’une des deux options ci-dessous :

* Ajoutez une référence à `NewRelic.Api.Agent.dll` à votre projet.

  OU

* Affichez et téléchargez le API package à partir de la [bibliothèque de packages NuGet](https://www.nuget.org/packages/NewRelic.Agent.Api/).

## Liste des appels d&apos;API

La liste suivante contient les différents appels que vous pouvez effectuer avec l&apos;API, y compris la syntaxe, les exigences, les fonctionnalités et les exemples :

<CollapserGroup>
  <Collapser id="DisableBrowserMonitoring" title="Désactiver le monitoring du navigateur">
    ### Syntaxe

    ```cs
    NewRelic.Api.Agent.NewRelic.DisableBrowserMonitoring([boolean $override])
    ```

    Désactiver automatique injection d&apos;monitoring de des navigateurs snippet sur des pages spécifiques.

    ### Exigences

    * Compatible avec toutes les versions d&apos;agent.
    * Doit être appelé à l&apos;intérieur d&apos;une [transaction](/docs/glossary/glossary/#transaction).

    ### Description

    Ajoutez cet appel pour désactiver l&apos;injection **automatique** du [<InlinePopover type="browser" />](/docs/browser/new-relic-browser/getting-started/new-relic-browser)script sur des pages spécifiques. Vous pouvez également ajouter une substitution facultative pour désactiver **l&apos;** injection manuelle et automatique. Dans les deux cas, placez cet appel d&apos;API aussi près que possible du haut de la vue dans laquelle vous souhaitez désactiver le navigateur.

    <Callout variant="tip">
      Comparez [`GetBrowserTimingHeader()`](/docs/apm/agents/net-agent/net-agent-api/net-agent-api/#GetBrowserTimingHeader), qui **ajoute** le script du navigateur à la page.
    </Callout>

    ### Paramètres

    <table>
      <thead>
        <tr>
          <th width="25%">
            paramètres
          </th>

          <th>
            Description
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `$override`

            *booléen*
          </td>

          <td>
            Facultatif. Lorsque `true`, désactive toute injection de script de navigateur. Ce drapeau affecte à la fois l&apos;injection manuelle et automatique. Cela remplace également l&apos;appel [`GetBrowserTimingHeader()`](/docs/apm/agents/net-agent/net-agent-api/net-agent-api/#GetBrowserTimingHeader).
          </td>
        </tr>
      </tbody>
    </table>

    ### Exemples

    #### Désactiver l&apos;injection automatique

    Cet exemple désactive uniquement l&apos;injection **automatique** du snippet:

    ```cs
    NewRelic.Api.Agent.NewRelic.DisableBrowserMonitoring();
    ```

    #### Désactiver l&apos;injection automatique et manuelle

    Cet exemple désactive l&apos;injection automatique **et** manuelle du snippet:

    ```cs
    NewRelic.Api.Agent.NewRelic.DisableBrowserMonitoring(true);
    ```
  </Collapser>

  <Collapser id="GetAgent" title="ObtenirAgent">
    ### Syntaxe

    ```cs
    NewRelic.Api.Agent.NewRelic.GetAgent()
    ```

    Accédez à l&apos;agent via l&apos;interface `IAgent` .

    ### Exigences

    * Version de l&apos;agent 8.9 ou supérieure.
    * Compatible avec tous les types d&apos;applications.

    ### Description

    Accédez à API des méthodes deagent via l&apos;interface [`IAgent`](/docs/apm/agents/net-agent/net-agent-api/net-agent-api/#IAgent).

    ### Valeurs de retour

    Une implémentation d&apos;[IAgent](/docs/apm/agents/net-agent/net-agent-api/net-agent-api/#IAgent) fournissant l&apos;accès à l&apos;API IAgent.

    ### Exemples

    ```cs
    IAgent agent = NewRelic.Api.Agent.NewRelic.GetAgent();
    ```
  </Collapser>

  <Collapser id="GetBrowserTimingHeader" title="Obtenir l'en-tête de synchronisation du navigateur">
    ### Syntaxe

    ```cs
    NewRelic.Api.Agent.NewRelic.GetBrowserTimingHeader();
    NewRelic.Api.Agent.NewRelic.GetBrowserTimingHeader(string nonce);
    ```

    Générer monitoring un HTML des navigateurs snippet pour instrumenter utilisateur final du navigateur.

    ### Exigences

    * Compatible avec toutes les versions d&apos;agent.
    * Doit être appelé à l&apos;intérieur d&apos;une [transaction](/docs/accounts-partnerships/education/getting-started-new-relic/glossary#transaction).

    ### Description

    Renvoie un snippet HTML utilisé pour activer <InlinePopover type="browser" />. Le snippet demande au navigateur de récupérer un petit fichier JavaScript et de démarrer le minuteur de page. Vous pouvez ensuite insérer le snippet renvoyé dans l&apos;en-tête de vos pages Web HTML. Pour plus d&apos;informations, voir [Ajout d&apos;applications au monitoring des navigateurs](/docs/browser/new-relic-browser/installation-configuration/adding-apps-new-relic-browser).

    <Callout variant="tip">
      Comparez [`DisableBrowserMonitoring()`](/docs/apm/agents/net-agent/net-agent-api/net-agent-api/#DisableBrowserMonitoring), qui **désactive** le script du navigateur sur une page.
    </Callout>

    ### Paramètres

    <table>
      <thead>
        <tr>
          <th width="25%">
            paramètres
          </th>

          <th>
            Description
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `nonce`

            *chaîne*
          </td>

          <td>
            Le nonce cryptographique par demande utilisé par les politiques de sécurité du contenu.
          </td>
        </tr>
      </tbody>
    </table>

    <Callout variant="tip">
      Cet appel d&apos;API nécessite des mises à jour de la liste de sécurité des domaines autorisés. Pour plus d&apos;informations sur les considérations relatives à la politique de sécurité du contenu (CSP), visitez la page [monitoring de la compatibilité et des exigences des navigateurs](/docs/browser/new-relic-browser/getting-started/compatibility-requirements-browser-monitoring).
    </Callout>

    ### Valeurs de retour

    Une chaîne HTML à intégrer dans un en-tête de page.

    ### Exemples

    <CollapserGroup>
      <Collapser id="" title="Avec ASPX">
        ```aspnet
        <html>
        <head>
            <%= NewRelic.Api.Agent.NewRelic.GetBrowserTimingHeader()%>
            ...
        </head>
        <body>
        ...
        ```

        ```aspnet
        <html>
        <head>
            <%= NewRelic.Api.Agent.NewRelic.GetBrowserTimingHeader("YOUR_NONCE_VALUE")%>
            ...
        </head>
        <body>
        ...
        ```
      </Collapser>

      <Collapser id="" title="Avec rasoir">
        ```cshtml
        <!DOCTYPE html>
        <html lang="en">
        <head>
            @Html.Raw(NewRelic.Api.Agent.NewRelic.GetBrowserTimingHeader())
            ...
        </head>
        <body>
        ...
        ```

        ```cshtml
        <!DOCTYPE html>
        <html lang="en">
        <head>
            @Html.Raw(NewRelic.Api.Agent.NewRelic.GetBrowserTimingHeader("YOUR_NONCE_VALUE"))
            ...
        </head>
        <body>
        ...
        ```
      </Collapser>

      <Collapser id="" title="Avec Blazor">
        <Callout variant="important">
          Cette API n&apos;est pas prise en charge pour Blazor Webassembly, car l&apos;agent ne peut pas instrumenter le code Webassembly. Les exemples suivants concernent uniquement l&apos;application Blazor Server. Utilisez la [méthode copier-coller](/docs/browser/browser-monitoring/installation/install-browser-monitoring-agent/#copy-paste) pour ajouter l&apos;agent de navigateur aux pages Blazor Webassembly.
        </Callout>

        <Callout variant="important">
          Cette API ne peut pas être placée dans un élément `<HeadContent>` d&apos;une page `.razor` . Au lieu de cela, il doit être appelé à partir de `_Layout.cshtml` ou d&apos;un fichier de mise en page équivalent.

          ```cshtml
          <!DOCTYPE html>
          <html lang="en">
          <head>
              @Html.Raw(NewRelic.Api.Agent.NewRelic.GetBrowserTimingHeader())
              ...
          </head>
          <body>
          ...
          ```

          ```cshtml
          <!DOCTYPE html>
          <html lang="en">
          <head>
              @Html.Raw(NewRelic.Api.Agent.NewRelic.GetBrowserTimingHeader("YOUR_NONCE_VALUE"))
              ...
          </head>
          <body>
          ...
          ```
        </Callout>
      </Collapser>
    </CollapserGroup>
  </Collapser>

  <Collapser id="GetLinkingMetadata" title="Obtenir des métadonnées de liaison">
    ### Syntaxe

    ```cs
    NewRelic.Api.Agent.NewRelic.GetLinkingMetadata();
    ```

    Renvoie des paires valeur-clé qui peuvent être utilisées pour lier une trace ou une entité.

    ### Exigences

    * Version de l&apos;agent 8.19 ou supérieure.
    * Compatible avec tous les types d&apos;applications.

    ### Description

    Le dictionnaire des paires valeur-clé renvoyées comprend des éléments utilisés pour lier la trace et l&apos;entité dans le produit APM . Il ne contiendra que des éléments avec des valeurs significatives. Par instance, si le tracing distribué est désactivé, `trace.id` ne sera pas inclus.

    ### Valeurs de retour

    `Dictionary <string, string>()` renvoyé inclut les éléments utilisés pour lier la trace et l&apos;entité dans le produit APM .

    ### Exemples

    ```cs
    NewRelic.Api.Agent.IAgent Agent = NewRelic.Api.Agent.NewRelic.GetAgent();
    var linkingMetadata = Agent.GetLinkingMetadata();
    foreach (KeyValuePair<string, string> kvp in linkingMetadata)
    {
        Console.WriteLine("Key = {0}, Value = {1}", kvp.Key, kvp.Value);
    }
    ```
  </Collapser>

  <Collapser id="IAgent" title="Agent IA">
    ### Syntaxe

    ```cs
    public interface IAgent
    ```

    Fournit un accès aux artefacts et méthodes de l&apos;agent, tels que la transaction en cours d&apos;exécution.

    ### Exigences

    * Version de l&apos;agent 8.9 ou supérieure.
    * Compatible avec tous les types d&apos;applications.

    ### Description

    Fournit un accès aux artefacts et méthodes de l&apos;agent, tels que la transaction en cours d&apos;exécution. Pour obtenir une référence à `IAgent`, utilisez [`GetAgent`](/docs/apm/agents/net-agent/net-agent-api/net-agent-api/#GetAgent).

    ### Propriétés

    <table>
      <thead>
        <tr>
          <th width="25%">
            Nom
          </th>

          <th>
            Description
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            Transaction en cours
          </td>

          <td>
            Propriété permettant d&apos;accéder à la transaction en cours d&apos;exécution via l&apos;interface [ITransaction](/docs/apm/agents/net-agent/net-agent-api/net-agent-api/#ITransaction). Doit être appelé à l&apos;intérieur d&apos;une [transaction](/docs/accounts-partnerships/education/getting-started-new-relic/glossary#transaction).
          </td>
        </tr>

        <tr>
          <td>
            Étendue actuelle
          </td>

          <td>
            Propriété donnant accès à l&apos;étendue en cours d&apos;exécution via l&apos;interface [ISpan](/docs/apm/agents/net-agent/net-agent-api/net-agent-api/#ISpan).
          </td>
        </tr>
      </tbody>
    </table>

    ### Exemples

    ```cs
    IAgent agent = NewRelic.Api.Agent.NewRelic.GetAgent();
    ITransaction transaction = agent.CurrentTransaction;
    ```
  </Collapser>

  <Collapser id="ITransaction" title="ITransaction">
    ### Syntaxe

    ```cs
    public interface ITransaction
    ```

    Fournit l&apos;accès aux méthodes spécifiques aux transactions dans l&apos;API New Relic.

    ### Description

    Fournit l&apos;accès aux méthodes spécifiques aux transactions dans l&apos;API de l&apos;agent .NET de New Relic. Pour obtenir une référence à `ITransaction`, utilisez la méthode de transaction actuelle disponible sur [`IAgent`](/docs/apm/agents/net-agent/net-agent-api/net-agent-api/#IAgent).

    Les méthodes suivantes sont disponibles sur `ITransaction`:

    <table>
      <thead>
        <tr>
          <th>
            Nom
          </th>

          <th>
            Description
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td class="children-nowrap">
            `InsertDistributedTraceHeaders`
          </td>

          <td>
            Ajoute les données du tracing distribué à une demande sortante (voir ci-dessous pour plus de détails).
          </td>
        </tr>

        <tr>
          <td class="children-nowrap">
            `AcceptDistributedTraceHeaders`
          </td>

          <td>
            Accepte les données entrantes de tracing distribué provenant d&apos;un autre service (voir ci-dessous pour plus de détails).
          </td>
        </tr>

        <tr>
          <td class="children-nowrap">
            `AddCustomAttribute`
          </td>

          <td>
            Ajoutez des informations contextuelles de votre application à la transaction en cours sous forme d&apos;attribut (voir ci-dessous pour plus de détails).
          </td>
        </tr>

        <tr>
          <td class="children-nowrap">
            `CurrentSpan`
          </td>

          <td>
            Fournit l&apos;accès à l&apos;[exécution](/docs/apm/agents/net-agent/net-agent-api/net-agent-api/#ISpan) en cours, qui donne accès aux méthodes spécifiques à l&apos;exécution dans l&apos;API New Relic (voir ci-dessous pour plus de détails).
          </td>
        </tr>

        <tr>
          <td class="children-nowrap">
            `SetUserId`
          </td>

          <td>
            Associe un identifiant utilisateur à la transaction en cours (voir ci-dessous pour plus de détails).
          </td>
        </tr>

        <tr>
          <td class="children-nowrap">
            `RecordDatastoreSegment`
          </td>

          <td>
            Permet d&apos;instrumenter un datastore non pris en charge (voir ci-dessous pour plus de détails).
          </td>
        </tr>
      </tbody>
    </table>

    <CollapserGroup>
      <Collapser id="InsertDistributedTraceHeaders" title="Insérer des en-têtes de trace distribuée">
        ### Syntaxe

        ```cs
        void InsertDistributedTraceHeaders(carrier, setter)
        ```

        Ajoute des données du[ tracing distribué](/docs/apm/agents/net-agent/configuration/distributed-tracing-net-agent/#manual-instrumentation) à un message sortant vers un autre service instrumenté.

        ### Description

        `ITransaction.InsertDistributedTraceHeaders` modifie l&apos;objet porteur qui est transmis en ajoutant des en-têtes W3C Trace Context et des en-têtes de traces distribuées New Relic . Les en-têtes New Relic peuvent être désactivés avec `<distributedTracing excludeNewrelicHeader="true" />` dans la configuration.

        ### Paramètres

        <table>
          <thead>
            <tr>
              <th>
                Nom
              </th>

              <th>
                Description
              </th>
            </tr>
          </thead>

          <tbody>
            <tr>
              <td>
                `carrier`

                *&lt;T&gt;*
              </td>

              <td>
                Requis. Un magasin de paires de valeurs clés où sont insérées les données de tracing distribué. Cela doit exister dans tout objet de message transmis du service appelant au service appelé, via le transport utilisé. Par exemple, pour les messages Azure Service Bus, le type `ServiceBusMessage` possède une [propriété`ApplicationProperties` ](https://learn.microsoft.com/en-us/dotnet/api/azure.messaging.servicebus.servicebusmessage.applicationproperties?view=azure-dotnet#azure-messaging-servicebus-servicebusmessage-applicationproperties)qui est un `IDictionary<string,object>`. Lorsque vous souhaitez implémenter un tracing personnalisé distribué pour un canal de communication non instrumenté (par exemple un fichier d&apos;attente de messages), vous devez déterminer quelle option de stockage de paires valeur-clé (opérateur) existe pour ce canal.
              </td>
            </tr>

            <tr>
              <td>
                `setter`

                *Action&lt;T, string, string&gt;*
              </td>

              <td>
                Requis. Une action définie par l&apos;utilisateur pour insérer des données de tracing dans le support. Voir l&apos;exemple ci-dessous.
              </td>
            </tr>
          </tbody>
        </table>

        ### Considérations d&apos;utilisation

        * [Le tracing distribué doit être activé](/docs/agents/net-agent/configuration/net-agent-configuration#distributed_tracing).
        * Cette API ne peut être utilisée que dans le contexte d&apos;une [transaction](/docs/apm/agents/net-agent/custom-instrumentation/introduction-net-custom-instrumentation/#new-existing) existante.

        ### Exemple

        Vous pouvez trouver un exemple complet que vous pouvez créer et exécuter pour démontrer l&apos;utilisation de cette API [ici](https://github.com/newrelic/newrelic-dotnet-examples/tree/main/custom-distributed-tracing).

        ```cs
        // Get a reference to the agent, which lets you get a reference to the current transaction
        IAgent agent = NewRelic.Api.Agent.NewRelic.GetAgent();
        ITransaction currentTransaction = agent.CurrentTransaction;

        // In this example, we are using Azure Service Bus.  The `ServiceBusMessage` type has an `ApplicationProperties` property for custom key/value pairs.

        // Create the outbound message
        ServiceBusMessage message = new ("Hello, world!");

        // Define the setter Action.  The `ApplicationProperties` dictionary is the trace data carrier.
        var setter = new Action<ServiceBusMessage, string, string>((carrier, key, value) => { carrier.ApplicationProperties?.Set(key, value); });

        // Call the API to add the distributed tracing data to the message
        currentTransaction.InsertDistributedTraceHeaders(message, setter);

        // Send the message
        ```
      </Collapser>

      <Collapser id="AcceptDistributedTraceHeaders" title="Accepter les en-têtes de trace distribués">
        ### Syntaxe

        ```cs
        void AcceptDistributedTraceHeaders(carrier, getter, transportType)
        ```

        Accepte les données de[tracing distribué](/docs/apm/agents/net-agent/configuration/distributed-tracing-net-agent/#manual-instrumentation) à partir d&apos;un message entrant provenant d&apos;un autre service instrumenté.

        ### Description

        `ITransaction.AcceptDistributedTraceHeaders` est utilisé pour lier les étendues d&apos;une trace en acceptant une charge générée par [`InsertDistributedTraceHeaders`](/docs/apm/agents/net-agent/net-agent-api/net-agent-api/#InsertDistributedTraceHeaders) ou générée par un autre traceur compatible W3C Trace Context . Cette méthode accepte la valeur clé stockée à partir d&apos;une requête entrante, recherche les W3C Trace Context données et, si elle ne les trouve pas, revient aux New Relic tracedonnées distribuées .

        ### Paramètres

        <table>
          <thead>
            <tr>
              <th>
                Nom
              </th>

              <th>
                Description
              </th>
            </tr>
          </thead>

          <tbody>
            <tr>
              <td>
                `carrier`

                *&lt;T&gt;*
              </td>

              <td>
                Requis. Un magasin de paires valeur-clé dans lequel lesdonnées de tracing distribué a été inséré par le service appelant. Cela doit exister dans tout objet de message transmis du service appelant au service appelé, via le transport utilisé. Par exemple, pour les messages Azure Service Bus, le type `ServiceBusReceivedMessage` possède une [propriété`ApplicationProperties` ](https://learn.microsoft.com/en-us/dotnet/api/azure.messaging.servicebus.servicebusmessage.applicationproperties?view=azure-dotnet#azure-messaging-servicebus-servicebusmessage-applicationproperties)qui est un `IDictionary<string,object>`. Lorsque vous souhaitez implémenter un tracing personnalisé distribué pour un canal de communication non instrumenté (par exemple un fichier d&apos;attente de messages), vous devez déterminer quelle option de stockage de paires valeur-clé (opérateur) existe pour ce canal.
              </td>
            </tr>

            <tr>
              <td>
                `getter`

                *Func&lt;T, string, IEnumerable&lt;string&gt;&gt;*
              </td>

              <td>
                Requis. Une fonction définie par l&apos;utilisateur pour extraire les données de tracing du transporteur. Voir l&apos;exemple ci-dessous.
              </td>
            </tr>

            <tr>
              <td>
                `transportType`

                *Énumération TransportType*
              </td>

              <td>
                Requis. Décrit le transport de la charge utile entrante (par exemple `TransportType.Queue`). La liste complète est définie [ici](https://github.com/newrelic/newrelic-dotnet-agent/blob/main/src/Agent/NewRelic.Api.Agent/Constants.cs).
              </td>
            </tr>
          </tbody>
        </table>

        ### Considérations d&apos;utilisation

        * [Le tracing distribué doit être activé](/docs/agents/net-agent/configuration/net-agent-configuration#distributed_tracing).
        * Cette API ne peut être utilisée que dans le contexte d&apos;une [transaction](/docs/apm/agents/net-agent/custom-instrumentation/introduction-net-custom-instrumentation/#new-existing) existante.
        * `AcceptDistributedTraceHeaders` sera ignoré si `InsertDistributedTraceHeaders` ou `AcceptDistributedTraceHeaders` a déjà été appelé pour cette transaction.

        ### Exemple

        Vous pouvez trouver un exemple complet que vous pouvez créer et exécuter pour démontrer l&apos;utilisation de cette API [ici](https://github.com/newrelic/newrelic-dotnet-examples/tree/main/custom-distributed-tracing)

        ```cs
        // Get a reference to the agent, which lets you get a reference to the current transaction
        IAgent agent = NewRelic.Api.Agent.NewRelic.GetAgent();
        ITransaction currentTransaction = agent.CurrentTransaction;

        // In this example, we are using Azure Service Bus.  The `ServiceBusMessage` type has an `ApplicationProperties` property for custom key/value pairs.

        // Recieve an incoming message.  Assume that `receiver` is a previously-configured `ServiceBusReceiver`
        ServiceBusReceivedMessage message = await receiver.ReceiveMessageAsync();

        // Define the getter Func.  The `ApplicationProperties` dictionary is the trace data carrier.
        IEnumerable<string> Getter(IDictionary<string, object> carrier, string key)
        {
          var data = new List<string>();
          if (carrier == null)
          {
            return data;
          }
          object value;
          if (applicationProperties.TryGetValue(key, out value))
          {
            if (value != null)
            {
              data.Add(value.ToString());
            }
          }
          return data;
        }

        // Call the API to accept the distributed tracing data from the message
        currentTransaction.AcceptDistributedTraceHeaders(message.ApplicationProperties, Getter, TransportType.Queue);

        ```
      </Collapser>

      <Collapser id="ITransaction.AddCustomAttribute" title="Ajouter un attribut personnalisé">
        ### Syntaxe

        ```cs
        ITransaction AddCustomAttribute(string key, object value)
        ```

        Ajoute des informations contextuelles sur votre application à la transaction en cours sous la forme d&apos;[attribut](/docs/using-new-relic/welcome-new-relic/get-started/glossary#attribute).

        Cette méthode nécessite la agent version .NET et la version de .NET API agent [8.24.244.0](/docs/release-notes/agent-release-notes/net-release-notes/net-agent-8242440) ou supérieure. Il a remplacé le `AddCustomParameter` obsolète.

        ### Paramètres

        <table>
          <thead>
            <tr>
              <th>
                paramètres
              </th>

              <th>
                Description
              </th>
            </tr>
          </thead>

          <tbody>
            <tr>
              <td>
                `key`

                *chaîne*
              </td>

              <td>
                Identifie les informations rapportées. Également connu sous le nom.

                * Les clés vides ne sont pas prises en charge.
                * Les clés sont limitées à 255 octets. les attributs avec des clés supérieures à 255 octets seront ignorés.
              </td>
            </tr>

            <tr>
              <td>
                `value`

                *objet*
              </td>

              <td>
                La valeur signalée.

                **Remarque**: les valeurs `null` ne seront pas enregistrées.
              </td>
            </tr>
          </tbody>
        </table>

        <table>
          <thead>
            <tr>
              <th>
                Type .NET
              </th>

              <th>
                Comment la valeur sera représentée
              </th>
            </tr>
          </thead>

          <tbody>
            <tr>
              <td>
                `byte`, `Int16`, `Int32`, `Int64`

                `sbyte`, `UInt16`, `UInt32`, `UInt64`
              </td>

              <td>
                En tant que valeur intégrale.
              </td>
            </tr>

            <tr>
              <td>
                `float`, `double`, `decimal`
              </td>

              <td>
                Un nombre décimal.
              </td>
            </tr>

            <tr>
              <td>
                `string`
              </td>

              <td>
                Une chaîne tronquée après 255 octets.

                Les chaînes vides sont prises en charge.
              </td>
            </tr>

            <tr>
              <td>
                `bool`
              </td>

              <td>
                Vrai ou faux.
              </td>
            </tr>

            <tr>
              <td>
                `DateTime`
              </td>

              <td>
                Une représentation de chaîne suivant le format ISO-8601, incluant des informations sur le fuseau horaire :

                Exemple: `2020-02-13T11:31:19.5767650-08:00`
              </td>
            </tr>

            <tr>
              <td>
                `TimeSpan`
              </td>

              <td>
                Un nombre décimal représentant le nombre de secondes.
              </td>
            </tr>

            <tr>
              <td>
                tout le reste
              </td>

              <td>
                La méthode `ToString()` sera appliquée. Les types personnalisés doivent avoir une implémentation de `Object.ToString()` sinon ils généreront une exception.
              </td>
            </tr>
          </tbody>
        </table>

        ### Retours

        Une référence à la transaction en cours.

        ### Considérations d&apos;utilisation

        Pour plus de détails sur les types de données pris en charge, voir [attribut personnalisé](/docs/agents/net-agent/attributes/custom-attributes).

        ### Exemple

        ```cs
        IAgent agent = NewRelic.Api.Agent.NewRelic.GetAgent();
        ITransaction transaction = agent.CurrentTransaction;
        transaction.AddCustomAttribute("customerName","Bob Smith")
            .AddCustomAttribute("currentAge",31)
            .AddCustomAttribute("birthday", new DateTime(2000, 02, 14))
            .AddCustomAttribute("waitTime", TimeSpan.FromMilliseconds(93842));
        ```
      </Collapser>

      <Collapser id="CurrentSpan" title="Étendue actuelle">
        Fournit l&apos;accès à [l&apos;](/docs/apm/agents/net-agent/net-agent-api/net-agent-api/#ISpan) exécution en cours, rendant les méthodes spécifiques à l&apos;exécution disponibles dans l&apos;API New Relic.

        ### Exemple

        ```cs
        IAgent agent = NewRelic.Api.Agent.NewRelic.GetAgent(); 
        ITransaction transaction = agent.CurrentTransaction; 
        ISpan currentSpan = transaction.CurrentSpan;
        ```
      </Collapser>

      <Collapser id="SetUserId" title="Définir l'ID utilisateur">
        ### Syntaxe

        ```cs
        ITransaction SetUserId(string userId)
        ```

        Associe un identifiant utilisateur à la transaction en cours.

        Cette méthode nécessite agent .NET et API d&apos;agent .NET [version 10.9.0](/docs/release-notes/agent-release-notes/net-release-notes/net-agent-1090) ou supérieure.

        ### Paramètres

        <table>
          <thead>
            <tr>
              <th>
                paramètres
              </th>

              <th>
                Description
              </th>
            </tr>
          </thead>

          <tbody>
            <tr>
              <td>
                `userId`

                *chaîne*
              </td>

              <td>
                L&apos;identifiant utilisateur à associer à cette transaction.

                * `null`, les valeurs vides et les espaces seront ignorées.
              </td>
            </tr>
          </tbody>
        </table>

        ### Exemple

        ```cs
        IAgent agent = NewRelic.Api.Agent.NewRelic.GetAgent(); 
        ITransaction transaction = agent.CurrentTransaction; 
        transaction.SetUserId("BobSmith123");
        ```
      </Collapser>

      <Collapser id="RecordDatastoreSegment" title="Segment de datastore d'enregistrement">
        ### Syntaxe

        ```cs
        SegmentWrapper? RecordDatastoreSegment(string vendor, string model, string operation, string? commandText = null, string? host = null, string? portPathOrID = null, string? databaseName = null)
        ```

        Permet à un datastore non pris en charge d&apos;être instrumenté de la même manière que l&apos;agent .NET instrumente automatiquement ses magasins de données pris en charge.

        Cette méthode nécessite agent .NET et API d&apos;agent .NET [version 10.22.0](/docs/release-notes/agent-release-notes/net-release-notes/net-agent-10-22-0/) ou supérieure.

        ### Paramètres

        <table>
          <thead>
            <tr>
              <th>
                paramètres
              </th>

              <th>
                Description
              </th>
            </tr>
          </thead>

          <tbody>
            <tr>
              <td>
                `vendor`

                *chaîne*
              </td>

              <td>
                Nom du fournisseur du datastore, tel que MySQL, MSSQL ou MongoDB.
              </td>
            </tr>

            <tr>
              <td>
                `model`

                *chaîne*
              </td>

              <td>
                Nom de table ou identifiant similaire dans une datastore non relationnelle.
              </td>
            </tr>

            <tr>
              <td>
                `operation`

                *chaîne*
              </td>

              <td>
                Opération en cours d&apos;exécution, telle que « SELECT » ou « UPDATE » pour la base de données SQL.
              </td>
            </tr>

            <tr>
              <td>
                `commandText`

                *chaîne?*
              </td>

              <td>
                Facultatif. requête, ou descripteur similaire dans une datastore non relationnelle.
              </td>
            </tr>

            <tr>
              <td>
                `host`

                *chaîne?*
              </td>

              <td>
                Facultatif. Serveur hébergeant le datastore.
              </td>
            </tr>

            <tr>
              <td>
                `portPathOrID`

                *chaîne?*
              </td>

              <td>
                Facultatif. Port, chemin ou autre identifiant, associé à l&apos;hôte pour faciliter l&apos;identification du datastore.
              </td>
            </tr>

            <tr>
              <td>
                `databaseName`

                *chaîne?*
              </td>

              <td>
                Facultatif. nom de la banque de données ou identifiant similaire.
              </td>
            </tr>
          </tbody>
        </table>

        ### Retours

        Wrapper de segment IDisposable qui crée et termine le segment automatiquement.

        ### Exemple

        ```cs
        var transaction = NewRelic.Api.Agent.NewRelic.GetAgent().CurrentTransaction;
        using (transaction.RecordDatastoreSegment(vendor, model, operation,
             commandText, host, portPathOrID, databaseName))
        {
             DatastoreWorker();
        }
        ```
      </Collapser>
    </CollapserGroup>
  </Collapser>

  <Collapser id="ISpan" title="Ispan">
    ### Syntaxe

    ```cs
    Public interface ISpan
    ```

    Fournit l&apos;accès aux méthodes spécifiques à l&apos;étendue dans l&apos;API New Relic.

    ### Description

    Fournit l&apos;accès aux méthodes spécifiques à span dans New Relic API agentl&apos;.NET de . Pour obtenir une référence à `ISpan`, utilisez :

    * La propriété `CurrentSpan` sur [`IAgent`](/docs/apm/agents/net-agent/net-agent-api/net-agent-api/#IAgent) (recommandé).
    * La propriété `CurrentSpan` sur [`ITransaction`](/docs/apm/agents/net-agent/net-agent-api/net-agent-api/#ITransaction).

    Cette section contient des descriptions et des paramètres des méthodes `ISpan` :

    <table>
      <thead>
        <tr>
          <th>
            Nom
          </th>

          <th>
            Description
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td class="children-nowrap">
            `AddCustomAttribute`
          </td>

          <td>
            Ajoutez des informations contextuelles de votre application à la plage actuelle sous forme d&apos;attribut (voir ci-dessous pour plus de détails).
          </td>
        </tr>

        <tr>
          <td>
            `SetName`
          </td>

          <td>
            Modifie le nom de la plage/du segment/des métriques actuels qui seront signalés à New Relic (voir ci-dessous pour plus de détails).
          </td>
        </tr>
      </tbody>
    </table>

    <CollapserGroup>
      <Collapser id="ISpan.AddCustomAttribute" title="Ajouter un attribut personnalisé">
        Ajoute des informations contextuelles sur votre application à la plage actuelle sous la forme d&apos;[attribut](/docs/using-new-relic/welcome-new-relic/get-started/glossary#attribute).

        Cette méthode nécessite la agent version .NET et la API agent [version de .NET](/docs/release-notes/agent-release-notes/net-release-notes/net-agent-8242440) 8.25 ou supérieure.

        ### Syntaxe

        ```cs
        ISpan AddCustomAttribute(string key, object value)
        ```

        ### Paramètres

        <table>
          <thead>
            <tr>
              <th>
                paramètres
              </th>

              <th>
                Description
              </th>
            </tr>
          </thead>

          <tbody>
            <tr>
              <td>
                `key`

                *chaîne*
              </td>

              <td>
                Identifie les informations rapportées. Également connu sous le nom.

                * Les clés vides ne sont pas prises en charge.
                * Les clés sont limitées à 255 octets. les attributs avec des clés supérieures à 255 octets seront ignorés.
              </td>
            </tr>

            <tr>
              <td>
                `value`

                *objet*
              </td>

              <td>
                La valeur signalée.

                **Remarque**: les valeurs `null` ne seront pas enregistrées.

                <table>
                  <thead>
                    <tr>
                      <th>
                        Type .NET
                      </th>

                      <th>
                        Comment la valeur sera représentée
                      </th>
                    </tr>
                  </thead>

                  <tbody>
                    <tr>
                      <td>
                        `byte`, `Int16`, `Int32`, `Int64`

                        `sbyte`, `UInt16`, `UInt32`, `UInt64`
                      </td>

                      <td>
                        En tant que valeur intégrale.
                      </td>
                    </tr>

                    <tr>
                      <td>
                        `float`, `double`, `decimal`
                      </td>

                      <td>
                        Un nombre décimal.
                      </td>
                    </tr>

                    <tr>
                      <td>
                        `string`
                      </td>

                      <td>
                        Une chaîne tronquée après 255 octets.

                        Les chaînes vides sont prises en charge.
                      </td>
                    </tr>

                    <tr>
                      <td>
                        `bool`
                      </td>

                      <td>
                        Vrai ou faux.
                      </td>
                    </tr>

                    <tr>
                      <td>
                        `DateTime`
                      </td>

                      <td>
                        Une représentation de chaîne suivant le format ISO-8601, incluant des informations sur le fuseau horaire :

                        Exemple: `2020-02-13T11:31:19.5767650-08:00`
                      </td>
                    </tr>

                    <tr>
                      <td>
                        `TimeSpan`
                      </td>

                      <td>
                        Un nombre décimal représentant le nombre de secondes.
                      </td>
                    </tr>

                    <tr>
                      <td>
                        tout le reste
                      </td>

                      <td>
                        La méthode `ToString()` sera appliquée. Les types personnalisés doivent avoir une implémentation de `Object.ToString()` sinon ils généreront une exception.
                      </td>
                    </tr>
                  </tbody>
                </table>
              </td>
            </tr>
          </tbody>
        </table>

        ### Retours

        Une référence à la durée actuelle.

        ### Considérations d&apos;utilisation

        Pour plus de détails sur les types de données pris en charge, consultez le [guide des attributs personnalisés](/docs/agents/net-agent/attributes/custom-attributes).

        ### Exemples

        ```cs
        IAgent agent = NewRelic.Api.Agent.NewRelic.GetAgent(); 
        ISpan currentSpan = agent.CurrentSpan; 

        currentSpan
            .AddCustomAttribute("customerName","Bob Smith")
            .AddCustomAttribute("currentAge",31)
            .AddCustomAttribute("birthday", new DateTime(2000, 02, 14))
            .AddCustomAttribute("waitTime", TimeSpan.FromMilliseconds(93842));
        ```
      </Collapser>

      <Collapser id="SetName" title="Définir le nom">
        Modifie le nom du segment/de la plage actuelle qui sera signalé à New Relic. Pour les segments/étendues résultant d&apos;une instrumentation personnalisée, le nom de la métrique signalé à New Relic sera également modifié.

        Cette méthode nécessite la agent version .NET et la API agent version de l&apos;.NET 10.1.0 ou supérieur.

        ### Syntaxe

        ```cs
        ISpan SetName(string name)
        ```

        ### Paramètres

        <table>
          <thead>
            <tr>
              <th>
                paramètres
              </th>

              <th>
                Description
              </th>
            </tr>
          </thead>

          <tbody>
            <tr>
              <td>
                `name`

                *chaîne*
              </td>

              <td>
                Le nouveau nom du span/segment.
              </td>
            </tr>
          </tbody>
        </table>

        ### Retours

        Une référence à la durée actuelle.

        ### Exemples

        ```cs
        [Trace]
        public void MyTracedMethod()
        {
            IAgent agent = NewRelic.Api.Agent.NewRelic.GetAgent(); 
            ISpan currentSpan = agent.CurrentSpan; 

            currentSpan.SetName("MyCustomName");
        }
        ```
      </Collapser>
    </CollapserGroup>
  </Collapser>

  <Collapser id="IgnoreApdex" title="Ignorer Apdex">
    ### Syntaxe

    ```cs
    NewRelic.Api.Agent.NewRelic.IgnoreApdex()
    ```

    Ignorer la transaction en cours lors du calcul de l&apos;Apdex.

    ### Exigences

    Compatible avec toutes les versions d&apos;agent.

    ### Description

    Ignore la transaction en cours lors du calcul de votre [score Apdex](/docs/apm/new-relic-apm/apdex/apdex-measuring-user-satisfaction). Cela est utile lorsque vous avez des transactions très courtes ou très longues (telles que des téléchargements de fichiers) qui peuvent fausser votre score Apdex.

    ### Exemples

    ```cs
    NewRelic.Api.Agent.NewRelic.IgnoreApdex();
    ```
  </Collapser>

  <Collapser id="IgnoreTransaction" title="Ignorer la transaction">
    ### Syntaxe

    ```cs
    NewRelic.Api.Agent.NewRelic.IgnoreTransaction()
    ```

    N&apos;instrumentez pas la transaction en cours.

    ### Exigences

    * Compatible avec toutes les versions d&apos;agent.
    * Doit être appelé à l&apos;intérieur d&apos;une [transaction](/docs/accounts-partnerships/education/getting-started-new-relic/glossary#transaction).

    ### Description

    Ignore la transaction en cours.

    <Callout variant="tip">
      Vous pouvez également ignorer les transactions [via un fichier XML instrumentation personnalisée](/docs/agents/net-agent/custom-instrumentation/add-detail-transactions-xml-net#blocking-instrumentation).
    </Callout>

    ### Exemples

    ```cs
    NewRelic.Api.Agent.NewRelic.IgnoreTransaction();
    ```
  </Collapser>

  <Collapser id="IncrementCounter" title="Compteur d'incréments">
    ### Syntaxe

    ```cs
    NewRelic.Api.Agent.NewRelic.IncrementCounter(string $metric_name)
    ```

    Incrémentez le compteur d&apos;une métrique personnalisée de 1.

    ### Exigences

    * Compatible avec toutes les versions d&apos;agent.
    * Compatible avec tous les types d&apos;applications.

    ### Description

    Incrémentez le compteur d&apos;une [métrique personnalisée](/docs/agents/manage-apm-agents/agent-metrics/custom-metrics) de 1. Pour afficher ces métriques personnalisées, utilisez le [générateur de requêtes](/docs/query-your-data/explore-query-data/query-builder/use-advanced-nrql-mode-specify-data) pour rechercher des métriques et créer des graphiques personnalisables. Voir aussi [`RecordMetric()`](/docs/apm/agents/net-agent/net-agent-api/net-agent-api/#RecordMetric) et [`RecordResponseTimeMetric()`](/docs/apm/agents/net-agent/net-agent-api/net-agent-api/#RecordResponseTimeMetric).

    <Callout variant="important">
      Lors de la création d&apos;une métrique personnalisée, commencez le nom par `Custom/` (par exemple, `Custom/MyMetric`). Pour en savoir plus sur la dénomination, voir [Collecter des métriques personnalisées](/docs/apm/agents/manage-apm-agents/agent-data/collect-custom-metrics/).
    </Callout>

    ### Paramètres

    <table>
      <thead>
        <tr>
          <th width="25%">
            paramètres
          </th>

          <th>
            Description
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `$metric_name`

            *chaîne*
          </td>

          <td>
            Requis. Le nom de la métrique à incrémenter.
          </td>
        </tr>
      </tbody>
    </table>

    ### Exemples

    ```cs
    NewRelic.Api.Agent.NewRelic.IncrementCounter("Custom/ExampleMetric");
    ```
  </Collapser>

  <Collapser id="NoticeError" title="AvisErreur">
    ### Surcharges [#overloads]

    Notez une erreur et signalez-la à New Relic, avec l&apos;attribut personnalisé facultatif.

    ```cs
    NewRelic.Api.Agent.NewRelic.NoticeError(Exception $exception);
    NewRelic.Api.Agent.NewRelic.NoticeError(Exception $exception, IDictionary<TKey, TValue> $attributes);
    NewRelic.Api.Agent.NewRelic.NoticeError(string $error_message, IDictionary<TKey, TValue> $attributes);
    NewRelic.Api.Agent.NewRelic.NoticeError(string $error_message, IDictionary<TKey, TValue> $attributes, bool $is_expected);
    ```

    ### Exigences

    Cet appel d&apos;API est compatible avec :

    * Toutes les versions agent
    * Tous les types d&apos;applications

    ### Description

    Notez une erreur et signalez-la à New Relic avec l&apos;attribut personnalisé facultatif. Pour chaque transaction, l&apos;agent conserve uniquement l&apos;exception et l&apos;attribut du premier appel à `NoticeError()`. Vous pouvez transmettre une exception réelle ou transmettre une chaîne pour capturer un message d&apos;erreur arbitraire.

    Si cette méthode est invoquée dans une [transaction](/docs/glossary/glossary/#transaction), l&apos;agent signale l&apos;exception dans la transaction parent. S&apos;il est invoqué en dehors d&apos;une transaction, l&apos;agent crée une [d&apos;erreur trace](/docs/errors-inbox/apm-tab//#trace-details) et catégorise l&apos;erreur dans l&apos;UI de New Relic comme un appel d&apos;API `NewRelic.Api.Agent.NoticeError`. Si invoqué en dehors d&apos;une transaction, l&apos;appel `NoticeError()` ne contribuera pas au taux d&apos;erreur d&apos;une application.

    L&apos;agent ajoute l&apos;attribut uniquement à l&apos;erreur de trace ; il ne l&apos;envoie pas à New Relic. Pour plus d&apos;informations, voir [`AddCustomAttribute()`](/docs/apm/agents/net-agent/net-agent-api/net-agent-api/#AddCustomAttribute).

    Lors du passage d&apos;une exception à `NoticeError()`, déterminez l&apos;exception la plus interne à l&apos;aide de l&apos;API `Exception.GetBaseException()` de Microsoft. Cette exception la plus interne représente la cause première de l’erreur et est ce qui est affiché dans APM. L&apos;intégralité de trace des appels de l&apos;exception de niveau supérieur est signalée, car elle fournit un contexte pertinent et des détails d&apos;exécution. Cette approche offre les informations d’erreur les plus spécifiques de l’exception de base tout en préservant le contexte complet de la manière dont l’erreur s’est propagée dans l’application.

    Les erreurs signalées avec cette API sont toujours envoyées à New Relic lorsqu&apos;elles sont signalées dans une transaction qui génère un code d&apos;état HTTP, tel que `404`, qui est configuré pour être ignoré par la configuration de l&apos;agent. Pour plus d&apos;informations, consultez notre documentation sur [la gestion des erreurs dans APM](/docs/apm/agents/manage-apm-agents/agent-data/manage-errors-apm-collect-ignore-or-mark-expected).

    Consultez les sections ci-dessous pour voir des exemples d’utilisation de cet appel.

    <CollapserGroup>
      <Collapser id="" title="AvisErreur(Exception)">
        ```cs
        NewRelic.Api.Agent.NewRelic.NoticeError(Exception $exception)
        ```

        <table>
          <thead>
            <tr>
              <th width="25%">
                paramètres
              </th>

              <th>
                Description
              </th>
            </tr>
          </thead>

          <tbody>
            <tr>
              <td>
                `$exception`

                *Exception*
              </td>

              <td>
                Requis. Le `Exception` que vous souhaitez instrument. Seuls les 10 000 premiers caractères de la trace d&apos;appels sont conservés.
              </td>
            </tr>
          </tbody>
        </table>
      </Collapser>

      <Collapser id="" title="NoticeError(Exception, IDictionary)">
        ```cs
        NewRelic.Api.Agent.NewRelic.NoticeError(Exception $exception, IDictionary<TKey, TValue> $attributes)
        ```

        <table>
          <thead>
            <tr>
              <th width="25%">
                paramètres
              </th>

              <th>
                Description
              </th>
            </tr>
          </thead>

          <tbody>
            <tr>
              <td>
                `$exception`

                *Exception*
              </td>

              <td>
                Requis. Le `Exception` que vous souhaitez instrument. Seuls les 10 000 premiers caractères de la trace d&apos;appels sont conservés.
              </td>
            </tr>

            <tr>
              <td>
                `$attributes`

                *IDictionary&lt;TKey, TValue&gt;*
              </td>

              <td>
                Spécifiez les paires valeur clé d&apos;attribut pour annoter le message d&apos;erreur. Le `TKey` doit être une chaîne, le `TValue` peut être une chaîne ou un objet.
              </td>
            </tr>
          </tbody>
        </table>
      </Collapser>

      <Collapser id="string-idictionary-overload" title="NoticeError(String, IDictionary)">
        ```cs
        NewRelic.Api.Agent.NewRelic.NoticeError(string $error_message, IDictionary<TKey, TValue> $attributes)
        ```

        <table>
          <thead>
            <tr>
              <th width="25%">
                paramètres
              </th>

              <th>
                Description
              </th>
            </tr>
          </thead>

          <tbody>
            <tr>
              <td>
                `$error_message`

                *chaîne*
              </td>

              <td>
                Requis. Spécifiez une chaîne à signaler à New Relic comme s&apos;il s&apos;agissait d&apos;une exception. Cette méthode crée à la fois [un événement d&apos;erreur et une trace d&apos;erreur](/docs/errors-inbox/apm-tab/#events). Seuls les 1023 premiers caractères sont conservés dans l&apos;événement d&apos;erreur, tandis que la trace d&apos;erreur conserve le message complet.
              </td>
            </tr>

            <tr>
              <td>
                `$attributes`

                *IDictionary&lt;TKey, TValue&gt;*
              </td>

              <td>
                Obligatoire (peut être nul). Spécifiez les paires valeur clé d&apos;attribut pour annoter le message d&apos;erreur. Le `TKey` doit être une chaîne, le `TValue` peut être une chaîne ou un objet, pour n&apos;envoyer aucun attribut, passez `null`.
              </td>
            </tr>
          </tbody>
        </table>
      </Collapser>

      <Collapser id="" title="NoticeError(String, IDictionary, bool)">
        ```cs
        NewRelic.Api.Agent.NewRelic.NoticeError(string $error_message, IDictionary<TKey, TValue> $attributes, bool $is_expected)
        ```

        <table>
          <thead>
            <tr>
              <th width="25%">
                paramètres
              </th>

              <th>
                Description
              </th>
            </tr>
          </thead>

          <tbody>
            <tr>
              <td>
                `$error_message`

                *chaîne*
              </td>

              <td>
                Requis. Spécifiez une chaîne à signaler à New Relic comme s&apos;il s&apos;agissait d&apos;une exception. Cette méthode crée à la fois [un événement d&apos;erreur et une trace d&apos;erreur](/docs/tutorial-error-tracking/respond-outages/). Seuls les 1023 premiers caractères sont conservés dans l&apos;événement d&apos;erreur, tandis que la trace d&apos;erreur conserve le message complet.
              </td>
            </tr>

            <tr>
              <td>
                `$attributes`

                *IDictionary&lt;TKey, TValue&gt;*
              </td>

              <td>
                Obligatoire (peut être nul). Spécifiez les paires valeur clé d&apos;attribut pour annoter le message d&apos;erreur. Le `TKey` doit être une chaîne, le `TValue` peut être une chaîne ou un objet, pour n&apos;envoyer aucun attribut, passez `null`.
              </td>
            </tr>

            <tr>
              <td>
                `$is_expected`

                *booléen*
              </td>

              <td>
                Marquez l&apos;erreur comme prévue afin qu&apos;elle n&apos;affecte pas le score Apdex et le taux d&apos;erreur.
              </td>
            </tr>
          </tbody>
        </table>
      </Collapser>
    </CollapserGroup>

    ### Exemples

    #### Passer une exception sans attribut personnalisé

    ```cs
    try
    {
        string ImNotABool = "43";
        bool.Parse(ImNotABool);
    }
    catch (Exception ex)
    {
        NewRelic.Api.Agent.NewRelic.NoticeError(ex);
    }
    ```

    #### Passer une exception avec l&apos;attribut personnalisé

    ```cs
    try
    {
        string ImNotABool = "43";
        bool.Parse(ImNotABool);
    }
    catch (Exception ex)
    {
        var errorAttributes = new Dictionary<string, string>() {{"foo", "bar"},{"baz", "luhr"}};
        NewRelic.Api.Agent.NewRelic.NoticeError(ex, errorAttributes);
    }
    ```

    #### Passer une chaîne de message d&apos;erreur avec l&apos;attribut personnalisé

    ```cs
    try
    {
        string ImNotABool = "43";
        bool.Parse(ImNotABool);
    }
    catch (Exception ex)
    {
        var errorAttributes = new Dictionary<string, string>{{"foo", "bar"},{"baz", "luhr"}};
        NewRelic.Api.Agent.NewRelic.NoticeError("String error message", errorAttributes);
    }
    ```

    #### Passer une chaîne de message d&apos;erreur sans attribut personnalisé

    ```cs
    try
    {
        string ImNotABool = "43";
        bool.Parse(ImNotABool);
    }
    catch (Exception ex)
    {
        NewRelic.Api.Agent.NewRelic.NoticeError("String error message", null);
    }
    ```

    #### Transmettez une chaîne de message d’erreur et marquez-la comme prévu

    ```cs
    try
    {
        string ImNotABool = "43";
        bool.Parse(ImNotABool);
    }
    catch (Exception ex)
    {
        NewRelic.Api.Agent.NewRelic.NoticeError("String error message", null, true);
    }
    ```
  </Collapser>

  <Collapser id="RecordCustomEvent" title="Enregistrer un événement personnalisé">
    ### Syntaxe

    ```cs
    NewRelic.Api.Agent.NewRelic.RecordCustomEvent(string eventType, IEnumerable<string, object> attributeValues)
    ```

    Enregistre un événement personnalisé avec le prénom et l&apos;attribut.

    ### Exigences

    * Compatible avec toutes les versions d&apos;agent.
    * Compatible avec tous les types d&apos;applications.

    ### Description

    Enregistre un [événement personnalisé](/docs/data-analysis/metrics/analyze-your-metrics/data-collection-metric-timeslice-event-data#event-data) avec le prénom et l&apos;attribut, que vous pouvez requêter dans le [générateur de requêtes](/docs/query-your-data/explore-query-data/query-builder/introduction-query-builder). Pour vérifier si un événement est enregistré correctement, recherchez les données dans [le dashboard](/docs/query-your-data/explore-query-data/dashboards/introduction-new-relic-one-dashboards).

    <Callout variant="important">
      * L&apos;envoi d&apos;un grand nombre d&apos;événements peut augmenter la charge mémoire de l&apos;agent.
      * De plus, les messages d&apos;une taille supérieure à 1 Mo (10^6 octets) ne seront pas enregistrés, quel que soit le nombre maximum d&apos;événements.
      * événement personnalisé est limité à 64 attributs.
      * Pour plus d&apos;informations sur la façon dont les valeurs d&apos;attribut personnalisé sont traitées, consultez le guide [d&apos;attribut personnalisé](/docs/agents/net-agent/attributes/custom-attributes).
    </Callout>

    ### Paramètres

    <table>
      <thead>
        <tr>
          <th width="25%">
            paramètres
          </th>

          <th>
            Description
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `eventType`

            *chaîne*
          </td>

          <td>
            Requis. Le nom du type d&apos;événement à enregistrer. Les chaînes de plus de 255 caractères entraîneront que l&apos;appel d&apos;API ne sera pas envoyé à New Relic. Le nom ne peut contenir que des caractères alphanumériques, des traits de soulignement `_` et des deux points `:`. Pour des restrictions supplémentaires sur les noms de types d&apos;événements, voir [Mots réservés](/docs/data-apis/custom-data/custom-events/data-requirements-limits-custom-event-data/#reserved-words).
          </td>
        </tr>

        <tr>
          <td>
            `attributeValues`

            *IEnumerable&lt;string, object&gt;*
          </td>

          <td>
            Requis. Spécifiez les paires valeur clé d&apos;attribut pour annoter l&apos;événement.
          </td>
        </tr>
      </tbody>
    </table>

    ### Exemples

    #### Valeurs d&apos;enregistrement [#record-strings]

    ```cs
    var eventAttributes = new Dictionary<string, object>() 
    {
        {"foo", "bar"},
        {"alice", "bob"}, 
        {"age", 32}, 
        {"height", 21.3f}
    };

    NewRelic.Api.Agent.NewRelic.RecordCustomEvent("MyCustomEvent", eventAttributes);
    ```
  </Collapser>

  <Collapser id="RecordMetric" title="Enregistrement métrique">
    ### Syntaxe

    ```cs
    NewRelic.Api.Agent.NewRelic.RecordMetric(string $metric_name, single $metric_value)
    ```

    Enregistre une métrique personnalisée avec le prénom.

    ### Exigences

    * Compatible avec toutes les versions d&apos;agent.
    * Compatible avec tous les types d&apos;applications.

    ### Description

    Enregistre une [métrique personnalisée](/docs/agents/manage-apm-agents/agent-metrics/custom-metrics) avec le prénom. Pour afficher ces métriques personnalisées, utilisez le [générateur de requêtes](/docs/query-your-data/explore-query-data/query-builder/use-advanced-nrql-mode-specify-data) pour rechercher des métriques et créer des graphiques personnalisables. Voir aussi [`IncrementCounter()`](/docs/apm/agents/net-agent/net-agent-api/net-agent-api/#IncrementCounter) et [`RecordResponseTimeMetric()`](/docs/apm/agents/net-agent/net-agent-api/net-agent-api/#RecordResponseTimeMetric).

    <Callout variant="important">
      Lors de la création d&apos;une métrique personnalisée, commencez le nom par `Custom/` (par exemple, `Custom/MyMetric`).
    </Callout>

    ### Paramètres

    <table>
      <thead>
        <tr>
          <th width="25%">
            paramètres
          </th>

          <th>
            Description
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `$metric_name`

            *chaîne*
          </td>

          <td>
            Requis. Le nom de la métrique à enregistrer. Seuls les 255 premiers caractères sont conservés.
          </td>
        </tr>

        <tr>
          <td>
            `$metric_value`

            *célibataire*
          </td>

          <td>
            Requis. La quantité à enregistrer pour la métrique.
          </td>
        </tr>
      </tbody>
    </table>

    ### Exemples

    #### Enregistrer le temps de réponse d&apos;un processus en veille [#record-stopwatch]

    ```cs
    Stopwatch stopWatch = Stopwatch.StartNew();
    System.Threading.Thread.Sleep(5000);
    stopWatch.Stop();
    NewRelic.Api.Agent.NewRelic.RecordMetric("Custom/DEMO_Record_Metric", stopWatch.ElapsedMilliseconds);
    ```
  </Collapser>

  <Collapser id="RecordResponseTimeMetric" title="Métrique RecordResponseTime">
    ### Syntaxe

    ```cs
    NewRelic.Api.Agent.NewRelic.RecordResponseTimeMetric(string $metric_name, Int64 $metric_value)
    ```

    Enregistre une métrique personnalisée avec le prénom et le temps de réponse en millisecondes.

    ### Exigences

    * Compatible avec toutes les versions d&apos;agent.
    * Compatible avec tous les types d&apos;applications.

    ### Description

    Enregistre le temps de réponse en millisecondes pour une [métrique personnalisée](/docs/agents/manage-apm-agents/agent-metrics/custom-metrics). Pour afficher ces métriques personnalisées, utilisez le [générateur de requêtes](/docs/query-your-data/explore-query-data/query-builder/use-advanced-nrql-mode-specify-data) pour rechercher des métriques et créer des graphiques personnalisables. Voir aussi [`IncrementCounter()`](/docs/apm/agents/net-agent/net-agent-api/net-agent-api/#IncrementCounter) et [`RecordMetric()`](/docs/apm/agents/net-agent/net-agent-api/net-agent-api/#RecordMetric).

    <Callout variant="important">
      Lors de la création d&apos;une métrique personnalisée, commencez le nom par `Custom/` (par exemple, `Custom/MyMetric`).
    </Callout>

    ### Paramètres

    <table>
      <thead>
        <tr>
          <th width="25%">
            paramètres
          </th>

          <th>
            Description
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `$metric_name`

            *chaîne*
          </td>

          <td>
            Requis. Le nom du temps de réponse métrique à enregistrer. Seuls les 255 premiers caractères sont conservés.
          </td>
        </tr>

        <tr>
          <td>
            `$metric_value`

            *Int64*
          </td>

          <td>
            Requis. Le temps de réponse à l&apos;enregistrement en millisecondes.
          </td>
        </tr>
      </tbody>
    </table>

    ### Exemples

    #### Enregistrer le temps de réponse d&apos;un processus en veille [#record-stopwatch]

    ```cs
    Stopwatch stopWatch = Stopwatch.StartNew();
    System.Threading.Thread.Sleep(5000);
    stopWatch.Stop();
    NewRelic.Api.Agent.NewRelic.RecordResponseTimeMetric("Custom/DEMO_Record_Response_Time_Metric", stopWatch.ElapsedMilliseconds);
    ```
  </Collapser>

  <Collapser id="SetApplicationName" title="Définir le nom de l'application">
    ### Syntaxe

    ```cs
    NewRelic.Api.Agent.NewRelic.SetApplicationName(string $name[, string $name_2, string $name_3])
    ```

    Définissez le nom de l&apos;application pour rollup des données.

    ### Exigences

    * Compatible avec toutes les versions d&apos;agent.
    * Compatible avec tous les types d&apos;applications.

    ### Description

    Définissez le(s) nom(s) d&apos;application signalé(s) à New Relic. Pour plus d’informations sur la dénomination des applications, voir [Nommez votre application .NET](/docs/agents/net-agent/installation-configuration/name-your-net-application). Cette méthode est destinée à être appelée une fois, lors du démarrage d&apos;une application.

    <Callout variant="important">
      La mise à jour du nom de l&apos;application force l&apos;agent à redémarrer. L&apos;agent supprime toutes les données non signalées associées aux noms d&apos;application précédents. Il n&apos;est pas recommandé de modifier le nom de l&apos;application plusieurs fois au cours du cycle de vie d&apos;une application en raison de la perte de données associée.
    </Callout>

    ### Paramètres

    <table>
      <thead>
        <tr>
          <th width="25%">
            paramètres
          </th>

          <th>
            Description
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `$name`

            *chaîne*
          </td>

          <td>
            Requis. Le nom de l&apos;application principale.
          </td>
        </tr>

        <tr>
          <td>
            `$name_2`

            `$name_3`

            *chaîne*
          </td>

          <td>
            Facultatif. Deuxième et troisième noms pour rollup d&apos;applications. Pour plus d&apos;informations, voir [Utiliser plusieurs noms pour une application](/docs/agents/manage-apm-agents/app-naming/use-multiple-names-app).
          </td>
        </tr>
      </tbody>
    </table>

    ### Exemples

    ```cs
    NewRelic.Api.Agent.NewRelic.SetApplicationName("AppName1", "AppName2");
    ```
  </Collapser>

  <Collapser id="SetErrorGroupCallback" title="DéfinirErrorGroupCallback">
    ### Syntaxe

    ```cs
    NewRelic.Api.Agent.NewRelic.SetErrorGroupCallback(Func<IReadOnlyDictionary<string,object>, string> errorGroupCallback);
    ```

    Fournissez une méthode de rappel qui prend un `IReadOnlyDictionary<string,object>` de données d’attribut et renvoie un nom de groupe d’erreurs.

    ### Exigences

    Cet appel d&apos;API est compatible avec :

    * Version de l&apos;agent 10.9.0 ou supérieure.
    * Tous les types d&apos;applications

    ### Description

    Définissez une méthode de rappel que l&apos;agent utilisera pour déterminer le nom du groupe d&apos;erreurs pour l&apos;événement d&apos;erreur et la trace. Ce nom est utilisé dans la Errors Inbox pour regrouper les erreurs en groupes logiques.

    La méthode de rappel doit accepter un seul argument de type `IReadOnlyDictionary<string,object>` et renvoyer une chaîne (le nom du groupe d&apos;erreurs). Le `IReadOnlyDictionary` est une collection de [données d&apos;attribut](/docs/apm/agents/manage-apm-agents/agent-data/agent-attributes/) associées à chaque événement d&apos;erreur, y compris les attributs personnalisés.

    La liste exacte des attributs disponibles pour chaque erreur varie en fonction de :

    * Quel code d&apos;application a généré l&apos;erreur
    * Paramètres de configuration de l&apos;agent
    * Si des attributs personnalisés ont été ajoutés

    Cependant, l&apos;attribut suivant doit toujours exister :

    * `error.class`
    * `error.message`
    * `stack_trace`
    * `transactionName`
    * `request.uri`
    * `error.expected`

    Une chaîne vide peut être renvoyée pour le nom du groupe d&apos;erreurs lorsque l&apos;erreur ne peut pas être attribuée à un groupe d&apos;erreurs logique.

    ### Paramètres

    <table>
      <thead>
        <tr>
          <th width="25%">
            paramètres
          </th>

          <th>
            Description
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `$callback`

            *&apos;Func&lt;IReadOnlyDictionary&lt;string,object&gt;,string&gt;&apos;*
          </td>

          <td>
            Le rappel pour déterminer le nom du groupe d&apos;erreurs en fonction des données d&apos;attribut.
          </td>
        </tr>
      </tbody>
    </table>

    ### Exemples

    Regrouper les erreurs par nom de classe d&apos;erreur :

    ```cs
    Func<IReadOnlyDictionary<string, object>, string> errorGroupCallback = (attributes) => {
        string errorGroupName = string.Empty;
        if (attributes.TryGetValue("error.class", out var errorClass))
        {
            if (errorClass.ToString() == "System.ArgumentOutOfRangeException" || errorClass.ToString() == "System.ArgumentNullException")
            {
                errorGroupName = "ArgumentErrors";
            }
            else
            {
                errorGroupName = "OtherErrors";
            }
        }
        return errorGroupName;
    };

    NewRelic.Api.Agent.NewRelic.SetErrorGroupCallback(errorGroupCallback);
    ```

    Regrouper les erreurs par nom de transaction :

    ```cs
    Func<IReadOnlyDictionary<string, object>, string> errorGroupCallback = (attributes) => {
        string errorGroupName = string.Empty;
        if (attributes.TryGetValue("transactionName", out var transactionName))
        {
        if (transactionName.ToString().IndexOf("WebTransaction/MVC/Home") != -1)
        {
        errorGroupName = "HomeControllerErrors";
        }
            else
            {
                errorGroupName = "OtherControllerErrors";
            }
        }
        return errorGroupName;
    };

    NewRelic.Api.Agent.NewRelic.SetErrorGroupCallback(errorGroupCallback);
    ```
  </Collapser>

  <Collapser id="SetTransactionName" title="Définir le nom de la transaction">
    ### Syntaxe

    ```cs
    NewRelic.Api.Agent.NewRelic.SetTransactionName(string $category, string $name)
    ```

    Définit le nom de la transaction en cours.

    ### Exigences

    * Compatible avec toutes les versions d&apos;agent.
    * Doit être appelé à l&apos;intérieur d&apos;une [transaction](/docs/accounts-partnerships/education/getting-started-new-relic/glossary#transaction).

    ### Description

    Définissez un nom de transaction personnalisé, à ajouter après un préfixe initial (`WebTransaction` ou `OtherTransaction`) en fonction du type de transaction en cours. Avant d’utiliser cet appel, assurez-vous de bien comprendre les implications des [problèmes de regroupement métrique](/docs/agents/manage-apm-agents/troubleshooting/metric-grouping-issues).

    Si vous utilisez cet appel plusieurs fois au sein de la même transaction, chaque appel écrase l&apos;appel précédent et le dernier appel définit le nom.

    <Callout variant="important">
      N&apos;utilisez pas de crochets `[suffix]` à la fin du nom de votre transaction. New Relic supprime automatiquement les crochets du nom. Utilisez plutôt des parenthèses `(suffix)` ou d’autres symboles si nécessaire.
    </Callout>

    Les valeurs uniques telles que les URL, les titres de page, les valeurs hexadécimales, les identifiants de session et les valeurs identifiables de manière unique ne doivent pas être utilisées pour nommer vos transactions. Ajoutez plutôt ces données à la transaction en tant que paramètre personnalisé avec l’appel [`AddCustomAttribute()`](/docs/apm/agents/net-agent/net-agent-api/net-agent-api/#AddCustomAttribute).

    <Callout variant="important">
      Ne créez pas plus de 1 000 noms de transaction uniques (par exemple, évitez de nommer par URL si possible). Cela rendra vos graphiques moins utiles et vous risquez de rencontrer les limites fixées par New Relic sur le nombre de noms de transaction uniques par compte. Cela peut également ralentir les performances de votre application.
    </Callout>

    ### Paramètres

    <table>
      <thead>
        <tr>
          <th width="25%">
            paramètres
          </th>

          <th>
            Description
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `$category`

            *chaîne*
          </td>

          <td>
            Requis. La catégorie de cette transaction, que vous pouvez utiliser pour distinguer différents types de transactions. La valeur par défaut est <DNT>**`Custom`**</DNT>. Seuls les 255 premiers caractères sont conservés.
          </td>
        </tr>

        <tr>
          <td>
            `$name`

            *chaîne*
          </td>

          <td>
            Requis. Le nom de la transaction. Seuls les 255 premiers caractères sont conservés.
          </td>
        </tr>
      </tbody>
    </table>

    ### Exemples

    Cet exemple montre l’utilisation de cette API dans un contrôleur ASP.NET Core MVC. Une transaction est créée automatiquement par l&apos;agent de instrumentation pour ASP.NET Core. La première partie du nom de la transaction continuera d’être `WebTransaction`.

    ```cs
    public class HomeController : Controller
    {

      public IActionResult Order(string product)
      { 

        // The commented-out API call below is probably a bad idea and will lead to a metric grouping issue (MGI)
        // because too many transaction names will be created. Don't do this.
        //NewRelic.Api.Agent.NewRelic.SetTransactionName("Other", $"ProductOrder-{product}");

        // Do this instead if you want to record request-specific data about this MVC endpoint
        var tx = NewRelic.Api.Agent.NewRelic.GetAgent().CurrentTransaction;
        tx.AddCustomAttribute("productName", product);

        // The default transaction name at this point will be: WebTransaction/MVC/Home/Order

        // Set custom transaction name
        NewRelic.Api.Agent.NewRelic.SetTransactionName("Other", "OrderProduct");

        // Transaction name is now: WebTransaction/Other/OrderProduct

        return View();
      }
    }  
    ```

    Cet exemple montre l&apos;utilisation de cette API dans une application console. Notez l&apos;attribut instrumentation personnalisée `[Transaction]`, qui est nécessaire pour créer une transaction pour la méthode d&apos;exemple. La première partie du nom de la transaction continuera d’être `OtherTransaction`.

    ```cs
    using NewRelic.Api.Agent;

    namespace SetApplicationNameConsoleExample
    {
      internal class Program
      {
        static void Main(string[] args)
        {
          Console.WriteLine("Hello, World!");

            var start = DateTime.Now;
            while (DateTime.Now - start < TimeSpan.FromMinutes(2))
            {
                DoSomething();
                Thread.Sleep(TimeSpan.FromSeconds(5));
            }
        }

        [Transaction]  // Attribute-based custom instrumentation to create a transaction for this method
        static void DoSomething()
        {
            Console.WriteLine("Doing something: " + Guid.NewGuid().ToString());

            // Transaction name from default naming at this point is: OtherTransaction/Custom/SetApplicationNameConsoleExample.Program/DoSomething

            NewRelic.Api.Agent.NewRelic.SetTransactionName("Console", "MyCustomTransactionName");

            // Transaction name at this point is: OtherTransaction/Console/MyCustomTransactionName

            // Note, however, that this transaction will still have a child segment (span) named "SetApplicationNameConsoleExample.Program.DoSomething"
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="SetTransactionUri" title="DéfinirTransactionUri">
    ### Syntaxe

    ```cs
    NewRelic.Api.Agent.NewRelic.SetTransactionUri(Uri $uri)
    ```

    Définit l&apos;URI de la transaction en cours.

    ### Exigences

    * Doit être appelé à l&apos;intérieur d&apos;une [transaction](/docs/accounts-partnerships/education/getting-started-new-relic/glossary#transaction).
    * Version de l&apos;agent 6.16 ou supérieure.

    <Callout variant="important">
      Cette méthode ne fonctionne que lorsqu&apos;elle est utilisée dans une transaction créée à l&apos;aide de l&apos;attribut `Transaction` avec la propriété `Web` définie sur `true`. (Voir [instrumentation personnalisée via attribut](/docs/agents/net-agent/api-guides/net-agent-api-instrument-using-attributes).) Il fournit un support pour un framework Web personnalisé que l&apos;agent ne prend pas automatiquement en charge.
    </Callout>

    ### Description

    Définissez l&apos;URI de la transaction en cours. L&apos;URI apparaît dans l&apos;attribut `request.uri` de [la trace de transaction](/docs/apm/transactions/transaction-traces/transaction-traces) et [de l&apos;événement de transaction](/docs/using-new-relic/metrics/analyze-your-metrics/data-collection-metric-timeslice-event-data), et il peut également affecter la dénomination de la transaction.

    Si vous utilisez cet appel plusieurs fois au sein de la même transaction, chaque appel écrase l&apos;appel précédent. Le dernier appel définit l&apos;URI.

    **Remarque**: à partir de la version 8.18 de l&apos;agent, la valeur de l&apos;attribut `request.uri` est définie sur la valeur de la propriété `Uri.AbsolutePath` de l&apos;objet `System.Uri` transmis à l&apos;API.

    ### Paramètres

    <table>
      <thead>
        <tr>
          <th width="25%">
            paramètres
          </th>

          <th>
            Description
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `$uri`

            *Uri*
          </td>

          <td>
            L&apos;URI de cette transaction.
          </td>
        </tr>
      </tbody>
    </table>

    ### Exemples

    ```cs
    var uri = new System.Uri("https://www.mydomain.com/path");
    NewRelic.Api.Agent.NewRelic.SetTransactionUri(uri);
    ```
  </Collapser>

  <Collapser id="SetUserParameters" title="Définir les paramètres utilisateur">
    ### Syntaxe

    ```cs
    NewRelic.Api.Agent.NewRelic.SetUserParameters(string $user_value, string $account_value, string $product_value)
    ```

    Créez un attribut personnalisé lié à l&apos;utilisateur. [`AddCustomAttribute`](/docs/apm/agents/net-agent/net-agent-api/net-agent-api/#AddCustomAttribute) est plus flexible.

    ### Exigences

    * Compatible avec toutes les versions d&apos;agent.
    * Doit être appelé à l&apos;intérieur d&apos;une [transaction](/docs/accounts-partnerships/education/getting-started-new-relic/glossary#transaction).

    ### Description

    <Callout variant="tip">
      Cet appel vous permet uniquement d&apos;attribuer des valeurs à des clés préexistantes. Pour une méthode plus flexible pour créer des paires valeur-clé, utilisez [`AddCustomAttribute()`](/docs/apm/agents/net-agent/net-agent-api/net-agent-api/#AddCustomAttribute).
    </Callout>

    Définissez [l&apos;attribut personnalisé](/docs/apm/agents/net-agent/net-agent-api/net-agent-api/#AddCustomAttribute)lié à l&apos;utilisateur à associer à une vue de page du navigateur (nom d&apos;utilisateur, nom de compte et nom de produit). Les valeurs sont automatiquement associées aux clés préexistantes (`user`, `account` et `product`), puis attachées à la transaction APM parent. Vous pouvez également [joindre (ou « transférer ») ces attributs](/docs/insights/new-relic-insights/decorating-events/insights-custom-attributes#forwarding-attributes) à l&apos;événement [PageView](/docs/agents/manage-apm-agents/agent-metrics/agent-attributes#destinations) du navigateur.

    ### Paramètres

    <table>
      <thead>
        <tr>
          <th width="25%">
            paramètres
          </th>

          <th>
            Description
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `$user_value`

            *chaîne*
          </td>

          <td>
            Obligatoire (peut être nul). Spécifiez un nom ou un nom d&apos;utilisateur à associer à cette vue de page. Cette valeur est attribuée à la touche `user` .
          </td>
        </tr>

        <tr>
          <td>
            `$account_value`

            *chaîne*
          </td>

          <td>
            Obligatoire (peut être nul). Spécifiez le nom d’un compte utilisateur à associer à cette vue de page. Cette valeur est attribuée à la touche `account` .
          </td>
        </tr>

        <tr>
          <td>
            `$product_value`

            *chaîne*
          </td>

          <td>
            Obligatoire (peut être nul). Spécifiez le nom d&apos;un produit à associer à cette vue de page. Cette valeur est attribuée à la touche `product` .
          </td>
        </tr>
      </tbody>
    </table>

    ### Exemples

    #### Enregistrer trois attribut utilisateur

    ```cs
    NewRelic.Api.Agent.NewRelic.SetUserParameters("MyUserName", "MyAccountName", "MyProductName");
    ```

    #### Enregistrer deux attribut utilisateur et un attribut vide

    ```cs
    NewRelic.Api.Agent.NewRelic.SetUserParameters("MyUserName", "", "MyProductName");
    ```
  </Collapser>

  <Collapser id="StartAgent" title="Agent de démarrage">
    ### Syntaxe

    ```cs
    NewRelic.Api.Agent.NewRelic.StartAgent()
    ```

    Démarrez l&apos;agent s&apos;il n&apos;a pas déjà démarré. Généralement inutile.

    ### Exigences

    * Compatible avec toutes les versions d&apos;agent.
    * Compatible avec tous les types d&apos;applications.

    ### Description

    Démarre l&apos;agent s&apos;il n&apos;a pas déjà été démarré. Cet appel est généralement inutile, car l&apos;agent démarre automatiquement lorsqu&apos;il rencontre une méthode instrumentée, sauf si vous désactivez [`autoStart`](/docs/apm/agents/net-agent/configuration/net-agent-configuration/#service-autoStart). Si vous utilisez [`SetApplicationName()`](/docs/apm/agents/net-agent/net-agent-api/net-agent-api/#SetApplicationName), assurez-vous de définir le nom de l&apos;application **avant** de démarrer l&apos;agent.

    <Callout variant="tip">
      Cette méthode démarre l&apos;agent de manière asynchrone (ce qui signifie qu&apos;elle ne bloquera pas le démarrage de l&apos;application) sauf si vous activez [`syncStartup`](/docs/apm/agents/net-agent/configuration/net-agent-configuration/#service-syncStartup) ou [`sendDataOnExit`](/docs/apm/agents/net-agent/configuration/net-agent-configuration/#service-sendDataOnExit).
    </Callout>

    ### Exemples

    ```cs
    NewRelic.Api.Agent.NewRelic.StartAgent();
    ```
  </Collapser>

  <Collapser id="TraceMetadata" title="TraceMétadonnées">
    ### Syntaxe

    ```cs
    NewRelic.Api.Agent.TraceMetadata;
    ```

    Renvoie les propriétés de l&apos;environnement d&apos;exécution actuel utilisées pour prendre en charge le tracing.

    ### Exigences

    * Version de l&apos;agent 8.19 ou supérieure.
    * Compatible avec tous les types d&apos;applications.
    * [le tracing distribué doit être activé](/docs/agents/net-agent/configuration/net-agent-configuration#distributed_tracing) pour obtenir des valeurs significatives.

    ### Description

    Donne accès aux propriétés suivantes :

    ### Propriétés

    <table>
      <thead>
        <tr>
          <th width="25%">
            Nom
          </th>

          <th>
            Description
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `TraceId`
          </td>

          <td>
            Renvoie une chaîne représentant la trace en cours d&apos;exécution. Si l&apos;ID trace n&apos;est pas disponible ou si le tracing distribué est désactivé, la valeur sera `string.Empty`.
          </td>
        </tr>

        <tr>
          <td>
            `SpanId`
          </td>

          <td>
            Renvoie une chaîne représentant la plage en cours d&apos;exécution. Si l&apos;ID de portée n&apos;est pas disponible ou si le tracing distribué est désactivé, la valeur sera `string.Empty`.
          </td>
        </tr>

        <tr>
          <td>
            `IsSampled`
          </td>

          <td>
            Renvoie `true` si la trace actuelle est échantillonnée pour inclusion, `false` si elle est échantillonnée.
          </td>
        </tr>
      </tbody>
    </table>

    ### Exemples

    ```cs
    IAgent agent = NewRelic.Api.Agent.NewRelic.GetAgent();
    ITraceMetadata traceMetadata = agent.TraceMetadata;
    string traceId = traceMetadata.TraceId;
    string spanId = traceMetadata.SpanId;
    bool isSampled = traceMetadata.IsSampled;
    ```
  </Collapser>
</CollapserGroup>