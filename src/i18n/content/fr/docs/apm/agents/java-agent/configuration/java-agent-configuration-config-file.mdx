---
title: "Configuration de l'agent Java\_: fichier de configuration"
tags:
  - Agents
  - Java agent
  - Configuration
metaDescription: 'New Relic''s Java agent config settings for APM, including transaction tracer, errors, custom instrumentation, distributed tracing, system properties, etc.'
freshnessValidatedDate: never
translationType: machine
---

L&apos;agent Java New Relic lit sa configuration à partir du fichier `newrelic.yml` . Par défaut, l&amp;apos;agent recherche ce fichier dans le [répertoire](/docs/agents/manage-apm-agents/troubleshooting/find-agent-root-directory#java-agent) qui contient `newrelic.jar`. Vous pouvez remplacer l&amp;apos;emplacement du fichier de configuration en définissant la propriété système [`newrelic.config.file`](#newrelic-config-file) sur un nom de fichier complet.

Vous pourrez configurer notre agent Java en fonction de votre environnement après avoir [créé un compte New Relic](https://newrelic.com/signup) (c&amp;apos;est gratuit, pour toujours) et [installé l&apos;agent Java](/docs/apm/agents/java-agent/installation/install-java-agent/).

## Structure du fichier de configuration [#Structure]

Le fichier `newrelic.yml` comporte des sections distinctes pour différents environnements :

* Test
* Développement
* Simulation
* Production (par défaut)

New Relic applique les paramètres de la section `common` à chacun de ces environnements. Vous pouvez sélectionner d’autres environnements par défaut en définissant la propriété système [`newrelic.environment`](#newrelic-environment) sur le nom de l’environnement.

<Callout variant="tip">
  Un [modèle`newrelic.yml` ](/docs/java/java-agent-config-file-template)est disponible.
</Callout>

Si vous éditez `newrelic.yml`, veillez à respecter le [format YAML](https://en.wikipedia.org/wiki/YAML). Utilisez un validateur YAML pour vous assurer que la syntaxe est exacte avant d&amp;apos;utiliser le fichier avec l&amp;apos;agent Java de New Relic et suivez ces règles :

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        <DNT>
          **Java agent newrelic.yml**
        </DNT>
      </th>

      <th>
        <DNT>
          **Requirements**
        </DNT>
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        Format
      </td>

      <td>
        Les fichiers YML sont sensibles à la casse.
      </td>
    </tr>

    <tr>
      <td>
        Indentations
      </td>

      <td>
        Toutes les indentations doivent être incrémentées de deux caractères. D’autres indentations entraîneront une erreur `Unable to parse configuration file` au démarrage de l’agent.

        * Utilisez le même niveau d’indentation pour les données de la même section du fichier.
        * Indentez chaque sous-section de deux espaces supplémentaires.
      </td>
    </tr>

    <tr>
      <td>
        Modifications apportées au fichier
      </td>

      <td>
        Vous devez redémarrer votre processus hôte JVM pour que les modifications prennent effet.

        <DNT>**Exception:**</DNT> Les modifications de propriété apportées à `log_level` et `audit_mode` ne nécessitent pas de redémarrage. Les modifications de propriété sous disjoncteur ne nécessitent pas de redémarrage.
      </td>
    </tr>
  </tbody>
</table>

## Priorité des paramètres de configuration [#config-options-precedence]

Pour remplacer un paramètre dans le fichier de configuration, utilisez une [propriété système override](#System_Properties). Dans certains environnements, [les variables d&apos;environnement](#Environment_Variables) peuvent également être utilisées pour remplacer à la fois le fichier de configuration et les propriétés système. Les variables d&amp;apos;environnement existent principalement pour prendre en charge Heroku. Lorsqu&amp;apos;elle est utilisée, [la configuration côté serveur](/docs/agents/manage-apm-agents/configuration/server-side-agent-configuration) remplace tous les autres paramètres de configuration.

<img title="java-config-order.png" alt="java-config-order.png" src="/images/apm_diagram_Java-config-precedence.webp" />

<figcaption>
  Avec l&apos;agent Java, la configuration côté serveur remplace tous les autres paramètres. Les variables d’environnement remplacent les propriétés du système Java. Les propriétés Java remplacent les paramètres de configuration utilisateur dans votre fichier `newrelic.yml` . Les paramètres utilisateur remplacent les paramètres par défaut `newrelic.yml` .
</figcaption>

## Configuration du répertoire des extensions Java [#extensions-directory]

L&apos;agent Java lit les fichiers de configuration au démarrage du processus. Pour identifier le répertoire dans lequel se trouvent les fichiers, créez un nouveau répertoire d&apos;extensions ou spécifiez un répertoire d&apos;extensions existant :

<CollapserGroup>
  <Collapser id="create-extensions-directory" title="Créer un répertoire d'extensions">
    Pour créer le répertoire des extensions :

    1. Accédez au répertoire où se trouvent `newrelic.jar` et `newrelic.yml` . Créez un répertoire nommé `extensions`.
    2. Dans `newrelic.yml`, vérifiez que la propriété [`extensions.dir`](#cfg-extensions-dir) n&amp;apos;est pas définie.
  </Collapser>

  <Collapser id="specify-extensions-directory" title="Spécifier un répertoire d'extensions existant">
    Pour utiliser un répertoire d’extensions Java existant :

    1. Dans votre fichier `newrelic.yml`, recherchez la section `common` .
    2. Utilisez la propriété [`extensions.dir`](#cfg-extensions-dir) pour spécifier l’emplacement du fichier.
  </Collapser>
</CollapserGroup>

## Paramètres de configuration générale [#General]

Définissez ces options dans la section `common` . Pour [remplacer](#System_Properties) l’une de ces options, utilisez une propriété système préfixée par `newrelic.config` .

<CollapserGroup>
  <Collapser id="cfg-license_key" title="license_key (OBLIGATOIRE)">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Chaîne
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Ce paramètre est <DNT>**required**</DNT>. Vous devez spécifier la [clé de licence](/docs/apis/intro-apis/new-relic-api-keys/#ingest-license-key) associée à votre compte New Relic. Cette clé lie les données de votre agent à votre compte dans le service New Relic.
  </Collapser>

  <Collapser id="cfg-app_name" title="app_name (OBLIGATOIRE)">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Chaîne
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Ce paramètre est <DNT>**required**</DNT>. Définit le [nom de l&apos;application](/docs/site/naming-your-application) utilisé pour signaler les données à New Relic.

    Si [`enable_auto_app_naming`](#cfg-enable_auto_app_naming) est faux, l&amp;apos;agent signale toutes les données à cette application. Dans le cas contraire, l&amp;apos;agent signale uniquement les tâches d&amp;apos;arrière-plan (transactions pour les applications non Web) à cette application.

    Pour signaler des données à [plusieurs application](/docs/java/multiple-application-names), séparez les noms application par un point-virgule. Par exemple, pour signaler des données à <DNT>**My Application**</DNT> et <DNT>**My Application 2**</DNT> utilisez ceci :

    ```yml
    app_name: My Application;My Application 2
    ```

    Pour plus de méthodes de dénomination de votre application, voir [Nommer votre application Java](/docs/agents/java-agent/configuration/name-your-java-application).
  </Collapser>

  <Collapser id="cfg-agent_enabled" title="agent_enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Drapeau pour activer l&apos;agent. Utilisez ce paramètre pour forcer l’agent à s’exécuter ou non.
  </Collapser>

  <Collapser id="cfg-apdex_t" title="apdex_t (OBSOLÈTE)">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Virgule flottante
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `1.0`
          </td>
        </tr>
      </tbody>
    </table>

    Le seuil `apdex_t` en secondes pour le score [Apdex](/docs/site/apdex-measuring-user-satisfaction) de l&amp;apos;application. Pour les versions agent Java 1.2.008 ou supérieures, la valeur `apdex_t` est définie dans l&amp;apos;UI et la valeur dans `newrelic.yml` est ignorée.
  </Collapser>

  <Collapser id="cfg-appserver_port" title="appserver_port">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Entier
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Numéro permettant de différencier les JVM pour la même application sur la même machine. New Relic [utilise l&apos;hôte/port pour l&apos;unicité](/docs/agents/java-agent/configuration/hostname-logic-java#unique-identifier), vous pouvez donc distinguer les JVM en plaçant un commutateur comme celui-ci dans les arguments de démarrage de chaque JVM :

    ```ini
    -Dnewrelic.config.appserver_port=<var>8081</var>
    ```

    Une fois que vous avez utilisé `appserver_port` pour nommer les JVM et les redémarrer, vous devriez pouvoir les voir individuellement dans la liste déroulante et dans l&amp;apos;interface de profilage.

    <Callout variant="important">
      Il s&apos;agit uniquement d&apos;un changement pour New Relic ; cela n&apos;affecte en rien le port sur lequel l&apos;hôte communique.
    </Callout>
  </Collapser>

  <Collapser id="cfg-audit_mode" title="audit_mode">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Active le logging en texte brut de toutes les données envoyées à New Relic dans le fichier log de l&apos;agent. Ce paramètre est dynamique, donc l&apos;agent en cours d&apos;exécution remarquera les modifications apportées à `newrelic.yml` sans redémarrage JVM .
  </Collapser>

  <Collapser id="ca_config_bundle" title="ca_bundle_path">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Chaîne
          </td>
        </tr>

        <tr>
          <th>
            Format de valeur
          </th>

          <td>
            `/path/to/ca/cert/bundle.pem`
          </td>
        </tr>
      </tbody>
    </table>

    Spécifie un chemin vers un ensemble de certificats SSL personnalisé qui sera utilisé par l&apos;agent pour établir une connexion sécurisée à New Relic. Si votre ensemble de certificats SSL personnalisé n&apos;inclut pas de certificats suffisants pour vous connecter à New Relic, vous devrez [fusionner les certificats requis dans votre ensemble de certificats personnalisé](/docs/agents/java-agent/troubleshooting/ssl-or-connection-errors-java).

    <Callout variant="important">
      Notre implémentation de Java Flight Recorder actuellement fournie avec l&apos;agent Java utilise le SDK de télémétrie. La spécification d&apos;un ca\_bundle\_path ne mettra pas à jour le certificat que notre option JFR utilise pour se connecter à New Relic. Si vous utilisez un truststore personnalisé et souhaitez utiliser l&apos;implémentation JFR de l&apos;agent Java, vous devrez ajouter les certificats requis dans votre truststore personnalisé.
    </Callout>
  </Collapser>

  <Collapser id="cfg-enable_auto_app_naming" title="enable_auto_app_naming">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Permet la création de rapports de données séparément pour chaque application Web. Définissez sur `true` pour activer la prise en charge de la dénomination automatique des applications. Le nom de chaque application Web est détecté automatiquement et l&amp;apos;agent rapporte les données séparément pour chacune d&amp;apos;elles. Cela fournit une répartition plus précise des performances des applications Web dans New Relic.

    Pour plus d&apos;informations, voir [Nommage automatique des applications](/docs/agents/java-agent/configuration/automatic-application-naming).

    Pour plus de méthodes de dénomination de votre application, voir [Nommer votre application Java](/docs/agents/java-agent/configuration/name-your-java-application).
  </Collapser>

  <Collapser id="cfg-enable_auto_transaction_naming" title="enable_auto_transaction_naming">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Permet la dénomination des transactions basée sur les composants. Définissez sur `true` pour activer la dénomination des transactions basée sur les composants. Définissez sur `false` pour utiliser l’URI d’une requête Web comme nom de la transaction. Pour plus d&amp;apos;informations, voir [Nommage des transactions Web](/docs/agents/java-agent/instrumentation/naming-web-transactions).

    <Callout variant="caution">
      À moins que vous n&apos;implémentiez l&apos;appel d&apos;API pour nommer vos transactions, la désactivation de la dénomination automatique des transactions est très susceptible de provoquer [des problèmes de regroupement métrique](/docs/features/metric-grouping-issues).
    </Callout>
  </Collapser>

  <Collapser id="cfg-enable_custom_tracing" title="enable_custom_tracing">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Active toute instrumentation [utilisant une annotation `@Trace` ](/docs/agents/java-agent/custom-instrumentation/java-instrumentation-annotation). La désactivation de cette option entraîne l&amp;apos;ignorance de `@Trace` annotations.
  </Collapser>

  <Collapser id="event_ingest_uri" title="event_ingest_uri">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Chaîne
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            [`https://insights-collector.newrelic.com/v1/accounts/events`](https://insights-collector.newrelic.com/v1/accounts/events)
          </td>
        </tr>
      </tbody>
    </table>

    Événement ingest URI utilisé par certaines fonctionnalités agent. La valeur par défaut est le point de terminaison d&apos;ingestion de production américain. Peut être configuré manuellement pour envoyer l&apos;événement à un autre point de terminaison d&apos;ingestion (par exemple, production UE : [`https://insights-collector.eu01.nr-data.net/v1/accounts/events`](https://insights-collector.eu01.nr-data.net/v1/accounts/events)).

    Les clients conformes à FedRAMP doivent utiliser le [point de terminaison conforme à FedRAMP](/docs/security/security-privacy/compliance/fedramp-compliant-endpoints/#event-api): `https://gov-insights-collector.newrelic.com/v1/accounts/events`
  </Collapser>

  <Collapser id="cfg-extensions-dir" title="extensions.dir">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Chaîne
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Définit l&apos;emplacement du [répertoire des extensions](#extensions-directory) facultatives. Si cette propriété n&amp;apos;est pas définie, l&amp;apos;agent recherchera un sous-répertoire nommé `extensions` dans le même répertoire que `newrelic.jar` et `newrelic.yml`.
  </Collapser>

  <Collapser id="cfg-enable_high_security" title="high_security">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Pour que [la haute sécurité](/docs/subscriptions/high-security) soit activée, cette propriété doit être définie sur `true` et la propriété de haute sécurité dans l&amp;apos;interface utilisateur New Relic doit être activée. L&amp;apos;activation de la haute sécurité signifie que SSL est activé, que les paramètres de demande et de fichier d&amp;apos;attente des messages ne sont pas collectés et que la requête ne peut pas être envoyée à New Relic sous sa forme brute.

    <Callout variant="important">
      À partir de [l&apos;agent Java 3.48.0](/docs/release-notes/agent-release-notes/java-release-notes/java-agent-3480), SSL est activé par défaut et l&amp;apos;option de configuration permettant de le désactiver est obsolète. À partir de [l&apos;agent Java 4.0.0](/docs/release-notes/agent-release-notes/java-release-notes/java-agent-400), la possibilité de désactiver SSL a été supprimée.
    </Callout>
  </Collapser>

  <Collapser id="cfg-host" title="host">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Chaîne
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Fournit la possibilité de configurer un [point de terminaison compatible FedRAMP](/docs/security/security-privacy/compliance/fedramp-compliant-endpoints/) pour l&amp;apos;agent à utiliser, avec la valeur `gov-collector.newrelic.com`.
  </Collapser>

  <Collapser id="cfg-insert_api_key" title="insert_api_key">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Chaîne
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Une [clé API d&apos;insertion](/docs/apis/get-started/intro-apis/types-new-relic-api-keys#event-insert-key) valide pour votre compte. Ceci n&amp;apos;est pas actuellement utilisé par l&amp;apos;agent.
  </Collapser>

  <Collapser id="labels" title="labels">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Chaîne
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `""`
          </td>
        </tr>
      </tbody>
    </table>

    Attachez [une étiquette](/docs/apm/new-relic-apm/maintenance/labels-categories-organize-your-apps-servers) à cette application.

    Notez que cette option active désormais la balise, qui a remplacé la fonctionnalité d&apos;étiquette. Vous pouvez toujours interroger vos [étiquettes](/docs/new-relic-one/use-new-relic-one/core-concepts/tagging-use-tags-organize-group-what-you-monitor#labels) historiques. Plusieurs balises peuvent être attachées en utilisant un point-virgule comme séparateur comme suit :

    ```ini
    -Dnewrelic.config.labels="tagName1:tagValue1;tagName2:tagValue2;tagName3:tagValue3"
    ```
  </Collapser>

  <Collapser id="legacy_async_api_skip_suspend" title="legacy_async_api_skip_suspend">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            false
          </td>
        </tr>
      </tbody>
    </table>

    Dans de rares cas, une fuite de mémoire peut se produire avec instrumentation qui utilise l&apos;legacy asynchrone API pour suivre le cycle de vie des servlets asynchrones ou des Jetty continuations . La fuite de mémoire se manifesterait par des transactions divulguées qui ont été suspendues mais jamais reprises. Cette configuration agit comme une solution de contournement pour empêcher qu&apos;un tel scénario ne se produise. Il est conseillé d&apos;activer cette solution de contournement uniquement en cas de fuite de mémoire.
  </Collapser>

  <Collapser id="max-stack-trace-lines" title="max_stack_trace_lines">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Entier
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `30`
          </td>
        </tr>
      </tbody>
    </table>

    Limite le nombre de lignes que l&apos;agent collecte à partir de chaque trace d&apos;appels. L’augmentation de cette valeur peut avoir un impact sur les performances, car elle augmente la quantité de mémoire utilisée par l’agent et la quantité de données envoyées à New Relic.
  </Collapser>

  <Collapser id="metric_ingest_uri" title="metric_ingest_uri">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Chaîne
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            [`https://metric-api.newrelic.com/metric/v1`](https://metric-api.newrelic.com/metric/v1)
          </td>
        </tr>
      </tbody>
    </table>

    Métrique ingest URI utilisé par certaines fonctionnalités agent . La valeur par défaut est le point de terminaison d&apos;ingestion de production américain. Peut être configuré manuellement pour envoyer des métriques à d&apos;autres points de terminaison d&apos;ingestion (exemple d&apos;URI de production UE : [`https://metric-api.eu.newrelic.com/metric/v1`](https://metric-api.eu.newrelic.com/metric/v1)).

    Les clients conformes à FedRAMP doivent utiliser le [point de terminaison conforme à FedRAMP](/docs/security/security-privacy/compliance/fedramp-compliant-endpoints/#metric-api): `https://gov-metric-api.newrelic.com/metric/v1`
  </Collapser>

  <Collapser id="cfg-proxy_host" title="proxy_host">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Chaîne
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    L&apos;hôte proxy via lequel se connecter au [collecteur New Relic](/docs/accounts-partnerships/education/getting-started-new-relic/glossary#collector). Si un proxy est utilisé, le paramètre hôte est requis. Les autres paramètres proxy sont facultatifs.
  </Collapser>

  <Collapser id="cfg-proxy_password" title="proxy_password">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Chaîne
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Le mot de passe pour l&apos;authentification proxy. Si un proxy est utilisé, le paramètre hôte est requis. Les autres paramètres proxy sont facultatifs. Les paramètres de nom d&apos;utilisateur et de mot de passe seront utilisés pour s&apos;authentifier auprès des défis d&apos;authentification de base à partir d&apos;un serveur proxy.

    <Callout variant="important">
      L&apos;agent Java prend en charge l&apos;authentification de base (texte clair).
    </Callout>
  </Collapser>

  <Collapser id="cfg-proxy_port" title="proxy_port">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Chaîne
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `8080`
          </td>
        </tr>
      </tbody>
    </table>

    Le numéro de port de l&apos;hôte proxy. Si un proxy est utilisé, le paramètre hôte est requis. Les autres paramètres proxy sont facultatifs.
  </Collapser>

  <Collapser id="cfg-proxy_user" title="proxy_user">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Chaîne
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Le nom d&apos;utilisateur pour l&apos;authentification proxy, telle que l&apos;authentification de base (texte clair). Si un proxy est utilisé, le paramètre hôte est requis. Les autres paramètres proxy sont facultatifs. Les paramètres de nom d&apos;utilisateur et de mot de passe seront utilisés pour s&apos;authentifier auprès des défis d&apos;authentification de base à partir d&apos;un serveur proxy.
  </Collapser>

  <Collapser id="cfg-proxy_scheme" title="proxy_scheme">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Chaîne
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Le schéma proxy utilisé. Le paramètre `proxy_scheme: "https"` permettra à l&amp;apos;agent de se connecter via des proxys en utilisant le schéma HTTPS.
  </Collapser>

  <Collapser id="cfg-reactor-netty-errors-enabled" title="reactor-netty.errors.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Si des erreurs sont signalées pour Reactor Netty. La valeur par défaut est faux. Si défini sur vrai, les erreurs Reactor Netty seront signalées.

    <Callout variant="important">
      Disponible uniquement dans [l&apos;agent Java 6.3.0](/docs/release-notes/agent-release-notes/java-release-notes/java-agent-630) et supérieur.

      Notez que la valeur par défaut a été modifiée sur false à partir de l&apos;agent Java 6.5.0.
    </Callout>
  </Collapser>

  <Collapser id="cfg-send_data_on_exit" title="send_data_on_exit">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Activez l’arrêt différé de la JVM pour donner à l’agent une chance d’envoyer les dernières données de métrique à New Relic avant l’arrêt de la JVM.
  </Collapser>

  <Collapser id="send_data_on_exit_threshold" title="send_data_on_exit_threshold">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Entier
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `60`
          </td>
        </tr>
      </tbody>
    </table>

    Le nombre de secondes après lequel l&apos;agent utilisera le paramètre [`send_data_on_exit`](#cfg-send_data_on_exit) .
  </Collapser>

  <Collapser id="cfg-send_environment_info" title="send_environment_info">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Activer la création de rapports sur les paramètres JVM vers New Relic.
  </Collapser>

  <Collapser id="cfg-send_jvm_props" title="send_jvm_props">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Lorsqu&apos;il est défini sur `true`, les propriétés JVM seront envoyées à New Relic.
  </Collapser>

  <Collapser id="cfg-ssl" title="ssl (OBSOLÈTE)">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Nécessite des connexions au collecteur New Relic pour passer par SSL.

    L&apos;agent communique avec New Relic via HTTPS par défaut, et New Relic [requiert HTTPS](/docs/apis/rest-api-v2/troubleshooting/301-response-rest-api-calls) pour tout le trafic vers <InlinePopover type="apm" />et l&amp;apos;API REST New Relic.

    Ce travail est effectué de manière asynchrone par rapport aux threads qui traitent le code de votre application, de sorte que les temps de réponse ne seront pas directement affectés par ce changement.

    <Callout variant="important">
      À partir de [l&apos;agent Java 3.48.0](/docs/release-notes/agent-release-notes/java-release-notes/java-agent-3480), SSL est activé par défaut et l&amp;apos;option de configuration permettant de le désactiver est obsolète. À partir de [l&apos;agent Java 4.0.0](/docs/release-notes/agent-release-notes/java-release-notes/java-agent-400), la possibilité de désactiver SSL a été supprimée.
    </Callout>
  </Collapser>

  <Collapser id="cfg-sync_startup" title="sync_startup">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Permettez à l&apos;agent de connecter le collecteur New Relic immédiatement au démarrage de l&apos;application.
  </Collapser>

  <Collapser id="scala-futures-segment" title="scala_futures_as_segments">
    <Callout variant="important">
      Ceci s&apos;applique à l&apos;agent Java [version 3.44.0 ou supérieure](/docs/release-notes/agent-release-notes/java-release-notes).
    </Callout>

    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Pour trace plus concis des détails de la transaction, l&apos;agent ne signale pas les contrats à terme Scala comme des segments de transaction, et ces contrats à terme ne contribuent pas au [temps total de la transaction](/docs/data-analysis/user-interface-functions/view-your-data/response-time#response-time-total-time).

    L&apos;activation de `scala_futures_as_segments` augmente vos frais généraux. Si vous souhaitez que Scala Futures génère des rapports sous forme de segments de transaction afin que vous puissiez les afficher dans une trace de transaction, vous pouvez l&amp;apos;activer :

    ```yml
    scala_futures_as_segments:
      enabled: true
    ```
  </Collapser>

  <Collapser id="trim_stats" title="trim_stats">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Lorsque le temps exclusif d&apos;un segment est inférieur à 2 % du temps total de transaction, la métrique pour cet appel de méthode sera agrégée sous `Java/other`.

    La définition de `trim_stats` sur `false` désactivera ce comportement, permettant aux métriques d&amp;apos;être affichées individuellement.

    ```yml
    trim_stats: false
    ```
  </Collapser>
</CollapserGroup>

## Variables d&apos;environnement [#Environment\_Variables][#Environment_Variables]

Les variables d&apos;environnement ont la plus haute priorité et remplacent les propriétés système et les paramètres de configuration YML.

* Pour définir des variables d’environnement, utilisez la commande `export VARNAME=value` .
* Pour définir de manière permanente les variables d&apos;environnement, ajoutez la ligne d&apos;exportation à un fichier tel que `~/.bashrc` ou `~/.bash_profile`.

Vous pouvez remplacer n’importe quel paramètre d’une propriété système ou dans `newrelic.yml` en définissant une variable d’environnement. La variable d&amp;apos;environnement correspondant à un paramètre donné dans le fichier de configuration est le nom du paramètre préfixé par `NEW_RELIC` avec tous les points (`.`) et les tirets (`-`) remplacés par des traits de soulignement (`_`). Par exemple, la variable d’environnement pour le paramètre `log_level` est `NEW_RELIC_LOG_LEVEL`.

Pour les paramètres imbriqués dans des sections, ajoutez le nom de la section au nom du paramètre. Par exemple:

```yml:
  class_transformer:
    com.newrelic.instrumentation.kafka-clients-spans-0.11.0.0:
      enabled: true
```

La configuration ci-dessus se convertirait en la variable d&apos;environnement suivante : `NEW_RELIC_CLASS_TRANSFORMER_COM_NEWRELIC_INSTRUMENTATION_KAFKA_CLIENTS_SPANS_0_11_0_0_ENABLED`

<Callout variant="important">
  La configuration de l&apos;agent via des variables d&apos;environnement nécessite [l&apos;agent Java version 4.10.0 ou supérieure](/docs/agents/java-agent/installation/upgrade-java-agent).
</Callout>

## Propriétés du système [#System\_Properties][#System_Properties]

Vous pouvez remplacer n’importe quel paramètre du fichier `newrelic.yml` en définissant une propriété système. La propriété système correspondant à un paramètre donné dans le fichier de configuration est le nom du paramètre préfixé par `newrelic.config`. Par exemple, la propriété système pour le paramètre `log_level` est `newrelic.config.log_level`.

Pour les paramètres imbriqués dans des sections, ajoutez le nom de la section au nom du paramètre. Par exemple, la propriété système pour le paramètre `enabled` dans la section transaction\_tracer est `newrelic.config.transaction_tracer.enabled`.

En plus de remplacer les paramètres de configuration, l&apos;agent reconnaît ces propriétés système :

<CollapserGroup>
  <Collapser id="com-newrelic-jboss-jsr77-fix" title="com.newrelic.jboss.jsr77.fix">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    À partir de la version agent `8.7.0`, si elle est définie sur true et que l&amp;apos;agent s&amp;apos;exécute avec JBoss EAP / Wildfly, cela empêchera l&amp;apos;agent d&amp;apos;exiger qu&amp;apos;une classe sous le package `javax.management` soit chargée par le chargeur de classes système. Ceci est ajouté pour aider à résoudre les problèmes de démarrage d&amp;apos;application avec les modules JBoss lorsque l&amp;apos;API de gestion J2EE/Jakarta est utilisée. Plus d&amp;apos;informations sont fournies dans le [document de dépannage](/docs/apm/agents/java-agent/troubleshooting/classloading-issues-from-jboss-and-wildfly) JBoss / Wildfly.
  </Collapser>

  <Collapser id="newrelic-config-experimental-runtime" title="newrelic.config.experimental_runtime">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Drapeau expérimental qui permet à l&apos;agent de s&apos;exécuter avec des versions Java non prises en charge.
  </Collapser>

  <Collapser id="newrelic-bootstrap_classpath" title="newrelic.config.process_host.display_name">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Chaîne
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Définissez un [nom](/docs/agents/java-agent/configuration/hostname-logic-java#display-name) d&amp;apos;affichage pour décorer l&amp;apos;étiquette « hôte : port » dans l&amp;apos;UI de New Relic . Nécessite l&amp;apos;agent Java 3.17 ou supérieur.
  </Collapser>

  <Collapser id="newrelic-config-file" title="newrelic.config.file">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Chaîne
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Chaîne contenant un chemin d&apos;accès complet au fichier de configuration newrelic. Si vide, l&apos;agent suppose que `newrelic.yml` se trouve dans le même répertoire que `newrelic.jar`.
  </Collapser>

  <Collapser id="newrelic-debug" title="newrelic.debug">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Activer le logging de débogage.
  </Collapser>

  <Collapser id="newrelic-environment" title="newrelic.environment">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Chaîne
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Chaîne contenant la configuration de l&apos;environnement que l&apos;agent doit utiliser.
  </Collapser>

  <Collapser id="newrelic-home" title="newrelic.home">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Chaîne
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Chaîne contenant le répertoire personnel de l&apos;agent. La valeur par défaut est le même répertoire que le fichier jar de l&apos;agent.
  </Collapser>

  <Collapser id="newrelic-logfile" title="newrelic.logfile">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Chaîne
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `newrelic_agent.log`
          </td>
        </tr>
      </tbody>
    </table>

    Chaîne contenant le nom du agent fichier de log.
  </Collapser>
</CollapserGroup>

## Monitoring de l&apos;IA [#ai-monitoring]

Cette section détaille les agent Java configuration options pour [monitoring de l&apos;IA](/docs/ai-monitoring/intro-to-ai-monitoring). Cette fonctionnalité peut être configurée dans la strophe du fichier de configuration yaml `ai_monitoring`, avec des propriétés système préfixées `newrelic.config.ai_monitoring.` ou avec des variables d&amp;apos;environnement préfixées `NEW_RELIC_AI_MONITORING_` .

<Callout variant="important">
  Si le tracing distribué est désactivé ou si le mode haute sécurité est activé, monitoring de l&apos;IA ne collectera pas de données AI.
</Callout>

<Callout variant="important">
  Lorsque cette option est activée, monitoring de l&apos;IA enregistre une copie en continu des entrées et des sorties envoyées vers et depuis les modèles que vous choisissez de monitorer, y compris toutes les informations personnelles qu&apos;ils contiennent. Vous êtes responsable d&apos;obtenir le consentement de l&apos;utilisateur de votre modèle pour que son interaction puisse être enregistrée par un tiers (New Relic) dans le but d&apos;assurer la monitoring de la fonctionnalité IA.
</Callout>

<CollapserGroup>
  <Collapser id="ai-monitoring-enabled" title="enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Lorsque défini sur `true`, active monitoring de l&amp;apos;IA.
  </Collapser>

  <Collapser id="ai-monitoring-record-content" title="record_content.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Si défini sur `false`, agent omettra le contenu d&amp;apos;entrée et de sortie (comme les chaînes de texte de l&amp;apos;invite et des réponses) capturées dans l&amp;apos;événement LLM. Il s&amp;apos;agit d&amp;apos;un paramètre de sécurité facultatif si vous ne souhaitez pas enregistrer les données sensibles envoyées et reçues par vos LLM.
  </Collapser>
</CollapserGroup>

## Attributs [#attributes]

Pour définir ces options, utilisez la section `attributes` . Pour les [remplacer](#System_Properties), utilisez une propriété système préfixée par `newrelic.config.attributes` .

Les attributs sont des paires valeur clé liées à la trace de transaction, aux erreurs de trace, à <InlinePopover type="browser" />et à l&amp;apos;événement de transaction. Il y a une section `attribute` sous chaque destination. Pour plus d&amp;apos;informations, voir [agent Java Attribut](/docs/java/java-agent-attributes), [Activation et désactivation de](/docs/java/enabling-and-disabling-attributes) l&amp;apos;attribut et [Exemples d&apos;attribut](/docs/java/attribute-examples).

<CollapserGroup>
  <Collapser id="cfg-attributes-enabled" title="enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Ce paramètre peut être utilisé pour activer ou désactiver tous les attributs.

    <Callout variant="important">
      Pour des raisons de sécurité, la capture d&apos;attribut personnalisé à l&apos;aide de l&apos;[éditeur d&apos;instrumentation personnalisée](/docs/agents/java-agent/custom-instrumentation/custom-instrumentation-editor-instrument-ui#options) est définie sur `false` par défaut.
    </Callout>
  </Collapser>

  <Collapser id="cfg-attributes-include" title="include">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Liste des chaînes
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Si les attributs sont activés, les clés d&apos;attribut trouvées dans cette liste seront envoyées à New Relic. Séparez les clés de la liste par une virgule ; par exemple :

    ```
    key1, key2, key3
    ```

    Reportez-vous également aux [règles d’attributsagent ](/docs/subscriptions/agent-attributes).
  </Collapser>

  <Collapser id="cfg-attributes-exclude" title="exclude">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Liste des chaînes
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Toutes les clés d&apos;attribut trouvées dans cette liste ne seront pas envoyées à New Relic. Séparez les clés de la liste par une virgule ; par exemple :

    ```
    key1, key2, key3
    ```

    Reportez-vous également aux [règles d’attributsagent ](/docs/subscriptions/agent-attributes).
  </Collapser>

  <Collapser id="cfg-http_attribute_mode" title="http_attribute_mode">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Chaîne
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            les deux
          </td>
        </tr>
      </tbody>
    </table>

    Les rapports d&apos;attributs sont configurables via les moyens suivants.

    YAML:

    ```
    attributes:
    http_attribute_mode: both
    ```

    Propriété du système :

    ```properties
    -Dnewrelic.config.attributes.http_attribute_mode=both
    ```

    Variable d&apos;environnement :

    ```properties
    NEW_RELIC_ATTRIBUTES_HTTP_ATTRIBUTE=both
    ```

    Les options de configuration sont :

    * `standard` : Les rapports utiliseront la norme (c.-à-d. Attribut OTEL). Cette configuration est encouragée. Cela minimisera l’impact sur la fonctionnalité et maintiendra le niveau d’ingestion le plus bas pour les rapports d’attributs.
    * `legacy` : Le reporting sera effectué par l&amp;apos;attribut HTTP réintroduit, cette configuration peut avoir un impact sur les fonctionnalités actuelles ou futures.
    * `both` : Il s&amp;apos;agit de la configuration par défaut, le reporting sera effectué par l&amp;apos;attribut HTTP réintroduit et l&amp;apos;attribut OTEL. Cette configuration augmentera également votre ingestion de données.

    <Callout variant="important">
      Disponible depuis [la version 8.8.0 de l&apos;agent Java](/docs/release-notes/agent-release-notes/java-release-notes/java-agent-880). La configuration par défaut, `both`, augmentera l&amp;apos;ingestion de données. Pour éviter une augmentation de l&amp;apos;ingestion de données, vous devez remplacer la valeur par défaut en définissant `http_attribute_mode` sur `legacy` ou `standard`.
    </Callout>
  </Collapser>
</CollapserGroup>

## Instrumentation asynchrone [#async\_config][#async_config]

Ces options sont définies directement dans la section `common` et peuvent être [remplacées](#System_Properties) en utilisant une propriété système préfixée.

<CollapserGroup>
  <Collapser id="cfg-token_timeout" title="token_timeout">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Entier
          </td>
        </tr>

        <tr>
          <th>
            Par défaut (secondes)
          </th>

          <td>
            `180`
          </td>
        </tr>
      </tbody>
    </table>

    Le nombre de secondes après lequel l&apos;agent expirera automatiquement un jeton asynchrone qui n&apos;a pas été explicitement expiré avec `token.expire()`. Pour les instructions d&amp;apos;utilisation, voir [jeton : Connecter des threads asynchrones](/docs/agents/java-agent/java-agent-api/java-agent-api-asynchronous-applications#tokens).

    <Callout variant="important">
      L&apos;augmentation de cette valeur peut avoir un impact sur les performances, car elle augmente la quantité de mémoire utilisée par l&apos;agent et empêche les transactions d&apos;être signalées en raison d&apos;un jeton non expiré.
    </Callout>
  </Collapser>

  <Collapser id="cfg-segment_timeout" title="segment_timeout">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Entier
          </td>
        </tr>

        <tr>
          <th>
            Par défaut (secondes)
          </th>

          <td>
            `600`
          </td>
        </tr>
      </tbody>
    </table>

    Le nombre de secondes après lequel l&apos;agent terminera automatiquement un segment qui n&apos;a pas été explicitement terminé par `segment.end()` ou `segment.ignore()`. Pour les instructions d&amp;apos;utilisation, voir [Segments : Activité asynchrone arbitraire temporelle](/docs/agents/java-agent/java-agent-api/java-agent-api-asynchronous-applications#segments).

    <Callout variant="important">
      L’augmentation de cette valeur peut avoir un impact sur les performances, car elle augmente la quantité de mémoire utilisée par l’agent et empêche les transactions d’être signalées en raison de segments non terminés.
    </Callout>
  </Collapser>
</CollapserGroup>

## Monitoring de navigateurs [#Browser\_Monitoring][#Browser_Monitoring]

Ces options sont définies dans la section `browser_monitoring` et peuvent être [remplacées](#System_Properties) en utilisant une propriété système préfixée par `newrelic.config.browser_monitoring` .

monitoring des navigateurs vous donne des informations détaillées sur les performances réelles des utilisateurs avec votre site Web. Cela se fait en mesurant le temps qu&apos;il faut au navigateur de votre utilisateur pour télécharger et restituer vos pages Web en injectant une petite quantité de code JavaScript dans l&apos;en-tête et le pied de page de chaque page.

<CollapserGroup>
  <Collapser id="bm-auto_instrument" title="auto_instrument">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Par défaut, l&apos;agent insère automatiquement l&apos;appel d&apos;API dans les JSP compilés pour injecter le JavaScript monitoring dans les pages Web. Définissez cet attribut sur `false` pour désactiver ce comportement.
  </Collapser>

  <Collapser id="bm-disabled_auto_pages" title="disabled_auto_pages">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Liste de chaînes séparées par des virgules
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Lorsque [`auto_instrument`](#bm-auto_instrument) est `true`, par défaut toutes les pages sont instrumentées. Listez ici toutes les pages que vous souhaitez que l’instrumentation automatique ignore. Vous pouvez toujours utiliser l&amp;apos;instrumentation manuelle sur ces pages.

    Par exemple:

    ```yml
    browser_monitoring:
      disabled_auto_pages: /WEB-INF/jsp/testpage_1.jsp, /WEB-INF/jsp/testpage_2.jsp
    ```
  </Collapser>

  <Collapser id="cfg-browser-attributes-enabled" title="attributes.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Ce paramètre peut être utilisé pour activer ou désactiver tous les attributs de monitoring des navigateurs. Voici les [données que vous pouvez interroger](/docs/query-your-data/explore-query-data/explore-data/introduction-querying-new-relic-data). Si `attributes.enabled` est faux au niveau racine, aucun attribut ne sera envoyé dans monitoring des navigateurs, quelle que soit la manière dont cette propriété sous `browser_monitoring` est définie.
  </Collapser>

  <Collapser id="cfg-bm-attributes-include" title="attributes.include">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Liste des chaînes
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Si les attributs sont activés pour `browser_monitoring`, toutes les clés d&amp;apos;attribut trouvées dans cette liste seront envoyées à New Relic dans les vues de page. Pour plus d&amp;apos;informations, consultez les [règles d&apos;attribut de l&apos;agent](/docs/apm/other-features/attributes/agent-attributes).
  </Collapser>

  <Collapser id="cfg-bm-attributes-exclude" title="attributes.exclude">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Liste des chaînes
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Toutes les clés d&apos;attribut trouvées dans cette liste ne seront pas envoyées à New Relic dans les vues de page. Pour plus d&apos;informations, consultez les [règles d&apos;attribut de l&apos;agent](/docs/apm/other-features/attributes/agent-attributes).
  </Collapser>
</CollapserGroup>

## Disjoncteur

Ces paramètres personnalisent le comportement du [disjoncteur Java](/docs/agents/java-agent/custom-instrumentation/circuit-breaker-java-custom-instrumentation). Ces paramètres ne sont pas inclus dans `newrelic.yml` par défaut. Vous n&amp;apos;avez pas besoin de redémarrer votre JVM après les avoir modifiés.

Si vous souhaitez personnaliser le disjoncteur, ajoutez-le sous la section `common` :

```yml
common: &default_settings​
  <var>OTHER_CONFIG_SETTINGS</var>
  circuitbreaker:
    enabled: <var>true</var>
    memory_threshold: <var>20</var>
    gc_cpu_threshold: <var>10</var>
```

<CollapserGroup>
  <Collapser id="cfg-circuitbreaker_enabled" title="enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Si votre application se comporte comme prévu, vous souhaiterez peut-être désactiver le disjoncteur.
  </Collapser>

  <Collapser id="cfg-circuitbreaker_memory_threshold" title="memory_threshold">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Entier (0 à 100)
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `20`
          </td>
        </tr>
      </tbody>
    </table>

    Personnalisez le pourcentage de mémoire de tas libre en dessous duquel le disjoncteur doit se déclencher. Lorsque le pourcentage de mémoire de tas libre est inférieur à `memory_threshold` et que le temps CPU consacré à la collecte des déchets est supérieur à `gc_cpu_threshold`, le disjoncteur se déclenche. Afin de réduire la probabilité de déclenchement du disjoncteur, diminuez `memory_threshold` et/ou augmentez `gc_cpu_threshold`. Ajustez ces valeurs selon vos besoins, en fonction des performances de fonctionnement et du comportement de votre application.
  </Collapser>

  <Collapser id="cfg-circuitbreaker_gc_cpu_threshold" title="gc_cpu_threshold">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Entier (0 à 100)
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `10`
          </td>
        </tr>
      </tbody>
    </table>

    Personnalisez le pourcentage de temps CPU de collecte des déchets au-dessus duquel le disjoncteur doit se déclencher. Lorsque le pourcentage de mémoire de tas libre est inférieur à `memory_threshold` et que le temps CPU consacré à la collecte des déchets est supérieur à `gc_cpu_threshold`, le disjoncteur se déclenche. Afin de réduire la probabilité de déclenchement du disjoncteur, diminuez `memory_threshold` et/ou augmentez `gc_cpu_threshold`. Ajustez ces valeurs selon vos besoins, en fonction des performances de fonctionnement et du comportement de votre application.
  </Collapser>
</CollapserGroup>

## Configuration du cloud

Définissez les options liées au cloud, dans la section `cloud` du YAML de l&amp;apos;agent. Vous pouvez remplacer ces paramètres par une [propriété système](/docs/apm/agents/java-agent/configuration/java-agent-configuration-config-file/#System_Properties) préfixée `newrelic.config.cloud` ou une [variable d&apos;environnement](/docs/apm/agents/java-agent/configuration/java-agent-configuration-config-file/#Environment_Variables) préfixée `NEW_RELIC_CLOUD_` .

Un exemple de configuration :

```yml
cloud:
  aws:
    account_id: 123456789012
```

<CollapserGroup>
  <Collapser id="aws-account_id" title="aws.account_id">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Chaîne
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Ce paramètre est lu par certaines de services cloud instrumentation afin que `cloud.resource_id` l&amp;apos;attribut puisse être défini dans les étendues respectives.

    AWS DynamoDB et Kinesis sont des services qui nécessitent cette valeur pour pouvoir renseigner l&apos;attribut `cloud.resource_id` . De même, AWS Lambda exige que cette valeur lorsque l’ID de compte ne fait pas partie du nom de la fonction.

    L&apos;appel suivant remplacera ce paramètre :

    ```java
    NewRelic.getAgent().getCloud().setAccountInfo(CloudAccountInfo.AWS_ACCOUNT_ID, "...");
    ```
  </Collapser>
</CollapserGroup>

## Utilisation de la plateforme cloud [#utilization]

Définissez les paramètres d’utilisation de la plateforme cloud dans la section `utilization` et pouvez les remplacer par la propriété système préfixée `newrelic.config.utilization` .

L&apos;agent collecte les informations d&apos;utilisation et les envoie au service New Relic. L&apos;agent peut collecter des informations à partir d&apos;Amazon Web Services (AWS), Azure, Google Cloud Platform et d&apos;une instance Pivotal Cloud Foundry. Il collectera également des informations liées au conteneur Docker et aux services Kubernetes .

<CollapserGroup>
  <Collapser id="aws-enabled" title="detect_aws">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Détermine si l&apos;agent interroge l&apos;API de métadonnées AWS.
  </Collapser>

  <Collapser id="azure-enabled" title="detect_azure">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Détermine si l’agent interroge l’API de métadonnées Azure.
  </Collapser>

  <Collapser id="gcp-enabled" title="detect_gcp">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Détermine si l&apos;agent interroge l&apos;API de métadonnées Google Cloud Platform.
  </Collapser>

  <Collapser id="kubernetes-enabled" title="detect_kubernetes">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Détermine si l&apos;agent signale la variable d&apos;environnement `KUBERNETES_SERVICE_HOST` .
  </Collapser>

  <Collapser id="pcf-enabled" title="detect_pcf">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Détermine si l&apos;agent lit les variables d&apos;environnement Pivotal Cloud Foundry.
  </Collapser>

  <Collapser id="docker-enabled" title="detect_docker">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Détermine si l&apos;agent lit les informations Docker à partir du système de fichiers.
  </Collapser>
</CollapserGroup>

## Métriques au niveau du code

[niveau du code métriques](/docs/codestream/observability/code-level-metrics) vous donne des informations détaillées sur les performances de votre code au niveau de la méthode. Vous verrez des métriques pour chaque méthode qui a été instrumentée automatiquement, ou qui a été instrumentée par l&amp;apos;annotation @Trace.

Définissez les options de métriques au niveau du code dans la section `code_level_metrics` . Ils peuvent être [remplacés](#System_Properties) par une propriété système préfixée `newrelic.config.code_level_metrics` .

<CollapserGroup>
  <Collapser id="clm-enabled" title="enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    [Les métriques au niveau du code](/docs/codestream/observability/code-level-metrics) sont désactivées par défaut dans la version 7.10.0 de l&amp;apos;agent. Réglez ceci sur vrai pour l&amp;apos;activer. À partir de la version 7.11.0 de l&amp;apos;agent, la valeur par défaut est, comme indiqué ci-dessus, `true`.
  </Collapser>
</CollapserGroup>

## Erreurs configuration de la boîte de réception [#errors-inbox-configuration]

La définition de l’une des balises suivantes vous aidera à identifier les versions de votre logiciel qui génèrent les erreurs.

* `NEW_RELIC_METADATA_SERVICE_VERSION` créera `tags.service.version` sur les données d&amp;apos;événement contenant la version de votre code qui est déployée, dans de nombreux cas une version sémantique telle que 1.2.3, mais pas toujours.
* `NEW_RELIC_METADATA_RELEASE_TAG `créera `tags.releaseTag` sur les données d&amp;apos;événement contenant la tag de sortie (comme v0.1.209 ou sortie-209).
* `NEW_RELIC_METADATA_COMMIT` créera `tags.commit` sur les données d&amp;apos;événement contenant le commit sha. Vous pouvez utiliser le SHA entier ou simplement les sept premiers caractères (par exemple, 734713b).

Une prochaine version de la boîte de réception des erreurs suivra automatiquement les versions de votre logiciel qui génèrent des erreurs. Les données de version s&apos;afficheront dans [CodeStream](/docs/codestream/how-use-codestream/performance-monitoring/#buildsha).

## Traceur inter-application [#Cross\_Application\_Tracer][#Cross_Application_Tracer]

<Callout variant="important">
  Le tracing inter-applications est obsolète à partir de la version 7.4.0 de l&apos;agent et sera supprimé dans une future version de l&apos;agent.

  Au lieu d&apos;utiliser le tracing inter-application, nous recommandons notre fonctionnalité [de tracing distribué](#distributed-tracing) . tracing distribué est une amélioration de la fonctionnalité de tracing inter-applicationet est recommandé pour les grands systèmes distribués.
</Callout>

Définissez les options de tracing inter-applications dans la section `cross_application_tracer` . Ces paramètres peuvent être [remplacés](#System_Properties) par une propriété système préfixée `newrelic.config.cross_application_tracer` .

[Le tracing inter-application](/docs/apm/transactions/cross-application-traces/cross-application-tracing) ajoute des en-têtes de demande et de réponse aux appels externes à l&amp;apos;aide de la bibliothèque Apache HttpClient. Cela fournit de meilleures données de performances lors de l&amp;apos;appel du moniteur d&amp;apos;application par un autre agent New Relic .

<CollapserGroup>
  <Collapser id="cat-enabled" title="enabled (OBSOLÈTE)">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    [Le tracing inter-applications](/docs/apm/transactions/cross-application-traces/cross-application-tracing) est activé par défaut. Réglez ceci sur faux pour le désactiver.
  </Collapser>
</CollapserGroup>

## Événements personnalisés [#Custom\_Events][#Custom_Events]

Définissez les paramètres de l&apos;événement personnalisé dans la section `custom_insights_events` . Vous pouvez [remplacer](#System_Properties) ces paramètres par une propriété système préfixée par `newrelic.config.custom_insights_events` .

APM vous [permet d&apos;enregistrer des données d&apos;événements personnalisés](/docs/insights/insights-data-sources/custom-data/insert-custom-events-new-relic-apm-agents) via agent APIl&amp;apos;de de langage New Relic, que [vous pouvez ensuite requêter .](/docs/query-your-data/explore-query-data/explore-data/introduction-querying-new-relic-data)

<Callout variant="important">
  Pour les versions d&apos;agent Java antérieures à 4.1.0, la configuration YAML suivante est reconnue :

  ```yml
  custom_insights_events.enabled: true
    custom_insights_events.max_samples_stored: 5000
  ```

  Pour les versions d&apos;agent 4.1.0 et au-dessus, la configuration YAML utilise le formatage de section imbriquée :

  ```yml
  custom_insights_events:
    enabled: false
    max_samples_stored: 5000
  ```
</Callout>

<CollapserGroup>
  <Collapser id="cie-enabled" title="enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Cela active le service événement personnalisé.
  </Collapser>

  <Collapser id="cie-max_attribute_value" title="max_attribute_value">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Entier
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `255`
          </td>
        </tr>
      </tbody>
    </table>

    La taille maximale d&apos;une valeur d&apos;attribut, après laquelle la valeur sera tronquée. La valeur par défaut est `255` octets (dans le codage de jeu de caractères UTF-8) et la limite maximale est `4095`.

    Cette configuration existe dans l&apos;agent Java version 8.9.0+.
  </Collapser>

  <Collapser id="cie-max_samples_stored" title="max_samples_stored">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Entier
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `30000`
          </td>
        </tr>
      </tbody>
    </table>

    * Le nombre maximal d&apos;événements personnalisés échantillonnés signalés toutes les 60 secondes.
    * Lors de la configuration de l&apos;agent pour [monitoring de l&apos;IA](/docs/ai-monitoring/intro-to-ai-monitoring), définissez la valeur maximale sur `100000`. Garantit que la quantité maximale d&amp;apos;événements LLM est capturée.
  </Collapser>
</CollapserGroup>

## Transformateur de classe [#Class\_Transformer][#Class_Transformer]

Définissez les paramètres liés à l’instrumentation dans la section `class_transformer` . Vous pouvez remplacer ces paramètres par une [propriété système](#System_Properties) préfixée `newrelic.config.class_transformer` ou une [variable d&apos;environnement](#Environment_Variables) préfixée `NEW_RELIC_CLASS_TRANSFORMER_` .

<CollapserGroup>
  <Collapser id="ct-enhanced_spring_transaction_naming" title="enhanced_spring_transaction_naming">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            false
          </td>
        </tr>
      </tbody>
    </table>

    Lorsque cette option est activée, la dénomination améliorée des transactions Spring nommera toute transaction provenant d&apos;un contrôleur Spring d&apos;après l&apos;itinéraire défini et la méthode HTTP. Par exemple : `/customer/v1/edit (POST)`. Cela inclut les contrôleurs qui implémentent ou étendent les interfaces/classes avec des annotations liées à WebMVC (`@RestController`, `@Controller`, `@RequestMapping`, etc.).

    Par défaut, cette valeur est configurée sur `false`, ce qui nommera les transactions pour ces types de contrôleurs en fonction du nom de la classe et de la méthode du contrôleur. Par exemple ; `CustomerController/edit`. Il s’agit de la logique de dénomination reprise des versions précédentes de l’agent. Les contrôleurs « standard », avec toutes les annotations pertinentes présentes sur la classe réelle, seront toujours nommés en fonction de l&amp;apos;itinéraire et de la méthode HTTP.

    Cette configuration existe dans l&apos;agent Java version 8.9.0+.
  </Collapser>

  <Collapser id="ct-name_actuator_endpoints" title="name_actuator_endpoints">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            false
          </td>
        </tr>
      </tbody>
    </table>

    Par défaut, le point de terminaison de l&apos;actionneur intégré et le point de terminaison de l&apos;actionneur personnalisé (utilisant l&apos;annotation `@endpoint` et ses sous-classes) seront tous nommés `OperationHandler/handle` dans New Relic. L&amp;apos;activation de ce paramètre entraînera que le nom de la transaction reflétera l&amp;apos;URI du point de terminaison de l&amp;apos;actionneur de base réel. Par exemple, l&amp;apos;appel de `/actuator/loggers` ou `actuator/loggers/com.newrelic` entraînera le nom de transaction `actuator/loggers (GET)`. Ceci est pour empêcher le MGI.

    Pris en charge lors de l&apos;utilisation de Spring Boot v3 et versions ultérieures.

    Cette configuration existe dans l&apos;agent Java version 8.15.0+.
  </Collapser>

  <Collapser id="ct-trace_annotation_class_name" title="trace_annotation_class_name">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Chaîne
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Chaîne contenant le nom complet de la classe d&apos;annotation que l&apos;agent utilise pour déterminer les méthodes spécifiées par l&apos;utilisateur à instrument. Pour plus d&apos;informations sur les annotations personnalisées, consultez [Collection de métriques personnalisées Java](/docs/java/java-custom-metric-collection).
  </Collapser>

  <Collapser id="ct-servlet-user" title="com.newrelic.instrumentation.servlet-user">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Activez cette option pour capturer le nom `userPrincipal` . Ce nom est inclus comme attribut de trace de transaction (avec les noms d&amp;apos;attribut `user` et `enduser.id`) et [peut être interrogé](/docs/query-your-data/explore-query-data/explore-data/introduction-querying-new-relic-data). Cela vous permet également de voir dans [la boîte de réception des erreurs combien d&apos;utilisateurs sont impactés par un groupe d&apos;erreurs](/docs/errors-inbox/error-users-impacted/).
  </Collapser>
</CollapserGroup>

## Tracing distribué [#dt-main]

<Callout variant="important">
  L&apos;activation du tracing distribué désactive [le tracing inter-application](#Cross_Application_Tracer) et a d&amp;apos;autres effets sur la fonctionnalité APM . Avant l&amp;apos;activation, lisez le [guide de transition](/docs/transition-guide-distributed-tracing).

  Nécessite [l&apos;agent Java version 4.3.0 ou supérieure](/docs/agents/java-agent/installation/upgrade-java-agent).
</Callout>

[Le tracing distribué](/docs/understand-dependencies/distributed-tracing/get-started/introduction-distributed-tracing) vous permet de voir le chemin emprunté par une requête lorsqu&amp;apos;elle traverse un système distribué. Il est activé par défaut pour l&amp;apos;agent Java version 7.4.0 ou supérieure.

Dans le fichier de configuration, vous pouvez remplacer cela manuellement dans la section `distributed_tracing` . Vous pouvez également remplacer cela en utilisant une propriété système préfixée (`newrelic.config.distributed_tracing`) ou une variable d&amp;apos;environnement (`NEW_RELIC_DISTRIBUTED_TRACING_ENABLED`). Voir les exemples ci-dessous.

Pour plus d&apos;informations sur la configuration du tracing distribué, voir [Activer le tracing distribué pour votre application Java ](/docs/apm/agents/go-agent/instrumentation/distributed-tracing-go-agent).

<CollapserGroup>
  <Collapser id="dt-enabled" title="enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Définissez ceci sur `false` pour désactiver le tracing distribué. Par exemple, dans le fichier de configuration, vous utiliseriez :

    ```yml
    distributed_tracing:
      enabled: false
    ```

    Voici d’autres options pour désactiver le tracing distribué :

    [Propriété du système](/docs/agents/java-agent/configuration/java-agent-configuration-config-file#System_Properties):

    ```ini
    -Dnewrelic.config.distributed_tracing.enabled=false
    ```

    Variable environnementale :

    ```ini
    NEW_RELIC_DISTRIBUTED_TRACING_ENABLED=false
    ```
  </Collapser>

  <Collapser id="dt-exclude_newrelic_header" title="exclude_newrelic_header">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Par défaut, les versions prises en charge de l&apos;agent utilisent à la fois l&apos;en-tête `newrelic` et les en-têtes W3C Trace Context pour le tracing distribué. L&amp;apos;en-tête distribué de tracing `newrelic` permet l&amp;apos;interopérabilité avec les agents plus anciens qui ne prennent pas en charge les en-têtes W3C Trace Context . les versions d&amp;apos;agent qui prennent en charge les en-têtes W3C Trace Context les prioriseront par rapport aux en-têtes `newrelic` pour le tracing distribué.

    Si vous ne souhaitez pas utiliser l&apos;en-tête `newrelic`, définissez-le sur `true` pour que l&amp;apos;agent exclue l&amp;apos;en-tête `newrelic` et utilise uniquement les en-têtes W3C Trace Context pour le tracing distribué.

    Par exemple, pour exclure les en-têtes `newrelic` dans le fichier de configuration, vous utiliseriez :

    ```yml
    distributed_tracing:
      exclude_newrelic_header: true
    ```

    Pour exclure les en-têtes `newrelic` à l&amp;apos;aide d&amp;apos;une [propriété système](/docs/agents/java-agent/configuration/java-agent-configuration-config-file#System_Properties), vous devez utiliser :

    ```ini
    -Dnewrelic.config.distributed_tracing.exclude_newrelic_header=true
    ```
  </Collapser>

  <Collapser id="dt-sampler-remote-parent-sampled" title="échantillonneur.remote_parent_sampled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Chaîne
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `default`
          </td>
        </tr>
      </tbody>
    </table>

    This option defines how the agent should handle sampling spans when their parent span from an upstream entity was sampled. For example, setting `remote_parent_sampled: always_on` means the agent will always sample anything sampled by an upstream entity, until the sampling reservoir is full. The possible values are:

    * `default`: Use New Relic&amp;apos;s standard sampling rules.
    * `always_on`: Always sample spans whose upstream parent was sampled.
    * `always_off`: Always skip sampling spans whose upstream parent was sampled.

    ```yaml
    distributed_tracing:
      sampler:
        remote_parent_sampled: default
    ```
  </Collapser>

  <Collapser id="dt-sampler-remote-parent-not-sampled" title="sampler.remote_parent_not_sampled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Chaîne
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `default`
          </td>
        </tr>
      </tbody>
    </table>

    This option defines how the agent should handle sampling spans when their parent span from an upstream entity was not sampled. For example, setting `remote_parent_not_sampled: always_off` means the agent will not try to sample anything if the upstream entity did not sample the parent. The possible values are:

    * `default`: Use New Relic&amp;apos;s standard sampling rules.
    * `always_on`: Always sample spans whose upstream parent was not sampled.
    * `always_off`: Always skip sampling spans whose upstream parent was not sampled.

    ```yaml
    distributed_tracing:
      sampler:
        remote_parent_not_sampled: default
    ```
  </Collapser>
</CollapserGroup>

## Collecteur d&apos;erreur [#Error\_Collector][#Error_Collector]

Définissez les paramètres du collecteur d’erreurs dans la section `error_collector` . Sauf indication contraire, vous pouvez [remplacer](#System_Properties) ces paramètres par une propriété système préfixée par `newrelic.config.error_collector` . Le collecteur d&amp;apos;erreurs capture des informations sur les exceptions non détectées et les envoie à New Relic pour affichage.

<Callout variant="tip">
  Pour savoir comment configurer les erreurs pour l&apos;agent Java, notamment comment configurer les erreurs via l&apos;UI, consultez [configuration d&apos;erreur de l&apos;agent Java](/docs/agents/java-agent/configuration/java-agent-error-configuration).
</Callout>

<CollapserGroup>
  <Collapser id="ec-enabled" title="enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Activer la collecte des erreurs.
  </Collapser>

  <Collapser id="ec-ignore_classes" title="ignore_classes">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Section contenant une liste de chaînes `class_name` entièrement qualifiées
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Les noms de classe d&apos;exception spécifiés seront ignorés et n&apos;affecteront pas le taux d&apos;erreur ou le score Apdex, ni ne seront signalés à APM. <DNT>**Cannot be specified by system property.**</DNT>

    Ce paramètre est dynamique, donc l&apos;agent en cours d&apos;exécution remarquera les modifications apportées à `newrelic.yml` sans redémarrage JVM .

    Par exemple:

    ```yml
    error_collector:
      ignore_classes:
        - "com.example.MyException"
        - "com.example.DifferentException"
    ```

    Une variable d&apos;environnement peut être utilisée pour répertorier les noms de classes d&apos;exception que vous souhaitez ignorer :

    ```ini
    NEW_RELIC_ERROR_COLLECTOR_IGNORE_CLASSES="[\"com.example.MyException\", \"com.example.DifferentException\"]"
    ```
  </Collapser>

  <Collapser id="ec-ignore_messages" title="ignore_messages">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Section contenant un `class_name` entièrement qualifié et une liste de `messages` par classe d&amp;apos;erreur
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Spécifiez les noms de classe d’exception que l’agent doit ignorer. Les messages ignorés n&apos;affecteront pas le taux d&apos;erreur ou le score Apdex, et ne seront pas signalés à APM. Contient `yaml` paires constituées de :

    * Un nom de classe d&apos;exception entièrement qualifié qui ne doit pas être signalé à APM

      AND

    * Une liste d&apos;exceptions `message`à comparer (au moins une est obligatoire)

      Si le nom de la classe d&apos;exception correspond à une erreur mais pas le message, alors cette erreur <DNT>**will not**</DNT> doit être ignorée. Les chaînes de message utilisent `contains` pour la correspondance. Un message ne peut pas être fourni seul et doit toujours être associé à un nom de classe complet. <DNT>**Cannot be specified by system property.**</DNT>

      Ce paramètre est dynamique, donc l&apos;agent en cours d&apos;exécution remarquera les modifications apportées à `newrelic.yml` sans redémarrage JVM .

      Par exemple:

      ```yml
      error_collector:
        ignore_messages:
          com.example.MyException:
            - "Some error message to ignore"
            - "Some other error message to ignore"
          com.example.DifferentException:
            - "Some different error message to ignore"
      ```

      Une variable d&apos;environnement peut être utilisée pour répertorier les noms de classes d&apos;exception et les messages que vous souhaitez ignorer :

      ```ini
      NEW_RELIC_ERROR_COLLECTOR_IGNORE_MESSAGES="{\"com.example.MyException\": [\"Some error message to ignore\", \"Some other error message to ignore\"], \"com.example.DifferentException\": [\"Some different error message to ignore\"]}"
      ```
  </Collapser>

  <Collapser id="ec-ignore_status_codes" title="ignore_status_codes">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Liste de chaînes et de plages séparées par des virgules
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `404`
          </td>
        </tr>
      </tbody>
    </table>

    Une liste séparée par des virgules composée de plages individuelles et en pointillés de codes d&apos;état HTTP qui ne doivent pas être traités comme des erreurs.

    Si cette propriété est placée en commentaire dans le fichier configuration `newrelic.yml`, alors le code d&amp;apos;état 404 sera automatiquement ignoré. Lors de l&amp;apos;utilisation [de la configuration côté serveur](/docs/agents/manage-apm-agents/configuration/server-side-agent-configuration), le code d&amp;apos;état 404 doit être spécifié pour qu&amp;apos;il soit ignoré.

    Ce paramètre est dynamique, donc l&apos;agent en cours d&apos;exécution remarquera les modifications apportées à `newrelic.yml` sans redémarrage JVM .

    Par exemple:

    ```yml
    error_collector:
      ignore_status_codes: 404,507-511
    ```
  </Collapser>

  <Collapser id="ec-expected_classes" title="expected_classes">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Section contenant une liste de chaînes `class_name` entièrement qualifiées
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Empêche les classes d&apos;exception spécifiées d&apos;affecter le taux d&apos;erreur ou le score Apdex tout en signalant les erreurs à APM. <DNT>**Cannot be specified by system property.**</DNT>

    Ce paramètre est dynamique, donc l&apos;agent en cours d&apos;exécution remarquera les modifications apportées à `newrelic.yml` sans redémarrage JVM .

    Par exemple:

    ```yml
    error_collector:
      expected_classes:
        - "com.example.MyException"
        - "com.example.DifferentException"
    ```

    Une variable d&apos;environnement peut être utilisée pour répertorier les noms de classe d&apos;exception attendus :

    ```ini
    NEW_RELIC_ERROR_COLLECTOR_EXPECTED_CLASSES="[\"com.example.MyException\", \"com.example.DifferentException\"]"
    ```
  </Collapser>

  <Collapser id="ec-expected_messages" title="expected_messages">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Section contenant un `class_name` entièrement qualifié et une liste de `messages` par classe d&amp;apos;erreur
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Contient des paires yaml constituées d&apos;un nom de classe d&apos;exception entièrement qualifié qui doit être marqué comme prévu et ainsi empêché d&apos;affecter le taux d&apos;erreur ou le score Apdex et une liste d&apos;exceptions `message`à comparer, dont au moins une est requise. Si le nom de la classe d&amp;apos;exception correspond à une erreur mais pas le message, alors cette erreur <DNT>**will not**</DNT> sera marquée comme attendue et affectera donc le taux d&amp;apos;erreur et le score Apdex.

    Les chaînes de message utilisent `contains` pour la correspondance. Un message ne peut pas être fourni seul et doit toujours être associé à un nom de classe complet. <DNT>**Cannot be specified by system property.**</DNT>

    Ce paramètre est dynamique, donc l&apos;agent en cours d&apos;exécution remarquera les modifications apportées à `newrelic.yml` sans redémarrage JVM .

    Par exemple:

    ```yml
    error_collector:
      expected_messages:
        com.example.MyException:
          - "Some expected error message"
          - "Some other expected error message"
        com.example.DifferentException:
          - "Some different expected error message"
    ```

    Une variable d’environnement peut être utilisée pour répertorier les noms de classe et les messages d’exception attendus :

    ```ini
    NEW_RELIC_ERROR_COLLECTOR_EXPECTED_MESSAGES="{\"com.example.MyException\": [\"Some error message to ignore\", \"Some other error message to ignore\"], \"com.example.DifferentException\": [\"Some different error message to ignore\"]}"
    ```
  </Collapser>

  <Collapser id="ec-expected_status_codes" title="expected_status_codes">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Liste de chaînes et de plages séparées par des virgules
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Une liste séparée par des virgules composée de plages individuelles et en pointillés de codes d&apos;état HTTP à marquer comme prévu et ainsi à empêcher d&apos;affecter le taux d&apos;erreur ou le score Apdex.

    Ce paramètre est dynamique, donc l&apos;agent en cours d&apos;exécution remarquera les modifications apportées à `newrelic.yml` sans redémarrage JVM .

    Par exemple:

    ```yml
    error_collector:
      expected_status_codes: 415,500-506
    ```

    Les codes d&apos;état attendus peuvent également être avec la variable d&apos;environnement `NEW_RELIC_ERROR_COLLECTOR_EXPECTED_STATUS_CODES` .
  </Collapser>

  <Collapser id="cfg-error-attributes-enabled" title="attributes.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Ce paramètre peut être utilisé pour activer ou désactiver tous les attributs pour les erreurs de trace. Si `attributes.enabled` est `false` au niveau racine, alors aucun attribut ne sera envoyé pour tracer les erreurs, quelle que soit la manière dont cette propriété est définie sous `error_collector`.
  </Collapser>

  <Collapser id="cfg-ec-attributes-include" title="attributes.include">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Liste de chaînes
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Si les attributs sont activés pour les erreurs de trace, toutes les clés d&apos;attribut trouvées dans cette liste seront envoyées à New Relic dans les erreurs de trace. Pour plus d&apos;informations, consultez les [règles d&apos;attribut de l&apos;agent](/docs/apm/other-features/attributes/agent-attributes).
  </Collapser>

  <Collapser id="cfg-ec-attributes-exclude" title="attributes.exclude">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Liste de chaînes
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    les clés d&apos;attribut trouvées dans cette liste ne seront pas envoyées à New Relic en cas d&apos;erreurs de trace. Pour plus d&apos;informations, consultez les [règles d&apos;attribut de l&apos;agent](/docs/apm/other-features/attributes/agent-attributes).
  </Collapser>

  <Collapser id="ec-ignoreErrorPriority" title="ignorerErrorPriority">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Lorsque plusieurs erreurs sont constatées dans une transaction, seule la dernière erreur sera signalée par défaut. La définition de cette propriété sur `false` signalera uniquement la première erreur détectée. Pour plus d&amp;apos;informations, consultez l&amp;apos;[API noticeError](/docs/agents/java-agent/configuration/java-agent-error-configuration/). Par exemple:

    ```yml
    error_collector:
      ignoreErrorPriority: false
    ```
  </Collapser>

  <Collapser id="ec-ignore_errors" title="ignore_errors (OBSOLÈTE)">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Liste de chaînes séparées par des virgules
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Tous les noms de classe d’exception spécifiés ne seront pas traités comme des erreurs. Obsolète à partir de l&apos;agent Java 3.40.0 et remplacé par [`ignore_classes`](#ec-ignore_classes).

    Par exemple:

    ```yml
    error_collector:
      ignore_errors: some.other.MyException
    ```
  </Collapser>
</CollapserGroup>

## Traceur externe [#External\_Tracer][#External_Tracer]

Définissez les options de tracing externe dans la section `external_tracer` . Ces options peuvent être [remplacées](#System_Properties) par une propriété système préfixée `newrelic.config.external_tracer` .

<CollapserGroup>
  <Collapser id="cat-enabled" title="exclude_request_uri">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Ce paramètre peut être utilisé pour contrôler la collecte des URI de demande sortante pour les erreurs et le suivi des transactions. Définissez cette option sur vrai pour désactiver la collecte de ces informations.
  </Collapser>
</CollapserGroup>

## Configuration du nom d&apos;hôte [#hostname\_configuration][#hostname_configuration]

Définissez les options de configuration du nom d’hôte dans la section `process_host` . Ces options peuvent être [remplacées](#System_Properties) par une propriété système préfixée `newrelic.config.process_host` .

Utilisez ces propriétés pour configurer le nom d&apos;hôte affiché dans l&apos;UI:

<CollapserGroup>
  <Collapser id="display_name" title="display_name">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Chaîne
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Définissez un [nom](/docs/agents/java-agent/configuration/hostname-logic-java#display-name) d&amp;apos;affichage pour décorer l&amp;apos;étiquette « hôte : port » dans l&amp;apos;UI de New Relic .
  </Collapser>

  <Collapser id="ipv_preference" title="ipv_preference">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Chaîne
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `4`
          </td>
        </tr>
      </tbody>
    </table>

    Si le nom d’hôte ne peut pas être déterminé, l’adresse IP de l’hôte sera utilisée. Cette propriété détermine si l&apos;adresse IPv4 ou IPv6 doit être utilisée. La valeur par défaut est IPv4.
  </Collapser>
</CollapserGroup>

## Infinite Tracing

<Callout variant="important">
  Exigences:

  * [agent Java 5.12.1 ou supérieur](/docs/agents/java-agent/installation/update-java-agent).
  * Le Infinite Tracing ne fonctionne pas si `enable_auto_app_naming` est activé.
</Callout>

Pour activer Infinite Tracing, activez le tracing distribué et ajoutez le paramètre supplémentaire ci-dessous. Pour un exemple, voir [Agent de langage : Configurer le tracing distribué](/docs/understand-dependencies/distributed-tracing/enable-configure/language-agents-enable-distributed-tracing#java-config).

<CollapserGroup>
  <Collapser id="infinite-tracing-trace-observer-host" title="trace_observer.host">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Chaîne
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Pour obtenir de l&apos;aide pour obtenir une entrée d&apos;hôte d&apos;observateur trace Infinite Tracing valide, consultez [rechercher ou créer un observateur de trace](/docs/understand-dependencies/distributed-tracing/enable-configure/language-agents-enable-distributed-tracing#provision-trace-observer).

    Vous pouvez configurer cela via YAML :

    ```yml
    infinite_tracing:
      trace_observer:
        host: <var>YOUR_TRACE_OBSERVER_HOST</var>
    ```

    Vous pouvez également utiliser la propriété système `newrelic.config.infinite_tracing.trace_observer.host` ou la variable d’environnement `NEW_RELIC_INFINITE_TRACING_TRACE_OBSERVER_HOST`.
  </Collapser>
</CollapserGroup>

## Instrumentation

Ces options sont définies dans la strophe `instrumentation` et peuvent être remplacées en utilisant une propriété système préfixée `newrelic.config.instrumentation` .

<CollapserGroup>
  <Collapser id="trace-lambda-enabled" title="trace_lambda.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            false
          </td>
        </tr>
      </tbody>
    </table>

    Par défaut, les annotations [@TraceLambda](/docs/apm/agents/java-agent/api-guides/java-agent-api-instrument-using-annotation/#tracelambda) sont désactivées. Pour utiliser la fonctionnalité d&amp;apos;annotation pour le tracing des méthodes lambda, vous devez activer explicitement la fonctionnalité comme suit :

    Vous pouvez configurer cela via YAML :

    ```yml
    instrumentation:
      trace_lambda:
        enabled: true
    ```

    Vous pouvez également utiliser la propriété système `newrelic.config.instrumentation.trace_lambda.enabled=true` ou la variable d’environnement `NEW_RELIC_INSTRUMENTATION_TRACE_LAMBDA_ENABLED`.
  </Collapser>
</CollapserGroup>

## Collecteur Jar

L&apos;agent Java collecte des informations sur les fichiers JAR et leurs versions sur le chemin de classe de l&apos;application.

Définissez la configuration de la collection jar dans la section `jar_collector` . Ces options de configuration peuvent être [remplacées](#System_Properties) par une propriété système préfixée `newrelic.config.jar_collector` . Les options incluent :

<CollapserGroup>
  <Collapser id="cfg-jar-collector-enabled" title="enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Utilisé pour activer/désactiver la collecte et la création de rapports jar.
  </Collapser>

  <Collapser id="cfg-jar-collector-skip-temp-jars" title="skip_temp_jars">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Utilisé pour activer/désactiver la collecte de fichiers jar temporaires. Les fichiers JAR temporaires sont ceux résidant dans le répertoire spécifié par la propriété système `java.io.tmpdir`.
  </Collapser>

  <Collapser id="cfg-jar-collector-jars-per-second" title="jars_per_second">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Entier
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `10`
          </td>
        </tr>
      </tbody>
    </table>

    Le nombre maximal de pots à traiter par seconde. Doit être positif.
  </Collapser>
</CollapserGroup>

## JFR (Profilage en temps réel)

L&apos;agent Java utilise Java Flight Recorder (JFR) pour collecter des données JVM haute fidélité pour [le profilage en temps réel](/docs/agents/java-agent/features/real-time-profiling-java-using-jfr-metrics/).

Configurez le profilage en temps réel dans la section `jfr` du YAML de l&amp;apos;agent. Ces options de configuration peuvent être remplacées par [des propriétés système](#System_Properties) préfixées par `newrelic.config.jfr.` ou par [des variables d&apos;environnement](#Environment_Variables) préfixées par `NEW_RELIC_JFR_`.

<CollapserGroup>
  <Collapser id="jfr-enabled" title="enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Définissez sur `true` pour activer [le profilage en temps réel avec JFR](/docs/agents/java-agent/features/real-time-profiling-java-using-jfr-metrics/). Ce paramètre s&amp;apos;appliquera de manière dynamique et ne nécessite pas de redémarrage de la JVM.

    <Callout variant="important">
      Le profilage en temps réel avec JFR est activé par défaut dans [la version 7.1.0](/docs/release-notes/agent-release-notes/java-release-notes) de l&amp;apos;agent Java. Si vous utilisez une autre version d&amp;apos;agent 7.0.0 ou supérieure, vous pouvez activer JFR en modifiant la valeur sur `true`.
    </Callout>
  </Collapser>

  <Collapser id="jfr-audit_logging" title="audit_logging">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Définissez sur `true` pour activer le logging d&amp;apos;audit qui affichera toutes les métriques et événements JFR dans chaque lot de récolte. Le logging d&amp;apos;audit est extrêmement détaillée et ne doit être utilisée qu&amp;apos;à des fins de dépannage.

    <Callout variant="important">
      Ceci s&apos;applique à l&apos;agent Java [version 7.0.0 ou supérieure](/docs/release-notes/agent-release-notes/java-release-notes).
    </Callout>
  </Collapser>
</CollapserGroup>

## JMX

Pour définir ces options, utilisez la section `jmx` . Pour les [remplacer](#System_Properties), utilisez une propriété système préfixée par `newrelic.config.jmx` .

L&apos;agent Java utilise JMX pour collecter les données JVM. De plus, l&apos;agent peut exposer des métadonnées de liaison via JMX qui peuvent être utilisées par d&apos;autres systèmes de tracing.

<CollapserGroup>
  <Collapser id="jmx-enabled" title="enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Ce paramètre peut être utilisé pour activer ou désactiver toutes les fonctionnalités JMX.
  </Collapser>

  <Collapser id="jmx-linkingMetadataMBean" title="linkingMetadataMBean">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Ce paramètre peut être activé pour permettre à l&apos;agent Java d&apos;exposer des métadonnées de liaison sur JMX distant.

    <Callout variant="important">
      Ceci s&apos;applique à l&apos;agent Java [version 6.1.0 ou supérieure](/docs/release-notes/agent-release-notes/java-release-notes).
    </Callout>
  </Collapser>
</CollapserGroup>

## JVM des propriétés obfuscation

L&apos;agent Java envoie les propriétés JVM à New Relic pour les afficher dans l&apos;UI. À partir de la version `8.16.0` de l&amp;apos;agent Java, les valeurs de la plupart des propriétés seront obscurcies. Par exemple : `-Dprop=12345` sera désormais envoyé sous la forme `-Dprop=obfuscated`.

Définissez les options liées à l&apos;obfuscation, dans la section `obfuscate_jvm_props` du YAML de l&amp;apos;agent. Vous pouvez remplacer ces paramètres par une [propriété système](/docs/apm/agents/java-agent/configuration/java-agent-configuration-config-file/#System_Properties) préfixée `newrelic.config.obfuscate_jvm_props` ou une [variable d&apos;environnement](/docs/apm/agents/java-agent/configuration/java-agent-configuration-config-file/#Environment_Variables) préfixée `NEW_RELIC_OBFUSCATE_JVM_PROPS_` .

Par défaut, les valeurs des propriétés commençant par `-X` ne seront pas obscurcies.

<CollapserGroup>
  <Collapser id="obfuscate-jvm-properties-enabled" title="enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Utilisé pour activer/désactiver obfuscation des propriétés JVM .
  </Collapser>

  <Collapser id="obfuscate-jvm-properties-allow" title="allow">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Liste de chaînes
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Si obfuscation est activé, lorsque la clé de propriété correspond à une valeur dans cette liste, la valeur ne sera pas obscurcie.

    Les éléments de cette liste peuvent avoir des caractères génériques, `*` comme dernier caractère. Les conflits avec la liste de blocage sont résolus en suivant [les règles d&apos;attribut](/docs/apm/agents/java-agent/attributes/java-agent-attributes/#attruls), où `allow` fonctionne comme `include`.
  </Collapser>

  <Collapser id="obfuscate-jvm-properties-block" title="block">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Liste de chaînes
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Si obfuscation est activé, lorsque la clé de propriété correspond à une valeur dans cette liste, la valeur sera obscurcie.

    Les éléments de cette liste peuvent avoir des caractères génériques, `*` comme dernier caractère. Les conflits avec la liste de domaines autorisés sont résolus en suivant [les règles d&apos;attribut](/docs/apm/agents/java-agent/attributes/java-agent-attributes/#attruls), où `block` fonctionne comme `exclude`.
  </Collapser>
</CollapserGroup>

## Kafka fichier d&apos;attente des messages [#kafka-message-queues]

Des informations détaillées sur la configuration d&apos;instrumentation Kafka peuvent être trouvées sur la page [Instrumenter les files d&apos;attente des messages Kafka](/docs/apm/agents/java-agent/instrumentation/java-agent-instrument-kafka-message-queues/).

* [Collection d&apos;événements Kafka](/docs/apm/agents/java-agent/instrumentation/java-agent-instrument-kafka-message-queues/#collect-kafka-events)
* [Métriques des nœuds Kafka](/docs/apm/agents/java-agent/instrumentation/java-agent-instrument-kafka-message-queues/#kafka-node-metrics)
* [Événement de configuration Kafka](/docs/apm/agents/java-agent/instrumentation/java-agent-instrument-kafka-message-queues/#kafka-config)
* [Kafka diffuse les transactions](/docs/apm/agents/java-agent/instrumentation/java-agent-instrument-kafka-message-queues/#collect-kafka-streams-transactions)
* [Transactions de connexion Kafka](/docs/apm/agents/java-agent/instrumentation/java-agent-instrument-kafka-message-queues/#collect-kafka-connect-transactions)
* [Les traces de Kafka distribuées](/docs/apm/agents/java-agent/instrumentation/java-agent-instrument-kafka-message-queues/#collect-kafka-distributed-traces)

## Les logs en contexte [#logs-in-context]

À partir de la version `7.6.0` agent Java, la prise en charge [des logs en contexte](/docs/logs/logs-context/java-configure-logs-context-all) a été ajoutée à l&amp;apos;agent, le rendant facile à utiliser pour le framework de logging pris en charge. Pour des conseils sur l&amp;apos;utilisation de l&amp;apos;agent Java pour les logs en contexte, voir [Java logs en contexte](/docs/logs/logs-context/java-configure-logs-context-all).

La modification de ces paramètres dans votre fichier de configuration d&apos;agent local se produit de manière dynamique et ne nécessite pas de redémarrage de l&apos;agent pour que ces modifications prennent effet. Un exemple de configuration :

```yml
application_logging:
  enabled: true
  forwarding:
    enabled: true
    max_samples_stored: 10000
    labels:
      enabled: false
      exclude:
    context_data:
      enabled: false
      include:
      exclude:
  metrics:
    enabled: true
  local_decorating:
      enabled: false
```

Définissez les logs dans le contexte configuration dans la section `application_logging`. Cela peut être [remplacé](/docs/apm/agents/java-agent/configuration/java-agent-configuration-config-file#System_Properties) par une propriété système préfixée par `newrelic.config.application_logging` . La seule option disponible est :

<CollapserGroup>
  <Collapser id="cfg-application_logging-enabled" title="enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Définissez sur `true` pour activer les logs principaux en fonction du contexte. Lorsque cette option est activée, de logging supplémentaire framework instrumentation est activée, que les logs soient ou non décorés ou envoyés à New Relic.

    <Callout variant="important">
      l&apos;agent sortie 7.7.0 et les versions supérieures ont cette fonctionnalité activée dans le agent configuration fichier par défaut.
    </Callout>

    Définissez sur `false` pour désactiver complètement cette fonctionnalité, y compris la collecte des métriques log .
  </Collapser>
</CollapserGroup>

### Transfert de logs [#log-forwarding]

Si vous utilisez un framework de logging pris en charge et que vous souhaitez utiliser l&apos;agent pour envoyer votre log d&apos;application à New Relic, vous pouvez contrôler cela via les paramètres de la section `forwarding`. Ces paramètres peuvent être remplacés par la propriété système préfixée `newrelic.config.application_logging.forwarding` . Les options disponibles sont :

<CollapserGroup>
  <Collapser id="cfg-application_logging_forwarding-enabled" title="enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Permet l&apos;envoi du log d&apos;application à New Relic.

    <Callout variant="important">
      L&apos;agent sortie 7.7.0 et les versions supérieures ont cette fonctionnalité activée dans le agent configuration fichier par défaut.

      L&apos;utilisation de la fonctionnalité de transfert de logaugmentera votre ingestion de données, ce qui peut affecter votre facturation. Pour plus d&apos;informations, consultez notre documentation sur [le suivi de votre ingestion de données](/docs/apm/new-relic-apm/getting-started/get-started-logs-context#ingest).

      Si vous disposez déjà d&apos;une solution de transfert de loget que vous mettez à jour votre agent pour utiliser les logs automatiques dans ce contexte, assurez-vous de <DNT>**disable your old log forwarder**</DNT>. Sinon, votre application enverra des lignes log en double. Selon votre compte, cela peut entraîner une double facturation. Pour plus d&amp;apos;informations, suivez les procédures pour désactiver votre [redirecteur de logspécifique](/docs/logs/forward-logs/enable-log-management-new-relic#log-forwarding).
    </Callout>

    Réglez ceci sur `true` pour que votre log décoré soit envoyé à New Relic.

    Réglez ceci sur `false` si vous ne souhaitez pas que votre log décoré soit envoyé à New Relic.
  </Collapser>

  <Collapser id="cfg-application_logging_forwarding-max_samples_stored" title="max_samples_stored">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Entier
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `10000`
          </td>
        </tr>
      </tbody>
    </table>

    Un entier positif spécifiant le nombre maximal de lignes de log par minute à envoyer.

    Définissez cette valeur sur `0` pour désactiver efficacement l’envoi du log.

    <Callout variant="important">
      Ceci contrôle le nombre de logs envoyés *par minute*. La définition de `max_samples_stored` sur `0` (ou toute valeur inférieure à `12`) *ne désactive pas* la fonctionnalité elle-même, bien qu&amp;apos;elle n&amp;apos;entraîne aucune ligne log envoyée à New Relic.
    </Callout>

    Définissez cette valeur sur une valeur inférieure pour réduire la quantité de lignes log envoyées (peut provoquer un échantillonnage log ). Définissez cette valeur sur une valeur plus élevée pour envoyer plus de lignes log .

    Chaque log reçoit la même priorité que sa transaction associée. Les logs qui se produisent en dehors d&apos;une transaction recevront une priorité aléatoire. Certains logs peuvent ne pas être inclus car ils sont limités par `max_samples_stored`. Par exemple, si le logging `max_samples_stored` est définie sur 10 000 et que la transaction 1 comporte 10 000 entrées log, seules les entrées log de la transaction 1 seront enregistrées. Si la transaction 1 contient moins de 10 000 logs, vous recevez tous les logs de la transaction 1. S&amp;apos;il reste de la place, vous recevez l&amp;apos;intégralité du log de la transaction 2, et ainsi de suite.

    Si après tout le log des transactions échantillonnées est enregistré et qu&apos;elles n&apos;ont pas atteint la limite de `max_samples_stored`, alors les messages de log des transactions qui n&amp;apos;étaient pas dans notre échantillonnage sont envoyés. S&amp;apos;il en reste, les messages de log en dehors des transactions sont enregistrés.
  </Collapser>
</CollapserGroup>

#### Étiquettes de log (tags) [#log-labels]

L&apos;agent Java prend en charge l&apos;ajout d&apos;étiquettes personnalisées (tag) aux logs transmis par l&apos;agent. Les étiquettes proviennent de la section [étiquettes](#labels) au niveau supérieur de la configuration de l&amp;apos;agent. Cette fonctionnalité peut être activée dans la section `labels` , imbriquée sous la section `forwarding` . Vous pouvez remplacer ces paramètres à l’aide de la propriété système préfixée `newrelic.config.application_logging.forwarding.labels` . Les options disponibles incluent :

<CollapserGroup>
  <Collapser id="cfg-application_logging_forwarding_labels" title="enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Active ou désactive l&apos;ajout d&apos;étiquettes par l&apos;agent aux logs transmis à New Relic.
  </Collapser>

  <Collapser id="cfg-application_logging_forwarding_labels-exclude" title="exclude">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Liste de chaînes
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Une liste insensible à la casse de noms d&apos;étiquettes à **exclure** lorsque les étiquettes de logs sont activées. Cet attribut ne prend pas en charge les caractères génériques ou les expressions régulières.

    <Callout variant="important">
      Lors de l&apos;ajout d&apos;étiquettes en tant qu&apos;attribut, l&apos;agent préfixe les clés avec `tags.`. Ce préfixe n&amp;apos;est **PAS** inclus lors de la correspondance avec les règles de filtrage d&amp;apos;exclusion.
    </Callout>
  </Collapser>
</CollapserGroup>

#### Données de contexte du log [#log-context-data]

L&apos;agent Java peut capturer des données de contexte (Mapped Diagnostic Context dans logback/slf4j, ThreadContext dans log4j2) et ajouter son contenu comme attribut dans le log transmis à New Relic. Vous pouvez contrôler cela via les paramètres de la section `context_data`, imbriquée sous la section `forwarding` . Ces paramètres peuvent être remplacés par la propriété système préfixée `newrelic.config.application_logging.forwarding.context_data` . Les options disponibles sont :

<CollapserGroup>
  <Collapser id="cfg-application_logging_forwarding_context_data-enabled" title="enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Définissez ceci sur `true` pour l&amp;apos;envoi de données de contexte en tant qu&amp;apos;attribut log à New Relic.

    Définissez cette valeur sur `false` si vous ne souhaitez pas que les données de contexte du log soient envoyées à New Relic.
  </Collapser>

  <Collapser id="cfg-application_logging_forwarding_context_data-include" title="include">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Liste de chaînes
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Si `context_data` est activé pour le transfert de log, toutes les clés d&amp;apos;attribut trouvées dans cette liste seront envoyées à New Relic dans les enregistrements log . Si cette liste est vide, tous les attributs seront envoyés.
  </Collapser>

  <Collapser id="cfg-application_logging_forwarding_context_data-exclude" title="exclude">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Liste de chaînes
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Si `context_data` est activé pour le transfert de log, toutes les clés d&amp;apos;attribut trouvées dans cette liste ne seront PAS envoyées à New Relic dans les enregistrements log .

    La liste d&apos;inclusion et d&apos;exclusion suit les règles `Exclude overrides include`, `More specific rules take priority`, `Keys are case-sensitive` et `Use an asterisk for wildcards` définies dans [les règles d&apos;attribut](/docs/apm/agents/java-agent/configuration/java-agent-configuration-config-file).
  </Collapser>
</CollapserGroup>

### Métriques de Log [#log-metrics]

En plus de vous permettre de décorer et d&apos;envoyer des lignes log individuelles, l&apos;agent Java peut capturer des données métriques de logging. Vous pouvez trouver ces données dans le graphique du log dans l&apos;UI de New Relic. Vous pouvez configurer les paramètres des métriques log dans la section `metrics`. Vous pouvez remplacer ces paramètres avec la propriété système préfixée `newrelic.config.application_logging.metrics` . La seule option disponible est :

<CollapserGroup>
  <Collapser id="cfg-application_logging_metrics-enabled" title="enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Permet la capture d&apos;informations métriques sur votre log et votre niveau de log, qui sont affichées dans un graphique sur la page APM <DNT>**Summary**</DNT>.

    Laissez ce paramètre sur `true` pour permettre à l&amp;apos;agent de capturer des informations métriques sur votre log.

    Réglez ceci sur `false` pour désactiver cette fonctionnalité.

    <Callout variant="important">
      Si vous désactivez la collecte des métriques log, le graphique log sur la page de résumé apparaîtra vide.
    </Callout>
  </Collapser>
</CollapserGroup>

### Décoration de logs [#log-decorating]

Vous pouvez configurer les paramètres de décoration log dans la section `local_decorating`. Vous pouvez l&amp;apos;utiliser pour contrôler la manière dont les lignes log locales sont décorées. Vous pouvez remplacer ces paramètres par une propriété système préfixée par `newrelic.config.application_logging.local_decorating` . La seule option disponible est :

<CollapserGroup>
  <Collapser id="cfg-application_logging-local_decorating" title="enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Cela contrôle si les lignes log stockées localement sont décorées ou non. Ceci est indépendant du fait que le transfert de logsoit activé ou non et est utilisé pour aider les clients qui souhaitent utiliser une solution de transfert de logdistincte.

    Définissez cette valeur sur `true` pour que l&amp;apos;agent ajoute des logs en contexte liant les métadonnées aux lignes log stockées localement par l&amp;apos;infrastructure prise en charge.

    <Callout variant="important">
      L&apos;activation de la décoration log local ajoutera des liens cryptés à vos fichiers log d&apos;application, ce qui entraînera une augmentation du stockage sur disque. Désactivez cette fonctionnalité si cela est inacceptable.

      Il n&apos;est pas nécessaire d&apos;utiliser la décoration log locaux lorsque le transfert de logest activé. Cela entraînerait l&apos;ajout inutile de liens cryptés à votre message de log, ce qui pourrait être visuellement gênant.
    </Callout>

    Réglez ceci sur `false` pour désactiver la fonctionnalité de décoration locale. Cela *n&apos;aura aucun* impact sur la décoration des lignes log envoyées à New Relic.
  </Collapser>
</CollapserGroup>

## Configuration du logging [#Logging-Configuration]

Ceux-ci font partie des variables de configuration générales. Ils sont présentés ici car ils sont fréquemment modifiés à des fins de débogage.

Certaines des variables de configuration de logging sont dynamiques et ne nécessitent pas de redémarrage de l&apos;hôte pour prendre effet. Par instance, si les fichiers log augmentent trop rapidement, [`log_level`](#cfg-log_level) peut être défini sur un paramètre moins détaillé pour réduire le taux de rapports.

Voici l&apos;ordre de priorité et l&apos;explication des variables configuration affectant la rotation log .

* Si `log_daily` est `true`:

  * Une valeur `log_limit_in_kbytes` supérieure à zéro entraînera une politique de déclenchement composite, où le log sera renouvelé une fois par jour ou lorsque la taille définie sera atteinte, conservant jusqu&amp;apos;à `log_file_count` fichiers
  * Une valeur `log_limit_in_kbytes` de zéro entraînera un roulement du log une fois par jour conservant jusqu&amp;apos;à `log_file_count` fichiers

* Si `log_daily` est `false` et `log_limit_in_kbytes` &amp;gt; 0, une politique basée sur la taille sera configurée, où les logs seront reconduits lorsque la taille définie sera atteinte, conservant jusqu&amp;apos;à `log_file_count` fichiers

* Si `log_daily` est `false` et `log_limit_in_kbytes` = 0, aucune logique de roulement de fichier de log ne sera configurée

En fonction du taux de croissance, il est possible que la taille du fichier log dépasse légèrement la valeur configurée.

<CollapserGroup>
  <Collapser id="cfg-log_file_count" title="log_daily">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Réglez sur `true` pour faire rouler le log quotidiennement.
  </Collapser>

  <Collapser id="cfg-log_file_count" title="log_file_count">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Entier
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `1`
          </td>
        </tr>
      </tbody>
    </table>

    Le nombre maximal de fichiers de log à conserver lors de l&apos;utilisation de la rotation log .
  </Collapser>

  <Collapser id="cfg-log_file_name" title="log_file_name">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Chaîne
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `newrelic_agent.log`
          </td>
        </tr>
      </tbody>
    </table>

    Le nom non qualifié du fichier de log ou la chaîne `STDOUT` qui sera log à la sortie standard.
  </Collapser>

  <Collapser id="cfg-log_file_path" title="log_file_path">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Chaîne
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `logs` sous-répertoire où se trouve `newrelic.jar`
          </td>
        </tr>
      </tbody>
    </table>

    Le chemin du fichier de log.

    <Callout variant="tip">
      Si `log_file_path` est spécifié, le répertoire doit déjà exister. Si la valeur par défaut est utilisée, l&amp;apos;agent tentera de créer le répertoire.
    </Callout>
  </Collapser>

  <Collapser id="cfg-log_level" title="log_level">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Chaîne
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `info`
          </td>
        </tr>
      </tbody>
    </table>

    Le niveau de verbosité log . Lorsque vous modifiez ce paramètre dans le fichier de configuration yaml de l&apos;agent, il sera mis à jour de manière dynamique. Cependant, la variable d&apos;environnement et la propriété système ne seront pas mises à jour de manière dynamique.

    L&apos;agent utilise son propre fichier de log pour conserver son logging séparée de celle de votre application. Les options valides, par ordre de verbosité, sont :

    * `off`

    * `severe`

    * `warning`

    * `info`

    * `fine`

    * `finer`

    * `finest`

      <Callout variant="caution">
        N&apos;utilisez pas le logging `debug` ou `trace` à moins que le support New Relic ne vous demande de les utiliser. Ces niveaux de logging peuvent générer une surcharge excessive. Dans la plupart des situations, utilisez `info`.
      </Callout>

      Ce paramètre est dynamique, donc l&apos;agent en cours d&apos;exécution remarquera les modifications apportées à `newrelic.yml` sans redémarrage JVM .
  </Collapser>

  <Collapser id="cfg-log_limit_in_kbytes" title="log_limit_in_kbytes">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Entier
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `0`
          </td>
        </tr>
      </tbody>
    </table>

    La taille du fichier log en kilo-octets à laquelle les fichiers log sont tournés. Réglez sur `0` pour aucune limite.
  </Collapser>
</CollapserGroup>

## Traceur de messages [#Transaction\_Tracer][#Transaction_Tracer]

Définissez les options du traceur de messages dans la section `message_tracer` . Vous pouvez [remplacer](#System_Properties) ces paramètres par une propriété système préfixée par `newrelic.config.message_tracer` .

<CollapserGroup>
  <Collapser id="tt-enabled" title="segment_parameters.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Ajoute des propriétés de message à l&apos;attribut traceur. Réglez ceci sur `false` pour le désactiver.
  </Collapser>
</CollapserGroup>

## SDK Open télémétrie Auto-configuration [#otel-sdk-autoconfiguration]

Configuration pour l&apos;instrumentation de configuration automatique du SDK de télémétrie ouvert sous la section :

```yml
  opentelemetry:
    sdk:
      autoconfigure:
```

<CollapserGroup>
  <Collapser id="cfg-otel-sdk-autoconfiguration-enabled" title="enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Permet d&apos;activer la fonctionnalité d&apos;autoconfiguration du SDK OpenTelemetry de l&apos;agent. Peut être défini via la propriété système :

    ```ini
    -Dnewrelic.config.opentelemetry.sdk.autoconfigure.enabled=true
    ```

    La valeur par défaut est vrai.
  </Collapser>
</CollapserGroup>

## Agent de sécurité [#sec-agent]

[New Relic sécurité agent interactif de test de sécurité](/docs/iast/introduction/) des (IAST) de New Relic Security teste votre application pour détecter toute vulnérabilité exploitable en rejouant la requête HTTP générée avec une charge vulnérable.

<Callout variant="important">
  Exécutez IAST avec une déploiement de non-production uniquement pour éviter d&apos;exposer les vulnérabilités de votre logiciel de production.
</Callout>

Vous pouvez définir la configuration de l&apos;agent de sécurité New Relic dans la section `security` . Ces paramètres peuvent être [remplacés](#System_Properties) par une propriété système préfixée par `newrelic.config.security` . Les options incluent :

<CollapserGroup>
  <Collapser id="cfg-security-agent-enabled" title="agent.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Pour désactiver complètement toutes les fonctionnalités de sécurité, définissez cet indicateur sur faux. Cette propriété est lue une seule fois au démarrage de l&apos;application. La valeur par défaut est faux.
  </Collapser>

  <Collapser id="cfg-security-enabled" title="enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Détermine si les données de sécurité sont envoyées à New Relic ou non. Lorsque cette option est désactivée et que agent.enabled est vrai, le module de sécurité s&apos;exécutera mais les données ne seront pas envoyées. La valeur par défaut est faux.
  </Collapser>

  <Collapser id="cfg-security-mode" title="mode">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Chaîne
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `IAST`
          </td>
        </tr>
      </tbody>
    </table>

    Mode de sécurité New Relic : IAST. La valeur par défaut est IAST. En raison de la nature invasive de l&apos;analyse IAST, N&apos;ACTIVEZ PAS ce mode dans un environnement de production ou dans un environnement où des données de production sont traitées.
  </Collapser>

  <Collapser id="cfg-security-validator-service-url" title="URL du service de validation">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Chaîne
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `wss://csec.nr-data.net`
          </td>
        </tr>
      </tbody>
    </table>

    URL de connexion SaaS de New Relic Security. Il s’agit du point de terminaison auquel l’agent de sécurité envoie les données. Il doit correspondre à l’environnement que vous avez défini pour l’agent Java APM.

    Production américaine : wss\://csec.nr-data.net
  </Collapser>

  <Collapser id="cfg-security-detection-rci-enabled" title="detection.rci.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Activez la détection des événements de sécurité RCI. La valeur par défaut est vrai.
  </Collapser>

  <Collapser id="cfg-security-detection-rxss-enabled" title="detection.rxss.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Activez la détection des événements de sécurité RXSS. La valeur par défaut est vrai.
  </Collapser>

  <Collapser id="cfg-security-detection-deserialization-enabled" title="detection.deserialization.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Activer la détection des événements de sécurité de désérialisation. La valeur par défaut est vrai.
  </Collapser>
</CollapserGroup>

<Callout variant="important">
  Le mode Tests interactifs de sécurité des applications ( )New Relic Security nécessite agent IAST [agent Java version 8.4.0 ou supérieure .](/docs/agents/java-agent/installation/upgrade-java-agent)
</Callout>

## Détection de transaction lente

L&apos;agent peut désormais détecter les transactions lentes via l&apos;événement `SlowTransaction` depuis la version Java de l&amp;apos;agent `8.7.0`. Ces événements sont enregistrés lorsque la durée de la transaction dépasse un certain seuil. Par défaut, le seuil est de 600 000 millisecondes (10 minutes).

La détection des transactions lentes est définie dans `slow_transactions` et peut être [remplacée](#System_Properties) en utilisant une propriété système préfixée `newrelic.config.slow_transactions` . Les options incluent :

<CollapserGroup>
  <Collapser id="cfg-slow-transactions-enabled" title="enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Utilisé pour activer/désactiver la détection des transactions lentes.
  </Collapser>

  <Collapser id="cfg-slow-transactions-threshold" title="threshold">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Entier
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `600000`
          </td>
        </tr>
      </tbody>
    </table>

    Détermine le temps en millisecondes nécessaire à une transaction pour qu&apos;un événement `SlowTransaction` soit signalé.
  </Collapser>

  <Collapser id="cfg-evaluate_completed_transaction" title="evaluate_completed_transaction">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Si cette option est définie sur vrai, chaque transaction sera vérifiée pour vérifier si elle dépasse le seuil défini à la fin de la transaction. Notez que si un grand nombre de transactions dépasse le seuil, cela peut être coûteux en termes de calcul puisqu&apos;une trace d&apos;appels est envoyée à chaque événement SlowTransaction.
  </Collapser>
</CollapserGroup>

## Événements de span

[Span événement](/docs/apm/distributed-tracing/ui-data/span-event) sont signalés pour [tracing distribué](#distributed-tracing). Vous devez activer le tracing distribué pour signaler l&amp;apos;événement span.

Définissez configuration de l&apos;événement span dans la section `span_events`. Ces paramètres peuvent être [remplacés](#System_Properties) par une propriété système préfixée par `newrelic.config.span_events` . Les options incluent :

<CollapserGroup>
  <Collapser id="cfg-span-events-enabled" title="enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Utilisé pour activer/désactiver les rapports d&apos;événements SPAN.
  </Collapser>

  <Collapser id="cfg-span-events-max-samples-stored" title="max_samples_stored">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Entier
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `2000`
          </td>
        </tr>

        <tr>
          <th>
            Max
          </th>

          <td>
            `10000`
          </td>
        </tr>
      </tbody>
    </table>

    * Détermine le nombre d&apos;événements span qui peuvent être capturés pendant un cycle de collecte agent . Disponible dans l&apos;agent Java 7.4.0 et supérieur.
    * Lors de la configuration de l&apos;agent pour [monitoring de l&apos;IA](/docs/ai-monitoring/intro-to-ai-monitoring), définissez la valeur maximale sur `10000`. Garantit que la quantité maximale de traces soit capturée.

    <Callout variant="important">
      L&apos;augmentation du nombre d&apos;événements SPAN peut entraîner une surcharge supplémentaire agent .
    </Callout>
  </Collapser>

  <Collapser id="cfg-span-events-attributes-enabled" title="attributes.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Ce paramètre peut être utilisé pour activer ou désactiver tous les attributs d&apos;un événement SPAN. Si `attributes.enabled` au niveau racine est `false`, aucun attribut ne sera envoyé à l&amp;apos;événement span, quelle que soit la manière dont cette propriété (`span_events.attributes.enabled`) est définie.
  </Collapser>

  <Collapser id="cfg-span-events-attributes-include" title="attributes.include">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Liste de chaînes
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Si les attributs sont activés pour l&apos;événement SPAN, toutes les clés d&apos;attribut trouvées dans cette liste seront envoyées à New Relic dans `span_events`. Pour plus d&amp;apos;informations, consultez les [règles d&apos;attribut de l&apos;agent](/docs/apm/other-features/attributes/agent-attributes).
  </Collapser>

  <Collapser id="cfg-span-events-attributes-exclude" title="attributes.exclude">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Liste de chaînes
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Toutes les clés d&apos;attribut trouvées dans cette liste ne seront pas envoyées à New Relic lors de l&apos;événement SPAN. Pour plus d&apos;informations, consultez les [règles d&apos;attribut de l&apos;agent](/docs/apm/other-features/attributes/agent-attributes).
  </Collapser>
</CollapserGroup>

<Callout variant="important">
  Le filtrage des attributs Span événement nécessite [agent Java version 4.10.0 ou supérieure](/docs/agents/java-agent/installation/upgrade-java-agent).
</Callout>

## Exceptions aux bandes [#strip\_exceptions][#strip_exceptions]

Définissez les options d’exceptions de bande dans la section `strip_exception_messages` . Ces options peuvent être [remplacées](#System_Properties) par une propriété système préfixée `newrelic.config.strip_exception_messages` . Activez ce paramètre pour contrôler si les messages d’exception Java sont signalés à New Relic.

<CollapserGroup>
  <Collapser id="strip_exception_messages" title="enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Par défaut, cette valeur est définie sur `false`, ce qui signifie que l&amp;apos;agent envoie les messages de toutes les exceptions au [collecteur New Relic](/docs/accounts-partnerships/education/getting-started-new-relic/glossary#collector).

    * Si vous définissez cette valeur sur `true`, l&amp;apos;agent supprime les messages des exceptions afin d&amp;apos;éviter de capturer par inadvertance des informations sensibles.
    * Si vous activez [le mode haute sécurité](/docs/agents/manage-apm-agents/configuration/high-security-mode), celui-ci est automatiquement défini sur `true`.
    * Si vous définissez `enabled` sur `true` mais que vous souhaitez que l&amp;apos;agent capture les messages provenant d&amp;apos;exceptions spécifiques, ajoutez les exceptions à votre [liste de domaines autorisés](#strip_exception_messages_whitelist).
  </Collapser>

  <Collapser id="strip_exception_messages_whitelist" title="whitelist (OBSOLÈTE)">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Chaîne
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    <Callout variant="important">
      Cette configuration est obsolète à partir de la version 5.10.0 de l&apos;agent et sera supprimée dans une future version de l&apos;agent. Utilisez plutôt `allowed_classes`.
    </Callout>

    Si vous définissez `enabled` sur `true` mais que vous souhaitez que l&amp;apos;agent capture les messages pour des exceptions spécifiques, ajoutez chaque exception à `whitelist`, séparée par une virgule.
  </Collapser>

  <Collapser id="strip_exception_messages_allowed_classes" title="allowed_classes">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Chaîne
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Si vous définissez `enabled` sur `true` mais que vous souhaitez que l&amp;apos;agent capture les messages pour des exceptions spécifiques, ajoutez chaque exception à `allowed_classes`, séparée par une virgule.
  </Collapser>
</CollapserGroup>

## Profileur de filetage [#Thread\_Profiler][#Thread_Profiler]

Définissez les options du profileur de thread dans la section `thread_profiler` . Ces options peuvent être [remplacées](#System_Properties) par une propriété système préfixée `newrelic.config.thread_profiler` .

Le profileur de thread mesure le temps d&apos;horloge, le temps CPU et le nombre d&apos;appels de méthode dans les threads de votre application pendant leur exécution.

<CollapserGroup>
  <Collapser id="tp-enabled" title="enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Activer le profileur de thread.
  </Collapser>
</CollapserGroup>

## Événement de transaction [#Transaction\_Events][#Transaction_Events]

Définissez les options de l’événement de transaction dans la section `transaction_events` . Ces options peuvent être [remplacées](#System_Properties) par une propriété système préfixée `newrelic.config.transaction_events` .

Les données d&apos;événement de transaction sont utilisées pour afficher l&apos;histogramme et le centile dans l&apos;UI.

<Callout variant="important">
  Auparavant, cette section s&apos;appelait `analytics_events`. Si votre fichier de configuration utilise toujours `analytics_events`, mettez à jour votre agent pour utiliser `transaction_events`.
</Callout>

<CollapserGroup>
  <Collapser id="ae-enabled" title="enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Activez le service transaction événement.
  </Collapser>

  <Collapser id="ae-max_samples_stored" title="max_samples_stored">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Entier
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `2000`
          </td>
        </tr>

        <tr>
          <th>
            Max
          </th>

          <td>
            `10000`
          </td>
        </tr>
      </tbody>
    </table>

    Le nombre maximal d&apos;événements de transaction échantillonnés signalés toutes les 60 secondes.

    <Callout variant="important">
      Le nombre minimum d&apos;événements de transaction d&apos;échantillon est de 12. Les agents avec la version 5.5.0 ou supérieure envoient des données toutes les 5 secondes. Si vous définissez le nombre d&apos;événements à moins de 12, le nombre d&apos;événements envoyés pendant le cycle de collecte sera insuffisant, ce qui entraînera l&apos;absence d&apos;envoi de données.
    </Callout>
  </Collapser>

  <Collapser id="tt-custom-request-headers" title="custom_request_headers">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Liste des cartes
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    <Callout variant="important">
      Contrairement à d’autres paramètres, `custom_request_headers` doivent être associés et doivent être définis dans le fichier `newrelic.yml` . Ils ne peuvent pas être écrasés par des arguments de machine virtuelle Java (propriété système) ou des variables d&amp;apos;environnement.
    </Callout>

    Une liste de cartes avec les clés appariées `header_name` et l&amp;apos;optionnelle `header_alias`. Choisissez un ou plusieurs en-têtes de requête HTTP personnalisés à ajouter comme attribut de transaction.

    Vous pouvez répertorier plusieurs configurations d’en-tête :

    ```yml
    transaction_events:
      custom_request_headers:
        -
          header_name: "X-Custom-Header-1"
        -
          header_name: "X-Custom-Header-2"
          header_alias: "CustomHeader2alias"
    ```

    Dans le premier ensemble de cartes, `X-Custom-Header-1` est capturé et signalé par l&amp;apos;agent comme nom d&amp;apos;en-tête pour une valeur correspondante de l&amp;apos;objet de demande. Le `header_name` sera également le nom de l&amp;apos;attribut envoyé à New Relic.

    Dans le deuxième ensemble de cartes, l&apos;en-tête de la requête est `X-Custom-Header-2`, mais `CustomHeader2alias` est le nom envoyé à New Relic.
  </Collapser>

  <Collapser id="cfg-events-attributes-enabled" title="attributes.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Ce paramètre peut être utilisé pour activer ou désactiver tous les attributs d&apos;un événement de transaction. Si `attributes.enabled` est `false` au niveau racine, alors aucun attribut ne sera envoyé à l&amp;apos;événement de transaction, quelle que soit la manière dont cette propriété est définie sous `transaction_events`.
  </Collapser>

  <Collapser id="cfg-te-attributes-include" title="attributes.include">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Liste des chaînes
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Si les attributs sont activés pour l&apos;événement de transaction, toutes les clés d&apos;attribut trouvées dans cette liste seront envoyées à New Relic dans l&apos;événement de transaction. Pour plus d&apos;informations, consultez les [règles d&apos;attribut de l&apos;agent](/docs/apm/other-features/attributes/agent-attributes).
  </Collapser>

  <Collapser id="cfg-te-attributes-exclude" title="attributes.exclude">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Liste des chaînes
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Toutes les clés d&apos;attribut trouvées dans cette liste ne seront pas envoyées à New Relic dans l&apos;événement de transaction. Pour plus d&apos;informations, consultez les [règles d&apos;attribut de l&apos;agent](/docs/apm/other-features/attributes/agent-attributes).
  </Collapser>
</CollapserGroup>

## Segments de transaction

Définissez les options des segments de transaction dans la section `transaction_segments` . Ces options peuvent être [remplacées](#System_Properties) par une propriété système préfixée `newrelic.config.transaction_segments` .

Les segments de transaction représentent des éléments de travail discrets (généralement des appels de méthode) et sont affichés dans [la trace de transaction](/docs/traces/transaction-traces).

<Callout variant="important">
  Le filtrage des attributs de segment de transaction nécessite [agent Java version 4.10.0 ou supérieure](/docs/agents/java-agent/installation/upgrade-java-agent).
</Callout>

<CollapserGroup>
  <Collapser id="cfg-ts-attributes-enabled" title="attributes.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Ce paramètre peut être utilisé pour activer ou désactiver tous les attributs des segments de transaction. Si `attributes.enabled` au niveau racine est `false`, aucun attribut ne sera envoyé aux segments de transaction, quelle que soit la manière dont cette propriété (`transaction_segments.attributes.enabled`) est définie.
  </Collapser>

  <Collapser id="cfg-ts-attributes-include" title="attributes.include">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Liste de chaînes
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Si les attributs sont activés pour les segments de transaction, toutes les clés d&apos;attribut trouvées dans cette liste seront envoyées à New Relic dans les segments de transaction. Pour plus d&apos;informations, consultez les [règles d&apos;attribut de l&apos;agent](/docs/apm/other-features/attributes/agent-attributes).
  </Collapser>

  <Collapser id="cfg-ts-attributes-exclude" title="attributes.exclude">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Liste des chaînes
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Toutes les clés d’attribut trouvées dans cette liste ne seront pas envoyées à New Relic dans les segments de transaction. Pour plus d&apos;informations, consultez les [règles d&apos;attribut de l&apos;agent](/docs/apm/other-features/attributes/agent-attributes).
  </Collapser>
</CollapserGroup>

## Traceur de transaction

Définissez les options du traceur de transaction dans la section `transaction_tracer` . Ces options peuvent être [remplacées](#System_Properties) par une propriété système préfixée `newrelic.config.transaction_tracer` .

[Le tracing des transactions](/docs/traces/transaction-traces) capture des informations détaillées sur les transactions lentes et les envoie au service New Relic. La transaction comprend la séquence d&amp;apos;appel exacte des transactions, y compris toutes les instructions de requête émises.

<Callout variant="important">
  N&apos;utilisez pas de crochets `[suffix]` à la fin du nom de votre transaction. New Relic supprime automatiquement les crochets du nom. Utilisez plutôt des parenthèses `(suffix)` ou d’autres symboles si nécessaire.
</Callout>

<CollapserGroup>
  <Collapser id="tt-enabled" title="enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Le traceur de transaction est activé par défaut. Réglez ceci sur `false` pour le désactiver.
  </Collapser>

  <Collapser id="tt-explain_enabled" title="explain_enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Détermine si l&apos;agent capturera le plan `EXPLAIN` pour la requête lente. [Uniquement pris en charge pour MySQL et PostgreSQL.](/docs/agents/java-agent/getting-started/compatibility-requirements-java-agent#JDBC)
  </Collapser>

  <Collapser id="tt-explain_threshold" title="explain_threshold">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Virgule flottante
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `0.5`
          </td>
        </tr>
      </tbody>
    </table>

    seuil en secondes pour le temps d&apos;exécution de la requête en dessous duquel la lente de la requête et le plan `EXPLAIN` ([si supporté](/docs/agents/java-agent/getting-started/compatibility-requirements-java-agent#JDBC)) ne seront pas capturés. Concerne la requête lente uniquement lorsque `record_sql` est défini sur `raw` ou `obfuscated`. Concerne les plans `EXPLAIN` uniquement lorsque `explain_enabled` est défini sur `true`.
  </Collapser>

  <Collapser id="insert_sql_max_length" title="insert_sql_max_length">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Entier
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `2000`
          </td>
        </tr>
      </tbody>
    </table>

    La limite de caractères pour la chaîne de requête SQL. Si vous avez de nombreuses requêtes SQL lentes avec de gros morceaux d&apos;informations, cela pourrait affecter négativement les performances ou la rapidité avec laquelle vous voyez vos données dans New Relic. Augmentez progressivement la valeur jusqu’à trouver le bon équilibre entre informations et performances.
  </Collapser>

  <Collapser id="tt-log_sql" title="log_sql">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </table>

    Définissez sur `true` pour activer le logging de la requête dans le agent fichier de au log lieu du téléchargement vers New Relic. les requêtes sont enregistrées en utilisant le mode `record_sql` .
  </Collapser>

  <Collapser id="tt-record_sql" title="record_sql">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Chaîne
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `obfuscated`
          </td>
        </tr>
      </tbody>
    </table>

    Lorsque le traceur de transaction est activé, les instructions de requête peuvent éventuellement être enregistrées. L&apos;enregistreur dispose de trois modes :

    * `off`: N&amp;apos;envoyez aucune requête.
    * `raw`: Envoyez l&amp;apos;instruction de requête dans sa forme originale.
    * `obfuscated`: Supprime les littéraux numériques et les chaînes.
  </Collapser>

  <Collapser id="tt-stack_based_naming" title="stack_based_naming (Play 2.x+ uniquement)">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `false`

            Par défaut, la valeur était `true` jusqu&amp;apos;à la version 3.12.1 de l&amp;apos;agent Java, lorsqu&amp;apos;il a été changé en `false`.
          </td>
        </tr>
      </tbody>
    </table>

    Cette option est réservée à Play 2.x+ uniquement. L&apos;instrumentation Play/Scala peut utiliser `Thread.getStackTrace()` pour améliorer la dénomination du traceur, mais au prix d&amp;apos;une surcharge accrue.
  </Collapser>

  <Collapser id="tt-stack_trace_threshold" title="stack_trace_threshold">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Entier
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `0.5`
          </td>
        </tr>
      </tbody>
    </table>

    Définit un seuil (en secondes) pour collecter la trace d&apos;appels d&apos;un appel SQL. Lorsque les instructions SQL dépassent ce seuil, l&apos;agent capturera la trace d&apos;appels en cours. Cela est utile pour identifier l’origine des appels SQL longs.
  </Collapser>

  <Collapser id="tt-top_n" title="top_n">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Entier
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `20`
          </td>
        </tr>
      </tbody>
    </table>

    Utilisez ce paramètre pour contrôler la variété de votre trace de transaction. `top_n` est un entier qui représente le nombre de transactions uniques et lentes pour lesquelles une trace sera créée.

    * Si vous souhaitez que le suivi des transactions reflète plus précisément les transactions les plus lentes de votre application, définissez cette valeur sur <DNT>**lower**</DNT>.

    * Si vous souhaitez échantillonner un éventail plus diversifié de transactions, définissez la valeur <DNT>**higher**</DNT>.

      Une valeur de `0` signifie que <DNT>**only**</DNT> la transaction la plus lente est toujours tracée. Cela n&amp;apos;est toutefois pas considéré comme optimal, car vous pouvez avoir une ou deux transactions qui sont toujours les plus lentes, et voir à plusieurs reprises ces mêmes traces de transaction ne vous apportera probablement pas beaucoup de valeur.

      Si la même transaction est souvent la plus lente, le paramètre `top_n` permet à l&amp;apos;agent Java (au fil du temps) d&amp;apos;échantillonner les transactions `n` les plus lentes. Cela vous donne une plus grande variété et des informations plus détaillées dans votre application.
  </Collapser>

  <Collapser id="tt-transaction_threshold" title="transaction_threshold">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            String (virgule flottante)
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `apdex_f`
          </td>
        </tr>
      </tbody>
    </table>

    Le seuil de temps utilisé pour déterminer quand une transaction est éligible au tracing. Lorsque le temps de réponse de la transaction dépasse ce seuil, une [trace de transaction](/docs/apm/transactions/transaction-traces/transaction-traces) sera enregistrée et envoyée à New Relic.

    La valeur par défaut est `apdex_f` (par défaut), ce qui définit le seuil sur le [niveau Apdex](/docs/site/apdex-measuring-user-satisfaction) [« Frustré](/docs/accounts-partnerships/education/getting-started-new-relic/glossary#apdex_f) » (quatre fois la `apdex_t` valeur ). Vous pouvez également définir un seuil de temps spécifique en saisissant une valeur de virgule flottante qui représente un nombre de secondes.
  </Collapser>

  <Collapser id="tt-slow_query_whitelist" title="slow_query_whitelist (OBSOLÈTE)">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Chaîne
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    <Callout variant="important">
      Cette configuration est obsolète à partir de la version 5.10.0 de l&apos;agent et sera supprimée dans une future version de l&apos;agent. Utilisez plutôt `collect_slow_queries_from`.
    </Callout>

    Par défaut, [le mode haute sécurité](/docs/accounts-partnerships/accounts/security/high-security) ne permet pas à l&amp;apos;agent de collecter [les requêtes lentes](/docs/apm/applications-menu/monitoring/viewing-slow-query-details). Activez cette option pour collecter les requêtes Cassandra du pilote DataStax, même avec une sécurité élevée activée. Si vous n&amp;apos;utilisez pas une sécurité élevée, l&amp;apos;agent collecte automatiquement les requêtes lentes.

    Pour le pilote DataStax 2.1.2, ajoutez cette règle à votre liste de domaines autorisés :

    ```yml
    transaction_tracer:
      slow_query_whitelist:
        'com.newrelic.instrumentation.cassandra-datastax-2.1.2'
    ```

    Pour le pilote DataStax 3.0.0, ajoutez cette règle à votre liste de domaines autorisés :

    ```yml
    transaction_tracer:
      slow_query_whitelist:
        'com.newrelic.instrumentation.cassandra-datastax-3.0.0'
    ```
  </Collapser>

  <Collapser id="tt-collect_slow_queries_from" title="collect_slow_queries_from">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Chaîne
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Par défaut, [le mode haute sécurité](/docs/accounts-partnerships/accounts/security/high-security) ne permet pas à l&amp;apos;agent de collecter [les requêtes lentes](/docs/apm/applications-menu/monitoring/viewing-slow-query-details). Activez cette option pour collecter les requêtes Cassandra du pilote DataStax, même avec une sécurité élevée activée. Si vous n&amp;apos;utilisez pas une sécurité élevée, l&amp;apos;agent collecte automatiquement les requêtes lentes.

    Pour le pilote DataStax 2.1.2, ajoutez cette règle à votre liste de domaines autorisés :

    ```yml
    transaction_tracer:
      collect_slow_queries_from:
        'com.newrelic.instrumentation.cassandra-datastax-2.1.2'
    ```

    Pour le pilote DataStax 3.0.0, ajoutez cette règle à votre liste de domaines autorisés :

    ```yml
    transaction_tracer:
      collect_slow_queries_from:
        'com.newrelic.instrumentation.cassandra-datastax-3.0.0'
    ```
  </Collapser>

  <Collapser id="cfg-tt-attributes-enabled" title="attributes.enabled">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Booléen
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </table>

    Ce paramètre peut être utilisé pour activer ou désactiver tous les attributs de suivi de transaction. Si `attributes.enabled` au niveau racine est `false`, aucun attribut ne sera envoyé pour tracer la transaction, quelle que soit la manière dont cette propriété (`transaction_tracer.attributes.enabled`) est définie.
  </Collapser>

  <Collapser id="cfg-tt-attributes-include" title="attributes.include">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Liste de chaînes
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Si les attributs sont activés pour le suivi de transaction, toutes les clés d&apos;attribut trouvées dans cette liste seront envoyées à New Relic dans le suivi de transaction. Pour plus d&apos;informations, consultez les [règles d&apos;attribut de l&apos;agent](/docs/apm/other-features/attributes/agent-attributes).
  </Collapser>

  <Collapser id="cfg-tt-attributes-exclude" title="attributes.exclude">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Liste des chaînes
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            (aucun)
          </td>
        </tr>
      </tbody>
    </table>

    Toutes les clés d&apos;attribut trouvées dans cette liste ne seront pas envoyées à New Relic lors de la trace de la transaction. Pour plus d&apos;informations, consultez les [règles d&apos;attribut de l&apos;agent](/docs/apm/other-features/attributes/agent-attributes).
  </Collapser>

  <Collapser id="cfg-tt-token_limit" title="token_limit">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Entier
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `3000`
          </td>
        </tr>
      </tbody>
    </table>

    Limite le nombre de jetons pouvant être créés par transaction. L’augmentation de cette valeur peut avoir un impact sur les performances, car elle augmente la quantité de mémoire utilisée par l’agent et la quantité de données envoyées à New Relic.
  </Collapser>

  <Collapser id="cfg-tt-segment_limit" title="segment_limit">
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Entier
          </td>
        </tr>

        <tr>
          <th>
            Défaut
          </th>

          <td>
            `3000`
          </td>
        </tr>
      </tbody>
    </table>

    Limite le nombre de segments pouvant être créés par transaction. L’augmentation de cette valeur peut avoir un impact sur les performances, car elle augmente la quantité de mémoire utilisée par l’agent et la quantité de données envoyées à New Relic.
  </Collapser>
</CollapserGroup>