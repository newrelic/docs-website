---
title: Mettre à jour l'appel d'API privé vers l'API traceur publique
type: troubleshooting
tags:
  - Agents
  - Ruby agent
  - Troubleshooting
metaDescription: Update deprecated API calls for the New Relic Ruby agent.
freshnessValidatedDate: never
translationType: machine
---

## Problème

Dans la version [6.0.0](/docs/releases/ruby) de l&amp;apos;agent Ruby New Relic, un certain nombre d&amp;apos;API qui n&amp;apos;étaient pas prises en charge publiquement ont été déconseillées ou supprimées. Si vous utilisez l’une des méthodes supprimées, vous devez mettre à jour votre API avec le remplacement recommandé avant de procéder à la mise à niveau vers la version 6.0.0 ou supérieure de l’agent Ruby. Si vous utilisez l&amp;apos;une des méthodes obsolètes, nous vous recommandons de mettre à jour votre API dès que possible pour garantir la compatibilité avec les versions de l&amp;apos;agent supérieures à 6.0.0.

## Solution

Mettez à jour votre API avec les remplacements recommandés suivants :

<CollapserGroup>
  <Collapser
    id="external-start-segment"
    title={<InlineCode>External.start_segment</InlineCode>
    }
  >
    Remplacer par `NewRelic::Agent::Tracer.start_external_request_segment`
  </Collapser>

  <Collapser
    id="transaction-create-segment"
    title={<InlineCode>Transaction.create_segment</InlineCode>
    }
  >
    Remplacer par `NewRelic::Agent::Tracer.start_segment`
  </Collapser>

  <Collapser
    id="transaction-start"
    title={<InlineCode>Transaction.start</InlineCode>
    }
  >
    Remplacer par `NewRelic::Agent::Tracer.start_transaction_or_segment`
  </Collapser>

  <Collapser
    id="transaction-start-datastore-segment"
    title={<InlineCode>Transaction.start_datastore_segment</InlineCode>
    }
  >
    Remplacer par `NewRelic::Agent::Tracer.start_datastore_segment`
  </Collapser>

  <Collapser
    id="transaction-start-segment"
    title={<InlineCode>Transaction.start_segment</InlineCode>
    }
  >
    Remplacer par `NewRelic::Agent::Tracer.start_segment`
  </Collapser>

  <Collapser
    id="transaction-wrap"
    title={<InlineCode>Transaction.wrap</InlineCode>
    }
  >
    Remplacer par `NewRelic::Agent::Tracer.in_transaction`
  </Collapser>

  <Collapser
    id="transaction-state-current-transaction"
    title={<InlineCode>TransactionState.current_transaction</InlineCode>
    }
  >
    Remplacer par `NewRelic::Agent::Tracer.current_transaction`
  </Collapser>
</CollapserGroup>