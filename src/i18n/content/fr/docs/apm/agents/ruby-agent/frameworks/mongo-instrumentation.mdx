---
title: instrumentationMongo
tags:
  - Agents
  - Ruby agent
  - Instrumented gems
metaDescription: New Relic Ruby agent support for MongoDB
freshnessValidatedDate: never
translationType: machine
---

L&apos;agent Ruby dispose instrumentation intégrée pour les requêtes MongoDB effectuées via la gem [`mongo`](https://rubygems.org/gems/mongo "Le lien s'ouvre dans une nouvelle fenêtre") .

## Gems prises en charge [#supported\_gems][#supported_gems]

Ceci résume la prise en charge des gems par l&apos;agent Ruby par version.

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        <DNT>
          **Gem version**
        </DNT>
      </th>

      <th>
        <DNT>
          **Comments**
        </DNT>
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `mongo` 1.8 et 1.9
      </td>

      <td>
        Pris en charge par l&apos;agent Ruby 3.7.1 ou supérieur de New Relic
      </td>
    </tr>

    <tr>
      <td>
        `mongo` 2.0
      </td>

      <td>
        Non pris en charge
      </td>
    </tr>

    <tr>
      <td>
        `mongo` 2.1 ou supérieur
      </td>

      <td>
        Nécessite l&apos;agent Ruby 3.13.1 ou supérieur de New Relic
      </td>
    </tr>

    <tr>
      <td>
        Autres joyaux
      </td>

      <td>
        La prise en charge de Mongoid 2/3/4 et Moped n&apos;est actuellement disponible que via des gems tierces. Pour les liens vers les projets concernés, voir [extends\_newrelic\_rpm](https://github.com/newrelic/extends_newrelic_rpm).
      </td>
    </tr>
  </tbody>
</table>

## Instrumentation tierce et extends\_newrelic\_rpm [#third\_party\_instrumentation][#third_party_instrumentation]

Les gems `extends_newrelic_rpm` et `newrelic_mongo` fournissent toutes deux une instrumentation de base pour `mongo`. New Relic ne recommande pas d&apos;exécuter l&apos;instrumentation Mongo via ces gems parallèlement à la prise en charge Mongo intégrée de l&apos;agent Ruby. Cela pourrait doubler des mesures telles que la durée globale de la base de données.

De plus, les gems `extends_newrelic_rpm` et `newrelic_mongo` utilisent toutes deux un paramètre distinct qui peut être utilisé pour les désactiver si la suppression complète de ces gems n&apos;est pas possible dans votre environnement. Pour ces gems tierces, définissez `disable_mongodb: false` dans votre `newrelic.yml`.

## Désactiver l&apos;instrumentation [#Disabling\_instrumentation][#Disabling_instrumentation]

Pour désactiver l&apos;instrumentation Mongo dans l&apos;agent, ajoutez ce qui suit à votre `newrelic.yml`:

```yml
disable_mongo: true
```