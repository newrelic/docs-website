---
title: Aucune donnée avec l'attachement automatique de Kubernetes APM
type: troubleshooting
tags:
  - Agents
  - Ruby agent
  - Kubernetes
  - Troubleshooting
  - Sinatra
metaDescription: 'If you are not seeing New Relic data for a non-Rails Ruby application using the Kubernetes APM auto-attach, you may need to explicitly call `Bundler.require`.'
freshnessValidatedDate: never
translationType: machine
---

## Problème

Vous utilisez l&apos;agent New Relic Ruby avec l&apos;attachement automatique Kubernetes APM pour un framework non Rails (comme Sinatra), mais aucune donnée APM n&apos;apparaît dans votre compte New Relic.

## Solution

Appelez explicitement `Bundler.require` au début du processus de démarrage de votre application.

Pour de nombreux frameworks, cela peut être fait en l&apos;ajoutant à votre fichier d&apos;application principal ou à un fichier `config.ru` avant que vos classes d&apos;application ne soient définies.

Exemple (`config.ru` ou `app.rb`):

```ruby
# config.ru

require 'bundler'
Bundler.require

# ... rest of your application's startup code
require_relative './my_sinatra_app'
run MySinatraApp
```

Après avoir ajouté ce code, redéployez votre application. Les données devraient commencer à apparaître dans New Relic dans quelques minutes.

## Cause

L&apos;attachement automatique de Kubernetes APM fonctionne en corrigeant la méthode `Bundler::Runtime#require` pour injecter le gemme `newrelic_rpm` dans votre application.

Alors que les applications Rails appellent automatiquement `Bundler.require` pendant leur processus de démarrage, de nombreux autres frameworks ne le font pas. Si `Bundler.require` n&apos;est jamais appelé, l&apos;agent New Relic n&apos;est jamais chargé dans l&apos;environnement de votre application. L&apos;ajout de cette ligne garantit que l&apos;agent est chargé comme prévu.