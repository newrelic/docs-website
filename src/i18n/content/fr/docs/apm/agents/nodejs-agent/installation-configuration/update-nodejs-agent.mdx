---
title: Mettre à jour l'agent Node.js
tags:
  - Agents
  - Nodejs agent
  - Installation and configuration
metaDescription: 'How to update your APM Node.js agent, and notes on EOL support for early agent versions.'
freshnessValidatedDate: never
translationType: machine
---

Les agents New Relic suivent [le contrôle de version sémantique](https://semver.org/) pour indiquer que les sorties de version MAJEURES incluent des changements de rupture. Les versions MAJEURES peuvent abandonner la prise en charge des environnements d&apos;exécution de langage qui ont atteint la fin de vie selon le mainteneur. De plus, les versions MAJOR peuvent abandonner le support et supprimer certaines instrumentations.

Pour profiter pleinement des New Relic dernières fonctionnalités, améliorations et correctifs de sécurité importants de, nous vous recommandons de mettre à jour Node.js agent votre vers la dernière version. Pour plus agent d&apos;informations sur les mises à jour spécifiques, reportez-vous aux [Node.js agent notes de sortie](/docs/release-notes/agent-release-notes/nodejs-release-notes) Les notes de sortie incluent un lien de téléchargement, le cas échéant, ainsi que des instructions pour télécharger et [installer](/docs/agents/nodejs-agent/installation-configuration/install-nodejs-agent) la dernière version.

* Si le module `newrelic` est répertorié dans votre `package.json`, exécutez `npm install`.
* Si vous souhaitez cibler uniquement le module `newrelic`, exécutez `npm update newrelic`.

Recommandation : testez votre version mise à jour avant de la mettre en production. Si vous rencontrez des problèmes, suivez les [procédures de dépannage](/docs/agents/nodejs-agent/troubleshooting/troubleshooting-your-nodejs-installation) de l&apos;agent Node.js.

Si vous devez désinstaller l&apos;agent et installer une version spécifique de l&apos;agent, suivez ce [guide](/docs/apm/agents/nodejs-agent/installation-configuration/uninstall-nodejs-agent/) de désinstallation, puis réinstallez une version d&apos;agent spécifique avec `npm install newrelic@LIST_VERSION_HERE` ou mettez à jour la version dans votre package.json et exécutez `npm install`.

## Mise à niveau vers la version 13 de l&apos;agent Node.js [#node-agent-v13]

Avant de passer à la version 13 de Node.js, consultez ces informations pour connaître les modifications majeures.

<table>
  <thead>
    <tr>
      <th style={{ width: "250px" }}>
        <DNT>
          **Major changes with Node.js agent v13**
        </DNT>
      </th>

      <th>
        <DNT>
          **Comments**
        </DNT>
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        <DNT>**BREAKING**</DNT>:Suppression de la prise en charge de Node.js 18.
      </td>

      <td>
        * Pour plus d&apos;informations, consultez notre [politique d&apos;assistance](/docs/agents/nodejs-agent/getting-started/compatibility-requirements-nodejs-agent).
      </td>
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>: Mise à jour de la version minimale prise en charge pour `fastify` vers 3.0.0, `pino` à 8.0.0 et `koa-router` à 12.0.0.
      </td>
    </tr>

    <tr>
      <td>
        Mise à jour des documents de monitoring de la compatibilité de l&apos;IA avec les nouvelles API AWS Bedrock
      </td>
    </tr>
  </tbody>
</table>

## Mise à niveau vers la version 12 de l&apos;agent Node.js [#node-agent-v12]

Avant de passer à la version 12 de Node.js, consultez ces informations pour connaître les modifications majeures.

Ajout de métriques de producteur et de consommateur à l&apos;instrumentation kafkajs

Mise à jour `@newrelic/native-metrics` vers 11.0.0

La métrique hôte : port MySQL vérifiée est enregistrée

<table>
  <thead>
    <tr>
      <th style={{ width: "250px" }}>
        <DNT>
          **Major changes with Node.js agent v12**
        </DNT>
      </th>

      <th>
        <DNT>
          **Comments**
        </DNT>
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        <DNT>**BREAKING**</DNT>: Suppression du support de Node.js 16.
      </td>

      <td>
        * Pour plus d&apos;informations, consultez notre [politique d&apos;assistance](/docs/agents/nodejs-agent/getting-started/compatibility-requirements-nodejs-agent).
      </td>
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>: Gestionnaire de contexte legacy supprimé.
      </td>
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>: Prise en charge supprimée pour `redis <2.6.0`.
      </td>

      <td />
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>: Instrumentation supprimée pour `director`.
      </td>
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>: Mise à jour de l&apos;instrumentation `mongodb` pour supprimer la prise en charge des versions 2 et 3.
      </td>

      <td />
    </tr>

    <tr>
      <td>
        Ajout de server.address aux étendues amqplib.
      </td>
    </tr>

    <tr>
      <td>
        Instrumentation migrée pour la prochaine étape vers l&apos;agent.
      </td>

      <td>
        Vous n&apos;avez plus besoin de charger l&apos;instrumentation Next.js via `@newrelic/next`. Au lieu de cela, vous devez charger l&apos;agent via `NODE_OPTIONS='-r newrelic' next start`.
      </td>
    </tr>

    <tr />

    <tr>
      <td />
    </tr>

    <tr />
  </tbody>
</table>

## Mise à niveau vers la version 11 de l&apos;agent Node.js [#node-agent-v11]

Avant de passer à la version 11 de Node.js, consultez ces informations pour connaître les modifications majeures.

<table>
  <thead>
    <tr>
      <th style={{ width: "250px" }}>
        <DNT>
          **Major changes with Node.js agent v11**
        </DNT>
      </th>

      <th>
        <DNT>
          **Comments**
        </DNT>
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        Ajout du support de parité officiel pour Node.js 20.
      </td>

      <td />
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>:Suppression du support de Node.js 14.
      </td>

      <td>
        * Pour plus d&apos;informations, consultez notre [politique d&apos;assistance](/docs/agents/nodejs-agent/getting-started/compatibility-requirements-nodejs-agent).
      </td>
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>: Chargeur ESM mis à jour pour prendre en charge Node.js 20.
      </td>

      <td>
        * Vous devez désormais utiliser les arguments `--experimental-loader` et `-r` lors de l&apos;exécution d&apos;une application.
        * `node --experimental-loader newrelic/esm-loader.mjs -r newrelic path/to/app.js`
      </td>
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>: Mise à jour du gestionnaire de contexte par défaut pour qu&apos;il soit AsyncLocalContextManager.
      </td>

      <td>
        * Le LegacyContextManager par défaut précédent peut être restauré en définissant l&apos;indicateur de fonctionnalité de `config.feature_flag.legacy_context_manager` sur `true`.
        * Si vous préférez les variables d’environnement, vous pouvez définir `NEW_RELIC_FEATURE_FLAG_LEGACY_CONTEXT_MANAGER` sur `true`.
        * Veuillez noter que ce gestionnaire de contexte sera supprimé dans les versions futures. Si vous devez revenir à l&apos;utilisation de ce gestionnaire de contexte legacy, veuillez signaler ce problème au [supportNew Relic ](https://support.newrelic.com/s/)ou à un [problème GitHub](https://github.com/newrelic/node-newrelic/issues/new?assignees=&labels=bug%2C+needs-triage&projects=&template=bug_report.md&title=).
      </td>
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>:Renommé `shim.handleCATHeaders` en `shim.handleMqTracingHeaders`.
      </td>

      <td />
    </tr>

    <tr>
      <td>
        Mise à jour de la dépendance New Relic vers les versions avec prise en charge de la version Node.js mise à jour
      </td>

      <td>
        * @newrelic/AWS-sdk v7.0.0
        * @newrelic/koa v8.0.0
        * @newrelic/native-métriques v10.0.0
        * @newrelic/superagent v7.0.0
        * @newrelic/test-utilities v8.0.0
      </td>
    </tr>
  </tbody>
</table>

## Prise en charge des versions de Node.js [#node-support-v11]

Node.js 16 est la première version prise en charge par l&apos;agent New Relic Node.js v11. Node.js 14 et 15 ne sont pas pris en charge par la v11. Les clients exécutant Node.js 15 et versions antérieures ont deux options :

* Passez à une version prise Node.js en charge de et profitez de la New Relic Node.js agentnouvelle fonctionnalité de v11.
* Restez sur New Relic Node.js v10 agent sans la possibilité d&apos;utiliser la nouvelle fonctionnalité disponible uniquement avec les versions de mise agent à jour.

<Callout variant="tip">
  Passez à une version plus récente de Node.js dès que possible. La prochaine version majeure de l&apos;agent New Relic Node.js supprimera probablement la prise en charge de Node.js 16.
</Callout>

## Mise à niveau vers la version 10 de l&apos;agent Node.js [#node-agent-v10]

Avant de passer à la version 10 de Node.js, consultez ces informations pour connaître les modifications majeures.

<table>
  <thead>
    <tr>
      <th style={{ width: "250px" }}>
        <DNT>
          **Major changes with Node.js agent v11**
        </DNT>
      </th>

      <th>
        <DNT>
          **Comments**
        </DNT>
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        * Ajout de la possibilité d&apos;enregistrer plusieurs hooks d&apos;instrumentation (onRequire, onResolved) pour le même moduleName résolu.
      </td>

      <td>
        * Cela a été une limitation de l’agent depuis le début.
        * Si vous avez utilisé l&apos; API pour instrumenter api.instrument, api.instrumentDatastore, api.instrumentWebframework, api.instrumentMessages, ou api.instrumentConglomerate, elle remplacerait les hooks d&apos;instrumentation existants.
        * Le résultat était que l’agent Node.js ne fonctionnait pas comme prévu.
      </td>
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>: Mise à jour de la valeur par défaut de `config.transaction_tracer.record_sql` de désactivé à obscurci. Cela signifie que les instructions SQL seront capturées mais obscurcies.
      </td>
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>: Les paramètres de route (URL) sont désormais stockés en tant qu&apos;attribut `request.parameters.route.*` sur les transactions, les segments racine et les étendues.
      </td>

      <td>
        * Le paramètre requête sera disponible sous forme d&apos;attribut préfixé par request.parameters.\* sur les transactions et les portées.
        * Le paramètre de route sera disponible sous forme d&apos;attribut préfixé par request.parameters.route.\* sur les transactions et les portées.
        * Les paramètres de route (alias paramètre d&apos;url) sont une fonctionnalité commune de divers frameworks Web, où vous pouvez créer un espace réservé dans le cadre d&apos;une définition de route API.
      </td>
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>:Suppression de captureUrlParams de la classe WebFrameworkShim.
      </td>
    </tr>

    <tr>
      <td>
        <DNT>**DEPRECATION NOTICE**</DNT>: shim.unwrap et shim.unwrapOnce ne fonctionneront plus si vous essayez de déballer un élément qui a été emballé plusieurs fois.
      </td>

      <td>
        * C&apos;est parce que, puisque nous autorisons désormais l&apos;instrumentation du même module plus d&apos;une fois, vous ne pouvez pas le déballer en toute sécurité sans casser toute instrumentation enregistrée. Nous prévoyons de supprimer shim.unwrap et shim.unwrapOnce lors de la prochaine sortie majeure.
      </td>
    </tr>

    <tr>
      <td>
        Mise à jour de la dépendance New Relic vers les versions avec prise en charge de la version Node.js mise à jour
      </td>

      <td>
        * @newrelic/AWS-sdk v7.0.0
        * @newrelic/koa v8.0.0
        * @newrelic/native-métriques v10.0.0
        * @newrelic/superagent v7.0.0
        * @newrelic/test-utilities v8.0.0
      </td>
    </tr>
  </tbody>
</table>

## Prise en charge des versions de Node.js [#node-support-v10]

Node.js 14 est la première version prise en charge par l&apos;agent New Relic Node.js v10. Node.js 12 et 13 ne sont pas pris en charge par la v10. Les clients exécutant Node.js 13 et versions antérieures ont deux options :

* Passez à une version prise Node.js en charge de et profitez de la New Relic Node.js agentnouvelle fonctionnalité de v10.
* Restez sur New Relic Node.js v8 agent sans la possibilité d&apos;utiliser la nouvelle fonctionnalité disponible uniquement avec les versions de mise agent à jour.

<Callout variant="tip">
  Passez à une version plus récente de Node.js dès que possible. La prochaine version majeure de l&apos;agent New Relic Node.js supprimera probablement la prise en charge de Node.js 14.
</Callout>

## Mise à niveau vers la version 9 de l&apos;agent Node.js [#node-agent-v9]

Avant de passer à la version 9 de Node.js, consultez ces informations pour connaître les modifications majeures.

<table>
  <thead>
    <tr>
      <th style={{ width: "250px" }}>
        <DNT>
          **Major changes with Node.js agent v9**
        </DNT>
      </th>

      <th>
        <DNT>
          **Comments**
        </DNT>
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        Ajout du support de parité officiel pour Node.js 18.
      </td>

      <td />
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>:Suppression du support de Node.js 12.
      </td>

      <td>
        * Pour plus d&apos;informations, consultez notre [politique d&apos;assistance](/docs/agents/nodejs-agent/getting-started/compatibility-requirements-nodejs-agent).
      </td>
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>:L&apos;agent n&apos;inclut plus automatiquement le bundle de certificats New Relic lors de l&apos;utilisation de la configuration « certificats » (généralement avec les proxys).
      </td>

      <td>
        * L&apos;agent n&apos;inclut plus le bundle de certificats New Relic lors de l&apos;utilisation de la configuration « certificats » (généralement avec les proxys). Si vous trouvez que cela perturbe votre environnement actuel, nous vous recommandons d&apos;obtenir un bundle CA tel que celui de Mozilla.
      </td>
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>:L&apos;agent exclut désormais le port lors des requests HTTPS externes sur le port 443 pour être conforme à la spécification et aux autres agents
      </td>

      <td>
        * Les segments externes précédents seraient nommés `External/example.com:443` lors de l&apos;utilisation du port HTTPS par défaut.
        * Le segment externe sera désormais nommé `External/example.com`.
      </td>
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>: Suppression de la possibilité de désactiver le suivi du contexte de promesse basé sur les hooks asynchrones via l&apos;indicateur de fonctionnalité `await_support` . Cela supprime également l&apos;legacy Promise instrumentation.
      </td>

      <td>
        * Sortez l&apos;indicateur de fonctionnalité `await_support` . L&apos;agent s&apos;appuie désormais sur async\_hooks pour suivre la propagation des promesses asynchrones. Le résultat net est que si vous aviez `feature_flag.await_support` défini sur false, l&apos;legacy instrumentation suivait chaque fonction dans une chaîne de promesse en tant que segment distinct.
      </td>
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>:Suppression de l&apos;instrumentation pour le package npm [Oracle](https://www.npmjs.com/package/oracle) obsolète.
      </td>

      <td />
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>: Mise à jour de la version minimale de `pg` à 8.2.x. Il s&apos;agit de la première version de support qui s&apos;exécute sur Node.js 14+.
      </td>

      <td />
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>: Mise à jour de la version minimale prise en charge de hapi pour être v20.0.0.
      </td>

      <td>
        * Toutes les versions inférieures à v20.0.0 sont obsolètes par hapi pour des raisons de sécurité. Voir [leur politique de support](https://hapi.dev/policies/support/).
      </td>
    </tr>

    <tr>
      <td>
        Mise à jour de la dépendance New Relic vers les versions avec prise en charge de la version Node.js mise à jour
      </td>

      <td>
        * @newrelic/AWS-sdk v5.0.0
        * @newrelic/koa v7.0.0
        * @newrelic/native-métriques v9.0.0
        * @newrelic/superagent v6.0.0
        * @newrelic/test-utilities v7.0.0
      </td>
    </tr>
  </tbody>
</table>

## Prise en charge des versions de Node.js [#node-support-v9]

Node.js 14 est la première version prise en charge par l&apos;agent New Relic Node.js v9. Node.js 12 et 13 ne sont pas pris en charge par la v9. Les clients exécutant Node.js 13 et versions antérieures ont deux options :

* Passez à une version prise Node.js en charge de et profitez de la New Relic Node.js agentnouvelle fonctionnalité de v9.
* Restez sur New Relic Node.js v8 agent sans la possibilité d&apos;utiliser la nouvelle fonctionnalité disponible uniquement avec les versions de mise agent à jour.

<Callout variant="tip">
  Passez à une version plus récente de Node.js dès que possible. La prochaine version majeure de l&apos;agent New Relic Node.js supprimera probablement la prise en charge de Node.js 14.
</Callout>

## Mise à niveau vers la version 8 de l&apos;agent Node.js [#node-agent-v8]

Avant de passer à la version 8 de Node.js, consultez ces informations pour connaître les modifications majeures.

<table>
  <thead>
    <tr>
      <th style={{ width: "250px" }}>
        <DNT>
          **Major changes with Node.js agent v8**
        </DNT>
      </th>

      <th>
        <DNT>
          **Comments**
        </DNT>
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        Ajout du support de parité officiel pour Node.js 16.
      </td>

      <td />
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>:Suppression du support de Node.js v10.x.
      </td>

      <td>
        * Pour plus d&apos;informations, consultez notre [politique d&apos;assistance](/docs/agents/nodejs-agent/getting-started/compatibility-requirements-nodejs-agent).
      </td>
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>: `serverless_mode` a été supprimé en tant qu&apos;indicateur de fonctionnalité.
      </td>

      <td>
        * La configuration standard `serverless_mode` existe toujours.
      </td>
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT>:L&apos;agent n&apos;inclut plus automatiquement le bundle de certificats New Relic lors de l&apos;utilisation de la configuration « certificats » (généralement avec les proxys).
      </td>

      <td>
        * Si vous constatez que cela perturbe votre environnement actuel, vous pouvez utiliser un indicateur de fonctionnalité pour restaurer temporairement cette fonctionnalité. Exemple de configuration : `feature_flag: { certificate_bundle: true }`. Dans ce cas, nous vous recommandons d&apos;obtenir un ensemble de certificats pour votre environnement, tel que celui de Mozilla. Le pack New Relic et le drapeau de fonctionnalité seront entièrement supprimés lors de la prochaine sortie majeure.
        * Defaulted config.feature\_flags.certificate\_bundle à false.
      </td>
    </tr>

    <tr>
      <td>
        Mise à jour de la dépendance New Relic vers les versions avec prise en charge de la version Node.js mise à jour
      </td>

      <td>
        * @newrelic/AWS-sdk v4.0.1
        * @newrelic/koa v6.0.1
        * @newrelic/native-métriques v7.0.1
        * @newrelic/superagent v5.0.1
        * @newrelic/test-utilities v6.0.0
      </td>
    </tr>
  </tbody>
</table>

## Prise en charge des versions de Node.js [#node-support-v8]

Node.js v12 est la première version prise en charge par l&apos;agent New Relic Node.js v8. Node.js 10 et 11 ne sont pas pris en charge par la v8. Les clients exécutant Node.js 11 et versions antérieures ont deux options :

* Passez à une version prise Node.js en charge de et profitez de la New Relic Node.js agentnouvelle fonctionnalité de v8.
* Restez sur New Relic Node.js v7 agent sans la possibilité d&apos;utiliser la nouvelle fonctionnalité disponible uniquement avec les versions de mise agent à jour.

<Callout variant="tip">
  Passez à une version plus récente de Node.js dès que possible. La prochaine version majeure de l&apos;agent New Relic Node.js supprimera probablement la prise en charge de Node.js 12.
</Callout>

## Mise à niveau vers la version 7 de l&apos;agent Node.js [#node-agent-v7]

Avant de passer à la version 7 de Node.js, consultez ces informations pour connaître les modifications majeures.

<table>
  <thead>
    <tr>
      <th style={{ width: "250px" }}>
        <DNT>
          **Major changes with Node.js agent v7**
        </DNT>
      </th>

      <th>
        <DNT>
          **Comments**
        </DNT>
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        <DNT>**BREAKING**</DNT> Suppression des attributs de réponse http obsolètes `httpResponseCode`, `response.status` et `httpResponseMessage`
      </td>

      <td>
        * <DNT>**v6.4.2-v6.14.0:**</DNT> À partir de agent v6.4.2, ces attributs ont été marqués comme obsolètes mais conservés pour donner une période de transition pour le nouvel attribut.
        * <DNT>**v7:**</DNT> Lorsque le rapport d&apos;attribut de réponse http est activé, `http.statusCode` et `http.statusText` seront signalés.
      </td>
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT> Méthode d&apos;API obsolète `setIgnoreTransaction` supprimée
      </td>

      <td>
        * <DNT>**v5 - v6:**</DNT> À partir de l&apos;agent v5.0.0, cette méthode a été marquée comme obsolète mais conservée pour donner une période de transition pour les nouvelles méthodes.
        * <DNT>**v7:**</DNT> l&apos;application doit utiliser la méthode API [`transactionHandle.ignore()`](https://newrelic.github.io/node-newrelic/TransactionHandle.html#ignore).
      </td>
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT> Suppression de l&apos;élément de configuration `api.custom_parameters_enabled` et de la variable d&apos;environnement associée `NEW_RELIC_API_CUSTOM_PARAMETERS`.
      </td>

      <td>
        * Pour activer [`newrelic.addCustomAttribute`](https://newrelic.github.io/node-newrelic/API.html#addCustomAttribute) et [`newrelic.addCustomAttributes`](https://newrelic.github.io/node-newrelic/API.html#addCustomAttributes), l&apos;application doit utiliser la configuration [`api.custom_attributes_enabled` ou la variable d&apos;environnement associée `NEW_RELIC_API_CUSTOM_ATTRIBUTES`](/docs/agents/nodejs-agent/installation-configuration/nodejs-agent-configuration/#custom-attributes).
      </td>
    </tr>

    <tr>
      <td>
        <DNT>**BREAKING**</DNT> Suppression des méthodes obsolètes de tracing distribué d&apos;API, `createDistributedTracePayload()` et `acceptDistributedTracePayload()`
      </td>

      <td>
        * <DNT>**v6.4.0-v6.14.0:**</DNT> À partir de l&apos;agent v6.4.0, ces méthodes ont été marquées comme obsolètes mais conservées pour donner une période de transition pour les nouvelles méthodes.
        * <DNT>**v7:**</DNT> L&apos;application doit utiliser les méthodes API [`transactionHandle.insertDistributedTraceHeaders(headers)`](https://newrelic.github.io/node-newrelic/TransactionHandle.html#insertDistributedTraceHeaders) et [`transactionHandle.acceptDistributedTraceHeaders(transportType, headers) `](https://newrelic.github.io/node-newrelic/TransactionHandle.html#acceptDistributedTraceHeaders). Avec ces méthodes, l&apos;agent Node.js acceptera désormais les en-têtes `traceparent` et `tracestate` du W3C lors de l&apos;appel de `transactionHandle.acceptDistributedTraceHeaders(headers)` et inclura les en-têtes W3C avec l&apos;en-tête de tracing distribué New Relic lors de l&apos;appel de `transactionHandle.insertDistributedTraceHeaders(headers)`, sauf si le format d&apos;en-tête de trace New Relic est désactivé à l&apos;aide de [`distributed_tracing.exclude_newrelic_header:true`.](/docs/agents/nodejs-agent/installation-configuration/nodejs-agent-configuration/#dt-exclude-newrelic-header)
      </td>
    </tr>

    <tr>
      <td>
        Mise à jour de la dépendance New Relic vers les versions avec prise en charge de la version Node.js mise à jour
      </td>

      <td>
        * @newrelic/AWS-sdk v3.0.0
        * @newrelic/koa v5.0.0
        * @newrelic/native-métriques v6.0.0
        * @newrelic/superagent v4.0.0
        * @newrelic/test-utilities v5.0.0
      </td>
    </tr>
  </tbody>
</table>

## Prise en charge des versions de Node.js [#node-support-v7]

Node.js v10 est la première version prise en charge par l&apos;agent New Relic Node.js v7. Node.js 8 et 9 ne sont pas pris en charge par la v7. Les clients exécutant Node.js 9 et versions antérieures ont deux options :

* Passez à une version prise Node.js en charge de et profitez de la New Relic Node.js agentnouvelle fonctionnalité de v7.
* Restez sur New Relic Node.js v6 agent sans la possibilité d&apos;utiliser la nouvelle fonctionnalité disponible uniquement avec les versions de mise agent à jour.

[Node.js 10 ne reçoit pas de mises à jour](https://github.com/nodejs/Release/tree/cecdcf#end-of-life-releases). Passez à une version plus récente de Node.js dès que possible. La prise en charge de Node.js 10 a été interrompue avec l&apos;agent New Relic Node.js v8.

## Mise à niveau vers la version 6 de l&apos;agent Node.js [#node-agent-v6]

Avant de procéder à la mise à niveau vers la version 6 de l&apos;agent Node.js, consultez ces informations pour connaître les modifications majeures.

<table>
  <thead>
    <tr>
      <th style={{ width: "250px" }}>
        <DNT>
          **Major changes with Node.js agent v6**
        </DNT>
      </th>

      <th>
        <DNT>
          **Comments**
        </DNT>
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        Mise à niveau du module d&apos;instrumentation officiel du framework Koa vers la version 3.0.0
      </td>

      <td>
        * <DNT>**v6:**</DNT> Prise en charge ajoutée pour @koa/router jusqu&apos;à la version 8.0.2. @koa/router v8.0.3 et supérieur ne sont actuellement pas pris en charge.
        * <DNT>**v6:**</DNT> Prise en charge ajoutée pour Node.js v12 et suppression de la prise en charge pour Node.js v6, 7 et 9. La version minimale prise en charge est Node.js v8.
        * Voir également les notes de sortie de Koa de New Relic [sur Github.](https://github.com/newrelic/node-newrelic-koa/blob/master/NEWS.md).
      </td>
    </tr>

    <tr>
      <td>
        Paramètre configuration obsolète `max_samples_per_minute` supprimé, qui est remplacé par le comportement `max_samples_stored`
      </td>

      <td>
        * <DNT>**v1 - v5:**</DNT> `max_samples_per_minute` défini le nombre maximum d&apos;événements que l&apos; agent collecte par minute. Si votre application utilisait auparavant `max_samples_per_minute` comme limite supérieure, vous devrez peut-être abaisser le seuil à un maximum valide pour éviter que des données ne soient supprimées sur le serveur. Nous recommandons moins de 10 000.
        * <DNT>**v5:**</DNT> Dans agent v5 et les versions antérieures, `max_samples_stored` définissait le nombre maximal d&apos;événements que l&apos; agent stocke s&apos;il ne parvient pas à communiquer avec le [collecteurNew Relic ](/docs/accounts-partnerships/education/getting-started-new-relic/glossary#collector).
        * <DNT>**v6:**</DNT> Le nouveau comportement de `max_samples_stored` définit le nombre maximal d&apos;événements que l&apos; agent collecte par minute. S&apos;il y en a plus que ce nombre, l&apos;agent collecte un échantillon statistique. Cette utilisation de la configuration est cohérente avec l&apos;autre agent APM.
        * <DNT>**Troubleshooting tips:**</DNT> Si des données d&apos;événement manquent, augmentez la valeur de `max_samples_stored` ou revenez à la valeur par défaut. La valeur de `max_samples_stored` ne doit pas dépasser 10 000.
      </td>
    </tr>
  </tbody>
</table>

## Prise en charge des versions de Node.js [#node-support-v6]

Node.js 8 est la première version prise en charge par l&apos;agent New Relic Node.js v6. Node.js 6, 7 et 9 ne sont pas pris en charge par la v6. Les clients exécutant Node.js 6, 7 et 9 ont deux options :

* Passez à une version prise Node.js en charge de et profitez de la New Relic Node.js agentnouvelle fonctionnalité de v6.
* Restez sur New Relic Node.js v5 agent sans la possibilité d&apos;utiliser la nouvelle fonctionnalité disponible uniquement avec les versions de mise agent à jour.

[Node.js 8 ne reçoit plus de mises à jour](https://github.com/nodejs/Release/tree/cecdcf#end-of-life-releases), mais New Relic continuera à prendre en charge ces versions de Node.js pour le moment.

<Callout variant="tip">
  Passez à une version plus récente de Node.js dès que possible. La prochaine version majeure de l&apos;agent New Relic Node.js supprimera probablement la prise en charge de Node.js 8.
</Callout>

## Mise à niveau vers la version 5 de l&apos;agent Node.js [#node-agent-v5]

Avant de procéder à la mise à niveau vers l’agent Node.js v5, consultez ces informations pour connaître les modifications majeures. Consultez également [le guide de migration Node.js v5 de New Relic sur GitHub](https://github.com/newrelic/node-newrelic/blob/819db2f3f9051960e034f36540817450f663241f/Migration%20Guide.md).

<table>
  <thead>
    <tr>
      <th style={{ width: "250px" }}>
        <DNT>
          **Major changes with Node.js v5 agent**
        </DNT>
      </th>

      <th>
        <DNT>
          **Comments**
        </DNT>
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        Suppression des méthodes `addCustomParameter` obsolètes.
      </td>

      <td>
        * <DNT>**v2 - v4:**</DNT> À partir de l&apos;agent v2.7.0, ces méthodes ont été marquées comme obsolètes mais conservées pour donner une période de transition pour les nouvelles méthodes.
        * <DNT>**v5:**</DNT> l&apos;application doit utiliser les méthodes API [`newrelic.addCustomAttribute()`](https://newrelic.github.io/node-newrelic/API.html#addCustomAttribute) et [`newrelic.addCustomAttributes()`](https://newrelic.github.io/node-newrelic/API.html#addCustomAttributes). Il s’agit de remplacements immédiats des anciennes méthodes.
      </td>
    </tr>

    <tr>
      <td>
        Suppression des méthodes `create*Transaction` obsolètes.
      </td>

      <td>
        * <DNT>**v2 - v4:**</DNT> À partir de l&apos;agent v2.0.2, ces méthodes ont été marquées comme obsolètes mais conservées pour donner une période de transition vers les nouvelles méthodes.
        * <DNT>**v5:**</DNT> l&apos;application doit mettre à jour les méthodes API [`newrelic.startWebTransaction()`](https://newrelic.github.io/node-newrelic/API.html#startWebTransaction) et [`newrelic.startBackgroundTransaction()`](https://newrelic.github.io/node-newrelic/API.html#startBackgroundTransaction).
        * <DNT>**Troubleshooting tips:**</DNT> Ces nouvelles méthodes ne remplacent **pas** les anciennes. Avant de passer à ces nouvelles méthodes, consultez notre [guide d’instrumentation personnalisée](/docs/agents/nodejs-agent/supported-features/nodejs-custom-instrumentation#web-txn).
      </td>
    </tr>

    <tr>
      <td>
        Suppression de la méthode `createTracer` obsolète.
      </td>

      <td>
        * <DNT>**v3 - v4:**</DNT> À partir de l&apos;agent v3.3.0, cette méthode a été marquée comme obsolète au profit de `newrelic.startSegment()`.
        * <DNT>**v5:**</DNT> l&apos;application doit être mise à jour vers [`newrelic.startSegment()`](https://newrelic.github.io/node-newrelic/API.html#startSegment).
      </td>
    </tr>

    <tr>
      <td>
        Suppression de l&apos;instrumentation `node-cassandra-cql` .
      </td>

      <td>
        * <DNT>**v4:**</DNT> l&apos;application utilisant le package npm [`node-cassandra-cql`](https://www.npmjs.com/package/node-cassandra-cql) obtiendrait les métriques datastore pour Cassandra.
        * <DNT>**v5:**</DNT> l&apos;application doit migrer vers le [`cassandra-driver`](https://www.npmjs.com/package/cassandra-driver) package pour obtenir les datastore métriques Cassandra. Ce module est activement maintenu par les mêmes développeurs. Le package `node-cassandra-cql` a été abandonné en février 2014 au profit du package `cassandra-driver` .
      </td>
    </tr>

    <tr>
      <td>
        Suppression des configurations obsolètes `capture_params` et `ignored_params` .
      </td>

      <td>
        * <DNT>**v2 - v4:**</DNT> À partir de agent v2.7.0, ces paramètres configuration ont provoqué l&apos;enregistrement d&apos;un avertissement et les valeurs ont été automatiquement mises à niveau vers la nouvelle configuration d&apos;attribut.
        * <DNT>**v5:**</DNT> Un avertissement sera toujours enregistré, mais la configuration sera ignorée et aucune mise à niveau automatique ne se produira plus.
        * <DNT>**Troubleshooting tips:**</DNT> Si votre application avait des paramètres répertoriés dans la configuration `ignored_params`, vous devrez les déplacer vers [`attributes.exclude`](/docs/agents/nodejs-agent/installation-configuration/nodejs-agent-configuration#attributes_exclude).
      </td>
    </tr>
  </tbody>
</table>

## Prise en charge des versions de Node.js [#node-support-v5]

Node.js 6 est la première version prise en charge par l&apos;agent New Relic Node.js v5. Node.js 4 et 5 ne sont pas pris en charge par la v5. Les clients exécutant Node.js 4 ou 5 ont deux options :

* Passez à une version prise Node.js en charge de et profitez de la New Relic Node.js agentnouvelle fonctionnalité de v5.
* Restez sur New Relic Node.js v4 agent sans la possibilité d&apos;utiliser la nouvelle fonctionnalité disponible uniquement avec les versions de mise agent à jour.

[Node.js 7 et 9 ne reçoivent plus de mises à jour](https://github.com/nodejs/Release/tree/cecdcf#end-of-life-releases), mais New Relic continuera à prendre en charge ces versions de Node.js pour le moment.

<Callout variant="tip">
  Passez à une version plus récente de Node.js dès que possible. La prochaine version majeure de l&apos;agent New Relic Node.js supprimera probablement la prise en charge de Node.js 6 et 7.
</Callout>

## drapeaux de fonctionnalités à partir de la v5 [#v5-feature-flags]

À partir de New Relic pour Node.js v5 :

* `custom_instrumentation`:Cette fonctionnalité n&apos;est plus configurable.
* `custom_metrics`:Cette fonctionnalité n&apos;est plus configurable.
* `synthetics`:Cette fonctionnalité n&apos;est plus configurable.
* `native_metrics`:Cette fonctionnalité est désormais contrôlée par la valeur de configuration `plugins.native_metrics.enabled` .

## Mise à niveau vers la version 4 de l&apos;agent Node.js [#node-agent-v4]

Avant de procéder à la mise à niveau vers l&apos;agent Node.js v4, consultez ces informations pour connaître les modifications majeures. Consultez également [le guide de migration Node.js v4 de New Relic sur GitHub](https://github.com/newrelic/node-newrelic/blob/819db2f3f9051960e034f36540817450f663241f/Migration%20Guide.md#upgrading-to-agent-v4).

<CollapserGroup>
  <Collapser id="https-proxy-agent" title="Mettre à jour https-proxy-agent de v0 à v2">
    Les principaux changements apportés à l&apos;agent Node.js v4 incluent une mise à niveau de `https-proxy-agent` de la v0 à la v2. Cette dépendance a été mise à jour en raison d&apos;un [problème de sécurité](/docs/using-new-relic/new-relic-security/security-bulletins/security-bulletin-nr18-08) dans le `https-proxy-agent` utilisé par l&apos;agent New Relic Node.js. Parce que `https-proxy` v2 est incompatible avec les nœuds v0.10 et v0.12, New Relic a rendu ces versions d&apos;agent obsolètes. Aucune action n&apos;est requise pour migrer de la v3 vers la v4 de l&apos;agent Node.js de New Relic.
  </Collapser>

  <Collapser id="v4-node-version" title="Prise en charge des versions de Node.js">
    Node.js 4 est la première version prise en charge par l&apos;agent New Relic Node.js v4. Node.js 0.10 et 0.12 ne sont pas pris en charge par la v4. Les clients exécutant Node.js 0.10 ou 0.12 ont deux options :

    * Passez à une version prise Node.js en charge de et profitez de la New Relic Node.js agentnouvelle fonctionnalité de v4.

    * Restez sur New Relic Node.js l&apos; v3 agent sans la possibilité d&apos;utiliser la nouvelle fonctionnalité disponible uniquement avec les agent versions mises à jour.

      [Node.js 4, 5 et 7 ne reçoivent plus de mises à jour](https://github.com/nodejs/Release/tree/1d8fca#end-of-life-releases), mais New Relic continuera à prendre en charge ces versions de Node.js pour le moment.

      <Callout variant="tip">
        Passez à une version plus récente de Node.js dès que possible. La prochaine version majeure de l&apos;agent New Relic Node.js supprimera probablement la prise en charge de Node.js 4 et 5.
      </Callout>
  </Collapser>
</CollapserGroup>

## Mise à niveau vers la version 3 de l&apos;agent Node.js [#node-agent-v3]

Avant de procéder à la mise à niveau vers l&apos;agent Node.js agent v3, consultez ces informations pour connaître les modifications majeures. Consultez également [le guide de migration Node.js v3 de New Relic sur GitHub](https://github.com/newrelic/node-newrelic/blob/819db2f3f9051960e034f36540817450f663241f/Migration%20Guide.md#upgrading-to-agent-v3).

<CollapserGroup>
  <Collapser id="changes-v3" title="Changements majeurs avec l'agent Node.js v3">
    <table>
      <thead>
        <tr>
          <th style={{ width: "250px" }}>
            <DNT>
              **Major changes with Node.js v3 agent**
            </DNT>
          </th>

          <th>
            <DNT>
              **Comments**
            </DNT>
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            Configuration SSL supprimée
          </td>

          <td>
            * <DNT>**v2:**</DNT> Avec l&apos; agent v2, il était possible de configurer l&apos; agent pour se connecter à New Relic sans chiffrement.
            * <DNT>**v3:**</DNT> Node.js agent v3 se connecte toujours aux New Relic serveurs en utilisant le chiffrement TLS pour protéger les communications. Si l&apos; agent est configuré pour désactiver cette option, un avertissement est enregistré et le paramètre est ignoré.
          </td>
        </tr>

        <tr>
          <td>
            Le paramètre de requête est désormais préfixé par `request.parameters.`
          </td>

          <td>
            * <DNT>**v2:**</DNT> L&apos;agent v2 collecte les paramètres de requête, tels que le paramètre de route (`/users/:userId`) et le paramètre de requête (`/users?userId=123`), en tant que nom du paramètre (`userId`).
            * <DNT>**v3:**</DNT> L&apos;agent v3 préfixe tous les paramètres de demande avec la chaîne `request.parameters.`. Par exemple,`userId` apparaît comme `request.parameters.userId`.
            * <DNT>**Troubleshooting tips:**</DNT> Si vous disposez d&apos;un dashboard, d&apos;une règle d&apos;alerte ou d&apos;une autre requête NRQL basée sur un paramètre de requête, mettez-les à jour avec les nouveaux noms de paramètres.
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="v3-feature-flags" title="drapeaux de fonctionnalités à partir de la v3">
    À partir de l&apos;agent New Relic Node.js v3, la fonctionnalité `send_request_uri_attribute` n&apos;est plus configurable.
  </Collapser>
</CollapserGroup>

## Mise à niveau vers la version 2 de l&apos;agent Node.js [#node-agent-v2]

Avant de procéder à la mise à niveau vers l&apos;agent Node.js v2, consultez ces informations pour connaître les modifications majeures. Consultez également [le guide de migration Node.js v2 de New Relic sur GitHub](https://github.com/newrelic/node-newrelic/blob/819db2f3f9051960e034f36540817450f663241f/Migration%20Guide.md#upgrading-to-agent-v2).

<CollapserGroup>
  <Collapser id="changes-v2" title="Changements majeurs avec l'agent Node.js v2">
    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            <DNT>
              **Major changes with Node.js v2 agent**
            </DNT>
          </th>

          <th>
            <DNT>
              **Comments**
            </DNT>
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            Inverser les noms et ignorer les règles
          </td>

          <td>
            * <DNT>**v1:**</DNT> Avec l&apos;agent v1, les règles définies dans les propriétés de configuration `rules.name` et `rules.ignore` étaient appliquées dans l&apos;ordre inverse ; la première règle de la liste était appliquée en dernier.
            * <DNT>**v2:**</DNT> L&apos;agent Node.js v2 applique les règles dans l&apos;ordre dans lequel elles sont définies, de sorte que la première règle de la liste est appliquée en premier.
            * <DNT>**Troubleshooting tips:**</DNT> Si vous avez utilisé des règles de dénomination dans l&apos;agent v1 et que vous constatez des problèmes, inversez l&apos;ordre de vos règles dans votre configuration.
          </td>
        </tr>

        <tr>
          <td>
            Transactions de requêtes HTTP dédupliquées
          </td>

          <td>
            * <DNT>**v1:**</DNT> L&apos;agent v1 a démarré une nouvelle transaction pour chaque écouteur sur l&apos;événement `request` d&apos;un serveur HTTP. Dans une application avec plusieurs auditeurs sur l&apos;événement `request`, cela entraînait la création de transactions superflues qui n&apos;étaient presque toujours pas nommées correctement.
            * <DNT>**v2:**</DNT> L&apos;agent v2 ne crée qu&apos;une seule transaction pour chaque événement `request` émis.
            * <DNT>**Troubleshooting tips:**</DNT> Si vous avez utilisé plusieurs écouteurs d&apos;événements `request` et ajouté un appel à `newrelic.ignoreTransaction()` pour supprimer les transactions supplémentaires, supprimez ces appels.
          </td>
        </tr>

        <tr>
          <td>
            Arrêt de l&apos;absorption des erreurs de requêtes sortantes
          </td>

          <td>
            * <DNT>**v1:**</DNT> L&apos;agent v1 a avalé l&apos;événement `error` non géré émis par les objets de requête HTTP sortants.
            * <DNT>**v2:**</DNT> L&apos;agent v2 supprime ce comportement. Au lieu de cela, l&apos;agent v2 ne modifie pas l&apos;exécution normale de Node.js. Cela signifie que l&apos;événement `error` sera toujours émistre.
            * <DNT>**Troubleshooting tips:**</DNT> Si vous effectuez requests sortantes et que vous n&apos;écoutez pas actuellement l&apos;événement `error`, ajoutez un écouteur et gérez l&apos;erreur comme il convient à votre application.
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="config-options" title="Options de configuration mises à jour à partir de la v2">
    Dans `newrelic.js`, modifiez les propriétés [de configuration de l&apos;agent Node.js](/docs/agents/nodejs-agent/installation-configuration/nodejs-agent-configuration) que vous utilisez pour assurer la compatibilité avec les dernières versions :

    <table>
      <thead>
        <tr>
          <th width={200}>
            <DNT>
              **Deprecated property**
            </DNT>
          </th>

          <th>
            <DNT>
              **New property**
            </DNT>
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `capture_params`
          </td>

          <td>
            `attributes.enabled: false`

            Par défaut, les attributs de demande ne sont pas envoyés à New Relic. Définissez `attributes.enabled: true` pour inclure agentdéfini ou l&apos;attribut personnalisé dans la trace. La propriété `capture_params` est obsolète.
          </td>
        </tr>

        <tr>
          <td>
            `ignored_params`
          </td>

          <td>
            `attributes.exclude: []`

            Ajoutez toutes les clés d’attribut de demande à la liste `attributes.exclude` . Désormais, au lieu de devoir correspondre exactement, des caractères génériques (`*`) peuvent être ajoutés à chaque élément pour un filtrage plus large. La propriété `ignored_params` est obsolète.
          </td>
        </tr>
      </tbody>
    </table>

    Ces propriétés [de configuration de l&apos;agent Node.js](/docs/agents/nodejs-agent/installation-configuration/nodejs-agent-configuration) ont également des remplacements pour des destinations spécifiques, notamment :

    * `transaction_tracer`

    * `transaction_events`

    * `error_collector`

    * `browser_monitoring`

      Par exemple, si la racine `attributes.enabled` est `true` et que vous définissez `transaction_tracer.attributes.enabled: false`, cela empêchera la collecte de l&apos;attribut dans la trace de transaction, tout en l&apos;autorisant pour tous les autres.
  </Collapser>

  <Collapser id="deprecated-apis" title="Méthodes API obsolètes à partir de la version 2">
    Les méthodes suivantes de l&apos;agent Node.js sont obsolètes et New Relic les a supprimées dans la version 5 de l&apos;agent. Chacun dispose d&apos;un remplacement facile qui accomplit la même tâche de manière plus flexible et plus fiable.

    <CollapserGroup>
      <Collapser
        id="newrelic_createWebTransaction"
        title={<InlineCode>newrelic.createWebTransaction()</InlineCode>
        }
      >
        Remplacez par [`newrelic.startWebTransaction()`](#newrelic_start_transaction) et [`newrelic.getTransaction()`](#newrelic_getTransaction).
      </Collapser>

      <Collapser
        id="newrelic_createBackgroundTransaction"
        title={<InlineCode>newrelic.createBackgroundTransaction()</InlineCode>
        }
      >
        Remplacez par [`newrelic.startBackgroundTransaction()`](#newrelic_start_transaction) et [`newrelic.getTransaction()`](#newrelic_getTransaction).
      </Collapser>

      <Collapser
        id="newrelic_addCustomParameter"
        title={<InlineCode>newrelic.addCustomParameter()</InlineCode>
        }
      >
        Remplacer par [`newrelic.addCustomAttribute()`](#newrelic_add_custom_attribute).
      </Collapser>

      <Collapser
        id="newrelic_addCustomParameter"
        title={<InlineCode>newrelic.addCustomParameters()</InlineCode>
        }
      >
        Remplacer par [`newrelic.addCustomAttributes()`](#newrelic_add_custom_attributes).
      </Collapser>
    </CollapserGroup>
  </Collapser>

  <Collapser id="api-methods" title="Nouvelle API v2 d' agent methods">
    Les méthodes API suivantes sont nouvelles avec l’agent New Relic Node.js v2.

    <CollapserGroup>
      <Collapser
        id="newrelic_getTransaction"
        title={<InlineCode>newrelic.getTransaction()</InlineCode>
        }
      >
        Cette méthode obtient une référence à la transaction en cours d&apos;exécution. Utiliser en conjonction avec :

        * `newrelic.startWebTransaction`
        * `newrelic.startBackgroundTransaction`
        * services de rappel message consommateur pour [dépannage message consommateur](/docs/agents/nodejs-agent/troubleshooting/troubleshoot-message-consumers)
      </Collapser>

      <Collapser
        id="newrelic_start_transaction"
        title={<><InlineCode>
          newrelic.startWebTransaction()
        </InlineCode><InlineCode>
          newrelic.startBackgroundTransaction()
        </InlineCode></>
        }
      >
        Ces nouvelles méthodes API remplacent les anciennes méthodes `create*Transaction` . Ils sont plus faciles à utiliser et fonctionnent parfaitement avec les promesses. Contrairement à la méthode v1, le rappel fourni est appelé immédiatement.
      </Collapser>

      <Collapser
        id="newrelic_instrument"
        title={<><InlineCode>
          newrelic.instrument()
        </InlineCode><InlineCode>
          newrelic.instrumentDatastore()
        </InlineCode><InlineCode>
          newrelic.instrumentWebframework()
        </InlineCode><InlineCode>
          newrelic.instrumentMessages()
        </InlineCode></>
        }
      >
        Utilisez ces méthodes pour ajouter instrumentation personnalisée pour les modules tiers, y compris ceux déjà instrumentés par l&apos;agent Node.js New Relic Pour plus d&apos;informations, consultez [l&apos;exemple d&apos;application d&apos;instrumentation Node.js de New Relic sur GitHub](https://github.com/newrelic/newrelic-node-examples/tree/4284ee7eab69708238db0a44f97ff7e839e165cf/custom-instrumentation/instrument).
      </Collapser>

      <Collapser
        id="newrelic_add_custom_attribute"
        title={<InlineCode>newrelic.addCustomAttribute()</InlineCode>
        }
      >
        Utilisez cette méthode pour ajouter un attribut de trace personnalisé.
      </Collapser>

      <Collapser
        id="newrelic_add_custom_attributes"
        title={<InlineCode>newrelic.addCustomAttributes()</InlineCode>
        }
      >
        Utilisez cette méthode pour ajouter plusieurs attributs trace personnalisés.
      </Collapser>
    </CollapserGroup>
  </Collapser>

  <Collapser id="node-support" title="Prise en charge de la version Node.js pour la v2">
    La première version de Node.js prise en charge par l&apos;agent New Relic Node.js v2 est la 0.10. Node.js 0.8, qui n&apos;a pas été mis à jour depuis juillet 2014, n&apos;est pas pris en charge par la v2. Les clients exécutant Node.js 0.8 ont deux options :

    * Passez à une version prise Node.js en charge de et profitez de la New Relic Node.js agentnouvelle fonctionnalité de v2.

    * Restez sur New Relic Node.js v1 agent sans la possibilité d&apos;utiliser la nouvelle fonctionnalité disponible uniquement avec les agent versions mises à jour.

      [Node.js 0.10 ne reçoit plus non plus de mises à jour](https://github.com/nodejs/LTS/tree/2b4253#lts-schedule1), mais New Relic continuera à prendre en charge cette version de Node.js pour le moment.

      Recommandation : mettez à niveau vers une version plus récente de Node.js dès que possible.
  </Collapser>

  <Collapser id="npm-versions" title="Prise en charge de la version npm à partir de la v2">
    L&apos;agent New Relic Node.js nécessite désormais la version npm 2.0.0 ou supérieure. Cette version de npm est fournie avec Node.js 0.10.44 ou supérieur.

    Si vous utilisez une version antérieure de Node.js 0.10, vous devrez d&apos;abord installer npm 2.0.0 ou supérieur, ou effectuer une mise à niveau vers une version plus récente de Node. Pour installer npm version 2 :

    ```bash
    npm install --global npm@2
    ```
  </Collapser>

  <Collapser id="v2-feature-flags" title="drapeaux de fonctionnalités à partir de la v2">
    À partir de l&apos;agent New Relic Node.js v2 :

    * `express_segments`:Cette fonctionnalité n&apos;est plus configurable.
    * `cat`:Cette fonctionnalité est désormais contrôlée par la valeur de configuration `cross_application_tracer.enabled` .
  </Collapser>

  <Collapser id="framework-minimum" title="Versions minimales du framework à partir de la v2">
    À partir de l&apos;agent New Relic Node.js v2 :

    <table>
      <thead>
        <tr>
          <th style={{ width: "150px" }}>
            <DNT>
              **Module**
            </DNT>
          </th>

          <th style={{ width: "175px" }}>
            <DNT>
              **V2 minimum**
            </DNT>
          </th>

          <th style={{ width: "175px" }}>
            <DNT>
              **Minimum before v2**
            </DNT>
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            exprimer
          </td>

          <td>
            4.6.0
          </td>

          <td>
            2.0.0
          </td>
        </tr>

        <tr>
          <td>
            MySQL
          </td>

          <td>
            2.0.0
          </td>

          <td>
            0.9.0
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>