---
title: Python instrumentation personnalisée
tags:
  - Agents
  - Python agent
  - Custom instrumentation
metaDescription: How to create custom instrumentation with the Python agent by updating the config file or making direct calls to the agent API.
freshnessValidatedDate: never
translationType: machine
---

[instrumentation personnalisée vous](/docs/apm/other-features/metrics/custom-instrumentation) permet agent monitoring d&apos;étendre et le comportement par défaut de pour cibler des appels et activités fonctionnels supplémentaires. Vous pouvez le faire via le fichier de configuration agent, ou via l&apos; API d&apos; agent.

## Instrumentation via fichier de configuration ou API [#options]

Il existe deux méthodes principales pour ajouter une instrumentation personnalisée :

* Si vous souhaitez simplement le trace temps passé dans des fonctions ou des méthodes supplémentaires de classes, vous pouvez identifier une liste de fonctions ou de méthodes dans le agent configuration fichier . Pour plus d&apos;informations, voir [Instrumentation via le fichier de configuration](/docs/agents/python-agent/custom-instrumentation/python-custom-instrumentation-config-file).
* Pour les cas plus complexes, ou si vous souhaitez personnaliser la manière dont la fonction est identifiée dans l&apos;UI New Relic, vous pouvez placer l&apos;appel d&apos;API dans le application code de votre . Pour plus d&apos;informations, voir [Instrumentation via API](/docs/agents/python-agent/custom-instrumentation/python-custom-instrumentation-api).

Dans les deux cas, ces mécanismes ciblent uniquement l’appel de fonction désigné. Il n’est pas récursif et ne permet pas un profilage complet sous la fonction annotée.

## Considérations supplémentaires [#notes]

Vous devez annoter individuellement chaque appel de fonction que vous souhaitez trace. Si vous n&apos;êtes pas sûr de la fonction que vous devez annoter, vous pouvez utiliser la fonctionnalité [de profilage de thread](/docs/applications-menu/thread-profiler) pour l&apos;affiner.

<Callout variant="caution">
  La collecte d&apos;un trop grand nombre de métriques peut avoir un impact sur les performances de votre application et de l&apos; agent. Pour éviter d’éventuels problèmes de données, essayez de maintenir le nombre total de métriques uniques introduites par instrumentation personnalisée inférieur à 2 000.
</Callout>