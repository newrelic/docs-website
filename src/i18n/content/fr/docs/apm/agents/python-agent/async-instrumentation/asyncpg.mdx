---
title: Asyncpg
tags:
  - Agents
  - Python agent
  - Async instrumentation
metaDescription: How to use New Relic's Python agent with asyncpg
freshnessValidatedDate: never
translationType: machine
---

L&apos;agent Python prend en charge l&apos;enregistrement des transactions de base de données lors de l&apos;utilisation du module client de base de données [`asyncpg`](https://pypi.org/project/asyncpg/) pour [PostgresSQL](https://www.postgresql.org/). Cette fonctionnalité capture le timing de la requête de base de données, les instructions SQL pour la requête de base de données et une trace d&amp;apos;appels pour la requête de base de données longue.

Découvrez les exigences et les conseils pour intégrer notre agent Python à une application qui utilise [`asyncpg`](https://pypi.org/project/asyncpg/). Pour revenir aux instructions d’installation générales, accédez à [Installer l’agent Python](/docs/agents/python-agent/installation-configuration/python-agent-installation).

## Initialisation automatique avec script d&apos;administration [#wrapper-script]

Si vous démarrez votre application avec `python app.py` et utilisez notre agent Python <DNT>**version 5.20.0.149**</DNT> ou supérieur, vous pouvez utiliser la [méthode d&apos;intégration de script d&apos;administration](/docs/agents/python-agent/installation-configuration/python-agent-installation#integration) recommandée. Par exemple :

```sh
NEW_RELIC_CONFIG_FILE=path/to/newrelic.ini newrelic-admin run-program python path_to_app
```

## Utilisation de Python API l&apos; d&apos;agent [#api]

Vous pouvez utiliser [l&apos;agent API Python](/docs/agents/python-agent/python-agent-api) pour monitorer n&amp;apos;importe quel serveur ASGI ou framework. Pour ce faire, marquez le [point d’entrée de l’application ASGI](/docs/agents/python-agent/python-agent-api/asgiapplication-python-agent-api) et définissez les [noms de transaction](/docs/agents/python-agent/python-agent-api/settransactionname-python-agent-api).

## support de diagnostic de boucle d&apos;événement [#event-loops]

Notre Python agent prend `asyncio` en charge les diagnostics de boucle d&amp;apos;événement. Pour plus d&amp;apos;informations, voir [Diagnostics de boucle d&apos;événementPython ](/docs/agents/python-agent/supported-features/python-event-loop-diagnostics).