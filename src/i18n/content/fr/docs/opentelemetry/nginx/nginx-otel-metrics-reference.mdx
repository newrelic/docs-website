---
title: Référence des métriques et attributs OpenTelemetry NGINX
metaDescription: 'Complete reference of NGINX metrics collected via OpenTelemetry, including resource attributes for both on-host and Kubernetes deployments.'
freshnessValidatedDate: never
translationType: machine
---

Cette référence couvre toutes les métriques et attributs collectés par le récepteur OpenTelemetry NGINX, applicables aux déploiements sur hôte et Kubernetes.

## Métriques principales de NGINX [#core-metrics]

Le [nginxreceiver](https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/nginxreceiver) de OpenTelemetry Collector Contrib collecte les métriques suivantes à partir du module de statut stub NGINX :

<table>
  <thead>
    <tr>
      <th style={{ width: "350px" }}>
        métrique
      </th>

      <th>
        Description
      </th>

      <th>
        Type
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `nginx.connections_accepted`
      </td>

      <td>
        Le nombre total de connexions client acceptées. Utilisez ceci pour suivre les taux d&apos;acceptation des connexions au fil du temps.
      </td>

      <td>
        Somme
      </td>
    </tr>

    <tr>
      <td>
        `nginx.connections_handled`
      </td>

      <td>
        Le nombre total de connexions gérées. Généralement, la valeur du paramètre est la même que nginx.connections\_accepted sauf si certaines limites de ressources ont été atteintes (par exemple, la limite worker\_connections). Un écart entre les connexions acceptées et gérées suggère des contraintes de ressources.
      </td>

      <td>
        Somme
      </td>
    </tr>

    <tr>
      <td>
        `nginx.connections_current`
      </td>

      <td>
        Le nombre actuel de connexions nginx par état. Les états incluent : <strong>active</strong> (connexions actives totales), <strong>reading</strong> (lecture des en-têtes de requête), <strong>writing</strong> (écriture des réponses), <strong>waiting</strong> (connexions keep-alive en attente de la prochaine requête).
      </td>

      <td>
        Somme
      </td>
    </tr>

    <tr>
      <td>
        `nginx.requests`
      </td>

      <td>
        Nombre total de requêtes effectuées vers le serveur depuis son démarrage. Utilisez les calculs de taux pour dériver les requêtes par seconde pour le monitoring des performances.
      </td>

      <td>
        Somme
      </td>
    </tr>
  </tbody>
</table>

**Conseils de planification de la capacité :**

* Un nombre élevé de connexions `waiting` peut indiquer des opportunités d&apos;optimisation keep-alive
* L&apos;écart entre les connexions `accepted` et `handled` suggère des contraintes de ressources
* Les ratios requête-connexion aident à optimiser les configurations des workers

## Attributs de ressource [#resource-attributes]

Les attributs de ressource fournissent un contexte sur votre déploiement NGINX et varient selon que vous utilisez un déploiement sur hôte ou Kubernetes.

### Attribut commun [#common-attributes]

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        Attribut
      </th>

      <th style={{ width: "350px" }}>
        Description
      </th>

      <th>
        Exemples de valeurs
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `state`
      </td>

      <td>
        L&apos;état d&apos;une connexion (applicable à la métrique `nginx.connections_current`)
      </td>

      <td>
        `active`, `reading`, `writing`, `waiting`
      </td>
    </tr>

    <tr>
      <td>
        `nginx.server.endpoint`
      </td>

      <td>
        L&apos;URL du point de terminaison de statut stub NGINX
      </td>

      <td>
        `http://localhost:8080/stub_status`
      </td>
    </tr>
  </tbody>
</table>

### Attributs de déploiement sur hôte [#on-host-attributes]

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        Attribut
      </th>

      <th style={{ width: "350px" }}>
        Description
      </th>

      <th>
        Exemples de valeurs
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `nginx.deployment.name`
      </td>

      <td>
        Un nom unique pour identifier ce déploiement NGINX
      </td>

      <td>
        `production-web-01`, `staging-api`
      </td>
    </tr>

    <tr>
      <td>
        `nginx.display.name`
      </td>

      <td>
        Un nom convivial combinant le préfixe « server » avec le nom du déploiement
      </td>

      <td>
        `server:production-web-01`
      </td>
    </tr>

    <tr>
      <td>
        `host.name`
      </td>

      <td>
        Le nom d&apos;hôte du système où NGINX est en cours d&apos;exécution
      </td>

      <td>
        `web-server-01.example.com`
      </td>
    </tr>

    <tr>
      <td>
        `host.id`
      </td>

      <td>
        L&apos;identifiant unique du système hôte
      </td>

      <td>
        `i-1234567890abcdef0`
      </td>
    </tr>

    <tr>
      <td>
        `logtype`
      </td>

      <td>
        Le type de log collecté (applicable aux logs uniquement). Utilisé par les [règles d&apos;analyse](https://docs.newrelic.com/docs/logs/ui-data/built-log-parsing-rules/#nginx) intégrées de New Relic. Cet attribut est disponible uniquement lorsque le transfert des logs est activé.
      </td>

      <td>
        `nginx` (pour les logs d&apos;accès), `nginx-error` (pour les logs d&apos;erreurs)
      </td>
    </tr>
  </tbody>
</table>

### Attributs de déploiement Kubernetes [#kubernetes-attributes]

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        Attribut
      </th>

      <th style={{ width: "350px" }}>
        Description
      </th>

      <th>
        Exemples de valeurs
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `k8s.cluster.name`
      </td>

      <td>
        Le nom du cluster Kubernetes
      </td>

      <td>
        `nginx-cluster`, `production-k8s`
      </td>
    </tr>

    <tr>
      <td>
        `k8s.namespace.name`
      </td>

      <td>
        L&apos;espace de noms Kubernetes où le pod NGINX est en cours d&apos;exécution
      </td>

      <td>
        `default`, `web-services`, `production`
      </td>
    </tr>

    <tr>
      <td>
        `k8s.pod.name`
      </td>

      <td>
        Le nom du pod Kubernetes exécutant NGINX
      </td>

      <td>
        `nginx-deployment-7d4b8c6f9-x5z8w`
      </td>
    </tr>

    <tr>
      <td>
        `nginx.deployment.name`
      </td>

      <td>
        Défini sur le nom du pod pour les déploiements Kubernetes
      </td>

      <td>
        `nginx-deployment-7d4b8c6f9-x5z8w`
      </td>
    </tr>

    <tr>
      <td>
        `nginx.display.name`
      </td>

      <td>
        Un nom d&apos;affichage complet comprenant les informations sur le cluster, l&apos;espace de noms et le pod
      </td>

      <td>
        `server:k8s:nginx-cluster:default:pod:nginx-deployment-7d4b8c6f9-x5z8w:nginx:8080`
      </td>
    </tr>
  </tbody>
</table>

## Détails de la collecte des métriques [#collection-details]

### Fréquence de collecte

* **Intervalle par défaut**: 30 secondes
* **Configurable**: peut être ajusté dans la configuration d&apos;OpenTelemetry Collector

### Source des données

Toutes les métriques sont collectées à partir du [module stub\_status](https://nginx.org/en/docs/http/ngx_http_stub_status_module.html) de NGINX, qui doit être activé et configuré pour exposer un point de terminaison HTTP.

### types métriques

* **Métriques de somme**: valeurs cumulées qui représentent les totaux au fil du temps
* **Calculs de taux**: utilisez la fonction `rate()` de New Relic pour convertir les métriques cumulées en taux par seconde pour le monitoring

## Documentation associée [#related-docs]

**Guides de configuration :**

* [Monitorer NGINX sur des environnements auto-hébergés](/docs/opentelemetry/nginx/nginx-otel-host/) - Configuration complète pour les déploiements sur hôte
* [Monitorer NGINX sur Kubernetes](/docs/opentelemetry/nginx/nginx-otel-kubernetes/) - Configuration complète pour les déploiements Kubernetes

**Utilisation des données :**

* [Trouvez et interrogez vos données NGINX](/docs/opentelemetry/nginx/find-and-query-your-data/) - Dashboards, requêtes NRQL et alertes

**Référence technique :**

* [Documentation du récepteur NGINX](https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/receiver/nginxreceiver/documentation.md) - Détails techniques d&apos;OpenTelemetry