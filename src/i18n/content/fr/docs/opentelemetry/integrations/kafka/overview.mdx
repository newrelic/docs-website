---
title: Aperçu du monitoring Kafka OpenTelemetry
tags:
  - Integrations
  - OpenTelemetry
  - Kafka
  - On-host integrations
metaDescription: Monitor Kafka with OpenTelemetry Collector for comprehensive metrics collection from self-hosted and Kubernetes Kafka clusters.
freshnessValidatedDate: never
translationType: machine
---

Le monitoring de Kafka offre une visibilité en temps réel sur vos clusters Apache Kafka pour garantir un streaming de données fiable et éviter des temps d&apos;arrêt coûteux dans les systèmes distribués. En utilisant une approche basée sur des collecteurs, vous bénéficiez d&apos;un monitoring complet grâce à une solution flexible et neutre vis-à-vis des fournisseurs, qui fonctionne dans les environnements auto-hébergés et Kubernetes avec Strimzi.

## Options du collecteur [#collector-options]

New Relic prend en charge deux distributions OpenTelemetry Collector pour le monitoring de Kafka, offrant toutes deux des fonctionnalités identiques avec les mêmes fichiers de configuration et capacités de monitoring.

* **NRDOT Collector (recommandé)**: la distribution par New Relic de l&apos;OpenTelemetry Collector avec le support de New Relic pour l&apos;assistance. Télécharger depuis [NRDOT Collector releases](https://github.com/newrelic/nrdot-collector-releases/releases).
* **OpenTelemetry Collector**: la distribution communautaire en amont. Télécharger depuis les [versions de l&apos;OpenTelemetry Collector](https://github.com/open-telemetry/opentelemetry-collector-releases/releases).

Choisissez le collecteur le mieux adapté à vos besoins opérationnels et de support, puis [configurez le monitoring](#get-started) pour votre environnement.

<img title="OTel Kafka Dashboard" alt="Dashboard showing Kafka cluster health, network throughput, active brokers, topics, partitions, and consumer groups" src="/images/otel-kafka-dashboard.webp" />

<figcaption>
  Monitorez vos clusters Kafka avec des dashboards complets affichant l&apos;état du cluster, l&apos;état du broker, les métriques des sujets et les performances du groupe de consommateurs.
</figcaption>

## Pourquoi le monitoring de Kafka ?

* Prévenez les pannes - Recevez des alertes en cas de défaillances de broker, de partitions sous-répliquées et de sujets hors ligne avant qu&apos;elles ne provoquent des temps d&apos;arrêt.
* Optimiser les performances - Identifier le retard des consommateurs, les producteurs lents et les goulots d&apos;étranglement du réseau qui affectent la vitesse de traitement des données
* Planifier la capacité - Suivre l&apos;utilisation des ressources, les débits de messages et le nombre de connexions pour évoluer de manière proactive
* Assurez l&apos;intégrité des données - Monitorez l&apos;état de la réplication et l&apos;équilibre des partitions pour éviter la perte de données

### Cas d&apos;utilisation courant

Que vous diffusiez des transactions financières, traitiez des données de capteurs IoT ou gériez la communication des microservices, le monitoring Kafka vous aide à détecter les problèmes avant qu&apos;ils n&apos;aient un impact sur votre entreprise. Soyez alerté lorsque les pics de retard des consommateurs menacent les dashboards en temps réel, lorsque les pannes de broker risquent de provoquer une perte de données ou lorsque les goulots d&apos;étranglement du réseau ralentissent les pipelines de données critiques. Ce monitoring est essentiel pour les plateformes de commerce électronique, les systèmes d&apos;analyse en temps réel et toute application où les retards ou les pannes de livraison de messages peuvent affecter l&apos;expérience utilisateur ou les opérations commerciales.

## Démarrer [#get-started]

Choisissez votre environnement Kafka pour commencer le monitoring. Chaque guide d&apos;installation comprend des prérequis, des étapes de configuration et des conseils de dépannage.

<TechTileGrid>
  <TechTile name="Self-hosted Kafka" to="/docs/opentelemetry/integrations/kafka/self-hosted" icon="logo-linux" />

  <TechTile name="Kubernetes (Strimzi)" to="/docs/opentelemetry/integrations/kafka/kubernetes-strimzi" icon="logo-kubernetes" />
</TechTileGrid>

## Comment ça marche [#how-it-works]

Le monitoring de Kafka fonctionne en déployant un collecteur aux côtés de votre cluster Kafka pour collecter en continu des données de performance. Le collecteur utilise plusieurs composants spécialisés pour capturer des métriques complètes provenant de différentes parties de votre infrastructure Kafka.

**Trois composants fonctionnent ensemble pour collecter vos données :**

* [Récepteur de métriques Kafka](https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/kafkametricsreceiver) - Se connecte à votre cluster Kafka pour monitorer la santé globale, y compris le retard des consommateurs, les métriques des topics et le statut des partitions
* [Agent Java OpenTelemetry](https://github.com/open-telemetry/opentelemetry-java-instrumentation) - S&apos;exécute aux côtés de chaque broker Kafka pour collecter des métriques détaillées sur les performances de la JVM et des données opérationnelles, puis envoie ces informations au collecteur
* [Récepteur OTLP](https://github.com/open-telemetry/opentelemetry-collector/tree/main/receiver/otlpreceiver) - Reçoit et traite les métriques détaillées du broker provenant de l&apos;Agent Java

**Flux de données :**

1. L&apos;agent Java OpenTelemetry s&apos;attache aux brokers Kafka en tant qu&apos;agent Java via le paramètre `-javaagent`
2. L&apos;Agent Java collecte des métriques JMX à partir des brokers Kafka à l&apos;aide de règles de configuration personnalisées
3. Les métriques sont envoyées via le protocole OTLP (gRPC) au Collecteur OpenTelemetry sur le port 4317
4. Le récepteur de métriques Kafka collecte des métriques au niveau du cluster directement depuis Kafka via le port bootstrap
5. Les données sont traitées, enrichies et regroupées pour une transmission efficace
6. Les métriques sont exportées vers New Relic via l&apos;exportateur OTLP
7. New Relic crée automatiquement des entités et remplit les dashboards

**Ce que vous obtenez :** Les métriques clés incluent le lag du consommateur, la santé du broker, les taux de requêtes, le débit réseau, le statut de réplication des partitions, l&apos;utilisation des ressources et les données de performance de la JVM.

Pour les noms de métriques complets, les descriptions et les recommandations d&apos;alerte, consultez [Référence des métriques Kafka](/docs/opentelemetry/integrations/kafka/metrics-reference).

### Facultatif : Ajouter un monitoring au niveau de l&apos;application

La configuration du monitoring ci-dessus suit l&apos;état et les performances de votre cluster Kafka. Pour avoir une vue d&apos;ensemble de la façon dont les données circulent dans votre système, vous pouvez également monitorer les applications qui envoient et reçoivent des messages de Kafka.

**Le monitoring des applications ajoute :**

* Latences des requêtes de vos applications vers Kafka
* Métriques de débit au niveau de l&apos;application
* Taux d&apos;erreur et traces distribuées
* Visibilité complète des producteurs → brokers → consommateurs

**Configuration rapide :** Utilisez l&apos;[OpenTelemetry Java Agent](https://opentelemetry.io/docs/zero-code/java/agent/getting-started/) pour l&apos;[instrumentation Kafka sans code](https://opentelemetry.io/docs/zero-code/java/spring-boot-starter/out-of-the-box-instrumentation/). Pour une configuration avancée, consultez la [documentation d&apos;instrumentation Kafka](https://github.com/open-telemetry/opentelemetry-java-instrumentation/tree/main/instrumentation/kafka).

## Prochaines étapes [#next-steps]

Prêt à commencer à monitorer vos clusters Kafka ?

**Configurer le monitoring :**

* [Kafka auto-hébergé](/docs/opentelemetry/integrations/kafka/self-hosted) - Monitorez Kafka s&apos;exécutant sur des machines physiques ou virtuelles
* [Kubernetes avec Strimzi](/docs/opentelemetry/integrations/kafka/kubernetes-strimzi) - Monitorer Kafka déployé sur Kubernetes

**Après la configuration :**

* [Trouver et interroger vos données](/docs/opentelemetry/integrations/kafka/find-and-query-data) - Naviguer dans l&apos;interface New Relic et écrire des requêtes NRQL
* [Explorer les métriques Kafka](/docs/opentelemetry/integrations/kafka/metrics-reference) - Référence complète des métriques avec recommandations d&apos;alerte