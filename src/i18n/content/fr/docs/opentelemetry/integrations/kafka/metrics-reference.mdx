---
title: Référence des métriques OpenTelemetry Kafka
tags:
  - Integrations
  - OpenTelemetry
  - Kafka
  - Metrics
metaDescription: 'Complete reference for Kafka metrics collected via OpenTelemetry including Kafka metrics receiver, JMX receiver, and client metrics.'
freshnessValidatedDate: never
translationType: machine
---

Cette page documente les métriques collectées lors du monitoring d&apos;Apache Kafka avec OpenTelemetry. Les métriques sont collectées via le [récepteur de métriques Kafka](https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/kafkametricsreceiver), le [récepteur JMX](https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/jmxreceiver) et [l&apos;agent OpenTelemetry Java](https://opentelemetry.io/docs/languages/java/automatic/) pour les métriques côté client.

## Méthodes de collecte des métriques [#collection-methods]

Le monitoring OpenTelemetry Kafka utilise deux récepteurs complémentaires :

* **[Récepteur de métriques Kafka](https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/kafkametricsreceiver)**: Se connecte au port de démarrage de Kafka pour collecter les métriques du cluster, des sujets, des partitions et des groupes de consommateurs
* **[Récepteur JMX](https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/jmxreceiver)**: se connecte au port JMX (généralement 9999) pour collecter des métriques détaillées du broker et des métriques JVM

## Métriques du récepteur de métriques Kafka [#kafka-metrics-receiver]

Ces métriques sont collectées auprès des brokers Kafka en utilisant le protocole Kafka (port de démarrage). Basé sur les [métadonnées du kafkametricsreceiver](https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/receiver/kafkametricsreceiver/metadata.yaml), avec certaines métriques désactivées par défaut ou dans les configurations typiques.

<CollapserGroup>
  <Collapser id="cluster-metrics" title="Métriques Cluster">
    <table>
      <thead>
        <tr>
          <th style={{ width: "300px" }}>
            Nom métrique
          </th>

          <th>
            Description
          </th>

          <th>
            Type
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `kafka.brokers`
          </td>

          <td>
            Nombre total de brokers dans le cluster
          </td>

          <td>
            Jauge (int)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="topic-metrics" title="Métriques des sujets">
    <table>
      <thead>
        <tr>
          <th style={{ width: "300px" }}>
            Nom métrique
          </th>

          <th>
            Description
          </th>

          <th>
            Type
          </th>

          <th>
            Attributs
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `kafka.topic.partitions`
          </td>

          <td>
            Nombre de partitions dans le sujet
          </td>

          <td>
            Somme (int)
          </td>

          <td>
            sujet
          </td>
        </tr>

        <tr>
          <td>
            `kafka.topic.min_insync_replicas`
          </td>

          <td>
            Réplicas synchronisés minimum d&apos;un sujet
          </td>

          <td>
            Jauge (int)
          </td>

          <td>
            sujet
          </td>
        </tr>

        <tr>
          <td>
            `kafka.topic.replication_factor`
          </td>

          <td>
            Facteur de réplication d&apos;un sujet
          </td>

          <td>
            Jauge (int)
          </td>

          <td>
            sujet
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="partition-metrics" title="Métriques des partitions">
    <table>
      <thead>
        <tr>
          <th style={{ width: "300px" }}>
            Nom métrique
          </th>

          <th>
            Description
          </th>

          <th>
            Type
          </th>

          <th>
            Attributs
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `kafka.partition.replicas_in_sync`
          </td>

          <td>
            Nombre de réplicas synchronisés pour une partition
          </td>

          <td>
            Somme (int)
          </td>

          <td>
            sujet, partition
          </td>
        </tr>

        <tr>
          <td>
            `kafka.partition.replicas_in_sync.total`
          </td>

          <td>
            Nombre total de répliques synchronisées agrégées sur toutes les partitions pour un sujet
          </td>

          <td>
            Somme (int)
          </td>

          <td>
            sujet
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="consumer-group-metrics" title="Métriques du groupe de consommateurs">
    <table>
      <thead>
        <tr>
          <th style={{ width: "300px" }}>
            Nom métrique
          </th>

          <th>
            Description
          </th>

          <th>
            Type
          </th>

          <th>
            Attributs
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `kafka.consumer_group.members`
          </td>

          <td>
            Nombre de membres dans le groupe de consommateurs
          </td>

          <td>
            Somme (int)
          </td>

          <td>
            groupe
          </td>
        </tr>

        <tr>
          <td>
            `kafka.consumer_group.offset`
          </td>

          <td>
            Décalage actuel du groupe de consommateurs à la partition du sujet
          </td>

          <td>
            Jauge (int)
          </td>

          <td>
            groupe, sujet, partition
          </td>
        </tr>

        <tr>
          <td>
            `kafka.consumer_group.offset_sum`
          </td>

          <td>
            Somme de l&apos;offset du groupe de consommateurs sur les partitions du sujet
          </td>

          <td>
            Jauge (int)
          </td>

          <td>
            groupe, sujet
          </td>
        </tr>

        <tr>
          <td>
            `kafka.consumer_group.lag`
          </td>

          <td>
            Retard approximatif actuel du groupe de consommateurs au niveau de la partition du sujet
          </td>

          <td>
            Jauge (int)
          </td>

          <td>
            groupe, sujet, partition
          </td>
        </tr>

        <tr>
          <td>
            `kafka.consumer_group.lag_sum`
          </td>

          <td>
            Somme approximative actuelle du retard du groupe de consommateurs sur toutes les partitions du sujet
          </td>

          <td>
            Jauge (int)
          </td>

          <td>
            groupe, sujet
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

## Métriques du récepteur JMX [#jmx-metrics]

Le récepteur JMX collecte des métriques détaillées à partir des MBeans du broker Kafka via JMX (généralement le port 9999). Les métriques sont collectées à l’aide de deux configurations :

1. **Système cible Kafka par défaut** - Métriques spécifiques à Kafka intégrées à partir de `target_system: kafka` ([kafka.yaml](https://github.com/open-telemetry/opentelemetry-java-contrib/blob/main/jmx-scraper/src/main/resources/kafka.yaml))
2. **Métriques JMX personnalisées** - Métriques Kafka et JVM supplémentaires définies dans la configuration personnalisée

### Métriques système cibles Kafka par défaut

Ces métriques sont collectées automatiquement lors de l&apos;utilisation de `target_system: kafka`:

<CollapserGroup>
  <Collapser id="jmx-cluster-metrics" title="Métriques au niveau du cluster">
    Ces métriques sont collectées à partir du broker du contrôleur et fournissent des informations à l’échelle du cluster :

    <table>
      <thead>
        <tr>
          <th style={{ width: "350px" }}>
            Nom métrique
          </th>

          <th>
            Description
          </th>

          <th>
            Type
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `kafka.partition.offline`
          </td>

          <td>
            Le nombre de partitions hors ligne dans le cluster
          </td>

          <td>
            Jauge
          </td>
        </tr>

        <tr>
          <td>
            `kafka.leader.election.rate`
          </td>

          <td>
            Le nombre d&apos;élections du leader
          </td>

          <td>
            Comptoir
          </td>
        </tr>

        <tr>
          <td>
            `kafka.unclean.election.rate`
          </td>

          <td>
            Nombre d&apos;élections de leader non propres - une augmentation indique des défaillances du broker
          </td>

          <td>
            Comptoir
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="jmx-broker-metrics" title="Métriques du broker">
    <table>
      <thead>
        <tr>
          <th style={{ width: "350px" }}>
            Nom métrique
          </th>

          <th>
            Description
          </th>

          <th>
            Type
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `kafka.message.count`
          </td>

          <td>
            Le nombre de messages reçus par le broker
          </td>

          <td>
            Comptoir
          </td>
        </tr>

        <tr>
          <td>
            `kafka.request.count`
          </td>

          <td>
            Le nombre de requêtes reçues par le broker
          </td>

          <td>
            Comptoir
          </td>
        </tr>

        <tr>
          <td>
            `kafka.request.failed`
          </td>

          <td>
            Le nombre de requêtes ayant échoué
          </td>

          <td>
            Comptoir
          </td>
        </tr>

        <tr>
          <td>
            `kafka.request.time.total`
          </td>

          <td>
            Le temps total passé à traiter les requêtes (ms)
          </td>

          <td>
            Comptoir
          </td>
        </tr>

        <tr>
          <td>
            `kafka.request.time.avg`
          </td>

          <td>
            Temps moyen de traitement des requêtes (ms)
          </td>

          <td>
            Jauge
          </td>
        </tr>

        <tr>
          <td>
            `kafka.request.time.50p`
          </td>

          <td>
            Temps de requête au 50e percentile (ms)
          </td>

          <td>
            Jauge
          </td>
        </tr>

        <tr>
          <td>
            `kafka.request.time.99p`
          </td>

          <td>
            Temps de requête au 99e percentile (ms)
          </td>

          <td>
            Jauge
          </td>
        </tr>

        <tr>
          <td>
            `kafka.network.io`
          </td>

          <td>
            Octets reçus ou envoyés par courtier par seconde (inclut l&apos;attribut de direction : entrant/sortant)
          </td>

          <td>
            Comptoir
          </td>
        </tr>

        <tr>
          <td>
            `kafka.purgatory.size`
          </td>

          <td>
            Le nombre de requêtes en attente au purgatoire (opérations de production et d&apos;extraction)
          </td>

          <td>
            Jauge
          </td>
        </tr>

        <tr>
          <td>
            `kafka.partition.count`
          </td>

          <td>
            Le nombre de partitions sur le broker
          </td>

          <td>
            Jauge
          </td>
        </tr>

        <tr>
          <td>
            `kafka.partition.under_replicated`
          </td>

          <td>
            Le nombre de partitions sous-répliquées sur ce broker
          </td>

          <td>
            Jauge
          </td>
        </tr>

        <tr>
          <td>
            `kafka.isr.operation.count`
          </td>

          <td>
            Opérations de réplica synchronisées (réduction ou extension)
          </td>

          <td>
            Comptoir
          </td>
        </tr>

        <tr>
          <td>
            `kafka.lag.max`
          </td>

          <td>
            Lag maximum entre les réplicas suiveurs et le leader
          </td>

          <td>
            Jauge
          </td>
        </tr>

        <tr>
          <td>
            `kafka.controller.active.count`
          </td>

          <td>
            Si ce broker est le contrôleur actif (0 ou 1)
          </td>

          <td>
            Jauge
          </td>
        </tr>

        <tr>
          <td>
            `kafka.logs.flush.count`
          </td>

          <td>
            Nombre de vidages de logs
          </td>

          <td>
            Comptoir
          </td>
        </tr>

        <tr>
          <td>
            `kafka.logs.flush.time.50p`
          </td>

          <td>
            Temps de vidage des logs - 50e percentile (ms)
          </td>

          <td>
            Jauge
          </td>
        </tr>

        <tr>
          <td>
            `kafka.logs.flush.time.99p`
          </td>

          <td>
            Temps de vidage des logs - 99e percentile (ms)
          </td>

          <td>
            Jauge
          </td>
        </tr>
      </tbody>
    </table>

    **Attributs :** De nombreuses métriques incluent l&apos;attribut `type` indiquant le type de requête (par exemple, fetch, produce), ou `state` pour les opérations ISR (par exemple, shrink, expand), ou `direction` pour les E/S réseau (in, out).
  </Collapser>
</CollapserGroup>

### Métriques JMX personnalisées

Ces métriques Kafka et JVM supplémentaires sont collectées lors de l’utilisation d’un fichier de configuration JMX personnalisé (comme indiqué dans la [configuration auto-hébergée](/docs/opentelemetry/integrations/kafka/self-hosted#jmx-config)). La configuration personnalisée vous permet de collecter des métriques spécifiques à Kafka supplémentaires au-delà de l’ensemble par défaut, ainsi que des métriques d’intégrité JVM.

<CollapserGroup>
  <Collapser id="jmx-cluster-level-metrics" title="Métriques au niveau du cluster">
    <table>
      <thead>
        <tr>
          <th style={{ width: "350px" }}>
            Nom métrique
          </th>

          <th>
            Description
          </th>

          <th>
            Type
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `kafka.cluster.topic.count`
          </td>

          <td>
            Le nombre total de sujets dans le cluster
          </td>

          <td>
            Jauge
          </td>
        </tr>

        <tr>
          <td>
            `kafka.cluster.partition.count`
          </td>

          <td>
            Le nombre total de partitions dans le cluster
          </td>

          <td>
            Jauge
          </td>
        </tr>

        <tr>
          <td>
            `kafka.broker.fenced.count`
          </td>

          <td>
            Le nombre de brokers clôturés dans le cluster
          </td>

          <td>
            Jauge
          </td>
        </tr>

        <tr>
          <td>
            `kafka.partition.non_preferred_leader`
          </td>

          <td>
            Le nombre de partitions de sujet pour lesquelles le leader n&apos;est pas le leader préféré
          </td>

          <td>
            Jauge
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="jmx-broker-specific-metrics" title="Métriques spécifiques au broker">
    <table>
      <thead>
        <tr>
          <th style={{ width: "350px" }}>
            Nom métrique
          </th>

          <th>
            Description
          </th>

          <th>
            Type
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `kafka.partition.under_min_isr`
          </td>

          <td>
            Le nombre de partitions où le nombre de réplicas synchronisés est inférieur au minimum
          </td>

          <td>
            Jauge
          </td>
        </tr>

        <tr>
          <td>
            `kafka.broker.uptime`
          </td>

          <td>
            Durée de fonctionnement du courtier (ms)
          </td>

          <td>
            Jauge
          </td>
        </tr>

        <tr>
          <td>
            `kafka.broker.leader.count`
          </td>

          <td>
            Nombre de partitions pour lesquelles ce broker est le leader
          </td>

          <td>
            Jauge
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="jmx-per-topic-metrics" title="Métriques par sujet">
    <table>
      <thead>
        <tr>
          <th style={{ width: "350px" }}>
            Nom métrique
          </th>

          <th>
            Description
          </th>

          <th>
            Type
          </th>

          <th>
            Attributs
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `kafka.prod.msg.count`
          </td>

          <td>
            Le nombre de messages reçus par rubrique
          </td>

          <td>
            Comptoir
          </td>

          <td>
            sujet
          </td>
        </tr>

        <tr>
          <td>
            `kafka.topic.io`
          </td>

          <td>
            Les octets reçus ou envoyés par sujet
          </td>

          <td>
            Comptoir
          </td>

          <td>
            sujet, direction (entrant/sortant)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="jmx-jvm-metrics" title="Métriques JVM">
    <table>
      <thead>
        <tr>
          <th style={{ width: "350px" }}>
            Nom métrique
          </th>

          <th>
            Description
          </th>

          <th>
            Type
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `jvm.memory.heap.used`
          </td>

          <td>
            Mémoire heap utilisée actuelle (octets)
          </td>

          <td>
            Jauge
          </td>
        </tr>

        <tr>
          <td>
            `jvm.memory.heap.max`
          </td>

          <td>
            Mémoire heap maximale disponible (octets)
          </td>

          <td>
            Jauge
          </td>
        </tr>

        <tr>
          <td>
            `jvm.memory.heap.committed`
          </td>

          <td>
            Mémoire de tas validée (octets)
          </td>

          <td>
            Jauge
          </td>
        </tr>

        <tr>
          <td>
            `jvm.gc.collections.count`
          </td>

          <td>
            Nombre total de collectes de mémoire qui se sont produites
          </td>

          <td>
            Comptoir
          </td>
        </tr>

        <tr>
          <td>
            `jvm.gc.collections.elapsed`
          </td>

          <td>
            Le temps écoulé approximatif de la collecte accumulée (ms)
          </td>

          <td>
            Comptoir
          </td>
        </tr>

        <tr>
          <td>
            `jvm.thread.count`
          </td>

          <td>
            Nombre total de threads (plage typique de Kafka de 100 à 300 threads)
          </td>

          <td>
            Jauge
          </td>
        </tr>

        <tr>
          <td>
            `jvm.system.cpu.load_1m`
          </td>

          <td>
            Charge système moyenne (1 minute) - alerter si supérieure au nombre de CPU
          </td>

          <td>
            Jauge
          </td>
        </tr>

        <tr>
          <td>
            `jvm.cpu.count`
          </td>

          <td>
            Nombre de processeurs disponibles
          </td>

          <td>
            Jauge
          </td>
        </tr>

        <tr>
          <td>
            `jvm.cpu.recent_utilization`
          </td>

          <td>
            Utilisation récente du CPU pour le processus JVM (0,0 à 1,0)
          </td>

          <td>
            Jauge
          </td>
        </tr>

        <tr>
          <td>
            `jvm.system.cpu.utilization`
          </td>

          <td>
            Utilisation récente du processeur pour l&apos;ensemble du système (0,0 à 1,0)
          </td>

          <td>
            Jauge
          </td>
        </tr>

        <tr>
          <td>
            `jvm.file_descriptor.count`
          </td>

          <td>
            Nombre de descripteurs de fichiers ouverts - alerte si supérieur à 80 % de ulimit
          </td>

          <td>
            Jauge
          </td>
        </tr>

        <tr>
          <td>
            `jvm.class.count`
          </td>

          <td>
            Nombre de classes actuellement chargées
          </td>

          <td>
            Jauge
          </td>
        </tr>

        <tr>
          <td>
            `jvm.memory.pool.used`
          </td>

          <td>
            Utilisation du pool de mémoire par génération (G1 Old Gen, Eden, Survivor) en octets
          </td>

          <td>
            Jauge
          </td>
        </tr>

        <tr>
          <td>
            `jvm.memory.pool.max`
          </td>

          <td>
            Taille maximale du pool de mémoire (octets)
          </td>

          <td>
            Jauge
          </td>
        </tr>

        <tr>
          <td>
            `jvm.memory.pool.used_after_last_gc`
          </td>

          <td>
            Mémoire utilisée après le dernier GC - affiche la base de référence de la mémoire conservée (octets)
          </td>

          <td>
            Jauge
          </td>
        </tr>
      </tbody>
    </table>

    **Attributs :** les métriques JVM incluent des attributs tels que `name` (pour les noms de collecteurs GC ou les noms de pools de mémoire).
  </Collapser>
</CollapserGroup>

## Métriques du client Kafka (agent OpenTelemetry Java) [#kafka-client-metrics]

Ces métriques sont collectées à partir des applications producteur et consommateur Kafka instrumentées avec l&apos;[agent OpenTelemetry Java](https://opentelemetry.io/docs/languages/java/automatic/) avec l&apos;instrumentation Kafka activée. Celles-ci fournissent une visibilité côté client sur les interactions des applications avec les brokers Kafka et complètent les métriques côté broker en fournissant la perspective de l&apos;application.

<CollapserGroup>
  <Collapser id="producer-metrics" title="Métriques du producteur">
    ### Métriques de connexion et de réseau

    | Nom métrique                               | Description                           | Attributs                            |
    | ------------------------------------------ | ------------------------------------- | ------------------------------------ |
    | `kafka.producer.connection_count`          | Nombre de connexions actives          | client-id                            |
    | `kafka.producer.connection_creation_rate`  | Taux de nouvelles connexions établies | client-id                            |
    | `kafka.producer.connection_creation_total` | Total des connexions créées           | client-id                            |
    | `kafka.producer.connection_close_rate`     | Taux de connexions fermées            | client-id                            |
    | `kafka.producer.network_io_rate`           | Taux d&apos;opérations réseau         | client-id                            |
    | `kafka.producer.network_io_total`          | Nombre total d&apos;opérations réseau | client-id                            |
    | `kafka.producer.outgoing_byte_rate`        | Débit d&apos;octets sortants          | identifiant-client, identifiant-nœud |
    | `kafka.producer.outgoing_byte_total`       | Octets sortants totaux                | identifiant-client, identifiant-nœud |

    ### Métriques de requête et de réponse

    | Nom métrique                         | Description                        | Attributs                            |
    | ------------------------------------ | ---------------------------------- | ------------------------------------ |
    | `kafka.producer.request_rate`        | Taux de requêtes envoyées          | identifiant-client, identifiant-nœud |
    | `kafka.producer.request_total`       | Nombre total de requêtes envoyées  | identifiant-client, identifiant-nœud |
    | `kafka.producer.request_size_avg`    | Taille moyenne des requêtes        | identifiant-client, identifiant-nœud |
    | `kafka.producer.request_size_max`    | Taille maximale de la requête      | identifiant-client, identifiant-nœud |
    | `kafka.producer.request_latency_avg` | Latence moyenne des requêtes (ms)  | identifiant-client, identifiant-nœud |
    | `kafka.producer.request_latency_max` | Latence maximale des requêtes (ms) | identifiant-client, identifiant-nœud |
    | `kafka.producer.response_rate`       | Débit de réponses reçues           | identifiant-client, identifiant-nœud |
    | `kafka.producer.response_total`      | Total des réponses reçues          | identifiant-client, identifiant-nœud |
    | `kafka.producer.requests_in_flight`  | Nombre de requêtes en cours        | client-id                            |

    ### Métriques d&apos;enregistrement

    | Nom métrique                             | Description                                                                  | Attributs                 |
    | ---------------------------------------- | ---------------------------------------------------------------------------- | ------------------------- |
    | `kafka.producer.record_send_rate`        | Taux d&apos;enregistrements envoyés                                          | identifiant-client, sujet |
    | `kafka.producer.record_send_total`       | Total des enregistrements envoyés                                            | identifiant-client, sujet |
    | `kafka.producer.record_error_rate`       | Débit d&apos;erreurs d&apos;envoi d&apos;enregistrements                     | identifiant-client, sujet |
    | `kafka.producer.record_error_total`      | Nombre total d&apos;erreurs d&apos;envoi d&apos;enregistrements              | identifiant-client, sujet |
    | `kafka.producer.record_retry_rate`       | Taux de nouvelles tentatives d&apos;enregistrement                           | identifiant-client, sujet |
    | `kafka.producer.record_retry_total`      | Nombre total de nouvelles tentatives d&apos;enregistrement                   | identifiant-client, sujet |
    | `kafka.producer.record_size_avg`         | Taille moyenne des enregistrements                                           | client-id                 |
    | `kafka.producer.record_size_max`         | Taille maximale des enregistrements                                          | client-id                 |
    | `kafka.producer.record_queue_time_avg`   | Temps moyen passé par les enregistrements dans le tampon d&apos;envoi (ms)   | client-id                 |
    | `kafka.producer.record_queue_time_max`   | Temps maximum passé par les enregistrements dans le tampon d&apos;envoi (ms) | client-id                 |
    | `kafka.producer.records_per_request_avg` | Moyenne des enregistrements par requête                                      | client-id                 |

    ### Métriques de débit

    | Nom métrique                          | Description                         | Attributs                 |
    | ------------------------------------- | ----------------------------------- | ------------------------- |
    | `kafka.producer.byte_rate`            | Taux d&apos;octets produits         | identifiant-client, sujet |
    | `kafka.producer.byte_total`           | Nombre total d&apos;octets produits | identifiant-client, sujet |
    | `kafka.producer.compression_rate`     | Taux de compression moyen           | identifiant-client, sujet |
    | `kafka.producer.compression_rate_avg` | Taux de compression moyen           | client-id                 |

    ### Métriques de batching

    | Nom métrique                       | Description                       | Attributs |
    | ---------------------------------- | --------------------------------- | --------- |
    | `kafka.producer.batch_size_avg`    | Taille moyenne du batch           | client-id |
    | `kafka.producer.batch_size_max`    | Taille maximale du batch          | client-id |
    | `kafka.producer.batch_split_rate`  | Taux de fractionnement des lots   | client-id |
    | `kafka.producer.batch_split_total` | Nombre total de divisions de lots | client-id |

    ### Métriques des tampons

    | Nom métrique                                | Description                                                | Attributs |
    | ------------------------------------------- | ---------------------------------------------------------- | --------- |
    | `kafka.producer.buffer_total_bytes`         | Mémoire tampon totale                                      | client-id |
    | `kafka.producer.buffer_available_bytes`     | Mémoire tampon disponible                                  | client-id |
    | `kafka.producer.buffer_exhausted_rate`      | Débit d&apos;épuisement de la mémoire tampon               | client-id |
    | `kafka.producer.buffer_exhausted_total`     | Nombre total d&apos;épuisements de mémoire tampon          | client-id |
    | `kafka.producer.bufferpool_wait_ratio`      | Fraction de temps d&apos;attente pour l&apos;espace tampon | client-id |
    | `kafka.producer.bufferpool_wait_time_total` | Temps total d&apos;attente d&apos;espace tampon            | client-id |

    ### Métriques d&apos;E/S

    | Nom métrique                         | Description                                   | Attributs |
    | ------------------------------------ | --------------------------------------------- | --------- |
    | `kafka.producer.io_ratio`            | Fraction de temps passé en E/S                | client-id |
    | `kafka.producer.io_time_ns_avg`      | Temps moyen d&apos;E/S (ns)                   | client-id |
    | `kafka.producer.io_wait_time_ns_avg` | Temps d&apos;attente moyen des E/S (ns)       | client-id |
    | `kafka.producer.io_wait_ratio`       | Fraction de temps d&apos;attente pour les E/S | client-id |
    | `kafka.producer.iotime_total`        | Temps total d&apos;E/S                        | client-id |
    | `kafka.producer.io_waittime_total`   | Temps d&apos;attente d&apos;E/S total         | client-id |

    ### Métriques de limitation

    | Nom métrique                               | Description                            | Attributs |
    | ------------------------------------------ | -------------------------------------- | --------- |
    | `kafka.producer.produce_throttle_time_avg` | Temps d&apos;étranglement moyen (ms)   | client-id |
    | `kafka.producer.produce_throttle_time_max` | Temps d&apos;étranglement maximal (ms) | client-id |

    ### Métriques d&apos;authentification

    | Nom métrique                                               | Description                                        | Attributs |
    | ---------------------------------------------------------- | -------------------------------------------------- | --------- |
    | `kafka.producer.successful_authentication_rate`            | Taux d&apos;authentifications réussies             | client-id |
    | `kafka.producer.successful_authentication_total`           | Nombre total d&apos;authentifications réussies     | client-id |
    | `kafka.producer.successful_authentication_no_reauth_total` | Authentifications réussies sans réauthentification | client-id |
    | `kafka.producer.successful_reauthentication_rate`          | Taux de réauthentifications réussies               | client-id |
    | `kafka.producer.successful_reauthentication_total`         | Nombre total de réauthentifications réussies       | client-id |
    | `kafka.producer.failed_authentication_rate`                | Taux d&apos;échecs d&apos;authentification         | client-id |
    | `kafka.producer.failed_authentication_total`               | Nombre total d&apos;authentifications ayant échoué | client-id |
    | `kafka.producer.failed_reauthentication_rate`              | Taux de réauthentifications échouées               | client-id |
    | `kafka.producer.failed_reauthentication_total`             | Nombre total de réauthentifications échouées       | client-id |
    | `kafka.producer.reauthentication_latency_avg`              | Latence moyenne de réauthentification (ms)         | client-id |
    | `kafka.producer.reauthentication_latency_max`              | Latence maximale de réauthentification (ms)        | client-id |

    ### Métriques diverses

    | Nom métrique                     | Description                                  | Attributs |
    | -------------------------------- | -------------------------------------------- | --------- |
    | `kafka.producer.metadata_age`    | Âge des métadonnées actuelles (secondes)     | client-id |
    | `kafka.producer.waiting_threads` | Nombre de threads en attente d’espace tampon | client-id |
    | `kafka.producer.select_rate`     | Taux d&apos;appels select                    | client-id |
    | `kafka.producer.select_total`    | Nombre total d’appels select                 | client-id |
  </Collapser>

  <Collapser id="consumer-metrics" title="Métriques du consommateur">
    ### Métriques de connexion et de réseau

    | Nom métrique                               | Description                           | Attributs                            |
    | ------------------------------------------ | ------------------------------------- | ------------------------------------ |
    | `kafka.consumer.connection_count`          | Nombre de connexions actives          | client-id                            |
    | `kafka.consumer.connection_creation_rate`  | Taux de nouvelles connexions établies | client-id                            |
    | `kafka.consumer.connection_creation_total` | Total des connexions créées           | client-id                            |
    | `kafka.consumer.connection_close_rate`     | Taux de connexions fermées            | client-id                            |
    | `kafka.consumer.connection_close_total`    | Nombre total de connexions fermées    | client-id                            |
    | `kafka.consumer.network_io_rate`           | Taux d&apos;opérations réseau         | client-id                            |
    | `kafka.consumer.network_io_total`          | Nombre total d&apos;opérations réseau | client-id                            |
    | `kafka.consumer.outgoing_byte_rate`        | Débit d&apos;octets sortants          | identifiant-client, identifiant-nœud |
    | `kafka.consumer.incoming_byte_rate`        | Taux d&apos;octets entrants           | identifiant-client, identifiant-nœud |

    ### Métriques de requête et de réponse

    | Nom métrique                         | Description                        | Attributs                            |
    | ------------------------------------ | ---------------------------------- | ------------------------------------ |
    | `kafka.consumer.request_rate`        | Taux de requêtes envoyées          | identifiant-client, identifiant-nœud |
    | `kafka.consumer.request_total`       | Nombre total de requêtes envoyées  | identifiant-client, identifiant-nœud |
    | `kafka.consumer.request_size_avg`    | Taille moyenne des requêtes        | identifiant-client, identifiant-nœud |
    | `kafka.consumer.request_size_max`    | Taille maximale de la requête      | identifiant-client, identifiant-nœud |
    | `kafka.consumer.request_latency_avg` | Latence moyenne des requêtes (ms)  | identifiant-client, identifiant-nœud |
    | `kafka.consumer.request_latency_max` | Latence maximale des requêtes (ms) | identifiant-client, identifiant-nœud |
    | `kafka.consumer.response_rate`       | Débit de réponses reçues           | identifiant-client, identifiant-nœud |
    | `kafka.consumer.response_total`      | Total des réponses reçues          | identifiant-client, identifiant-nœud |

    ### Métriques de consommation

    | Nom métrique                             | Description                                   | Attributs                 |
    | ---------------------------------------- | --------------------------------------------- | ------------------------- |
    | `kafka.consumer.bytes_consumed_rate`     | Taux d&apos;octets consommés                  | identifiant-client, sujet |
    | `kafka.consumer.bytes_consumed_total`    | Octets consommés au total                     | identifiant-client, sujet |
    | `kafka.consumer.records_consumed_rate`   | Taux d&apos;enregistrements consommés         | identifiant-client, sujet |
    | `kafka.consumer.records_consumed_total`  | Nombre total d&apos;enregistrements consommés | identifiant-client, sujet |
    | `kafka.consumer.records_per_request_avg` | Moyenne des enregistrements par requête       | identifiant-client, sujet |

    ### Métriques de lag du consommateur

    | Nom métrique                      | Description                                    | Attributs                   |
    | --------------------------------- | ---------------------------------------------- | --------------------------- |
    | `kafka.consumer.records_lag`      | Retard actuel en nombre d&apos;enregistrements | partition, client-id, topic |
    | `kafka.consumer.records_lag_avg`  | Retard moyen du consommateur                   | partition, client-id, topic |
    | `kafka.consumer.records_lag_max`  | Retard maximal du consommateur                 | partition, client-id, topic |
    | `kafka.consumer.records_lead`     | Lead actuel en nombre d&apos;enregistrements   | partition, client-id, topic |
    | `kafka.consumer.records_lead_avg` | Délai moyen du consommateur                    | partition, client-id, topic |
    | `kafka.consumer.records_lead_min` | Délai minimum du consommateur                  | partition, client-id, topic |

    ### Métriques d&apos;extraction

    | Nom métrique                             | Description                                                 | Attributs                 |
    | ---------------------------------------- | ----------------------------------------------------------- | ------------------------- |
    | `kafka.consumer.fetch_rate`              | Taux de requêtes d&apos;extraction                          | client-id                 |
    | `kafka.consumer.fetch_total`             | Total des requêtes d&apos;extraction                        | client-id                 |
    | `kafka.consumer.fetch_size_avg`          | Taille moyenne de l&apos;extraction                         | identifiant-client, sujet |
    | `kafka.consumer.fetch_size_max`          | Taille maximale de l&apos;extraction                        | identifiant-client, sujet |
    | `kafka.consumer.fetch_latency_avg`       | Latence moyenne d&apos;extraction (ms)                      | client-id                 |
    | `kafka.consumer.fetch_latency_max`       | Latence maximale d&apos;extraction (ms)                     | client-id                 |
    | `kafka.consumer.fetch_throttle_time_avg` | Temps d&apos;étranglement moyen de l&apos;extraction (ms)   | client-id                 |
    | `kafka.consumer.fetch_throttle_time_max` | Temps d&apos;étranglement maximal de l&apos;extraction (ms) | client-id                 |

    ### Métriques de coordination du groupe de consommateurs

    | Nom métrique                                 | Description                                           | Attributs |
    | -------------------------------------------- | ----------------------------------------------------- | --------- |
    | `kafka.consumer.assigned_partitions`         | Nombre de partitions attribuées                       | client-id |
    | `kafka.consumer.commit_rate`                 | Taux de validations d&apos;offset                     | client-id |
    | `kafka.consumer.commit_total`                | Total des validations d’offset                        | client-id |
    | `kafka.consumer.commit_latency_avg`          | Latence moyenne de validation (ms)                    | client-id |
    | `kafka.consumer.commit_latency_max`          | Latence maximale de validation (ms)                   | client-id |
    | `kafka.consumer.heartbeat_rate`              | Taux de battements cardiaques envoyés                 | client-id |
    | `kafka.consumer.heartbeat_total`             | Nombre total de pulsations cardiaques envoyées        | client-id |
    | `kafka.consumer.heartbeat_response_time_max` | Temps de réponse maximal du battement de cœur (ms)    | client-id |
    | `kafka.consumer.last_heartbeat_seconds_ago`  | Secondes écoulées depuis le dernier battement de cœur | client-id |
    | `kafka.consumer.last_poll_seconds_ago`       | Secondes depuis le dernier sondage                    | client-id |

    ### Métriques de rééquilibrage

    | Nom métrique                                    | Description                                           | Attributs |
    | ----------------------------------------------- | ----------------------------------------------------- | --------- |
    | `kafka.consumer.rebalance_total`                | Total des rééquilibrages                              | client-id |
    | `kafka.consumer.rebalance_rate_per_hour`        | Rééquilibrages par heure                              | client-id |
    | `kafka.consumer.rebalance_latency_avg`          | Latence moyenne de rééquilibrage (ms)                 | client-id |
    | `kafka.consumer.rebalance_latency_max`          | Latence maximale de rééquilibrage (ms)                | client-id |
    | `kafka.consumer.rebalance_latency_total`        | Temps total de rééquilibrage (ms)                     | client-id |
    | `kafka.consumer.failed_rebalance_total`         | Nombre total de rééquilibrages ayant échoué           | client-id |
    | `kafka.consumer.failed_rebalance_rate_per_hour` | Rééquilibrages ayant échoué par heure                 | client-id |
    | `kafka.consumer.last_rebalance_seconds_ago`     | Secondes depuis le dernier rééquilibrage              | client-id |
    | `kafka.consumer.partition_assigned_latency_avg` | Latence moyenne d&apos;affectation de partition (ms)  | client-id |
    | `kafka.consumer.partition_assigned_latency_max` | Latence maximale d&apos;affectation de partition (ms) | client-id |
    | `kafka.consumer.partition_revoked_latency_avg`  | Latence moyenne de révocation de partition (ms)       | client-id |
    | `kafka.consumer.partition_revoked_latency_max`  | Latence maximale de révocation de partition (ms)      | client-id |
    | `kafka.consumer.partition_lost_latency_avg`     | Latence moyenne de perte de partition (ms)            | client-id |
    | `kafka.consumer.partition_lost_latency_max`     | Latence maximale de perte de partition (ms)           | client-id |

    ### Métriques du groupe de synchronisation

    | Nom métrique                   | Description                           | Attributs |
    | ------------------------------ | ------------------------------------- | --------- |
    | `kafka.consumer.sync_rate`     | Taux de synchronisations de groupe    | client-id |
    | `kafka.consumer.sync_total`    | Total des synchronisations de groupe  | client-id |
    | `kafka.consumer.sync_time_avg` | Temps de synchronisation moyen (ms)   | client-id |
    | `kafka.consumer.sync_time_max` | Temps de synchronisation maximal (ms) | client-id |
    | `kafka.consumer.join_rate`     | Taux de jointures de groupe           | client-id |
    | `kafka.consumer.join_total`    | Nombre total de jointures de groupe   | client-id |
    | `kafka.consumer.join_time_avg` | Temps moyen de jointure (ms)          | client-id |
    | `kafka.consumer.join_time_max` | Temps de jointure maximal (ms)        | client-id |

    ### Métriques d&apos;E/S

    | Nom métrique                         | Description                                   | Attributs |
    | ------------------------------------ | --------------------------------------------- | --------- |
    | `kafka.consumer.io_ratio`            | Fraction de temps passé en E/S                | client-id |
    | `kafka.consumer.io_time_ns_avg`      | Temps moyen d&apos;E/S (ns)                   | client-id |
    | `kafka.consumer.io_wait_time_ns_avg` | Temps d&apos;attente moyen des E/S (ns)       | client-id |
    | `kafka.consumer.io_wait_ratio`       | Fraction de temps d&apos;attente pour les E/S | client-id |
    | `kafka.consumer.iotime_total`        | Temps total d&apos;E/S                        | client-id |
    | `kafka.consumer.io_waittime_total`   | Temps d&apos;attente d&apos;E/S total         | client-id |

    ### Métriques de sondage

    | Nom métrique                           | Description                                                                                       | Attributs |
    | -------------------------------------- | ------------------------------------------------------------------------------------------------- | --------- |
    | `kafka.consumer.poll_idle_ratio_avg`   | Fraction moyenne du temps pendant lequel le consommateur est inactif pendant l&apos;interrogation | client-id |
    | `kafka.consumer.time_between_poll_avg` | Temps moyen entre les sondages (ms)                                                               | client-id |
    | `kafka.consumer.time_between_poll_max` | Temps maximal entre les sondages (ms)                                                             | client-id |

    ### Métriques d&apos;authentification

    | Nom métrique                                               | Description                                        | Attributs |
    | ---------------------------------------------------------- | -------------------------------------------------- | --------- |
    | `kafka.consumer.successful_authentication_rate`            | Taux d&apos;authentifications réussies             | client-id |
    | `kafka.consumer.successful_authentication_total`           | Nombre total d&apos;authentifications réussies     | client-id |
    | `kafka.consumer.successful_authentication_no_reauth_total` | Authentifications réussies sans réauthentification | client-id |
    | `kafka.consumer.successful_reauthentication_rate`          | Taux de réauthentifications réussies               | client-id |
    | `kafka.consumer.successful_reauthentication_total`         | Nombre total de réauthentifications réussies       | client-id |
    | `kafka.consumer.failed_authentication_rate`                | Taux d&apos;échecs d&apos;authentification         | client-id |
    | `kafka.consumer.failed_authentication_total`               | Nombre total d&apos;authentifications ayant échoué | client-id |
    | `kafka.consumer.failed_reauthentication_rate`              | Taux de réauthentifications échouées               | client-id |
    | `kafka.consumer.failed_reauthentication_total`             | Nombre total de réauthentifications échouées       | client-id |
    | `kafka.consumer.reauthentication_latency_avg`              | Latence moyenne de réauthentification (ms)         | client-id |
    | `kafka.consumer.reauthentication_latency_max`              | Latence maximale de réauthentification (ms)        | client-id |

    ### Métriques diverses

    | Nom métrique                  | Description                  | Attributs |
    | ----------------------------- | ---------------------------- | --------- |
    | `kafka.consumer.select_rate`  | Taux d&apos;appels select    | client-id |
    | `kafka.consumer.select_total` | Nombre total d’appels select | client-id |
  </Collapser>
</CollapserGroup>

## attribut métrique [#metric-attributes]

Les métriques peuvent être filtrées et regroupées à l&apos;aide des attributs suivants :

**Attributs courants :**

* `kafka.cluster.name` - Nom du cluster Kafka (toutes les métriques)
* `instrumentation.provider` - Toujours `opentelemetry` (toutes les métriques)
* `topic` - Nom du sujet Kafka
* `partition` - Numéro de partition
* `group` - Nom du groupe de consommateurs
* `broker.id` - Identifiant du broker (métriques JMX)
* `client-id` - Identifiant du client (métriques client)
* `node-id` - Identifiant du nœud de broker (métriques client)
* `type` - Type de requête (par exemple, fetch, produce)
* `direction` - Direction des données (entrant, sortant)
* `state` - État de l&apos;opération ISR (réduction, expansion)
* `name` - Nom du collecteur GC ou du pool de mémoire (métriques JVM)

## Prochaines étapes [#next-steps]

* **[Interrogez et visualisez vos données](/docs/opentelemetry/integrations/kafka/find-and-query-data)** - Trouvez des métriques dans l&apos;interface utilisateur New Relic, écrivez des requêtes NRQL, créez des dashboards et configurez des alertes
* **[Types de données des métriques de requête](/docs/data-apis/understand-data/metric-data/query-metric-data-type/)** - Apprenez des techniques avancées pour travailler avec les métriques OpenTelemetry