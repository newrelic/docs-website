---
title: Dépanner l'intégration Elasticsearch OpenTelemetry
tags:
  - OpenTelemetry
  - Elasticsearch
  - Integrations
  - Troubleshooting
metaDescription: Troubleshoot common issues with the Elasticsearch OpenTelemetry integration and resolve data collection problems.
freshnessValidatedDate: never
translationType: machine
---

Si vous avez terminé [l&apos;installation de l&apos;intégration OpenTelemetry Elasticsearch](/docs/opentelemetry/integrations/elasticsearch/elasticsearch-otel-integration-install) mais que vous ne voyez pas de données dans New Relic, trouvez votre problème ci-dessous et suivez les étapes de résolution.

<CollapserGroup>
  <Collapser id="troubleshoot-collector-stopped" title="Service du collecteur arrêté ou en échec">
    <strong>Comment vérifier</strong>

    ```bash
    sudo systemctl status otelcol-contrib
    ```

    <strong>Résolution</strong>

    * Si le service est inactif, démarrez-le :
      <InlineCode>
        sudo systemctl start otelcol-contrib
      </InlineCode>
    * Si le service a échoué, corrigez les erreurs de configuration et redémarrez :
      <InlineCode>
        sudo systemctl restart otelcol-contrib
      </InlineCode>
  </Collapser>

  <Collapser id="troubleshoot-collector-logs-errors" title="Les logs du Collecteur signalent des erreurs de scraping ou d'exportation.">
    <strong>Comment vérifier</strong>

    ```bash
    sudo journalctl -u otelcol-contrib.service -f
    ```

    <strong>Résolution</strong>

    Examinez la sortie des logs et résolvez la cause première (par exemple, problèmes de connexion, échecs d&apos;authentification ou problèmes d&apos;autorisation).
  </Collapser>

  <Collapser id="troubleshoot-connection-refused" title="Connexion refusée lors de l'appel à Elasticsearch">
    <strong>Exemple d&apos;erreur</strong>: <InlineCode>
      dial tcp \[::1]:9200: connect: connection refused
    </InlineCode>

    <strong>Résolution</strong>

    * Assurez-vous que le
      <InlineCode>
        endpoint
      </InlineCode>
      dans
      <InlineCode>
        config.yaml
      </InlineCode>
      correspond à l&apos;hôte et au port Elasticsearch.
    * Confirmez qu&apos;Elasticsearch est en cours d&apos;exécution et accessible depuis l&apos;hôte du collecteur.
  </Collapser>

  <Collapser id="troubleshoot-403" title="403 Forbidden lors de l'exportation vers New Relic">
    <strong>Exemple d&apos;erreur</strong>: <InlineCode>
      permanent error: 403 Forbidden
    </InlineCode>

    <strong>Résolution</strong>

    1. Vérifier <InlineCode>
         NEWRELIC\_LICENSE\_KEY
       </InlineCode> dans <InlineCode>
         /etc/systemd/system/otelcol-contrib.service.d/environment.conf
       </InlineCode>.

    2. Rechargez systemd et redémarrez le collecteur :

       ```bash
       sudo systemctl daemon-reload
       sudo systemctl restart otelcol-contrib
       ```
  </Collapser>

  <Collapser id="troubleshoot-permission-denied" title="Permission refusée lors de la collecte des logs">
    <strong>Exemple d&apos;erreur</strong>: <InlineCode>
      permission denied
    </InlineCode> ou <InlineCode>
      cannot open file
    </InlineCode>

    <strong>Résolution</strong>

    1. Ajoutez l&apos;utilisateur du collecteur au groupe Elasticsearch :
       ```bash
       sudo usermod -a -G elasticsearch otelcol-contrib
       ```
    2. Redémarrez le collecteur :
       <InlineCode>
         sudo systemctl restart otelcol-contrib
       </InlineCode>
  </Collapser>

  <Collapser id="troubleshoot-api-reachability" title="Impossible d'atteindre l'API Elasticsearch depuis le collecteur">
    <strong>Comment vérifier</strong>

    ```bash
    # Unsecured cluster
    curl -I http://localhost:9200

    # With authentication
    curl -u username:password -k https://localhost:9200
    ```

    <strong>Résolution</strong>

    Vérifiez que le cluster est sain, que les identifiants sont valides et que les paramètres du pare-feu ou de sécurité autorisent l&apos;accès.
  </Collapser>

  <Collapser id="troubleshoot-missing-entity" title="Entité Elasticsearch manquante dans l'interface New Relic">
    <strong>Résolution</strong>

    * Assurez-vous que le processeur
      <InlineCode>
        resourcedetection
      </InlineCode>
      est inclus dans chaque pipeline de métriques.
    * Vérifier que
      <InlineCode>
        elasticsearch.cluster.name
      </InlineCode>
      est défini via le processeur
      <InlineCode>
        resource/cluster_name_override
      </InlineCode>
      .
  </Collapser>

  <Collapser id="troubleshoot-logs-missing" title="Métriques présentes mais logs manquants">
    <strong>Résolution</strong>

    * Confirmez que les chemins du récepteur
      <InlineCode>
        filelog
      </InlineCode>
      sont corrects et absolus.
    * Vérifiez que le pipeline de logs inclut le récepteur
      <InlineCode>
        filelog
      </InlineCode>
      et l&apos;exportateur
      <InlineCode>
        otlphttp
      </InlineCode>
      .
  </Collapser>
</CollapserGroup>