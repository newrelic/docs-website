---
title: Dépannage de New Relic OTLP
tags:
  - Integrations
  - Open source telemetry integrations
  - OpenTelemetry
  - OTLP
  - Troubleshoot
metaDescription: Troubleshoot common OTLP ingest errors
freshnessValidatedDate: '2024-05-06T00:00:00.000Z'
translationType: machine
---

New Relic prend en charge [l&apos;ingestion OTLP native](/docs/opentelemetry/best-practices/opentelemetry-otlp/) depuis des années, au cours desquelles nous avons identifié les problèmes courants auxquels les utilisateurs sont confrontés lors du dépannage de l&apos;ingestion de données. Traiter un dossier d&apos;assistance peut prendre du temps et parfois être frustrant pour les clients (et pour New Relic). Nous avons élaboré ce guide de dépannage pour aider à établir une compréhension commune et fournir des outils pour autodiagnostiquer et résoudre les problèmes lorsque cela est possible.

Tout d’abord, veuillez consulter [les exigences et recommandations de configuration de New Relic OTLP](/docs/opentelemetry/best-practices/opentelemetry-otlp/). Il contient des conseils essentiels et un contexte que toute personne souhaitant utiliser OTLP avec New Relic doit connaître.

Ensuite, consultez les sections ci-dessous :

* [Dépannage général](#general-troubleshooting): dépannage pour les problématiques générales de l&apos;OTLP
* [Catalogue des problèmes](#issue-catalog): problèmes courants des clients et mesures d&apos;atténuation

## Dépannage général [#general-troubleshooting]

Lorsque vous rencontrez un problème avec le point de terminaison New Relic OTLP, suivez d’abord ces étapes de dépannage de base. Si vous finissez par ouvrir un ticket d&apos;assistance, voici les premières choses que nous vous demandons :

* **Activer les logs de diagnostic.** Assurez-vous que le logging est activé sur votre client OTLP afin que vous puissiez voir les détails sur les erreurs qui peuvent se produire. Le mécanisme d&apos;activation des logs varie selon l&apos;implémentation. Veuillez consulter les documents pertinents.
* **Vérifiez que le point de terminaison OTLP de New Relic est accessible.** Une simple commande shell `curl http://otlp.nr-data.net` à partir de la machine en question peut aider à déterminer si un problème de configuration du réseau local (c&apos;est-à-dire (restriction du pare-feu) empêche la connectivité à New Relic.
* **Vérifiez l&apos;événement [`NrIntegrationError`](/docs/data-apis/manage-data/nrintegrationerror/) .** L&apos;ingestion de New Relic OTLP effectue une validation minimale de manière synchrone avant de renvoyer un code d&apos;état de réussite. Si vous ne voyez pas d&apos;indications d&apos;erreurs d&apos;exportation dans vos logs d&apos;application, mais que vous ne voyez pas de données dans New Relic, essayez d&apos;interroger `NrIntegrationError`. Il se peut que des problèmes avec vos données aient été détectés lors de la validation asynchrone.
* **Déterminer si le problème est localisé.** Les erreurs sont souvent localisées dans une application ou un environnement spécifique. Dans ces cas, il est utile d’évaluer les différences entre les zones problématiques et celles qui fonctionnent correctement.
* **Recherchez des signes de clé API non valide.** L&apos;endoint OTLP de New Relic [nécessite la définition d&apos;un en-tête `api-key` ](/docs/opentelemetry/best-practices/opentelemetry-otlp/#api-key). Les clés API non valides ou manquantes sont un problème courant qui se présente avec les codes d&apos;état HTTP 403 ou 401, ou les codes d&apos;état gRPC non authentifié ou PermissionDenied. Si vous voyez cela, vérifiez que votre clé API est valide et correctement définie.
* **Vérifiez si l&apos;exportation réussit après une nouvelle tentative.** Nous vous [recommandons d&apos;activer la nouvelle tentative](/docs/opentelemetry/best-practices/opentelemetry-otlp/#retry) et de vous attendre à ce que les tentatives d&apos;exportation échouent parfois initialement avec des erreurs transitoires, mais réussissent après une nouvelle tentative. Cependant, nous avons un [SLA](/docs/licenses/license-information/referenced-policies/service-level-availability-commitment/). Si vous pensez que les erreurs transitoires sont suffisamment fréquentes pour dépasser notre SLA, veuillez ouvrir un dossier d&apos;assistance.
* **Recherchez des signes indiquant que les erreurs transitoires ne sont pas réessayées.** Malgré tous nos efforts, il peut y avoir des cas particuliers où le point de terminaison New Relic OTLP renvoie des codes d&apos;état non récupérables pour des erreurs transitoires. Si vous pensez avoir rencontré ce scénario, veuillez ouvrir un dossier d&apos;assistance.

## Catalogue des numéros [#issue-catalog]

Le tableau ci-dessous répertorie les problèmes que nous avons rencontrés chez les clients avec le point de terminaison New Relic OTLP. Beaucoup de problèmes sont simples à résoudre avec une configuration appropriée. La colonne **Fingerprint** affiche un log typique lorsqu&apos;une application rencontre une classe particulière de problème. Consultez les colonnes **Known resolution** et **Notes** pour connaître les étapes d’atténuation.

| Version du protocole OTLP | Type                                                         | Langue / Écosystème | empreinte                                                                                                                                                                                                                                                                                                       | Résolution connue                                                                                                                   | Remarques                                                                                                                                                                                                                                                                                                                                                                                      |
| ------------------------- | ------------------------------------------------------------ | ------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| HTTP                      | 401 – Non autorisé                                           | Java                | `io.opentelemetry.exporter.internal.http.HttpExporter - Failed to export spans. Server responded with HTTP status code 401.`                                                                                                                                                                                    | [Inclure la clé API](/docs/opentelemetry/best-practices/opentelemetry-otlp/#api-key)                                                | En-tête `api-key` manquant                                                                                                                                                                                                                                                                                                                                                                     |
| HTTP                      | 401 – Non autorisé                                           | Collector           | `Exporting failed. The error is not retryable. Dropping data. {"kind": "exporter", "data_type": "traces", "name": "otlphttp", "error": "Permanent error: error exporting items, request to https://otlp.nr-data.net/v1/traces responded with HTTP Status Code 401, Message=, Details=[]", "dropped_items": 4}`  | [Inclure la clé API](/docs/opentelemetry/best-practices/opentelemetry-otlp/#api-key)                                                | En-tête `api-key` manquant                                                                                                                                                                                                                                                                                                                                                                     |
| HTTP                      | 401 – Non autorisé                                           | Go                  | `failed to upload metrics: failed to send metrics to https://otlp.nr-data.net/v1/metrics: 401 Unauthorized`                                                                                                                                                                                                     | [Inclure la clé API](/docs/opentelemetry/best-practices/opentelemetry-otlp/#api-key)                                                | En-tête `api-key` manquant                                                                                                                                                                                                                                                                                                                                                                     |
| HTTP                      | 403 - Interdit                                               | Java                | `io.opentelemetry.exporter.internal.http.HttpExporter - Failed to export spans. Server responded with HTTP status code 403.`                                                                                                                                                                                    | [Vérifier la clé API](/docs/opentelemetry/best-practices/opentelemetry-otlp/#api-key)                                               | En-tête `api-key` non valide                                                                                                                                                                                                                                                                                                                                                                   |
| HTTP                      | 403 - Interdit                                               | Java                | `Exporting failed. The error is not retryable. Dropping data. {"kind": "exporter", "data_type": "traces", "name": "otlphttp", "error": "Permanent error: error exporting items, request to https://otlp.nr-data.net/v1/traces responded with HTTP Status Code 403, Message=, Details=[]", "dropped_items": 14}` | [Vérifier la clé API](/docs/opentelemetry/best-practices/opentelemetry-otlp/#api-key)                                               | En-tête `api-key` non valide                                                                                                                                                                                                                                                                                                                                                                   |
| HTTP                      | 403 - Interdit                                               | Go                  | `traces export: failed to send to https://otlp.nr-data.net/v1/traces: 403 Forbidden`                                                                                                                                                                                                                            | [Vérifier la clé API](/docs/opentelemetry/best-practices/opentelemetry-otlp/#api-key)                                               | En-tête `api-key` non valide                                                                                                                                                                                                                                                                                                                                                                   |
| HTTP                      | 403 - Interdit                                               | .NET                | `Exporter failed send data to Collector to {0} endpoint. Data will not be sent. Exception: {1}{https://otlp.nr-data.net:4317/v1/traces}{System.Net.Http.HttpRequestException: Response status code does not indicate success: 403 (Forbidden).`                                                                 | [Vérifier la clé API](/docs/opentelemetry/best-practices/opentelemetry-otlp/#api-key)                                               | En-tête `api-key` non valide                                                                                                                                                                                                                                                                                                                                                                   |
| HTTP                      | Temps mort                                                   | Java                | `io.opentelemetry.exporter.internal.http.HttpExporter - Failed to export spans. The request could not be executed. Full error message: timeout`                                                                                                                                                                 | [Régler le traitement par lots / le délai d&apos;expiration](/docs/opentelemetry/best-practices/opentelemetry-otlp/#payload-limits) | Se produit après l&apos;expiration du délai d&apos;exportation. Vérifiez les paramètres de délai d&apos;expiration et l&apos;état du réseau client.<br />Si vous avez exclu le réseau et la configuration côté client, ouvrez un dossier d&apos;assistance.                                                                                                                                    |
| HTTP                      | Temps mort                                                   | Collector           | `max elapsed time expired failed to make an HTTP request: Post \"https://otlp.nr-data.net/v1/traces\": context deadline exceeded (Client.Timeout exceeded while awaiting headers)`                                                                                                                              | [Régler le traitement par lots / le délai d&apos;expiration](/docs/opentelemetry/best-practices/opentelemetry-otlp/#payload-limits) | Cela se produit généralement après l&apos;échec des tentatives de nouvelle tentative et l&apos;expiration du délai d&apos;exportation. Peut être lié au réseau client, à la configuration de nouvelle tentative/délai d&apos;expiration du client ou au réseau/aux serveurs New Relic.<br />Si vous avez exclu le réseau et la configuration côté client, ouvrez un dossier d&apos;assistance. |
| HTTP                      | Temps mort                                                   | Go                  | `failed to upload metrics: context deadline exceeded: retry-able request failure`                                                                                                                                                                                                                               | [Régler le traitement par lots / le délai d&apos;expiration](/docs/opentelemetry/best-practices/opentelemetry-otlp/#payload-limits) | Se produit après l&apos;expiration du délai d&apos;exportation. Vérifiez les paramètres de délai d&apos;expiration et l&apos;état du réseau client.<br />Si vous avez exclu le réseau et la configuration côté client, ouvrez un dossier d&apos;assistance.                                                                                                                                    |
| HTTP                      | Limite de taux                                               | Collector           | `Exporting failed. Will retry the request after interval. {"kind": "exporter", "data_type": "metrics", "name": "otlphttp", "error": "Throttle (29s), error: error exporting items, request to https://otlp.nr-data.net:443/v1/metrics responded with HTTP Status Code 429", "interval": "29s"}`                 | [Régulation par lots](/docs/opentelemetry/best-practices/opentelemetry-otlp/#payload-limits)                                        | Limite de débit dépassée.<br />Ajustez configuration du traitement par lots pour réduire le taux de requêtes.                                                                                                                                                                                                                                                                                  |
| gRPC                      | Code 2 - Inconnu<br />Temps mort                             | Java                | `io.opentelemetry.exporter.internal.grpc.GrpcExporter - Failed to export spans. Server responded with gRPC status code 2. Error message: timeout`                                                                                                                                                               | [Régler le traitement par lots / le délai d&apos;expiration](/docs/opentelemetry/best-practices/opentelemetry-otlp/#payload-limits) | Se produit après l&apos;expiration du délai d&apos;exportation. Vérifiez les paramètres de délai d&apos;expiration et l&apos;état du réseau client.<br />Si vous avez exclu le réseau et la configuration côté client, ouvrez un dossier d&apos;assistance.                                                                                                                                    |
| gRPC                      | Code 2 - Inconnu<br />HTTP 500                               | Collector           | `rpc error: code = Unknown desc = unexpected HTTP status code received from server: 500 (Internal Server Error); malformed header: missing HTTP content-type`                                                                                                                                                   |                                                                                                                                     | Le fournisseur de réseau New Relic a produit un code d&apos;état non récupérable pour une erreur transitoire.<br />Si cela se produit à plusieurs reprises, ouvrez un dossier d’assistance.                                                                                                                                                                                                    |
| gRPC                      | Code 2 - Inconnu<br />HTTP 530                               | Collector           | `rpc error: code = Unknown desc = unexpected HTTP status code received from server: 530 (); transport: received unexpected content-type \"text/html; charset=UTF-8\"`                                                                                                                                           |                                                                                                                                     | Le fournisseur de réseau New Relic a produit un code d&apos;état non récupérable pour une erreur transitoire.<br />Si cela se produit à plusieurs reprises, ouvrez un dossier d’assistance.                                                                                                                                                                                                    |
| gRPC                      | Code 4 – Délai dépassé                                       | Collector           | `rpc error: code = DeadlineExceeded desc = context deadline exceeded`                                                                                                                                                                                                                                           | [Régler le traitement par lots / le délai d&apos;expiration](/docs/opentelemetry/best-practices/opentelemetry-otlp/#payload-limits) | Cela se produit généralement après l&apos;échec des tentatives de nouvelle tentative et l&apos;expiration du délai d&apos;exportation. Peut être lié au réseau client, à la configuration de nouvelle tentative/délai d&apos;expiration du client ou au réseau/aux serveurs New Relic.<br />Si vous avez exclu le réseau et la configuration côté client, ouvrez un dossier d&apos;assistance. |
| gRPC                      | Code 7 – Non authentifié                                     | Java                | `io.opentelemetry.exporter.internal.grpc.GrpcExporter - Failed to export spans. Server responded with gRPC status code 7.`                                                                                                                                                                                      | [Inclure la clé API](/docs/opentelemetry/best-practices/opentelemetry-otlp/#api-key)                                                | En-tête `api-key` manquant                                                                                                                                                                                                                                                                                                                                                                     |
| gRPC                      | Code 7 – Non authentifié                                     | .NET                | `Exporter failed send data to Collector to {0} endpoint. Data will not be sent. Exception: {1}{https://otlp.nr-data.net:4317/}{Grpc.Core.RpcException: Status(StatusCode="Unauthenticated", Detail="")`                                                                                                         | [Inclure la clé API](/docs/opentelemetry/best-practices/opentelemetry-otlp/#api-key)                                                | En-tête `api-key` manquant                                                                                                                                                                                                                                                                                                                                                                     |
| gRPC                      | Code 8 – Ressource épuisée                                   | Collector           | `rpc error: code = ResourceExhausted desc = Too many requests", "dropped_items": 1024`                                                                                                                                                                                                                          | [Régulation par lots](/docs/opentelemetry/best-practices/opentelemetry-otlp/#payload-limits)                                        | Limite de débit dépassée.<br />Ajustez configuration du traitement par lots pour réduire le taux de requêtes.                                                                                                                                                                                                                                                                                  |
| gRPC                      | Code 13 – Interne                                            | Java                | `io.opentelemetry.exporter.internal.grpc.GrpcExporter - Failed to export spans. Server responded with gRPC status code 13.`                                                                                                                                                                                     |                                                                                                                                     | Pas assez d&apos;informations pour diagnostiquer. Il pourrait s&apos;agir d&apos;un code d&apos;état non récupérable produit par le fournisseur de réseau New Relic pour une erreur transitoire.<br />Si cela se produit à plusieurs reprises, ouvrez un dossier d’assistance.                                                                                                                 |
| gRPC                      | Code 13 – Interne<br />HTTP 400                              | Collector           | `rpc error: code = Internal desc = unexpected HTTP status code received from server: 400 (Bad Request)`                                                                                                                                                                                                         |                                                                                                                                     | Le fournisseur de réseau New Relic a produit un code d&apos;état non récupérable pour une erreur transitoire.<br />Si cela se produit à plusieurs reprises, ouvrez un dossier d’assistance.                                                                                                                                                                                                    |
| gRPC                      | Code 14 – Indisponible<br />Réinitialisation de la connexion | Collector           | `rpc error: code = Unavailable desc = error reading from server: read tcp 100.127.0.171:47470->162.247.241.110:4317: read: connection reset by peer`                                                                                                                                                            | [Réessayer le réglage](/docs/opentelemetry/best-practices/opentelemetry-otlp/#retry)                                                | Cela devrait être résolu en réessayant. Assurez-vous que Collector dispose de ressources suffisantes pour gérer la contre-pression lors des nouvelles tentatives.                                                                                                                                                                                                                              |
| gRPC                      | Code 14 – Indisponible<br />HTTP 502                         | Collector           | `rpc error: code = Unavailable desc = unexpected HTTP status code received from server: 502 (Bad Gateway); transport: received unexpected content-type "text/html"`                                                                                                                                             | [Réessayer le réglage](/docs/opentelemetry/best-practices/opentelemetry-otlp/#retry)                                                | Cela devrait être résolu en réessayant. Assurez-vous que Collector dispose de ressources suffisantes pour gérer la contre-pression lors des nouvelles tentatives.                                                                                                                                                                                                                              |
| gRPC                      | Code 14 – Indisponible<br />HTTP 503                         | Collector           | `rpc error: code = Unavailable desc = unexpected HTTP status code received from server: 503 (Service Unavailable)`                                                                                                                                                                                              | [Réessayer le réglage](/docs/opentelemetry/best-practices/opentelemetry-otlp/#retry)                                                | Cela devrait être résolu en réessayant. Assurez-vous que Collector dispose de ressources suffisantes pour gérer la contre-pression lors des nouvelles tentatives.                                                                                                                                                                                                                              |
| gRPC                      | Code 16 – Permission refusée                                 | Java                | `io.opentelemetry.exporter.internal.grpc.GrpcExporter - Failed to export spans. Server responded with gRPC status code 16.`                                                                                                                                                                                     | [Vérifier la clé API](/docs/opentelemetry/best-practices/opentelemetry-otlp/#api-key)                                               | En-tête `api-key` non valide                                                                                                                                                                                                                                                                                                                                                                   |
| gRPC                      | Code 16 – Permission refusée                                 | .NET                | `Exporter failed send data to Collector to {0} endpoint. Data will not be sent. Exception: {1}{https://otlp.nr-data.net:4317/}{Grpc.Core.RpcException: Status(StatusCode="PermissionDenied", Detail="")`                                                                                                        | [Vérifier la clé API](/docs/opentelemetry/best-practices/opentelemetry-otlp/#api-key)                                               | En-tête `api-key` non valide                                                                                                                                                                                                                                                                                                                                                                   |
