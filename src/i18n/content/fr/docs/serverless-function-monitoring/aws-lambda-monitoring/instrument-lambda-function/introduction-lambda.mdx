---
title: Introduction à AWS Lambda monitoring
metaDescription: This provides an overview of New Relic's AWS Lambda monitoring and details how to link your accounts.
freshnessValidatedDate: never
translationType: machine
---

L&apos;instrumentation de New Relic pour AWS Lambda offre une visibilité approfondie sur le fonctionnement interne de vos fonctions. En ajoutant l&apos;agent New Relic à votre fonction, chaque invocation est monitorée par New Relic. Cela vous permet de suivre la durée des appels de fonction, les erreurs du moniteur et d&apos;enregistrer les détails sur l&apos;événement source et les réponses de votre fonction.

/\* AWS Lambda fournit un service de calcul hautement évolutif et piloté par les événements, vous permettant de créer et d&apos;exécuter des applications et des services backend sans avoir besoin de provisionner ou de gérer des serveurs. À mesure que vos architectures sans serveur sur Lambda gagnent en sophistication et assument des rôles critiques pour l&apos;entreprise, il devient essentiel d&apos;obtenir une visibilité complète sur leurs performances, leur état opérationnel et leur interaction au sein de votre écosystème d&apos;applications plus large afin de maintenir leur fiabilité et leur efficacité. Votre application moderne repose fortement sur de nombreuses fonctions AWS Lambda interagissant avec divers autres microservices, bases de données et API tierces. Dans de tels environnements complexes, vous pourriez rencontrer plusieurs défis d&apos;observabilité : \* \*\*Difficulté à identifier les causes profondes :\*\* Lorsque des problèmes de performance tels que des ralentissements intermittents surviennent ou que des transactions critiques impliquant une fonction Lambda échouent, identifier la fonction défaillante exacte ou la source du problème peut s&apos;avérer un casse-tête complexe. \* \*\*Vues monitoring cloisonnées :\*\* Vous pouvez vous retrouver à naviguer entre une interface utilisateur monitoring sans serveur dédiée et vos vues traditionnelles de monitoring des performances des applications (APM), ce qui rend difficile l&apos;obtention d&apos;une image unique et unifiée des performances. \* \*\*Corrélation de données inefficace :\*\* Il peut être difficile de corréler efficacement les données de performance et les événements lorsque les informations résident dans des systèmes monitoring sans serveur et APM distincts. \* \*\*Tracing de bout en bout incomplet :\*\* Vous pourriez rencontrer des difficultés pour suivre de manière transparente une seule requête de bout en bout lorsqu’elle traverse la fonction Lambda et d’autres services au sein de votre environnement distribué. \* \*\* Monitoring limitée pour Lambda:\*\* Il est souvent impossible d&apos;appliquer directement à votre fonction Lambda toute la puissance de diagnostic et le flux de travail familier des outils APM. \* \*\*Effort manuel pour les informations détaillées :\*\* Un effort manuel important est souvent nécessaire pour rassembler des informations disparates provenant de diverses sources afin de comprendre le contexte complet d&apos;un problème impliquant Lambda. Pour relever ces défis en matière d&apos;observabilité et offrir une expérience monitoring véritablement unifiée, New Relic améliore l&apos;intégration des fonctions AWS Lambda dans sa plateforme. Cette initiative intègre directement vos fonctions serverless dans l&apos;expérience New Relic APM, en les traitant comme des éléments de première classe au même titre que vos autres services instrumentés. Notre objectif est de fournir une télémétrie riche et adaptée aux applications pour votre fonction Lambda, facilitant ainsi la compréhension de ses performances dans leur contexte complet. \*/

## Fonctionnalité clé [#key-features]

* **Bénéficiez d&apos;une vue unifiée :** monitorez votre fonction Lambda au sein de la même interface APM que celle utilisée pour vos autres services. Visualisez la télémétrie sans serveur, y compris les indicateurs de performance, les traces, les logs (lorsqu&apos;ils sont configurés) et les erreurs, le tout corrélé en un seul endroit, éliminant ainsi le besoin de basculer entre différentes interfaces utilisateur.

* **Exploitez toute la puissance de l&apos;APM :** appliquez la suite complète de fonctionnalités New Relic APM directement à votre fonction Lambda. Cela inclut le tracing avancé distribué, une analyse détaillée des erreurs avec la boîte de réception des erreurs, des cartes de service qui intègrent votre fonction Lambda, des dashboards, et plus encore. Pour plus d&apos;informations, consultez la [documentation APM](https://docs.newrelic.com/docs/apm/new-relic-apm/getting-started/introduction-apm/).

* **Bénéficiez d&apos;un suivi complet des requêtes de bout en bout :** trace en toute transparence requests depuis vos services frontaux ou autres microservices, en passant par votre fonction AWS Lambda, jusqu&apos;aux composants connectés. Cela permet d&apos;obtenir une image claire et continue de la latence des requêtes et des dépendances sur l&apos;ensemble de votre architecture. Pour plus d&apos;informations, reportez-vous à la [documentation sur le tracing distribué](https://docs.newrelic.com/docs/distributed-tracing/concepts/introduction-distributed-tracing/).

* **Simplifiez l&apos;analyse des causes profondes :** en consolidant les données sans serveur avec le reste de votre télémétrie applicative dans APM, vous pouvez rapidement identifier et diagnostiquer les problèmes, qu&apos;ils proviennent d&apos;une fonction Lambda ou d&apos;un service en amont/en aval.

* **Comprenez mieux l&apos;impact du serverless :** visualisez clairement comment votre fonction Lambda contribue à la santé et aux performances globales de vos applications et de vos transactions commerciales clés, en fournissant des informations plus détaillées sur son rôle au sein de vos services numériques.

<img title="New Relic Lambda Entities in APM" alt="New Relic Lambda Entities in APM" src="/images/lambda_overview.webp" />

## Comment configurer monitoring AWS Lambda ? [#config]

Pour monitorer votre AWS Lambda avec New Relic, vous pouvez configurer l&apos;instrumentation dans différents environnements, temps d&apos;exécution et méthodes de déploiement. Les étapes suivantes vous guideront tout au long du processus de configuration :

<Steps>
  <Step>
    ### Compatibilité et exigences [#req]

    Assurez-vous que votre instance AWS Lambda répond à nos [exigences de compatibilité](/docs/serverless-function-monitoring/aws-lambda-monitoring/instrument-lambda-function/compatibility-requirement-lambda-monitoring).
  </Step>

  <Step>
    ### (Facultatif) Liez votre compte AWS à New Relic [#link]

    En liant des comptes, vous accordez à New Relic l&apos;autorisation de créer un inventaire de votre compte AWS et de collecter automatiquement les métriques CloudWatch pour votre fonction Lambda. Une fois que vous avez lié des comptes, les ressources de votre compte AWS apparaissent sous forme d&apos;entité dans l&apos;[explorateur d&apos;entités](/docs/new-relic-solutions/new-relic-one/core-concepts/new-relic-explorer-view-performance-across-apps-services-hosts/#find). L&apos;entité fonction Lambda se trouvera dans la vue fonction serverless.

    Vous pouvez lier votre compte AWS et New Relic par l’une des méthodes d’intégration suivantes.

    <Tabs>
      <TabsBar>
        <TabsBarItem id="1">flux de métriques AWS(recommended)</TabsBarItem> <TabsBarItem id="2">API Polling</TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="1">
          Pour que New Relic puisse monitorer votre fonction Lambda, vous devez configurer une intégration entre New Relic et AWS. Nous recommandons l&apos;utilisation de [Metric Streams](/install/aws-cloudwatch) pour aider à réduire la latence et éviter la limitation de nos requests d&apos;interrogation.
        </TabsPageItem>

        <TabsPageItem id="2">
          Si vous n&apos;utilisez pas d&apos;intégration métrique Streams, vous pouvez choisir de configurer une intégration [d&apos;interrogation API](/docs/infrastructure/amazon-integrations/connect/set-up-aws-api-polling) à la place. Par défaut, une intégration d&apos;interrogation d&apos;API avec le service Lambda activé interrogera toutes les 5 minutes pour obtenir les métriques CloudWatch.

          Vous pouvez utiliser [newrelic-lambda-cli](https://github.com/newrelic/newrelic-lambda-cli) pour configurer une intégration d&apos;interrogation API, mais pas une intégration de flux métrique.

          ```sh
          newrelic-lambda integrations install --nr-account-id YOUR_NR_ACCOUNT_ID \
          --nr-api-key YOUR_NEW_RELIC_USER_KEY
          ```

          Une étape de la [commande d’installation d’intégration](https://github.com/newrelic/newrelic-lambda-cli?tab=readme-ov-file#aws-lambda-integration) créera un secret `NEW_RELIC_LICENSE_KEY` dans [AWS Secrets Manager](https://aws.amazon.com/secrets-manager/) pour une sécurité améliorée. Ceci est configurable avec un indicateur `--disable-license-key-secret` , ainsi que d&apos;autres options et indicateurs.
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Step>

  <Step>
    ### instrumentez votre fonction AWS Lambda [#instrument]

    Pour instrumenter votre fonction Lambda, vous avez besoin d&apos;un agent et d&apos;une extension. Ces composants sont regroupés dans la [couche New Relic Lambda](https://github.com/newrelic/newrelic-lambda-layers). Si l’utilisation de couches Lambda n’est pas une option pour vous, vous pouvez incorporer manuellement l’agent et l’extension dans votre fonction. En fonction des exigences de votre fonction Lambda, sélectionnez l’une des méthodes d’instrumentation suivantes :

    <Tabs>
      <TabsBar>
        <TabsBarItem id="layered-instrumentation">Instrumentation en couches</TabsBarItem> <TabsBarItem id="sdk-based-instrumentation">Instrumentation basée sur un SDK</TabsBarItem> <TabsBarItem id="containerized-instrumentation">Instrumentation conteneurisée</TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="layered-instrumentation">
          Utilisez cette méthode si votre fonction Lambda est packagée sous forme de fichier Zip et que vous pouvez ajouter des calques. Les couches sont un mécanisme de distribution pour la bibliothèque, les environnements d&apos;exécution personnalisés et d&apos;autres dépendances. Pour plus d&apos;informations, reportez-vous à la documentation [de l&apos;instrumentation en couches](/docs/serverless-function-monitoring/aws-lambda-monitoring/instrument-lambda-function/instrument-your-own/) .
        </TabsPageItem>

        <TabsPageItem id="sdk-based-instrumentation">
          Utilisez cette méthode si votre fonction Lambda ne peut pas utiliser de couches, garantissant un déploiement rapide sans qu&apos;il soit nécessaire de modifier les couches. Pour plus d&apos;informations, reportez-vous à la documentation [de l&apos;instrumentation basée sur le SDK](/docs/serverless-function-monitoring/aws-lambda-monitoring/instrument-lambda-function/sdk-based-instrumentation/) .
        </TabsPageItem>

        <TabsPageItem id="containerized-instrumentation">
          Utilisez cette méthode si votre fonction Lambda s&apos;exécute dans un conteneur. Les conteneurs offrent un environnement d&apos;exécution cohérent et isolé pour vos applications. New Relic fournit une image Docker préconfigurée qui inclut la couche New Relic Lambda, l&apos;extension New Relic Lambda et l&apos;agent New Relic. Pour plus d&apos;informations, veuillez consulter la documentation [sur l&apos;instrumentation conteneurisée](/docs/serverless-function-monitoring/aws-lambda-monitoring/instrument-lambda-function/containerized-images/).
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Step>

  <Step>
    ### Configurer les variables d’environnement [#env-variables]

    <Callout variant="tip">
      * Lorsque vous instrumentez la couche Lambda de New Relic avec la CLI New Relic, vos variables d&apos;environnement obligatoires sont configurées automatiquement. Cependant, vous souhaiterez peut-être modifier certains des paramètres par défaut et configurer votre fonction Lambda avec les variables d&apos;environnement qui correspondent à vos besoins monitoring .
      * Si vous utilisez l’extension New Relic Lambda, vous devez configurer les variables d’environnement manuellement.
    </Callout>

    [Les variables d’environnement](/docs/serverless-function-monitoring/aws-lambda-monitoring/instrument-lambda-function/env-variables-lambda) sont utilisées pour configurer l’agent New Relic et l’extension Lambda. Il est important de définir correctement ces variables pour garantir que vos fonctions Lambda sont correctement monitorées.
  </Step>

  <Step>
    ### Retrouvez vos données dans New Relic [#data]

    Une fois votre fonction AWS Lambda instrumentée, vous pouvez trouver et utiliser les données dans l&apos;interface New Relic APM. Les données sont organisées en plusieurs domaines clés, chacun fournissant des informations différentes détaillées sur les performances et l&apos;état de votre fonction Lambda.
  </Step>
</Steps>

## Essayez nos exemples de fonctions [#example]

Après avoir instrumenté la couche Lambda de New Relic, nous vous recommandons vivement d&apos;essayer nos exemples de fonctions. Ces exemples de travail doivent être utilisés comme point de départ pour instrumenter votre propre fonction serverless. L’utilisation de ces exemples peut vous aider à vous familiariser avec la couche New Relic Lambda, à tester le lien de compte, et ils peuvent être utilisés comme référence pour votre propre instrumentation. Chaque exemple illustre l&apos;ajout d&apos;autorisations, des techniques spécifiques à l&apos;exécution pour encapsuler votre gestionnaire, la gestion de la conservation log des fonctions dans CloudWatch, et bien plus encore.

Bien qu&apos;il existe de nombreuses façons de gérer et d&apos;utiliser la fonction Lambda, AWS CloudFormation est le mécanisme que nous utilisons pour nos exemples.

Nos exemples sont publiés, aux côtés de l&apos;extension New Relic Lambda, dans ce [référentiel GitHub](https://github.com/newrelic/newrelic-lambda-extension). Il y en a un pour chaque runtime Lambda pris en charge par New Relic :

* [Node.js](https://github.com/newrelic/newrelic-lambda-extension/tree/main/examples/sam/node)
* [Python](https://github.com/newrelic/newrelic-lambda-extension/tree/main/examples/sam/python)
* [Go](https://github.com/newrelic/newrelic-lambda-extension/tree/main/examples/sam/go)
* [Java](https://github.com/newrelic/newrelic-lambda-extension/tree/main/examples/sam/java)
* [Ruby](https://github.com/newrelic/newrelic-lambda-extension/tree/main/examples/sam/ruby)
* [.NET](https://github.com/newrelic/newrelic-lambda-extension/tree/main/examples/sam/dotnet)

Vous pouvez également apprendre comment instrumenter le tracing distribué dans une application sans serveur non triviale dans notre [exemple de tracing distribué](https://github.com/newrelic/newrelic-lambda-extension/tree/main/examples/sam/distributedtracing). Il illustre la propagation manuelle trace pour SQS et SNS, deux des services les plus populaires susceptibles d&apos;invoquer la fonction Lambda, avec les fonctions Node, Python, Ruby et Java .

<Callout variant="tip">
  Lors de tests manuels, les données télémétriques peuvent être retardées. Nous vous recommandons d&apos;attendre sept secondes avant d&apos;appeler à nouveau la fonction, ce qui permet à toute télémétrie mise en mémoire tampon d&apos;être transmise.
</Callout>

## Considération des coûts [#costs]

La mise en œuvre d&apos;un serveur monitoring sans serveur pour AWS Lambda peut entraîner des frais AWS supplémentaires. La fonction Lambda `newrelic-log-ingestion` , qui transmet des données à New Relic, est considérée comme un service tiers et tous les frais AWS associés sont à la charge de l&apos;utilisateur. En utilisant les [`newrelic-lambda-extension`](https://github.com/newrelic/newrelic-lambda-extension) inclus dans [les couches Lambda New Relic](https://github.com/newrelic/newrelic-lambda-layers), vous pouvez éviter d&apos;envoyer des logs et des données télémétriques via CloudWatch, bien que la configuration de la fonction `newrelic-log-ingestion` comme solution de secours CloudWatch soit possible pour les besoins de haute disponibilité.

L&apos;activation monitoring sans serveur pour AWS Lambda peut entraîner des frais Amazon Web Services. Notre fonction Lambda `newrelic-log-ingestion`, qui nous transmet vos données Lambda, est considérée comme un [service tiers](/docs/licenses/license-information/general-usage-licenses/acceptable-use-policy): les frais AWS résultant de son utilisation sont à votre charge.

Si vous utilisez notre [extension newrelic-lambda](https://github.com/newrelic/newrelic-lambda-extension) fournie dans nos [couches New Relic Lambda ](https://github.com/newrelic/newrelic-lambda-layers), vous pouvez éviter d&apos;envoyer des logs et des données de télémétrie via CloudWatch et la fonction [d&apos;ingestion newrelic-log](https://github.com/newrelic/aws-log-ingestion) . Il est également possible de configurer la fonction [newrelic-log-ingestion](https://github.com/newrelic/aws-log-ingestion) comme méthode [de secours CloudWatch](/docs/serverless-function-monitoring/aws-lambda-monitoring/instrument-lambda-function/cloud-watch-fallback/) pour les fonctions qui nécessitent une haute disponibilité des données d&apos;observabilité.

## Tarifs [#pricing]

Votre utilisation de New Relic APM + Serverless Convergence est facturée comme une entité APM conformément à votre commande. Pour plus de détails sur les prix, veuillez contacter notre équipe commerciale ou vous référer à votre commande.

## Articles connexes [#related-docs]

<DocTiles>
  <DocTile title="Instrumentation en couches" path="/docs/serverless-function-monitoring/aws-lambda-monitoring/instrument-lambda-function/instrument-your-own">
    Instrumentez votre fonction Lambda avec l&apos;approche par couches de New Relic.
  </DocTile>

  <DocTile title="Instrumentation du SDK" path="/docs/serverless-function-monitoring/aws-lambda-monitoring/instrument-lambda-function/sdk-based-instrumentation">
    Instrumentez votre fonction Lambda à l&apos;aide du SDK.
  </DocTile>

  <DocTile title="Instrumentation conteneurisée" path="/docs/serverless-function-monitoring/aws-lambda-monitoring/instrument-lambda-function/containerized-images">
    Instrumentez votre fonction Lambda avec l&apos;approche conteneurisée de New Relic.
  </DocTile>
</DocTiles>