---
title: Messagerie AWS SQS
tags:
  - workflow automation
  - workflow
  - aws
  - sqs
metaDescription: Send messages to AWS SQS queues using IAM role authentication.
freshnessValidatedDate: never
translationType: machine
---

Envoyer des messages aux files d&apos;attente AWS SQS en utilisant l&apos;authentification par rôle IAM.

## Prérequis

**1. Configuration du rôle AWS IAM**

* Un rôle IAM que New Relic peut endosser
* Le rôle doit disposer des autorisations pour envoyer des messages à SQS
* Consultez [Configurer les identifiants AWS](/docs/workflow-automation/setup-and-configuration/set-up-aws-credentials) pour les instructions de configuration

**2. File d&apos;attente AWS SQS**

* Une file d&apos;attente SQS existante dans la région spécifiée

**3. Valeurs d&apos;entrée requises**

* **awsRoleArn**: L&apos;ARN du rôle IAM (par ex. `arn:aws:iam::123456789012:role/NewRelicIntegrationRole`)
* **awsQueueUrl**: L&apos;URL complète de la file d&apos;attente SQS (format : `https://sqs.{region}.amazonaws.com/{account-id}/{queue-name}`)
* **awsRegion**: (facultatif) par défaut `us-west-2`

## Ce que fait ce workflow

* Envoyer un message à la file d&apos;attente SQS
* Utiliser l&apos;authentification du rôle AWS IAM
* Retourner l&apos;ID du message et l&apos;état de réussite

**Actions clés**: `aws.execute.api`, `(sqs.send_message)`

```yaml
name: aws_execute_api_sqs_example

workflowInputs:
  awsRoleArn:
    type: String
  awsRegion:
    type: String
    defaultValue: us-west-2
  awsQueueUrl:
    type: String

steps:
  - name: sendSqsMessage
    type: action
    action: aws.execute.api
    version: 1
    inputs:
      awsRoleArn: ${{ .workflowInputs.awsRoleArn }}
      region: ${{ .workflowInputs.awsRegion }}
      service: sqs
      api: send_message
      parameters:
        QueueUrl: "${{ .workflowInputs.awsQueueUrl }}"
        MessageBody: |
          {
            "message": "deployment is bad",
            "status": "not good"
          }
      selectors:
        - name: success
          expression: '.success'
        - name: messageId
          expression: '.response.MessageId'
```

## Et ensuite ?

* **[Interrogation de l’API REST](/docs/workflow-automation/workflow-examples/integrations/rest-api-polling)**: Interrogez les API externes et traitez les données
* **[Restauration du déploiement](/docs/workflow-automation/workflow-examples/advanced/deployment-rollback)**: Utiliser SQS pour les notifications de restauration