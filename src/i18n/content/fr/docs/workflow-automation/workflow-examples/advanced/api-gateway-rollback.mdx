---
title: Restauration du gateway API
tags:
  - workflow automation
  - workflow
  - aws
  - api gateway
metaDescription: 'Detect deployments via change tracking, send Slack approval requests, and automate API Gateway rollback.'
freshnessValidatedDate: never
translationType: machine
---

Détectez les déploiements via le suivi des changements New Relic, envoyez des demandes d&apos;approbation Slack et automatisez le rollback de l&apos;API Gateway à l&apos;aide d&apos;AWS Systems Manager.

**Exigences:**

* Identifiants AWS (API Gateway + Systems Manager)
* Jeton Slack
* Monitoring des entités New Relic

**Ce que fait ce workflow :**

* Détecter les déploiements récents à l&apos;aide du suivi des modifications New Relic
* Envoyez des notifications Slack avec des boutons d&apos;approbation `(:+1: or :-1:)`
* Créer un document SSM après l&apos;approbation pour automatiser le rollback
* Restaurer l&apos;intégration de l&apos;API Gateway vers la version Lambda précédente
* Créer un nouveau déploiement pour appliquer un retour en arrière
* Envoyer des notifications d&apos;état à Slack
* Nettoyer le document SSM après l&apos;exécution

**Actions clés**: `newrelic.nerdgraph.execute`, `slack.chat.postMessage`, `slack.chat.getReactions`, `aws.systemsManager.writeDocument`, `aws.systemsManager.startAutomation`, `aws.systemsManager.waitForAutomationStatus`, `aws.systemsManager.deleteDocument`

## Et ensuite ?

* **[Gestion EC2](/docs/workflow-automation/workflow-examples/advanced/ec2-management)**: Automatisation de l&apos;infrastructure
* **[Alertes NRQL](/docs/workflow-automation/workflow-examples/advanced/nrql-alerting)**: Modèles d&apos;alerte personnalisés