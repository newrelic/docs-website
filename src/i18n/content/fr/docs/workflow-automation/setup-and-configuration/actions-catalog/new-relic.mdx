---
title: Actions de New Relic
tags:
  - workflow automation
  - workflow
  - workflow automation actions
  - New relic actions
metaDescription: A list of available actions in the actions catalog for workflow definitions
freshnessValidatedDate: never
translationType: machine
---

<Callout title="Aperçu">
  Nous travaillons toujours sur cette fonctionnalité, mais nous aimerions que vous l&apos;essayiez !

  Cette fonctionnalité est actuellement fournie dans le cadre d&apos;un programme d&apos;aperçu conformément à nos [politiques de pré-sortie](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy).
</Callout>

Cette page fournit une référence complète des actions New Relic disponibles dans le catalogue des actions d&apos;automatisation workflow. Ces actions vous permettent d&apos;intégrer les fonctionnalités de la plateforme New Relic dans vos définitions workflow, notamment l&apos;envoi d&apos;événements personnalisés et de logs, l&apos;exécution de requêtes NerdGraph, l&apos;exécution de requêtes NRQL et l&apos;envoi de notifications.

## Prérequis

Avant d&apos;utiliser les actions New Relic dans l&apos;automatisation workflow, assurez-vous de disposer de :

* Un compte New Relic disposant des autorisations appropriées.
* Une clé de licence New Relic (si vous envoyez des données vers un compte différent).
* Les autorisations nécessaires pour les services New Relic spécifiques que vous prévoyez d&apos;utiliser.

Consultez [la clé de licence](/docs/apis/intro-apis/new-relic-api-keys/#license-key) pour obtenir des informations sur la façon de créer et de gérer votre compte New Relic.

## Actions New Relic disponibles

Guide rapide de toutes les actions de New Relic par catégorie :

<table>
  <thead>
    <tr>
      <th style={{ width: "150px" }}>
        Catégorie
      </th>

      <th style={{ width: "250px" }}>
        Action
      </th>

      <th>
        But
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        **Ingestion de données**
      </td>

      <td>
        [Envoyer un événement personnalisé](#newrelicingestsendevents)
      </td>

      <td>
        Envoyer un événement personnalisé à New Relic.
      </td>
    </tr>

    <tr>
      <td>
        **Ingestion de données**
      </td>

      <td>
        [Envoyer les logs](#newrelicingestsendlogs)
      </td>

      <td>
        Envoyer les données log à New Relic.
      </td>
    </tr>

    <tr>
      <td>
        **NerdGraph**
      </td>

      <td>
        [Exécuter une requête ou une mutation GraphQL](#newrelicnerdgraphexecute)
      </td>

      <td>
        Exécuter des commandes GraphQL sur l&apos;API NerdGraph.
      </td>
    </tr>

    <tr>
      <td>
        **Qequête**
      </td>

      <td>
        [Exécuter une requête NRDB](#newrelicnrdbquery)
      </td>

      <td>
        Exécuter la requête NRQL inter-comptes.
      </td>
    </tr>

    <tr>
      <td>
        **Notifications**
      </td>

      <td>
        [Envoyer une notification](#newrelicnotificationsend)
      </td>

      <td>
        Envoyer une notification aux destinations New Relic.
      </td>
    </tr>
  </tbody>
</table>

## actions d&apos;ingestion de données

<CollapserGroup>
  <Collapser id="newrelic.ingest.sendEvents" title="Envoyer un événement personnalisé à New Relic">
    Envoie un événement personnalisé à New Relic

    <Tabs>
      <TabsBar>
        <TabsBarItem id="createventinputs">
          Entrées
        </TabsBarItem>

        <TabsBarItem id="createventoutputs">
          Sorties
        </TabsBarItem>

        <TabsBarItem id="createventexample">
          Exemple
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="createventinputs">
          <table>
            <thead>
              <tr>
                <th>
                  Champ de saisie
                </th>

                <th>
                  optionnalité
                </th>

                <th>
                  Type
                </th>

                <th>
                  Exemple
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **attributes**
                </td>

                <td>
                  Facultatif
                </td>

                <td>
                  carte
                </td>

                <td>
                  `"{\"page\": \"1\", \"limit\": \"10\"}"`
                </td>
              </tr>

              <tr>
                <td>
                  **événement**
                </td>

                <td>
                  Requis
                </td>

                <td>
                  liste
                </td>

                <td>
                  `"[{\"eventType\":\"XYZ\",\"attributes\":{\"foo\":\"bar\"}}, {\"eventType\":\"ABC\",\"value\":\"1234\",\"attributes\":{\"color\":\"red\"}}]`
                </td>
              </tr>

              <tr>
                <td>
                  **clé de licence**
                </td>

                <td>
                  Facultatif
                </td>

                <td>
                  chaîne
                </td>

                <td>
                  `"{{ .secrets.secretName }}"`
                </td>
              </tr>

              <tr>
                <td>
                  **sélecteurs**
                </td>

                <td>
                  Facultatif
                </td>

                <td>
                  liste
                </td>

                <td>
                  `[{\"name\": \"success\", \"expression\": \".success\"}]`
                </td>
              </tr>
            </tbody>
          </table>

          <Callout variant="important">
            * **attributes**: Attribut commun qui fait partie de tous les événements lorsqu&apos;il est fourni. Fusion pour chaque élément d&apos;événement lorsque cela est nécessaire, l&apos;élément d&apos;événement remplace la définition commune.
            * **events**: La liste des données d&apos;événement. Notez que l&apos;événement nécessite l&apos;utilisation d&apos;un champ `eventType` qui représente le type d&apos;événement personnalisé et que le nombre maximal d&apos;événements autorisés par requête est de 100.
            * **licenseKey**: La clé de licence du compte New Relic qui spécifie le compte cible où les événements sont envoyés. Si cette valeur n’est pas fournie, une clé de licence par défaut est supposée en fonction du compte exécutant le workflow.
            * **selectors**: Les sélecteurs permettant d&apos;obtenir uniquement les paramètres spécifiés en sortie.
          </Callout>
        </TabsPageItem>

        <TabsPageItem id="createventoutputs">
          <table>
            <thead>
              <tr>
                <th>
                  Champ de sortie
                </th>

                <th>
                  Type
                </th>

                <th>
                  Exemple
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **succès**
                </td>

                <td>
                  Booléen
                </td>

                <td>
                  `true`
                </td>
              </tr>

              <tr>
                <td>
                  **message d&apos;erreur**
                </td>

                <td>
                  chaîne
                </td>

                <td>
                  `"Error message if operation failed"`
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="createventexample">
          <table>
            <thead>
              <tr>
                <th>
                  Exemple de workflow
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  ```yaml
                  name: heartbeat_newrelicIngestSendEvents

                  workflowInputs:
                    cellName:
                      type: String

                  steps:
                    - name: runAction
                      type: action
                      action: newrelic.ingest.sendEvents
                      version: 1
                      inputs:
                        attributes:
                          colour: red
                          id: 1234
                        events:
                          - eventType: HeartBeat
                            test: "OK"
                            attributes:
                              foo: bar
                          - eventType: HeartBeat1234
                            test: "OK1234"
                            attributes:
                              foo: bar
                          - eventType: HeartBeat12345
                            test: "OK12345"
                            attributes:
                              foo: bar
                              colour: yellow
                          - eventType: HeartBeat12345678
                            test: "OK12345678"
                        selectors:
                          - name: success
                            expression: ".success"
                  ```

                  **Résultat attendu :**

                  ```yaml
                  {
                    "success": true
                  }
                  ```

                  **Récupérer l&apos;événement :**

                  Une fois un workflow exécuté avec succès, vous pouvez récupérer l&apos;événement associé en exécutant une requête sous le compte qui a exécuté le workflow:

                  ```sql
                  SELECT * FROM HeartBeat
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>
</CollapserGroup>

<CollapserGroup>
  <Collapser id="newrelic.ingest.sendLogs" title="Envoyer les logs à New Relic">
    Envoyer les logs à New Relic

    <Tabs>
      <TabsBar>
        <TabsBarItem id="newrelic.ingest.sendLogsinputs">
          Entrées
        </TabsBarItem>

        <TabsBarItem id="newrelic.ingest.sendLogsoutputs">
          Sorties
        </TabsBarItem>

        <TabsBarItem id="newrelic.ingest.sendLogsexample">
          Exemple
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="newrelic.ingest.sendLogsinputs">
          <table>
            <thead>
              <tr>
                <th>
                  Champ de saisie
                </th>

                <th>
                  optionnalité
                </th>

                <th>
                  Type
                </th>

                <th>
                  Exemple
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **attributes**
                </td>

                <td>
                  Facultatif
                </td>

                <td>
                  carte
                </td>

                <td>
                  `"{\"page\": \"1\", \"limit\": \"10\"}"`
                </td>
              </tr>

              <tr>
                <td>
                  **logs**
                </td>

                <td>
                  Requis
                </td>

                <td>
                  liste
                </td>

                <td>
                  `"[{\"message\":\"XYZ\",\"attributes\":{\"foo\":\"bar\"}}, {\"message\":\"ABC\",\"value\":\"1234\",\"attributes\":{\"color\":\"red\"}}]"`
                </td>
              </tr>

              <tr>
                <td>
                  **clé de licence**
                </td>

                <td>
                  Facultatif
                </td>

                <td>
                  chaîne
                </td>

                <td>
                  `"{{ .secrets.secretName }}"`
                </td>
              </tr>

              <tr>
                <td>
                  **sélecteurs**
                </td>

                <td>
                  Facultatif
                </td>

                <td>
                  liste
                </td>

                <td>
                  `[{\"name\": \"success\", \"expression\": \".success\"}]`
                </td>
              </tr>
            </tbody>
          </table>

          <Callout variant="important">
            * **attributes**: Attribut commun inclus dans tous les logs lorsqu&apos;il est fourni. Si un élément log spécifie le même attribut, il remplace la définition commune.
            * **logs**: La liste des données log. Notez que le nombre maximal des logs d&apos;entrées autorisé par requête est de 100.
            * **licenseKey**: La clé de licence du compte New Relic qui spécifie le compte cible où les logs sont envoyés. Si aucune clé de licence n’est fournie, une clé de licence par défaut est supposée en fonction du compte exécutant le workflow. Consultez [la clé de licence](/docs/apis/intro-apis/new-relic-api-keys/#license-key) pour plus d&apos;informations.
            * **selectors**: Les sélecteurs permettant d&apos;obtenir uniquement les paramètres spécifiés en sortie.
          </Callout>
        </TabsPageItem>

        <TabsPageItem id="newrelic.ingest.sendLogsoutputs">
          <table>
            <thead>
              <tr>
                <th>
                  Champ de sortie
                </th>

                <th>
                  Type
                </th>

                <th>
                  Exemple
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **succès**
                </td>

                <td>
                  Booléen
                </td>

                <td>
                  `true`
                </td>
              </tr>

              <tr>
                <td>
                  **message d&apos;erreur**
                </td>

                <td>
                  chaîne
                </td>

                <td>
                  `"Error message if operation failed"`
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="newrelic.ingest.sendLogsexample">
          <table>
            <thead>
              <tr>
                <th>
                  Exemple de workflow
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  ```yaml
                  name: heartbeat_newrelicIngestSendLogs

                  workflowInputs:
                    cellName:
                      type: String

                  steps:
                    - name: runAction
                      type: action
                      action: newrelic.ingest.sendLogs
                      version: 1
                      inputs:
                        attributes:
                          colour: red
                          id: 1234
                        logs:
                          - message: 'Heartbeat sendLogs Action Test Message'
                            attributes:
                              foo: bar
                          - message: 'HeartBeat1234'
                            attributes:
                              foo: bar
                          - message: 'HeartBeat12345'
                            attributes:
                              foo: bar
                              colour: yellow
                          - message: 'HeartBeat12345678'
                        selectors:
                          - name: success
                            expression: ".success"
                  ```

                  **Résultat attendu :**

                  ```yaml
                  {
                    "success": true
                  }
                  ```

                  **Récupérer les logs :**

                  Une fois un workflow exécuté avec succès, vous pouvez récupérer le log associé en exécutant une requête sous le compte qui a exécuté le workflow:

                  ```sql
                  SELECT * FROM Log
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>
</CollapserGroup>

## Actions NerdGraph

<CollapserGroup>
  <Collapser id="newrelic.nerdgraph.execute" title="Exécutez une requête ou une mutation GraphQL sur l'API New Relic NerdGraph.">
    Exécute une commande Graphql sur l&apos;API New Relic NerdGraph. La commande peut être soit une requête, soit une mutation.

    <Tabs>
      <TabsBar>
        <TabsBarItem id="nerdgraphexecuteinputs">
          Entrées
        </TabsBarItem>

        <TabsBarItem id="nerdgraphexecuteoutputs">
          Sorties
        </TabsBarItem>

        <TabsBarItem id="nerdgraphexecuteexample">
          Exemple
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="nerdgraphexecuteinputs">
          <table>
            <thead>
              <tr>
                <th>
                  Saisir
                </th>

                <th>
                  optionnalité
                </th>

                <th>
                  Type
                </th>

                <th>
                  Description
                </th>

                <th>
                  Exemple
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **graphql**
                </td>

                <td>
                  Requis
                </td>

                <td>
                  chaîne
                </td>

                <td>
                  Une syntaxe GraphQL. Vous devriez utiliser GraphiQL pour construire et tester votre commande
                </td>

                <td />
              </tr>

              <tr>
                <td>
                  **variables**
                </td>

                <td>
                  Requis
                </td>

                <td>
                  map[string]any
                </td>

                <td>
                  Toutes les variables de type paire valeur-clé à utiliser avec l&apos;instruction GraphQL.
                </td>

                <td />
              </tr>

              <tr>
                <td>
                  **sélecteurs**
                </td>

                <td>
                  Facultatif
                </td>

                <td>
                  liste
                </td>

                <td>
                  Les sélecteurs permettant d&apos;obtenir uniquement les paramètres spécifiés en sortie.
                </td>

                <td>
                  ```yaml
                    {
                    "data": {
                      "actor": {
                        "user": {
                          "name": ""
                        }
                      }
                    }
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="nerdgraphexecuteoutputs">
          <table>
            <thead>
              <tr>
                <th>
                  Sortir
                </th>

                <th>
                  Type
                </th>

                <th>
                  Exemple
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **données**
                </td>

                <td>
                  map[string]any : Contenu de la propriété 

                  `data`

                   d&apos;une réponse NerdGraph.
                </td>

                <td>
                  ```yaml
                    steps:
                      - name: currentUserId
                        type: action
                        action: newrelic.nerdgraph.execute
                        version: 1
                        inputs:
                          graphql: |
                            query userId {
                              currentUser {
                                id
                              }
                            }
                      - name: sayHello
                        type: action
                        action: example.messaging.sayHello
                        version: 1
                        inputs:
                          name: ${{ .steps.currentUserId.outputs.data.currentUser.id }}
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="nerdgraphexecuteexample">
          <table>
            <thead>
              <tr>
                <th>
                  Exemple
                </th>

                <th>
                  Sortir
                </th>

                <th>
                  Récupérer l&apos;événement
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  ```json
                      name: testLog

                      steps:
                        - name: logStep
                          type: action
                          action: newrelic.ingest.sendLogs
                          version: 1
                          inputs:
                            logs:
                              - message: 'Hello World'
                  ```
                </td>

                <td>
                  ```yaml
                          {
                            "success": true
                          }
                  ```
                </td>

                <td>
                  Vous pouvez récupérer l&apos;événement associé en exécutant une requête sous le compte qui a exécuté le workflow.

                  ```yaml
                    SELECT message FROM Log WHERE allColumnSearch('Hello World', insensitive: true) SINCE 30 minutes ago
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>
</CollapserGroup>

## Actions de requête

<CollapserGroup>
  <Collapser id="newrelic.nrdb.query" title="Exécuter une requête NRDB">
    Exécute une requête NRQL inter-comptes via l&apos;API NerdGraph.

    <Tabs>
      <TabsBar>
        <TabsBarItem id="nrdbqueryinputs">
          Entrées
        </TabsBarItem>

        <TabsBarItem id="nrdbqueryoutputs">
          Sorties
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="nrdbqueryinputs">
          <table>
            <thead>
              <tr>
                <th>
                  Saisir
                </th>

                <th>
                  optionnalité
                </th>

                <th>
                  Type
                </th>

                <th>
                  Description
                </th>

                <th>
                  Exemple
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **requête**
                </td>

                <td>
                  Requis
                </td>

                <td>
                  chaîne
                </td>

                <td>
                  L&apos;instruction de requête NRQL.
                </td>

                <td />
              </tr>

              <tr>
                <td>
                  **identifiants de compte**
                </td>

                <td>
                  Facultatif
                </td>

                <td>
                  liste d&apos;entiers
                </td>

                <td>
                  Le champ 

                  **New Relic Account ID**

                   est une liste d’identifiants cibles qui vous permet de spécifier les comptes cibles sur lesquels la requête est exécutée. Si cette valeur n&apos;est pas fournie en entrée, la requête sera automatiquement exécutée sur le compte associé au compte d&apos;exécution du workflow.
                </td>

                <td />
              </tr>

              <tr>
                <td>
                  **sélecteurs**
                </td>

                <td>
                  Facultatif
                </td>

                <td>
                  liste
                </td>

                <td>
                  Les sélecteurs permettant d&apos;obtenir uniquement les paramètres spécifiés en sortie.
                </td>

                <td>
                  ```json
                    steps:
                      - name: queryForLog
                        type: action
                        action: newrelic.nrdb.query
                        version: 1
                        inputs:
                          accountIds: [12345]
                          query: FROM Log SELECT * WHERE message LIKE 'DEMO%'
                          selectors:
                            - name: resultsAsString
                              expression: '.results | tostring'
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="nrdbqueryoutputs">
          <table>
            <thead>
              <tr>
                <th>
                  Sortir
                </th>

                <th>
                  Type
                </th>

                <th>
                  Exemple
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **results**

                  : Un éventail d&apos;objets contenant les résultats de la requête.
                </td>

                <td />

                <td>
                  ```yaml
                    {
                      results=[
                        { message=[INFO] - Workflow: test has ended, messageId=39af98 },
                        { message=[INFO] - Workflow: test - Step query has started, messageId=649c612 },
                        ...
                      ]
                    }
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>
</CollapserGroup>

## Actions de notification

<CollapserGroup>
  <Collapser id="newrelic.notification.send" title="Envoyer une notification à la destination New Relic">
    Envoie un message à un canal, intégré à des destinations comme Slack par exemple.

    <Tabs>
      <TabsBar>
        <TabsBarItem id="newrelicnotificationsendinputs">
          Entrées
        </TabsBarItem>

        <TabsBarItem id="newrelicnotificationsendoutputs">
          Sorties
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="newrelicnotificationsendinputs">
          <table>
            <thead>
              <tr>
                <th>
                  Saisir
                </th>

                <th>
                  optionnalité
                </th>

                <th>
                  Type
                </th>

                <th>
                  Description
                </th>

                <th>
                  Exemple
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **type**
                </td>

                <td>
                  Requis
                </td>

                <td>
                  chaîne
                </td>

                <td>
                  Type de destination New Relic
                </td>

                <td>
                  `slack`
                </td>
              </tr>

              <tr>
                <td>
                  **destinationId**
                </td>

                <td>
                  Requis
                </td>

                <td>
                  Chaîne
                </td>

                <td>
                  DestinationId associé à la destination New Relic.
                </td>

                <td>
                  `123e4567-e89b-12d3-a456-426614174000`
                </td>
              </tr>

              <tr>
                <td>
                  **paramètres**
                </td>

                <td>
                  Requis
                </td>

                <td>
                  carte
                </td>

                <td>
                  Champs requis pour envoyer une notification au type de destination choisi.
                </td>

                <td>
                  `{\"channel\": \"${{ YOUR_CHANNEL }}\", \"text\": \"Enter your text here\"}`
                </td>
              </tr>

              <tr>
                <td>
                  **sélecteurs**
                </td>

                <td>
                  Facultatif
                </td>

                <td>
                  liste
                </td>

                <td>
                  Les sélecteurs permettant d&apos;obtenir uniquement les paramètres spécifiés en sortie.
                </td>

                <td>
                  `[{\"name\": \"success\", \"expression\": \".success\"}]`
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="newrelicnotificationsendoutputs">
          <table>
            <thead>
              <tr>
                <th>
                  Sortir
                </th>

                <th>
                  Type
                </th>

                <th>
                  Exemple
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  succès
                </td>

                <td>
                  booléen
                </td>

                <td>
                  `true/false`
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>
</CollapserGroup>