---
title: Actions Slack
tags:
  - workflow automation
  - workflow
  - workflow automation actions
  - Slack actions
  - communication actions
  - Slack Chat actions
metaDescription: A list of available slack chat actions in the actions catalog for workflow definitions
freshnessValidatedDate: never
translationType: machine
---

<Callout title="Aperçu">
  Nous travaillons toujours sur cette fonctionnalité, mais nous aimerions que vous l&apos;essayiez !

  Cette fonctionnalité est actuellement fournie dans le cadre d&apos;un programme d&apos;aperçu conformément à nos [politiques de pré-sortie](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy).
</Callout>

Cette page fournit une référence complète des actions de chat Slack disponibles dans le catalogue des actions d&apos;automatisation des workflows. Ces actions vous permettent d&apos;effectuer des opérations de messagerie Slack.

## Prérequis

Avant d&apos;utiliser des actions de communication dans l&apos;automatisation workflow, assurez-vous de disposer de :

* Un espace de travail Slack avec les autorisations appropriées.
* Un bot Slack configuré comme secret dans l&apos;automatisation workflow.
* Accès aux canaux Slack dans lesquels vous souhaitez envoyer des messages.

## Configurer l&apos;intégration Slack [#slack-configuration]

Cette section détaille les instructions pour configurer une application Slack avec les autorisations minimales pour permettre les actions Slack d&apos;automatisation des workflows.

### Créer une application Slack

1. Accédez à [Slack API](https://api.slack.com/apps) &gt; **Create New App &gt; From Scratch**

2. Donnez un nom à votre application et sélectionnez un espace de travail, puis cliquez sur **Create App**.

3. Après la création, accédez à **App Home** dans la navigation de gauche et assurez-vous que votre bot est en ligne.

   <img width="40%;" style={{align: "left"}} title="Always show My Bot as Online" alt="The Slack App Home page with the My Bot online status highlighted." src="/images/my-bot-always-online.webp" />

### Configurer les autorisations OAuth

1. Dans la navigation de gauche, sélectionnez **OAuth &amp; Permissions**.

2. Faites défiler jusqu&apos;à la section **Bot Token Scopes** et ajoutez les scopes suivants pour autoriser les utilisations des actions d&apos;automatisation des workflows :

   * `chat:write` - Requis pour publier un message
   * `reactions:read` - Requis pour obtenir une réaction d&apos;un fil
   * `files:write` - Requis pour télécharger une pièce jointe de fichier dans un fil

   <img width="40%;" style={{align: "left"}} title="Workflow automation Slack scopes" alt="The image of the scope that needs to be added for workflow automation Slack actions." src="/images/slack-workflow-scopes.webp" />

3. Revenez en haut et cliquez sur le bouton **Install to \[espace de travail]** pour démarrer la configuration OAuth avec votre espace de travail Slack.

4. Vous devriez voir une invite de confirmation. Cliquez sur **Allow** pour confirmer.

5. En cas de succès, copiez le **Bot token** et conservez-le pour l&apos;étape suivante. Le jeton doit commencer par `xoxb-...`.

### Ajouter l&apos;application aux canaux

Maintenant que l&apos;application Slack est créée et configurée, ajoutez-la au(x) canal(aux) Slack que vous souhaitez utiliser en modifiant les **Intégrations** de ce canal et en y ajoutant l&apos;application Slack.

### Configuration New Relic

Une fois que vous avez configuré une application Slack et obtenu un jeton de bot, stockez cette information d&apos;identification dans la gestion des secrets New Relic à l&apos;aide de la mutation GraphQL ci-dessous :

```graphql
mutation {
  secretsManagementCreateSecret(
    scope: {type: ACCOUNT id: "12345678"}
    namespace: "slack"
    key: "my-app-bot-token"
    description: "A slack token to send messages with newrelic workflow automation"
    value: "xoxb-..."
  ) {
    key
  }
}
```

Configurez les valeurs suivantes :

* `id` - Votre ID de compte New Relic
* `namespace` - Facultatif, utilisez n&apos;importe quelle chaîne alphanumérique pour catégoriser votre secret
* `key` - Utilisez une chaîne alphanumérique pour référencer ce secret
* `description` - Description facultative du secret
* `value` - Le jeton du bot Slack que vous avez copié à l&apos;étape précédente

Vous pouvez exécuter cette mutation à l&apos;aide de [NerdGraph GraphiQL explorer](https://one.newrelic.com/nerdgraph-graphiql) avec votre clé API utilisateur New Relic. Une fois soumis avec succès, vous devriez voir un résultat similaire à celui-ci :

```json
{
  "data": {
    "secretsManagementCreateSecret": {
      "key": "my-app-bot-token"
    }
  }
}
```

### Utiliser le jeton Slack dans les workflows

Utilisez la fonctionnalité d&apos;automatisation des workflows en tirant parti du secret du jeton de bot Slack stocké avec vos espaces de noms et noms de clés.

**Exemple:**

```yaml
name: to-slack

steps:
  - name: postCsv
    type: action
    action: slack.chat.postMessage
    version: 1
    inputs:
      channel: test-channel-workflow
      text: "Hello World!"
      token: ${{ :secrets:slack:my-app-bot-token }}
```

<Callout variant="tip">
  Si vous n&apos;avez pas utilisé d&apos;espace de noms, supprimez la partie `:namespace` de l&apos;entrée du jeton, comme ceci : `${{ :secrets:my-app-bot-token }}`
</Callout>

## Actions Slack

<CollapserGroup>
  <Collapser id="slack-chat-postmessage" title="Publier un message sur le canal Slack">
    Envoie un message vers un canal Slack, avec une pièce jointe facultative.

    <Tabs>
      <TabsBar>
        <TabsBarItem id="chatpostmessageinputs">
          Entrées
        </TabsBarItem>

        <TabsBarItem id="chatpostmessageoutputs">
          Sorties
        </TabsBarItem>

        <TabsBarItem id="chatpostmessageexample">
          Exemple
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="chatpostmessageinputs">
          <table>
            <thead>
              <tr>
                <th>
                  Champ de saisie
                </th>

                <th>
                  optionnalité
                </th>

                <th>
                  Type
                </th>

                <th>
                  Description
                </th>

                <th>
                  Exemple
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **jeton**
                </td>

                <td>
                  Requis
                </td>

                <td>
                  Secret
                </td>

                <td>
                  Le jeton du bot Slack à utiliser. Cela doit être transmis sous forme de syntaxe secrète. Reportez-vous à 

                  [Ajouter la configuration Slack](#slack-configuration)

                   pour obtenir des instructions sur la configuration d&apos;un jeton.
                </td>

                <td>
                  `${{ :secrets:slackToken }}`
                </td>
              </tr>

              <tr>
                <td>
                  **canal**
                </td>

                <td>
                  Requis
                </td>

                <td>
                  Chaîne
                </td>

                <td>
                  Le nom du canal, ou un ID de canal, pour envoyer le message. Consultez 

                  [l&apos;API Slack](https://docs.slack.dev/reference/methods/chat.postMessage/#arg_channel)

                   pour plus d&apos;informations.
                </td>

                <td>
                  `my-slack-channel`
                </td>
              </tr>

              <tr>
                <td>
                  **texte**
                </td>

                <td>
                  Requis
                </td>

                <td>
                  Chaîne
                </td>

                <td>
                  Le message à publier sur Slack dans le 

                  `channel`

                   spécifié.
                </td>

                <td>
                  `Hello World!`
                </td>
              </tr>

              <tr>
                <td>
                  **filTs**
                </td>

                <td>
                  Facultatif
                </td>

                <td>
                  Chaîne
                </td>

                <td>
                  Horodatage appartenant au message parent, utilisé pour créer une réponse de message dans un fil de discussion.
                </td>

                <td>
                  `<digits>.<digits>`
                </td>
              </tr>

              <tr>
                <td>
                  **pièce jointe**
                </td>

                <td>
                  Facultatif
                </td>

                <td>
                  Carte
                </td>

                <td>
                  Permet de joindre un fichier avec un message sur le 

                  `channel`

                   spécifié.
                </td>

                <td />
              </tr>

              <tr>
                <td>
                  **pièce jointe.nom_de_fichier**
                </td>

                <td>
                  Requis
                </td>

                <td>
                  Chaîne
                </td>

                <td>
                  Spécifiez le nom de fichier pour le fichier téléchargé dans Slack.
                </td>

                <td>
                  `file.txt`
                </td>
              </tr>

              <tr>
                <td>
                  **pièce jointe.contenu**
                </td>

                <td>
                  Requis
                </td>

                <td>
                  Chaîne
                </td>

                <td>
                  Le contenu du fichier à télécharger en UTF8.
                </td>

                <td>
                  `Hello\nWorld!`
                </td>
              </tr>

              <tr>
                <td>
                  **sélecteurs**
                </td>

                <td>
                  Facultatif
                </td>

                <td>
                  List
                </td>

                <td>
                  Les sélecteurs permettant d&apos;obtenir uniquement les paramètres spécifiés en sortie.
                </td>

                <td>
                  `[{\"name\": \"threadTs\", \"expression\": \".threadTs\"}, {\"name\": \"channelID\", \"expression\": \".channelID\")\"}]`
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="chatpostmessageoutputs">
          <table>
            <thead>
              <tr>
                <th>
                  Champ de sortie
                </th>

                <th>
                  Type
                </th>

                <th>
                  Description
                </th>

                <th>
                  Exemple
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **filTs**
                </td>

                <td>
                  Chaîne
                </td>

                <td>
                  Horodatage du fil de discussion. Peut être utilisé dans les futurs appels 

                  `postMessage`

                   pour publier une réponse dans un fil de discussion.
                </td>

                <td>
                  `<digits>.<digits>`
                </td>
              </tr>

              <tr>
                <td>
                  **ID du canal**
                </td>

                <td>
                  Chaîne
                </td>

                <td>
                  ID du canal où le message est publié.
                </td>

                <td>
                  `<string>`
                </td>
              </tr>

              <tr>
                <td>
                  **succès**
                </td>

                <td>
                  Booléen
                </td>

                <td>
                  État de la demande
                </td>

                <td>
                  `true / false`
                </td>
              </tr>

              <tr>
                <td>
                  **message d&apos;erreur**
                </td>

                <td>
                  Chaîne
                </td>

                <td>
                  Motif de l&apos;échec sous forme de message
                </td>

                <td>
                  `<string>`
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="chatpostmessageexample">
          **Exemple 1 : Envoyer un message Slack**

          <table>
            <thead>
              <tr>
                <th>
                  Exemple de workflow
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  ```yaml
                    name: SendMessage

                    steps:
                      - name: send_slack_message
                        type: action
                        action: slack.chat.postMessage 
                        version: 1
                        inputs:
                          token: ${{ :secrets:dn_staging_slack_token }}
                          channel: ${{ .workflowInputs.channel }}
                          text: ${{ .workflowInputs.text }}
                          selectors:
                            - name: threadTs
                              expression: ".threadTs"
                            - name: channelID
                              expression: ".channelID"
                  ```

                  **Entrées :**

                  ```json
                    {
                      "inputs": [
                        {
                          "key" : "channel",
                          "value" : "test-channel-workflow"
                        },
                        {
                          "key" : "text",
                          "value" : "This is my message *with bold text* and `code backticks`"
                        }
                      ]
                    }
                  ```

                  **Résultat attendu :**

                  ```json
                    [
                      {
                        "threadTs": "1718897637.400609",
                        "channelID": "C063JK1RHN1"
                        "success": true
                      }
                    ]
                  ```
                </td>
              </tr>
            </tbody>
          </table>

          **Exemple 2 : Joindre un fichier**

          <table>
            <thead>
              <tr>
                <th>
                  Exemple de workflow
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  ```yaml
                    name: SendFileMessage

                    steps:

                      - name: postCsv
                        type: action
                        action: slack.chat.postMessage
                        version: 1
                        inputs:
                          token: ${{ :secrets:dn_staging_slack_token }}
                          channel: test-channel-workflow
                          text: "Please find the attached file:"
                          attachment:
                            filename: 'file.txt'
                            content: "Hello\nWorld!"
                  ```

                  **Résultat attendu :**

                  ```json
                    [
                      {
                        "threadTs": "1718897637.400609",
                        "channelID": "C063JK1RHN1"
                        "success": true
                      }
                    ]
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>
</CollapserGroup>

<CollapserGroup>
  <Collapser id="slack-chat-getreactions" title="Obtenir une réaction à un message provenant d'un canal Slack">
    Obtenir une réaction à un message provenant d&apos;un canal Slack.

    <Tabs>
      <TabsBar>
        <TabsBarItem id="chatgetreactionsinputs">
          Entrées
        </TabsBarItem>

        <TabsBarItem id="chatgetreactionsoutputs">
          Sorties
        </TabsBarItem>

        <TabsBarItem id="chatgetreactionsexample">
          Exemple
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="chatgetreactionsinputs">
          <table>
            <thead>
              <tr>
                <th>
                  Champ de saisie
                </th>

                <th>
                  optionnalité
                </th>

                <th>
                  Type
                </th>

                <th>
                  Description
                </th>

                <th>
                  Exemple
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **jeton**
                </td>

                <td>
                  Requis
                </td>

                <td>
                  Secret
                </td>

                <td>
                  Le jeton du bot Slack à utiliser. Cela doit être transmis sous forme de syntaxe secrète. Reportez-vous à 

                  [Ajouter la configuration Slack](#slack-configuration)

                   pour obtenir des instructions sur la configuration d&apos;un jeton.
                </td>

                <td>
                  `${{ :secrets:slackToken }}`
                </td>
              </tr>

              <tr>
                <td>
                  **ID du canal**
                </td>

                <td>
                  Requis
                </td>

                <td>
                  Chaîne
                </td>

                <td>
                  L&apos;ID de canal, pour obtenir les réactions aux messages. Voir la 

                  [méthode`reactions.get`](https://docs.slack.dev/reference/methods/reactions.get/#arg_channel)
                </td>

                <td>
                  `C063JK1RHN1`
                </td>
              </tr>

              <tr>
                <td>
                  **temps mort**
                </td>

                <td>
                  Facultatif
                </td>

                <td>
                  Int
                </td>

                <td>
                  Le temps en secondes pendant lequel il faut attendre une réaction. La valeur par défaut est de 60 s, le maximum autorisé est de 600 s (10 min).
                </td>

                <td>
                  60
                </td>
              </tr>

              <tr>
                <td>
                  **filTs**
                </td>

                <td>
                  Requis
                </td>

                <td>
                  Chaîne
                </td>

                <td>
                  Horodatage appartenant au message, utilisé pour obtenir la réaction de ce message.
                </td>

                <td>
                  `<digits>.<digits>`
                </td>
              </tr>

              <tr>
                <td>
                  **sélecteurs**
                </td>

                <td>
                  Facultatif
                </td>

                <td>
                  List
                </td>

                <td>
                  Les sélecteurs permettant d&apos;obtenir uniquement les paramètres spécifiés en sortie.
                </td>

                <td>
                  `[{\"name\": \"reactions\", \"expression\": \".reactions \"}]`
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="chatgetreactionsoutputs">
          <table>
            <thead>
              <tr>
                <th>
                  Champ de sortie
                </th>

                <th>
                  Type
                </th>

                <th>
                  Description
                </th>

                <th>
                  Exemple
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **réactions**
                </td>

                <td>
                  List
                </td>

                <td>
                  Liste d&apos;éléments avec toutes les réactions capturées ou une liste vide si le délai d&apos;attente est dépassé.
                </td>

                <td>
                  `<list>`
                </td>
              </tr>

              <tr>
                <td>
                  **succès**
                </td>

                <td>
                  Booléen
                </td>

                <td>
                  État de la demande
                </td>

                <td>
                  `true / false`
                </td>
              </tr>

              <tr>
                <td>
                  **message d&apos;erreur**
                </td>

                <td>
                  Chaîne
                </td>

                <td>
                  Motif de l&apos;échec sous forme de message
                </td>

                <td>
                  `Invalid slack token`
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="chatgetreactionsexample">
          **Exemple 1 : Slack obtient des réactions**

          <table>
            <thead>
              <tr>
                <th>
                  Exemple de workflow
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  ```yaml
                    name: GetReactions

                    steps:
                        - name: getReactions
                        type: action
                        action: slack.chat.getReactions
                        version: 1
                        inputs:
                          token: ${{ :secrets:dn_staging_slack_token }}
                          channelID: ${{ .steps.promptUser.outputs.channelID }}
                          threadTs: ${{ .steps.promptUser.outputs.threadTs }}
                          timeout: ${{ .workflowInputs.timeout }}
                          selectors: ${{ .workflowInputs.selectors }}
                  ```

                  **Entrées :**

                  ```json
                    {
                      "inputs": [
                        {
                          "key" : "channelID",
                          "value" : "C063JK1RHN1"
                        },
                        {
                          "key" : "threadTs",
                          "value" : "1718897637.400609"
                        },
                        {
                          "key" : "selectors",
                          "value" : "[{\"name\": \"reactions\", \"expression\": \".reactions \"}]"
                        }
                      ]
                    }
                  ```

                  **Sorties :**

                  ```json
                    [
                                {
                                    "name": "grinning",
                                    "users": [
                                        "W222222"
                                    ],
                                    "count": 1
                                },
                                {
                                    "name": "question",
                                    "users": [
                                        "W333333"
                                    ],
                                    "count": 1
                                }
                            ]

                    or if it is timed out,
                    []
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>
</CollapserGroup>