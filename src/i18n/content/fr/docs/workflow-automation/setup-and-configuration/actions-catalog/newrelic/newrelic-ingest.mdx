---
title: Actions New Relic Ingest
tags:
  - workflow automation
  - workflow
  - workflow automation actions
  - New Relic actions
  - New Relic Ingest actions
metaDescription: A list of available new relic ingest actions in the actions catalog for workflow definitions
freshnessValidatedDate: never
translationType: machine
---

<Callout title="Aperçu">
  Nous travaillons toujours sur cette fonctionnalité, mais nous aimerions que vous l&apos;essayiez !

  Cette fonctionnalité est actuellement fournie dans le cadre d&apos;un programme d&apos;aperçu conformément à nos [politiques de pré-sortie](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy).
</Callout>

Cette page fournit une référence complète des actions d&apos;ingestion New Relic disponibles dans le catalogue des actions d&apos;automatisation des workflows. Ces actions vous permettent d&apos;envoyer des événements et des logs à New Relic.

## Prérequis

Avant d&apos;utiliser les actions New Relic dans l&apos;automatisation workflow, assurez-vous de disposer de :

* Un compte New Relic disposant des autorisations appropriées.
* Une clé de licence New Relic (si vous envoyez des données vers un compte différent).
* Les autorisations nécessaires pour les services New Relic spécifiques que vous prévoyez d&apos;utiliser.

Consultez [la clé de licence](/docs/apis/intro-apis/new-relic-api-keys/#license-key) pour obtenir des informations sur la façon de créer et de gérer votre compte New Relic.

## actions d&apos;ingestion de données

<CollapserGroup>
  <Collapser id="newrelic-ingest-sendevents" title="Envoyer un événement personnalisé à New Relic">
    Signale un événement personnalisé à New Relic.

    <Tabs>
      <TabsBar>
        <TabsBarItem id="createventinputs">
          Entrées
        </TabsBarItem>

        <TabsBarItem id="createventoutputs">
          Sorties
        </TabsBarItem>

        <TabsBarItem id="createventexample">
          Exemple
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="createventinputs">
          <table>
            <thead>
              <tr>
                <th>
                  Champ de saisie
                </th>

                <th>
                  optionnalité
                </th>

                <th>
                  Type
                </th>

                <th>
                  Description
                </th>

                <th>
                  Exemple
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **attributes**
                </td>

                <td>
                  Facultatif
                </td>

                <td>
                  Carte
                </td>

                <td>
                  Attributs courants qui font partie de tous les événements lorsqu&apos;ils sont fournis.

                  Fusion pour chaque élément d&apos;événement lorsque l&apos;élément d&apos;événement doit remplacer la définition commune.
                </td>

                <td>
                  `"{\"page\": \"1\", \"limit\": \"10\"}"`
                </td>
              </tr>

              <tr>
                <td>
                  **événement**
                </td>

                <td>
                  Requis
                </td>

                <td>
                  List
                </td>

                <td>
                  La liste des données d&apos;événement.

                  <Callout variant="important">
                    Les événements nécessitent l&apos;utilisation d&apos;un champ `eventType` qui représente le type d&apos;événement personnalisé. Le nombre maximal d&apos;événements autorisés par requête est de **100**.
                  </Callout>
                </td>

                <td>
                  `"[{\"eventType\":\"XYZ\",\"attributes\":{\"foo\":\"bar\"}}, {\"eventType\":\"ABC\",\"value\":\"1234\",\"attributes\":{\"color\":\"red\"}}]"`
                </td>
              </tr>

              <tr>
                <td>
                  **clé de licence**
                </td>

                <td>
                  Facultatif
                </td>

                <td>
                  Chaîne
                </td>

                <td>
                  La **Clé de licence du compte New Relic** (obligatoire) spécifie le compte cible pour vos événements. Si elle n&apos;est pas fournie, le système utilise la clé de licence par défaut du compte exécutant le workflow.

                  [En savoir plus sur nos clés API](/docs/apis/intro-apis/new-relic-api-keys/#license-key) pour créer et gérer votre **clé de licence de compte New Relic**.
                </td>

                <td>
                  `"{{ .secrets.secretName }}"`

                  , où 

                  `secretName`

                   est la clé sous laquelle la clé de licence est stockée.
                </td>
              </tr>

              <tr>
                <td>
                  **sélecteurs**
                </td>

                <td>
                  Facultatif
                </td>

                <td>
                  List
                </td>

                <td>
                  Les sélecteurs permettant d&apos;obtenir uniquement les paramètres spécifiés en sortie.
                </td>

                <td>
                  `[{\"name\": \"success\", \"expression\": \".success\"}]`
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="createventoutputs">
          <table>
            <thead>
              <tr>
                <th>
                  Champ de sortie
                </th>

                <th>
                  Type
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **succès**
                </td>

                <td>
                  Booléen
                </td>
              </tr>

              <tr>
                <td>
                  **message d&apos;erreur**
                </td>

                <td>
                  chaîne
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="createventexample">
          <table>
            <thead>
              <tr>
                <th>
                  Exemple de workflow
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  ```yaml
                  name: heartbeat_newrelicIngestSendEvents

                  workflowInputs:
                  cellName:
                    type: String

                  steps:
                  - name: runAction
                    type: action
                    action: newrelic.ingest.sendEvents
                    version: 1
                    inputs:
                      attributes:
                        colour: red
                        id: 1234
                      events:
                        - eventType: HeartBeat
                          test: "OK"
                          attributes:
                            foo: bar
                        - eventType: HeartBeat1234
                          test: "OK1234"
                          attributes:
                            foo: bar
                        - eventType: HeartBeat12345
                          test: "OK12345"
                          attributes:
                            foo: bar
                            colour: yellow
                        - eventType: HeartBeat12345678
                          test: "OK12345678"
                      selectors:
                        - name: success
                          expression: ".success"
                  ```

                  **Résultat attendu :**

                  ```yaml
                  {
                    "success": true
                  }
                  ```

                  **Récupérer l&apos;événement :**

                  Une fois un workflow exécuté avec succès, vous pouvez récupérer l&apos;événement associé en exécutant une requête sous le compte qui a exécuté le workflow:

                  ```sql
                  SELECT * FROM HeartBeat
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>
</CollapserGroup>

<CollapserGroup>
  <Collapser id="newrelic-ingest-sendlogs" title="Envoyer les logs à New Relic">
    Envoyer les logs à New Relic

    <Tabs>
      <TabsBar>
        <TabsBarItem id="newrelic-ingest-sendlogsinputs">
          Entrées
        </TabsBarItem>

        <TabsBarItem id="newrelic-ingest-sendlogsoutputs">
          Sorties
        </TabsBarItem>

        <TabsBarItem id="newrelic-ingest-sendlogsexample">
          Exemple
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="newrelic-ingest-sendlogsinputs">
          <table>
            <thead>
              <tr>
                <th>
                  Champ de saisie
                </th>

                <th>
                  optionnalité
                </th>

                <th>
                  Type
                </th>

                <th>
                  Description
                </th>

                <th>
                  Exemple
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **attributes**
                </td>

                <td>
                  Facultatif
                </td>

                <td>
                  Carte
                </td>

                <td>
                  Les attributs communs sont inclus dans tous les logs lorsqu&apos;ils sont fournis. Ceux-ci fusionnent avec chaque élément de log, les valeurs spécifiques au log remplaçant les attributs communs en cas de conflit.
                </td>

                <td>
                  `"{\"page\": \"1\", \"limit\": \"10\"}"`
                </td>
              </tr>

              <tr>
                <td>
                  **logs**
                </td>

                <td>
                  Requis
                </td>

                <td>
                  List
                </td>

                <td>
                  Liste des logs. Chaque 

                  **log**

                   nécessite un champ 

                  `message`

                  . Maximum de 100 logs par requête.
                </td>

                <td>
                  `"[{\"message\":\"XYZ\",\"attributes\":{\"foo\":\"bar\"}}, {\"message\":\"ABC\",\"value\":\"1234\",\"attributes\":{\"color\":\"red\"}}]"`
                </td>
              </tr>

              <tr>
                <td>
                  **clé de licence**
                </td>

                <td>
                  Facultatif
                </td>

                <td>
                  Chaîne
                </td>

                <td>
                  La **Clé de licence du compte New Relic** (obligatoire) spécifie le compte cible pour vos événements. Si elle n&apos;est pas fournie, le système utilise la clé de licence par défaut du compte exécutant le workflow.

                  [En savoir plus sur nos clés API](/docs/apis/intro-apis/new-relic-api-keys/#license-key) pour créer et gérer votre **clé de licence de compte New Relic**.
                </td>

                <td>
                  `"{{ .secrets.secretName }}"`

                  , où 

                  `secretName`

                   est la clé sous laquelle la clé de licence est stockée.
                </td>
              </tr>

              <tr>
                <td>
                  **sélecteurs**
                </td>

                <td>
                  Facultatif
                </td>

                <td>
                  List
                </td>

                <td>
                  Les sélecteurs permettant d&apos;obtenir uniquement les paramètres spécifiés en sortie.
                </td>

                <td />
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="newrelic-ingest-sendlogsoutputs">
          <table>
            <thead>
              <tr>
                <th>
                  Champ de sortie
                </th>

                <th>
                  Type
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **succès**
                </td>

                <td>
                  Booléen
                </td>
              </tr>

              <tr>
                <td>
                  **message d&apos;erreur**
                </td>

                <td>
                  chaîne
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="newrelic-ingest-sendlogsexample">
          <table>
            <thead>
              <tr>
                <th>
                  Exemple de workflow
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  ```yaml
                  name: heartbeat_newrelicIngestSendLogs

                  workflowInputs:
                  cellName:
                    type: String

                  steps:
                  - name: runAction
                    type: action
                    action: newrelic.ingest.sendLogs
                    version: 1
                    inputs:
                      attributes:
                        colour: red
                        id: 1234
                      logs:
                        - message: 'Heartbeat sendLogs Action Test Message'
                          attributes:
                            foo: bar
                        - message: 'HeartBeat1234'
                          attributes:
                            foo: bar
                        - message: 'HeartBeat12345'
                          attributes:
                            foo: bar
                            colour: yellow
                        - message: 'HeartBeat12345678'
                      selectors:
                        - name: success
                          expression: ".success"
                  ```

                  **Résultat attendu :**

                  ```yaml
                  {
                    "success": true
                  }
                  ```

                  **Récupérer les logs :**

                  Une fois un workflow exécuté avec succès, vous pouvez récupérer le log associé en exécutant une requête sous le compte qui a exécuté le workflow:

                  ```sql
                  SELECT * FROM Log
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>
</CollapserGroup>

<CollapserGroup>
  <Collapser id="newrelic.ingest.sendMetrics" title="Envoyer des métriques à New Relic">
    <Tabs>
      <TabsBar>
        <TabsBarItem id="newrelic-ingest-sendmetricsinputs">
          Entrées
        </TabsBarItem>

        <TabsBarItem id="newrelic-ingest-sendmetricsoutputs">
          Sorties
        </TabsBarItem>

        <TabsBarItem id="newrelic-ingest-sendmetricsexample">
          Exemple
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="newrelic-ingest-sendmetricsinputs">
          <table>
            <thead>
              <tr>
                <th>
                  Champ de saisie
                </th>

                <th>
                  optionnalité
                </th>

                <th>
                  Type
                </th>

                <th>
                  Exemple
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **metrics**
                </td>

                <td>
                  Requis
                </td>

                <td>
                  List
                </td>

                <td>
                  ```yaml
                  [ { "name": "service.errors.all", "type": "count", "value": 9, "attributes": { "service.response.statuscode": "400" } }, 

                  { "name": "service.errors.all", "type": "gauge", "value": 4, "attributes": { "service.response.statuscode": "500" } }, 

                  { "name": "service.response.duration", "type": "summary", "value": { "count": 5, "sum": 0.004382655, "min": 0.0005093, "max": 0.001708826 }, "attributes": { "service.response.statuscode": "200" } } ]
                  ```
                </td>
              </tr>

              <tr>
                <td>
                  **attributes**
                </td>

                <td>
                  Facultatif
                </td>

                <td>
                  Carte
                </td>

                <td>
                  ```yaml
                  { "timestamp": 1531414060739, "interval.ms": 10000, "attributes": { "app.name": "foo", "host.name": "dev.server.com" } }
                  ```
                </td>
              </tr>

              <tr>
                <td>
                  **clé de licence**
                </td>

                <td>
                  Facultatif
                </td>

                <td>
                  Chaîne
                </td>

                <td>
                  La **Clé de licence du compte New Relic** (obligatoire) spécifie le compte cible pour vos événements. Si elle n&apos;est pas fournie, le système utilise la clé de licence par défaut du compte exécutant le workflow.

                  [En savoir plus sur nos clés API](/docs/apis/intro-apis/new-relic-api-keys/#license-key) pour créer et gérer votre **clé de licence de compte New Relic**.

                  `"{{ .secrets.secretName }}"`, où `secretName` est la clé sous laquelle la clé de licence est stockée.
                </td>
              </tr>

              <tr>
                <td>
                  **sélecteurs**
                </td>

                <td>
                  Facultatif
                </td>

                <td>
                  List
                </td>

                <td>
                  ```yaml
                  [{"name": "error", "expression": ".errorMessage"}]
                  ```
                </td>
              </tr>
            </tbody>
          </table>

          **Paires clé-valeur requises dans le** `metrics`

          Chaque point de données de métrique dans la liste `metrics` utilise la structure clé-valeur suivante :

          <table>
            <thead>
              <tr>
                <th>
                  Attribut
                </th>

                <th>
                  Type
                </th>

                <th>
                  optionnalité
                </th>

                <th>
                  Description
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **name**
                </td>

                <td>
                  Chaîne
                </td>

                <td>
                  Requis
                </td>

                <td>
                  Le nom de la métrique. La valeur doit comporter moins de 255 caractères.
                </td>
              </tr>

              <tr>
                <td>
                  **valeur**
                </td>

                <td>
                  Nombre ou Carte
                </td>

                <td>
                  Requis
                </td>

                <td>
                  La valeur varie en fonction du 

                  [type de métrique](/docs/data-apis/understand-data/metric-data/metric-data-type/)

                  . Pour 

                  `gauge`

                   et 

                  `count`

                  , la valeur doit être un seul nombre. Pour 

                  `summary`

                  , la valeur doit être une carte avec des paires clé-valeur spécifiant le compte, la somme, le min et le max.
                </td>
              </tr>

              <tr>
                <td>
                  **horodatage**
                </td>

                <td>
                  Long
                </td>

                <td>
                  Facultatif
                </td>

                <td>
                  L&apos;heure de début de la métrique en 

                  [temps Unix](https://currentmillis.com/)

                  . La valeur par défaut utilise le fuseau horaire UTC. Ce champ prend également en charge les secondes, les microsecondes et les nanosecondes. Cependant, les données seront converties en millisecondes pour le stockage et l&apos;interrogation. Les métriques sont supprimées si elles ont un horodatage de plus de 48 heures dans le passé ou de plus de 24 heures dans le futur par rapport à l&apos;heure à laquelle elles sont signalées.
                </td>
              </tr>

              <tr>
                <td>
                  **intervalle.ms**
                </td>

                <td>
                  Positif long
                </td>

                <td>
                  Obligatoire pour 

                  `count`

                   et 

                  `summary`

                   

                  [types de métriques](/docs/data-apis/understand-data/metric-data/metric-data-type/)

                  .
                </td>

                <td>
                  La durée de la fenêtre temporelle.
                </td>
              </tr>

              <tr>
                <td>
                  **type**
                </td>

                <td />

                <td>
                  Recommandé
                </td>

                <td>
                  Prend en charge uniquement 

                  `count`

                  , 

                  `gauge`

                  , 

                  `summary`

                  , voir 

                  [types de métriques pris en charge](/docs/data-apis/understand-data/metric-data/metric-data-type/)

                   pour plus d&apos;informations. Si vous ne spécifiez pas de type, la valeur par défaut sera 

                  `gauge`

                  .
                </td>
              </tr>

              <tr>
                <td>
                  **attributes**
                </td>

                <td>
                  Chaînes de caractères, nombres JSON ou booléens
                </td>

                <td>
                  Recommandé
                </td>

                <td>
                  Une carte des paires clé-valeur associées à cette métrique spécifique. Les valeurs peuvent être des chaînes de caractères, des nombres JSON ou des valeurs booléennes. Les clés sont sensibles à la casse et doivent comporter moins de 255 caractères.
                </td>
              </tr>
            </tbody>
          </table>

          <Callout variant="important">
            L&apos;API de métriques exige un `timestamp`. Dans l&apos;action, le `timestamp` est facultatif, et prend par défaut l&apos;heure actuelle s&apos;il n&apos;est pas fourni avant l&apos;ingestion des métriques.
          </Callout>

          **Partager l&apos;attribut sur plusieurs métriques avec** `common`

          Si vous souhaitez inclure un ensemble d&apos;attributs sur plusieurs métriques (et ne pas ajouter les mêmes attributs pour chaque métrique), vous pouvez utiliser le bloc `common`. Il s&apos;agit d&apos;une carte facultative qui spécifie les informations qui s&apos;appliquent à tous les points de données de métriques associés. Les valeurs de la section `common` seront remplacées si la même clé existe sur un point de données de métrique.

          Le bloc peut inclure :

          <table>
            <thead>
              <tr>
                <th>
                  Attribut
                </th>

                <th>
                  Type
                </th>

                <th>
                  optionnalité
                </th>

                <th>
                  Description
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **horodatage**
                </td>

                <td>
                  Long
                </td>

                <td />

                <td>
                  L&apos;heure de début de la métrique en 

                  [heure Unix](https://currentmillis.com/)

                  . La valeur par défaut est l&apos;heure actuelle dans le fuseau horaire UTC. Ce champ prend également en charge les secondes, les microsecondes et les nanosecondes. Cependant, les données seront converties en millisecondes pour le stockage et l&apos;interrogation ultérieure.
                </td>
              </tr>

              <tr>
                <td>
                  **intervalle.ms**
                </td>

                <td>
                  Positif long
                </td>

                <td>
                  Requis pour 

                  `count`

                   et 

                  `summary`
                </td>

                <td>
                  La durée de la fenêtre temporelle.
                </td>
              </tr>

              <tr>
                <td>
                  **attributes**
                </td>

                <td>
                  Chaînes de caractères, nombres JSON ou booléens
                </td>

                <td />

                <td>
                  Une carte des paires de valeurs clés associées à cette métrique spécifique. Les valeurs peuvent être des chaînes, des nombres JSON ou des booléens.
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="newrelic-ingest-sendmetricsoutputs">
          <table>
            <thead>
              <tr>
                <th>
                  Champ de sortie
                </th>

                <th>
                  Type
                </th>

                <th>
                  Exemple
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **requestId**
                </td>

                <td>
                  Chaîne
                </td>

                <td>
                  `13325ef9-0001-b193-510f-019ba20b0792`
                </td>
              </tr>

              <tr>
                <td>
                  **succès**
                </td>

                <td>
                  Booléen
                </td>

                <td>
                  `success: true | false`
                </td>
              </tr>

              <tr>
                <td>
                  **message d&apos;erreur**
                </td>

                <td>
                  Chaîne
                </td>

                <td>
                  `Failure reason as message.`
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="newrelic-ingest-sendmetricsexample">
          <table>
            <thead>
              <tr>
                <th>
                  Exemple de workflow
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  ```yaml
                    - name: sendMetrics
                      type: action
                      action: newrelic.ingest.sendMetrics
                      version: 1
                      inputs:
                        metrics:
                          - name: service.errors.all
                            type: count
                            value: 9
                            timestamp: 1531414060739
                            attributes:
                              service.response.statuscode: 400
                          - name: service.response.duration
                            type: guage
                            value: 4
                            timestamp: 1531414060733
                            attributes:
                              service.response.statuscode: 500
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>
</CollapserGroup>