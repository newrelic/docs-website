---
title: HTTP Post
tags:
  - workflow automation
  - workflow
  - workflow automation actions
  - HTTP actions
  - HTTP POST
metaDescription: A list of available http post in the actions catalog for workflow definitions
freshnessValidatedDate: never
translationType: machine
---

<Callout title="Aperçu">
  Nous travaillons toujours sur cette fonctionnalité, mais nous aimerions que vous l&apos;essayiez !

  Cette fonctionnalité est actuellement fournie dans le cadre d&apos;un programme d&apos;aperçu conformément à nos [politiques de pré-sortie](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy).
</Callout>

Cette page fournit une référence complète pour http post disponible dans le catalogue des actions d&apos;automatisation des workflows. Ces actions vous permettent d&apos;effectuer des opérations de requête http post.

## Prérequis

Avant d&apos;utiliser les actions HTTP dans l&apos;automatisation workflow, assurez-vous de disposer de :

* cible points de terminaison d&apos;API URLs.
* Toutes les informations d&apos;identification d&apos;authentification requises (clé API, jeton, etc.).
* Compréhension des formats de requête/réponse de l&apos;API.

<Callout variant="tip">
  Les actions HTTP prennent en charge la syntaxe secrète pour toute valeur d&apos;en-tête, ce qui vous permet de transmettre en toute sécurité des données sensibles telles que les clés API. Consultez [gestion des secrets](/docs/workflow-automation/limitations-and-faq/workflow-best-practices/#secure-credentials) pour plus d&apos;informations.
</Callout>

## En-têtes de requête automatiques [#automatic-headers]

Toutes les requêtes HTTP effectuées par Workflow Automation incluent automatiquement les en-têtes suivants :

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        En-tête
      </th>

      <th>
        Format
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `x-abuse-info`
      </td>

      <td>
        `Request sent by a New Relic WorkflowAutomation. {runId}`

        <br />

        où 

        `{runId}`

         est l&apos;ID d&apos;exécution du workflow
      </td>
    </tr>

    <tr>
      <td>
        `User-Agent`
      </td>

      <td>
        `NewRelic/WorkflowAutomation (region={region}; https://newrelic.com ; support@newrelic.com)`

        <br />

        où 

        `{region}`

         est la région New Relic
      </td>
    </tr>
  </tbody>
</table>

## Envoyer des données à un serveur [#http-post]

Effectue un appel HTTP POST pour envoyer des données à un point de terminaison d&apos;API.

<Callout variant="important">
  Si vous devez transmettre des données sensibles à une entrée, par exemple un en-tête de clé API, vous pouvez utiliser les valeurs stockées via la mutation NerdGraph [secretsManagementCreateSecret](https://onenr.io/0KQXX6BmdQa).

  **Exemple**

  ```yaml
    {
      "inputs": [
        {
          "key": "headers",
          "value": "{\"Api-Key\": \"${{ :secrets:NR_API_KEY }}\"}"
        }
      ]
    }
  ```
</Callout>

<Tabs>
  <TabsBar>
    <TabsBarItem id="httppostinputs">
      Entrées
    </TabsBarItem>

    <TabsBarItem id="httppostoutputs">
      Sorties
    </TabsBarItem>

    <TabsBarItem id="httppostexample">
      Exemple
    </TabsBarItem>
  </TabsBar>

  <TabsPages>
    <TabsPageItem id="httppostinputs">
      <table>
        <thead>
          <tr>
            <th>
              Champ de saisie
            </th>

            <th>
              optionnalité
            </th>

            <th>
              Type
            </th>

            <th>
              Description
            </th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>
              **url**
            </td>

            <td>
              Requis
            </td>

            <td>
              Chaîne
            </td>

            <td>
              L&apos;URL cible de la requête. Le dispositif doit être inclus : 

              `https://example.com`
            </td>
          </tr>

          <tr>
            <td>
              **urlParams**
            </td>

            <td>
              Facultatif
            </td>

            <td>
              Carte
            </td>

            <td>
              Les paramètres de requête à ajouter à l&apos;URL. Prend un objet JSON converti en chaîne de caractères.
            </td>
          </tr>

          <tr>
            <td>
              **en-têtes**
            </td>

            <td>
              Facultatif
            </td>

            <td>
              Carte
            </td>

            <td>
              Les en-têtes à ajouter à la requête. Prend un objet JSON converti en chaîne de caractères.
            </td>
          </tr>

          <tr>
            <td>
              **corps**
            </td>

            <td>
              Facultatif
            </td>

            <td>
              Chaîne
            </td>

            <td>
              Le corps de la requête.
            </td>
          </tr>

          <tr>
            <td>
              **sélecteurs**
            </td>

            <td>
              Facultatif
            </td>

            <td>
              List
            </td>

            <td>
              Les sélecteurs permettant d&apos;obtenir uniquement les paramètres spécifiés en sortie.
            </td>
          </tr>
        </tbody>
      </table>
    </TabsPageItem>

    <TabsPageItem id="httppostoutputs">
      <table>
        <thead>
          <tr>
            <th>
              Champ de sortie
            </th>

            <th>
              Type
            </th>

            <th>
              Description
            </th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>
              **corps de réponse**
            </td>

            <td>
              Chaîne
            </td>

            <td>
              Le corps de la réponse.
            </td>
          </tr>

          <tr>
            <td>
              **code d&apos;état**
            </td>

            <td>
              Int
            </td>

            <td>
              Le code d&apos;état de la réponse.
            </td>
          </tr>

          <tr>
            <td>
              **succès**
            </td>

            <td>
              Booléen
            </td>

            <td>
              Statut de la requête.
            </td>
          </tr>

          <tr>
            <td>
              **message d&apos;erreur**
            </td>

            <td>
              Chaîne
            </td>

            <td>
              Motif de l&apos;échec : message.
            </td>
          </tr>
        </tbody>
      </table>
    </TabsPageItem>

    <TabsPageItem id="httppostexample">
      <table>
        <thead>
          <tr>
            <th>
              définition du flux de travail
            </th>

            <th>
              Saisir
            </th>

            <th>
              Sortir
            </th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>
              ```yaml
                name: httpPostTest

                steps:
                  - name: query
                    type: action
                    action: http.post
                    version: 1
                    inputs:
                      url: ${{ .workflowInputs.url }}
                      urlParams: ${{ .workflowInputs.urlParams }}
                      headers: ${{ .workflowInputs.headers }}
                      body: ${{ .workflowInputs.body }}
                      selectors: ${{ .workflowInputs.selectors }}
              ```
            </td>

            <td>
              ```yaml
                {
                  "inputs": [
                    {
                      "key": "url",
                      "value": "https://example.com"
                    },
                    {
                      "key": "headers",
                      "value": "{\"Content-Type\":\"application/json\"}"
                    },
                    {
                      "key": "urlParams",
                      "value": "{\"foo\": \"bar\"}"
                    },
                    {
                      "key": "body",
                      "value": "{\"foo\": \"bar\"}"
                    },
                    {
                      "key": "selectors",
                      "value": "[{\"name\": \"responseBody\", \"expression\": \".responseBody\"}, {\"name\": \"statusCode\", \"expression\": \".statusCode\"}]"
                    }
                  ]
                }
              ```
            </td>

            <td>
              ```yaml
                Success case:
                  {
                    "success": true,
                    "responseBody": "",
                    "statusCode": 200
                  }

                Failure case:
                  {
                    "errorMessage": "An unexpected error failed to call http post endpoint.",
                    "success": false
                  }
              ```
            </td>
          </tr>
        </tbody>
      </table>
    </TabsPageItem>
  </TabsPages>
</Tabs>