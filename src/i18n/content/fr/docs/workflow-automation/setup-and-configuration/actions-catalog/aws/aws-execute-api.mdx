---
title: AWS Execute API
tags:
  - workflow automation
  - workflow
  - workflow automation actions
  - AWS actions
  - AWS Execute API
metaDescription: A list of available aws execute api in the actions catalog for workflow definitions
freshnessValidatedDate: never
translationType: machine
---

<Callout title="Aperçu">
  Nous travaillons toujours sur cette fonctionnalité, mais nous aimerions que vous l&apos;essayiez !

  Cette fonctionnalité est actuellement fournie dans le cadre d&apos;un programme d&apos;aperçu conformément à nos [politiques de pré-sortie](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy).
</Callout>

Cette page fournit une référence complète pour l&apos;exécution de l&apos;API AWS disponible dans le catalogue des actions d&apos;automatisation des workflows. Ces actions vous permettent d&apos;exécuter n&apos;importe quelle opération d&apos;API AWS.

## Prérequis

Avant d&apos;utiliser AWS Actions dans l&apos;automatisation workflow, assurez-vous de disposer des éléments suivants :

* Un compte AWS disposant des autorisations appropriées.
* Informations d&apos;identification AWS configurées (informations d&apos;identification de l&apos;utilisateur IAM, ARN du rôle IAM ou informations d&apos;identification de session).
* Les autorisations IAM nécessaires pour les services AWS spécifiques que vous prévoyez d&apos;utiliser.

Consultez [la section Configurer les informations d&apos;identification AWS](/docs/workflow-automation/setup-and-configuration/set-up-aws-credentials/) pour savoir comment créer un utilisateur IAM et des rôles IAM, et comment configurer les informations d&apos;identification AWS statiques et de session pour l&apos;intégration avec les actions AWS d&apos;automatisation workflow.

## configurationde la sécurité et d&apos;IAM

Pour utiliser cette action, vous devez configurer vos identifiants AWS. Consultez [la section « Configurer les informations d&apos;identification AWS »](/docs/workflow-automation/setup-and-configuration/set-up-aws-credentials/) pour obtenir des instructions détaillées sur la création d&apos;un rôle IAM ou d&apos;un utilisateur IAM.

<Callout variant="important">
  **Bonnes pratiques de sécurité :** lors de la définition des politiques IAM pour cette action, utilisez toujours le principe du moindre privilège. N’accordez que les actions spécifiques de l’API AWS requises par votre workflow et limitez les autorisations à des ressources spécifiques plutôt que d’utiliser des caractères génériques.
</Callout>

## Autorisations IAM requises

Les autorisations dont vous avez besoin dépendent des services AWS et des API que votre workflow appelle. Utilisez les exemples ci-dessous comme modèles pour créer des politiques de moindre privilège.

**Exemple 1 : Envoyer des messages à une file d&apos;attente SQS spécifique**

```json
  {
    "Version": "2012-10-17",
    "Statement": [
      {
        "Effect": "Allow",
        "Action": "sqs:SendMessage",
        "Resource": "arn:aws:sqs:us-west-2:<your-aws-account-id>:<your-queue-name>"
      }
    ]
  }
```

**Exemples 2 : Interroger une table DynamoDB spécifique**

```json
  {
    "Version": "2012-10-17",
    "Statement": [
      {
        "Effect": "Allow",
        "Action": "dynamodb:Query",
        "Resource": "arn:aws:dynamodb:us-west-2:<your-aws-account-id>:table/<your-table-name>"
      }
    ]
  }
```

**Exemple 3 : Plusieurs services avec des autorisations spécifiques**

```json
  {
    "Version": "2012-10-17",
    "Statement": [
      {
        "Effect": "Allow",
        "Action": "sqs:SendMessage",
        "Resource": "arn:aws:sqs:us-west-2:<your-aws-account-id>:<your-queue-name>"
      },
      {
        "Effect": "Allow",
        "Action": "dynamodb:Query",
        "Resource": "arn:aws:dynamodb:us-west-2:<your-aws-account-id>:table/<your-table-name>"
      }
    ]
  }
```

<Callout variant="important">
  * Remplacez `<your-aws-account-id>`, `<your-queue-name>` et `<your-table-name>` par vos valeurs réelles.
  * Trouvez les services disponibles et les API AWS dans la [documentation Boto3](https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/index.html)
  * Pour des modèles de stratégie IAM plus complexes, consultez la [documentation AWS IAM.](https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html)
</Callout>

Pour plus d&apos;informations sur le fonctionnement de cette action, consultez la [documentation AWS système Manager executeAwsApi](https://docs.aws.amazon.com/systems-manager/latest/userguide/automation-action-executeAwsApi.html).

## Appeler une API AWS [#aws-execute-api]

Exécutez n&apos;importe quelle opération d&apos;API AWS pour un service spécifié. Il prend en charge la fourniture d&apos;informations d&apos;identification AWS, de la région, du nom du service, du nom de l&apos;API et de paramètres facultatifs. L&apos;action peut renvoyer des sorties telles que l&apos;état de réussite, les données de réponse et les messages d&apos;erreur, ce qui la rend polyvalente pour interagir avec les services AWS par programmation.

<Tabs>
  <TabsBar>
    <TabsBarItem id="awsexecuteinputs">
      Entrées
    </TabsBarItem>

    <TabsBarItem id="awsexecuteoutputs">
      Sorties
    </TabsBarItem>

    <TabsBarItem id="awsexecuteexamples">
      Exemple
    </TabsBarItem>
  </TabsBar>

  <TabsPages>
    <TabsPageItem id="awsexecuteinputs">
      <table>
        <thead>
          <tr>
            <th>
              Champ de saisie
            </th>

            <th>
              optionnalité
            </th>

            <th>
              Type
            </th>

            <th>
              Exemple
            </th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>
              **awsRoleArn**
            </td>

            <td>
              Facultatif
            </td>

            <td>
              Chaîne
            </td>

            <td>
              ```yaml
              arn:aws:iam::123456789012:role/my-workflow-role
              ```
            </td>
          </tr>

          <tr>
            <td>
              **awsAccessKeyId**
            </td>

            <td>
              Facultatif
            </td>

            <td>
              Chaîne
            </td>

            <td>
              ```yaml
              ${{ :secrets:<awsAccessKeyId> }}
              ```
            </td>
          </tr>

          <tr>
            <td>
              **awsSecretAccessKey**
            </td>

            <td>
              Facultatif
            </td>

            <td>
              Chaîne
            </td>

            <td>
              ```yaml
              ${{ :secrets:<awsSecretAccessKey> }}
              ```
            </td>
          </tr>

          <tr>
            <td>
              **awsSessionToken**
            </td>

            <td>
              Facultatif
            </td>

            <td>
              Chaîne
            </td>

            <td>
              ```yaml
              ${{ :secrets:<awsSessionToken> }}
              ```
            </td>
          </tr>

          <tr>
            <td>
              **région**
            </td>

            <td>
              Requis
            </td>

            <td>
              Chaîne
            </td>

            <td>
              ```yaml
              region: "us-east-2"
              ```
            </td>
          </tr>

          <tr>
            <td>
              **service**
            </td>

            <td>
              Requis
            </td>

            <td>
              Chaîne
            </td>

            <td>
              `service: "sqs"`

              [Services AWS disponibles](https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/index.html)
            </td>
          </tr>

          <tr>
            <td>
              **API**
            </td>

            <td>
              Requis
            </td>

            <td>
              Chaîne
            </td>

            <td>
              ```yaml
              api: "create_queue"
              ```
            </td>
          </tr>

          <tr>
            <td>
              **paramètres**
            </td>

            <td>
              Requis
            </td>

            <td>
              Carte
            </td>

            <td>
              ```yaml
              parameters: {
                  "QueueName": "dks-testing-queue",
                  "Attributes": {
                      "DelaySeconds": "0",
                      "MessageRetentionPeriod": "86400"
                  }
              }
              ```
            </td>
          </tr>

          <tr>
            <td>
              **sélecteurs**
            </td>

            <td>
              Facultatif
            </td>

            <td>
              List
            </td>

            <td>
              ```yaml
              [{\"name\": \"response\", \"expression\": \".response\"}, {\"name\": \"success\", \"expression\": \".success\"}, {\"name\": \"errorMessage\", \"expression\": \".errorMessage\"}]
              ```
            </td>
          </tr>
        </tbody>
      </table>
    </TabsPageItem>

    <TabsPageItem id="awsexecuteoutputs">
      <table>
        <thead>
          <tr>
            <th>
              Champ de sortie
            </th>

            <th>
              Type
            </th>

            <th>
              Exemple
            </th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>
              **response**
            </td>

            <td>
              Objet
            </td>

            <td>
              `{"response":<aws api reponse>}`

               \- chaque service et API ont une réponse différente, par exemple, voir la 

              [réponse de la requête DynamoDB](https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/dynamodb/client/query.html)

              .
            </td>
          </tr>

          <tr>
            <td>
              **succès**
            </td>

            <td>
              Booléen
            </td>

            <td>
              `success: true | false`
            </td>
          </tr>

          <tr>
            <td>
              **message d&apos;erreur**
            </td>

            <td>
              Chaîne
            </td>

            <td>
              `errorMessage: "User does not have permission to query DynamoDB"`
            </td>
          </tr>
        </tbody>
      </table>

      <Callout variant="important">
        * Au moins une des informations d&apos;identification AWS (courte, longue, rôle) doit être fournie, le rôle étant prioritaire sur les autres.
        * Dans l&apos;entrée d&apos;action, si `awsAccessKeyId` et `awsSecretAccessKey` doivent être fournis, assurez-vous qu&apos;il s&apos;agit d&apos;informations d&apos;identification statiques d&apos;un utilisateur IAM.
        * Si des informations d&apos;identification de session doivent être utilisées, `awsAccessKeyId`, `awsSecretAccessKey` et `awsSessionToken` doivent être transmises à l&apos;entrée d&apos;action.
        * Reportez-vous à [Informations d&apos;identification AWS](/docs/workflow-automation/setup-and-configuration/set-up-aws-credentials/) pour obtenir des instructions.
        * Utilisez des sélecteurs pour obtenir uniquement les paramètres spécifiés en sortie.
      </Callout>
    </TabsPageItem>

    <TabsPageItem id="awsexecuteexamples">
      ### Exemple : Interroger une table DynamoDB

      Cet exemple montre comment interroger une table DynamoDB en utilisant l&apos;action `aws.execute.api` avec des informations d&apos;identification de session.

      ```yaml
      name: aws_execute_api_dynamoDB_dks

      workflowInputs:
        key:
          type: String
          defaultValue: "${{ :secrets:<aws_access_key_id> }}"
        access:
          type: String
          defaultValue: "${{ :secrets:<aws_secret_access_key? }}"
        token:
          type: String
          defaultValue: "${{ :secrets:<aws_session_token> }}"
        region:
          type: String
          defaultValue: us-east-2
        tableName:
          type: String
          defaultValue: workflow-definitions-dev
        scopedName:
          type: String
        version:
          type: String
          defaultValue: "1"

      steps:
        - name: executeApi
          type: action
          action: aws.execute.api
          version: 1
          inputs:
            awsAccessKeyId: ${{ .workflowInputs.key }}
            awsSecretAccessKey: ${{ .workflowInputs.access }}
            awsSessionToken: ${{ .workflowInputs.token }}
            region: ${{ .workflowInputs.region }}
            service: dynamodb
            api: query
            parameters:
              TableName: ${{ .workflowInputs.tableName }}
              KeyConditionExpression: "ScopedName = :scopedNameValue AND Version = :VersionValue"
              ExpressionAttributeValues:
                ":scopedNameValue":
                  S: ${{ .workflowInputs.scopedName }}
                ":VersionValue":
                  N: ${{ .workflowInputs.version }}
            selectors:
              - name: response
                expression: '.response'
              - name: errorMessage
                expression: '.errorMessage'
              - name: success
                expression: '.success'
              
            
        - name: wait
          type: wait
          seconds: 2
          
        - name: logOutput
          type: action
          action: newrelic.instrumentation.log
          version: 1
          inputs:
            message: 'The execute API message output is:${{ .steps.executeApi.outputs.response.Item }}'
            licenseKey: '${{ :secrets:STAGING_NEW_RELIC_LICENSE_KEY }}'
        - name: logOutput1
          type: action
          action: newrelic.instrumentation.log
          version: 1
          inputs:
            message: 'does execute API have any error :${{ .steps.executeApi.outputs.errorMessage }}'
            licenseKey: '${{ :secrets:STAGING_NEW_RELIC_LICENSE_KEY }}'
        - name: logOutput2
          type: action
          action: newrelic.instrumentation.log
          version: 1
          inputs:
            message: 'is execute successful :${{ .steps.executeApi.outputs.success }}'
            licenseKey: '${{ :secrets:STAGING_NEW_RELIC_LICENSE_KEY }}'
      ```
    </TabsPageItem>
  </TabsPages>
</Tabs>

Pour plus d&apos;exemples de workflow utilisant AWS Execute API, consultez la page [Exemples de workflow](/docs/workflow-automation/workflow-examples/workflow-examples).