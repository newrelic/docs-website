---
title: Actions New Relic NRDB
tags:
  - workflow automation
  - workflow
  - workflow automation actions
  - New Relic actions
  - New Relic NRDB actions
metaDescription: A list of available new relic nrdb actions in the actions catalog for workflow definitions
freshnessValidatedDate: never
translationType: machine
---

<Callout title="Aperçu">
  Nous travaillons toujours sur cette fonctionnalité, mais nous aimerions que vous l&apos;essayiez !

  Cette fonctionnalité est actuellement fournie dans le cadre d&apos;un programme d&apos;aperçu conformément à nos [politiques de pré-sortie](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy).
</Callout>

Cette page fournit une référence complète des actions new relic nrdb disponibles dans le catalogue des actions d&apos;automatisation des workflows. Ces actions vous permettent d&apos;interroger la base de données New Relic.

## Prérequis

Avant d&apos;utiliser les actions New Relic dans l&apos;automatisation workflow, assurez-vous de disposer de :

* Un compte New Relic disposant des autorisations appropriées.
* Une clé de licence New Relic (si vous envoyez des données vers un compte différent).
* Les autorisations nécessaires pour les services New Relic spécifiques que vous prévoyez d&apos;utiliser.

Consultez [la clé de licence](/docs/apis/intro-apis/new-relic-api-keys/#license-key) pour obtenir des informations sur la façon de créer et de gérer votre compte New Relic.

<CollapserGroup>
  <Collapser id="newrelic.nrdb.query" title="Interroger les comptes croisés NRQL">
    Exécute une requête NRQL inter-comptes via l&apos;API NerdGraph.

    <Tabs>
      <TabsBar>
        <TabsBarItem id="nrdbqueryinputs">
          Entrées
        </TabsBarItem>

        <TabsBarItem id="nrdbqueryoutputs">
          Sorties
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="nrdbqueryinputs">
          <table>
            <thead>
              <tr>
                <th>
                  Saisir
                </th>

                <th>
                  optionnalité
                </th>

                <th>
                  Type
                </th>

                <th>
                  Description
                </th>

                <th>
                  Exemple
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **requête**
                </td>

                <td>
                  Requis
                </td>

                <td>
                  Chaîne
                </td>

                <td>
                  L&apos;instruction de requête NRQL.
                </td>

                <td />
              </tr>

              <tr>
                <td>
                  **identifiants de compte**
                </td>

                <td>
                  Facultatif
                </td>

                <td>
                  Liste d&apos;entiers
                </td>

                <td>
                  **ID de compte New Relic**

                   spécifie les comptes cibles pour l&apos;exécution de la requête. S&apos;il n&apos;est pas fourni, la requête s&apos;exécute par rapport au compte d&apos;exécution du workflow.
                </td>

                <td />
              </tr>

              <tr>
                <td>
                  **sélecteurs**
                </td>

                <td>
                  Facultatif
                </td>

                <td>
                  List
                </td>

                <td>
                  Les sélecteurs permettant d&apos;obtenir uniquement les paramètres spécifiés en sortie.
                </td>

                <td>
                  ```yaml
                      steps:
                    - name: queryForLog
                      type: action
                      action: newrelic.nrdb.query
                      version: 1
                      inputs:
                        accountIds: [12345]
                        query: FROM Log SELECT * WHERE message LIKE 'DEMO%'
                        selectors:
                          - name: resultsAsString
                            expression: '.results | tostring'
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="nrdbqueryoutputs">
          <table>
            <thead>
              <tr>
                <th>
                  Sortir
                </th>

                <th>
                  Type
                </th>

                <th>
                  Description
                </th>

                <th>
                  Exemple
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **résultats**
                </td>

                <td />

                <td>
                  Un tableau d&apos;objets contenant les résultats de la requête. Consultez 

                  [Propriété Expressions](/docs/workflow-automation/workflow-automation-apis/definition-schema/#expression-properties)

                   pour plus d&apos;informations.
                </td>

                <td />
              </tr>

              <tr>
                <td>
                  **succès**
                </td>

                <td>
                  Booléen
                </td>

                <td>
                  Statut de la requête.
                </td>

                <td />
              </tr>

              <tr>
                <td>
                  **message d&apos;erreur**
                </td>

                <td>
                  Chaîne
                </td>

                <td>
                  Motif de l&apos;échec : message.
                </td>

                <td>
                  ```yaml
                        {
                      "success": true
                      results=[
                        { message=[INFO] - Workflow: test has ended, messageId=39af98 }, 
                        { message=[INFO] - Workflow: test - Step query has started, messageId=649c612 },
                        ...
                      ]
                    }
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>
</CollapserGroup>

<CollapserGroup>
  <Collapser id="newrelic.nrdb.query" title="Interroger NRDB">
    Exécute une requête NRQL inter-comptes via l&apos;API NerdGraph.

    <Tabs>
      <TabsBar>
        <TabsBarItem id="newrelic-nrdb-queryinputs">
          Entrées
        </TabsBarItem>

        <TabsBarItem id="newrelic-nrdb-queryoutputs">
          Sorties
        </TabsBarItem>

        <TabsBarItem id="newrelic-nrdb-queryexample">
          Exemple
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="newrelic-nrdb-queryinputs">
          <table>
            <thead>
              <tr>
                <th>
                  Champ de saisie
                </th>

                <th>
                  optionnalité
                </th>

                <th>
                  Type
                </th>

                <th>
                  Description
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **requête**
                </td>

                <td>
                  Requis
                </td>

                <td>
                  Chaîne
                </td>

                <td>
                  L&apos;instruction de requête NRQL.
                </td>
              </tr>

              <tr>
                <td>
                  **identifiants de compte**
                </td>

                <td>
                  Facultatif
                </td>

                <td>
                  Liste d&apos;entiers
                </td>

                <td>
                  L&apos;entrée 

                  **New Relic Account IDs**

                   accepte une liste d&apos;ID de compte qui spécifient les comptes sur lesquels la requête sera exécutée. Si cette entrée n&apos;est pas fournie, la requête utilise par défaut le compte d&apos;exécution du workflow.
                </td>
              </tr>

              <tr>
                <td>
                  **format**
                </td>

                <td>
                  Facultatif
                </td>

                <td>
                  Énumération
                </td>

                <td>
                  Pour spécifier le type des résultats, accepte uniquement 

                  `JSON`

                   ou 

                  `CSV`

                  . Par défaut 

                  `JSON`

                  .
                </td>
              </tr>

              <tr>
                <td>
                  **sélecteurs**
                </td>

                <td>
                  Facultatif
                </td>

                <td>
                  List
                </td>

                <td>
                  Les sélecteurs permettant d&apos;obtenir uniquement les paramètres spécifiés en sortie.
                </td>
              </tr>
            </tbody>
          </table>

          ### Exemple

          ```yaml
          steps:
            - name: queryForLog
              type: action
              action: newrelic.nrdb.query
              version: 1
              inputs:
                accountIds: [12345]
                query: FROM Log SELECT * WHERE message LIKE 'DEMO%'
                selectors:
                  - name: resultsAsString
                    expression: '.results | tostring'
          ```
        </TabsPageItem>

        <TabsPageItem id="newrelic-nrdb-queryoutputs">
          <table>
            <thead>
              <tr>
                <th>
                  Champ de sortie
                </th>

                <th>
                  Type
                </th>

                <th>
                  Description
                </th>

                <th>
                  Exemple
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  **résultats**
                </td>

                <td />

                <td>
                  Un tableau d&apos;objets contenant les résultats de la requête. Consultez 

                  [Propriété Expressions](/docs/workflow-automation/workflow-automation-apis/definition-schema/#expression-properties)

                   pour plus d&apos;informations.
                </td>

                <td />
              </tr>

              <tr>
                <td>
                  **succès**
                </td>

                <td>
                  Booléen
                </td>

                <td>
                  Statut de la requête.
                </td>

                <td />
              </tr>

              <tr>
                <td>
                  **message d&apos;erreur**
                </td>

                <td>
                  Chaîne
                </td>

                <td>
                  Motif de l&apos;échec : message.
                </td>

                <td>
                  ```yaml
                  {
                    "success": true
                    results=[
                      { message=[INFO] - Workflow: test has ended, messageId=39af98 }, 
                      { message=[INFO] - Workflow: test - Step query has started, messageId=649c612 },
                      ...
                    ]
                  }
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>

        <TabsPageItem id="newrelic-nrdb-queryexample">
          <table>
            <thead>
              <tr>
                <th>
                  Exemple de workflow
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  ```yaml
                    - name: sendMetrics
                      type: action
                      action: newrelic.ingest.sendMetrics
                      version: 1
                      inputs:
                        metrics:
                          - name: service.errors.all
                            type: count
                            value: 9
                            timestamp: 1531414060739
                            attributes:
                              service.response.statuscode: 400
                          - name: service.response.duration
                            type: guage
                            value: 4
                            timestamp: 1531414060733
                            attributes:
                              service.response.statuscode: 500
                  ```
                </td>
              </tr>
            </tbody>
          </table>
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Collapser>
</CollapserGroup>