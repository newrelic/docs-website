---
title: Envoyer une notification depuis le workflow
tags:
  - workflow automation
  - workflow
  - notifications
  - slack
  - pagerduty
metaDescription: 'Configure workflows to send notifications via Slack, PagerDuty, email, or webhooks when automation tasks complete or fail.'
freshnessValidatedDate: never
translationType: machine
---

<Callout title="Aperçu">
  Nous travaillons toujours sur cette fonctionnalité, mais nous aimerions que vous l&apos;essayiez !

  Cette fonctionnalité est actuellement fournie dans le cadre d&apos;un programme d&apos;aperçu conformément à nos [politiques de pré-sortie](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy).
</Callout>

Cette page décrit deux façons dont l&apos;automatisation des workflows s&apos;intègre aux notifications :

1. **Envoyer des notifications à partir des workflows**: utilisez les actions Slack, PagerDuty, e-mail ou webhook dans workflows pour informer les équipes lorsque les workflows sont terminés, échouent ou nécessitent une approbation.
2. **Déclencher des workflows à partir d&apos;alertes**: configurez l&apos;automatisation des workflows comme destination dans les alertes New Relic pour démarrer automatiquement les workflows lorsque les conditions d&apos;alerte sont dépassées.

<Callout variant="important">
  **Deux concepts différents :**

  * **Notifications sortantes**: workflow envoie des messages à Slack/PagerDuty à l&apos;aide d&apos;actions telles que `slack.chat.postMessage`
  * **Déclencheurs entrants**: les alertes New Relic déclenchent l&apos;exécution de workflow, en transmettant `issueId` automatiquement
</Callout>

## Envoyer une notification depuis le workflow [#send-from-workflows]

Utilisez ces canaux de notification pour alerter votre équipe depuis workflows. Sélectionnez le bon canal pour votre cas d&apos;utilisation :

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        **Canal**
      </th>

      <th>
        **Idéal pour**
      </th>

      <th>
        **Complexité de la configuration**
      </th>

      <th>
        **Caractéristiques**
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        **Mou**
      </td>

      <td>
        Collaboration d&apos;équipe, approbations
      </td>

      <td>
        Facile - nécessite un jeton de bot
      </td>

      <td>
        Messages enrichis, réactions, fils de discussion
      </td>
    </tr>

    <tr>
      <td>
        **PagerDuty**
      </td>

      <td>
        Gestion des incidents, astreinte
      </td>

      <td>
        Facile – nécessite une clé API
      </td>

      <td>
        Politiques d&apos;escalade, suivi incident
      </td>
    </tr>

    <tr>
      <td>
        **E-mail**
      </td>

      <td>
        Notification officielle, rapports
      </td>

      <td>
        Facile - nécessite la configuration de la destination
      </td>

      <td>
        Pièces jointes, formatage HTML, résultats de requête
      </td>
    </tr>

    <tr>
      <td>
        **Webhooks**
      </td>

      <td>
        intégration personnalisée
      </td>

      <td>
        Moyen - nécessite un point de terminaison
      </td>

      <td>
        Charge flexible, tout système
      </td>
    </tr>
  </tbody>
</table>

## Avant de commencer

Avant de configurer les notifications, assurez-vous d&apos;avoir :

* Un workflow créé dans votre compte (à partir d&apos; [un modèle](/docs/workflow-automation/create-a-workflow-automation/use-a-template) ou [personnalisé](/docs/workflow-automation/create-a-workflow-automation/create-your-own)).
* Identifiants pour votre canal de notification (jeton du bot Slack, clé API PagerDuty, etc.).
* Identifiants stockés dans le [gestionnaire de secrets](/docs/workflow-automation/limitations-and-faq/workflow-best-practices/#secure-credentials).

<Callout variant="tip">
  **Pour l&apos;envoi de notifications à partir des workflows**: utilisez le catalogue d&apos;actions pour ajouter des actions de notification directement dans les étapes de votre workflow :

  * **Slack**: Utilisez [`slack.chat.postMessage`](/docs/workflow-automation/setup-and-configuration/actions-catalog/slack/slack-chat) pour l&apos;intégration directe de Slack
  * **PagerDuty**: utilisez les [actions PagerDuty](/docs/workflow-automation/setup-and-configuration/actions-catalog/pagerduty/pagerduty-incident) pour la gestion des incidents
  * **E-mail**: Utilisez [`newrelic.notification.sendEmail`](/docs/workflow-automation/setup-and-configuration/actions-catalog/newrelic/newrelic-notification) après avoir configuré les destinations de messagerie dans [Alerts &gt; Destinations](/docs/alerts/get-notified/destinations/)
</Callout>

## Déclencher des workflows à partir d&apos;alertes [#trigger-from-alerts]

Configurez l&apos;automatisation des workflows comme destination dans les alertes New Relic pour démarrer automatiquement les workflows lorsque les conditions d&apos;alerte sont violées. Lorsqu&apos;ils sont déclenchés par une alerte, les workflows reçoivent automatiquement `issueId` et `accountId` en entrée.

1. Accédez à **[one.newrelic.com &gt; All capabilities](https://one.newrelic.com/all-capabilities) &gt; Alerts &gt; Destinations** et sélectionnez **Workflow Automation**.

2. Pour configurer le **Workflow Automation**, saisissez les informations requises, telles que le **nom de la destination Workflow Automation** (un nom unique pour le \*\*Workflow Automation\*\*) et la **clé API**.

3. Cliquez sur **Save destination**.

   <img title="How to add a destination" alt="Image of the Workflow Automation destination page." src="/images/add-a-destination.webp" />

## Créer un workflow de notification d&apos;alerte [#create-the-notification-workflow]

Après avoir configuré **Workflow Automation** comme destination, créez un workflow de notification d&apos;alerte pour définir quelles alertes déclenchent workflows.

<Callout variant="important">
  Les étapes ci-dessous concernent la configuration des **workflows de notification d&apos;alerte** (qui font partie de New Relic Alerts), et non de l&apos;**automatisation des workflows**. Les workflows de notification d&apos;alerte acheminent les problèmes vers des destinations, y compris la destination **Automatisation des workflows** que vous avez configurée ci-dessus. Pour une documentation complète sur les workflows d&apos;alerte, consultez [workflows d&apos;incident](/docs/alerts/get-notified/incident-workflows).
</Callout>

1. Accédez à **Alerts &gt; Notification Workflows**, puis sélectionnez **+ Add a workflow**.

2. Pour configurer votre workflow notification, sur la page Configurer votre workflow notification, fournissez les informations requises :

   * Saisissez un nom unique que vous reconnaîtrez.
   * Sélectionnez l&apos;attribut **Tag**, **Policy** et **Priority** dans leurs listes respectives dans l&apos;option de filtre **Basic** pour recevoir une notification concernant un incident, ou optez pour l&apos;option de filtre **Advanced** pour choisir **Attributes**, **Operators** et **Values** pour une notification incident plus détaillée.
   * Cliquez sur **Additional settings** pour enrichir vos données en créant [une requêteNRQL ](/docs/alerts/get-notified/incident-workflows/#enrichments)afin de collecter des données connexes provenant de l’ensemble de votre plateforme New Relic. Pour des exemples d&apos;enrichissement, voir [enrichissement des données de workflow](/docs/alerts/get-notified/custom-variables-incident-workflows/#enrichment-examples).

3. Pour spécifier les destinations de notification, dans la section **Notify**, choisissez la destination **Workflow Automation** que vous avez créée à l&apos;étape précédente.

4. (Facultatif) Vous pouvez également ajouter d&apos;autres destinations comme [Slack](/docs/workflow-automation/setup-and-configuration/actions-catalog/slack/slack-chat/#configure-slack-integration) pour recevoir des notifications en plus du déclenchement du workflow :

   1. Sélectionnez **Slack destination** dans la liste déroulante.
   2. Sélectionnez la **Channel** dans la liste déroulante et cochez la case **Receive notification updates on the channel**.
   3. Vous pouvez ajouter un message personnalisé dans la section **Custom Details**.

   <Callout variant="tip">
     Nous vous recommandons d&apos;envoyer une notification de test via **Send test notification**.
   </Callout>

   4. Sélectionnez **Save message**.

5. Sélectionnez **Activate workflow**.

   <img title="How to configure a workflow" alt="Image of how to configure a workflow" src="/images/configure-workflow.gif" />

## Quelles données sont transmises à Workflow Automation [#data-passed]

Lorsqu&apos;une alerte déclenche votre Workflow Automation :

* **`issueId`**: transmis automatiquement à workflow. Votre workflow doit l&apos;accepter comme paramètre d&apos;entrée. Comme indiqué dans [Créer votre propre workflow](/docs/workflow-automation/create-a-workflow-automation/create-your-own), le `issueId` est « fourni automatiquement lorsque le workflow s&apos;exécute à partir d&apos;une alerte ».
* **`accountId`**: votre ID de compte New Relic. Votre workflow doit l&apos;accepter comme paramètre d&apos;entrée obligatoire.

Votre définition d&apos;automatisation des workflows doit déclarer ces entrées. Par exemple :

```yaml
  workflowInputs:
    accountId:
      type: Int
    issueId:
      type: String
```

<Callout variant="important">
  Les entrées sans `defaultValue` sont obligatoires et doivent être fournies lorsque le workflow est déclenché. Vous pouvez ensuite utiliser `issueId` pour interroger les détails de l&apos;alerte à l&apos;aide de l&apos;API NerdGraph dans workflow.
</Callout>

## Et ensuite ?

* **[Catalogue des actions](/docs/workflow-automation/setup-and-configuration/actions-catalog/actions-catalog)** : Consultez toutes les actions AWS, New Relic et d’intégration disponibles.
* **[Utilisez un modèle](/docs/workflow-automation/create-a-workflow-automation/use-a-template)**: déployez un workflow préconfiguré pour les scénarios courants.
* **[Créez votre propre workflow](/docs/workflow-automation/create-a-workflow-automation/create-your-own)**: Concevez un workflow personnalisé à partir de zéro.