---
title: Nouveau monitoring de Browser SPA
metaDescription: The new browser SPA monitoring capability is a streamlined way to monitor your users' experience and app performance.
freshnessValidatedDate: '2024-09-04T00:00:00.000Z'
translationType: machine
---

<Callout variant="important">
  Nous déployons cette fonctionnalité par phases à l&apos;aide d&apos;un indicateur de fonctionnalité pour remplacer l&apos;expérience SPA du navigateur existante par défaut. Il n&apos;y aura pas d&apos;option permettant de choisir la nouvelle version SPA que vous recevrez ; vous recevrez toujours automatiquement la dernière version.
</Callout>

## SPA (sortie dans l&apos;agent v1.298.0)

La prise en compte des tâches longues a été introduite pour remplacer le suivi de rappel étendu utilisé dans les anciennes applications à page unique (SPA). Il sert également à remplir les attributs `jsDuration`, `timeToSettle` et `timeToLastCallbackEnd` des événements AjaxRequest associés à une BrowserInteraction.

Pour *certains* objets natifs du navigateur enveloppés par l&apos;agent `nrWrapper`, leur rappel sera chronométré. Les tâches d&apos;une durée supérieure à 50 ms (tâches longues) peuvent étendre une BrowserInteraction. Cette approche reposait sur une heuristique de navigation souple permettant de déterminer quand une interaction se produisait naturellement. L&apos;interaction sera désormais prolongée et sa durée sera étendue jusqu&apos;à une période d&apos;inactivité de 5 secondes, et son heure de fin sera réajustée en conséquence.

Auparavant, une requête Ajax associée à une interaction ne signalait ni ne suivait le temps de descente en rappel, ce qui entraînait des valeurs nulles pour les trois attributs mentionnés ci-dessus. Avec la mise à jour actuelle, `XMLHttpRequest` (mais pas `fetch`) qui fait partie d&apos;une interaction et comprend des écouteurs d&apos;événements provoquant des tâches longues, verra ses attributs `jsDuration`, `timeToSettle` et `timeToLastCallbackEnd` mis à jour pour refléter le timing du long rappel.

## SPA (sortie dans l&apos;agent v1.253.0)

Pour les clients monitoring les applications monopages (SPA) du navigateur, nous sommes ravis d&apos;annoncer une refonte de notre fonctionnalité monitoring SPA, destinée à résoudre de nombreux problèmes :

* Dernières versions inutilisables : des conflits fréquents avec des bibliothèques tierces et une capture interaction peu fiable ont affecté l&apos;agent existant, rendant souvent la dernière version inutilisable.
* Solutions patchwork : résoudre un problème avec des correctifs SPA en introduisait souvent un autre, créant un cycle frustrant de correctifs et de régressions.
* Conflits de bibliothèques tierces : l&apos;encapsulation globale, en particulier autour de `Promises`, perturbe souvent la fonctionnalité du code en raison de conflits avec d&apos;autres bibliothèques.
* Goulot d&apos;étranglement des performances : les conflits avec le code utilisant des temporisateurs, RAF et la chaîne de promesses ont entraîné des problèmes de performances, allant des ralentissements aux blocages.

L’expérience monitoring SPA mise à jour est conçue pour éliminer ces problèmes et fournir une expérience monitoring considérablement améliorée. Les principaux changements incluent :

* Exécution non encapsulée : en n&apos;encapsulant pas les variables globales principales, la nouvelle expérience SPA libère des gains de vitesse d&apos;exécution pour votre application.

* Aligné sur les heuristiques de navigation souple : la nouvelle expérience adopte la navigation souple de Google Chrome, offrant un suivi interaction plus précis et un meilleur alignement avec le comportement du navigateur.

* Détermination simplifiée interaction : les interactions sont désormais définies comme un événement d&apos;UI (clic/appui sur une touche/soumission -&gt; changement de route -&gt; modification DOM ), offrant une approche de capture plus claire et plus efficace.
  * Dissociation potentielle d&apos;événements : vous pouvez observer que les événements `AjaxRequest` et `JavascriptError` précédemment associés se dissocient de l&apos;interaction, reflétant l&apos;accent mis sur l&apos;interaction pilotée par UI .

* Concentrez-vous sur les indicateurs clés : bien que les données rapportées restent en grande partie inchangées, la nouvelle expérience ne suit plus l&apos;exécution JavaScript ni la durée de rappel au sein de l&apos;interaction, simplifiant ainsi les informations rapportées.

* Durées d&apos;interaction réduites : attendez-vous à des durées d&apos;interaction considérablement plus courtes, en particulier pour les changements d&apos;itinéraire. Les chargements de pages initiaux connaîtront une légère réduction.

* Mises à jour de l&apos;API :

  * Nouvel argument optionnel `.interaction({waitForEnd: true})` ajouté à la fonction [`.interaction()`](/docs/browser/new-relic-browser/browser-apis/interaction/) : cela permet de personnaliser l&apos;heure de fin de interaction de l&apos;utilisateur. La fonctionnalité `.interaction()` existante reste inchangée.
  * API obsolète : la fonction [`createTracer`](/docs/browser/new-relic-browser/browser-apis/createtracer/): bien que toujours fonctionnelle, la fonction `createTracer` est obsolète car elle ne maintient plus l&apos;interaction ouverte ni les temps de rappel. Remarque : si vous continuez à utiliser `createTracer` avec la nouvelle expérience SPA, l&apos;événement `BrowserTiming` ne sera pas créé.

## Problèmes connus [#known-issues]

* Utilisation de l&apos;API :

  * `newrelic.interaction().end()` solution de contournement : si vous avez déjà utilisé cette solution pour résoudre les problèmes de fermeture interaction, vous risquez désormais de voir des interactions supplémentaires et inutiles. Passez en revue votre utilisation pour garantir des résultats optimaux.
  * `createTracer()` changement de fonctionnalité : `createTracer()` ne maintient plus l&apos;interaction ouverte ou ne déclenche plus le rappel. Si vous vous êtes appuyé sur cela pour suivre le code JavaScript, explorez des approches alternatives.

* `AjaxRequest` association:

  * Exclusion potentielle de l&apos;interaction : requests Ajax initiées vers la fin de l&apos;interaction précédente peuvent désormais être exclues en raison de durées interaction raccourcies.
  * Extension manuelle : si vous avez besoin qu&apos;une requête soit attribuée à une interaction spécifique, utilisez l&apos;argument `.interaction({waitForEnd: true})` ajouté à la fonction [`.interaction()`](/docs/browser/new-relic-browser/browser-apis/interaction/) pour maintenir l&apos; interaction ouverte jusqu&apos;à ce que la requête se déclenche, puis `.end()` l&apos; interaction. Cela associera la demande à l’interaction.

## Laisser les commentaires [#feedback]

[Soumettez un problème GitHub](https://github.com/newrelic/newrelic-browser-agent/issues) pour signaler des bugs, requests de fonctionnalités ou des améliorations de performances.

Pour tout autre commentaire, partagez vos réflexions et suggestions en envoyant un e-mail à `browser-agent@newrelic.com` avec une ligne d&apos;objet commençant par `[SoftNav]: `.