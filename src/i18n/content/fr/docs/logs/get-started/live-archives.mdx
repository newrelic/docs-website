---
title: Stockage log à long terme avec Live Archives
tags:
  - Logs
  - Log management
  - Get started
metaDescription: Store your logs with New Relic for up to seven years using live archives.
signupBanner:
  text: Monitor and improve your entire stack. 100GB free. Forever.
freshnessValidatedDate: never
translationType: machine
---

Live Archives vous permet de stocker les logs aussi longtemps que vous le souhaitez. New Relic conserve les logs pendant trente jours par défaut, mais avec Live Archives, vous pouvez prolonger cette période jusqu&apos;à sept ans. Comme pour les anciens documents fiscaux, vous n&apos;avez parfois pas besoin de vos données à portée de main, mais il est prudent de conserver les informations disponibles pour référence si nécessaire.

Live Archives est-il fait pour vous ? Voici quelques cas d’utilisation dans lesquels vous pourriez bénéficier de cette fonctionnalité :

* <DNT>**Internal retention requirements**</DNT>:Votre entreprise a-t-elle une politique qui vous oblige à conserver un log pendant une certaine période ? Les périodes de stockage prolongées de Live Archives peuvent vous aider à répondre à vos besoins.
* <DNT>**Trends and long-term debugging**</DNT>:Le stockage log à long terme peut aider à améliorer les performances d’une année sur l’autre. Par exemple, si vous gérez une entreprise de vente au détail, vous pouvez comparer les logs d&apos;une saison de vacances à l&apos;autre pour voir comment vous pouvez améliorer les performances.

## Comment fonctionnent les archives en direct [#how-it-works]

La fonctionnalité Archives en direct offre un stockage de données log à long terme que vous avez l&apos;intention d&apos;interroger avec parcimonie pour un coût de stockage inférieur. Avec Live Archives, vous pouvez avoir l&apos;esprit tranquille en sachant que vos logs sont disponibles pendant une période plus longue pour des audits potentiels ou un débogage à long terme, mais vous serez facturé séparément pour le stockage et l&apos;interrogation de vos anciennes données.

## Démarrer

<Steps>
  <Step>
    ### Activer les archives en direct [#enable]

    Tout d’abord, vous devez demander les fonctionnalités d’archives en direct.

    1. Sur la page d’interface utilisateur <DNT>**Data retention**</DNT> , située dans le [hub de gestion des données](https://one.newrelic.com/data-management-hub).
    2. Faites défiler jusqu&apos;à <DNT>**Logging live archives**</DNT>.
    3. Appuyez sur <DNT>**Request**</DNT>. Un membre de notre équipe vous contactera.
  </Step>

  <Step>
    Une fois que vous avez activé les archives en direct, vous devez modifier votre conservation des données.

    1. Sur la page d’interface utilisateur <DNT>**Data retention**</DNT> , située dans le [hub de gestion des données,](https://one.newrelic.com/data-management-hub) sélectionnez <DNT>**Edit data retention**</DNT>.
    2. Faites défiler jusqu&apos;à <DNT>**Logging live archives**</DNT> et entrez le nombre total de jours pendant lesquels vous souhaitez stocker vos données. Gardez à l’esprit que cela inclut les jours de conservation standard.
    3. Cliquez sur <DNT>**Apply changes**</DNT>.

    Gardez à l’esprit que vous aurez besoin [de capacités d’administrateur](/docs/accounts/accounts-billing/new-relic-one-user-management/user-management-concepts/#roles) pour modifier la conservation des données.

    <img title="edit data retention" alt="A screenshot showing users how to edit their data retention." src="/images/logs_screenshot-crop_edit-data-retention-live-archives.webp" />
  </Step>

  <Step>
    ### Créer une partition à l&apos;aide des archives en direct [#partitions]

    Une partition est un moyen de regrouper les logs en fonction de critères spécifiques. La création de partitions peut vous aider à filtrer les logs dont vous n&apos;avez pas besoin et à conserver ceux dont vous avez besoin avec Live Archives.

    1. Allez à <DNT>**[one.newrelic.com &gt; All capabilities](https://one.newrelic.com/all-capabilities) &gt; Logs**</DNT>.

    2. À gauche de la barre de requête du log, cliquez sur <DNT>**Data partitions**</DNT>, puis sur <DNT>**Create data partition**</DNT>.

    3. Définissez un nom de partition comme une chaîne alphanumérique commençant par log.

    4. Sélectionnez le champ <DNT>**Use live archives on this partition**</DNT>.

       <img title="create a live archives partition" alt="A screenshot showing a user how to create a partition using live archives" src="/images/logs_screenshot-crop_create-a-partition-using-live-archives.webp" />

       <figcaption>
         Accédez à <DNT>**[one.newrelic.com &gt; All capabilities](https://one.newrelic.com/all-capabilities) &gt; Logs &gt; Data partitions**</DNT> pour créer une partition à l’aide des archives en direct.
       </figcaption>

    5. Les <DNT>**Total effective retention**</DNT> jours seront mis à jour pour refléter la conservation régulière *et* la [conservation des archives en direct](/docs/logs/get-started/live-archives-billing/#what-counts).

    Vous pouvez également modifier une partition existante en cliquant sur le bouton <Icon name="fe-more-horizontal" /> icône sur la page <DNT>**Data partitions**</DNT> . Si vous utilisez une partition existante, les mêmes paramètres que ceux que vous avez sélectionnés pour la partition d&apos;origine s&apos;appliqueront à vos données Live Archives.

    <img width="60%;" title="Edit a live archives partition" alt="A screenshot showing a user how to edit a partition using live archives" src="/images/logs_screenshot-crop_edit-data-partition-using-live-archives.webp" />

    Pour plus d&apos;informations sur l&apos;utilisation des partitions, consultez notre document [Organiser les données avec des partitions](/docs/logs/ui-data/data-partitions/).
  </Step>

  <Step>
    ## Interrogez votre log

    <Callout variant="important">
      l&apos;utilisateur peut interroger les archives en direct s&apos;il dispose de l&apos; [autorisation](/docs/accounts/accounts-billing/new-relic-one-user-management/user-permissions/) de requête sur les archives en direct. Reportez-vous aux [concepts de gestion des utilisateurs](/docs/accounts/accounts-billing/new-relic-one-user-management/user-management-concepts/) pour plus d&apos;informations sur l&apos;utilisation de groupes, de rôles et d&apos;autorisations pour contrôler l&apos;accès à certaines fonctionnalités.
    </Callout>

    Il existe plusieurs façons d&apos;interroger les archives en direct : Lucene, NRQL ou NRQL dans l&apos;API NerdGraph. Pour les trois méthodes, vous aurez besoin de la capacité **de requête Live Archives** pour interroger Live Archives.

    ### requête Live Archives avec la syntaxe de requête Lucene [#query]

    Si vous connaissez la syntaxe de requête Lucene, vous pouvez l&apos;exécuter dans notre interface utilisateur <DNT>**Logs**</DNT> .

    1. Allez à <DNT>**[one.newrelic.com &gt; All capabilities](https://one.newrelic.com/all-capabilities) &gt; Logs**</DNT>.
    2. À l’aide de la barre de recherche, exécutez la requête souhaitée. Il est préférable de commencer par pratiquer votre requête afin de vous assurer qu&apos;elle fonctionne comme prévu.
    3. Sélectionnez les dates que vous souhaitez interroger.
    4. Un écran vous montrera que vous êtes sur le point d&apos;interroger les archives en direct. L&apos;interrogation des archives en direct est plus coûteuse, alors sélectionnez <DNT>**Query live archives**</DNT> uniquement si vous êtes prêt.

    <img title="lucene live archives" alt="A screenshot showing a user how to query live archives in the logs UI" src="/images/logs_live_archives_query_confirmation.webp" />

    <figcaption>
      Accédez à <DNT>**[one.newrelic.com &gt; All capabilities](https://one.newrelic.com/all-capabilities) &gt; Logs**</DNT> pour interroger les données stockées avec Live Archives.
    </figcaption>

    ### Requête Archives en direct avec NRQL [#nrql]

    Si vous souhaitez effectuer une requête en utilisant le même langage que celui que vous utilisez pour la boîte de réception des erreurs ou les alertes, nous vous suggérons d&apos;effectuer une requête en NRQL.

    1. Allez à <DNT>**[one.newrelic.com &gt; All capabilities](https://one.newrelic.com/all-capabilities) &gt; Logs**</DNT>.
    2. Cliquez sur **NRQL** dans le coin supérieur droit.
    3. Saisissez la requête NRQL que vous souhaitez exécuter.
    4. Pratiquez d’abord la requête pour vous assurer qu’elle fonctionne comme prévu.
    5. Basculer <DNT>**Use live archives**</DNT>.
    6. Un écran vous montrera que vous êtes sur le point d&apos;interroger les archives en direct. L&apos;interrogation des archives en direct est plus coûteuse, alors sélectionnez <DNT>**Query live archives**</DNT> uniquement si vous êtes prêt.

    <img title="nrql live archives" alt="A screenshot showing a user how to query live archives with NRQL" src="/images/logs_screenshot-crop_query-live-archives-nrql.webp" />

    <figcaption>
      Allez dans <DNT>**[one.newrelic.com &gt; All capabilities](https://one.newrelic.com/all-capabilities) &gt; Logs**</DNT>, puis sélectionnez <DNT>**NRQL**</DNT> pour interroger les données stockées avec Live Archives à l&apos;aide du générateur de requêtes.
    </figcaption>

    ### Requête Archives en direct à l&apos;aide de l&apos;API NerdGraph [#api]

    Vous pouvez également interroger vos données Live Archives à l&apos;aide de NRQL dans l&apos;API NerdGraph. Vous devez inclure le `{eventNamespaces: "Logging:Archive"}` dans les options NRQL pour spécifier les archives en direct `eventNamespace`.

    Voici un exemple de requête :

    ```graphql
    query {
      actor {
        account(id: 1234567) {
          nrql(
            query: "SELECT count(*) FROM Log SINCE '2024-02-01 12:00:00' UNTIL '2024-02-01 13:00:00'"
            options: { eventNamespaces: "Logging:Archive" }
            async: true
          ) {
            results
          }
        }
      }
    }
    ```
  </Step>

  <Step>
    ### Consultez votre consommation de données [#data-consumption]

    Les archives en direct sont facturées différemment du reste de votre log. Vous pouvez en savoir plus à ce sujet dans notre [documentation sur le stockage des archives en direct : facturation et règles](/docs/logs/get-started/live-archives-billing/). Live Archives a trois piliers de facturation.

    * <DNT>**Data**</DNT>:Vous serez facturé lorsque vous ingérerez initialement le log régulier.
    * <DNT>**Storage**</DNT>:Live Archives facture des frais pour le stockage de vos données avec Live Archives.
    * <DNT>**Compute**</DNT>: la requête des données Live Archives sera facturée en Compute Capacity Units. Consultez notre [documentation Plan d’utilisation](/docs/licenses/license-information/usage-plans/new-relic-usage-plan/#list-price) pour plus d’informations sur Compute Capacity Units.

    Pour voir votre stockage de données sur la page <DNT>**Plan &amp; Usage**</DNT> :

    1. Accédez à <DNT>**[one.newrelic.com](https://one.newrelic.com/)**</DNT>, cliquez sur le menu utilisateur, puis cliquez sur <DNT>**Administration**</DNT> pour ouvrir la page <DNT>**Plan &amp; usage**</DNT> .
    2. Faites défiler jusqu&apos;à <DNT>**Retention (GB-month)**</DNT>.
    3. Cliquez sur <DNT>**View more details**</DNT> pour plus d’informations sur la répartition du stockage.

    Une fois que vous avez interrogé les archives en direct, vous pouvez explorer votre consommation calculée dans le hub de gestion de la consommation.

    1. Accédez à <DNT>**[one.newrelic.com](https://one.newrelic.com/)**</DNT>, cliquez sur le menu utilisateur, puis cliquez sur <DNT>**Administration**</DNT>.
    2. Sélectionnez <DNT>**Consumption management**</DNT>.
    3. Faites défiler jusqu&apos;à <DNT>**Product capabilities**</DNT>.
    4. Sélectionnez <DNT>**Logs**</DNT>.
    5. Facette par <DNT>**Data category**</DNT> pour visualiser la consommation du calculateur pour les Archives en direct.
  </Step>
</Steps>

## Exemple [#examples]

Disons que vous devez vérifier si un utilisateur se connecte à une machine depuis son ordinateur pour répondre à un ticket le 1er septembre. Vous pouvez utiliser Live Archives pour confirmer que cela a eu lieu en procédant comme suit :

1. Vérifiez le délai pendant lequel l&apos;utilisateur se connecte à sa machine.

2. Testez votre requête dans <DNT>**Logs**</DNT> pour vous assurer qu&apos;elle fonctionne comme prévu. Il s&apos;agit d&apos;un essai à sec qui ne renverra aucune donnée, mais vous validez simplement la requête. Si cela fonctionne, vous pouvez alors exécuter la requête la plus coûteuse sur votre log archivé.

   Exemple de requête :

   ```
   "logtype":"linux_audit" "type":"USER_LOGIN" "hostname":"apache_svr01"
   ```

3. Modifiez le sélecteur d&apos;heure pour rechercher les dates auxquelles l&apos;utilisateur se connecte à sa machine.

4. Sélectionnez <DNT>**Query live archives**</DNT>.

## Suppression des données [#delete]

Si à un moment donné vous souhaitez réduire votre conservation des données, veuillez noter :

* Vous aurez besoin des privilèges d&apos;administrateur pour modifier la rétention des données.
* *Vous ne pouvez pas récupérer les données si vous réduisez la rétention des données ultérieurement. Veuillez choisir et configurer soigneusement vos périodes de conservation.*
* La suppression de vos données prend effet le jour où vous réduisez votre conservation.
* Vous pouvez demander la suppression de vos données pour un nombre de jours donné. Nous supprimerons toutes les données des archives en direct pour les dates sélectionnées.
* Les jours commencent et se terminent sur les limites UTC, donc lorsque vous faites une demande, assurez-vous qu&apos;elle correspond à UTC. Cela peut signifier ajouter ou soustraire un jour.

<Callout variant="important">
  Afin d&apos;éviter tout doute, New Relic n&apos;a aucune obligation de conserver les données dans Live Archives après la rétrogradation du compte ou l&apos;expiration du contrat, ou encore si vous ne répondez pas aux exigences commerciales applicables.
</Callout>

<DocTiles>
  <DocTile title="Understand how live archives billing works" number="1" path="/docs/logs/get-started/live-archives-billing" />

  <DocTile title="Learn more about creating data partitions" number="2" path="/docs/logs/ui-data/data-partitions/" />

  <DocTile title="Query your logs" number="3" path="/docs/logs/ui-data/query-syntax-logs/" />
</DocTiles>