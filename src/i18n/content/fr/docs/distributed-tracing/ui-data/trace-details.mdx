---
title: Comprendre la trace UI page des détails
tags:
  - Distributed tracing
  - UI and data
  - Trace details
metaDescription: 'Dive deeper into New Relic''s distributed tracing feature: learn how to use and understand the trace details UI.'
freshnessValidatedDate: '2023-07-19T00:00:00.000Z'
translationType: machine
---

Une fois que vous avez sélectionné une trace dans la liste trace, vous serez dirigé vers la page des détails trace dans l&apos;UI. Utilisez les détails trace pour comprendre le flux d&apos;opérations qui composent une tracedistribuée et ajustez la vue pour trouver les informations les plus importantes pour vous.

<img title="Trace details page" alt="New Relic distributed tracing UI - trace details page" src="/images/distributed-tracing-trace-details-page.webp" />

<figcaption>
  Sélectionnez une trace dans la liste des traces pour voir les détails la concernant.
</figcaption>

Découvrez différentes manières d&apos;afficher les étendues de vos traces :

<Tabs>
  <TabsBar>
    <TabsBarItem id="timeline-view">
      Vue chronologique
    </TabsBarItem>

    <TabsBarItem id="latency-view">
      Vue de latence
    </TabsBarItem>

    <TabsBarItem id="waterfall-view">
      Vue sur la cascade
    </TabsBarItem>
  </TabsBar>

  <TabsPages>
    <TabsPageItem id="timeline-view">
      La vue chronologique est une vue haute densité de toutes les étendues de la trace. Cette vue vous permet de faire défiler rapidement l&apos;intégralité trace et de voir comment la latence et les erreurs se propagent à travers la trace et au-delà des limites des entités. Vous pouvez sélectionner des travées à partir de cette vue pour voir les détails de la travée dans la vue en cascade située en dessous.
    </TabsPageItem>

    <TabsPageItem id="latency-view">
      La vue de latence vous montre le niveau de latence apporté par chaque entité de la trace, ainsi que le nombre d&apos;erreurs par entité. La latence apportée par une entité est le temps pendant lequel un ou plusieurs processus étaient en cours d&apos;exécution mais **n&apos;effectuaient** aucun appel externe ou de base de données. Voici deux exemples :

      * Si une entité a un processus d&apos;une durée de 500 ms, mais qu&apos;elle effectue un appel externe pendant 400 ms de ce temps, elle est considérée comme contribuant à 100 ms de latence à la trace.

      * Si une entité a trois processus exécutés en parallèle pendant une seconde et qu&apos;aucun d&apos;entre eux n&apos;a effectué d&apos;appels externes, cela est indiqué comme contribuant à une seconde de latence à la trace.

        <img title="Latency view" alt="Screenshot showing the distributed tracing latency view" src="/images/distributed-tracing-trace-details-page-latency-view.webp" />
    </TabsPageItem>

    <TabsPageItem id="waterfall-view">
      La vue en cascade dans la partie inférieure de la page affiche un flux détaillé de toutes les opérations qui composent les tracedistribuées. Cela vous permet de voir le contexte exact dans lequel la latence et les erreurs surviennent.

      ### Contrôles de la cascade [#waterfall-controls]

      La vue en cascade dispose d&apos;un certain nombre de commandes pour faciliter la recherche des intervalles qui vous intéressent :

      * <DNT>**Expand all/Collapse all**</DNT>:Utilisez cette option pour basculer entre l&apos;affichage de chaque étendue (y compris l&apos;étendue en cours de processus) et l&apos;affichage des étendues réduites.

      * <DNT>**Standard/Manual**</DNT>:En mode standard, vous obtenez une vue semi-étendue qui inclut la première étendue de chaque processus. En mode manuel, vous ne voyez que ce que vous développez.

        * <DNT>**Standard**</DNT> et <DNT>**Manual**</DNT> sont tous deux remplacés par <DNT>**Expand all**</DNT>, qui affiche toutes les étendues.
        * Si vous êtes en mode standard ou manuel et que vous cliquez sur <DNT>**Collapse all**</DNT>, la cascade est réinitialisée à la valeur par défaut du mode que vous utilisez.

      * <DNT>**Focus on**</DNT>:Si votre étendue comporte des erreurs ou des anomalies, vous verrez des cases à cocher pour chacun de ces types. Si vous cochez ces cases, votre vue en cascade réduira tous les autres types de plages et affichera uniquement les plages anormales ou celles présentant des erreurs codées par couleur. Il s’agit d’un moyen rapide de trouver les portées problématiques.

        <img style={{ width: "70%",align: "left" }} title="Screenshot showing the color coding of focus on" alt="Screenshot showing the color coding of focus on" src="/images/distributed-tracing_screenshot-crop_focus-on-example.webp" />

      * <DNT>**Maximize**</DNT>:Cela vous permet de voir plus de travées sur l&apos;écran en agrandissant la cascade et en masquant la cartographie des entités.

        ### Propriétés de la portée de la cascade [#span-icons]

        L&apos;UI indique les propriétés d&apos;étendue avec ces icônes :

        <table id="span-types">
          <thead>
            <tr>
              <th style={{ width: "130px" }}>
                Propriété de portée
              </th>

              <th style={{ width: "110px" }}>
                Indicateur
              </th>

              <th>
                Description
              </th>
            </tr>
          </thead>

          <tbody>
            <tr>
              <td>
                Service
              </td>

              <td>
                <img title="new-relic-distributed-tracing-service-span-icon.png" alt="New Relic distributed tracing service icon" src="/images/new-relic-distributed-tracing-service-icon.webp" />
              </td>

              <td>
                Cette icône représente une étendue qui est le point d&apos;entrée d&apos;un service.
              </td>
            </tr>

            <tr id="in-process">
              <td>
                En cours de réalisation
              </td>

              <td>
                <img title="new-relic-distributed-tracing-in-process-span-icon.png" alt="New Relic distributed tracing in-process span icon " src="/images/new-relic-distributed-tracing-inprocess-icon.webp" />
              </td>

              <td>
                Cette icône représente une [étendue en cours de processus](#in-process), qui est une étendue qui se déroule au sein d&apos;un processus (par opposition à une étendue inter-processus). Exemples : instrumentation middleware, étendues créées par l’utilisateur.
              </td>
            </tr>

            <tr>
              <td>
                Datastore
              </td>

              <td>
                <img title="new-relic-distributed-tracing-database-span-icon.png" alt="New Relic distributed tracing datastore span icon" src="/images/new-relic-distributed-tracing-databases-icon.webp" />
              </td>

              <td>
                Cette icône représente un appel d&apos;étendue vers une datastore.
              </td>
            </tr>

            <tr>
              <td>
                Externe
              </td>

              <td>
                <img title="new-relic-distributed-tracing-external-span-icon.png" alt="New Relic distributed tracing external span icon" src="/images/new-relic-distributed-tracing-external-icon.webp" />
              </td>

              <td>
                Cette icône représente une catégorie représentant un appel à un service externe effectué via HTTP.
              </td>
            </tr>

            <tr>
              <td>
                Application de navigateur
              </td>

              <td>
                <img title="distributed-tracing-browser-span-icon.png" alt="New Relic distributed tracing browser span icon" src="/images/distributed-tracing-browser-span-icon.webp" />
              </td>

              <td>
                Cette icône représente une [application de navigateur étendue](/docs/browser/new-relic-browser/browser-pro-features/browser-data-distributed-tracing).
              </td>
            </tr>

            <tr>
              <td>
                Lambda
              </td>

              <td>
                <img title="new-relic-distributed-tracing-lambda-icon.png" alt="New Relic distributed tracing external span icon" src="/images/new-relic-distributed-tracing-lambda-icon.webp" />
              </td>

              <td>
                Cette icône représente une étendue d&apos;une [fonction Lambda](/docs/serverless-function-monitoring/aws-lambda-monitoring/get-started/introduction-new-relic-monitoring-aws-lambda).
              </td>
            </tr>
          </tbody>
        </table>

        Certaines travées auront des indicateurs supplémentaires :

        <table id="span-types-table">
          <thead>
            <tr>
              <th style={{ width: "130px" }}>
                Propriété de portée
              </th>

              <th style={{ width: "110px" }}>
                Indicateur
              </th>

              <th>
                Description
              </th>
            </tr>
          </thead>

          <tbody>
            <tr id="connecting-lines">
              <td>
                Type de connexion
              </td>

              <td>
                <img title="new-relic-distributed-tracing-lines-image.png" alt="New Relic distributed tracing connecting lines image" src="/images/new-relic-distributed-tracing-lines-image.webp" />
              </td>

              <td>
                Les lignes pleines indiquent une relation parent-enfant directe ; en d’autres termes, un processus ou une fonction appelant directement un autre. Une ligne pointillée indique une relation non directe. Pour en savoir plus sur les relations entre les étendues, voir [Structure de trace](/docs/understand-dependencies/distributed-tracing/get-started/how-new-relic-distributed-tracing-works#trace-structure).
              </td>
            </tr>

            <tr>
              <td>
                Erreurs
              </td>

              <td>
                <img title="new-relic-distributed-tracing-error-icon.png" alt="New Relic distributed tracing error icon" src="/images/new-relic-distributed-tracing-error-icon.webp" />
              </td>

              <td>
                Un span avec une erreur. Voir [Comment comprendre les erreurs d&apos;étendue](#error-tips).
              </td>
            </tr>

            <tr>
              <td>
                Anormal
              </td>

              <td>
                <img title="new-relic-distributed-tracing-anomalous-icon.png" alt="New Relic distributed tracing datastore span icon" src="/images/new-relic-distributed-tracing-anomalous-icon.webp" />
              </td>

              <td>
                Cette icône représente la détection d&apos;une [portée anormale](#anomalous-spans).
              </td>
            </tr>

            <tr>
              <td>
                Travées orphelines
              </td>

              <td>
                <img title="new-relic-distributed-tracing-fragmented-icon.png" alt="New Relic distributed tracing orphaned span icon" src="/images/new-relic-distributed-tracing-orphan-icon.webp" />
              </td>

              <td>
                Certaines étendues peuvent être « orphelines » ou séparées de la trace. Ces étendues apparaîtront au bas de la trace. Pour plus de détails, voir [Trace fragmentée](#fragmented-traces).
              </td>
            </tr>

            <tr>
              <td>
                Plusieurs noms d&apos;applications
              </td>

              <td>
                <img title="new-relic-distributed-tracing-multiple-app-names-indicator.png" alt="New Relic distributed tracing multiple app names indicator" src="/images/new-relic-distributed-tracing-multiapp-icon.webp" />
              </td>

              <td>
                Lorsqu&apos;il est à côté d&apos;un nom d&apos;étendue, cela représente une entité pour laquelle [plusieurs noms d&apos;application ont été définis](/docs/agents/manage-apm-agents/app-naming/use-multiple-names-app). Sélectionnez cette option pour voir tous les noms d&apos;applications auxquelles elle fait référence. Pour rechercher des données de trace par noms d’application alternatifs, utilisez l’attribut `appName` .
              </td>
            </tr>

            <tr>
              <td>
                Décalage horaire client/serveur
              </td>

              <td>
                <img title="new-relic-distributed-tracing-client-server-time-indicator.png" alt="New Relic distributed tracing client-server time difference indicator" src="/images/new-relic-distributed-tracing-client-server-time-indicator.webp" />
              </td>

              <td>
                Si l&apos;indicateur de durée d&apos;une période n&apos;est pas complètement coloré (comme dans cet exemple), cela signifie qu&apos;il existe un décalage horaire entre la durée côté serveur et la durée côté client pour cette activité. Pour plus de détails à ce sujet, voir [Différence de temps client/serveur](#client-server-time).
              </td>
            </tr>
          </tbody>
        </table>
    </TabsPageItem>
  </TabsPages>
</Tabs>

## Volet de détails de la portée [#span-details]

Lorsque vous sélectionnez une plage, un volet s’ouvre avec les détails de la plage. Ces détails peuvent être utiles pour résoudre les problèmes de performances de dépannage. Cette page comporte trois onglets :

* <DNT>**Performance**</DNT>: Vous verrez des graphiques montrant la durée et le débit moyens pour cette opération de span, ainsi que la comparaison des performances de ce span spécifique à la moyenne.
* <DNT>**Attributes**</DNT>:Vous pouvez en apprendre davantage sur les attributs à partir de notre [dictionnaire de données](/attribute-dictionary/?dataSource=Distributed+Tracing&event=Span).
* <DNT>**Details**</DNT>:Vous pouvez afficher les détails, tels que le [nom complet de la plage](/docs/distributed-tracing/ui-data/understand-use-distributed-tracing-ui/#prettified-span-names) et la source de données.
* <DNT>**Span links**</DNT>: Si le span a des [liens de span](#span-links), vous verrez cet onglet. Il montre les relations de causalité avec les spans d&apos;autres traces. [En savoir plus sur les liens de span](#span-links).

Ce qu&apos;une étendue affiche est basé sur son type d&apos;étendue. Par exemple, les détails de l&apos;étendue datastore incluront la requête de base de données. Pour en savoir plus sur la structure trace et sur la manière dont les propriétés d&apos;étendue sont déterminées, voir [structure de la trace](/docs/understand-dependencies/distributed-tracing/get-started/how-new-relic-distributed-tracing-works#trace-structure).

## Comprendre les liens de span [#span-links]

Les liens de span vous aident à comprendre les relations de causalité entre les spans de différentes traces. Lorsque les traces sont divisées en raison d&apos;une communication asynchrone ou de processus de longue durée, les liens de span vous permettent de naviguer entre les traces associées et de voir l&apos;image complète de votre système distribué.

### Lorsque les traces sont divisées [#why-traces-split]

Dans les systèmes distribués modernes, les traces peuvent apparaître comme des traces distinctes et déconnectées dans les scénarios suivants :

* <DNT>**Long-running workflows**</DNT>: Tâches ou workflows en arrière-plan qui dépassent les limites de durée des traces (plus de 90 secondes pour l&apos;échantillonnage basé sur la tête, 20 secondes et plus pour le tracing infini) ou qui s&apos;exécutent pendant des périodes prolongées.

Lors du tracing entre les files d&apos;attente de messages, il est généralement recommandé d&apos;utiliser des liens de span pour associer les traces du ou des producteurs et du ou des consommateurs. Les exemples incluent :

* <DNT>**General asynchronous message queues**</DNT>: Un service publie des messages dans une file d&apos;attente (comme AWS SQS, RabbitMQ ou Kafka), et un autre service les consomme plus tard
* <DNT>**Batch-processing**</DNT>: Les workers qui traitent plusieurs messages par lots, où chaque message provient d&apos;une trace différente
* <DNT>**Fan-in pattern**</DNT>: Plusieurs services produisent indépendamment des messages qu&apos;un consommateur agrège
* <DNT>**Fan-out pattern**</DNT>: Plusieurs consommateurs consomment à partir d&apos;une file d&apos;attente de messages - chacun démarrant sa propre trace

Lorsque les traces sont divisées de cette manière, les relations parent-enfant traditionnelles ne capturent pas l&apos;image complète. Les liens de span comblent cette lacune en créant des connexions causales explicites.

### Que sont les liens de span ? [#what-are-span-links]

Les liens de span sont des attributs OpenTelemetry qui créent des relations de causalité entre les spans qui n&apos;ont pas de connexion parent-enfant directe. Ils vous permettent de :

* Naviguer d&apos;un span consommateur vers le span producteur
* Comprendre le flux complet des requêtes, même lorsque les traces sont divisées
* Déboguer les problèmes qui s&apos;étendent au-delà des limites asynchrones

Un lien de span inclut l&apos;ID de trace et l&apos;ID de span du span associé, ce qui permet à New Relic de connecter les traces pour vous.

### Identification des traces avec des liens de span [#identify-span-links]

Dans l&apos;interface utilisateur des détails de la trace, les traces avec des liens de span sont marquées de plusieurs manières :

1. <DNT>**Span links filter badge**</DNT>: Dans la barre de filtre de trace, vous verrez un badge indiquant le nombre de spans avec des liens (par exemple, `span links (2)`).
2. <DNT>**Span count indicator**</DNT>: Lors de la visualisation de la liste des spans, chaque span affiche un nombre de liens s&apos;il possède des liens de span.

<img title="Distributed tracing span links filter" alt="Screenshot showing the span links filter badge in the trace details UI" src="/images/distributed-tracing-span-links-filter-badge.webp" />

<figcaption>
  Le badge de filtre des liens de span apparaît dans la barre de filtre de trace lorsqu&apos;une trace contient des spans avec des liens.
</figcaption>

### Affichage des liens de span [#view-span-links]

Pour afficher et naviguer dans les liens de span :

1. À partir de la page des détails de la trace, sélectionnez un span dans la liste déroulante des liens de span.

2. Dans le volet des détails du span, cliquez sur l&apos;onglet <DNT>**Span links**</DNT>.

3. Vous verrez une liste des traces liées avec les informations suivantes :

   * <DNT>**Direction badge**</DNT>: `Forward` indique un span qui s&apos;est produit plus tard dans le temps (successeur), tandis que `Backward` indique un span qui s&apos;est produit plus tôt (prédécesseur).
   * <DNT>**Trace ID**</DNT>: L&apos;ID de la trace liée (tronqué pour l&apos;affichage).
   * <DNT>**Timestamp**</DNT>: Quand le span lié s&apos;est produit.
   * <DNT>**Duration**</DNT>: Combien de temps le span lié a duré.
   * <DNT>**Errors**</DNT>: Nombre d&apos;erreurs dans la trace liée.

4. Cliquez sur une trace liée pour y accéder. Utilisez le bouton Précédent de votre navigateur pour revenir à la trace d&apos;origine.

<img title="Span links tab showing linked traces" alt="Screenshot showing the Span links tab with forward and backward linked traces" src="/images/distributed-tracing-span-links-tab-detail.webp" />

<figcaption>
  L&apos;onglet Liens de span affiche les traces liées avec des badges de direction (Avant/Arrière), des ID de trace, des horodatages, des durées et des nombres d&apos;erreurs.
</figcaption>

<Callout variant="tip">
  <DNT>**Understanding forward vs. backward links**</DNT>

  * <DNT>**Forward links**</DNT>: Pointer vers les traces qui se sont produites à la suite du span actuel. Exemple : un message a été publié par ce span et traité plus tard par une autre trace.
  * <DNT>**Backward links**</DNT>: Pointer vers les traces qui ont causé le span actuel. Exemple : ce span traite un message qui a été publié par une trace précédente.
</Callout>

### Lorsque les liens de span n&apos;apparaissent pas [#span-links-troubleshooting]

Si vous vous attendez à voir des liens de span, mais qu&apos;ils n&apos;apparaissent pas, vérifiez ce qui suit :

<img title="Empty state when trace has no span links" alt="Screenshot showing the empty state message when a trace has no span links" src="/images/distributed-tracing-span-links-empty-state.webp" />

<figcaption>
  Lorsqu&apos;une trace n&apos;a pas de liens de span, vous verrez ce message dans l&apos;onglet Liens de span.
</figcaption>

<CollapserGroup>
  <Collapser id="trace-context-not-propagated" title="Contexte de trace non propagé">
    Les liens de span nécessitent une propagation correcte du contexte de trace via votre système de messagerie :

    * Assurez-vous que les en-têtes de contexte de trace W3C (`traceparent`, `tracestate`) sont inclus dans les en-têtes ou les métadonnées des messages
    * Vérifiez que votre bibliothèque ou framework de messagerie prend en charge la propagation du contexte
    * Lors de l&apos;instrumentation manuelle, assurez-vous d&apos;extraire le contexte des messages et de créer des liens de span par programmation

    Pour des exemples d&apos;implémentation, consultez [Meilleures pratiques des liens de span OpenTelemetry](/docs/opentelemetry/best-practices/opentelemetry-best-practices-traces/#span-links).
  </Collapser>

  <Collapser id="sampling" title="Considérations relatives à l'échantillonnage">
    La trace d&apos;origine et la trace liée doivent être échantillonnées pour que les liens de span apparaissent :

    * Si l&apos;une ou l&apos;autre des traces est supprimée par l&apos;échantillonnage, le lien de span ne sera pas visible
    * Envisagez d&apos;utiliser des stratégies d&apos;échantillonnage basées sur la tête ou la queue qui préservent les traces importantes
    * Pour les flux de travail critiques avec des liens de span, vous pouvez ajuster les taux d&apos;échantillonnage
  </Collapser>

  <Collapser id="data-processing" title="Données pas encore traitées">
    Il peut y avoir un délai entre le moment où les données de trace sont envoyées et le moment où les liens de span apparaissent :

    * Prévoyez 1 à 2 minutes pour que les données soient traitées et indexées
    * Vérifiez que les deux traces liées ont été ingérées avec succès
    * Vérifiez que vous n&apos;atteignez aucune limite de données ou de débit
  </Collapser>
</CollapserGroup>

Pour plus d&apos;informations sur la mise en œuvre des liens de span dans votre instrumentation, consultez notre [Guide des meilleures pratiques OpenTelemetry pour les traces](/docs/opentelemetry/best-practices/opentelemetry-best-practices-traces/#span-links).

## Attribut d&apos;envergure [#span-attributes]

Si vous souhaitez en savoir plus sur les données `Span` :

* Explorez vos données d&apos;étendue à l&apos;aide du [générateur de requêtes](/docs/chart-builder/use-chart-builder/get-started/introduction-chart-builder).
* Pour voir l&apos;attribut par défaut attaché aux données span, utilisez le [dictionnaire de données](/attribute-dictionary/?event=Span).
* Consultez ces [exemples de requêtes](/docs/apm/distributed-tracing/ui-data/example-insights-queries-distributed-trace-data) pour obtenir de l’aide sur les requêtes NRQL utilisant ces attributs.

## Voir le log associé [#view-your-logs]

Si vous utilisez notre fonctionnalité [de logs en contexte](/docs/logs/logs-context/configure-logs-context-apm-agents/), vous pouvez voir tous les logs liés à votre trace :

1. Accédez à la page des détails de la trace en cliquant sur une trace.
2. Dans le coin supérieur gauche de la page des détails de l’intervalle, cliquez sur l’onglet <DNT>**Logs**</DNT> .
3. Pour plus de détails sur un log individuel, cliquez directement sur le message.