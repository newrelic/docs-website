---
title: "Variables de modèle\_: filtrer dynamiquement le dashboard"
tags:
  - Dashboards
  - Template variables
metaDescription: 'For New Relic custom dashboards: use template variables to allow your dashboard users to dynamically filter your dashboard views.'
freshnessValidatedDate: never
translationType: machine
---

Pour des dashboards personnalisés, vous pouvez utiliser <DNT>**template variables**</DNT> pour filtrer dynamiquement les graphiques et autres widgets. Les variables de modèle rendent vos dashboards plus utiles et vous aident à créer plus facilement des dashboards que vous pouvez réutiliser pour différents cas d&apos;utilisation. Vous pouvez également utiliser des variables pour conditionner la valeur d’autres variables. Pour plus d&apos;informations, reportez-vous aux [variables imbriquées](/docs/query-your-data/explore-query-data/dashboards/nested-variables).

## Pourquoi utiliser des variables de modèle ? [#defined]

Les variables de modèle sont un moyen puissant et dynamique de filtrer un dashboard entier en fonction de valeurs de métadonnées spécifiques choisies par un créateur dashboard . Les avantages de l’utilisation de variables de modèle sont les suivants :

* Ils rendent le dashboard plus facile à utiliser : votre utilisateur n&apos;a pas besoin de comprendre la structure des données ; il peut simplement choisir parmi les différentes options de filtre que vous avez définies.

* Ils vous permettent de créer des modèles de dashboard réutilisables que vous pouvez ensuite dupliquer et personnaliser pour de nombreuses autres utilisations.

Voici un exemple de dashboard avec plusieurs variables de modèle, que vous pouvez voir en haut du dashboard.

<img title="Dashboard with template variables" alt="Dashboard with template variables" src="/images/dashboard_screenshot-full_with-template-variables.webp" />

<figcaption>
  Aller à <DNT>**[one.newrelic.com &gt; All capabilities](https://one.newrelic.com/all-capabilities) &gt; Dashboards**</DNT>
</figcaption>

Avec les variables de modèle, vous pouvez configurer une grande variété de variables et de filtres pour créer l&apos;expérience dashboard dont vous avez besoin. Exemples d’expériences que vous pouvez créer :

* Une liste déroulante pour choisir un nom d&apos;application
* Une liste déroulante pour choisir des régions spécifiques
* Une liste déroulante pour sélectionner des durées spécifiques ou d&apos;autres valeurs numériques
* Filtres qui utilisent des champs de texte libre pour trouver des chaînes correspondantes

De plus, vous pouvez désormais décider si vous souhaitez inclure la variable ou non sans avoir à modifier votre requête. Voir la section [Inclure la variable](/docs/query-your-data/explore-query-data/dashboards/dashboard-template-variables/#include-variable) pour plus de détails.

## Inclure et exclure des variables [#include-variable]

La bascule <DNT>**Include variable**</DNT> vous permet de définir une valeur souhaitée et d&apos;inclure ou d&apos;exclure cette valeur dans votre dashboard. Consultez la section [Variables de modèle](/docs/query-your-data/explore-query-data/dashboards/dashboard-template-variables/#create-variables) pour plus d&apos;informations.

Par exemple, vous pouvez étudier un problème qui n’est pas spécifique à une valeur particulière d’une variable. Dans de tels cas, les valeurs existantes de la variable peuvent limiter les résultats de la requête, même lors de la sélection de toutes les options possibles. Pour résoudre ce problème, vous pouvez exclure la variable de la requête. Cela supprime efficacement la condition de la variable et la remplace par une valeur booléenne neutre (vrai ou faux), garantissant la validité de la requête et renvoyant des résultats complets.

### Exemple

Considérez une requête qui filtre les résultats en fonction d’une variable `countryCode` . Si vous souhaitez afficher les données de tous les pays sans filtrage, vous pouvez exclure la variable :

Requête originale :

```sql
FROM PageAction 
SELECT count(*) AS 'views' 
WHERE countryCode IN ({{countryCode}}) AND appName = 'Test App' FACET countryCode
```

requête avec une variable exclue :

```sql
FROM PageAction 
SELECT count(*) AS 'views' 
WHERE true AND appName = 'Test App' FACET countryCode
```

Cette fonctionnalité est particulièrement utile lorsque :

* La variable a plus de valeurs que le maximum autorisé (par instance, 5000 résultats maximum pour les uniques par défaut) ou un nombre très élevé de valeurs. Choisir de désactiver la variable par défaut apportera des améliorations de performances considérables.

* La source de données de la variable diffère de la base de données que vous interrogez. Dans ces cas, sélectionner toutes les valeurs de la base de données à l&apos;aide de « Sélectionner tout » n&apos;est pas suffisant. En excluant la variable, vous pouvez récupérer toutes les valeurs de la base de données.

Limitations de la variable d&apos;inclusion :

* Lorsqu&apos;elle est utilisée dans les cas FACET, la condition est remplacée par true et la convertit en une condition toujours vraie.

* Lorsqu&apos;il est utilisé dans d&apos;autres contextes comme des fonctions ou avec l&apos;instruction `SELECT` , vous obtiendrez l&apos;erreur suivante : `"Unknown function Disable_variable()"`. Cela est dû au fait que la fonction de désactivation de la variable n&apos;est pas encore implémentée pour ces cas spécifiques.

## Exigences et limites [#requirements]

Les variables de modèle ne peuvent être utilisées que dans le cadre de la création de widgets pour dashboard personnalisés. Voir [Variables NRQL](/docs/query-your-data/nrql-new-relic-query-language/get-started/nrql-syntax-clauses-functions/#with-as-nrql-var) pour utiliser des variables dans une requête NRQL.

la requête avec des variables de modèle ne peut être utilisée que dans le contexte d&apos;un dashboard. Pour cette raison, certaines fonctionnalités liées aux requêtes ne fonctionnent pas. Par exemple, l&apos;option `Export dashboard as PDF` ne prend pas en charge les widgets avec des variables.

Points importants à noter lors de l&apos;ajout d&apos;une requête :

* La variable que vous avez définie se trouve entre les crochets `{{ … }}` .

* La variable génère une valeur de chaîne.

* Pour vous aider lors de la création d&apos;une requête, il existe un code couleur :

  * Les clauses `FROM`, `SELECT`, `FACET` et `WHERE` sont en rose.
  * identifiant sont en noir.
  * Les fonctions sont en bleu.
  * Les cordes sont en vert.
  * Les entiers sont en marron.

* Consultez notre page [Comment utiliser NRQL : les mécanismes de requête](/docs/query-your-data/nrql-new-relic-query-language/get-started/introduction-nrql-how-nrql-works/#syntax) si vous souhaitez en savoir plus sur l&apos;écriture de requêtes avec NRQL.

Pour les restrictions liées à l&apos;écriture de requêtes, voir [Écriture de requêtes](#query-variable-rules).

## Utiliser des variables de modèle [#create-variables]

Nous vous guiderons dans la création d&apos;une variable de modèle, puis nous vous donnerons quelques [exemples](#examples) de différents types de variables de modèle.

La création d’une variable de modèle se compose de deux étapes.

<Steps>
  <Step>
    ### Définir la variable de modèle [#step1]

    Tout d’abord, vous allez définir une variable de modèle. Il s&apos;agit de la variable que vous utiliserez dans une requête NRQL pour créer un widget.

    Pour définir une variable :

    1. À partir d&apos;un nouveau dashboard sans variables, cliquez sur le bouton Modifier <Icon name="fe-edit-2" /> bouton, puis cliquez sur le bouton <DNT>**+ Add variable**</DNT> situé dans le coin supérieur gauche. Une fois que vous avez terminé d’ajouter des variables, cliquez sur <DNT>**Done editing**</DNT>.

       Si le dashboard inclut un widget, cliquez sur le bouton <DNT>**+ Add variable**</DNT>.

       <img title="Dashboard without widgets" alt="Dashboard without widgets" src="/images/dashboards_screenshot-full_add-variables.webp" />

    2. Terminez le workflow <DNT>**Add variable**</DNT>. Vous trouverez ci-dessous quelques règles et conseils pour chacun des domaines.

    <table>
      <thead>
        <tr>
          <th width={200}>
            **Champ**
          </th>

          <th>
            **Détails**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            Nom à utiliser dans la requête
          </td>

          <td>
            Le nom de la variable. C&apos;est ce que vous utiliserez dans la requête, entouré de `{{...}}`. Par exemple, si vous utilisez `country` ici comme nom, alors lors de l&apos;écriture d&apos;une requête, vous appellerez la variable avec `{{country}}`.

            Les noms de variables doivent commencer par une lettre et peuvent contenir des lettres, des chiffres et des traits de soulignement.
          </td>
        </tr>

        <tr>
          <td>
            Nom d&apos;affichage
          </td>

          <td>
            Facultatif. Voici comment la variable s&apos;affichera au-dessus du dashboard afin que l&apos;utilisateur dashboard sache ce que la variable représente. Si ce champ est laissé vide, la valeur du nom principal sera utilisée.
          </td>
        </tr>

        <tr>
          <td>
            Type
          </td>

          <td>
            Il existe trois options :

            * <DNT>**Query**</DNT>:Vous pouvez écrire une requête qui renverra une liste dynamique d&apos;options utilisées dans le menu déroulant. Par exemple, la requête suivante renverrait une liste dynamique de `country` valeurs :

              ```sql
              SELECT uniques(countryCode) FROM PageAction SINCE 2 days ago
              ```

              Pour les règles et conseils sur l&apos;écriture de requêtes, voir [les variables de type requête](#query-variable-rules).

            * <DNT>**List**</DNT>:Une liste de valeurs séparées par des virgules qui sont utilisées pour remplir les options dans le menu déroulant. Par exemple, vous pouvez définir manuellement une liste de valeurs `country` à l&apos;aide d&apos;une liste comme : `ES, US, CA.`

            * <DNT>**Text field**</DNT>:Au lieu d&apos;une liste déroulante de valeurs parmi lesquelles choisir, cela permet à l&apos;utilisateur dashboard de filtrer le texte qu&apos;il saisit.
          </td>
        </tr>

        <tr>
          <td>
            Compte
          </td>

          <td>
            Présent uniquement pour le type `query` . Pour les organisations avec plusieurs comptes, cela définit le compte qui fait l&apos;objet de la requête.
          </td>
        </tr>

        <tr>
          <td>
            Qequête
          </td>

          <td>
            Écrivez ici votre requête en utilisant `uniques(attribute)`.
          </td>
        </tr>

        <tr>
          <td>
            Ignorer le sélecteur d&apos;intervalle de temps
          </td>

          <td>
            Facultatif. Présent uniquement pour le type de requête. En désactivant cette option, la requête sera exécutée en utilisant la valeur du sélecteur d&apos;intervalle de temps sélectionné dans le dashboard. De cette façon, lorsque la valeur du sélecteur d&apos;intervalle de temps change, les résultats de la liste déroulante de la variable répondront dynamiquement à la nouvelle plage de temps sélectionnée.
          </td>
        </tr>

        <tr>
          <td>
            Sélection multiple
          </td>

          <td>
            Facultatif. Cette option permet à une liste déroulante d&apos;autoriser plusieurs sélections en même temps au lieu d&apos;une seule sélection.
          </td>
        </tr>

        <tr>
          <td>
            Afficher le bouton Apply
          </td>

          <td>
            Facultatif. Apparaît uniquement lorsque vous activez <DNT>**multi-value**</DNT>. Activez cette bascule pour afficher un bouton <DNT>**Apply**</DNT> ou <DNT>**Cancel**</DNT> en bas du filtre de liste déroulante de la variable. Pendant que ce bouton apparaît sur la liste déroulante du filtre, cliquez dessus pour appliquer les modifications aux valeurs.
          </td>
        </tr>

        <tr>
          <td>
            Valeurs par défaut
          </td>

          <td>
            Facultatif. Ce sont les valeurs par défaut sur lesquelles le dashboard filtrera. Par exemple, si vous avez utilisé la requête `country` ci-dessus, vous pouvez saisir `ES` comme valeur par défaut et le dashboard filtrera automatiquement sur cette valeur. Vous pouvez également sélectionner toutes les possibilités.

            Pour utiliser plusieurs valeurs sur une clause `WHERE` , vous devez utiliser [`IN`](/docs/query-your-data/nrql-new-relic-query-language/get-started/nrql-syntax-clauses-functions/#sel-where) au lieu de `=`.

            La bascule **Include variable** déterminera la configuration par défaut, inclure ou exclure, pour cette variable dans le dashboard. Cette configuration peut être modifiée par l&apos;utilisateur visualisant le dashboard en utilisant le bouton **Include variable** dans le menu déroulant de la liste des variables. La configuration sélectionnée par l&apos;utilisateur sera valable pendant toute la durée de la session.

            <Callout variant="important">
              Notez que vous ne pouvez configurer les valeurs par défaut que lorsque la bascule est définie pour inclure une variable. Une fois que vous avez sélectionné les valeurs par défaut, vous pouvez basculer la bascule pour que la variable ne soit pas incluse par défaut. Les valeurs par défaut seront présélectionnées lorsqu&apos;un utilisateur tournera la bascule pour inclure la variable dans le menu déroulant de la liste des variables.
            </Callout>
          </td>
        </tr>

        <tr>
          <td>
            Format de sortie
          </td>

          <td>
            Cela vous permet de modifier la manière dont les données générées par la variable sont traitées dans la requête. L&apos;option sélectionnée que vous choisissez ici est liée à la requête que vous allez ajouter plus tard dans le widget. L&apos;option <DNT>**default**</DNT> est une chaîne car il s&apos;agit de l&apos;option la plus courante utilisée dans la majorité des requêtes. Vous pouvez modifier l&apos;option <DNT>**default**</DNT> par l&apos;une des suivantes :

            * <DNT>**String**</DNT>:Utilisez ceci pour les valeurs de texte non numériques.
            * <DNT>**Number**</DNT>:Utilisez ceci pour les valeurs numériques.
            * <DNT>**Identifier**</DNT>:Utilisez ceci lorsque vous souhaitez remplacer des parties de la requête, comme les noms d&apos;événements ou les noms de facettes.
          </td>
        </tr>
      </tbody>
    </table>

    Voyez cet exemple de ce à quoi ressemblerait une variable de modèle pour les valeurs `country` :

    <img width="40%;" title="Define a template variable" alt="Define a template variable" src="/images/dashboards_screenshot-crop_variable-country-example.webp" />

    Une fois que vous avez défini votre variable de modèle, vous pouvez ajouter un widget qui utilise votre variable de modèle créée.
  </Step>

  <Step>
    ### Créer un widget qui utilise la variable de modèle [#step2]

    Une fois que vous avez configuré une variable de modèle, vous aurez besoin d&apos;un widget sur un dashboard qui utilise la variable que vous avez définie dans leur requête.

    Pour créer un widget :

    1. Depuis votre dashboard cliquez sur le bouton <DNT>**+ Add widget**</DNT> situé dans le coin supérieur droit.

    2. Il y a 2 options :

       * Ajouter un graphique. Vous créerez votre widget à l&apos;aide du [générateur de requêtes](/docs/query-your-data/explore-query-data/query-builder/introduction-query-builder/).
       * Ajoutez du texte, des images ou des liens. Vous créerez votre widget en ajoutant votre propre contenu à l&apos;aide de notre [éditeur Markdown](/docs/query-your-data/explore-query-data/dashboards/manage-your-dashboard/#markdown).

    3. Nous choisissons l&apos;option <DNT>**Add a chart**</DNT> .

    4. Ajoutez votre requête et cliquez sur <DNT>**Run**</DNT>.

       En suivant notre exemple mentionné à l’étape 1 :

       ```sql
       SELECT countryCode 
       FROM PageAction 
       WHERE countryCode IN ({{countryCode}})
       ```

       <img title="Example of adding a widget" alt="Example of adding a widget" src="/images/dashboards_screenshot-crop_example-add-widget.webp" />

       Notez que ce sont les clauses NRQL qui accepteront les variables de modèle comme valeurs : `SELECT`, `FROM`, `FACET`, `ORDER BY` et `WHERE`.

       Au lieu de cela, la liste suivante de clauses NRQL n&apos;acceptera pas de variables de modèle comme arguments : `AS`, `COMPARE WITH`, `LIMIT`, `OFFSET`, `SINCE`, `SLIDE BY`, `TIMESERIES`, `UNTIL` et `WITH`....

    5. Cliquez <DNT>**Add to dashboard**</DNT>
  </Step>
</Steps>

Une fois que vous avez terminé de définir une variable de modèle et d&apos;ajouter un widget qui fait référence à cette variable, vous pouvez vérifier qu&apos;il fonctionne comme prévu en choisissant différentes options dans la barre de variables de modèle et en voyant si le widget change en fonction de votre sélection.

Voici un exemple du widget résultant, à droite, avec la liste déroulante `country` à gauche.

<img title="Country template variable example" alt="Country template variable example" src="/images/dashboards_screenshot-crop_country-variable-example.webp" />

## Règles d&apos;écriture d&apos;une variable de modèle de type requête [#query-variable-rules]

Comme indiqué dans la [section sur la définition des variables de modèle](#step1), il existe trois types de variables : requête, liste et champ de texte. La variable de type requête est la plus complexe à créer car vous devez créer une requête fonctionnelle qui renvoie **une liste de valeurs**, qui sont ensuite utilisées pour remplir la liste déroulante dans la barre de variables de modèle en haut du dashboard.

<Callout variant="important">
  Notez qu’il s’agit d’un sujet différent de l’écriture de requêtes qui utilisent une variable de modèle.
</Callout>

Vous pouvez utiliser presque n&apos;importe quelle requête NRQL à condition qu&apos;elle renvoie une liste de valeurs. Pour cela, vous pouvez utiliser soit les fonctions `uniques` soit `keyset` .

Avec [`uniques`](/docs/nrql/nrql-syntax-clauses-functions/#func-uniques):

```sql
FROM PageAction SELECT uniques(countryCode)
```

```sql
-- you can use the second param to define the maximum number of results to be listed.
FROM PageAction SELECT uniques(countryCode, 10000) --> this will return up to 10k results
```

Avec [`keyset`](/docs/nrql/nrql-syntax-clauses-functions/#keyset):

```sql
-- with `keyset`, you'll get a list with all of the attributes from the table you're querying from
FROM PageAction SELECT keyset() SINCE 1 day ago  
```

Gardez à l’esprit que les variables imbriquées ne sont pas prises en charge car il ne peut pas y avoir de variables à l’intérieur des variables.

## Quelques exemples [#examples]

Voici quelques types différents d’implémentations de variables de modèle.

<CollapserGroup>
  <Collapser id="multi-value" title="Utiliser l'option à valeurs multiples">
    Vous pouvez activer l&apos;option multi-valeurs pour permettre à l&apos;utilisateur de sélectionner plusieurs valeurs dans une liste déroulante au lieu d&apos;une seule. Cela est utile lorsque vous souhaitez filtrer des données selon plusieurs critères simultanément.

    La fonction multi-valeurs est disponible pour les types de variables de requête et de liste. Les variables de champ de texte ne prennent pas en charge l&apos;option multi-valeurs.

    Pour activer les valeurs multiples :

    1. Lors de la création d&apos;une variable de modèle de requête ou de liste, sélectionnez l&apos;option <DNT>**Multi-value**</DNT>.
    2. Dans votre requête widget, utilisez l&apos;opérateur `IN` au lieu de `=` pour gérer plusieurs valeurs sélectionnées.

    /* Vous pouvez activer l&apos;option multi-valeurs à partir de la section des options d&apos;affichage lors de la création d&apos;une variable de type `NRQL/ENUM`. */

    Voici un exemple où vous nommeriez votre variable `{{MultiValue}}` et utiliseriez cette requête pour renseigner ses valeurs :

    ```sql
    SELECT uniques(eventId) FROM AjaxRequest
    ```

    /* &lt;img width=&quot;30%;&quot; title=&quot;Exemple de variable de modèle à valeurs multiples&quot; alt=&quot;Exemple de variable de modèle à valeurs multiples&quot; src=&quot;/images/dashboards_screenshot-crop_add-multivalue.webp&quot; /&gt; */

    Ensuite, vous créeriez un widget avec la requête suivante :

    ```sql
    SELECT count(*) FROM AjaxRequest WHERE eventId IN ({{MultiValue}})
    ```

    /* &lt;img width=&quot;80%;&quot; title=&quot;Création d&apos;un widget&quot; alt=&quot;Création d&apos;un widget&quot; src=&quot;/images/dashboards_screenshot-full_multivalue-add-widget.webp&quot; /&gt; */
  </Collapser>

  <Collapser id="multiple-variables" title="Utiliser plusieurs variables pour un widget">
    Bien que vous ne puissiez définir qu&apos;une seule variable de modèle à la fois, vous pouvez référencer plusieurs variables dans le même widget.

    Pour cet exemple, vous devez configurer les deux variables :

    1. `countryCode` variable : utilisez la requête présentée plus haut dans ce document :

       ```sql
       SELECT uniques(countryCode) FROM PageAction SINCE 2 days ago
       ```

    2. `city` variable avec une requête similaire :

       ```sql
       SELECT uniques(city) FROM PageView SINCE 1 week ago
       ```

    Voici un exemple utilisant les variables de modèle ci-dessus avec des valeurs uniques pour créer le widget :

    ```sql
    SELECT countryCode, city FROM PageAction 
    WHERE countryCode = {{countryCode}} AND city = {{city}}
    ```

    /* &lt;img title=&quot;Création d&apos;un widget utilisant plusieurs variables&quot; alt=&quot;Création d&apos;un widget utilisant plusieurs variables&quot; src=&quot;/images/dashboards_screenshot-crop_add-widget-multiple-variable.webp&quot; /&gt; */

    Si vos variables prennent en charge plusieurs valeurs (telles que `Chicago`, `New York`, `Paris` pour votre variable `city` ), vous devez utiliser `IN`:

    ```sql
    SELECT countryCode, city FROM PageAction 
    WHERE countryCode IN ({{countryCode}}) AND city IN ({{city}})
    ```
  </Collapser>

  <Collapser id="variables-partial-match" title="Utiliser des variables et une correspondance partielle">
    En utilisant des variables et [des expressions régulières](/docs/query-your-data/nrql-new-relic-query-language/get-started/nrql-syntax-clauses-functions/#func-capture), vous pouvez créer un filtre, à condition d&apos;être sûr qu&apos;une partie du filtre est fixe.

    Vous devez utiliser cette correspondance partielle si vous souhaitez utiliser `LIKE`.

    Disons que vous souhaitez filtrer par version de sortie. La requête renvoie quelque chose comme : `release-1234`.

    Vous pouvez créer une variable en utilisant [`aparse`](/docs/query-your-data/nrql-new-relic-query-language/get-started/nrql-syntax-clauses-functions/#func-aparse) pour analyser le numéro de version :

    ```sql
    SELECT uniques(aparse(platformVersion, 'release-*')) FROM PageView 
    ```

    /* &lt;img width=&quot;40%;&quot; title=&quot;Création de la variable de version de sortie&quot; alt=&quot;Création de la variable de version de sortie&quot; src=&quot;/images/dashboards_screenshot-crop_add-var-sortie-version.webp&quot; /&gt; */

    Créez ensuite un widget avec la requête suivante :

    ```sql
    SELECT count(*) FROM PageAction 
    WHERE aparse(platformVersion, 'release-*') IN ({{releaseversion}}) FACET platformVersion
    ```

    /* &lt;img title=&quot;Création du widget&quot; alt=&quot;Création du widget&quot; src=&quot;/images/dashboards_screenshot-crop_add-widget-aparse.webp&quot; /&gt; */

    Ou si vous préférez, vous pouvez utiliser la commande [`capture`](/docs/query-your-data/nrql-new-relic-query-language/get-started/nrql-syntax-clauses-functions/#func-capture) :

    ```sql
    SELECT count(*) FROM PageAction 
    WHERE capture(platformVersion, r'release-(?P<platformVersion>\d+)') IN ({{releaseversion}}) FACET platformVersion
    ```

    /* &lt;img title=&quot;Création du widget&quot; alt=&quot;Création du widget&quot; src=&quot;/images/dashboards_screenshot-crop_add-widget-capture.webp&quot; /&gt; */
  </Collapser>

  <Collapser id="variables-regex-like-rlike" title="Utiliser des variables et des expressions régulières avec LIKE et RLIKE">
    Vous pouvez utiliser `LIKE` et `RLIKE` comme variables de modèle pour filtrer les données dans un dashboard. Pour utiliser cette fonctionnalité, la valeur que vous ajoutez lors de la création de la variable de modèle doit utiliser les symboles génériques `%` au début et à la fin de la valeur.

    Voici un exemple. Vous définissez une variable de modèle de chaîne avec les valeurs suivantes :

    * **Nom à utiliser dans la requête :** line\_filter
    * **Type :** `Text field`
    * **Valeur par défaut :** %@%.com
    * **Format de sortie :** `String`

    /* &lt;img width=&quot;40%;&quot; title=&quot;Ajouter `LIKE` comme variable de modèle&quot; alt=&quot;Ajouter `LIKE` comme variable de modèle&quot; src=&quot;/images/dashboards_screenshot-crop_add-var-like-filter.webp&quot; /&gt; */

    Vous pouvez ensuite créer un graphique widget et utiliser votre variable comme ceci :

    ```sql
    FROM NrdbQuery SELECT user WHERE user LIKE {{like_filter}}
    ```

    /* &lt;img title=&quot;Ajouter `LIKE` comme variable de modèle&quot; alt=&quot;Ajouter `LIKE` comme variable de modèle&quot; src=&quot;/images/dashboards_screenshot-crop_add-widget-like-filter.webp&quot; /&gt; */

    ou comme ça :

    ```sql
    FROM NrdbQuery SELECT user WHERE user RLIKE {{like_filter}}
    ```
  </Collapser>

  <Collapser
    id="variables-dynamic-grouping"
    title={<>Utiliser la variable <InlineCode>
      facet
    </InlineCode> avec une requête NRQL</>
    }
  >
    Vous pouvez créer une variable de type NRQL avec un format de sortie de chaîne et l&apos;utiliser après une clause `FACET` pour regrouper par différentes valeurs.

    Par exemple, vous pouvez créer une variable de modèle nommée `{{userAgentName}}` qui ressemblerait à :

    ```sql
    SELECT uniques(userAgentName) FROM PageAction
    ```

    /* &lt;img width=&quot;30%;&quot; title=&quot;Création de la variable&quot; alt=&quot;Création de la variable&quot; src=&quot;/images/dashboards_screenshot-crop_add-var-facet.webp&quot; /&gt; */

    Ensuite, vous créerez un widget avec la requête suivante :

    ```sql
    SELECT count(*) FROM PageAction 
    WHERE userAgentName={{userAgentName}} FACET userAgentName
    ```

    /* &lt;img title=&quot;Création d&apos;un widget à l&apos;aide d&apos;une facette&quot; alt=&quot;Création d&apos;un widget à l&apos;aide d&apos;une facette&quot; src=&quot;/images/dashboards_screenshot-crop_add-widget-facet.webp&quot; /&gt; */
  </Collapser>

  <Collapser id="variables-dynamic-grouping" title="Utiliser des variables pour le regroupement dynamique">
    Vous pouvez créer une variable avec un format de sortie `identifier` et l&apos;utiliser après une clause `FACET` pour regrouper par différentes valeurs.

    Par exemple, vous pouvez créer une variable `{{location}}` :

    * **Nom à utiliser dans la requête :** location
    * **Type :** `List`
    * **Valeurs séparées par des virgules :** `countryCode` et `city`
    * **Format de sortie :** `Identifier`

    /* &lt;img width=&quot;40%;&quot; title=&quot;Ajout de la variable pour le regroupement dynamique&quot; alt=&quot;Ajout de la variable pour le regroupement dynamique&quot; src=&quot;/images/dashboards_screenshot-crop_add-var-dynamic-grouping.webp&quot; /&gt; */

    Ensuite, vous créerez un widget avec la requête suivante :

    ```sql
    SELECT count(*) FROM PageAction FACET {{location}}
    ```

    /* &lt;img title=&quot;Ajout du widget pour le regroupement dynamique&quot; alt=&quot;Ajout du widget pour le regroupement dynamique&quot; src=&quot;/images/dashboards_screenshot-crop_add-widget-dynamic-grouping.webp&quot; /&gt; */
  </Collapser>

  <Collapser id="variables-dynamically-change-percentile" title="Utiliser des variables pour modifier dynamiquement le percentile">
    Vous pouvez créer une variable avec le format de sortie `number` et l&apos;utiliser dans une fonction percentile .

    Par exemple, vous pouvez créer une variable `{{percentile}}` :

    * **Nom à utiliser dans la requête :** percentile
    * **Type :** `List`
    * **Valeurs séparées par des virgules :** `55` et `90`
    * **Format de sortie :** `Number`

    /* &lt;img width=&quot;40%;&quot; title=&quot;Ajout de la variable pour modifier dynamiquement le percentile&quot; alt=&quot;Ajout de la variable pour modifier dynamiquement le percentile&quot; src=&quot;/images/dashboards_screenshot-crop_add-var-dynamic-percentile.webp&quot; /&gt; */

    Ensuite, vous créerez un widget avec la requête suivante :

    ```sql
    SELECT percentile(duration, {{percentile}}) FROM PageAction
    ```

    /* &lt;img title=&quot;Ajout du widget pour modifier dynamiquement le percentile&quot; alt=&quot;Ajout du widget pour modifier dynamiquement le percentile&quot; src=&quot;/images/dashboards_screenshot-crop_add-widget-dynamic-percentile.webp&quot; /&gt; */
  </Collapser>

  <Collapser id="variables-filter" title="Utiliser des variables pour filtrer">
    Pour utiliser des variables pour le filtrage, il vous suffit d&apos;ajouter la variable créée sur le côté droit d&apos;une clause `WHERE` , comme ceci :

    ```sql
    SELECT countryCode, city FROM PageAction 
    WHERE countryCode IN ({{countryCode}})
    ```

    /* &lt;img title=&quot;Utiliser des variables pour filtrer&quot; alt=&quot;Utiliser des variables pour filtrer&quot; src=&quot;/images/dashboards_screenshot-crop_variables-to-filter.webp&quot; /&gt; */
  </Collapser>

  <Collapser id="ignore-time-picker" title="Utiliser l'option ignorer le sélecteur d'intervalle de temps">
    Par défaut, l&apos;option « ignorer le sélecteur d&apos;intervalle de temps » est activée, ce qui signifie que la requête est toujours exécutée en utilisant la valeur de plage de temps par défaut `1 hour`, même si le sélecteur d&apos;intervalle de temps dans le dashboard a une valeur différente sélectionnée (ex. `5 minutes`, `3 hours`, etc.). L&apos;exception pour ce cas est lorsque la requête a une plage horaire explicite définie avec une clause `SINCE` , comme par exemple :

    ```sql
    SELECT uniques(eventId) 
    FROM AjaxRequest 
    SINCE 5 minutes ago
    ```

    Les résultats seront de l&apos;ordre des 5 dernières minutes.

    Lorsque l&apos;option &quot;ignorer le sélecteur d&apos;intervalle de temps&quot; est désactivée, la requête s&apos;exécutera avec la valeur sélectionnée dans le sélecteur d&apos;intervalle de temps. Par exemple, si vous réglez le sélecteur d&apos;intervalle de temps à 30 minutes, comme dans la capture d&apos;écran ci-dessous, dans le formulaire d&apos;édition des variables, le champ « ignorer le sélecteur d&apos;intervalle de temps » sera désactivé.

    <img title="Example time picker" alt="A screenshot showing the time picker" src="/images/dashboards_screenshot-crop_example-time-picker.webp" />

    Cela donne les valeurs des 30 dernières minutes. Lorsque vous définissez la valeur du sélecteur d&apos;intervalle de temps sur <DNT>**Default**</DNT> et que votre requête comporte une clause `SINCE` , la dernière valeur sera utilisée pour exécuter la requête.

    /* &lt;img title=&quot;Exemple de formulaire&quot; alt=&quot;Une capture d&apos;écran montrant le formulaire variable&quot; src=&quot;/images/dashboards_screenshot-crop_example-form.webp&quot; /&gt; */
  </Collapser>

  <Collapser
    id="from-data-types"
    title={<>Utilisez des variables pour sélectionner votre type de données <InlineCode>
      FROM
    </InlineCode></>
    }
  >
    Parfois, vous avez des requêtes qui appliquent les mêmes règles à différents types de données. Voici des exemples de deux widgets identiques, à l&apos;exception du type de données :

    * widget 1:
      ```sql
      SELECT count(*) FROM DataType1 SINCE 1 day ago
      ```
    * widget 2:
      ```sql
      SELECT count(*) FROM DataType2 SINCE 1 day ago
      ```

    Au lieu de créer deux widgets séparés, vous pouvez créer un widget avec une variable qui a l&apos;**Identifier** pour **Output format**. Ensuite, vous pouvez l&apos;utiliser dans une clause `FROM` pour interroger différents types de données.

    Par exemple, vous pouvez créer une variable `{{dataType}}` de type **Liste** avec deux valeurs possibles : `DataType1` et `DataType2`. Vous définiriez le **Output format** sur **Identifier**:

    <img title="Screenshot showing how to add variable for FROM clause" alt="Screenshot showing how to add variable for FROM clause" src="/images/dashboards_screenshot-crop_add-variable-for-from-clause.webp" />

    Ensuite, vous devez créer et exécuter le widget :

    <img title="Screenshot showing how to create a widget query" alt="Screenshot showing how to create a widget query" src="/images/dashboards_screenshot-crop_create-widget-for-from-clause.webp" />
  </Collapser>

  <Collapser id="titles-labels-on-your-list-variables" title="Utilisez des titres ou des étiquettes sur vos variables de liste">
    À l’aide de la fonctionnalité [Gérer le dashboard JSON](https://docs.newrelic.com/docs/query-your-data/explore-query-data/dashboards/manage-your-dashboard/#manage-json), vous pouvez définir des titres ou des étiquettes personnalisés pour les valeurs de vos variables basées sur des listes. Cela vous permet de modifier ce qui apparaît dans le menu déroulant de la variable.

    Par exemple, supposons que vous ayez une variable comme celle-ci :

    ```JSON
      {
        "name": "list_string",
        "items": [
          {
            "title": null,
            "value": "1"
          },
          {
            "title": null,
            "value": "2"
          },
          {
            "title": null,
            "value": "3"
          }
        ],
        "defaultValues": [],
        "nrqlQuery": null,
        "options": {
          "excluded": false
        },
        "title": "List of string",
        "type": "ENUM",
        "isMultiSelection": false,
        "replacementStrategy": "STRING"
      }
    ```

    Si vous ouvrez le JSON et ajoutez des valeurs aux champs `title` :

    ```JSON
    {
      "name": "list_string",
      "items": [
        {
          "title": "Title One",
          "value": "1"
        },
        {
          "title": "Title Two",
          "value": "2"
        },
        {
          "title": "Title Three",
          "value": "3"
        }
      ],
      "defaultValues": [],
      "nrqlQuery": null,
      "options": {
        "excluded": false
      },
      "title": "List of string",
      "type": "ENUM",
      "isMultiSelection": false,
      "replacementStrategy": "STRING"
    }
    ```

    Les titres que vous avez ajoutés s&apos;afficheront dans le menu déroulant de la variable. Cela n&apos;affectera en rien la logique de votre variable ou de vos widgets.

    <img title="Screenshot showing the list based variable dropdown" alt="Screenshot showing the list based variable dropdown" src="/images/template_variable_list_based_features.webp" />
  </Collapser>

  <Collapser id="variables-widget-titles" title="Utiliser des variables dans les titres de widgets">
    Vous pouvez utiliser des variables de template dans les titres de widgets pour créer des titres dynamiques qui se mettent à jour automatiquement lorsque vous modifiez les valeurs des variables. Cela est utile pour fournir du contexte sur les données affichées.

    Vous pouvez ajouter des variables aux titres des widgets, soit via l&apos;interface utilisateur lors de la modification d&apos;un widget, soit en utilisant le [JSON du dashboard](/docs/query-your-data/explore-query-data/dashboards/manage-your-dashboard/#manage-json).

    Par exemple, si vous avez une variable nommée `{{products}}` avec des valeurs telles que &quot;Alerts&quot;, &quot;APM&quot;, &quot;dashboards&quot; et &quot;Catalog&quot;, vous pouvez créer un widget avec un titre dynamique comme `Page views per nerdlet: {{products}}`:

    <img title="Screenshot showing the widget edit options" alt="Screenshot showing the widget edit options" src="/images/variables_in_widget_titles.webp" />

    Lorsque vous sélectionnez &quot;Alertes&quot; dans le menu déroulant des variables, le titre du widget se met automatiquement à jour pour afficher la valeur sélectionnée. Si vous sélectionnez plusieurs valeurs « Alertes », « APM » et « dashboards », le titre se met à jour pour afficher toutes les valeurs sélectionnées.

    Cette fonctionnalité fonctionne avec n&apos;importe quel type de variable de template (Requête, Liste ou Champ texte) et aide les utilisateurs à comprendre les données qu&apos;ils visualisent sans avoir à vérifier les filtres des variables.
  </Collapser>

  <Collapser id="variables-markdown-widgets" title="Utiliser des variables dans les widgets Markdown">
    Vous pouvez utiliser des variables de template dans les widgets markdown pour créer du contenu textuel, de la documentation ou des diagrammes dynamiques qui se mettent à jour en fonction de la sélection de variables. C&apos;est particulièrement puissant pour créer des notes contextuelles ou des visualisations telles que des diagrammes Mermaid.

    Par exemple, si vous avez une variable `{{products}}` avec des valeurs comme « Alertes », « APM », « dashboards » et « Catalogue », vous pouvez l&apos;utiliser dans du contenu Markdown de différentes manières :

    **Exemple 1 : Contenu textuel dynamique**

    Vous pouvez inclure la variable (`{{products}}`) directement dans votre texte Markdown pour créer une documentation dynamique qui se met à jour en fonction de la sélection :

    <img title="Screenshot showing the markdown text and its preview" alt="Screenshot showing the markdown text and its preview" src="/images/text_edit.webp" />

    **Exemple 2 : Diagrammes Mermaid dynamiques**

    Vous pouvez également utiliser la variable (`{{products}}`) dans le texte Markdown des diagrammes Mermaid pour créer des diagrammes de flux qui se mettent à jour dynamiquement :

    <img title="Screenshot showing the markdown text and its mermaid diagram preview" alt="Screenshot showing the markdown text and its mermaid diagram preview" src="/images/markdown_mermaid_diagram.webp" />

    Dans cet exemple, le diagramme montre un flux de décision où la variable `{{products}}` détermine quelles données conserver ou rejeter. Lorsque vous modifiez la sélection des variables, le diagramme se met à jour pour refléter les produits sélectionnés.

    <Callout variant="Preview" title="remarque">
      Lors de l&apos;édition d&apos;un widget markdown, le mode aperçu affiche le nom de la variable (par exemple, `{{products}}`), et non la valeur réelle. Cependant, lorsque vous enregistrez et consultez le dashboard, les variables sont remplacées par leurs valeurs réelles.
    </Callout>
  </Collapser>
</CollapserGroup>