---
title: Prévisions NRQL
tags:
  - Prediction on a chart
  - Forecasting on a chart
  - NRQL Predictions
  - Forecasting
metaDescription: Use NRQL Predictions to predict future trends and potential performance issues.
freshnessValidatedDate: never
translationType: machine
---

<Callout title="Aperçu">
  Nous travaillons toujours sur cette fonctionnalité, mais nous aimerions que vous l&apos;essayiez !

  Cette fonctionnalité est actuellement fournie dans le cadre d&apos;un programme d&apos;aperçu conformément à nos [politiques de pré-sortie](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy).
</Callout>

<DNT>**NRQL Predictions**</DNT> dans New Relic utilise les données historiques de vos métriques pour prédire les tendances futures, fournissant des informations détaillées sur la façon dont les métriques pourraient se comporter dans le futur. Cette approche proactive vous aide à visualiser les tendances et à anticiper les problèmes potentiels, permettant des interventions rapides pour maintenir des performances optimales du système. Bien que <DNT>**NRQL Predictions**</DNT> n’identifie pas lui-même les problèmes potentiels, il vous fournit les informations nécessaires pour évaluer les tendances et planifier les défis futurs.

Pour l&apos;identification automatique des problèmes potentiels, vous pouvez vous inscrire à la fonctionnalité <DNT>**[Predictive Alerts](/docs/query-your-data/explore-query-data/use-charts/nrql-predictions)**</DNT> , actuellement disponible en version préliminaire publique. <DNT>**Predictive Alerts**</DNT> fonctionne aux côtés de <DNT>**NRQL Predictions**</DNT> pour déclencher automatiquement des alertes lorsque les tendances projetées indiquent un problème potentiel, permettant une gestion proactive de votre système.

## Tarifs [#pricing]

Votre utilisation de <DNT>**NRQL Predictions**</DNT> est facturable pendant l&amp;apos;aperçu conformément à votre commande, conformément au modèle de tarification associé à votre compte. Les requêtes de langage New Relic (NRQLS) liées à l&amp;apos;utilisation de cette fonctionnalité sont facturables en tant que produit Core calculer. Si cette fonctionnalité devient généralement disponible, votre utilisation sera facturable conformément à votre commande.

Pour plus de détails sur les prix, veuillez contacter notre équipe commerciale ou vous référer à votre commande.

## Inscription [#enrollment]

Pour vous inscrire à la fonctionnalité <DNT>**NRQL Predictions**</DNT> , accédez à <DNT>**[one.newrelic.com &gt; Administration](https://one.newrelic.com/admin-portal) &amp;gt; Preview &amp;amp; Trials**</DNT> et activez <DNT>**NRQL predictions**</DNT>.

## Ajouter une prédiction sur un graphique linéaire ou à aires [#add-prediction]

Vous pouvez ajouter des prédictions aux graphiques linéaires et à aires des deux manières suivantes :

<CollapserGroup>
  <Collapser id="prediction-on-existing-chart" title="Ajouter une prédiction à un graphique existant.">
    Pour ajouter une prédiction à un graphique existant, suivez ces étapes :

    <Steps>
      <Step>
        ### Accéder à un graphique linéaire ou à aires [#access-a-chart]

        1. Accédez à [one.newrelic.com &gt; All capabilities](https://one.newrelic.com/all-capabilities).
        2. Pour ajouter une prédiction à un graphique linéaire ou à aires, sélectionnez-le à partir de <DNT>**Dashboards**</DNT> ou ouvrez-le à partir de <DNT>**Metrics and events**</DNT>.
      </Step>

      <Step>
        ### Ajouter une prédiction [#add-prediction]

        Pour ajouter une prédiction, à partir de la <Icon name="fe-more-horizontal" /> menu, sélectionnez <DNT>**Predict trend**</DNT>. Dans **Data Explorer**, la tendance de prédiction apparaît sur le graphique, projetant les tendances futures. La plage de prédiction est automatiquement définie sur 20 % de la fenêtre de requête et surlignée en gris. Le graphique apparaît en lignes pointillées dans la plage prédite.

        Le mot clé `PREDICT` est ajouté à la requête du graphique. Vous pouvez [affiner la requête](#customize-prediction-range) en fonction de vos besoins et l&amp;apos;exécuter pour obtenir la tendance mise à jour.

        <Callout variant="tip">
          Lorsque vous ajoutez une prédiction à un graphique en aires, le type de graphique devient un graphique linéaire avec prédiction.
        </Callout>
      </Step>

      <Step>
        ### Ajouter au dashboard [#add-to-dashboard]

        1. Pour ajouter le graphique avec prédiction à un dashboard, cliquez sur <DNT>**Add to dashboard**</DNT>.
        2. Entrez un nom de widget.
        3. Sélectionnez un dashboard dans lequel vous souhaitez ajouter le widget ou créez un nouveau dashboard pour celui-ci.

        Vous pouvez maintenant visualiser le graphique avec prédiction sur le dashboard sélectionné.
      </Step>
    </Steps>
  </Collapser>

  <Collapser id="use-predict-clause" title="Utilisez la clause « PREDICT » dans une requête NRQL.">
    Pour ajouter la clause `PREDICT` à une requête NRQL, procédez comme suit :

    <Steps>
      <Step>
        ### Créer une requête NRQL [#create-query]

        1. Accédez à [one.newrelic.com](https://one.newrelic.com) et sélectionnez le compte dans lequel vous souhaitez créer la requête.
        2. Pour ouvrir <DNT>**Data Explorer**</DNT>, sélectionnez <DNT>**Query Your Data**</DNT>.
        3. Composez une requête de série chronologique en utilisant la syntaxe NRQL. Consultez [la documentation sur la syntaxe NRQL](https://docs.newrelic.com/docs/nrql/nrql-syntax-clauses-functions) pour plus d&amp;apos;informations.

        <Callout variant="important">
          Assurez-vous que la requête n&apos;inclut pas [de données d&apos;intervalle de temps métrique](/docs/data-analysis/metrics/analyze-your-metrics/data-collection-metric-timeslice-event-data#timeslice-data), la clause [`COMPARE WITH`](/docs/nrql/nrql-syntax-clauses-functions/#sel-compare) ou [des agrégations imbriquées](/docs/nrql/using-nrql/nested-aggregation-make-ordered-computations-single-query) dans [des sous-requêtes](/docs/nrql/using-nrql/subqueries-in-nrql/), car les prédictions ne sont pas prises en charge dans ces cas.
        </Callout>
      </Step>

      <Step>
        ### Ajouter une prédiction [#add-prediction-to-query]

        Pour ajouter une prédiction au graphique, ajoutez la clause `PREDICT` à la requête et exécutez-la. La plage de prédiction est automatiquement définie sur 20 % de la fenêtre de requête et surlignée en gris. Le graphique apparaît en lignes pointillées dans la plage prédite.

        Vous pouvez [affiner davantage la requête](#customize-prediction-range) en fonction de vos besoins.
      </Step>

      <Step>
        ### Ajouter au dashboard [#add-query-to-dashboard]

        1. Pour ajouter le graphique avec prédiction à un dashboard, cliquez sur <DNT>**Add to dashboard**</DNT>.
        2. Entrez un nom de widget.
        3. Sélectionnez un dashboard dans lequel vous souhaitez ajouter le widget ou créez un nouveau dashboard pour celui-ci.

        Vous pouvez maintenant visualiser le graphique avec prédiction sur le dashboard sélectionné.
      </Step>
    </Steps>
  </Collapser>
</CollapserGroup>

## Algorithme de prédiction pris en charge [#supported-algorithm]

Actuellement, <DNT>**NRQL predictions**</DNT> ne prend en charge que l&amp;apos;algorithme <DNT>**Holt-Winters**</DNT> pour les séries chronologiques saisonnières et non saisonnières. Il s&amp;apos;agit d&amp;apos;un algorithme couramment utilisé et standard pour les tâches de prévision et de prédiction. Nous prenons en charge les durées saisonnières horaires, quotidiennes et hebdomadaires pour le modèle Holt-Winters.

## Comportement par défaut [#defaults]

La clause `PREDICT` dans une requête est accompagnée des comportements par défaut suivants :

* **Saisonnalité**: détecte automatiquement la saisonnalité dans les données et utilise la même durée de saison pour construire le modèle prédictif. Si aucune saisonnalité n’est trouvée, il construit un modèle non saisonnier.
* **Fenêtre de prédiction**: projette 20 % de la durée totale spécifiée dans votre fenêtre de requête.
* **Données historiques pour la formation**: Utilise les données historiques de la fenêtre de requête actuelle et des deux précédentes pour générer des prédictions.
* **Intervalle de temps**: s&amp;apos;aligne sur l&amp;apos;intervalle de points de données de la série chronologique dans la fenêtre de requête pour garantir la cohérence dans la projection des données.

Exemple d&apos;utilisation de `PREDICT` dans une requête NRQL :

```sql
FROM Transaction SELECT count(*) WHERE error IS TRUE TIMESERIES PREDICT
```

La prédiction par défaut sur le graphique apparaît comme suit :

<img title="Default prediction" alt="Default prediction" src="/images/nrql-prediction-default.webp" />

<figcaption>
  <DNT>**[one.newrelic.com &gt; All capabilities](https://one.newrelic.com/all-capabilities) &amp;gt; dashboards**</DNT>: prédiction par défaut.
</figcaption>

## Personnaliser le modèle prédictif [#customize-prediction-range]

Vous pouvez personnaliser les prédictions en définissant manuellement les hyperparamètres du modèle d&apos;entraînement et en ajoutant les mots-clés `USING` et `BY` . Pour vous familiariser avec NRQL, reportez-vous à [la documentation NRQL](/docs/nrql/get-started/introduction-nrql-new-relics-query-language).

<CollapserGroup>
  <Collapser id="hyperparameters" title="Définir les hyperparamètres du modèle.">
    Actuellement, <DNT>**Holt-Winters**</DNT> est le seul algorithme de prédiction que nous prenons en charge et il est livré avec plusieurs hyperparamètres pour vous aider à affiner vos prédictions. Reportez-vous au tableau suivant pour comprendre le comportement de chaque hyperparamètre et choisir ceux qui conviennent à votre cas d&amp;apos;utilisation.

    Pour modifier votre requête, ajoutez `holtwinters(<hyperparameters>: <value>)` après la clause `PREDICT` .

    <table id="hyperparameters">
      <thead>
        <tr>
          <th colSpan="3" />
        </tr>

        <tr>
          <th>
            Hyperparamètre
          </th>

          <th>
            Valeur
          </th>

          <th>
            Comportement
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td rowspan="3" style="width: 300px;">
            `seasonality`
          </td>

          <td>
            `<season length>`
          </td>

          <td>
            Définit la saisonnalité de la série chronologique sur une durée de saison spécifique. Assurez-vous que la durée de la saison est de `integer unit` de temps.\
            **Exemples**: `1 day` ou `3 hours`
          </td>
        </tr>

        <tr>
          <td>
            `AUTO`
          </td>

          <td>
            Détecte automatiquement la saisonnalité des séries chronologiques et génère des prévisions avec la saisonnalité identifiée.
          </td>
        </tr>

        <tr>
          <td>
            `NONE`
          </td>

          <td>
            Désactive la saisonnalité de la série chronologique et génère une prédiction non saisonnière.

            <Callout variant="important">
              `seasonality: NONE` n&amp;apos;est pas compatible avec l&amp;apos;hyperparamètre `gamma` , qui définit le facteur de lissage de saison.
            </Callout>
          </td>
        </tr>

        <tr>
          <td>
            `alpha`
          </td>

          <td>
            0 à 1
          </td>

          <td>
            Définit le facteur de lissage de niveau.

            * **Valeur inférieure**: Plus de poids sur les données historiques.
            * **Valeur plus élevée**: Plus de poids sur les données récentes.
          </td>
        </tr>

        <tr>
          <td>
            `beta`
          </td>

          <td>
            0 à 1
          </td>

          <td>
            Définit le facteur de lissage des tendances.

            * **Valeur inférieure**: Plus de poids sur les données historiques.
            * **Valeur plus élevée**: Plus de poids sur les données récentes.
          </td>
        </tr>

        <tr>
          <td>
            `gamma`
          </td>

          <td>
            0 à 1
          </td>

          <td>
            Définit le facteur de lissage de la saison.

            * **Valeur inférieure**: Plus de poids sur les données historiques.
            * **Valeur plus élevée**: Plus de poids sur les données récentes.
          </td>
        </tr>

        <tr>
          <td>
            `phi`
          </td>

          <td>
            0,98 à 1
          </td>

          <td>
            Définit le paramètre d&apos;amortissement de tendance.

            * **Valeur inférieure**: effet d&amp;apos;amortissement plus important sur la courbe de prédiction qui s&amp;apos;aplatit progressivement jusqu&amp;apos;à obtenir une courbe plate.
            * **Valeur plus élevée**: effet d&amp;apos;amortissement moindre sur la courbe de prédiction.
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="by"
    title={<>Ajoutez le mot-clé <InlineCode>
      BY
    </InlineCode> .</>
    }
  >
    Utilisez le mot-clé `BY` pour définir la distance à laquelle vous souhaitez que le modèle effectue la prédiction. Par exemple, `PREDICT BY 3 hours` génère une prédiction de trois heures dans le futur à partir du dernier point de la série chronologique. Assurez-vous que la durée est de `integer unit` .
  </Collapser>

  <Collapser
    id="using"
    title={<>Ajoutez le mot-clé <InlineCode>
      USING
    </InlineCode> .</>
    }
  >
    Utilisez le mot-clé `USING` pour spécifier la quantité de données historiques que vous souhaitez utiliser pour entraîner le modèle. Par exemple, `PREDICT USING 1 day` utilise la fenêtre de requête ainsi que les données du jour précédent pour former le modèle. Assurez-vous que la durée est de `integer unit` .
  </Collapser>
</CollapserGroup>

Exemple d&apos;utilisation de `PREDICT` avec les hyperparamètres, `BY` et les mots-clés `USING` :

```sql
FROM Transaction SELECT count(*) WHERE error IS TRUE TIMESERIES PREDICT holtwinters(seasonality: AUTO, alpha: 0.2) BY 1 hour USING 2 hours
```

Cette requête définit la saisonnalité sur la détection automatique et met l&apos;accent sur les données historiques en ajustant le facteur de lissage de niveau. Il prédit une heure dans le futur et entraîne le modèle en utilisant la longueur de la fenêtre de requête ainsi que les deux heures précédentes de données historiques. Le graphique affiche la prédiction personnalisée comme suit :

<img title="Custom prediction" alt="Custom prediction" src="/images/nrql-prediction-custom.webp" />

<figcaption>
  <DNT>**[one.newrelic.com &gt; All capabilities](https://one.newrelic.com/all-capabilities) &amp;gt; dashboards**</DNT>: prédiction personnalisée.
</figcaption>