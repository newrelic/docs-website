---
title: Configuration supplémentaire
metaDescription: Additional configuration instructions for SAP systems.
freshnessValidatedDate: never
translationType: machine
---

Cette section fournit des instructions supplémentaires pour la configuration du système.

<Steps>
  <Step>
    ## Rôle d&apos;autorisation de téléchargement [#upload-authorization-role]

    1. Utilisez `SAP transaction PFCG`.

    2. Accédez à **Role** &gt; **Upload** et téléchargez le fichier **\_NEWR\_DATA\_PROVIDER.SAP** à partir du package d’installation.

    3. Confirmez que le rôle `/NEWR/DATA_PROVIDER` doit être chargé.

       <img title="Authorization Role" alt="A screenshot displaying the authorization role upload" src="/images/authorisation-role.webp" width="600" />

    4. Cliquez sur le<img src="/images/change-icon.webp" class="inline" style={{height: "22px", width: "22px"}} alt="change icon in SAP" title="Change icon indicator in SAP" />

       icône une fois chargée.

    5. Dans l&apos;onglet **Authorizations**, sélectionnez<img src="/images/change-icon.webp" class="inline" style={{height: "20px", width: "20px"}} alt="change icon in SAP" title="Change icon indicator in SAP" />

       **Change Authorization Data** d&apos;autorisation et activer à l&apos;aide avec<img src="/images/activate-option.webp" class="inline" style={{height: "25px", width: "30px"}} alt="activate icon in SAP" title="Activate Icon in SAP">icône.</img>

    <img title="Authorizations Tab" alt="A screenshot displaying the authorization tab and Change Authorization Data in SAP upload" src="/images/sap-authorization-1.webp" width="500" />

    6. Si un nom de profil est suggéré, cliquez sur l&apos;icône de coche verte.
    7. Vérifiez que le message **Profile(s) were updated** apparaît dans la barre d&apos;état.
  </Step>

  <Step>
    ## Créer un nouvel identifiant utilisateur RFC Relic [#create-rfc-user-id]

    Après avoir activé le profil d&apos;autorisation, utilisez la transaction `SU01` pour créer un nouvel ID utilisateur RFC (par exemple, `NR4SAPDP`). Définissez le type d&apos;utilisateur sur **System** ou **Communication** et ajoutez le rôle `/NEWR/DATA_PROVIDER`.

    <img title="Create New RFC User" alt="A screenshot displaying the creation of a new RFC user in SAP" src="/images/rfc-userid.webp" width="600" />
  </Step>

  <Step>
    ## Créer des destinations RFC pour le système de monitoring [#create-rfc-for-monitored-systems]

    Utilisez transaction `SM59` pour créer une destination RFC pour chaque système de monitoring.

    1. Sélectionnez les **ABAP Connections** et cliquez sur l’icône **Create** pour configurer une nouvelle destination RFC.

    2. Saisissez un nom de **RFC Destination** descriptif. Nous recommandons de nommer la destination RFC comme `NR_<SYSID>CLNT<CLNT#>`

    3. Définissez le **Connection Type** sur `3 - ABAP Connection`.

    4. Dans l&apos;onglet **Technical Settings**, saisissez :

       * **Target Host** (domaine entièrement qualifié ou IP) et **Instance No.**.
       * Précisez le **Gateway Host** et le **Service** si nécessaire.

    <img title="Create RFC destinations for monitored systems" alt="A screenshot displaying the how to create RFC destinations for monitored systems" src="/images/rfc-destination.webp" width="600" />

    5. Dans l’onglet **Logon &amp; Security**, entrez l’utilisateur RFC (`NR4SAPDP`) et le mot de passe.
    6. Cliquez sur **Save**.
    7. Accédez à **Utility &gt; Test &gt; Connection Test** et **Authorization Test** pour confirmer une connexion réussie.

    <Callout variant="important">
      Assurez-vous que les résultats des tests sont positifs.
    </Callout>
  </Step>

  <Step>
    ## Définir la destination HTTP sur le cloud New Relic

    Utilisez transaction `SM59` pour configurer des connexions HTTPS aux points de terminaison d&apos;API New Relic.

    <Callout variant="important">
      Assurez-vous de créer une destination RFC individuelle pour les événements, les logs, les métriques et les traces séparément.
    </Callout>

    1. Saisissez un **Destination Name** (par exemple, `NR_API_EVENT`).
    2. Définissez le **Connection Type** sur `G` (Connexions HTTP vers un serveur externe).
    3. Saisissez le **Target Host**, le **Service No.** (443) (voir [le port standard](/docs/sap-solutions/additional-resources/network-accessibility) pour HTTPS) et le **Path Prefix** (voir [la liste de contrôle de préparation à l&apos;installation](/docs/sap-solutions/additional-resources/installation-readiness) pour plus de détails).
    4. Si un proxy est requis, configurez-le dans l’onglet **Technical Settings**.
    5. Dans l’onglet **Security Options**, cochez la case d’option **Active** pour SSL.
       <img title="HTTP destination to New Relic" alt="A screenshot displaying the connection setup for HTTP destination to New Relic" src="/images/http-destination-to-new-relic.webp" width="600" />
    6. Si nécessaire, téléchargez le certificat racine depuis [New Relic](https://one.newrelic.com) et ajoutez-le à SAP à l&apos;aide de la transaction `STRUST`.
    7. Utilisez le **Connection Test** pour vérifier la connexion. Une connexion réussie prompt à **Enter Logon Data**. Si le test expire, vérifiez les paramètres de votre pare-feu.
    8. Répétez cette procédure pour tous les points de terminaison d&apos;API New Relic.
  </Step>

  <Step>
    ## Créer un point de terminaison d&apos;authentification BTP/CloudALM [#create-authentication-endpoint]

    Suivez les instructions ci-dessous en fonction du service :

    <CollapserGroup>
      <Collapser id="btp-process-integration-runtime" title="Exécution de l'intégration des processus BTP">
        1. Notez les `clientId`, `clientsecret` et `tokenurl` de la **Service Key** téléchargée.
        2. Accédez au `tokenurl` dans un navigateur Web et téléchargez les certificats nécessaires (`Digicert root, global, and SAP on demand`).

        <img title="BTP process integration runtime" alt="A screenshot displaying the connection setup for BTP process integration runtime" src="/images/btp-process-integration.webp" width="600" />

        3. Utilisez la transaction `STRUST` pour télécharger les trois certificats un par un et cliquez sur **Add to Certificate List**.
        4. Cliquez sur **Save**.
        5. Utilisez la transaction `SMICM` et accédez à **Administration &gt; ICM &gt; Exit Soft &gt; Global** pour redémarrer tous les processus ICM.

        <img title="Administration ICM" alt="A screenshot displaying the Administration ICM" src="/images/administration-icm.webp" width="600" />

        6. Utilisez la transaction `SM59` pour créer une nouvelle connexion RFC sous **HTTP Connections to External Server**.
        7. Divisez le tokenurl en préfixe d&apos;hôte et de chemin. Ajoutez le préfixe du chemin avec `?grant_type=client_credentials`.
        8. Définissez le **Service No.** sur `443`.

        <img title="Service No." alt="A screenshot displaying the Service No." src="/images/service-no.webp" width="600" />

        9. Dans l’onglet **Login &amp; Security**, sélectionnez **Basic Authentication** et entrez `clientId` et `clientsecret` comme nom d’utilisateur et mot de passe.
        10. Définissez le statut **du protocole sécurisé** sur **Actif** et enregistrez la configuration.
        11. Exécutez un **Connection Test**.
      </Collapser>

      <Collapser id="cloud-alm-api" title="API CloudALM">
        1. Notez les `clientId`, `clientsecret` et `url` de la **Service Key** téléchargée.
        2. Accédez à l&apos;URL dans un navigateur Web et téléchargez les certificats **Digicert root**, **global** et **SAP on demand**.

        <img title="CloudALM API" alt="A screenshot displaying the connection setup for CloudALM API" src="/images/cloudalm-api.webp" width="600" />

        3. Utilisez la transaction `STRUST` pour télécharger les trois certificats un par un et cliquez sur **Add to Certificate List**.
        4. Cliquez sur **Save**.
        5. Utilisez la transaction `SMICM` et accédez à **Administration &gt; ICM &gt; Exit Soft &gt; Global** pour redémarrer tous les processus ICM.

        <img title="Administration ICM" alt="A screenshot displaying the Administration ICM" src="/images/administration-icm.webp" width="600" />

        6. Utilisez la transaction `SM59` pour créer une nouvelle connexion RFC.
        7. Insérez l&apos;URL comme **Target host** et définissez le **Service No.** sur `443`. Définissez le **Path Prefix** sur `/oauth/token?grant_type=client_credentials`.

        <img title="SM59 Configuration" alt="A screenshot displaying the SM59 configuration" src="/images/sm59-configuration.webp" width="600" />

        8. Dans l’onglet **Login &amp; Security**, sélectionnez **Basic Authentication** et entrez `clientId` et `clientsecret` comme nom d’utilisateur et mot de passe.
        9. Définissez le statut **du protocole sécurisé** sur **Actif** et enregistrez la configuration.
        10. Exécutez un **Connection Test**.
      </Collapser>
    </CollapserGroup>
  </Step>

  <Step>
    ## Créer une connexion à la base de données [#create-database-connection]

    Utilisez la transaction `DBACOCKPIT` pour définir les connexions à **HANA Database** distante.

    1. Double-cliquez sur **Database Connections** et cliquez sur **Add**.

       <img title="Database Connection" alt="A screenshot displaying the Database Connection" src="/images/database-connection.webp" width="600" />

    2. Saisissez un **Connection Name** (de préférence le même que l&apos;ID du système SAP).

    3. Sélectionnez la** HANA Database** comme **Database System**.

    4. Saisissez l&apos; **Database user ID** (par exemple, `NRAGENT`) et le mot de passe.

    5. Saisissez la **Database Host** et le **SQL Port**.

       <img title="SAP Connection Name" alt="A screenshot displaying the SAP Connection Name" src="/images/connection-name.webp" width="600" />

    6. Enregistrez les données et cliquez sur **Test** pour vérifier la connexion.
  </Step>
</Steps>