---
title: Préparez l'installation
metaDescription: How to install the SAP and alert ecosystems with New Relic
freshnessValidatedDate: never
translationType: machine
---

Avant de commencer à utiliser le monitoring New Relic pour vos solutions SAP, assurez-vous que les conditions préalables suivantes sont remplies :

* **ID de compte New Relic**: obtenez votre [ID de compte](/docs/accounts/accounts-billing/account-setup/account-id) pour identifier votre compte New Relic.

* **License Key**: Sécuriser une nouvelle relique <InlinePopover type="licenseKey" />nécessaire à l&apos;authentification et à l&apos;accès aux données.

* **Data Center Region**: [décidez de l&apos;emplacement de votre data center préféré (États-Unis ou UE)](/docs/accounts/accounts-billing/account-setup/choose-your-data-center/) et configurez votre compte en conséquence.

* **Exigence système SAP**: Confirmez que votre système SAP répond aux niveaux de sortie des composants logiciels requis spécifiés par le monitoring de New Relic pour les solutions SAP.

* **Monitoring des comptes BTP**: Si les comptes BTP font partie de votre configuration monitoring, l&apos;un des éléments suivants doit être disponible :

  * **Compte CloudALM**: un compte CloudALM doit être configuré pour monitorer vos comptes BTP.
  * **Service d&apos;exécution d&apos;intégration de processus**: Assurez-vous d&apos;un abonnement au service d&apos;exécution d&apos;intégration de processus sur vos comptes BTP de monitoring, qui est requis spécifiquement pour monitoring de l&apos;intégration.

  <Callout variant="important">
    Vous aurez peut-être besoin d’une approbation ou d’une assistance en matière de configuration de la part de vos équipes de sécurité ou de réseau pour répondre à ces conditions préalables. Assurez-vous que ces étapes sont terminées avant de commencer l&apos;installation et consultez la [liste de contrôle pour la préparation de l&apos;installation](/docs/sap-solutions/additional-resources/pre-installation-checklist/#checklist-for-installation-readiness) afin de confirmer que tous les environnements sont correctement configurés.
  </Callout>

## Télécharger le logiciel

Vous pouvez obtenir le package d&apos;installation auprès de votre responsable de compte New Relic. Le .zip téléchargé package contient les fichiers suivants :

<Callout variant="important">
  La liste complète des fichiers est fournie dans **Packing\_List.txt**. Décompressez le package pour accéder à ces fichiers.
</Callout>

<CollapserGroup>
  <Collapser id="installation-package" title="packaged'installation">
    <table>
      <thead>
        <tr>
          <th style={{ width: '200px' }}>
            Titre du fichier
          </th>

          <th>
            Nom de fichier
          </th>

          <th>
            Remarques
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            Liste de colisage
          </td>

          <td>
            `NRM4SAP<version>.txt`
          </td>

          <td>
            Liste d&apos;inventaire des fichiers
          </td>
        </tr>

        <tr>
          <td>
            Module complémentaire ABAP
          </td>

          <td>
            `K-xxxAOIINNEWR.SAR`
          </td>

          <td>
            Fichier d&apos;archive pour le module complémentaire SAP
          </td>
        </tr>

        <tr>
          <td>
            Pack de mise à niveau du module complémentaire ABAP
          </td>

          <td>
            `K-xxxAOUINNEWR.SAP`
          </td>

          <td>
            Fichier d&apos;archive pour la mise à niveau du module complémentaire SAP
          </td>
        </tr>

        <tr>
          <td>
            Rôles d&apos;autorisation
          </td>

          <td>
            `_NEWR_DATA_PROVIDER.SAP`
          </td>

          <td>
            Rôle d&apos;autorisation pour NR RFC utilisateur
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

## Systèmes monitorés [#monitored-systems]

Notre architecture sans agent utilise **des connexions RFC** pour récupérer des données. Pour garantir des connexions sécurisées, vous devez créer un utilisateur système SAP avec un profil d&apos;autorisation spécifique pour ces connexions.

* Vérifiez que `SAP_BASIS` est **une sortie 740 ou supérieure**, `Kernel` est **une sortie 753 Patch 602 ou supérieure** et `ST-PI` est **une sortie 740 SP 16 ou supérieure**.

* **Téléchargez le rôle d&apos;autorisation** [`NEWR_DATA_PROVIDER`](/docs/sap-solutions/additional-resources/detailed-instructions/#upload-authorization-role).

* Créez un utilisateur système avec le rôle téléchargé pour les connexions RFC. Reportez-vous à [la RFC Créer un nouvel ID utilisateur Relic](/docs/sap-solutions/additional-resources/detailed-configuration/#create-rfc-user-id).

* Si vous monitoring une **base de données HANA**, créez un **utilisateur NRAGENT de base de données HANA** avec accès **Catalog Read** et **Monitoring** à l&apos;aide des commandes SQL suivantes :

  ```sql
    CREATE ROLE NR_AGENT_ROLE;
    GRANT CATALOG READ TO NR_AGENT_ROLE;
    GRANT MONITORING TO NR_AGENT_ROLE;
  ```

  ```sql
    CREATE USER NRAGENT PASSWORD 'Xxxxxxxx' NO FORCE_FIRST_PASSWORD_CHANGE;
    GRANT NR_AGENT_ROLE TO NRAGENT;
  ```

* Collectez l&apos; **hôte du serveur HANA** et **le port de base de données du locataire** pour la connexion SQL.

* Pour les autres bases de données, activez les **KPI de base de données CCMS** standard en exécutant le programme ABAP `RSDBKPIMON`.

## Système monitoring central [#central-monitoring-system]

Sur le système monitoring central, vérifiez que les versions des composants suivants sont installées. Pour les versions non répertoriées, contactez votre responsable de compte New Relic pour obtenir un package supplémentaire.

<CollapserGroup>
  <Collapser id="sap-versions" title="Versions des composants SAP">
    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Version SAP\_BASIS
          </th>

          <th>
            Version SAP\_ABA
          </th>

          <th>
            Version ST-PI
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            740
          </td>

          <td>
            n/a
          </td>

          <td>
            740 SP14+
          </td>
        </tr>

        <tr>
          <td>
            750
          </td>

          <td>
            750
          </td>

          <td>
            740 SP14+
          </td>
        </tr>

        <tr>
          <td>
            750
          </td>

          <td>
            75A
          </td>

          <td>
            740 SP14+
          </td>
        </tr>

        <tr>
          <td>
            751
          </td>

          <td>
            75B
          </td>

          <td>
            740 SP14+
          </td>
        </tr>

        <tr>
          <td>
            752
          </td>

          <td>
            75 °C
          </td>

          <td>
            740 SP14+
          </td>
        </tr>

        <tr>
          <td>
            753
          </td>

          <td>
            75D
          </td>

          <td>
            740 SP14+
          </td>
        </tr>

        <tr>
          <td>
            754
          </td>

          <td>
            75E
          </td>

          <td>
            740 SP14+
          </td>
        </tr>

        <tr>
          <td>
            755
          </td>

          <td>
            75F
          </td>

          <td>
            740 SP14+
          </td>
        </tr>

        <tr>
          <td>
            756
          </td>

          <td>
            75G
          </td>

          <td>
            740 SP14+
          </td>
        </tr>

        <tr>
          <td>
            757
          </td>

          <td>
            75H
          </td>

          <td>
            740 SP14+
          </td>
        </tr>

        <tr>
          <td>
            758
          </td>

          <td>
            75I
          </td>

          <td>
            740 SP14+
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

* Si votre version SAP n&apos;est pas répertoriée, contactez votre responsable de compte New Relic pour obtenir un package supplémentaire adapté à votre version.
* Le système central doit avoir au moins 20 processus de travail de dialogue et 10 processus de travail d&apos;arrière-plan.
* Assurez-vous que l&apos;accès HTTPS sortant au data center New Relic est autorisé.

<CollapserGroup>
  <Collapser id="us-eu-endpoints" title="Point de terminaison data center États-Unis/UE">
    <table>
      <thead>
        <tr>
          <th style={{ width: '200px' }}>
            Connexion
          </th>

          <th>
            data centeraméricain
          </th>

          <th>
            Point de terminaison data center de l&apos;UE
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            Métriques
          </td>

          <td>
            [https://metric-api.newrelic.com/metric/v1](https://metric-api.newrelic.com/metric/v1)
          </td>

          <td>
            [https://metric-api.eu.newrelic.com/metric/v1](https://metric-api.eu.newrelic.com/metric/v1)
          </td>
        </tr>

        <tr>
          <td>
            Événements
          </td>

          <td>
            [https://insights-collector.newrelic.com/v1/accounts/events](https://insights-collector.newrelic.com/v1/accounts/events)
          </td>

          <td>
            [https://insights-collector.eu01.nr-data.net/accounts/event/v1](https://insights-collector.eu01.nr-data.net/accounts/event/v1)
          </td>
        </tr>

        <tr>
          <td>
            Logs
          </td>

          <td>
            [https://log-api.newrelic.com/log/v1](https://log-api.newrelic.com/log/v1)
          </td>

          <td>
            [https://log-api.eu.newrelic.com/log/v1](https://log-api.eu.newrelic.com/log/v1)
          </td>
        </tr>

        <tr>
          <td>
            Traces
          </td>

          <td>
            [https://trace-api.newrelic.com/trace/v1](https://trace-api.newrelic.com/trace/v1)
          </td>

          <td>
            [https://trace-api.eu.newrelic.com/trace/v1](https://trace-api.eu.newrelic.com/trace/v1)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

* Ajustez les politiques du serveur proxy pour accéder à New Relic si nécessaire. Assurez-vous que les paramètres proxy sont configurés :

  * Nom de domaine/adresse IP et port du serveur.
  * Informations d&apos;identification d&apos;accès proxy, si une authentification est nécessaire.

* Modifiez les politiques de pare-feu pour autoriser le trafic HTTPS vers New Relic s&apos;il est bloqué.

  <Callout variant="tip">
    Ces connexions peuvent être définies dans le **Central Monitoring System** à l&apos;aide de la **transaction SAP SM59** et testées. Reportez-vous à la [section Définir la destination HTTP sur New Relic Cloud](/docs/sap-solutions/additional-resources/detailed-configuration/#set-http-destination-to-new-relic-cloud) pour plus de détails.
  </Callout>

* Pour chaque système de monitoring spécifié, utilisez transaction `SM59` et l&apos;ID du système distant pour créer une **RFC Destination** et tester les connexions. Reportez-vous à la section [Créer des destinations RFC pour monitorer le système](/docs/sap-solutions/additional-resources/detailed-configuration/#create-rfc-for-monitored-systems) pour plus de détails.

  <Callout variant="tip">
    Assurez-vous que le rôle `/NEWR/DATA_PROVIDER` est attribué à l&apos;utilisateur RFC.
  </Callout>

* Assurez-vous des éléments suivants pour monitoring de la base de données HANA distante :

  * Le système monitoring central doit avoir accès au serveur HANA et au port de la base de données du locataire.

  * Si votre système monitoring central n&apos;est pas un système `S4HANA`, assurez-vous que l&apos;un des composants suivants est installé :

    * Client HANA v2.0 (la version doit être compatible avec la base de données HANA)

    * Fichier de bibliothèque client HANA :

      * `libSQLDBCHDB.so` (Linux)
      * `libSQLDBCHDB.dll` (Windows)
      * La bibliothèque doit être située dans le dossier du noyau SAP et appartenir à l&apos;ID d&apos;administrateur SID (par exemple, sd1adm).

  * Pour chaque base de données HANA distante, utilisez la transaction `SAP DBACOCKPIT` pour créer une connexion DB. Reportez-vous à \[Créer une connexion à la base de données] pour plus de détails.

## compte BTP du moniteur

Pour monitorer un compte BTP, vous avez besoin soit d&apos;une instance CloudALM configurée pour monitorer le compte BTP, soit d&apos;un abonnement au service Process intégration Runtime (applicable uniquement à monitoring de l&apos;intégration). Des clés de service sont requises pour l’authentification de la connexion. Pour plus d&apos;informations, consultez [Comment récupérer les clés de service](/docs/sap-solutions/additional-resources/obtain-service-key/process-integration-runtime).

Les clés de service sont également utilisées pour créer [des destinations HTTP externes](docs/sap-solutions/additional-resources/detailed-configuration/#create-authentication-endpoint) et servir d’hôte API pour les fournisseurs de données API.