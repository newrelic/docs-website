---
title: "Étendue des erreurs\_: utilisateurs, sessions et appareils concernés"
metaDescription: 'Triage more effectively by viewing how many users, sessions, or devices are impacted by an error group.'
freshnessValidatedDate: never
translationType: machine
---

Les agents New Relic capturent automatiquement des données sur l’étendue des erreurs affectant vos applications. Lorsque vous organisez par groupe d’erreurs, vous pouvez voir l’impact grâce à trois métriques clés :

* **Utilisateurs concernés**: le nombre d’utilisateurs uniques affectés par les erreurs
* **Sessions concernées**: le nombre de sessions de navigateur uniques affectées (solution de secours pour les entités de navigateur)
* **Appareils concernés**: le nombre d’appareils mobiles uniques affectés (solution de secours pour les entités mobiles)

Lorsque les données sur les utilisateurs concernés ne sont pas disponibles, New Relic affiche automatiquement la métrique de secours appropriée en fonction de votre type d’entité. Cela vous aide à hiérarchiser les efforts de débogage en vous montrant les erreurs ayant la plus grande portée d’impact.

<img title="An image showing how to navigate impact metrics in errors inbox" alt="This is an image of the main errors inbox showing users, sessions, and devices impacted" src="/images/errors-inbox_screenshot-full_users-impacted.webp" />

<figcaption>
  Accédez à **[one.newrelic.com](https://one.newrelic.com) &gt; APM &amp; Services &gt; Errors (Errors Inbox) &gt; Triage**: vous pouvez trouver les métriques d’impact dans la deuxième colonne du tableau **Error groups**, situé sous les séries chronologiques **Error count** et **Error rate**.
</figcaption>

## Métriques d’impact de secours [#fallback-metrics]

New Relic donne la priorité à l’affichage des données d’impact les plus pertinentes pour votre type d’application spécifique. Lorsque les données **Users impacted** ne sont pas disponibles, le système revient automatiquement aux métriques spécifiques à l’entité :

* **Entités Browser**: affiche **Sessions impacted** - le nombre de sessions Browser uniques affectées par les erreurs
* **Entités mobiles**: affiche **Devices impacted** - le nombre d’appareils mobiles uniques affectés par les erreurs

Ces métriques de secours sont collectées automatiquement sans nécessiter de configuration supplémentaire, contrairement aux utilisateurs concernés, qui peuvent nécessiter des attributs personnalisés. Cela vous garantit une visibilité constante sur la portée des erreurs affectant vos applications, quelle que soit votre configuration.

## attribut personnalisé pour suivre l&apos;utilisateur impacté [#custom-attributes]

Dans certains cas, un événement d&apos;erreur peut ne pas avoir d&apos;attribut permettant d&apos;identifier l&apos;utilisateur final affecté par cet événement d&apos;erreur. Vous pouvez ajouter manuellement l&apos;attribut personnalisé afin que nos agents capturent les métadonnées d&apos;identification de l&apos;utilisateur au moment de l&apos;ingestion.

Pour les cas où vous devez ajouter un attribut personnalisé, nous vous recommandons de consulter [les conventions d&apos;attribut d&apos; OpenTelemetry](/docs/more-integrations/open-source-telemetry-integrations/opentelemetry/opentelemetry-introduction) car il existe plusieurs conventions courantes pour nommer l&apos;attribut final de l&apos;utilisateur.

Par exemple, [les normesOpenTelemetry ](https://opentelemetry.io/docs/reference/specification/trace/semantic_conventions/span-general/#general-identity-attributes)utilisent l&apos;attribut suivant par ordre de priorité :

* `userId`
* `user`

Vous pouvez voir comment New Relic traite les attributs personnalisés en lisant notre documentation sur [la collecte d&apos;événements personnalisés](/docs/data-apis/custom-data/custom-events/collect-custom-attributes/#enabling-custom).

## Requête pour les métriques d’impact [#query]

Les métriques d’impact pour les groupes d’erreurs sont enregistrées en tant que [Types de données métriques](/docs/data-apis/understand-data/metric-data/metric-data-type/) avec des noms de métriques spécifiques :

<CollapserGroup>
  <Collapser className="freq-link" id="users" title="Utilisateurs concernés">
    Vous pouvez faire une requête pour obtenir le nombre d’utilisateurs concernés en utilisant `newrelic.error.group.userImpact` comme nom de métrique dans les requêtes NRQL :

    ```sql
    SELECT uniqueCount(newrelic.error.group.userImpact) 
    FROM Metric 
    WHERE metricName='newrelic.error.group.userImpact'
    ```

    Cette métrique de requête NRQL capture le nombre approximatif d’utilisateurs uniques dans la période sélectionnée. Les attributs supplémentaires fournis par la métrique `userImpact` qui peuvent être utilisés dans une clause `FACET` sont `error.group.guid`, `entity.guid`.
  </Collapser>

  <Collapser className="freq-link" id="sessions" title="Sessions concernées">
    Vous pouvez effectuer une requête sur le nombre de sessions concernées en utilisant `newrelic.error.group.sessionImpact` comme nom de métrique dans les requêtes NRQL :

    ```sql
    SELECT uniqueCount(newrelic.error.group.sessionImpact) 
    FROM Metric 
    WHERE metricName='newrelic.error.group.sessionImpact'
    ```
  </Collapser>

  <Collapser className="freq-link" id="devices" title="Appareils concernés">
    Vous pouvez interroger le nombre d’appareils concernés en utilisant `newrelic.error.group.deviceUuidImpact` comme nom de métrique dans les requêtes NRQL :

    ```sql
    SELECT uniqueCount(newrelic.error.group.deviceUuidImpact) 
    FROM Metric 
    WHERE metricName='newrelic.error.group.deviceUuidImpact'
    ```
  </Collapser>
</CollapserGroup>

## Alerte sur les métriques d’impact [#alert]

En créant une [condition d’alerte NRQL](/docs/alerts-applied-intelligence/new-relic-alerts/alert-conditions/create-alert-conditions/), les développeurs peuvent déclencher <InlinePopover type="alerts" />lorsque l’étendue des erreurs dépasse un seuil. Vous pouvez créer des alertes pour toutes les métriques d’impact :

* **Utilisateurs concernés**: alertez-vous lorsque l’impact sur les utilisateurs dépasse votre seuil
* **Sessions concernées**: alerte lorsque l’impact des sessions de navigateur dépasse votre seuil
* **Appareils concernés**: alerte lorsque l’impact des appareils mobiles dépasse votre seuil

La création de cette alerte nécessite de déterminer la [requête NRQL ](/docs/query-your-data/nrql-new-relic-query-language/get-started/introduction-nrql-new-relics-query-language/)qui mesure la quantité d&apos;utilisateurs impactés d&apos;une manière qui capture le mieux votre cas d&apos;utilisation.

À titre d’exemple, la requête NRQL suivante mesure le nombre d’utilisateurs uniques qui ont été impactés par un [groupe d’erreurs](/docs/errors-inbox/errors-inbox/#groups) provenant d’une entité spécifique :

<CollapserGroup>
  <Collapser className="freq-link" id="user" title="Alertes sur les utilisateurs concernés">
    ```sql
    SELECT uniqueCount(newrelic.error.group.userImpact) 
    FROM Metric 
    WHERE metricName='newrelic.error.group.userImpact' 
    AND entity.guid='RXxCUk9XU9182nNEFQUExJQ0FLsU9OfDgzNzgwNw' FACET error.group.guid TIMESERIES
    ```

    En savoir plus sur l&apos;utilisation de la fonction [`uniqueCount()`](/docs/alerts-applied-intelligence/new-relic-alerts/alert-conditions/create-nrql-alert-conditions/), [comment trouver le GUIDd&apos;entité](/docs/new-relic-solutions/new-relic-one/core-concepts/what-entity-new-relic/#find) pour votre entité.

    De même, la requête NRQL suivante mesure le nombre total d&apos;utilisateurs impactés par des erreurs de toutes les entités sous le compte au cours de la dernière heure :

    ```sql
    SELECT count(newrelic.error.group.userImpact) 
    FROM Metric 
    WHERE metricName='newrelic.error.group.userImpact' SINCE 1 hour ago TIMESERIES
    ```
  </Collapser>

  <Collapser className="freq-link" id="session" title="Alertes sur les sessions concernées">
    Pour les applications de navigateur, vous pouvez créer des alertes basées sur les sessions concernées :

    ```sql
    SELECT uniqueCount(newrelic.error.group.sessionImpact) 
    FROM Metric 
    WHERE metricName='newrelic.error.group.sessionImpact' 
    AND entity.guid='YOUR_BROWSER_ENTITY_GUID' FACET error.group.guid TIMESERIES
    ```
  </Collapser>

  <Collapser className="freq-link" id="device" title="Alertes sur les appareils concernés">
    Pour les applications mobiles, vous pouvez créer des alertes basées sur les appareils concernés :

    ```sql
    SELECT uniqueCount(newrelic.error.group.deviceUuidImpact) 
    FROM Metric 
    WHERE metricName='newrelic.error.group.deviceUuidImpact' 
    AND entity.guid='YOUR_MOBILE_ENTITY_GUID' FACET error.group.guid TIMESERIES
    ```
  </Collapser>
</CollapserGroup>

Une fois que vous avez choisi une requête NRQL, elle peut être utilisée pour créer une [condition d&apos;alerte NRQL ](/docs/alerts-applied-intelligence/new-relic-alerts/alert-conditions/create-nrql-alert-conditions/#create).

Pour améliorer le rapport signal/bruit de vos alertes déclenchées, consultez [les conseils de création d&apos;alertes](/docs/alerts-applied-intelligence/new-relic-alerts/alert-conditions/create-nrql-alert-conditions/#condition-tips), [la manière dont les seuils d&apos;alerte sont évalués](/docs/alerts-applied-intelligence/new-relic-alerts/alert-conditions/create-nrql-alert-conditions/#advanced-signal) et [les exemples de conditions d&apos;alerte](/docs/alerts-applied-intelligence/new-relic-alerts/alert-conditions/create-nrql-alert-conditions/#examples).

## Définir l&apos;utilisateur impacté par la méthode setUser [#set-users]

Vous pouvez utiliser une méthode d’agent pour identifier un utilisateur final pour la métrique **Devices impacted**. Les sessions et les appareils concernés sont collectés automatiquement sans configuration supplémentaire. Consultez les détails de l’implémentation pour chaque agent ci-dessous :

<table>
  <thead>
    <tr>
      <th>
        Agent
      </th>

      <th>
        Méthode pour identifier un utilisateur final
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        Navigateur
      </td>

      <td>
        [`newrelic.setUserId(value: string|null)`](/docs/browser/new-relic-browser/browser-apis/setuserid/)
      </td>
    </tr>

    <tr>
      <td>
        Go
      </td>

      <td>
        [`txn.SetUserID("example user ID")`](/docs/apm/agents/go-agent/api-guides/guide-using-go-agent-api/#user-tracking)
      </td>
    </tr>

    <tr>
      <td>
        Java
      </td>

      <td>
        [`NewRelic.setUserId(String userId);`](/docs/apm/agents/java-agent/attributes/java-agent-attributes/#user-attributes)
      </td>
    </tr>

    <tr>
      <td>
        Applications mobiles
      </td>

      <td>
        [`setUserId`](/docs/data-apis/custom-data/custom-events/report-mobile-monitoring-custom-events-attributes/#track-user)
      </td>
    </tr>

    <tr>
      <td>
        .NET
      </td>

      <td>
        [`SetUserId`](/docs/apm/agents/net-agent/net-agent-api/itransaction/#setuserid)
      </td>
    </tr>

    <tr>
      <td>
        Node.js
      </td>

      <td>
        [`setUserID(id)`](https://newrelic.github.io/node-newrelic/API.html#setUserID)
      </td>
    </tr>

    <tr>
      <td>
        PHP
      </td>

      <td>
        [`newrelic_set_user_id(string $user_id)`](https://docs.newrelic.com/docs/apm/agents/php-agent/php-agent-api/newrelic_set_user_id/)
      </td>
    </tr>

    <tr>
      <td>
        Python
      </td>

      <td>
        [`newrelic.agent.set_user_id(user_id)`](https://docs.newrelic.com/docs/apm/agents/python-agent/python-agent-api/setuserid-python-agent-api)
      </td>
    </tr>

    <tr>
      <td>
        Ruby
      </td>

      <td>
        [`NewRelic::Agent.set_user_id`](/docs/apm/agents/ruby-agent/api-guides/sending-handled-errors-new-relic/#user-tracking)
      </td>
    </tr>
  </tbody>
</table>