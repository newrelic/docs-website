---
subject: Python agent
releaseDate: '2025-11-03'
version: 11.1.0
downloadLink: 'https://pypi.python.org/pypi/newrelic'
features:
  - Add new environment variables for attribute filter settings
  - Add support for async generators in transaction decorators
  - Add support for additional models in AWS Bedrock
  - Add instrumentation for new methods in AWS Kinesis
  - Add support for Python 3.14
bugs:
  - Fix a bug in aiomysql which caused RecursionError when using ConnectionPool
  - Fix a bug where properties were not properly passed in the producer for kombu
  - Fix an error when shutdown_agent is called from within the harvest thread
translationType: machine
---

## Remarques

Cette version de l&apos;agent Python ajoute la prise en charge Python 3.14, de nouvelles variables d&apos;environnement pour les paramètres de filtre d&apos;attributs, la prise en charge des générateurs asynchrones dans les décorateurs de transaction, des modèles supplémentaires dans [AWS Bedrock](https://aws.amazon.com/bedrock/) et de nouvelles méthodes dans [AWS Kinesis](https://aws.amazon.com/kinesis/). Cette sortie corrige également un bug dans [aiomysql](https://pypi.org/project/aiomysql/) qui provoquait `RecursionError` lors de l&apos;utilisation de `ConnectionPool` lorsqu&apos;il était enveloppé plusieurs fois, un bug où les propriétés n&apos;étaient pas correctement transmises dans le producteur de [kombu](https://pypi.org/project/kombu/), et une erreur lorsque `shutdown_agent` est appelé depuis le thread de récolte.

Installez l&apos;agent en utilisant `easy_install/pip/distribute` via l&apos; [index des packagesPython ](https://pypi.python.org/pypi/newrelic), en utilisant `conda` via l&apos; [index des packages Conda-Forge](https://anaconda.org/conda-forge/newrelic), ou téléchargez-le directement depuis le [site de téléchargement de New Relic](https://download.newrelic.com/python_agent/release).

## Caractéristiques

* Ajout de la prise en charge de Python 3.14

  * Ajout de la prise en charge de Python 3.14.

* Ajouter des variables d&apos;environnement pour les paramètres des filtres d&apos;attributs

  * Les paramètres suivants peuvent désormais être définis via des variables d&apos;environnement :

    | Paramètres de configuration               | Variable d&apos;environnement                       |
    | ----------------------------------------- | --------------------------------------------------- |
    | `attributes.enabled`                      | `NEW_RELIC_ATTRIBUTES_ENABLED`                      |
    | `attributes.exclude`                      | `NEW_RELIC_ATTRIBUTES_EXCLUDE`                      |
    | `attributes.include`                      | `NEW_RELIC_ATTRIBUTES_INCLUDE`                      |
    | `browser_monitoring.attributes.enabled`   | `NEW_RELIC_BROWSER_MONITORING_ATTRIBUTES_ENABLED`   |
    | `browser_monitoring.attributes.exclude`   | `NEW_RELIC_BROWSER_MONITORING_ATTRIBUTES_EXCLUDE`   |
    | `browser_monitoring.attributes.include`   | `NEW_RELIC_BROWSER_MONITORING_ATTRIBUTES_INCLUDE`   |
    | `error_collector.attributes.enabled`      | `NEW_RELIC_ERROR_COLLECTOR_ATTRIBUTES_ENABLED`      |
    | `error_collector.attributes.exclude`      | `NEW_RELIC_ERROR_COLLECTOR_ATTRIBUTES_EXCLUDE`      |
    | `error_collector.attributes.include`      | `NEW_RELIC_ERROR_COLLECTOR_ATTRIBUTES_INCLUDE`      |
    | `span_events.attributes.enabled`          | `NEW_RELIC_SPAN_EVENTS_ATTRIBUTES_ENABLED`          |
    | `span_events.attributes.exclude`          | `NEW_RELIC_SPAN_EVENTS_ATTRIBUTES_EXCLUDE`          |
    | `span_events.attributes.include`          | `NEW_RELIC_SPAN_EVENTS_ATTRIBUTES_INCLUDE`          |
    | `transaction_events.attributes.enabled`   | `NEW_RELIC_TRANSACTION_EVENTS_ATTRIBUTES_ENABLED`   |
    | `transaction_events.attributes.exclude`   | `NEW_RELIC_TRANSACTION_EVENTS_ATTRIBUTES_EXCLUDE`   |
    | `transaction_events.attributes.include`   | `NEW_RELIC_TRANSACTION_EVENTS_ATTRIBUTES_INCLUDE`   |
    | `transaction_segments.attributes.enabled` | `NEW_RELIC_TRANSACTION_SEGMENTS_ATTRIBUTES_ENABLED` |
    | `transaction_segments.attributes.exclude` | `NEW_RELIC_TRANSACTION_SEGMENTS_ATTRIBUTES_EXCLUDE` |
    | `transaction_segments.attributes.include` | `NEW_RELIC_TRANSACTION_SEGMENTS_ATTRIBUTES_INCLUDE` |
    | `transaction_tracer.attributes.enabled`   | `NEW_RELIC_TRANSACTION_TRACER_ATTRIBUTES_ENABLED`   |
    | `transaction_tracer.attributes.exclude`   | `NEW_RELIC_TRANSACTION_TRACER_ATTRIBUTES_EXCLUDE`   |
    | `transaction_tracer.attributes.include`   | `NEW_RELIC_TRANSACTION_TRACER_ATTRIBUTES_INCLUDE`   |

* Ajouter la prise en charge des générateurs asynchrones dans les décorateurs transaction

  * Auparavant, les décorateurs de transaction ne prenaient pas en charge l&apos;encapsulation autour des générateurs asynchrones. Cette fonctionnalité a été ajoutée, et les transactions du générateur asynchrone mesureront désormais automatiquement le temps d&apos;attente de la boucle d&apos;événements et d&apos;autres statistiques.

* Ajout de la prise en charge de modèles supplémentaires dans l&apos;instrumentation AWS Bedrock

  * Mise à jour de l&apos;instrumentation AWS Bedrock via botocore et aiobotocore pour prendre en charge les modèles supplémentaires suivants

    * Modèles Claude Sonnet 3+
    * Modèles préfixés par une région (adaptatifs aux régions)

* Ajouter l&apos;instrumentation pour les nouvelles méthodes Kinesis

  * Ajoute l&apos;instrumentation botocore pour prendre en charge les nouvelles méthodes AWS Kinesis

    * `describe_account_settings`
    * `update_account_settings`
    * `update_max_record_size`
    * `update_stream_warm_throughput`

## Débogage

* Prévenir une erreur de récursion dans le pool de connexions [aiomysql](https://pypi.org/project/aiomysql/)

  * Auparavant, une erreur `RecursionError` était levée dans [aiomysql](https://pypi.org/project/aiomysql/) lors de l&apos;utilisation de connexions mises en pool. Des chaînes profondes `ObjectProxy` ont été créées autour de connexions mises en commun en raison d&apos;un enroulement répété. Ce problème a été résolu.

* Correction d&apos;un bug où les propriétés n&apos;étaient pas correctement transmises au producteur de [Kombu](https://pypi.org/project/kombu/)

  * Correction d&apos;un bug où l&apos;instrumentation pour `kombu.messaging.Producer.publish()` entraînait l&apos;imbrication accidentelle de propriétés à l&apos;intérieur du dictionnaire, ce qui faisait que les propriétés se trouvaient au mauvais endroit et n&apos;étaient pas lues par le package en aval.

* Correction d&apos;une erreur lors de l&apos;appel de `shutdown_agent` depuis le thread de récolte

  * Auparavant, un `RuntimeError` pouvait se produire lorsque `shutdown_agent` était appelé depuis le thread de récolte. Cela corrige ce problème en ajoutant une protection pour empêcher le plantage.

## Déclaration de soutien

Nous vous recommandons de mettre à jour vers la dernière version de l&apos;agent dès qu&apos;elle est disponible. Si vous ne pouvez pas effectuer la mise à niveau vers la dernière version, mettez à jour vos agents vers une version datant de moins de 90 jours. En savoir [plus](/docs/new-relic-solutions/new-relic-one/install-configure/update-new-relic-agent/) sur la façon de tenir les agents informés.

[Consultez la politique EOL de](/docs/apm/agents/python-agent/getting-started/python-agent-eol-policy/) l&apos;agent Python de New Relic pour obtenir des informations sur la sortie de l&apos;agent et les dates de support.