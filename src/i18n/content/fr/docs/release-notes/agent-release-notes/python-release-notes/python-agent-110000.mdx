---
subject: Python agent
releaseDate: '2025-09-25'
version: 11.0.0
downloadLink: 'https://pypi.python.org/pypi/newrelic'
features:
  - Removes support for Python 3.7
  - Removes and or deprecates various APIs and settings
  - 'Deprecates [aioredis](https://pypi.org/project/aioredis/) instrumentation'
  - Raises the minimum supported version of `setuptools` and `setuptools_scm`
  - 'Adds new instrumentation for [AutoGen](https://github.com/microsoft/autogen)'
  - 'Adds new instrumentation for [Pyzeebe](https://pypi.org/project/pyzeebe/)'
  - Adds new MCP (Model Context Protocol) named spans
bugs:
  - Fixes a crash in psycopg
  - Ensures MCP spans are only recorded when AI monitoring is enabled
translationType: machine
---

## Remarques

<Callout variant="caution">
  Cette version de l&apos;agent a été retirée.
</Callout>

Cette sortie de l&apos;agent Python apporte les modifications suivantes :

* Supprime la prise en charge de Python 3.7
* Supprime et/ou déprécie diverses API et paramètres
* Obsolète l&apos;instrumentation [aioredis](https://pypi.org/project/aioredis/)
* Augmente la version minimale prise en charge de `setuptools` et `setuptools_scm`
* Ajoute une nouvelle instrumentation pour [AutoGen](https://github.com/microsoft/autogen)
* Ajoute une nouvelle instrumentation pour [Pyzeebe](https://pypi.org/project/pyzeebe/)
* Ajoute de nouveaux MCP (Model Context Protocol) nommés spans
* Corrige un crash dans psycopg
* Garantit que les étendues MCP ne sont enregistrées que lorsque monitoring de l&apos;IA est activée

Installez l&apos;agent à l&apos;aide de `easy_install/pip/distribute` via l&apos; [index du packagePython ](https://pypi.python.org/pypi/newrelic)ou téléchargez-le directement depuis le [site de téléchargement de New Relic](https://download.newrelic.com/python_agent/release).

## Fonctionnalité supprimée

* Supprime la prise en charge de Python 3.7

  * Python 3.7 a pris fin le 27 juin 2023. L&apos;agent Python n&apos;en prend plus en charge.

* Supprime diverses API obsolètes

  * Les API suivantes ont été supprimées :

    | API héritée                                   | API de remplacement                                                                                                                                                                     |
    | --------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
    | `accept_distributed_trace_payload`            | [`accept_distributed_trace_headers`](/docs/agents/python-agent/python-agent-api/acceptdistributedtraceheaders-python-agent-api)                                                         |
    | `add_custom_parameter`                        | [`add_custom_attribute`](/docs/apm/agents/python-agent/python-agent-api/addcustomattribute-python-agent-api)                                                                            |
    | `add_custom_parameters`                       | [`add_custom_attributes`](/docs/apm/agents/python-agent/python-agent-api/addcustomattributes-python-agent-api)                                                                          |
    | `create_distributed_trace_payload`            | [`insert_distributed_trace_headers`](/docs/apm/agents/python-agent/python-agent-api/insertdistributedtraceheaders-python-agent-api)                                                     |
    | `get_browser_timing_footer`                   | La fonctionnalité de ceci a été intégrée dans [`get_browser_timing_header()`](/docs/apm/agents/python-agent/python-agent-api/getbrowsertimingheader-python-agent-api)                   |
    | `record_exception`                            | [`notice_error()`](/docs/agents/python-agent/python-agent-api/notice_error)                                                                                                             |
    | `NewRelicLogHandler`                          | `NewRelicLogForwardingHandler`                                                                                                                                                          |
    | `lambda_handler` &amp; `LambdaHandlerWrapper` | Ces API ont été déplacées vers le package [`newrelic-lambda`](/docs/serverless-function-monitoring/aws-lambda-monitoring/instrument-lambda-function/sdk-based-instrumentation/#python). |

* Supprime divers paramètres obsolètes

  * Les paramètres suivants ont été supprimés :

    | héritage Réglage                        | Paramètre de remplacement                                                                                                                                                                                                                              |
    | --------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
    | `transaction_tracer.capture_attributes` | [`transaction_tracer.attributes.enabled`](/docs/apm/agents/python-agent/configuration/python-agent-configuration#cfg-tt-attributes-enabled)                                                                                                            |
    | `error_collector.capture_attributes`    | [`error_collector.attributes.enabled`](/docs/apm/agents/python-agent/configuration/python-agent-configuration#cfg-error-attributes-enabled)                                                                                                            |
    | `browser_monitoring.capture_attributes` | [`browser_monitoring.attributes.enabled`](/docs/apm/agents/python-agent/configuration/python-agent-configuration#cfg-browser-attributes-enabled)                                                                                                       |
    | `analytics_events.enabled`              | [`transaction_events.enabled`](/docs/apm/agents/python-agent/configuration/python-agent-configuration#transaction-events-enabled)                                                                                                                      |
    | `analytics_events.capture_attributes`   | [`transaction_events.attributes.enabled`](/docs/apm/agents/python-agent/configuration/python-agent-configuration#cfg-events-attributes-enabled)                                                                                                        |
    | `error_collector.ignore_errors`         | [`error_collector.ignore_classes`](/docs/apm/agents/python-agent/configuration/python-agent-configuration#error-ignore)                                                                                                                                |
    | `strip_exception_messages.whitelist`    | [`strip_exception_messages.allowlist`](/docs/apm/agents/python-agent/configuration/python-agent-configuration#strip_exception_messages_allowlist)                                                                                                      |
    | `ssl`                                   | Ceci est désormais codé en dur sur `true`, il a donc été supprimé en tant qu&apos;option de paramètre.                                                                                                                                                 |
    | `ignored_params`                        | Utilisez plutôt `newrelic.attributes.exclude = request.parameters.{name}`. Ajoutez chaque clé de paramètre de demande à la liste `newrelic.attributes.exclude`, délimitée par des virgules. Assurez-vous de préfixer la clé avec `request.parameters`. |
    | `agent_limits.merge_stats_maximum`      | Ceci est désormais complètement ignoré au profit de la configuration côté serveur.                                                                                                                                                                     |

## Fonctionnalité obsolète

* L&apos;instrumentation pour [aioredis](https://pypi.org/project/aioredis/) est obsolète

  * Le package [aioredis](https://pypi.org/project/aioredis/) a été abandonné au profit de [redis](https://pypi.org/project/redis/) qui inclut désormais le sous-module `redis.asyncio`. Par conséquent, l’instrumentation pour `aioredis` est également obsolète. Veuillez plutôt utiliser la bibliothèque `redis`. Cette instrumentation sera retirée lors d&apos;une prochaine sortie.

* Supprime certains paramètres de récolte existants pour correspondre à d&apos;autres agents de langage

  * Afin d&apos;être plus cohérent avec les conventions des autres agents de langage, les paramètres de récolte suivants sont désormais obsolètes :

    | héritage Réglage                                          | Paramètre de remplacement                                                                                                                                                       |
    | --------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
    | `event_harvest_config.harvest_limits.analytic_event_data` | [`transaction_events.max_samples_stored`](/docs/apm/agents/python-agent/configuration/python-agent-configuration#transaction-events-max-samples-stored)                         |
    | `event_harvest_config.harvest_limits.span_event_data`     | [`span_events.max_samples_stored`](/docs/apm/agents/python-agent/configuration/python-agent-configuration#cfg-tt-max-samples-stored)                                            |
    | `event_harvest_config.harvest_limits.error_event_data`    | [`error_collector.max_event_samples_stored`](/docs/apm/agents/python-agent/configuration/python-agent-configuration#error-max-event-samples-stored)                             |
    | `event_harvest_config.harvest_limits.custom_event_data`   | [`custom_insights_events.max_samples_stored`](/docs/apm/agents/python-agent/configuration/python-agent-configuration#custom-insights-events-max-samples-stored)                 |
    | `event_harvest_config.harvest_limits.log_event_data`      | [`application_logging.forwarding.max_samples_stored`](/docs/apm/agents/python-agent/configuration/python-agent-configuration#application-logging-forwarding-max-samples-stored) |

    Il s&apos;agit d&apos;une annulation d&apos;une modification précédente qui a renommé ces paramètres de `*.max_samples_stored` au format `event_harvest_config.harvest_limits.*`. Cette décision a été annulée et les noms des paramètres d&apos;origine ont été restaurés pour correspondre aux autres agents linguistiques qui n&apos;ont pas modifié ces noms de paramètres. Les paramètres obsolètes continueront de fonctionner pour le moment, mais ils seront supprimés lors d&apos;une prochaine sortie.

* Désapprouve la configuration de l&apos;agent via le dictionnaire d&apos;environnement WSGI

  * Les paramètres suivants, qui pouvaient auparavant être configurés via le dictionnaire d&apos;environnement WSGI, sont désormais obsolètes. Veuillez configurer ces paramètres via des variables d&apos;environnement ou le fichier de configuration.

    * `newrelic.set_background_task`
    * `newrelic.suppress_apdex_metric`
    * `newrelic.suppress_transaction_trace`
    * `newrelic.capture_request_params`
    * `newrelic.disable_browser_autorum`

* Supprime la prise en charge de la création de l&apos;agent avec `setuptools<61.2` ou `setuptools_scm<6.4`

  * Les versions minimales prises en charge de `setuptools` et `setuptools_scm` ont été augmentées à `61.2` et `6.4` respectivement. Ceci permet de prendre en charge l&apos;utilisation de `pyproject.toml` pour configurer les métadonnées du package et les instructions de construction. L&apos;agent peut désormais être construit avec des outils de construction plus modernes qui n&apos;enregistreront plus les avertissements concernant l&apos;absence d&apos;un fichier `pyproject.toml`.
  * Cette modification ajoute un nouvel attribut de version au package, `newrelic.__version__` et `newrelic.__version_tuple__`, qui peut être utilisé pour vérifier par programmation la version de l&apos;agent au moment de l&apos;exécution.

## Nouvelles fonctionnalités

* Ajoute une nouvelle instrumentation pour [AutoGen](https://github.com/microsoft/autogen)

  * Ajoute une instrumentation (étendues nommées et événement `Llm` personnalisé) pour les agents et les outils dans [AutoGen](https://github.com/microsoft/autogen)

* Ajoute une nouvelle instrumentation pour [Pyzeebe](https://pypi.org/project/pyzeebe/)

  * Ajoute une instrumentation automatique et un attribut d&apos;agent spécifique frameworkpour [Pyzeebe](https://pypi.org/project/pyzeebe/)

* Ajoute de nouveaux MCP (Model Context Protocol) nommés spans

  * Ajoute de nouvelles étendues nommées pour les appels d&apos;outils MCP (Model Context Protocol) effectués via le gestionnaire d&apos;outils pour prendre en charge Streamable HTTP

## Débogage

* Corrige un crash dans `psycopg>=3.2.0` lors de l&apos;appel `as_string()`

  * Corrige un problème dans `psycopg>=3.2.0` où la méthode `as_string()` ne nécessitait plus d&apos;arguments, provoquant un plantage potentiel. Ce problème a été corrigé et les deux signatures de cette méthode sont prises en charge.

* Garantit que les étendues MCP (Model Context Protocol) ne sont enregistrées que lorsque monitoring de l&apos;IA est activée

  * Garantit que les étendues MCP (Model Context Protocol) ne sont enregistrées que lorsque le paramètre `ai_monitoring.enabled` est activé.

## Déclaration de soutien

Nous vous recommandons de mettre à jour vers la dernière version de l&apos;agent dès qu&apos;elle est disponible. Si vous ne pouvez pas effectuer la mise à niveau vers la dernière version, mettez à jour vos agents vers une version datant de moins de 90 jours. En savoir [plus](/docs/new-relic-solutions/new-relic-one/install-configure/update-new-relic-agent/) sur la façon de tenir les agents informés.

[Consultez la politique EOL de](/docs/apm/agents/python-agent/getting-started/python-agent-eol-policy/) l&apos;agent Python de New Relic pour obtenir des informations sur la sortie de l&apos;agent et les dates de support.