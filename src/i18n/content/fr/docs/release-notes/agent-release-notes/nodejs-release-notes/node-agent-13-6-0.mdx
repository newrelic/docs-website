---
subject: Node.js agent
releaseDate: '2025-10-27'
version: 13.6.0
downloadLink: 'https://www.npmjs.com/package/newrelic'
security: []
bugs:
  - Updated `ioredis` instrumentation to handle breakage of errors when using `.pipeline`
  - Updated `openai` `instrumentStream` function to handle empty chunk when `include_usage` is set
features:
  - Added instrumentation for http2 client methods
translationType: machine
---

## Remarques

#### Caractéristiques

* Ajout d&apos;une instrumentation pour les méthodes client http2 ([#3284](https://github.com/newrelic/node-newrelic/pull/3284)) ([bda7aea](https://github.com/newrelic/node-newrelic/commit/bda7aeaac16ce9f54bd28de72aa7465be96cd157))

#### Débogage

* Instrumentation `ioredis` mise à jour pour gérer les erreurs de rupture lors de l&apos;utilisation `.pipeline`. ([#3457](https://github.com/newrelic/node-newrelic/pull/3457)) ([49f4d93](https://github.com/newrelic/node-newrelic/commit/49f4d93a59045f35406dfdbd3248dca0652727d6))
* Fonction `openai` `instrumentStream` mise à jour pour gérer le bloc vide lorsque `include_usage` est défini ([#3427](https://github.com/newrelic/node-newrelic/pull/3427)) ([f804940](https://github.com/newrelic/node-newrelic/commit/f8049405003f0811450f75468e0bddfb1f05ec2b))

#### Refactoring de code

* Mettre à jour `express` instrumentation pour vous abonner à l&apos;événement généré ([#3424](https://github.com/newrelic/node-newrelic/pull/3424)) ([bbf3d01](https://github.com/newrelic/node-newrelic/commit/bbf3d010bc402953e53cae5200af6bfb55a6446d))
* Instance mise à jour dans l&apos;instrumentation de `Array.forEach` pour une boucle for...of ou for index plus performante ([#3463](https://github.com/newrelic/node-newrelic/pull/3463)) ([99484ce](https://github.com/newrelic/node-newrelic/commit/99484ce0e7a963fbbc3cbc22f4956ce19e5eecc2))
* Instance mise à jour de `Array.forEach` pour une boucle for...of ou for index plus performante ([#3440](https://github.com/newrelic/node-newrelic/pull/3440)) ([48c37bf](https://github.com/newrelic/node-newrelic/commit/48c37bf7f85291553666d4512ca995b6a5b136a2))
* Calcul du jeton mis à jour pour `aws-bedrock` événement LLM ([#3445](https://github.com/newrelic/node-newrelic/pull/3445)) ([9450181](https://github.com/newrelic/node-newrelic/commit/945018171da713487a0b5b674e68bdbb211e655e))
* Calcul du jeton mis à jour pour `google-genai` événement LLM ([#3431](https://github.com/newrelic/node-newrelic/pull/3431)) ([41d32be](https://github.com/newrelic/node-newrelic/commit/41d32befe1d9c3201b62253a5de76c918d98a025))
* Calcul du jeton mis à jour pour `openai` événement LLM ([#3430](https://github.com/newrelic/node-newrelic/pull/3430)) ([b8678cc](https://github.com/newrelic/node-newrelic/commit/b8678cc92bb986eae7efec4b516f66406307e841))

#### Documentation

* Rapport de compatibilité mis à jour ([#3459](https://github.com/newrelic/node-newrelic/pull/3459)) ([f253b97](https://github.com/newrelic/node-newrelic/commit/f253b97c039caa9e9110055d93e0c32e2d6911a8))

#### Tâches diverses

* Mise à jour du flux de travail de sortie ([#3444](https://github.com/newrelic/node-newrelic/pull/3444)) ([d1ec158](https://github.com/newrelic/node-newrelic/commit/d1ec158f46d034160b665f8b0785c020ba39b820))

#### Tests

* Ajout d&apos;une fonction d&apos;assistance `randomString` à agent\_helper et utilisation dans ioredis pour éviter les tests instables, mise à jour également de l&apos;instance locale de chaînes aléatoires dans les tests kafka, elasticsearch et opensearch ([#3462](https://github.com/newrelic/node-newrelic/pull/3462)) ([4deb6d8](https://github.com/newrelic/node-newrelic/commit/4deb6d80d9daa7fd9d4c077a5cc52f358ed44e61))
* Correction d&apos;un conflit entre ioredis et ioredis-esm en exécutant `flushdb` au lieu de `flushall` pour éviter la suppression de l&apos;index en cours de test ([#3464](https://github.com/newrelic/node-newrelic/pull/3464)) ([5e3f0a8](https://github.com/newrelic/node-newrelic/commit/5e3f0a81bfcf8bc8cf04559f29d3a76c1262bcc7))
* Correction d&apos;un test d&apos;erreur asynchrone express pour introduire volontairement une faute d&apos;orthographe dans une méthode afin de provoquer un plantage ([#3435](https://github.com/newrelic/node-newrelic/pull/3435)) ([ff9f064](https://github.com/newrelic/node-newrelic/commit/ff9f0646c4fc23e367c1e190eb8091423c690103))
* Déplacement de l&apos;exigence common.js du SDK AWS v3 de semver ([#3461](https://github.com/newrelic/node-newrelic/pull/3461)) ([6a380ef](https://github.com/newrelic/node-newrelic/commit/6a380ef580268be131417587a2dda5adf3545e68))
* Tests Next.js épinglés à `<16.0.0` ([#3446](https://github.com/newrelic/node-newrelic/pull/3446)) ([10787a1](https://github.com/newrelic/node-newrelic/commit/10787a1f4e325b7321173ee5b2fab0809af5e8d1))
* Mise à jour de la version minimale testée de `@langchain/core` à 1.0.0 ([#3437](https://github.com/newrelic/node-newrelic/pull/3437)) ([b61f67a](https://github.com/newrelic/node-newrelic/commit/b61f67a4c6d59f0b2a49e0de93a6d38e56d214fd))

### Déclaration de soutien :

Nous vous recommandons de mettre à jour vers la dernière version de l&apos;agent dès qu&apos;elle est disponible. Si vous ne pouvez pas effectuer la mise à niveau vers la dernière version, mettez à jour vos agents vers une version datant de moins de 90 jours. En savoir plus sur la façon de tenir les agents informés. ([https://docs.newrelic.com/docs/new-relic-solutions/new-relic-one/install-configure/update-new-relic-agent/](https://docs.newrelic.com/docs/new-relic-solutions/new-relic-one/install-configure/update-new-relic-agent/))

Consultez la politique EOL de l&apos;agent New Relic Node.js pour obtenir des informations sur la sortie de l&apos;agent et les dates de support. ([https://docs.newrelic.com/docs/apm/agents/nodejs-agent/getting-started/nodejs-agent-eol-policy/](https://docs.newrelic.com/docs/apm/agents/nodejs-agent/getting-started/nodejs-agent-eol-policy/))