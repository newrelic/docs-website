---
subject: Ruby agent
releaseDate: '2025-07-31'
version: 9.20.0
downloadLink: 'https://rubygems.org/downloads/newrelic_rpm-9.20.0.gem'
features:
  - Add ECS Docker ID for Fargate
  - 'Add NewRelic::Helper.version_satisfied?'
  - Add code.stacktrace attribute on datastore spans when duration exceeds configured threshold
  - Consolidate "Unknown" constant values
bugs:
  - Fix Brewfile source links
  - Fix error when using HTTPX 1.5.0
  - Bugfixes and improvements to debug level agent logs
  - Fix risk of server-side forgery for Slack workflow script
  - Replace JSON.load calls with JSON.parse
security: []
translationType: machine
---

<Callout variant="important">
  Nous vous recommandons de mettre à jour vers la dernière version de l&apos;agent dès qu&apos;elle est disponible. Si vous ne pouvez pas effectuer la mise à niveau vers la dernière version, mettez à jour vos agents vers une version datant de moins de 90 jours. En savoir plus sur [la façon de tenir les agents informés](/docs/new-relic-solutions/new-relic-one/install-configure/update-new-relic-agent/).

  Consultez la politique EOL de l&apos;agent New Relic Ruby [pour obtenir des informations sur la sortie de l&apos;agent et les dates de support.](https://docs.newrelic.com/docs/apm/agents/ruby-agent/getting-started/ruby-agent-eol-policy/)
</Callout>

## v9.20.0

* **Fonctionnalité : Ajouter un identifiant ECS Docker pour Fargate**

  Auparavant, l’agent Ruby n’enregistrait pas l’ID Docker lors de son exécution dans un environnement AWS ECS Fargate. L&apos;ID Docker sera désormais enregistré correctement. [PR#3172](https://github.com/newrelic/newrelic-ruby-agent/pull/3172)

* **Fonctionnalité : Ajouter NewRelic::Helper.version\_satisfied?**

  L&apos;agent dispose d&apos;une nouvelle méthode d&apos;assistance pour simplifier la comparaison des versions. `NewRelic::Helper.version_satisfied?` accepte trois arguments : un numéro de version côté gauche, l&apos;opérateur de comparaison sous forme de chaîne et un numéro de version côté droit. Nos remerciements vont à [@kekke-n](https://github.com/kekke-n) pour cette contribution. [PR#3182](https://github.com/newrelic/newrelic-ruby-agent/pull/3182)

* **Fonctionnalité : Ajouter l&apos;attribut code.stacktrace sur les étendues datastore lorsque la durée dépasse le seuil configuré**

  L&apos;agent ajoutera désormais l&apos;attribut `code.stacktrace` aux étendues datastore lorsque la durée dépasse le seuil configuré. Le seuil est configuré à l’aide de l’option de configuration `transaction_tracer.stack_trace_threshold`. [PR#3220](https://github.com/newrelic/newrelic-ruby-agent/pull/3220)

* **fonctionnalité : consolider les valeurs constantes &quot;Inconnues&quot;**

  Toutes les références aux différents styles de majuscules pour « Inconnu » ont été consolidées en deux constantes : `NewRelic::UNKNOWN` et `NewRelic::UNKNOWN_LOWER`. Merci, [@tsubasa1122](https://github.com/@tsubasa1122), pour votre contribution ! [PR#3185](https://github.com/newrelic/newrelic-ruby-agent/pull/3185)

* **Correction de bug : correction des liens source du fichier Brewfile**

  Auparavant, les liens du fichier README du multivers vers le Brewfile étaient rompus. Nos remerciements vont à [@emmanuel-ferdman](https://github.com/emmanuel-ferdman) pour avoir soumis un PR pour les corriger ! [PR#3191](https://github.com/newrelic/newrelic-ruby-agent/pull/3191)

* **Correction de bug : correction d&apos;une erreur lors de l&apos;utilisation de HTTPX 1.5.0**

  L&apos;agent a précédemment rencontré une erreur lors de l&apos;utilisation de la nouvelle version HTTPX 1.5.0. Cela était dû à un changement dans la façon dont HTTPX stocke la réponse. L&apos;agent a été mis à jour pour gérer correctement ce changement et ne rencontre plus d&apos;erreur lors de l&apos;utilisation de HTTPX 1.5.0. [PR#3203](https://github.com/newrelic/newrelic-ruby-agent/pull/3203)

* **Correction de bugs : corrections de bugs et améliorations des logs de l&apos;agent de niveau de débogage**

  Améliore l&apos;informations enregistrée au niveau de débogage par l&apos;agent lorsque l&apos;agent lit une source configuration. [PR#3221](https://github.com/newrelic/newrelic-ruby-agent/pull/3221)

* **Correction de bug : corrige le risque de falsification côté serveur pour le script de workflow Slack**

  En interne, nous suivons les gemmes qui sortent à l&apos;aide d&apos;un workflow d&apos;actions GitHub qui publie des mises à jour sur Slack. \[@odaysec] a identifié un moyen de réduire le risque de falsification côté serveur pour ce workflow. Merci! [PR#3184](https://github.com/newrelic/newrelic-ruby-agent/pull/3184)

* **Correction de bug : remplacer les appels JSON.load par JSON.parse**

  En général, JSON.parse est considéré comme plus sûr que JSON.load. Merci, [@odaysec](https://github.com/odaysec), d&apos;avoir attiré notre attention sur ce point ! [PR#3183](https://github.com/newrelic/newrelic-ruby-agent/pull/3183) [PR#3230](https://github.com/newrelic/newrelic-ruby-agent/pull/3230)