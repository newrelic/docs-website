---
title: Gérer le moniteur de ping
tags:
  - Synthetics
  - APIs
  - NerdGraph
  - Examples
metaDescription: How to use New Relic NerdGraph API to create ping monitors for synthetic monitoring.
freshnessValidatedDate: never
translationType: machine
---

New Relic vous permet d&apos;utiliser NerdGraph pour créer [un moniteur de ping](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors) (également appelé moniteur simple). Le moniteur Ping vérifie si une URL ou un point de terminaison est accessible en effectuant requests HTTP à intervalles réguliers. Ce tutoriel fournit des exemples d&apos;utilisation de l&apos;API NerdGraph pour automatiser la création d&apos;un moniteur de ping.

## Créer un moniteur de ping [#create-ping-monitor]

Vous pouvez créer un moniteur de ping en utilisant la mutation `syntheticsCreateSimpleMonitor`. Cette mutation vous permet de configurer monitoring pour toute URL ou point de terminaison accessible publiquement.

### Paramètres d&apos;entrée

<table>
  <thead>
    <tr>
      <th>
        paramètres
      </th>

      <th>
        Type de données
      </th>

      <th>
        Est-ce obligatoire ?
      </th>

      <th>
        Description
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `accountId`
      </td>

      <td>
        Entier
      </td>

      <td>
        Oui
      </td>

      <td>
        Votre 

        [identifiant de compte](/docs/accounts/accounts-billing/account-structure/account-id)

         New Relic sur lequel le moniteur sera créé.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.locations.public`
      </td>

      <td>
        Array
      </td>

      <td>
        Oui
      </td>

      <td>
        éventail d&apos;identifiants 

        [publics d&apos;emplacement](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors/#setting-location)

         où le moniteur effectuera des vérifications (par exemple, 

        `["US_EAST_1", "US_WEST_1"]`

        ).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.name`
      </td>

      <td>
        Chaîne
      </td>

      <td>
        Oui
      </td>

      <td>
        Nom d&apos;affichage de votre moniteur de ping.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.period`
      </td>

      <td>
        Énumération
      </td>

      <td>
        Oui
      </td>

      <td>
        Fréquence d&apos;exécution du moniteur. Options : 

        `EVERY_MINUTE`

        , 

        `EVERY_5_MINUTES`

        , 

        `EVERY_10_MINUTES`

        , 

        `EVERY_15_MINUTES`

        , 

        `EVERY_30_MINUTES`

        , 

        `EVERY_HOUR`

        , 

        `EVERY_6_HOURS`

        , 

        `EVERY_12_HOURS`

        , 

        `EVERY_DAY`

        .
      </td>
    </tr>

    <tr>
      <td>
        `monitor.status`
      </td>

      <td>
        Énumération
      </td>

      <td>
        Oui
      </td>

      <td>
        État du moniteur. Options : 

        `ENABLED`

         (le moniteur est actif et effectue des vérifications), 

        `DISABLED`

         (le moniteur est inactif).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.uri`
      </td>

      <td>
        Chaîne
      </td>

      <td>
        Oui
      </td>

      <td>
        L&apos;URL ou le point de terminaison vers le moniteur (par exemple, 

        `https://example.com`

        ).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.advancedOptions.responseValidationText`
      </td>

      <td>
        Chaîne
      </td>

      <td>
        Non
      </td>

      <td>
        Texte qui doit figurer dans la réponse pour que le contrôle soit réussi. Si cette option est spécifiée, le moniteur échouera si ce texte est introuvable dans le corps de la réponse.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.advancedOptions.useTlsValidation`
      </td>

      <td>
        Booléen
      </td>

      <td>
        Non
      </td>

      <td>
        Faut-il valider le protocole TLS/certificat SSL ? Définissez la valeur à 

        `true`

         pour vérifier la validité de la chaîne SSL du certificat.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.apdexTarget`
      </td>

      <td>
        Virgule flottante
      </td>

      <td>
        Non
      </td>

      <td>
        L&apos;Apdex cible du moniteur en secondes, utilisé pour alimenter les rapports SLA. Par défaut, 7,0 secondes.
      </td>
    </tr>
  </tbody>
</table>

### Demande d&apos;échantillon

```graphql
mutation {
  syntheticsCreateSimpleMonitor(
    accountId: ACCOUNT_ID
    monitor: {
      locations: { public: ["LOCATION_1", "LOCATION_2"] }
      name: "YOUR_MONITOR_NAME"
      period: PERIOD
      status: STATUS
      uri: "MONITORED_URI"
      advancedOptions: {
        customHeaders: { name: "HEADER_NAME", value: "HEADER_VALUE" }
        redirectIsFailure: REDIRECT_IS_FAILURE
        responseValidationText: "VALIDATION_TEXT"
        shouldBypassHeadRequest: BYPASS_HEAD_REQUEST
        useTlsValidation: TLS_VALIDATION
      }
      apdexTarget: APDEX_TARGET
    }
  ) {
    errors {
      description
      type
    }
  }
}
```

### Exemple de réponse

Une réponse positive renvoie `null` en cas d&apos;erreur :

```json
{
  "data": {
    "syntheticsCreateSimpleMonitor": {
      "errors": null
    }
  }
}
```

En cas de problème lors de la création du moniteur, le éventail `errors` contiendra des objets avec des champs `description` et `type` expliquant ce qui s&apos;est mal passé.

## Mettre à jour un moniteur de ping [#update-ping-monitor]

Vous pouvez mettre à jour un moniteur de ping existant en utilisant la mutation `syntheticsUpdateSimpleMonitor`. Cela vous permet de modifier la configuration d&apos;un moniteur de ping déjà créé.

### Paramètres d&apos;entrée

<table>
  <thead>
    <tr>
      <th>
        paramètres
      </th>

      <th>
        Type de données
      </th>

      <th>
        Est-ce obligatoire ?
      </th>

      <th>
        Description
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `guid`
      </td>

      <td>
        Chaîne
      </td>

      <td>
        Oui
      </td>

      <td>
        L&apos;identifiant unique 

        [GUID](/docs/apis/nerdgraph/examples/synthetics-api/query-synthetics-data#query-monitors)

         de l&apos;entité du moniteur que vous souhaitez mettre à jour.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.locations.public`
      </td>

      <td>
        Array
      </td>

      <td>
        Non
      </td>

      <td>
        éventail d&apos;identifiants 

        [publics d&apos;emplacement](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors/#setting-location)

         où le moniteur effectuera des vérifications (par exemple, 

        `["US_EAST_1", "US_WEST_1"]`

        ).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.name`
      </td>

      <td>
        Chaîne
      </td>

      <td>
        Non
      </td>

      <td>
        Le nom d&apos;affichage mis à jour pour votre moniteur de ping.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.period`
      </td>

      <td>
        Énumération
      </td>

      <td>
        Non
      </td>

      <td>
        Fréquence d&apos;exécution du moniteur. Options : 

        `EVERY_MINUTE`

        , 

        `EVERY_5_MINUTES`

        , 

        `EVERY_10_MINUTES`

        , 

        `EVERY_15_MINUTES`

        , 

        `EVERY_30_MINUTES`

        , 

        `EVERY_HOUR`

        , 

        `EVERY_6_HOURS`

        , 

        `EVERY_12_HOURS`

        , 

        `EVERY_DAY`

        .
      </td>
    </tr>

    <tr>
      <td>
        `monitor.status`
      </td>

      <td>
        Énumération
      </td>

      <td>
        Non
      </td>

      <td>
        État du moniteur. Options : 

        `ENABLED`

         (le moniteur est actif et effectue des vérifications), 

        `DISABLED`

         (le moniteur est inactif).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.uri`
      </td>

      <td>
        Chaîne
      </td>

      <td>
        Non
      </td>

      <td>
        L&apos;URL ou le point de terminaison vers le moniteur (par exemple, 

        `https://example.com`

        ).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.advancedOptions.customHeaders`
      </td>

      <td>
        Objet
      </td>

      <td>
        Non
      </td>

      <td>
        En-têtes HTTP personnalisés à inclure dans la requête. Chaque en-tête possède une propriété 

        `name`

         et 

        `value`

        .
      </td>
    </tr>

    <tr>
      <td>
        `monitor.advancedOptions.redirectIsFailure`
      </td>

      <td>
        Booléen
      </td>

      <td>
        Non
      </td>

      <td>
        Si 

        `true`

        , le moniteur traitera les redirections HTTP (codes d&apos;état 3xx) comme des échecs.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.advancedOptions.responseValidationText`
      </td>

      <td>
        Chaîne
      </td>

      <td>
        Non
      </td>

      <td>
        Texte qui doit figurer dans la réponse pour que le contrôle soit réussi. Si cette option est spécifiée, le moniteur échouera si ce texte est introuvable dans le corps de la réponse.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.advancedOptions.shouldBypassHeadRequest`
      </td>

      <td>
        Booléen
      </td>

      <td>
        Non
      </td>

      <td>
        Si 

        `true`

        , le moniteur ignorera la requête HEAD initiale et effectuera uniquement une requête GET.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.advancedOptions.useTlsValidation`
      </td>

      <td>
        Booléen
      </td>

      <td>
        Non
      </td>

      <td>
        Faut-il valider le protocole TLS/certificat SSL ? Définissez la valeur à 

        `true`

         pour vérifier la validité de la chaîne SSL du certificat.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.apdexTarget`
      </td>

      <td>
        Virgule flottante
      </td>

      <td>
        Non
      </td>

      <td>
        L&apos;Apdex cible du moniteur en secondes, utilisé pour alimenter les rapports SLA. Par défaut, 7,0 secondes.
      </td>
    </tr>
  </tbody>
</table>

### Demande d&apos;échantillon

```graphql
mutation {
  syntheticsUpdateSimpleMonitor(
    guid: "ENTITY_GUID"
    monitor: {
      locations: { public: ["LOCATION_1", "LOCATION_2"] }
      name: "YOUR_MONITOR_NAME"
      period: PERIOD
      status: STATUS
      uri: "MONITORED_URI"
      advancedOptions: {
        customHeaders: { name: "HEADER_NAME", value: "HEADER_VALUE" }
        redirectIsFailure: REDIRECT_IS_FAILURE
        responseValidationText: "VALIDATION_TEXT"
        shouldBypassHeadRequest: BYPASS_HEAD_REQUEST
        useTlsValidation: TLS_VALIDATION
      }
      apdexTarget: APDEX_TARGET
    }
  ) {
    errors {
      description
      type
    }
  }
}
```

### Exemple de réponse

Une réponse positive renvoie `null` en cas d&apos;erreur :

```json
{
  "data": {
    "syntheticsUpdateSimpleMonitor": {
      "errors": null
    }
  }
}
```

En cas de problème lors de la mise à jour du moniteur, le éventail `errors` contiendra des objets avec des champs `description` et `type` expliquant ce qui s&apos;est mal passé.

## Supprimer un moniteur Synthétique [#delete-monitor]

Cette API vous permet de supprimer un moniteur existant en utilisant la mutation `syntheticsDeleteMonitor` avec le paramètre GUID.

### Paramètres d&apos;entrée

<table>
  <thead>
    <tr>
      <th>
        paramètres
      </th>

      <th>
        Type de données
      </th>

      <th>
        Est-ce obligatoire ?
      </th>

      <th>
        Description
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `guid`
      </td>

      <td>
        Chaîne
      </td>

      <td>
        Oui
      </td>

      <td>
        L&apos;identifiant unique 

        [GUID](/docs/apis/nerdgraph/examples/synthetics-api/query-synthetics-data#query-monitors)

         de l&apos;entité de monitoring que vous souhaitez supprimer.
      </td>
    </tr>
  </tbody>
</table>

### Demande d&apos;échantillon

```graphql
mutation {
  syntheticsDeleteMonitor(
    guid: "ENTITY_GUID"
  ) {
    deletedGuid
  }
}
```

### Exemple de réponse

Une suppression réussie renvoie le GUID du moniteur supprimé :

```json
{
  "data": {
    "syntheticsDeleteMonitor": {
      "deletedGuid": "ENTITY_GUID"
    }
  }
}
```

En cas de problème lors de la suppression du moniteur, une erreur sera renvoyée avec des détails sur ce qui s&apos;est mal passé.