---
title: "Tutoriel NerdGraph\_: service de gestion des secrets"
metaDescription: Learn how to use the Secrets management service to securely store and manage your secrets.
freshnessValidatedDate: never
translationType: machine
---

Lorsque vous travaillez avec New Relic, vous pouvez avoir besoin de stocker des informations sensibles telles que les clés API et les identifiants d&apos;application. Dans New Relic, on les appelle des secrets. Le <DNT>Secrets management service</DNT> offre un moyen sécurisé de stocker et de récupérer ces secrets dans un emplacement centralisé via notre [API NerdGraph](/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph/).

<Callout variant="important">
  Vous ne pouvez stocker les secrets qu&apos;au format chaîne de caractères.
</Callout>

Les principales fonctionnalités de <DNT>Secrets management service</DNT> sont :

* **Clés uniques pour les secrets**: vous pouvez empêcher l’exposition accidentelle des secrets en attribuant une clé unique à chacun d’eux lors du stockage. Utilisez la clé pour récupérer et gérer les secrets.

* **Secrets stockés au niveau du [compte ou de l&apos;organisation](/docs/accounts/accounts-billing/account-structure/new-relic-account-structure/)**: Pour accéder à un secret et l&apos;utiliser sur plusieurs comptes, vous pouvez le stocker au niveau de l&apos;organisation. Si un secret est spécifique à un seul compte, vous pouvez le stocker au niveau du compte.

* **Versions des secrets**: vous pouvez mettre à jour un secret sans perdre la version précédente. Le <DNT>Secrets management service</DNT> suit toutes les versions d&apos;un secret.

* **Suppression et récupération contrôlées des secrets**: Le service permet la suppression récupérable des secrets. Les utilisateurs sans l’autorisation Purge peuvent supprimer temporairement des secrets. La suppression permanente est réservée aux utilisateurs disposant de l’autorisation Purge.

* **Secrets standard avec accès basé sur les rôles**: Les secrets standard sont accessibles à tous les utilisateurs disposant d&apos;autorisations dans le compte ou l&apos;organisation. Les administrateurs contrôlent l&apos;accès en attribuant des rôles personnalisés avec des niveaux d&apos;autorisation allant de <DNT>**View**</DNT> à <DNT>**Purge**</DNT>.

* **Secrets partageables avec un accès précis**: Les secrets partageables sont par défaut privés pour le créateur, qui peut accorder des autorisations spécifiques (lecture, mise à jour, suppression) à des utilisateurs, des groupes ou des identités système individuels. Les administrateurs de l’organisation conservent un accès complet à tous les secrets partageables à des fins de supervision et de gestion.

## Facturation des services de gestion des secrets [#secrets-management-services-billing]

Le <DNT>Secrets management service</DNT> est une fonctionnalité Advanced Compute Product proposée en tant que [module complémentaire](/docs/accounts/accounts-billing/new-relic-one-pricing-billing/add-on-billing) ou dans le cadre du modèle de tarification Compute. Les [CCU](/docs/licenses/license-information/product-definitions/new-relic-one-pricing-definitions/#compute-capacity-unit) avancées sont consommées lorsque des requêtes NerdGraph sont exécutées pour stocker, récupérer ou gérer des secrets.

## Contrôle d&apos;accès aux secrets standard [#security-and-access-control]

Les utilisateurs disposant de [rôles standard](/docs/accounts/accounts-billing/new-relic-one-user-management/user-management-concepts/#standard-roles) peuvent accéder aux <DNT>Secrets management service</DNT> spécifiques aux comptes auxquels ils ont accès, avec les autorisations suivantes.

* **Lecture seule**: les utilisateurs ne peuvent que récupérer les secrets. Ils ne peuvent pas créer, mettre à jour ou supprimer des secrets.

* **Utilisateur standard**: Les utilisateurs peuvent créer, mettre à jour, récupérer et supprimer temporairement des secrets.

* **Tous les administrateurs de produits**: les utilisateurs ont un accès complet à <DNT>Secrets management service</DNT>. Ils peuvent créer, mettre à jour, récupérer, supprimer temporairement, supprimer définitivement et extraire la liste des secrets.

* **Utilisateur de facturation**: les utilisateurs ne peuvent extraire que la liste des secrets.

Pour gérer les secrets au niveau du compte avec un rôle non standard, demandez à votre administrateur de [créer un rôle personnalisé](/docs/accounts/accounts-billing/new-relic-one-user-management/account-user-mgmt-tutorial/#roles) avec les autorisations nécessaires et de l’attribuer à votre groupe d’utilisateurs.

Pour gérer les secrets au niveau de l’organisation, demandez à votre administrateur de créer un [rôle personnalisé à l’échelle de l’organisation via l’API NerdGraph](https://docs.newrelic.com/docs/apis/nerdgraph/examples/nerdgraph-manage-groups/#create-role), d’ajouter les autorisations requises et de l’attribuer au groupe d’utilisateurs. Les [Responsables d’organisation](/docs/accounts/accounts-billing/new-relic-one-user-management/user-management-concepts/#admin-settings) disposent d’autorisations par défaut au niveau de l’organisation, mais pour leur permettre de gérer les secrets, demandez à votre administrateur de leur attribuer un rôle personnalisé spécifique au <DNT>Secrets management service</DNT>.

<Callout variant="important">
  Configurez les utilisateurs, les rôles, les autorisations et l’accès au <DNT>Secrets management service</DNT> au niveau du compte et de l’organisation, conformément aux politiques et aux exigences de votre organisation.
</Callout>

## Secrets partageables avec un accès précis [#sharable-secrets]

Alors que les secrets standard sont accessibles à tous les utilisateurs disposant d&apos;autorisations dans un compte ou une organisation, les entreprises avec plusieurs équipes ont souvent besoin de restreindre les secrets à des individus spécifiques. Les secrets partageables répondent à ce besoin.

<Callout variant="important">
  Pour utiliser des secrets partageables, les utilisateurs doivent d&apos;abord disposer des autorisations de base décrites dans [Contrôle d&apos;accès aux secrets standard](#security-and-access-control). Les autorisations d&apos;accès affinées décrites ci-dessous **s&apos;ajoutent à** ces exigences de base.
</Callout>

Lorsque vous créez un secret partageable, vous en devenez automatiquement le propriétaire avec un contrôle total. Vous pouvez accorder l&apos;accès aux utilisateurs, aux groupes ou aux identités système en attribuant des autorisations individuelles ou en utilisant des rôles qui regroupent plusieurs autorisations.

**Autorisations individuelles (accordées en plus de l&apos;accès de base) :**

* **Lecture**: Récupérer la valeur du secret
* **Mettre à jour**: modifier la valeur du secret
* **Supprimer**: Supprimer le secret

**Rôles prédéfinis (accordés en plus de l’accès de base) :**

* **Propriétaire du secret**: Contrôle total (lecture, mise à jour, suppression, octroi/révocation)
* **Lecteur de secrets**: Accès en lecture seule

Vous pouvez également [créer des rôles personnalisés](\(/docs/accounts/accounts-billing/new-relic-one-user-management/account-user-mgmt-tutorial/#roles\)) qui combinent des autorisations spécifiques en fonction de vos besoins. Les administrateurs d&apos;organisation conservent un accès complet à tous les secrets partageables à des fins de supervision.

Lorsque vous avez besoin d&apos;un moniteur synthétique, d&apos;un workflow ou d&apos;un autre processus automatisé pour accéder à votre secret, vous accordez l&apos;accès à son identité système. Une identité système est un identifiant unique attribué à chaque processus automatisé dans New Relic. Lorsque vous liez un secret à un moniteur ou à un workflow via l&apos;interface utilisateur de New Relic, l&apos;identité système de ce processus automatisé est utilisée pour contrôler l&apos;accès au moment de l&apos;exécution.

<Callout variant="important">
  Les secrets standard ne peuvent pas être convertis en secrets partageables. Pour migrer un secret standard existant, créez un nouveau secret partageable avec la même valeur, accordez l&apos;accès approprié, mettez à jour vos applications et supprimez l&apos;ancien secret.
</Callout>

## Conditions préalables [#prerequisites]

Pour utiliser le <DNT>Secrets management service</DNT>, vous avez besoin de :

* Le plan tarifaire [Advanced Compute](/docs/accounts/accounts-billing/new-relic-one-pricing-billing/add-on-billing)
* Un [compte New Relic](https://newrelic.com/signup)
* Votre clé d&apos;utilisateur d&apos;API pour les [requêtes et mutations](\(https://docs.newrelic.com/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph/#terminology\))
* Autorisations appropriées pour créer et gérer des secrets. Reportez-vous à [Contrôle d&apos;accès aux secrets standard](#security-and-access-control) et [Secrets partageables avec un accès précis](#sharable-secrets) pour plus de détails sur les rôles et les autorisations requis.

Le type d’utilisateur et les rôles attribués peuvent affecter vos autorisations NerdGraph. Pour plus de détails, consultez [Facteurs affectant l’accès](https://docs.newrelic.com/docs/accounts/accounts-billing/account-structure/factors-affecting-access-features-data/#user-permissions).

## Utilisez le <DNT>Secrets management service</DNT> [#use-secrets-management-service]

Depuis le [NerdGraph Explorer](/docs/apis/nerdgraph/get-started/nerdgraph-explorer/), utilisez les [mutations et requêtes](/docs/accounts/accounts-billing/account-structure/factors-affecting-access-features-data/#user-permissions) pour interagir avec <DNT>Secrets management service</DNT>.

Voici les attributs courants que vous utiliserez dans les mutations et les requêtes :

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        **Nom de l&apos;attribut**
      </th>

      <th style={{ width: "200px" }}>
        **Type de données**
      </th>

      <th>
        **Description**
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `description`
      </td>

      <td>
        Chaîne
      </td>

      <td>
        Une brève description du secret.
      </td>
    </tr>

    <tr>
      <td>
        `key`
      </td>

      <td>
        Chaîne
      </td>

      <td>
        Un identifiant unique pour le secret dans un espace de noms. La même clé peut exister dans différents espaces de noms.
      </td>
    </tr>

    <tr>
      <td>
        `namespace`
      </td>

      <td>
        Chaîne
      </td>

      <td>
        Sert de regroupement logique des secrets, en les organisant et en les catégorisant pour améliorer la gestion et éviter les conflits. Il s’associe à la clé pour créer une adresse unique pour le secret. Cet attribut est utile dans les environnements avec plusieurs équipes ou projets utilisant New Relic.
      </td>
    </tr>

    <tr>
      <td>
        `scope`
      </td>

      <td>
        * `type`: Enum
        * `id`: chaîne
      </td>

      <td>
        La portée du stockage des secrets en termes d’accessibilité. Les attributs de définition sont :

        * `type`: Pour utiliser le secret sur plusieurs comptes, sélectionnez `Organization`. Si le secret est spécifique à un seul compte, sélectionnez `Account`. Pour stocker un secret au niveau de l&apos;organisation, vous devez disposer du [rôle personnalisé à l&apos;échelle de l&apos;organisation](https://docs.newrelic.com/docs/apis/nerdgraph/examples/nerdgraph-manage-groups/#create-role) avec les autorisations requises. Reportez-vous à la section [Contrôle d&apos;accès](#security-and-access-control) pour plus de détails.

        * `id`: ID de compte ou d’organisation correspondant.
      </td>
    </tr>

    <tr>
      <td>
        `tags`
      </td>

      <td>
        Array
      </td>

      <td>
        Fonctionne comme des paires clé-valeur qui ajoutent des métadonnées à vos entités, y compris les applications, les services et les hôtes. L’utilisation de balises vous permet d’améliorer la capacité d’organisation, de filtrage et de gestion des secrets.
      </td>
    </tr>

    <tr>
      <td>
        `value`
      </td>

      <td>
        Chaîne
      </td>

      <td>
        Le secret réel.
      </td>
    </tr>

    <tr>
      <td>
        `purge`
      </td>

      <td>
        Booléen
      </td>

      <td>
        Supprime toutes les versions du secret.

        * `true`: Supprime le secret de façon permanente.
        * `false`: Vous pouvez récupérer le secret supprimé avec toutes ses versions.

        Seuls les administrateurs de tous les produits ou un utilisateur ayant un rôle personnalisé avec l&apos;autorisation `purge` peuvent supprimer définitivement les secrets. Pour plus de détails, consultez la section [Contrôle d&apos;accès](#security-and-access-control).
      </td>
    </tr>

    <tr>
      <td>
        `version`
      </td>

      <td>
        Chaîne
      </td>

      <td>
        Comme vous pouvez stocker plusieurs versions d&apos;un secret, il représente le numéro de version du secret.
      </td>
    </tr>

    <tr>
      <td>
        `cursor` (Facultatif)
      </td>

      <td>
        Chaîne
      </td>

      <td>
        Lors de la récupération d&apos;une liste de secrets, si la réponse contient l&apos;attribut `nextCursor`, cela indique qu&apos;il y a plus de secrets disponibles au-delà de la page actuelle de résultats. Pour accéder à la page suivante de résultats, utilisez la valeur `nextCursor` dans l&apos;attribut `cursor` et exécutez à nouveau la requête.
      </td>
    </tr>
  </tbody>
</table>

<Callout variant="important">
  Copiez votre secret réel uniquement dans l’attribut `value`. Assurez-vous qu’il n’est déclaré dans aucun autre attribut, tel que `description`, `key` ou `namespace`.
</Callout>

### Opérations [#operations]

Les opérations que vous pouvez effectuer avec <DNT>Secrets management service</DNT> sont organisées en deux catégories :

<Callout variant="tip">
  **Choisir entre des secrets standard et partageables :**

  * Utilisez les **secrets standard** (`secretsManagementCreateSecret`) lorsque vous souhaitez partager un secret avec tous les utilisateurs qui ont accès au compte ou à l&apos;organisation.
  * Utilisez les **secrets partageables** (`secretsManagementCreateShareableSecret`) lorsque vous devez contrôler exactement qui peut accéder à un secret en accordant des autorisations à des utilisateurs, des groupes ou des identités système spécifiques.
</Callout>

<CollapserGroup>
  <Collapser id="create-secret" title="Stocker un secret">
    Utilisez la mutation `secretsManagementCreateSecret` avec les paramètres suivants pour stocker un secret standard qui sera accessible à tous les utilisateurs disposant d’autorisations dans le compte ou l’organisation spécifié.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nom de l&apos;attribut**
          </th>

          <th style={{ width: "200px" }}>
            **Type de données**
          </th>

          <th>
            **Description**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `description` (Facultatif)
          </td>

          <td>
            Chaîne
          </td>

          <td>
            Donnez une description du secret.
          </td>
        </tr>

        <tr>
          <td>
            `key` (Requis)
          </td>

          <td>
            Chaîne
          </td>

          <td>
            Attribuez une clé unique au secret.
          </td>
        </tr>

        <tr>
          <td>
            `namespace` (Facultatif)
          </td>

          <td>
            Chaîne
          </td>

          <td>
            Attribuez un nom si vous souhaitez stocker le secret dans un espace de noms spécifique.
          </td>
        </tr>

        <tr>
          <td>
            `scope` (Requis)
          </td>

          <td />

          <td>
            `type`: Enum `id`: chaîne
          </td>

          <td>
            * `type`: En fonction de votre [rôle](#security-and-access-control) et de vos exigences, sélectionnez `Account` ou `Organization`.
            * `id`: Saisissez l&apos;ID de compte ou d&apos;organisation correspondant.
          </td>
        </tr>

        <tr>
          <td>
            `tags` (Facultatif)
          </td>

          <td>
            Array
          </td>

          <td>
            Attribuez une paire clé-valeur.
          </td>
        </tr>

        <tr>
          <td>
            `value` (Requis)
          </td>

          <td>
            Chaîne
          </td>

          <td>
            Saisissez le secret réel.
          </td>
        </tr>
      </tbody>
    </table>

    #### Exemple de requête :

    ```graphql
    mutation {
      secretsManagementCreateSecret(
        description: "ZXY"
        key: "Test2"
        scope: { id: 1, type: ACCOUNT }
        value: "1990@123"
        namespace: "Namespace1"
      )
    }
    ```

    ### Réponse

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nom de l&apos;attribut**
          </th>

          <th>
            **Description**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `description`
          </td>

          <td>
            La description du secret, si elle est fournie.
          </td>
        </tr>

        <tr>
          <td>
            `key`
          </td>

          <td>
            La clé attribuée.
          </td>
        </tr>

        <tr>
          <td>
            `latestVersion`
          </td>

          <td>
            La version du secret. Si vous avez créé un nouveau secret, la version sera `0`.
          </td>
        </tr>

        <tr>
          <td>
            `metadata`
          </td>

          <td>
            Métadonnées associées au secret, le cas échéant.
          </td>
        </tr>

        <tr>
          <td>
            `namespace`
          </td>

          <td>
            L’espace de noms du secret, s’il est fourni.
          </td>
        </tr>

        <tr>
          <td>
            `scope`
          </td>

          <td>
            L&apos;ID de compte ou d&apos;organisation associé au secret.
          </td>
        </tr>

        <tr>
          <td>
            `tags`
          </td>

          <td>
            La paire clé-valeur associée au secret, le cas échéant.
          </td>
        </tr>
      </tbody>
    </table>

    #### Exemple de réponse :

    ```json
     {
      "data": {
        "secretsManagementCreateSecret": {
          "description": "ZXY",
          "key": "Test2",
          "latestVersion": 0,
          "scope": {
            "id": "1",
            "type": "ACCOUNT"
          }
        }
      }
     } 
    ```
  </Collapser>

  <Collapser id="create-sharable-secret" title="Stocker un secret partageable">
    Utilisez la mutation `secretsManagementCreateShareableSecret` pour créer un secret privé avec un contrôle d’accès précis. Lorsque vous créez un secret partageable, vous en devenez automatiquement le propriétaire avec un contrôle total sur les personnes qui peuvent y accéder.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nom de l&apos;attribut**
          </th>

          <th style={{ width: "200px" }}>
            **Type de données**
          </th>

          <th>
            **Description**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `description` (Facultatif)
          </td>

          <td>
            Chaîne
          </td>

          <td>
            Donnez une description du secret.
          </td>
        </tr>

        <tr>
          <td>
            `key` (Requis)
          </td>

          <td>
            Chaîne
          </td>

          <td>
            Attribuez une clé unique au secret.
          </td>
        </tr>

        <tr>
          <td>
            `namespace` (Facultatif)
          </td>

          <td>
            Chaîne
          </td>

          <td>
            Attribuez un nom si vous souhaitez stocker le secret dans un espace de noms spécifique.
          </td>
        </tr>

        <tr>
          <td>
            `scope` (Requis)
          </td>

          <td />

          <td>
            `type`: Enum `id`: chaîne
          </td>

          <td>
            * `type`: En fonction de votre [rôle](#security-and-access-control) et de vos exigences, sélectionnez `Account` ou `Organization`.
            * `id`: Saisissez l&apos;ID de compte ou d&apos;organisation correspondant.
          </td>
        </tr>

        <tr>
          <td>
            `tags` (Facultatif)
          </td>

          <td>
            Array
          </td>

          <td>
            Attribuez une paire clé-valeur.
          </td>
        </tr>

        <tr>
          <td>
            `value` (Requis)
          </td>

          <td>
            Chaîne
          </td>

          <td>
            Saisissez le secret réel.
          </td>
        </tr>
      </tbody>
    </table>

    #### Exemple de requête :

    ```graphql
    mutation {
      secretsManagementCreateShareableSecret(
        scope: { type: ACCOUNT, id: 1 }
        key: "prod-api-key"
        value: "sk_live_abc123xyz"
        namespace: "production"
        description: "Private API key for production"
        tags: [{ key: "environment", value: "production" }]
      ) {
        scope {
          type
          id
        }
        key
        namespace
        latestVersion
        description
        tags {
          key
          value
        }
        metadata {
          createdAt
          updatedAt
        }
      }
    }
    ```

    ### Réponse

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nom de l&apos;attribut**
          </th>

          <th>
            **Description**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `description`
          </td>

          <td>
            La description du secret, si elle est fournie.
          </td>
        </tr>

        <tr>
          <td>
            `key`
          </td>

          <td>
            La clé attribuée.
          </td>
        </tr>

        <tr>
          <td>
            `latestVersion`
          </td>

          <td>
            La version du secret. Si vous avez créé un nouveau secret, la version sera `0`.
          </td>
        </tr>

        <tr>
          <td>
            `metadata`
          </td>

          <td>
            Métadonnées associées au secret, notamment :

            * `createdAt`: Horodatage de la création du secret
            * `updatedAt`: Horodatage de la dernière mise à jour du secret
          </td>
        </tr>

        <tr>
          <td>
            `namespace`
          </td>

          <td>
            L’espace de noms du secret, s’il est fourni.
          </td>
        </tr>

        <tr>
          <td>
            `scope`
          </td>

          <td>
            L&apos;ID de compte ou d&apos;organisation associé au secret.
          </td>
        </tr>

        <tr>
          <td>
            `tags`
          </td>

          <td>
            La paire clé-valeur associée au secret, le cas échéant.
          </td>
        </tr>
      </tbody>
    </table>

    #### Exemple de réponse :

    ```json
    {
     "data": {
       "secretsManagementCreateShareableSecret": {
         "scope": {
           "type": "ACCOUNT",
           "id": "1"
         },
         "key": "prod-api-key",
         "namespace": "production",
         "latestVersion": 0,
         "description": "Private API key for production",
         "tags": [
           {
             "key": "environment",
             "value": "production"
           }
         ],
         "metadata": {
           "createdAt": "2025-10-30T12:34:56.789Z",
           "updatedAt": "2025-10-30T12:34:56.789Z"
         }
       }
     }
    }
    ```

    <Callout variant="tip">
      Après avoir créé un secret partageable, vous en devenez automatiquement le propriétaire. Pour accorder l’accès à d’autres utilisateurs, groupes ou identités système, utilisez la mutation `authorizationManagementGrantAccess`. Pour plus de détails, consultez la section [Accorder l’accès à un secret partageable](#grant-access-sharable-secret).
    </Callout>
  </Collapser>

  <Collapser id="retrieve-secret" title="Récupérer un secret">
    Utilisez la requête `{customerAdministration {secret}}` pour récupérer les secrets ainsi que leurs détails. Vous pouvez récupérer les secrets qui sont uniquement limités à votre compte ou organisation actuel.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nom de l&apos;attribut**
          </th>

          <th style={{ width: "200px" }}>
            **Type de données**
          </th>

          <th>
            **Description**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `key` (Requis)
          </td>

          <td>
            Chaîne
          </td>

          <td>
            Clé du secret que vous souhaitez récupérer.
          </td>
        </tr>

        <tr>
          <td>
            `namespace` (Facultatif)
          </td>

          <td>
            Chaîne
          </td>

          <td>
            L&apos;espace de noms du secret, s&apos;il est disponible.
          </td>
        </tr>

        <tr>
          <td>
            `scope` (Requis)
          </td>

          <td />

          <td>
            `type`: Enum `id`: chaîne
          </td>

          <td>
            * `type`: Sélectionnez `account` ou `organization` au niveau auquel le secret est stocké.
            * `id`: Saisissez l&apos;ID de compte ou d&apos;organisation correspondant.
          </td>
        </tr>

        <tr>
          <td>
            `unlock` (Facultatif)
          </td>

          <td>
            Chaîne
          </td>

          <td>
            La valeur par défaut `false` renvoie les métadonnées du secret sans le déverrouiller. Si vous souhaitez déverrouiller le secret et récupérer sa valeur réelle, définissez-le sur `true`.
          </td>
        </tr>

        <tr>
          <td>
            `version` (Facultatif)
          </td>

          <td>
            Entier
          </td>

          <td>
            Saisissez une version spécifique du secret que vous souhaitez récupérer. Si vous ne fournissez pas de version, la dernière version sera récupérée.
          </td>
        </tr>
      </tbody>
    </table>

    #### Exemple de requête :

    ```graphql
    {
      customerAdministration {
        secret(key: "Test2", scope: { id: 1, type: ACCOUNT }, unlock: true)
      }
    }
    ```

    ### Réponse

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nom de l&apos;attribut**
          </th>

          <th>
            **Description**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `description`
          </td>

          <td>
            La description du secret.
          </td>
        </tr>

        <tr>
          <td>
            `isSharable`
          </td>

          <td>
            Indique si le secret est un [secret partageable](#sharable-secrets) avec un contrôle d&apos;accès précis. Si `true`, le secret utilise des autorisations précises et est privé par défaut pour le créateur. Si `false`, il s&apos;agit d&apos;un secret standard accessible à tous les utilisateurs disposant d&apos;autorisations dans le compte ou l&apos;organisation.
          </td>
        </tr>

        <tr>
          <td>
            `key`
          </td>

          <td>
            La clé du secret.
          </td>
        </tr>

        <tr>
          <td>
            `metadata`
          </td>

          <td>
            Métadonnées associées au secret, le cas échéant.
          </td>
        </tr>

        <tr>
          <td>
            `namespace`
          </td>

          <td>
            L’espace de noms du secret, s’il est fourni.
          </td>
        </tr>

        <tr>
          <td>
            `retrievedValue`
          </td>

          <td>
            * `value`: La valeur réelle du secret, si `unlock` est défini sur `true`.
            * `version`: La version du secret.
          </td>
        </tr>

        <tr>
          <td>
            `scope`
          </td>

          <td>
            L&apos;ID de compte ou d&apos;organisation associé au secret.
          </td>
        </tr>

        <tr>
          <td>
            `tags`
          </td>

          <td>
            La paire clé-valeur associée au secret, le cas échéant.
          </td>
        </tr>
      </tbody>
    </table>

    #### Exemple de réponse :

    ```json
    {
      "data": {
        "customerAdministration": {
          "secret": {
            "description": "ZXY",
            "isSharable": false,
            "key": "Test2",
            "namespace": null,
            "retrievedValue": {
              "value": "1995@123",
              "version": 1
            },
            "scope": {
              "id": "1",
              "type": "ACCOUNT"
            }
          }
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="update-secret" title="Mettre à jour un secret">
    Utilisez la mutation `secretsManagementUpdateSecret` pour mettre à jour la valeur des secrets existants.

    <Callout variant="tip">
      Chaque opération de mise à jour crée une nouvelle version du secret. La version la plus élevée est toujours la dernière version du secret. Pour récupérer les anciennes versions du secret, vous pouvez utiliser la requête `{customerAdministration {secretVersions}}`. Pour plus de détails, reportez-vous à la section [Récupérer toutes les informations de version d&apos;un secret](#retrieve-secret-versions).
    </Callout>

    #### Paramètres d&apos;entrée

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nom de l&apos;attribut**
          </th>

          <th style={{ width: "200px" }}>
            **Type de données**
          </th>

          <th>
            **Description**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `description` (Facultatif)
          </td>

          <td>
            Chaîne
          </td>

          <td>
            Ajoutez une description si vous souhaitez mettre à jour celle existante.
          </td>
        </tr>

        <tr>
          <td>
            `key` (Requis)
          </td>

          <td>
            Chaîne
          </td>

          <td>
            Saisissez la clé du secret pour lequel vous souhaitez mettre à jour la valeur.
          </td>
        </tr>

        <tr>
          <td>
            `namespace` (Facultatif)
          </td>

          <td>
            Chaîne
          </td>

          <td>
            Espace de noms du secret, si disponible.
          </td>
        </tr>

        <tr>
          <td>
            `scope` (Requis)
          </td>

          <td />

          <td>
            `type`: Enum `id`: chaîne
          </td>

          <td>
            * `type`: Sélectionnez `Account` ou `Organization` au niveau auquel le secret est stocké.
            * `id`: Saisissez l&apos;ID de compte ou d&apos;organisation correspondant.
          </td>
        </tr>

        <tr>
          <td>
            `value` (Requis)
          </td>

          <td>
            Chaîne
          </td>

          <td>
            La valeur mise à jour pour le secret.
          </td>
        </tr>
      </tbody>
    </table>

    #### Exemple de requête :

    ```graphql
    mutation {
      secretsManagementUpdateSecret(
        key: "Test2"
        scope: { id: 1, type: ACCOUNT }
        value: "1995@123"
      )
    }
    ```

    ### Réponse

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nom de l&apos;attribut**
          </th>

          <th>
            **Description**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `description`
          </td>

          <td>
            Description mise à jour du secret, le cas échéant.
          </td>
        </tr>

        <tr>
          <td>
            `key`
          </td>

          <td>
            La clé du secret.
          </td>
        </tr>

        <tr>
          <td>
            `latestVersion`
          </td>

          <td>
            Le dernier numéro de version du secret après la mise à jour.
          </td>
        </tr>

        <tr>
          <td>
            `metadata`
          </td>

          <td>
            Métadonnées associées au secret, le cas échéant.
          </td>
        </tr>

        <tr>
          <td>
            `namespace`
          </td>

          <td>
            L&apos;espace de noms du secret, le cas échéant.
          </td>
        </tr>

        <tr>
          <td>
            `scope`
          </td>

          <td>
            L&apos;ID de compte ou d&apos;organisation associé au secret.
          </td>
        </tr>

        <tr>
          <td>
            `tags`
          </td>

          <td>
            La paire clé-valeur associée au secret, le cas échéant.
          </td>
        </tr>
      </tbody>
    </table>

    #### Exemple de réponse :

    ```json
    {
      "data": {
        "secretsManagementUpdateSecret": {
          "description": "ZXY",
          "key": "Test2",
          "latestVersion": 1,
          "scope": {
            "id": "1",
            "type": "ACCOUNT"
          }
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="retrieve-secret-versions" title="Récupérer toutes les informations de version d'un secret">
    Utilisez la requête `{customerAdministration {secretVersions}}` pour récupérer jusqu’à 10 versions récentes d’un secret ainsi que leurs détails. Vous pouvez récupérer les secrets qui sont uniquement limités à votre compte ou organisation actuel.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nom de l&apos;attribut**
          </th>

          <th style={{ width: "200px" }}>
            **Type de données**
          </th>

          <th>
            **Description**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `fetchDeleted` (Facultatif)
          </td>

          <td>
            Chaîne
          </td>

          <td>
            Pour obtenir uniquement les versions non supprimées du secret, définissez-le sur `false`. Pour obtenir les versions du secret, y compris celles qui ont été supprimées de manière réversible, définissez-le sur `true`.
          </td>
        </tr>

        <tr>
          <td>
            `key` (Requis)
          </td>

          <td>
            Chaîne
          </td>

          <td>
            Clé du secret que vous souhaitez récupérer.
          </td>
        </tr>

        <tr>
          <td>
            `namespace` (Facultatif)
          </td>

          <td>
            Chaîne
          </td>

          <td>
            L&apos;espace de noms du secret, s&apos;il est disponible.
          </td>
        </tr>

        <tr>
          <td>
            `scope` (Requis)
          </td>

          <td />

          <td>
            `type`: Enum `id`: chaîne
          </td>

          <td>
            * `type`: Sélectionnez `account` ou `organization` au niveau auquel le secret est stocké.
            * `id`: Saisissez l&apos;ID de compte ou d&apos;organisation correspondant.
          </td>
        </tr>
      </tbody>
    </table>

    #### Exemple de requête :

    ```graphql
    {
      customerAdministration {
        secretVersions(
          fetchDeleted: true
          key: "Test2"
          scope: { id: 1, type: ACCOUNT }
        )
      }
    }
    ```

    ### Réponse

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nom de l&apos;attribut**
          </th>

          <th>
            **Description**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `key`
          </td>

          <td>
            La clé du secret.
          </td>
        </tr>

        <tr>
          <td>
            `latestVersion`
          </td>

          <td>
            Le dernier numéro de version du secret.
          </td>
        </tr>

        <tr>
          <td>
            `namespace`
          </td>

          <td>
            L’espace de noms du secret, s’il est fourni.
          </td>
        </tr>

        <tr>
          <td>
            `scope`
          </td>

          <td>
            L&apos;ID de compte ou d&apos;organisation associé au secret.
          </td>
        </tr>

        <tr>
          <td>
            `secretVersions`
          </td>

          <td>
            Un tableau d&apos;objets contenant les détails de chaque version du secret, notamment :

            * `createdAt`: Horodatages indiquant quand chaque version a été créée.
            * `isDeleted`: Indique si la version du secret est supprimée ou non.
            * `version`: Le numéro de version du secret.
          </td>
        </tr>
      </tbody>
    </table>

    #### Exemple de réponse :

    ```json
    {
      "data": {
        "customerAdministration": {
          "secretVersions": {
            "key": "Test2",
            "latestVersion": 1,
            "namespace": null,
            "scope": {
              "id": "1",
              "type": "ACCOUNT"
            },
            "secretVersions": [
              {
                "createdAt": "2025-05-26T07:52:23.920250Z",
                "isDeleted": false,
                "version": 1
              },
              {
                "createdAt": "2025-05-26T07:45:19.395796Z",
                "isDeleted": false,
                "version": 0
              }
            ]
          }
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="delete-secrets" title="Supprimer un secret">
    Utilisez la mutation `secretsManagementDeleteSecret` pour supprimer toutes les versions d’un secret. Seuls les administrateurs de tous les produits ou un utilisateur disposant d’un rôle personnalisé avec l’autorisation `purge` peuvent choisir de supprimer définitivement des secrets. Les autres utilisateurs ne peuvent pas supprimer définitivement des secrets. Si vous n&apos;avez pas supprimé le secret de façon permanente, vous pouvez le [récupérer](#recover-secrets) à l&apos;aide de la mutation `secretsManagementRecoverSecret`.

    #### Attributs d&apos;entrée

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nom de l&apos;attribut**
          </th>

          <th style={{ width: "200px" }}>
            **Type de données**
          </th>

          <th>
            **Description**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `key` (Requis)
          </td>

          <td>
            Chaîne
          </td>

          <td>
            La clé du secret que vous souhaitez supprimer.
          </td>
        </tr>

        <tr>
          <td>
            `namespace` (Facultatif)
          </td>

          <td>
            Chaîne
          </td>

          <td>
            Espace de noms du secret, si disponible.
          </td>
        </tr>

        <tr>
          <td>
            `purge` (Requis)
          </td>

          <td>
            Booléen
          </td>

          <td>
            Pour supprimer le secret de façon permanente, définissez la valeur sur `true`. Pour une suppression réversible, définissez la valeur sur `false`.
          </td>
        </tr>

        <tr>
          <td>
            `scope` (Requis)
          </td>

          <td />

          <td>
            `type`: Enum `id`: chaîne
          </td>

          <td>
            * `type`: Sélectionnez le niveau auquel votre secret est stocké.
            * `id`: Saisissez l&apos;ID de compte ou d&apos;organisation correspondant.
          </td>
        </tr>
      </tbody>
    </table>

    #### Exemple de requête :

    ```graphql
    mutation {
      secretsManagementDeleteSecret(
        key: "Test1"
        scope: { id: 1, type: ACCOUNT }
        purge: false
      )
    }
    ```

    ### Réponse

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nom de l&apos;attribut**
          </th>

          <th>
            **Description**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `key`
          </td>

          <td>
            La clé du secret supprimé.
          </td>
        </tr>

        <tr>
          <td>
            `namespace`
          </td>

          <td>
            L&apos;espace de noms du secret supprimé, s&apos;il est disponible.
          </td>
        </tr>

        <tr>
          <td>
            `scope`
          </td>

          <td>
            L’ID du compte ou de l’organisation associé au secret supprimé.
          </td>
        </tr>
      </tbody>
    </table>

    #### Exemple de réponse :

    ```json
    {
      "data": {
        "secretsManagementDeleteSecret": {
          "key": "Test1",
          "namespace": null,
          "scope": {
            "id": "1",
            "type": "ACCOUNT"
          }
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="recover-secrets" title="Récupérer un secret">
    Utilisez la mutation `secretsManagementRecoverSecret` pour récupérer les secrets que vous avez supprimés à l’aide de la mutation `secretsManagementDeleteSecret` auparavant avec l’attribut `purge` défini sur `false`. Si un secret est définitivement supprimé, vous ne pouvez pas le récupérer.

    #### Attributs d&apos;entrée

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nom de l&apos;attribut**
          </th>

          <th style={{ width: "200px" }}>
            **Type de données**
          </th>

          <th>
            **Description**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `key` (Requis)
          </td>

          <td>
            Chaîne
          </td>

          <td>
            La clé du secret que vous souhaitez récupérer.
          </td>
        </tr>

        <tr>
          <td>
            `namespace` (Facultatif)
          </td>

          <td>
            Chaîne
          </td>

          <td>
            L&apos;espace de noms du secret supprimé, s&apos;il est disponible.
          </td>
        </tr>

        <tr>
          <td>
            `scope` (Requis)
          </td>

          <td />

          <td>
            `type`: Enum `id`: chaîne
          </td>

          <td>
            * `type`: Sélectionnez `Account` ou `Organization` au niveau auquel le secret a été stocké.
            * `id`: Saisissez l&apos;ID correspondant du compte ou de l&apos;organisation.
          </td>
        </tr>
      </tbody>
    </table>

    #### Exemple de requête :

    ```graphql
    mutation {
      secretsManagementRecoverSecret(key: "Test1", scope: { id: 1, type: ACCOUNT })
    }
    ```

    ### Réponse

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nom de l&apos;attribut**
          </th>

          <th>
            **Description**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `key`
          </td>

          <td>
            La clé du secret récupéré.
          </td>
        </tr>

        <tr>
          <td>
            `latestVersion`
          </td>

          <td>
            La dernière version du secret récupéré.
          </td>
        </tr>

        <tr>
          <td>
            `namespace`
          </td>

          <td>
            L’espace de noms du secret récupéré, le cas échéant.
          </td>
        </tr>

        <tr>
          <td>
            `scope`
          </td>

          <td>
            L&apos;ID du compte ou de l&apos;organisation associé au secret récupéré.
          </td>
        </tr>
      </tbody>
    </table>

    #### Exemple de réponse :

    ```json
    {
      "data": {
        "secretsManagementRecoverSecret": {
          "key": "Test1",
          "latestVersion": 1,
          "namespace": null,
          "scope": {
            "id": "1",
            "type": "ACCOUNT"
          }
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="delete-secrets-version" title="Supprimer une version spécifique d'un secret">
    Utilisez la mutation `secretsManagementDeleteSecretVersion` pour supprimer une version spécifique d&apos;un secret. Seuls les administrateurs de tous les produits ou un utilisateur ayant un rôle personnalisé avec l&apos;autorisation `purge` peuvent choisir de le supprimer définitivement. Les autres utilisateurs ne peuvent pas supprimer définitivement la version du secret. Si vous n&apos;avez pas supprimé définitivement la version du secret, vous pouvez [la récupérer](#recover-secrets-versions) en utilisant la mutation `secretsManagementDeleteSecretVersion`.

    #### Attributs d&apos;entrée

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nom de l&apos;attribut**
          </th>

          <th style={{ width: "200px" }}>
            **Type de données**
          </th>

          <th>
            **Description**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `key` (Requis)
          </td>

          <td>
            Chaîne
          </td>

          <td>
            La clé du secret pour lequel vous souhaitez supprimer l’une des versions.
          </td>
        </tr>

        <tr>
          <td>
            `namespace` (Facultatif)
          </td>

          <td>
            Chaîne
          </td>

          <td>
            Espace de noms du secret, si disponible.
          </td>
        </tr>

        <tr>
          <td>
            `purge` (Requis)
          </td>

          <td>
            Booléen
          </td>

          <td>
            Pour supprimer définitivement la version du secret, définissez la valeur sur `true`. Pour une suppression réversible, définissez la valeur sur `false`.
          </td>
        </tr>

        <tr>
          <td>
            `scope` (Requis)
          </td>

          <td />

          <td>
            `type`: Enum `id`: chaîne
          </td>

          <td>
            * `type`: Sélectionnez le niveau auquel votre secret est stocké.
            * `id`: Saisissez l&apos;ID correspondant du compte ou de l&apos;organisation.
          </td>
        </tr>

        <tr>
          <td>
            `version` (Facultatif)
          </td>

          <td>
            Chaîne
          </td>

          <td>
            La version spécifique du secret que vous souhaitez supprimer. Si vous ne fournissez pas de version, la dernière version sera supprimée et la version précédente deviendra la dernière version.
          </td>
        </tr>
      </tbody>
    </table>

    #### Exemple de requête :

    ```graphql
    mutation {
      secretsManagementDeleteSecretVersion(
        key: "Test2"
        purge: false
        scope: { id: 1, type: ACCOUNT }
        version: 0
      )
    }
    ```

    ### Réponse

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nom de l&apos;attribut**
          </th>

          <th>
            **Description**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `key`
          </td>

          <td>
            La clé du secret.
          </td>
        </tr>

        <tr>
          <td>
            `latestVersion`
          </td>

          <td>
            La dernière version du secret disponible après la suppression de la version spécifiée.
          </td>
        </tr>

        <tr>
          <td>
            `namespace`
          </td>

          <td>
            L&apos;espace de noms du secret, s&apos;il est disponible.
          </td>
        </tr>

        <tr>
          <td>
            `scope`
          </td>

          <td>
            L&apos;ID de compte ou d&apos;organisation associé au secret.
          </td>
        </tr>
      </tbody>
    </table>

    #### Exemple de réponse :

    ```json
    {
      "data": {
        "secretsManagementDeleteSecretVersion": {
          "key": "Test2",
          "latestVersion": 1,
          "scope": {
            "id": "1"
          }
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="recover-secrets-versions" title="Récupérer une version de secret">
    Utilisez la mutation `secretsManagementRecoverSecretVersion` pour récupérer une version spécifique du secret que vous avez supprimée temporairement à l’aide de la mutation `secretsManagementDeleteSecretVersion`. Si une version est supprimée définitivement, vous ne pouvez pas la récupérer.

    #### Attributs d&apos;entrée

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nom de l&apos;attribut**
          </th>

          <th style={{ width: "200px" }}>
            **Type de données**
          </th>

          <th>
            **Description**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `key` (Requis)
          </td>

          <td>
            Chaîne
          </td>

          <td>
            La clé du secret pour lequel vous souhaitez récupérer l’une des versions.
          </td>
        </tr>

        <tr>
          <td>
            `namespace` (Facultatif)
          </td>

          <td>
            Chaîne
          </td>

          <td>
            L&apos;espace de noms du secret, s&apos;il est disponible.
          </td>
        </tr>

        <tr>
          <td>
            `scope` (Requis)
          </td>

          <td />

          <td>
            `type`: Enum `id`: chaîne
          </td>

          <td>
            * `type`: Sélectionnez `Account` ou `Organization` dans lequel le secret appartient.
            * `id`: Saisissez l&apos;ID correspondant du compte ou de l&apos;organisation.
          </td>
        </tr>

        <tr>
          <td>
            `version` (Facultatif)
          </td>

          <td>
            Chaîne
          </td>

          <td>
            Saisissez le numéro de version du secret que vous souhaitez récupérer. Si vous ne fournissez pas de version, il récupère la version la plus élevée du secret qui a été supprimée temporairement.
          </td>
        </tr>
      </tbody>
    </table>

    #### Exemple de requête :

    ```graphql
    mutation {
      secretsManagementRecoverSecretVersion(
        key: "Test2"
        scope: { id: 1, type: ACCOUNT }
        version: 0
      )
    }
    ```

    ### Réponse

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nom de l&apos;attribut**
          </th>

          <th>
            **Description**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `key`
          </td>

          <td>
            La clé du secret.
          </td>
        </tr>

        <tr>
          <td>
            `latestVersion`
          </td>

          <td>
            La dernière version du secret après la récupération.
          </td>
        </tr>

        <tr>
          <td>
            `namespace`
          </td>

          <td>
            L&apos;espace de noms du secret, s&apos;il est disponible.
          </td>
        </tr>

        <tr>
          <td>
            `scope`
          </td>

          <td>
            L&apos;ID de compte ou d&apos;organisation associé au secret.
          </td>
        </tr>
      </tbody>
    </table>

    #### Exemple de réponse :

    ```json
    {
      "data": {
        "secretsManagementRecoverSecretVersion": {
          "key": "Test2",
          "latestVersion": 1,
          "namespace": null,
          "scope": {
            "id": "1",
            "type": "ACCOUNT"
          }
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="secret-list" title="Récupérer la liste des secrets">
    Utilisez la requête `{customerAdministration {secrets}}` pour récupérer une liste des secrets disponibles dans le compte ou l’organisation. Vous pouvez récupérer les secrets qui sont uniquement définis pour votre compte ou votre organisation actuel.

    <Callout variant="tip">
      La liste comprend tous les secrets de la portée, y compris les secrets partageables auxquels vous n&apos;êtes peut-être pas autorisé à accéder. Les autorisations d&apos;accès sont appliquées lorsque vous récupérez la valeur du secret à l&apos;aide de l&apos;opération [Récupérer un secret](#retrieve-secret).
    </Callout>

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nom de l&apos;attribut**
          </th>

          <th style={{ width: "200px" }}>
            **Type de données**
          </th>

          <th>
            **Description**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `cursor` (Facultatif)
          </td>

          <td>
            Chaîne
          </td>

          <td>
            Utilisez `cursor` pour naviguer dans les listes de secrets. Pour obtenir la première page de la liste des secrets, ce paramètre n&apos;est pas requis. Si vous souhaitez accéder à la page suivante, utilisez la valeur `NextCursor` de la réponse précédente.
          </td>
        </tr>

        <tr>
          <td>
            `filter` (Requis)
          </td>

          <td>
            * `deleted` (Facultatif) : Booléen

            * `namespace` (Facultatif) : Chaîne de caractères

            * `scope` (Requis)

              * `type`: Enum
              * `id`: chaîne
          </td>

          <td>
            Ajoutez le filtre suivant pour appliquer les critères de recherche :

            * `deleted`: Pour obtenir tous les secrets, y compris ceux qui ont été supprimés temporairement, définissez-le sur `true`. Pour obtenir uniquement les secrets non supprimés, définissez-le sur `false`.
            * `namespace`: Pour filtrer les secrets par espace de noms, indiquez le nom de l&apos;espace de noms.
            * `scope`: Pour filtrer les secrets par portée, indiquez le niveau (`Account` ou `Organization`) et l&apos;ID correspondant.
          </td>
        </tr>

        <tr>
          <td>
            `sort` (Facultatif)
          </td>

          <td>
            * `direction` (Obligatoire) : Booléen
            * `key` (Obligatoire) : Booléen
          </td>

          <td>
            Pour trier la liste des secrets, indiquez les attributs suivants :

            * `direction`: Sélectionnez `ASC` pour l&apos;ordre croissant ou `DESC` pour l&apos;ordre décroissant.
            * `key`: L’option disponible est `CREATED_AT`. Cela trie les secrets en fonction de leur heure de création.
          </td>
        </tr>
      </tbody>
    </table>

    #### Exemple de requête :

    ```graphql
    {
      customerAdministration {
        secrets(
          filter: {
            deleted: { eq: false }
            scope: { eq: { id: 1, type: ACCOUNT } }
          }
          cursor: ""
          sort: { direction: DESC, key: CREATED_AT }
        )
      }
    }
    ```

    ### Réponse

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nom de l&apos;attribut**
          </th>

          <th>
            **Description**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `nextCursor`
          </td>

          <td>
            La valeur du curseur pour accéder à la page suivante de la liste des secrets. S’il n’y a plus de pages, cette valeur sera `null`.
          </td>
        </tr>

        <tr>
          <td>
            `scope`
          </td>

          <td>
            L&apos;ID de compte ou d&apos;organisation associé au secret.
          </td>
        </tr>

        <tr>
          <td>
            `secrets`
          </td>

          <td>
            Les détails des secrets répertoriés, notamment :

            * `description`: La description du secret, si disponible.

            * `isDeleted`: Indique si le secret est dans un état de suppression temporaire ou non.

            * `isSharable`: Indique si le secret est un [secret partageable](#sharable-secrets) avec un contrôle d&apos;accès précis.

            * `key`: La clé du secret.

            * `latestVersion`: Le dernier numéro de version du secret.

            * `metadata`: Métadonnées associées au secret, le cas échéant.

              * `createdAt`: Horodatages indiquant quand le secret a été créé.
              * `updatedAt`: Horodatages indiquant la dernière mise à jour du secret.

            * `namespace`: L&apos;espace de noms du secret, s&apos;il est disponible.

            * `tags`: La paire clé-valeur associée au secret, le cas échéant.
          </td>
        </tr>

        <tr>
          <td>
            `totalCount`
          </td>

          <td>
            Le nombre total de secrets disponibles dans le compte ou l’organisation, quelle que soit la pagination.
          </td>
        </tr>
      </tbody>
    </table>

    #### Exemple de réponse :

    ```json
    {
      "data": {
        "customerAdministration": {
          "secrets": {
            "nextCursor": "AAAADJ_Fqig86wFIH6c3ehxxpoFy0vdW2eA4pTkQFYDztd_UIeL91kCElQaCG0iORpmDdDT6KeZAVkByh4ogENST8yjxeZ5tI6vPYnyMW5rhtGwXlgt9zQRGYj1HcdpUHdfUcTC-CSsdQDLexy52XA==",
            "scope": {
              "id": "1",
              "type": "ACCOUNT"
            },
            "secrets": [
              {
                "description": "ZXY",
                "isDeleted": false,
                "isSharable": false,
                "key": "test2",
                "latestVersion": 1,
                "metadata": {
                  "createdAt": "2025-05-26T07:45:19.395796Z",
                  "updatedAt": "2025-05-26T08:08:49.130724Z"
                },
                "namespace": null,
                "tags": null
              },
              {
                "description": "XYZ",
                "isDeleted": false,
                "isSharable": false,
                "key": "test2",
                "latestVersion": 0,
                "metadata": {
                  "createdAt": "2025-05-26T07:26:32.114987Z",
                  "updatedAt": "2025-05-26T07:26:32.114987Z"
                },
                "namespace": null,
                "tags": null
              },
              {
                "description": "CBA",
                "isDeleted": false,
                "isSharable": false,
                "key": "test1",
                "latestVersion": 1,
                "metadata": {
                  "createdAt": "2025-05-26T07:15:08.987252Z",
                  "updatedAt": "2025-05-26T08:05:17.051658Z"
                },
                "namespace": null,
                "tags": null
              }
            ],
            "totalCount": 3
          }
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="grant-access-sharable-secret" title="Accorder l'accès à un secret partageable">
    Après avoir créé un secret partageable, vous pouvez accorder des autorisations spécifiques aux utilisateurs, aux groupes, aux identités système ou aux groupes d’identités système. Utilisez la mutation `authorizationManagementGrantAccess` pour partager votre secret avec les entités autorisées.

    <Callout variant="important">
      Le propriétaire du secret (créateur), les administrateurs d&apos;organisation ou les utilisateurs disposant de la capacité `secret.create.grants` peuvent accorder l&apos;accès à un secret partageable.
    </Callout>

    #### Attributs d&apos;entrée

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nom de l&apos;attribut**
          </th>

          <th style={{ width: "200px" }}>
            **Type de données**
          </th>

          <th>
            **Description**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `grantAccessOptions` (Requis)
          </td>

          <td>
            Objet
          </td>

          <td>
            Contient la configuration des attributions avec deux composants principaux :

            * `entityAccessGrants`: Définit le secret et le rôle à attribuer
            * `grantee`: Spécifie qui reçoit l’accès
          </td>
        </tr>

        <tr>
          <td>
            `entityAccessGrants.entity.id` (Requis)
          </td>

          <td>
            Chaîne
          </td>

          <td>
            L’ID unique du secret. : Le format est `namespace::partition::entry_key_secret`.

            Par exemple, si vous avez créé un secret avec la clé `prod-api-key` dans le compte `12345` avec l’espace de noms `production`, l’ID d’entité est : `production::account-12345::prod-api-key`. Si aucun espace de noms n’a été fourni, utilisez une chaîne vide : `::account-12345::prod-api-key`.
          </td>
        </tr>

        <tr>
          <td>
            `entityAccessGrants.entity.type` (Requis)
          </td>

          <td>
            Chaîne
          </td>

          <td>
            Le type d’entité. Pour les secrets, il s’agit toujours de `secret`.
          </td>
        </tr>

        <tr>
          <td>
            `entityAccessGrants.roleId` (Requis)
          </td>

          <td>
            Chaîne
          </td>

          <td>
            L&apos;ID unique du rôle à accorder. Pour trouver les ID de rôle disponibles, utilisez l&apos;explorateur d&apos;API NerdGraph pour interroger les rôles avec la portée `secret`. Les rôles courants incluent Propriétaire du secret (contrôle total) et Lecteur de secret (accès en lecture seule).
          </td>
        </tr>

        <tr>
          <td>
            `grantee.id` (Requis)
          </td>

          <td>
            Chaîne
          </td>

          <td>
            L’ID unique de l’utilisateur, du groupe, de l’identité système ou du groupe d’identités système recevant l’accès.
          </td>
        </tr>

        <tr>
          <td>
            `grantee.type` (Requis)
          </td>

          <td>
            Énumération
          </td>

          <td>
            Le type de bénéficiaire. Valeurs valides :

            * `USER`: Utilisateur individuel
            * `GROUP`: Groupe d’utilisateurs
            * `SYSTEM_IDENTITY`: Identité système (pour les processus automatisés)
            * `SYSTEM_IDENTITY_GROUP`: Groupe d&apos;identités système
          </td>
        </tr>
      </tbody>
    </table>

    #### Exemple de requête :

    ```graphql
    mutation {
      authorizationManagementGrantAccess(
        grantAccessOptions: {
          entityAccessGrants: {
            entity: {
              id: "production::account-1::prod-api-key",
              type: "secret"
            },
            roleId: "role-id-for-secret-reader"
          },
          grantee: {
            id: "system-identity-id-abc123",
            type: SYSTEM_IDENTITY
          }
        }
      ) {
        roles {
          id
          roleId
        }
      }
    }
    ```

    ### Réponse

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nom de l&apos;attribut**
          </th>

          <th>
            **Description**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `roles`
          </td>

          <td>
            Un tableau d&apos;affectations de rôles créé par l&apos;opération d&apos;octroi, comprenant :

            * `id`: L&apos;identifiant unique de l&apos;octroi
            * `roleId`: L&apos;ID du rôle qui a été accordé
          </td>
        </tr>
      </tbody>
    </table>

    #### Exemple de réponse :

    ```json
    {
      "data": {
        "authorizationManagementGrantAccess": {
          "roles": [
            {
              "id": "grant-id-xyz789",
              "roleId": "role-id-for-secret-reader"
            }
          ]
        }
      }
    }
    ```

    <Callout variant="tip">
      Pour révoquer l’accès à un secret partageable, utilisez la mutation `authorizationManagementRevokeAccess`.
    </Callout>
  </Collapser>

  <Collapser id="revoke-access-sharable-secret" title="Révoquer l'accès à un secret partageable">
    Utilisez la mutation `authorizationManagementRevokeAccess` pour supprimer l&apos;accès des utilisateurs, des groupes, des identités système ou des groupes d&apos;identités système auxquels l&apos;accès à votre secret partageable a été précédemment accordé.

    <Callout variant="important">
      Le propriétaire du secret (créateur), les administrateurs de l’organisation ou les utilisateurs disposant de l’autorisation de révocation appropriée peuvent supprimer l’accès à un secret partageable.
    </Callout>

    #### Attributs d&apos;entrée

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nom de l&apos;attribut**
          </th>

          <th style={{ width: "200px" }}>
            **Type de données**
          </th>

          <th>
            **Description**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `grantAccessOptions` (Requis)
          </td>

          <td>
            Objet
          </td>

          <td>
            Contient la configuration de révocation avec la même structure que l&apos;opération d&apos;octroi.
          </td>
        </tr>

        <tr>
          <td>
            `entityAccessGrants.entity.id` (Requis)
          </td>

          <td>
            Chaîne
          </td>

          <td>
            L&apos;ID unique du secret au format `namespace::partition::entry_key_secret`.
          </td>
        </tr>

        <tr>
          <td>
            `entityAccessGrants.entity.type` (Requis)
          </td>

          <td>
            Chaîne
          </td>

          <td>
            Le type d’entité. Pour les secrets, il s’agit toujours de `secret`.
          </td>
        </tr>

        <tr>
          <td>
            `entityAccessGrants.roleId` (Requis)
          </td>

          <td>
            Chaîne
          </td>

          <td>
            L’ID unique du rôle à révoquer.
          </td>
        </tr>

        <tr>
          <td>
            `grantee.id` (Requis)
          </td>

          <td>
            Chaîne
          </td>

          <td>
            L&apos;ID unique de l&apos;utilisateur, du groupe, de l&apos;identité système ou du groupe d&apos;identités système auquel révoquer l&apos;accès.
          </td>
        </tr>

        <tr>
          <td>
            `grantee.type` (Requis)
          </td>

          <td>
            Énumération
          </td>

          <td>
            Le type de bénéficiaire. Valeurs valides : `USER`, `GROUP`, `SYSTEM_IDENTITY`, `SYSTEM_IDENTITY_GROUP`.
          </td>
        </tr>
      </tbody>
    </table>

    #### Exemple de requête :

    ```graphql
    mutation {
      authorizationManagementRevokeAccess(
        grantAccessOptions: {
          entityAccessGrants: {
            entity: {
              id: "production::account-12345::prod-api-key",
              type: "secret"
            }
            roleId: "role-id-for-secret-reader"
          }
          grantee: {
            id: "system-identity-id-abc123",
            type: SYSTEM_IDENTITY
          }
        }
      ) {
        roles {
          id
          roleId
        }
      }
    }
    ```

    ### Réponse

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nom de l&apos;attribut**
          </th>

          <th>
            **Description**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `roles`
          </td>

          <td>
            Un tableau d’informations sur les rôles liés à l’octroi révoqué.
          </td>
        </tr>
      </tbody>
    </table>

    #### Exemple de réponse :

    ```json
    {
      "data": {
        "authorizationManagementRevokeAccess": {
          "roles": [
            {
              "id": "grant-id-xyz789",
              "roleId": "role-id-for-secret-reader"
            }
          ]
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="list-access-sharable-secret" title="Répertorier les personnes ayant accès à un secret partageable">
    Utilisez la requête `customerAdministration/entityGrants` pour voir quels utilisateurs, groupes, identités système ou groupes d’identités système ont obtenu l’accès à votre secret partageable.

    <Callout variant="tip">
      Cette requête renvoie uniquement les autorisations explicites accordées directement sur le secret. Elle n&apos;affiche pas l&apos;accès implicite ni les autorisations héritées des étendues parentes.
    </Callout>

    #### Attributs d&apos;entrée

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nom de l&apos;attribut**
          </th>

          <th style={{ width: "200px" }}>
            **Type de données**
          </th>

          <th>
            **Description**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `iamParent.id` (Requis)
          </td>

          <td>
            Chaîne
          </td>

          <td>
            L’ID du compte ou de l’organisation où le secret est stocké.
          </td>
        </tr>

        <tr>
          <td>
            `iamParent.scope` (Requis)
          </td>

          <td>
            Énumération
          </td>

          <td>
            Le type de portée parent. Valeurs valides : `ACCOUNT`, `ORGANIZATION`.
          </td>
        </tr>

        <tr>
          <td>
            `entity.id` (Facultatif)
          </td>

          <td>
            Chaîne
          </td>

          <td>
            L’ID unique du secret au format `namespace::partition::entry_key_secret`. Lorsqu’il est fourni, seules les autorisations pour ce secret spécifique sont renvoyées.
          </td>
        </tr>

        <tr>
          <td>
            `entity.type` (Requis)
          </td>

          <td>
            Chaîne
          </td>

          <td>
            Le type d’entité. Pour les secrets, il s’agit toujours de `secret`.
          </td>
        </tr>

        <tr>
          <td>
            `member.id` (Facultatif)
          </td>

          <td>
            Chaîne
          </td>

          <td>
            Filtrer les attributions par l’ID d’un utilisateur, d’un groupe, d’une identité système ou d’un groupe d’identités système spécifique.
          </td>
        </tr>

        <tr>
          <td>
            `member.type` (Facultatif)
          </td>

          <td>
            Énumération
          </td>

          <td>
            Le type de membre à filtrer. Valeurs valides : `USER`, `GROUP`, `SYSTEM_IDENTITY`, `SYSTEM_IDENTITY_GROUP`.
          </td>
        </tr>
      </tbody>
    </table>

    #### Exemple de requête :

    ```graphql
    {
      customerAdministration {
        entityGrants(
          filter: {
            iamParent: {
              id: { eq: "12345" }
              scope: { eq: ACCOUNT }
            }
            entity: {
              id: { eq: "production::account-12345::prod-api-key" }
              type: { eq: "secret" }
            }
          }
          cursor: ""
        ) {
          items {
            targetEntity {
              id
            }
            member {
              memberId
              memberType
            }
            id
            role {
              name
              id
            }
          }
          nextCursor
        }
      }
    }
    ```

    ### Réponse

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            **Nom de l&apos;attribut**
          </th>

          <th>
            **Description**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `items`
          </td>

          <td>
            Un tableau d&apos;objets de subvention, chacun contenant :

            * `targetEntity.id`: L&apos;ID d&apos;entité du secret
            * `member.memberId`: L’ID de l’utilisateur, du groupe, de l’identité système ou du groupe d’identités système
            * `member.memberType`: Le type de membre (USER, GROUP, SYSTEM\_IDENTITY ou SYSTEM\_IDENTITY\_GROUP)
            * `id`: L’identifiant unique de l’autorisation (utilisez-le pour révoquer l’accès)
            * `role.name`: Le nom du rôle attribué
            * `role.id`: L’identifiant unique du rôle
          </td>
        </tr>

        <tr>
          <td>
            `nextCursor`
          </td>

          <td>
            La valeur du curseur pour la pagination. Utilisez cette valeur dans la requête suivante pour récupérer des résultats supplémentaires.
          </td>
        </tr>
      </tbody>
    </table>

    #### Exemple de réponse :

    ```json
    {
      "data": {
        "customerAdministration": {
          "entityGrants": {
            "items": [
              {
                "targetEntity": {
                  "id": "production::account-12345::prod-api-key"
                },
                "member": {
                  "memberId": "system-identity-id-abc123",
                  "memberType": "SYSTEM_IDENTITY"
                },
                "id": "grant-id-xyz789",
                "role": {
                  "name": "Secret Reader",
                  "id": "role-id-for-secret-reader"
                }
              }
            ],
            "nextCursor": null
          }
        }
      }
    }
    ```
  </Collapser>
</CollapserGroup>

## Sujets connexes [#related-topics]

<DocTiles>
  <DocTile title="Introduction à NerdGraph" path="/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph">
    Commencer avec l&apos;API GraphQL de New Relic
  </DocTile>

  <DocTile title="Explorateur d'API NerdGraph" path="/docs/apis/nerdgraph/get-started/nerdgraph-explorer">
    Utilisez l&apos;explorateur de l&apos;API NerdGraph pour tester les requêtes et les mutations
  </DocTile>

  <DocTile title="Gérer les groupes d'utilisateurs" path="/docs/apis/nerdgraph/examples/nerdgraph-manage-groups">
    Créer et gérer des groupes d&apos;utilisateurs avec des rôles personnalisés
  </DocTile>

  <DocTile title="Gestion des secrets pour l’infrastructure" path="/docs/infrastructure/host-integrations/installation/secrets-management">
    Utiliser les secrets dans la configuration de l&apos;agent d&apos;infrastructure
  </DocTile>
</DocTiles>