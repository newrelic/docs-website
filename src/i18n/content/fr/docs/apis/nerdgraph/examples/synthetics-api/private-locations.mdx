---
title: Gérer le site privé
tags:
  - Synthetics
  - APIs
  - NerdGraph
  - Examples
metaDescription: How to use New Relic NerdGraph API to create and manage private locations for synthetic monitoring.
freshnessValidatedDate: never
translationType: machine
---

[Les sites privés](/docs/synthetics/synthetic-monitoring/private-locations/private-locations-overview-monitor-internal-sites-add-new-locations) vous permettent de monitorer les applications derrière votre pare-feu ou dans des réseaux restreints. Lorsque vous créez un site privé, vous installez et configurez le sous-site privé pour exécuter le moniteur affecté à ce site privé. Ce tutoriel fournit des exemples d&apos;utilisation de l&apos;API NerdGraph pour gérer par programmation un site privé.

## Créer un site privé [#create-private-location]

Vous pouvez créer un site privé en utilisant la mutation `syntheticsCreatePrivateLocation`. Cette mutation vous permet de configurer un nouveau site privé dans votre infrastructure monitoring où vous pouvez déployer des sous-secteurs privés ou des gestionnaires de tâches.

### Paramètres d&apos;entrée

<table>
  <thead>
    <tr>
      <th>
        paramètres
      </th>

      <th>
        Type de données
      </th>

      <th>
        Est-ce obligatoire ?
      </th>

      <th>
        Description
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `accountId`
      </td>

      <td>
        Entier
      </td>

      <td>
        Oui
      </td>

      <td>
        L&apos; 

        [identifiant du compte](/docs/accounts/accounts-billing/account-structure/account-id)

         associé au site est privé.
      </td>
    </tr>

    <tr>
      <td>
        `description`
      </td>

      <td>
        Chaîne
      </td>

      <td>
        Non
      </td>

      <td>
        Description du site privé.
      </td>
    </tr>

    <tr>
      <td>
        `name`
      </td>

      <td>
        Chaîne
      </td>

      <td>
        Oui
      </td>

      <td>
        Le nom du site est privé.
      </td>
    </tr>

    <tr>
      <td>
        `shared`
      </td>

      <td>
        Booléen
      </td>

      <td>
        Non
      </td>

      <td>
        Indique si le site privé est partagé au sein de l&apos;organisation.
      </td>
    </tr>

    <tr>
      <td>
        `verifiedScriptExecution`
      </td>

      <td>
        Booléen
      </td>

      <td>
        Oui
      </td>

      <td>
        Si la valeur est vraie, le site privé exige un mot de passe pour être modifié.
      </td>
    </tr>
  </tbody>
</table>

### Demande d&apos;échantillon

```graphql
mutation {
  syntheticsCreatePrivateLocation(
    accountId: ACCOUNT_ID,
    name: "PrivateLocationName",
    description: "Optional description",
    shared: true,
    verifiedScriptExecution: false
  ) {
    guid
    errors {
      description
      type
    }
  }
}
```

### Exemple de réponse

Une réponse positive renvoie le GUID du site privé nouvellement créé :

```json
{
  "data": {
    "syntheticsCreatePrivateLocation": {
      "guid": "PRIVATE_LOCATION_GUID",
      "errors": null
    }
  }
}
```

En cas de problème lors de la création du site privé, le éventail `errors` contiendra des objets avec des champs `description` et `type` expliquant ce qui s&apos;est mal passé.

## Mettre à jour un site privé [#update-private-location]

Vous pouvez mettre à jour un site privé existant en utilisant la mutation `syntheticsUpdatePrivateLocation`. Cela vous permet de modifier la configuration d&apos;un site privé déjà créé.

<Callout variant="important">
  Si un emplacement est partagé et utilisé par d&apos;autres comptes de votre organisation pour exécuter le moniteur Synthétique, vous ne pouvez pas annuler le partage de ce site privé tant que ces moniteurs ne sont pas désactivés.
</Callout>

### Paramètres d&apos;entrée

<table>
  <thead>
    <tr>
      <th>
        paramètres
      </th>

      <th>
        Type de données
      </th>

      <th>
        Est-ce obligatoire ?
      </th>

      <th>
        Description
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `guid`
      </td>

      <td>
        Chaîne
      </td>

      <td>
        Oui
      </td>

      <td>
        L&apos;identifiant unique 

        [GUID](/docs/apis/nerdgraph/examples/synthetics-api/query-synthetics-data#query-private-locations)

         de l&apos;entité du site privé que vous souhaitez mettre à jour.
      </td>
    </tr>

    <tr>
      <td>
        `description`
      </td>

      <td>
        Chaîne
      </td>

      <td>
        Non
      </td>

      <td>
        Description du site privé.
      </td>
    </tr>

    <tr>
      <td>
        `shared`
      </td>

      <td>
        Booléen
      </td>

      <td>
        Non
      </td>

      <td>
        Indique si le site privé est partagé au sein de l&apos;organisation.
      </td>
    </tr>

    <tr>
      <td>
        `verifiedScriptExecution`
      </td>

      <td>
        Booléen
      </td>

      <td>
        Oui
      </td>

      <td>
        Si la valeur est vraie, le site privé exige un mot de passe pour être modifié.
      </td>
    </tr>
  </tbody>
</table>

### Demande d&apos;échantillon

```graphql
mutation {
  syntheticsUpdatePrivateLocation(
    guid: "ENTITY_GUID",
    description: "EnterYourDescription",
    shared: false,
    verifiedScriptExecution: true
  ) {
    description
    verifiedScriptExecution
    errors {
      description
      type
    }
  }
}
```

### Exemple de réponse

Une réponse positive renvoie les champs mis à jour et `null` en cas d&apos;erreur :

```json
{
  "data": {
    "syntheticsUpdatePrivateLocation": {
      "description": "EnterYourDescription",
      "verifiedScriptExecution": true,
      "errors": null
    }
  }
}
```

En cas de problème lors de la mise à jour du site privé, le `errors` éventail contiendra des objets avec des champs `description` et `type` expliquant ce qui s&apos;est mal passé.

## Purger une file d&apos;attente de travaux d&apos;un site privé [#purge-private-location]

Vous pouvez vider la file d&apos;attente des tâches pour un site privé en utilisant la mutation `syntheticsPurgePrivateLocationQueue`. Ceci est utile lorsque vous devez supprimer un arriéré de tâches de monitoring Synthétique mises en file d&apos;attente qui peuvent s&apos;être accumulées en raison de problèmes de performance ou de problèmes de connectivité temporaires.

<Callout variant="tip">
  Utilisez cette opération avec précaution car elle supprimera définitivement toutes les tâches en file d&apos;attente. Les tâches en cours ne seront pas affectées.
</Callout>

### Paramètres d&apos;entrée

<table>
  <thead>
    <tr>
      <th>
        paramètres
      </th>

      <th>
        Type de données
      </th>

      <th>
        Est-ce obligatoire ?
      </th>

      <th>
        Description
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `guid`
      </td>

      <td>
        Chaîne
      </td>

      <td>
        Oui
      </td>

      <td>
        L&apos; 

        [identifiant unique (GUID)](/docs/apis/nerdgraph/examples/synthetics-api/query-synthetics-data#query-private-locations)

         du site privé dont vous souhaitez purger la file d&apos;attente des tâches.
      </td>
    </tr>
  </tbody>
</table>

### Demande d&apos;échantillon

```graphql
mutation {
  syntheticsPurgePrivateLocationQueue(
    guid: "PRIVATE_LOCATION_ENTITY_GUID"
  ) {
    errors {
      description
      type
    }
  }
}
```

### Exemple de réponse

Une réponse positive renvoie `null` en cas d&apos;erreur :

```json
{
  "data": {
    "syntheticsPurgePrivateLocationQueue": {
      "errors": null
    }
  }
}
```

En cas de problème lors de la purge de la file d&apos;attente, l&apos;éventail `errors` contiendra des objets avec des champs `description` et `type` expliquant ce qui s&apos;est mal passé.

## Supprimer un site privé [#delete-private-location]

Lorsqu&apos;un site privé n&apos;est plus nécessaire, vous pouvez le supprimer définitivement en utilisant la mutation `syntheticsDeletePrivateLocation`.

<Callout variant="important">
  Avant de supprimer un site privé, assurez-vous qu&apos;aucun monitor n&apos;y est affecté. La suppression d&apos;un site privé auquel un moniteur actif est assigné entraînera la défaillance de ce moniteur.
</Callout>

### Paramètres d&apos;entrée

<table>
  <thead>
    <tr>
      <th>
        paramètres
      </th>

      <th>
        Type de données
      </th>

      <th>
        Est-ce obligatoire ?
      </th>

      <th>
        Description
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `guid`
      </td>

      <td>
        Chaîne
      </td>

      <td>
        Oui
      </td>

      <td>
        L&apos;identifiant unique 

        [GUID](/docs/apis/nerdgraph/examples/synthetics-api/query-synthetics-data#query-private-locations)

         de l&apos;entité du site privé que vous souhaitez supprimer.
      </td>
    </tr>
  </tbody>
</table>

### Demande d&apos;échantillon

```graphql
mutation {
  syntheticsDeletePrivateLocation(
    guid: "ENTITY_GUID"
  ) {
    errors {
      description
      type
    }
  }
}
```

### Exemple de réponse

Une réponse positive renvoie `null` en cas d&apos;erreur :

```json
{
  "data": {
    "syntheticsDeletePrivateLocation": {
      "errors": null
    }
  }
}
```

En cas de problème lors de la suppression du site privé, le `errors` éventail contiendra des objets avec des champs `description` et `type` expliquant ce qui s&apos;est mal passé.