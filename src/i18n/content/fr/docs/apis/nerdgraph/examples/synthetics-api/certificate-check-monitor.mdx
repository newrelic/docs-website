---
title: Gérer le moniteur de vérification des certificats
tags:
  - Synthetics
  - APIs
  - NerdGraph
  - Examples
metaDescription: How to use New Relic NerdGraph API to create and update certificate check monitors for synthetic monitoring.
freshnessValidatedDate: never
translationType: machine
---

New Relic vous permet d&apos;utiliser NerdGraph pour créer [un moniteur de vérification de certificats](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors). Le système de monitoring des certificats suit les dates d&apos;expiration des certificats SSL et vous avertit lorsque ceux-ci sont sur le point d&apos;expirer. Ce tutoriel fournit des exemples d&apos;utilisation de l&apos;API NerdGraph pour automatiser la création d&apos;un moniteur de vérification de certificats.

## Créer un outil de monitoring de vérification de certificat [#create-certificate-check]

Vous pouvez créer un moniteur de vérification de certificat en utilisant la mutation `syntheticsCreateCertCheckMonitor`. Cette mutation vous permet de configurer monitoring de l&apos;expiration des certificats SSL sur n&apos;importe quel domaine.

### Paramètres d&apos;entrée

<table>
  <thead>
    <tr>
      <th>
        paramètres
      </th>

      <th>
        Type de données
      </th>

      <th>
        Est-ce obligatoire ?
      </th>

      <th>
        Description
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `accountId`
      </td>

      <td>
        Entier
      </td>

      <td>
        Oui
      </td>

      <td>
        Votre 

        [identifiant de compte](/docs/accounts/accounts-billing/account-structure/account-id)

         New Relic sur lequel le moniteur sera créé.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.domain`
      </td>

      <td>
        Chaîne
      </td>

      <td>
        Oui
      </td>

      <td>
        Le domaine à monitorer pour l&apos;expiration du certificat (par exemple, 

        `example.com`

        ).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.locations.public`
      </td>

      <td>
        Array
      </td>

      <td>
        Oui
      </td>

      <td>
        éventail d&apos;identifiants 

        [publics d&apos;emplacement](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors/#setting-location)

         où le moniteur effectuera des vérifications (par exemple, 

        `["US_EAST_1", "US_WEST_1"]`

        ).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.name`
      </td>

      <td>
        Chaîne
      </td>

      <td>
        Oui
      </td>

      <td>
        Nom d&apos;affichage de votre outil de monitoring des certificats.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.numberDaysToFailBeforeCertExpires`
      </td>

      <td>
        Entier
      </td>

      <td>
        Oui
      </td>

      <td>
        Nombre de jours avant l&apos;expiration du certificat pour déclencher une défaillance. Par exemple, si vous définissez cette valeur à 30, le moniteur échouera lorsque le certificat aura 30 jours ou moins avant son expiration.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.period`
      </td>

      <td>
        Énumération
      </td>

      <td>
        Oui
      </td>

      <td>
        Fréquence d&apos;exécution du moniteur. Options : 

        `EVERY_MINUTE`

        , 

        `EVERY_5_MINUTES`

        , 

        `EVERY_10_MINUTES`

        , 

        `EVERY_15_MINUTES`

        , 

        `EVERY_30_MINUTES`

        , 

        `EVERY_HOUR`

        , 

        `EVERY_6_HOURS`

        , 

        `EVERY_12_HOURS`

        , 

        `EVERY_DAY`

        .
      </td>
    </tr>

    <tr>
      <td>
        `monitor.status`
      </td>

      <td>
        Énumération
      </td>

      <td>
        Oui
      </td>

      <td>
        État du moniteur. Options : 

        `ENABLED`

         (le moniteur est actif et effectue des vérifications), 

        `DISABLED`

         (le moniteur est inactif).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.apdexTarget`
      </td>

      <td>
        Virgule flottante
      </td>

      <td>
        Non
      </td>

      <td>
        L&apos;Apdex cible du moniteur en secondes, utilisé pour alimenter les rapports SLA. Par défaut, 7,0 secondes.
      </td>
    </tr>
  </tbody>
</table>

### Demande d&apos;échantillon

```graphql
mutation {
  syntheticsCreateCertCheckMonitor(
    accountId: ACCOUNT_ID
    monitor: {
      domain: "DOMAIN"
      locations: { public: ["LOCATION_1", "LOCATION_2"] }
      name: "YOUR_MONITOR_NAME"
      numberDaysToFailBeforeCertExpires: DAYS_UNTIL_EXPIRATION
      period: PERIOD
      status: STATUS
      apdexTarget: APDEX_TARGET
    }
  ) {
    errors {
      description
      type
    }
  }
}
```

### Exemple de réponse

Une réponse positive renvoie `null` en cas d&apos;erreur :

```json
{
  "data": {
    "syntheticsCreateCertCheckMonitor": {
      "errors": null
    }
  }
}
```

En cas de problème lors de la création du moniteur, le éventail `errors` contiendra des objets avec des champs `description` et `type` expliquant ce qui s&apos;est mal passé.

## Mettre à jour un contrôleur de vérification de certificat [#update-certificate-check]

Vous pouvez mettre à jour un moniteur de vérification de certificat existant en utilisant la mutation `syntheticsUpdateCertCheckMonitor`. Cela vous permet de modifier la configuration d&apos;un moniteur de vérification de certificats déjà créé.

### Paramètres d&apos;entrée

<table>
  <thead>
    <tr>
      <th>
        paramètres
      </th>

      <th>
        Type de données
      </th>

      <th>
        Est-ce obligatoire ?
      </th>

      <th>
        Description
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `guid`
      </td>

      <td>
        Chaîne
      </td>

      <td>
        Oui
      </td>

      <td>
        L&apos;identifiant unique 

        [GUID](/docs/apis/nerdgraph/examples/synthetics-api/query-synthetics-data#query-monitors)

         de l&apos;entité du moniteur que vous souhaitez mettre à jour.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.domain`
      </td>

      <td>
        Chaîne
      </td>

      <td>
        Non
      </td>

      <td>
        Le domaine à monitorer pour l&apos;expiration du certificat (par exemple, 

        `example.com`

        ).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.locations.public`
      </td>

      <td>
        Array
      </td>

      <td>
        Non
      </td>

      <td>
        éventail d&apos;identifiants 

        [publics d&apos;emplacement](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors/#setting-location)

         où le moniteur effectuera des vérifications (par exemple, 

        `["US_EAST_1", "US_WEST_1"]`

        ).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.name`
      </td>

      <td>
        Chaîne
      </td>

      <td>
        Non
      </td>

      <td>
        Le nom d&apos;affichage mis à jour pour votre moniteur de vérification de certificat.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.numberDaysToFailBeforeCertExpires`
      </td>

      <td>
        Entier
      </td>

      <td>
        Non
      </td>

      <td>
        Nombre de jours avant l&apos;expiration du certificat pour déclencher une défaillance.
      </td>
    </tr>

    <tr>
      <td>
        `monitor.period`
      </td>

      <td>
        Énumération
      </td>

      <td>
        Non
      </td>

      <td>
        Fréquence d&apos;exécution du moniteur. Options : 

        `EVERY_MINUTE`

        , 

        `EVERY_5_MINUTES`

        , 

        `EVERY_10_MINUTES`

        , 

        `EVERY_15_MINUTES`

        , 

        `EVERY_30_MINUTES`

        , 

        `EVERY_HOUR`

        , 

        `EVERY_6_HOURS`

        , 

        `EVERY_12_HOURS`

        , 

        `EVERY_DAY`

        .
      </td>
    </tr>

    <tr>
      <td>
        `monitor.status`
      </td>

      <td>
        Énumération
      </td>

      <td>
        Non
      </td>

      <td>
        État du moniteur. Options : 

        `ENABLED`

         (le moniteur est actif et effectue des vérifications), 

        `DISABLED`

         (le moniteur est inactif).
      </td>
    </tr>

    <tr>
      <td>
        `monitor.apdexTarget`
      </td>

      <td>
        Virgule flottante
      </td>

      <td>
        Non
      </td>

      <td>
        L&apos;Apdex cible du moniteur en secondes, utilisé pour alimenter les rapports SLA. Par défaut, 7,0 secondes.
      </td>
    </tr>
  </tbody>
</table>

### Demande d&apos;échantillon

```graphql
mutation {
  syntheticsUpdateCertCheckMonitor(
    guid: ENTITY_GUID
    monitor: {
      domain: "DOMAIN"
      locations: { public: ["LOCATION_1", "LOCATION_2"] }
      name: "YOUR_MONITOR_NAME"
      numberDaysToFailBeforeCertExpires: DAYS_UNTIL_EXPIRATION
      period: PERIOD
      status: STATUS
      apdexTarget: APDEX_TARGET
    }
  ) {
    errors {
      description
      type
    }
  }
}
```

### Exemple de réponse

Une réponse positive renvoie `null` en cas d&apos;erreur :

```json
{
  "data": {
    "syntheticsUpdateCertCheckMonitor": {
      "errors": null
    }
  }
}
```

En cas de problème lors de la mise à jour du moniteur, le éventail `errors` contiendra des objets avec des champs `description` et `type` expliquant ce qui s&apos;est mal passé.

## Supprimer un moniteur de vérification de certificat [#delete-monitor]

Lorsqu&apos;un moniteur de vérification de certificat n&apos;est plus nécessaire, vous pouvez le supprimer définitivement à l&apos;aide de la mutation `syntheticsDeleteMonitor`.

Pour supprimer un moniteur, référez-vous à la section [Supprimer un moniteur Synthétique](/docs/apis/nerdgraph/examples/synthetics-api/ping-monitor/#delete-monitor).