---
title: "Tutoriel NerdGraph\_: Gérer votre moniteur Synthétique"
tags:
  - NerdGraph
  - Synthetic
metaDescription: 'Use NerdGraph to programatically manage your synthetic monitors, private locations, and secure credentials.'
freshnessValidatedDate: never
translationType: machine
---

Notre [APINerdGraph](/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph/) vous permet d&apos;automatiser la création, la mise à jour ou la suppression de votre [moniteur Synthétique](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors/), [site privé](/docs/synthetics/synthetic-monitoring/private-locations/private-locations-overview-monitor-internal-sites-add-new-locations/), [identifiants sécurisés](/docs/synthetics/synthetic-monitoring/using-monitors/store-secure-credentials-scripted-browsers-api-tests/) et [temps d&apos;arrêt du moniteur](/docs/synthetics/synthetic-monitoring/using-monitors/monitor-downtimes-disable-monitoring-during-scheduled-maintenance-times/).

## Exigences [#requirements]

Les exigences comprennent :

* [Exigences générales de NerdGraph](/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph/#authentication)
* Autorisations d&apos;utilisateur pertinentes : les mêmes [autorisations monitoring Synthétique](/docs/synthetics/synthetic-monitoring/administration/user-roles-synthetic-monitoring) qui s&apos;appliquent à l&apos;utilisation de l&apos;UI Synthetics s&apos;appliquent à l&apos;utilisation de NerdGraph

## Comprendre les champs dans l&apos;explorateur NerdGraph [#fields]

Vous pouvez afficher les définitions de champs dans [l&apos;explorateur NerdGraph](/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph/#explorer), mais cela peut aider à mieux comprendre les champs `LOCATION`, `PERIOD`, `TAGS` et autres.

<CollapserGroup>
  <Collapser id="browsers-attribute" title="Définir les champs du navigateur">
    Configurez un navigateur simple, un navigateur scripté et un moniteur d&apos;étapes pour utiliser un ou plusieurs types de navigateur. N&apos;incluez pas cet attribut lorsque vous utilisez Chrome l&apos;environnement legacy d&apos;exécution 72. Exemples :

    * `[CHROME]` pour utiliser uniquement Chrome
    * `[FIREFOX]` utiliser uniquement Firefox
    * `[CHROME, FIREFOX]` utiliser Chrome et Firefox
  </Collapser>

  <Collapser id="devices-attribute" title="Définir les champs des appareils">
    Configurez un navigateur simple, un navigateur scripté et un moniteur d&apos;étapes pour utiliser un ou plusieurs types d&apos;appareils émulés. N&apos;incluez pas cet attribut lorsque vous utilisez Chrome l&apos;environnement legacy d&apos;exécution 72. Exemples :

    * `[DESKTOP]`

    * `[MOBILE_LANDSCAPE]`

    * `[MOBILE_PORTRAIT]`

    * `[TABLET_LANDSCAPE]`

    * `[TABLET_PORTRAIT]`

      Plusieurs configurations de périphériques émulés peuvent être utilisées par un seul moniteur :

    * `[DESKTOP, MOBILE_PORTRAIT, TABLET_LANDSCAPE]`
  </Collapser>

  <Collapser id="location-field" title="Définir les champs de localisation">
    Pour identifier un [site privé](/docs/synthetics/synthetic-monitoring/private-locations/private-locations-overview-monitor-internal-sites-add-new-locations) dans votre script, utilisez le GUID de l&apos;entité du site privé. Si le site privé est configuré pour utiliser [l&apos;exécution script vérifiée](/docs/synthetics/synthetic-monitoring/private-locations/verified-script-execution-private-locations/), incluez également l&apos;attribut `vsePassword`. Par exemple:

    ```graphql
    locations: {
      private: {
        guid: LOCATION_ENTITY_GUID, 
        vsePassword: YOUR_VSE_PASSWORD
      }
    }
    ```

    [emplacement public](/docs/synthetics/synthetic-monitoring/administration/synthetic-public-minion-ips/#location) utilisez l&apos;identifiant d&apos;emplacement sans le préfixe AWS , par exemple :

    ```graphql
    locations: {
      public: ["US_EAST_2", "US_WEST_1"]
    }
    ```
  </Collapser>

  <Collapser id="period-attribute" title="Définir les champs de période">
    L&apos;attribut `PERIOD` définit un intervalle de temps pendant lequel votre moniteur doit s&apos;exécuter. Pour définir l&apos;intervalle, utilisez ces formes :

    * `EVERY_MINUTE` pour chaque minute.
    * `EVERY_N_MINUTES`, où « N » représente les minutes. Les valeurs prises en charge incluent `EVERY_5_MINUTES`, `EVERY_10_MINUTES`, `EVERY_15_MINUTES` et `EVERY_30_MINUTES`.
    * `EVERY_HOUR` pour chaque heure.
    * `EVERY_N_HOURS`, où « N » représente les heures. Les valeurs prises en charge incluent `EVERY_6_HOURS` et `EVERY_12_HOURS`.
    * `EVERY_DAY` une fois par jour.
  </Collapser>

  <Collapser id="tags-attribute" title="Définir les champs de balises">
    Les balises sont facultatives. Vous pouvez ajouter une balise lors de la création du moniteur ou ultérieurement à l&apos;aide d&apos;appels de balise dans NerdGraph ou l&apos;UI. Plusieurs balises peuvent être ajoutées dans un seul appel de mutation à l&apos;aide d&apos;un éventail contenant des clés et des valeurs.
  </Collapser>

  <Collapser id="optional-fields" title="Définir les champs facultatifs">
    Certains champs sont destinés à une configuration plus avancée. Ceux-ci sont facultatifs.

    Pour [le moniteur de ping](#create-ping), ceux-ci incluent :

    * `HEADER_NAME`: Vos noms d’en-tête personnalisés qui apparaissent sur la demande.

    * `HEADER_VALUE`: La valeur d&apos;en-tête personnalisée sur la demande.

    * `REDIRECT_IS_FAILURE`:Votre moniteur signale un échec s&apos;il est redirigé.

    * `VALIDATION_TEXT`:Si ce texte n&apos;est pas inclus dans la réponse de votre moniteur, il renvoie un échec.

    * `TLS_VALIDATION`: Vérifie la [validité](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors/#simple) du certificat SSL chaîne.

    * `BYPASS_HEAD_REQUEST`: Contourne la requête HEAD initiale et effectue à la place une requête GET.

    Pour [un navigateur simple Monitorer](#create-simple-browser):

    * `RUNTIME_TYPE`: Le type d’exécution utilisé par votre moniteur. « CHROME\_BROWSER » est la seule valeur acceptée.

    * `RUNTIME_TYPE_VERSION`: La version du type d&apos;exécution utilisée par votre moniteur. « 100 » est la seule valeur acceptée.

    * `SCRIPT_LANGUAGE`:La langue utilisée dans votre moniteur. « JAVASCRIPT » est la seule valeur acceptée.

    Pour [le moniteur API scripté](#create-scripted-API):

    * `SCRIPT_CONTENT`:Le contenu réel du script. Ceci ne doit **pas** être codé en base64.

    * `RUNTIME_TYPE`: Le type d’exécution utilisé par votre moniteur. « NODE\_API » est la seule valeur acceptée.

    * `RUNTIME_TYPE_VERSION`: La version du type d&apos;exécution utilisée par votre moniteur. La seule valeur acceptée est `16.10`.

    * `SCRIPT_LANGUAGE`:La langue utilisée dans votre moniteur. « JAVASCRIPT » est la seule valeur acceptée.

    Pour [moniteur de navigateur scripté](#create-scripted-browser):

    * `SCRIPT_CONTENT`:Le contenu réel du script. Ceci ne doit **pas** être codé en base64.

    * `RUNTIME_TYPE`: Le type d’exécution utilisé par votre moniteur. « CHROME\_BROWSER » est la seule valeur acceptée.

    * `RUNTIME_TYPE_VERSION`: La version du type d&apos;exécution utilisée par votre moniteur. « 100 » est la seule valeur acceptée.

    * `SCRIPT_LANGUAGE`:La langue utilisée dans votre moniteur. « JAVASCRIPT » est la seule valeur acceptée.

    Pour [le moniteur de pas](#create-step):

    * `RUNTIME_TYPE`: Le type d’exécution utilisé par votre moniteur. « CHROME\_BROWSER » est la seule valeur acceptée.

    * `RUNTIME_TYPE_VERSION`: La version du type d&apos;exécution utilisée par votre moniteur. « 100 » est la seule valeur acceptée.

    * `SCRIPT_LANGUAGE`:La langue utilisée dans votre moniteur. « JAVASCRIPT » est la seule valeur acceptée.

    Pour [le contrôleur de vérification des certificats](#create-certificate-check):

    * `DAYS_UNTIL_EXPIRATION`: Vous avertit lorsque vous devez mettre à jour votre certificat. Par exemple, si vous souhaitez recevoir une notification 30 jours avant l’expiration du certificat, vous devez saisir 30.

    * `RUNTIME_TYPE`: Le type d’exécution utilisé par votre moniteur. « NODE\_API » est la seule valeur acceptée.

    * `RUNTIME_TYPE_VERSION`: La version du type d&apos;exécution utilisée par votre moniteur. La seule valeur acceptée est `16.10`.

    * `SCRIPT_LANGUAGE`:La langue utilisée dans votre moniteur. « JAVASCRIPT » est la seule valeur acceptée.

    Pour [le moniteur de liens brisés](#create-broken-links):

    * `RUNTIME_TYPE`: Le type d’exécution utilisé par votre moniteur. « NODE\_API » est la seule valeur acceptée.

    * `RUNTIME_TYPE_VERSION`: La version du type d&apos;exécution utilisée par votre moniteur. La seule valeur acceptée est `16.10`.

    * `SCRIPT_LANGUAGE`:La langue utilisée dans votre moniteur. « JAVASCRIPT » est la seule valeur acceptée.

    Pour tous les moniteurs :

    * `APDEX_TARGET`:La cible Apdex du moniteur utilisée pour renseigner les rapports SLA . La valeur par défaut est de 7 secondes (7 000 ms).
  </Collapser>
</CollapserGroup>

## Utiliser une requête pour récupérer des données [#query]

Qequête faire requests pour récupérer des données. Pour découvrir les fonctionnalités de requête supplémentaires disponibles pour votre entité Synthétique, consultez [le didacticiel API de l&apos;entité NerdGraph](/docs/apis/nerdgraph/examples/nerdgraph-entities-api-tutorial/).

<CollapserGroup>
  <Collapser id="query-examples" title="Moniteur de requête">
    Vous pouvez interroger votre moniteur Synthétique pour obtenir des informations sur l&apos;état actuel de vos données ou des détails sur la configuration du moniteur. De nombreuses configurations de moniteur sont affichées sous forme de balise.

    ```graphql
    {
      actor {
        entitySearch(query: "domain = 'SYNTH' AND type = 'MONITOR'") {
          results {
            entities {
              ... on SyntheticMonitorEntityOutline {
                guid
                name
                accountId
                monitorType
                tags {
                  key
                  values
                }
              }
            }
          }
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="private-examples" title="Interroger les sites privés">
    Vous pouvez requêter votre site privé :

    ```graphql
    {
      actor {
        entitySearch(query: "domain = 'SYNTH' AND type = 'PRIVATE_LOCATION'") {
          results {
            entities {
              accountId
              guid
              name
              tags {
                key
                values
              }
            }
          }
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="downtime-query" title="Qequête monitorer temps d'arrêt">
    Qequête existante moniteur temps d&apos;arrêt. les détails de configuration sont stockés dans la balise.

    ```graphql
    {
      actor {
        entitySearch(query: "domain = 'SYNTH' AND type = 'MONITOR_DOWNTIME'") {
          results {
            entities {
              accountId
              guid
              name
              tags {
                key
                values
              }
            }
          }
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="credentials-example" title="Qequête d'informations d'identification sécurisées">
    L&apos;interrogation des informations d&apos;identification sécurisées vous permet de récupérer uniquement les métadonnées, mais pas les valeurs d&apos;informations d&apos;identification elles-mêmes :

    ```graphql
    {
      actor {
        entitySearch(query: "domain = 'SYNTH' AND type = 'SECURE_CRED'") {
          results {
            entities {
              ... on SecureCredentialEntityOutline {
                accountId
                guid
                name
                tags {
                  key
                  values
                }
                updatedAt
              }
            }
          }
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="query-script-example" title="Script de monitoring des requêtes">
    Récupérer le script utilisé dans une API scriptée ou un moniteur de navigateur scripté. D’autres types de moniteurs renverront une erreur.

    ```graphql
    {
      actor {
        account(id: ACCOUNT_ID) {
          synthetics {
            script(monitorGuid: "ENTITY_GUID") {
              text
            }
          }
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="query-steps-example" title="Étapes du moniteur de requête">
    Récupérer les étapes configurées pour un moniteur d&apos;étapes. D’autres types de moniteurs renverront une erreur.

    ```graphql
    {
      actor {
        account(id: ACCOUNT_ID) {
          synthetics {
            steps(monitorGuid: "ENTITY_GUID") {
              ordinal
              type
              values
            }
          }
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="query-guid-example" title="Requête pour mapper l'ID du moniteur au GUID de l'entité">
    Récupérez le GUID d’entité pour un moniteur Synthétique à l’aide de l’ID du moniteur.

    ```graphql
    {
      actor {
        entitySearch(
          query: "(domainId = 'MONITOR_ID')"
        ) {
          results {
            entities {
              ... on SyntheticMonitorEntityOutline {
                guid
                name
                monitorId
              }
            }
          }
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="query-runtime-upgrade-status" title="Qequête pour récupérer l'état de tous les tests de mise à niveau d'exécution">
    Récupérez l&apos;état de tous les tests de mise à niveau d&apos;exécution pour le moniteur d&apos;exécution legacy . Ces tests renseignent l&apos;[UI des mises à niveau d&apos;exécution](/docs/synthetics/synthetic-monitoring/using-monitors/runtime-upgrade-ui/). Le résultat du test est stocké dans la tag `validationStatus`. Si le test de mise à niveau a échoué, le message d&apos;erreur est disponible dans la tag `validationError`.

    ```graphql
    {
      actor {
        entitySearch(query: "domain = 'SYNTH' AND type = 'RUNTIME_VALIDATION'") {
          results {
            entities {
              accountId
              guid
              name
              tags {
                key
                values
              }
            }
          }
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="query-runtime-upgrade-status-monitor" title="Qequête pour récupérer l'état d'un test de mise à niveau d'exécution par ID de moniteur">
    Récupérer l’état d’un test de mise à niveau d’exécution pour un seul moniteur d’exécution legacy . Ces résultats de test renseignent l’[UI des mises à niveau d’exécution](/docs/synthetics/synthetic-monitoring/using-monitors/runtime-upgrade-ui/). Le résultat du test est stocké dans la tag `validationStatus`. Si le test de mise à niveau a échoué, le message d&apos;erreur est disponible dans la tag `validationError`.

    ```graphql
    {
      actor {
        entitySearch(
          query: "domain = 'SYNTH' AND type = 'RUNTIME_VALIDATION' AND domainId = 'MONITOR_ID'"
        ) {
          results {
            entities {
              accountId
              guid
              name
              tags {
                key
                values
              }
            }
          }
        }
      }
    }
    ```
  </Collapser>
</CollapserGroup>

## Créez votre moniteur Synthétique [#create-monitors]

Vous trouverez ci-dessous quelques exemples de requests pour automatiser la création de votre moniteur Synthétique.

<Callout variant="tip">
  Incluez l’objet d’exécution qui inclut `runtimeType`, `runtimeTypeVersion` et `scriptLanguage` pour utiliser un environnement d’exécution plus récent. N&apos;incluez pas l&apos;objet d&apos;exécution et ces attributs pour continuer à utiliser un environnement d&apos;exécution legacy .
</Callout>

<Callout variant="important">
  À compter du 26 août 2024, vous ne pouvez plus créer de nouveaux moniteurs à l&apos;aide legacy runtimes sur des sites publics ou privés. Le 22 octobre 2024, nous mettrons [fin à la vie](/whats-new/2024/04/whats-new-04-09-eol-synthetics-runtime-cpm) des versions conteneurisées subordonnées privées (appels par minute) et legacy versions synthétiques du runtime.

  * Pour un emplacement public, utilisez [l&apos;UI de mise à niveau de l&apos;environnement d&apos;exécution](/docs/synthetics/synthetic-monitoring/using-monitors/runtime-upgrade-ui/) pour mettre à jour votre moniteur avec les environnements d&apos;exécution les plus récents.
  * Pour les sites privés, veuillez consulter nos [étapes de migration recommandées](/docs/synthetics/synthetic-monitoring/private-locations/job-manager-transition-guide/#monitorMigration) pour éviter la dégradation du moniteur.
</Callout>

<CollapserGroup>
  <Collapser id="create-ping" title="Créer un moniteur de ping">
    Le moniteur Ping vérifie que votre application est en cours d&apos;exécution. Voici un exemple de création d&apos;un dans NerdGraph :

    ```graphql
      mutation {
        syntheticsCreateSimpleMonitor(
          accountId: ACCOUNT_ID
          monitor: {
            locations: { public: ["LOCATION_1", "LOCATION_2"] }
            name: "YOUR_MONITOR_NAME"
            period: PERIOD
            status: STATUS
            uri: "MONITORED_URI"
            advancedOptions: {
              customHeaders: { name: "HEADER_NAME", value: "HEADER_VALUE" }
              redirectIsFailure: REDIRECT_IS_FAILURE
              responseValidationText: "VALIDATION_TEXT"
              shouldBypassHeadRequest: BYPASS_HEAD_REQUEST
              useTlsValidation: TLS_VALIDATION
            }
            apdexTarget: APDEX_TARGET
          }
        ) {
          errors {
            description
            type
          }
        }
      }
    ```
  </Collapser>

  <Collapser id="create-simple-browser" title="Créer un simple moniteur de navigateur">
    Un simple moniteur de navigateur utilise l&apos;instance Chrome pour imiter les visites des clients. Voici un exemple de création d&apos;un dans NerdGraph :

    ```graphql
    mutation {
      syntheticsCreateSimpleBrowserMonitor(
        accountId: ACCOUNT_ID
        monitor: {
          browsers: [BROWSERS]
          devices: [DEVICES]
          locations: { public: ["LOCATION_1", "LOCATION_2"] }
          name: "YOUR_MONITOR_NAME"
          period: PERIOD
          runtime: {
            runtimeType: "RUNTIME_TYPE"
            runtimeTypeVersion: "RUNTIME_TYPE_VERSION"
            scriptLanguage: "SCRIPT_LANGUAGE"
          }
          status: STATUS
          uri: "MONITORED_URI"
          advancedOptions: {
            customHeaders: { name: "HEADER_NAME", value: "HEADER_VALUE" }
            enableScreenshotOnFailureAndScript: ENABLE_SCREENSHOT
            responseValidationText: "VALIDATION_TEXT"
            useTlsValidation: TLS_VALIDATION
          }
          apdexTarget: APDEX_TARGET
        }
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="create-scripted-browser" title="Créer un navigateur scripté">
    [moniteur de navigateur scripté](/docs/synthetics/synthetic-monitoring/scripting-monitors/introduction-scripted-browser-monitors) sont des interactions plus complexes avec vos pages et votre application. Voici un exemple de création d&apos;un dans NerdGraph :

    ```graphql
    mutation {
      syntheticsCreateScriptBrowserMonitor(
        accountId: ACCOUNT_ID
        monitor: {
          browsers: [BROWSERS]
          devices: [DEVICES]
          locations: { public: ["LOCATION_1", "LOCATION_2"] }
          name: "MONITOR_NAME"
          period: PERIOD
          runtime: {
            runtimeType: "RUNTIME_TYPE"
            runtimeTypeVersion: "RUNTIME_TYPE_VERSION"
            scriptLanguage: "SCRIPT_LANGUAGE"
          }
          script: "SCRIPT_CONTENT"
          status: STATUS
          advancedOptions: { enableScreenshotOnFailureAndScript: ENABLE_SCREENSHOT }
          apdexTarget: APDEX_TARGET
        }
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="create-scripted-API" title="Créer un moniteur API scripté">
    [Le moniteur API scripté](/docs/synthetics/synthetic-monitoring/scripting-monitors/write-synthetic-api-tests) vérifie vos points de terminaison d&apos;API. Voici un exemple de création d&apos;un dans NerdGraph :

    ```graphql
    mutation {
      syntheticsCreateScriptApiMonitor(
        accountId: ACCOUNT_ID
        monitor: {
          locations: { public: ["LOCATION_1", "LOCATION_2"] }
          name: "YOUR_MONITOR_NAME"
          period: PERIOD
          runtime: {
            runtimeType: "RUNTIME_TYPE"
            runtimeTypeVersion: "RUNTIME_TYPE_VERSION"
            scriptLanguage: "SCRIPT_LANGUAGE"
          }
          script: "SCRIPT_CONTENT"
          status: STATUS
          apdexTarget: APDEX_TARGET
        }
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="create-step" title="Créer un moniteur de pas">
    Step Monitorer fournit un moniteur sans code basé sur un navigateur multi-étapes. Voici un exemple de création d&apos;un dans NerdGraph :

    ```graphql
    mutation {
      syntheticsCreateStepMonitor(
        accountId: ACCOUNT_ID
        monitor: {
          browsers: [BROWSERS]
          devices: [DEVICES]
          locations: { public: ["LOCATION_1", "LOCATION_2"] }
          name: "MONITOR_NAME"
          period: PERIOD
          runtime: {
            runtimeType: "RUNTIME_TYPE"
            runtimeTypeVersion: "RUNTIME_TYPE_VERSION"
            scriptLanguage: "SCRIPT_LANGUAGE"
          }
          status: STATUS
          steps: [
            { 
              ordinal: 0, 
              type: NAVIGATE, 
              values: ["MONITORED_URI", "USER_AGENT"] }
            {
              ordinal: STEP_NUMBER
              type: STEP_TYPE
              values: ["CONDITIONAL_TYPE", "VALUE"]
            }
          ]
          advancedOptions: { enableScreenshotOnFailureAndScript: ENABLE_SCREENSHOT }
          apdexTarget: APDEX_TARGET
        }
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="create-certificate-check" title="Créer un outil de monitoring de vérification de certificat">
    Configurez le moniteur pour vous avertir lorsque vos certificats SSL sont sur le point d&apos;expirer. Voici un exemple de création d&apos;un dans NerdGraph :

    ```graphql
    mutation {
      syntheticsCreateCertCheckMonitor(
        accountId: ACCOUNT_ID
        monitor: {
          domain: "DOMAIN"
          locations: { public: ["LOCATION_1", "LOCATION_2"] }
          name: "YOUR_MONITOR_NAME"
          numberDaysToFailBeforeCertExpires: DAYS_UNTIL_EXPIRATION
          period: PERIOD
          status: STATUS
          apdexTarget: APDEX_TARGET
        }
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="create-broken-links" title="Créer un outil de monitoring des liens brisés">
    Le moniteur de liens brisés vérifie les liens sur une page Web pour détecter les échecs. Voici un exemple de création d&apos;un dans NerdGraph :

    ```graphql
    mutation {
      syntheticsCreateBrokenLinksMonitor(
        accountId: ACCOUNT_ID
        monitor: {
          locations: { public: ["LOCATION_1", "LOCATION_2"] }
          name: "YOUR_MONITOR_NAME"
          period: PERIOD
          status: STATUS
          apdexTarget: APDEX_TARGET
          uri: "MONITOR_URI"
          tags: { key: "YOUR_TAG_NAME", values: "TAG_VALUE" }
        }
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>
</CollapserGroup>

## Mettez à jour votre moniteur Synthétique [#update-monitors]

Bien que vous ne puissiez pas modifier le type de moniteur après l&apos;avoir créé, vous pouvez mettre à jour ses paramètres. Seuls le GUID et les paramètres qui doivent être mis à jour sont requis dans le cadre de la demande.

<Callout variant="tip">
  Incluez l’objet d’exécution qui inclut runtimeType, runtimeTypeVersion et scriptLanguage pour [mettre à niveau un moniteur](#upgrade-monitor-runtime) afin d’utiliser un runtime plus récent. Incluez cet objet et définissez ces attributs sur une chaîne vide pour rétrograder vers un environnement d&apos;exécution legacy . N&apos;incluez pas cet objet et ces attributs pour continuer à utiliser un environnement d&apos;exécution legacy .
</Callout>

<CollapserGroup>
  <Collapser id="update-ping" title="Mettre à jour un moniteur de ping">
    Utilisez ceci pour mettre à jour votre moniteur de ping :

    ```graphql
    mutation {
      syntheticsUpdateSimpleMonitor(
        guid: "ENTITY_GUID"
        monitor: {
          locations: { public: ["LOCATION_1", "LOCATION_2"] }
          name: "YOUR_MONITOR_NAME"
          period: PERIOD
          status: STATUS
          uri: "MONITORED_URI"
          advancedOptions: {
            customHeaders: { name: "HEADER_NAME", value: "HEADER_VALUE" }
            redirectIsFailure: REDIRECT_IS_FAILURE
            responseValidationText: "VALIDATION_TEXT"
            shouldBypassHeadRequest: BYPASS_HEAD_REQUEST
            useTlsValidation: TLS_VALIDATION
          }
          apdexTarget: APDEX_TARGET
        }
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="update-simple-browser" title="Mettre à jour un simple moniteur de navigateur">
    Pour mettre à jour un simple outil de monitoring de navigateur (y compris la possibilité de mettre à niveau la version d&apos;exécution), utilisez ceci :

    ```graphql
    mutation {
      syntheticsUpdateSimpleBrowserMonitor(
        guid: ENTITY_GUID
        monitor: {
          browsers: [BROWSERS]
          devices: [DEVICES]
          locations: { public: ["LOCATION_1", "LOCATION_2"] }
          name: "YOUR_MONITOR_NAME"
          period: PERIOD
          runtime: {
            runtimeType: "RUNTIME_TYPE"
            runtimeTypeVersion: "RUNTIME_TYPE_VERSION"
            scriptLanguage: "SCRIPT_LANGUAGE"
          }
          status: STATUS
          uri: "MONITORED_URI"
          advancedOptions: {
            customHeaders: { name: "HEADER_NAME", value: "HEADER_VALUE" }
            enableScreenshotOnFailureAndScript: ENABLE_SCREENSHOT
            responseValidationText: "VALIDATION_TEXT"
            useTlsValidation: TLS_VALIDATION
          }
          apdexTarget: APDEX_TARGET
        }
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="update-scripted-browser" title="Mettre à jour un moniteur de navigateur scripté">
    Pour mettre à jour un moniteur de navigateur scripté (y compris la possibilité de mettre à niveau la version d&apos;exécution), utilisez ceci :

    ```graphql
    mutation {
      syntheticsUpdateScriptBrowserMonitor(
        guid: ENTITY_GUID
        monitor: {
          browsers: [BROWSERS]
          devices: [DEVICES]
          locations: { public: ["LOCATION_1", "LOCATION_2"] }
          name: "MONITOR_NAME"
          period: PERIOD
          runtime: {
            runtimeType: "RUNTIME_TYPE"
            runtimeTypeVersion: "RUNTIME_TYPE_VERSION"
            scriptLanguage: "SCRIPT_LANGUAGE"
          }
          script: "SCRIPT_CONTENT"
          status: STATUS
          advancedOptions: { enableScreenshotOnFailureAndScript: ENABLE_SCREENSHOT }
          apdexTarget: APDEX_TARGET
        }
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="update-API-test" title="Mettre à jour un moniteur de test API">
    Pour mettre à jour un moniteur API scripté (y compris la possibilité de mettre à niveau la version d&apos;exécution), utilisez ceci :

    ```graphql
    mutation {
      syntheticsUpdateScriptApiMonitor(
        guid: ENTITY_GUID
        monitor: {
          locations: { public: ["LOCATION_1", "LOCATION_2"] }
          name: "YOUR_MONITOR_NAME"
          period: PERIOD
          runtime: {
            runtimeType: "RUNTIME_TYPE"
            runtimeTypeVersion: "RUNTIME_TYPE_VERSION"
            scriptLanguage: "SCRIPT_LANGUAGE"
          }
          script: "SCRIPT_CONTENT"
          status: STATUS
          apdexTarget: APDEX_TARGET
        }
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="update-step" title="Mettre à jour un moniteur de pas">
    Utilisez ceci pour mettre à jour un moniteur d&apos;étapes :

    ```graphql
    mutation {
      syntheticsUpdateStepMonitor(
        guid: ENTITY_GUID
        monitor: {
          browsers: [BROWSERS]
          devices: [DEVICES]
          locations: { public: ["LOCATION_1", "LOCATION_2"] }
          name: "MONITOR_NAME"
          period: PERIOD
          runtime: {
            runtimeType: "RUNTIME_TYPE"
            runtimeTypeVersion: "RUNTIME_TYPE_VERSION"
            scriptLanguage: "SCRIPT_LANGUAGE"
          }
          status: STATUS
          steps: [
            { 
              ordinal: 0,
              type: NAVIGATE,
              values: ["MONITORED_URI", "USER_AGENT"] 
            }
            {
              ordinal: STEP_NUMBER,
              type: STEP_TYPE,
              values: ["VALUE_1", "VALUE_2"]
            }
          ]
          advancedOptions: { enableScreenshotOnFailureAndScript: ENABLE_SCREENSHOT }
          apdexTarget: APDEX_TARGET
        }
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="update-certificate-check" title="Mettre à jour un contrôleur de vérification de certificat">
    Utilisez ceci pour mettre à jour un moniteur de vérification de certificat :

    ```graphql
    mutation {
      syntheticsUpdateCertCheckMonitor(
        guid: ENTITY_GUID
        monitor: {
          domain: "DOMAIN"
          locations: { public: ["LOCATION_1", "LOCATION_2"] }
          name: "YOUR_MONITOR_NAME"
          numberDaysToFailBeforeCertExpires: DAYS_UNTIL_EXPIRATION
          period: PERIOD
          status: STATUS
          apdexTarget: APDEX_TARGET
        }
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="update-broken-links" title="Mettre à jour un moniteur de liens brisés">
    Utilisez ceci pour mettre à jour un moniteur de liens brisés :

    ```graphql
    mutation {
      syntheticsUpdateBrokenLinksMonitor(
        guid: ENTITY_GUID
        monitor: {
          locations: { public: ["LOCATION_1", "LOCATION_2"] }
          name: "YOUR_MONITOR_NAME"
          period: PERIOD
          status: STATUS
          apdexTarget: APDEX_TARGET
          uri: "MONITOR_URI"
          tags: { 
            key: "YOUR_TAG_NAME", 
            values: "TAG_VALUE" 
          }
        }
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="upgrade-monitor-runtime" title="Mettre à niveau l'environnement d'exécution d'un moniteur">
    Vous pouvez utiliser l&apos;exemple ci-dessous pour mettre à jour un navigateur simple, une API scriptée ou un moniteur de navigateur scripté vers les nouveaux environnements d&apos;exécution Chrome 100+ ou Node.js 16.10. L&apos;exemple suivant met à niveau un moniteur de navigateur scripté vers le nouveau runtime à partir du legacy runtime.

    * Pour mettre à jour un simple moniteur de navigateur en utilisant l&apos;exemple ci-dessous, changez la mutation en `syntheticsUpdateSimpleBrowserMonitor` au lieu de `syntheticsUpdateScriptBrowserMonitor`.
    * Pour mettre à jour un moniteur API scripté à l&apos;aide de l&apos;exemple ci-dessous, modifiez la mutation en `syntheticsUpdateScriptApiMonitor` au lieu de `syntheticsUpdateScriptBrowserMonitor`.

    Consultez [les champs facultatifs](#optional-fields) pour plus de détails sur les paramètres d&apos;exécution.

    ```graphql
    mutation {
      syntheticsUpdateScriptBrowserMonitor ( 
        guid: "ENTITY_GUID", 
        monitor: {
          runtime: {
            runtimeType: "RUNTIME_TYPE", 
            runtimeTypeVersion: "RUNTIME_TYPE_VERSION", 
            scriptLanguage: "SCRIPT_LANGUAGE"
            }
          }
        ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="downgrade-monitor-runtime" title="Rétrograder le temps d'exécution d'un moniteur">
    Vous pouvez utiliser l&apos;exemple ci-dessous pour mettre à jour un navigateur simple, API scriptée ou un moniteur de navigateur scripté pour utiliser un environnement d&apos;exécution legacy avant la fin de vie du 22 octobre 2024. L&apos;exemple suivant rétrograde un moniteur de navigateur scripté vers l&apos;environnement d&apos;exécution legacy à partir du nouveau.

    * Pour mettre à jour un simple moniteur de navigateur en utilisant l&apos;exemple ci-dessous, changez la mutation en `syntheticsUpdateSimpleBrowserMonitor` au lieu de `syntheticsUpdateScriptBrowserMonitor`.
    * Pour mettre à jour un moniteur API scripté à l&apos;aide de l&apos;exemple ci-dessous, modifiez la mutation en `syntheticsUpdateScriptApiMonitor` au lieu de `syntheticsUpdateScriptBrowserMonitor`.

    Consultez [les champs facultatifs](#optional-fields) pour plus de détails sur les paramètres d&apos;exécution.

    ```graphql
    mutation {
      syntheticsUpdateScriptBrowserMonitor ( 
        guid: "ENTITY_GUID", 
        monitor: {
          runtime: {
            runtimeType: "", 
            runtimeTypeVersion: "", 
            scriptLanguage: ""
            }
          }
        ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="move-monitor" title="Déplacer un moniteur entre un site privé compatible VSE">
    Utilisez la mutation suivante pour déplacer un moniteur d&apos;API scripté entre un site privé compatible VSE. Assurez-vous d&apos;inclure le script pour régénérer les HMAC :

    ```graphql
    mutation {
      syntheticsUpdateScriptApiMonitor(
        guid: "ENTITY_GUID"
        monitor: {locations: 
          {private: [{
            guid: "LOCATION_GUID", 
            vsePassword: "YOUR_VSE_PASSWORD"}]
          }, 
          script: "SCRIPT_CONTENT"}
      ) 
      {
        errors {
          description
          type
        }
        monitor {
          status
        }
      }
    }
    ```
  </Collapser>
</CollapserGroup>

## Supprimer un moniteur Synthétique [#delete-monitor]

Utilisez ces scripts pour supprimer votre moniteur :

<CollapserGroup>
  <Collapser id="delete-monitor" title="Supprimer le moniteur">
    Supprimez un moniteur à l’aide du GUID de l’entité du moniteur.

    ```graphql
    mutation {
      syntheticsDeleteMonitor (
        guid: "ENTITY_GUID"
      ) {
        deletedGuid
      }
    }
    ```
  </Collapser>
</CollapserGroup>

## Gérez votre site privé [#private-locations]

Un [site privé](/docs/synthetics/synthetic-monitoring/private-locations/private-locations-overview-monitor-internal-sites-add-new-locations) vous permet de monitorer les applications derrière votre pare-feu. Lorsque vous créez un site privé, vous installez et configurez un serveur privé pour exécuter le moniteur attribué à ce site privé.

<CollapserGroup>
  <Collapser id="private-location" title="Créer un site privé">
    ```graphql
    mutation {
      syntheticsCreatePrivateLocation (
        accountId: ACCOUNT_ID,
        name: "PrivateLocationName",
        description: "Optional description",
        shared: true,
        verifiedScriptExecution: false
      ) {
        guid
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="private-location" title="Mettre à jour un site privé">
    Si un emplacement est partagé et utilisé par d&apos;autres comptes de votre organisation pour exécuter le moniteur Synthétique, vous ne pouvez pas annuler le partage de ce site privé tant que ces moniteurs ne sont pas désactivés.

    ```graphql
    mutation {
      syntheticsUpdatePrivateLocation (
        shared: false,
        guid: ENTITY_GUID,     
        description: "EnterYourDescription", 
        verifiedScriptExecution: true
      ) {
        description
        verifiedScriptExecution
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="delete-private locations" title="Supprimer un site privé">
    ```graphql
    mutation {
      syntheticsDeletePrivateLocation (
        guid: ENTITY_GUID
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="purge-private-location" title="Purger une file d'attente de travaux d'un site privé">
    Si vous avez besoin de supprimer un arriéré difficile à gérer, utilisez ceci :

    ```graphql
    mutation {
      syntheticsPurgePrivateLocationQueue (
        guid: ENTITY_GUID
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>
</CollapserGroup>

## Gérez vos identifiants sécurisés [#secure-credentials]

Vous utilisez [des informations d&apos;identification sécurisées](/docs/synthetics/synthetic-monitoring/using-monitors/store-secure-credentials-scripted-browsers-api-tests) lors du stockage, de la protection et de la gestion centralisée des informations protégées utilisées par votre moniteur, comme les mots de passe, la clé API ou les certificats codés. L&apos;utilisation de NerdGraph vous permet de modifier par programmation les valeurs de vos informations d&apos;identification sécurisées si vous devez réinitialiser des informations d&apos;identification pour une raison quelconque.

<CollapserGroup>
  <Collapser id="secure-credential" title="Créer un identifiant sécurisé">
    ```graphql
    mutation {
      syntheticsCreateSecureCredential (
        accountId: ACCOUNT_ID, 
        description: "YourOptionalDescription", 
        key: SECURE_CREDENTIAL_NAME, 
        value: SECURE_CREDENTIAL_VALUE 
      ) {
        errors {
          description
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="update-secure" title="Mettre à jour un identifiant sécurisé">
    ```graphql
    mutation {
      syntheticsUpdateSecureCredential(
        accountId: ACCOUNT_ID
        description: "YourOptionalDescription"
        key: SECURE_CREDENTIAL_NAME
        value: SECURE_CREDENTIAL_VALUE
      ) {
        createdAt
        lastUpdate
        errors {
          description
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="secure-credential" title="Supprimer un identifiant sécurisé">
    ```graphql
    mutation {
      syntheticsDeleteSecureCredential (
        accountId: ACCOUNT_ID, 
        key: SECURE_CREDENTIAL_NAME
      ) {
        errors {
          description
        }
      }
    }
    ```
  </Collapser>
</CollapserGroup>

## Gérer le temps d&apos;arrêt de votre moniteur [#monitor-downtimes]

Le moniteur temps d&apos;arrêt vous permet de spécifier les heures auxquelles vos Synthetics doivent cesser de fonctionner. Nous avons fourni différents extraits qui montrent comment planifier les temps d&apos;arrêt du moniteur pour vos synthétiques. Vous devez mettre à jour ces extraits pour spécifier le fuseau horaire, les heures de début et de fin. Pour en savoir plus sur le moment où vous pouvez programmer des temps d&apos;arrêt de la monitoring, consultez notre document [Désactiver monitoring pendant les heures de maintenance programmées](/docs/synthetics/synthetic-monitoring/using-monitors/monitor-downtimes-disable-monitoring-during-scheduled-maintenance-times/). Pour trouver les valeurs de fuseau horaire, consultez [la base de données tz des fuseaux horaires](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones). Par exemple, America/Los Angeles utiliserait l&apos;abréviation PDT.

<CollapserGroup>
  <Collapser id="create-once-downtime" title="Créer un moniteur de temps d'arrêt qui s'exécute une seule fois">
    ```graphql
    mutation {
      syntheticsCreateOnceMonitorDowntime (
        accountId: ACCOUNT_ID,
        name: "MonitorDowntimeName",
        monitorGuids: ["OptionalMonitorEntityGuid", "OptionalMonitorEntityGuid"],
        timezone: "TIMEZONE",
        startTime: "yyyy-MM-ddTHH:mm:ss",
        endTime: "yyyy-MM-ddTHH:mm:ss"
      ) {
        guid,
        accountId,
        name,
        monitorGuids,
        timezone,
        startTime,
        endTime
      }
    }
    ```
  </Collapser>

  <Collapser id="create-daily-downtime" title="Créer un moniteur de temps d'arrêt qui s'exécute quotidiennement">
    ```graphql
    mutation {
      syntheticsCreateDailyMonitorDowntime (
        accountId: ACCOUNT_ID,
        name: "MonitorDowntimeName",
        monitorGuids: ["OptionalMonitorEntityGuid", "AnotherOptionalMonitorEntityGuid"],
        timezone: "TIMEZONE",
        startTime: "yyyy-MM-ddTHH:mm:ss",
        endTime: "yyyy-MM-ddTHH:mm:ss",
        endRepeat: {
          onDate: "yyyy-MM-ddTHH:mm:ss",
          onRepeat: Int
        }
      ) {
        guid,
        accountId,
        name,
        monitorGuids,
        timezone,
        startTime,
        endTime,
        endRepeat {
          onDate,
          onRepeat
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="create-weekly-downtime" title="Créer un moniteur de temps d'arrêt qui s'exécute chaque semaine">
    ```graphql
    mutation {
      syntheticsCreateWeeklyMonitorDowntime (
        accountId: ACCOUNT_ID,
        name: "MonitorDowntimeName",
        monitorGuids: ["OptionalMonitorEntityGuid", "AnotherOptionalMonitorEntityGuid"],
        timezone: "TIMEZONE",
        startTime: "yyyy-MM-ddTHH:mm:ss",
        endTime: "yyyy-MM-ddTHH:mm:ss",
        endRepeat: {
          onDate: "yyyy-MM-ddTHH:mm:ss",
          onRepeat: Int
        },
        maintenanceDays: [WeekDaysEnums]
      ) {
        guid,
        accountId,
        name,
        monitorGuids,
        timezone,
        startTime,
        endTime,
        endRepeat {
          onDate,
          onRepeat
        },
        maintenanceDays
      }
    }
    ```
  </Collapser>

  <Collapser id="create-monthly-downtime" title="Créer un moniteur de temps d'arrêt qui s'exécute mensuellement">
    ```graphql
    mutation {
      syntheticsCreateMonthlyMonitorDowntime (
        accountId: ACCOUNT_ID,
        name: "MonitorDowntimeName",
        monitorGuids: ["OptionalMonitorEntityGuid", "AnotherOptionalMonitorEntityGuid"],
        timezone: "TIMEZONE",
        startTime: "yyyy-MM-ddTHH:mm:ss",
        endTime: "yyyy-MM-ddTHH:mm:ss",
        endRepeat: {
          onDate: "yyyy-MM-ddTHH:mm:ss",
          onRepeat: Int
        },
        frequency: {
          daysOfWeek: {
            weekDay: WeekDaysEnum,
            ordinalDayOfMonth: DayOfMonthOrdinal
          },
          daysOfMonth: [Int]
        }
      ) {
        guid,
        accountId,
        name,
        monitorGuids,
        timezone,
        startTime,
        endTime,
        endRepeat {
          onDate,
          onRepeat
        },
        frequency {
          daysOfWeek {
            weekDay,
            ordinalDayOfMonth
          },
          daysOfMonth
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="update-downtime" title="Mettre à jour un moniteur temps d'arrêt">
    ```graphql
    mutation {
      syntheticsEditMonitorDowntime (
        guid: "MonitorDowntimeEntityGuid",
        name: "MONITOR_DOWNTIME_NAME",
        monitorGuids: ["OptionalMonitorEntityGuid", "AnotherOptionalMonitorEntityGuid"],
        once: {
          timezone: "TIMEZONE",
          startTime: "yyyy-MM-ddTHH:mm:ss",
          endTime: "yyyy-MM-ddTHH:mm:ss"
        },
        daily: {
          timezone: "TIMEZONE",
          startTime: "yyyy-MM-ddTHH:mm:ss",
          endTime: "yyyy-MM-ddTHH:mm:ss",
          endRepeat: {
            onDate: "yyyy-MM-ddTHH:mm:ss",
            onRepeat: Int
          }
        },
        weekly: {
          timezone: "TIMEZONE",
          startTime: "yyyy-MM-ddTHH:mm:ss",
          endTime: "yyyy-MM-ddTHH:mm:ss",
          endRepeat: {
            onDate: "yyyy-MM-ddTHH:mm:ss",
            onRepeat: Int
          },
          maintenanceDays: [WeekDaysEnums]
        },
        monthly: {
          timezone: "TIMEZONE",
          startTime: "yyyy-MM-ddTHH:mm:ss",
          endTime: "yyyy-MM-ddTHH:mm:ss",
          endRepeat: {
            onDate: "yyyy-MM-ddTHH:mm:ss",
            onRepeat: Int
          },
          frequency: {
            daysOfWeek: {
              weekDay: WeekDaysEnum,
              ordinalDayOfMonth: DayOfMonthOrdinal
          },
          daysOfMonth: [Int]
        }
      ) {
        guid,
        accountId,
        name,
        monitorGuids,
        timezone,
        startTime,
        endTime,
        endRepeat {
          onDate,
          onRepeat
        },
        maintenanceDays,
        frequency {
          daysOfWeek {
            weekDay,
            ordinalDayOfMonth
          },
          daysOfMonth
        }
      }
    }
    ```
  </Collapser>

  <Collapser id="delete-downtime" title="Supprimer un moniteur temps d'arrêt">
    ```graphql
    mutation {
      syntheticsDeleteMonitorDowntime (
        guid: DOWNTIME_ENTITY_GUID
      ) {
        guid
      }
    }
    ```
  </Collapser>
</CollapserGroup>