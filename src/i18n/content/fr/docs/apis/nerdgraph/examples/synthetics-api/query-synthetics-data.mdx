---
title: requête monitoring des données synthétiques
tags:
  - Synthetics
  - APIs
  - NerdGraph
  - Examples
metaDescription: 'How to use New Relic NerdGraph API to query synthetic monitoring data including monitors, private locations, secure credentials, and downtimes.'
freshnessValidatedDate: never
translationType: machine
---

Après avoir configuré votre infrastructure monitoring, vous pouvez utiliser une requête pour récupérer des informations sur votre entité Synthétique. Les requêtes effectues des requests pour récupérer des données sur le moniteur, le site privé, les informations d&apos;identification et le temps d&apos;arrêt. Ce tutoriel fournit des exemples d&apos;utilisation de l&apos;API NerdGraph pour interroger des données synthétiques monitoring.

Pour découvrir les fonctionnalités de requête supplémentaires disponibles pour votre entité Synthétique, consultez [le didacticiel API de l&apos;entité NerdGraph](/docs/apis/nerdgraph/examples/nerdgraph-entities-api-tutorial/).

## Moniteur de requête [#query-monitors]

Cette requête récupère tous les moniteurs Synthétique de votre compte, en renvoyant les informations essentielles, notamment le GUID du moniteur, son nom, l&apos;ID du compte, le type de moniteur et l&apos;étiquette associée. L&apos;étiquette contient des détails configuration supplémentaires et des métadonnées sur chaque moniteur.

### Paramètres d&apos;entrée

<table>
  <thead>
    <tr>
      <th>
        paramètres
      </th>

      <th>
        Type de données
      </th>

      <th>
        Est-ce obligatoire ?
      </th>

      <th>
        Description
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `query`
      </td>

      <td>
        Chaîne
      </td>

      <td>
        Oui
      </td>

      <td>
        La requête de recherche pour filtrer l&apos;entité. Utilisez 

        `domain = 'SYNTH' AND type = 'MONITOR'`

         pour récupérer tous les moniteurs Synthétique.
      </td>
    </tr>
  </tbody>
</table>

### Exemple de requête

```graphql
{
  actor {
    entitySearch(query: "domain = 'SYNTH' AND type = 'MONITOR'") {
      results {
        entities {
          ... on SyntheticMonitorEntityOutline {
            guid
            name
            accountId
            monitorType
            tags {
              key
              values
            }
          }
        }
      }
    }
  }
}
```

## Interroger les sites privés [#query-private-locations]

Cette requête récupère tous les sites privés de votre compte, en renvoyant les informations essentielles, notamment le GUID du site, son nom, l&apos;identifiant du compte et l&apos;étiquette associée. Les sites privés vous permettent de monitorer les applications derrière votre pare-feu, et leurs détails configuration sont accessibles via la balise.

### Paramètres d&apos;entrée

<table>
  <thead>
    <tr>
      <th>
        paramètres
      </th>

      <th>
        Type de données
      </th>

      <th>
        Est-ce obligatoire ?
      </th>

      <th>
        Description
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `query`
      </td>

      <td>
        Chaîne
      </td>

      <td>
        Oui
      </td>

      <td>
        La requête de recherche pour filtrer l&apos;entité. Utilisez 

        `domain = 'SYNTH' AND type = 'PRIVATE_LOCATION'`

         pour récupérer tous les sites privés.
      </td>
    </tr>
  </tbody>
</table>

### Exemple de requête

```graphql
{
  actor {
    entitySearch(query: "domain = 'SYNTH' AND type = 'PRIVATE_LOCATION'") {
      results {
        entities {
          accountId
          guid
          name
          tags {
            key
            values
          }
        }
      }
    }
  }
}
```

## Qequête monitorer temps d&apos;arrêt [#query-monitor-downtimes]

Cette requête récupère tous les temps d&apos;arrêt de monitoring de votre compte, en renvoyant les informations essentielles, notamment le GUID du temps d&apos;arrêt, son nom, l&apos;ID du compte et l&apos;étiquette associée. Les monitorer temps d&apos;arrêt sont des périodes programmées pendant lesquelles le moniteur Synthétique s&apos;arrête de fonctionner, utiles lors de la maintenance planifiée ou de pannes connues. Les détails de configuration tels que le type de planification, le fuseau horaire et les modèles de récurrence sont stockés dans l&apos;étiquette.

### Paramètres d&apos;entrée

<table>
  <thead>
    <tr>
      <th>
        paramètres
      </th>

      <th>
        Type de données
      </th>

      <th>
        Est-ce obligatoire ?
      </th>

      <th>
        Description
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `query`
      </td>

      <td>
        Chaîne
      </td>

      <td>
        Oui
      </td>

      <td>
        La requête de recherche pour filtrer l&apos;entité. Utilisez 

        `domain = 'SYNTH' AND type = 'MONITOR_DOWNTIME'`

         pour récupérer tous les temps d&apos;arrêt du moniteur.
      </td>
    </tr>
  </tbody>
</table>

### Exemple de requête

```graphql
{
  actor {
    entitySearch(query: "domain = 'SYNTH' AND type = 'MONITOR_DOWNTIME'") {
      results {
        entities {
          accountId
          guid
          name
          tags {
            key
            values
          }
        }
      }
    }
  }
}
```

## Qequête d&apos;informations d&apos;identification sécurisées [#query-secure-credentials]

Cette requête récupère toutes les informations d&apos;identification sécurisées de votre compte, en renvoyant les métadonnées, notamment le GUID de l&apos;identifiant, son nom, l&apos;identifiant du compte, son étiquette et sa date de dernière mise à jour. Les identifiants sécurisés permettent de stocker, de protéger et de gérer de manière centralisée des informations sensibles telles que les mots de passe, les clés API ou les certificats chiffrés. Pour des raisons de sécurité, l&apos;interrogation des identifiants sécurisés ne renvoie que les métadonnées, et non les valeurs des identifiants eux-mêmes.

### Paramètres d&apos;entrée

<table>
  <thead>
    <tr>
      <th>
        paramètres
      </th>

      <th>
        Type de données
      </th>

      <th>
        Est-ce obligatoire ?
      </th>

      <th>
        Description
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `query`
      </td>

      <td>
        Chaîne
      </td>

      <td>
        Oui
      </td>

      <td>
        La requête de recherche pour filtrer l&apos;entité. Utilisez 

        `domain = 'SYNTH' AND type = 'SECURE_CRED'`

         pour récupérer toutes les informations d&apos;identification sécurisées.
      </td>
    </tr>
  </tbody>
</table>

### Exemple de requête

```graphql
{
  actor {
    entitySearch(query: "domain = 'SYNTH' AND type = 'SECURE_CRED'") {
      results {
        entities {
          ... on SecureCredentialEntityOutline {
            accountId
            guid
            name
            tags {
              key
              values
            }
            updatedAt
          }
        }
      }
    }
  }
}
```

## Script de monitoring des requêtes [#query-monitor-script]

Cette requête récupère le contenu du script utilisé dans une API scriptée ou un moniteur de navigateur scripté. Le script contient le code JavaScript qui définit le comportement du moniteur, tel que l&apos;appel d&apos;API, l&apos;interaction avec le navigateur ou la logique de validation personnalisée. Cette requête ne fonctionne qu&apos;avec les types de moniteurs scriptés ; les autres types de moniteurs (simple, ping, étape, vérification de certificat, liens brisés) renverront une erreur car ils n&apos;utilisent pas de script personnalisé.

### Paramètres d&apos;entrée

<table>
  <thead>
    <tr>
      <th>
        paramètres
      </th>

      <th>
        Type de données
      </th>

      <th>
        Est-ce obligatoire ?
      </th>

      <th>
        Description
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `id`

         (compte)
      </td>

      <td>
        Entier
      </td>

      <td>
        Oui
      </td>

      <td>
        L&apos;identifiant du compte New Relic qui contient le moniteur.
      </td>
    </tr>

    <tr>
      <td>
        `monitorGuid`
      </td>

      <td>
        Chaîne
      </td>

      <td>
        Oui
      </td>

      <td>
        L&apos;identifiant unique GUID de l&apos;entité du moniteur scripté dont vous souhaitez récupérer script.
      </td>
    </tr>
  </tbody>
</table>

### Exemple de requête

```graphql
{
  actor {
    account(id: ACCOUNT_ID) {
      synthetics {
        script(monitorGuid: "ENTITY_GUID") {
          text
        }
      }
    }
  }
}
```

## Étapes du moniteur de requête [#query-monitor-steps]

Cette requête récupère les étapes configurées pour un moniteur de pas. Step Monitor assure monitoring sans code et multi-étapes basée sur le navigateur grâce à une séquence d&apos;actions prédéfinies telles que la navigation, les clics, les entrées de formulaire et les assertions. Chaque étape possède une position ordinale, un type qui définit l&apos;action et des valeurs qui contiennent les données de configuration de l&apos;étape. Cette requête ne fonctionne qu&apos;avec le moniteur d&apos;étapes ; les autres types de moniteurs renverront une erreur car ils n&apos;utilisent pas de configuration par étapes.

### Paramètres d&apos;entrée

<table>
  <thead>
    <tr>
      <th>
        paramètres
      </th>

      <th>
        Type de données
      </th>

      <th>
        Est-ce obligatoire ?
      </th>

      <th>
        Description
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `id`

         (compte)
      </td>

      <td>
        Entier
      </td>

      <td>
        Oui
      </td>

      <td>
        L&apos;identifiant du compte New Relic qui contient le moniteur.
      </td>
    </tr>

    <tr>
      <td>
        `monitorGuid`
      </td>

      <td>
        Chaîne
      </td>

      <td>
        Oui
      </td>

      <td>
        L&apos;identifiant unique GUID de l&apos;entité du moniteur de pas dont vous souhaitez récupérer les pas.
      </td>
    </tr>
  </tbody>
</table>

### Exemple de requête

```graphql
{
  actor {
    account(id: ACCOUNT_ID) {
      synthetics {
        steps(monitorGuid: "ENTITY_GUID") {
          ordinal
          type
          values
        }
      }
    }
  }
}
```

## Requête pour mapper l&apos;ID du moniteur au GUID de l&apos;entité [#query-guid-mapping]

Cette requête récupère le GUID d&apos;entité pour un moniteur Synthétique à l&apos;aide de l&apos;ID du moniteur. Ceci est utile lorsque vous disposez de l&apos; legacy identifiant numérique de monitoring et que vous devez le convertir au format GUID d&apos;entité requis pour la plupart des opérations NerdGraph. L&apos;identifiant GUID de l&apos;entité est l&apos;identifiant moderne utilisé pour les mises à jour, les suppressions et autres tâches de gestion du moniteur, tandis que l&apos;identifiant du moniteur est l&apos;ancien identifiant numérique qui peut apparaître dans les URL ou les intégrations legacy.

### Paramètres d&apos;entrée

<table>
  <thead>
    <tr>
      <th>
        paramètres
      </th>

      <th>
        Type de données
      </th>

      <th>
        Est-ce obligatoire ?
      </th>

      <th>
        Description
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `query`
      </td>

      <td>
        Chaîne
      </td>

      <td>
        Oui
      </td>

      <td>
        La requête de recherche pour trouver le moniteur. Utilisez 

        `domainId = 'MONITOR_ID'`

         où MONITOR_ID est l&apos;ID numérique du moniteur que vous souhaitez trouver.
      </td>
    </tr>
  </tbody>
</table>

### Exemple de requête

```graphql
{
  actor {
    entitySearch(
      query: "(domainId = 'MONITOR_ID')"
    ) {
      results {
        entities {
          ... on SyntheticMonitorEntityOutline {
            guid
            name
            monitorId
          }
        }
      }
    }
  }
}
```

## État de mise à niveau de l&apos;exécution de la requête (tous les moniteurs) [#query-runtime-upgrade-all]

Cette requête récupère l&apos;état de tous les tests de mise à niveau d&apos;exécution pour legacy moniteur d&apos;exécution de votre compte. Ces tests permettent de vérifier si un moniteur utilisant des environnements d&apos;exécution plus anciens (comme Chrome 72 ou legacy API Node.js ) peut fonctionner avec succès sur des environnements d&apos;exécution plus récents (Chrome 100+ ou Node.js 16.10). Les résultats alimentent l&apos; [interface utilisateur des mises à niveau en cours d&apos;exécution](/docs/synthetics/synthetic-monitoring/using-monitors/runtime-upgrade-ui/) et vous aident à identifier les moniteurs prêts à être mis à niveau. Le résultat du test est stocké dans la tag `validationStatus` et si le test de mise à niveau a échoué, des informations d&apos;erreur détaillées sont disponibles dans la tag `validationError`.

### Paramètres d&apos;entrée

<table>
  <thead>
    <tr>
      <th>
        paramètres
      </th>

      <th>
        Type de données
      </th>

      <th>
        Est-ce obligatoire ?
      </th>

      <th>
        Description
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `query`
      </td>

      <td>
        Chaîne
      </td>

      <td>
        Oui
      </td>

      <td>
        La requête de recherche pour filtrer l&apos;entité. Utilisez 

        `domain = 'SYNTH' AND type = 'RUNTIME_VALIDATION'`

         pour récupérer tous les résultats des tests de mise à niveau en cours d&apos;exécution.
      </td>
    </tr>
  </tbody>
</table>

### Exemple de requête

```graphql
{
  actor {
    entitySearch(query: "domain = 'SYNTH' AND type = 'RUNTIME_VALIDATION'") {
      results {
        entities {
          accountId
          guid
          name
          tags {
            key
            values
          }
        }
      }
    }
  }
}
```

## Statut de mise à niveau de l&apos;exécution de la requête (moniteur spécifique) [#query-runtime-upgrade-specific]

Cette requête récupère l&apos;état d&apos;un test de mise à niveau d&apos;exécution pour un moniteur d&apos;exécution legacy spécifique à l&apos;aide de l&apos;ID du moniteur. Ceci est utile lorsque vous souhaitez vérifier l&apos;état de préparation à la mise à niveau d&apos;un moniteur particulier plutôt que de tous les moniteurs de votre compte. Le test vérifie si le moniteur peut s&apos;exécuter avec succès sur les environnements d&apos;exécution plus récents et ces résultats alimentent l&apos; [interface utilisateur des mises à niveau de l&apos;environnement d&apos;exécution](/docs/synthetics/synthetic-monitoring/using-monitors/runtime-upgrade-ui/). Le résultat du test est stocké dans la tag `validationStatus` et si le test de mise à niveau a échoué, des informations d&apos;erreur détaillées sont disponibles dans la tag `validationError`.

### Paramètres d&apos;entrée

<table>
  <thead>
    <tr>
      <th>
        paramètres
      </th>

      <th>
        Type de données
      </th>

      <th>
        Est-ce obligatoire ?
      </th>

      <th>
        Description
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `query`
      </td>

      <td>
        Chaîne
      </td>

      <td>
        Oui
      </td>

      <td>
        La requête de recherche pour filtrer l&apos;entité. Utilisez 

        `domain = 'SYNTH' AND type = 'RUNTIME_VALIDATION' AND domainId = 'MONITOR_ID'`

         où MONITOR_ID est l&apos;identifiant numérique du moniteur spécifique.
      </td>
    </tr>
  </tbody>
</table>

### Exemple de requête

```graphql
{
  actor {
    entitySearch(
      query: "domain = 'SYNTH' AND type = 'RUNTIME_VALIDATION' AND domainId = 'MONITOR_ID'"
    ) {
      results {
        entities {
          accountId
          guid
          name
          tags {
            key
            values
          }
        }
      }
    }
  }
}
```