---
title: Guide des bonnes pratiques pour les agents eBPF
tags:
  - New Relic solutions
  - Best practices guides
  - eBPF
metaDescription: Best practices to help you find problems faster and deliver a better experience to your customers with New Relic's eBPF solution.
freshnessValidatedDate: never
translationType: machine
---

L&apos;agent eBPF de New Relic utilise la technologie eBPF pour fournir des fonctionnalités APM dans un agent unique sans instrumentation de code. Cette approche renforce les équipes d&apos;ingénierie de plateforme en éliminant le besoin de coordination avec les équipes d&apos;application pour monitoring du déploiement.

## Quand utiliser un APM basé sur eBPF [#when-to-use-eapm]

* **Déploiement à grande échelle :** lorsque vous avez de nombreuses applications nécessitant monitoring à grande échelle et exigeant des indicateurs « suffisamment bons » sans la surcharge liée aux agents linguistiques individuels.
* **Charge de travail inconnue ou non modifiable :** lorsque la workload que vous souhaitez monitorer est écrite dans un langage de programmation inconnu et/ou ne peut pas être modifiée.
* **Efficacité de l&apos;ingénierie de plateforme :** lorsque vous souhaitez déployer monitoring à grande échelle sans coordination avec les équipes d&apos;application individuelles.
* **Environnements axés sur Linux :** lorsque vous n’avez pas besoin de monitorer la plateforme Windows, car eBPF fonctionne parfaitement sous Linux, aussi bien dans les environnements Kubernetes que dans les environnements hôtes.
* **Aucune exigence de tracing distribué :** lorsque vos besoins monitoring ne nécessitent pas de capacités de tracing distribué.

### Comparaison entre eBPF et APM traditionnel [#comparison]

Comprendre les différences entre les agents APM basés sur eBPF et les agents APM traditionnels vous aide à choisir la bonne approche :

<table>
  <thead>
    <tr>
      <th>
        Fonctionnalité
      </th>

      <th>
        Agent eBPF (eAPM)
      </th>

      <th>
        Agent APM
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        Résumé
      </td>

      <td>
        ✅
      </td>

      <td>
        ✅
      </td>
    </tr>

    <tr>
      <td>
        Transaction
      </td>

      <td>
        ✅ (liaison de segments pour Java, Go, Node.js)
      </td>

      <td>
        ✅
      </td>
    </tr>

    <tr>
      <td>
        opérations de base de données
      </td>

      <td>
        ✅
      </td>

      <td>
        ✅
      </td>
    </tr>

    <tr>
      <td>
        Cartographie des services
      </td>

      <td>
        ✅
      </td>

      <td>
        ✅
      </td>
    </tr>

    <tr>
      <td>
        Tracing distribué
      </td>

      <td>
        ❌
      </td>

      <td>
        ✅
      </td>
    </tr>

    <tr>
      <td>
        Indépendant du langage de programmation
      </td>

      <td>
        ✅
      </td>

      <td>
        ❌
      </td>
    </tr>

    <tr>
      <td>
        instrumentation personnalisée
      </td>

      <td>
        ❌
      </td>

      <td>
        ✅
      </td>
    </tr>

    <tr>
      <td>
        Découvrir automatiquement des applications et des services en continu
      </td>

      <td>
        ✅
      </td>

      <td>
        ❌
      </td>
    </tr>

    <tr>
      <td>
        Prise en charge de Linux
      </td>

      <td>
        ✅
      </td>

      <td>
        ✅
      </td>
    </tr>

    <tr>
      <td>
        Prise en charge de Windows
      </td>

      <td>
        ❌
      </td>

      <td>
        ✅
      </td>
    </tr>

    <tr>
      <td>
        Télémétrie TCP et DNS
      </td>

      <td>
        ✅
      </td>

      <td>
        ❌
      </td>
    </tr>
  </tbody>
</table>

### perspective de la source de données

L&apos;APM basé sur eBPF déplace la perspective monitoring de la couche application à la couche noyau :

<table>
  <thead>
    <tr>
      <th>
        Fonctionnalité
      </th>

      <th>
        Agent de langue APM
      </th>

      <th>
        APM alimenté par eBPF
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        Source des données
      </td>

      <td>
        Points d&apos;ancrage mémoire/d&apos;exécution de l&apos;application
      </td>

      <td>
        Noyau Linux (via eBPF)
      </td>
    </tr>

    <tr>
      <td>
        dépendance linguistique
      </td>

      <td>
        Élevé (nécessite un agent spécifique pour chaque langue)
      </td>

      <td>
        Aucun (opère au niveau du noyau pour la vue du processus)
      </td>
    </tr>

    <tr>
      <td>
        Modification du code
      </td>

      <td>
        Requis
      </td>

      <td>
        Non requis (observe le processus de l&apos;extérieur)
      </td>
    </tr>

    <tr>
      <td>
        Résultat
      </td>

      <td>
        Informations approfondies et détaillées pour les langues connues
      </td>

      <td>
        Excellentes informations détaillées pour toute workload sous Linux (C++, Rust, etc.)
      </td>
    </tr>
  </tbody>
</table>

## bonnes pratiques pour déployer [#deployment-best-practices]

### 1. Compléter le modèle APM traditionnel

Utilisez l&apos;agent eBPF en complément des agents de langage APM pour une couverture complète. Cela vous offre une couverture APM complète avec coexistence entre les agents eAPM et APM, sans double ingestion de données.

**Approche recommandée :**

* **Agents de langage APM :** à utiliser pour vos applications les plus critiques qui nécessitent des informations détaillées, un tracing distribué ou une instrumentation personnalisée de niveau approfondi.
* **APM basé sur eBPF :** à utiliser pour couvrir tout le reste, y compris les services non instrumentés, les applications tierces et pour la découverte/le signalement continu de nouveaux services.

### 2. Ajoutez des métriques de réseau pour un contexte plus approfondi

<Callout title="Aperçu">
  Nous travaillons encore sur la fonctionnalité de métriques réseau eBPF, mais nous serions ravis que vous l&apos;essayiez !

  Cette fonctionnalité est actuellement fournie dans le cadre d&apos;un aperçu conformément à nos [politiques de pré-sortie](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy/). Il n&apos;est pas disponible pour les clients soumis aux réglementations HIPAA ou FedRAMP.
</Callout>

L&apos;agent eBPF peut également fournir des métriques réseau granulaires (TCP, DNS, etc.) pour vous offrir une visibilité en dehors des limites de votre application. Cette fonctionnalité est complémentaire et peut être utilisée avec ou sans eAPM. Pour plus d&apos;informations, reportez-vous à [réseau-métriques](/docs/ebpf/network-metrics/).

Les options de déploiement suivantes sont disponibles :

<table>
  <thead>
    <tr>
      <th>
        Application métrique source
      </th>

      <th>
        Réseau métrique source
      </th>

      <th>
        Configuration
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        Agent de langue APM
      </td>

      <td>
        Agent eBPF (mode métriques réseau uniquement)
      </td>

      <td>
        Deux agents
      </td>
    </tr>

    <tr>
      <td>
        Agent eBPF (eAPM)
      </td>

      <td>
        Agent eBPF (même agent)
      </td>

      <td>
        Agent unique
      </td>
    </tr>
  </tbody>
</table>

### 3. Créer une approche monitoring unifiée

En suivant les pratiques ci-dessus, vous pouvez utiliser un seul agent eBPF pour gérer à la fois les besoins infrastructure et monitoring des applications. Cela unifie votre observabilité, permettant à l&apos;agent de collecter automatiquement les données critiques de performance des applications (eAPM) et les métriques réseau (métriques réseau eBPF) pour alimenter les dashboards existants, fournissant un contexte approfondi sans modifications de code ni redémarrages.

**Avantages:**

* Informations APM détaillées qui remplissent automatiquement l&apos;interface utilisateur New Relic APM.
* Informations réseau détaillées du même agent.

## Recommandations de mise en œuvre [#implementation-recommendations]

* **Commencez par eAPM pour la mise à l&apos;échelle :** si vous devez déployer monitoring à grande échelle sur de nombreuses applications et souhaitez des métriques « suffisamment bonnes » sans coordination complexe, commencez par l&apos;APM alimenté par eBPF.

* **Ajoutez des métriques réseau pour une visibilité complète :** une fois eAPM déployé, envisagez d&apos;ajouter des métriques réseau eBPF pour gagner en visibilité au-delà des limites de l&apos;application pour des capacités de dépannage complètes.

## Articles connexes [#related-articles]

<DocTiles>
  <DocTile title="Installation eBPF Kubernetes" path="/docs/ebpf/k8s-installation/">
    Découvrez comment configurer l&apos;agent New Relic eBPF pour votre cluster Kubernetes.
  </DocTile>

  <DocTile title="Installation Linux eBPF" path="/docs/ebpf/linux-installation/">
    Découvrez comment configurer l&apos;agent New Relic eBPF pour votre hôte Linux.
  </DocTile>

  <DocTile title="dépannage eBPF" path="/docs/ebpf/troubleshooting/no-ui-data/">
    Apprenez à résoudre les problèmes liés à l&apos;agent New Relic eBPF.
  </DocTile>
</DocTiles>