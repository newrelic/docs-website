---
title: Métriques du réseau eBPF
metaDescription: Learn how to configure New Relic eBPF network monitoring dashboard.
tags:
  - Integrations
  - eBPF integration
  - eAPM
  - eBPF Network monitoring
  - extended Berkeley Packet Filter (eBPF)
  - Linux host
  - Kubernetes cluster
freshnessValidatedDate: never
translationType: machine
---

<Callout title="Aperçu">
  Nous travaillons toujours sur cette fonctionnalité, mais nous aimerions que vous l&apos;essayiez !

  Cette fonctionnalité est actuellement fournie dans le cadre d&apos;un aperçu conformément à nos [politiques de pré-sortie](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy/). Il n&apos;est pas disponible pour les clients soumis aux réglementations HIPAA ou FedRAMP.
</Callout>

Le réseau monitoring eBPF offre une visibilité approfondie sur l&apos;état de santé du réseau de votre système en suivant les indicateurs DNS et TCP critiques directement depuis le noyau. Vous pouvez diagnostiquer les problèmes de connectivité en analysant les taux de réussite et d&apos;échec des résolutions DNS et des connexions TCP. Déterminer les performances du goulot d&apos;étranglement en monitoring la latence clé comme les échanges TCP, la livraison des paquets et la durée des connexions de courte durée. Le dashboard vous aide également à suivre le débit de données en visualisant les octets envoyés, reçus et les paquets perdus.

## Options de déploiement [#deployment-options]

Vous pouvez activer les métriques réseau eBPF de deux manières en fonction de votre configuration monitoring actuelle :

* **Pour les clients New Relic APM existants :** si vous avez déjà déployé des agents New Relic APM, vous pouvez ajouter des métriques réseau eBPF à votre instrumentation existante. L&apos;agent eBPF fonctionne en mode réseau uniquement, complétant vos données APM avec des informations réseau détaillées au niveau du noyau sans perturber votre configuration actuelle.

* **Pour monitoring complète :** déployez l&apos;agent eBPF complet avec les capacités eAPM et de métriques réseau pour une observabilité complète sur les couches application, infrastructure et réseau. Cette approche permet une collecte télémétrique unifiée via un agent unique.

Les deux options de déploiement offrent les mêmes capacités de réseau monitoring décrites ci-dessous.

## capacités du réseau monitoring [#network-capabilities]

Le dashboard des métriques réseau comporte les onglets suivants pour monitorer différents aspects des performances du réseau :

* **Erreurs :** Affiche les erreurs DNS, TCP et autres erreurs liées au réseau.
* **Latence :** latence clé du moniteur, comme les échanges TCP, la livraison des paquets et la durée des connexions de courte durée.
* **Perte de paquets :** enregistre tous les paquets perdus lors de la transmission. Il contient également des informations telles que les paquets du noyau abandonnés, les délais d&apos;expiration de la connexion TCP et les paquets retransmis.
* **Indicateurs TCP :** Affiche les indicateurs d’état des connexions TCP pour le trafic entrant et sortant.
* **Connexions :** Affiche les connexions TCP entrantes et sortantes, le nombre de connexions, la durée moyenne des connexions et la durée maximale des connexions.

## S&apos;inscrire au réseau monitoring eBPF [#enroll-pp]

Vous pouvez vous inscrire au réseau monitoring eBPF depuis la page <DNT>**Preview &amp; Trials**</DNT> :

1. Allez à <DNT>**[one.newrelic.com &gt; Administration](https://one.newrelic.com/admin-portal)**</DNT>.
2. Dans le menu de navigation de gauche, cliquez sur <DNT>**Preview &amp; Trials**</DNT>.
3. Dans la liste des fonctionnalités d’aperçu disponibles, cliquez sur <DNT>**eBPF network monitoring**</DNT>.
4. Suivez les instructions à l&apos;écran et acceptez les conditions générales pour terminer votre intégration. Vous pouvez désormais découvrir les nouvelles fonctionnalités monitoring réseau eBPF depuis l&apos;APM.

## Activer le mode « métriques réseau uniquement » pour les clients APM existants [#network-only-mode]

Si vous avez déjà déployé des agents New Relic APM et que vous souhaitez ajouter une visibilité réseau sans perturber votre instrumentation actuelle, vous pouvez configurer l&apos;agent eBPF pour qu&apos;il fonctionne en mode « métriques réseau uniquement ». Cela fournit des informations réseau détaillées au niveau du noyau qui complètent vos données APM existantes.

Avec le mode réseau métriques uniquement activé, l&apos;agent eBPF collectera et rapportera les données télémétriques du réseau tout en supprimant la collecte de données eAPM. Cela vous permet de conserver votre instrumentation APM existante tout en bénéficiant d&apos;une visibilité supplémentaire au niveau de la couche réseau.

### Pour l&apos;environnement Kubernetes [#k8s-env]

<CollapserGroup>
  <Collapser className="freq-link" id="k8s-new" title="Nouvelle installation">
    Exécutez la commande suivante pour activer le mode « métriques réseau uniquement » dans les nouvelles installations Kubernetes :

    ```bash
    KSM_IMAGE_VERSION="v2.13.0" && helm repo add newrelic https://helm-charts.newrelic.com && helm repo update && kubectl create namespace "newrelic" ; helm upgrade --install nr-ebpf-agent newrelic/nr-ebpf-agent --set licenseKey=<your-license-key> --set cluster="cluster-name-ebpf" --set apmDataReporting=false --namespace=newrelic
    ```
  </Collapser>

  <Collapser className="freq-link" id="k8s-existing" title="Installation existante">
    Suivez les étapes ci-dessous pour activer le mode « métriques réseau uniquement » dans les installations Kubernetes existantes :

    1. Ajoutez la clé `apmDataReporting` suivante avec la valeur `false` à votre fichier `values.yaml` :

       ```yaml
       apmDataReporting: false
       ```

    2. Appliquer la configuration :

       ```bash
           helm repo update ; helm upgrade --install nr-ebpf-agent newrelic/nr-ebpf-agent -n newrelic --values values.yaml
       ```
  </Collapser>
</CollapserGroup>

### Environnement hôte Linux [#linux-env]

<CollapserGroup>
  <Collapser className="freq-link" id="linux-new" title="Nouvelle installation">
    Exécutez la commande suivante pour activer le mode « métriques réseau uniquement » dans les nouvelles installations hôtes Linux :

    ```bash
    curl -Ls https://download.newrelic.com/install/newrelic-cli/scripts/install.sh | sudo bash && sudo DEPLOYMENT_NAME=<deployment-name> NEW_RELIC_API_KEY=<your-api-key> NEW_RELIC_ACCOUNT_ID=<your-account-id> NEW_RELIC_REGION=US NEW_RELIC_CLI_SKIP_CORE=1 /usr/local/bin/newrelic install -n ebpf-agent-installer
    ```
  </Collapser>

  <Collapser className="freq-link" id="linux-existing" title="Installation existante">
    Suivez les étapes ci-dessous pour activer le mode « métriques réseau uniquement » sur les installations hôtes Linux existantes :

    1. Ajoutez la clé `apmDataReporting` suivante avec la valeur `false` à votre fichier `newrelic-ebpf-agent.conf` :

       ```bash
       APM_DATA_REPORTING="false"
       ```

    2. Redémarrez les services de l&apos;agent eBPF :

       ```bash
       sudo systemctl restart newrelic-ebpf-agent
       sudo systemctl restart newrelic-ebpf-agent-client
       ```
  </Collapser>
</CollapserGroup>

## Consultez les données du réseau monitoring eBPF [#view-network-data]

Vous pouvez consulter les données du réseau monitoring eBPF dans l&apos;interface utilisateur New Relic APM :

1. Accédez à **[one.newrelic.com](https://one.newrelic.com) &gt; APM &amp; Services**.
2. Sélectionnez l&apos;entité eBPF souhaitée.
3. Dans la section moniteur, cliquez sur **Network Metrics**. Les métriques du réseau s&apos;affichent.

<Callout variant="tip">
  L&apos;agent eBPF génère automatiquement des noms d&apos;entités différemment selon l&apos;environnement :

  * Dans les hôtes ou Docker, ces noms sont une combinaison du nom du processus, de son répertoire ou de son ID de conteneur et du port d&apos;écoute. Par exemple, `ruby:/home/ubuntu/app:[5678]` ou `java:f4aead533895:[8080]`.

  * Dans Kubernetes, ces noms sont dérivés du nom du service, par exemple, `mysql-database-service`.

  Attribution d&apos;un nom personnalisé aux applications :

  * Vous pouvez attribuer un nom de votre choix à votre application en définissant la variable d&apos;environnement `NEW_RELIC_APP_NAME` pour les applications conteneurisées et sur hôte Docker.

  * L&apos;application nommée apparaîtra dans l&apos;interface utilisateur de New Relic avec le suffixe `-ebpf`.
</Callout>

<DocTiles>
  <DocTile title="Installation eBPF Kubernetes" path="/docs/ebpf/k8s-installation/">
    Découvrez comment configurer l&apos;agent New Relic eBPF pour votre cluster Kubernetes.
  </DocTile>

  <DocTile title="Installation Linux eBPF" path="/docs/ebpf/linux-installation/">
    Découvrez comment configurer l&apos;agent New Relic eBPF pour votre hôte Linux.
  </DocTile>

  <DocTile title="dépannage eBPF" path="/docs/ebpf/troubleshooting/no-ui-data/">
    Apprenez à résoudre les problèmes liés à l&apos;agent New Relic eBPF.
  </DocTile>
</DocTiles>