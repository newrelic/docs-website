---
title: Planifier les recherches NRQL
tags:
  - NRQL
  - Scheduled searches
  - Query scheduling
  - Automated queries
  - Email notifications
  - Workflow automation
metaDescription: 'Schedule automated NRQL queries to receive regular updates on your data via email. Transform repetitive, manual queries into proactive, automated workflows.'
freshnessValidatedDate: never
translationType: machine
---

En tant qu&apos;utilisateur de New Relic, vous pouvez exécuter la même requête NRQL à plusieurs reprises pour monitorer des modèles critiques, vérifier des conditions spécifiques ou générer des rapports réguliers. Par exemple, vous devez vérifier quotidiennement les transactions ayant échoué, monitorer le taux d&apos;erreur hebdomadaire ou suivre les indicateurs de performance horaires de vos applications. Ce processus manuel est chronophage et il est facile de manquer des informations importantes détaillées lorsque vous ne monitoring pas activement.

Les recherches NRQL planifiées résolvent ce problème en automatisant vos requêtes répétitives. Vous pouvez programmer l&apos;exécution automatique des requêtes et recevoir les résultats par e-mail, ce qui vous permettra de rester informé des tendances critiques sans monitoring manuelle constante.

<Callout title="Aperçu">
  Nous travaillons toujours sur cette fonctionnalité, mais nous aimerions que vous l&apos;essayiez !

  Cette fonctionnalité est actuellement fournie dans le cadre d&apos;un programme d&apos;aperçu conformément à nos [politiques de pré-lancement](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy). Pendant la période d&apos;aperçu, cette fonctionnalité est accessible via l&apos;[interface utilisateur Logs](/docs/logs/ui-data/use-logs-ui), avec des projets d&apos;extension à d&apos;autres capacités après la disponibilité générale.
</Callout>

## Ce que vous pouvez faire [#features]

Les recherches NRQL planifiées vous permettent de :

* **Automatisez les requêtes répétitives**: convertissez les requêtes manuelles en flux de travail automatisés qui s’exécutent selon votre planification.
* **Restez informé de manière proactive**: recevez des notifications par e-mail avec les résultats de vos requêtes directement dans votre boîte de réception.
* **Planification flexible**: utilisez des planifications d’expressions cron personnalisées pour définir le moment d’exécution des requêtes.
* **Formats de sortie multiples**: Exportez les résultats sous forme de fichiers CSV ou JSON joints à la notification par e-mail.
* **Collaboration en équipe**: Envoyer les résultats de recherche programmés à plusieurs destinataires par e-mail.
* **Gestion centralisée**: Consultez, modifiez et gérez toutes vos recherches planifiées depuis un seul et même endroit dans l&apos;interface d&apos;administration.

## Prérequis [#prerequisites]

Pour utiliser les recherches NRQL planifiées, vous avez besoin de :

* **Permissions utilisateur**: les autorisations [Workflow Automation](/docs/workflow-automation/create-a-workflow-automation/managing-workflow/#before-you-begin) sont requises pour créer et gérer les recherches planifiées.
* **Accès au compte**: Accès au compte sur lequel vous souhaitez programmer des recherches.
* **Accès aux données**: Autorisations appropriées pour interroger les données que vous souhaitez planifier. Par exemple, si vous planifiez une requête sur des données log, vous devez avoir accès à ces logs.

<Callout variant="important">
  Les recherches NRQL planifiées sont construites sur infrastructure d&apos;automatisation des flux de travail de New Relic. Votre organisation a besoin des autorisations appropriées pour créer et gérer les flux de travail.
</Callout>

## Planifier une nouvelle recherche [#create-schedule]

Pour programmer une nouvelle recherche NRQL automatisée :

<Steps>
  <Step>
    **Accéder aux recherches programmées**:

    1. Rendez-vous sur **[one.newrelic.com](https://one.newrelic.com) &gt; Administration &gt; Scheduled Searches**.
    2. Pour configurer une nouvelle recherche, depuis la page <DNT>**Scheduled Searches**</DNT>, cliquez sur **Schedule a search**.
  </Step>

  <Step>
    **Configurez votre requête**:

    1. Dans la fenêtre de configuration, rédigez votre requête NRQL en utilisant la syntaxe NRQL standard.
    2. Testez votre requête pour vous assurer qu&apos;elle renvoie les résultats attendus.
    3. Pour configurer les paramètres de notification de la recherche planifiée, cliquez sur **Continue**.
  </Step>

  <Step>
    **Configurer notification**:

    <img title="Notification setup" alt="screenshot of notification setup" src="/images/nrql_scheduled-query_-set-up-notification.webp" />

    <figcaption>
      Cette visualisation illustre la configuration notification pour une requête NRQL planifiée.
    </figcaption>

    1. Saisissez un nom pour votre recherche programmée.

    2. Ajoutez une description facultative pour aider à identifier l&apos;objectif de la recherche.

    3. Définissez une [destination](/docs/alerts/get-notified/destinations/) pour recevoir les résultats de la requête. Actuellement, vous ne pouvez envoyer les résultats que par e-mail.

       <CollapserGroup>
         <Collapser id="existing destination-destination" title="Sélectionnez une destination existante">
           Dans la liste déroulante, vérifiez les destinations existantes. Chaque destination peut être associée à un groupe d&apos;adresses électroniques. Choisissez une ou plusieurs destinations pour recevoir les résultats de la requête. Si la destination souhaitée n&apos;est pas répertoriée, vous pouvez en créer une nouvelle.
         </Collapser>

         <Collapser id="new-destination" title="Ajouter une nouvelle destination">
           Cliquez sur <DNT>**+ Add destination**</DNT> et effectuez les étapes suivantes dans la fenêtre modale ouverte :

           1. Cliquez sur <DNT>**+ Add email**</DNT>, recherchez les destinataires par adresse e-mail ou nom d&apos;utilisateur, et ajoutez-les.
           2. Saisissez un nom unique pour la destination et enregistrez.

           La nouvelle destination est ajoutée à la liste des destinations disponibles dans la fenêtre modale de configuration notification. Pour modifier la destination, sélectionnez le <Icon name="fe-more-horizontal" /> menu.
         </Collapser>
       </CollapserGroup>

    4. Veuillez saisir un objet et un corps de message pour la notification par e-mail.

    5. Sélectionnez le format de résultat de requête que vous souhaitez inclure dans l&apos;e-mail.

    6. Pour programmer l&apos;envoi des notifications par e-mail, cliquez sur **Continue**.
  </Step>

  <Step>
    **Établissez un calendrier**:

    Actuellement, il ne prend en charge que les expressions cron. Voici quelques exemples courants d&apos;expressions cron à titre de référence. Saisissez une expression cron et cliquez sur <DNT>**Continue**</DNT>.

    * `0 * * * *` - Chaque heure pile

    * `0 9 * * *` - Tous les jours à 9h00

    * `0 9 * * 1` - Tous les lundis à 9h00

    * `0 0 1 * *` - Le premier jour de chaque mois à minuit

    * `*/15 * * * *` - Toutes les 15 minutes

    * `0 9 * * 1-5` - Tous les jours de la semaine à 9h00

      /\* 1. Choisissez une fréquence pour votre recherche (par exemple, horaire, quotidienne, hebdomadaire ou \[expression cron]\(#cron-examples)). 2. Définissez l&apos;heure de début de votre recherche en fonction du fuseau horaire. 3. Définissez l’\*\*heure de début\*\* et l’\*\*heure de fin\*\* de la recherche. 4. Choisissez l&apos;une des conditions suivantes pour envoyer la notification : \* &lt;DNT&gt;\*\*À chaque exécution\*\*&lt;/DNT&gt;: Recevez une notification à chaque fois que la recherche est exécutée. \* &lt;DNT&gt;\*\*On result count &gt; 0\*\*&lt;/DNT&gt;: Recevoir une notification uniquement lorsque la recherche renvoie des résultats. \*/
  </Step>

  <Step>
    **Examinez, confirmez et planifiez la recherche**: Vérifiez votre configuration. Si vous devez effectuer d&apos;autres ajustements, revenez à l&apos;étape correspondante. Après avoir finalisé votre configuration, cliquez sur <DNT>**Schedule**</DNT> pour créer votre recherche automatisée. La page <DNT>**Scheduled searches**</DNT> affichera votre nouvelle recherche dans la liste.
  </Step>
</Steps>

## Gérer les recherches planifiées [#manage]

La page <DNT>**Scheduled searches**</DNT> de l&apos;interface utilisateur d&apos;administration affiche toutes vos recherches automatisées avec leur nom, leur description, leur planification, leur statut et leurs prochains temps d&apos;exécution. Depuis <Icon name="fe-more-horizontal" /> tu peux:

* **Modifiez une recherche** pour mettre à jour la requête, la planification, les paramètres de notification ou le format de sortie.
* **Supprimer une recherche**.

## Quelle est la prochaine étape ? [#whats-next]

Maintenant que vous avez configuré les recherches NRQL planifiées :

* [Apprenez-en davantage sur les requêtes NRQL ](/docs/nrql/get-started/introduction-nrql-new-relics-query-language)pour créer des recherches automatisées plus sophistiquées.
* [Configurez les destinations des e-mails d&apos;alerte](/docs/alerts-applied-intelligence/notifications/destinations) pour étendre vos options de notification.
* [Explorez l&apos;automatisation workflow ](/docs/alerts-applied-intelligence/applied-intelligence/incident-workflows/incident-workflows)pour des possibilités d&apos;automatisation plus avancées.