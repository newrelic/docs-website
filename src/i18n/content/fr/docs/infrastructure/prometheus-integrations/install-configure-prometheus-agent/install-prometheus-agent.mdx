---
title: Installer et configurer l'agent Prometheus sur le cluster Kubernetes
tags:
  - Integrations
  - Prometheus integrations
  - Install and configure Prometheus agent
metaDescription: 'How to install, update, or uninstall your New Relic Prometheus agent alongside the Kubernetes integration.'
freshnessValidatedDate: never
translationType: machine
---

L'agent Prometheus de New Relic est un wrapper mince sur le serveur Prometheus pour l'exécuter en mode agent. Avec cette intégration, vous pouvez créer un fichier de configuration YAML utilisé par Prometheus qui est prêt à envoyer des métriques à New Relic.

Apprenez-en plus sur la solution à partir de [son référentiel](https://github.com/newrelic/newrelic-prometheus-configurator).

## Installer l'agent Prometheus [#install-agent]

Vous pouvez installer l'agent Prometheus dans le cadre de l'intégration Kubernetes ou seul.

### Parallèlement à l'intégration de Kubernetes [#kubernetes-install]

Vous pouvez installer notre [intégrationKubernetes ](/docs/kubernetes-pixie/kubernetes-integration/get-started/introduction-kubernetes-integration)pour obtenir une observabilité complète de votre cluster Kubernetes, qui inclut l&amp;apos;agent Prometheus .

1. Installez notre intégration Kubernetes. Découvrez comment l'installer [ici](/install/kubernetes).

   <Callout variant="tip">
     Nous proposons également des instructions manuelles pour [déployer notre intégration à l'aide de Helm](/docs/kubernetes-pixie/kubernetes-integration/installation/install-kubernetes-integration-using-helm).

     Vous devez activer l'agent Prometheus en définissant l'option `newrelic-prometheus-agent.enabled=true` .
   </Callout>

2. Pour vous assurer que l'intégration a été configurée correctement, accédez à <DNT>**[one.newrelic.com](https://one.newrelic.com) &amp;gt; All capabilities &amp;gt; Query your data**</DNT> et exécutez cette requête NRQL pour voir si des données ont été signalées :

   ```sql
   FROM Metric SELECT count(*) WHERE collector.name = 'prometheus-agent' AND cluster_name = 'YOUR_CLUSTER_NAME' since 1 hour ago
   ```

<Callout variant="tip">
  Si vous ne voyez pas vos données immédiatement, attendez quelques secondes. Les données peuvent prendre un certain temps pour parvenir à New Relic.
</Callout>

### Installation autonome [#prometheus-install]

Si vous n’avez pas besoin de l’intégration Kubernetes, vous pouvez installer l’agent Prometheus seul.

1. Installez l' [agent Prometheus](https://github.com/newrelic/newrelic-prometheus-configurator#readme) en exécutant :

   ```shell
   helm repo add newrelic-prometheus https://newrelic.github.io/newrelic-prometheus-configurator
   helm upgrade --install newrelic newrelic-prometheus/newrelic-prometheus-agent -f YOUR_CUSTOM_VALUES.yaml
   ```

2. Pour vous assurer que l'intégration a été configurée correctement, accédez à <DNT>**[one.newrelic.com](https://one.newrelic.com) &amp;gt; All capabilities &amp;gt; Query your data**</DNT> et exécutez cette requête NRQL pour voir si des données ont été signalées :

   ```sql
   FROM Metric SELECT count(*) WHERE collector.name = 'prometheus-agent' since 1 hour ago
   ```

## Installer le Prometheus de l'agent dashboard [#io-dashboard]

Que vous ayez installé l'intégration Kubernetes ou uniquement l'agent Prometheus , nous vous proposons également un dashboard organisé pour les auto-métriques avec des informations sur les performances et l'état de santé, ainsi que le volume de métriques envoyées.

Avec ce dashboard, vous obtenez des informations détaillées et significatives sur vos métriques Prometheus et votre agent Prometheus , telles que :

* Échantillons envoyés par la source
* Métriques uniques par source
* Séries chronologiques par source
* Séries chronologiques par métrique (cardinalité)
* Consommation de mémoire et de CPU
* cible Impossible de gratter
* Nombre total d'instances par cluster

Installez le [dashboard de l'agent Prometheus ](https://newrelic.com/instant-observability/prometheus-agent)dans votre compte New Relic.

<img title="Quickstart dashboard for the Prometheus agent" alt="Quickstart dashboard for the Prometheus agent" src="/images/infrastructure_screenshot-crop_prometheus-io-dashboard.webp" />

<figcaption>
  Installez le quickstart contenant le [dashboard de l'agent Prometheus ](https://newrelic.com/instant-observability/prometheus-agent).
</figcaption>