---
title: Intégration via CloudFormation et flux de métriques CloudWatch
tags:
  - Integration via CloudFormation
  - AWS metric integration
  - Amazon integrations
  - AWS integrations
  - Integration with CloudWatch Metric Streams via CloudFormation
metaDescription: Integrate New Relic with AWS services using CloudFormation templates to automate the setup of CloudWatch Metric Streams for metrics ingestion.
freshnessValidatedDate: never
translationType: machine
---

Pour une intégration transparente de votre compte AWS avec New Relic, il s&apos;agit du processus d&apos;intégration le plus recommandé. Vous pouvez utiliser l&apos;interrogation API pour les services non pris en charge par flux de métriques CloudWatch.

## Prérequis [#prerequisites]

Avant de commencer à intégrer votre compte AWS à New Relic, assurez-vous de remplir les conditions préalables suivantes :

* **Une [clé de licence New Relic Ingest et une clé utilisateur](https://one.newrelic.com/api-keys)**: vous aurez besoin de ces clés pour connecter vos services AWS à votre compte New Relic.
* **[Autorisations](https://docs.aws.amazon.com/ARG/latest/userguide/gettingstarted-prereqs-permissions.html)** pour déployer de nouvelles ressources AWS et **[rôles IAM](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles.html)**: vous aurez besoin de cette autorisation pour votre compte AWS.
* **[Autorisations](/docs/accounts/accounts-billing/new-relic-one-user-management/user-permissions/#infrastructure)** pour l&apos;intégration cloud: vous aurez besoin de ces autorisations pour votre compte New Relic.

## Étapes d&apos;intégration [#integration-steps]

Pour intégrer votre compte AWS à New Relic à l&apos;aide de CloudFormation et de flux de métriques CloudWatch, suivez ces étapes :

1. Accédez à [<DNT>**Infrastructure &gt; AWS**</DNT>](https://one.newrelic.com/infra/infrastructure/cloud-aws).

2. Sélectionnez le bon compte.

3. Cliquez sur <DNT>**Set up integration**</DNT>.

4. Suivez les instructions sur chaque écran et remplissez les champs qui vous concernent. Pour cette intégration, choisissez les options suivantes dans les écrans donnés :

   1. <DNT>**Choose Data type(s)**</DNT>: <DNT>Metrics</DNT>
   2. <DNT>**Choose a setup method**</DNT>: <DNT>Automate AWS with CloudFormation (Recommended)</DNT>
   3. <DNT>**Choose a metrics integration type**</DNT>: <DNT>CloudWatch Metric Stream (Recommended)</DNT>

5. Si vous utilisez l&apos;un des services qui ne sont pas pris en charge dans flux de métriques CloudWatch, sur la page <DNT>**Choose a metrics integration type**</DNT>, sélectionnez <DNT>**Yes**</DNT> à la troisième étape pour l&apos;interrogation de l&apos;API et continuez.

   <img title="AWS Integration with CWMS and API Polling" alt="AWS Integration with CWMS and API Polling" src="/images/aws-integration-cf-apipolling.webp" />

   <figcaption>
     Intégration CWMS des services AWS avec interrogation API sélectionnée pour les services non pris en charge.
   </figcaption>

   Effectuez la configuration nécessaire comme indiqué sur la page <DNT>**Enable API Polling (optional)**</DNT> et continuez.

6. <DNT>Auto-discovery</DNT> détecte et visualise automatiquement les relations entre vos entités AWS sur des cartes et exploite quelques autres flexibilités. Pour plus de détails, reportez-vous [à Découverte automatique de l&apos;entité AWS](/docs/infrastructure/amazon-integrations/connect/set-up-auto-discovery-of-aws-entities/). Si vous souhaitez cette fonctionnalité, activez-la sur la page <DNT>**Enable Auto Discovery (optional)**</DNT> et continuez.

7. Cliquez sur <DNT>**Launch your CloudFormation in AWS**</DNT>. Le modèle CloudFormation s&apos;ouvre dans votre console AWS avec les paramètres configurés en fonction de vos sélections dans New Relic. Aucune modification supplémentaire n&apos;est donc nécessaire, sauf si vous souhaitez apporter des modifications.

8. Collez la clé de licence Ingest et la clé utilisateur dans votre console AWS.

<Callout variant="tip">
  Pour obtenir des métadonnées supplémentaires à partir de vos services AWS, activez <DNT>**AWS Config**</DNT> depuis la console AWS.
</Callout>

10. Pour déployer la stack CloudFormation, dans la console AWS, sélectionnez <DNT>**Create stack**</DNT>. La création des ressources stack peut prendre plusieurs minutes et peut générer plusieurs piles, selon la façon dont vous configurez le transfert des métriques. Si la création de la pile échoue, reportez-vous à la [procédure de dépannage](https://docs.newrelic.com/docs/logs/troubleshooting/aws-log-integration-issues/stack-creation-fails/).

11. Après une création stack réussie, passez à la plateforme New Relic et continuez l&apos;intégration guidée jusqu&apos;à ce que vous voyiez vos données AWS dans New Relic.

## Sujets connexes [#related-topics]

<DocTiles>
  <DocTile title="Collecter des données à partir de plusieurs comptes AWS" path="/docs/infrastructure/amazon-integrations/manage-aws-data/aws-multi-account/">
    Découvrez comment collecter des données à partir de plusieurs comptes AWS.
  </DocTile>

  <DocTile title="Métriques d'intégration AWS" path="/docs/infrastructure/amazon-integrations/manage-aws-data/aws-integrations-metrics/">
    Explorez et utilisez les métriques du flux de métriques CloudWatch.
  </DocTile>

  <DocTile title="Intégration AWS via CloudFormation et API Polling" path="/docs/infrastructure/amazon-integrations/aws-integration-for-metrics/via-cloudformation-and-api-polling">
    Intégrez les services AWS à New Relic à l’aide de CloudFormation et d’API Polling.
  </DocTile>

  <DocTile title="Intégration AWS via Terraform" path="/docs/infrastructure/amazon-integrations/aws-integration-for-metrics/terraform">
    Intégrez les services AWS avec New Relic à l’aide de Terraform.
  </DocTile>

  <DocTile title="Intégration manuelle depuis la console AWS" path="/docs/infrastructure/amazon-integrations/aws-integration-for-metrics/manual">
    Intégrez manuellement les services AWS avec New Relic depuis la console AWS.
  </DocTile>
</DocTiles>