---
title: Paramètres de configuration de l'agent d'infrastructure
tags:
  - Infrastructure
  - Install the infrastructure agent
  - Configuration
metaDescription: 'Configuration settings for the New Relic infrastructure agent, including YAML and environment variable names, value, minimum agent version.'
freshnessValidatedDate: never
translationType: machine
---

L&apos;agent d&apos;infrastructure dispose d&apos;un large ensemble de [paramètres de configuration pour affiner son comportement](/docs/infrastructure/new-relic-infrastructure/configuration/configure-infrastructure-agent). Ici nous :

* Répertoriez toutes les options de configuration (dans leur YAML et dans les noms des variables d’environnement).
* Expliquez à quoi servent les paramètres et quand les utiliser.
* Donnez le type de variable et la valeur par défaut (le cas échéant).
* Indiquez la version minimale requise de l&apos;agent, le cas échéant.

<Callout variant="important">
  Avec la gestion des secrets, vous pouvez configurer l&apos;intégration de l&apos;agent sur hôte avec infrastructure pour utiliser des données sensibles (telles que les mots de passe) sans avoir à les écrire en texte brut dans le fichier configuration de l&apos;intégration. Pour plus d&apos;informations, voir [Gestion des secrets](/docs/integrations/host-integrations/installation/secrets-management).
</Callout>

Toujours sans compte New Relic ? [Inscrivez-vous](https://newrelic.com/signup) gratuitement, pour toujours.

## Démarrer [#requirements]

Vous pourrez configurer notre agent d&apos;infrastructure en fonction de votre environnement après avoir [créé un compte New Relic](https://newrelic.com/signup) (c&apos;est gratuit, pour toujours) et [installé l&apos;agent d&apos;infrastructure](/docs/infrastructure/install-infrastructure-agent/get-started/install-infrastructure-agent/).

Le [`license_key`](#license-key) est le seul paramètre requis.

Pour un exemple de la manière dont toutes ces variables peuvent être utilisées, consultez notre [exemple de modèle de configuration dans GitHub](https://github.com/newrelic/infrastructure-agent/blob/master/assets/examples/infrastructure/newrelic-infra-template.yml.example).

## Variables d&apos;environnement

De nombreuses options de configuration répertoriées admettent également l’utilisation de variables d’environnement pour définir des valeurs, qui ont priorité sur la configuration YAML.

<Callout variant="important">
  Souvent, l&apos;agent d&apos;infrastructure s&apos;exécute en tant que service système dans l&apos;hôte, géré globalement (par exemple `systemd` pour Linux, les services Windows, `launchd` pour macOS, etc.). Pour appliquer des modifications de configuration avec des variables d’environnement dans cette configuration, ces variables d’environnement doivent être définies et rendues visibles dans le contexte isolé dans lequel le service d’agent d’infrastructure s’exécute. La manière de procéder dépend de la plateforme, consultez la documentation du gestionnaire de services de votre plateforme pour savoir comment ajouter des variables d&apos;environnement aux services système.
</Callout>

## Variables d&apos;agent [#agent-variables]

<CollapserGroup>
  <Collapser
    className="freq-link"
    id="license-key"
    title={<>license_key (<strong>OBLIGATOIRE)</strong></>
    }
  >
    Spécifie le <InlinePopover type="licenseKey" />pour votre compte New Relic. L&apos;agent utilise cette clé pour associer les métriques de votre serveur à votre compte New Relic. Ce paramètre est créé dans le cadre du processus d&apos;installation standard.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `license_key`
          </td>

          <td>
            `NRIA_LICENSE_KEY`
          </td>

          <td>
            chaîne
          </td>

          <td />

          <td />
        </tr>
      </tbody>
    </table>

    Exemple:

    ```yml
    license_key: 1234567890abcdefghijklmnopqrstuvwxyz1234
    ```
  </Collapser>

  <Collapser className="freq-link" id="fedramp" title="FedRAMP">
    Spécifie si le point de terminaison FedRAMP doit être utilisé.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `fedramp`
          </td>

          <td>
            `NRIA_FEDRAMP`
          </td>

          <td>
            booléen
          </td>

          <td>
            `false`
          </td>

          <td>
            [1.15.0](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-1150)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="max-procs" title="max_procs">
    Spécifie le nombre de processeurs logiques disponibles pour l&apos;agent. L’augmentation de cette valeur permet de répartir la charge entre les différents cœurs.

    Si défini sur `-1`, l&apos;agent tentera de lire la variable d&apos;environnement `GOMAXPROCS`. Si cette variable n&apos;est pas définie, la valeur par défaut sera le nombre total de cœurs disponibles dans l&apos;hôte.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `max_procs`
          </td>

          <td>
            `NRIA_MAX_PROCS`
          </td>

          <td>
            entier
          </td>

          <td>
            `1`
          </td>

          <td>
            [1.0.1002](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-101002)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="payload-compression-level" title="payload_compression_level">
    Depuis la version [1.0.804](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10804) ou supérieure, les données envoyées depuis l&apos;agent sont compressées par défaut. Pour désactiver la compression de la charge utile, définissez `payload_compression_level` sur 0.

    <Callout variant="important">
      Recommandation : ne pas modifier ce paramètre.
    </Callout>

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `payload_compression_level`
          </td>

          <td>
            `NRIA_PAYLOAD_COMPRESSION_LEVEL`
          </td>

          <td>
            entier
          </td>

          <td>
            `6`
          </td>

          <td>
            [1.0.804](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10804)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="startup-connection-retries" title="startup_connection_retries">
    Nombre de fois que l&apos;agent réessaiera la demande pour vérifier la disponibilité de la plateforme de New Relic au démarrage avant de générer une erreur.

    Si la valeur est <DNT>**negative value**</DNT>, l&apos;agent continuera à vérifier la connexion jusqu&apos;à ce qu&apos;elle réussisse.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `startup_connection_retries`
          </td>

          <td>
            `NRIA_STARTUP_CONNECTION_RETRIES`
          </td>

          <td>
            entier
          </td>

          <td>
            `6`
          </td>

          <td>
            1.0.936
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="startup-connection-retries" title="startup_connection_retry_time">
    Une fois le délai d&apos;expiration d&apos;une demande expiré, l&apos;agent attend pour réessayer une demande afin de vérifier la disponibilité de la plateforme de New Relic au démarrage.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `startup_connection_retry_time`
          </td>

          <td>
            `NRIA_STARTUP_CONNECTION_RETRY_TIME`
          </td>

          <td>
            chaîne
          </td>

          <td>
            `5s`
          </td>

          <td>
            1.0.936 - 1.2.30
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="startup-connection-timeout" title="startup_connection_timeout">
    Le temps pendant lequel l&apos;agent attend qu&apos;une demande de vérification de la disponibilité de la plateforme New Relic au démarrage soit considérée comme expirée.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `startup_connection_timeout`
          </td>

          <td>
            `NRIA_STARTUP_CONNECTION_TIMEOUT`
          </td>

          <td>
            chaîne
          </td>

          <td>
            `10s`
          </td>

          <td>
            1.0.936
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="self-instrumentation" title="self_instrumentation">
    Permet [l&apos;auto-instrumentation de l&apos;agent](/docs/infrastructure/install-infrastructure-agent/manage-your-agent/infrastructure-agent-self-instrumentation).

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `self_instrumentation`
          </td>

          <td>
            `NRIA_SELF_INSTRUMENTATION`
          </td>

          <td>
            chaîne
          </td>

          <td>
            `empty`
          </td>

          <td>
            [1.24.0](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-1240)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="logging_retry-limit" title="logging_retry_limit">
    Active [la nouvelle tentative de l&apos;agent pour la transmission du log](/docs/infrastructure/install-infrastructure-agent/manage-your-agent/infrastructure-agent-behavior/#retry) via le transitaire de logging Fluentbit intégré. Les valeurs entières correspondent au nombre de tentatives prévues. D&apos;autres valeurs possibles incluent `False` pour définir le nombre de tentatives sur infini et `no_retries` pour désactiver complètement la fonctionnalité de nouvelle tentative.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `logging_retry_limit`
          </td>

          <td>
            `NRIA_LOGGING_RETRY_LIMIT`
          </td>

          <td>
            entier
          </td>

          <td>
            `5`
          </td>

          <td>
            [1.29.1](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-1291)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="logging-http-client-timeout" title="logging_http_client_timeout">
    Sets the HTTP client timeout (in seconds) for the New Relic fluent-bit output plugin. This controls how long the logging forwarder will wait for a response when sending log data to New Relic.

    For more information, see the [fluent-bit output plugin documentation](https://github.com/newrelic/newrelic-fluent-bit-output#httpclienttimeout).

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `logging_http_client_timeout`
          </td>

          <td>
            `NRIA_LOGGING_HTTP_CLIENT_TIMEOUT`
          </td>

          <td>
            chaîne
          </td>

          <td>
            `"5"`
          </td>

          <td>
            [1.72.1](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-1721)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

## Variables du cloud

Si l&apos;agent s&apos;exécute dans une instance cloud, l&apos;agent tentera de détecter le type de cloud et de récupérer [les métadonnées](/docs/integrations/new-relic-integrations/getting-started/understand-use-data-infrastructure-integrations#overview) de base. Les métriques peuvent également être enrichies avec des métadonnées cloud étendues (y compris une balise de ressource personnalisée) lors de [la connexion du compte du fournisseur cloud ](/docs/infrastructure/infrastructure-integrations/get-started/introduction-infrastructure-integrations#cloud)à New Relic.

<CollapserGroup>
  <Collapser className="freq-link" id="cloud-max-retry-count" title="cloud_max_retry_count">
    Définit le nombre de fois que l&apos;agent tente de se connecter en cas d&apos;échec de la détection du cloud.

    Si la détection du cloud échoue lors de l&apos;initialisation de l&apos;agent, l&apos;agent réessayera après avoir attendu [`CloudRetryBackOffSec` secondes](#cloud-retry-backoff-sec).

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `cloud_max_retry_count`
          </td>

          <td>
            `NRIA_CLOUD_MAX_RETRY_COUNT`
          </td>

          <td>
            entier
          </td>

          <td>
            `10`
          </td>

          <td>
            1.2.6
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="cloud-metadata-expiry-sec" title="cloud_metadata_expiry_sec">
    Définit l&apos;intervalle de temps pendant lequel l&apos;agent attendra avant de supprimer les métadonnées, en secondes. Après cette période, les métadonnées expirent et l&apos;agent les récupère à nouveau.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `cloud_metadata_expiry_sec`
          </td>

          <td>
            `NRIA_CLOUD_METADATA_EXPIRY_SEC`
          </td>

          <td>
            entier
          </td>

          <td>
            `300`
          </td>

          <td>
            1.2.6
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="cloud-retry-backoff-sec" title="cloud_retry_backoff_sec">
    Définit l&apos;intervalle de temps pendant lequel l&apos;agent attend entre les tentatives de détection du cloud en cas d&apos;échec de la détection du cloud, en secondes.

    Si la détection du cloud échoue lors de l&apos;initialisation de l&apos;agent, celui-ci réessayera [`CloudMaxRetryCount` fois](#cloud-max-retry-count).

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `cloud_retry_backoff_sec`
          </td>

          <td>
            `NRIA_CLOUD_RETRY_BACKOFF_SEC`
          </td>

          <td>
            entier
          </td>

          <td>
            `60`
          </td>

          <td>
            1.2.6
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="cloud-provider" title="cloud_provider">
    Spécifie le fournisseur de cloud dans lequel l’agent s’exécute. Lorsque cette valeur est différente de la valeur par défaut, l&apos;agent attendra d&apos;avoir acquis avec succès les métadonnées (l&apos;ID d&apos; instance) auprès du fournisseur cloud avant de soumettre des données au backend.

    Avec le comportement par défaut, l&apos;agent essaiera également de détecter le fournisseur de cloud et d&apos;obtenir les métadonnées mais sans bloquer l&apos;agent.

    Valeurs autorisées : `""`, `"aws"`, `"azure"`, `"gcp"`, `"alibaba"`

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `cloud_provider`
          </td>

          <td>
            `NRIA_CLOUD_PROVIDER`
          </td>

          <td>
            chaîne
          </td>

          <td>
            `""`
          </td>

          <td>
            1.40.1
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="disable-cloud-instance-id" title="disable_cloud_instance_id">
    Similaire à [`DisableCloudMetadata`](#disable-cloud-metadata), mais il désactive la collecte de métadonnées cloud uniquement pour le plug-in d&apos;alias d&apos;hôte.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `disable_cloud_instance_id`
          </td>

          <td>
            `NRIA_DISABLE_CLOUD_INSTANCE_ID`
          </td>

          <td>
            booléen
          </td>

          <td>
            `false`
          </td>

          <td>
            1.0.220
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="disable-cloud-metadata" title="disable_cloud_metadata">
    Désactive la collecte de métadonnées cloud.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `disable_cloud_metadata`
          </td>

          <td>
            `NRIA_DISABLE_CLOUD_METADATA`
          </td>

          <td>
            booléen
          </td>

          <td>
            `false`
          </td>

          <td>
            [1.0.690](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10690)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

## Variables Docker

<CollapserGroup>
  <Collapser className="freq-link" id="container-cache-metadata-limit" title="container_cache_metadata_limit">
    Temps, en secondes, avant que le conteneur mémo mis en cache n&apos;expire et que l&apos;agent doive le récupérer à nouveau.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `container_cache_metadata_limit`
          </td>

          <td>
            `NRIA_CONTAINER_CACHE_METADATA_LIMIT`
          </td>

          <td>
            entier
          </td>

          <td>
            `60`
          </td>

          <td>
            1.0.801
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="docker-api-version" title="docker_api_version">
    Spécifie la version de l&apos;API client Docker.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `docker_api_version`
          </td>

          <td>
            `NRIA_DOCKER_API_VERSION`
          </td>

          <td>
            chaîne
          </td>

          <td>
            `1.24`
          </td>

          <td>
            [1.1.4](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-114)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

## Variables du système de fichiers [#filesystem-variables]

<CollapserGroup>
  <Collapser className="freq-link" id="custom-supported-file-systems" title="custom_supported_file_systems">
    Liste des types de système de fichiers pris en charge par l&apos;agent. Cette valeur doit être un sous-ensemble de la liste par défaut et les éléments qui ne figurent pas dans la liste par défaut seront ignorés.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `custom_supported_file_systems`
          </td>

          <td>
            `NRIA_CUSTOM_SUPPORTED_FILESYSTEMS`
          </td>

          <td>
            \[]string
          </td>

          <td>
            Linux: `["xfs", "btrfs", "ext", "ext2", "ext3", "ext4", "hfs", "vxfs", "zfs"]`

            Windows: `["NTFS", "ReFS"]`
          </td>

          <td>
            1.0.220
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="file-devices-ignored" title="file_devices_ignored">
    Liste des périphériques de stockage à ignorer par l&apos;agent lors de la collecte de `StorageSample` données.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `file_devices_ignored`
          </td>

          <td>
            `NRIA_FILE_DEVICES_IGNORED`
          </td>

          <td>
            \[]string
          </td>

          <td />

          <td>
            1.0.220
          </td>
        </tr>
      </tbody>
    </table>

    Exemple en tant qu&apos;attribut YAML :

    ```yml
    file_devices_ignored:
      - sda1
      - sda2
    ```

    Exemple comme variable d&apos;environnement :

    ```ini
    FILE_DEVICES_IGNORED="sda1,sda2"
    ```
  </Collapser>
</CollapserGroup>

## variables du nom d&apos;hôte

<CollapserGroup>
  <Collapser className="freq-link" id="display-name" title="display_name">
    Remplace le nom d&apos;hôte généré automatiquement pour les rapports. Ceci est utile lorsque vous avez plusieurs hôtes avec le même nom, puisque notre monitoring deinfrastructure utilise le nom d&apos;hôte comme identifiant unique pour chaque hôte. Gardez à l’esprit que cette valeur est également utilisée pour le remplacement de l’adresse de bouclage sur les noms d’entité.

    Pour plus d&apos;informations, consultez notre documentation sur [le fonctionnement de la résolution de noms d&apos;entités](/docs/integrations/integrations-sdk/file-specifications/integration-executable-file-specifications#h2-loopback-address-replacement-on-entity-names).

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `display_name`
          </td>

          <td>
            `NRIA_DISPLAY_NAME`
          </td>

          <td>
            chaîne
          </td>

          <td>
            vide
          </td>

          <td>
            1.0.266
          </td>
        </tr>
      </tbody>
    </table>

    Exemple:

    ```yml
    display_name: teslaOne
    ```
  </Collapser>

  <Collapser className="freq-link" id="dns_hostname_resolution" title="dns_hostname_resolution">
    Lorsque `true`, le nom d&apos;hôte complet est résolu en effectuant une recherche inversée de l&apos;adresse de l&apos;hôte. Sinon, il sera récupéré avec la commande nom d&apos;hôte sous Linux et depuis les paramètres TCP/IP du registre sous Windows.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `dns_hostname_resolution`
          </td>

          <td>
            `NRIA_DNS_HOSTNAME_RESOLUTION`
          </td>

          <td>
            booléen
          </td>

          <td>
            `true`
          </td>

          <td>
            [1.2.6](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-125)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="override-hostname" title="override_hostname">
    Lorsqu&apos;elle est définie, il s&apos;agit de la valeur qui sera signalée pour le nom d&apos;hôte complet ; sinon, l&apos;agent effectuera le comportement de recherche normal.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `override_hostname`
          </td>

          <td>
            `NRIA_OVERRIDE_HOSTNAME`
          </td>

          <td>
            chaîne
          </td>

          <td />

          <td>
            1.0.1015
          </td>
        </tr>
      </tbody>
    </table>

    Exemple:

    ```
    my.custom-hostname.co.org
    ```
  </Collapser>

  <Collapser className="freq-link" id="override-hostname-short" title="override_hostname_short">
    Lorsqu&apos;elle est définie, il s&apos;agit de la valeur qui sera signalée pour le nom d&apos;hôte ; sinon, l&apos;agent effectuera le comportement de recherche normal.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `override_hostname_short`
          </td>

          <td>
            `NRIA_OVERRIDE_HOSTNAME_SHORT`
          </td>

          <td>
            chaîne
          </td>

          <td />

          <td>
            1.0.1015
          </td>
        </tr>
      </tbody>
    </table>

    Exemple:

    ```
    my.custom-hostname
    ```
  </Collapser>
</CollapserGroup>

## Variables d&apos;installation [#installation-variables]

<CollapserGroup>
  <Collapser className="freq-link" id="agent-dir" title="agent_dir">
    Répertoire où l&apos;agent stocke les fichiers de cache, d&apos;inventaire, d&apos;intégration, etc.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `agent_dir`
          </td>

          <td>
            `NRIA_AGENT_DIR`
          </td>

          <td>
            chaîne
          </td>

          <td>
            Linux: `/var/db/newrelic-infra`

            Windows: `C:\Program Files\NewRelic\newrelic-infra\`
          </td>

          <td>
            1.0.2
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="plugin-dir" title="plugin_dir">
    Répertoire contenant les fichiers configuration de l&apos;intégration.

    Chaque intégration possède son propre fichier de configuration, nommé par défaut `<integration_name>-config.yml`, placé dans un emplacement prédéfini à partir duquel l&apos;agent se charge lors de l&apos;initialisation.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `plugin_dir`
          </td>

          <td>
            `NRIA_PLUGIN_DIR`
          </td>

          <td>
            chaîne
          </td>

          <td>
            Linux: `etc/newrelic-infra/integrations.d/`

            Windows: `\Program Files\NewRelic\newrelic-infra\integrations.d`
          </td>

          <td>
            1.0.2
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="custom-plugin-installation-dir" title="custom_plugin_installation_dir">
    Spécifie un chemin personnalisé pour installer l&apos;intégration, ce qui permet de les installer en dehors du `agent_dir`. Il a la priorité lorsque l&apos;agent recherche une intégration installée.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `custom_plugin_installation_dir`
          </td>

          <td>
            `NRIA_CUSTOM_PLUGIN_INSTALLATION_DIR`
          </td>

          <td>
            chaîne
          </td>

          <td>
            Vide
          </td>

          <td>
            1.0.2
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

## Variables d&apos;intégration

<CollapserGroup>
  <Collapser className="freq-link" id="passthrough_-environment" title="passthrough_environment">
    Une liste de variables d’environnement qui seront transmises à toutes les intégrations. Si une intégration dispose déjà d’une option de configuration existante portant le même nom, la variable d’environnement a la priorité.

    À partir de l&apos;agent d&apos;infrastructure 1.24.1, `passthrough_environment` prend en charge les expressions régulières pour les noms de variables.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `passthrough_environment`
          </td>

          <td>
            `NRIA_PASSTHROUGH_ENVIRONMENT`
          </td>

          <td>
            \[]string
          </td>

          <td>
            Vide
          </td>

          <td>
            [1.0.719](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10719)
          </td>
        </tr>
      </tbody>
    </table>

    Exemple en tant qu&apos;attribut YAML (à l&apos;intérieur du fichier de configuration de l&apos;agent, situé par défaut dans `/etc/newrelic-infra.yml`) :

    ```yml
    passthrough_environment:
      - HOST
      - PORT
      - NRIA_.*
    ```

    Exemple comme variable d&apos;environnement :

    ```ini
    NRIA_PASSTHROUGH_ENVIRONMENT="HOST,PORT,NRIA_.*"
    ```

    Pour les hôtes Windows : `PATHEXT` est une variable d’environnement MS Windows. La fonction est de déterminer quelles extensions de fichier marquent les fichiers exécutables à partir de chaque ligne de commande. Cela résoudra toutes les erreurs signalant « ... n&apos;est pas reconnu comme le nom d&apos;une applet de commande, d&apos;une fonction, d&apos;un fichier script ... » pour l&apos;intégration Flex courante :

    ```yml
    passthrough_environment:
      - PATHEXT
    ```
  </Collapser>

  <Collapser className="freq-link" id="entityname-integrations-v2-update" title="entityname_integrations_v2_update">
    L&apos;agent permet le remplacement automatique de l&apos;adresse de bouclage sur le nom de l&apos;entité (et donc la clé) pour la version 3 du protocole d&apos;intégration. Si vous utilisez la version 2 du protocole et souhaitez ce comportement, activez l&apos;option `entityname_integrations_v2_update` .

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `entityname_integrations_v2_update`
          </td>

          <td>
            `NRIA_ENTITYNAME_INTEGRATIONS_V2_UPDATE`
          </td>

          <td>
            booléen
          </td>

          <td>
            `false`
          </td>

          <td>
            1.2.15
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="http-server-enabled" title="http_server_enabled">
    En définissant ce paramètre de configuration sur `true` , l&apos;agent ouvrira un port HTTP (par défaut, `8001`) pour recevoir les données du backend New Relic StatsD.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `http_server_enabled`
          </td>

          <td>
            `NRIA_HTTP_SERVER_ENABLED`
          </td>

          <td>
            booléen
          </td>

          <td>
            `false`
          </td>

          <td>
            [1.0.818](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10818)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="http-server-host" title="http_server_host">
    En définissant cette valeur, l&apos;agent commencera à écouter sur le `HTTPServerPort` pour recevoir des données du backend New Relic StatsD.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `http_server_host`
          </td>

          <td>
            `NRIA_HTTP_SERVER_HOST`
          </td>

          <td>
            chaîne
          </td>

          <td>
            `localhost`
          </td>

          <td>
            [1.0.818](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10818)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="http-server-port" title="http_server_port">
    Définit le port sur lequel le serveur http doit recevoir les données du backend New Relic StatsD.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `http_server_port`
          </td>

          <td>
            `NRIA_HTTP_SERVER_PORT`
          </td>

          <td>
            entier
          </td>

          <td>
            `8001`
          </td>

          <td>
            [1.0.818](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10818)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="http-server-cert" title="http_server_cert">
    Le chemin d&apos;accès à un certificat encodé en PEM utilisé pour écouter les charges utiles d&apos;intégration via HTTPS. Lorsqu&apos;il est configuré avec `http_server_key`, l&apos;agent utilise HTTPS pour le serveur de charge utile d&apos;intégration.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `http_server_cert`
          </td>

          <td>
            `NRIA_HTTP_SERVER_CERT`
          </td>

          <td>
            chaîne
          </td>

          <td>
            (aucun)
          </td>

          <td>
            [1.24.0](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-1240)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="http-server-key" title="http_server_key">
    Le chemin d&apos;accès à une clé encodée en PEM utilisée pour écouter les charges utiles d&apos;intégration via HTTPS. Lorsqu&apos;il est configuré avec `http_server_cert`, l&apos;agent utilise HTTPS pour le serveur de charge utile d&apos;intégration.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `http_server_key`
          </td>

          <td>
            `NRIA_HTTP_SERVER_KEY`
          </td>

          <td>
            chaîne
          </td>

          <td>
            (aucun)
          </td>

          <td>
            [1.24.0](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-1240)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="http-server-ca" title="http_server_ca">
    Le chemin d&apos;accès à un certificat CA encodé en PEM utilisé pour appliquer la validation du certificat client pour les requêtes HTTPS. Lorsqu&apos;il est configuré, l&apos;agent vérifie les certificats clients par rapport à cette autorité de certification pour activer l&apos;authentification TLS mutuelle (mTLS) pour le serveur de charge utile d&apos;intégration.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `http_server_ca`
          </td>

          <td>
            `NRIA_HTTP_SERVER_CA`
          </td>

          <td>
            chaîne
          </td>

          <td>
            (aucun)
          </td>

          <td>
            [1.24.0](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-1240)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="remove-entities-period" title="remove_entities_period">
    Démarre le processus de suppression des entités qui n&apos;ont pas signalé d&apos;informations pendant cet intervalle.

    Unités de temps valides : `s` (secondes), `m` (minutes) et `h` (heure).

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `remove_entities_period`
          </td>

          <td>
            `NRIA_REMOVE_ENTITIES_PERIOD`
          </td>

          <td>
            chaîne
          </td>

          <td>
            `48h`
          </td>

          <td>
            [1.0.859](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10859)
          </td>
        </tr>
      </tbody>
    </table>

    Exemple:

    ```
    1h
    ```
  </Collapser>

  <Collapser className="freq-link" id="event_queue_depth" title="event_queue_depth">
    Si vous avez un grand nombre de processus sur l&apos;hôte ou un grand volume de données collectées sur votre intégration, la file d&apos;attente de l&apos;agent peut être saturée. Augmentez la profondeur de la file d&apos;attente pour éviter les messages d&apos;erreur résultant de files d&apos;attente pleines.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `event_queue_depth`
          </td>

          <td>
            `NRIA_EVENT_QUEUE_DEPTH`
          </td>

          <td>
            int64
          </td>

          <td>
            `1000`
          </td>

          <td>
            [1.12.0](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-1120/)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="default_integrations_temp_dir" title="default_integrations_temp_dir">
    Définit le répertoire temporaire utilisé comme stockage persistant pour la synchronisation du SDK d&apos;intégration.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `default_integrations_temp_dir`
          </td>

          <td>
            `NRIA_DEFAULT_INTEGRATIONS_TEMP_DIR`
          </td>

          <td>
            chaîne
          </td>

          <td>
            `/tmp/nr-integrations`
          </td>

          <td>
            [1.50.0](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-1500/)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="is_integrations_only" title="is_integrations_only">
    Utilisez ce paramètre si vous instrumentez l&apos;hôte à partir d&apos;une source autre que infrastructure l&apos;agent (par exemple, un OpenTelemetry Collector ou un exportateur de nœuds Prometheus ) et que vous souhaitez continuer à utiliser l&apos;intégration de l&apos;agent infrastructure sur l&apos;hôte pour monitorer d&apos;autres infrastructure services . Lorsqu&apos;il est activé, l&apos;agent rapporte l&apos;inventaire de l&apos;hôte et l&apos;intégration télémétrie (événements métriques et inventaire) agrémentés de métadonnées de l&apos;hôte, mais les métriques de l&apos;hôte (CPU, mémoire, disque, réseau, processus) sont désactivées.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `is_integrations_only`
          </td>

          <td>
            `NRIA_IS_INTEGRATIONS_ONLY`
          </td>

          <td>
            booléen
          </td>

          <td>
            `false`
          </td>

          <td>
            [1.53.0](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-1530/)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

## Variables d&apos;inventaire

<CollapserGroup>
  <Collapser className="freq-link" id="offline-time-to-reset" title="offline_time_to_reset">
    Si l&apos;inventaire mis en cache devient plus ancien que cette valeur (par exemple, parce que l&apos;agent est hors ligne), l&apos;agent supprime et recrée automatiquement le magasin delta.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `offline_time_to_reset`
          </td>

          <td>
            `NRIA_OFFLINE_TIME_TO_RESET`
          </td>

          <td>
            chaîne
          </td>

          <td>
            `24h`
          </td>

          <td>
            [1.0.888](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10888)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="enable-async-inventory" title="enable_async_inventory">
    Lorsque défini sur vrai, active le traitement asynchrone de l&apos;inventaire permettant de traiter des charges d&apos;inventaire plus importantes.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `async_inventory_handler_enabled`
          </td>

          <td>
            `NRIA_ASYNC_INVENTORY_HANDLER_ENABLED`
          </td>

          <td>
            booléen
          </td>

          <td>
            `false`
          </td>

          <td>
            [1.40.1](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-1401)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="ignored-inventory" title="ignored_inventory">
    La liste des chemins d&apos;inventaire ignorés par l&apos;agent.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `ignored_inventory`
          </td>

          <td>
            `NRIA_IGNORED_INVENTORY`
          </td>

          <td>
            string\[]
          </td>

          <td>
            Liste vide
          </td>

          <td>
            [1.0.336](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10336)
          </td>
        </tr>
      </tbody>
    </table>

    Exemple en tant qu&apos;attribut YAML :

    ```yml
    ignored_inventory:
      - files/config/stuff.bar
      - files/config/stuff.foo
    ```

    Exemple comme variable d&apos;environnement :

    ```ini
    NRIA_IGNORED_INVENTORY="files/config/stuff.bar,files/config/stuff.foo"
    ```
  </Collapser>
</CollapserGroup>

## Variables Linux [#linux-variables]

<CollapserGroup>
  <Collapser className="freq-link" id="pid-file" title="pid_file">
    Emplacement sur Linux où le fichier `pid` du processus agent est créé. Il est utilisé au démarrage pour garantir qu&apos;aucune autre instance de l&apos;agent n&apos;est en cours d&apos;exécution.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `pid_file`
          </td>

          <td>
            `NRIA_PID_FILE`
          </td>

          <td>
            chaîne
          </td>

          <td>
            `/var/run/newrelic-infra/newrelic-infra.pid`
          </td>

          <td>
            1.0.2
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="ignore-reclaimable" title="ignore_reclaimable">
    Si cette option est vraie, la formulation de la mémoire virtuelle de l&apos;hôte considère `SReclaimable` comme mémoire disponible ; sinon, `SReclaimable` sera considéré comme faisant partie de la mémoire utilisée.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `ignore_reclaimable`
          </td>

          <td>
            `NRIA_IGNORE_RECLAIMABLE`
          </td>

          <td>
            booléen
          </td>

          <td>
            `false`
          </td>

          <td>
            [1.2.6](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-125)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

## Variables de logging

<CollapserGroup>
  <Collapser className="freq-link" id="log" title="log">
    log est une carte de valeur clé utilisée pour configurer l&apos;agent infrastructure activé. Exemple en tant qu&apos;attribut YAML :

    ```yml
    log:
      file: '/var/log/newrelic-infra/newrelic-infra.log'
      level: debug
      forward: true
      stdout: false
    ```

    Exemple comme variable d&apos;environnement :

    ```ini
    NRIA_LOG_FILE='/var/log/newrelic-infra/newrelic-infra.log'
    NRIA_LOG_LEVEL='smart'
    NRIA_LOG_FORWARD='false'
    NRIA_LOG_STDOUT='true'
    ```

    <CollapserGroup>
      <Collapser className="freq-link" id="file" title="fichier">
        Définit le chemin du fichier pour le log.

        L&apos;installation par défaut crée un répertoire log et définit cette valeur de chemin de fichier dans l&apos;option configuration `file` pour vous. Ce répertoire log est différent pour chaque système d’exploitation, comme indiqué ci-dessous.

        Modifiez cette option configuration pour personnaliser le chemin d’accès au fichier log.

        <table>
          <thead>
            <tr>
              <th style={{ width: "200px" }}>
                Nom de l&apos;option YML
              </th>

              <th style={{ width: "200px" }}>
                Variable d&apos;environnement
              </th>

              <th>
                Type
              </th>

              <th>
                Défaut
              </th>

              <th>
                Version
              </th>
            </tr>
          </thead>

          <tbody>
            <tr>
              <td>
                `file`
              </td>

              <td>
                `NRIA_LOG_FILE`
              </td>

              <td>
                chaîne
              </td>

              <td>
                Voir ci-dessous\*
              </td>

              <td />
            </tr>
          </tbody>
        </table>

        Chemins par défaut :

        * Linux : s&apos;il n&apos;est pas défini, il enregistre uniquement dans la sortie standard.

        * Windows, version de l&apos;agent 1.0.944 ou supérieure :

          ```
          C:\%ProgramData%\New Relic\newrelic-infra\newrelic-infra.log
          ```

          Si le répertoire ne peut pas être créé :

          ```
          C:\Program Files\New Relic\newrelic-infra\newrelic-infra.log
          ```
      </Collapser>

      <Collapser className="freq-link" id="level" title="level">
        Définit le niveau de log. Valeurs disponibles :

        * `info`: Affiche les messages du log de niveau d&apos;erreur, d&apos;avertissement et d&apos;information.

        * `smart`: Active le [mode verbeux intelligent](/docs/infrastructure/infrastructure-troubleshooting/troubleshoot-logs/infrastructure-agent-logging-behavior/#smart-verbose-mode). Le mode verbeux intelligent enregistre les `smart_level_entry_limit` derniers messages de débogage lorsqu&apos;une erreur est enregistrée.

        * `debug`: Affiche les messages du log de niveau erreur, avertissement, info et débogage.

        * `trace`:Tous les messages du log seront affichés.

          <Callout variant="important">
            Le logging au niveau des traces peut générer beaucoup de données très rapidement. Exécutez l&apos;agent en mode trace uniquement pendant la durée nécessaire pour reproduire votre problème, puis définissez `level: info` et [redémarrez votre agent](/docs/infrastructure/new-relic-infrastructure/configuration/start-stop-restart-check-infrastructure-agent-status) pour désactiver le logging détaillé. Alternativement, vous pouvez définir `level`: `smart`, ce qui activera le mode verbeux intelligent.
          </Callout>

          <table>
            <thead>
              <tr>
                <th style={{ width: "200px" }}>
                  Nom de l&apos;option YML
                </th>

                <th style={{ width: "200px" }}>
                  Variable d&apos;environnement
                </th>

                <th>
                  Type
                </th>

                <th>
                  Défaut
                </th>

                <th>
                  Version
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  `level`
                </td>

                <td>
                  `NRIA_LOG_LEVEL`
                </td>

                <td>
                  chaîne
                </td>

                <td>
                  Non défini
                </td>

                <td />
              </tr>
            </tbody>
          </table>
      </Collapser>

      <Collapser className="freq-link" id="log-format" title="format">
        Définit le format de sortie log . Valeurs disponibles :

        * `text`:Sortie en texte brut, une ligne par entrée log .

        * `json`: Sortie au format JSON, une ligne par entrée log .

          <table>
            <thead>
              <tr>
                <th style={{ width: "200px" }}>
                  Nom de l&apos;option YML
                </th>

                <th style={{ width: "200px" }}>
                  Variable d&apos;environnement
                </th>

                <th>
                  Type
                </th>

                <th>
                  Défaut
                </th>

                <th>
                  Version
                </th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>
                  `format`
                </td>

                <td>
                  `NRIA_LOG_FORMAT`
                </td>

                <td>
                  chaîne
                </td>

                <td>
                  `text`
                </td>

                <td>
                  [1.4.9](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-149)
                </td>
              </tr>
            </tbody>
          </table>
      </Collapser>

      <Collapser className="freq-link" id="forward" title="avant">
        Permet de transférer le log de l&apos;agent vers notre UI de log. Pour le désactiver, définissez cette option de configuration sur `false`.

        <table>
          <thead>
            <tr>
              <th style={{ width: "200px" }}>
                Nom de l&apos;option YML
              </th>

              <th style={{ width: "200px" }}>
                Variable d&apos;environnement
              </th>

              <th>
                Type
              </th>

              <th>
                Défaut
              </th>

              <th>
                Version
              </th>
            </tr>
          </thead>

          <tbody>
            <tr>
              <td>
                `forward`
              </td>

              <td>
                `NRIA_LOG_FORWARD`
              </td>

              <td>
                booléen
              </td>

              <td>
                `false`
              </td>

              <td>
                [1.0.703](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10703)
              </td>
            </tr>
          </tbody>
        </table>
      </Collapser>

      <Collapser className="freq-link" id="stdout" title="sortie standard">
        Par défaut, tous les logs sont affichés à la fois dans la sortie standard et dans un fichier de log. Pour désactiver le logging dans la sortie standard, définissez cette option configuration sur `false`.

        <table>
          <thead>
            <tr>
              <th style={{ width: "200px" }}>
                Nom de l&apos;option YML
              </th>

              <th style={{ width: "200px" }}>
                Variable d&apos;environnement
              </th>

              <th>
                Type
              </th>

              <th>
                Défaut
              </th>

              <th>
                Version
              </th>
            </tr>
          </thead>

          <tbody>
            <tr>
              <td>
                `stdout`
              </td>

              <td>
                `NRIA_LOG_STDOUT`
              </td>

              <td>
                booléen
              </td>

              <td>
                `true`
              </td>

              <td>
                [1.0.703](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10703)
              </td>
            </tr>
          </tbody>
        </table>
      </Collapser>

      <Collapser className="freq-link" id="smart_level_entry_limit" title="smart_level_entry_limit">
        `smart_level_entry_limit` fait référence au nombre de messages de débogage précédents qui seront enregistrés lorsqu&apos;une erreur est enregistrée. Par exemple, si la limite est définie sur `5`, le log de débogage sera mis en cache dans la mémoire jusqu&apos;à ce qu&apos;une erreur soit enregistrée, auquel cas les 5 messages de débogage précédents seront également enregistrés.

        <Callout variant="important">
          Cette option de configuration n&apos;est utilisée que lorsque `level` est défini sur `smart` (niveau intelligent activé).
        </Callout>

        <table>
          <thead>
            <tr>
              <th style={{ width: "200px" }}>
                Nom de l&apos;option YML
              </th>

              <th style={{ width: "200px" }}>
                Variable d&apos;environnement
              </th>

              <th>
                Type
              </th>

              <th>
                Défaut
              </th>

              <th>
                Version
              </th>
            </tr>
          </thead>

          <tbody>
            <tr>
              <td>
                `smart_level_entry_limit`
              </td>

              <td>
                `NRIA_SMART_LEVEL_ENTRY_LIMIT`
              </td>

              <td>
                entier
              </td>

              <td>
                `1000`
              </td>

              <td>
                [1.9.0](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-190)
              </td>
            </tr>
          </tbody>
        </table>
      </Collapser>

      <Collapser className="freq-link" id="rotate" title="tourner">
        À partir de la version [v1.28.0](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes) , vous pouvez utiliser la fonctionnalité de rotation log intégrée. Par défaut, la rotation log est désactivée. Pour l&apos;activer, vous devez spécifier la taille maximale du fichier de log avec l&apos;option `max_size_mb`. infrastructure Lorsque le log fichier de l&apos;agent atteint cette taille, le fichier actuel log sera transformé en un nouveau fichier.

        ```yml
        log:
          level: info
          file: /var/log/newrelic-infra/newrelic-infra.log
          rotate:
            max_size_mb: 1000                        # Required
            max_files: 5                             # Optional
            compression_enabled: true                # Optional
            file_pattern: YYYY-MM-DD_hh-mm-ss.log    # Optional
        ```

        <CollapserGroup>
          <Collapser className="rotate-max_size_mb" id="rotate-max_size_mb" title="max_size_mb">
            `max_size_mb` spécifie la taille maximale en mégaoctets du infrastructure fichier de de l&apos;agent log. Lorsque le fichier a atteint cette taille, le log actuel sera transformé en un nouveau fichier. Lorsque `max_size_mb` est `0`, la rotation log intégrée est désactivée.

            <table>
              <thead>
                <tr>
                  <th style={{ width: "200px" }}>
                    Nom de l&apos;option YML
                  </th>

                  <th style={{ width: "200px" }}>
                    Variable d&apos;environnement
                  </th>

                  <th>
                    Type
                  </th>

                  <th>
                    Défaut
                  </th>

                  <th>
                    Version
                  </th>
                </tr>
              </thead>

              <tbody>
                <tr>
                  <td>
                    `max_size_mb`
                  </td>

                  <td>
                    `NRIA_LOG_ROTATE_MAX_SIZE_MB`
                  </td>

                  <td>
                    entier
                  </td>

                  <td>
                    `0` - Désactivé
                  </td>

                  <td />
                </tr>
              </tbody>
            </table>
          </Collapser>

          <Collapser className="rotate-max_files" id="rotate-max_files" title="max_files">
            `max_files` définit combien de fichiers log archivés seront conservés. Lorsque cette valeur est dépassée, les fichiers plus anciens seront supprimés. Lorsque `max_files` est `0` , la limite du nombre de fichiers est désactivée.

            <table>
              <thead>
                <tr>
                  <th style={{ width: "200px" }}>
                    Nom de l&apos;option YML
                  </th>

                  <th style={{ width: "200px" }}>
                    Variable d&apos;environnement
                  </th>

                  <th>
                    Type
                  </th>

                  <th>
                    Défaut
                  </th>

                  <th>
                    Version
                  </th>
                </tr>
              </thead>

              <tbody>
                <tr>
                  <td>
                    `max_files`
                  </td>

                  <td>
                    `NRIA_LOG_ROTATE_MAX_FILES`
                  </td>

                  <td>
                    entier
                  </td>

                  <td>
                    `0`
                  </td>

                  <td />
                </tr>
              </tbody>
            </table>
          </Collapser>

          <Collapser className="rotate-compression_enabled" id="rotate-compression_enabled" title="compression_enabled">
            Vous pouvez activer la compression du fichier log en définissant `compression_enabled` sur `true`. Si la compression est activée, les fichiers pivotés auront un format `gzip` et utiliseront moins d&apos;espace disque.

            <Callout variant="important">
              Pendant la rotation log , si la compression est activée, l&apos;utilisation du processeur de l&apos;agent peut augmenter, en particulier lorsque la valeur `max_size_mb` est supérieure à `1000`.
            </Callout>

            <table>
              <thead>
                <tr>
                  <th style={{ width: "200px" }}>
                    Nom de l&apos;option YML
                  </th>

                  <th style={{ width: "200px" }}>
                    Variable d&apos;environnement
                  </th>

                  <th>
                    Type
                  </th>

                  <th>
                    Défaut
                  </th>

                  <th>
                    Version
                  </th>
                </tr>
              </thead>

              <tbody>
                <tr>
                  <td>
                    `compression_enabled`
                  </td>

                  <td>
                    `NRIA_LOG_ROTATE_COMPRESSION_ENABLED`
                  </td>

                  <td>
                    booléen
                  </td>

                  <td>
                    `false`
                  </td>

                  <td />
                </tr>
              </tbody>
            </table>
          </Collapser>

          <Collapser className="rotate-file_pattern" id="rotate-file_pattern" title="file_pattern">
            `file_pattern` spécifie le format du nom du fichier de log archivé. Par défaut, le nouveau nom de fichier utilisera le modèle de nom suivant : `original-file_YYYY-MM-DD_hh-mm-ss.log`.

            Vous pouvez personnaliser le modèle de nom de fichier avec les champs d&apos;horodatage suivants :

            * `YYYY`: Année

            * `MM`: Mois

            * `DD`: Jour

            * `hh`: Heure

            * `mm`: Minute

            * `ss`: Deuxième

              L&apos;agent remplacera automatiquement ces champs d&apos;horodatage par l&apos;heure de rotation du fichier. Par exemple:

              ```yml
              log:
                level: info
                file: /var/log/newrelic-infra/newrelic-infra.log
                rotate:
                  max_size_mb: 1000
                  file_pattern: rotated.YYYY-MM-DD_hh-mm-ss.log
              ```

              <table>
                <thead>
                  <tr>
                    <th style={{ width: "200px" }}>
                      Nom de l&apos;option YML
                    </th>

                    <th style={{ width: "200px" }}>
                      Variable d&apos;environnement
                    </th>

                    <th>
                      Type
                    </th>

                    <th>
                      Défaut
                    </th>

                    <th>
                      Version
                    </th>
                  </tr>
                </thead>

                <tbody>
                  <tr>
                    <td>
                      `file_pattern`
                    </td>

                    <td>
                      `NRIA_LOG_ROTATE_FILE_PATTERN`
                    </td>

                    <td>
                      chaîne
                    </td>

                    <td>
                      `file_YYYY-MM-DD_hh-mm-ss.file_extension`
                    </td>

                    <td />
                  </tr>
                </tbody>
              </table>
          </Collapser>
        </CollapserGroup>
      </Collapser>
    </CollapserGroup>
  </Collapser>
</CollapserGroup>

<Callout variant="tip">
  La version 1.28.0 de l&apos;agent d&apos;infrastructure a introduit des améliorations rétrocompatibles dans la configuration du logging. Consultez notre [documentation GitHub](https://github.com/newrelic/infrastructure-agent/blob/master/docs/log_configuration.md) pour comprendre les paramètres legacy et comment les mapper à la nouvelle structure.
</Callout>

## Variables métriques [#metrics]

<CollapserGroup>
  <Collapser className="freq-link" id="custom-attributes" title="custom_attributes">
    Les attributs personnalisés sont des paires valeur-clé (similaires aux balises dans d&apos;autres outils) utilisées pour annoter les données de l&apos;agent infrastructure . Vous pouvez utiliser cette métadonnée pour filtrer votre entité, [regrouper vos résultats](/docs/infrastructure-group-results-specific-attributes) et annoter vos données. Par exemple, vous pouvez indiquer l&apos;environnement d&apos;une machine (simulation ou production), le service hôte d&apos;une machine (service de connexion, par exemple) ou l&apos;équipe responsable de cette machine.

    <Callout variant="tip">
      L&apos;agent collecte de nombreux détails sur votre environnement dans le cadre de son [attribut par défaut](/docs/default-infrastructure-events-attributes), y compris [la balise Amazon Elastic Compute Cloud (Amazon EC2)](/docs/default-infrastructure-events-attributes#aws-ec2-attributes).
    </Callout>

    <table>
      <thead>
        <tr>
          <th style={{ width: "250px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "250px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `custom_attributes`
          </td>

          <td>
            `NRIA_CUSTOM_ATTRIBUTES`
          </td>

          <td>
            map\[string]interface\{}
          </td>
        </tr>
      </tbody>
    </table>

    Utilisez une liste d&apos;attributs personnalisés pour annoter les données de cette instance d&apos;agent. Séparez les clés et les valeurs par des deux points `:`, comme dans `KEY: VALUE`, et séparez chaque paire valeur-clé par un saut de ligne. Les clés peuvent être n&apos;importe quel YAML valide, à l&apos;exception des barres obliques `/`. Les valeurs peuvent être n&apos;importe quelle chaîne YAML, y compris les espaces. Commencer la clé par `label.` garantira qu&apos;elle reste telle quelle, même si cet hôte peut s&apos;exécuter dans des environnements cloud différents, où la balise cloud ou les étiquettes cloud peuvent interagir avec elle dans la décoration combinée de la balise. En revanche, `custom_labels` peut être préfixé par `gcp.` ou `azure.` lors de l&apos;exécution dans ces environnements et lors de la combinaison des données de infrastructure l&apos;agent avec monitoring cloud .

    Exemple en tant qu&apos;attribut YAML :

    ```yml
    custom_attributes:
      label.environment: production
      label.service: login service
      label.team: alpha-team
    ```

    Exemple comme variable d&apos;environnement :

    ```ini
    NRIA_CUSTOM_ATTRIBUTES='{"label.customAttribute_1":"SOME_ATTRIBUTE","label.customAttribute_2": "SOME_ATTRIBUTE_2"}'
    ```

    Exemple de filtrage NRQL par attribut personnalisé :

    ```sql
    FROM SystemSample SELECT * WHERE label.environment = 'production'
    ```
  </Collapser>

  <Collapser className="freq-link" id="enable-process-metrics" title="enable_process_metrics">
    <Callout variant="important">
      Nécessite la version 1.12.0 ou supérieure de l&apos;agent d&apos;infrastructure. Les comptes créés avant le 20 juillet 2020 et/ou les agents d&apos;infrastructure installés à l&apos;aide de la nouvelle installation guidée ont cette variable activée par défaut.
    </Callout>

    Permet l&apos;envoi de [métriques de processus](/attribute-dictionary/?event=ProcessSample) à New Relic.

    Par défaut, l&apos;agent infrastructure n&apos;envoie pas de données sur les processus du système d&apos;exploitation. L&apos;agent collecte toujours ces données, sauf si `metrics_process_sample_rate` est défini sur `-1`.

    Pour rapporter des données métriques sur tous les processus du système d&apos;exploitation, définissez `enable_process_metrics` sur `true`. Pour désactiver, définissez sur `false`.

    L&apos;envoi de toutes les données de processus pourrait augmenter le volume de données envoyées à New Relic. Pour affiner les processus que vous souhaitez monitorer, configurez [`include_matching_metrics`](#include-matching-metrics) ou [`exclude_matching_metrics`](#exclude-matching-metrics).

    Par défaut, les processus utilisant peu de mémoire sont exclus de l&apos;échantillonnage. Pour plus d&apos;informations, voir [disable-zero-mem-process-filter](/docs/infrastructure/install-infrastructure-agent/configuration/infrastructure-agent-configuration-settings#disable-zero-mem-process-filter).

    <table>
      <thead>
        <tr>
          <th style={{ width: "245px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "295px" }}>
            Variable d&apos;environnement
          </th>

          <th style={{ width: "78px" }}>
            Type
          </th>

          <th style={{ width: "80px" }}>
            Défaut
          </th>

          <th style={{ width: "80px" }}>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `enable_process_metrics`
          </td>

          <td>
            `NRIA_ENABLE_PROCESS_METRICS`
          </td>

          <td>
            booléen
          </td>

          <td>
            `false`
          </td>

          <td />
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="process-container-decoration" title="process_container_decoration">
    Lorsque cette option est activée, l&apos;agent décore les exemples de processus avec des informations sur le conteneur si le processus est exécuté dans un conteneur.

    Ces informations incluent l&apos;ID du conteneur, le nom du conteneur, l&apos;ID de l&apos;image, le nom de l&apos;image et les étiquettes du conteneur.

    <table>
      <thead>
        <tr>
          <th style={{ width: "245px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "295px" }}>
            Variable d&apos;environnement
          </th>

          <th style={{ width: "78px" }}>
            Type
          </th>

          <th style={{ width: "80px" }}>
            Défaut
          </th>

          <th style={{ width: "80px" }}>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `process_container_decoration`
          </td>

          <td>
            `NRIA_PROCESS_CONTAINER_DECORATION`
          </td>

          <td>
            booléen
          </td>

          <td>
            `true`
          </td>

          <td>
            1.55.0
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="include-matching-metrics" title="include_matching_metrics">
    <Callout variant="important">
      Actuellement, ce paramètre s&apos;applique uniquement aux processus métriques d&apos;un système d&apos;exploitation.
    </Callout>

    Vous pouvez contrôler la quantité de données envoyées à New Relic en configurant `include_matching_metrics`, ce qui vous permet de restreindre la transmission de données métriques en fonction des valeurs de [l&apos;attribut](/docs/query-your-data/nrql-new-relic-query-language/nrql-query-tutorials/query-infrastructure-dimensional-metrics-nrql#naming-conventions) métrique.

    Vous incluez des données métriques en définissant des valeurs littérales ou partielles pour l&apos;un des attributs de la métrique. Par exemple, vous pouvez choisir d&apos;envoyer les `host.process.cpuPercent` de tous les processus dont `process.name` correspondent aux `^java` [expressions régulières](https://github.com/google/re2/wiki/Syntax).

    Dans cet exemple, nous incluons les métriques de processus à l&apos;aide de fichiers exécutables et de noms :

    ```yml
    include_matching_metrics:          # You can combine attributes from different metrics
      process.name:
        - regex "^java"                # Include all processes starting with "java"
      process.executable:
        - "/usr/bin/python2"           # Include the Python 2.x executable
        - regex "\\System32\\svchost"  # Include all svchost executables
    ```

    Si vous devez inclure des arguments de ligne de commande dans l&apos;une des valeurs, définissez [`strip_command_line`](#strip-command-line) sur false (les agents d&apos;infrastructure suppriment les arguments CLI par défaut pour empêcher la fuite des secrets).

    Si `include_matching_metrics` et `exclude_matching_metrics` sont tous deux présents pour le même élément, l&apos;inclusion a la priorité.

    Pour configurer `include_matching_metrics` comme variable d&apos;environnement pour l&apos; [intégration Kubernetes](/docs/integrations/kubernetes-integration), ajoutez-la dans le manifeste à l&apos;intérieur de l&apos;objet `env:` :

    ```yml
    env:
      - name: NRIA_INCLUDE_MATCHING_METRICS
        value: |
          process.name:
            - regex "^java"
          process.executable:
            - "/usr/bin/python2"
            - regex "\\System32\\svchost"
    ```

    Défaut

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `include_matching_metrics`
          </td>

          <td>
            `NRIA_INCLUDE_MATCHING_METRICS`
          </td>

          <td>
            metric.attribute:

            \- expression régulière &quot;modèle&quot;

            \- &quot;chaîne&quot;

            \- &quot;chaîne-avec-caractère-générique\*&quot;
          </td>

          <td />

          <td />
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="exclude-matching-metrics" title="exclude_matching_metrics">
    <Callout variant="important">
      Actuellement, ce paramètre s&apos;applique uniquement aux processus métriques d&apos;un système d&apos;exploitation.
    </Callout>

    Vous pouvez contrôler la quantité de données envoyées à New Relic en configurant `exclude_matching_metrics`, ce qui vous permet de restreindre la transmission de données métriques en fonction des valeurs de [l&apos;attribut](/docs/nrql/using-nrql/query-infrastructure-dimensional-metrics-nrql/#naming-conventions) métrique.

    Vous excluez les données métriques en définissant des valeurs littérales ou partielles pour l’un des attributs de la métrique. Par exemple, vous pouvez choisir de ne pas envoyer les `host.process.cpuPercent` de tous les processus dont `process.name` correspondent aux `^java` [expressions régulières](https://github.com/google/re2/wiki/Syntax).

    Dans cet exemple, nous excluons les métriques de processus à l&apos;aide de fichiers exécutables et de noms :

    ```yml
    exclude_matching_metrics:          # You can combine attributes from different metrics
      process.name:
        - regex "^java"                # Exclude all processes starting with "java"
      process.executable:
        - "/usr/bin/python2"           # Exclude the Python 2.x executable
        - regex "\\System32\\svchost"  # Exclude all svchost executables
    ```

    Pour configurer `exclude_matching_metrics` comme variable d&apos;environnement pour l&apos; [intégration Kubernetes](/docs/kubernetes-pixie/kubernetes-integration/get-started/introduction-kubernetes-integration/), ajoutez-la dans le manifeste à l&apos;intérieur de l&apos;objet `env:` :

    ```yml
    env:
      - name: NRIA_EXCLUDE_MATCHING_METRICS
        value: |
          process.name:
            - regex "^java"
          process.executable:
            - "/usr/bin/python2"
            - regex "\\System32\\svchost"
    ```

    Défaut

    1.57.0

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `exclude_matching_metrics`
          </td>

          <td>
            `NRIA_EXCLUDE_MATCHING_METRICS`
          </td>

          <td>
            metric.attribute:

            \- expression régulière &quot;modèle&quot;

            \- &quot;chaîne&quot;

            \- &quot;chaîne-avec-caractère-générique\*&quot;
          </td>

          <td />

          <td />
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="network-interface-filters" title="network_interface_filters">
    Vous pouvez utiliser la configuration des filtres d&apos;interface réseau pour masquer les interfaces réseau inutilisées ou inintéressantes de l&apos;agent d&apos;infrastructure. Cela permet de réduire l’utilisation des ressources, le travail et le bruit dans vos données.

    <Callout variant="important">
      Les variables d’environnement ne sont pas prises en charge pour ce paramètre de configuration.
    </Callout>

    La configuration utilise un mécanisme de recherche de modèles simple qui peut rechercher des interfaces commençant par une séquence spécifique de lettres ou de chiffres suivant l&apos;un ou l&apos;autre modèle :

    * `{name}[other characters]`, où vous spécifiez le nom à l&apos;aide de l&apos;option `prefix`

    * `[number]{name}[other characters]`, où vous spécifiez le nom à l&apos;aide de l&apos;option `index-1`

      New Relic Infrastructure implémente une liste par défaut organisée de filtres, disponibles pour [Linux](#filters-linux) et [Windows](#filters-windows), que vous pouvez modifier.

      <table>
        <thead>
          <tr>
            <th style={{ width: "200px" }}>
              Nom de l&apos;option YML
            </th>

            <th style={{ width: "200px" }}>
              Variable d&apos;environnement
            </th>

            <th>
              Type
            </th>

            <th>
              Défaut
            </th>

            <th>
              Version
            </th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>
              `network_interface_filters`
            </td>

            <td>
              non pris en charge
            </td>

            <td>
              map\[string]\[]string
            </td>

            <td />

            <td>
              1.0.220
            </td>
          </tr>
        </tbody>
      </table>

      <CollapserGroup>
        <Collapser className="freq-link" id="filters-linux" title="Linux">
          Filtres d&apos;interface réseau par défaut pour Linux :

          * Interfaces réseau commençant par `dummy`, `lo`, `vmnet`, `sit`, `tun`, `tap` ou `veth`

          * Interfaces réseau contenant `tun` ou `tap`

            L&apos;exemple suivant (ajouté à votre fichier de configuration) remplace les filtres par défaut. Cela ignorera les interfaces réseau qui commencent par `dummy` ou `lo` , ou contiennent `tun` précédé d&apos;une séquence de chiffres et suivi d&apos;autres caractères :

            ```yml
            network_interface_filters:
              prefix:
                - dummy
                - lo
              index-1:
                - tun
            ```
        </Collapser>

        <Collapser className="freq-link" id="filters-windows" title="Windows">
          Filtres d’interface réseau par défaut pour Windows :

          * Interfaces réseau commençant par `Loop`, `isatap` ou `Local`

            L&apos;exemple suivant (ajouté à votre fichier de configuration) remplace les filtres par défaut. Cela ignorera les interfaces réseau commençant par `Loop`:

            ```yml
            network_interface_filters:
              prefix:
                - Loop
            ```
        </Collapser>
      </CollapserGroup>
  </Collapser>

  <Collapser className="freq-link" id="disable-zero-mem-process-filter" title="disable_zero_mem_process_filter">
    Le `ZeroRSSFilter` exclut les processus qui n’utilisent pas de mémoire de l’échantillonnage. Désactivez le filtre pour que l&apos;agent inclue ces processus dans le `ProcessSample`.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `disable_zero_mem_process_filter`
          </td>

          <td>
            `NRIA_DISABLE_ZERO_MEM_PROCESS_FILTER`
          </td>

          <td>
            booléen
          </td>

          <td>
            `false`
          </td>

          <td>
            1.0.832
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

## Variables des plugins

<Callout variant="tip">
  Vous pouvez rapidement désactiver toutes les variables en définissant [`DisableAllPlugins`](#disable-all-plugins) sur `true` et activer uniquement les options dont vous avez besoin.
</Callout>

<CollapserGroup>
  <Collapser className="freq-link" id="disable-all-plugins" title="disable_all_plugins">
    Pour désactiver tous les plugins, définissez cette option sur `true`.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `disable_all_plugins`
          </td>

          <td>
            `NRIA_DISABLE_ALL_PLUGINS`
          </td>

          <td>
            booléen
          </td>

          <td>
            `false`
          </td>

          <td>
            [1.2.1](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-121)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="cloud-security-group-refresh-sec" title="cloud_security_group_refresh_sec">
    Période d&apos;échantillonnage pour le plugin `CloudSecurityGroups` , en secondes. La valeur minimale est `30`. Pour le désactiver, réglez-le sur `-1`.

    <Callout variant="important">
      Ce plugin est activé uniquement si l&apos;agent s&apos;exécute dans une instance AWS.
    </Callout>

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `cloud_security_group_refresh_sec`
          </td>

          <td>
            `NRIA_CLOUD_SECURITY_GROUP_REFRESH_SEC`
          </td>

          <td>
            int64
          </td>

          <td>
            `60`
          </td>

          <td>
            [1.0.692](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10703)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="daemontools-interval-sec" title="daemontools_interval_sec">
    Période d&apos;échantillonnage pour le plugin `Daemontools` , en secondes. La valeur minimale est `10`. Pour le désactiver, réglez-le sur `-1`.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `daemontools_interval_sec`
          </td>

          <td>
            `NRIA_DAEMONTOOLS_INTERVAL_SEC`
          </td>

          <td>
            int64
          </td>

          <td>
            `15`
          </td>

          <td>
            [1.0.316](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10316)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="dpkg-interval-sec" title="dpkg_interval_sec">
    Période d&apos;échantillonnage pour le plugin `Dpkg` , en secondes. La valeur minimale est `30`. Pour le désactiver, réglez-le sur `-1`. Si le paramètre n&apos;est pas explicitement défini dans le fichier de configuration, il peut être désactivé en définissant [`DisableAllPlugins`](#disable-all-plugins) sur `true`.

    <Callout variant="important">
      Ceci n&apos;est activé que dans [les modes d&apos;exécution`root` ou `privileged` ](/docs/infrastructure/install-configure-infrastructure/linux-installation/linux-agent-running-modes)et sur [les distributions basées sur Debian](/docs/infrastructure/new-relic-infrastructure/installation/install-infrastructure-linux#debian-based-root).
    </Callout>

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `dpkg_interval_sec`
          </td>

          <td>
            `NRIA_DPKG_INTERVAL_SEC`
          </td>

          <td>
            int64
          </td>

          <td>
            `30`
          </td>

          <td>
            [1.0.316](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10316)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="facter-interval-sec" title="facter_interval_sec">
    Période d&apos;échantillonnage pour le plugin `Facter` , en secondes. La valeur minimale est `30`. Pour le désactiver, réglez-le sur `-1`.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `facter_interval_sec`
          </td>

          <td>
            `NRIA_FACTER_INTERVAL_SEC`
          </td>

          <td>
            int64
          </td>

          <td>
            `30`
          </td>

          <td>
            [1.0.316](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10316)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="kernel-modules-refresh-sec" title="kernel_modules_refresh_sec">
    Période d&apos;échantillonnage pour le plugin `KernelModules` , en secondes. La valeur minimale est `10`. Pour le désactiver, réglez-le sur `-1`.

    <Callout variant="important">
      `kernel_modules_refresh_sec` n&apos;est activé que dans [les modes de fonctionnement`root` ou `privileged` ](/docs/infrastructure/install-configure-infrastructure/linux-installation/linux-agent-running-modes).
    </Callout>

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `kernel_modules_refresh_sec`
          </td>

          <td>
            `NRIA_KERNEL_MODULES_REFRESH_SEC`
          </td>

          <td>
            int64
          </td>

          <td>
            `10`
          </td>

          <td>
            1.0.755
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="network-interface-interval-sec" title="network_interface_interval_sec">
    Période d&apos;échantillonnage pour le plugin `NetworkInterface` , en secondes. La valeur minimale est `30`. Pour le désactiver, réglez-le sur `-1`.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `network_interface_interval_sec`
          </td>

          <td>
            `NRIA_NETWORK_INTERFACE_INTERVAL_SEC`
          </td>

          <td>
            int64
          </td>

          <td>
            `60`
          </td>

          <td>
            1.0.329
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="rpm-interval-sec" title="rpm_interval_sec">
    Période d&apos;échantillonnage pour le plugin `Rpm` , en secondes. La valeur minimale est `30`. Pour le désactiver, réglez-le sur `-1`.

    <Callout variant="important">
      `rpm_interval_sec` n&apos;est activé que lorsque l&apos;agent s&apos;exécute en [mode root ou privilégié](/docs/infrastructure/install-configure-infrastructure/linux-installation/linux-agent-running-modes) pour les distributions RedHat, RedHat AWS ou SUSE.
    </Callout>

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `rpm_interval_sec`
          </td>

          <td>
            `NRIA_RPM_INTERVAL_SEC`
          </td>

          <td>
            int64
          </td>

          <td>
            `30`
          </td>

          <td>
            [1.0.316](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10316)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="selinux-interval-sec" title="selinux_interval_sec">
    Période d&apos;échantillonnage pour le plugin `SELinux` , en secondes. La valeur minimale est `30`. Pour le désactiver, réglez-le sur `-1`. Cette option est ignorée si `SelinuxEnableSemodule` est défini sur faux. Pour plus d&apos;informations, consultez notre document de dépannage sur [la désactivation du module `SELinux` ](/docs/infrastructure/new-relic-infrastructure/troubleshooting/reduce-infrastructure-agents-cpu-footprint).

    <Callout variant="important">
      `SELinux` n&apos;est activé que lorsque l&apos;agent s&apos;exécute en [mode racine](/docs/infrastructure/install-configure-infrastructure/linux-installation/linux-agent-running-modes).
    </Callout>

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `selinux_interval_sec`
          </td>

          <td>
            `NRIA_SELINUX_INTERVAL_SEC`
          </td>

          <td>
            int64
          </td>

          <td>
            `30`
          </td>

          <td>
            [1.0.316](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10316)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="sshd-config-refresh-sec" title="sshd_config_refresh_sec">
    Période d&apos;échantillonnage pour le plugin `Sshd` , en secondes. La valeur minimale est `10`. Pour le désactiver, réglez-le sur `-1`.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `sshd_config_refresh_sec`
          </td>

          <td>
            `NRIA_SSHD_CONFIG_REFRESH_SEC`
          </td>

          <td>
            int64
          </td>

          <td>
            `15`
          </td>

          <td>
            1.0.755
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="supervisor-interval-sec" title="supervisor_interval_sec">
    Période d&apos;échantillonnage pour le plugin `Supervisor` , en secondes. La valeur minimale est `10`. Pour le désactiver, réglez-le sur `-1`.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `supervisor_interval_sec`
          </td>

          <td>
            `NRIA_SUPERVISOR_INTERVAL_SEC`
          </td>

          <td>
            int64
          </td>

          <td>
            `15`
          </td>

          <td>
            [1.0.316](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10316)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="sysctl-interval-sec" title="sysctl_interval_sec">
    Période d&apos;échantillonnage pour le plugin `Sysctl` , en secondes. La valeur minimale est `30`. Pour le désactiver, réglez-le sur `-1`.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `sysctl_interval_sec`
          </td>

          <td>
            `NRIA_SYSCTL_INTERVAL_SEC`
          </td>

          <td>
            int64
          </td>

          <td>
            `60`
          </td>

          <td>
            [1.0.316](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10316)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="systemd-interval-sec" title="systemd_interval_sec">
    Période d&apos;échantillonnage pour le plugin `Systemd` , en secondes. La valeur minimale est `10`. Pour le désactiver, réglez-le sur `-1`.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `systemd_interval_sec`
          </td>

          <td>
            `NRIA_SYSTEMD_INTERVAL_SEC`
          </td>

          <td>
            int64
          </td>

          <td>
            `30`
          </td>

          <td>
            [1.0.316](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10316)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="sysvinit-interval-sec" title="sysvinit_interval_sec">
    Période d&apos;échantillonnage pour le plugin `sysv` , en secondes. La valeur minimale est `10`. Pour le désactiver, réglez-le sur `-1`.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `sysvinit_interval_sec`
          </td>

          <td>
            `NRIA_SYSVINIT_INTERVAL_SEC`
          </td>

          <td>
            int64
          </td>

          <td>
            `30`
          </td>

          <td>
            [1.0.316](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10316)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="upstart-interval-sec" title="upstart_interval_sec">
    Période d&apos;échantillonnage pour le plugin `Upstart` , en secondes. La valeur minimale est `10`. Pour le désactiver, réglez-le sur `-1`.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `upstart_interval_sec`
          </td>

          <td>
            `NRIA_UPSTART_INTERVAL_SEC`
          </td>

          <td>
            int64
          </td>

          <td>
            `30`
          </td>

          <td>
            [1.0.316](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10316)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="users-refresh-sec" title="users_refresh_sec">
    Période d&apos;échantillonnage pour le plugin `Users` , en secondes. La valeur minimale est `10`. Pour le désactiver, réglez-le sur `-1`.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `users_refresh_sec`
          </td>

          <td>
            `NRIA_USERS_REFRESH_SEC`
          </td>

          <td>
            int64
          </td>

          <td>
            `30`
          </td>

          <td>
            1.0.755
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="supervisor-rpc-sock" title="supervisor_rpc_sock">
    Emplacement de la prise [superviseur](http://www.supervisord.org/) .

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `supervisor_rpc_sock`
          </td>

          <td>
            `NRIA_SUPERVISOR_RPC_SOCK`
          </td>

          <td>
            chaîne
          </td>

          <td>
            `/var/run/supervisor.sock`
          </td>

          <td>
            1.0.2
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="facter-home-dir" title="facter_home_dir">
    Définit la variable d&apos;environnement `HOME` pour [Facter de Puppet](https://puppet.com/docs/puppet/latest/puppet_index.html). S&apos;il n&apos;est pas défini, la valeur par défaut est le répertoire personnel de l&apos;utilisateur actuel.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `facter_home_dir`
          </td>

          <td>
            `NRIA_FACTER_HOME_DIR`
          </td>

          <td>
            chaîne
          </td>

          <td />

          <td>
            [1.1.7](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-117)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

## Variables proxy

Pour l&apos;agent d&apos;infrastructure version 1.3.1 ou supérieure, la priorité des paramètres de configuration du proxy est :

* `NRIA_PROXY`
* `proxy`
* `HTTP_PROXY`
* `HTTPS_PROXY`

<CollapserGroup>
  <Collapser className="freq-link" id="proxy" title="proxy">
    Votre système peut avoir des règles de pare-feu qui obligent l&apos;agent à utiliser un proxy pour communiquer avec New Relic. Si tel est le cas, définissez l&apos;URL du proxy sous la forme https\://utilisateur : mot de passe\@nom d&apos;hôte : port. Il peut s&apos;agir de HTTP ou HTTPS.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `proxy`
          </td>

          <td>
            `NRIA_PROXY`
          </td>

          <td>
            chaîne
          </td>

          <td>
            Vide
          </td>

          <td>
            [1.0.308](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10308)
          </td>
        </tr>
      </tbody>
    </table>

    Exemple:

    ```
    https://proxy_user:access_10@proxy_01:1080
    ```
  </Collapser>

  <Collapser className="freq-link" id="ignore-system-proxy" title="ignore_system_proxy">
    Lorsque la valeur est `true`, les variables d&apos;environnement `HTTPS_PROXY` et `HTTP_PROXY` sont ignorées. Cela est utile lorsque l&apos;agent doit se connecter directement au collecteur de métriques et ignorer le proxy système existant.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `ignore_system_proxy`
          </td>

          <td>
            `NRIA_IGNORE_SYSTEM_PROXY`
          </td>

          <td>
            booléen
          </td>

          <td>
            `false`
          </td>

          <td>
            [1.0.1002](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-101002)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="ca-bundle-dir" title="ca_bundle_dir">
    Si l&apos;option `HTTPS_PROXY` fait référence à un proxy avec des certificats auto-signés, cette option spécifie le chemin d&apos;accès au répertoire où le certificat proxy est disponible. Les certificats du répertoire doivent se terminer par l&apos;extension `.pem` .

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `ca_bundle_dir`
          </td>

          <td>
            `NRIA_CA_BUNDLE_DIR`
          </td>

          <td>
            chaîne
          </td>

          <td />

          <td>
            [1.0.296](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10296)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="ca-bundle-file" title="ca_bundle_file">
    Si l&apos;option `HTTPS_PROXY` fait référence à un proxy avec des certificats auto-signés, cette option spécifie le chemin d&apos;accès au fichier de certificat.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `ca_bundle_file`
          </td>

          <td>
            `NRIA_CA_BUNDLE_FILE`
          </td>

          <td>
            chaîne
          </td>

          <td />

          <td>
            [1.0.296](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10296)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="proxy-validate-certificates" title="proxy_validate_certificates">
    Si la valeur est `true`, lorsque le proxy est configuré pour utiliser une connexion HTTPS, il fonctionnera uniquement :

    * Si le proxy HTTPS dispose de certificats provenant d’une autorité de certification valide.

    * Si les propriétés de configuration `ca_bundle_file` ou `ca_bundle_dir` contiennent les certificats proxy HTTPS.

      <table>
        <thead>
          <tr>
            <th style={{ width: "200px" }}>
              Nom de l&apos;option YML
            </th>

            <th style={{ width: "200px" }}>
              Variable d&apos;environnement
            </th>

            <th>
              Type
            </th>

            <th>
              Défaut
            </th>

            <th>
              Version
            </th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>
              `proxy_validate_certificates`
            </td>

            <td>
              `NRIA_PROXY_VALIDATE_CERTIFICATES`
            </td>

            <td>
              booléen
            </td>

            <td>
              `false`
            </td>

            <td>
              1.3.0
            </td>
          </tr>
        </tbody>
      </table>
  </Collapser>

  <Collapser className="freq-link" id="proxy-config-plugin" title="proxy_config_plugin">
    Envoie les informations de configuration proxy suivantes en tant qu&apos;inventaire :

    * `HTTPS_PROXY`

    * `HTTP_PROXY`

    * `proxy ca_bundle_dir`

    * `ca_bundle_file`

    * `ignore_system_proxy`

    * `proxy_validate_certificates`

      <table>
        <thead>
          <tr>
            <th style={{ width: "200px" }}>
              Nom de l&apos;option YML
            </th>

            <th style={{ width: "200px" }}>
              Variable d&apos;environnement
            </th>

            <th>
              Type
            </th>

            <th>
              Défaut
            </th>

            <th>
              Version
            </th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>
              `proxy_config_plugin`
            </td>

            <td>
              `NRIA_PROXY_CONFIG_PLUGIN`
            </td>

            <td>
              booléen
            </td>

            <td>
              `true`
            </td>

            <td>
              1.3.0
            </td>
          </tr>
        </tbody>
      </table>
  </Collapser>
</CollapserGroup>

Si vous rencontrez des problèmes avec configuration du proxy, consultez [Dépannage du proxy](/docs/infrastructure/new-relic-infrastructure/troubleshooting/https-proxy-configuration-missing).

## Variables d&apos;échantillons

<CollapserGroup>
  <Collapser className="freq-link" id="metrics-network-sample-rate" title="metrics_network_sample_rate">
    Taux d&apos;échantillonnage des échantillons de réseau, en secondes. La valeur minimale est `10`. Pour le désactiver, réglez-le sur `-1`.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `metrics_network_sample_rate`
          </td>

          <td>
            `NRIA_METRICS_NETWORK_SAMPLE_RATE`
          </td>

          <td>
            entier
          </td>

          <td>
            `10`
          </td>

          <td>
            [1.0.308](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10308)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="metrics-process-sample-rate" title="metrics_process_sample_rate">
    Taux d&apos;échantillonnage des échantillons de processus, en secondes. La valeur minimale est `20`. Pour désactiver complètement les échantillons de processus, définissez `metrics_process_sample_rate` sur `-1`.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `metrics_process_sample_rate`
          </td>

          <td>
            `NRIA_METRICS_PROCESS_SAMPLE_RATE`
          </td>

          <td>
            entier
          </td>

          <td>
            `20`
          </td>

          <td>
            [1.0.308](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10308)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="metrics-storage-sample-rate" title="metrics_storage_sample_rate">
    Taux d&apos;échantillonnage des échantillons de stockage, en secondes. La valeur minimale est `5`. Pour le désactiver, réglez-le sur `-1`.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `metrics_storage_sample_rate`
          </td>

          <td>
            `NRIA_METRICS_STORAGE_SAMPLE_RATE`
          </td>

          <td>
            entier
          </td>

          <td>
            `20`
          </td>

          <td>
            [1.0.308](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10308)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="metrics-system-sample-rate" title="metrics_system_sample_rate">
    Taux d&apos;échantillonnage des échantillons du système, en secondes. La valeur minimale est `5`. Pour le désactiver, réglez-le sur `-1`.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `metrics_system_sample_rate`
          </td>

          <td>
            `NRIA_METRICS_SYSTEM_SAMPLE_RATE`
          </td>

          <td>
            entier
          </td>

          <td>
            `5`
          </td>

          <td>
            [1.0.308](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10308)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="metrics-nfs-sample-rate" title="metrics_nfs_sample_rate">
    Taux d&apos;échantillonnage des échantillons de stockage NFS, en secondes. La valeur minimale est `5`. Pour le désactiver, réglez-le sur `-1`.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `metrics_nfs_sample_rate`
          </td>

          <td>
            `NRIA_METRICS_NFS_SAMPLE_RATE`
          </td>

          <td>
            entier
          </td>

          <td>
            `20`
          </td>

          <td>
            [1.5.40](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-1540)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="detailed-nfs" title="detailed_nfs">
    Métriques NFS détaillées. Lorsqu&apos;il est activé, l&apos;agent fournira une liste complète des métriques NFS.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `detailed_nfs`
          </td>

          <td>
            `NRIA_DETAILED_NFS`
          </td>

          <td>
            booléen
          </td>

          <td>
            `false`
          </td>

          <td>
            [1.5.40](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-1540)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  ## Variables de décalage NTP

  `ntp_metrics` est une carte valeur clé utilisée pour configurer le décalage temporel métrique. Lorsqu&apos;elle est activée et qu&apos;une liste d&apos;hôtes NTP est fournie, l&apos;agent fournira la métrique `ntp offset` de l&apos;hôte (en secondes). Cette valeur est vérifiée par rapport au pool d&apos;hôtes NTP fourni toutes les `interval` minutes (la valeur par défaut et minimale est de 15 minutes). Entre les intervalles, le dernier décalage connu est signalé. Si le décalage signalé est supérieur à quelques secondes, cela peut entraîner des problèmes avec la condition d&apos;alerte, la requête NRQL et les lacunes de données dans le dashboard.

  Exemple en tant qu&apos;attribut YAML :

  ```yml
  ntp_metrics:
    enabled: true
    pool:
      - time.cloudflare.com
      - time.google.com
    interval: 15
    timeout: 10
  ```

  Exemple comme variable d&apos;environnement :

  ```ini
  NRIA_NTP_METRICS_POOL='time.cloudflare.com,time.google.com'
  NRIA_NTP_METRICS_ENABLED='true'
  NRIA_NTP_METRICS_INTERVAL='15'
  NRIA_NTP_METRICS_TIMEOUT='10'
  ```

  <Collapser className="freq-link" id="ntp-enabled" title="ntp_metrics.enabled">
    Drapeau pour activer/désactiver la métrique de décalage NTP.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `enabled`
          </td>

          <td>
            `NRIA_NTP_METRICS_ENABLED`
          </td>

          <td>
            booléen
          </td>

          <td>
            `false`
          </td>

          <td>
            [1.33.0](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-1330)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="ntp-pool" title="ntp_metrics.pool">
    Définit la liste des hôtes NTP à requête. Lorsque plusieurs hôtes sont définis, ils seront tous interrogés et les métriques rapportées seront la valeur moyenne entre eux.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `pool`
          </td>

          <td>
            `NRIA_NTP_METRICS_POOL`
          </td>

          <td>
            \[]string
          </td>

          <td>
            Vide. Consultez les [serveurs NTP publics](https://timetoolsltd.com/information/public-ntp-server/).
          </td>

          <td>
            [1.33.0](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-1330)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="ntp-interval" title="ntp_metrics.interval">
    Définit l&apos;intervalle en minutes pour demander le décalage NTP à partir du pool fourni.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `interval`
          </td>

          <td>
            `NRIA_NTP_METRICS_INTERVAL`
          </td>

          <td>
            entier
          </td>

          <td>
            `15`
          </td>

          <td>
            [1.33.0](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-1330)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="ntp-timeout" title="ntp_metrics.timeout">
    Définit le délai d&apos;expiration en secondes pour les requests faites aux hôtes NTP.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `timeout`
          </td>

          <td>
            `NRIA_NTP_METRICS_TIMEOUT`
          </td>

          <td>
            entier
          </td>

          <td>
            `10`
          </td>

          <td>
            [1.33.0](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-1330)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

## Variables de sécurité

<CollapserGroup>
  <Collapser className="freq-link" id="selinux-enable-semodule" title="selinux_enable_semodule">
    Obtenez les versions des modules de politique installés à l&apos;aide de SEModule. Si cette option est désactivée, le plugin SELinux récupérera uniquement le statut à l&apos;aide de SEStatus.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `selinux_enable_semodule`
          </td>

          <td>
            `NRIA_SELINUX_ENABLE_SEMODULE`
          </td>

          <td>
            booléen
          </td>

          <td>
            `true`
          </td>

          <td>
            1.0.864
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="strip-command-line" title="strip_command_line">
    Lorsque `true`, l&apos;agent supprime les arguments de commande de l&apos;attribut `commandLine` de `ProcessSample`.

    <Callout variant="tip">
      Il s’agit d’une mesure de sécurité visant à empêcher la fuite d’informations sensibles.
    </Callout>

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `strip_command_line`
          </td>

          <td>
            `NRIA_STRIP_COMMAND_LINE`
          </td>

          <td>
            booléen
          </td>

          <td>
            `true`
          </td>

          <td>
            1.0.149
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

## Variables de point de terminaison d&apos;état

<CollapserGroup>
  <Collapser className="freq-link" id="status-server-enabled" title="status_server_enabled">
    Active le serveur d&apos;état sur l&apos;agent fournissant des informations de santé locales. Les points de terminaison disponibles sont :

    Exemple de point de terminaison d’état principal (sans erreur) :

    ```bash
    curl http://localhost:8003/v1/status
    [output] {
    [output]   "checks": {
    [output]     "endpoints": [
    [output]       {
    [output]         "url": "https://infrastructure-command-api.newrelic.com/agent_commands/v1/commands",
    [output]         "reachable": true
    [output]       },
    [output]       {
    [output]         "url": "https://infra-api.newrelic.com/infra/v2/metrics",
    [output]         "reachable": true
    [output]       },
    [output]       {
    [output]         "url": "https://identity-api.newrelic.com/identity/v1",
    [output]         "reachable": true
    [output]       },
    [output]       {
    [output]         "url": "https://infra-api.newrelic.com/inventory",
    [output]         "reachable": true
    [output]       }
    [output]     ]
    [output]   },
    [output]   "config": {
    [output]     "reachability_timeout": "10s"
    [output]   }
    [output] }
    ```

    Point d&apos;état principal de fin (avec erreurs) :

    ```bash
    curl http://localhost:8003/v1/status
    [output] {
    [output]   "checks": {
    [output]     "endpoints": [
    [output]       {
    [output]         "url": "https://staging-infra-api.newrelic.com/infra/v2/metrics",
    [output]         "reachable": false,
    [output]         "error": "endpoint check timeout exceeded"
    [output]       },
    [output]       {
    [output]         "url": "https://infra-api.newrelic.com/infra/v2/metrics",
    [output]         "reachable": true
    [output]       },
    [output]       {
    [output]         "url": "https://identity-api.newrelic.com/identity/v1",
    [output]         "reachable": true
    [output]       },
    [output]       {
    [output]         "url": "https://infra-api.newrelic.com/inventory",
    [output]         "reachable": true
    [output]       }
    [output]     ]
    [output]   },
    [output]   "config": {
    [output]     "reachability_timeout": "10s"
    [output]   }
    [output] }
    ```

    Exemple de point de terminaison d&apos;erreurs :

    ```bash
    curl http://localhost:18003/v1/status/errors
    [output] {
    [output]   "checks": {
    [output]     "endpoints": [
    [output]       {
    [output]         "url": "https://staging-infra-api.newrelic.com/infra/v2/metrics",
    [output]         "reachable": false,
    [output]         "error": "endpoint check timeout exceeded"
    [output]       }
    [output]     ]
    [output]   },
    [output]   "config": {
    [output]     "reachability_timeout": "10s"
    [output]   }
    [output] }
    ```

    Ceci est similaire au point de terminaison d&apos;état principal, mais filtre uniquement ceux qui présentent des erreurs.

    Exemple de point de terminaison d&apos;entité :

    ```bash
    curl http://localhost:8003/v1/status/entity
    [output] {
    [output]   "guid":"MMMMNjI0NjR8SU5GUkF8TkF8ODIwMDg3MDc0ODE0MTUwNTMy",
    [output]   "key":"your-host-name"
    [output] }
    ```

    Renvoie des informations sur l&apos;entité agent/hôte. Un code d&apos;état de réponse *204* (« Aucun contenu ») sera renvoyé lorsque l&apos;agent n&apos;a toujours aucune information sur l&apos;entité agent/hôte. Par conséquent, plusieurs requests peuvent être nécessaires avant que l&apos;agent fournisse les données d&apos;entité.

    <Callout variant="important">
      Ce paramètre est activé par défaut lorsque vous utilisez l&apos;installation guidée. Cela permet de confirmer que l’installation de l’agent a réussi.
    </Callout>

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `status_server_enabled`
          </td>

          <td>
            `NRIA_STATUS_SERVER_ENABLED`
          </td>

          <td>
            booléen
          </td>

          <td>
            `false`
          </td>

          <td>
            1.19.0
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="status-server-port" title="status_server_port">
    Définit le port pour le point de terminaison du serveur d&apos;état.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `status_server_port`
          </td>

          <td>
            `NRIA_STATUS_SERVER_PORT`
          </td>

          <td>
            entier
          </td>

          <td>
            `8003`
          </td>

          <td>
            1.19.0
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

## Variables Windows

<CollapserGroup>
  <Collapser className="freq-link" id="windows-services-refresh-sec" title="windows_services_refresh_sec">
    Période d&apos;échantillonnage pour le plug-in des services Windows, en secondes. La valeur minimale est `10`. Pour le désactiver, réglez-le sur `-1`.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `windows_services_refresh_sec`
          </td>

          <td>
            `NRIA_WINDOWS_SERVICES_REFRESH_SEC`
          </td>

          <td>
            int64
          </td>

          <td>
            `30`
          </td>

          <td>
            [1.0.755](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10775)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="windows-updates-refresh-sec" title="windows_updates_refresh_sec">
    Période d&apos;échantillonnage pour le plugin de mises à jour Windows, en secondes. La valeur minimale est `10`. Pour le désactiver, réglez-le sur `-1`.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `windows_updates_refresh_sec`
          </td>

          <td>
            `NRIA_WINDOWS_UPDATES_REFRESH_SEC`
          </td>

          <td>
            int64
          </td>

          <td>
            `60`
          </td>

          <td>
            [1.0.755](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10775)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="app-data-dir" title="app_data_dir">
    Définit le chemin pour stocker les données dans un chemin différent de celui du répertoire des fichiers du programme :

    * `%AppDir%/data`:Utilisé pour stocker les données delta

    * `%AppDir%/user_data`: Répertoire externe pour les fichiers JSON générés par l&apos;utilisateur

    * `%AppDir%/newrelic-infra.log`: Si l&apos;option de configuration du fichier de log n&apos;est pas définie, nous utilisons ce chemin de répertoire par défaut.

      <table>
        <thead>
          <tr>
            <th style={{ width: "200px" }}>
              Nom de l&apos;option YML
            </th>

            <th style={{ width: "200px" }}>
              Variable d&apos;environnement
            </th>

            <th>
              Type
            </th>

            <th>
              Défaut
            </th>

            <th>
              Version
            </th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>
              `app_data_dir`
            </td>

            <td>
              `NRIA_APP_DATA_DIR`
            </td>

            <td>
              chaîne
            </td>

            <td>
              Windows: `env(ProgramData)\New Relic\newrelic-infra`

              Linux : Non applicable
            </td>

            <td>
              [1.0.755](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-10775)
            </td>
          </tr>
        </tbody>
      </table>
  </Collapser>

  <Collapser className="freq-link" id="enable-win-update-plugin" title="enable_win_update_plugin">
    Active le plug-in de mises à jour Windows, qui récupère les listes de correctifs installés sur l&apos;hôte.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `enable_win_update_plugin`
          </td>

          <td>
            `NRIA_ENABLE_WIN_UPDATE_PLUGIN`
          </td>

          <td>
            booléen
          </td>

          <td>
            `false`
          </td>

          <td>
            1.0.274
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="legacy-storage-sampler" title="legacy_storage_sampler">
    Si `true`, l&apos;agent sera forcé d&apos;utiliser Windows WMI (la méthode legacy de l&apos;agent pour récupérer les métriques pour Windows; par exemple, `StorageSampler`) et désactivera la nouvelle méthode (qui utilise la bibliothèque PDH).

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `legacy_storage_sampler`
          </td>

          <td>
            `NRIA_LEGACY_STORAGE_SAMPLER`
          </td>

          <td>
            booléen
          </td>

          <td />

          <td>
            [1.0.1051](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-101051)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="win-process-priority-class" title="win_process_priority_class">
    Cette option de configuration permet d&apos;augmenter la priorité du processus `newrelic-infra.exe` à l&apos;une des valeurs suivantes :

    * `Normal`

    * `Idle`

    * `High`

    * `RealTime`

    * `BelowNormal`

    * `AboveNormal`

      <table>
        <thead>
          <tr>
            <th style={{ width: "200px" }}>
              Nom de l&apos;option YML
            </th>

            <th style={{ width: "200px" }}>
              Variable d&apos;environnement
            </th>

            <th>
              Type
            </th>

            <th>
              Défaut
            </th>

            <th>
              Version
            </th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>
              `win_process_priority_class`
            </td>

            <td>
              `NRIA_WIN_PROCESS_PRIORITY_CLASS`
            </td>

            <td>
              chaîne
            </td>

            <td />

            <td>
              1.0.989
            </td>
          </tr>
        </tbody>
      </table>

      Exemple:

      ```
      Normal
      ```
  </Collapser>

  <Collapser className="freq-link" id="win-removable-drives" title="win_removable_drives">
    Permet à l&apos;agent Windows de signaler les lecteurs `A:` et `B:` lorsqu&apos;ils sont mappés en tant que lecteurs amovibles.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `win_removable_drives`
          </td>

          <td>
            `NRIA_WIN_REMOVABLE_DRIVES`
          </td>

          <td>
            booléen
          </td>

          <td>
            `true`
          </td>

          <td>
            [1.3.1](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-131)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="win-network-interface-v2" title="win_network_interface_v2">
    Lorsqu&apos;il est activé, l&apos;agent Windows utilise `GetIfEntry2` (compteurs 64 bits) au lieu de `GetIfEntry` (compteurs 32 bits) pour les métriques réseau. Cela fournit des statistiques réseau plus précises pour les interfaces à haut débit où les compteurs 32 bits peuvent déborder.

    <Callout variant="tip">
      Ce flag est conservé pour la compatibilité descendante et peut être supprimé dans une prochaine version.
    </Callout>

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `win_network_interface_v2`
          </td>

          <td>
            `NRIA_WIN_NETWORK_INTERFACE_V2`
          </td>

          <td>
            booléen
          </td>

          <td>
            `true`
          </td>

          <td>
            [1.72.1](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-1721)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser className="freq-link" id="wmi_proc_data" title="wmi_proc_data">
    Si vous le définissez sur vrai, vous obtiendrez des informations sur le processus de WMI et vous ignorerez la vérification de l&apos;accès à la requête dans un environnement restreint.

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Défaut
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `enable_wmi_proc_data`
          </td>

          <td>
            `NRIA_ENABLE_WMI_PROC_DATA`
          </td>

          <td>
            booléen
          </td>

          <td>
            `false`
          </td>

          <td>
            [1.3.1](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-1420)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

## Client HTTP

Configurez le client HTTP utilisé pour la communication backend.

<CollapserGroup>
  <Collapser className="freq-link" id="http-headers" title="http_headers">
    En-têtes HTTP personnalisés à inclure dans toutes requests adressées au backend New Relic.

    ```yml
    http:
      headers:
        "Proxy-Authorization": "myToken"
    ```

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Nom de l&apos;option YML
          </th>

          <th style={{ width: "200px" }}>
            Variable d&apos;environnement
          </th>

          <th>
            Type
          </th>

          <th>
            Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `headers`
          </td>

          <td>
            `NRIA_HTTP_HEADERS`
          </td>

          <td>
            carte valeur clé
          </td>

          <td>
            [1.41.0](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/)
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

## Quelle est la prochaine étape ?

Vous pouvez également :

* Comprendre davantage [la configuration de l&apos;agent](/docs/infrastructure/new-relic-infrastructure/configuration/configure-infrastructure-agent).
* Créez un [fichier de configuration en utilisant notre modèle](https://github.com/newrelic/infrastructure-agent/blob/master/assets/examples/infrastructure/newrelic-infra-template.yml.example).
* Découvrez comment vous pouvez [gérer l&apos;agent](/docs/infrastructure/new-relic-infrastructure/configuration/start-stop-restart-check-infrastructure-agent-status).