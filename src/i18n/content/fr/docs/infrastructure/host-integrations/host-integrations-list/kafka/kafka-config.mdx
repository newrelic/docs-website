---
title: Paramètres de configuration de l'intégration de Kafka
tags:
  - Integrations
  - On-host integrations
  - On-host integrations list
  - Advanced configuration
metaDescription: Advanced configuration New Relic's Kafka integration.
freshnessValidatedDate: never
translationType: machine
---

Cette intégration est un logiciel open source. Cela signifie que vous pouvez [parcourir son code source](https://github.com/newrelic/nri-kafka) et envoyer des améliorations ou créer votre propre fork et le construire.

## Libellés et attribut personnalisé [#labels]

Les variables d&apos;environnement peuvent être utilisées pour contrôler les paramètres de configuration, tels que votre <InlinePopover type="licenseKey" />, et sont ensuite transmises à l&amp;apos;agent d&amp;apos;infrastructure. Pour obtenir des instructions sur l’utilisation de cette fonctionnalité, consultez [Configurer l’agent d’infrastructure](/docs/infrastructure/new-relic-infrastructure/configuration/configure-infrastructure-agent#passthrough).

Vous pouvez également décorer vos métriques à l’aide d’étiquettes. Les étiquettes vous permettent d&apos;ajouter des paires valeur-clé à vos métriques que vous pouvez ensuite utiliser pour interroger, filtrer ou regrouper vos métriques.<br /> Notre fichier de configuration d&amp;apos;exemple par défaut inclut des exemples d&amp;apos;étiquettes mais, comme ils ne sont pas obligatoires, vous pouvez supprimer, modifier ou ajouter de nouvelles étiquettes de votre choix.

```yaml
  labels:
    env: production
    role: kafka
```

Pour en savoir plus sur la structure générale de l&apos;intégration sur configuration hôte, consultez la [configuration](/docs/integrations/integrations-sdk/file-specifications/host-integration-configuration-overview).

## Données d&apos;inventaire [#inventory]

L&apos;intégration Kafka capture les paramètres de configuration du courtier et du sujet non par défaut et collecte les schémas de partition de sujet tels que rapportés par ZooKeeper. Les données sont disponibles sur la [page de UI d&apos;inventaire](/docs/infrastructure/new-relic-infrastructure/infrastructure-ui-pages/infrastructure-inventory-page-search-your-entire-infrastructure) sous la source `config/kafka`.

## Configurer la collection KafkaBrokerSample et KafkaTopicSample [#broker-collection]

L&apos;intégration Kafka collecte à la fois les informations Métriques et Inventaire. Consultez la colonne <DNT>**Applies To**</DNT> ci-dessous pour voir les paramètres disponibles pour chaque collection :

&apos; &apos; &apos; &apos; &apos; &apos;

<table>
  <thead>
    <tr>
      <th style={{ width: "150px" }}>
        Paramètre
      </th>

      <th>
        Description
      </th>

      <th>
        Défaut
      </th>

      <th>
        S&apos;applique à
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        <DNT>
          **CLUSTER\_NAME**
        </DNT>
      </td>

      <td>
        nom défini par l&apos;utilisateur pour identifier de manière unique le cluster monitoré. <DNT>**Required**</DNT>.
      </td>

      <td>
        N/A
      </td>

      <td style={{ "text-align": "center" }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **KAFKA\_VERSION**
        </DNT>
      </td>

      <td>
        La version du courtier Kafka à laquelle vous vous connectez, utilisée pour définir les versions d&apos;API optimales. Elle doit correspondre -ou être inférieure- à la version du courtier.

        Les versions antérieures à 1.0.0 peuvent manquer de certaines fonctionnalités.

        Notez que si le nom binaire du courtier est `kafka_2.12-2.7.0`, la version de l&amp;apos;API Kafka à utiliser est 2.7.0 et la précédente 2.12 est la version du langage Scala.
      </td>

      <td>
        1.0.0
      </td>

      <td style={{ "text-align": "center" }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **AUTODISCOVER\_STRATEGY**
        </DNT>
      </td>

      <td>
        la méthode de découverte des courtiers. Les options sont `zookeeper` ou `bootstrap`.
      </td>

      <td>
        zookeeper
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **METRICS**
        </DNT>
      </td>

      <td>
        Définissez sur `true` pour activer la collecte Métriques uniquement.
      </td>

      <td>
        FAUX
      </td>

      <td style={{ 'text-align': 'center' }} />
    </tr>

    <tr>
      <td>
        <DNT>
          **INVENTORY**
        </DNT>
      </td>

      <td>
        Définissez sur `true` pour activer la collecte d’inventaire uniquement.
      </td>

      <td>
        FAUX
      </td>

      <td style={{ 'text-align': 'center' }} />
    </tr>
  </tbody>
</table>

## Arguments de découverte automatique de Zookeeper [#zookeeper-discovery]

Ceux-ci ne sont pertinents que lorsque l&apos;option `autodiscover_strategy` est définie sur `zookeeper`.

&apos; &apos; &apos; &apos; &apos; &apos; &apos; &apos;

<table>
  <thead>
    <tr>
      <th style={{ width: "150px" }}>
        Paramètre
      </th>

      <th>
        Description
      </th>

      <th>
        Défaut
      </th>

      <th>
        S&apos;applique à
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        <DNT>
          **ZOOKEEPER\_HOSTS**
        </DNT>
      </td>

      <td>
        La liste des hôtes Apache ZooKeeper (au format JSON) qui doivent être connectés.

        <DNT>
          **If `CONSUMER_OFFSET` is set to `false` `KafkaBrokerSamples` and `KafkaTopicSamples` will be collected.**
        </DNT>
      </td>

      <td>
        \[]
      </td>

      <td style={{ "text-align": "center" }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **ZOOKEEPER\_AUTH\_SCHEME**
        </DNT>
      </td>

      <td>
        Le schéma d&apos;authentification ZooKeeper utilisé pour se connecter. Actuellement, la seule valeur prise en charge est `digest`. Si omis, aucune authentification n&amp;apos;est utilisée.
      </td>

      <td>
        N/A
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **ZOOKEEPER\_AUTH\_SECRET**
        </DNT>
      </td>

      <td>
        Le secret d&apos;authentification ZooKeeper utilisé pour se connecter. Doit être de la forme `username:password`. Requis uniquement si `zookeeper_auth_scheme` est spécifié.
      </td>

      <td>
        N/A
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **ZOOKEEPER\_PATH**
        </DNT>
      </td>

      <td>
        Le nœud Zookeeper sous lequel réside la configuration Kafka. La valeur par défaut est `/`.
      </td>

      <td>
        N/A
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **PREFERRED\_LISTENER**
        </DNT>
      </td>

      <td>
        Utilisez un écouteur spécifique pour vous connecter à un courtier. Si cette option n&apos;est pas définie, le premier écouteur qui réussit une connexion de test est utilisé. Les valeurs prises en charge sont `PLAINTEXT`, `SASL_PLAINTEXT`, `SSL` et `SASL_SSL`.

        **Notez que les protocoles `SASL_*` prennent uniquement en charge l’authentification Kerberos (GSSAPI).**
      </td>

      <td>
        N/A
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>
  </tbody>
</table>

## Arguments de découverte du courtier Bootstrap [#bootstrap-discovery]

Ceux-ci ne sont pertinents que lorsque l&apos;option `autodiscover_strategy` est définie sur`bootstrap`

&apos; &apos; &apos; &apos; &apos; &apos;

<table>
  <thead>
    <tr>
      <th style={{ width: "150px" }}>
        Paramètre
      </th>

      <th>
        Description
      </th>

      <th>
        Défaut
      </th>

      <th>
        S&apos;applique à
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        <DNT>
          **BOOTSTRAP\_BROKER\_HOST**
        </DNT>
      </td>

      <td>
        L&apos;hôte du courtier bootstrap.

        <DNT>
          **If `CONSUMER_OFFSET` is set to `false` `KafkaBrokerSamples` and `KafkaTopicSamples` will be collected.**
        </DNT>
      </td>

      <td>
        N/A
      </td>

      <td style={{ "text-align": "center" }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **BOOTSTRAP\_BROKER\_KAFKA\_PORT**
        </DNT>
      </td>

      <td>
        Le port Kafka pour le courtier bootstrap.
      </td>

      <td>
        N/A
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **BOOTSTRAP\_BROKER\_KAFKA\_PROTOCOL**
        </DNT>
      </td>

      <td>
        Le protocole à utiliser pour se connecter au courtier bootstrap. Les valeurs prises en charge sont `PLAINTEXT`, `SASL_PLAINTEXT`, `SSL` et `SASL_SSL`.

        **Notez que les protocoles `SASL_*` prennent uniquement en charge l’authentification Kerberos (GSSAPI).**
      </td>

      <td>
        PLAINTEXT
      </td>

      <td style={{ "text-align": "center" }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **BOOTSTRAP\_BROKER\_JMX\_PORT**
        </DNT>
      </td>

      <td>
        Le port JMX à utiliser pour la collecte sur chaque courtier du cluster.

        <DNT>
          **Note that all discovered brokers should have JMX active on this port**
        </DNT>
      </td>

      <td>
        N/A
      </td>

      <td style={{ "text-align": "center" }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **BOOTSTRAP\_BROKER\_JMX\_USER**
        </DNT>
      </td>

      <td>
        L&apos;utilisateur JMX à utiliser pour la collecte sur chaque courtier du cluster.
      </td>

      <td>
        N/A
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **BOOTSTRAP\_BROKER\_JMX\_PASSWORD**
        </DNT>
      </td>

      <td>
        Le mot de passe JMX à utiliser pour la collecte sur chaque courtier du cluster.
      </td>

      <td>
        N/A
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>
  </tbody>
</table>

## Options JMX [#jmx]

Ces options s&apos;appliquent à toutes les connexions JMX sur l&apos;instance.

&apos; &apos; &apos; &apos; &apos; &apos; &apos; &apos; &apos; &apos; &apos; &apos;

<table>
  <thead>
    <tr>
      <th style={{ width: "150px" }}>
        Paramètre
      </th>

      <th>
        Description
      </th>

      <th>
        Défaut
      </th>

      <th>
        S&apos;applique à
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        <DNT>
          **KEY\_STORE**
        </DNT>
      </td>

      <td>
        Le chemin d&apos;accès du magasin de clés contenant le certificat SSL du client JMX.
      </td>

      <td>
        N/A
      </td>

      <td style={{ "text-align": "center" }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **KEY\_STORE\_PASSWORD**
        </DNT>
      </td>

      <td>
        Le mot de passe du magasin de clés SSL JMX.
      </td>

      <td>
        N/A
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **TRUST\_STORE**
        </DNT>
      </td>

      <td>
        Le chemin d&apos;accès du magasin de clés de confiance contenant le certificat SSL du serveur JMX.
      </td>

      <td>
        N/A
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **TRUST\_STORE\_PASSWORD**
        </DNT>
      </td>

      <td>
        Le mot de passe du magasin de confiance JMX.
      </td>

      <td>
        N/A
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **DEFAULT\_JMX\_USER**
        </DNT>
      </td>

      <td>
        L&apos;utilisateur par défaut qui se connecte à l&apos;hôte JMX pour collecter des métriques. Si le champ nom d&apos;utilisateur est omis pour un hôte JMX, cette valeur sera utilisée.
      </td>

      <td>
        administrateur
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **DEFAULT\_JMX\_PASSWORD**
        </DNT>
      </td>

      <td>
        Le mot de passe par défaut pour se connecter à l&apos;hôte JMX. Si le champ de mot de passe est omis pour un hôte JMX, cette valeur sera utilisée.
      </td>

      <td>
        administrateur
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **TIMEOUT**
        </DNT>
      </td>

      <td>
        Le délai d&apos;expiration d&apos;une requête JMX individuelle en millisecondes.
      </td>

      <td>
        10000
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>
  </tbody>
</table>

## Options de connexion TLS du courtier [#broker-tls]

Vous avez besoin de ces options si le protocole du courtier est `SSL` ou `SASL_SSL`.

&apos; &apos; &apos; &apos; &apos; &apos;

<table>
  <thead>
    <tr>
      <th style={{ width: "150px" }}>
        Paramètre
      </th>

      <th>
        Description
      </th>

      <th>
        Défaut
      </th>

      <th>
        S&apos;applique à
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        <DNT>
          **TLS\_CA\_FILE**
        </DNT>
      </td>

      <td>
        Le fichier d&apos;autorité de certification pour les écouteurs SSL et SASL\_SSL, au format PEM.
      </td>

      <td>
        N/A
      </td>

      <td style={{ "text-align": "center" }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **TLS\_CERT\_FILE**
        </DNT>
      </td>

      <td>
        Le fichier de certificat client pour les écouteurs SSL et SASL\_SSL, au format PEM.
      </td>

      <td>
        N/A
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **TLS\_KEY\_FILE**
        </DNT>
      </td>

      <td>
        Le fichier de clé client pour les écouteurs SSL et SASL\_SSL, au format PEM.
      </td>

      <td>
        N/A
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **TLS\_INSECURE\_SKIP\_VERIFY**
        </DNT>
      </td>

      <td>
        Ignorez la vérification de la chaîne de certificats et du nom d&apos;hôte du serveur.
      </td>

      <td>
        FAUX
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>
  </tbody>
</table>

## Options de connexion SASL et Kerberos du courtier [#broker-sasl-kerberos]

Vous avez besoin de ces options si le protocole du courtier est `SASL_PLAINTEXT` ou `SASL_SSL`.

&apos; &apos; &apos; &apos; &apos; &apos; &apos; &apos; &apos; &apos; &apos; &apos; &apos; &apos; &apos; &apos;

<table>
  <thead>
    <tr>
      <th style={{ width: "150px" }}>
        Paramètre
      </th>

      <th>
        Description
      </th>

      <th>
        Défaut
      </th>

      <th>
        S&apos;applique à
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        <DNT>
          **SASL\_MECHANISM**
        </DNT>
      </td>

      <td>
        Le type d&apos;authentification SASL à utiliser. Les options prises en charge sont `SCRAM-SHA-512`, `SCRAM-SHA-256`, `PLAIN` et `GSSAPI`.
      </td>

      <td>
        N/A
      </td>

      <td style={{ "text-align": "center" }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **SASL\_USERNAME**
        </DNT>
      </td>

      <td>
        Nom d&apos;utilisateur SASL requis avec les mécanismes PLAIN et SCRAM.
      </td>

      <td>
        N/A
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **SASL\_PASSWORD**
        </DNT>
      </td>

      <td>
        Mot de passe SASL requis avec les mécanismes PLAIN et SCRAM.
      </td>

      <td>
        N/A
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **SASL\_GSSAPI\_REALM**
        </DNT>
      </td>

      <td>
        Domaine Kerberos requis avec le mécanisme GSSAPI.
      </td>

      <td>
        N/A
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **SASL\_GSSAPI\_SERVICE\_NAME**
        </DNT>
      </td>

      <td>
        Nom de service Kerberos requis avec le mécanisme GSSAPI.
      </td>

      <td>
        N/A
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **SASL\_GSSAPI\_USERNAME**
        </DNT>
      </td>

      <td>
        Nom d&apos;utilisateur Kerberos requis avec le mécanisme GSSAPI.
      </td>

      <td>
        N/A
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **SASL\_GSSAPI\_KEY\_TAB\_PATH**
        </DNT>
      </td>

      <td>
        Chemin d&apos;accès à la clé Kerberos requis avec le mécanisme GSSAPI.
      </td>

      <td>
        N/A
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **SASL\_GSSAPI\_KERBEROS\_CONFIG\_PATH**
        </DNT>
      </td>

      <td>
        Chemin de configuration Kerberos requis avec le mécanisme GSSAPI.
      </td>

      <td>
        /etc/krb5.conf
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **SASL\_GSSAPI\_DISABLE\_FAST\_NEGOTIATION**
        </DNT>
      </td>

      <td>
        Désactiver la négociation FAST.
      </td>

      <td>
        FAUX
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>
  </tbody>
</table>

## Filtrage de la collection Broker [#broker-filteri]

&apos; &apos; &apos; &apos; &apos; &apos;

<table>
  <thead>
    <tr>
      <th style={{ width: "150px" }}>
        Paramètre
      </th>

      <th>
        Description
      </th>

      <th>
        Défaut
      </th>

      <th>
        S&apos;applique à
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        <DNT>
          **LOCAL\_ONLY\_COLLECTION**
        </DNT>
      </td>

      <td>
        Collectez uniquement les métriques liées au courtier bootstrap configuré. Utilisé uniquement si `autodiscover_strategy` est `bootstrap`.

        <DNT>
          **Environments that use discovery (such as Kubernetes) must be set to true because othwerwise brokers will be discovered twice: By the integration, and by the discovery mechanism, leading to duplicate data.**
        </DNT>

        <DNT>
          **Note that activating this flag will skip KafkaTopicSample collection**
        </DNT>
      </td>

      <td>
        FAUX
      </td>

      <td style={{ "text-align": "center" }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **TOPIC\_MODE**
        </DNT>
      </td>

      <td>
        Détermine le nombre de sujets que nous collectons. Les options sont `all`, `none`, `list` ou `regex`.
      </td>

      <td>
        aucun
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **TOPIC\_LIST**
        </DNT>
      </td>

      <td>
        Gamme JSON de noms de sujets à monitorer. Uniquement en vigueur si `topic_mode` est défini sur `list`.
      </td>

      <td>
        \[]
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **TOPIC\_REGEX**
        </DNT>
      </td>

      <td>
        Modèle d&apos;expression régulière qui fait correspondre les noms de sujets au moniteur. Uniquement en vigueur si `topic_mode` est défini sur `regex`.
      </td>

      <td>
        N/A
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **TOPIC\_BUCKET**
        </DNT>
      </td>

      <td>
        Utilisé pour diviser la collection de sujets sur plusieurs instances. Doit être de la forme `<bucket number>/<number of buckets>`.
      </td>

      <td>
        1/1
      </td>

      <td style={{ "text-align": "center" }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **COLLECT\_TOPIC\_SIZE**
        </DNT>
      </td>

      <td>
        Collectez la taille du sujet métrique. Les options sont `true` ou `false`, la valeur par défaut est `false`.

        <DNT>
          **This is a resource-intensive metric to collect, especially against many topics.**
        </DNT>
      </td>

      <td>
        FAUX
      </td>

      <td style={{ "text-align": "center" }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **COLLECT\_TOPIC\_OFFSET**
        </DNT>
      </td>

      <td>
        Collectez le décalage du sujet métrique. Les options sont `true` ou `false`, la valeur par défaut est `false`.

        <DNT>
          **This is a resource-intensive metric to collect, especially against many topics.**
        </DNT>
      </td>

      <td>
        FAUX
      </td>

      <td style={{ "text-align": "center" }}>
        MI
      </td>
    </tr>
  </tbody>
</table>

## Configurer la collection KafkaConsumerSample et KafkaProducerSample [#KafkaConsumerSample-collection]

L&apos;intégration Kafka collecte à la fois les informations Métriques(<strong>M</strong>) et Inventaire(<strong>I</strong>). Consultez la colonne <DNT>**Applies To**</DNT> ci-dessous pour savoir quels paramètres peuvent être utilisés pour chaque collection spécifique :

&apos; &apos; &apos; &apos; &apos; &apos; &apos; &apos; &apos; &apos; &apos; &apos;

<table>
  <thead>
    <tr>
      <th style={{ width: "150px" }}>
        Paramètre
      </th>

      <th>
        Description
      </th>

      <th>
        Défaut
      </th>

      <th>
        S&apos;applique à
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        <DNT>
          **CLUSTER\_NAME**
        </DNT>
      </td>

      <td>
        nom défini par l&apos;utilisateur pour identifier de manière unique le cluster monitoré. <DNT>**Required**</DNT>.
      </td>

      <td>
        N/A
      </td>

      <td style={{ "text-align": "center" }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **PRODUCERS**
        </DNT>
      </td>

      <td>
        Les producteurs à collectionner. Pour chaque producteur, un `name`, `hostname`, `port`, `username` et `password` peuvent être spécifiés au format JSON. `name` est le nom du producteur tel qu&amp;apos;il apparaît dans Kafka. Si ce paramètre n&amp;apos;est pas défini, les métriques de tous les producteurs de l&amp;apos;hôte : port seront collectées. `host`, `port`, `username` et `password` sont les paramètres JMX facultatifs et utilisent la valeur par défaut s&amp;apos;ils ne sont pas spécifiés. Il est également possible de définir la valeur `default` pour laisser `name` indéfini et utiliser les valeurs par défaut pour `host`, `port`, `username` et `password`. Requis pour produire KafkaProducerSample.

        <DNT>
          **Examples:**
        </DNT>

        `[{"host": "localhost", "port": 24, "username": "me", "password": "secret"}]`

        `[{"name": "myProducer", "host": "localhost", "port": 24, "username": "me", "password": "secret"}]`
      </td>

      <td>
        \[]
      </td>

      <td style={{ "text-align": "center" }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **CONSUMERS**
        </DNT>
      </td>

      <td>
        consommateur à collecter. Pour chaque consommateur, un `name`, `hostname`, `port`, `username` et `password` peuvent être spécifiés au format JSON. `name` est le nom du consommateur tel qu&amp;apos;il apparaît dans Kafka. Si elle n&amp;apos;est pas définie, les métriques de tous les consommateurs de l&amp;apos;hôte:port seront collectées. `host`, `port`, `username` et `password` sont les paramètres JMX facultatifs et utilisent la valeur par défaut s&amp;apos;ils ne sont pas spécifiés. Il est également possible de définir la valeur `default` pour laisser `name` indéfini et utiliser les valeurs par défaut pour `host`, `port`, `username` et `password`. Requis pour produire KafkaConsumerSample.

        <DNT>
          **Examples:**
        </DNT>

        `[{"host": "localhost", "port": 24, "username": "me", "password": "secret"}]`

        `[{"name": "myConsumer", "host": "localhost", "port": 24, "username": "me", "password": "secret"}]`
      </td>

      <td>
        \[]
      </td>

      <td style={{ "text-align": "center" }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **DEFAULT\_JMX\_HOST**
        </DNT>
      </td>

      <td>
        L&apos;hôte par défaut pour collecter les métriques JMX. Si le champ hôte est omis d&apos;une configuration de producteur ou de consommateur, cette valeur sera utilisée.
      </td>

      <td>
        hôte local
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **DEFAULT\_JMX\_PORT**
        </DNT>
      </td>

      <td>
        Le port par défaut pour collecter les métriques JMX. Si le champ de port est omis d&apos;une configuration de producteur ou de consommateur, cette valeur sera utilisée.
      </td>

      <td>
        9999
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **DEFAULT\_JMX\_USER**
        </DNT>
      </td>

      <td>
        L&apos;utilisateur par défaut qui se connecte à l&apos;hôte JMX pour collecter des métriques. Si le champ nom d&apos;utilisateur est omis d&apos;une configuration de producteur ou de consommateur, cette valeur sera utilisée.
      </td>

      <td>
        administrateur
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **DEFAULT\_JMX\_PASSWORD**
        </DNT>
      </td>

      <td>
        Le mot de passe par défaut pour se connecter à l&apos;hôte JMX. Si le champ mot de passe est omis d&apos;une configuration de producteur ou de consommateur, cette valeur sera utilisée.
      </td>

      <td>
        administrateur
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **METRICS**
        </DNT>
      </td>

      <td>
        Définissez sur `true` pour activer la collecte Métriques uniquement.
      </td>

      <td>
        FAUX
      </td>

      <td style={{ 'text-align': 'center' }} />
    </tr>

    <tr>
      <td>
        <DNT>
          **INVENTORY**
        </DNT>
      </td>

      <td>
        Définissez sur `true` pour activer la collecte d’inventaire uniquement.
      </td>

      <td>
        FAUX
      </td>

      <td style={{ 'text-align': 'center' }} />
    </tr>
  </tbody>
</table>

#### Options JMX SSL et délai d&apos;expiration

Ces options s&apos;appliquent à toutes les connexions JMX sur l&apos;instance.

&apos; &apos; &apos; &apos; &apos; &apos; &apos; &apos;

<table>
  <thead>
    <tr>
      <th style={{ width: "150px" }}>
        Paramètre
      </th>

      <th>
        Description
      </th>

      <th>
        Défaut
      </th>

      <th>
        S&apos;applique à
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        <DNT>
          **KEY\_STORE**
        </DNT>
      </td>

      <td>
        Le chemin d&apos;accès du magasin de clés contenant le certificat SSL du client JMX.
      </td>

      <td>
        N/A
      </td>

      <td style={{ "text-align": "center" }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **KEY\_STORE\_PASSWORD**
        </DNT>
      </td>

      <td>
        Le mot de passe du magasin de clés SSL JMX.
      </td>

      <td>
        N/A
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **TRUST\_STORE**
        </DNT>
      </td>

      <td>
        Le chemin d&apos;accès du magasin de clés de confiance contenant le certificat SSL du serveur JMX.
      </td>

      <td>
        N/A
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **TRUST\_STORE\_PASSWORD**
        </DNT>
      </td>

      <td>
        Le mot de passe du magasin de confiance JMX.
      </td>

      <td>
        N/A
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **TIMEOUT**
        </DNT>
      </td>

      <td>
        Le délai d&apos;expiration d&apos;une requête JMX individuelle en millisecondes.
      </td>

      <td>
        10000
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>
  </tbody>
</table>

## Configurer la collection KafkaOffsetSample [#KafkaOffsetSample-collection]

L&apos;intégration Kafka collecte à la fois les informations Métriques et Inventaire. Consultez la colonne <DNT>**Applies To**</DNT> ci-dessous pour savoir quels paramètres peuvent être utilisés pour chaque collection spécifique :

&apos; &apos; &apos; &apos; &apos; &apos;

<table>
  <thead>
    <tr>
      <th style={{ width: "150px" }}>
        Paramètre
      </th>

      <th>
        Description
      </th>

      <th>
        Défaut
      </th>

      <th>
        S&apos;applique à
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        <DNT>
          **CLUSTER\_NAME**
        </DNT>
      </td>

      <td>
        nom défini par l&apos;utilisateur pour identifier de manière unique le cluster monitoré. <DNT>**Required**</DNT>.
      </td>

      <td>
        N/A
      </td>

      <td style={{ "text-align": "center" }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **KAFKA\_VERSION**
        </DNT>
      </td>

      <td>
        La version du courtier Kafka à laquelle vous vous connectez, utilisée pour définir les versions d&apos;API optimales. Elle doit correspondre -ou être inférieure- à la version du courtier.

        Les versions antérieures à 1.0.0 peuvent manquer de certaines fonctionnalités.

        <DNT>**Note that if the broker binary name is kafka\_2.12-2.7.0 the Kafka api version to be used is 2.7.0, the preceding 2.12 is the Scala language version**</DNT>.
      </td>

      <td>
        1.0.0
      </td>

      <td style={{ "text-align": "center" }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **AUTODISCOVER\_STRATEGY**
        </DNT>
      </td>

      <td>
        la méthode de découverte des courtiers. Les options sont `zookeeper` ou `bootstrap`.
      </td>

      <td>
        zookeeper
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **CONSUMER\_OFFSET**
        </DNT>
      </td>

      <td>
        Renseignez les données de décalage du consommateur dans KafkaOffsetSample si elles sont définies sur true.

        <DNT>
          **Note that this option will skip Broker/Consumer/Producer collection and only collect KafkaOffsetSample**
        </DNT>
      </td>

      <td>
        FAUX
      </td>

      <td style={{ "text-align": "center" }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **CONSUMER\_GROUP\_REGEX**
        </DNT>
      </td>

      <td>
        modèle d&apos;expression régulière qui correspond aux groupes de consommateurs pour lesquels collecter des statistiques de décalage. Ceci se limite à la collecte de statistiques pour 300 groupes de consommateurs.

        Remarque : cette option doit être définie lorsque CONSUMER\_OFFSET est vrai.
      </td>

      <td>
        N/A
      </td>

      <td style={{ "text-align": "center" }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **INACTIVE\_CONSUMER\_GROUP\_OFFSET**
        </DNT>
      </td>

      <td>
        Collecte les métriques de décalage des groupes de consommateurs sans consommateur actif, cela nécessite que consommateur soit défini sur true.
      </td>

      <td>
        FAUX
      </td>

      <td style={{ "text-align": "center" }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **CONSUMER\_GROUP\_OFFSET\_BY\_TOPIC**
        </DNT>
      </td>

      <td>
        Active une agrégation métrique supplémentaire pour consumerGroup par sujet. il nécessite que CONSUMER\_OFFSET soit défini sur true.
      </td>

      <td>
        N/A
      </td>

      <td style={{ "text-align": "center" }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **METRICS**
        </DNT>
      </td>

      <td>
        Définissez sur `true` pour activer la collecte Métriques uniquement.
      </td>

      <td>
        FAUX
      </td>

      <td style={{ 'text-align': 'center' }} />
    </tr>

    <tr>
      <td>
        <DNT>
          **INVENTORY**
        </DNT>
      </td>

      <td>
        Définissez sur `true` pour activer la collecte d’inventaire uniquement.
      </td>

      <td>
        FAUX
      </td>

      <td style={{ 'text-align': 'center' }} />
    </tr>
  </tbody>
</table>

## Arguments de découverte automatique de Zookeeper [#zookeeper-autodiscovery]

Ceci n&apos;est pertinent que lorsque l&apos;option `autodiscover_strategy` est définie sur `zookeeper`.

&apos; &apos; &apos; &apos; &apos; &apos; &apos; &apos;

<table>
  <thead>
    <tr>
      <th style={{ width: "150px" }}>
        Paramètre
      </th>

      <th>
        Description
      </th>

      <th>
        Défaut
      </th>

      <th>
        S&apos;applique à
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        <DNT>
          **ZOOKEEPER\_HOSTS**
        </DNT>
      </td>

      <td>
        La liste des hôtes Apache ZooKeeper (au format JSON) qui doivent être connectés.

        <DNT>
          **If `CONSUMER_OFFSET` is set to `false` `KafkaBrokerSamples` and `KafkaTopicSamples` will be collected.**
        </DNT>
      </td>

      <td>
        \[]
      </td>

      <td style={{ "text-align": "center" }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **ZOOKEEPER\_AUTH\_SCHEME**
        </DNT>
      </td>

      <td>
        Le schéma d&apos;authentification ZooKeeper utilisé pour se connecter. Actuellement, la seule valeur prise en charge est `digest`. Si omis, aucune authentification n&amp;apos;est utilisée.
      </td>

      <td>
        N/A
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **ZOOKEEPER\_AUTH\_SECRET**
        </DNT>
      </td>

      <td>
        Le secret d&apos;authentification ZooKeeper utilisé pour se connecter. Doit être de la forme `username:password`. Requis uniquement si `zookeeper_auth_scheme` est spécifié.
      </td>

      <td>
        N/A
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **ZOOKEEPER\_PATH**
        </DNT>
      </td>

      <td>
        Le nœud Zookeeper sous lequel réside la configuration Kafka. La valeur par défaut est `/`.
      </td>

      <td>
        N/A
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **PREFERRED\_LISTENER**
        </DNT>
      </td>

      <td>
        Utilisez un écouteur spécifique pour vous connecter à un courtier. Si cette option n&apos;est pas définie, le premier écouteur qui réussit une connexion de test est utilisé. Les valeurs prises en charge sont `PLAINTEXT`, `SASL_PLAINTEXT`, `SSL` et `SASL_SSL`.

        **Notez que les protocoles `SASL_*` prennent uniquement en charge l’authentification Kerberos (GSSAPI).**
      </td>

      <td>
        N/A
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>
  </tbody>
</table>

## Arguments de découverte du courtier Bootstrap [#bootstrap-broker]

Ceci n&apos;est pertinent que lorsque l&apos;option `autodiscover_strategy` est définie sur `bootstrap`.

&apos; &apos; &apos; &apos; &apos; &apos;

<table>
  <thead>
    <tr>
      <th style={{ width: "150px" }}>
        Paramètre
      </th>

      <th>
        Description
      </th>

      <th>
        Défaut
      </th>

      <th>
        S&apos;applique à
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        <DNT>
          **BOOTSTRAP\_BROKER\_HOST**
        </DNT>
      </td>

      <td>
        L&apos;hôte du courtier bootstrap.

        <DNT>
          **If `CONSUMER_OFFSET` is set to `false` `KafkaBrokerSamples` and `KafkaTopicSamples` will be collected.**
        </DNT>
      </td>

      <td>
        N/A
      </td>

      <td style={{ "text-align": "center" }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **BOOTSTRAP\_BROKER\_KAFKA\_PORT**
        </DNT>
      </td>

      <td>
        Le port Kafka pour le courtier bootstrap.
      </td>

      <td>
        N/A
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **BOOTSTRAP\_BROKER\_KAFKA\_PROTOCOL**
        </DNT>
      </td>

      <td>
        Le protocole à utiliser pour se connecter au courtier bootstrap. Les valeurs prises en charge sont `PLAINTEXT`, `SASL_PLAINTEXT`, `SSL` et `SASL_SSL`.

        **Notez que les protocoles `SASL_*` prennent uniquement en charge l’authentification Kerberos (GSSAPI).**
      </td>

      <td>
        PLAINTEXT
      </td>

      <td style={{ "text-align": "center" }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **BOOTSTRAP\_BROKER\_JMX\_PORT**
        </DNT>
      </td>

      <td>
        Le port JMX à utiliser pour la collecte sur chaque courtier du cluster.

        <DNT>
          **Note that all discovered brokers should have JMX active on this port**
        </DNT>
      </td>

      <td>
        N/A
      </td>

      <td style={{ "text-align": "center" }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **BOOTSTRAP\_BROKER\_JMX\_USER**
        </DNT>
      </td>

      <td>
        L&apos;utilisateur JMX à utiliser pour la collecte sur chaque courtier du cluster.
      </td>

      <td>
        N/A
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **BOOTSTRAP\_BROKER\_JMX\_PASSWORD**
        </DNT>
      </td>

      <td>
        Le mot de passe JMX à utiliser pour la collecte sur chaque courtier du cluster.
      </td>

      <td>
        N/A
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>
  </tbody>
</table>

## Options JMX SSL et délai d&apos;expiration [#jmx-ssl-timeout]

Ces règles s’appliquent à toutes les connexions JMX sur une instance.

&apos; &apos; &apos; &apos; &apos; &apos; &apos; &apos; &apos; &apos; &apos; &apos;

<table>
  <thead>
    <tr>
      <th style={{ width: "150px" }}>
        Paramètre
      </th>

      <th>
        Description
      </th>

      <th>
        Défaut
      </th>

      <th>
        S&apos;applique à
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        <DNT>
          **KEY\_STORE**
        </DNT>
      </td>

      <td>
        Le chemin d&apos;accès du magasin de clés contenant le certificat SSL du client JMX.
      </td>

      <td>
        N/A
      </td>

      <td style={{ "text-align": "center" }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **KEY\_STORE\_PASSWORD**
        </DNT>
      </td>

      <td>
        Le mot de passe du magasin de clés SSL JMX.
      </td>

      <td>
        N/A
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **TRUST\_STORE**
        </DNT>
      </td>

      <td>
        Le chemin d&apos;accès du magasin de clés de confiance contenant le certificat SSL du serveur JMX.
      </td>

      <td>
        N/A
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **TRUST\_STORE\_PASSWORD**
        </DNT>
      </td>

      <td>
        Le mot de passe du magasin de confiance JMX.
      </td>

      <td>
        N/A
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **DEFAULT\_JMX\_USER**
        </DNT>
      </td>

      <td>
        L&apos;utilisateur par défaut qui se connecte à l&apos;hôte JMX pour collecter des métriques. Si le champ nom d&apos;utilisateur est omis pour un hôte JMX, cette valeur sera utilisée.
      </td>

      <td>
        administrateur
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **DEFAULT\_JMX\_PASSWORD**
        </DNT>
      </td>

      <td>
        Le mot de passe par défaut pour se connecter à l&apos;hôte JMX. Si le champ de mot de passe est omis pour un hôte JMX, cette valeur sera utilisée.
      </td>

      <td>
        administrateur
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>

    <tr>
      <td>
        <DNT>
          **TIMEOUT**
        </DNT>
      </td>

      <td>
        Le délai d&apos;expiration d&apos;une requête JMX individuelle en millisecondes.
      </td>

      <td>
        10000
      </td>

      <td style={{ 'text-align': 'center' }}>
        MI
      </td>
    </tr>
  </tbody>
</table>

## Dépannage [#troubleshooting]

<CollapserGroup>
  <Collapser id="duplicate-info" title="Données en double signalées">
    Pour les agents monitoring les producteurs et/ou les consommateurs, et qui ont `Topic mode` défini sur `All`: il peut y avoir un problème de signalement de données en double. Pour arrêter les données en double : assurez-vous que l’ [option de configuration](#config) `Collect topic size` est définie sur false.
  </Collapser>

  &apos; &apos;

  <Collapser id="zookeeper-node-not-found" title="L'intégration enregistre les erreurs « zk : nœud non trouvé »">
    Assurez-vous que `zookeeper_path` est correctement défini dans le [fichier de configuration](#config).
  </Collapser>

  <Collapser id="jmx-connection-errors" title="Erreurs de connexion JMX">
    L&apos;intégration Kafka utilise un outil d&apos;assistance JMX appelé `nrjmx` pour récupérer les métriques JMX auprès des courtiers, des consommateurs et des producteurs. JMX doit être activé et configuré sur tous les courtiers du cluster. De plus, les pare-feu doivent être réglés pour autoriser les connexions de l’hôte exécutant l’intégration aux courtiers via le port JMX.

    Pour vérifier si JMX est correctement configuré, exécutez la commande suivante pour chaque courtier à partir de la machine exécutant l&apos;intégration Kafka. Remplacez les variables `PORT`, `USERNAME` et `PASSWORD` par les paramètres JMX correspondants pour les courtiers :

    ```shell
    echo "*:*" | nrjmx -hostname MY_HOSTNAME -port MY_PORT -v -username MY_USERNAME -password MY_PASSWORD
    ```

    La commande doit générer une sortie affichant une longue série de métriques sans aucune erreur.
  </Collapser>

  <Collapser id="kerberos-authentication" title="Échec de l'authentification Kerberos">
    L&apos;intégration peut afficher une erreur comme la suivante :

    ```shell
    KRB Error: (6) KDC_ERR_C_PRINCIPAL_UNKNOWN Client not found in Kerberos database
    ```

    Vérifiez le keytab avec la commande kinit. Remplacez les champs en surbrillance par vos valeurs :

    ```shell
    $ kinit -k -t KEY_TAB_PATH USERNAME
    ```

    Si la combinaison nom d&apos;utilisateur/keytab est correcte, la commande ci-dessus devrait se terminer sans imprimer aucune erreur.

    Vérifiez le royaume à l’aide de la commande klist :

    ```shell
    $ klist |grep "Default principal:"
    ```

    Vous devriez voir quelque chose comme ceci :

    ```shell
    Default principal: johndoe@a_realm_name
    ```

    Vérifiez que le nom d’utilisateur et le domaine imprimés correspondent aux paramètres `sasl_gssapi_realm` et `sasl_gssapi_username` dans la configuration d’intégration.
  </Collapser>
</CollapserGroup>