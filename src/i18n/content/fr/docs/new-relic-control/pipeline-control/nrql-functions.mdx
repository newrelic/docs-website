---
title: Prise en charge des fonctions NRQL dans les règles de gateway
metaDescription: Learn about the support for NRQL functions in Pipeline Control gateway rules and how to use them effectively.
freshnessValidatedDate: never
translationType: machine
---

Ce document décrit les fonctions NRQL prises en charge dans les règles de passerelle Contrôle de pipeline. Utilisez ces fonctions pour créer des règles plus puissantes et plus précises pour filtrer et gérer vos données.

<table>
  <thead>
    <tr>
      <th>
        Fonction
      </th>

      <th>
        Description
      </th>

      <th>
        Exemple de requête NRQL
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        [`aparse()`](/docs/nrql/nrql-syntax-clauses-functions/#func-aparse)
      </td>

      <td>
        Extrait une valeur d&apos;une chaîne en fonction d&apos;un modèle spécifié.
      </td>

      <td>
        `DELETE FROM Log WHERE aparse(message, 'Error: %') = 'timeout'`
      </td>
    </tr>

    <tr>
      <td>
        [`dimensions()`](/docs/nrql/nrql-syntax-clauses-functions/#func-dimensions)
      </td>

      <td>
        Filtre les données en fonction des facettes ou des dimensions associées à vos métriques/événement.
      </td>

      <td>
        `DELETE FROM Log WHERE dimensions() LIKE '%collectd%'`
      </td>
    </tr>

    <tr>
      <td>
        [`floor()`](/docs/nrql/nrql-syntax-clauses-functions/#floor)
      </td>

      <td>
        Renvoie le plus grand entier inférieur ou égal au nombre spécifié.
      </td>

      <td>
        `DELETE FROM Metric WHERE floor(duration) > 5`
      </td>
    </tr>

    <tr>
      <td>
        [`getField()`](/docs/nrql/nrql-syntax-clauses-functions/#func-getfield)
      </td>

      <td>
        Extrait un champ spécifique d&apos;une structure de données complexe (par exemple, un objet JSON).
      </td>

      <td>
        `DELETE FROM Metric WHERE getField(cpu_usage, percent) > 90`
      </td>
    </tr>

    <tr>
      <td>
        [`hourOf()`](/docs/nrql/nrql-syntax-clauses-functions/#func-minOf)
      </td>

      <td>
        Extrait le composant horaire d&apos;un horodatage.
      </td>

      <td>
        `DELETE FROM Log WHERE hourOf(timestamp) IN (2, 3, 4)`
      </td>
    </tr>

    <tr>
      <td>
        [`mod()`](/docs/nrql/nrql-syntax-clauses-functions/#func-mod)
      </td>

      <td>
        Renvoie le reste d&apos;une opération de division.
      </td>

      <td>
        `DELETE FROM Log WHERE mod(timestamp/1000,20) != 1`
      </td>
    </tr>

    <tr>
      <td>
        [`numeric()`](/docs/nrql/nrql-syntax-clauses-functions/#type-conversion)
      </td>

      <td>
        Convertit une valeur de chaîne en un type numérique.
      </td>

      <td>
        `DELETE FROM Log WHERE numeric(responseTime) > 1000`
      </td>
    </tr>

    <tr>
      <td>
        [`round()`](/docs/nrql/nrql-syntax-clauses-functions/#round)
      </td>

      <td>
        Arrondit un nombre à l&apos;entier le plus proche ou à un nombre spécifié de décimales.
      </td>

      <td>
        `DELETE FROM Metric WHERE round(latency, 2) > 0.5`
      </td>
    </tr>

    <tr>
      <td>
        [`string()`](/docs/nrql/nrql-syntax-clauses-functions/#func-string)
      </td>

      <td>
        Convertit une valeur numérique ou autre en un type de chaîne.
      </td>

      <td>
        `DELETE FROM Log WHERE string(statusCode) = '404'`
      </td>
    </tr>

    <tr>
      <td>
        [`substring()`](/docs/nrql/nrql-syntax-clauses-functions/#func-substring)
      </td>

      <td>
        Extrait une partie spécifiée d&apos;une chaîne.
      </td>

      <td>
        `DELETE FROM Log WHERE substring(transactionId, 1, 3) = 'tmp'`
      </td>
    </tr>

    <tr>
      <td>
        `weekdayOf()`
      </td>

      <td>
        Extrait le jour de la semaine d&apos;un horodatage (par exemple, « Lundi », « Dimanche »).
      </td>

      <td>
        `DELETE FROM Metric WHERE weekdayOf(timestamp) IN ('Saturday', 'Sunday')`
      </td>
    </tr>
  </tbody>
</table>

## Exemples de fonctions NRQL multiples dans les règles de gateway

Ces exemples montrent comment vous pouvez combiner plusieurs fonctions et les utiliser dans des scénarios plus complexes pour obtenir un filtrage et une suppression précis des données.

* Cette règle supprime les données des conteneurs qui sont sortis, mais conserve les enregistrements des conteneurs qui sont sortis au cours des 10 dernières minutes :

```sql
DELETE FROM ContainerSample WHERE state = 'exited' AND status LIKE '%Exited%' AND NOT (status LIKE '%second%' AND numeric(aparse(status,'%Exited (%) * seconds ago%')) < 10) AND NOT (status LIKE '%About a minute ago%' OR status LIKE '%minute%' AND numeric(aparse(status,'%Exited (%) * minutes ago%')) < 10)
```

* Cette règle supprime les logs associés à des modèles de logs spécifiques (`collectd`) et qui ne sont pas des types d&apos;événements personnalisés :

```sql
DELETE FROM Log, LogExtendedRecord WHERE dimensions() LIKE '%collectd%' AND newrelic.logs.customEventType IS NULL
```

* Cette règle supprime un type spécifique de log d&apos;erreurs, mais les échantillonne en conservant uniquement les enregistrements dont l&apos;horodatage est un multiple de 101 :

```sql
DELETE FROM Log WHERE message LIKE '%lib/ladon/middleware/caching.rb:49 run> terminated with exception%' AND floor(timestamp/101) = (timestamp/101) AND newrelic.logs.customEventType IS NULL
```

Ces nouvelles fonctions étendent considérablement les capacités de votre requête NRQL lorsque vous travaillez avec le gateway de Pipeline Control, permettant une analyse et une gestion des données plus précises.