---
title: Dépannage des règles cloud Pipeline Control
metaDescription: Diagnose and resolve common issues with Pipeline Control cloud rules that drop data in New Relic infrastructure.
freshnessValidatedDate: never
translationType: machine
---

Ce guide vous aide à résoudre les problèmes courants liés aux règles cloud de Pipeline Control. Les règles cloud s&apos;exécutent dans l&apos;infrastructure de New Relic et utilisent le NRQL pour supprimer les données indésirables une fois qu&apos;elles ont atteint les points de terminaison de New Relic.

## La règle ne rejette pas les données

### Syntaxe NRQL invalide

**Problème**: La règle contient une syntaxe NRQL non valide et ne parvient pas à traiter les données.

**Symptômes**:

* La règle apparaît dans l&apos;interface, mais aucune donnée n&apos;est rejetée
* Les métriques de rejet attendues n&apos;apparaissent pas
* Le statut de la règle s&apos;affiche comme inactif ou en échec

**Solution**:

* Validez votre syntaxe NRQL dans le générateur de requêtes en remplaçant `DELETE` par `SELECT` pour tester la logique de la requête

* Vérifiez que la requête renvoie les données attendues avant de la rétablir à `DELETE`

* Vérifiez les erreurs de syntaxe NRQL courantes :

  * Clause `WHERE` manquante ou incorrecte
  * Noms d&apos;attributs ou types de données invalides
  * Opérateurs de comparaison incorrects

* Consultez la [documentation NRQL](/docs/nrql/get-started/introduction-nrql-new-relics-query-language/) pour obtenir des conseils sur la syntaxe

* Modifiez la règle pour corriger les erreurs de syntaxe et enregistrez.

### Règle ne correspondant pas aux données attendues

**Problème**: La requête NRQL est syntaxiquement correcte mais ne correspond pas aux données que vous souhaitez supprimer.

**Symptômes**:

* La règle est active mais les métriques de rejet affichent des volumes nuls ou faibles
* Les données censées être supprimées apparaissent toujours dans New Relic
* La requête ne renvoie aucun résultat lorsqu&apos;elle est testée avec `SELECT`

**Solution**:

* Testez votre règle avec `SELECT` au lieu de `DELETE` pour voir à quelles données elle correspond

* Vérifiez que les noms d&apos;attributs correspondent à vos données réelles :

  * Vérifiez l&apos;orthographe et la casse de l&apos;attribut
  * Utilisez l&apos;explorateur de données pour inspecter les noms réels des attributs dans votre télémétrie

* Confirmez que les types de données correspondent (comparaisons chaîne vs nombre)

* Vérifiez la plage de temps - assurez-vous que des données existent dans la fenêtre temporelle sélectionnée

* Vérifiez que la clause `FROM` cible le type de données correct (Log, Metric, Span, Transaction)

* Affinez vos conditions `WHERE` pour correspondre plus précisément à vos données

### Règle déployée sur le mauvais compte

**Problème**: La règle est active mais traite les données dans un compte différent de celui prévu.

**Symptômes**:

* La règle existe dans l&apos;interface utilisateur mais les données attendues apparaissent toujours.
* Les métriques supprimées ne s&apos;affichent pas dans le compte que vous consultez
* Confusion concernant le compte affecté par la règle

**Solution**:

* Vérifiez le sélecteur de compte dans l&apos;interface utilisateur de Pipeline Control
* N&apos;oubliez pas que les règles cloud sont **spécifiques au compte** (contrairement aux règles de gateway qui s&apos;appliquent à l&apos;échelle de l&apos;organisation)
* Vérifiez que vous consultez le même compte sur lequel la règle est déployée.
* Vérifiez la liste des règles dans le compte approprié pour confirmer qu&apos;elle s&apos;y trouve
* Si nécessaire, recréez la règle dans le compte prévu.

## Problèmes de création et de modification de règles

### Impossible de créer ou de modifier des règles

**Problème**: Vous n&apos;avez pas l&apos;autorisation de créer ou de modifier des règles cloud.

**Symptômes**:

* Les boutons Créer/modifier sont désactivés ou manquants
* Message d&apos;erreur concernant des permissions insuffisantes
* Les modifications ne s&apos;enregistrent pas

**Solution**:

* Vérifiez que vous disposez du rôle et des capacités nécessaires pour les règles cloud de Pipeline Control
* Contactez votre administrateur de compte pour obtenir les autorisations appropriées
* Consultez la [documentation sur les permissions des utilisateurs](/docs/accounts/accounts-billing/new-relic-one-user-management/user-permissions/) pour les capacités requises
* Assurez-vous d&apos;être sur le bon compte avec les accès appropriés

### Modifications de règles non visibles

**Problème**: vous avez créé ou modifié une règle mais ne voyez pas les modifications dans la liste des règles.

**Symptômes**:

* Les modifications apportées n&apos;apparaissent pas dans l&apos;interface utilisateur
* La liste de règles affiche une ancienne version
* Les modifications semblent avoir disparu

**Solution**:

* Actualisez la page de l&apos;interface utilisateur Pipeline Control
* Vérifiez que vous avez enregistré la règle (les modifications sont appliquées immédiatement après l&apos;enregistrement)
* Vérifiez que la règle est activée (les règles peuvent être désactivées sans les supprimer)
* Vérifiez que vous consultez le bon compte dans le sélecteur de compte
* Les modifications se propagent en quelques secondes - si elles ne sont pas visibles après actualisation, essayez de modifier la règle à nouveau

## Problèmes de monitoring et de métriques

### Métriques de rejet manquantes

**Problème**: La règle est active mais vous ne voyez pas les métriques concernant les données rejetées.

**Symptômes**:

* La règle apparaît comme active dans l&apos;interface utilisateur
* Aucune métrique de volume de rejet n&apos;apparaît dans les dashboards
* Impossible de confirmer si la règle fonctionne

**Solution**:

* Attendez quelques minutes que les métriques apparaissent après le déploiement de la règle.
* Vérifiez que la règle correspond bien et rejette les données en testant avec `SELECT`
* Vérifiez le bon compte : les métriques de rejet apparaissent dans le même compte que la règle.
* Interrogez directement les métriques de suppression à l&apos;aide de NRQL :
  ```sql
  FROM NrIntegrationError SELECT count(*) WHERE newRelicFeature = 'pipeline_control'
  ```
* Si la règle ne correspond pas aux données, reportez-vous à [Règle ne correspondant pas aux données attendues](#rule-not-matching-expected-data)

### Impact inattendu sur les coûts

**Problème**: Les coûts des règles cloud sont plus élevés que prévu.

**Symptômes**:

* Nombre élevé de BSE (milliards d&apos;événements scannés)
* Les coûts ne correspondent pas aux volumes de rejet attendus
* Préoccupation concernant l&apos;efficacité de la mesure

**Solution**:

* Vérifiez la clause `WHERE` de votre règle : des conditions plus larges analysent plus d&apos;événements

* Envisagez d&apos;utiliser des conditions plus sélectives pour réduire les BSE scannés

* Rappelez-vous que les BSE représentent généralement une fraction du coût bien inférieure à celle des Go rejetés

* Pour les sources de données à volume élevé, envisagez plutôt d&apos;utiliser des [règles de gateway](/docs/new-relic-control/pipeline-control/gateway/overview), qui :

  * Traiter les données avant qu&apos;elles n&apos;atteignent New Relic
  * Facturation basée sur le volume entrant, indépendamment des rejets
  * Peut être plus rentable pour le filtrage à grande échelle

* Consultez la [documentation sur les coûts](/docs/new-relic-control/pipeline-control/costs) pour plus de détails sur les modèles de mesure

## Problèmes de comportement des données

### Des données apparaissent toujours après le déploiement de la règle

**Problème**: Une règle de suppression a été déployée mais les données apparaissent toujours dans New Relic.

**Symptômes**:

* A créé une règle `DELETE` ciblant des données spécifiques
* La règle apparaît comme active
* Les données attendues apparaissent toujours dans les dashboards et les requêtes

**Solution**:

* Vérifiez que la règle utilise `DELETE` et pas seulement `SELECT`

* Vérifiez que la règle est **activée** (les règles désactivées ne traitent pas de données)

* Testez la règle avec `SELECT` pour confirmer qu&apos;elle correspond aux données attendues

* Vérifiez que les conditions `WHERE` de la règle correspondent bien à vos données

* N&apos;oubliez pas que les règles cloud n&apos;affectent que les **nouvelles données arrivant après le déploiement**

  * Les données historiques déjà présentes dans NRDB ne sont pas affectées
  * Les données envoyées avant l&apos;activation de la règle seront conservées

* Les règles s&apos;activent dans les secondes suivant l&apos;enregistrement - si des données continuent d&apos;apparaître, la règle ne correspond peut-être pas correctement.

* Vérifiez que vous consultez des données récentes, et non des données antérieures au déploiement de la règle.

* Vérifiez le bon compte sur lequel la règle est déployée.

### Règle rejetant trop de données

**Problème**: La règle rejette plus de données que prévu.

**Symptômes**:

* Des données attendues sont manquantes dans New Relic
* Les métriques de rejet affichent des volumes plus élevés que prévu
* Données manquantes dans les dashboards ou les alertes

**Solution**:

* Examinez attentivement la clause `WHERE` de la règle

* Testez la règle avec `SELECT` pour voir exactement à quoi elle correspond

* Recherchez des conditions trop larges :

  * L&apos;utilisation de `LIKE '%value%'` peut correspondre à plus d&apos;éléments que prévu.
  * Conditions manquantes pour restreindre le périmètre
  * Logique booléenne incorrecte (`AND` vs `OR`)

* Modifier la règle pour ajouter des conditions plus spécifiques

* Envisagez de créer plusieurs règles spécifiques au lieu d&apos;une seule règle large

* Monitorez les métriques de rejet après les modifications pour vérifier le bon fonctionnement.

## Prochaines étapes

Si vous rencontrez toujours des problèmes après avoir suivi ce guide de dépannage :

* Consultez la [documentation sur les règles cloud](/docs/new-relic-control/pipeline-control/cloud-rules/create-pipeline-rules) pour vérifier la configuration de vos règles
* Consultez la [documentation NRQL](/docs/nrql/get-started/introduction-nrql-new-relics-query-language/) pour obtenir des conseils sur la syntaxe des requêtes
* Utilisez le générateur de requêtes pour tester les versions `SELECT` de vos règles avant le déploiement.
* Consultez la [documentation sur les coûts](/docs/new-relic-control/pipeline-control/costs) pour comprendre la mesure des règles cloud
* Contactez le support New Relic avec la définition de votre règle et les informations de votre compte