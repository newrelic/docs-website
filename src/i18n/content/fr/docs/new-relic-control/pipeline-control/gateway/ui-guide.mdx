---
title: Guide de l'interface utilisateur du gateway
metaDescription: 'Use the form-based Pipeline Control Gateway UI to create transformation, filtering, and sampling rules without writing YAML configuration.'
freshnessValidatedDate: never
translationType: machine
---

L&apos;interface utilisateur du gateway Pipeline Control fournit une interface basée sur des formulaires pour créer et gérer des règles de gateway sans écrire directement de YAML. L&apos;interface utilisateur organise la logique de traitement en trois catégories de règles : taux d&apos;échantillonnage, filtre et transformation. Chaque catégorie est configurable via des boîtes de dialogue modales guidées.

## Organisation de l&apos;interface utilisateur

L&apos;interface utilisateur du gateway est organisée en trois sections principales :

### Taux d&apos;échantillonnage

Configurez l&apos;échantillonnage probabiliste avec des règles conditionnelles pour contrôler le pourcentage de données de télémétrie qui parviennent à New Relic. Prise en charge :

* Pourcentage d&apos;échantillonnage par défaut (0-100 %)
* Scénarios d&apos;échantillonnage conditionnel basés sur la correspondance d&apos;attributs

**Cas d&apos;utilisation courants :**

* &quot;Échantillonner 90 % des logs du service B, 83 % des logs du service A&quot;
* &quot;Conserver 100 % des erreurs, 100 % des traces &gt; 1 000 ms, échantillonner 10 % du reste&quot;

### Filtre

Créez des règles de filtrage basées sur OTTL pour filtrer conditionnellement des enregistrements de télémétrie entiers ou des attributs spécifiques. Prise en charge :

* Correspondance de motif avec l&apos;opérateur `matches` pour les regex
* Filtrage basé sur les attributs (environnement, nom de la métrique, niveau de log)
* Conditions combinées avec la logique `and`/`or`
* Opérateurs de comparaison (`==`, `!=`, `>`, `<`, `>=`, `<=`)

**Cas d&apos;utilisation courants :**

* &quot;Supprimer les données de l&apos;environnement de test&quot;
* &quot;Supprimer les logs de niveau debug en production&quot;
* &quot;Supprimer les spans de health check&quot;
* &quot;Supprimer les métriques avec le préfixe test&quot;

### Transformer

Définissez des règles de transformation basées sur OTTL pour modifier, enrichir ou analyser les données de télémétrie. Prise en charge :

* Ajout et modification d&apos;attributs à l&apos;aide de fonctions OTTL
* Analyse de chaînes avec des motifs regex
* Transformations conditionnelles avec règles de correspondance
* Plusieurs instructions OTTL par transformation

**Cas d&apos;utilisation courants :**

* &quot;Ajouter des tags d&apos;environnement et de région à toutes les métriques&quot;
* &quot;Analyser le format de log NGINX en attributs structurés&quot;
* &quot;Normaliser les noms de service dans les environnements&quot;
* &quot;Extraire les codes d&apos;état HTTP des messages de log&quot;

## Créer des règles dans l&apos;interface utilisateur

### Création d&apos;une règle de taux d&apos;échantillonnage

1. Dans l&apos;interface utilisateur du gateway, dans le bloc de taux d&apos;échantillonnage, cliquez sur l&apos;icône d&apos;engrenage/paramètres pour créer une nouvelle configuration d&apos;échantillonnage.

2. Configurer l&apos;échantillonnage global :

   * Définir le pourcentage d&apos;échantillonnage global (0-100 %).
   * Utilisez le curseur ou saisissez une valeur numérique. Cela s&apos;applique à toutes les données qui ne correspondent pas aux règles conditionnelles.

3. Ajouter des scénarios conditionnels (facultatif) :

   * Cliquez sur l&apos;icône PLUS pour créer des taux d&apos;échantillonnage spécifiques à une condition.
   * Pour chaque scénario, configurez : un nom descriptif (par exemple, &quot;`B service sample`&quot;), une description (par exemple, &quot;`B service description`&quot;), une expression de correspondance d&apos;attribut (par exemple, `attributes["appName"]=="TelemetryApp-ServiceB"`), un pourcentage d&apos;échantillonnage à l&apos;aide du curseur ou saisissez une valeur numérique (0-100 %)

4. Cliquez sur <DNT>**Save sample criteria**</DNT> pour appliquer les règles d&apos;échantillonnage.

### Créer une règle de filtrage

1. Dans l&apos;interface du gateway, cliquez sur l&apos;icône PLUS dans le bloc de filtre pour créer une nouvelle règle de filtrage.

2. Configurer les informations de base :

   * <DNT>**Rule name**</DNT>: Saisissez un nom descriptif.
   * <DNT>**Description**</DNT>: Expliquez ce que fait la règle.

3. Définissez une condition correspondant à vos données et cliquez sur <DNT>**Create rule**</DNT>.

4. Pour ajouter d&apos;autres conditions si nécessaire, répétez les étapes 1 à 3.

### Créer une règle de transformation

1. Dans l&apos;interface du gateway, cliquez sur l&apos;icône PLUS dans le bloc de transformations pour créer une nouvelle règle de transformation.

2. **Configurer les informations de base**:

   * <DNT>**Rule name**</DNT>: Saisissez un nom descriptif (par exemple, &quot;`parse-nginx-logs`&quot;)
   * <DNT>**Description**</DNT>: Expliquez ce que fait la transformation

3. **Définir des conditions correspondant à vos données**:

   * Ajoutez des conditions pour cibler des enregistrements de télémétrie spécifiques.
   * Cliquez sur <DNT>**Add condition**</DNT> pour ajouter plusieurs conditions :

   Plusieurs conditions sont évaluées avec une logique OU (si l&apos;une des conditions est remplie, la transformation s&apos;applique). Exemples de conditions : `body == "request failed"`, `severity.text == "ERROR"`, `severity.text == "FATAL_ERROR"` Laisser vide pour appliquer la transformation à tous les enregistrements. Chaque condition est affichée dans un champ de saisie distinct avec l&apos;opérateur `OR` entre elles.

4. **Définir les instructions OTTL**:

   * Ajouter une ou plusieurs instructions de transformation OTTL.
   * Cliquez sur <DNT>**Add statement**</DNT> pour ajouter plusieurs transformations.
   * Chaque instruction s&apos;exécute séquentiellement. Modifiez l&apos;ordre en faisant glisser la poignée à gauche de chaque instruction.
   * Exemples d&apos;instructions utilisant les fonctions OTTL : `set(severity_text, "FAIL")`, `set(attributes["processors"], true)`, `set(attributes["environment"], "staging")`

5. Cliquez sur <DNT>**Preview rule**</DNT> pour voir comment la transformation modifie les données d&apos;exemple.

6. Apportez des modifications jusqu&apos;à ce que vous soyez satisfait de la transformation.

7. Cliquez sur <DNT>**Create rule**</DNT> pour ajouter la transformation à votre gateway.

### Déployez vos modifications

Une fois les règles configurées, suivez ces étapes pour déployer votre configuration :

1. Cliquez sur <DNT>**Create Deployment**</DNT>.

2. Sur la nouvelle page de déploiement :

   * Saisissez un nom et une description pour le déploiement.
   * Identifiez l&apos;agent de gateway Pipeline Control sur lequel vous souhaitez effectuer le déploiement.
   * Ouvrez le menu à trois points à droite et cliquez sur <DNT>**Change version**</DNT>.

3. Dans la liste des versions, sélectionnez la version qui correspond à la configuration que vous venez de créer. (Les numéros de version s&apos;incrémentent automatiquement à chaque modification de configuration, il devrait donc s&apos;agir de la dernière version.)

4. Cliquez sur <DNT>**Add to deployment**</DNT> pour appliquer la configuration.

5. Cliquez sur <DNT>**Save draft**</DNT>, puis sur <DNT>**Start deployment**</DNT>.

6. Vous devez confirmer à nouveau que vous souhaitez lancer le déploiement. Cliquez à nouveau sur <DNT>**Start deployment**</DNT> pour confirmer.

## Ressources OpenTelemetry

* [Référence des fonctions OTTL](https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/pkg/ottl/ottlfuncs/README.md) - Liste complète des fonctions OTTL pour les transformations et les expressions booléennes pour le filtrage
* [Processeur de transformation](https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/processor/transformprocessor) - Documentation officielle du processeur de transformation
* [Processeur de filtre](https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/processor/filterprocessor) - Documentation officielle du processeur de filtre avec la syntaxe d&apos;expression booléenne OTTL
* [Processeur d&apos;échantillonnage probabiliste](https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/processor/probabilisticsamplerprocessor) - Documentation officielle du processeur d&apos;échantillonnage