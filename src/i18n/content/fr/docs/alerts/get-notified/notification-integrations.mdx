---
title: intégration notification d'alertes
tags:
  - Alerts
  - Destinations
metaDescription: Alerts notification integrations are specific services and platforms you can use to send notifications from New Relic.
freshnessValidatedDate: never
translationType: machine
---

L&apos;intégration notification d&apos;alertes vous permet de connecter des services et des plateformes spécifiques à la plateforme New Relic . Vous pouvez utiliser ces connexions pour envoyer des notifications depuis New Relic. Grâce à ces notifications, vous obtenez des informations sur les problèmes qui nécessitent un examen ou qui vous aident à prendre une décision concernant un problème détecté.

## Détails de l&apos;intégration [#detail]

En savoir plus sur chacune de nos intégrations notification spécifiques.

<CollapserGroup>
  <Collapser className="freq-link" id="jira" title="Atlassian Jira">
    Intégrez New Relic à Atlassian Jira (Cloud) et créez, mettez à jour et fermez automatiquement les problèmes Jira.

    <Video type="wistia" id="vp5rigddko" />

    ### Autorisations [#jira-permissions]

    <Callout variant="important">
      Cette intégration ne prend pas en charge l&apos;installation de JIRA sur site ou data center.
    </Callout>

    Les autorisations requises par Jira `API-Token` sont `BROWSE_PROJECTS`, `ASSIGN_ISSUES`, `CLOSE_ISSUES`, `CREATE_ISSUES`, `EDIT_ISSUES`, `RESOLVE_ISSUES`, `TRANSITION_ISSUES`, `USER_PICKER` et `ADD_COMMENTS`.

    Pour activer la synchronisation bidirectionnelle, le Jira `API-Key` fourni doit avoir un rôle `Admin` .

    ### Configurer une destination Jira [#set-up-jira]

    Créez des problèmes Jira, puis activez Jira et New Relic pour partager les mises à jour et rester synchronisés.

    Pour créer une destination Jira, suivez ces étapes :

    1. Allez à <DNT>**[one.newrelic.com &gt; All capabilities](https://one.newrelic.com/all-capabilities) &amp;gt; Alerts**</DNT>, cliquez sur <DNT>**Destinations**</DNT>, puis sélectionnez <DNT>**Jira**</DNT>.

    2. Saisissez les informations suivantes :

       * <DNT>**Name:**</DNT> Nom personnalisé pour identifier la destination.
       * <DNT>**URL:**</DNT> L&amp;apos;URL de la destination.
       * <DNT>**Username:**</DNT> L&amp;apos;adresse email de l&amp;apos;utilisateur.
       * <DNT>**API token:**</DNT> généré à partir de votre compte Atlassian.

    Avant d&apos;enregistrer la destination, nous vous recommandons de cliquer sur le bouton <DNT>**Test connection**</DNT> pour vérifier votre connexion.

    <img width="80%;" title="Jira destination configuration." alt="A screenshot of a Jira destination configuration." src="/images/accounts_screenshot-crop_jira-destination.webp" />

    ### Synchronisation bidirectionnelle [#jira-two-way]

    La synchronisation bidirectionnelle est applicable au flux de travail. Pour l&apos;activer, activez le bouton d&apos;intégration bidirectionnelle.

    Lorsqu&apos;il est activé, un [Webhook Jira](https://developer.atlassian.com/server/jira/platform/webhooks/) est créé dans votre compte Jira. Le webhook contient les détails d&amp;apos;accès à New Relic (URL et clé API).

    ### Synchronisation avec le flux de travail New Relic [#two-way-sync-workflows]

    * La fermeture d&apos;un problème New Relic se déclenche lorsque le statut du problème Jira passe à `done`.
    * La reconnaissance du problème New Relic se déclenche lorsque le statut du problème Jira passe à `in-progress`.

    ### Configurer le modèle de message dans le workflow [#configure-jira-message-template]

    Pour configurer un modèle pour un problème Jira, suivez ces étapes :

    1. Accédez à <DNT>**[one.newrelic.com &gt; All capabilities](https://one.newrelic.com/all-capabilities) &amp;gt; Alerts &amp;gt; Workflows**</DNT> et cliquez sur un workflow existant ou cliquez sur le bouton <DNT>**+ Add a new workflow**</DNT>.
    2. Choisissez une destination existante ou créez-en une nouvelle.
    3. Une fois connecté à la destination, choisissez un projet, puis sélectionnez le type de problème Jira à utiliser.
    4. Après avoir sélectionné le type de problème, les champs du projet configuré sont automatiquement mappés à votre instance Jira.

    Pour vous aider à démarrer, nous remplissons automatiquement les champs et valeurs obligatoires et recommandés. Assurez-vous d&apos;avoir inclus une valeur dans tous les champs obligatoires avant de continuer.

    ### Envoyer une notification de test [#send-jira-test]

    Cliquez sur une notification de test avec des valeurs de champ par défaut pour voir le problème Jira. En cas de succès, vous aurez un lien pour visualiser l&apos;incident dans Jira.

    <img width="80%;" title="The Jira-specific custom variables menu." alt="A screenshot of the Jira-specific custom variables menu." src="/images/accounts_screenshot-crop_jira-template.webp" />

    <figcaption>
      Modèle de message de notification Jira.
    </figcaption>
  </Collapser>

  <Collapser className="freq-link" id="eventBridge" title="AWS EventBridge">
    Utilisez New Relic et [AWS EventBridge](https://aws.amazon.com/eventbridge/) pour personnaliser et envoyer des notifications à des cibles telles qu&amp;apos;AWS AWS Lambda, les files d&amp;apos;attente Amazon Simple notification Service (SNS), les logs CloudWatch , etc.

    <Video type="wistia" id="24mucmd1mj" />

    ### Configurer une destination EventBridge [#set-up-eventbridge]

    <Callout variant="important">
      New Relic est répertorié dans AWS en tant que [partenaireSaaS événement Source](https://aws.amazon.com/eventbridge/integrations/).
    </Callout>

    Pour créer une destination AWS EventBridge, procédez comme suit :

    1. Allez à <DNT>**[one.newrelic.com &gt; All capabilities](https://one.newrelic.com/all-capabilities) &amp;gt; Alerts**</DNT>, cliquez sur <DNT>**Destinations**</DNT>, puis sélectionnez <DNT>**AWS EventBridge**</DNT>.

    2. Saisissez les informations suivantes :

       * <DNT>**Name:**</DNT> Nom personnalisé pour identifier la destination.

       * <DNT>**AWS region:**</DNT> Il s&amp;apos;agit de votre point de terminaison régional AWS. Sélectionnez la région où votre source d’événement est hébergée.

       * <DNT>**AWS account ID:**</DNT> Votre identifiant de compte AWS. Il s&amp;apos;agit d&amp;apos;un numéro à 12 chiffres.

       <img width="80%;" title="AWS EventBridge destination" alt="AWS EventBridge destination" src="/images/accounts_screenshot-crop_awseventbridge-destination.webp" />

    ### Choisissez la source de votre événement [#eventbridge-source]

    Une fois que vous avez configuré votre destination EventBridge avec votre ID de compte AWS, lorsque vous créez une nouvelle source d&apos;événement, elle est disponible dans EventBridge.

    1. Sélectionnez ou créez un nom de destination.

    2. Sélectionnez ou créez une source d&apos;événement.

       Lorsque vous créez une nouvelle source d&apos;événement, elle est créée dans votre compte AWS EventBridge en tant que source d&apos;événement de partenaire d&apos;intégration.

    ### Associez la source de l’événement à votre compte AWS et créez une règle [#eventbridge-rule]

    Pour associer la source d&apos;événement à un bus d&apos;événement :

    1. Dans la console AWS EventBridge, choisissez <DNT>**Partner event sources**</DNT> dans le volet de navigation.

    2. Sélectionnez le bouton à côté de la source de l’événement partenaire, puis choisissez <DNT>**Associate with event bus**</DNT>.

       L&apos;état de la source d&apos;événement passe de <DNT>**Pending**</DNT> à <DNT>**Active**</DNT> et le nom du bus d&amp;apos;événement est mis à jour pour correspondre au nom de votre source d&amp;apos;événement. Vous pouvez maintenant commencer à créer des règles qui correspondent à l&amp;apos;événement de New Relic.

    3. Créez une règle pour l&apos;événement bus.

       Pour réagir aux notifications envoyées depuis New Relic, vous devez créer des règles avec un modèle d&apos;événement qui filtre les événements New Relic.

       <img width="80%;" title="Event pattern with the newrelic partner prefix." alt="A screenshot of rule Event pattern." src="/images/accounts_screenshot-crop_bridge-event-pattern.webp" />

       Utilisez ce document AWS expliquant comment [créer une règle de source d’événement](https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-saas.html#eb-create-rule-partner-events) pour obtenir des instructions plus détaillées.

    ### Configurer le modèle d&apos;événement de message dans le workflow [#message-eventbridge]

    Accédez à <DNT>**Workflows**</DNT>, cliquez sur un workflow existant ou sur le bouton <DNT>**Add a new Workflow**</DNT> et choisissez la destination EventBridge. Lorsque vous envoyez une notification de New Relic à EventBridge, vous pouvez utiliser un modèle de message pour personnaliser cette notification.

    Vous pouvez utiliser le modèle par défaut ou personnaliser le vôtre. Choisissez <DNT>**Variables**</DNT> dans le [menu des variables](/docs/alerts-applied-intelligence/notifications/message-templates/#variables-menu) et appliquez [la syntaxe de Handlebars](/docs/alerts-applied-intelligence/notifications/message-templates/#handlebars-syntax) pour enrichir votre événement.

    L&apos;API EventBridge nécessite JSON et l&apos;aperçu du modèle affiche le JSON rendu. Une fois que le modèle d’événement est conforme à un JSON valide, vous pouvez envoyer une notification de test à AWS EventBridge. Consultez nos [exemples d’utilisation de JSON](/docs/alerts-applied-intelligence/notifications/message-templates/#usage-examples) pour plus d’informations.
  </Collapser>

  <Collapser className="freq-link" id="email" title="E-mail">
    La destination de l&apos;e-mail est créée automatiquement lorsque vous choisissez <DNT>**Email**</DNT> comme canal de notification pour un [workflow](/docs/alerts-applied-intelligence/applied-intelligence/incident-workflows/incident-workflows/), vous n&amp;apos;avez donc pas besoin de le configurer à partir du menu <DNT>**Destinations**</DNT> . Chaque destination de courrier électronique est unique au workflow qui lui est associé, ce qui signifie qu&amp;apos;elle peut apparaître comme un doublon dans le flux de destinations.

    Pour envoyer une notification par e-mail :

    1. Allez à <DNT>**[one.newrelic.com &gt; All capabilities](https://one.newrelic.com/all-capabilities) &amp;gt; Alerts**</DNT>.

    2. Sélectionnez <DNT>**Workflows**</DNT> dans le panneau de navigation de gauche.

    3. Cliquez sur <DNT>**+ Add a workflow**</DNT>.

       <img width="80%;" title="Configure your workflow" alt="Configure your workflow" src="/images/accounts_screenshot-crop_email-configure-workflow.webp" />

    4. Nommez votre workflow. Ce champ est obligatoire et doit être unique.

    5. Filtrez les données dont vous avez besoin. Vous pouvez choisir entre les options <DNT>**Basic**</DNT> et <DNT>**Advanced**</DNT> pour ajouter les problèmes que vous souhaitez envoyer.

    6. Cliquez sur <DNT>**Additional settings**</DNT> pour enrichir vos données. Activez <DNT>**Enrich your data**</DNT> pour créer une requête NRQL.

    7. Cliquez sur <DNT>**Save and exit**</DNT>.

    8. Sélectionnez <DNT>**Email**</DNT> comme méthode de notification.

       <img width="60%;" title="Email settings" alt="A screenshot of the email settings." src="/images/accounts_screenshot-crop_email-settings.webp" />

    9. Ajoutez les e-mails auxquels vous souhaitez envoyer une notification. Vous pouvez ajouter un ou plusieurs destinataires.

       * Vous pouvez trouver des utilisateurs avec des comptes New Relic en recherchant leur adresse e-mail.
       * Pour ajouter un utilisateur sans compte New Relic ni liste de diffusion par e-mail, saisissez son adresse e-mail complète.
       * Chaque liste d&apos;adresses e-mail ajoutée aux paramètres de messagerie créera sa propre destination unique, qui apparaîtra dans le flux de destination.
       * Lorsque vous créez une destination avec une adresse e-mail déjà associée à une destination existante, une prompt apparaît offrant la possibilité de fusionner les deux. La sélection de <DNT>**Merge**</DNT> combinera les destinations, garantissant que les notifications seront acheminées efficacement vers le destinataire prévu.
       * Vous pouvez suivre la notification par e-mail par destination dans le [logdes notifications](/docs/alerts-applied-intelligence/notifications/destinations/#notifications-log).

    10. Personnaliser le message électronique.

        * Pour l&apos;objet de l&apos;e-mail, vous pouvez utiliser la charge utile par défaut ou la personnaliser pour qu&apos;elle contienne les données requises.
        * Le corps de l&apos;e-mail inclut des données par défaut qui ne peuvent pas être modifiées, mais vous pouvez également ajouter vos propres détails supplémentaires personnalisés. Ces personnalisations apparaissent sous la section <DNT>**Custom Details**</DNT> .
        * Pour enrichir l&apos;e-mail, choisissez des variables dans le [menu des variables](/docs/alerts-applied-intelligence/notifications/message-templates/#variables-menu) et appliquez [la syntaxe de Handlebars](/docs/alerts-applied-intelligence/notifications/message-templates/#handlebars-syntax).

    11. Cliquez sur <DNT>**Send test notification**</DNT> pour vous assurer que la notification par e-mail parvienne à la boîte de réception.

    12. Cliquez sur <DNT>**Save**</DNT>.

    13. Cliquez sur <DNT>**Activate workflow**</DNT>.

    Depuis la page principale du workflow, vous pouvez activer, modifier, supprimer ou copier l&apos;ID workflow workflow dans le presse-papiers.
  </Collapser>

  <Collapser className="freq-link" id="mobile_push" title="Lancement de New Relic Mobile">
    Envoyez une notification push à vos applications mobiles New Relic iOS ou Android .

    <Video type="wistia" id="s29hxnyi4v" />

    ### Configurer une destination push mobile [#set-mobile\_push-destination][#set-mobile_push-destination]

    Pour créer une destination push mobile, vous avez besoin des éléments suivants :

    * <DNT>**Push destination name:**</DNT> Un nom de destination unique.

    * <DNT>**User id:**</DNT> Ceci sera automatiquement rempli en fonction de l&amp;apos;utilisateur actuellement connecté.

      <Callout variant="important">
        Actuellement, vous ne pouvez créer des destinations push mobiles que pour l&apos;utilisateur actuellement connecté avec [des capacités de modification](/docs/alerts-applied-intelligence/notifications/destinations#requirements). Vous pouvez également créer une seule destination push pour votre utilisateur. Si vous essayez d&amp;apos;en créer plusieurs, une erreur s&amp;apos;affichera. Avant d&amp;apos;enregistrer la destination, nous vous recommandons de tester la connexion à l&amp;apos;aide du bouton <DNT>**Test connection**</DNT> .
      </Callout>

    ### Configurer quand recevoir une notification push dans le workflow [#mobile]

    Accédez à <DNT>**[one.newrelic.com &gt; All capabilities](https://one.newrelic.com/all-capabilities) &amp;gt; Alerts &amp;gt; Workflows**</DNT> et cliquez sur un workflow existant, ou sur le bouton <DNT>**+Add a new workflow**</DNT> et choisissez le notificateur mobile. Pour configurer un push mobile, cliquez sur le notificateur mobile et sélectionnez la destination souhaitée.
  </Collapser>

  <Collapser className="freq-link" id="opsgeniewebhook_templates" title="Opsgénie">
    ### Modèle de webhook pour Atlassian Opsgenie

    Envoyer une notification du workflow à Opsgenie à l&apos;aide d&apos;un modèle de webhook : [Modèle de webhook Opsgenie pour le workflow](https://support.atlassian.com/opsgenie/docs/integrate-opsgenie-with-new-relic-alerts-new/)
  </Collapser>

  <Collapser className="freq-link" id="pagerduty" title="PagerDuty">
    Intégrez New Relic à PagerDuty pour créer, mettre à jour, reconnaître et résoudre automatiquement les incidents PagerDuty .

    <Video type="wistia" id="lvzd77zj17" />

    Nous proposons deux façons d&apos;intégrer PagerDuty :

    * <DNT>**[Account level integration using REST API Keys (recommended)](#pagerduty-ali)**</DNT>:Cette intégration entièrement automatique prend en charge la synchronisation bidirectionnelle et la possibilité de définir plusieurs services PagerDuty sur une seule destination New Relic.
    * <DNT>**[Service integration using Events API keys](#pagerduty-sli)**</DNT>:Cette intégration de service unique utilise la clé d&amp;apos;intégration de niveau de service et nécessite une destination New Relic distincte pour chaque service PagerDuty unique.

    ### Intégration au niveau du compte [#pagerduty-ali]

    Cette intégration entièrement automatique prend en charge la synchronisation bidirectionnelle et la possibilité de définir plusieurs services PagerDuty sur une seule destination New Relic.

    ### Autorisations [#pd-permissions]

    Cette intégration nécessite l&apos;autorisation d&apos;effectuer les actions suivantes :

    * [Liste des services](https://developer.pagerduty.com/api-reference/b3A6Mjc0ODE5Ng-list-services)

    * [Créer une intégration](https://developer.pagerduty.com/api-reference/b3A6Mjc0ODIwMw-create-a-new-integration)

    * [Créer un abonnement webhook](https://developer.pagerduty.com/api-reference/b3A6MjkyNDc4NA-create-a-webhook-subscription)

    * [Créer une note](https://developer.pagerduty.com/api-reference/b3A6Mjc0ODE1MA-create-a-note-on-an-incident)

    * [Liste des équipes](https://developer.pagerduty.com/api-reference/b3A6Mjc0ODIyMw-list-teams)

    * [Liste des utilisateurs](https://developer.pagerduty.com/api-reference/b3A6Mjc0ODIzMw-list-users)

      Cette intégration nécessite une clé API REST. PagerDuty dispose de deux types de clés API REST :

    * [Clé d&apos;accès générale](https://support.pagerduty.com/docs/generating-api-keys#section-generating-a-general-access-rest-api-key): elle inclut toutes les autorisations répertoriées ci-dessus et les administrateurs et propriétaires de compte PagerDuty y ont accès. [Voir les instructions de PagerDuty](https://support.pagerduty.com/docs/api-access-keys#generate-a-general-access-rest-api-key).

    * [Jeton utilisateur personnel](https://support.pagerduty.com/docs/generating-api-keys#section-generating-a-personal-rest-api-key): Si votre compte dispose d&amp;apos;autorisations avancées, vous pouvez créer des clés API REST personnelles uniques. Les demandes effectuées à l&amp;apos;aide de clés API REST personnelles sont limitées aux autorisations de l&amp;apos;utilisateur. Si vous choisissez de fournir une clé API de jeton utilisateur, assurez-vous qu&amp;apos;elle dispose des autorisations requises décrites ci-dessus. [Voir les instructions de PagerDuty](https://support.pagerduty.com/docs/api-access-keys#generate-a-user-token-rest-api-key).

      <Callout variant="tip">
        Pour un utilisateur personnel, nous vous recommandons d&apos;utiliser une intégration utilisateur dédiée qui n&apos;appartient pas à un utilisateur réel.
      </Callout>

      Lors de la création d&apos;une destination au niveau du compte, nous créons une intégration de service. Ne supprimez pas cette intégration, car nous utilisons cette clé !

    ### Définir une destination [#set-up-pagerduty]

    Pour créer une destination PagerDuty :

    1. Allez à <DNT>**[one.newrelic.com &gt; All capabilities](https://one.newrelic.com/all-capabilities) &amp;gt; Alerts**</DNT>, cliquez sur <DNT>**Destinations**</DNT>, puis sélectionnez <DNT>**PagerDuty**</DNT>.

    2. Saisissez les informations suivantes :

       * <DNT>**Name**</DNT>:Nom personnalisé pour identifier la destination.
       * <DNT>**API Key**</DNT>:Pour cette intégration, il vous sera demandé de fournir une clé API REST. Il existe deux types de clés API REST dans PagerDuty, [l&apos;accès général](https://support.pagerduty.com/docs/generating-api-keys#section-generating-a-general-access-rest-api-key) et [le jeton utilisateur](https://support.pagerduty.com/docs/generating-api-keys#section-generating-a-personal-rest-api-key).

       Avant d&apos;enregistrer la destination, nous vous recommandons de tester la connexion en cliquant sur le bouton <DNT>**Test connection**</DNT> .

       <img width="80%;" title="PagerDuty account-level destination configuration" alt="A screenshot of a PagerDuty account-level destination configuration" src="/images/accounts_screenshot-crop_pager-duty-account-destination-new-ui.webp" />

    ### Synchronisation bidirectionnelle [#two-way-pagerduty]

    Pour activer la synchronisation bidirectionnelle, activez le bouton bascule <DNT>**two-way integration**</DNT> . Lorsqu&amp;apos;il est activé, un abonnement PagerDuty est créé ultérieurement pour le service PagerDuty sélectionné (voir [personnaliser un modèle de message](#message-pagerduty)). Le webhook contient les détails d&amp;apos;accès à New Relic (URL et clé API New Relic). Par défaut, tout changement d’état de l’incident PagerDuty créé par New Relic sera synchronisé avec New Relic.

    <Callout variant="important">
      Si vous êtes un client PagerDuty événement Intelligence ou Digital Operations utilisant le regroupement d&apos;alertes intelligent sur un service donné, des incohérences potentielles dans les incidents PagerDuty renvoyés à New Relic peuvent se produire.
    </Callout>

    ### Synchronisation avec le flux de travail New Relic [#two-way-sync-workflows]

    * La fermeture d&apos;un problème New Relic est déclenchée lorsque l&apos;incident PagerDuty est résolu.

    * La reconnaissance d&apos;un problème New Relic est déclenchée lorsque l&apos;incident PagerDuty est reconnu.

      ### Configurer le modèle de message dans le workflow [#message-pagerduty]

      Pour configurer le modèle de message :

      1. Accédez à <DNT>**[one.newrelic.com &gt; All capabilities](https://one.newrelic.com/all-capabilities) &amp;gt; Alerts&amp;gt; Workflows**</DNT> et cliquez sur un workflow existant, ou sur le bouton <DNT>**+ Add a new workflow**</DNT> et choisissez le notificateur PagerDuty .
      2. Choisissez une destination ou créez-en une nouvelle.
      3. Sélectionnez un service PagerDuty.
      4. Sélectionnez un utilisateur. New Relic publiera des notes au nom de l&apos;utilisateur sélectionné.
      5. Envoyez les détails à la section Détails personnalisés dans PagerDuty. Vous pouvez utiliser la charge utile par défaut ou la personnaliser à l&apos;aide de texte libre ou de variables dynamiques de la charge utile du problème. Choisissez des variables dans le [menu des variables](/docs/alerts-applied-intelligence/notifications/message-templates/#variables-menu) et appliquez [la syntaxe de Handlebars](/docs/alerts-applied-intelligence/notifications/message-templates/#handlebars-syntax) pour enrichir votre charge utile. La section <DNT>**preview**</DNT> sur le côté droit affiche une charge utile attendue après le rendu du modèle. Si la charge utile ne forme pas un JSON valide, une erreur s&amp;apos;affichera et il ne sera pas possible d&amp;apos;enregistrer le modèle.

    Les détails personnalisés dans les alertes PagerDuty sont automatiquement renseignés.

    ### Envoyer une notification de test [#test-notification-pagerduty]

    Vous pouvez voir comment l&apos;incident PagerDuty apparaîtra en cliquant sur une notification de test avec des valeurs de champ par défaut. En cas de succès, un incident sera créé et un lien apparaîtra.

    <img width="80%;" title="PagerDuty service-level workflow configuration." alt="A screenshot of a PagerDuty service-level workflow configuration." src="/images/accounts_screenshot-crop_pager-duty-add-webhook.webp" />

    ### Intégration de services [#pagerduty-sli]

    Cette intégration nécessite la configuration d&apos;une intégration New Relic PagerDuty dans le service dans lequel vous souhaitez que New Relic crée un incident. Pour créer une intégration New Relic dans le service PagerDuty :

    1. Accédez à <DNT>**Services &gt; Service Directory**</DNT> et sélectionnez le service auquel vous souhaitez ajouter l’intégration.

    2. Sélectionnez l’onglet <DNT>**Integrations**</DNT> et cliquez sur <DNT>**Add an integration**</DNT>.

    3. Recherchez et marquez l’intégration New Relic dans la liste et cliquez sur <DNT>**Add**</DNT>.

       <img title="PagerDuty New Relic integration." width="70%;" alt="New Relic integration." src="/images/accounts_screenshot-crop_pager-duty-add-new-relic-integration.webp" />

    4. Cliquez à droite pour visualiser et copier votre <DNT>**Integration Key**</DNT>.

       <img title="PagerDuty New Relic integration key." alt="New Relic integration key." src="/images/accounts_screenshot-crop_pager-duty-integration-opened.webp" />

    ### Configurer le modèle de message [#message-pagerduty]

    Pour configurer le modèle de message :

    1. Accédez à <DNT>**[one.newrelic.com &gt; All capabilities](https://one.newrelic.com/all-capabilities) &amp;gt; Alerts &amp;gt; Workflows**</DNT> et cliquez sur un workflow existant, ou cliquez sur le bouton <DNT>**+ Add a new workflow**</DNT> et choisissez le notificateur PagerDuty .
    2. Choisissez une destination ou créez-en une nouvelle.
    3. (Facultatif) Modifiez le résumé de l&apos;incident par défaut.

    Notez que les détails personnalisés dans les alertes PagerDuty sont automatiquement renseignés.

    ### Envoyer une notification de test [#test-notification-pagerduty]

    Vous pouvez voir comment l&apos;incident PagerDuty apparaîtra en cliquant sur une notification de test avec des valeurs de champ par défaut.
  </Collapser>

  <Collapser className="freq-link" id="servicenow" title="ServiceNow (ancien)">
    <Callout variant="important">
      Il s’agit d’un type d’intégration legacy qui est en mode maintenance. Si vous n&apos;avez pas encore configuré cette intégration legacy , veuillez consulter [ServiceNow ( application certifiée)](#servicenow-certified).
    </Callout>

    Intégrez New Relic à ServiceNow ITSM et créez, mettez à jour et résolvez automatiquement les incidents ServiceNow.

    <Video type="wistia" id="6or6n8am4k" />

    ### Rôles [#roles-servicenow]

    Dans le cadre de l&apos;intégration, nous récupérons les champs de votre table incident ServiceNow et d&apos;autres valeurs facultatives. Nous avons besoin des autorisations suivantes :

    * Autorisations de lecture complètes pour les tables `sys_dictionary`, `sys_choice`, `sys_user` et `task`.

    * Autorisation de lecture/écriture sur `incident`.

    * Pour récupérer l&apos;utilisateur pour la colonne `caller` , nous avons besoin des autorisations de lecture pour la table `sys_user` .

      Les rôles non granulaires prêts à l&apos;emploi `personalize_choices`, `personalize_dictionary`, `rest_service` ou `snc_platform_rest_api_access` et `itil` disposent des autorisations ci-dessus. Des autorisations de lecture/écriture sur la table `api_key_credentials` sont requises pour permettre l’intégration bidirectionnelle. Les rôles `credentials_admin` et `discovery_admin` les fournissent.

    ### Définir une destination [#set-up-service-destination]

    Pour créer une destination ServiceNow :

    1. Allez à <DNT>**[one.newrelic.com &gt; All capabilities](https://one.newrelic.com/all-capabilities) &amp;gt; Alerts**</DNT>, cliquez sur <DNT>**Destinations**</DNT>, puis sélectionnez <DNT>**ServiceNow**</DNT>.

    2. Saisissez les informations suivantes :

       * <DNT>**Destination Name:**</DNT> Nom personnalisé pour identifier la destination.
       * <DNT>**Domain:**</DNT> L&amp;apos;URL de la destination.
       * <DNT>**Username:**</DNT> Le nom de l&amp;apos;utilisateur.
       * <DNT>**Password:**</DNT> Le mot de passe de l&amp;apos;utilisateur.

       Avant d&apos;enregistrer la destination, nous vous recommandons de tester la connexion en cliquant sur le bouton <DNT>**Test connection**</DNT> .

       ### Synchronisation bidirectionnelle [#two-way-snow]

       Pour configurer le <DNT>**two-way integration**</DNT>:

       1. Activez le bouton bascule `two-way integration` .

       2. Ouvrez et téléchargez ce [fichier XML](https://storage.googleapis.com/newrelic-notifications/snow-two-way-sync/Newrelic-Snow-Sync-Configurations.xml), qui inclut l&amp;apos;événement déclencheur de règle métier vers New Relic.

       3. Dans le menu de la barre latérale de ServiceNow, accédez à <DNT>**System Definition &gt; Business Rules**</DNT>.

       4. Cliquez sur l’icône de menu dans l’un des en-têtes de colonne, sélectionnez <DNT>**Import XML**</DNT> et téléchargez le fichier XML que vous avez téléchargé.

       Une fois la destination enregistrée, une clé API New Relic est conservée dans `api_key_credentials`. La clé est envoyée dans un en-tête dans le cadre de l&amp;apos;appel de rappel REST à New Relic.

       ### Synchronisation avec le flux de travail [#two-way-sync-snow-workflows]

       * Lorsque l&apos;état de l&apos;incident ServiceNow passe à résolu, cela déclenche la fermeture du problème New Relic.
       * Lorsque l&apos;état de l&apos;incident ServiceNow passe d&apos;ouvert à déclenché la reconnaissance du problème New Relic.

    ### Configurer le modèle de message dans le workflow [#configure-servicenow-message-template]

    1. Accédez à <DNT>**[one.newrelic.com &gt; All capabilities](https://one.newrelic.com/all-capabilities) &amp;gt; Alerts &amp;gt; Workflows**</DNT> et cliquez sur un workflow existant ou sur le bouton <DNT>**+ Add a new workflow**</DNT>

    2. Choisissez une destination ServiceNow.

    3. Une fois la connexion établie, les colonnes de la table incident ServiceNow sont extraites de votre compte et automatiquement mappées à votre instance ServiceNow.

       Pour vous aider à démarrer, les champs obligatoires et recommandés sont pré-remplis avec des valeurs par défaut. Lorsque vous ajoutez une valeur personnalisée pour un champ pris en charge, vous pouvez ajouter une valeur dynamique à partir de la charge utile du problème ou écrire votre propre valeur. Vous pouvez supprimer tout champ non obligatoire et ajouter le vôtre.

    ### Envoyer une notification de test [#send-servicenow-test]

    Cliquez sur <DNT>**Send test notification**</DNT> pour voir l’incident ServiceNow avec les valeurs de champ par défaut. En cas de succès, vous verrez un lien avec l&amp;apos;incident créé.

    <img width="80%;" title="ServiceNow incident template." alt="A screenshot of some recommended ServiceNow-incident fields and values." src="/images/accounts_screenshot-crop_service-now-message-template.webp" />

    <figcaption>
      Sélectionnez, modifiez ou supprimez des champs pour le modèle d’incident ServiceNow.
    </figcaption>
  </Collapser>

  <Collapser className="freq-link" id="servicenow-certified" title="ServiceNow ( application certifiée)">
    L&apos;intégration certifiée ServiceNow avec le workflow New Relic est disponible dans la boutique ServiceNow. Lorsque vous utilisez ServiceNow, n&apos;oubliez pas les points suivants :

    * L&apos;instance ServiceNow stocke la notification de problème New Relic sous la forme `New Relic Issues`.

    * Vous pouvez configurer des stratégies de routage dans ServiceNow pour générer des tâches ou d’autres enregistrements pour représenter ou correspondre à ces problèmes lorsqu’ils correspondent à une stratégie donnée.

    * L&apos;événement d&apos;accusé de réception ou de clôture dans ServiceNow peut accuser réception ou fermer le problème dans New Relic.

    * Vous pouvez convertir automatiquement les problèmes New Relic en tâches exploitables dans ServiceNow.

    * ServiceNow peut recevoir des mises à jour de New Relic sur les problèmes.

    * Le moteur de politique permet la qualification des New Relic <InlinePopover type="alerts" />au fur et à mesure de leur arrivée.

    * Associez l&apos;entité aux éléments configuration et reliez-les à la table des tâches disponible.

    * Depuis ServiceNow, vous pouvez envoyer et voir sous forme d&apos;images les enrichissements New Relic.

      Vous pouvez intégrer ServiceNow à New Relic en utilisant la destination d&apos;application ServiceNow ou la destination webhook. Veuillez vous référer à ce [guide d&apos;installation](https://store.servicenow.com/appStoreAttachments.do?sys_id=46dce4241bf9c2503ee8a8ea234bcb79)pour plus de détails, de conseils et de bonnes pratiques.

    <table>
      <thead>
        <tr>
          <th>
            Type de destination
          </th>

          <th>
            Destination de l&apos;application ServiceNow
          </th>

          <th>
            Destination du webhook
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            charge
          </td>

          <td>
            Contrôlé par New Relic. Aucun [modèle de notification](/docs/alerts/get-notified/message-templates). Modification limitée de l&amp;apos;attribut SNOW via la balise.
          </td>

          <td>
            charge directement modifiable dans le [modèlenotification ](/docs/alerts/get-notified/message-templates).
          </td>
        </tr>

        <tr>
          <td>
            Possibilité de mettre à jour New Relic depuis ServiceNow
          </td>

          <td>
            Compris. Une connexion New Relic est automatiquement créée lors de la création de la destination.
          </td>

          <td>
            Compris. Vous devez créer la connexion New Relic manuellement.
          </td>
        </tr>

        <tr>
          <td>
            Politiques de routage
          </td>

          <td>
            Compris
          </td>

          <td>
            Compris
          </td>
        </tr>

        <tr>
          <td>
            Possibilité de mettre à jour directement les champs cibles
          </td>

          <td>
            Oui, en utilisant la balise sur l&apos;entité avec le concepteur New Relic Flow par défaut.
          </td>

          <td>
            Oui, en utilisant la balise sur l&apos;entité et en spécifiant dans le webhook les frais avec le concepteur New Relic Flow par défaut.
          </td>
        </tr>
      </tbody>
    </table>

    ### Configurer la destination de l&apos;application ServiceNow [#servicenow-destination]

    <Callout variant="important">
      Si vous n&apos;avez pas accès à la création d&apos;une nouvelle destination, envoyez un e-mail à [notificationWorkflows@newrelic.com](mailto:notificationWorkflows@newrelic.com) avec votre nom de compte et votre numéro de compte pour obtenir de l&amp;apos;aide.
    </Callout>

    Pour créer une destination ServiceNow, procédez comme suit :

    1. [Téléchargez et installez l&apos;application New Relic](https://store.servicenow.com/sn_appstore_store.do#!/store/application/d117597d1b9b9d9078faddf7b04bcba7/1.1.1?referer=%2Fstore%2Fsearch%3Flistingtype%3Dallintegrations%25253Bancillary_app%25253Bcertified_apps%25253Bcontent%25253Bindustry_solution%25253Boem%25253Butility%25253Btemplate%26q%3Dnew%2520relic&sl=sh) dans la boutique ServiceNow.

    2. Créez un utilisateur dans ServiceNow. Assurez-vous d&apos;activer l&apos;option <DNT>**Web service access only**</DNT> et d&amp;apos;accorder le rôle `x_newre_core.inbound_api` à l&amp;apos;utilisateur créé. Copiez et enregistrez le mot de passe généré.

    3. Allez à <DNT>**[one.newrelic.com &gt; All capabilities](https://one.newrelic.com/all-capabilities) &amp;gt; Alerts**</DNT>, cliquez sur <DNT>**Destinations**</DNT>, puis sélectionnez <DNT>**ServiceNow**</DNT>.

       <img width="80%;" title="Create a ServiceNow destination" alt="Create a ServiceNow destination" src="/images/accounts_screenshot-crop_servicenow-create-destination.webp" />

    4. Cliquez sur <DNT>**Next**</DNT>.

    5. Ajoutez le domaine, le nom d&apos;utilisateur et le mot de passe. Le domaine doit inclure `*.service-now.com`. Ajoutez le mot de passe que vous avez copié à l’étape 2.

    6. Cliquez sur <DNT>**Next**</DNT>.

    7. Nommez la destination.

    8. Cliquez sur <DNT>**Save destination**</DNT>.

    9. Utilisez cette destination avec votre flux de travail notification .

    <Callout variant="tip">
      Vous pouvez mettre à jour l&apos;attribut ServiceNow directement dans la table cible, comme **l&apos;incident** directement depuis New Relic. Pour ce faire, tag les entités associées telles que condition d&amp;apos;alerte, APM entité, Synthetics, hôtes, etc., avec `serviceNowFields.[serviceNow_value]` ou `serviceNowFields.dv_[serviceNow_name]`. Par exemple, pour renseigner votre entité APM en tant qu’élément configuration dans la table incident , tag la avec `serviceNowFields.dv_configuration_item : my_ci`.
    </Callout>

    ### Configurer la destination du webhook [#servicenow-webhook-destination]

    Pour créer une destination webhook, procédez comme suit :

    1. [Téléchargez et installez l&apos;application New Relic](https://store.servicenow.com/sn_appstore_store.do#!/store/application/d117597d1b9b9d9078faddf7b04bcba7/1.1.1) dans la boutique ServiceNow.

    2. Créez un utilisateur dans ServiceNow. Assurez-vous d&apos;activer l&apos;option <DNT>**Web service access only**</DNT> et d&amp;apos;accorder le rôle `x_newre_core.inbound_api` à l&amp;apos;utilisateur créé. Copiez et enregistrez le mot de passe généré.

    3. Allez à <DNT>**[one.newrelic.com &gt; All capabilities](https://one.newrelic.com/all-capabilities) &amp;gt; Alerts**</DNT>, cliquez sur <DNT>**Destinations**</DNT>, puis sélectionnez <DNT>**Webhook**</DNT>.

    4. Remplissez les champs suivants :

       * <DNT>**Webhook name**</DNT>:Un nom pour identifier le webhook.

       * <DNT>**Endpoint URL**</DNT>: L&amp;apos;URL du point de terminaison de la destination. Il doit inclure `*.service-now.com/api/x_newre_core/new_relic/issue/notification`, par exemple, `https://my_instance.service-now.com/api/x_newre_core/new_relic/issue/notification`.

       * <DNT>**Use authorization**</DNT>: Activez l&amp;apos;option <DNT>**Basic authorization**</DNT> et entrez le nom d&amp;apos;utilisateur et le mot de passe copié pour authentifier ServiceNow.

         <img width="80%;" title="Create a webhook destination" alt="Create a webhook destination" src="/images/accounts_screenshot-crop_webhook-destination.webp" />

    5. Cliquez sur <DNT>**Save destination**</DNT>.

    Vous pouvez voir la courte vidéo ci-dessous qui montre comment créer une destination Webhook :

    <Video type="wistia" id="0er0remkv0" />

    Pour ajouter le `serviceNowFields` dans une charge utile Webhook :

    1. Allez à <DNT>**[one.newrelic.com &gt; All capabilities](https://one.newrelic.com/all-capabilities) &amp;gt; Alerts**</DNT>, cliquez sur <DNT>**Workflows**</DNT>.

    2. Cliquez sur le <Icon name="fe-more-horizontal" /> icône sur un Webhook existant et sélectionnez <DNT>**Edit**</DNT>, ou cliquez sur le bouton <DNT>**+ Add a new workflow**</DNT> .

    3. Cliquez sur la chaîne <DNT>**Webhook**</DNT> .

    4. Modifiez les frais par défaut en ajoutant l’attribut `serviceNowFields` dont vous avez besoin.

       <img width="80%;" title="Adding the `serviceNowFields` attributes" alt="Adding the `serviceNowFields` attributes" src="/images/accounts_screenshot-crop_webhook-serviceNowFields.webp" />

    5. Cliquez sur <DNT>**Send test notification**</DNT> pour vérifier vos modifications.

    6. Cliquez sur <DNT>**Save message**</DNT>.

    7. Cliquez sur <DNT>**Activate workflow**</DNT>.
  </Collapser>

  <Collapser className="freq-link" id="slack" title="Mou">
    Envoyez des messages de notification à vos canaux Slack. Découvrez comment [migrer de votre ancienne destination de webhook Slack vers la nouvelle application Slack](#migrate-slack) pour plus d&amp;apos;informations.

    <Video type="wistia" id="zs92j5i31v" />

    ### Prérequis [#slack-prereqs]

    Votre espace de travail Slack doit avoir l&apos;[application New Relic](https://newrelic.slack.com/apps/AP92KQJS3-new-relic?tab=more_info)(ou l&amp;apos;[application UE](https://slack.com/apps/AS5D75HQQ-new-relic-eu?tab=more_info) pour les clients `one.eu.newrelic` ) installée. Un administrateur de l’espace de travail doit approuver l’application avant que vous puissiez l’installer individuellement. Si vous avez besoin d&amp;apos;aide, suivez ces étapes dans l&amp;apos;UI:

    1. connectez-vous à New Relic.

    2. Visitez notre [centre d&apos;aide](https://one.newrelic.com/help-xp).

    3. Cliquez sur **Create a Support Case**.

       ### Configurer une destination Slack [#set-slack-destination]

    4. Allez à <DNT>**[one.newrelic.com &gt; All capabilities](https://one.newrelic.com/all-capabilities) &amp;gt; Alerts**</DNT>, cliquez sur <DNT>**Destinations**</DNT>, puis sélectionnez <DNT>**Slack**</DNT>.

    5. Cliquez sur le bouton <DNT>**Authenticate in one click**</DNT> pour accéder à la page de destination de Slack et poursuivre le processus d&amp;apos;authentification OAuth2. Si vous n&amp;apos;êtes pas connecté à l&amp;apos;espace de travail requis, vous êtes redirigé vers Slack pour vous connecter.

       <img width="60%;" title="Create a Slack destination with a click." alt="A screenshot of the one-click Slack authentication." src="/images/accounts_screenshot-crop_slack-destination-authentication.webp" />

    6. Ajoutez le nom de votre espace de travail ou sélectionnez l’espace de travail concerné, puis cliquez sur <DNT>**Continue**</DNT>.

       <img width="50%;" title="add a Slack workspace." alt="add a workspace." src="/images/accounts_screenshot-crop_slack-sign-in.webp" />

    7. Une fois connecté à l&apos;espace de travail sélectionné, autorisez New Relic à effectuer les actions spécifiées.

       <img width="40%;" title="select a workspace and configure permissions." alt="A screenshot permissions configurations." src="/images/accounts_screenshot-crop_slack-destination-allow-access.webp" />

    8. Cliquez sur <DNT>**Allow**</DNT> et revenez à la page de destination.

       <img width="80%;" title="authentication completed successfully." alt="A screenshot completed authentication." src="/images/accounts_screenshot-crop_slack-authentication-completed.webp" />

       <Callout variant="important">
         Chaque espace de travail Slack a une destination unique pour chaque compte New Relic.
       </Callout>

    ### Configurer le modèle de message Slack dans le workflow [#configure-slack-message-settings]

    <Callout variant="tip">
      Pour des raisons de confidentialité, l&apos;utilisateur doit être authentifié avant de pouvoir sélectionner des canaux privés. Après avoir sélectionné un canal privé, le bot sera automatiquement ajouté au canal.
    </Callout>

    1. Accédez à <DNT>**[one.newrelic.com &gt; All capabilities](https://one.newrelic.com/all-capabilities) &amp;gt; Alerts &amp;gt; Workflows**</DNT> et cliquez sur un workflow existant ou sur le bouton <DNT>**+ Add a workflow**</DNT>.

    2. Sélectionnez une destination, également appelée espace de travail, et un canal Slack pour envoyer des messages. Vous pouvez créer une nouvelle destination s&apos;il n&apos;existe pas de destination prédéfinie pour l&apos;espace de travail requis.

    3. Vous pouvez également choisir de recevoir des notifications notification jour, par exemple lorsqu&apos;un problème est reconnu ou fermé, sur le canal. C&apos;est ce qu&apos;on appelle également la diffusion du fil.

       <img title="thread braodcast" alt="a screenshot depicting the thread broadcast in the UI." src="/images/alerts_screenshot-crop_thread-broadcast.webp" />

    4. Vous pouvez utiliser la notification par défaut ou l&apos;enrichir avec des détails personnalisés. Choisissez des variables dans le [menu des variables](/docs/alerts-applied-intelligence/notifications/message-templates/#variables-menu) et appliquez [la syntaxe de Handlebars](/docs/alerts-applied-intelligence/notifications/message-templates/#handlebars-syntax) pour enrichir votre charge utile.

    5. Cliquez sur le bouton <DNT>**Send test notification**</DNT> pour envoyer une notification de test avec un exemple de charge utile prédéfini au canal. Cela crée un message dans le canal Slack sélectionné.

       <img width="80%;" title="Authenticate to select private channels." alt="Slack settings, user is not authenticated." src="/images/accounts_screenshot-crop_slack-message-template.webp" />
  </Collapser>

  <Collapser className="freq-link" id="Splunk_on_call_templates" title="Splunk sur appel (VictorOps)">
    ### Modèle de Webhook pour Splunk On-call

    Envoyer une notification du workflow à Splunk On-call à l&apos;aide d&apos;un [modèle de webhook](https://help.victorops.com/knowledge-base/new-relic-integration-guide/#about-splunk-on-call-and-new-relic)
  </Collapser>

  <Collapser className="freq-link" id="webhook" title="Webhook">
    Vous devez utiliser un notificateur webhook dans le workflow pour envoyer des messages notification à un point de terminaison HTTPS spécifié. Par défaut, le notificateur suppose que le type de contenu de la demande est JSON et envoie une demande HTTP POST au point de terminaison donné. Lorsque vous commencez à le configurer, le notificateur Webhook fournit une structure de charge utile JSON par défaut que vous pouvez utiliser prête à l&apos;emploi. Cependant, si vous avez besoin de plus de personnalisation, vous pouvez modifier la charge utile à l&apos;aide de la syntaxe du modèle Handlebars. Cela vous permet de renseigner dynamiquement les variables au sein de la charge utile, en l&apos;adaptant à vos besoins spécifiques.

    En plus de la charge utile, vous avez également la possibilité d&apos;inclure des en-têtes HTTP supplémentaires dans la demande webhook. Cela peut être utile pour transmettre des informations supplémentaires ou un jeton d&apos;authentification au point de terminaison de réception. Voici un tutoriel vidéo pour configurer des webhooks.

    <Video type="wistia" id="feyutwgew8" />

    ### Configurer une destination de webhook [#set-webhook-destination]

    Pour créer une destination Webhook, suivez ces étapes :

    1. Allez à <DNT>**[one.newrelic.com &gt; All capabilities](https://one.newrelic.com/all-capabilities) &amp;gt; Alerts**</DNT>, cliquez sur <DNT>**Destinations**</DNT>, puis sélectionnez <DNT>**Webhook**</DNT>.

    2. Saisissez les informations suivantes :

       * <DNT>**Webhook name:**</DNT> Nom de référence pour votre webhook.
       * <DNT>**Endpoint URL:**</DNT> Le point de terminaison de l&amp;apos;application cible où une requête HTTP POST sera envoyée.
       * <DNT>**Use authorization:**</DNT> (Facultatif) Vous pouvez choisir entre `Basic Authentication` ou `Bearer Token`.

    Si vous débutez avec les webhooks et que vous souhaitez tester la configuration et examiner la charge du webhook sans écrire de service, vous pouvez utiliser les services HTTP catch-all. [Beeceptor](https://beeceptor.com) et [Webhook.site](https://webhook.site) sont des exemples de services qui vous donnent une URL désignée où vous pouvez recevoir des frais HTTP, puis inspecter les frais JSON de l&amp;apos;événement. Cette fonctionnalité est utile pour collecter des informations pertinentes avant de démarrer votre processus de développement.

    Si vous créez un nouveau service pour consommer cette charge utile, vous devez le tester localement. L&apos;utilisation de tunnels locaux est une bonne idée pour tester et déboguer les webhooks dans un environnement local avant de les déployer sur un serveur de production. Ces tunnels vous permettent de recevoir requests webhook entrantes de New Relic sur votre machine locale, éliminant ainsi le besoin d&apos;un serveur accessible au public pendant le développement. Des outils comme Beeceptor ou ngrok vous permettent de créer une URL publique temporaire qui transmet requests à votre serveur local en spécifiant le port ou l&apos;adresse application souhaitée. Cela accélère l&apos;itération et le débogage, car vous pouvez observer et analyser directement la charge du webhook dans votre environnement de développement local.

    ### Synchronisation bidirectionnelle [#two-way-webhook]

    Pour les notifications envoyées depuis le workflow, vous pouvez reconnaître ou fermer les problèmes à l&apos;aide de [Nerdgraph](/docs/apis/nerdgraph/examples/nerdgraph-issues-api-via-github/#resolve-ack-issues). Lorsque vous testez la synchronisation bidirectionnelle avec des webhooks, vous pouvez utiliser les modèles de statut de réponse et de charge utile personnalisés de Beeceptor. Cela vous permet de rédiger une réponse souhaitée lors de l&amp;apos;accusé de réception de l&amp;apos;événement reçu.

    ### URL sécurisée [#secure-url-webhook]

    Vous pouvez ajouter des informations sensibles dans le chemin et les paramètres de l&apos;URL, telles que l&apos;ID de service ou la clé API. Pour éviter que ces secrets ne soient exposés, nous avons ajouté une option qui crypte les informations sensibles au-delà du domaine, à la fois de l&apos;utilisateur et de la collection de métriques internes.

    Le service utilise uniquement l&apos;URL complète lorsqu&apos;il envoie une notification. Une fois l&apos;URL sécurisée enregistrée, vous devez toutefois la mettre à jour manuellement afin qu&apos;elle remplace complètement l&apos;URL enregistrée.

    <img width="80%;" title="Webhook destination secure URL" alt="Webhook destination secure URL" src="/images/accounts_screenshot-crop_webhook-secure-url.webp" />

    ### Authentification des en-têtes personnalisés [#custom-headers-auth-webhook]

    Certains utilisateurs peuvent transmettre des informations sensibles dans leurs en-têtes, telles que la clé API et les identifiants personnels. Pour protéger les informations sensibles contre toute exposition, vous pouvez créer des en-têtes personnalisés qui cryptent les valeurs et masquent les données de l&apos;utilisateur et des logs internes. Gardez à l&apos;esprit que :

    * Si les valeurs des informations cryptées changent, vous devrez supprimer complètement et réécrire la valeur.
    * Si vous avez ajouté la même clé d&apos;en-tête à la destination et au canal, la destination aura la priorité. La chaîne ne sera pas utilisée.

    <img width="80%;" title="Webhook destination custom headers authentication" alt="Webhook destination custom headers authentication" src="/images/accounts_screenshot-crop_webhook-custom-headers-auth.webp" />

    ### Configurer le modèle d&apos;événement webhook [#configure-webhook-event-template]

    Choisissez une destination de webhook dans la liste et configurez la requête `HTTP-POST` .

    La configuration de la requête nécessite que vous :

    1. Définissez un nom pour le modèle.
    2. Sélectionnez une destination préconfigurée dans la liste des destinations ou créez-en une nouvelle.
    3. Ajoutez des en-têtes personnalisés (facultatif).
    4. Configurer la charge utile de la demande.

    ### Personnaliser la charge du webhook dans le workflow [#customize-webhook-payload]

    Accédez à <DNT>**[one.newrelic.com &gt; All capabilities](https://one.newrelic.com/all-capabilities) &amp;gt; Alerts &amp;gt; Workflows**</DNT> et cliquez sur un workflow existant ou sur le bouton <DNT>**+ Add a new workflow**</DNT> et sélectionnez une destination Webhook.

    <Callout variant="important">
      Le type de contenu de la requête est JSON par défaut, donc la charge utile doit également être au format JSON. Pour vous familiariser avec le format, consultez [nos exemples d&apos;utilisation](/docs/alerts-applied-intelligence/notifications/message-templates/#usage-examples).
    </Callout>

    Vous pouvez utiliser la charge utile par défaut ou la personnaliser pour qu&apos;elle contienne les données requises. Choisissez des variables dans le [menu des variables](/docs/alerts-applied-intelligence/notifications/message-templates/#variables-menu) et appliquez [la syntaxe de Handlebars](/docs/alerts-applied-intelligence/notifications/message-templates/#handlebars-syntax) pour enrichir votre webhook. La section <DNT>**Preview**</DNT> sur le côté droit affiche une charge utile attendue après le rendu du modèle. Si la charge utile ne forme pas un JSON valide, il y aura une erreur et vous ne pourrez pas enregistrer le modèle.

    <img width="80%;" title="An invalid Json payload." alt="A screenshot of an invalid Json payload." src="/images/accounts_screenshot-crop_webhook-preview-error.webp" />

    <Callout variant="tip">
      Les erreurs de type indéfini peuvent indiquer que l&apos;attribut n&apos;a pas été indexé récemment ou n&apos;existe pas. Pour corriger l’erreur, essayez d’ajouter une instruction `if else` . Par exemple, `"closed_at": {{#if issueClosedAtUtc}} {{ json issueClosedAtUtc }} {{else}}"None"{{/if}}`
    </Callout>

    Si la charge utile du webhook est conforme à un JSON valide, vous pouvez envoyer une notification de test à votre destination webhook définie. Nous vous recommandons d&apos;envoyer une notification de test pour vous assurer que tout est correctement connecté.

    <img width="80%;" title="A test webhook notification template." alt="A screenshot of a test webhook notification template." src="/images/accounts_screenshot-crop_webhook-notification-template.webp" />
  </Collapser>

  <Collapser className="freq-link" id="xMatters_templates" title="xCompte">
    ### Modèle de webhook pour xMatters

    Envoyez une notification du workflow à xMatters à l&apos;aide d&apos;un modèle de webhook.

    ```handlebars
    {
      {{#if nrAccountId}}"account_id": {{nrAccountId}},{{/if}}
      "account_name": {{json accumulations.tag.account.[0]}},
      {{#if accumulations.tag.action}}"action":{{json accumulations.tag.action.[0]}},{{/if}}
      "closed_violations_count": {
        "critical": {{#if closedIncidentsCount}}{{closedIncidentsCount}}{{else}}0{{/if}},
        "warning": 0,
        "total": {{#if closedIncidentsCount}}{{closedIncidentsCount}}{{else}}0{{/if}}
      },
      "condition_family_id": {{accumulations.conditionFamilyId.[0]}},
      "condition_id": {{accumulations.conditionFamilyId.[0]}},
      "condition_name": {{json accumulations.conditionName.[0]}},
      {{#if accumulations.evaluationName}}"condition_metric_name": {{json accumulations.evaluationName.[0]}},{{/if}}
      {{#if accumulations.evaluationMetricValueFunction}}"condition_metric_value_function": {{json accumulations.evaluationMetricValueFunction.[0]}},{{/if}}
      "current_state": {{#if issueClosedAt}}"closed"{{else if issueAcknowledgedAt}}"acknowledged"{{else}}"open"{{/if}},
      "details": {{json issueTitle}},
      "duration": {{#if issueDurationMs}}{{issueDurationMs}}{{else}}0{{/if}},
      "event_type": "INCIDENT",
      "incident_acknowledge_url": {{json issueAckUrl}},
      "incident_url": {{json issuePageUrl}},
      "incident_id": {{json issueId}},
      "metadata": {
        {{#if locationStatusesObject}}"location_statuses": {{locationStatusesObject}},{{/if}}
        {{#if accumulations.metadata_entity_type}}"entity.type": {{json accumulations.metadata_entity_type.[0]}},{{/if}}
        {{#if accumulations.metadata_entity_name}}"entity.name": {{json accumulations.metadata_entity_name.[0]}}{{/if}}
      },
      "open_violations_count": {
        "critical": {{#if openIncidentsCount}}{{openIncidentsCount}}{{else}}0{{/if}},
        "warning": 0,
        "total": {{#if openIncidentsCount}}{{openIncidentsCount}}{{else}}0{{/if}}
      },
      "policy_name": {{json accumulations.policyName.[0]}},
      {{#if policyUrl}}"policy_url": {{json policyUrl}},{{/if}}
      "radar_entity": {
        "accountId": {{json accumulations.tag.accountId.[0]}},
        "domain": {{json accumulations.conditionProduct.[0]}},
        "domainId": {{json issueId}},
        "entityGuid": {{json entitiesData.entities.[0].id}},
        "name": {{#if accumulations.targetName}}{{json accumulations.targetName.[0]}}{{else if entitiesData.entities}}{{json entitiesData.entities.[0].name}}{{else}}"NA"{{/if}},
        "type": {{#if entitiesData.types.[0]}}{{json entitiesData.types.[0]}}{{else}}"NA"{{/if}}
      },
      {{#if accumulations.runbookUrl}}"runbook_url": {{json accumulations.runbookUrl.[0]}},{{/if}}
      "severity": {{#eq HIGH priority}}"WARNING"{{else}}{{json priority}}{{/eq}},
      "state": {{json state}},
      "status": {{json status}},
      "targets": [
        {
          "id": {{#if entitiesData.entities.[0].id}}{{json entitiesData.entities.[0].id}}{{else if accumulations.nrqlEventType}}{{json accumulations.nrqlEventType.[0]}}{{else}}"N/A"{{/if}},
          "name": {{#if accumulations.targetName}}{{json accumulations.targetName.[0]}}{{else if entitiesData.entities}}{{json entitiesData.entities.[0].name}}{{else}}"NA"{{/if}},
          "link": {{json issuePageUrl}},
          "product": {{json accumulations.conditionProduct.[0]}},
          "type": {{#if entitiesData.types.[0]}}{{json entitiesData.types.[0]}}{{else}}"NA"{{/if}},
          "labels": {
            {{#each accumulations.rawTag}}{{#if this.[0]}}"{{@key}}":{{json this.[0]}},{{/if}}{{/each}}
            "NewRelic": "targetLabels"
          }
        }
      ],
      "timestamp": {{#if closedAt}}{{closedAt}}{{else if acknowledgedAt}}{{acknowledgedAt}}{{else}}{{createdAt}}{{/if}},
      "timestamp_utc_string": {{json issueUpdatedAt}},
      "version": "1.0",
      {{#if accumulations.conditionDescription}}"VIOLATION DESCRIPTION": {{json accumulations.conditionDescription.[0]}},{{/if}}
      {{#if violationChartUrl}}"violation_chart_url": {{json violationChartUrl}},{{/if}}
      "violation_callback_url": {{json issuePageUrl}}
    }
    ```
  </Collapser>
</CollapserGroup>

## Migrez vos legacy destinations Slack vers la nouvelle destination Slack [#migrate-slack]

Pour migrer vos legacy destinations Slack vers la nouvelle destination Slack, suivez ces étapes :

1. Configurer une nouvelle destination Slack.

2. Pour chaque workflow envoyé vers la destination Slack legacy , procédez comme suit :

   * Recherchez le canal Slack qui a été envoyé avec la legacy notification et enregistrez-le.

   <img width="80%;" title="Migrate Slack, create a new workflow." alt="Migrate Slack, create a new workflow." src="/images/accounts_screenshot-crop_slack-new-workflow.webp" />

   * Testez la notification pour voir si elle fonctionne.
   * Supprimez le notificateur Slack legacy existant.

   <img width="80%;" title="Migrate Slack, remove the existing legacy slack notifier." alt="Migrate Slack, remove the existing legacy slack notifier." src="/images/accounts_screenshot-crop_slack-remove-legacy.webp" />

   * Cliquez sur <DNT>**Test workflow**</DNT> pour confirmer avec un problème réel correspondant au filtre (s&amp;apos;il existe).
   * Enregistrer le workflow.

## Options API [#api]

Vous pouvez également utiliser notre API NerdGraph pour afficher et configurer [les destinations](/docs/apis/nerdgraph/examples/nerdgraph-api-notifications-destinations) et [le canal de notification](/docs/apis/nerdgraph/examples/nerdgraph-api-notifications-channels).