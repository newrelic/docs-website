---
title: 'Kubernetes recommended alerts'
tags:
  - Integrations
  - Kubernetes integration
  - Installation
  - Kubernetes alerts
  - Alerts
  - Terraform
redirects:
  - /docs/integrations/kubernetes-integration/installation/kubernetes-integration-recommended-alert-policy
---

import kubernetesAlertsQuickstart from 'images/kubernetes_alerts_quickstart.webp'

After [installing New Relic into your Kubernetes cluster](https://docs.newrelic.com/docs/kubernetes-pixie/kubernetes-integration/installation/kubernetes-integration-install-configure/), it's advised to import the [Kubernetes Alerts Quickstart](https://link) into your account from the New Relic Quickstart library.  This quickstart provides a set of alert conditions targeting some of the most common Kubernetes infrastructure components and workload resources.  This includes things like Kubernetes nodes, deployments, daemonsets, statefulsets, jobs, pods and containers.

The alert conditions also have a direct affect on various Kubernetes user experiences like [Kubernetes Navigator](https://docs.newrelic.com/docs/kubernetes-pixie/kubernetes-integration/understand-use-data/kubernetes-cluster-explorer/#navigator-preview) and the [Entity Platform](https://docs.newrelic.com/docs/new-relic-solutions/new-relic-one/core-concepts/what-entity-new-relic/) which includes Kubernetes entities and entity dashboards.

## Deployment Options

There are two options for deploying the Kubernetes Alerts Quickstart to your New Relic account.  

- [Kubernetes Alerts Quickstart](https://docs.newrelic.com/docs/kubernetes-pixie/kubernetes-integration/installation/kubernetes-integration-recommended-alert-policy/#kubernetes-alerts-quickstart)
- [Kubernetes Alerts Terraform Module](https://docs.newrelic.com/docs/kubernetes-pixie/kubernetes-integration/installation/kubernetes-integration-recommended-alert-policy/#kubernetes-alerts-terraform-module)

## Kubernetes Alerts Quickstart

The Kubernetes Alerts Quickstart can be deployed to your account from within the New Relic UI.  

Navigate to the `Add Data` button, search for `kubernetes alert policy`, and click on the `Alerts` tab.  Follow the prompts in the Guided Install.  If you've already installed New Relic into your Kubernetes cluster, you can skip the `Setup data source` step.


<img
  title="Kubernetes Alerts Quickstart"
  alt="Kubernetes Alerts Quickstart"
  src={kubernetesAlertsQuickstart}
/>
<br />
<br />

<Callout variant="important">
  The `clusterName` and `namespaceName` attributes contain placeholders and will need to be modified for all alert conditions. This is done intentionally so that alerts are not inadvertantly enabled for all Kubernetes clusters and workloads. The alert conditions contained within the quickstart are templates that are meant to be adjusted and tailored to your specific environment. 
</Callout>


## Kubernetes Alerts Terraform Module

The [Kubernetes Alerts Terraform Module](https://github.com/newrelic-experimental/kubernetes-alert-policy-terraform) is useful for automating the deployment and management of alerts across multiple clusters.  Use the `terraform.tfvars.example` file in the repo to customize the alerts for your environment.


## Kubernetes Alert Conditions and Settings

---
<br />
#### Node

<CollapserGroup>
  <Collapser
    className="freq-link"
    id="node-allocatable"
    title="Average node allocatable CPU utilization is > 90% for > 5 minutes"
  >
   ```json
   {
  "description": "Average node allocatable CPU utilization is > 90% for more than 5 minutes",
  "name": "Node allocatable cpu utilization is high",
  "nrql": {
    "query": "from K8sNodeSample select average(allocatableCpuCoresUtilization) where clusterName in ('your-cluster-name') facet nodeName, clusterName"
  },
  "signal": {
    "aggregationDelay": 60,
    "aggregationMethod": "EVENT_FLOW",
    "aggregationTimer": null,
    "aggregationWindow": 300,
    "evaluationDelay": 60,
    "evaluationOffset": null,
    "fillOption": "NONE",
    "fillValue": null,
    "slideBy": 60
  },
  "terms": [
    {
      "operator": "ABOVE",
      "priority": "CRITICAL",
      "threshold": 90,
      "thresholdDuration": 300,
      "thresholdOccurrences": "ALL"
    }
  ],
  "type": "STATIC"
}
  ```
  </Collapser>

  <Collapser
    className="freq-link"
    id="node-allocatable-mem-util"
    title="Average node allocatable memory utilization is > 90% for > 5 minutes"
  >

  ```json
  {
  "description": "Average node allocatable memory utilization is > 90% for more than 5 minutes",
  "name": "Node allocatable memory utilization is high",
  "nrql": {
    "query": "from K8sNodeSample select average(allocatableMemoryUtilization) where clusterName in ('your-cluster-name') facet nodeName, clusterName"
  },
  "signal": {
    "aggregationDelay": 60,
    "aggregationMethod": "EVENT_FLOW",
    "aggregationTimer": null,
    "aggregationWindow": 300,
    "evaluationDelay": 60,
    "evaluationOffset": null,
    "fillOption": "NONE",
    "fillValue": null,
    "slideBy": 60
  },
  "terms": [
    {
      "operator": "ABOVE",
      "priority": "CRITICAL",
      "threshold": 90,
      "thresholdDuration": 300,
      "thresholdOccurrences": "ALL"
    }
  ],
  "type": "STATIC"
}
  ```
    
  </Collapser>

  <Collapser
    className="freq-link"
    id="node-not-ready"
    title="Node is not ready for > 5 minutes"
  >

  ```json
  {
  "description": "Node is not ready after 5 minutes",
  "name": "Node is not ready",
  "nrql": {
    "query": "from K8sNodeSample select latest(condition.Ready) where clusterName in ('your-cluster-name') facet nodeName, clusterName"
  },
  "signal": {
    "aggregationDelay": 60,
    "aggregationMethod": "EVENT_FLOW",
    "aggregationTimer": null,
    "aggregationWindow": 60,
    "evaluationDelay": 300,
    "evaluationOffset": null,
    "fillOption": "NONE",
    "fillValue": null,
    "slideBy": null
  },
  "terms": [
    {
      "operator": "BELOW",
      "priority": "CRITICAL",
      "threshold": 1,
      "thresholdDuration": 300,
      "thresholdOccurrences": "ALL"
    }
  ],
  "type": "STATIC"
}
  ```
  </Collapser>

  <Collapser
    className="freq-link"
    id="node-pod-capacity"
    title="Running pod count on a node is > 90% of the node's pod capacity for > 5 minutes"
  >

  ```json
  {
  "description": "Running pod count on a node is > 90% of the node's pod capacity for more than 5 minutes",
  "name": "Node pod count near capacity",
  "nrql": {
    "query": "FROM K8sPodSample, K8sNodeSample select ceil(filter(uniqueCount(podName), where status = 'Running') / latest(capacityPods) * 100) as 'Pod Capacity %' where nodeName != '' and nodeName is not null and clusterName in ('your-cluster-name') facet nodeName, clusterName"
  },
  "signal": {
    "aggregationDelay": 60,
    "aggregationMethod": "EVENT_FLOW",
    "aggregationTimer": null,
    "aggregationWindow": 60,
    "evaluationDelay": 60,
    "evaluationOffset": null,
    "fillOption": "NONE",
    "fillValue": null,
    "slideBy": null
  },
  "terms": [
    {
      "operator": "ABOVE",
      "priority": "CRITICAL",
      "threshold": 90,
      "thresholdDuration": 300,
      "thresholdOccurrences": "ALL"
    }
  ],
  "type": "STATIC"
}
  ```
    
  </Collapser>

  <Collapser
    className="freq-link"
    id="node-unschedulable"
    title="Node has been marked as unschedulable"
  >

  ```json
  {
  "description": "Node has been marked as unschedulable",
  "name": "Node is unschedulable",
  "nrql": {
    "query": "from K8sNodeSample select latest(unschedulable) where clusterName in ('your-cluster-name') facet nodeName, clusterName"
  },
  "signal": {
    "aggregationDelay": 60,
    "aggregationMethod": "EVENT_FLOW",
    "aggregationTimer": null,
    "aggregationWindow": 60,
    "evaluationDelay": 60,
    "evaluationOffset": null,
    "fillOption": "NONE",
    "fillValue": null,
    "slideBy": null
  },
  "terms": [
    {
      "operator": "ABOVE",
      "priority": "CRITICAL",
      "threshold": 0,
      "thresholdDuration": 300,
      "thresholdOccurrences": "ALL"
    }
  ],
  "type": "STATIC"
}
  ```
    
  </Collapser>

   <Collapser
    className="freq-link"
    id="node-root-fs-capacity"
    title="Average node root file system capacity utilization is > 90% for > 5 minutes"
  >

  ```json
  {
  "description": "Average node root file system capacity utilization is > 90% for more than 5 minutes",
  "name": "Node root file system capacity utilization is high",
  "nrql": {
    "query": "from K8sNodeSample select average(fsCapacityUtilization) where clusterName in ('your-cluster-name') facet nodeName, clusterName"
  },
  "signal": {
    "aggregationDelay": 60,
    "aggregationMethod": "EVENT_FLOW",
    "aggregationTimer": null,
    "aggregationWindow": 300,
    "evaluationDelay": 60,
    "evaluationOffset": null,
    "fillOption": "NONE",
    "fillValue": null,
    "slideBy": 60
  },
  "terms": [
    {
      "operator": "ABOVE",
      "priority": "CRITICAL",
      "threshold": 90,
      "thresholdDuration": 300,
      "thresholdOccurrences": "ALL"
    }
  ],
  "type": "STATIC"
}
  ```
    
  </Collapser>
</CollapserGroup>

#### Pod
<CollapserGroup>
  <Collapser
    className="freq-link"
    id="pod-not-ready"
    title="Pod is not ready for more than 5 minutes"
  >

  ```json
  {
  "description": "Pod is not ready for more than 5 minutes",
  "name": "Pod is not ready",
  "nrql": {
    "query": "FROM K8sPodSample select latest(isReady) where status not in ('Failed', 'Succeeded') and clusterName in ('your-cluster-name') and namespaceName not in ('exclude-me') facet podName, namespaceName, clusterName"
  },
  "signal": {
    "aggregationDelay": 60,
    "aggregationMethod": "EVENT_FLOW",
    "aggregationTimer": null,
    "aggregationWindow": 60,
    "evaluationDelay": 60,
    "evaluationOffset": null,
    "fillOption": "NONE",
    "fillValue": null,
    "slideBy": null
  },
  "terms": [
    {
      "operator": "BELOW",
      "priority": "CRITICAL",
      "threshold": 1,
      "thresholdDuration": 300,
      "thresholdOccurrences": "ALL"
    }
  ],
  "type": "STATIC"
  }
}
  ```
    
  </Collapser>


  <Collapser
    className="freq-link"
    id="pods-failing-namespace"
    title="More than 5 pods are failing in a namespace for > 5 minutes"
  >

  ```json
  {
  "description": "Alert when more than 5 pods are failing in a namespace",
  "name": "More than 5 pods are failing in a namespace",
  "nrql": {
    "query": "from K8sPodSample select uniqueCount(podName) where clusterName in ('your-cluster-name') and namespaceName not in ('exclude-me') and status = 'Failed' facet namespaceName, clusterName"
  },
  "signal": {
    "aggregationDelay": 60,
    "aggregationMethod": "EVENT_FLOW",
    "aggregationTimer": null,
    "aggregationWindow": 60,
    "evaluationDelay": 300,
    "evaluationOffset": null,
    "fillOption": "NONE",
    "fillValue": null,
    "slideBy": null
  },
  "terms": [
    {
      "operator": "ABOVE",
      "priority": "CRITICAL",
      "threshold": 5,
      "thresholdDuration": 300,
      "thresholdOccurrences": "ALL"
    }
  ],
  "type": "STATIC"
}
  ```
    
  </Collapser>


  <Collapser
    className="freq-link"
    id="pod-unschedulable"
    title="Pod cannot be scheduled for > 5 minutes"
  >

  ```json
  {
  "description": "Pod cannot be scheduled for more than 5 minutes",
  "name": "Pod cannot be scheduled",
  "nrql": {
    "query": "FROM K8sPodSample select latest(isScheduled) where clusterName in ('your-cluster-name') and namespaceName not in ('exclude-me') facet podName, namespaceName, clusterName"
  },
  "signal": {
    "aggregationDelay": 60,
    "aggregationMethod": "EVENT_FLOW",
    "aggregationTimer": null,
    "aggregationWindow": 60,
    "evaluationDelay": 60,
    "evaluationOffset": null,
    "fillOption": "NONE",
    "fillValue": null,
    "slideBy": null
  },
  "terms": [
    {
      "operator": "BELOW",
      "priority": "CRITICAL",
      "threshold": 1,
      "thresholdDuration": 300,
      "thresholdOccurrences": "ALL"
    }
  ],
  "type": "STATIC"
}
  ```
    
  </Collapser>

</CollapserGroup>

#### Container
<CollapserGroup>
  <Collapser
    className="freq-link"
    id="container-restarts"
    title="Container restart count > 0 in a sliding 5 minute window"
  >

  ```json
  {
  "description": "Container restart count is greater than 0 in a sliding 5 minute window",
  "name": "Container is Restarting",
  "nrql": {
    "query": "from K8sContainerSample select sum(restartCountDelta) where clusterName in ('your-cluster-name') and namespaceName not in ('exclude-me') FACET containerName, podName, namespaceName, clusterName"
  },
  "signal": {
    "aggregationDelay": 60,
    "aggregationMethod": "EVENT_FLOW",
    "aggregationTimer": null,
    "aggregationWindow": 300,
    "evaluationDelay": 60,
    "evaluationOffset": null,
    "fillOption": "NONE",
    "fillValue": null,
    "slideBy": 60
  },
  "terms": [
    {
      "operator": "ABOVE",
      "priority": "CRITICAL",
      "threshold": 0,
      "thresholdDuration": 300,
      "thresholdOccurrences": "ALL"
    }
  ],
  "type": "STATIC"
}
  ```
    
  </Collapser>

  <Collapser
    className="freq-link"
    id="container-cpu-util"
    title="Average container CPU utilization (vs. limit) is > 90% for > 5 minutes"
  >

  ```json
  {
    "description": "Average container CPU utilization (vs. limit) is > 90% for more than 5 minutes",
    "query": "from K8sContainerSample select average(cpuCoresUtilization) where clusterName in ('your-cluster-name') and namespaceName not in ('exclude-me') facet containerName, podName, namespaceName, clusterName",
    "signal": {
      "aggregationDelay": 60,
      "aggregationMethod": "EVENT_FLOW",
      "aggregationTimer": null,
      "aggregationWindow": 300,
      "evaluationDelay": 60,
      "evaluationOffset": null,
      "fillOption": "NONE",
      "fillValue": null,
      "slideBy": 60
    }
  }
  ```
    
  </Collapser>

  <Collapser
    className="freq-link"
    id="container-mem-util"
    title="Average container memory utilization (vs. limit) is > 90% for > 5 minutes"
  >

  ```json
  {
  "description": "Average container memory utilization (vs. limit) is > 90% for more than 5 minutes",
  "name": "Container high memory utilization",
  "nrql": {
    "query": "from K8sContainerSample select average(memoryWorkingSetUtilization) where clusterName in ('your-cluster-name') and namespaceName not in ('exclude-me') facet containerName, podName, namespaceName, clusterName"
  },
  "signal": {
    "aggregationDelay": 60,
    "aggregationMethod": "EVENT_FLOW",
    "aggregationTimer": null,
    "aggregationWindow": 300,
    "evaluationDelay": 60,
    "evaluationOffset": null,
    "fillOption": "NONE",
    "fillValue": null,
    "slideBy": 60
  },
  "terms": [
    {
      "operator": "ABOVE",
      "priority": "CRITICAL",
      "threshold": 90,
      "thresholdDuration": 300,
      "thresholdOccurrences": "ALL"
    }
  ],
  "type": "STATIC"
}
  ```
    
  </Collapser>

   <Collapser
    className="freq-link"
    id="container-cpu-throttling"
    title="Container cpu is being throttled > 25% of the time for > 5 minutes"
  >

  ```json
  {
  "description": "Alert when container is being throttled > 25% of the time for more than 5 minutes",
  "name": "Container cpu throttling is high",
  "nrql": {
    "query": "from K8sContainerSample select sum(containerCpuCfsThrottledPeriodsDelta) / sum(containerCpuCfsPeriodsDelta) * 100 where clusterName in ('your-cluster-name') and namespaceName not in ('exclude-me') facet containerName, podName, namespaceName, clusterName"
  },
  "signal": {
    "aggregationDelay": 60,
    "aggregationMethod": "EVENT_FLOW",
    "aggregationTimer": null,
    "aggregationWindow": 300,
    "evaluationDelay": 60,
    "evaluationOffset": null,
    "fillOption": "NONE",
    "fillValue": null,
    "slideBy": 60
  },
  "terms": [
    {
      "operator": "ABOVE",
      "priority": "CRITICAL",
      "threshold": 90,
      "thresholdDuration": 300,
      "thresholdOccurrences": "ALL"
    }
  ],
  "type": "STATIC"
}
  ```
    
  </Collapser>

  <Collapser
    className="freq-link"
    id="container-waiting"
    title="Container is waiting for > 5 minutes"
  >

  ```json
  {
  "description": "Container is waiting for more than 5 minutes",
  "name": "Container is Waiting",
  "nrql": {
    "query": "from K8sContainerSample select uniqueCount(podName) WHERE status = 'Waiting' and clusterName in ('your-cluster-name') and namespaceName not in ('exclude-me') FACET containerName, podName, namespaceName, clusterName"
  },
  "signal": {
    "aggregationDelay": 60,
    "aggregationMethod": "EVENT_FLOW",
    "aggregationTimer": null,
    "aggregationWindow": 60,
    "evaluationDelay": 60,
    "evaluationOffset": null,
    "fillOption": "NONE",
    "fillValue": null,
    "slideBy": null
  },
  "terms": [
    {
      "operator": "ABOVE",
      "priority": "CRITICAL",
      "threshold": 0,
      "thresholdDuration": 300,
      "thresholdOccurrences": "ALL"
    }
  ],
  "type": "STATIC"
}
  ```
    
  </Collapser>
</CollapserGroup>

#### Statefulset
<CollapserGroup>
<Collapser
    className="freq-link"
    id="statefulset-missing-pods"
    title="Statefulset is missing pods for > 5 minutes"
  >

  ```json
  {
  "description": "Statefulset is missing pods for > 5 minutes",
  "name": "Statefulset is missing pods",
  "nrql": {
    "query": "from K8sStatefulsetSample select latest(podsMissing) where clusterName in ('your-cluster-name') and namespaceName not in ('exclude-me') facet statefulsetName, namespaceName, clusterName"
  },
  "signal": {
    "aggregationDelay": 60,
    "aggregationMethod": "EVENT_FLOW",
    "aggregationTimer": null,
    "aggregationWindow": 60,
    "evaluationDelay": 60,
    "evaluationOffset": null,
    "fillOption": "NONE",
    "fillValue": null,
    "slideBy": null
  },
  "terms": [
    {
      "operator": "ABOVE",
      "priority": "CRITICAL",
      "threshold": 0,
      "thresholdDuration": 300,
      "thresholdOccurrences": "ALL"
    }
  ],
  "type": "STATIC"
}
  ```
    
  </Collapser>

  </CollapserGroup>

#### Daemonset
<CollapserGroup>

  <Collapser
    className="freq-link"
    id="daemonset-missing-pods"
    title="Daemonset is missing pods for > 5 minutes"
  >

  ```json
  {
  "description": "Daemonset is missing pods for > 5 minutes",
  "name": "Daemonset is missing pods",
  "nrql": {
    "query": "from K8sDaemonsetSample select latest(podsMissing) where clusterName in ('your-cluster-name') and namespaceName not in ('exclude-me') facet daemonsetName, namespaceName, clusterName"
  },
  "signal": {
    "aggregationDelay": 60,
    "aggregationMethod": "EVENT_FLOW",
    "aggregationTimer": null,
    "aggregationWindow": 60,
    "evaluationDelay": 60,
    "evaluationOffset": null,
    "fillOption": "NONE",
    "fillValue": null,
    "slideBy": null
  },
  "terms": [
    {
      "operator": "ABOVE",
      "priority": "CRITICAL",
      "threshold": 0,
      "thresholdDuration": 300,
      "thresholdOccurrences": "ALL"
    }
  ],
  "type": "STATIC"
}
  ```
    
  </Collapser>

</CollapserGroup>

#### HPA
<CollapserGroup>
  <Collapser
    className="freq-link"
    id="hpa-replicas"
    title="HPA replicas have maxed out for 5 minutes"
  >

  ```json
  {
    "description": "HPA replicas have maxed out for 5 minutes",
    "query": "FROM K8sHpaSample select latest(maxReplicas - currentReplicas) where clusterName in ('your-cluster-name') and namespaceName not in ('exclude-me') facet displayName, namespaceName, clusterName",
    "signal": {
      "aggregationDelay": 60,
      "aggregationMethod": "EVENT_FLOW",
      "aggregationTimer": null,
      "aggregationWindow": 60,
      "evaluationDelay": 60,
      "evaluationOffset": null,
      "fillOption": "NONE",
      "fillValue": null,
      "slideBy": null
    }
  }
  ```
    
  </Collapser>

  <Collapser
    className="freq-link"
    id="hpa-desired-replicas"
    title="HPA current replicas < desired replicas for 5 minutes"
  >

  ```json
  {
  "description": "HPA current replicas < desired replicas for 5 minutes",
  "name": "HPA current replicas < desired replicas",
  "nrql": {
    "query": "FROM K8sHpaSample select latest(desiredReplicas - currentReplicas) where clusterName in ('your-cluster-name') and namespaceName not in ('exclude-me') facet displayName, namespaceName, clusterName"
  },
  "signal": {
    "aggregationDelay": 60,
    "aggregationMethod": "EVENT_FLOW",
    "aggregationTimer": null,
    "aggregationWindow": 60,
    "evaluationDelay": 60,
    "evaluationOffset": null,
    "fillOption": "NONE",
    "fillValue": null,
    "slideBy": null
  },
  "terms": [
    {
      "operator": "EQUALS",
      "priority": "CRITICAL",
      "threshold": 0,
      "thresholdDuration": 300,
      "thresholdOccurrences": "ALL"
    }
  ],
  "type": "STATIC"
}
  ```
    
  </Collapser>
</CollapserGroup>

#### Job
<CollapserGroup>
  <Collapser
    className="freq-link"
    id="job-failed"
    title="Job reports a failed status"
  >

  ```json
  {
  "description": "Job reports a failed status",
  "name": "Job failed",
  "nrql": {
    "query": "from K8sJobSample select uniqueCount(jobName) where failed = 'true' and clusterName in ('your-cluster-name') and namespaceName not in ('exclude-me') facet jobName, namespaceName, clusterName, failedPodsReason"
  },
  "signal": {
    "aggregationDelay": 60,
    "aggregationMethod": "EVENT_FLOW",
    "aggregationTimer": null,
    "aggregationWindow": 60,
    "evaluationDelay": 60,
    "evaluationOffset": null,
    "fillOption": "NONE",
    "fillValue": null,
    "slideBy": null
  },
  "terms": [
    {
      "operator": "ABOVE",
      "priority": "CRITICAL",
      "threshold": 0,
      "thresholdDuration": 60,
      "thresholdOccurrences": "AT_LEAST_ONCE"
    }
  ],
  "type": "STATIC"
}
  ```
    
  </Collapser>
</CollapserGroup>

#### Deployment
<CollapserGroup>
  <Collapser
    className="freq-link"
    id="deployment-missing-pods"
    title="Deployment is missing pods for > 5 minutes"
  >

  ```json
  {
  "description": "Deployment is missing pods for > 5 minutes",
  "name": "Deployment is missing pods",
  "nrql": {
    "query": "from K8sDeploymentSample select latest(podsMissing) where clusterName in ('your-cluster-name') and namespaceName not in ('exclude-me') facet deploymentName, namespaceName, clusterName"
  },
  "signal": {
    "aggregationDelay": 60,
    "aggregationMethod": "EVENT_FLOW",
    "aggregationTimer": null,
    "aggregationWindow": 60,
    "evaluationDelay": 60,
    "evaluationOffset": null,
    "fillOption": "NONE",
    "fillValue": null,
    "slideBy": null
  },
  "terms": [
    {
      "operator": "ABOVE",
      "priority": "CRITICAL",
      "threshold": 0,
      "thresholdDuration": 300,
      "thresholdOccurrences": "ALL"
    }
  ],
  "type": "STATIC"
}
  ```
    
  </Collapser>

</CollapserGroup>

#### Persistent Volume
<CollapserGroup>

 <Collapser
    className="freq-link"
    id="pvc-failed-pending"
    title="Persistent volume is in a failed or pending state for > 5 minutes"
  >

  ```json
  {
    "description": "Persistent volume is in a failed or pending state for more than 5 minutes",
    "name": "Persistent volume has errors",
    "nrql": {
      "query": "from K8sPersistentVolumeSample select uniqueCount(volumeName) where statusPhase in ('Failed','Pending') and clusterName in ('nr-quickstarts-sandbox','bschmitt-demo') facet volumeName, clusterName"
    },
    "signal": {
      "aggregationDelay": 60,
      "aggregationMethod": "EVENT_FLOW",
      "aggregationTimer": null,
      "aggregationWindow": 60,
      "evaluationDelay": 60,
      "evaluationOffset": null,
      "fillOption": "NONE",
      "fillValue": null,
      "slideBy": null
    },
    "terms": [
      {
        "operator": "ABOVE",
        "priority": "CRITICAL",
        "threshold": 0,
        "thresholdDuration": 300,
        "thresholdOccurrences": "ALL"
      }
    ],
    "type": "STATIC"
  }
  ```
    
  </Collapser>
</CollapserGroup>

#### Etcd
<CollapserGroup>

  <Collapser
    className="freq-link"
    id="etcd-file-descriptor"
    title="Etcd file descriptor utilization is > 90% for > 1 minute"
  >

  ```json
  {
  "description": "Etcd file descriptor utilization is > 90% for more than 1 minute",
  "name": "Etcd file descriptor utilization is high",
  "nrql": {
    "query": "from K8sEtcdSample select max(processFdsUtilization) where clusterName in ('your-cluster-name') facet displayName, clusterName"
  },
  "signal": {
    "aggregationDelay": 60,
    "aggregationMethod": "EVENT_FLOW",
    "aggregationTimer": null,
    "aggregationWindow": 60,
    "evaluationDelay": 60,
    "evaluationOffset": null,
    "fillOption": "NONE",
    "fillValue": null,
    "slideBy": null
  },
  "terms": [
    {
      "operator": "ABOVE",
      "priority": "CRITICAL",
      "threshold": 90,
      "thresholdDuration": 60,
      "thresholdOccurrences": "ALL"
    }
  ],
  "type": "STATIC"
}
  ```
    
  </Collapser>

  <Collapser
    className="freq-link"
    id="etcd-no-leader"
    title="Etcd has no leader for > 1 minute"
  >

  ```json
  {
  "description": "Etcd has no leader for more than 1 minute",
  "name": "Etcd has no leader",
  "nrql": {
    "query": "from K8sEtcdSample select min(etcdServerHasLeader) where clusterName in ('your-cluster-name') facet displayName, clusterName"
  },
  "signal": {
    "aggregationDelay": 60,
    "aggregationMethod": "EVENT_FLOW",
    "aggregationTimer": null,
    "aggregationWindow": 60,
    "evaluationDelay": 60,
    "evaluationOffset": null,
    "fillOption": "NONE",
    "fillValue": null,
    "slideBy": null
  },
  "terms": [
    {
      "operator": "BELOW",
      "priority": "CRITICAL",
      "threshold": 1,
      "thresholdDuration": 60,
      "thresholdOccurrences": "ALL"
    }
  ],
  "type": "STATIC"
}
  ```
    
  </Collapser>

</CollapserGroup>

## Default Signal Settings

For details about the available signal settings in the alert conditions below, visit the [Advanced Signal Settings](https://docs.newrelic.com/docs/alerts-applied-intelligence/new-relic-alerts/get-started/your-first-nrql-condition/#advanced-signal-settings) page.  

Most alerts use the following:

- `aggregationDelay` of 1 min.
- `aggregationWindow` of either 1 min. or 5 min.
- `evaluationDelay` of either 1 min. or 5 min.
- For smoothing purposes, some alerts will utilize a 5 min `slideBy` value.

These settings can be adjusted to fit the specific needs use cases in your environment.