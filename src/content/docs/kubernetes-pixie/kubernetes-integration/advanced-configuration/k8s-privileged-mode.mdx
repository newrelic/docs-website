---
title: Privileged vs. unprivileged mode
description: Understand why the New Relic Kubernetes integration defaults to privileged mode, what metrics are affected by disabling it, and how to configure it.
template: 'GuideTemplate'
---

By default, the New Relic Kubernetes integration runs in **privileged mode**. This allows the Infrastructure Agent (which runs as a sidecar within the DaemonSet) to access the underlying host's information directly.

While this provides the most complete telemetry, some security policies (such as Pod Security Standards or OpenShift SCCs) may require you to run workloads in **unprivileged mode**.

## Why privileged mode is required

The New Relic Infrastructure Agent is included in the Kubelet pod and requires low-level access to the node's operating system to collect deep system metrics.

Although the default value for `privileged` in the [common library](https://github.com/newrelic/helm-charts/blob/master/library/common-library/README.md) is `false`, this chart sets it to `true` by default (see [`values.yaml`](https://github.com/newrelic/helm-charts/blob/master/charts/nri-bundle/values.yaml)) to ensure the agent can:

* Read the host's `/proc` and `/sys` filesystems.
* Collect accurate CPU, memory, storage, and network statistics for the **underlying host**.
* Gather full process lists and metadata that correlate infrastructure health with your Kubernetes objects.

### Running in unprivileged mode

If your cluster security policy does not allow `privileged` in your pods' security context, you can disable it by setting `privileged` to `false`.

### Impact on data collection

<Callout variant="important">
  Disabling privileged mode will result in the loss of **host-level metrics** and metadata.
</Callout>

When unprivileged, the Infrastructure Agent cannot see the host's resource usage. You will lose access to the standard host metrics, including:

* **SystemSample:** Host-level CPU, memory, and load averages.
* **StorageSample:** Disk usage and I/O for the node's filesystem.
* **NetworkSample:** Physical network interface statistics.
* **ProcessSample:** Data on processes running outside the New Relic container.

For a detailed list of exactly which attributes and metrics are unavailable in unprivileged mode, please refer to the [Linux agent running modes documentation](https://docs.newrelic.com/docs/infrastructure/infrastructure-agent/linux-installation/linux-agent-running-modes/#mode-metrics).

### How to configure it

Update your custom values file to set the global privileged flag to `false`:

```yaml
global:
  privileged: false
 ```

### Windows in unprivileged mode

Due to Windows container isolation, standard containers cannot access host infrastructure directly. While HostProcess containers can provide this access, they introduce additional security risks and are not currently utilized by the New Relic Kubernetes integration. Consequently, Windows DaemonSets run exclusively in unprivileged mode; privileged mode is not supported for Windows nodes at this time.

For more details on what metrics are collected in this mode, see [Limitations to the Kubernetes integration for Windows](https://docs.newrelic.com/docs/kubernetes-pixie/kubernetes-integration/troubleshooting/troubleshooting-windows/#k8-windows-limitations).
