---
title: 'About Windows in Kubernetes'
tags:
- Integrations
- Kubernetes integration
- Windows
metaDescription: "New Relic's Kubernetes integration: About the integration on Windows-based nodes"
freshnessValidatedDate: never
---

<Callout title="preview">
  We're still working on this feature, but we'd love for you to try it out!

  This feature is currently provided as part of a preview program pursuant to our [pre-release policies](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy). Check the [Kubernetes integration installation guide](/src/install/kubernetes/intro) for the latest instructions.
</Callout>

## Checking the Windows Version [#windows-version]

<Callout variant="important">
  When using containers in Windows, the container host version and the container image version must be the same. Our Kubernetes integration can run on Windows versions LTSC 2019 and LTSC 2022.
</Callout>

To check your Windows version, open a Powershell or command prompt window, and run this command:

```shell
systeminfo
```
Look for the the lines beginning with `OS Name` and `OS Version`, which should give you the corresponding OS information and build number. Windows Server LTSC 2019 corresponds to build number 10.0.17763, and Windows Server LTSC 2022 corresponds to build number 10.0.20348. When installing the integration, you will not need to specify version information. This is just to verify installability.

## Windows DaemonSets [#windows-daemonsets]

When Windows is enabled, A Kubernetes DaemonSet will be created for each supported Windows version, but pods will be created only for Windows node versions that exist in the cluster. This means you may see multiple DaemonSet in your cluster, but not all of them will have desired pods.

Example output where the cluster has two Linux nodes, one Windows LTSC 2022 node, and no Windows LTSC 2019 nodes:
```shell
kubectl -n newrelic get daemonsets
NAME                                                DESIRED   CURRENT   READY   UP-TO-DATE   AVAILABLE   NODE SELECTOR                                                          AGE
<...snip...>
newrelic-bundle-nrk8s-kubelet                       2         2         2       2            2           kubernetes.io/os=linux                                                 24h
newrelic-bundle-nrk8s-kubelet-windows-ltsc2019      0         0         0       0            0           kubernetes.io/os=windows,node.kubernetes.io/windows-build=10.0.17763   24h
newrelic-bundle-nrk8s-kubelet-windows-ltsc2022      1         1         1       1            1           kubernetes.io/os=windows,node.kubernetes.io/windows-build=10.0.20348   24h
```

If desired, you can prevent the chart from creating the unnecessary DaemonSet including the `windowsOsList` key in your custom `values.yaml` file when installing via Helm Chart & indicating only the desired version:
```yaml
windowsOsList:
  - version: ltsc2022                      # Human-readable version identifier
    imageTagSuffix: ltsc2022               # Tag to be used for nodes running the windows version above
    buildNumber: 10.0.20348                # Build number for the nodes running the version above. Used as a selector.
```

## Limitations to the Kubernetes integration for Windows [#k8-windows-limitations]
The Windows agent only sends the [Kubernetes samples](/docs/kubernetes-pixie/kubernetes-integration/understand-use-data/find-use-your-kubernetes-data/#event-types), such as `K8sNodeSample` or `K8sPodSample`. These limitations apply to the Kubernetes integration for Windows:

* `SystemSample`, `StorageSample`, `NetworkSample`, and `ProcessSample` are not generated at this time. This is due to limitations in permissions for Windows containers in Kubernetes.
* The use of `hostNetwork` in a Kubernetes spec is not supported for Windows pods in Kubernetes
* Some [Kubernetes metrics](/docs/integrations/kubernetes-integration/understand-use-data/understand-use-data#metrics) are missing because the Windows kubelet doesn't have them or they are not relevant for Windows:
  * Node:
    * `memoryMajorPageFaultsPerSecond`: always returns zero as a value
    * `memoryPageFaults`: always returns zero as a value
    * `memoryRssBytes`: always returns zero as a value
    * `net.errorsPerSecond`: not sent
    * `net.rxBytesPerSecond`: not sent
    * `net.txBytesPerSecond`: not sent
    * Not relevant for Windows:
      * `fsInodes`: not sent
      * `fsInodesFree`: not sent
      * `fsInodesUsed`: not sent
      * `runtimeInodes`: not sent
      * `runtimeInodesFree`: not sent
      * `runtimeInodesUsed`: not sent
  * Container:
    * `containerID`: not sent
    * `containerImageID`: not sent
    * `memoryMappedFileBytes`: not sent
    * `memoryUsedBytes`: not sent. `memoryWorkingSetBytes` may be used instead.
    * `memoryUtilization`: computed from `memoryUsedBytes`, so not sent. May be computed from `memoryWorkingSetBytes` / `memoryLimitBytes` instead.
    * `requestedMemoryUtilization`: computed from `memoryUsedBytes`, so not sent. May be computed from `memoryWorkingSetBytes` / `memoryRequestedBytes` instead.
    * Not relevant for Windows:
      * `cpuCfs*`: all `cpuCfs*` values not sent
  * Volume:
    * `fsUsedBytes`: always returns zero as a value
    * `fsUsedPercent`: zero, because `fsUsedBytes` is always zero
