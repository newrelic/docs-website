---
title: Find and use your Kubernetes data 
tags:
  - Integrations
  - Kubernetes integration
  - Understand and use data
translate:
  - kr
metaDescription: 'New Relic''s Kubernetes integration: How to install and activate the integration, and what data is reported.'
redirects:
  - /docs/integrations/kubernetes-integration/understand-use-data/find-use-your-kubernetes-data
  - /docs/integrations/kubernetes-integration/understand-use-data/understand-use-data
  - /docs/integrations/kubernetes-integration/installation/install-kubernetes-integration-using-helm/#services
---

import kubernetesDashboard from 'images/kubernetes_screenshot-full_dashboard.png'

You can build your own charts and [query](/docs/using-new-relic/data/understand-data/query-new-relic-data) all your [Kubernetes integration](/docs/integrations/kubernetes-integration/get-started/introduction-kubernetes-integration) data using the query builder and the NerdGraph API. Our integration collects Kubernetes data by instrumenting the container orchestration layer. For a simpler and more visual experience, use the [cluster explorer](/docs/integrations/kubernetes-integration/understand-use-data/kubernetes-cluster-explorer).

<img
  title="New Relic - Kubernetes dashboard"
  alt="New Relic - Kubernetes dashboard"
  src={kubernetesDashboard}
/>

<figcaption>
  **[one.newrelic.com](https://one.newrelic.com/all-capabilities) > Dashboards**: Using the [query builder](/docs/chart-builder/use-chart-builder/get-started/introduction-chart-builder) you can query your Kubernetes data and create clear visualizations.
</figcaption>

## Query Kubernetes data [#view-data]

The simplest way to [query your Kubernetes data](/docs/using-new-relic/data/understand-data/query-new-relic-data) is using the [query builder](/docs/query-your-data/explore-query-data/query-builder/use-advanced-nrql-mode-specify-data), which accepts [NRQL queries](/docs/query-data/nrql-new-relic-query-language/getting-started/introduction-nrql). Alternatively, you can use the [NerdGraph API](/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph) to retrieve Kubernetes data.

### Events and attributes [#event-types]

Kubernetes data is attached to the following [events](/docs/using-new-relic/data/understand-data/new-relic-data-types#event-data). You can learn more about this data in [our data dictionary](https://docs.newrelic.com/attribute-dictionary/?dataSource=Kubernetes).

<table>
  <thead>
    <tr>
      <th style={{ width: "275px" }}>
        Event name
      </th>

      <th>
        Type of Kubernetes data
      </th>

      <th style={{ width: "200px" }}>
        Available since
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `K8sNodeSample`
      </td>

      <td>
        Node data
      </td>

      <td>
        v1.0.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sNamespaceSample`
      </td>

      <td>
        Namespace data
      </td>

      <td>
        v1.0.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sDeploymentSample`
      </td>

      <td>
        Deployment data
      </td>

      <td>
        v1.0.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sReplicasetSample`
      </td>

      <td>
        ReplicaSet data
      </td>

      <td>
        v1.0.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sDaemonsetSample`
      </td>

      <td>
        DaemonSet data
      </td>

      <td>
        v1.13.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sStatefulsetSample`
      </td>

      <td>
        StatefulSet data
      </td>

      <td>
        v1.13.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sPodSample`
      </td>

      <td>
        Pod data
      </td>

      <td>
        v1.0.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sClusterSample`
      </td>

      <td>
        Cluster data
      </td>

      <td>
        v1.0.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sContainerSample`
      </td>

      <td>
        Container data
      </td>

      <td>
        v1.0.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sVolumeSample`
      </td>

      <td>
        Volume data
      </td>

      <td>
        v1.0.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sApiServerSample`
      </td>

      <td>
        API server data
      </td>

      <td>
        v1.11.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sControllerManagerSample`
      </td>

      <td>
        Controller manager data
      </td>

      <td>
        v1.11.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sSchedulerSample`
      </td>

      <td>
        Scheduler data
      </td>

      <td>
        v1.11.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sEtcdSample`
      </td>

      <td>
        etcd data
      </td>

      <td>
        v1.11.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sEndpointSample`
      </td>

      <td>
        Endpoint data
      </td>

      <td>
        v1.13.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sServiceSample`
      </td>

      <td>
        Service data
      </td>

      <td>
        v1.13.0
      </td>
    </tr>

    <tr>
      <td>
        `K8sHpaSample`
      </td>

      <td>
        Horizontal Pod Autoscaler data
      </td>

      <td>
        v2.3.0
      </td>
    </tr>
  </tbody>
</table>

To learn more about these events and their attributes, see [our data dictionary](https://docs.newrelic.com/attribute-dictionary/?dataSource=Kubernetes).

### Kubernetes metadata in APM-monitored applications [#apm-custom-attributes]

[By linking your applications with Kubernetes](/docs/integrations/kubernetes-integration/metadata-injection/kubernetes-apm-metadata-injection), the following attributes are added to application trace and distributed trace:

* `nodeName`
* `containerName`
* `podName`
* `clusterName`
* `deploymentName`
* `namespaceName`

## Manage alerts [#alerts]

You can be notified about alert violations for your Kubernetes data:

<CollapserGroup>
  <Collapser
    id="create-alert"
    title="Create an alert condition"
  >
    To create an alert condition for the Kubernetes integration:

    1. Go to **[one.newrelic.com](https://one.newrelic.com/all-capabilities) > Infrastructure > Settings > Alerts & AI > Kubernetes**, then select **Create alert condition**.
    2. To filter the alert to Kubernetes entities that only have the chosen attributes, select **Filter**.
    3. Select the threshold settings. For more on the **Trigger an alert when...** options, see [Alert types](#alert-types).
    4. Select an existing [alert policy](/docs/alerts/new-relic-alerts/configuring-alert-policies/create-or-rename-alert-policy), or create a new one.
    5. Select **Create**.

       When an alert condition's threshold is triggered, New Relic sends a [notification](#notifications) to the policy's notification channels.
  </Collapser>

  <Collapser
    id="alert-types"
    title="Use the predefined alert types and thresholds"
  >
    The Kubernetes integration comes with its own alert policy and alert conditions. To see what the predefined alert conditions are, see [Kubernetes integration: Predefined alert policy](/docs/integrations/kubernetes-integration/kubernetes-events/kubernetes-integration-predefined-alert-policy).

    In addition, you can create an alert condition for any metric collected by any [New Relic integration](/docs/integrations/new-relic-integrations/getting-started/introduction-infrastructure-integrations) you use, including the Kubernetes integration:

    1. Select the alert type **Integrations**.
    2. From the **Select a data source** dropdown, select a Kubernetes (K8s) data source.
  </Collapser>

  <Collapser
    id="notifications"
    title="Select alert notifications"
  >
    When an alert condition's threshold is triggered, New Relic sends a message to the notification channel(s) chosen in the alert policy. Depending on the type of notification, you may have the following options:

    * [View the incident](/docs/alerts/new-relic-alerts/reviewing-alert-incidents/view-violation-event-details-incidents).

    * [Acknowledge the incident](/docs/alerts/new-relic-alerts/reviewing-alert-incidents/acknowledge-alert-incidents).

    * Go to a chart of the incident data by selecting the identifier name.

      The entity identifier that triggered the alert appears near the top of the notification message. The format of the identifier depends on the alert type:

    * **Available pods are less than desired pods** alerts:

      ```
      K8s:CLUSTER_NAME:PARENT_NAMESPACE:replicaset:REPLICASET_NAME
      ```

    * **CPU or memory usage** alerts:

      ```
      K8s:CLUSTER_NAME:PARENT_NAMESPACE:POD_NAME:container:CONTAINER_NAME
      ```

      Here are some examples.

      <CollapserGroup>
        <Collapser
          id="pod-alerts"
          title="Pod alert notification example"
        >
          For **Available pods are less than desired pods** alerts, the ID of the `ReplicaSet` triggering the issue might look like this:

          ```
          k8s:beam-production:default:replicaset:nginx-deployment-1623441481
          ```

          This identifier contains the following information:

          * Cluster name: `beam-production`
          * Parent namespace: `default`
          * `ReplicaSet` name: `nginx-deployment-1623441481`
        </Collapser>

        <Collapser
          id="container-resource"
          title="Container resource notification example"
        >
          For container CPU or memory usage alerts, the entity might look like this:

          ```
          k8s:beam-production:kube-system:kube-state-metrics-797bb87c75-zncwn:container:kube-state-metrics
          ```

          This identifier contains the following information:

          * Cluster name: `beam-production`
          * Parent namespace: `kube-system`
          * Pod namespace: `kube-state-metrics-797bb87c75-zncwn`
          * Container name: `kube-state-metrics`
        </Collapser>
      </CollapserGroup>
  </Collapser>

  <Collapser
    id="nrql-alerts"
    title="Create alert conditions using NRQL"
  >
    Follow standard procedures to [create alert conditions for NRQL queries](/docs/alerts/new-relic-alerts/defining-conditions/create-alert-conditions-nrql-queries).
  </Collapser>
</CollapserGroup>

## Reduce data ingest [#reducedataingest]

Our charts support setting an option to reduce the amount of data ingested at the cost of granularity. To enable it, set `global.lowDataMode` to `true` in the `nri-bundle` chart.

`lowDataMode` affects four specific components of the `nri-bundle` chart outlined below.

### New Relic Infrastructure

If `lowDataMode` is enabled, the default scrape interval changes from `15s` to `30s`.
You can also specify a custom value for it using `config.interval`, which will take preference over `lowDataMode`.

### Prometheus Agent Integration

If `lowDataMode` is enabled, the metrics that are prefixed with the following are excluded by default as they're already collected and used by the [New Relic Kubernetes Integration](/docs/integrations/kubernetes-integration/understand-use-data/find-use-your-kubernetes-data/#event-types).

```
- kube_
- container_
- machine_
- cadvisor_
```

### New Relic Logging

If `lowDataMode` is enabled, Labels and Annotations are set to `Off` in the [Filter section](https://github.com/newrelic/helm-charts/blob/master/charts/newrelic-logging/templates/configmap.yaml#L38-L39) of the fluent-bit.conf file. This means that this detail will be dropped from the container log files which reduces the overall data ingest into New Relic.

The following fields are retained:

```
Allowlist_key  container_name
Allowlist_key  namespace_name
Allowlist_key  pod_name
Allowlist_key  stream
Allowlist_key  log
```

**Low Data Mode Log Example**

Complete Log Record

```
[
  {
    "cluster_name": "api-test",
    "kubernetes": {
      "annotations": {
        "kubernetes.io/psp": "eks.privileged"
      },
      "container_hash": "fryckbos/test@sha256:5b098eaf3c7d5b3585eb10cebee63665b6208bea31ef31a3f0856c5ffdda644b",
      "container_image": "fryckbos/test:latest",
      "container_name": "newrelic-logging",
      "docker_id": "134e1daf63761baa15e035b08b7aea04518a0f0e50af4215131a50c6a379a072",
      "host": "ip-192-168-17-123.ec2.internal",
      "labels": {
        "app": "newrelic-logging",
        "app.kubernetes.io/name": "newrelic-logging",
        "controller-revision-hash": "84db95db86",
        "pod-template-generation": "1",
        "release": "nri-bundle"
      },
      "namespace_name": "nrlogs",
      "pod_id": "54556e3e-719c-46b5-af69-020b75d69bf1",
      "pod_name": "nri-bundle-newrelic-logging-jxnbj"
    },
    "message": "[2021/09/14 12:30:49] [ info] [engine] started (pid=1)\n",
    "plugin": {
      "source": "kubernetes",
      "type": "fluent-bit",
      "version": "1.8.1"
    },
    "stream": "stderr",
    "time": "2021-09-14T12:30:49.138824971Z",
    "timestamp": 1631622649138
  }
]
```

Log Record after enabling `lowDataMode`.

```
[
  {
    "cluster_name": "api-test",
    "container_name": "newrelic-logging",
    "namespace_name": "nrlogs",
    "pod_name": "nri-bundle-newrelic-logging-jxnbj",
    "message": "[2021/09/14 12:30:49] [ info] [engine] started (pid=1)\n",
    "stream": "stderr",
    "timestamp": 1631622649138
  }
]
```

### New Relic Pixie Integration [#nr-pixie-integration]

If `lowDataMode` is enabled, the `newrelic-pixie` integration performs heavier sampling on Pixie spans and reduces the collection interval from 10 seconds to 15 seconds.

`lowDataMode` settings:

```
HTTP_SPAN_LIMIT: 750
DB_SPAN_LIMIT: 250
COLLECT_INTERVAL_SEC: 15
```

The default settings for these parameters and others can be found in the [newrelic-pixie-integration](https://github.com/newrelic/newrelic-pixie-integration) Github repo.

To take full advantage of New Relic's kubernetes integration, you'll need a free New Relic account. If you haven't already, create yours below to start monitoring your data today.
<InlineSignup/>