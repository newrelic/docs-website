---
title: 'Introduction to OpenTelemetry for Kubernetes'
tags:
    - Kubernetes integration
    - OpenTelemetry
    - New Relic OpenTelemetry
    - OpenTelemetry Collector
    - OpenTelemetry Kubernetes
    - OpenTelemetry Helm chart
    - New Relic OpenTelemetry installation
metaDescription: "Learn how to monitor your Kubernetes Cluster using OpenTelemetry"
freshnessValidatedDate: 2024-07-23
redirects:
    - /docs/kubernetes-pixie/kubernetes-integration/installation/k8s-otel/
---


OpenTelemetry observability for Kubernetes provides complete, open-source setup paired with a top-notch Kubernetes UI that is already compatible with our proprietary Kubernetes instrumentation. Our Kubernetes UIs are designed to be provider agnostic, allowing you to select either OpenTelemetry or New Relic instrumentation based on your needs.

This document outlines the process for monitoring a Kubernetes cluster using OpenTelemetry. It involves the installation of the [`nr-k8s-otel-collector`](https://github.com/newrelic/helm-charts/tree/master/charts/nr-k8s-otel-collector) Helm chart within the cluster and the deployment of the necessary Collectors to enable first-class observability.

By integrating Kubernetes components into the OpenTelemetry Collector, we can transmit metrics, events, and logs directly to New Relic. These telemetry signals automatically enhance our out-of-the-box experiences such as the [Kubernetes Navigator](/docs/kubernetes-pixie/kubernetes-integration/understand-use-data/kubernetes-cluster-explorer/#navigator-preview), [overview dashboard](/docs/kubernetes-pixie/kubernetes-integration/understand-use-data/kubernetes-cluster-explorer/#cluster-overview-dashboard), [Kubernetes events](/docs/kubernetes-pixie/kubernetes-integration/understand-use-data/kubernetes-cluster-explorer/#browse-your-kubernetes-events), or [Kubernetes APM summary page](/docs/apm/apm-ui-pages/monitoring/kubernetes-summary-page/).


## How it works? [#how-works]

The [`nr-k8s-otel-collector`](https://github.com/newrelic/helm-charts/tree/master/charts/nr-k8s-otel-collector) Helm chart deploys OpenTelemetry Collectors configured to gather comprehensive telemetry data from your Kubernetes cluster.

<img
  title="K8s OpenTelemetry diagram"
  alt="K8s OpenTelemetry architecture diagram"
  src="/images/otel-k8s-arch.webp"
/>

* **Deamonset Collector**: Deployed on each worker node. It collects metrics from the underlying host, `cAdvisor`, and `Kubelet`, and gathers logs from containers.
* **Deployment Collector**: Deployed on the control plane node. It collects metrics from `kube-state-metrics` and Kubernetes cluster events. This collector is often a single instance managing cluster-wide data.


### OpenTelemetry components in New Relic Kubernetes collectors [#otel-components]

To help you understand how telemetry signals are gathered from the cluster and which components you can reuse in your custom configurations, here's a detailed explanation of the components used in our OpenTelemetry Collectors:


<CollapserGroup>

  <Collapser
    id="OtelComponents-receivers-sources"
    title="OpenTelemetry Components: receivers and sources"
  >

  The OpenTelemetry Collector uses various receivers to gather telemetry data from different sources within the Kubernetes cluster. These receivers are responsible for collecting metrics, logs, and events from the cluster components.

  <table>
    <thead>
      <tr>
        <th>Receiver Name</th>
        <th>Metrics Type</th>
        <th>Components / Sources</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>[OTLP](https://github.com/newrelic/helm-charts/blob/master/charts/nr-k8s-otel-collector/templates/deployment-configmap.yaml) for `Deployment` configuration</td>
        <td>Telemetry data (HTTP)</td>
        <td>Internal pod networks</td>
        <td>Gathers telemetry data transmitted over HTTP protocol toward defined endpoints.</td>
      </tr>
      <tr>
        <td>[Prometheus/ksm](https://github.com/newrelic/helm-charts/blob/master/charts/nr-k8s-otel-collector/templates/deployment-configmap.yaml) for `Deployment` configuration</td>
        <td>Cluster state metrics</td>
        <td>`kube-state-metrics` pods</td>
        <td>Scrapes metrics relevant to Kubernetes resource states, such as deployments, pods, and nodes.</td>
      </tr>
      <tr>
        <td>[Prometheus/controlplane](https://github.com/newrelic/helm-charts/blob/master/charts/nr-k8s-otel-collector/templates/deployment-configmap.yaml) for `Deployment` configuration</td>
        <td>Control plane metrics</td>
        <td>Kubernetes API server, scheduler, controller-manager</td>
        <td>Monitors control plane components for operational metrics, performance, and availability statistics.</td>
      </tr>
      <tr>
        <td>[K8s Events](https://github.com/newrelic/helm-charts/blob/master/charts/nr-k8s-otel-collector/templates/deployment-configmap.yaml) for `Deployment` configuration</td>
        <td>Infrastructure events</td>
        <td>Kubernetes Event API</td>
        <td>Captures events like pod creations, deletions, scaling activities, and failure events.</td>
      </tr>
      <tr>
        <td>[OTLP](https://github.com/newrelic/helm-charts/blob/master/charts/nr-k8s-otel-collector/templates/daemonset-configmap.yaml) for `Deamonset` configuration</td>
        <td>Telemetry data</td>
        <td>Internal pod networks</td>
        <td>Retrieves telemetry data from pods and containerized environments within the local network.</td>
      </tr>
      <tr>
        <td>[Prometheus](https://github.com/newrelic/helm-charts/blob/master/charts/nr-k8s-otel-collector/templates/daemonset-configmap.yaml) for `Deamonset` configuration</td>
        <td>Node-level metrics</td>
        <td>Host system metrics (e.g., node CPU, memory)</td>
        <td>Collects metrics from host and node-level components to analyze resource consumption.</td>
      </tr>
      <tr>
        <td>[K8s Events](https://github.com/newrelic/helm-charts/blob/master/charts/nr-k8s-otel-collector/templates/daemonset-configmap.yaml) for `Deamonset` configuration</td>
        <td>Infrastructure events</td>
        <td>Kubernetes Event API</td>
        <td>Similar to deployment, capturing Kubernetes events impacting nodes and local resources.</td>
      </tr>
    </tbody>
  </table>

  </Collapser>

  <Collapser
    id="OtelComponents-types-usage"
    title="OpenTelemetry Component types and usage"
  >

  The OpenTelemetry Collector employs various component types to process and transform the collected telemetry data. These components are essential for enriching, filtering, and formatting the data before it is sent to New Relic.


  <table>
    <thead>
      <tr>
        <th>Component type</th>
        <th>Component name</th>
        <th>Purpose</th>
        <th>Common usage</th>
        <th>Scope</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Processors</td>
        <td>`batch`</td>
        <td>Batches and optimizes telemetry data flow.</td>
        <td>Improves throughput and manages resource consumption.</td>
        <td>`Daemonset`, `Deployment`</td>
      </tr>
      <tr>
        <td></td>
        <td>`resource`</td>
        <td>Enriches telemetry data with resource attributes.</td>
        <td>Attaches metadata such as Kubernetes pod identifiers.</td>
        <td>`Daemonset`, `Deployment`</td>
      </tr>
      <tr>
        <td>Exporters</td>
        <td>`prometheus`</td>
        <td>Exports metrics for monitoring using Prometheus.</td>
        <td>Integrates with Prometheus for metrics visualization.</td>
        <td>`Daemonset`, `Deployment`</td>
      </tr>
      <tr>
        <td></td>
        <td>`otlp`</td>
        <td>Sends telemetry data using the OpenTelemetry Protocol.</td>
        <td>Ensures secure and performant data transport.</td>
        <td>`Daemonset`, `Deployment`</td>
      </tr>
      <tr>
        <td>Pipelines</td>
        <td>`metrics`</td>
        <td>Manages ingest, process, and export of metrics data.</td>
        <td>Coordinates data flow across components for metrics.</td>
        <td>`Daemonset, Deployment`</td>
      </tr>
      <tr>
        <td></td>
        <td>`traces`</td>
        <td>Orchestrates flow for trace data collection.</td>
        <td>Optimizes trace handling from ingestion to export.</td>
        <td>`Daemonset, Deployment`</td>
      </tr>
      <tr>
        <td>Connectors</td>
        <td>`k8s_attributes`</td>
        <td>Enriches telemetry data with Kubernetes metadata.</td>
        <td>Adds Kubernetes-related tags and information.</td>
        <td>`Daemonset`, `Deployment`</td>
      </tr>
    </tbody>
  </table>


  </Collapser>

  </CollapserGroup>

