---
subject: PHP agent
releaseDate: '2012-11-20'
version: 3.1.5.111
---

<Callout variant="important">
  The end-of-life date for this agent version is July 29, 2019. To update to the latest agent version, see [Update the agent](/docs/agents/manage-apm-agents/installation/update-new-relic-agent). For more information, see [End-of-life policy](/docs/agents/manage-apm-agents/maintenance/new-relic-agent-plugin-end-life-policy).
</Callout>

### Notes

This release of the New Relic PHP agent adds two major new features, and includes several important bug fixes and stability improvements. The new features are:

* Key Transaction Support, and
* Real User Monitoring improvements.

Key transactions (discussed [here](https://newrelic.com/docs/site/key-transactions)) allow you to mark transactions that are important to your specific business needs and can have their own Apdex settings and error metrics.

The Real User Monitoring (RUM) improvements allow you to link select transaction traces with browser traces. Other improvements include the ability for RUM to work with multiple application names, and delivery of the RUM JavaScript file will only use the https protocol if the main page was also delivered via https. The new `newrelic_set_user_attributes()` API call can now also be used to add additional data to browser traces. Please see [this page](https://newrelic.com/docs/features/browser-traces#set_user_attributes) for details.

The following smaller improvements and bug fixes have been made:

* Fixed an agent segmentation fault that occurred during Slow SQL processing at the end of a transaction.
* Fixed a daemon segmentation fault that occurred if the agent communication with the daemon was interrupted for any reason.
* Fixed a memory leak in the agent when the maximum number of Slow SQL statements for a transaction was reached.
* Fixed an error that was preventing the daemon from re-spawning a copy of itself if the worker daemon died due to a segmentation fault.
* Updated the `newrelic_set_appname` API call to no longer send the transaction thus far to the daemon unless you give it an argument explicitly requesting this behavior. This considerably reduces the overhead of changing application names on the fly.
* Updated the `newrelic_end_transaction` API call to allow you to decide whether or not the transaction should be sent to the daemon. It is by default.
* Fixed an error in the installer script where the license key was not being inserted into the INI file correctly.
* Functions with custom instrumentation (`newrelic.transaction_tracer.custom`) will now produce metrics that can be used in custom dashboards.
* If your application produces a `Content-Length` header, automatic RUM ("auto-RUM") will no longer inject the RUM header and footer, which would invalidate the content length calculated by your application.
* The NR_INSTALL_KEY environment variable is now correctly obeyed.
* The daemon is now compiled to support showing a backtrace in the event of a segmentation violation.
