---
subject: PHP agent
releaseDate: '2022-12-12'
version: 10.4.0.316
downloadLink: 'https://download.newrelic.com/php_agent/archive/10.4.0.316'
features: ['Add Code Level Metrics', 'Add configuration for Custom Event Limit']
bugs: []
security: []
---
## New Relic PHP Agent v10.4.0.316

<Callout variant="important">
We recommend updating to the latest agent version as soon as it's available. If your organization has established practices that prevent you from upgrading to the latest version, ensure that your agents are regularly updated to a version at most 90 days old. Read more about [keeping your agent up to date](/docs/new-relic-solutions/new-relic-one/install-configure/update-new-relic-agent/).
</Callout>

### Important end-of-life information

* Support for ZTS binaries was deprecated with release v9.17.0.300 and will be **removed in a January 2023 release**.
* **For installations using an unsupported PHP version or platform (32 bit, FreeBSD, ZTS, etc), it is highly recommended to disable the auto-update mechanisms for the PHP agent packages.** This can be done by adding the PHP agent packages to an exclusion list for package upgrades.  Alternatively, the PHP agent packages can be version pinned to an agent version that supports the old, unsupported feature(s). Failure to prevent upgrades may result in a newer agent release being installed, removing support for the required, unsupported features. This would disrupt APM data collection.  
The PHP agent packages which are affected are:
   - newrelic-php5
   - newrelic-php5-common
   - newrelic-daemon

* You should check the [PHP agent compatibility and requirements](/docs/apm/agents/php-agent/getting-started/php-agent-compatibility-requirements/) page for the latest information on supported PHP versions and platforms.

### New features

* Code Level Metrics (CLM) has been introduced and is set to off by default.
   - CLM allows you to gather more data associated with each span, including line numbers, function names, filepaths, and namespaces.
   - Use [this ini value](/docs/apm/agents/php-agent/configuration/php-agent-configuration/#inivar-code-level-metrics) to start using CLM!


### Improvements

* Custom Event Limit default reservoir size has been increased and is now configurable.
   - The default maximum number of custom events gathered per minute has been increased from 10,000 to 30,000.
   - This value can now be modified with [this ini value](/docs/apm/agents/php-agent/configuration/php-agent-configuration/#inivar-custom-events-enabled).
