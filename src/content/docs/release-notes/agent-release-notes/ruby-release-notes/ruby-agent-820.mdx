---
subject: Ruby agent
releaseDate: '2021-11-29'
version: 8.2.0
downloadLink: 'https://rubygems.org/downloads/newrelic_rpm-8.2.0.gem'
features: ["New instrumentation for Tilt gem", "Remove Rails 2 instrumentation"]
bugs: ["Span events no longer recorded when using newrelic_ignore", "Scrub non-unicode characters from DecoratingLogger", "Distributed tracing headers no longer emit errors when the agent is not connected"]
security: []
---

## v8.2.0

* **New instrumentation for Tilt gem**

  Template rendering using [Tilt](https://github.com/rtomayko/tilt) is now instrumented. Tilt 2.x is supported for Ruby versions 2.2 and above and  1.x is supported for Ruby versions below 2.7. See [PR #847](https://github.com/newrelic/newrelic-ruby-agent/pull/847) for details.

* **Configuration `error_collector.ignore_errors` is marked as deprecated**

  This setting has been marked as deprecated in the documentation since version 7.2.0 and is now flagged as deprecated within the code.

* **Remove Rails 2 instrumentation**

  Though any version of Rails 2 has not been supported by the Ruby agent since v3.18.1.330, instrumentation for ActionController and ActionWebService specific to that version were still part of the agent. This instrumentation has been removed.

* **Remove duplicated settings from newrelic.yml**

  Thank you @jakeonfire for bringing this to our attention and @kuroponzu for making the changes!

* **Bugfix: Span events recorded when using newrelic_ignore**

  Previously, the agent was incorrectly recording span events only on transactions that should be ignored. This fix will prevent any span events from being created for transactions using newrelic_ignore, or ignored through the `rules.ignore_url_regexes` configuration option.

* **Bugfix: Print deprecation warning for cross-application tracing if enabled**

  Prior to this change, the deprecation warning would log whenever the agent started up, regardless of configuration. Thank you @alpha-san for bringing this to our attention!

* **Bugfix: Scrub non-unicode characters from DecoratingLogger**

  To prevent `JSON::GeneratorErrors`, the DecoratingLogger replaces non-Unicode characters with the replacement character: ï¿½. Thank you @jdelStrother for bringing this to our attention!

* **Bugfix: Distributed tracing headers emitted errors when agent was not connected**

  Previously, when the agent had not yet connected it would fail to create a trace context payload and emit an error, "TypeError: no implicit conversion of nil into String," to the agent logs. The correct behavior in this situation is to not create these headers due to the lack of required information. Now, the agent will not attempt to create trace context payloads until it has connected. Thank you @Izzette for bringing this to our attention!

## Support statement

New Relic recommends that you upgrade the agent regularly and at a minimum every 3 months. As of this release, the oldest supported version is [5.5.0.348](https://docs.newrelic.com/docs/release-notes/agent-release-notes/ruby-release-notes/ruby-agent-550348).
