---
subject: Node.js agent
releaseDate: '2017-05-02'
version: 1.39.0
downloadLink: 'https://www.npmjs.com/package/newrelic'
---

### New features

* Error messages are redacted in High-security mode now.
* New configurations were added for disabling some New Relic API methods. These default to enabled and are all disabled in High-security mode.

  * `api.custom_parameters_enabled` controls `newrelic.addCustomParameters()`
  * `api.custom_events_enabled` controls `newrelic.recordCustomEvent()`
  * `api.notice_error_enabled` controls `newrelic.noticeError()`
* Updated the default value for `transaction_tracer.record_sql` to `obfuscated`.

  This value was previously `off` by default. This change brings the New Relic Node Agent defaults in line with other New Relic Agents.

### Bug fixes

* Our when instrumentation better detects when a module is actually `when`.

  Thanks to Pasi Eronen (@pasieronen) for the contribution!
* Quiet a warning in our native promise instrumentation on Node 0.10.
* Fixed a bug in the generic pool instrumentation affecting version 3.
