---
subject: Node.js agent
releaseDate: '2016-11-10'
version: 1.34.0
downloadLink: 'https://www.npmjs.com/package/newrelic'
---

### New features

* The agent now collects CPU metrics when running under Node 6.1.0 and higher.

  Node 6.1.0 introduced an API to get CPU time usage of the running Node process. We are now collecting this data as new metrics.
* The agent now has a separate configuration for audit logging.

  Previously the data that the agent sends to the collector was logged only in trace logging mode, making the logs unnecessarily large and noisy. The agent can now include this data independent of the logging level using separate configuration settings.
* A new API method addCustomParameters() has been added to allow adding multiple custom parameters at once. Thanks to Austin Peterson (@AKPWebDesign) for this contribution!

### Improvements

* Updated tests to run on Node 7.

  Node 7 is officially supported as of the previous release, v1.33.0.
* The shutdown() API now waits for connection to collect pending data.

  When a flag to collect pending data is provided to the shutdown() method, the agent now ensures a connection to the collector has been established. This is useful when the Node process is short-lived, such as in AWS Lambda.
* Added running the nsp (Node Security Platform) tool to the test suite to help with detecting security-related vulnerabilities.

### Bug fixes

* The setIgnoreTransaction() API now works for background transactions.
* Fixed issue with synthetic result not displaying a link to the corresponding transaction trace.
