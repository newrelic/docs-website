---
subject: Node.js agent
releaseDate: '2021-08-05'
version: 8.1.0
features: ["Added necessary instrumentation to support v4 of `mongodb`."]
bugs: ["Fix issue where Promise based `pg.Client.query` timings were always in sub-millisecond range.","Fix bug where `API.shutdown` would not harvest or keep process active effectively after an agent restart."]
security: []
downloadLink: 'https://www.npmjs.com/package/newrelic'
---

## Notes

* Added necessary instrumentation to support v4 of `mongodb`.
  * Explicitly enabled APM for `mongodb` instrumentation(`client.monitorCommands = true`)

* Fixed issue where Promise based `pg.Client.query` timings were always in sub-millisecond range.

* Fixed bug where `API.shutdown` would not harvest or keep process active effectively after an agent restart.

  The agent will now correctly update its state to 'started' after a reconnect has completed.

* Added an eslint rule to verify every file includes the copyright statement.

* Fixed the `homepage` field in package.json to use `https` in the link to the github repo. Thank you @pzrq for the contribution.
