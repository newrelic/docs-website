---
subject: Node.js agent
releaseDate: '2020-06-08'
version: 6.9.0
features: ["Add AWS API Gateway V2 Support to lambda instrumentation.","Add 'transaction.name' intrinsic to active span at time transaction name is finalized.","Add 'error.expected' attribute to span active at the time expected error was noticed.","Drop errors earlier during collection when error collection is disabled.","Remov allocation of logging-only objects used by transaction naming when those log levels are disabled."]
bugs: []
security: []
downloadLink: 'https://www.npmjs.com/package/newrelic'
---

## New Features

* Added AWS API Gateway V2 support to Lambda instrumentation.
* Added 'transaction.name' intrinsic to active span at time transaction name is finalized.

  This enables finding transaction name for traces that may not have a matching transaction event.
* Added 'error.expected' attribute to span active at time expected error was noticed.

## Improvements

* Dropped errors earlier during collection when error collection is disabled.

  Error attributes will no longer show up on spans when error collection has been disabled. Other unnecessary work will also be avoided.
* Removed allocation of logging-only objects used by transaction naming when those log levels are disabled.
* Upgraded escodegen from 1.12.0 to 1.14.1.
* Upgraded readable-stream from 3.4.0 to 3.6.0.
* Upgraded @grpc/proto-loader from 0.5.3 to 0.5.4.
* Converted facts unit test to use tap API.
* Converted transaction 'finalizeName...' unit tests to use tap API.
* Added several items to .npmignore to prevent accidental publishing.
* Fixed Redis client w/o callback versioned test flicker.

  Doesn't end transaction until error encountered. Increases wait time for first operation which has to complete for the second operation to be successful.
