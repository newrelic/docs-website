---
subject: Node.js agent
releaseDate: '2021-09-28'
version: 8.4.0
features: ["Deprecate Cross Application Tracing (CAT).","Add support for Cassandra driver v4.0.0 and above."]
bugs: ["Fix an issue with `clearTimeout` that could result in dropping parent segments or spans.","Fix an issue where DT headers would not be processed by `transaction-shim.handleCATHeaders()` when CAT was explicitly disabled."]
security: []
downloadLink: 'https://www.npmjs.com/package/newrelic'
---

## Notes

* **Deprecation Warning:** Cross Application Tracing (CAT) has been deprecated and will be removed in a future major release. For applications that explicitly disable Distributed Tracing (DT) to leverage CAT, we recommend migrating to DT to avoid loss of cross-service visibility.
  * Disables CAT by default. You must explicitly enable CAT along with turning off DT.
  * Adds a deprecation warning when CAT is enabled and active (DT disabled).

* Fixed issue with `clearTimeout` that could result in dropping parent segments or spans.
  This bug resulted in some MongoDB calls being dropped from Transaction Traces and Distributed Traces (spans): [https://github.com/newrelic/node-newrelic/issues/922](https://github.com/newrelic/node-newrelic/issues/922).

* Removed warnings from agent tests for `no-var` eslint rule.

* Added support for Cassandra driver v4.0.0 and above.

* Fixed issue where DT headers would not be processed by `transaction-shim.handleCATHeaders()` when CAT was explicitly disabled. This primarily impacts `amqplib` instrumentation.

* Transitioned aws-lambda.test.js to use Tap over Mocha.

* Removed warnings from agent for `no-var` eslint rule.

* Refactored `transaction-shim`, `http` and `http-outbound` to use centralized CAT methods in `util/cat`

* Replaced http-outbound test call to use example.com to avoid unpredictable connection resets.

* Migrated sql query parser tests to tap

* Added more API usage examples.

* Added a README to the `examples/` folder discussing how to use the examples.

* Fixed `message-shim` test assertion to avoid flakiness based on precision differences(ms vs ns)

* Applied new lint rules barring the use of `var` and preferring the use of `const` wherever possible.
