---
subject: Java agent
releaseDate: '2019-10-29'
version: 5.8.0
downloadLink: 'https://download.newrelic.com/newrelic/java-agent/newrelic-agent/5.8.0/'
features: ["gRPC enhancements", "Vert.x 3.8 support", "XML custom instrumentation support for leaf tracers", "Class Histogram extension for heap memory analysis", "Support for Jedis 3.0.0 and higher", "Lettuce 4 and 5 instrumentation available in the Java agent incubator", "Telemetry SDK for Java introduced"]
bugs: ["Solr 7 instrumentation would not report Update JMX metrics", "HttpURLConnection instrumentation produced External metrics only when network methods (getInputStream, getResponseCode) are called", "MongoDB instrumentation could report duplicate metrics"]
security: []
---
<ButtonGroup>
  <ButtonLink
    role="button"
    to="https://download.newrelic.com/newrelic/java-agent/newrelic-agent/5.8.0/"
    variant="primary"
  >
    Download this agent version
  </ButtonLink>
</ButtonGroup>

### New features

* gRPC
  * gRPC error reporting is now configurable
  * Response codes, component type, and method type are now recorded as attributes.
  * The agent now reports the gRPC status code rather than "translating" to HTTP status codes.
* Vert.x
  * The Java agent now provides visibility into your applications built using the Vert.x 3.8. The agent instruments Vert.x Web, Vert.x Core, and Vert.x HTTP client. With this instrumentation, the agent will identify and name your transactions based on Vert.x web routing paths. The agent will also time web handlers, track async handlers, and external calls made with Vert.x HTTP client.
* XML custom instrumentation
  * The custom XML instrumentation XSD has been enhanced to support now include support for specifying [leaf tracers](https://newrelic.github.io/java-agent-api/javadoc/com/newrelic/api/agent/Trace.html#leaf()).
* Class Histogram
  * A new [Class Histogram extension](https://docs.newrelic.com/docs/agents/java-agent/instrumentation/extension-additional-instrumentation-modules#class-histogram) is now available to report heap memory details as events.
* Jedis
  * Added support for Jedis 3.0.0 and higher. You can now see your Jedis calls in breakdowns in the overview chart, entries in the Databases tab, and segments in transaction traces.
* Lettuce
  * Instrumentation modules for Lettuce 4 and 5 are now available via the [Java agent incubator](https://docs.newrelic.com/docs/agents/java-agent/instrumentation/extension-additional-instrumentation-modules#incubator-modules-list).

### New OSS SDK

We now have an open source [Telemetry SDK for Java](https://docs.newrelic.com/docs/data-ingest-apis/get-data-new-relic/new-relic-sdks/telemetry-sdks-send-custom-telemetry-data-new-relic) for sending telemetry data to New Relic. The current SDK supports sending dimensional metrics to the Metric API and spans to the Trace API.

### Fixes

* The Solr 7 instrumentation would not report Update JMX metrics.
* `HttpURLConnection` instrumentation produced External metrics only when network methods (`getInputStream`, `getResponseCode`) are called.
* MongoDB instrumentation would report duplicate metrics when applications invoked `MongoClientOptions.build()` more than once.
