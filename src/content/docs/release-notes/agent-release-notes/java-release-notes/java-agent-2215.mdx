---
subject: Java agent
releaseDate: '2014-03-05'
version: 2.21.5
downloadLink: 'https://download.newrelic.com/newrelic/java-agent/newrelic-agent/2.21.5/'
features: ["Agent no longer supports obfuscation of individual fields"]
bugs: ["PostgreSQL explain plan bug", "SQL parameter obfuscation didn't work if the parameter value contained a newline", "Private trust store location for use_private_ssl flag"]
security: []
---
<ButtonGroup>
  <ButtonLink
    role="button"
    to="https://download.newrelic.com/newrelic/java-agent/newrelic-agent/2.21.5/"
    variant="primary"
  >
    Download this agent version
  </ButtonLink>
</ButtonGroup>

<Callout variant="important">
  The end-of-life date for this agent version is July 29, 2019. To update to the latest agent version, see [Update the agent](/docs/agents/manage-apm-agents/installation/update-new-relic-agent). For more information, see [End-of-life policy](/docs/agents/manage-apm-agents/maintenance/new-relic-agent-plugin-end-life-policy).
</Callout>

### Notes

_The 3.x agent works with Java SE 6 and 7. If you are using Java SE 5, this is the release for you._

* PostgreSQL explain plan bug

  There was a PostgreSQL bug that allowed parameters to be sent in explain plans under some circumstances. To avoid this issue, the New Relic agent now does not report explain plans for PostgreSQL.
* Agent no longer supports obfuscation of individual fields

  Previous versions of the agent allowed an obfuscated_sql_fields option to select specific field names to obfuscate when record_sql: raw. We have discovered rare cases in which this feature would not mask SQL parameters correctly, so we have removed the configuration option. Now, if obfuscated_sql_fields is set, the setting of record_sql: raw is ignored and \_all_ fields are masked.
* Fix: SQL parameter obfuscation didn't work if the parameter value contained a newline

  The record_sql: obfuscated config setting did not properly mask parameters when it included a newline character. This bug has been fixed.
* Fix: Private trust store location for use_private_ssl flag

  The 2.21.4 agent did not properly load a private trust store used with the use_private_ssl flag. This bug has been fixed.
