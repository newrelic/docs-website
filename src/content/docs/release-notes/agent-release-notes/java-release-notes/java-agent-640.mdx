---
subject: Java agent
releaseDate: '2021-01-27'
version: 6.4.0
downloadLink: 'https://download.newrelic.com/newrelic/java-agent/newrelic-agent/6.4.0/'
features: ["Spring Webflux/Netty Reactor instrumentation improvements", "The agent will now utilize a backoff sequence on connection retries to Infinite Tracing", "New distributed tracing APIs have been added to better support general use cases for propagating distributed tracing headers (insertDistributedTraceHeaders/acceptDistributedTraceHeaders)", "Updated the Java agent’s snakeyaml dependency to 1.27"]
bugs: ["There is an issue with this agent release that could lead to spans not being sent to Infinite Tracing. Please use 6.4.1 instead.", "In some environments the jar collector service could lead to high CPU utilization at application startup. The agent now provides a configurable rate limiter, with a reasonable default, for processing jars detected in the application’s environment."]
security: []
---
<ButtonGroup>
  <ButtonLink
    role="button"
    to="https://download.newrelic.com/newrelic/java-agent/newrelic-agent/6.4.0/"
    variant="primary"
  >
    Download this agent version
  </ButtonLink>
</ButtonGroup>

### Note:

* There is an issue with this agent release that could lead to spans not being sent to Infinite Tracing. Please use [6.4.1](https://docs.newrelic.com/docs/release-notes/agent-release-notes/java-release-notes/java-agent-641) instead.

### New Features and Improvements:

* Spring Webflux/Netty Reactor instrumentation improvements for enhanced tracing across asynchronous thread hops.
* The agent will now utilize a backoff sequence on connection retries to Infinite Tracing.
* New distributed tracing APIs have been added to better support general use cases for propagating distributed tracing headers. In particular the new APIs provide enhanced support for [W3C Trace Context](https://www.w3.org/TR/trace-context/) but are flexible enough to support other header protocols that may be supported by the agent in the future. Previous distributed tracing APIs have been deprecated and are subject to removal in a future agent release. See [documentation here](https://docs.newrelic.com/docs/agents/java-agent/api-guides/guide-using-java-agent-api#trace-calls).
  * [`Transaction.insertDistributedTraceHeaders(Headers)`](https://newrelic.github.io/java-agent-api/javadoc/com/newrelic/api/agent/Transaction.html#insertDistributedTraceHeaders(com.newrelic.api.agent.Headers)) is used to create and insert distributed tracing headers (both newrelic and W3C Trace Context) into a `Headers` data structure.
  * [`Transaction.acceptDistributedTraceHeaders(TransportType, Headers)`](https://newrelic.github.io/java-agent-api/javadoc/com/newrelic/api/agent/Transaction.html#acceptDistributedTraceHeaders(com.newrelic.api.agent.TransportType,com.newrelic.api.agent.Headers)) is used to accept the distributed tracing headers sent from the calling service and link these services together in a distributed trace.

### Fixes:

* Updated the Java agent’s snakeyaml dependency to 1.27.
* In some environments the jar collector service could lead to high CPU utilization at application startup. The agent now provides a configurable rate limiter, with a reasonable default, for processing jars detected in the application’s environment. See [documentation here](https://docs.newrelic.com/docs/agents/java-agent/configuration/java-agent-configuration-config-file#jar-collector).

### Support statement:

* New Relic recommends that you upgrade the agent regularly to ensure that you're getting the latest features and performance benefits. Additionally, older releases will no longer be supported when they reach [end-of-life](https://docs.newrelic.com/docs/using-new-relic/cross-product-functions/install-configure/notification-changes-new-relic-saas-features-distributed-software).
