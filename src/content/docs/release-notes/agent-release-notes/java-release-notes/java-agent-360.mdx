---
subject: Java agent
releaseDate: '2014-04-24'
version: 3.6.0
downloadLink: 'https://download.newrelic.com/newrelic/java-agent/newrelic-agent/3.6.0/'
features: ["Enhanced XML for custom instrumentation"]
bugs: ["Agent could cause VerifyError", "Embedded Jetty instrumentation", "Exceptions incorrectly reported", "Embedded Tomcat not reporting JMX Builtin metrics", "Apache HttpClient 4.3 not consistently reported", "RESTEasy transactions", "JBoss 7 port not reported correctly", "Auto-RUM bug", "Errors not reporting with some versions WebSphere 7.0", "Agent works properly inside a folder with + in the path", "Agent HttpClient logging", "Inconsistent State with Play 1.2.x", "Invalid errors for Stripes", "Hanging threads in the Agent with SQL Prepared Statements", "Request queue time was incorrect for some versions of nginx", "XML entity expansion with non-SSL connection to New Relic", "Agent can cause application thread to hang"]
security: []
---
<ButtonGroup>
  <ButtonLink
    role="button"
    to="https://download.newrelic.com/newrelic/java-agent/newrelic-agent/3.6.0/"
    variant="primary"
  >
    Download this agent version
  </ButtonLink>
</ButtonGroup>

### Notes

* Enhanced XML for custom instrumentation

  The custom XML xsd has been enhanced to support the instrumentation of interfaces, subclasses, and method annotations. These enhancements give you much more flexibility to identify transactions and add monitoring of components without changes to your source code.
* Fix: Agent could cause VerifyError

  In specific cases, the agent could cause verification errors.
* Fix: Embedded Jetty instrumentation

  Starting with the 3.3.1 agent, transactions were not reported for some configurations of embedded Jetty.
* Fix: Exceptions incorrectly reported

  In some cases exceptions were reported even if configured to be ignored.
* Fix: Embedded Tomcat not reporting JMX Builtin metrics

  In newer versions of embedded Tomcat the agent wasn't collecting JMX metrics properly.
* Fix: Apache HttpClient 4.3 not consistently reported

  The Java agent now instruments Apache HttpClient 4.3 calls, including the new call patterns introduced in 4.3.
* Fix: RESTEasy transactions

  In certain instances, transactions between applications were not getting linked correctly when RESTEasy was used.
* Fix: JBoss 7 port not reported correctly

  The port was not reported correctly for some JBoss users.
* Fix: Auto-RUM bug

  Starting in version 3.5.0 of the Java agent, in rare cases Auto-RUM could cause the New Relic footer script to be placed within a script tag.
* Fix: Errors not reporting with some versions WebSphere 7.0

  In some Fix Packs of WebSphere 7.0, the agent did not report errors properly.
* Fix: Agent works properly inside a folder with + in the path

  The Java agent did not initialize properly when in a folder with a + character in the pathname.
* Fix: Agent HttpClient logging

  The Agent's HttpClient was writing to the app server's log when it discovered a log4j appender.
* Fix: Inconsistent State with Play 1.2.x

  In some cases the agent was logging an "Inconsistent state!" message and not reporting a transaction.
* Fix: Invalid errors for Stripes

  The Agent was erroneously reporting spurious 404 errors for web apps using Stripes.
* Fix: Hanging threads in the Agent with SQL Prepared Statements

  Under rare circumstances, threads could hang in the Agent when an application with multiple threads made heavy use of SQL Prepared Statements.
* Fix: Request queue time was incorrect for some versions of nginx

  Nginx fractional second header values for queue and server start times are now parsed correctly.
* Fix: XML entity expansion with non-SSL connection to New Relic

  Fixed an XML entity expansion vulnerability that only occurs when the agent is configured with ssl: false; the default is true. The agent already has other protection against unauthorized entity expansion. This fix is an additional layer of protection.
* Fix: In rare case, agent can cause application thread to hang

  Under rare circumstances, an application thread could hang when an application with multiple threads made heavy use of SQL Prepared Statements.
