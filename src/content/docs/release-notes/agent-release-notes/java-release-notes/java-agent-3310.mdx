---
subject: Java agent
releaseDate: '2016-08-03'
version: 3.31.0
downloadLink: 'https://download.newrelic.com/newrelic/java-agent/newrelic-agent/3.31.0/'
features: ["Mule ESB 3.6-3.8 including the new HTTP Connector", "OkHttp client 3.0-3.4", "Akka HTTP 2.4.5", "Spring transaction naming"]
bugs: ["Fixed an issue that was preventing Jetty JMX threads metrics from being pulled", "Fixed bug in the recordMetric API", "Fixed a memory leak in the Async Servlet instrumentation", "Fixed a bug in the setRequestAndResponse API"]
security: []
---
<ButtonGroup>
  <ButtonLink
    role="button"
    to="https://download.newrelic.com/newrelic/java-agent/newrelic-agent/3.31.0/"
    variant="primary"
  >
    Download this agent version
  </ButtonLink>
</ButtonGroup>

### Improvements

* Mule ESB 3.6-3.8 including the new HTTP Connector

  This release adds instrumentation for Mulesoft Mule ESB Server versions 3.6-3.8, including the [new HTTP Connector](https://docs.mulesoft.com/mule-user-guide/v/3.6/migrating-to-the-new-http-connector) made available in Mule 3.6. This release continues to support the old HTTP Transport. Mule ESB Server instances will appear as "dispatchers" on the [overview page](https://docs.newrelic.com/docs/apm/applications-menu/monitoring/apm-overview-page) and the [JVM metrics page](https://docs.newrelic.com/docs/apm/applications-menu/monitoring/jvm-metrics-page). Requests to an HTTP (operation-based) Connector will show in New Relic as web transactions. All of the usual features of New Relic APM are supported including alerting, error reporting, JMS puts and takes, cross application tracing, transaction traces, key transactions, external services, and database call reporting.
* OkHttp client 3.0-3.4

  This release adds instrumentation for OkHttp client for versions 3.0-3.4. Both synchronous and asynchronous calls are supported, as well as the usual features for HTTP clients in New Relic APM such as [cross application tracing](https://docs.newrelic.com/docs/apm/transactions/cross-application-traces/cross-application-tracing) and the [external services](https://docs.newrelic.com/docs/apm/applications-menu/monitoring/external-services-page) page.
* Akka HTTP 2.4.5

  The Java agent now reports and names transactions received through Akka HTTP 2.4.5, in addition to previously available Akka HTTP support.
* Spring transaction naming

  The java agent now supports naming transactions based on the path element of Spring RequestMapping annotation.

### Fixes

* Fixed an issue that was preventing Jetty JMX threads metrics from being pulled in later versions of Jetty 9.X.
* Fixed bug in the [recordMetric API](http://newrelic.github.io/java-agent-api/javadoc/com/newrelic/api/agent/MetricAggregator.html#recordMetric(java.lang.String,%20float)) that in rare cases could start an unwanted long running transaction.
* Fixed a memory leak in the Async Servlet instrumentation.
* Fixed a bug in the [setRequestAndResponse API](http://newrelic.github.io/java-agent-api/javadoc/com/newrelic/api/agent/NewRelic.html#setRequestAndResponse(com.newrelic.api.agent.Request,%20com.newrelic.api.agent.Response)) that could throw a java.lang.NumberFormatException in the customerâ€™s application when the circuit breaker trips.
