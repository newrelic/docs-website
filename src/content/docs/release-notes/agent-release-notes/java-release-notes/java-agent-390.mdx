---
subject: Java agent
releaseDate: '2014-07-31'
version: 3.9.0
downloadLink: 'https://download.newrelic.com/newrelic/java-agent/newrelic-agent/3.9.0/'
features: ["Support for new Cross Application Trace map", "Support for RabbitMQ", "Support for SOAP over CXF", "Absolute maximum for max_samples_stored lifted"]
bugs: ["Enable Cross Application Tracing for all valid uses of HttpURLConnection", "Allow setting the logback.ContextSelector system property", "Wrong Application name in App Map when Auto App Naming is enabled"]
security: []
---
<ButtonGroup>
  <ButtonLink
    role="button"
    to="https://download.newrelic.com/newrelic/java-agent/newrelic-agent/3.9.0/"
    variant="primary"
  >
    Download this agent version
  </ButtonLink>
</ButtonGroup>

### New Features

* Support for new Cross Application Trace map

  This release enhances cross application tracing with the new [trace map](/docs/apm/traces/cross-application-traces/viewing-cross-application-traces#cat-trace-tab) visualization of your app's cross application calls. The new visualization helps you spot bottlenecks in external services within [transaction traces](/docs/apm/traces/transaction-traces/transaction-traces) and gives you an end-to-end understanding of how the transaction trace is used by other applications and services. This leads to faster problem diagnosis and better collaboration across teams. All agents involved in the cross application communication must be [upgraded](/docs/apm/traces/cross-application-traces/troubleshooting-cross-application-traces#agents) to see the complete graph. You can view cross application traces in the [transaction trace drill-down](/docs/apm/traces/cross-application-traces/viewing-cross-application-traces#cat-trace-tab).
* Support for RabbitMQ

  You can now see messages sent to and received from RabbitMQ 2.7.0 or higher. The time spent processing a dequeued message is shown as a Message transaction.
* Support for SOAP over CXF

  In this release, we provide automated instrumentation of your SOAP calls when using CXF 2.7.

### Improvements

* Absolute maximum for `max_samples_stored` lifted

  In previous versions of the agent, `max_samples_stored` could not be set to more than 10000. This restriction has been lifted, which can help avoid sampling.

### Fixes

* Enable Cross Application Tracing for all valid uses of `HttpURLConnection`

  Prior to this, certain uses of `HttpURLConnection` between two New Relic apps would fail to be recognized as Cross Application Traces and instead show up as external calls.
* Allow customers to set the system property `logback.ContextSelector`

  Prior to this fix, the agent would throw a `ClassNotFoundException` when the system property `logback.ContextSelector` was set.
* Wrong Application name in App Map when Auto App Naming is enabled

  When the `enable_auto_app_naming` config setting is set to true, the auto-named apps are incorrectly identified as the default app in the App Map.
