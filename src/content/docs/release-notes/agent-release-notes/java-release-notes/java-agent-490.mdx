---
subject: Java agent
releaseDate: '2018-12-18'
version: 4.9.0
downloadLink: 'https://download.newrelic.com/newrelic/java-agent/newrelic-agent/4.9.0/'
features: ["The request.uri attribute is now included in Transaction events and corresponding Transaction Error events", "Distributed Tracing can now be enabled at the same time as auto app naming", "Akka HTTP 10.1.5 and above support"]
bugs: ["NullPointerException could occur in Hystrix instrumentation", "HttpsURLConnection getInputStream() method could cause some scoped external metrics to be double-counted", "Fixes issues preventing agent from connection to an HTTP proxy that does not requires a username or password", "Prevents unnecessary dependencies from showing up in the newrelic-agent pom", "Fixes deadlocks caused by instrumentation of sun/nio/cs/ classes", "Fixes an issue where custom jmx metrics with periods in the attribute name would not get recorded"]
security: []
---
<ButtonGroup>
  <ButtonLink
    role="button"
    to="https://download.newrelic.com/newrelic/java-agent/newrelic-agent/4.9.0/"
    variant="primary"
  >
    Download this agent version
  </ButtonLink>
</ButtonGroup>

### Improvements

* The 'request.uri' attribute is now included in Transaction events and corresponding Transaction Error events. As a result this attribute can now be queried in New Relic. It may be excluded via the exclude list in the [attributes stanza of the yaml config file](https://docs.newrelic.com/docs/agents/java-agent/attributes/enabling-disabling-attributes-java). It is also excluded when High Security Mode is enabled.
* Distributed Tracing can now be enabled at the same time as [auto app naming](https://docs.newrelic.com/docs/agents/java-agent/configuration/automatic-application-naming). Each application created by this setting will share an event reservoir for Distributed Tracing.
* Updates Akka HTTP instrumentation to support the newest version of Akka HTTP, 10.1.5 and above.

### Fixes

* Fixes a possible NullPointerException that could occur in Hystrix instrumentation and propagate into application code.
* Fixes a bug where usage of the HttpsURLConnection getInputStream() method could cause some scoped external metrics to be double-counted.
* Fixes an issue that prevents the agent from connecting to an HTTP proxy that does not requires a username or password.

  When configured to use an HTTP proxy by using proxy_host and proxy_port, the agent would look for proxy_username and proxy_password. If those weren't provided, the agent would use an empty string for proxy_username and proxy_password.
* Prevents unnecessary dependencies from showing up in the newrelic-agent pom
* Fixes deadlocks occurring in agent 4.7.0 that were caused by instrumentation of classes in the `sun/nio/cs/.*` package
* Fixes an issue where custom jmx metrics with '.'s in the attribute name would not get recorded.
