---
subject:  Java agent
releaseDate:  '2022-07-28'
version:  7.9.0
downloadLink: 'https://download.newrelic.com/newrelic/java-agent/newrelic-agent/7.9.0/'
features: ["Jakarta EE 8 compatibility", "Jetty 10 instrumentation", "Add support to pass a boolean environment variable NEWRELIC_DEBUG where setting it to true activates the debug configuration", "Improved performance by internally replacing regex replace with iterative char replace"]
bugs: ["Update the httpurlconnection instrumentation to use newer distributed tracing APIs so that spans are correctly marked as external calls in distributed traces", "Illegal Access Exception is no longer thrown from apps using NR agent with scala 2.12 and Java 11"]
security: ["Update to jfr-daemon 1.9.0 to address CVE-2020-29582"]
---
<ButtonGroup>
  <ButtonLink
    role="button"
    to="https://download.newrelic.com/newrelic/java-agent/newrelic-agent/7.9.0/"
    variant="primary"
  >
    Download this agent version
  </ButtonLink>
</ButtonGroup>

### New features and improvements
* Where applicable, existing instrumentation has been tested and verified as compatible with Jakarta EE 8. [900](https://github.com/newrelic/newrelic-java-agent/pull/900)
* Add new instrumentation to support Jetty 10. [936](https://github.com/newrelic/newrelic-java-agent/pull/936)
* Update to jfr-daemon 1.9.0 to address CVE-2020-29582 and improve CPU overhead. [937](https://github.com/newrelic/newrelic-java-agent/pull/937)
* Add support to pass a boolean environment variable `NEWRELIC_DEBUG` where setting it to `true` activates the debug configuration. [890](https://github.com/newrelic/newrelic-java-agent/pull/890)
* Improved performance by internally replacing regex replace with iterative char replace (thanks to @zowens for this contribution) [933](https://github.com/newrelic/newrelic-java-agent/pull/933)

### Fixes
* Update the `httpurlconnection` instrumentation to use newer distributed tracing APIs so that spans are correctly marked as external calls in distributed traces and contain the expected `http.*` attributes. [885](https://github.com/newrelic/newrelic-java-agent/pull/885)
* Illegal Access Exception is no longer thrown from apps using NR agent with scala 2.12 and Java 11. [876](https://github.com/newrelic/newrelic-java-agent/pull/876)

### Support statement

* New Relic recommends that you upgrade the agent regularly to ensure that you're getting the latest features and performance benefits. Additionally, older releases will no longer be supported when they reach [end-of-life](https://docs.newrelic.com/docs/using-new-relic/cross-product-functions/install-configure/notification-changes-new-relic-saas-features-distributed-software/).

## Update to latest version [#procedures]

To identify which version of the Java agent you're currently using, run `java -jar newrelic.jar -v`. Your Java agent version will be printed to your console.

Then, to update to the latest Java agent version:

1. Back up the **entire** [Java agent root directory](/docs/agents/manage-apm-agents/troubleshooting/find-agent-root-directory#java-agent) to another location. Rename that directory to `NewRelic_Agent#.#.#`, where `#.#.#` is the agent version number.
2. [Download the agent.](/docs/release-notes/agent-release-notes/java-release-notes)
3. Unzip the new agent download file, then copy `newrelic-api.jar` and `newrelic.jar` into the original [Java agent root directory](/docs/agents/manage-apm-agents/troubleshooting/find-agent-root-directory#java-agent).
4. Compare your old `newrelic.yml` with the newly downloaded `newrelic.yml` from the zip, and [update the file if needed](#diff).
5. Restart your Java dispatcher.

If you experience issues after the Java agent update, restore from the backed-up New Relic agent directory.

## Update agent config differences [#diff]

We add new settings to `newrelic.yml` as we release new versions of the agent. You can use `diff` or another diffing utility to see what's changed, and add the new config settings to your old file. Make sure not to overwrite any customizations you've made to the file, such as your license key, app name, or changes to default settings.

For example, if you `diff` the default `newrelic.yml` files for Java agent versions 7.7.0 and 7.8.0, the results printed to the console will be:

```
âžœ diff newrelic_7.7.0.yml newrelic_7.8.0.yml
98c98
<     #forwarding:
---
>     forwarding:
100,101c100,101
<       # When true, application logs will be forwarded to New Relic. The default is false.
<       #enabled: false
---
>       # When true, application logs will be forwarded to New Relic. The default is true.
>       enabled: true
```

In this example, these lines were added to the default `newrelic.yml` in Java agent version 7.8.0. If you are moving to 7.8.0 or higher, you should add these new lines to your original `newrelic.yml`.
