---
subject: Java agent
releaseDate: '2013-08-07'
version: 2.21.0
downloadLink: 'https://download.newrelic.com/newrelic/java-agent/newrelic-agent/2.21.0/'
features: ["X-Ray sessions", "Improved compatibility with Java 1.5"]
bugs: ["@Trace annotation ignored the transaction for Apdex", "HTTP status code for Errors", "Spring exception handling", "Reading Post Parameters for Resin 3", "JVM Tab Metrics Not Showing up for Tomcat Applications", "Reduce DNS problems", "JVM tab metrics showing for all Applications In JVM", "Using a Proxy now works with SSL Enabled", "Akka error reporting"]
security: []
---
<ButtonGroup>
  <ButtonLink
    role="button"
    to="https://download.newrelic.com/newrelic/java-agent/newrelic-agent/2.21.0/"
    variant="primary"
  >
    Download this agent version
  </ButtonLink>
</ButtonGroup>

<Callout variant="important">
  The end-of-life date for this agent version is July 29, 2019. To update to the latest agent version, see [Update the agent](/docs/agents/manage-apm-agents/installation/update-new-relic-agent). For more information, see [End-of-life policy](/docs/agents/manage-apm-agents/maintenance/new-relic-agent-plugin-end-life-policy).
</Callout>

### Notes

* X-Ray sessions

  Adds support for X-Ray sessions. An X-Ray session collects Transaction Traces and a thread profile for a Key Transaction.
* Fix: In 2.20.0 an @Trace annotation ignored the transaction for Apdex

  An @Trace annotation on a method called in a web transaction had the side-effect of ignoring the transaction for calculating the Apdex score.
* Fix: HTTP status code for Errors

  If the HTTP status code for a web transaction was less than 400, the HTTP status code reported in the error was 500. The actual status code for the web request is now reported.
* Fix: Spring exception handling

  The Exception argument in the Spring DispatcherServlet processHandlerException method was reported as an Error with an HTTP status code of 500. The actual status code in the HTTP response is now reported.
* Fix: Reading Post Parameters for Resin 3

  Prior to this fix, post parameters in Resin 3 were always read using the default properties even if the application tried to read the post parameters using non-default properties or by just grabbing the request input stream.
* Fix: JVM Tab Metrics Not Showing up for Tomcat Applications

  Prior to this fix, if the service name in service.xml was not Catalina, then metrics would not appear under the JVM tab. Additionally, if you are using an embedded Tomcat 5/6, metrics should now appear under the JVM tab.
* Fix: Improved compatibility with Java 1.5

  In the custom xml validator, there were references to String.isEmpty() which was not available until Java 1.6. Those have been removed.
* Fix: Reducing DNS problems by not automatically adding '.' to the domain name

  By default the '.' is included. But if changed, then the '.' won't be added.
* Fix: JVM tab metrics showing for all Applications In JVM

  Metrics under the Thread, Session, and Transaction tabs used to only appear under the main application. The data will now be shown for all applications running in the specific JVM.
* Fix: Using a Proxy now works with SSL Enabled

  In prior releases proxy authentication would fail when SSL was enabled. We now do proxy authentication using the java.net.Authenticator.
* Fix: Akka error reporting

  If an actor throws an exception or the message times out, an error is reported. Previously, no error was reported.
