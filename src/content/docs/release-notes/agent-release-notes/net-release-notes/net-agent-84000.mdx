---
subject: .NET agent
releaseDate: '2021-06-08'
version: 8.40.0.0
---

### New Features

* Adds Agent support for capturing HTTP Request Headers.
  * Support included for ASP.NET 4.x, ASP.NET Core, Owin, and WCF instrumentation. ([#558](https://github.com/newrelic/newrelic-dotnet-agent/issues/558), [#559](https://github.com/newrelic/newrelic-dotnet-agent/issues/559), [#560](https://github.com/newrelic/newrelic-dotnet-agent/issues/560), [#561](https://github.com/newrelic/newrelic-dotnet-agent/issues/561))
  * To enable this feature, the new `allowAllHeaders` configuration setting must be set to `true`. For more information about this new configuration, visit the agent [configuration page](/docs/agents/net-agent/configuration/net-agent-configuration/#capture_http_request_headers).

### Fixes

* Fixes issue [#264](https://github.com/newrelic/newrelic-dotnet-agent/issues/264): Negative GC count metrics will now be clamped to 0, and a log message will be written to note the correction. This should resolve an issue where the GCSampler was encountering negative values and crashing. ([#550](https://github.com/newrelic/newrelic-dotnet-agent/pull/550))
* Fixes issue [#584](https://github.com/newrelic/newrelic-dotnet-agent/issues/584): When the agent is configured to log to the console, the configured logging level from `newrelic.config` will be respected. ([#587](https://github.com/newrelic/newrelic-dotnet-agent/pull/587))

### Checksums

<table>
  <thead>
    <tr>
      <th>
        File
      </th>

      <th>
        SHA - 256 Hash
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        newrelic-agent-win-8.40.0.0-scriptable-installer.zip
      </td>

      <td>
        1C752F5BAF8B1A13F0276BDE70522E08B92D34215A556C45AC8AF4AABBE0B87A
      </td>
    </tr>

    <tr>
      <td>
        newrelic-agent-win-x64-8.40.0.0.msi
      </td>

      <td>
        68A5C3C9CA6B8F35DD3F4FA4B97B7560CFADAE3D25790C33245CA69AF92F0BD0
      </td>
    </tr>

    <tr>
      <td>
        newrelic-agent-win-x64-8.40.0.0.zip
      </td>

      <td>
        93F1FE590F8D74483110250BBD94B7967BFADDB4C79241E9725B4FDEE8A85F6B
      </td>
    </tr>

    <tr>
      <td>
        newrelic-agent-win-x86-8.40.0.0.msi
      </td>

      <td>
        50E1C40F68CA7058D4491D994D3BCC31FF5EFB32C2EBB2F4E3EE9B391900CEEF
      </td>
    </tr>

    <tr>
      <td>
        newrelic-agent-win-x86-8.40.0.0.zip
      </td>

      <td>
        543C1473C7FE73B470B99A749A0E48B887116B82AAE784C0A195B5A88175AB1D
      </td>
    </tr>

    <tr>
      <td>
        newrelic-netcore20-agent-8.40.0.0-1.x86_64.rpm
      </td>

      <td>
        FCE857338C2ED7E740AEA6A57B506567AF8255C804CFDCD78BF4F6392B228893
      </td>
    </tr>

    <tr>
      <td>
        newrelic-netcore20-agent-win-8.40.0.0-scriptable-installer.zip
      </td>

      <td>
        3E12577B34CF8DE4E118D191B2C0EAA948AFC9AF15CEA4983A9C4AE5DBC74DA7
      </td>
    </tr>

    <tr>
      <td>
        newrelic-netcore20-agent-win-x64-8.40.0.0.zip
      </td>

      <td>
        34038A364C6B213F5CFD13D7785F925F244460DE995F02309CEA370F1A5E3BC4
      </td>
    </tr>

    <tr>
      <td>
        newrelic-netcore20-agent-win-x86-8.40.0.0.zip
      </td>

      <td>
        B52A6AAB8F24F2ECEAAD0589AE7A2B1CD71E28790627908B3DF9DE671C0D5E70
      </td>
    </tr>

    <tr>
      <td>
        newrelic-netcore20-agent_8.40.0.0_amd64.deb
      </td>

      <td>
        59188974CFECB5C7F8CB291D4669C48B7AA3FB936C3AF456EB1387D3CE99A4FA
      </td>
    </tr>

    <tr>
      <td>
        newrelic-netcore20-agent_8.40.0.0_amd64.tar.gz
      </td>

      <td>
        CF99691E1E6DF2B0ABDFB6C8740FBDC5FBA557BC248447E33D87214D167D217B
      </td>
    </tr>
  </tbody>
</table>

### Support statement

New Relic recommends that you upgrade the agent regularly and at a minimum every 3 months. As of this release, the oldest supported version is [.NET Agent 8.13.798.0](/docs/release-notes/agent-release-notes/net-release-notes/net-agent-8137980).

### Upgrading

* Follow standard procedures to [update the .NET agent](/docs/agents/net-agent/installation-configuration/update-net-agent).
* If you are upgrading from a particularly old agent, review the list of major changes and procedures to [upgrade legacy .NET agents](/docs/agents/net-agent/troubleshooting/upgrade-legacy-net-agents).
