---
subject: .NET agent
releaseDate: '2021-07-08'
version: 8.40.1.0
features: []
bugs: ['Fix missing data when using Infinite Tracing and SendDataOnExit', 'No longer record a transaction for invalid MVC actions', 'Correct transaction name around attribute-based routing', 'Correctly handle OPTIONS requests', 'Report missing external calls in WCF services', 'Ignore Kudu on Linux Azure', 'Fix startup failure due to invalid config file', 'Always report thread ID in Agent log', 'Fix failures in creating SQL Explain Plans']
security: []
---

### Fixes

* Fixes issue [#485](https://github.com/newrelic/newrelic-dotnet-agent/issues/485): `SendDataOnExit` configuration setting will prevent Infinite Traces data sending interuption on application exit. ([#550](https://github.com/newrelic/newrelic-dotnet-agent/pull/609))
* Fixes issue [#155](https://github.com/newrelic/newrelic-dotnet-agent/issues/155): MVC invalid Action for valid Controller can cause MGI. ([#608](https://github.com/newrelic/newrelic-dotnet-agent/pull/608))
* Fixes issue [#186](https://github.com/newrelic/newrelic-dotnet-agent/issues/186): Attribute based Routing (ex WebAPI) can cause transaction naming issues. ([#612](https://github.com/newrelic/newrelic-dotnet-agent/pull/612))
* Fixes issue [#463](https://github.com/newrelic/newrelic-dotnet-agent/issues/463): Handle OPTIONS requests for asp.net applications. ([#612](https://github.com/newrelic/newrelic-dotnet-agent/pull/612))
* Fixes issue [#551](https://github.com/newrelic/newrelic-dotnet-agent/issues/551): Missing external calls in WCF Service. ([#610](https://github.com/newrelic/newrelic-dotnet-agent/pull/610))
* Fixes issue [#616](https://github.com/newrelic/newrelic-dotnet-agent/issues/616): Linux Kudu not accessible when .NET agent presents. ([#618](https://github.com/newrelic/newrelic-dotnet-agent/pull/618))
* Fixes issue [#266](https://github.com/newrelic/newrelic-dotnet-agent/issues/266): Agent fails to initialize and provides no logs when configured with capitalized booleans. ([#617](https://github.com/newrelic/newrelic-dotnet-agent/pull/617))
* Explain plans will be created if [transactionTracer.explainEnabled](https://docs.newrelic.com/docs/agents/net-agent/configuration/net-agent-configuration/#tracer-explainEnabled) is true and one or both [transactionTracer.enabled](https://docs.newrelic.com/docs/agents/net-agent/configuration/net-agent-configuration/#tracer-enabled) or [slowSql.enabled](https://docs.newrelic.com/docs/agents/net-agent/configuration/net-agent-configuration/#slow_sql) are true.  If transactionTracer.explainEnabled is false or both transactionTracer.enabled and slowSql.enabled are false, no Explain Plans will be created.
* Fixes issue [#600](https://github.com/newrelic/newrelic-dotnet-agent/issues/600): Thread id will now be used in agent logging, even if a thread name has been set. ([#626](https://github.com/newrelic/newrelic-dotnet-agent/pull/626))
* Fixes issue [#476](https://github.com/newrelic/newrelic-dotnet-agent/issues/476): When generating and explain plan MS SQL parsing is matching parts of words instead of whole words
* Fixes issue [#477](https://github.com/newrelic/newrelic-dotnet-agent/issues/476): SQL Explain plans MS SQL parser needs to be able to ToString an object to work with parameterized queries
  * Improves handling serializable types like DateTimeOffset
  * The presence DbTypes Binary and Object will prevent an Explain Plan from being executed.  In order to execute an explain plan, the agent must replace any parameters in a query with the real values.  Binary and Object are too complex to properly serialize without introducing errors.

### Checksums

| File                                                           | SHA - 256  Hash                                                  |
| -------------------------------------------------------------- | ---------------------------------------------------------------- |
| newrelic-agent-win-8.40.1.0-scriptable-installer.zip           | DA01B071EE654006A811BEF4A63780C0C1A5AE94D6B7315C26D8CBC1BA6C81EB |
| newrelic-agent-win-x64-8.40.1.0.msi                            | DBB3E7DD895BC6B9412FD748E0DC8A4C42C54FEDDAE46759F0A813911562EE15 |
| newrelic-agent-win-x64-8.40.1.0.zip                            | 55E29C0291E0BCE8EEF0F04252972EDA9614D9C199D4ECDF04D8D8D235C1C441 |
| newrelic-agent-win-x86-8.40.1.0.msi                            | 08F3C3EEFE6AFEFAB82C2C030E3DDC62E6A7AA5CAB8D99F25F399D6894BED653 |
| newrelic-agent-win-x86-8.40.1.0.zip                            | 66EB3609CE1AC145F1AC9DB7B7EF0B4F83F1A975D86AD7067A3E51A30FD7FF51 |
| newrelic-netcore20-agent-8.40.1.0-1.x86_64.rpm                 | E165609FE8F1063221786AB0D19D76122CC735DB4162D9C9CB1FAB779FD38806 |
| newrelic-netcore20-agent-win-8.40.1.0-scriptable-installer.zip | 75DDDEAD573336DB586668C892AC7B9E5FBF56ED6595C9FF4090DB9FF129AA23 |
| newrelic-netcore20-agent-win-x64-8.40.1.0.zip                  | 0252C16007C18219A1EFDB7E2F8C2DE178D0A94A58F58EABEC4F376762829B4A |
| newrelic-netcore20-agent-win-x86-8.40.1.0.zip                  | 31CBE34CBB8E62AE3E87319E026E1B14AFCBB234CF7FD48971F1C7A5B8050FC3 |
| newrelic-netcore20-agent_8.40.1.0_amd64.deb                    | F84646E7A606918FF2C6189EFA9269922F0F1297F3B5581BC795F905D79B7400 |
| newrelic-netcore20-agent_8.40.1.0_amd64.tar.gz                 | 9C4B853A748F508DF6FECDB3BE3E963C6ECA89C6D3ACFACD90C1D4D1A89BAFFB |

### Support statement

New Relic recommends that you upgrade the agent regularly and at a minimum every 3 months. As of this release, the oldest supported version is [.NET Agent 8.13.798.0](/docs/release-notes/agent-release-notes/net-release-notes/net-agent-8137980).

### Upgrading

* Follow standard procedures to [update the .NET agent](/docs/agents/net-agent/installation-configuration/update-net-agent).
* If you are upgrading from a particularly old agent, review the list of major changes and procedures to [upgrade legacy .NET agents](/docs/agents/net-agent/troubleshooting/upgrade-legacy-net-agents).
