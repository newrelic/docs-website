---
title: "Subscription usage (original pricing model)"
tags:
  - Accounts
  - Original accounts and billing
  - Original pricing model usage
metaDescription: For accounts on our original pricing model, how to understand your product subscription usage data.
redirects:
  - /docs/accounts/original-accounts-billing/original-pricing-plan-usage/introduction-new-relic-subscription-usage-data
  - /docs/apis/rest-api-v2/account-examples-v2/retrieving-account-usage-metrics-rest-api
  - /docs/introduction-new-relic-subscription-usage-data
  - /docs/new-relic-subscription-usage-documentation-beta
  - /node/17026
  - /docs/accounts-partnerships/accounts/account-billing-usage/account-usage-page-explore-host-pageview-trends-over-time
  - /docs/accounts-partnerships/accounts/account-billing-usage/account-usage-page-explore-usage-trends-over-time
  - /docs/accounts/new-relic-account-usage/browser-usage/browser-mobile-account-usage-ui-page
  - /docs/apis/rest-api-v2/account-examples-v2/get-account-usage-data-rest-api
  - /docs/accounts/new-relic-account-usage/deprecated-usage-apis/account-apis-apm-browser-mobile-deprecated
  - /docs/accounts/new-relic-account-usage/getting-started/introduction-subscription-usage-data
  - /docs/accounts/new-relic-account-usage/getting-started-usage/transition-new-relic-usage-ui-apis
  - /docs/transition-new-relic-subscription-usage-system
  - /docs/accounts/new-relic-account-usage/getting-started/transition-new-relic-subscription-usage-system
  - /docs/accounts/new-relic-account-usage/getting-started-usage/transition-new-relic-subscription-usage-system
  - /docs/apis/rest-api-v2/account-examples-v2/subscription-usage-apis
  - /docs/accounts-partnerships/accounts/account-maintenance/account-usage-explore-usage-trends-over-time
  - /docs/accounts/new-relic-account-usage/getting-started-usage/introduction-new-relic-subscription-usage-data
  - /docs/accounts/new-relic-account-usage/apm-usage-cu-based/usage-attributes-queries
  - /docs/accounts/new-relic-account-usage/apm-usage/get-compute-unit-cu-based-apm-account-usage-rest-api
  - /docs/accounts/new-relic-account-usage/deprecated-usage-apis/cu-based-apm-usage-api-deprecated
  - /docs/accounts/new-relic-account-usage/apm-usage-cu-based/usage-ui-calculation
  - /docs/accounts/new-relic-account-usage/apm-usage-cu-based/apm-cu-based-usage-attributes-queries
  - /docs/accounts/new-relic-account-usage/apm-usage-cu-based/apm-cu-based-subscription-usage
  - /docs/accounts/new-relic-account-usage/getting-started-usage/apm-cu-based-subscription-usage
  - /docs/accounts/original-accounts-billing/original-pricing-plan-usage/apm-cu-based-subscription-usage
  - /docs/accounts/original-accounts-billing/original-pricing-plan-usage/apm-host-based-subscription-usage
  - /docs/apm-usage-ui-page-host-based
  - /docs/apm-host-based-usage-ui-page-beta
  - /docs/accounts-partnerships/accounts/account-billing-usage/apm-host-based-usage-ui-page
  - /docs/accounts-partnerships/new-relic-account-usage/apm-usage/apm-host-based-usage-ui-page
  - /docs/apm/reports/other-performance-analysis/host-usage-report
  - /docs/accounts/new-relic-account-usage/apm-usage-host-based/usage-attributes-queries
  - /docs/accounts/new-relic-account-usage/apm-usage/host-based-apm-account-usage-rest-api
  - /docs/accounts/new-relic-account-usage/apm-usage-host-based/apm-host-based-usage-attributes-queries
  - /docs/accounts/new-relic-account-usage/apm-usage-host-based/apm-host-based-usage
  - /docs/accounts/new-relic-account-usage/apm-usage-host-based/usage-ui-calculation
  - /docs/accounts/new-relic-account-usage/apm-usage-host-based/apm-host-based-subscription-usage
  - /docs/accounts/new-relic-account-usage/getting-started-usage/apm-host-based-subscription-usage
  - /docs/accounts/original-accounts-billing/original-pricing-plan-usage/browser-subscription-usage  
  - /docs/browser-subscription-usage-api-attributes-queries
  - /docs/browser-subscription-usage-ui
  - /docs/browser-subscription-usage-attributes-queries
  - /docs/accounts/new-relic-account-usage/browser-usage/browser-usage-ui
  - /docs/accounts/new-relic-account-usage/browser-usage/browser-usage-attributes-queries
  - /docs/accounts/new-relic-account-usage/browser-usage/browser-subscription-usage-ui
  - /docs/accounts/new-relic-account-usage/browser-usage/browser-subscription-usage
  - /docs/browser/single-page-app-monitoring/get-started/spa-monitoring-new-relic-data-usage
  - /docs/accounts/new-relic-account-usage/getting-started-usage/browser-subscription-usage
  - /docs/accounts/original-accounts-billing/original-pricing-plan-usage/mobile-subscription-usage
  - /docs/mobile-subscription-usage-api-attributes-queries
  - /docs/mobile-subscription-usage-attributes-queries
  - /docs/mobile-subscription-usage-ui
  - /docs/accounts/new-relic-account-usage/mobile-usage/mobile-subscription-usage-attributes-queries
  - /docs/accounts/new-relic-account-usage/mobile-usage/mobile-subscription-usage
  - /docs/accounts/new-relic-account-usage/getting-started-usage/mobile-subscription-usage
  - /docs/accounts/original-accounts-billing/original-pricing-plan-usage/infrastructure-subscription-usage
  - /docs/infrastructure-subscription-usage-api-attributes-queries
  - /docs/infrastructure-subscription-usage-ui
  - /docs/infrastructure-subscription-usage-attributes-queries
  - /docs/accounts/new-relic-account-usage/infrastructure-usage/infrastructure-usage-attributes-queries
  - /docs/accounts/new-relic-account-usage/infrastructure-usage/infrastructure-usage-ui
  - /docs/accounts/new-relic-account-usage/infrastructure-usage/infrastructure-subscription-usage-attributes-queries
  - /docs/accounts/new-relic-account-usage/infrastructure-usage/infrastructure-subscription-usage
  - /docs/accounts/new-relic-account-usage/infrastructure-usage
  - /docs/accounts/new-relic-account-usage/getting-started-usage/infrastructure-subscription-usage  
  - /docs/accounts/original-accounts-billing/original-pricing-plan-usage/insights-subscription-usage
  - /docs/insights-subscription-usage-ui
  - /docs/insights-usage-attributes-queries
  - /docs/accounts/new-relic-account-usage/insights-usage/insights-usage-attributes-queries
  - /docs/accounts/new-relic-account-usage/insights-usage/insights-usage-ui
  - /docs/accounts/new-relic-account-usage/insights-usage/insights-usage-event-queries
  - /docs/accounts/new-relic-account-usage/insights-usage/insights-subscription-usage
  - /docs/accounts/new-relic-account-usage/insights-usage/insights-subscription-usage-ui
  - /docs/accounts/new-relic-account-usage/getting-started-usage/insights-subscription-usage
  - /docs/accounts/original-accounts-billing/original-pricing-plan-usage/synthetics-subscription-usage
  - /docs/synthetics-subscription-usage-api-attributes-queries
  - /docs/synthetics-subscription-usage-ui
  - /docs/synthetics-subscription-usage-attributes-queries
  - /docs/accounts/new-relic-account-usage/synthetics-usage/synthetics-usage-attributes-queries
  - /docs/accounts/new-relic-account-usage/synthetics-usage/synthetics-subscription-usage
  - /docs/accounts/new-relic-account-usage/getting-started-usage/synthetics-subscription-usage  
---

<Callout variant="important">
  This doc is for accounts on our original [Product-based pricing](/docs/accounts/original-accounts-billing/product-pricing/product-based-pricing). If you're on the newer pricing model, see the [usage-based pricing docs](/docs/accounts/accounts-billing/new-relic-one-pricing-users/pricing-billing). Not sure which you're on? See [Overview of pricing models](/docs/accounts/original-accounts-billing/original-product-based-pricing/overview-pricing-models).
</Callout>

For accounts on our [original pricing model](/docs/accounts/original-accounts-billing/product-pricing/product-based-pricing), the usage UI lets you predictably track your data usage, and see how that may affect your pricing. This document explains how the subscription usage UI works, and how you can query and retrieve the usage data you need.

To view your usage data:

* If you are an account owner or admin, you can access subscription usage data in the New Relic UI.
* If you are not the account owner or admin, you can query usage data by using the [`NrDailyUsage` event](/attribute-dictionary/?event=NrDailyUsage).

## How it works [#about-usage]

<Callout variant="tip">
  **Owner and Admins**
</Callout>

The subscription usage UI shows how much a New Relic product is being used, and how that usage might affect your account's [subscription level and pricing](/docs/accounts/accounts/subscription-pricing). For example, you can see:

* How much your organization's departments or child accounts are contributing to billable New Relic usage. This is useful, for example, if your organization uses IT chargebacks.
* How close you are to going above your Insights Pro subscription level.

To understand your product usage, use any of these resources:

* View [**Usage** UI pages](#ui) to get an overview of your New Relic product usage.
* Download usage data CSVs and use other [UI features](#ui-features).
* Run [NRQL queries or use Insights query API calls](#nrql-queries) to retrieve focused usage data.

## View usage data in UI [#ui]

<Callout variant="tip">
  Only the account **Owner** and **Admins** can view the usage UI. However, anyone in your account can query usage data using the `NrDailyUsage` [event](/docs/data-apis/understand-data/new-relic-data-types/#event-data).
</Callout>

To view New Relic subscription usage data:

1. Go to the [usage UI](/docs/accounts/accounts-billing/new-relic-one-pricing-billing/billing-ui).
2. For an overview of account usage across all products, select **Usage**.
3. To view usage for a specific product, select its **Usage** page.

Every New Relic product has its own unit of measurement to calculate usage. For example, Mobile tracks monthly active users. Aside from the unit of measurement, the UI charts and features are similar for all products.

## UI features

Here are some of the general features available on New Relic usage UI pages. For product-specific UI and calculation details, see the [product usage documentation](#product-ui).

<table>
  <thead>
    <tr>
      <th style={{ width: "240px" }}>
        If you want to...
      </th>

      <th>
        Do this...
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        Switch time range
      </td>

      <td>
        Use the **Time picker** to switch between the view of the data from the current calendar month and the data from the last 30 days. All time measurements in the UI use Coordinated Universal Time (UTC).
      </td>
    </tr>

    <tr>
      <td>
        Switch to different account levels
      </td>

      <td>
        To select account levels, such as [customer partnerships](/docs/new-relic-partnerships/partner-integration-guide/partner-account-maintenance/partnership-accounts-users-subscriptions), [parent accounts](/docs/accounts/install-new-relic/account-setup/manage-apps-or-users-sub-accounts), and child accounts, select **Scope to**.
      </td>
    </tr>

    <tr id="csv">
      <td>
        Download CSV
      </td>

      <td>
        On product-specific usage pages, select **Download CSV** to get a comma-separated value file. The columns and data in the CSV match the data shown in the UI.
      </td>
    </tr>

    <tr>
      <td>
        Group data
      </td>

      <td>
        On product-specific pages, the default chart view is organized by **Account name**. To switch to other ways of grouping your data, such as by application or host, select **Group by**.
      </td>
    </tr>

    <tr id="view-query">
      <td>
        View query
      </td>

      <td>
        Mouse over a chart and select <Icon name="fe-more-horizontal"/>
        , then select **View query**.
      </td>
    </tr>

    <tr>
      <td>
        See chart segment details
      </td>

      <td>
        To display more details on charts with multiple segments, mouse over any segment.
      </td>
    </tr>
  </tbody>
</table>

## Query usage data [#nrql-queries]

New Relic stores your usage data as an [`NrDailyUsage` event type](/docs/data-apis/understand-data/new-relic-data-types/#event-data). The usage charts have an associated NRQL query that is close to what you see in the UI.

For product-specific attributes and example NRQL queries, keep reading.

<CollapserGroup>
  <Collapser
    id="apm-cu"
    title="APM CU-based subscription"
  >
    For accounts on our [original pricing model](/docs/accounts/original-accounts-billing/product-pricing/product-based-pricing), our usage UI lets you predictably track your data usage, and see how that may affect your pricing. This document explains how New Relic calculates billable usage for <InlinePopup type="apm" /> accounts that have CU-based pricing (not host-based pricing), and also provides available subscription usage attributes and [example NRQL queries](#query-examples) to use in the New Relic UI or with API calls.

    ### Data generation [#details]

    Once per day, an APM account will generate an `NrDailyUsage` [event](/docs/telemetry-data-platform/ingest-manage-data/understand-data/new-relic-data-types#events-new-relic) for:

    * Every application instance created over the last 24 hours
    * Every unique host on which an application instance existed over the last 24 hours

      These two types of events allow your usage data to be queried and analyzed in many different ways. To query the application events, use a `usageType` attribute value of `Application`. To query the host events, use a `usageType` attribute value of `Host`.

      All APM events use a `productLine` attribute value of `APM`. For more information, see [APM query examples](#query-examples).

      ### Usage calculations [#calculation]

      Monthly billable CUs for a host are calculated by the size of the host running APM (number of CPUs + GBs of RAM) multiplied by the number of hours the host is connected to New Relic during that month. For more on how this is calculated, see [CU-based pricing](/docs/accounts/accounts/subscription-pricing/compute-unit-cu-pricing-vs-host-based-pricing-apm-infrastructure#compute-unit).

      <Callout variant="tip">
        Only the account **Owner** and **Admins** can view the usage UI. However, anyone in your account can query usage data using the `NrDailyUsage` [event](/docs/telemetry-data-platform/ingest-manage-data/understand-data/new-relic-data-types#events-new-relic).
      </Callout>

      To get an estimate of the current month's eventual billable CUs:

    1. Go to the [usage UI](/docs/accounts/accounts-billing/new-relic-one-pricing-billing/billing-ui).
    2. On the **APM usage** page, set the time picker to **Current month**.
    3. Multiply the **Avg daily compute units** by the number of days in the current month.

       For more information about the usage UI, see [Intro to subscription usage data](/docs/accounts/new-relic-account-usage/getting-started-usage/introduction-new-relic-subscription-usage-data).

       ### Table definitions [#details]

       Here are definitions of the column headers displayed in the UI table and CSV files. The columns visible depend on the **Group by** option selected at the top of the page.

       <table>
         <thead>
           <tr>
             <th style={{ width: "200px" }}>
               Header
             </th>

             <th>
               Definition
             </th>
           </tr>
         </thead>

         <tbody>
           <tr>
             <td>
               Account name
             </td>

             <td>
               The name of the account. This can be a standalone account, a [parent account](/docs/accounts/install-new-relic/account-setup/manage-apps-or-users-sub-accounts) or a [customer partnership](/docs/new-relic-partnerships/partner-integration-guide/partner-account-maintenance/partnership-accounts-users-subscriptions).
             </td>
           </tr>

           <tr>
             <td>
               Host ID
             </td>

             <td>
               The unique identifier for that host. If the host is in AWS, we use the AWS-provided instance ID. For other hosts, New Relic assigns a host ID. For more about how this value is created, see [`hostID`](/docs/apm-cu-based-usage-attributes-queries#hostid).
             </td>
           </tr>

           <tr>
             <td>
               Agent hostname
             </td>

             <td>
               The name of the host, as reported by the agent. For more about this value, see [`agentHostname`](/docs/apm-cu-based-usage-attributes-queries#agenthostname).
             </td>
           </tr>

           <tr>
             <td>
               Average daily compute units
             </td>

             <td>
               The average daily [compute units](/docs/accounts/accounts/subscription-pricing/compute-unit-cu-pricing-vs-host-based-pricing-apm-infrastructure#compute-unit) used.
             </td>
           </tr>

           <tr>
             <td>
               % of total usage
             </td>

             <td>
               The percentage of the total usage used.
             </td>
           </tr>
         </tbody>
       </table>

       ### Query examples

       Here are some examples of NRQL queries you can use with your account usage data.

       <CollapserGroup>
         <Collapser
           id="last-month-query"
           title="Usage for last month"
         >
           ```
           SELECT sum(apmComputeUnits) 
           FROM NrDailyUsage 
           WHERE usageType='Host' 
           AND productLine='APM' 
           SINCE last month 
           UNTIL this month
           ```
         </Collapser>

         <Collapser
           id="last-year-query"
           title="Monthly usage for last year"
         >
           ```
           SELECT SUM(apmComputeUnits)
           FROM NrDailyUsage
           WHERE usageType='Host' 
           AND productLine='APM'
           FACET monthOf(timestamp) 
           SINCE 12 month ago limit 13
           ```
         </Collapser>

         <Collapser
           id="instance-hours-per-app-query"
           title="Instance-CUs per application"
         >
           This query measures the total number of CUs used by all instances (processes) of an application in the last 24 hours. It's useful for determining which applications are responsible for APM usage, but does not return results that match precisely how New Relic prices APM usage.

           Each application instance is counted separately in this query, even if it runs concurrently with another application instance on the same host, so the number of application instance-hours is likely to be greater than the number of host-hours (the billable quantity).

           ```
           SELECT sum(apmComputeUnits) 
           FROM NrDailyUsage 
           WHERE usageType='Application' 
           AND productLine='APM' 
           FACET consumingAccountName,consumingAccountId,apmAppName 
           SINCE 1 day ago 
           LIMIT 2000
           ```
         </Collapser>

         <Collapser title="Legacy host usage report">
           This query returns data once provided in the "host usage report": a listing of applications running on each host. Note that while APM usage is counted on an hour-by-hour basis, per-hour usage data is no longer available via the API or UI.

           ```
           FROM NrDailyUsage 
           SELECT min(timestamp) 
           AS 'Earliest reporting day',max(timestamp) 
           AS 'Latest reporting day' 
           FACET apmAppName,hostId,agentHostname,consumingAccountName,consumingAccountId 
           WHERE usageType='Application' 
           AND productLine='APM' 
           SINCE 1 month ago 
           LIMIT 2000
           ```
         </Collapser>

         <Collapser
           id="legacy-per-host-query"
           title="Legacy per-host usage report"
         >
           This query produces a close approximation of the CSV report you would have gotten in the deprecated UI system:

           ```
           FROM NrDailyUsage 
           SELECT consumingAccountId 
           AS 'Account ID', hostId, cloudProvider 
           AS 'Host provider', cloudInstanceType 
           AS 'Instance type', apmBillingInstanceSize 
           AS 'Instance size', apmHoursUsed 
           AS 'Hours used', apmComputeUnits 
           AS 'Usage (CU)', apmMemoryBytes/(1024*1024*1024) 
           AS 'Total RAM', apmProcessorCount 
           AS 'Logical processors', apmContainerCount 
           AS 'Container count', apmComputeUnitRule 
           AS 'Business rule', missingCpuData, missingRamData, instanceSizeCapped, cloudZone, cloudInstanceId 
           WHERE productLine='APM' 
           AND usageType='Host' 
           SINCE 1 day ago 
           LIMIT 2000
           ```

           This NRQL query is different than the legacy usage report:

           <table>
             <thead>
               <tr>
                 <th style={{ width: "200px" }}>
                   Per-host query
                 </th>

                 <th>
                   Comments
                 </th>
               </tr>
             </thead>

             <tbody>
               <tr>
                 <td>
                   Time period
                 </td>

                 <td>
                   This query includes only the last 24 hours of usage. To see the usage aggregated over a longer time period, change the `SINCE` clause.
                 </td>
               </tr>

               <tr>
                 <td>
                   Results limited to a maximum number of rows
                 </td>

                 <td>
                   NRQL limits the number of rows returned. If you have more hosts than the maximum number of rows returned and want to get the complete set of hosts, you can narrow your query with more `WHERE` clauses to return subsets of the data (for example, `WHERE cloudInstanceId LIKE “%0”`) to divide the data into up to 16 groups, modulo the last character in the AWS instance ID.
                 </td>
               </tr>

               <tr>
                 <td>
                   Docker container IDs
                 </td>

                 <td>
                   A single Docker container ID does not appear in this report. A Docker container ID is reported only at the application instance level of granularity (`usageType='Application'`).

                   For the host (`usageType='Host'`), a count of unique containers is reported, since there are often very many. While choosing just one container ID to report for a host had been informative, now there is more data reported at the appropriate level of granularity.
                 </td>
               </tr>

               <tr>
                 <td>
                   Business rule
                 </td>

                 <td>
                   `Business rule` has been replaced with two attributes:

                   * `apmComputeUnitRule` defines how the size of the host was calculated, depending on what data was available from the agent. It no longer describes whether the agent needs to be updated to provide more accurate host naming in a container environment (`update_agent_for_container_environment`).
                   * `missingCpuData`, `missingRamData`, and `instanceSizeCapped` are boolean flags describing what the value `missing_data` means when it is present in the `apmComputeUnitRule` attribute.
                 </td>
               </tr>
             </tbody>
           </table>
         </Collapser>

         <Collapser
           id="agent-version-info"
           title="Agent version information"
         >
           Use this query to see which agent versions are running on your applications in the last 24 hours. This information can be useful in determining whether the agent needs to be upgraded to report a more accurate host name in a Docker container environment (either a Linux boot ID or a cloud provider instance ID).

           ```
           FROM NrDailyUsage 
           SELECT count(*) 
           WHERE productLine='APM' 
           AND usageType='Application' 
           FACET consumingAccountId, consumingAccountName, apmAppName, apmAgentVersion, apmLanguage 
           SINCE 1 day ago 
           LIMIT 2000
           ```
         </Collapser>

         <Collapser
           id="agents-container-upgrades"
           title="Agents needing updates for container tracking"
         >
           This query helps identify applications where an agent is reporting a hostname that may be the same as a container ID. The result of the query is not a definitive list of such applications, but helps you determine which applications may be affected.

           Hosts that are inaccurately named after a Docker container will have a `hostId` value that is the same as the first part of the `containerId` value. The `apmComputeUnitRule != ‘cloud_provider_data’` clause removes from consideration hosts that are named by the cloud provider and thus not named after an ephemeral container.

           ```
           FROM NrDailyUsage 
           SELECT latest(hostId) 
           WHERE containerId is not null 
           AND apmComputeUnitRule != 'cloud_provider_data' 
           AND productLine='APM' 
           AND usageType='Application' 
           FACET consumingAccountId,apmAppName,apmAgentVersion,apmLanguage,containerId 
           SINCE 1 day ago 
           LIMIT 2000
           ```
         </Collapser>

         <Collapser
           id="account-hierarchy-query"
           title="Account hierarchy"
         >
           This query is useful for seeing the account hierarchy (partnership, parent, child accounts).

           ```
           SELECT count(*) 
           FROM NrDailyUsage 
           FACET partnershipName, masterAccountName, masterAccountId, consumingAccountName, consumingAccountId 
           LIMIT 2000 SINCE 1 day ago
           ```
         </Collapser>
       </CollapserGroup>

       ### Use of Docker or other containers [#containers]

       Some previous <InlinePopup type="apm" /> agents may miscount containers as hosts, which may lead to over-reporting of compute unit (CU) usage.

       To fix this calculation for Linux-based containers (including Docker), [upgrade your APM agent](/docs/agents/manage-apm-agents/installation/update-new-relic-agent) to these versions:

    * **Go**: 1.11 or higher
    * **Java**: 3.42.0 or higher
    * **.NET**: 6.19.330.0 or higher
    * **Node.js**: 2.1.0 or higher
    * **PHP**: 7.5.0.199 or higher
    * **Python**: 2.90.0.75 or higher
    * **Ruby**: 4.4.0.336 or higher
  </Collapser>

  <Collapser
    id="apm-host-based"
    title="APM host-based subscription"
  >
    For accounts on our [original pricing model](/docs/accounts/original-accounts-billing/product-pricing/product-based-pricing), this explains how New Relic calculates billable usage for APM accounts that have [host-based pricing](/docs/accounts/accounts/subscription-pricing/compute-unit-cu-pricing-vs-host-based-pricing-apm-infrastructure#host-based) (not [CU-based pricing](/docs/apm-cu-based-usage-attributes-queries)). This document also provides available subscription usage attributes and [example NRQL queries](#query-examples) to use in the New Relic UI or with API calls.

    ### Data generation [#details]

    Once per day, an APM account will generate an `NrDailyUsage` [event](/docs/data-apis/understand-data/new-relic-data-types/#event-data) for:

    * Every application instance that existed during the last 24 hours
    * Every unique host on which an application instance ran during the last 24 hours

      These two types of events allow your usage data to be queried and analyzed in many different ways. To query the application events, use a `usageType` attribute value of `Application`. To query the host events, use a `usageType` attribute value of `Host`.

      All APM events use a `productLine` attribute value of `APM`. For more information, see [APM query examples](#query-examples).

      ### Usage calculations [#calculation]

      For host-based APM pricing, monthly billable usage is determined by the number of **equivalent hosts** used during that month. An **equivalent host** is defined as: 750 hours (standardized number of monthly hours) of connection to New Relic by a host or multiple hosts. For more on this calculation, see [host-based pricing](/docs/accounts/accounts/subscription-pricing/compute-unit-cu-pricing-vs-host-based-pricing-apm-infrastructure#host-based).

      <Callout variant="tip">
        Only the account **Owner** and **Admins** can view the usage UI. However, anyone in your account can query usage data using the `NrDailyUsage` [event](/docs/data-apis/understand-data/new-relic-data-types/#event-data).
      </Callout>

      To get an estimate of the current month's billable usage:

    1. Go to the [usage UI](/docs/accounts/accounts-billing/new-relic-one-pricing-billing/billing-ui).
    2. On the **APM usage** page, set the time picker to **Current month**.
    3. See the **Avg daily equivalent hosts** for an account or grouping of accounts.

       The UI is meant to estimate your host usage but, especially for cloud environments, your usage may go up or down over time.

       ## Query examples

       Here are some examples of NRQL queries you can use with your account usage data. You can run NRQL queries and use the resulting charts in dashboards.

       <CollapserGroup>
         <Collapser
           id="last-month-query"
           title="Usage for last month"
         >
           This query uses New Relic’s standard number of hours per month (750) for the purpose of calculating APM equivalent hosts over the last month.

           ```
           SELECT sum(apmHoursUsed)/750 
           AS 'Equivalent hosts' 
           FROM NrDailyUsage 
           WHERE usageType='Host' 
           AND productLine='APM' 
           SINCE last month 
           UNTIL this month
           ```
         </Collapser>

         <Collapser
           id="per-host-app-query"
           title="Usage per host per application"
         >
           New Relic records usage per application instance, not strictly per application. This query gives an approximation of the usage for a given application on a given host. If unique application instances run sequentially on a host within a given day, this query could return an underestimate (this would be likely, for example, in a container environment).

           ```
           SELECT max(apmHoursUsed) 
           FROM NrDailyUsage 
           WHERE usageType='Application' 
           AND productLine='APM' 
           FACET consumingAccountName,consumingAccountId,apmAppName,hostId 
           SINCE 1 day ago 
           LIMIT 2000
           ```
         </Collapser>

         <Collapser
           id="instance-hours-per-app-query"
           title="Instance-hours per application"
         >
           This query measures the total number of hours used by all instances (processes) of an application in the last 24 hours. It's useful for determining which applications are responsible for APM usage, but does not return results that match precisely how New Relic prices APM usage.

           Each application instance is counted separately in this query, even if it runs concurrently with another application instance on the same host, so the number of application instance-hours is likely to be greater than the number of host-hours (the billable quantity).

           ```
           SELECT sum(apmHoursUsed) 
           FROM NrDailyUsage 
           WHERE usageType='Application' 
           AND productLine='APM' 
           FACET consumingAccountName,consumingAccountId,apmAppName 
           SINCE 1 day ago 
           LIMIT 2000
           ```
         </Collapser>

         <Collapser
           id="agent-version-info"
           title="Agent version information"
         >
           Use this query to see which agent versions are running on your applications in the last 24 hours. This information can be useful in determining whether the agent needs to be upgraded to report a more accurate host name in a Docker container environment (either a Linux boot ID or a cloud provider instance ID).

           ```
           FROM NrDailyUsage 
           SELECT count(*) 
           WHERE productLine='APM' 
           AND usageType='Application' 
           FACET consumingAccountId, consumingAccountName, apmAppName, apmAgentVersion, apmLanguage 
           SINCE 1 day ago 
           LIMIT 2000
           ```
         </Collapser>

         <Collapser
           id="account-hierarchy-query"
           title="Account hierarchy"
         >
           This query is useful for seeing the account hierarchy (partnership, parent accounts, child accounts).

           ```
           SELECT count(*) 
           FROM NrDailyUsage 
           FACET partnershipName,masterAccountName,masterAccountId,consumingAccountName,consumingAccountId 
           LIMIT 2000 
           SINCE 1 day ago
           ```
         </Collapser>

         <Collapser
           id="legacy-usage-report"
           title="Legacy per-host usage report"
         >
           This query produces a close approximation of the CSV report you would have seen in the deprecated UI system:

           ```
           FROM NrDailyUsage 
           SELECT consumingAccountId 
           AS 'Account ID', hostId, cloudProvider 
           AS 'Host provider', cloudInstanceType 
           AS 'Instance type', apmBillingInstanceSize 
           AS 'Instance size', apmHoursUsed 
           AS 'Hours used', apmComputeUnits 
           AS 'Usage (CU)', apmMemoryBytes/(1024*1024*1024) 
           AS 'Total RAM', apmProcessorCount 
           AS 'Logical processors', apmContainerCount 
           AS 'Container count', apmComputeUnitRule 
           AS 'Business rule', missingCpuData, missingRamData, instanceSizeCapped, cloudZone, cloudInstanceId 
           WHERE productLine='APM' 
           AND usageType='Host' 
           SINCE 1 day ago 
           LIMIT 2000
           ```

           This NRQL query is different than the legacy usage report:

           <table>
             <thead>
               <tr>
                 <th style={{ width: "200px" }}>
                   Per-host query
                 </th>

                 <th>
                   Comments
                 </th>
               </tr>
             </thead>

             <tbody>
               <tr>
                 <td>
                   Time period
                 </td>

                 <td>
                   This query includes only the last 24 hours of usage. To see the usage aggregated over a longer time period, change the `SINCE` clause.
                 </td>
               </tr>

               <tr>
                 <td>
                   Results limited to a maximum number of rows
                 </td>

                 <td>
                   NRQL limits the number of rows returned. If you have more hosts than the maximum number of rows returned and want to get the complete set of hosts, you can narrow your query with more `WHERE` clauses to return subsets of the data (for example `WHERE cloudInstanceId LIKE “%0”`) to divide the data into up to 16 groups, modulo the last character in the AWS instance ID.
                 </td>
               </tr>

               <tr>
                 <td>
                   Docker container IDs
                 </td>

                 <td>
                   A single Docker container ID does not appear in this report. A Docker container ID is reported only at the application instance level of granularity (`usageType='Application'`).

                   For the host (`usageType='Host'`), a count of unique containers is reported, since there are often very many. While choosing just one container ID to report for a host had been informative, now there is more data reported at the appropriate level of granularity.
                 </td>
               </tr>

               <tr>
                 <td>
                   Business rule
                 </td>

                 <td>
                   `Business rule` has been replaced with other attributes. It no longer is used to describe whether the agent needs to be updated.
                 </td>
               </tr>
             </tbody>
           </table>
         </Collapser>

         <Collapser
           id="legacy-host-usage-query"
           title="Legacy host usage report (application listing)"
         >
           This query returns data once provided in the "host usage report": a listing of applications running on each host. Note that while <InlinePopup type="apm" /> usage is counted on an hour-by-hour basis, per-hour usage data is no longer available via the API or UI.

           ```
           FROM NrDailyUsage 
           SELECT min(timestamp) 
           AS 'Earliest reporting day',max(timestamp) 
           AS 'Latest reporting day' 
           FACET apmAppName,hostId,agentHostname,consumingAccountName,consumingAccountId 
           WHERE usageType='Application' 
           AND productLine='APM' 
           SINCE 1 month ago 
           LIMIT 2000
           ```
         </Collapser>
       </CollapserGroup>

       ### Use of Docker and other containers [#containers]

       Some previous New Relic <InlinePopup type="apm" /> agents may miscount containers as hosts, which may lead to over-reporting of host-based usage.

       To fix this calculation for Linux-based containers (including Docker), [upgrade your APM agent](/docs/agents/manage-apm-agents/installation/update-new-relic-agent) to these versions:

    * **Go**: 1.11 or higher
    * **Java**: 3.42.0 or higher
    * **.NET**: 6.19.330.0 or higher
    * **Node.js**: 2.1.0 or higher
    * **PHP**: 7.5.0.199 or higher
    * **Python**: 2.90.0.75 or higher
    * **Ruby**: 4.4.0.336 or higher
  </Collapser>

  <Collapser
    id="browser-usage"
    title="Browser subscription"
  >
    For accounts on our [original pricing model](/docs/accounts/original-accounts-billing/product-pricing/product-based-pricing), this explains how we calculate billable usage for Browser subscription usage. This document also provides available subscription usage attributes and [example NRQL queries](#query-examples) to use in the New Relic UI or with API calls.

    For details about single-page app (SPA) monitoring usage, see [SPA usage](#spa).

    ### Data generation [#data]

    Once per hour, for every monitored application, a New Relic Browser account will generate a `NrUsage` [event](/docs/data-apis/understand-data/new-relic-data-types/#event-data). Each event will summarize the usage for the last hour.

    When querying Browser usage data, use a `productLine` attribute value of `Browser`. For more information, see the [Browser query examples](#query-examples).

    ### Usage calculations [#calculation]

    Monthly subscription usage equals the total number of page views that month across all end-user browsers. AJAX traffic does not count against your daily usage. If your page views are fairly steady over time, you can estimate usage for the current month.

    <Callout variant="tip">
      Only the account **Owner** and **Admins** can view the usage UI. However, anyone in your account can query usage data using the `NrUsage` [event](/docs/data-apis/understand-data/new-relic-data-types/#event-data).
    </Callout>

    To view usage information in the UI:

    1. Go to: **[user menu](/docs/accounts/accounts-billing/general-account-settings/intro-account-settings) > View your usage**.
    2. On the **Browser usage** page, set the time picker to **Last 30 days**.
    3. Multiply the **Avg daily page views** by the number of days in the current month.

       For more information about the usage UI, see [Introduction to New Relic subscription usage data](/docs/accounts/new-relic-account-usage/getting-started-usage/introduction-new-relic-subscription-usage-data).

       ### Table definitions [#details]

       Here are definitions of the column headers displayed in the UI table and CSV files. The columns visible depend on the **Group by** option selected at the top of the page.

       <table>
         <thead>
           <tr>
             <th style={{ width: "200px" }}>
               Header
             </th>

             <th>
               Definition
             </th>
           </tr>
         </thead>

         <tbody>
           <tr>
             <td>
               Account name
             </td>

             <td>
               The name of the account. This can be a standalone account, a [parent account](/docs/accounts/install-new-relic/account-setup/manage-apps-or-users-sub-accounts), or a [customer partnership](/docs/new-relic-partnerships/partner-integration-guide/partner-account-maintenance/partnership-accounts-users-subscriptions).
             </td>
           </tr>

           <tr>
             <td>
               Account ID
             </td>

             <td>
               New Relic [account ID](/docs/accounts-partnerships/accounts/account-setup/account-id).
             </td>
           </tr>

           <tr>
             <td>
               Average daily page views
             </td>

             <td>
               The average daily page views for that account or application.
             </td>
           </tr>

           <tr>
             <td>
               % of total usage
             </td>

             <td>
               The percentage of the total usage used.
             </td>
           </tr>
         </tbody>
       </table>

       ### Query examples

       Here are some examples of NRQL queries you can use with your subscription usage data. You can run NRQL queries and use the resulting charts in dashboards.

       <CollapserGroup>
         <Collapser
           id="page-views-last-month"
           title="Page views for the last complete month"
         >
           This query shows a count of page views from the last complete month:

           ```
           SELECT sum(usage) 
           FROM NrUsage 
           WHERE productLine='Browser' 
           SINCE last month 
           UNTIL this month
           ```
         </Collapser>

         <Collapser
           id="views-week-by-app-account"
           title="Page views for the last week by account"
         >
           This query shows a count of page views from the last week by account:

           ```
           SELECT sum(usage) 
           FROM NrUsage 
           WHERE productLine='Browser' 
           SINCE 7 days ago 
           FACET consumingAccountName
           ```
         </Collapser>

         <Collapser
           id="views-week-by-app-account"
           title="Page views for the past month, by application:"
         >
           This query shows a count of page views from the past month by application

           ```
           SELECT sum(usage) 
           FROM NrUsage 
           WHERE productLine='Browser' 
           SINCE 30 days ago 
           FACET browserAppID
           ```
         </Collapser>

         <Collapser
           id="account-hierarchy-query"
           title="Account hierarchy"
         >
           This query is useful for seeing the account hierarchy (partnership, parent accounts, child accounts):

           ```
           SELECT count(*) 
           FROM NrUsage 
           FACET partnershipName,masterAccountName,masterAccountId,consumingAccountName,consumingAccountId 
           LIMIT 1000 
           SINCE 1 day ago
           ```
         </Collapser>
       </CollapserGroup>

       ### SPA usage [#spa]

       Page views are used by [New Relic Browser](/docs/browser/new-relic-browser/getting-started/new-relic-browser) to determine customer data usage and product pricing. This document defines a page view in the context of New Relic Browser's [SPA monitoring](/docs/browser/single-page-app-monitoring/get-started/welcome-single-page-app-monitoring) and explains why:

    * SPA monitoring **does not** affect Browser data usage

    * SPA monitoring **will** increase Insights data usage

      In New Relic Browser, a **page view** is defined as a complete load or reload of a page, signaled by the firing of the `window.onload` event.

      New Relic's [SPA monitoring](/docs/browser/single-page-app-monitoring/use-spa-data/understand-spa-data-collection) tracks traditional page views, but it also tracks changes in the browser that do not require a page load, such as:

    * Route and hash changes

    * Synchronous and asynchronous JavaScript

    * Dynamic server-side updates to a page

      Route changes are tracked automatically, and by setting up [custom instrumentation](/docs/browser/new-relic-browser/browser-agent-apis/report-data-events-browser-agent-api#spa-api) you can capture almost any type of browser interaction.

      With [New Relic Browser Pro](https://newrelic.com/browser-monitoring/pricing), pricing is based on an account's number of page views per month. If [SPA monitoring](/docs/browser/single-page-app-monitoring/use-spa-data/understand-spa-data-collection) is enabled, browser interactions that do not require a page load are **not** counted as page views for billing purposes. With SPA monitoring, you can track an unlimited number of route changes and other custom browser interactions that don't involve page loads.

      ### Notes on Insights subscription [#insights]

      If you switch from standard Browser monitoring to SPA monitoring, and you also pay for Insights (and don't use only your complementary Insights subscription), your Insights data usage will increase. Because SPA monitoring is a more advanced way to monitor your application, it creates more Insights events than standard monitoring for the following reasons:

    * Page views create not only `PageView` events, but also `BrowserInteraction`, `AjaxRequest`, and `BrowserTiming` events.

    * For the typical SPA-architecture app, there are more route changes than there are standard page loads.

      If you pay for Insights and your current Insights license is not sufficient for the amount of [events](/docs/data-apis/understand-data/new-relic-data-types/#event-data) generated with SPA monitoring, we will notify you when you have exceeded your data usage plan. To remedy this, the following options are available:

    * Upgrade your Insights plan.

    * [Turn off the reporting of some event types](/docs/accounts/accounts/data-management/event-data-retention).

    * Use the [Browser API](/docs/browser/new-relic-browser/browser-agent-apis/report-data-events-browser-agent-api) to manually turn off collection of some events

    * Switch from Browser SPA monitoring back to standard monitoring
  </Collapser>

  <Collapser
    id="mobile-usage"
    title="Mobile subscription"
  >
    For accounts on our [original pricing model](/docs/accounts/original-accounts-billing/product-pricing/product-based-pricing), this explains how we calculate billable usage for Mobile accounts. This document also provides available subscription usage attributes and [example NRQL queries](#query-examples) to use in the New Relic UI or with API calls.

    ## Data generation [#data]

    Once per day, for every monitored application, a New Relic Mobile account will generate an `NrDailyUsage` [event](/docs/data-apis/understand-data/new-relic-data-types/#event-data). Each event summarizes the Mobile usage for the current calendar month, up to and including the last 24 hours.

    To query Mobile usage data, use a `productLine` attribute value of `Mobile`. For more information, see the [Mobile query examples](#query-examples).

    ### Usage calculations [#calculation]

    New Relic Mobile subscription usage is based on the concept of monthly active users (MAUs).

    * For a mobile app monitored by New Relic, MAUs will represent a cumulative count of unique users that used that app during a calendar month. Each unique end-user mobile device counts as a "user" for the purposes of this metric.
    * For accounts that have multiple apps, total account usage will represent a sum of the MAUs for all the apps under that account.

      <Callout variant="tip">
        Only the account **Owner** and **Admins** can view the usage UI. However, anyone in your account can query usage data using the `NrDailyUsage` [event](/docs/data-apis/understand-data/new-relic-data-types/#event-data).
      </Callout>

      To get an estimate of the current month's billable usage:

    1. Go to the [usage UI](/docs/accounts/accounts-billing/new-relic-one-pricing-billing/billing-ui).
    2. On the **Mobile usage** page, set the time picker to **Current month**.

       The Mobile usage chart and table display the maximum MAUs that have been reached over a given time period. It will usually ramp up quickly at the beginning of the month, then grow slowly throughout the month. Because it represents the maximum value found so far, it will never go down. This makes Mobile usage different from other New Relic usage measurements, which are based on summing daily usage.

       For more information about the usage UI, see [Introduction to New Relic subscription usage data](/docs/accounts/new-relic-account-usage/getting-started-usage/introduction-new-relic-subscription-usage-data).

       ### Table definitions [#table]

       Here are definitions of the column headers displayed in the UI table and CSV files. The columns visible depend on the **Group by** option selected at the top of the page.

       <table>
         <thead>
           <tr>
             <th style={{ width: "200px" }}>
               Header
             </th>

             <th>
               Definition
             </th>
           </tr>
         </thead>

         <tbody>
           <tr>
             <td>
               Account name
             </td>

             <td>
               The name of the account. This can be a standalone account, a [parent account](/docs/accounts/install-new-relic/account-setup/manage-apps-or-users-sub-accounts), or a [customer partnership](/docs/new-relic-partnerships/partner-integration-guide/partner-account-maintenance/partnership-accounts-users-subscriptions).
             </td>
           </tr>

           <tr>
             <td>
               Application name
             </td>

             <td>
               The name of the mobile application.
             </td>
           </tr>

           <tr>
             <td>
               Application ID
             </td>

             <td>
               New Relic Mobile [application ID](/docs/using-new-relic/welcome-new-relic/getting-started/glossary#application_id).
             </td>
           </tr>

           <tr>
             <td>
               Maximum MAUs
             </td>

             <td>
               Maximum monthly active users. For the current calendar month, the highest count of active users that has been reached. This number can be compared to the MAUs included in your New Relic subscription.
             </td>
           </tr>

           <tr>
             <td>
               % of total usage
             </td>

             <td>
               The percentage of the total usage that is attributed to the group (account or application, depending on the **Group by** selection).
             </td>
           </tr>
         </tbody>
       </table>

       ### Query examples

       Here are some examples of NRQL queries you can use with your subscription usage data. You can run NRQL queries, and use the resulting charts in dashboards.

       <CollapserGroup>
         <Collapser
           id="users-last-month"
           title="Monthly active users (MAUs) for last complete month"
         >
           A chart of monthly active users for the last complete month:

           ```
           SELECT sum(mobileUniqueUsersPerMonth) 
           FROM NrDailyUsage 
           WHERE usageType='Application' AND productLine='Mobile' 
           SINCE last month UNTIL this month TIMESERIES 1 day
           ```

           The billable MAU number for the month is the maximum number on this chart. You can also get the billable number for a given month directly with this query, using the last day of the month in the `since` clause, for example:

           ```
           SELECT sum(mobileUniqueUsersPerMonth) 
           FROM NrDailyUsage 
           SINCE '2018-05-31' UNTIL '2018-06-01'
           ```
         </Collapser>

         <Collapser
           id="users-last-month-by-app"
           title="Monthly active users (MAUs), by app, for last complete month"
         >
           A count of monthly active users from the last complete month, faceted by application name:

           ```
           SELECT max(mobileUniqueUsersPerMonth) 
           FROM NrDailyUsage 
           WHERE usageType='Application' AND productLine='Mobile' 
           SINCE last month UNTIL this month 
           FACET mobileAppName
           ```

           The sum of these numbers will be the account's billable MAUs for the last complete month.
         </Collapser>

         <Collapser
           id="unique-apps-last-month"
           title="Unique mobile apps in the last month"
         >
           This query shows a count of unique mobile applications over the past month:

           ```
           SELECT uniqueCount(mobileAppName) 
           FROM NrDailyUsage 
           WHERE usageType='Application' AND productLine='Mobile' 
           SINCE 1 month ago
           ```
         </Collapser>

         <Collapser
           id="account-hierarchy-query"
           title="Account hierarchy"
         >
           This query is useful for seeing the account hierarchy (partnership, parent accounts, child accounts):

           ```
           SELECT count(*) 
           FROM NrDailyUsage 
           FACET partnershipName,masterAccountName,masterAccountId,consumingAccountName,consumingAccountId 
           LIMIT 1000 
           SINCE 1 day ago
           ```
         </Collapser>
       </CollapserGroup>
  </Collapser>

  <Collapser
    id="infrastructure-usage"
    title="Infrastructure subscription"
  >
    For accounts on our [original pricing model](/docs/accounts/original-accounts-billing/product-pricing/product-based-pricing), this explains how we calculate billable usage for Infrastructure accounts. This document also provides available subscription usage attributes and [example NRQL queries](#query-examples) to use in the New Relic UI or with API calls.

    ### Data generation [#data]

    Once per day, a New Relic Infrastructure account will generate an `NrDailyUsage` [event](/docs/telemetry-data-platform/ingest-manage-data/understand-data/new-relic-data-types#events-new-relic) for every unique host on which an application instance existed over the last 24 hours. All Infrastructure events have a `productLine` attribute value of `Infrastructure`. For more information, see [query examples](#query-examples).

    ### Usage calculation [#calculation]

    Monthly billable CUs for a host are calculated by the size of the host running Infrastructure (number of CPUs + GBs of RAM) multiplied by the number of hours the host is connected to New Relic during that month. For more on how this is calculated, see [CU-based pricing](/docs/accounts/accounts/subscription-pricing/compute-unit-cu-pricing-vs-host-based-pricing-apm-infrastructure#compute-unit).

    If your usage is fairly steady over time, you can estimate usage for the current month.

    <Callout variant="tip">
      Only the account **Owner** and **Admins** can view the usage UI. However, anyone in your account can query usage data using the `NrDailyUsage` [event](/docs/telemetry-data-platform/ingest-manage-data/understand-data/new-relic-data-types#events-new-relic).
    </Callout>

    To view usage information in the UI:

    1. Go to the [usage UI](/docs/accounts/accounts-billing/new-relic-one-pricing-billing/billing-ui).
    2. On the **Infrastructure usage** page, set the time picker to **Last 30 days**.
    3. Multiply the **Avg daily compute units** by the number of days in the current month.

       For more information about the usage UI, see [Introduction to subscription usage data](/docs/accounts/new-relic-account-usage/getting-started-usage/introduction-new-relic-subscription-usage-data).

       ### Table definitions [#details]

       Here are definitions of the column headers displayed in the UI table and CSV files. The columns displayed depend on the **Group by** option selected at the top of the page.

       <table>
         <thead>
           <tr>
             <th style={{ width: "200px" }}>
               Header
             </th>

             <th>
               Definition
             </th>
           </tr>
         </thead>

         <tbody>
           <tr>
             <td>
               Account name
             </td>

             <td>
               The name of the account. This can be a standalone account, a [parent account](/docs/accounts/install-new-relic/account-setup/manage-apps-or-users-sub-accounts) or a [customer partnership](/docs/new-relic-partnerships/partner-integration-guide/partner-account-maintenance/partnership-accounts-users-subscriptions).
             </td>
           </tr>

           <tr>
             <td>
               Account ID
             </td>

             <td>
               New Relic [account ID](/docs/accounts-partnerships/accounts/account-setup/account-id).
             </td>
           </tr>

           <tr>
             <td>
               Agent hostname
             </td>

             <td>
               The name of the host, as reported by the agent. For more about this value, see [`agentHostname`](/docs/apm-cu-based-usage-attributes-queries#agenthostname).
             </td>
           </tr>

           <tr>
             <td>
               Average daily compute units
             </td>

             <td>
               The average daily [compute units](/docs/accounts/accounts/subscription-pricing/compute-unit-cu-pricing-vs-host-based-pricing-apm-infrastructure#compute-unit) used.
             </td>
           </tr>

           <tr>
             <td>
               % of total usage
             </td>

             <td>
               The percentage of the total usage used.
             </td>
           </tr>
         </tbody>
       </table>

       ### Query examples

       Here are some examples of NRQL queries you can use with your Infrastructure subscription usage data. You can run NRQL queries, and use the resulting charts in dashboards.

       For general information about how to use NRQL queries to get focused usage data, see [Intro to usage data](/docs/introduction-new-relic-subscription-usage-data).

       <CollapserGroup>
         <Collapser
           id="cus-month-query"
           title="Compute units for last month"
         >
           This query produces a count of the CUs used over the last month:

           ```
           SELECT sum(infrastructureComputeUnits) 
           FROM NrDailyUsage 
           WHERE productLine='Infrastructure' 
           AND usageType='Host' 
           SINCE last month 
           UNTIL this month
           ```
         </Collapser>

         <Collapser
           id="host-report-query"
           title="Detailed host report (reproducing old usage report)"
         >
           This query reproduces as closely as possible the report you would have gotten by downloading the CSV from the previously available Infrastructure subscription usage UI:

           ```
           FROM NrDailyUsage 
           SELECT consumingAccountId 
           AS 'Account ID',agentHostname,cloudProvider 
           AS 'Host provider', cloudInstanceType 
           AS 'Instance type',infrastructureBillingInstanceSize 
           AS 'Instance size',infrastructureHoursUsed 
           AS 'Hours used',infrastructureComputeUnits 
           AS 'Usage (CU)', infrastructureCloudDerivedMemoryBytes/(1024*1024*1024) 
           AS 'Total RAM',infrastructureCloudDerivedProcessorCount 
           AS 'Logical processors',infrastructureAgentMemoryBytes/(1024*1024*1024) 
           AS 'Total RAM',infrastructureAgentProcessorCount 
           AS 'Logical processors',infrastructureComputeUnitRule 
           AS 'Business rule',missingCpuData, missingRamData, instanceSizeCapped,cloudZone,cloudInstanceId 
           WHERE productLine='Infrastructure' 
           AND usageType='Host' 
           SINCE 1 day ago 
           LIMIT 1000
           ```

           This NRQL query is different than the legacy usage report:

           <table>
             <thead>
               <tr>
                 <th style={{ width: "200px" }}>
                   Detailed host query
                 </th>

                 <th>
                   Comments
                 </th>
               </tr>
             </thead>

             <tbody>
               <tr>
                 <td>
                   Time period
                 </td>

                 <td>
                   This query includes only the last day of usage. To see the usage aggregated over a longer time period, change the SINCE clause.
                 </td>
               </tr>

               <tr>
                 <td>
                   Results limited to 1000
                 </td>

                 <td>
                   NRQL limits the results to 1000. If you have more than 1000 hosts and want to get the complete set of hosts, you can narrow your query with more `WHERE` clauses to return subsets of the data (for example, `WHERE agentHostname LIKE ...` to divide the data into groups).
                 </td>
               </tr>

               <tr>
                 <td>
                   Business rule
                 </td>

                 <td>
                   `Business rule` has been replaced with two attributes:

                   * `infrastructureComputeUnitRule` defines how the size of the host was calculated, depending on what data was available from the agent. It no longer describes whether the agent needs to be updated to provide more accurate host naming in a container environment (`update_agent_for_container_environment`).
                   * `missingCpuData`, `missingRamData`, and `instanceSizeCapped` are now boolean flags describing what the value `missing_data` means when it is present in the `infrastructureComputeUnitRule` attribute.
                 </td>
               </tr>
             </tbody>
           </table>
         </Collapser>

         <Collapser
           id="account-hierarchy-query"
           title="Account hierarchy"
         >
           This query is useful for seeing the account hierarchy (partnership, parent accounts, child accounts).

           ```
           SELECT count(*) 
           FROM NrDailyUsage 
           FACET partnershipName,masterAccountName,masterAccountId,consumingAccountName,consumingAccountId 
           LIMIT 1000 
           SINCE 1 day ago
           ```
         </Collapser>
       </CollapserGroup>
  </Collapser>

  <Collapser
    id="insights-usage"
    title="Insights subscription"
  >
    For accounts on our [original pricing model](/docs/accounts/original-accounts-billing/product-pricing/product-based-pricing), this explains:

    * How New Relic calculates billable usage for an [Insights Pro subscription](/docs/insights/use-insights-ui/manage-account-data/extend-event-data-retention#insights-pro).
    * Available subscription usage attributes and [example NRQL queries](#query-examples) to use in the New Relic UI or in API calls.

      ### Data generation [#data]

      Once per day, an account with an Insights Pro subscription will generate an `NrDailyUsage` [event](/docs/telemetry-data-platform/ingest-manage-data/understand-data/new-relic-data-types#events-new-relic) for every [event namespace](#namespace). A `NrDailyUsage` event includes a count of the events under that namespace.

      To view the attributes for this event, see the `NrDailyUsage` [entry in the data dictionary](/attribute-dictionary/?event=NrDailyUsage).

      ### Usage calculations [#calculation]

      <Callout variant="tip">
        Only the account **Owner** and **Admins** can view the usage UI. However, anyone in your account can query usage data using the `NrDailyUsage` [event](/docs/telemetry-data-platform/ingest-manage-data/understand-data/new-relic-data-types#events-new-relic).
      </Callout>

      To get an estimate of the current month's billable usage:

    1. Go to the [usage UI](/docs/accounts/accounts-billing/new-relic-one-pricing-billing/billing-ui).
    2. On the **Insights usage** page, set the time picker to **Current month**.

       For more information about the usage UI, see [Introduction to subscription usage data](/docs/accounts/new-relic-account-usage/getting-started-usage/introduction-new-relic-subscription-usage-data).

       The Insights usage UI only displays **paid events**: these are events that count towards an [Insights Pro subscription](/docs/insights/use-insights-ui/manage-account-data/extend-event-data-retention#insights-pro). It does **not** display events that are included free as part of other New Relic product subscriptions. However, you can also [query the product included events](#query-examples).

       How long specific events are retained will depend on each event type's [data retention period](/docs/insights/use-insights-ui/manage-account-data/insights-data-retention). For a list of the applicable event types, see [Event namespaces](#namespace).

       ### Table definitions [#details]

       Here are definitions of the column headers displayed in the UI table and CSV files. The columns you see depend on the **Group by** option you select in the UI.

       <table>
         <thead>
           <tr>
             <th style={{ width: "200px" }}>
               Header
             </th>

             <th>
               Definition
             </th>
           </tr>
         </thead>

         <tbody>
           <tr>
             <td>
               Account name
             </td>

             <td>
               The name of the account. This can be a standalone account, a [parent account](/docs/accounts/install-new-relic/account-setup/manage-apps-or-users-sub-accounts), or a [partnership](/docs/new-relic-partnerships/partner-integration-guide/partner-account-maintenance/partnership-accounts-users-subscriptions).
             </td>
           </tr>

           <tr>
             <td>
               Account ID
             </td>

             <td>
               [New Relic account ID](/docs/accounts/install-new-relic/account-setup/account-id).
             </td>
           </tr>

           <tr>
             <td>
               Event namespace
             </td>

             <td>
               The category of event governed by Insights subscription. For example: `APM` or `Mobile error`. For more information, see the list of [event namespaces](/docs/accounts/new-relic-account-usage/insights-usage/insights-usage-attributes-queries#namespace).
             </td>
           </tr>

           <tr>
             <td>
               Stored paid events
             </td>

             <td>
               The number of events stored that count towards an [Insights Pro subscription](/docs/insights/use-insights-ui/manage-account-data/extend-event-data-retention#insights-pro). Events included as part of other New Relic product subscriptions are not counted.
             </td>
           </tr>

           <tr>
             <td>
               % of total usage
             </td>

             <td>
               The percentage of the total usage used.
             </td>
           </tr>
         </tbody>
       </table>

       ### Event namespaces (types) [#namespace]

       An [Insights Pro subscription](/docs/insights/use-insights-ui/manage-account-data/extend-event-data-retention#insights-pro) governs the data retention of certain types of events. An event's namespace (indicated by the [`insightsEventNamespace`](#insightsEventNamespace) attribute) corresponds to one or more event types that share a single [data retention](/docs/using-new-relic/welcome-new-relic/getting-started/data-retention-components) policy.

       <table>
         <thead>
           <tr>
             <th style={{ width: "250px" }}>
               Event namespace in UI
             </th>

             <th style={{ width: "250px" }}>
               Event namespace when queried
             </th>

             <th>
               Event types
             </th>
           </tr>
         </thead>

         <tbody>
           <tr>
             <td>
               APM Transactions
             </td>

             <td>
               `APM`
             </td>

             <td>
               `Transaction`
             </td>
           </tr>

           <tr>
             <td>
               APM Errors
             </td>

             <td>
               `APM Errors`
             </td>

             <td>
               `TransactionError`
             </td>
           </tr>

           <tr>
             <td>
               Browser
             </td>

             <td>
               `Browser`
             </td>

             <td>
               `Ajax`

               `PageAction`

               `PageView`
             </td>
           </tr>

           <tr>
             <td>
               Page view timing
             </td>

             <td>
               `PcvPerf`
             </td>

             <td>
               `PageViewTiming`
             </td>
           </tr>

           <tr>
             <td>
               SPA monitoring
             </td>

             <td>
               `Browser:EventLog`
             </td>

             <td>
               `AjaxRequest`

               `BrowserInteraction`

               `BrowserTiming`
             </td>
           </tr>

           <tr>
             <td>
               JS errors
             </td>

             <td>
               `Browser:JSErrors`
             </td>

             <td>
               `JavaScriptError`
             </td>
           </tr>

           <tr>
             <td>
               Custom:\*
             </td>

             <td>
               `Custom:*`
             </td>

             <td>
               Event types stored using custom filters created by New Relic. Not applicable for most customers.
             </td>
           </tr>

           <tr>
             <td>
               Custom events
             </td>

             <td>
               `Default`
             </td>

             <td>
               [Custom event types](/docs/insights/insights-data-sources/custom-data/send-custom-data-insights) that you create using New Relic agents or the Event API
             </td>
           </tr>

           <tr>
             <td>
               [Crash event trails](/docs/mobile-monitoring/new-relic-mobile/maintenance/add-custom-data-new-relic-mobile#custom-breadcrumbs)
             </td>

             <td>
               `Breadcrumb`
             </td>

             <td>
               `MobileBreadcrumb`
             </td>
           </tr>

           <tr>
             <td>
               Mobile crash
             </td>

             <td>
               `Mobile Crash`
             </td>

             <td>
               `MobileCrash`
             </td>
           </tr>

           <tr>
             <td>
               Mobile error (for [HTTP requests](/docs/mobile-monitoring/mobile-monitoring-ui/network-pages/http-requests-page) and [HTTP errors](/docs/mobile-monitoring/mobile-monitoring-ui/network-pages/http-errors-network-failure-analysis) features)
             </td>

             <td>
               `Mobile Error`
             </td>

             <td>
               `MobileRequest`

               `MobileRequestError`
             </td>
           </tr>

           <tr id="partnershipId">
             <td>
               Mobile exception
             </td>

             <td>
               `Mobile Exception`
             </td>

             <td>
               `MobileHandledException`
             </td>
           </tr>

           <tr id="partnershipName">
             <td>
               Mobile general
             </td>

             <td>
               `Mobile General`
             </td>

             <td>
               `Mobile`
             </td>
           </tr>

           <tr id="productLine">
             <td>
               Mobile session
             </td>

             <td>
               `Mobile Session`
             </td>

             <td>
               `Mobile Session`
             </td>
           </tr>
         </tbody>
       </table>

       ### Query examples

       To get the most out of your Insights usage data, you can:

    * Run queries of this data and create custom charts and dashboards.
    * Use this data programmatically, using one of our APIs.

      For general information about how to use NRQL queries, see [Introduction to usage data](/docs/introduction-new-relic-subscription-usage-data).

      <Callout variant="tip">
        Insights writes usage events [once per day](#data). That is why these queries use `since 24 hours ago` or `timeseries 1 day`.
      </Callout>

      Here are some NRQL query examples about usage.

      <CollapserGroup>
        <Collapser
          id="example-account-events"
          title="Stored event usage for last month"
        >
          This query will tell you the "billable" number of Insights-governed events for all accounts (parent accounts and child accounts) in the hierarchy under the account where the query is run, for the last calendar month. This number is calculated as the daily average number of stored events.

          ```
          SELECT rate(sum(insightsTotalEventCount)-sum(insightsIncludedEventCount), 1 day) 
          AS 'Paid events' 
          FROM NrDailyUsage 
          SINCE last month 
          UNTIL this month
          ```
        </Collapser>

        <Collapser
          id="example-single-account"
          title="Current Insights usage for an account"
        >
          This query will tell you how many Insights-governed events are currently stored for a specific account, broken down by [event namespace](#insightsEventNamespace). Be sure to replace YOUR_ACCOUNT_ID in these queries with your [account ID](/docs/accounts/install-new-relic/account-setup/account-id).

          ```
          SELECT latest(insightsTotalEventCount) 
          FROM NrDailyUsage 
          SINCE 24 hours ago 
          WHERE consumingAccountId = YOUR_ACCOUNT_ID 
          FACET insightsEventNamespace
          ```

          This query will tell you the total current Insights-governed event storage for a specific account, for all event namespaces:

          ```
          SELECT sum(insightsTotalEventCount) 
          FROM NrDailyUsage 
          SINCE 24 hours ago 
          WHERE consumingAccountId = YOUR_ACCOUNT_ID
          ```
        </Collapser>

        <Collapser
          id="example-multiple-accounts"
          title="Current Insights usage for multiple accounts"
        >
          This query will tell you how many Insights-governed events are currently stored for a list of accounts by [event namespace](#insightsEventNamespace). Note that you will need to replace LIST_OF_ACCOUNT_IDs in the query with a list of [account IDs](/docs/accounts/install-new-relic/account-setup/account-id).

          ```
          SELECT latest(insightsTotalEventCount) 
          FROM NrDailyUsage SINCE 24 hours ago 
          WHERE consumingAccountId 
          IN (LIST_OF_ACCOUNT_IDs) 
          FACET consumingAccountId, insightsEventNamespace 
          LIMIT 100
          ```

          You may need to increase the value in the `limit` clause to see all of the facets in this query.
        </Collapser>

        <Collapser
          id="example-product"
          title="Events included with other New Relic products"
        >
          This query will tell you how many Insights-governed events that are included with other New Relic product subscriptions were stored for an account, by the product that created them, over the past seven days. Note that you will need to replace YOUR_ACCOUNT_ID in the query with your [account ID](/docs/accounts/install-new-relic/account-setup/account-id).

          ```
          SELECT sum(insightsIncludedEventCount) 
          FROM NrDailyUsage 
          SINCE 7 days ago 
          WHERE consumingAccountId = YOUR_ACCOUNT_ID 
          FACET insightsNrProduct 
          TIMESERIES 1 day
          ```
        </Collapser>

        <Collapser
          id="example-subaccount"
          title="Retention periods by child account and event namespace"
        >
          This query will tell you the total, paid, and included retention periods for the different event categories associated with the various New Relic products (such as <InlinePopup type="apm" /> `Transaction` events), for each child account under the specified parent account ID. When creating your own NRQL queries, be sure to replace YOUR_ACCOUNT_ID with your specific [account ID](/docs/accounts/install-new-relic/account-setup/account-id).

          ```
          SELECT latest(insightsTotalRetentionInHours)/24 
          AS 'Total retention, days', latest(insightsIncludedRetentionInHours)/24 
          AS 'Included retention, days', (latest(insightsTotalRetentionInHours) - 
          latest(insightsIncludedRetentionInHours))/24 
          AS 'Paid retention, days' 
          FROM NrDailyUsage where productLine='Insights' 
          AND masterAccountId = YOUR_ACCOUNT_ID 
          FACET consumingAccountId,consumingAccountName,insightsEventNamespace 
          SINCE 1 day ago
          ```
        </Collapser>

        <Collapser
          id="example-pro-subaccount"
          title="Paid Insights usage by child account"
        >
          This query will tell you how many events under an Insights Pro subscription are being consumed by each child account for the specified parent account ID over the past seven days. When creating your own NRQL queries, be sure to replace YOUR_MASTER_ACCOUNT_ID in the query with your specific parent [account ID](/docs/accounts/install-new-relic/account-setup/account-id).

          ```
          SELECT sum(insightsTotalEventCount)-sum(insightsIncludedEventCount) 
          AS 'Paid events' from NrDailyUsage 
          SINCE 7 days ago 
          WHERE masterAccountId = YOUR_MASTER_ACCOUNT_ID 
          FACET consumingAccountId, consumingAccountName 
          TIMESERIES 1 day
          ```
        </Collapser>

        <Collapser
          id="account-hierarchy-query"
          title="Account hierarchy"
        >
          This query is useful for seeing the account hierarchy (partnership, parent accounts, child accounts).

          ```
          SELECT count(*) 
          FROM NrDailyUsage 
          FACET partnershipName,masterAccountName,masterAccountId,
          consumingAccountName,consumingAccountId 
          LIMIT 1000 
          SINCE 1 day ago
          ```
        </Collapser>
      </CollapserGroup>
  </Collapser>

  <Collapser
    id="synthetics-usage"
    title="Synthetics subscription"
  >
    For accounts on our [original pricing model](/docs/accounts/original-accounts-billing/product-pricing/product-based-pricing), this explains how we calculate billable usage for accounts using synthetic monitoring. This document also provides available subscription usage attributes and [example NRQL queries](#query-examples) to use in the New Relic UI or with API calls.

    ### Data generation [#data]

    A synthetic monitoring subscription level is based on the number of non-[ping](/docs/synthetics-subscription-usage-attributes-queries#label) monitor checks used during a calendar month. Once per day, every synthetic monitor location will generate an `NrDailyUsage` [event](/docs/telemetry-data-platform/ingest-manage-data/understand-data/new-relic-data-types#events-new-relic) for every [monitor type](#type). This event will summarize synthetic monitoring usage for that location and monitor type over the last 24 hours.

    All synthetics usage events have a `productLine` attribute value of `Synthetics`. For more information, see the synthetics [query examples](#query-examples).

    ### Usage calculations [#calculation]

    A synthetics subscription level is based on the number of non-[ping](/docs/synthetics-subscription-usage-attributes-queries#label) monitor checks used during a calendar month. If your monitor checks are fairly steady over time, you can estimate the current month's eventual usage.

    <Callout variant="tip">
      Only the account **Owner** and **Admins** can view the usage UI. However, anyone in your account can query usage data using the `NrDailyUsage` [event](/docs/telemetry-data-platform/ingest-manage-data/understand-data/new-relic-data-types#events-new-relic).
    </Callout>

    To view usage information in the UI:

    1. Go to the [usage UI](/docs/accounts/accounts-billing/new-relic-one-pricing-billing/billing-ui).
    2. On the **Synthetics usage** page, set the time picker to **Last 30 days**.
    3. Multiply the **Avg daily paid checks** by the number of days in the current month.

       The Synthetics usage chart displays the daily count of monitor checks. The table value **Avg daily paid checks** displays the total number of monitor checks for the selected time period, divided by the number of days.

       For more information about the usage UI, see [Introduction to subscription usage data](/docs/accounts/new-relic-account-usage/getting-started-usage/introduction-new-relic-subscription-usage-data).

       ### Query examples

       Here are some examples of NRQL queries you can use with your synthetic monitoring subscription usage data. You can run NRQL queries, and use the resulting charts in dashboards.

       <CollapserGroup>
         <Collapser
           id="billable-checks-last-month"
           title="Billable checks for the last month"
         >
           This query produces a chart of the billable monitor checks over the last month. Remember that a `syntheticsType` of `SIMPLE` refers to a [ping monitor](/docs/synthetics/new-relic-synthetics/getting-started/types-synthetics-monitors#types-monitors), which doesn't count towards paid usage.

           ```
           FROM NrDailyUsage 
           SELECT sum(syntheticsFailedCheckCount) + sum(syntheticsSuccessCheckCount) 
           AS 'Paid checks' where productLine='Synthetics' 
           AND syntheticsType != 'SIMPLE' 
           SINCE last month 
           UNTIL this month
           ```
         </Collapser>

         <Collapser
           id="account-hierarchy-query"
           title="Account hierarchy"
         >
           This is a non-product-specific query useful for seeing your account hierarchy (partnership, parent accounts, child accounts).

           ```
           SELECT count(*) 
           FROM NrDailyUsage 
           FACET partnershipName,masterAccountName,masterAccountId,consumingAccountName,consumingAccountId 
           LIMIT 1000 
           SINCE 1 day ago
           ```
         </Collapser>
       </CollapserGroup>
  </Collapser>
</CollapserGroup>
