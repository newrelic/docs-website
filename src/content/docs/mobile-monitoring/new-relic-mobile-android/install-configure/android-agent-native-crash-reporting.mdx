---
title: Android agent crash reporting
tags:
  - Mobile monitoring
  - New Relic Mobile Android
  - Install configure
metaDescription: 'For Android apps monitored by New Relic Mobile, use Proguard to have crash details processed and de-obfuscated automatically.'
redirects:
  - /docs/mobile-monitoring/new-relic-mobile/getting-started/android-agent-crash-reporting
  - /docs/mobile-monitoring/new-relic-mobile/getting-started/android-agent-native-crash-reporting
---

# Android Native Crash Reporting [Incubating]

Starting with [New Relic Android agent version 6.7.0](https://docs.newrelic.com/docs/release-notes/mobile-release-notes/android-release-notes/android-670), to help track and diagnose native crashes, reporting and analysis has been enhanced to include signal violations and other faults that occur at the native code level during runtime.
When an Android application crashes, the agent uploads a crash report to the New Relic [collector](/docs/accounts-partnerships/education/getting-started-new-relic/glossary#collector). The crash details will then be processed and symbolicated automatically [TBA].

You can view detailed information about crashes in New Relic Mobile's [**Crash analysis** UI](/docs/mobile-monitoring/mobile-monitoring-ui/crashes/crash-analysis-group-filter-your-crashes), or receive crash notifications by [email](/docs/mobile-monitoring/mobile-monitoring-ui/crashes/receive-crash-notifications-email). You can also explore the crash data deeper with [New Relic Insights](/docs/mobile-monitoring/mobile-monitoring-ui/crashes/crash-analysis-group-filter-your-crashes#insights), or [integrate with ticketing systems](/docs/mobile-monitoring/mobile-monitoring-ui/crashes/file-tickets-mobile-app-crashes) for further investigation.


These enhancements include:

* Native crash reports - signal violations and other crashes reported by the native runtime
* Native runtime exceptions - any unhandled C++ exceptions thrown by the app during runtime
* Application Not Responding (ANR) conditions

The Android agent for New Relic Mobile supports native symbolication of stripped native reports. [TBA]

If native symbols for an app are not present, the stack trace produced by a crash consists only of these obfuscated labels, which are not human-readable.

Follow the SDK installation or upgrade instructions to [configure Native Reporting](/docs/mobile-monitoring/new-relic-mobile-android/install-configure/configure-native-android-apps) and enable native crash reporting. Be sure to create the `newrelic.properties` file containing your application token.


### Configuration
Configuration requires adding an additional dependency in the build.gradle file of the app project(s) that start the new Relic agent:
```
dependencies {
    implementation 'com.newrelic.agent.android:agent-ndk:<ndk version>'
}
```
Android native agent artifacts can be found on [MavenCentral](https://search.maven.org/search?q=g:com.newrelic.agent.android%20AND%20a:agent-ndk), and follow semantic versioning conventions. Refer to [Android agent release notes](https://docs.newrelic.com/docs/release-notes/mobile-release-notes/android-release-notes/) for full details on releases and downloads.

### Startup
In app code where the New Relic agent is added (usually MainActivity), enable the NativeReporting feature flag prior to starting the agent:
```
NewRelic.enableFeature(FeatureFlag.NativeReporting);
NewRelic
      .withApplicationToken("<appToken>")
      .start(this.getApplication());
```

## Upload the app's native sybols [#upload-native-symbols]

The Android agent for New Relic Mobile supports symbolication of stripped native apps and libraries.

Native libraries ususally strip debugging symbols from the binary image prior to release. If a binary is stripped of symbols, the stack trace produced by a crash consists only of these obfuscated labels, which are not human-readable.

Follow the SDK installation or upgrade instructions to [configure ProGuard or DexGuard](/docs/mobile-monitoring/new-relic-mobile-android/install-configure/configure-native-android-apps) and enable crash reporting. Be sure to create the `newrelic.properties` file containing your application token.

After you create a `newrelic.properties` file containing your New Relic app token in your project, native symbols will be uploaded automatically after each build.

**Exception:**

[TBA]

<Callout variant="important">
</Callout>

## Disable native crash reporting [#disable]

If you want to use another crash reporting tool, you can disable New Relic Mobile's native crash reporting by calling `NewRelic.disableFeature{FeatureFlag/NativeReporting)` prior to agent initialization. For example:

```
NewRelic.disableFeature(FeatureFlag.NativeReporting);
NewRelic
      .withApplicationToken("<appToken>")
      .start(this.getApplication());
```

## Debug the crash reporter [#debug]

[TBA]
Crash reporting for Android is designed to work with other crash reporting frameworks by chaining the uncaught exception handler if it is already registered.

Every time New Relic catches an exception, it is [logged to `DEBUG` level](/docs/mobile-monitoring/new-relic-mobile-android/api-guides/android-agent-configuration-feature-flags#logging). For example:

```
A crash has been detected in <className>.
```

If New Relic catches an exception but crash reporting has been disabled for any reason, this message is logged:

```
A crash has been detected but crash reporting is disabled.
```

If you do not see crash reports in the New Relic Mobile user interface, check the debug logs for messages like this.

## Manually upload a symbol file [#manual-native]

In some unusual circumstances, it may not be possible to automatically upload the native symbol files. This is often due to incorrectly creating a `newrelic.properties` file containing your application token. This will result in build errors or warnings with detailed log messages.

To manually upload native symbol files:

[TBA]
1. Find the native symbol file(s) in the project's build directory For example, the file is located in the `<PROJECT_ROOT>/app/build/outputs/mapping/<BUILD_VARIANT>` directory for projects that use Android Studio. Generally, a `release` variant is used when building the final version of the application. The following command is useful for finding map files:

   ```
   find <var><project_root></var> -name "*.sym" -exec zip -u ><project_root>symbols.zip {} \;
   ```
2. Using a command terminal, upload the native symbols file:

   * For a **US account**:

     ```
     curl -v -F upload=@"<<var>symbols.zip></var>" -H "X-APP-LICENSE-KEY:<var><APPLICATION_TOKEN></var>" https://mobile-symbol-upload.newrelic.com/symbol
     ```

   * For a **EU account**:

     ```
     curl -v -F upload=@"<<var>symbols.zip></var>" -H "X-APP-LICENSE-KEY:<var><APPLICATION_TOKEN></var>" https://mobile-symbol-upload.eu.newrelic.com/symbol
     ```

   Replace the following in your command:

   * `<symbols.zip>` is the full path to an archive contains all native symbols found in the app's build directories.
   * `<APPLICATION_TOKEN>` is your New Relic Mobile [application token](/docs/mobile-monitoring/new-relic-mobile/maintenance/viewing-your-application-token).
