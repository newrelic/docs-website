---
title: iOS agent configuration and feature flags
contentType: page
template: basicDoc
topics:
  - Mobile monitoring
  - New Relic Mobile iOS
  - Configuration
japaneseVersion: ''
---

New Relic Mobile's iOS agent provides configuration settings to change the default behavior of the agent. If used, implement these flags just before calling:

* Objective-C: `+[NewRelic startWithApplicationToken:]`
* Swift: `NewRelic.start(withApplicationToken:)`

<Callout variant="tip">
  For an explanation of Mobile custom data types, see [Add custom data to New Relic Mobile](/docs/mobile-monitoring/new-relic-mobile/maintenance/add-custom-data-new-relic-mobile).
</Callout>

## Enable or disable feature flags

To configure feature flags, use the following method defined in `NewRelic.h:`

<Table>
  <thead>
    <tr>
      <th width={150}>
        iOS language
      </th>

      <th>
        Procedure
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td id="enable-obj-c">
        Objective-C
      </td>

      <td>
        In Objective-C, these features are bitmasked, so you can use a `|` to enable or disable multiple features at the same time.

        Enable a feature flag:

        ```
        +[NewRelic enableFeatures:(NRMAFeatureFlags)flags];
        ```

        Disable a feature flag:

        ```
        +[NewRelic disableFeatures:(NRMAFeatureFlags)flags];
        ```

        Here is an example where:

        * Interaction tracing and experimental networking instrumentation are enabled.
        * `NSURLSession` instrumentation and crash reporting are disabled.

        ```
        [NewRelic enableFeatures:NRFeatureFlag_SwiftInteractionTracing | NRFeatureFlag_ExperimentalNetworkingInstrumentation];
        [NewRelic disableFeatures:NRFeatureFlag_NSURLSessionInstrumentation | NRFeatureFlag_CrashReporting]; 
        [NewRelic startWithApplicationToken:...];
        ```
      </td>
    </tr>

    <tr>
      <td>
        Swift
      </td>

      <td>
        Enable a feature flag:

        ```
        NewRelic.enableFeatures(NRMAFeatureFlags.[NRMAFeatureFlag])
        ```

        Disable a feature flag:

        ```
        NewRelic.disableFeatures(NRMAFeatureFlags.[NRMAFeatureFlag])
        ```

        Example to disable interaction tracing:

        ```
        NewRelic.disableFeatures(NRMAFeatureFlags.NRFeatureFlag_DefaultInteractions)
        ```
      </td>
    </tr>
  </tbody>
</Table>

## Crash and error reporting feature flag

If used, be sure to call the feature flag before the New Relic iOS agent start call.

<CollapserGroup>
  <Collapser
    id="crashReporting"
    title="NRFeatureFlag_CrashReporting"
  >
    Enable (default) or disable crash reporting, which appears on New Relic Mobile's [**Crash analysis** page](/docs/mobile-monitoring/mobile-monitoring-ui/crashes/crash-analysis-group-filter-your-crashes).

    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </Table>
  </Collapser>

  <Collapser
    id="handledexceptions"
    title="NRFeatureFlag_HandledExceptionEvents"
  >
    Globally enable (default) or disable recording handled exceptions events, which appear on the [Handled exception page](https://docs.newrelic.com/docs/mobile-monitoring/mobile-monitoring-ui/crashes/handled-exceptions-analyze-trends-prevent-crashes).

    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </Table>
  </Collapser>
</CollapserGroup>

## Interactions feature flags

If used, be sure to call the feature flag before the New Relic iOS agent start call.

<CollapserGroup>
  <Collapser
    id="defaultInteractions"
    title="NRFeatureFlag_DefaultInteractions"
  >
    Enable (default) or disable interaction tracing only for default instrumented classes and methods. Custom interactions will be reported. The traces will appear on the [Mobile **Interactions** page](/docs/mobile-monitoring/mobile-monitoring-ui/mobile-app-pages/interactions-page).

    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </Table>
  </Collapser>

  <Collapser
    id="interactionTracing"
    title="NRFeatureFlag_InteractionTracing"
  >
    Globally enable (default) or disable interaction traces, which appear on the [Mobile **Interactions** page](/docs/mobile-monitoring/mobile-monitoring-ui/mobile-app-pages/interactions-page).

    Interaction tracing will be disabled after the agent has started. Interactions for any activity or methods executed prior to starting the agent may still appear on the **Interactions** page.

    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </Table>
  </Collapser>

  <Collapser
    id="swiftInteractionTracing"
    title="NRFeatureFlag_SwiftInteractionTracing"
  >
    <Callout variant="caution">
      Before enabling this feature, see [Enable Swift interaction traces](/docs/mobile-monitoring/new-relic-mobile-ios/install-configure/enable-swift-interaction-traces). If proper steps are not taken, enabling this feature may cause instability.
    </Callout>

    Enable or disable (default) interaction tracing for Swift code. The traces appear on the [Mobile **Interactions** page](/docs/mobile-monitoring/mobile-monitoring-ui/mobile-app-pages/interactions-page). This feature will always be disabled if [`NRFeatureFlag_InteractionTracing`](#interactionTracing) is disabled.

    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </Table>
  </Collapser>
</CollapserGroup>

## Networking feature flags

If used, be sure to call the feature flag before the New Relic iOS agent start call.

<CollapserGroup>
  <Collapser
    id="experimentalNetworking"
    title="NRFeatureFlag_ExperimentalNetworkingInstrumentation"
  >
    <Callout variant="caution">
      Enabling this feature flag call may decrease the stability of applications. Avoid using unless instructed by New Relic.
    </Callout>

    Enable or disable (default) experimental networking instrumentation. This forces all `NSURLConnection` network requests through the `NRMAURProtocol`.

    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>
      </tbody>
    </Table>
  </Collapser>

  <Collapser
    id="nsurlSession"
    title="NRFeatureFlag_NSURLSessionInstrumentation"
  >
    Enable (default) or disable networking instrumentation for `NSURLSession`. These URL traces are sent to the [HTTP Requests](/docs/mobile-monitoring/mobile-monitoring-ui/network-pages/http-requests-page) page.

    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </Table>
  </Collapser>

  <Collapser
    id="networkRequest"
    title="NRFeatureFlag_NetworkRequestEvents"
  >
    Enable or disable (default) networking instrumentation. This sends the HTTP response data to Insights as [MobileRequest](/docs/insights/insights-data-sources/default-data/mobile-default-event-attributes-insights#mobilerequest-attributes) events.

    Available for iOS Agent version 5.14.0 and higher

    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true` - Enabled by default as of 6.0.0
          </td>
        </tr>
      </tbody>
    </Table>
  </Collapser>

  <Collapser
    id="requestError"
    title="NRFeatureFlag_RequestErrorEvents"
  >
    Enable (default) or disable HTTP request error event generation of instrumented network calls that result in an error or failure. These events are sent to Insights as [MobileRequestError](/docs/insights/insights-data-sources/default-data/mobile-default-event-attributes-insights#mobilerequesterror-attributes) events.

    Available for iOS Agent version 5.11.0 and higher

    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </Table>
  </Collapser>

  <Collapser
    id="httpResponseBodyCapture"
    title="NRFeatureFlag_HttpResponseBodyCapture"
  >
    Enable or disable capture of HTTP response bodies for HTTP error traces, and MobileRequestError events.

    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>
      </tbody>
    </Table>
  </Collapser>
</CollapserGroup>
