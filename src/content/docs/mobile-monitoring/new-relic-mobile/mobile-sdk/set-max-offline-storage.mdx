---
title: Set max offline storage size
type: apiDoc
shortDescription: 'Sets the maximum size that can be stored in offline storage.'
tags:
  - Mobile monitoring
  - Mobile SDK API
  - Custom instrumentation
metaDescription: Mobile app monitoring API used to set the maximum size of offline storage.
freshnessValidatedDate: 2024-02-28
---

Sets the maximum size of total data that can be stored for offline storage.

By default, mobile monitoring can collect a maximum of 100 megaBytes of offline storage. When a data payload fails to send because the device doesn't have an internet connection, it can be stored in the file system until an internet connection has been made. After a typical harvest payload has been successfully sent, all offline data is sent to New Relic and cleared from storage.

This method controls the maximum amount of offline storage that can be stored in the file system. When the size limit is reached, the New Relic mobile agent will discard the new payloads that couldn't be stored. This method lets you override the maximum size of that offline storage.

<Tabs>
  <TabsBar>
    <TabsBarItem id="android">
      Android
    </TabsBarItem>

    <TabsBarItem id="ios">
      iOS
    </TabsBarItem>

    <TabsBarItem id="capacitor">
      Capacitor
    </TabsBarItem>

    <TabsBarItem id="cordova">
      Cordova
    </TabsBarItem>

    <TabsBarItem id="maui">
      .NET MAUI
    </TabsBarItem>

    <TabsBarItem id="flutter">
      Flutter
    </TabsBarItem>

    <TabsBarItem id="react">
      React Native
    </TabsBarItem>

    <TabsBarItem id="unity">
      Unity
    </TabsBarItem>

    <TabsBarItem id="xamarin">
      Xamarin
    </TabsBarItem>
  </TabsBar>

  <TabsPages>
    <TabsPageItem id="android">
      <Callout variant="important">
        Offline storage is disabled by default. To enable it, add the following feature flag:

        ```java
        NewRelic.disableFeature(FeatureFlag.OfflineStorage)
        ```

        For details on adding feature flags, see [Configure mobile monitoring settings](/docs/mobile-monitoring/new-relic-mobile/mobile-sdk/configure-settings/#android).
      </Callout>

      ## Syntax [#syntax]

      ### Java [#java]

      ```java
      NewRelic.setMaxOfflineStorageSize(int $megaBytes)
      ```

      ### Kotlin [#kotlin]

      ```kotlin
      NewRelic.setMaxOfflineStorageSize(megaBytes: Int)
      ```

      ## Parameters [#parameters]

      <table>
        <thead>
          <tr>
            <th width={200}>
              Parameter
            </th>

            <th width={200}>
              Type
            </th>

            <th>
              Description
            </th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>
              `$megaBytes`
            </td>

            <td>
              `int`
            </td>

            <td>
              Required. Maximum size in megaBytes that can be stored in the file system.
            </td>
          </tr>
        </tbody>
      </table>

      ## Example [#example]

      Here's an example to set max offline storage size to 1000:

      ### Java [#java]

      ```java
      NewRelic.setMaxOfflineStorageSize(1000);
      ```

      ### Kotlin [#kotlin]

      ```kotlin
      NewRelic.setMaxOfflineStorageSize(1000)
      ```
    </TabsPageItem>

    <TabsPageItem id="ios">
      <Callout variant="important">
        Offline storage is disabled by default. To enable it, add the following feature flag:

        ```swift
        NewRelic.enableFeatures(NRMAFeatureFlags.NRFeatureFlag_OfflineStorage)
        ```

        For details on adding feature flags, see [Configure mobile monitoring settings](/docs/mobile-monitoring/new-relic-mobile/mobile-sdk/configure-settings/#ios).
      </Callout>

      ## Syntax [#syntax]

      ### Objective-C [#objc]

      ```objectivec
      + (void) setMaxOfflineStorageSize:(unsigned int)size;
      ```

      ### Swift [#swift]

      ```swift
      NewRelic.setMaxOfflineStorageSize(unsigned int $size)
      ```

      ## Parameters [#parameters]

      <table>
        <thead>
          <tr>
            <th width={200}>
              Parameter
            </th>

            <th width={200}>
              Type
            </th>

            <th>
              Description
            </th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>
              `$megaBytes`
            </td>

            <td>
              `unsigned int`
            </td>

            <td>
              Required. Maximum size in megaBytes that can be stored in the file system.
            </td>
          </tr>
        </tbody>
      </table>

      ## Examples [#examples]

      ### Objective-C [#obj-c]

      ```objectivec
      BOOL poolSizeSet = [NewRelic setMaxOfflineStorageSize:1000];
      ```

      ### Swift [#swift]

      ```swift
      let poolSizeSet = NewRelic.setMaxOfflineStorageSize(1000)
      ```
    </TabsPageItem>

    <TabsPageItem id="capacitor">
      <Callout variant="important">
        Offline storage is enabled by default. If you need to disable it, add the following feature flag:

        ```typescript
        offlineStorageEnabled: false
        ```

        For details on adding feature flags, see [Configure mobile monitoring settings](/docs/mobile-monitoring/new-relic-mobile/mobile-sdk/configure-settings/#capacitor).
      </Callout>

      ## Syntax [#syntax]

      ```typescript
      setMaxOfflineStorageSize(options: { megabytes: number; }) => void
      ```

      ## Parameters [#parameters]

      <table>
        <thead>
          <tr>
            <th width={200}>
              Parameter
            </th>

            <th width={200}>
              Type
            </th>

            <th>
              Description
            </th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>
              `megabytes`
            </td>

            <td>
              `number`
            </td>

            <td>
              Required. Maximum size in megaBytes that can be stored in the file system.
            </td>
          </tr>
        </tbody>
      </table>

      ## Example [#example]

      ```typescript
              NewRelicCapacitorPlugin.setMaxOfflineStorageSize({ megaBytes: 200 })
      ```
    </TabsPageItem>

    <TabsPageItem id="cordova">
      <Callout variant="important">
        Offline storage is enabled by default. If you need to disable it, add the following feature flag:

        ```typescript
        OFFLINE_STORAGE_ENABLED = "false"
        ```

        For details on adding feature flags, see [Configure mobile monitoring settings](/docs/mobile-monitoring/new-relic-mobile/mobile-sdk/configure-settings/#cordova).
      </Callout>

      ## Syntax [#syntax]

      ```typescript
      setMaxOfflineStorageSize(megabytes: number): void;
      ```

      ## Parameters [#parameters]

      <table>
        <thead>
          <tr>
            <th width={200}>
              Parameter
            </th>

            <th width={200}>
              Type
            </th>

            <th>
              Description
            </th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>
              `megabytes`
            </td>

            <td>
              `number`
            </td>

            <td>
              Required. Maximum size in megaBytes that can be stored in the file system.
            </td>
          </tr>
        </tbody>
      </table>

      ## Example [#example]

      ```js
        NewRelic.setMaxOfflineStorageSize(200);
      ```
    </TabsPageItem>

    <TabsPageItem id="maui">
      <Callout variant="important">
        Offline storage is enabled by default. If you need to disable it, add the following feature flag:

        ```csharp
        offlineStorageEnabled: false
        ```

        For details on adding feature flags, see [Configure mobile monitoring settings](/docs/mobile-monitoring/new-relic-mobile/mobile-sdk/configure-settings/#maui).
      </Callout>

      ## Syntax [#syntax]

      ```csharp
      setMaxOfflineStorageSize(int megabytes): void;
      ```

      ## Parameters [#parameters]

      <table>
        <thead>
          <tr>
            <th width={200}>
              Parameter
            </th>

            <th width={200}>
              Type
            </th>

            <th>
              Description
            </th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>
              `megabytes`
            </td>

            <td>
              `int`
            </td>

            <td>
              Required. Maximum size in megaBytes that can be stored in the file system.
            </td>
          </tr>
        </tbody>
      </table>

      ## Example [#example]

      ```C#
          CrossNewRelic.Current.SetMaxOfflineStorageSize(200);
      ```
    </TabsPageItem>

    <TabsPageItem id="flutter">
      <Callout variant="important">
        Offline storage is enabled by default. If you need to disable it, add the following feature flag:

        ```typescript
        offlineStorageEnabled: false
        ```

        For details on adding feature flags, see [Configure mobile monitoring settings](/docs/mobile-monitoring/new-relic-mobile/mobile-sdk/configure-settings/#flutter).
      </Callout>

      ## Syntax [#syntax]

      ```typescript
      setMaxOfflineStorageSize(int megabytes): void;
      ```

      ## Parameters [#parameters]

      <table>
        <thead>
          <tr>
            <th width={200}>
              Parameter
            </th>

            <th width={200}>
              Type
            </th>

            <th>
              Description
            </th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>
              `megabytes`
            </td>

            <td>
              `int`
            </td>

            <td>
              Required. Maximum size in megaBytes that can be stored in the file system.
            </td>
          </tr>
        </tbody>
      </table>

      ## Example [#example]

      ```dart
      NewrelicMobile.instance.setMaxOfflineStorageSize(200);
      ```
    </TabsPageItem>

    <TabsPageItem id="react">
      <Callout variant="important">
        Offline storage is enabled by default. If you need to disable it, add the following feature flag:

        ```typescript
        offlineStorageEnabled: false
        ```

        For details on adding feature flags, see [Configure mobile monitoring settings](/docs/mobile-monitoring/new-relic-mobile/mobile-sdk/configure-settings/#react).
      </Callout>

      ## Syntax [#syntax]

      ```js
      setMaxOfflineStorageSize(megabytes: number): void;
      ```

      ## Parameters [#parameters]

      <table>
        <thead>
          <tr>
            <th width={200}>
              Parameter
            </th>

            <th width={200}>
              Type
            </th>

            <th>
              Description
            </th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>
              `megabytes`
            </td>

            <td>
              `number`
            </td>

            <td>
              Required. Maximum size in megaBytes that can be stored in the file system.
            </td>
          </tr>
        </tbody>
      </table>

      ## Example [#example]

      ```js
         NewRelic.setMaxOfflineStorageSize(200);
      ```
    </TabsPageItem>

    <TabsPageItem id="unity">
      <Callout variant="important">
        Offline storage is enabled by default. If you need to disable it, see [Configure mobile monitoring settings](/docs/mobile-monitoring/new-relic-mobile/mobile-sdk/configure-settings/#unity).
      </Callout>

      ## Syntax [#syntax]

      ```csharp
      SetMaxOfflineStorageSize(int maxOfflineStorageSize): void;
      ```

      ## Parameters [#parameters]

      <table>
        <thead>
          <tr>
            <th width={200}>
              Parameter
            </th>

            <th width={200}>
              Type
            </th>

            <th>
              Description
            </th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>
              `maxOfflineStorageSize`
            </td>

            <td>
              `int`
            </td>

            <td>
              Required. Maximum size in megaBytes that can be stored in the file system.
            </td>
          </tr>
        </tbody>
      </table>

      ## Example [#example]

      ```csharp
          NewRelicAgent.SetMaxOfflineStorageSize(200);
      ```
    </TabsPageItem>

    <TabsPageItem id="xamarin">
      <Callout variant="important">
        Offline storage is enabled by default. If you need to disable it, add the following feature flag:

        ```typescript
        offlineStorageEnabled: false
        ```

        For details on adding feature flags, see [Configure mobile monitoring settings](/docs/mobile-monitoring/new-relic-mobile/mobile-sdk/configure-settings/#xamarin).
      </Callout>

      ## Syntax [#syntax]

      ```csharp
      SetMaxOfflineStorageSize(int megabytes): void;
      ```

      ## Parameters [#parameters]

      <table>
        <thead>
          <tr>
            <th width={200}>
              Parameter
            </th>

            <th width={200}>
              Type
            </th>

            <th>
              Description
            </th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>
              `megabytes`
            </td>

            <td>
              `int`
            </td>

            <td>
              Required. Maximum size in megaBytes that can be stored in the file system..
            </td>
          </tr>
        </tbody>
      </table>

      ## Example [#example]

      ```csharp
          CrossNewRelicClient.Current.SetMaxOfflineStorageSize(200);
      ```
    </TabsPageItem>
  </TabsPages>
</Tabs>
