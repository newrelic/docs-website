---
title: "Schedule Jobs"
metaDescription: "Efficiently schedule critical jobs for New Relic SAP monitoring with our guide. Ensure optimal data flow with tailored frequencies for RFC checks, data collection, and error handling to maintain continuous system insights."
freshnessValidatedDate: never
---

There are three programs need to be scheduled, schedule them using transaction `SM36`:

<table>
    <thead>
        <tr>
            <th style={{ width: "400px" }}>
            **ABAP Program**
            </th>
            <th>
            **Functionality**
            </th>
            <th>
            **Recommended Frequency**
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
              [`/NEWR/REGISTRY_RFC_CHECK`](#rfc-check)
            </td>
            <td>
              Check RFC connections to the Monitored Systems and NR API endpoints
            </td>
            <td>
              Every 3 minutes
            </td>
        </tr>
        <tr>
            <td>
              [`/NEWR/ABAP_COLLECTION_MANAGERN`](#abap-collection-manager)
            </td>
            <td>
              Data Collection, Multiple jobs should be scheduled based on connected systems and data providers
            </td>
            <td>
              Every 5 minutes
            </td>
        </tr>
        <tr>
            <td>
              [`/NEWR/RESEND_FAILED_API_TRANS`](#resubmit-program)
            </td>
            <td>
              Re-submit failed transmissions
            </td>
            <td>
              Every 15 minutes
            </td>
        </tr>
    </tbody>
</table>

## Schedule RFC check program [#rfc-check]

Schedule `/NEWR/REGISTRY_RFC_CHECK` every 1 to 3 minutes, ensuring it runs more frequently than the data collection job. Use the job name `NR_RFC_CHECK`.

## Schedule ABAP data collection manager [#abap-collection-manager]

Schedule three data collection jobs with variants focused on the following data provider groups. For instructions on scheduling collection manager jobs before `SP03`, see [Variants and Jobs before SP03](/docs/sap-solutions/additional-resources/variants-and-jobs-before-sp03). Separate data providers into three groups for scheduling.

- **TRACE**: In this group are the performance database (STAD) related data providers:
  - Includes performance database-related providers such as `NR.SAP.TRANSACTION` (trace data provider), `NR.SAP.TRANSACTION.COMPLETE` (complete performance database collection with parallel background RFC process), `NR.SAP.SYSTEM.PROCESS`, `NR_SAP_PROGRAM`, `NR_SAP_WORKLOAD_COMPLETE`, and `NR.SAP.WORKLOAD.COMPLETE`.
  - `NR.SAP.SYSTEM.PROCESS` and `NR_SAP_PROGRAM` are suspended after `SP02`.
- **IDOC**: In the production systems, IDOC collection may take a significant amount of time:
  - Includes IDOC-related providers such as `NR_SAP_IDOC` (main IDOC status event data provider), `NR_SAP_IDOC_COMPLETE` (complete IDOC retrieval with BG RFC collection), and `NR_SAP_IDOC_Configuration` (download IDOC master data to improve IDOC data provider performance).
- **SYSTEM**: Rest of the data providers.

### Create variants for /NEWR/ONE_COLLECTION

Starting from SP03, `/NEWR/ABAP_COLLECTION_MANAGERN` and `RSBTONEJOB2` are combined into `/NEWR/ONE_COLLECTION`. This program includes all parameters from `/NEWR/ABAP_COLLECTION_MANAGERN` and job names from `RSBTONEJOB2`, functioning similarly. To schedule jobs, create variants for `/NEWR/ONE_COLLECTION` using the following values:

<table>
    <thead>
        <tr>
            <th style={{ width: "200px" }}>
            **Variant Name**
            </th>
            <th>
            **TRACE**
            </th>
            <th>
            **IDOC**
            </th>
            <th>
            **SYSTEM**
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
              **Job Name**
            </td>
            <td>
              `NR_COLLECTION_TRACE`
            </td>
            <td>
              `NR_COLLECTION_IDOC`
            </td>
            <td>
              `NR_COLLECTION_SYSTEM`
            </td>
        </tr>
        <tr>
            <td>
              **New Relic Account ID**
            </td>
            <td>
              SAP Account used to receive data
            </td>
            <td>
              SAP Account used to receive data
            </td>
            <td>
              SAP Account used to receive data
            </td>
        </tr>
        <tr>
            <td>
              **Records per Trans**
            </td>
            <td>
              Default to 10000
            </td>
            <td>
              Default to 10000
            </td>
            <td>
              Default to 10000
            </td>
        </tr>
        <tr>
            <td>
              **Data Provider Name**
            </td>
            <td>
              Select Single Values:
                - `NR.SAP.TRANSACTION`
                - `NR.SAP.TRANSACTION.COMPLETE`
                - `NR.SAP.SYSTEM.PROCESS`
                - `NR_SAP_PROGRAM`
                - `NR_SAP_WORKLOAD_COMPLETE`
                - `NR.SAP.WORKLOAD.COMPLETE`
            </td>
            <td>
              Select Single Values:
                - `NR_SAP_IDOC`
                - `NR_SAP_IDOC_COMPLETE`
                - `NR_SAP_IDOC_Configuration`
            </td>
            <td>
              Exclude Single Values:
                - `NR.SAP.TRANSACTION`
                - `NR.SAP.TRANSACTION.COMPLETE`
                - `NR.SAP.SYSTEM.PROCESS`
                - `NR_SAP_PROGRAM`
                - `NR_SAP_WORKLOAD_COMPLETE`
                - `NR.SAP.WORKLOAD.COMPLETE`
                - `NR_SAP_IDOC`
                - `NR_SAP_IDOC_COMPLETE`
                - `NR_SAP_IDOC_Configuration`
            </td>
        </tr>
        <tr>
            <td>
              **Execution Mode**
            </td>
            <td>
              Sequential Processing
            </td>
            <td>
              Sequential Processing
            </td>
            <td>
              Parallel Processing
            </td>
        </tr>
        <tr>
            <td>
              **Min WP Required**
            </td>
            <td>
              If system DIA WP >= 30, set to 6; otherwise set to 3.
            </td>
            <td>
              N/A
            </td>
            <td>
              If system DIA WP >= 30, set to 6; otherwise set to 3.
            </td>
        </tr>
    </tbody>
</table>

    <img
      title="SAP ABAP Collection Manager"
      alt="A screenshot displaying the SAP ABAP Collection Manager"
      src="/images/abap-collection-manager.webp"
      width=""
    />

### Schedule collection jobs

1. Start transaction `SM36`.
2. Enter the **Job Name** for each job and set the **Job Class** to **C**.

  <CollapserGroup>
    <Collapser
      id="job-names"
      title="Job Names"
    >
      <table>
        <thead>
            <tr>
                <th style={{ width: "200px" }}>
                **Job Name**
                </th>
                <th>
                `NR_COLLECTION_TRACE`
                </th>
                <th>
                `NR_COLLECTION_IDOC`
                </th>
                <th>
                `NR_COLLECTION_SYSTEM`
                </th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>
                  **Program**
                </td>
                <td>
                  `/NEWR/ONE_COLLECTION`
                </td>
                <td>
                  `/NEWR/ONE_COLLECTION`
                </td>
                <td>
                  `/NEWR/ONE_COLLECTION`
                </td>
            </tr>
            <tr>
                <td>
                  **Variant**
                </td>
                <td>
                  TRACE
                </td>
                <td>
                  IDOC
                </td>
                <td>
                  SYSTEM
                </td>
            </tr>
            <tr>
                <td>
                  **Running Freq**
                </td>
                <td>
                  Every 5 minutes
                </td>
                <td>
                  Every 5 minutes
                </td>
                <td>
                  Every 5 minutes
                </td>
            </tr>
        </tbody>
      </table>
    </Collapser>
  </CollapserGroup>

3. Click **Step**, enter the **Program Name** `/NEWR/ONE_COLLECTION`, and select the **Variant**.
4. Click **Start Condition**, set the **Start Date** and **Time**, and check the **Periodic Job** box.
5. Go to **Period Values**, click **Other Period**, and enter **5** for minutes.

## Schedule resubmit program [#resubmit-program]

1. Create a variant named **DEFAULT** for the program `/NEWR/RESEND_FAILED_API_TRANS` to resubmit failed transmissions for the New Relic account in case of a transmission error.
2. Specify the following values:
   - [**New Relic Account ID**](/docs/accounts/accounts-billing/account-setup/account-id)
   - **HTTP Response Codes**: Exclude `000` and `413`, and the range `200` to `299`.

    <img
      title="Resend failed API transactions"
      alt="A screenshot displaying the resend failed API transactions"
      src="/images/resend-failed-api-transaction.webp"
      width="700"
    />

3. Schedule this job to run every 15 minutes to resubmit failed transmissions, such as those with HTTP response code `500`, and periodically purge transmission log entries.