---
title: "Prepare for the installation"
metaDescription: "How to install the SAP and alert ecosystems with New Relic"
freshnessValidatedDate: never
---

## Prerequisites

  - A New Relic [account ID](/docs/accounts/accounts-billing/account-setup/account-id).
  - A New Relic <InlinePopover type="licenseKey"/>.
  - Region: [Choose your data center (US or EU)](/docs/accounts/accounts-billing/account-setup/choose-your-data-center/)
  - SAP Systems with the required software component release level, as specified by New Relic Monitoring for SAP Solutions.
  - Connectivity between the Central Monitoring System and the New Relic cloud.
  - Connectivity between the Central Monitoring System and the monitored systems/databases.
    
  <Callout variant="important">
      You may need approval or configuration assistance from your security or network teams to meet these prerequisites. Ensure these steps are completed before starting the installation and check out the [Checklist for installation readiness](/docs/sap-solutions/additional-resources/pre-installation-checklist/#checklist-for-installation-readiness) to confirm that all environments are correctly set up.
  </Callout>

## Download software

The installation package is available upon request. Please contact your New Relic account executive for the download link.

The downloaded package should include the following files. The complete list of files is provided in **Packing_List.txt**.

  <table>
    <thead>
      <tr>
      <th style={{ width: '200px' }}>
        File Title
      </th>
      <th>
        File Name
      </th>
      <th>
        Remarks
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        Packing List
      </td>
      <td>
        `NRM4SAP<version>.txt`
      </td>
      <td>
        File inventory list
      </td>
    </tr>
    <tr>
      <td>
        ABAP Add-on
      </td>
      <td>
        `K-xxxAOIINNEWR.SAR`
      </td>
      <td>
        Archive file for SAP Add-on
      </td>
    </tr>
    <tr>
      <td>
      ABAP Add-on Upgrade Pkg
      </td>
      <td>
        `K-xxxAOUINNEWR.SAP`
      </td>
      <td>
      Archive file for SAP Add-on Upgrade
      </td>
    </tr>
    <tr>
      <td>
      Authorization Roles
      </td>
      <td>
        `_NEWR_DATA_PROVIDER.SAP`
      </td>
      <td>
      Authorization Role for NR RFC users
      </td>
    </tr>
  </tbody>
</table>

  <Callout variant="tip">
    The downloaded file is in a zip format, we recommend you to Unzip it to expose the above files.
  </Callout>

## Monitored systems [#monitored-systems]

Our agentless architecture enables monitoring of SAP systems without installing agents on these systems. Telemetry data is retrieved via RFC connections. For secure and stable connections, create SAP system users with specific authorization profiles for these RFC connections.

1. Ensure the following SAP components have compatible versions:

  <table>
    <thead>
      <tr>
        <th style={{ width: '200px' }}>
        SAP Component
        </th>
        <th>
        Compatible Version
        </th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>
        SAP_BASIS
        </td>
        <td>
        Release 740 and above
        </td>
      </tr>
      <tr>
        <td>
        Kernel
        </td>
        <td>
        Release 753 Patch 602 and above
        </td>
      </tr>
      <tr>
        <td>
        ST-PI
        </td>
        <td>
        Release 740 SP 14 and above
        </td>
      </tr>
    </tbody>
  </table>

2. Upload authorization role [`NEWR_DATA_PROVIDER`](/docs/sap-solutions/additional-resources/detailed-instructions/#upload-authorization-role).

  <Callout variant="important">
    See [Upload authorization role](/docs/sap-solutions/additional-resources/detailed-instructions/#upload-authorization-role) to know how to upload the authorization role.
  </Callout>

3. Create a system type ID with the uploaded role for RFC connection. Refer to [Create New Relic RFC user ID].
4. If the monitored database is **HANA**.
      - Create a **HANA database user NRAGENT** with **Catalog Read** and **Monitoring** access using the following SQL commands:

        ```sql
          CREATE ROLE NR_AGENT_ROLE;
          GRANT CATALOG READ TO NR_AGENT_ROLE;
          GRANT MONITORING TO NR_AGENT_ROLE;
        ```

        ```sql
          CREATE USER NRAGENT PASSWORD 'Xxxxxxxx' NO FORCE_FIRST_PASSWORD_CHANGE;
          GRANT NR_AGENT_ROLE TO NRAGENT;
        ```
    
        - Collect the **HANA server host** and **tenant DB port** for SQL connection.
5. For monitored databases other than **Hana**:
      - Use the standard **CCMS Database KPI** to monitor database performance. Execute the ABAP program **RSDBKPIMON**.
      - Use the monitored system ID (e.g., SQ2) as the parameter. Ensure the message **Finished creating the nodes** appears on the status bar. 

## Central monitoring system [#central-monitoring-system]

The central monitoring system is where New Relic monitoring for SAP solutions is installed. It collects, transforms, and transmits telemetry data to the New Relic One platform for analysis and visualization.

  1. Ensure the following SAP component versions are installed on the central monitoring system.

    <CollapserGroup>
      <Collapser
        id="sap-versions"
        title="SAP component versions"
      >
    
    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
              SAP_BASIS Version
            </th>
            <th>
              SAP_ABA Version
            </th>
            <th>
              ST-PI Version
            </th>
          </tr>
      </thead>
        <tbody>
          <tr>
            <td>
            740
            </td>
            <td>
            n/a
            </td>
            <td>
            740 SP14+
            </td>
          </tr>
          <tr>
            <td>
            750
            </td>
            <td>
            750
            </td>
            <td>
            740 SP14+
            </td>
          </tr>
          <tr>
            <td>
            750
            </td>
            <td>
            75A
            </td>
            <td>
            740 SP14+
            </td>
          </tr>
          <tr>
            <td>
            751
            </td>
            <td>
            75B
            </td>
            <td>
            740 SP14+
            </td>
          </tr>
          <tr>
            <td>
            752
            </td>
            <td>
            75C
            </td>
            <td>
            740 SP14+
            </td>
          </tr>
          <tr>
            <td>
            753
            </td>
            <td>
            75D
            </td>
            <td>
            740 SP14+
            </td>
          </tr>
          <tr>
            <td>
            754
            </td>
            <td>
            75E
            </td>
            <td>
            740 SP14+
            </td>
          </tr>
          <tr>
            <td>
            755
            </td>
            <td>
            75F
            </td>
            <td>
            740 SP14+
            </td>
          </tr>
          <tr>
            <td>
            756
            </td>
            <td>
            75G
            </td>
            <td>
            740 SP14+
            </td>
          </tr>
          <tr>
            <td>
            757
            </td>
            <td>
            75H
            </td>
            <td>
            740 SP14+
            </td>
          </tr>
          <tr>
            <td>
            758
            </td>
            <td>
            75I
            </td>
            <td>
            740 SP14+
            </td>
          </tr>
        </tbody>
      </table>
      </Collapser>
    </CollapserGroup>

    If your SAP version is not listed, contact your New Relic account executive for a supplementary package tailored to your version.

  2. Ensure the central monitoring system has:
      - At least 20 dialog work processes.
      - At least 10 background work processes.
  3. Ensure outbound HTTPS access to the New Relic data center is allowed from the central monitoring server. Refer to the table below for connection details:

    <table>
      <thead>
        <tr>
          <th style={{ width: '200px' }}>
            Connection
          </th>
          <th>
            US data center
          </th>
          <th>
            EU data center endpoint
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
          Metrics
          </td>
          <td>
          https://metric-api.newrelic.com/metric/v1
          </td>
          <td>
          https://metric-api.eu.newrelic.com/metric/v1
          </td>
        </tr>
        <tr>
          <td>
          Events
          </td>
          <td>
          https://insights-collector.newrelic.com/v1/accounts/events
          </td>
          <td>
          https://insights-collector.eu01.nr-data.net/accounts/event/v1
          </td>
        </tr>
        <tr>
          <td>
          Logs
          </td>
          <td>
          https://log-api.newrelic.com/log/v1
          </td>
          <td>
          https://log-api.eu.newrelic.com/log/v1
          </td>
        </tr>
        <tr>
          <td>
          Traces
          </td>
          <td>
          https://trace-api.newrelic.com/trace/v1
          </td>
          <td>
          https://trace-api.eu.newrelic.com/trace/v1
          </td>
        </tr>
      </tbody>
      </table>

      - Adjust proxy server policies for accessing New Relic if required. Ensure proxy settings are configured:
        - Server domain name/IP address and port.
        - Proxy access credentials, if authentication is necessary.
      - Modify firewall policies to allow HTTPS traffic to New Relic if blocked.

      <Callout variant="tip">
        These connections can be set in the **Central Monitoring System** using **SAP Transaction SM59** and tested. Refer to the [Set HTTP Destination to New Relic Cloud] for more details.
      </Callout>

  4. For each monitored system specified, use transaction `SM59` and the remote system ID to create **RFC Destination** and test connections. Refer to the [Create RFC destinations for monitored systems] for more details.

        <Callout variant="tip">
          Ensure the RFC user has the `/NEWR/DATA_PROVIDER` role assigned.
        </Callout>

  5. Ensure the following for monitoring remote HANA databases:
        - The central monitoring system should have access to the HANA Server and tenant DB port.
        - If your central monitoring system is not an `S4HANA` system, ensure one of the following components is installed:
          - HANA Client v2.0 (version needs to be compatible with the HANA DB)
          - HANA Client Lib file:
              - `libSQLDBCHDB.so` (Linux)
              - `libSQLDBCHDB.dll` (Windows)
              - The library should be located in the SAP Kernel folder and owned by the SID Admin ID (e.g., sd1adm).
        - For each remote HANA database, use transaction `SAP DBACOCKPIT` to create a DB Connection. Refer to [Create DB connection] for details.