---
title: "Prepare for the installation"
metaDescription: "How to install the SAP and alert ecosystems with New Relic"
freshnessValidatedDate: never
---

## Prerequisites

  - A New Relic [account ID](/docs/accounts/accounts-billing/account-setup/account-id).
  - A New Relic <InlinePopover type="licenseKey"/>.
  - Region: [Choose your data center (US or EU)](/docs/accounts/accounts-billing/account-setup/choose-your-data-center/)
  - SAP Systems with the required software component release level, as specified by New Relic Monitoring for SAP Solutions.
  - Connectivity between the Central Monitoring System and the New Relic cloud.
  - Connectivity between the Central Monitoring System and the monitored systems/databases.
    
  <Callout variant="important">
      You may need approval or configuration assistance from your security or network teams to meet these prerequisites. Ensure these steps are completed before starting the installation and check out the [Checklist for installation readiness](#checklist-for-installation-readiness) to confirm that all environments are correctly set up.
  </Callout>

<CollapserGroup>
  <Collapser
    id="pre-installation-questionnaire"
    title="Pre-installation questionnaire"
  >
    - Do you already have a New Relic Account for SAP systems monitoring?
      - If yes, specify which New Relic data center it is connected to (US or EU).
      - If no, create a new account connected to one of the data centers.
    - List of SAP Systems to be monitored
      - For each monitored system, provide the following details:
        - System ID and clients
        - Database vendor and version
        - SAP release and patch level of the following software components:
          - SAP_BASIS
          - Kernel
    - Specify one SAP system to be used as the central system where NRM4SAP will be installed:
      - System ID and client where the ABAP component and configuration will be installed
      - Host name and port of the proxy server (if used), including any relevant proxy server policies for access to the New Relic One platform.

<table style="border: 1px solid white; border-collapse: collapse;">
    <thead>
        <tr>
            <th style="width: 200px; border: 1px solid white;">
                <strong>System ID</strong>
            </th>
            <th style="border: 1px solid white;">
                <strong>Client</strong>
            </th>
            <th style="border: 1px solid white;">
                <strong>Database Vendor and Version</strong>
            </th>
            <th style="border: 1px solid white;">
                <strong>SAP_BASIS Version</strong>
            </th>
            <th style="border: 1px solid white;">
                <strong>Central System</strong>
            </th>
        </tr>
    </thead>
</table>

**Monitored Systems**:

<table>
    <thead>
        <tr>
            <th style={{ width: "200px" }}>
            **System ID**
            </th>
            <th>
            **Client**
            </th>
            <th>
            **Database Vendor and Version**
            </th>
            <th>
            **SAP_BASIS Version**
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
            System 1
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>
            </td>
        </tr>
        <tr>
            <td>
            System 2
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>
            </td>
        </tr>
        <tr>
            <td>
            System 3
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>
            </td>
        </tr>
    </tbody>
</table>

**Optional**: Proxy Hostname and Port
  </Collapser>

  <Collapser
    id="checklist-for-installation-readiness"
    title="Checklist for installation readiness"
  >
    - New Relic Account Info

<table style="border: 1px solid white; border-collapse: collapse;">
    <thead>
        <tr>
            <th style="width: 200px; border: 1px solid white;">
                <strong>NR Account ID</strong>
            </th>
            <th style="border: 1px solid white;">
                <strong>License/Ingestion Key</strong>
            </th>
            <th style="border: 1px solid white;">
                <strong>Region</strong>
            </th>
            <th style="border: 1px solid white;">
                <strong>Login Credential</strong>
            </th>
        </tr>
    </thead>
</table>

    - Monitored Systems Info

<table style="border: 1px solid white; border-collapse: collapse;">
    <thead>
        <tr>
            <th style="width: 200px; border: 1px solid white;">
                <strong>System ID</strong>
            </th>
            <th style="border: 1px solid white;">
                <strong>Client</strong>
            </th>
            <th style="border: 1px solid white;">
                <strong>Domain Name/IP</strong>
            </th>
            <th style="border: 1px solid white;">
                <strong>RFC User Name</strong>
            </th>
            <th style="border: 1px solid white;">
                <strong>RFC User Credential</strong>
            </th>
        </tr>
    </thead>
</table>

    - HANA DB Monitoring Info

<table style="border: 1px solid white; border-collapse: collapse;">
    <thead>
        <tr>
            <th style="width: 200px; border: 1px solid white;">
                <strong>System ID</strong>
            </th>
            <th style="border: 1px solid white;">
                <strong>Host Domain/IP</strong>
            </th>
            <th style="border: 1px solid white;">
                <strong>Tenant Port</strong>
            </th>
            <th style="border: 1px solid white;">
                <strong>DB User Name</strong>
            </th>
            <th style="border: 1px solid white;">
                <strong>Accessible from Central Server Tested</strong>
            </th>
        </tr>
    </thead>
</table>
  </Collapser>

  <Collapser
    id="network-accessibility"
    title="Network Accessibility"
  >
    - Ensure the firewall is not blocking HTTPs traffic to New Relic.
    - Proxy Server Required (if applicable):

<table style="border: 1px solid white; border-collapse: collapse;">
    <thead>
        <tr>
            <th style="width: 200px; border: 1px solid white;">
                <strong>Proxy Server Domain</strong>
            </th>
            <th style="border: 1px solid white;">
                <strong>Proxy Port</strong>
            </th>
            <th style="border: 1px solid white;">
                <strong>Authentication Required</strong>
            </th>
            <th style="border: 1px solid white;">
                <strong>Proxy Username</strong>
            </th>
            <th style="border: 1px solid white;">
                <strong>Proxy User Password</strong>
            </th>
        </tr>
    </thead>
</table>
  </Collapser>

</CollapserGroup>

## Download software

The installation package is available upon request. Please contact your New Relic account executive for the download link.

The downloaded package should include the following files. The complete list of files is provided in **Packing_List.txt**.

  <table>
    <thead>
      <tr>
      <th style={{ width: '200px' }}>
        File Title
      </th>
      <th>
        File Name
      </th>
      <th>
        Remarks
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        Packing List
      </td>
      <td>
        `NRM4SAP<version>.txt`
      </td>
      <td>
        File inventory list
      </td>
    </tr>
    <tr>
      <td>
        ABAP Add-on
      </td>
      <td>
        `K-xxxAOIINNEWR.SAR`
      </td>
      <td>
        Archive file for SAP Add-on
      </td>
    </tr>
    <tr>
      <td>
      ABAP Add-on Upgrade Pkg
      </td>
      <td>
        `K-xxxAOUINNEWR.SAP`
      </td>
      <td>
      Archive file for SAP Add-on Upgrade
      </td>
    </tr>
    <tr>
      <td>
      Authorization Roles
      </td>
      <td>
        `_NEWR_DATA_PROVIDER.SAP`
      </td>
      <td>
      Authorization Role for NR RFC users
      </td>
    </tr>
  </tbody>
</table>

  <Callout variant="tip">
    The downloaded file is in a zip format, we recommend you to Unzip it to expose the above files.
  </Callout>

## Monitored systems [#monitored-systems]

Our agentless architecture enables monitoring of SAP systems without installing agents on these systems. Telemetry data is retrieved via RFC connections. For secure and stable connections, create SAP system users with specific authorization profiles for these RFC connections.

1. Ensure the following SAP components have compatible versions:

  <table>
    <thead>
      <tr>
        <th style={{ width: '200px' }}>
        SAP Component
        </th>
        <th>
        Compatible Version
        </th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>
        SAP_BASIS
        </td>
        <td>
        Release 740 and above
        </td>
      </tr>
      <tr>
        <td>
        Kernel
        </td>
        <td>
        Release 753 Patch 602 and above
        </td>
      </tr>
      <tr>
        <td>
        ST-PI
        </td>
        <td>
        Release 740 SP 14 and above
        </td>
      </tr>
    </tbody>
  </table>

2. Upload authorization role [`NEWR_DATA_PROVIDER`](/docs/sap-solutions/installation/prepare-for-the-installation/#authorization-objects-used-in-role).

  <Callout variant="important">
    See [Upload authorization role](/docs/sap-solutions/installation/prepare-for-the-installation/#upload-authorization-role) to know how to upload the authorization role.
  </Callout>

3. Create a system type ID with the uploaded role for RFC connection. Refer to [Create New Relic RFC user ID].
4. If the monitored database is **HANA**.
      - Create a **HANA database user NRAGENT** with **Catalog Read** and **Monitoring** access using the following SQL commands:

        ```sql
          CREATE ROLE NR_AGENT_ROLE;
          GRANT CATALOG READ TO NR_AGENT_ROLE;
          GRANT MONITORING TO NR_AGENT_ROLE;
        ```

        ```sql
          CREATE USER NRAGENT PASSWORD 'Xxxxxxxx' NO FORCE_FIRST_PASSWORD_CHANGE;
          GRANT NR_AGENT_ROLE TO NRAGENT;
        ```
    
        - Collect the **HANA server host** and **tenant DB port** for SQL connection.
5. For monitored databases other than **Hana**:
      - Use the standard **CCMS Database KPI** to monitor database performance. Execute the ABAP program **RSDBKPIMON**.
      - Use the monitored system ID (e.g., SQ2) as the parameter. Ensure the message **Finished creating the nodes** appears on the status bar. 

<CollapserGroup>
  <Collapser
    id="upload-authorization-role"
    title="Upload authorization role"
  >
  Using the **SAP Transaction PFCG**:
  1. Go to **Role** > **Upload** and upload the file **_NEWR_DATA_PROVIDER.SAP** from the installation package.
  2. Confirm the role `/NEWR/DATA_PROVIDER` is to be loaded.
  <img
      title="Authorization Role"
      alt="A screenshot displaying the authorization role upload"
      src="/images/authorisation-role.webp"
      width="500"
      />
  3. Click the <img src="/images/change-icon.webp" class="inline" style={{height: "22px", width: "22px"}} alt="change icon in SAP" title="Change icon indicator in SAP" /> icon once loaded.
  4. In the **Authorizations** tab, select <img src="/images/change-icon.webp" class="inline" style={{height: "20px", width: "20px"}} alt="change icon in SAP" title="Change icon indicator in SAP" /> **Change Authorization Data**, and activate using <img src="/images/activate-option.webp" class="inline" style={{height: "25px", width: "30px"}} alt="activate icon in SAP" title="Activate Icon in SAP" /> icon.
  <img
      title="Authorizations Tab"
      alt="A screenshot displaying the authorization tab and Change Authorization Data in SAP upload"
      src="/images/sap-authorization-1.webp"
      width="500"
      />
  5. If a profile name is suggested, click the green check icon.
  6. Verify that the message **Profile(s) were updated** appears on the status bar.
  </Collapser>
  
  <Collapser
    id="authorization-objects-used-in-role"
    title="Authorization objects used in role `/NEWR/DATA_PROVIDER`"
  >
    The following authorization objects are configured with display-only authorization:

      - `S_BGRFC`
      - `S_RFC`
      - `S_RFC_ADM`
      - `S_TCODE`
      - `/SDF/E2E`
      - `S_ADMI_FCD`
      - `S_BTCH_ADM`
      - `S_DBCON`
      - `S_SRT_ELOG`
      - `S_SRT_MONI`
      - `S_TABU_DIS`
      - `S_TABU_NAM`
      - `S_TOOLS_EX`
      - `S_XMB_MONI`
      - `S_APPL_LOG`
  </Collapser>

</CollapserGroup>

## Central monitoring system [#central-monitoring-system]

The central monitoring system is where New Relic monitoring for SAP solutions is installed. It collects, transforms, and transmits telemetry data to the New Relic One platform for analysis and visualization.

  1. Ensure the following SAP component versions are installed on the central monitoring system.

    <CollapserGroup>
      <Collapser
        id="sap-versions"
        title="SAP component versions"
      >
    
    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
              SAP_BASIS Version
            </th>
            <th>
              SAP_ABA Version
            </th>
            <th>
              ST-PI Version
            </th>
          </tr>
      </thead>
        <tbody>
          <tr>
            <td>
            740
            </td>
            <td>
            n/a
            </td>
            <td>
            740 SP14+
            </td>
          </tr>
          <tr>
            <td>
            750
            </td>
            <td>
            750
            </td>
            <td>
            740 SP14+
            </td>
          </tr>
          <tr>
            <td>
            750
            </td>
            <td>
            75A
            </td>
            <td>
            740 SP14+
            </td>
          </tr>
          <tr>
            <td>
            751
            </td>
            <td>
            75B
            </td>
            <td>
            740 SP14+
            </td>
          </tr>
          <tr>
            <td>
            752
            </td>
            <td>
            75C
            </td>
            <td>
            740 SP14+
            </td>
          </tr>
          <tr>
            <td>
            753
            </td>
            <td>
            75D
            </td>
            <td>
            740 SP14+
            </td>
          </tr>
          <tr>
            <td>
            754
            </td>
            <td>
            75E
            </td>
            <td>
            740 SP14+
            </td>
          </tr>
          <tr>
            <td>
            755
            </td>
            <td>
            75F
            </td>
            <td>
            740 SP14+
            </td>
          </tr>
          <tr>
            <td>
            756
            </td>
            <td>
            75G
            </td>
            <td>
            740 SP14+
            </td>
          </tr>
          <tr>
            <td>
            757
            </td>
            <td>
            75H
            </td>
            <td>
            740 SP14+
            </td>
          </tr>
          <tr>
            <td>
            758
            </td>
            <td>
            75I
            </td>
            <td>
            740 SP14+
            </td>
          </tr>
        </tbody>
      </table>
      </Collapser>
    </CollapserGroup>

    If your SAP version is not listed, contact your New Relic account executive for a supplementary package tailored to your version.

  2. Ensure the central monitoring system has:
      - At least 20 dialog work processes.
      - At least 10 background work processes.
  3. Ensure outbound HTTPS access to the New Relic data center is allowed from the central monitoring server. Refer to the table below for connection details:

    <table>
      <thead>
        <tr>
          <th style={{ width: '200px' }}>
            Connection
          </th>
          <th>
            US data center
          </th>
          <th>
            EU data center endpoint
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
          Metrics
          </td>
          <td>
          https://metric-api.newrelic.com/metric/v1
          </td>
          <td>
          https://metric-api.eu.newrelic.com/metric/v1
          </td>
        </tr>
        <tr>
          <td>
          Events
          </td>
          <td>
          https://insights-collector.newrelic.com/v1/accounts/events
          </td>
          <td>
          https://insights-collector.eu01.nr-data.net/accounts/event/v1
          </td>
        </tr>
        <tr>
          <td>
          Logs
          </td>
          <td>
          https://log-api.newrelic.com/log/v1
          </td>
          <td>
          https://log-api.eu.newrelic.com/log/v1
          </td>
        </tr>
        <tr>
          <td>
          Traces
          </td>
          <td>
          https://trace-api.newrelic.com/trace/v1
          </td>
          <td>
          https://trace-api.eu.newrelic.com/trace/v1
          </td>
        </tr>
      </tbody>
      </table>

      - Adjust proxy server policies for accessing New Relic if required. Ensure proxy settings are configured:
        - Server domain name/IP address and port.
        - Proxy access credentials, if authentication is necessary.
      - Modify firewall policies to allow HTTPS traffic to New Relic if blocked.

      <Callout variant="tip">
        These connections can be set in the **Central Monitoring System** using **SAP Transaction SM59** and tested. Refer to the [Set HTTP Destination to New Relic Cloud] for more details.
      </Callout>

  4. For each monitored system specified, use transaction `SM59` and the remote system ID to create **RFC Destination** and test connections. Refer to the [Create RFC destinations for monitored systems] for more details.

        <Callout variant="tip">
          Ensure the RFC user has the `/NEWR/DATA_PROVIDER` role assigned.
        </Callout>

  5. Ensure the following for monitoring remote HANA databases:
        - The central monitoring system should have access to the HANA Server and tenant DB port.
        - If your central monitoring system is not an `S4HANA` system, ensure one of the following components is installed:
          - HANA Client v2.0 (version needs to be compatible with the HANA DB)
          - HANA Client Lib file:
              - `libSQLDBCHDB.so` (Linux)
              - `libSQLDBCHDB.dll` (Windows)
              - The library should be located in the SAP Kernel folder and owned by the SID Admin ID (e.g., sd1adm).
        - For each remote HANA database, use transaction `SAP DBACOCKPIT` to create a DB Connection. Refer to [Create DB connection] for details.