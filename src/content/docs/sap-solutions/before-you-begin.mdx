---
title: "Prepare for the installation"
metaDescription: "How to install the SAP and alert ecosystems with New Relic"
freshnessValidatedDate: never
---

Before you start using New Relic Monitoring for your SAP solutions, ensure the following prerequisites are met:

  - **New Relic Account ID**: Obtain your [account ID](/docs/accounts/accounts-billing/account-setup/account-id) to identify your New Relic account.
  - **License Key**: Secure a New Relic <InlinePopover type="licenseKey"/> needed for authentication and data access.
  - **Data Center Region**: [Decide on your preferred data center location (US or EU)](/docs/accounts/accounts-billing/account-setup/choose-your-data-center/) and configure your account accordingly.
  - **SAP System Requirements**: Confirm that your SAP systems meet the required software component release levels specified by New Relic Monitoring for SAP Solutions.
  - **Monitoring BTP Accounts**: If BTP accounts are part of your monitoring setup, one of the following should be available:
    - **CloudALM Account**: A CloudALM account should be configured to monitor your BTP accounts.
    - **Process Integration Runtime Service**: Ensure a subscription to the Process Integration Runtime service on your monitored BTP accounts, which is required specifically for integration monitoring.

    <Callout variant="important">
        You may need approval or configuration assistance from your security or network teams to meet these prerequisites. Ensure these steps are completed before starting the installation and check out the [Checklist for installation readiness](/docs/sap-solutions/additional-resources/pre-installation-checklist/#checklist-for-installation-readiness) to confirm that all environments are correctly set up.
    </Callout>

## Download software

You can obtain the installation package from your New Relic account executive. The downloaded .zip package contains the following files:

  <Callout variant="important">
      The complete list of files is provided in **Packing_List.txt**. Unzip the package to access these files.
  </Callout>

<CollapserGroup>
  <Collapser
    id="installation-package"
    title="Installation package"
  >
      <table>
        <thead>
          <tr>
          <th style={{ width: '200px' }}>
            File Title
          </th>
          <th>
            File Name
          </th>
          <th>
            Remarks
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            Packing List
          </td>
          <td>
            `NRM4SAP<version>.txt`
          </td>
          <td>
            File inventory list
          </td>
        </tr>
        <tr>
          <td>
            ABAP Add-on
          </td>
          <td>
            `K-xxxAOIINNEWR.SAR`
          </td>
          <td>
            Archive file for SAP Add-on
          </td>
        </tr>
        <tr>
          <td>
          ABAP Add-on Upgrade Pkg
          </td>
          <td>
            `K-xxxAOUINNEWR.SAP`
          </td>
          <td>
          Archive file for SAP Add-on Upgrade
          </td>
        </tr>
        <tr>
          <td>
          Authorization Roles
          </td>
          <td>
            `_NEWR_DATA_PROVIDER.SAP`
          </td>
          <td>
          Authorization Role for NR RFC users
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

## Monitored systems [#monitored-systems]

Our agentless architecture uses **RFC connections** to retrieve data. To ensure secure connections, you must create an SAP system user with a specific authorization profile for these connections.

- Verify that `SAP_BASIS` is **Release 740 or above**, `Kernel` is **Release 753 Patch 602 or above**, and `ST-PI` is **Release 740 SP 16 or above**.
- **Upload the authorization role** [`NEWR_DATA_PROVIDER`](/docs/sap-solutions/additional-resources/detailed-instructions/#upload-authorization-role).
- Create a system user with the uploaded role for RFC connections. Refer to [Create New Relic RFC user ID](/docs/sap-solutions/additional-resources/detailed-configuration/#create-rfc-user-id).
- If you're monitoring a **HANA database**, create a **HANA database user NRAGENT** with **Catalog Read** and **Monitoring** access using the following SQL commands:

        ```sql
          CREATE ROLE NR_AGENT_ROLE;
          GRANT CATALOG READ TO NR_AGENT_ROLE;
          GRANT MONITORING TO NR_AGENT_ROLE;
        ```

        ```sql
          CREATE USER NRAGENT PASSWORD 'Xxxxxxxx' NO FORCE_FIRST_PASSWORD_CHANGE;
          GRANT NR_AGENT_ROLE TO NRAGENT;
        ```

- Collect the **HANA server host** and **tenant DB port** for SQL connection.
- For other databases, activate the standard **CCMS database KPIs** by running the ABAP program `RSDBKPIMON`. 

## Central monitoring system [#central-monitoring-system]

On the central monitoring system, confirm the following component versions are installed. For versions not listed, contact your New Relic Account Executive for a supplementary package.

<CollapserGroup>
  <Collapser
    id="sap-versions"
    title="SAP component versions"
  >
    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
              SAP_BASIS Version
            </th>
            <th>
              SAP_ABA Version
            </th>
            <th>
              ST-PI Version
            </th>
          </tr>
      </thead>
        <tbody>
          <tr>
            <td>
            740
            </td>
            <td>
            n/a
            </td>
            <td>
            740 SP14+
            </td>
          </tr>
          <tr>
            <td>
            750
            </td>
            <td>
            750
            </td>
            <td>
            740 SP14+
            </td>
          </tr>
          <tr>
            <td>
            750
            </td>
            <td>
            75A
            </td>
            <td>
            740 SP14+
            </td>
          </tr>
          <tr>
            <td>
            751
            </td>
            <td>
            75B
            </td>
            <td>
            740 SP14+
            </td>
          </tr>
          <tr>
            <td>
            752
            </td>
            <td>
            75C
            </td>
            <td>
            740 SP14+
            </td>
          </tr>
          <tr>
            <td>
            753
            </td>
            <td>
            75D
            </td>
            <td>
            740 SP14+
            </td>
          </tr>
          <tr>
            <td>
            754
            </td>
            <td>
            75E
            </td>
            <td>
            740 SP14+
            </td>
          </tr>
          <tr>
            <td>
            755
            </td>
            <td>
            75F
            </td>
            <td>
            740 SP14+
            </td>
          </tr>
          <tr>
            <td>
            756
            </td>
            <td>
            75G
            </td>
            <td>
            740 SP14+
            </td>
          </tr>
          <tr>
            <td>
            757
            </td>
            <td>
            75H
            </td>
            <td>
            740 SP14+
            </td>
          </tr>
          <tr>
            <td>
            758
            </td>
            <td>
            75I
            </td>
            <td>
            740 SP14+
            </td>
          </tr>
        </tbody>
      </table>
  </Collapser>
</CollapserGroup>

- If your SAP version is not listed, contact your New Relic account executive for a supplementary package tailored to your version.
- The central system must have at least 20 dialog work processes and 10 background work processes.
- Ensure outbound HTTPS access to the New Relic data center is allowed.

<CollapserGroup>
  <Collapser
    id="us-eu-endpoints"
    title="US/EU data center endpoints"
  >
    <table>
      <thead>
        <tr>
          <th style={{ width: '200px' }}>
            Connection
          </th>
          <th>
            US data center
          </th>
          <th>
            EU data center endpoint
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
          Metrics
          </td>
          <td>
          https://metric-api.newrelic.com/metric/v1
          </td>
          <td>
          https://metric-api.eu.newrelic.com/metric/v1
          </td>
        </tr>
        <tr>
          <td>
          Events
          </td>
          <td>
          https://insights-collector.newrelic.com/v1/accounts/events
          </td>
          <td>
          https://insights-collector.eu01.nr-data.net/accounts/event/v1
          </td>
        </tr>
        <tr>
          <td>
          Logs
          </td>
          <td>
          https://log-api.newrelic.com/log/v1
          </td>
          <td>
          https://log-api.eu.newrelic.com/log/v1
          </td>
        </tr>
        <tr>
          <td>
          Traces
          </td>
          <td>
          https://trace-api.newrelic.com/trace/v1
          </td>
          <td>
          https://trace-api.eu.newrelic.com/trace/v1
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

- Adjust proxy server policies for accessing New Relic if required. Ensure proxy settings are configured:
  - Server domain name/IP address and port.
  - Proxy access credentials, if authentication is necessary.

- Modify firewall policies to allow HTTPS traffic to New Relic if blocked.
    <Callout variant="tip">
      These connections can be set in the **Central Monitoring System** using **SAP Transaction SM59** and tested. Refer to the [Set HTTP Destination to New Relic Cloud](/docs/sap-solutions/additional-resources/detailed-configuration/#set-http-destination-to-new-relic-cloud) for more details.
    </Callout>

- For each monitored system specified, use transaction `SM59` and the remote system ID to create **RFC Destination** and test connections. Refer to the [Create RFC destinations for monitored systems](/docs/sap-solutions/additional-resources/detailed-configuration/#create-rfc-for-monitored-systems) for more details.

    <Callout variant="tip">
      Ensure the RFC user has the `/NEWR/DATA_PROVIDER` role assigned.
    </Callout>

- Ensure the following for monitoring remote HANA databases:
  - The central monitoring system should have access to the HANA Server and tenant DB port.
  - If your central monitoring system is not an `S4HANA` system, ensure one of the following components is installed:
    - HANA Client v2.0 (version needs to be compatible with the HANA DB)
    - HANA Client Lib file:
        - `libSQLDBCHDB.so` (Linux)
        - `libSQLDBCHDB.dll` (Windows)
        - The library should be located in the SAP Kernel folder and owned by the SID Admin ID (e.g., sd1adm).
  - For each remote HANA database, use transaction `SAP DBACOCKPIT` to create a DB Connection. Refer to [Create DB connection] for details.

## Monitor BTP account

To monitor a BTP account, you need either a CloudALM instance set up to monitor the BTP account, or a subscription to the Process Integration Runtime service (applicable only to integration monitoring). Service keys are required for connection authentication. For more information, see [How to retrieve the service keys](/docs/sap-solutions/additional-resources/obtain-service-key).

Service keys are also used to create [External HTTP destinations](docs/sap-solutions/additional-resources/detailed-configuration/#create-authentication-endpoint) and serve as the API host for API data providers.