---
title: "Detailed configuration"
metaDescription: "Detailed configuration instructions for SAP systems."
freshnessValidatedDate: never
---

This section provides detailed instructions for setting up the system.

## Upload authorization role [#upload-authorization-role]

1. Use `SAP transaction PFCG`.
2. Go to **Role** > **Upload** and upload the file **_NEWR_DATA_PROVIDER.SAP** from the installation package.
3. Confirm the role `/NEWR/DATA_PROVIDER` is to be loaded.
    <img
      title="Authorization Role"
      alt="A screenshot displaying the authorization role upload"
      src="/images/authorisation-role.webp"
      width="500"
    />
4. Click the <img src="/images/change-icon.webp" class="inline" style={{height: "22px", width: "22px"}} alt="change icon in SAP" title="Change icon indicator in SAP" /> icon once loaded.
5. In the **Authorizations** tab, select <img src="/images/change-icon.webp" class="inline" style={{height: "20px", width: "20px"}} alt="change icon in SAP" title="Change icon indicator in SAP" /> **Change Authorization Data**, and activate using <img src="/images/activate-option.webp" class="inline" style={{height: "25px", width: "30px"}} alt="activate icon in SAP" title="Activate Icon in SAP" /> icon.
  <img
      title="Authorizations Tab"
      alt="A screenshot displaying the authorization tab and Change Authorization Data in SAP upload"
      src="/images/sap-authorization-1.webp"
      width="500"
      />
6. If a profile name is suggested, click the green check icon.
7. Verify that the message **Profile(s) were updated** appears on the status bar.

## Create New Relic RFC user ID [#create-rfc-user-id]

After activating the authorization profile, use transaction `SU01` to create a new RFC user ID (e.g., `NR4SAPDP`). Set the user type to **System** or **Communication** and add the role `/NEWR/DATA_PROVIDER`.

<img
      title="Create New RFC User"
      alt="A screenshot displaying the creation of a new RFC user in SAP"
      src="/images/sap-create-rfc-user.webp"
      width="500"
    />

## Create RFC destinations for monitored systems [#create-rfc-for-monitored-systems]

Use transaction `SM59` to create an RFC destination for each monitored system.

1. Select the **ABAP Connections** and click the **Create** icon to set up a new RFC destination.
2. Enter the following RFC destination information:
    - **RFC Destination**: Enter the destination name. We recommend to name the RFC destination as `NR_<SYSID>CLNT<CLNT#>`. For example, `NR_SAPSYSCLNT100`.
    - **Connection Type**: Select **3** (ABAP Connection).
    - **Description**: Provide a brief description of the RFC destination.
3. Click the **Technical Settings** tab and enter the below options:
    - **Target Host**: Enter the fully qualified domain name (FQDN) or IP address of the monitored system.
    - **Instance No.**: Enter the instance number of the monitored system.
    - **Save as**: Choose either Host or IP based on your entry for the **Target Host**.
    - **Gateway Host and Service**: Specify the **Gateway Host** and **Service** if necessary.
  <img
      title="Create RFC destinations for monitored systems"
      alt="A screenshot displaying the how to create RFC destinations for monitored systems"
      src="/images/rfc-destination.webp"
      width=""
      />
4. Click on the **Logon & Security** tab.
    - **User**: Enter the user created for this ABAP connection, which is NR4SAPDP.
    - **Password**: Enter the password for the NR4SAPDP user.
5. Once enterng all the required information, click the **Save** icon.
6. Test the connection and authorization to ensure that the RFC destination is functioning correctly:
    - **Connection Test**: Select **Utility > Test > Connection Test** or click **Connection Test**.
    - **Authorization Test**: Select **Utility > Test > Authorization Test**.
  <Callout variant="important">
    Ensure that the test results are successful.
  </Callout>

## Set HTTP destination to New Relic cloud

1. In the SAP GUI, enter the transaction code `SM59` and select **HTTP Connections to External Server** to set up a new HTTP connection.
  <Callout variant="important">
    Ensure to create individual RFC destination for Events, Logs, Metrics, and Traces separately.
  </Callout>
2. Enter a **Destination Name** (e.g., `NR_API_EVENT`).
3. Set **Connection Type** to `G` (HTTP Connections to External Server).
4. Enter the **Target Host**, **Service No.** as (443) (see [standard port](/docs/sap-solutions/additional-resources/network-accessibility) for HTTPS), and **Path Prefix** (see [Installation Readiness Checklist](/docs/sap-solutions/additional-resources/installation-readiness) for details).
5. If a proxy is required, configure it on the **Technical Settings** tab.
6. On the **Security Options** tab, check the **Active** radio button for SSL.
  <img
      title="HTTP destination to New Relic"
      alt="A screenshot displaying the connection setup for HTTP destination to New Relic"
      src="/images/http-destination-to-new-relic.webp"
      width=""
      />
7. If needed, download the root certificate from [New Relic](https://one.newrelic.com) and add it to SAP using transaction `STRUST`.
8. Use **Connection Test** to verify the connection. A successful connection will prompt to **Enter Logon Data**. If the test times out, check your firewall settings.
9. Repeat this procedure for all New Relic API endpoints.


























## Create database connection [#create-database-connection]

Step-by-step guide on how to define remote HANA DB connections using the SAP transaction `DBACOCKPIT`:

1. In the left pane, double-click on **Database Connections** to open the section where you can manage database connections.
2. Click **Add** to create a new database connection.
3. Enter the database details:
    - **Connection Name:** Enter a name for the connection, preferably the same as the SAP system id for easy identification.
    - **Database System:** Select **HANA Database** from the dropdown menu.
    - **Database User ID:** Enter the user id of your HANA database. It is recommended to use `NRAGENT`.
    - **Password:** Enter the password for the database user id.
    - **Confirm Password:** Re-enter the password to confirm it.
    - **Database Host:** Enter the hostname or IP address of the HANA database server.
    - **SQL Port:** Enter the SQL port number for the HANA database.
  <img
      title="SAP HANA database"
      alt="A screenshot displaying the SAP HANA database installation"
      src="/images/sap-hana-database.webp"
      width="800"
      />
4. Click **Save**.
5. To verify the connection, click **Test**. Ensure that the connection test is successful to confirm that the database connection is correctly configured.