---
title: 'Query your change tracking data'
metaDescription: "Learn how to query the data captured by New Relic's change tracking feature."
freshnessValidatedDate: never
---

After setting up change tracking and viewing your changes in the New Relic UI, you can create custom queries to analyze change patterns, build dashboards, and set up automated reporting. This page shows you how to query change tracking data using NRQL and NerdGraph.

## Choose your query method [#query-methods]

New Relic provides two primary methods for querying change tracking data, each suited for different use cases.

### When to use NRQL [#when-nrql]

Use [NRQL](/docs/query-your-data/nrql-new-relic-query-language/get-started/introduction-nrql-new-relics-query-language/) (New Relic Query Language) when you want to:

* **Create dashboards**: Build custom charts and visualizations for ongoing monitoring
* **Analyze time-series data**: Correlate changes with performance metrics over time
* **Set up alerts**: Create alert conditions based on change patterns
* **Perform statistical analysis**: Calculate averages, percentages, and trends

**Data sources for NRQL:**
* `ChangeTrackingEvent` - Events created using the new `changeTrackingCreateEvent` mutation
* `Deployment` - Legacy deployment events created using `changeTrackingCreateDeployment`

### When to use NerdGraph [#when-graphql]

Use [NerdGraph](/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph/) (GraphQL API) when you want to:

* **Programmatic access**: Integrate change data into external tools and workflows
* **Cross-account queries**: Retrieve data from multiple New Relic accounts
* **Real-time applications**: Build applications that need live change data
* **Bulk data export**: Extract large datasets for analysis in external systems

**Advantages of NerdGraph:**
* Access to related entity information
* Advanced filtering capabilities
* Cross-account data aggregation
* Real-time API responses


## NRQL query examples [#nrql-examples]

Use these examples in the [query builder](/docs/query-your-data/explore-query-data/query-builder/introduction-query-builder/) or when creating dashboards and alerts.

<Callout variant="tip">
  For complete attribute definitions, see our [data dictionary](/attribute-dictionary/?dataSource=Change+tracking).
</Callout>

### Basic change tracking queries [#basic-nrql]

**Get all change events from the past week:**
```sql
SELECT *
FROM ChangeTrackingEvent
SINCE 1 week ago
```

**Get all legacy deployment events from the past month:**
```sql
SELECT *
FROM Deployment
SINCE 30 days ago
```

**Count changes by category over time:**
```sql
SELECT count(*)
FROM ChangeTrackingEvent
FACET category
SINCE 1 week ago
TIMESERIES
```

**List recent changes with key details:**
```sql
SELECT timestamp, category, type, user, shortDescription, entity.name
FROM ChangeTrackingEvent
SINCE 1 day ago
ORDER BY timestamp DESC
```

### Performance correlation queries [#correlation-nrql]

**Compare transaction errors with change markers:**
```sql
SELECT count(*)
FROM TransactionError
WHERE appName = 'YOUR_APP_NAME' AND http.statusCode > 300
SINCE 1 month ago
TIMESERIES
```

**Analyze response time around deployments:**
```sql
SELECT average(duration)
FROM Transaction
WHERE appName = 'YOUR_APP_NAME'
SINCE 1 week ago
TIMESERIES
```

**Track error rates by change category:**
```sql
SELECT count(*)
FROM TransactionError
WHERE entity.guid IN (
  SELECT entity.guid
  FROM ChangeTrackingEvent
  WHERE category = 'Deployment'
  SINCE 1 day ago
)
FACET entity.name
SINCE 1 day ago
TIMESERIES
```

### Advanced analysis queries [#advanced-nrql]

**Changes grouped by user activity:**
```sql
SELECT count(*), latest(timestamp)
FROM ChangeTrackingEvent
WHERE user IS NOT NULL
FACET user
SINCE 1 month ago
ORDER BY count DESC
```

**Deployment frequency by application:**
```sql
SELECT count(*)
FROM ChangeTrackingEvent
WHERE category = 'Deployment'
FACET entity.name
SINCE 1 month ago
ORDER BY count DESC
```

**Feature flag changes with custom attributes:**
```sql
SELECT timestamp, featureFlagId, customAttributes
FROM ChangeTrackingEvent
WHERE category = 'Feature Flag'
SINCE 1 week ago
ORDER BY timestamp DESC
```

**Business events impact analysis:**
```sql
SELECT count(*)
FROM ChangeTrackingEvent
WHERE category = 'Business Event'
FACET type, customAttributes['region']
SINCE 1 month ago
```

### Dashboard-ready queries [#dashboard-nrql]

**Change frequency heatmap:**
```sql
SELECT count(*)
FROM ChangeTrackingEvent
FACET category, type
SINCE 1 month ago
```

**Recent changes timeline:**
```sql
SELECT timestamp, category, shortDescription, entity.name
FROM ChangeTrackingEvent
SINCE 1 week ago
ORDER BY timestamp DESC
LIMIT 50
```

**User activity summary:**
```sql
SELECT count(*), uniqueCount(entity.guid) as 'Entities Modified'
FROM ChangeTrackingEvent
WHERE user IS NOT NULL
FACET user
SINCE 1 month ago
ORDER BY count DESC
LIMIT 10
```

## NerdGraph query examples [#graphql-examples]

Use these examples in the [NerdGraph explorer](/docs/apis/nerdgraph/get-started/nerdgraph-explorer) or in your applications.

### Basic NerdGraph queries [#basic-graphql]

**List recent change events across all accounts:**
```graphql
{
  actor {
    changeTracking {
      changeTrackingSearch {
        changeEvents {
          shortDescription
          category
          type
          changeTrackingId
          customAttributes
          description
          groupId
          timestamp
          user
          entity {
            guid
            name
            accountId
          }
        }
      }
    }
  }
}
```

**Query with time window filter:**
```graphql
{
  actor {
    changeTracking {
      changeTrackingSearch(
        filter: {
          timeWindow: {
            startTime: 1678886400000,
            endTime: 1679491200000
          }
        }
      ) {
        changeEvents {
          shortDescription
          category
          type
          timestamp
          user
          entity {
            guid
            name
          }
        }
      }
    }
  }
}
```

### Entity-specific queries [#entity-graphql]

**Filter by specific entity:**
```graphql
{
  actor {
    changeTracking {
      changeTrackingSearch(
        filter: {
          query: "entity.guid='YOUR_ENTITY_GUID'"
        }
      ) {
        changeEvents {
          shortDescription
          category
          type
          changeTrackingId
          timestamp
          customAttributes
          entity {
            guid
            name
            domain
            type
          }
        }
      }
    }
  }
}
```

**Query deployment events for specific entity:**
```graphql
{
  actor {
    entity(guid: "YOUR_ENTITY_GUID") {
      deploymentSearch(
        filter: {
          timeWindow: {
            startTime: 1678886400000,
            endTime: 1679491200000
          }
        }
      ) {
        results {
          version
          entityGuid
          timestamp
          changelog
          commit
          deepLink
          deploymentId
          description
          deploymentType
          groupId
          user
        }
      }
    }
  }
}
```

### Advanced filtering [#advanced-graphql]

**Filter by user and limit results:**
```graphql
{
  actor {
    changeTracking {
      changeTrackingSearch(
        filter: {
          query: "user = 'developer@example.com'",
          limit: 10
        }
      ) {
        changeEvents {
          shortDescription
          category
          type
          timestamp
          user
          groupId
          customAttributes
        }
      }
    }
  }
}
```

**Multi-account query with account filter:**
```graphql
{
  actor {
    changeTracking {
      changeTrackingSearch(
        filter: {
          accountIds: [1234567, 7654321],
          timeWindow: {
            startTime: 1678886400000,
            endTime: 1679491200000
          }
        }
      ) {
        changeEvents {
          shortDescription
          category
          timestamp
          entity {
            guid
            name
            accountId
          }
        }
      }
    }
  }
}
```

**Query with custom attribute filtering:**
```graphql
{
  actor {
    changeTracking {
      changeTrackingSearch(
        filter: {
          query: "customAttributes.environment = 'production'"
        }
      ) {
        changeEvents {
          shortDescription
          category
          type
          customAttributes
          timestamp
          entity {
            guid
            name
          }
        }
      }
    }
  }
}
```

## Create custom dashboards [#custom-dashboards]

Use your queries to build comprehensive dashboards for change tracking analysis.

### Dashboard components [#dashboard-components]

**Change frequency chart:**
```sql
SELECT count(*)
FROM ChangeTrackingEvent
FACET category
SINCE 1 month ago
TIMESERIES 1 day
```

**Top active users:**
```sql
SELECT count(*)
FROM ChangeTrackingEvent
WHERE user IS NOT NULL
FACET user
SINCE 1 month ago
ORDER BY count DESC
LIMIT 10
```

**Recent changes table:**
```sql
SELECT timestamp, category, type, shortDescription, user, entity.name
FROM ChangeTrackingEvent
SINCE 1 week ago
ORDER BY timestamp DESC
LIMIT 25
```

**Deployment success tracking:**
```sql
SELECT count(*)
FROM ChangeTrackingEvent
WHERE category = 'Deployment'
FACET customAttributes['status']
SINCE 1 month ago
TIMESERIES
```

### Dashboard best practices [#dashboard-best-practices]

* **Time range consistency**: Use consistent time ranges across related charts
* **Entity filtering**: Add entity filters to focus on specific applications or services
* **Performance correlation**: Include performance metrics alongside change data
* **Alert integration**: Set up alerts based on dashboard queries

## Query performance optimization [#query-optimization]

### NRQL optimization tips [#nrql-optimization]

* **Use specific time ranges**: Avoid overly broad time windows for better performance
* **Limit result sets**: Use `LIMIT` clauses to prevent large result sets
* **Index-friendly filters**: Filter by indexed attributes like `category`, `type`, and `entity.guid`
* **Avoid complex calculations**: Use simple aggregation functions when possible

**Example of optimized query:**
```sql
SELECT count(*)
FROM ChangeTrackingEvent
WHERE category = 'Deployment' AND entity.guid = 'YOUR_ENTITY_GUID'
SINCE 7 days ago
TIMESERIES 1 hour
LIMIT 500
```

### NerdGraph optimization tips [#graphql-optimization]

* **Request only needed fields**: Specify only the fields you actually need
* **Use appropriate filters**: Apply filters server-side rather than client-side
* **Batch related queries**: Combine related queries in a single request
* **Implement pagination**: Use limit and cursor-based pagination for large datasets

## Data retention and limits [#data-retention-limits]

Understanding data constraints helps you design effective queries:

* **Change events retention**: 13 months for both `ChangeTrackingEvent` and `Deployment` data
* **NRQL query limits**: 
  - Results limited to 2,000 data points for `TIMESERIES`
  - 5,000 results maximum for faceted queries
  - 500 unique facet values maximum
* **NerdGraph limits**:
  - 1,000 change events per query by default
  - Use pagination for larger datasets
  - Query complexity limits apply

## Integration examples [#integration-examples]

### Webhook integration [#webhook-integration]

Query change data to trigger external notifications:

```graphql
{
  actor {
    changeTracking {
      changeTrackingSearch(
        filter: {
          timeWindow: {
            startTime: 1679000000000,
            endTime: 1679086400000
          },
          query: "category = 'Deployment' AND customAttributes.environment = 'production'"
        }
      ) {
        changeEvents {
          changeTrackingId
          shortDescription
          timestamp
          entity {
            name
            guid
          }
          customAttributes
        }
      }
    }
  }
}
```

### Automated reporting [#automated-reporting]

Create scheduled reports using NRQL queries:

```sql
SELECT count(*) as 'Total Changes',
       filter(count(*), WHERE category = 'Deployment') as 'Deployments',
       filter(count(*), WHERE category = 'Feature Flag') as 'Feature Flags',
       uniqueCount(entity.guid) as 'Affected Entities',
       uniqueCount(user) as 'Active Users'
FROM ChangeTrackingEvent
SINCE 1 week ago
```

## Related documentation [#related-docs]

<DocTiles>
    <DocTile title="Notify your team" path="/docs/change-tracking/change-tracking-webhooks">Learn how to set up notifications for your change tracking events.</DocTile>
    <DocTile title="Introduction to Change Tracking" path="/docs/change-tracking/overview">Get an overview of change tracking concepts and benefits.</DocTile>
    <DocTile title="View and analyze changes" path="/docs/change-tracking/change-tracking-view-analyze">Learn how to view and analyze your change tracking data.</DocTile>

</DocTiles>
