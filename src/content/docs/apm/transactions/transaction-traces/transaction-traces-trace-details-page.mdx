---
title: 'Transaction traces: Trace details page'
tags:
  - APM
  - Transactions
  - Transaction traces
metaDescription: APM's Trace Details page shows additional timing details about the individual segments that make up a transaction trace.
redirects:
  - /docs/site/gray-and-blue-bars-in-transaction-traces
  - /docs/features/transaction-trace-details
  - /docs/traces/transaction-trace-details
  - /docs/site/web-transactions
  - /docs/apm/traces/transaction-traces/transaction-trace-details
  - /docs/apm/traces/transactions/transaction-trace-details
  - /docs/apm/transactions/transaction-traces/transaction-trace-details
freshnessValidatedDate: never
---

import apmTransactionTraceDetails from 'images/apm_screenshot-crop_transaction-trace-details.webp'

import apmIconDb from 'images/apm_icon_icon-db.webp'

import apmIconStackTrace from 'images/stack-trace-icon.webp'

import apmIconLatency from 'images/latency-icon.webp'

import apmIcoWebTransactions from 'images/apm_icon_ico-web-transactions.webp'

import apmRedAlert from 'images/apm_icon_red-alert.webp'

import apmYellowAlert from 'images/apm_icon_yellow-alert.webp'

import newRelicDistributedTracingExternalIcon from 'images/new-relic-distributed-tracing-external-icon.webp'

import newRelicDistributedTracingServiceIcon from 'images/new-relic-distributed-tracing-service-icon.webp'

import newRelicDistributedTracingInprocessIcon from 'images/new-relic-distributed-tracing-inprocess-icon.webp'

import distributedTracingTraceDetailsPageTimelineView from 'images/distributed-tracing-trace-details-page-timeline-view.webp'

import distributedTracingTraceDetailsPageLatencyView from 'images/distributed-tracing-trace-details-page-latency-view.webp'

import newRelicDistributedTracingServiceIcon from 'images/new-relic-distributed-tracing-service-icon.webp'

import newRelicDistributedTracingDatabasesIcon from 'images/new-relic-distributed-tracing-databases-icon.webp'


In [APM](/docs/apm/new-relic-apm/getting-started/welcome-new-relic-apm), the **Trace details** tab shows the timing of individual segments in a [transaction trace](/docs/apm/transactions/transaction-traces/transaction-traces). This document describes the sections and features of the **Trace details** tab.

## Trace details page functions [#options]

<img
    title="transaction trace details"
    alt="A screenshot depicting the transaction trace details view."
    src={apmTransactionTraceDetails}
/>

<figcaption>
  Go to **[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > APM & services > (select an app) > Monitor > Transactions > (select a transaction trace) > Trace details.**
</figcaption>

The **Trace details** page displays a table and waterfall with the timing data for the segments in a transaction, plus additional features and functions.
Additional tabs are available to view all segment attributes and database queries recorded during the trace.

<table>
  <thead>
    <tr>
      <th width={200}>
        **Trace details page**
      </th>

      <th>
        **Description**
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        Primary trace data
      </td>

      <td>
        The top of each transaction trace UI page shows several primary pieces of data, including the trace time, response time, and, if available, CPU info. Also, sometimes the UI may indicate a [partial trace](#partial).

        When the trace is derived from Distributed tracing, it also contains a link to view the full distributed that includes this transaction trace.
      </td>
    </tr>
    
    <tr>
      <td>
        Header controls
      </td>

      <td>
        The trace details header contains a search field and may include a slow spans drop down. The search field will identify nodes in the waterfall where the name or id matches your search string; when multiple matches exist it will provide a set of controls to move through the waterfall.

        The slow spans dropdown appears when at least one node meets the criteria for [slow spans.](#slow-spans) Selecting an option from this dropdown will select the corresponding node in the waterfall.
      </td>
    </tr>

    <tr>
      <td>
        Time consumed by segment, Latency
      </td>

      <td>
        The [Latency](#latency) view contains a pie chart and table which present call counts, durations, and contributions to slow response time faceted by service name. This view is shown by default when loading into the Trace detail tab.
      </td>
    </tr>

    <tr>
      <td>
        Trace timeline
      </td>

      <td>
        The [trace timeline](#timeline) view contains an interactive condensed visual display of the trace. The timeline view can be accessed by selecting the Timeline option at the top-right of the component.
      </td>
    </tr>

    <tr>
      <td>
        Trace waterfall
      </td>

      <td>
        The waterfall displays service names and durations. Fast and repeat calls may be [automatically grouped together](#rollup). Sometimes you may see [**Application code**](#application-code) as the name of a segment or subsegment.

        Use the expand and collapse dropdown arrows to expand or collapse the entire waterfall.
        When at least one [slow span](#slow-spans) exists on the trace, use the Slow spans focus mode to minimize all segments not reported as slow and select the first slow node in the trace.
      </td>
    </tr>

    <tr>
      <td>
        Segment icons
      </td>

      <td>
        [Icons](#icons) represent significant characteristics of the segments.
      </td>
    </tr>

  </tbody>
</table>

## Slow spans [#slow-spans]

A node that is marked as a *Slow span* meets the following criteria:
* The segment is a leaf or exit node: which means that this node will have no children.
* The segment has an exclusive duration greater than or equal to 25% of the total trace duration.

## Exclusive duration [#exclusive-duration]
The exclusive duration of a segment is the time spent in application code when not awaiting any external requests.

## Latency view [#latency]

The latency view shows latency contributions for the slowest 6 services/components involved in the trace, as well as the number of slow spans per service.
The reported duration of a service is the sum of the [Exclusive duration](#exclusive-duration) for all nodes originating from that service.
Clicking on a service (via the pie chart or table) will select the first node from that service in the waterfall.
When more than 6 services contribute to a trace, there may be a category labeled **Other** which contains rolled-up data from all services in the trace excluding the slowest 6. The **Other** category does not respond to clicks in the table or pie chart.
<img title="Latency view" alt="transaction-traces-latency-view.png" src={apmTransactionTraceLatency} />

## Timeline view [#timeline]

The trace timeline view contains an interactive condensed visual display of the trace. Node color presented in this view matches the [waterfall legend](#waterfall-legend) for the category of each segment.

Hovering over nodes in this view will display the segment name above the timeline. Clicking on a node within this view will select the same node in the waterfall and open the segment details pane. A horizontal drag on this view will filter the nodes presented in the waterfall to those that occur within the selected window. You may change the filtered window by manually moving the green scrubbers or clicking the **Reset timeline** button.

<img title="Timeline view" 
alt="transaction-traces-timeline-view.png" 
src={apmTransactionTraceTimeline} />


## Trace Waterfall [#waterfall]
The waterfall displays a node tree of segments arranged into branches by call path. Each segment in the waterfall displays information about the originating service including: service name, segment type, and segment duration.

### Waterfall controls
The waterfall view has a number of controls to make it easier to find segments that you care about:
Expand all/Collapse all: Use this option to toggle between showing every segment (including in-process spans) and showing collapsed segments.

Focus on: If your segment has [slow spans](#slow-spans), you'll see a Focus on checkbox. If you check this box, your waterfall view will collapse all other types of segments and only show color-coded slow segments. This is a quick way to find problematic segments.

### Waterfall legend [#waterfall-legend]
Segments in the waterfall
<img title="Slow segment background" 
alt="icon-alerts-yellow.png" 
src={apmYellowAlert}
/> 

Yellow: More than 25% of the total transaction time was spent in this segment.

<img title="Uninstrumented segment"
 alt="icon-uninstrumented.png"
  src={apmTransactionTraceAppCodeSwatch}
  /> 
  
  Striped: Segments with classes and methods that are not instrumented with the Agent's current configuration.

Each segment in the watefall displays a bar that represents their duration relative to the trace duration. The color of this bar indicates whether the segment belongs to Application code, Database calls, or External calls.

<img title="Trace waterfall" alt="transaction-traces-waterfall.png" src={apmTransactionTraceWaterfall} />

### Waterfall segment properties [#icons]

The UI indicates segment properties with these icons:

<table id="segment-types">
  <thead>
    <tr>
    <th style={{ width: "130px" }}>
      Segment property
    </th>

    <th style={{ width: "110px" }}>
      Indicator
    </th>

    <th>
      Description
    </th>
    </tr>
  </thead>

  <tbody>
    <tr>
    <td>
      Service
    </td>

    <td>
      <img
      title="new-relic-distributed-tracing-service-span-icon.png"
      alt="New Relic distributed tracing service icon"
      src={DistributedTracingServiceIcon}
      />
    </td>

    <td>
      This icon represents a node that's a service's entry point.
    </td>
    </tr>

    <tr id="in-process">
    <td>
      In-process
    </td>

    <td>
      <img
      title="new-relic-distributed-tracing-in-process-span-icon.png"
      alt="New Relic distributed tracing in-process span icon "
      src={DistributedTracingInprocessIcon}
      />
    </td>

    <td>
      This icon represents an in-process span, which is a node that takes place within a process (as opposed to a cross-process span). Examples: middleware instrumentation, user-created spans.
    </td>
    </tr>

    <tr>
    <td>
      Datastore
    </td>

    <td>
      <img
      title="new-relic-distributed-tracing-database-span-icon.png"
      alt="New Relic distributed tracing datastore node icon"
      src={DistributedTracingDatabasesIcon}
      />
    </td>

    <td>
      This icon represents a segment call to a datastore.
    </td>
    </tr>

    <tr>
    <td>
      External
    </td>

    <td>
      <img
      title="new-relic-distributed-tracing-external-span-icon.png"
      alt="New Relic distributed tracing external node icon"
      src={DistributedTracingExternalIcon}
      />
    </td>

    <td>
      This icon represents category representing a call to an external service made via HTTP.
    </td>
    </tr>

    <tr>
    <td>
      Browser app
    </td>

    <td>
      <img
      title="distributed-tracing-browser-span-icon.png"
      alt="New Relic distributed tracing browser node icon"
      src={distributedTracingBrowserSpanIcon}
      />
    </td>

    <td>
      This icon represents a [browser application segment](/docs/browser/new-relic-browser/browser-pro-features/browser-data-distributed-tracing).
    </td>
    </tr>

    <tr>
    <td>
      Lambda
    </td>

    <td>
      <img
      title="new-relic-distributed-tracing-lambda-icon.png"
      alt="New Relic distributed tracing external node icon"
      src={DistributedTracingLambdaIcon}
      />
    </td>

    <td>
      This icon represents a node from a [Lambda function](/docs/serverless-function-monitoring/aws-lambda-monitoring/get-started/introduction-new-relic-monitoring-aws-lambda).
    </td>
    </tr>
  </tbody>
</table>

### Waterfall segment grouping rules [#rollup]

The following section describes rules for grouping segments within the waterfall, you can see separeate rules for grouping segments in the [Latency section](#latency). Transaction traces that have a lot of segments can be hard to interpret. New Relic helps you by automatically grouping fast and/or repeated method calls into a single segment grouping.

For example, you might see a segment titled `7 fast method calls`. This means that, because of their fast completion, New Relic assumed these calls were unlikely to be a problem and grouped them together. You can expand that grouping to see the individual segments.

Rules underlying segment grouping include:

* **Fast calls:** When New Relic detects four or more consecutive segments with a duration of 7.5 ms or less, these are grouped into a single collapsed header.
* **Identical calls:** When New Relic detects four or more consecutive identical calls, this usually indicates an N+1 problem. These segments are collapsed. Expanding the collapsed node displays only the first three calls, not all calls.

### Segment details pane [#segment-details]

When you select a segment, a pane opens up with segment details. These details can be helpful for troubleshooting performance issues. This page has three tabs potential:

* **Performance**: Youâ€™ll see charts showing the average duration and throughput for that segment's operation, as well as how the performance of this specific segment compares to the average.
* **Attributes**: You can learn more about attributes from our [data dictionary](/attribute-dictionary/?dataSource=Distributed+Tracing&event=Span).
* **Details**: When available you can view details, such as the [segment's full name](/docs/distributed-tracing/ui-data/understand-use-distributed-tracing-ui/#prettified-span-names) and data source.

What a segment displays is based on its segment type. For example, the datastore segment's details will include the database query.

## Application code in traces [#application-code]

If a segment is listed as **Application code** in the table, it indicates that that section of code was not instrumented. You can use [custom instrumentation](/docs/apm/other-features/metrics/custom-instrumentation) to get more detail on that part of the code. Segments will often be listed as **Application code** for [partial traces](#partial).

## Partial traces [#partial]

For performance reasons, APM only captures the first 2,000 segments of a transaction trace (900 for Node.js). If a transaction trace exceeds that number of segments, the agent truncates the transaction trace and displays a message at the top of the **Details** page:

`This is a partial trace.`

The APM agents have differing rules for when to truncate segments.

<table>
  <thead>
    <tr>
      <th style={{ width: "150px" }}>
        APM agent
      </th>

      <th>
        Truncate segment rules
      </th>
    </tr>
  </thead>

  <tbody>

    <tr>
      <td>
        Go
      </td>

      <td>
        The segment duration must be greater than the [`TransactionTracer.SegmentThreshold`](/docs/agents/go-agent/configuration/go-agent-configuration#txn-tracer-segment-threshold) value set in your Go segment configuration.
      </td>
    </tr>

    <tr>
      <td>
        Java, .NET, Ruby
      </td>

      <td>
        These agents truncate traces chronologically. For more information, see the transaction tracer documentation for [Java](/docs/agents/java-agent/configuration/java-agent-configuration-config-file#h2-transaction-segments), [.NET](/docs/agents/net-agent/configuration/net-agent-configuration#transaction_tracer), or [Ruby](/docs/agents/ruby-agent/configuration/ruby-agent-configuration#transaction_tracer) as applicable.
      </td>
    </tr>

    <tr>
      <td>
        Node.js
      </td>

      <td>
        The Node.js agent only captures the first 900 segments of a transaction trace. For more information, see [Node.js transaction tracer configuration](/docs/agents/nodejs-agent/installation-configuration/nodejs-agent-configuration#tx_tracer_config).
      </td>
    </tr>

    <tr>
      <td>
        PHP
      </td>

      <td>
        Truncates based on segment duration; the slowest 2,000 segments are captured for the trace. For more information, see [PHP transaction tracer configuration](/docs/apm/transactions/transaction-traces/transaction-traces-trace-details-page/).
      </td>
    </tr>

    <tr>
      <td>
        Python
      </td>

      <td>
        Truncates based on segment duration; the slowest 2,000 segments are captured for the trace. For more information, see [Python transaction tracer configuration](/docs/agents/python-agent/configuration/python-agent-configuration#txn-tracer-settings).
      </td>
    </tr>
  </tbody>
</table>

## Distributed traces [#distributed-traces]

When a transaction trace is based on distributed trace data, you can view the full distributed trace by clicking on the distributed trace link in the page header.

The trace details page will display slightly different information when looking at a distributed trace instead of a transaction trace. 

* All attributes are grouped into a single `Attributes` section rather than being split out into the three default attribute types
* Segment metric names may differ slightly between distributed traces and transaction traces
* Stack traces are not displayed in segment attributes