---
title: record_llm_feedback_event (Python agent API)
type: apiDoc
shortDescription: Records an LLM feedback event
tags:
  - Agents
  - Python agent
  - Python agent API
metaDescription: 'Python API: This call records an LLM feedback event for querying in the AI Monitoring UI.'
redirects:
  - /docs/agents/python-agent/python-agent-api/recordllmfeedbackevent-python-agent-api
  - /docs/agents/python-agent/python-agent-api/record_llm_feedback_event
freshnessValidatedDate: never
---

## Syntax

```py
newrelic.agent.record_llm_feedback_event(trace_id, rating, category=None, message=None, metadata=None)
```

Records custom feedback events for LLM applications.

## Requirements

Python agent version 9.8.0 or higher.

## Description

This API records a feedback event of type `LlmFeedbackMessage` that can be viewed and queried in the New Relic UI. Feedback events correlate trace IDs between an AI-generated message and the feedback an end user submitted on it.
To correlate messages with feedback, you can obtain the trace ID of the active transaction via a call to [`current_trace_id`](/docs/apm/agents/python-agent/python-agent-api/currenttraceid-python-agent-api/) and pass it to the feedback call. This is required as these two events occur at two different endpoints.

## Parameters

<table>
  <thead>
    <tr>
      <th width="25%">
        Parameter
      </th>

      <th>
        Description
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `trace_id`

        _string_
      </td>

      <td>
        Required. ID of the trace where the chat completion(s) related to the feedback occurred. This ID can be obtained via a call to [`current_trace_id`](/docs/apm/agents/python-agent/python-agent-api/currenttraceid-python-agent-api/).
      </td>
    </tr>

    <tr>
      <td>
        `rating`

        _string_ or _int_
      </td>

      <td>
        Required. Rating provided by an end user (ex: “Good/Bad”, “1-10”).
      </td>
    </tr>

    <tr>
      <td>
        `category`

        _string_
      </td>

      <td>
        Optional. Category of the feedback provided by the end user (ex: “informative”, “inaccurate”).
      </td>
    </tr>

      <tr>
      <td>
        `message`

        _string_
      </td>

      <td>
        Optional. Freeform text feedback from an end user.
      </td>
    </tr>

      <tr>
      <td>
        `metadata`

        _dict_
      </td>

      <td>
        Optional. Set of key-value pairs to store any other desired data to submit with the feedback event.
      </td>
    </tr>
  </tbody>
</table>

## Return values

None.

## Examples

### Obtain trace ID and record feedback

Example of recording a feedback event:

```py
import newrelic.agent

def message(request):
    trace_id = newrelic.agent.current_trace_id()

def feedback(request):
    newrelic.agent.record_llm_feedback_event(trace_id=request.trace_id, rating=request.rating, metadata= {"my_key": "my_val"})
```
