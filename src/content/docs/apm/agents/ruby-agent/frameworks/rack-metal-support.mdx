---
title: Rack and Metal support
tags:
  - Agents
  - Ruby agent
  - Instrumented gems
metaDescription: How to capture Rack apps and Metals as controller actions in New Relic's Ruby agent.
redirects:
  - /docs/agents/ruby-agent/frameworks/rack-metal-support
  - /docs/general/rack-and-metal-support-in-the-ruby-agent
  - /docs/general/how-do-i-instrument-rack-or-metal
  - /docs/ruby/rack-and-metal-support-in-the-ruby-agent
freshnessValidatedDate: never
---

[Rack middlewares](/docs/agents/ruby-agent/frameworks/rack-middlewares) are automatically instrumented with Ruby agent version 3.9.0 or higher.

The `NewRelic::Agent::Instrumentation::Rack` module is deprecated. After upgrading to Ruby agent version 3.9.0 or higher, New Relic recommends that you remove any references to this module from your code. For more information, see [Instrumenting Metal controllers](/docs/agents/ruby-agent/frameworks/instrumenting-metal-controllers).
