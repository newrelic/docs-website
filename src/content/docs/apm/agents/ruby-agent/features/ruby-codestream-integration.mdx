---
title: Code-level metrics
tags:
  - Agents
  - Ruby agent
  - Supported features
metaDescription: Code-level metrics for Ruby can be displayed in your IDE using the New Relic CodeStream extension.
freshnessValidatedDate: never
---

Code-level metrics allow developers using the [New Relic CodeStream extension](/docs/codestream/observability/code-level-metrics) to see APM data displayed contextually in their IDE, alongside individual methods in the code. This allows developers to be more proactive about addressing performance issues as they write and review code.

## Getting started

First, [install](/docs/codestream/start-here/install-codestream) the New Relic CodeStream extension into your supported IDE of choice and log in.

<Callout variant="important">
  Code-level metrics are available in Ruby agent version 8.8.0 and higher. For versions 8.10.0 and higher, code-level metrics are enabled by default. For versions 8.8.0 and 8.9.0 they must be enabled via configuration. To enable code-level metrics, either set `code_level_metrics.enabled: true` in `newrelic.yml` or `NEW_RELIC_CODE_LEVEL_METRICS_ENABLED=true` as an environment variable.
</Callout>

## Agent attributes

The Ruby agent reports and attaches the following attributes to spans produced by your application:

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        <DNT>
          **Name**
        </DNT>
      </th>

      <th>
        <DNT>
          **Description**
        </DNT>
      </th>

      <th>
        <DNT>
          **Example**
        </DNT>
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `code.function`
      </td>

      <td>
        The name of the instrumented function (Ruby method). Note that class methods will be prefixed by `self.`.
      </td>

      <td>
        create
      </td>
    </tr>

    <tr>
      <td>
        `code.filepath`
      </td>

      <td>
        The absolute path to the source code file in which `code.function` is defined
      </td>

      <td>
        /app/app/controllers/widgets_controller.rb
      </td>
    </tr>

    <tr>
      <td>
        `code.lineno`
      </td>

      <td>
        The line number where `code.function` is defined in code.filepath
      </td>

      <td>
        1138
      </td>
    </tr>

    <tr>
      <td>
        `code.namespace`
      </td>

      <td>
       The namespace (class or module name) in which `code.function` is defined
      </td>

      <td>
        WidgetsController
      </td>
    </tr>
  </tbody>
</table>

<Callout variant="important">
  Not every method in your application code will be instrumented with the above attributes. As of version 8.10.0, the Ruby agent will provide code-level metrics for Rails controller methods, `ActiveJob` methods, and any Ruby method which has been configured to be manually traced.
</Callout>
