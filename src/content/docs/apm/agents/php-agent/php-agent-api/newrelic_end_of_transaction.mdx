---
title: newrelic_end_of_transaction (PHP agent API)
type: apiDoc
shortDescription: 'Stop timing the current transaction, but continue instrumenting it.'
tags:
  - Agents
  - PHP agent
  - PHP agent API
metaDescription: New Relic PHP agent API call to stop timing a transaction (but continue instrumenting it). Useful for streamed data.
redirects:
  - /docs/agents/php-agent/php-agent-api/newrelic_end_of_transaction
  - /docs/agents/php-agent/php-agent-api/newrelicendoftransaction-php-agent
---

## Syntax

```
newrelic_end_of_transaction()
```

Stop timing the current transaction, but continue instrumenting it.

## Requirements

Compatible with all agent versions.

## Description

Stop timing the web transaction immediately. Useful when a page is done with app code and is about to stream data (file download, audio or video streaming, and so on), and you don't want streaming time to count as part of the transaction run time. The agent sends data to the daemon at the end of the transaction.

This is especially relevant when the time taken to complete the operation is completely outside the bounds of your application. For example, a user on a very slow connection may take a very long time to download even small files, and you wouldn't want that download time to skew the real transaction time.

<Callout variant="tip">
  Compare [`newrelic_end_transaction()`](/docs/agents/php-agent/php-agent-api/newrelic_end_transaction), which ends instrumentation entirely.
</Callout>

## Parameters

This call does not accept any parameters.

## Examples

### Stop timing after streaming data [#streaming example]

```
function example() { 
    <var>... // computational logic</var>
    if (extension_loaded('newrelic')) { // Ensure PHP agent is available
        newrelic_end_of_transaction(); // Used to stop recording the transaction after computing for the transaction is complete, typically when streaming data 
    }
    <var>... //streaming data</var>
}
```

## For more help

If you need more help, check out these support and learning resources:

* Suggest a change and learn how to [contribute](https://github.com/newrelic/newrelic-php-agent/issues) to our PHP agent open source repository.
* Browse the [Explorers Hub](https://discuss.newrelic.com/) to get help from the community and join in discussions.
* Find [answers on our sites and learn how to use our support portal](/docs/using-new-relic/welcome-new-relic/get-started/find-help-use-support-portal/).
* Run [New Relic Diagnostics](/docs/using-new-relic/cross-product-functions/troubleshooting/new-relic-diagnostics/), our troubleshooting tool for Linux, Windows, and macOS.
* Review New Relic's [data security](/docs/security/) and [licenses](/docs/licenses/) documentation.
