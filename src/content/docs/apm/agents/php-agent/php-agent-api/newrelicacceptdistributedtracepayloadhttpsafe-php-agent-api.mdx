---
title: newrelic_accept_distributed_trace_payload_httpsafe (PHP agent API)
type: apiDoc
shortDescription: Accepts a distributed trace payload that includes an HTTPSafe (Base64 encoded) JSON string.
tags:
  - Agents
  - PHP agent
  - PHP agent API
metaDescription: Distributed tracing allows you to see the path a request takes as it travels through a distributed system. Use this API to accept an HTTPSafe/Base64 payload.
redirects:
  - /docs/agents/php-agent/php-agent-api/newrelicacceptdistributedtracepayloadhttpsafe-php-agent-api
  - /docs/agents/php-agent/php-agent-api/newrelicacceptdistributedtracepayloadhttpsafe-php-agent-api-0
---

## Syntax

```
newrelic_accept_distributed_trace_payload_httpsafe(string $httpsafe_payload, string $transport_type)
```

Accepts a distributed trace payload that includes an HTTPSafe (Base64 encoded) JSON string.

## Requirements

Requires PHP agent [version 8.4 or higher](/docs/release-notes/agent-release-notes/php-release-notes).

## Description

[Distributed tracing](/docs/agents/php-agent/features/distributed-tracing-php) allows you to see the path that a request takes as it travels through a distributed system. This is useful, for example, when individual transactions occur in multiple services, and you want to examine them as a complete transaction trace.

<Callout variant="important">
  With PHP agent [version 9.10 or](/docs/release-notes/agent-release-notes/php-release-notes) higher, the following JSON functions are now considered deprecated and will be removed in a future release:

  ```
  newrelic_create_distributed_trace_payload()newrelic_accept_distributed_trace_payload($payload)newrelic_accept_distributed_trace_payload_httpsafe($payload)
  ```

  Instead, use the API that is compatible with W3C Trace Context support, added in agent version 9.8. With this, the API for manually instrumenting applications has changed from the JSON payload related functions to the following header array forms:

  ```
  newrelic_insert_distributed_trace_headers($outbound_headers)newrelic_accept_distributed_trace_headers($inbound_headers)
  ```
</Callout>

## Parameters

<table>
  <thead>
    <tr>
      <th width="25%">
        Parameter
      </th>

      <th>
        Description
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `$httpsafe_payload`

        _string_
      </td>

      <td>
        Required. An HTTPSafe (Base64 encoded) JSON string representation of the payload.
      </td>
    </tr>

    <tr>
      <td>
        `$transport_type`

        _string_
      </td>

      <td>
        Optional. A string overriding the default transport type.

        Default values:

        * `HTTP` for web traffic
        * `Unknown` for non-web traffic

        Additional accepted values:

        * `AMQP`
        * `HTTP`
        * `HTTPS`
        * `IronMQ`
        * `JMS`
        * `Kafka`
        * `Other`
        * `Queue`
      </td>
    </tr>
  </tbody>
</table>

## Return values

Returns `true` to indicate success, or `false` if an error occurs.

## Examples

For examples of how and when to use this API method, see the documentation to [manually instrument applications and services](/docs/agents/php-agent/features/distributed-tracing-php#manual).