---
title: Go agent configuration
tags:
  - Agents
  - Go agent
  - Configuration
metaDescription: How to change the configuration settings of New Relic Go agent.
redirects:
  - /docs/agents/go-agent/configuration/go-agent-configuration
  - /docs/go-agent-configuration
  - /docs/agents/go-agent/instrumentation/go-agent-configuration
---

import goConfigPrecedence from 'images/go-config-precedence.png'

You can edit configuration settings for the Go agent to control some aspects of how New Relic monitors your app; for example:

* Turn high-security mode on.
* Add custom tags for filtering and sorting in the UI.
* Turn off the collection of errors, transaction events, transaction traces, and custom events.

## Configuration methods and precedence [#options]

The primary way to configure the Go agent is by modifying the `newrelic.Config` struct as part of calling `newrelic.NewApplication()`, which is part of the standard [installation process](/docs/agents/go-agent/installation/install-new-relic-go). With [Go agent versions 2.7.0 or higher](/docs/release-notes/agent-release-notes/go-release-notes), you can also set a limited number of configuration options using [server-side configuration in the UI](#server-side-configuration).

The Go agent follows this order of precedence for configuration. If enabled, server-side configuration overrides **all** corresponding values in the `newrelic.Config` struct, even if the server-side values are left blank.

<img
  title="New Relic Go agent: config order of precedence"
  alt="New Relic Go agent: config order of precedence"
  src={goConfigPrecedence}
/>

<figcaption>
  If server-side configuration is enabled with the Go agent, it overrides **all** corresponding values in the `newrelic.Config` struct, even if the server-side values are left blank.
</figcaption>

Here are detailed descriptions of each configuration method:

<CollapserGroup>
  <Collapser
    id="server-side-configuration"
    title="Server-side configuration (2.7.0 or higher)"
  >
    [Server-side configuration](/docs/agents/manage-apm-agents/configuration/server-side-agent-configuration) is available with [Go agent versions 2.7.0 or higher](/docs/release-notes/agent-release-notes/go-release-notes). This allows you to configure certain settings in the UI. This applies your changes automatically to all agents even if they run across multiple hosts. Where available, this document includes the UI labels for server-side config under individual config options as the **Server-side label**.

    You must still call `newrelic.NewApplication()` in your application process following the steps described in the [in-process configuration](#in-process-config). Configuration options set server-side will overwrite those set locally. Since not all configuration options are available server side, you may want to still update your `newrelic.Config` struct.

    <Callout variant="caution">
      If server-side config is enabled, the agent ignores any value in the `newrelic.Config` struct that **could** be set in the UI. Even if the UI value is empty, the agent treats this as an empty value and does not use the `newrelic.Config` value.
    </Callout>
  </Collapser>

  <Collapser
    id="in-process-config"
    title={<>In process <InlineCode>newrelic.Config</InlineCode> struct</>}
  >
    You configure your Go agent from the local in process `newrelic.Config` struct. This struct can be accessed when calling `newrelic.NewApplication()`.

    1. Add the following in the `main` function or in an `init` block:

       ```go
       app, err := newrelic.NewApplication(
           newrelic.ConfigAppName("Your Application Name"),
           newrelic.ConfigLicense(os.Getenv("NEW_RELIC_LICENSE_KEY")),
       )
       ```
       Note the use of `os.Getenv` to read your license key from the environment rather than hard-coding it as a string literal value passed to `newrelic.ConfigLicense`. We recommend that you do not place license keys or other sensitive information in your source code, as that may result in them being stored in your SCM repository and possibly revealed to unauthorized parties.
    2. Update values on the `newrelic.Config` struct to configure your application using `newrelic.ConfigOption`s. These are functions that accept a pointer to the `newrelic.Config` struct. Add additional `newrelic.ConfigOption`s to further configure your application. For example, you can use one of the predefined options to do common configurations:

       ```go
       app, err := newrelic.NewApplication(
           newrelic.ConfigAppName("Your Application Name"),
           newrelic.ConfigLicense(os.Getenv("NEW_RELIC_LICENSE_KEY")),
           // add debug level logging to stdout
           newrelic.ConfigDebugLogger(os.Stdout),
       )
       ```
    3. Or, you can create your own `newrelic.ConfigOption` to do more complex configurations:

       ```go
       app, err := newrelic.NewApplication(
           newrelic.ConfigAppName("Your Application Name"),
           newrelic.ConfigLicense(os.Getenv("NEW_RELIC_LICENSE_KEY")),
           newrelic.ConfigDebugLogger(os.Stdout),
           func(config *newrelic.Config) {
           	// add more specific configuration of the agent within a custom ConfigOption
           	config.HighSecurity = true
               config.CrossApplicationTracer.Enabled = false
           },
       )
       ```
  </Collapser>
</CollapserGroup>

## Change configuration settings [#make-config-changes]

To make Go agent configuration changes, set the values in the `newrelic.Config` struct from within a custom `newrelic.ConfigOption`. For example, to turn New Relic monitoring off temporarily for testing purposes, change the `Enabled` value to `false`:

```go
app, err := newrelic.NewApplication(
    newrelic.ConfigAppName("Your Application Name"),
    newrelic.ConfigLicense(os.Getenv("NEW_RELIC_LICENSE_KEY")),
    func(config *newrelic.Config) {
    	config.Enabled = false
    },
)
```

In this and the following examples, `config` represents your New Relic config struct, although you may have given it a different variable name when you [installed the Go agent](/docs/agents/go-agent/get-started/get-new-relic-go) and initiated the configuration in your app.

## General configuration settings [#general-settings]

<CollapserGroup>
  <Collapser
    id="license"
    title="License (REQUIRED)"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            String
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            (none)
          </td>
        </tr>

        <tr>
          <th>
            [Set in](#options)
          </th>

          <td>
            `newrelic.Config` struct
          </td>
        </tr>
      </tbody>
    </table>

    Specifies your New Relic [license key](/docs/subscriptions/license-key), used to associate your app's metrics with a New Relic account. The license and the app name are both set as part of the [New Relic installation process](/docs/agents/go-agent/get-started/get-new-relic-go#get-new-relic).
  </Collapser>

  <Collapser
    id="app-name"
    title="AppName (REQUIRED)"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            String
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `(none)`
          </td>
        </tr>

        <tr>
          <th>
            [Set in](#options)
          </th>

          <td>
            `newrelic.Config` struct
          </td>
        </tr>
      </tbody>
    </table>

    This is the [application name](/docs/apm/new-relic-apm/installation-configuration/name-your-application) used to aggregate data in the New Relic UI. You set both the license and the app name as part of the [New Relic installation process](/docs/agents/go-agent/get-started/get-new-relic-go#get-new-relic).

    To report data to [multiple apps at the same time](/docs/apm/new-relic-apm/installation-configuration/using-multiple-names-app), specify a list of names separated with a semicolon. Do not put a space before the semicolon itself. For example:

    ```go
    app, err := newrelic.NewApplication(
        newrelic.ConfigAppName("YOUR_APP_NAME;APP_GROUP_1;ALL_APPS"),
        newrelic.ConfigLicense(os.Getenv("NEW_RELIC_LICENSE_KEY")),
    )
    ```
  </Collapser>

  <Collapser
    id="enabled"
    title="Enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [Set in](#options)
          </th>

          <td>
            `newrelic.Config` struct
          </td>
        </tr>
      </tbody>
    </table>

    When `true`, the agent sends data from your app to the [New Relic collector](/docs/accounts-partnerships/education/getting-started-new-relic/glossary#collector).

    To turn off New Relic monitoring, set this to `false`.

    For example:

    ```go
    app, err := newrelic.NewApplication(
        newrelic.ConfigAppName("Your Application Name"),
        newrelic.ConfigLicense(os.Getenv("NEW_RELIC_LICENSE_KEY")),
        func(config *newrelic.Config) {
        	config.Enabled = false
        },
    )
    ```
    
    You may make use of the `ConfigEnabled` option to make this easier:
    ```go
    app, err := newrelic.NewApplication(
        newrelic.ConfigAppName("Your Application Name"),
        newrelic.ConfigLicense(os.Getenv("NEW_RELIC_LICENSE_KEY")),
	newrelic.ConfigEnabled(false),
    )
    ```

    This can be useful for installing New Relic in a development environment or for troubleshooting purposes. When `Enabled` is set to `false`:

    * The New Relic Go agent will not communicate with the New Relic collector.
    * The agent will not spawn goroutines.
    * The license key is not required during installation.
  </Collapser>

  <Collapser
    id="labels"
    title="Labels"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            map\[string]string
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            (none)
          </td>
        </tr>

        <tr>
          <th>
            [Set in](#options)
          </th>

          <td>
            `newrelic.Config` struct
          </td>
        </tr>
      </tbody>
    </table>

    Add [tags](/docs/apm/new-relic-apm/maintenance/labels-categories-organize-your-apps-servers).

    <CollapserGroup>
      <Collapser
        id="example-labels"
        title="Creating four tag pairs"
      >
        Here's an example of setting four tags:

        ```go
        app, err := newrelic.NewApplication(
            newrelic.ConfigAppName("Your Application Name"),
            newrelic.ConfigLicense(os.Getenv("NEW_RELIC_LICENSE_KEY")),
            func(config *newrelic.Config) {
                config.Labels = map[string]string{
                    "Env":    "Dev",
                    "Label2": "label2",
                    "Label3": "label3",
                    "Label4": "label4",
                }
            },
        )
        ```
      </Collapser>
    </CollapserGroup>
  </Collapser>

  <Collapser
    id="logger"
    title="Logger"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Interface
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            (none)
          </td>
        </tr>

        <tr>
          <th>
            [Set in](/docs/agents/go-agent/instrumentation/go-agent-configuration#options)
          </th>

          <td>
            `newrelic.Config` struct
          </td>
        </tr>
      </tbody>
    </table>

    You can use the `Logger` interface to [write Go log files](/docs/agents/go-agent/instrumentation/go-agent-logging) to a specific location or logging system.
  </Collapser>

  <Collapser
    id="high_security"
    title="HighSecurity"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            [Set in](#options)
          </th>

          <td>
            `newrelic.Config` struct
          </td>
        </tr>
      </tbody>
    </table>

    <Callout variant="important">
      This feature requires [Enterprise tier](https://www.newrelic.com/pricing).
    </Callout>

    [High security mode](/docs/accounts-partnerships/accounts/security/high-security) enforces certain security settings and prevents them from being overridden, so that the agent sends no sensitive data. High security mode does the following:

    * Turns SSL on
    * Turns off reporting of error message strings
    * Turns off reporting of custom events

      This setting must match the corresponding account setting in the UI. For example:

      ```go
      app, err := newrelic.NewApplication(
          newrelic.ConfigAppName("Your Application Name"),
          newrelic.ConfigLicense(os.Getenv("NEW_RELIC_LICENSE_KEY")),
          func(config *newrelic.Config) {
              config.HighSecurity = true
          },
      )
      ```

      The agent communicates with New Relic via HTTPS by default, and New Relic [requires HTTPS](/docs/apis/rest-api-v2/troubleshooting/301-response-rest-api-calls) for all traffic to APM and our REST API.
  </Collapser>

  <Collapser
    id="use-tls"
    title="UseTLS (DEPRECATED)"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [Set in](#options)
          </th>

          <td>
            `newrelic.Config` struct
          </td>
        </tr>
      </tbody>
    </table>

    <Callout variant="important">
      This option was removed in [agent version 2.0](/docs/release-notes/agent-release-notes/go-release-notes/go-agent-20).
    </Callout>

    Controls whether HTTPS or HTTP is used to send data to New Relic. The agent communicates with New Relic via HTTPS by default (which uses TLS protocol), and New Relic [requires HTTPS](/docs/apis/rest-api-v2/troubleshooting/301-response-rest-api-calls) for all traffic to APM and the New Relic REST API.
  </Collapser>

  <Collapser
    id="host-display-name"
    title="HostDisplayName"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            String
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            (none)
          </td>
        </tr>

        <tr>
          <th>
            [Set in](#options)
          </th>

          <td>
            `newrelic.Config` struct
          </td>
        </tr>
      </tbody>
    </table>

    This sets the [hostname displayed in the APM UI](/docs/apm/new-relic-apm/maintenance/add-rename-remove-hosts#display_name). This is an optional configuration.
  </Collapser>

  <Collapser
    id="transport"
    title="Transport"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            [http.RoundTripper](https://golang.org/pkg/net/http/#RoundTripper)
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            (none)
          </td>
        </tr>

        <tr>
          <th>
            [Set in](#options)
          </th>

          <td>
            `newrelic.Config` struct
          </td>
        </tr>
      </tbody>
    </table>

    This customizes [http.Client](https://golang.org/pkg/net/http/#Client) communication with New Relic collectors. This can be used to configure a proxy.
  </Collapser>

  <Collapser
    id="runtime-sampler"
    title="RuntimeSampler.Enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [Set in](#options)
          </th>

          <td>
            `newrelic.Config` struct
          </td>
        </tr>
      </tbody>
    </table>

    When `true`, the agent captures runtime statistics.
  </Collapser>
</CollapserGroup>

If you're using New Relic CodeStream to monitor performance from your IDE you may also want to [associate repositories with your services](/docs/codestream/how-use-codestream/performance-monitoring#repo-association) and [associate build SHAs or release tags with errors](/docs/codestream/how-use-codestream/performance-monitoring#buildsha).

## Configuring from the environment [#configuring-from-the-environment]

For greater flexibility, you can set many configuration options by setting environment variables instead of hardcoding them into your application's
source code. In order to use them, add a call to `ConfigFromEnvironment()` among your other configuration options:

```go
app, err := newrelic.NewApplication(
   newrelic.ConfigAppName("Your Application Name"),
   newrelic.ConfigLicense(os.Getenv("NEW_RELIC_LICENSE_KEY")),
   newrelic.ConfigFromEnvironment(),
)
```

Note that the environment variables will be read, and their corresponding entries in the `newrelic.Config` struct will be updated, at the
point in the list of options where `newrelic.ConfigFromEnvironment()` appears. If there are additional configuration options listed after
`ConfigFromEnvironment`, they may override the values set by `ConfigFromEnvironment`.

For example, if the following environment variables are set:
```
NEW_RELIC_LICENSE_KEY="your_license_key_here"
NEW_RELIC_APP_NAME="Your Application Name"
NEW_RELIC_CODE_LEVEL_METRICS_ENABLED="true"
NEW_RELIC_CODE_LEVEL_METRICS_PATH_PREFIX="myproject/src"
NEW_RELIC_LABELS="Env:Dev;Label2:label2;Label3:label3;Label4:label4"
```

then the following code:

```go
app, err := newrelic.NewApplication(
    newrelic.ConfigFromEnvironment(),
)
```

will accomplish the same result as the hard-coded equivalent:

```go
app, err := newrelic.NewApplication(
    newrelic.ConfigAppName("Your Application Name"),
    newrelic.ConfigLicense("your_license_key_here"),
    newrelic.ConfigCodeLevelMetricsEnabled(true),
    newrelic.ConfigCodeLevelMetricsPathPrefix("myproject/src"),
    func(config *newrelic.Config) {
        config.Labels = map[string]string{
            "Env":    "Dev",
            "Label2": "label2",
            "Label3": "label3",
            "Label4": "label4",
        }
    },
)
```

<Callout variant="tip">
   Environment variables must have a non-empty value in order to be read by `newrelic.ConfigFromEnvironment`.
</Callout>

## Custom events configuration [#custom-insights-events-settings]

You can create custom events and make them available for querying and analysis.

<CollapserGroup>
  <Collapser
    id="custom-insights-events-enabled"
    title="CustomInsightsEvents.Enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [Set in](#options)
          </th>

          <td>
            `newrelic.Config` struct
          </td>
        </tr>
      </tbody>
    </table>

    When `true`, the agent [sends custom events](/docs/insights/new-relic-insights/adding-querying-data/inserting-custom-events-new-relic-apm-agents#go) to [New Relic](/docs/insights/new-relic-insights/understanding-insights/new-relic-insights). This setting is overridden by [`HighSecurity`](/docs/go-agent-configuration#high_security), which disables custom events.

    To disable custom events, place the following in your Go app after the [New Relic config](/docs/agents/go-agent/get-started/get-new-relic-go#get-new-relic) is initiated:

    ```go
    app, err := newrelic.NewApplication(
        newrelic.ConfigAppName("Your Application Name"),
        newrelic.ConfigLicense(os.Getenv("NEW_RELIC_LICENSE_KEY")),
        func(config *newrelic.Config) {
            config.CustomInsightsEvents.Enabled = false
        },
    )
    ```
  </Collapser>
</CollapserGroup>

## Transaction events configuration [#transaction-events-settings]

Transaction events are used in collecting events corresponding to web requests and background tasks. Event data allows the New Relic UI to show additional information such as [histograms](/docs/applications-menu/histograms-viewing-data-distribution) and [percentiles](/docs/applications-menu/percentiles-comparing-ranked-data).

<CollapserGroup>
  <Collapser
    id="transaction-events"
    title="TransactionEvents.Enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [Set in](#options)
          </th>

          <td>
            `newrelic.Config` struct
          </td>
        </tr>
      </tbody>
    </table>

    When `true`, the agent collects transaction events.
  </Collapser>

  <Collapser
    id="txn-events-attributes"
    title="TransactionEvents.Attributes"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Struct
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            Enabled, no exclusions
          </td>
        </tr>

        <tr>
          <th>
            [Set in](#options)
          </th>

          <td>
            `newrelic.Config` struct
          </td>
        </tr>
      </tbody>
    </table>

    `TransactionEvents.Attributes` is a struct with three fields:

    ```go
    Enabled bool
    Include []string
    Exclude []string
    ```

    Use `TransactionEvents.Attributes.Enabled` to turn attribute collection on or off for transaction events. Use `Include` and `Exclude` to include or exclude specific attributes.

    An example of excluding an attribute slice named `allAgentAttributeNames` from transaction events:

    ```go
    app, err := newrelic.NewApplication(
        newrelic.ConfigAppName("Your Application Name"),
        newrelic.ConfigLicense(os.Getenv("NEW_RELIC_LICENSE_KEY")),
        func(config *newrelic.Config) {
            config.TransactionEvents.Attributes.Exclude = allAgentAttributeNames
        },
    )
    ```
  </Collapser>

  <Collapser
    id="transaction-events"
    title="TransactionEvents.MaxSamplesStored"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Integer
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `10000`
          </td>
        </tr>

        <tr>
          <th>
            [Set in](#options)
          </th>

          <td>
            `newrelic.Config` struct
          </td>
        </tr>
      </tbody>
    </table>

    Defines the maximum number of transaction events per minute to be sent to New Relic, up to the default maximum of 10,000 transaction events.
  </Collapser>
</CollapserGroup>

## Error collector configuration [#error-collector]

The following settings are used to configure the error collector:

<Callout variant="tip">
  For an overview of error configuration in New Relic, see [Manage errors in APM](/docs/agents/manage-apm-agents/agent-data/manage-errors-apm-collect-ignore-mark-expected).
</Callout>

<CollapserGroup>
  <Collapser
    id="error-collector-enabled"
    title="ErrorCollector.Enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [Set in](#options)
          </th>

          <td>
            `newrelic.Config` struct, Server-side config
          </td>
        </tr>

        <tr>
          <th>
            [Server-side label](#server-side-configuration)
          </th>

          <td>
            `Error Collection on/off`
          </td>
        </tr>
      </tbody>
    </table>

    When `false`, the agent collects no errors or error traces.
  </Collapser>

  <Collapser
    id="error-capture-events"
    title="ErrorCollector.CaptureEvents"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [Set in](#options)
          </th>

          <td>
            `newrelic.Config` struct
          </td>
        </tr>
      </tbody>
    </table>

    When `true`, the agent collects error analytic events.
  </Collapser>

  <Collapser
    id="error-ignore-status"
    title="ErrorCollector.IgnoreStatusCodes"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Integer
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            Error codes 399 and below, and 404, are ignored.
          </td>
        </tr>

        <tr>
          <th>
            [Set in](#options)
          </th>

          <td>
            `newrelic.Config` struct, Server-side config
          </td>
        </tr>

        <tr>
          <th>
            [Server-side label](#server-side-configuration)
          </th>

          <td>
            `Error Collection: Ignore from error collection`
          </td>
        </tr>
      </tbody>
    </table>

    This controls which HTTP response codes are ignored as errors.

    Response codes that are greater than or equal to 100 and strictly less than 400 are ignored by default and never have to be specified when calling this function. Response codes 0, 5, and 404 are included on the list by default, but must be specified when adding to the ignore list.

    This function's default form is:

    ```go
    config.ErrorCollector.IgnoreStatusCodes = []int{
        0,                   // gRPC OK
        5,                   // gRPC NOT_FOUND
        http.StatusNotFound, // 404
    }
    ```

    You can also add response codes as HTTPs, as `http.StatusNotFound` above.

    <Callout variant="important">
      If used, [server-side configuration](#server-side-configuration) will override any values set on the `newrelic.Config` struct. Therefore to ignore 404 when server-side configuration is enabled, you must include 404 in the configuration set in the UI.
    </Callout>

    <CollapserGroup>
      <Collapser
        id="error-example"
        title="Example of ignoring error code"
      >
        To add HTTP response code 418 to the default ignore list, which includes 0, 5, and 404:

        ```go
        app, err := newrelic.NewApplication(
            newrelic.ConfigAppName("Your Application Name"),
           newrelic.ConfigLicense(os.Getenv("NEW_RELIC_LICENSE_KEY")),
            func(config *newrelic.Config) {
                config.ErrorCollector.IgnoreStatusCodes = []int{0, 5, 404, 418}
            },
        )
        ```
      </Collapser>
    </CollapserGroup>
  </Collapser>

  <Collapser
    id="error-attributes"
    title="ErrorCollector.Attributes"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Struct
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            Enabled, no exclusions
          </td>
        </tr>

        <tr>
          <th>
            [Set in](#options)
          </th>

          <td>
            `newrelic.Config` struct
          </td>
        </tr>
      </tbody>
    </table>

    `ErrorCollector.Attributes` is a struct with three fields:

    ```go
    Enabled bool
    Include []string
    Exclude []string
    ```

    Use `ErrorCollector.Attributes.Enabled` to turn attribute collection on or off for errors. Use `Include` and `Exclude` to include or exclude specific attributes.

    An example of excluding an attribute slice named `allAgentAttributeNames` from errors:

    ```go
    app, err := newrelic.NewApplication(
        newrelic.ConfigAppName("Your Application Name"),
        newrelic.ConfigLicense(os.Getenv("NEW_RELIC_LICENSE_KEY")),
        func(config *newrelic.Config) {
            config.ErrorCollector.Attributes.Exclude = allAgentAttributeNames
        },
    )
    ```
  </Collapser>
</CollapserGroup>

## Transaction tracer configuration [#transaction-tracer]

Here are settings for changing transaction tracer configuration. For more information about transaction traces, see [Transaction traces](/docs/traces/transaction-traces).

<CollapserGroup>
  <Collapser
    id="txn-tracer-enabled"
    title="TransactionTracer.Enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [Set in](#options)
          </th>

          <td>
            `newrelic.Config` struct, Server-side config
          </td>
        </tr>

        <tr>
          <th>
            [Server-side label](#server-side-configuration)
          </th>

          <td>
            `Transaction Tracing on/off`
          </td>
        </tr>
      </tbody>
    </table>

    When `true`, the agent collects [transaction traces](/docs/apm/transactions/transaction-traces/transaction-traces) (detailed information about slow transactions).
  </Collapser>

  <Collapser
    id="txn-tracer-threshold-apdex-falling"
    title="TransactionTracer.Threshold.IsApdexFailing"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [Set in](#options)
          </th>

          <td>
            `newrelic.Config` struct, Server-side config
          </td>
        </tr>

        <tr>
          <th>
            [Server-side label](#server-side-configuration)
          </th>

          <td>
            `Transaction Tracing: Threshold`
          </td>
        </tr>
      </tbody>
    </table>

    Controls whether the transaction trace threshold is based on Apdex.

    * If `true`, then the trace threshold is four times the [Apdex threshold](/docs/apm/new-relic-apm/apdex/apdex-measuring-user-satisfaction).
    * If `false`, the agent uses [`Threshold.Duration`](/docs/go-agent-configuration#txn-tracer-threshold-duration) as the transaction trace threshold.
  </Collapser>

  <Collapser
    id="txn-tracer-threshold-duration"
    title="TransactionTracer.Threshold.Duration"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            time.Millisecond
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `500`
          </td>
        </tr>

        <tr>
          <th>
            [Set in](#options)
          </th>

          <td>
            `newrelic.Config` struct, Server-side config
          </td>
        </tr>

        <tr>
          <th>
            [Server-side label](#server-side-configuration)
          </th>

          <td>
            `Transaction Tracing: Threshold`
          </td>
        </tr>
      </tbody>
    </table>

    If `Threshold.IsApdexFailing` is set to `false`, the agent uses this duration as the transaction trace threshold.
  </Collapser>

  <Collapser
    id="txn-tracer-segment-threshold"
    title="TransactionTracer.Segments.Threshold"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            time.Millisecond
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `2`
          </td>
        </tr>

        <tr>
          <th>
            [Set in](#options)
          </th>

          <td>
            `newrelic.Config` struct
          </td>
        </tr>
      </tbody>
    </table>

    This is the threshold at which segments will be added to the trace.
  </Collapser>

  <Collapser
    id="txn-tracer-segments-attributes"
    title="TransactionTracer.Segments.Attributes"
  >
    <Callout variant="important">
      Available for Go agent version 2.6.0 or higher.
    </Callout>

    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Struct
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            Enabled, no exclusions
          </td>
        </tr>

        <tr>
          <th>
            [Set in](#options)
          </th>

          <td>
            `newrelic.Config` struct
          </td>
        </tr>
      </tbody>
    </table>

    `TransactionTracer.Segments.Attributes` is a struct with three fields:

    ```go
    Enabled bool
    Include []string
    Exclude []string
    ```

    Use `TransactionTracer.Segments.Attributes.Enabled` to turn attribute collection on or off for transaction trace segments. Use `Include` and `Exclude` to include or exclude specific attributes.

    An example of excluding an attribute slice named `allSegmentAttributeNames` from traces:

    ```go
    app, err := newrelic.NewApplication(
        newrelic.ConfigAppName("Your Application Name"),
        newrelic.ConfigLicense(os.Getenv("NEW_RELIC_LICENSE_KEY")),
        func(config *newrelic.Config) {
            config.TransactionTracer.Segments.Attributes.Exclude = allSegmentAttributeNames
        },
    )
    ```
  </Collapser>

  <Collapser
    id="txn-tracer-stack-threshold"
    title="TransactionTracer.Segments.StackTraceThreshold"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            time.Millisecond
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `500`
          </td>
        </tr>

        <tr>
          <th>
            [Set in](#options)
          </th>

          <td>
            `newrelic.Config` struct, Server-side config
          </td>
        </tr>

        <tr>
          <th>
            [Server-side label](#server-side-configuration)
          </th>

          <td>
            `Transaction Tracing: Stack trace threshold`
          </td>
        </tr>
      </tbody>
    </table>

    This is the threshold at which segments will be given a stack trace in the transaction trace.

    <Callout variant="caution">
      Lowering this setting may drastically increase agent overhead.
    </Callout>
  </Collapser>

  <Collapser
    id="txn-tracer-attributes"
    title="TransactionTracer.Attributes"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Struct
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            Enabled, no exclusions
          </td>
        </tr>

        <tr>
          <th>
            [Set in](/docs/agents/go-agent/instrumentation/go-agent-configuration#options)
          </th>

          <td>
            `newrelic.Config` struct
          </td>
        </tr>
      </tbody>
    </table>

    `TransactionTracer.Attributes` is a struct with three fields:

    ```go
    Enabled bool
    Include []string
    Exclude []string
    ```

    Use `TransactionTracer.Attributes.Enabled` to turn attribute collection on or off for transaction traces. Use `Include` and `Exclude` to include or exclude specific attributes.

    An example of excluding an attribute slice named `allAgentAttributeNames` from traces:

    ```go
    app, err := newrelic.NewApplication(
        newrelic.ConfigAppName("Your Application Name"),
        newrelic.ConfigLicense(os.Getenv("NEW_RELIC_LICENSE_KEY")),
        func(config *newrelic.Config) {
            config.TransactionTracer.Attributes.Exclude = allAgentAttributeNames
        },
    )
    ```
  </Collapser>
</CollapserGroup>

## Datastore tracer configuration [#datastore-tracer]

Here are datastore settings, including [slow query](/docs/apm/applications-menu/monitoring/viewing-slow-query-details) enabling and settings.

<CollapserGroup>
  <Collapser
    id="instance-reporting"
    title="DatastoreTracer.InstanceReporting.Enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [Set in](#options)
          </th>

          <td>
            `newrelic.Config` struct
          </td>
        </tr>
      </tbody>
    </table>

    This enables collection of datastore instance metrics (such as the host and port) for some database drivers. These are reported on transaction traces and as part of [slow query data](/docs/apm/applications-menu/monitoring/viewing-slow-query-details).
  </Collapser>

  <Collapser
    id="name-reporting"
    title="DatastoreTracer.NameReporting.Enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [Set in](#options)
          </th>

          <td>
            `newrelic.Config` struct
          </td>
        </tr>
      </tbody>
    </table>

    Use this to enable collection of the database name on slow query traces and transaction traces. The default value of attribute enabled is `true`.
  </Collapser>

  <Collapser
    id="data-query-enabled"
    title="DatastoreTracer.QueryParameters.Enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [Set in](#options)
          </th>

          <td>
            `newrelic.Config` struct
          </td>
        </tr>
      </tbody>
    </table>

    When `true`, the agent collects datastore call query parameters.
  </Collapser>

  <Collapser
    id="slow-query"
    title="DatastoreTracer.SlowQuery.Enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [Set in](#options)
          </th>

          <td>
            `newrelic.Config` struct
          </td>
        </tr>
      </tbody>
    </table>

    Controls whether [slow queries](/docs/apm/applications-menu/monitoring/viewing-slow-query-details) are captured.
  </Collapser>

  <Collapser
    id="slow-query-threshold"
    title="DatastoreTracer.SlowQuery.Threshold"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            time.Millisecond
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `10`
          </td>
        </tr>

        <tr>
          <th>
            [Set in](#options)
          </th>

          <td>
            `newrelic.Config` struct
          </td>
        </tr>
      </tbody>
    </table>

    The agent captures [slow query data](/docs/apm/applications-menu/monitoring/viewing-slow-query-details) for queries slower than this.
  </Collapser>
</CollapserGroup>

## Cross application tracing configuration [#cross-application-tracing]

Here are settings for changing the [cross application tracing](/docs/agents/go-agent/features/cross-application-tracing-go) feature.

<CollapserGroup>
  <Collapser
    id="cross-tracer-enabled"
    title="CrossApplicationTracer.Enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [Set in](#options)
          </th>

          <td>
            `newrelic.Config` struct, Server-side config
          </td>
        </tr>

        <tr>
          <th>
            [Server-side label](#server-side-configuration)
          </th>

          <td>
            `Cross-application tracing on/off`
          </td>
        </tr>
      </tbody>
    </table>

    When `true`, the agent will add cross application tracing headers in outbound requests, and scan incoming requests for cross application tracing headers.

    Distributed tracing and cross application tracing cannot be used simultaneously. The default configuration for the Go agent disables distributed tracing and enables cross application tracing.
  </Collapser>
</CollapserGroup>

## Distributed tracing configuration [#distributed-tracing]

<Callout variant="important">
  Enabling distributed tracing requires Go agent version 2.1.0 or higher, and it disables [cross application tracing](#cross-application-tracing). It also has effects on other features. Before enabling, read the [transition guide](/docs/transition-guide-distributed-tracing).
</Callout>

[Distributed tracing](/docs/agents/go-agent/features/distributed-tracing-go) lets you see the path that a request takes as it travels through a distributed system.

When distributed tracing is enabled, you can collect [span events](/docs/apm/distributed-tracing/ui-data/span-event).

<CollapserGroup>
  <Collapser
    id="distributed-enabled"
    title="DistributedTracer.Enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [Set in](#options)
          </th>

          <td>
            `newrelic.Config` struct
          </td>
        </tr>
      </tbody>
    </table>

  Standard tracing is on by default in Go agent versions 3.16.0 and higher. This means the agent will automatically add distributed tracing headers in outbound requests, and scan incoming requests for distributed tracing headers. To disable distributed tracing, set the value to `false`.

  For more information about setting up distributed tracing, see [Enable distributed tracing for your Go applications](/docs/apm/agents/go-agent/instrumentation/distributed-tracing-go-agent).

  <Callout variant="important">
    Enabling distributed tracing disables [cross application tracing](#cross-application-tracing).
  </Callout> 
  </Collapser>

  <Collapser
    id="dt-exclude-newrelic-header"
    title="DistributedTracer.ExcludeNewRelicHeader"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            [Set in](#options)
          </th>

          <td>
            `newrelic.Config` struct
          </td>
        </tr>
      </tbody>
    </table>

    Set this to `true` to exclude the New Relic header that is attached to outbound requests, and instead only rely on W3C Trace Context Headers for distributed tracing. If this is `false` then both types of headers are used.
  </Collapser>
</CollapserGroup>

## Span events configuration [#span-events]

[Span events](/docs/apm/distributed-tracing/ui-data/span-event) are reported for [distributed tracing](/docs/agents/java-agent/configuration/java-agent-configuration-config-file#distributed-tracing). Distributed tracing must be enabled to report span events. These settings control the collection of span events:

<CollapserGroup>
  <Collapser
    id="span-events-enabled"
    title="SpanEvents.Enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [Set in](#options)
          </th>

          <td>
            `newrelic.Config` struct
          </td>
        </tr>
      </tbody>
    </table>

    When `true`, the agent will collect span events.
  </Collapser>

  <Collapser
    id="span-event-attributes"
    title="SpanEvents.Attributes"
  >
    <Callout variant="important">
      Available for Go agent version 2.6.0 or higher.
    </Callout>

    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Struct
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            Enabled, no exclusions
          </td>
        </tr>

        <tr>
          <th>
            [Set in](#options)
          </th>

          <td>
            `newrelic.Config` struct
          </td>
        </tr>
      </tbody>
    </table>

    `SpanEvents.Attributes` is a struct with three fields:

    ```go
    Enabled bool
    Include []string
    Exclude []string
    ```

    Use `SpanEvents.Attributes.Enabled` to enable or disable attribute collection for span events. Use `Include` and `Exclude` to include or exclude specific attributes.

    An example of excluding an attribute slice named `allSpanAttributeNames` from traces:

    ```go
    app, err := newrelic.NewApplication(
        newrelic.ConfigAppName("Your Application Name"),
        newrelic.ConfigLicense(os.Getenv("NEW_RELIC_LICENSE_KEY")),
        func(config *newrelic.Config) {
            config.TransactionTracer.Segments.Attributes.Exclude = allSpanAttributeNames
        },
    )
    ```
  </Collapser>
</CollapserGroup>

## Infinite Tracing configuration [#infinite-tracing]

To enable Infinite Tracing, enable distributed tracing (set `config.DistributedTracer.Enabled = true` on the `newrelic.Config` struct) and add the additional settings below. For an example, see [Language agents: Configure distributed tracing](/docs/understand-dependencies/distributed-tracing/enable-configure/language-agents-enable-distributed-tracing#go-config).

<CollapserGroup>
  <Collapser
    id="trace-observer-host"
    title="InfiniteTracing.TraceObserver.Host"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            string
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            (none)
          </td>
        </tr>

        <tr>
          <th>
            [Set in](#options)
          </th>

          <td>
            `newrelic.Config` struct
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <dd>
    For help getting a valid Infinite Tracing trace observer host entry, see [Find or create a trace observer endpoint](/docs/understand-dependencies/distributed-tracing/enable-configure/language-agents-enable-distributed-tracing#provision-trace-observer).
  </dd>
</CollapserGroup>

## Application logging settings [#application-logging]

The following settings are available for configuration of application logging in the agent.

<Callout variant="important">
  Requires Go agent version 3.17.0 or higher
</Callout>

<CollapserGroup>
  <Collapser
    id="application-logging-enabled"
    title="ApplicationLogging.Enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>
          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [Set in](#options)
          </th>

          <td>
            `newrelic.Config` struct
          </td>
        </tr>
      </tbody>
    </table>
    If `true`, enables the collection of log events and logging metrics if these sub-feature configurations are also enabled.  If `false`, no logging instrumentation features are enabled.

    Configure ApplicationLogging by calling `ConfigAppLogEnabled()`.

    ```go
    app, err := newrelic.NewApplication(
        newrelic.ConfigAppLogEnabled(true),
    )
    ```
  </Collapser>

<Collapser
    id="application-logging-forwarding-enabled"
    title="ApplicationLogging.Forwarding.Enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>
          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>
        
        <tr>
          <th>
            [Set in](#options)
          </th>

          <td>
            `newrelic.Config` struct
          </td>
        </tr>
      </tbody>
    </table>

  If `true`, the agent captures log records emitted by your application and forwards them to New Relic. `ApplicationLogging.Enabled` must also be `true` for this setting to take effect.
  
  Enable log forwarding by calling `ConfigAppLogForwardingEnabled()`.

  ```go
  app, err := newrelic.NewApplication(
      newrelic.ConfigAppLogForwardingEnabled(true),
  )
  ```
  </Collapser>

   <Collapser
    id="application-logging-forwarding-maximum-samples-stored"
    title="ApplicationLogging.Forwarding.MaxSamplesStored"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>
          <td>
            Integer
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            10000
          </td>
        </tr>

        <tr>
          <th>
            [Set in](#options)
          </th>

          <td>
            `newrelic.Config` struct
          </td>
        </tr>

      </tbody>
    </table>

    Number of log records to send per minute to New Relic. This setting controls overall memory consumption when using the log forwarding feature.

    Configure `ApplicationLogging.Forwarding.MaxSamplesStored` by calling `ConfigAppLogForwardingMaxSamplesStored()`.

    ```go
    app, err := newrelic.NewApplication(
        newrelic.ConfigAppLogForwardingMaxSamplesStored(1000),
    )
    ```

    Set this to a lower value to reduce the amount of log lines sent (may cause log sampling). Set this to a higher value to send more log lines.

    Each log receives the same priority as its associated transaction. Logs that occur outside of a transaction will receive a random priority. Some logs may not be included because they are limited by `MaxSamplesStored`. For example, if logging `MaxSamplesStored` is set to 10,000 and transaction 1 has 10,000 log entries, only log entries for transaction 1 will be recorded. If transaction 1 has less than 10,000 logs, you receive all logs for transaction 1. If there is still space, you receive all the logs for transaction 2, and so on.

    If after all the logs for sampled transactions are recorded, and they haven't reached the limit in `MaxSamplesStored`, then log messages for transactions that were not in our sampling are sent. If there are any left, log messages outside of transactions are recorded.
  </Collapser>

  <Collapser
    id="application-logging-metrics-enabled"
    title="ApplicationLogging.Metrics.Enabled"
  >
    <table>
      <tbody>
        <tr>
          <th>
            Type
          </th>
          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            [Set in](#options)
          </th>

          <td>
            `newrelic.Config` struct
          </td>
        </tr>
      </tbody>
    </table>

  If `true`, the agent captures metrics related to the log lines being sent up by your application. `ApplicationLogging.Enabled` must also be `true` for this setting to take effect.

  Configure ApplicationLogging.Metrics.Enabled by calling `ConfigAppLogMetricsEnabled()`.

  ```go
  app, err := newrelic.NewApplication(
      newrelic.ConfigAppLogConfigAppLogMetricsEnabled(true),
  )
  ```
  </Collapser>
</CollapserGroup>
