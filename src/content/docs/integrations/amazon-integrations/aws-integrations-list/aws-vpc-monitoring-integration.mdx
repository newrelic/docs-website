---
title: Amazon VPC monitoring integration
tags:
  - Integrations
  - Amazon integrations
  - AWS integrations list
metaDescription: 'New Relic''s Amazon VPC monitoring integration: how to enable it, and the data it reports.'
redirects:
  - /docs/aws-vpc-integration
  - /docs/infrastructure/infrastructure-integrations/amazon-integrations/aws-vpc-integration
  - /docs/infrastructure/amazon-integrations/amazon-integrations/aws-vpc-monitoring-integration
---

[New Relic infrastructure integrations](/docs/infrastructure/integrations-getting-started/getting-started/introduction-infrastructure-integrations) include an integration for reporting your Amazon VPC data to New Relic. This document explains how to activate the integration and describes the data reported.

## Features

The Amazon [Virtual Private Cloud (VPC)](https://aws.amazon.com/vpc/) is a virtual network that utilizes the scalable infrastructure of Amazon Web Services (AWS). With New Relic's VPC integration, you can gain visibility into configuration event changes that are overlaid across your Amazon services.

The Amazon VPC integration generates a feed of [configuration/inventory changes](#inventory) that occur in your VPC. VPC data is available in pre-built dashboards, and you can create custom queries and charts in [New Relic One](/docs/infrastructure/integrations-getting-started/getting-started/use-integration-data-new-relic-insights). You can also create alert conditions to notify you about changes in the VPC.

Additionally, [Enhanced Amazon VPC Flow Logs](http://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/flow-logs.html "Link opens in a new window.") enables you to capture information about IP traffic to and from network interfaces in your VPC.

## Activate

To enable this integration follow standard procedures to [Connect AWS services to New Relic](/docs/infrastructure/infrastructure-integrations/getting-started/connect-aws-integrations-infrastructure).

## Configuration and polling [#polling]

You can change the polling frequency and filter data using [configuration options](/docs/integrations/new-relic-integrations/getting-started/configure-polling-frequency-data-collection-cloud-integrations).

Default [polling](/docs/infrastructure/amazon-integrations/aws-integrations-list/aws-polling-intervals-infrastructure-integrations) information for the Amazon VPC integration:

* Default New Relic polling interval: 15 minutes
* Amazon CloudWatch data interval: 1 minute

## Find and use data [#find-data]

To find your integration data, go to [**one.newrelic.com**](http://one.newrelic.com) **> Infrastructure > AWS** and select one of the VPC integration links.

You can [query and explore your data](/docs/using-new-relic/data/understand-data/query-new-relic-data) using the `PrivateNetworkSample` [event type](/docs/insights/use-insights-ui/getting-started/introduction-new-relic-insights#event-type), with `provider` values of:

* [VpcNatGateway](#vpc-nat-gateway)
* [VpcVpnTunnel](#vpc-vpn-tunnel)

<Callout variant="important">
By default, collection of VpcNatGateway, VpcVpnTunnel, and VpcVpnConnection data is disabled.
</Callout>

This is because if you have many NAT gateways or many VPNs (connections and tunnels), it might lead to an increase on your CloudWatch bill. For this reason, the integration provides configuration settings to set whether you want to fetch that data.

For more on how to use your data, see [Understand integration data](/docs/infrastructure/integrations/find-use-infrastructure-integration-data).

## Metric data [#metrics]

### VPC NAT Gateway data [#vpc-nat-gateway]

This integration collects the following data from `PrivateNetworkSample` with a provider value of `VpcNatGateway`:

<Callout variant="tip">
  For full descriptions, see [Amazon VPC NAT Gateway Metrics and Dimensions](https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/nat-gateway-metricscollected.html).
</Callout>

<table>
  <thead>
    <tr>
      <th style={{ width: "285px" }}>
        Name
      </th>

      <th>
        Description
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `activeConnectionCount`
      </td>

      <td>
        The total number of concurrent active TCP connections through the NAT gateway.
      </td>
    </tr>

    <tr>
      <td>
        `bytesInFromDestination`
      </td>

      <td>
        The number of bytes received by the NAT gateway from the destination.
      </td>
    </tr>

    <tr>
      <td>
        `bytesInFromSource`
      </td>

      <td>
        The number of bytes received by the NAT gateway from clients in your VPC.
      </td>
    </tr>

    <tr>
      <td>
        `bytesOutToDestination`
      </td>

      <td>
        The number of bytes sent out through the NAT gateway to the destination.
      </td>
    </tr>

    <tr>
      <td>
        `bytesOutToSource`
      </td>

      <td>
        The number of bytes sent through the NAT gateway to the clients in your VPC.
      </td>
    </tr>

    <tr>
      <td>
        `connectionAttemptCount`
      </td>

      <td>
        The number of connection attempts made through the NAT gateway.
      </td>
    </tr>

    <tr>
      <td>
        `connectionEstablishedCount`
      </td>

      <td>
        The number of connections established through the NAT gateway.
      </td>
    </tr>

    <tr>
      <td>
        `errorPortAllocation`
      </td>

      <td>
        The number of times the NAT gateway could not allocate a source port.
      </td>
    </tr>

    <tr>
      <td>
        `idleTimeoutCount`
      </td>

      <td>
        The number of connections that transitioned from the active state to the idle state. An active connection transitions to idle if it was not closed gracefully and there was no activity for the last 350 seconds.
      </td>
    </tr>

    <tr>
      <td>
        `packetsDropCount`
      </td>

      <td>
        The number of packets dropped by the NAT gateway.
      </td>
    </tr>

    <tr>
      <td>
        `packetsInFromDestination`
      </td>

      <td>
        The number of packets received by the NAT gateway from the destination.
      </td>
    </tr>

    <tr>
      <td>
        `packetsInFromSource`
      </td>

      <td>
        The number of packets received by the NAT gateway from clients in your VPC.
      </td>
    </tr>

    <tr>
      <td>
        `packetsOutToDestination`
      </td>

      <td>
        The number of packets sent out through the NAT gateway to the destination.
      </td>
    </tr>

    <tr>
      <td>
        `packetsOutToSource`
      </td>

      <td>
        The number of packets sent through the NAT gateway to the clients in your VPC.
      </td>
    </tr>
  </tbody>
</table>

### VPC VPN Tunnel

This integration collects the following data from `PrivateNetworkSample` with a provider value of `VpcVpnTunnel`:

<Callout variant="tip">
  For full descriptions, see [Amazon VPC VPN Metrics and Dimensions](https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/vpn-metricscollected.html).
</Callout>

<table>
  <thead>
    <tr>
      <th style={{ width: "285px" }}>
        Name
      </th>

      <th>
        Description
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `tunnelState`
      </td>

      <td>
        The state of the tunnel. 0 indicates DOWN and 1 indicates UP.
      </td>
    </tr>

    <tr>
      <td>
        `tunnelDataIn`
      </td>

      <td>
        The bytes received through the VPN tunnel. Each metric data point represents the number of bytes received after the previous data point. Use the Sum statistic to show the total number of bytes received during the period.
      </td>
    </tr>

    <tr>
      <td>
        `tunnelDataOut`
      </td>

      <td>
        The bytes sent through the VPN tunnel. Each metric data point represents the number of bytes sent after the previous data point. Use the Sum statistic to show the total number of bytes sent during the period.
      </td>
    </tr>
  </tbody>
</table>

## Inventory data [#inventory]

This integration reports the following VPC configuration options and metadata as inventory data. For more about inventory data, see [Understand integration data](/docs/infrastructure/integrations-getting-started/getting-started/understand-integration-data-data-types#inventory-data).

<Callout variant="tip">
  Tags (indicated with an **\***) are only fetched when [tags collection](/docs/integrations/new-relic-integrations/getting-started/configure-polling-frequency-data-collection-cloud-integrations#collect_tags) is on.
</Callout>

<table>
  <thead>
    <tr>
      <th style={{ width: "300px" }}>
        Inventory category
      </th>

      <th>
        Data
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `aws/vpc/network-interface`
      </td>

      <td>
        * awsRegion
        * subnetId
        * status
        * sourceDestCheck
        * requesterManaged
        * requesterId
        * privateIpAddress
        * privateDnsName
        * networkInterfaceId
        * macAddress
        * ipv6Addresses
        * securityGroups
        * description
        * availabilityZone
        * attachmentInstanceId
        * attachmentDeleteOnTermination
        * attachmentStatus
        * attachmentInstanceOwnerId
        * publicIp
        * publicDnsName
        * tags\*
      </td>
    </tr>

    <tr>
      <td>
        `aws/vpc/endpoint`
      </td>

      <td>
        * awsRegion
        * creationTimestamp
        * policyDocumentMd5
        * routeTableIds
        * serviceName
        * state
        * vpcId
        * vpcEndpointId
      </td>
    </tr>

    <tr>
      <td>
        `aws/vpc/nat-gateway`
      </td>

      <td>
        * awsRegion
        * natGatewayId
        * createTime
        * natGatewayAddresses
        * state
        * subnetId
        * vpcId
      </td>
    </tr>

    <tr>
      <td>
        `aws/vpc/peering-connection`
      </td>

      <td>
        * awsRegion
        * vpcPeeringConnectionId
        * accepterVpcInfo
        * requesterVpcInfo
        * tags\*
      </td>
    </tr>

    <tr>
      <td>
        `aws/vpc/vpn/connection`
      </td>

      <td>
        * awsRegion
        * vpnId
        * state
        * type
        * category
        * customerGatewayConfiguration
        * vpnGatewayId
        * customerGatewayId
        * staticRoutesOnly
        * tags\*
      </td>
    </tr>

    <tr>
      <td>
        `aws/vpc/vpn/tunnel`
      </td>

      <td>
        * awsRegion
        * acceptedRouteCount
        * outsideIpAddress
        * status
        * statusChange
        * statusMessage
      </td>
    </tr>

    <tr>
      <td>
        `aws/vpc/internet-gateway`
      </td>

      <td>
        * region
        * internetGatewayId
        * attachments
        * tags\*
      </td>
    </tr>

    <tr>
      <td>
        `aws/vpc/network-acl`
      </td>

      <td>
        * region
        * networkAclId
        * associations
        * entries
        * isDefault
        * vpcId
        * tags\*
      </td>
    </tr>

    <tr>
      <td>
        `aws/vpc/route-table`
      </td>

      <td>
        * region
        * routeTableId
        * associations
        * propagatingVgws
        * routes
        * vpcId
        * tags\*
      </td>
    </tr>

    <tr>
      <td>
        `aws/vpc/security-group`
      </td>

      <td>
        * region
        * description
        * groupName
        * groupId
        * ipPermissions
        * ipPermissionsEgress
        * ownerId
        * vpcId
        * tags\*
      </td>
    </tr>

    <tr>
      <td>
        `aws/vpc/subnet`
      </td>

      <td>
        * region
        * availabilityZone
        * cidrBlock
        * defaultForAz
        * mapPublicIpOnLaunch
        * subnetId
        * state
        * vpcId
        * tags\*
      </td>
    </tr>

    <tr>
      <td>
        `aws/vpc/vpc`
      </td>

      <td>
        * region
        * cidrBlock
        * dhcpOptionsId
        * enableDnsHostname
        * enableDnsSupport
        * instanceTenancy
        * isDefault
        * state
        * vpcId
        * tags\*
      </td>
    </tr>
  </tbody>
</table>
