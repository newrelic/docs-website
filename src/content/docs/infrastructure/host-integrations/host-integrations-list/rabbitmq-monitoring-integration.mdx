---
title: RabbitMQ OpenTelemetry monitoring overview
tags:
  - Integrations
  - On-host integrations
  - On-host integrations list
metaDescription: "New Relic's RabbitMQ OpenTelemetry integration: overview and getting started."
redirects:
  - /docs/integrations/host-integrations/host-integrations-list/rabbitmq-monitoring-integration
freshnessValidatedDate: 2024-12-18
---

Our RabbitMQ integration with OpenTelemetry reports critical performance data from your [RabbitMQ](https://www.rabbitmq.com/) message broker to New Relic. You can view queue metrics, connection data, and consumer information in pre-built dashboards, create alert policies, and create custom queries and charts.

This integration uses the OpenTelemetry Collector to gather metrics from RabbitMQ and send them to New Relic.

## Compatibility and requirements [#comp-req]

Before installing the integration, make sure that you meet the following requirements:

* A New Relic account. Don't have one? [Sign up for free!](https://newrelic.com/signup) No credit card required.
* RabbitMQ instance with the [management plugin](https://www.rabbitmq.com/management.html) enabled
* Access to the RabbitMQ management API (default port 15672)
* If RabbitMQ is **not** running on Kubernetes, you must have:
  * Shell access with sudo privileges to install and manage services
  * Ability to install the OpenTelemetry Collector Contrib distribution
  * Outbound HTTPS connectivity to New Relic's OTLP ingest endpoint
* If running on Kubernetes:
  * kubectl access to the target cluster with appropriate permissions
  * Helm installed locally with access to the cluster context

The integration collects data through the RabbitMQ management API, which provides:
* Queue metrics (message counts, consumers, etc.)
* Connection and channel statistics
* Node information
* Exchange and binding data

## Installation options [#install-options]

Choose your deployment environment:

* **[Self-hosted RabbitMQ](/docs/infrastructure/host-integrations/host-integrations-list/rabbitmq-monitoring-integration-selfhosted)** - For RabbitMQ running on Linux hosts
* **[Kubernetes-hosted RabbitMQ](/docs/infrastructure/host-integrations/host-integrations-list/rabbitmq-monitoring-integration-kubernetes)** - For RabbitMQ running in Kubernetes clusters

## What you'll get [#what-you-get]

Once installed, you'll be able to:

1. **Enable the RabbitMQ management plugin:**

   ```bash
   sudo rabbitmq-plugins enable rabbitmq_management
   ```

2. **Install the OpenTelemetry Collector Contrib:**

   For Debian/Ubuntu:
   ```bash
   VERSION="0.140.0"
   ARCH="amd64"
   sudo apt-get update
   sudo apt-get -y install wget
   wget https://github.com/open-telemetry/opentelemetry-collector-releases/releases/download/v${VERSION}/otelcol-contrib_${VERSION}_linux_${ARCH}.deb
   sudo dpkg -i otelcol-contrib_${VERSION}_linux_${ARCH}.deb
   sudo systemctl enable --now otelcol-contrib
   ```

   For RHEL/CentOS:
   ```bash
   VERSION="0.140.0"
   ARCH="amd64"
   sudo yum update -y
   sudo yum -y install wget
   wget https://github.com/open-telemetry/opentelemetry-collector-releases/releases/download/v${VERSION}/otelcol-contrib_${VERSION}_linux_${ARCH}.rpm
   sudo rpm -ivh otelcol-contrib_${VERSION}_linux_${ARCH}.rpm
   sudo systemctl enable --now otelcol-contrib
   ```

3. **Configure the collector:**

   Create `/etc/otelcol-contrib/config.yaml` with your RabbitMQ details:

   ```yaml
   receivers:
     rabbitmq:
       endpoint: http://localhost:15672
       username: admin
       password: password
       collection_interval: 30s
       metrics:
         rabbitmq.consumer.count:
           enabled: true
         rabbitmq.connection.count:
           enabled: true
         rabbitmq.queue.consumer.count:
           enabled: true
         rabbitmq.queue.count:
           enabled: true
         rabbitmq.queue.message.count:
           enabled: true
         rabbitmq.queue.message.ready:
           enabled: true
         rabbitmq.queue.message.unacknowledged:
           enabled: true

   processors:
     resourcedetection:
       detectors: [system]
       system:
         resource_attributes:
           host.name:
             enabled: true
           host.id:
             enabled: true
     resource:
       attributes:
         - action: upsert
           key: rabbitmq.server.endpoint
           value: http://localhost:15672
         - action: upsert
           key: rabbitmq.deployment.name
           value: my-rabbitmq-server
     batch:
       timeout: 30s
       send_batch_size: 512
     transform/rabbitmq_metrics:
       metric_statements:
         - context: resource
           statements:
             - set(attributes["rabbitmq.display.name"], Concat(["server", attributes["rabbitmq.deployment.name"]], ":"))

   exporters:
     otlphttp/newrelic:
       endpoint: ${env:NEWRELIC_OTLP_ENDPOINT}
       headers:
         api-key: ${env:NEWRELIC_LICENSE_KEY}
       compression: gzip

   extensions:
     health_check:

   service:
     pipelines:
       metrics:
         receivers: [rabbitmq]
         processors: [resourcedetection, resource, batch, transform/rabbitmq_metrics]
         exporters: [otlphttp/newrelic]
   ```

4. **Set environment variables:**

   ```bash
   sudo mkdir -p /etc/systemd/system/otelcol-contrib.service.d
   cat <<EOF | sudo tee /etc/systemd/system/otelcol-contrib.service.d/environment.conf
   [Service]
   Environment="NEWRELIC_OTLP_ENDPOINT=https://otlp.nr-data.net:4318"
   Environment="NEWRELIC_LICENSE_KEY=YOUR_LICENSE_KEY"
   EOF
   sudo systemctl daemon-reload
   sudo systemctl restart otelcol-contrib.service
   ```

## Find and use data [#find-and-use]

To find your integration data, go to <DNT>**[one.newrelic.com](https://one.newrelic.com) > Infrastructure > Third-party services**</DNT> and search for RabbitMQ.

RabbitMQ data is attached to the `Metric` event type with the `instrumentation.provider = 'opentelemetry'` attribute. You can [query this data](/docs/using-new-relic/data/understand-data/query-new-relic-data) for troubleshooting purposes or to create custom charts and dashboards.

For more on how to find and use your data, see [Understand integration data](/docs/infrastructure/integrations/find-use-infrastructure-integration-data).

## Query your data [#query]

To verify that data is flowing to New Relic, run this NRQL query:

```sql
SELECT count(*) 
FROM Metric 
WHERE metricName LIKE 'rabbitmq.%' 
  AND instrumentation.provider = 'opentelemetry' 
FACET metricName 
SINCE 10 minutes ago
```

## Find and use data [#find-and-use]

To find your integration data, go to <DNT>**[one.newrelic.com](https://one.newrelic.com) > Infrastructure > Third-party services**</DNT> and search for RabbitMQ.

RabbitMQ data is attached to the `Metric` event type with the `instrumentation.provider = 'opentelemetry'` attribute. You can [query this data](/docs/using-new-relic/data/understand-data/query-new-relic-data) for troubleshooting purposes or to create custom charts and dashboards.

For more on how to find and use your data, see [Understand integration data](/docs/infrastructure/integrations/find-use-infrastructure-integration-data).

## Metric data [#metrics]

The RabbitMQ integration collects the following metrics:

### Queue metrics

<table>
  <thead>
    <tr>
      <th style={{ width: "350px" }}>
        Metric
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        `rabbitmq.queue.count`
      </td>
      <td>
        Total number of queues (Gauge)
      </td>
    </tr>
    <tr>
      <td>
        `rabbitmq.queue.message.count`
      </td>
      <td>
        Total number of messages in all queues (Gauge)
      </td>
    </tr>
    <tr>
      <td>
        `rabbitmq.queue.message.ready`
      </td>
      <td>
        Number of messages ready for delivery (Gauge)
      </td>
    </tr>
    <tr>
      <td>
        `rabbitmq.queue.message.unacknowledged`
      </td>
      <td>
        Number of messages delivered but not yet acknowledged (Gauge)
      </td>
    </tr>
    <tr>
      <td>
        `rabbitmq.queue.consumer.count`
      </td>
      <td>
        Number of consumers per queue (Gauge)
      </td>
    </tr>
  </tbody>
</table>

### Connection metrics

<table>
  <thead>
    <tr>
      <th style={{ width: "350px" }}>
        Metric
      </th>
      <th>
        Description
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        `rabbitmq.connection.count`
      </td>
      <td>
        Total number of active connections (Gauge)
      </td>
    </tr>
    <tr>
      <td>
        `rabbitmq.consumer.count`
      </td>
      <td>
        Total number of active consumers (Gauge)
      </td>
    </tr>
  </tbody>
</table>

### Resource attributes

All metrics include the following resource attributes:

* `rabbitmq.server.endpoint` - The RabbitMQ management API endpoint URL
* `rabbitmq.deployment.name` - Your configured deployment name
* `rabbitmq.display.name` - Formatted display name
* `host.name` - The hostname where RabbitMQ is running
* `host.id` - The host identifier
* `instrumentation.provider` - Always set to `opentelemetry`

For Kubernetes deployments, additional attributes include:

* `k8s.cluster.name` - The Kubernetes cluster name
* `k8s.namespace.name` - The namespace
* `k8s.pod.name` - The pod name

## Optional: Forward RabbitMQ logs [#logs]

To forward RabbitMQ logs to New Relic, add a filelog receiver to your collector configuration. See the [guided install](#quick) for a complete configuration example with log forwarding enabled.

## Troubleshooting [#troubleshoot]

### No data appearing

If you don't see data in New Relic:

* Verify the management plugin is enabled: `sudo rabbitmq-plugins list | grep management`
* Check the management API responds: `curl -u admin:password http://localhost:15672/api/overview`
* Review collector logs: `sudo journalctl -u otelcol-contrib -f`
* Confirm the collector service is running: `sudo systemctl status otelcol-contrib`

### Connection refused errors

If you see connection errors:

* Verify the RabbitMQ management API is accessible from the collector
* Check firewall rules allow access to port 15672
* Ensure credentials in the collector config are correct

## What's next? [#whats-next]

* Create [custom queries and charts](/docs/query-your-data/explore-query-data/query-builder/introduction-query-builder) to analyze your RabbitMQ performance
* Set up [alerts](/docs/alerts-applied-intelligence/new-relic-alerts/get-started/introduction-alerts) to notify you when queue depths exceed thresholds
* Monitor message backlogs with queries like:
  ```sql
  SELECT latest(rabbitmq.queue.message.count) 
  FROM Metric 
  WHERE instrumentation.provider = 'opentelemetry'
  FACET rabbitmq.queue.name 
  TIMESERIES
  ```
