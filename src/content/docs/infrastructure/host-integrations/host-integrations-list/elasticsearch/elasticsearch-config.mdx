---
title: Elasticsearch integration's configuration settings
tags:
  - Integrations
  - On-host integrations
  - Advanced configuration
metaDescription: New Relics elasticsearch monitoring integration's advanced configuration
---

The Elasticsearch integration is open source software. That means you can [browse its source code](https://github.com/newrelic/nri-elasticsearch "Link opens in a new window.") and send improvements, or create your own fork and build it.

### Elasticsearch instance settings [#instance-settings]

You can use the `env` section of the `elasticsearch-config.yml` file, to define specific settings related to Elasticsearch. These settings control the connection to your Elasticsearch instance, as well as other security settings and features.

The Elasticsearch integration collects both Metrics and Inventory information. In the table, use the **Applies to** column for the settings available to each collection:

<table>
  <thead>
    <tr>
      <th style={{ width: '150px' }}>
        Setting
      </th>

      <th>
        Description
      </th>

      <th>
        Default
      </th>

      <th>
        Applies to
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        **HOSTNAME**
      </td>

      <td>
        Hostname or IP where Elasticsearch is running.
      </td>

      <td>
        localhost
      </td>

      <td style={{ "text-align": "center" }}>
        M/I
      </td>
    </tr>

    {
      ' '
    }

    <tr>
      <td>
        **LOCAL_HOSTNAME**
      </td>

      <td>
        Hostname or IP of the Elasticsearch node from which to collect inventory
        data. Should only be set if you do not wish to collect inventory data
        against localhost.
      </td>

      <td>
        localhost
      </td>

      <td style={{ 'text-align': 'center' }}>
        M
      </td>
    </tr>

    {
      ' '
    }

    <tr>
      <td>
        **PORT**
      </td>

      <td>
        Port on which Elasticsearch is listening.
      </td>

      <td>
        9200
      </td>

      <td style={{ 'text-align': 'center' }}>
        M/I
      </td>
    </tr>

    {
      ' '
    }

    <tr>
      <td>
        **USERNAME**
      </td>

      <td>
        Username for accessing Elasticsearch Node.
      </td>

      <td>
        N/A
      </td>

      <td style={{ 'text-align': 'center' }}>
        M/I
      </td>
    </tr>

    {
      ' '
    }

    <tr>
      <td>
        **PASSWORD**
      </td>

      <td>
        Password for the given user.
      </td>

      <td>
        N/A
      </td>

      <td style={{ 'text-align': 'center' }}>
        M/I
      </td>
    </tr>

    {
      ' '
    }

    <tr>
      <td>
        **CLUSTER_ENVIRONMENT**
      </td>

      <td>
        A way to further specify which cluster we are gathering data for, example:
        'staging'.
      </td>

      <td>
        N/A
      </td>

      <td style={{ 'text-align': 'center' }}>
        M/I
      </td>
    </tr>

    {
      ' '
    }

    <tr>
      <td>
        **USE_SSL**
      </td>

      <td>
        Use SSL when communicating with the Elasticsearch node.
      </td>

      <td>
        false
      </td>

      <td style={{ 'text-align': 'center' }}>
        M/I
      </td>
    </tr>

    {
      ' '
    }

    <tr>
      <td>
        **CA_BUNDLE_FILE**
      </td>

      <td>
        Location of SSL certificate on the host. Only required if `USE_SSL` is true.
      </td>

      <td>
        N/A
      </td>

      <td style={{ 'text-align': 'center' }}>
        M/I
      </td>
    </tr>

    {
      ' '
    }

    <tr>
      <td>
        **CA_BUNDLE_DIR**
      </td>

      <td>
        Alternative Certificate Authority bundle directory.
      </td>

      <td>
        N/A
      </td>

      <td style={{ 'text-align': 'center' }}>
        M/I
      </td>
    </tr>

    {
      ' '
    }

    <tr>
      <td>
        **SSL_ALTERNATIVE_HOSTNAME**
      </td>

      <td>
        Alternative server hostname that the integration will accept as valid for
        the purposes of SSL negotiation.
      </td>

      <td>
        N/A
      </td>

      <td style={{ 'text-align': 'center' }}>
        M/I
      </td>
    </tr>

    {
      ' '
    }

    <tr>
      <td>
        **TLS_INSECURE_SKIP_VERIFY**
      </td>

      <td>
        Skip the verification of the server's certificate chain and hostname.
      </td>

      <td>
        false
      </td>

      <td style={{ 'text-align': 'center' }}>
        M/I
      </td>
    </tr>

    {
      ' '
    }

    <tr>
      <td>
        **CONFIG_PATH**
      </td>

      <td>
        Path to the Elasticsearch configuration file.
      </td>

      <td>
        /etc/elasticsearch/
        <br/>
        elasticsearch.yml
      </td>

      <td style={{ 'text-align': 'center' }}>
        I
      </td>
    </tr>

    {
      ' '
    }

    <tr>
      <td>
        **TIMEOUT**
      </td>

      <td>
        Timeout for API requests, in seconds.
      </td>

      <td>
        30
      </td>

      <td style={{ 'text-align': 'center' }}>
        M/I
      </td>
    </tr>

    {
      ' '
    }

    <tr>
      <td>
        **COLLECT_INDICES**
      </td>

      <td>
        Signals whether to collect indices metrics or not.
      </td>

      <td>
        true
      </td>

      <td style={{ 'text-align': 'center' }}>
        M
      </td>
    </tr>

    {
      ' '
    }

    <tr>
      <td>
        **COLLECT_PRIMARIES**
      </td>

      <td>
        Signals whether to collect primaries metrics or not.
      </td>

      <td>
        true
      </td>

      <td style={{ 'text-align': 'center' }}>
        M
      </td>
    </tr>

    {
      ' '
    }

    <tr>
      <td>
        **INDICES_REGEX**
      </td>

      <td>
        Filter which indices are collected.
      </td>

      <td>
        N/A
      </td>

      <td style={{ 'text-align': 'center' }}>
        M
      </td>
    </tr>

    {
      ' '
    }

    <tr>
      <td>
        **MASTER_ONLY**
      </td>

      <td>
        Collect cluster metrics on the elected master only.
      </td>

      <td>
        false
      </td>

      <td style={{ 'text-align': 'center' }}>
        M
      </td>
    </tr>

    {
      ' '
    }

    <tr>
      <td>
        **METRICS**
      </td>

      <td>
        Set to `true` to enable metrics-only collection.
      </td>

      <td>
        false
      </td>

      <td style={{ 'text-align': 'center' }}/>
    </tr>

    {
      ' '
    }

    <tr>
      <td>
        **INVENTORY**
      </td>

      <td>
        Set to `true` to enable inventory-only collection.
      </td>

      <td>
        false
      </td>

      <td style={{ 'text-align': 'center' }}/>
    </tr>
  </tbody>
</table>

The values for these settings can be defined in several ways:

- Adding the value directly in the config file. This is the most common way.
- Replacing the values from environment variables using the `{{ }}` notation. Read more about [using environment variable passthroughs with on-host integrations](/docs/infrastructure/install-infrastructure-agent/configuration/configure-infrastructure-agent/#passthrough) or see the example for [environment variables replacement](/docs/infrastructure/host-integrations/host-integrations-list/elasticsearch/elasticsearch-integration#envvar-replacement).
<Callout variant="important">
  This requires infrastructure agent v1.14.0+. 
</Callout>

- Using secrets management. Use this to protect sensitive information, such as passwords that would be exposed in plain text on the configuration file. For more information, see [secrets management](/docs/integrations/host-integrations/installation/secrets-management).

### Labels and custom attributes [#labels]

You can further decorate your metrics using labels. Labels allow you to add key-value pair attributes to your metrics, which you can then use to query, filter, or group your metrics on.<br/>
The [basic configuration elasticsearch-config.yml sample file](/docs/infrastructure/host-integrations/host-integrations-list/elasticsearch/elasticsearch-integration#basic-config) includes usage of labels. However, as they are not mandatory, you can remove, modify, or add new ones of your choice.

```yaml
 labels:
   env: production
   role: load_balancer
```

## Inventory data [#inventory]

The Elasticsearch integration captures the configuration parameters of the Elasticsearch node, as specified in the [YAML config file](/docs/infrastructure/host-integrations/host-integrations-list/elasticsearch/elasticsearch-integration/#basic-config). It also collects node configuration information from the `\_nodes/\_local` endpoint. The data is available on the [Infrastructure inventory page](/docs/infrastructure/new-relic-infrastructure/infrastructure-ui-pages/infrastructure-inventory-page-search-your-entire-infrastructure), under the `config/elasticsearch` source.

For more about inventory data, see how to [understand integration data](/docs/infrastructure/integrations-getting-started/getting-started/understand-integration-data-data-types#inventory-data).
