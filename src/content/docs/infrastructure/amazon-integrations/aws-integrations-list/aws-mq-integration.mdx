---
title: Amazon MQ integration
tags:
  - Integrations
  - Amazon integrations
  - AWS integrations list
metaDescription: 'New Relic''s AWS MQ monitoring integration: what data it reports, and how to enable it.'
redirects:
  - /docs/integrations/amazon-integrations/aws-integrations-list/aws-mq-integration
  - /docs/aws-aws_mq-integration
freshnessValidatedDate: never
---

<Callout variant="important">
  Enable the [AWS CloudWatch Metric Streams integration](/docs/infrastructure/amazon-integrations/aws-integrations-list/aws-metric-stream/) to monitor all CloudWatch metrics from your AWS services, including custom namespaces. Individual integrations are no longer our recommended option.

  <DNT>ActiveMQ</DNT> is the only MQ engine supported by this integration. If you're using RabbitMQ, see our [RabbitMQ integration](/docs/infrastructure/host-integrations/host-integrations-list/rabbitmq-monitoring-integration/) on how to get metrics from your instance.
</Callout>

New Relic offers an integration for reporting your [Amazon Web Services MQ](https://aws.amazon.com/amazon-mq) data. This document explains how to activate this integration and describes the data that can be reported.

## Activate integration [#activate]

To enable this integration, follow standard procedures to [connect AWS services to New Relic](/docs/infrastructure/infrastructure-integrations/getting-started/connect-aws-integrations-infrastructure).

## Configuration and polling [#polling]

You can change the polling frequency and filter data using [configuration options](/docs/integrations/new-relic-integrations/getting-started/configure-polling-frequency-data-collection-cloud-integrations).

Default [polling](/docs/infrastructure/amazon-integrations/aws-integrations-list/aws-polling-intervals-infrastructure-integrations) information for the Amazon MQ integration:

* New Relic polling interval: 5 minutes
* Amazon CloudWatch data interval: 1 minute

## View and query data [#find-data]

To view your integration data, go to <DNT>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Infrastructure > AWS**</DNT> and select an integration.

You can [query and explore your data](/docs/using-new-relic/data/understand-data/query-new-relic-data) using the following [event type](/docs/data-apis/understand-data/new-relic-data-types/#event-data):

<table>
  <thead>
    <tr>
      <th>
        Entity
      </th>

      <th>
        Event Type
      </th>

      <th>
        Provider
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        Broker
      </td>

      <td>
        `AwsMqBrokerSample`
      </td>

      <td>
        `AwsMqBroker`
      </td>
    </tr>

    <tr>
      <td>
        Topic
      </td>

      <td>
        `AwsMqTopicSample`
      </td>

      <td>
        `AwsMqTopic`
      </td>
    </tr>

    <tr>
      <td>
        Queue
      </td>

      <td>
        `AwsMqQueueSample`
      </td>

      <td>
        `AwsMqQueue`
      </td>
    </tr>
  </tbody>
</table>

For more on how to use your data, see [Understand and use integration data](/docs/infrastructure/integrations/find-use-infrastructure-integration-data).

## Metric data [#metrics]

This integration records Amazon MQ data for broker, topic, and queue entities.

### MQ Broker data

<table>
  <thead>
    <tr>
      <th style={{ width: "275px" }}>
        Metric
      </th>

      <th style={{ width: "150px" }}>
        Unit
      </th>

      <th>
        Description
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `CpuCreditBalance`
      </td>

      <td>
        Count
      </td>

      <td>
        The number of earned CPU credits that an instance has accrued since it was launched or started (including the number of launch credits). The credit balance is available for the broker instance to spend on bursts beyond the baseline CPU utilization. This metric is available only for the mq.t2.micro broker instance type. CPU credit metrics are available only at five-minute intervals.
      </td>
    </tr>

    <tr>
      <td>
        `CpuUtilization`
      </td>

      <td>
        Percent
      </td>

      <td>
        The percentage of allocated EC2 compute units that the broker currently uses.
      </td>
    </tr>

    <tr>
      <td>
        `CurrentConnectionsCount`
      </td>

      <td>
        Count
      </td>

      <td>
        The current number of active connections on the current broker.
      </td>
    </tr>

    <tr>
      <td>
        `EstablishedConnectionsCount`
      </td>

      <td>
        Count
      </td>

      <td>
        The total number of connections, active and inactive, that have been established on the broker.
      </td>
    </tr>

    <tr>
      <td>
        `InactiveDurableTopicSubscribersCount`
      </td>

      <td>
        Count
      </td>

      <td>
        The number of inactive durable topic subscribers, up to a maximum of 2000.
      </td>
    </tr>

    <tr>
      <td>
        `JournalFilesForFastRecovery`
      </td>

      <td>
        Count
      </td>

      <td>
        The number of journal files that will be replayed after a clean shutdown.
      </td>
    </tr>

    <tr>
      <td>
        `JournalFilesForFullRecovery`
      </td>

      <td>
        Count
      </td>

      <td>
        The number of journal files that will be replayed after an unclean shutdown.
      </td>
    </tr>

    <tr>
      <td>
        `HeapUsage`
      </td>

      <td>
        Percent
      </td>

      <td>
        The percentage of the <DNT>ActiveMQ</DNT> JVM memory limit that the broker currently uses.
      </td>
    </tr>

    <tr>
      <td>
        `NetworkIn`
      </td>

      <td>
        Bytes
      </td>

      <td>
        The volume of incoming traffic for the broker.
      </td>
    </tr>

    <tr>
      <td>
        `NetworkOut`
      </td>

      <td>
        Bytes
      </td>

      <td>
        The volume of outgoing traffic for the broker.
      </td>
    </tr>

    <tr>
      <td>
        `OpenTransactionsCount`
      </td>

      <td>
        Count
      </td>

      <td>
        The total number of transactions in progress.
      </td>
    </tr>

    <tr>
      <td>
        `StorePercentUsage`
      </td>

      <td>
        Percent
      </td>

      <td>
        The percent used by the storage limit. If this reaches 100 the broker will refuse messages.
      </td>
    </tr>

    <tr>
      <td>
        `TotalConsumerCount`
      </td>

      <td>
        Count
      </td>

      <td>
        The number of message consumers subscribed to destinations on the current broker.
      </td>
    </tr>

    <tr>
      <td>
        `TotalMessageCount`
      </td>

      <td>
        Count
      </td>

      <td>
        The number of messages stored on the broker.
      </td>
    </tr>

    <tr>
      <td>
        `TotalProducerCount`
      </td>

      <td>
        Count
      </td>

      <td>
        The number of message producers active on destinations on the current broker.
      </td>
    </tr>
  </tbody>
</table>

### MQ Topic data

<table>
  <thead>
    <tr>
      <th style={{ width: "275px" }}>
        Metric
      </th>

      <th style={{ width: "150px" }}>
        Unit
      </th>

      <th>
        Description
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `ConsumerCount`
      </td>

      <td>
        Count
      </td>

      <td>
        The number of consumers subscribed to the destination.
      </td>
    </tr>

    <tr>
      <td>
        `EnqueueCount`
      </td>

      <td>
        Count
      </td>

      <td>
        The number of messages sent to the destination, per minute.
      </td>
    </tr>

    <tr>
      <td>
        `EnqueueTime`
      </td>

      <td>
        Milliseconds
      </td>

      <td>
        The end-to-end latency from when a message arrives at a broker until it is delivered to a consumer.
      </td>
    </tr>

    <tr>
      <td>
        `ExpiredCount`
      </td>

      <td>
        Count
      </td>

      <td>
        The number of messages that couldn't be delivered because they expired, per minute.
      </td>
    </tr>

    <tr>
      <td>
        `DispatchCount`
      </td>

      <td>
        Count
      </td>

      <td>
        The number of messages sent to consumers, per minute.
      </td>
    </tr>

    <tr>
      <td>
        `DequeueCount`
      </td>

      <td>
        Count
      </td>

      <td>
        The number of messages acknowledged by consumers, per minute.
      </td>
    </tr>

    <tr>
      <td>
        `ReceiveCount`
      </td>

      <td>
        Count
      </td>

      <td>
        The number of messages that have been received from the remote broker for a duplex network connector.
      </td>
    </tr>

    <tr>
      <td>
        `InFlightCount`
      </td>

      <td>
        Count
      </td>

      <td>
        The number of messages sent to consumers that have not been acknowledged.
      </td>
    </tr>

    <tr>
      <td>
        `MemoryUsage`
      </td>

      <td>
        Percent
      </td>

      <td>
        The percentage of the memory limit that the destination currently uses.
      </td>
    </tr>

    <tr>
      <td>
        `ProducerCount`
      </td>

      <td>
        Count
      </td>

      <td>
        The number of producers for the destination.
      </td>
    </tr>
  </tbody>
</table>

### MQ Queue data

<table>
  <thead>
    <tr>
      <th style={{ width: "275px" }}>
        Metric
      </th>

      <th style={{ width: "150px" }}>
        Unit
      </th>

      <th>
        Description
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `ConsumerCount`
      </td>

      <td>
        Count
      </td>

      <td>
        The number of consumers subscribed to the destination.
      </td>
    </tr>

    <tr>
      <td>
        `EnqueueCount`
      </td>

      <td>
        Count
      </td>

      <td>
        The number of messages sent to the destination, per minute.
      </td>
    </tr>

    <tr>
      <td>
        `EnqueueTime`
      </td>

      <td>
        Milliseconds
      </td>

      <td>
        The end-to-end latency from when a message arrives at a broker until it is delivered to a consumer.
      </td>
    </tr>

    <tr>
      <td>
        `ExpiredCount`
      </td>

      <td>
        Count
      </td>

      <td>
        The number of messages that couldn't be delivered because they expired, per minute.
      </td>
    </tr>

    <tr>
      <td>
        `DispatchCount`
      </td>

      <td>
        Count
      </td>

      <td>
        The number of messages sent to consumers, per minute.
      </td>
    </tr>

    <tr>
      <td>
        `DequeueCount`
      </td>

      <td>
        Count
      </td>

      <td>
        The number of messages acknowledged by consumers, per minute.
      </td>
    </tr>

    <tr>
      <td>
        `ReceiveCount`
      </td>

      <td>
        Count
      </td>

      <td>
        The number of messages that have been received from the remote broker for a duplex network connector.
      </td>
    </tr>

    <tr>
      <td>
        `InFlightCount`
      </td>

      <td>
        Count
      </td>

      <td>
        The number of messages sent to consumers that have not been acknowledged.
      </td>
    </tr>

    <tr>
      <td>
        `MemoryUsage`
      </td>

      <td>
        Percent
      </td>

      <td>
        The percentage of the memory limit that the destination currently uses.
      </td>
    </tr>

    <tr>
      <td>
        `ProducerCount`
      </td>

      <td>
        Count
      </td>

      <td>
        The number of producers for the destination.
      </td>
    </tr>

    <tr>
      <td>
        `QueueSize`
      </td>

      <td>
        Count
      </td>

      <td>
        The number of messages in the queue.
      </td>
    </tr>
  </tbody>
</table>
