---
title: Automated monitoring of EC2 instances
tags:
  - Infrastructure
  - Automated monitoring of EC2 instances
  - EC2 instances
  - AWS Systems Manager Distributor
  - Amazon Elastic Compute Cloud
metaDescription: Automated monitoring of EC2 instances
freshnessValidatedDate: never
---

New Relic's EC2 integration installs our [infrastructure agent](/docs/infrastructure/install-infrastructure-agent/get-started/install-infrastructure-agent-new-relic) on your instances. It uses a CloudFormation template. The agent is a lightweight executable file that collects data about your instances. It also forwards data from infrastructure integrations to New Relic and forwards log data for log analytics. This document walks you through the prerequistes and steps to install the infrastructure agent on EC2 instances.

## Prerequisites [#prereq]

* Necessary IAM role for installing the CloudFormation template.
* Enable the public IP address in the EC2 instances.
* Install the SSM agent on the Amazon Machine Image (AMI) of the instance. Note: Most AMIs already include the SSM agent by default. See list of AMIs with SSM agent preinstalled [here](https://docs.aws.amazon.com/systems-manager/latest/userguide/ami-preinstalled-agent.html).
* The EC2 instance has the necessary permissions to interact with SSM and the instance profile or role is attached with the policy `AmazonSSMManagedInstanceCore`.
* The VPC subnet associated with the instance has a route table connected to an internet gateway.
* Finally, have a New Relic account and its valid license key. See [how to get New Relic license key](/docs/apis/intro-apis/new-relic-api-keys/) if you need more information.

To deploy this template in many regions, accounts, and organisational units, you need have these [permissions](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stacksets-prereqs.html).

## Steps to enable automated monitoring of instances

1. Follow all the prerequisites mentioned above.
2. Deploy the [CloudFormation template](https://github.com/aws-quickstart/quickstart-ct-newrelic-one/blob/main/templates/EC2_Quickstart.yml) on your account and fill in required fields.
   Tag key value pair associated with the EC2 instances where you want to installa the New Relic infrastructure agent. The New Relic infrastructure agent is only installed on instances that have that specific key-value pair tag. Without a specific key-value pair tag, it will install on all by default.
3. Once the deployment finishes, you can check detailed logs and metrics of qualified old and new EC2 instances of an AWS account in New Relic.

<Callout variant="important">
  There is a monthly update of all instances with the latest New Relic infrastructure agent.
</Callout>
