---
title: Integrate via CloudFormation and CloudWatch metric stream
tags:
    - Integration via CloudFormation
    - AWS metric integration
    - Amazon integrations
    - AWS integrations
    - Integration with CloudWatch Metric Streams via CloudFormation
translate:
    - jp
metaDescription: Integrate New Relic with AWS services using CloudFormation templates to automate the setup of CloudWatch Metric Streams for metrics ingestion.
redirects:

freshnessValidatedDate: never
---

For seamless integration of your AWS account with New Relic, this is the most recommended integration process. You can utilize API Polling for services not supported by CloudWatch Metric Stream.

## Prerequisites [#prerequisites]

Before you begin integrating your AWS account with New Relic, ensure that you meet the following prerequisites:
* **A New Relic [license key](https://one.newrelic.com/api-keys)**: You'll need a license key to connect your AWS services to your New Relic account.
* **[Permissions](https://docs.aws.amazon.com/ARG/latest/userguide/gettingstarted-prereqs-permissions.html)** to deploy new AWS resources and **[IAM roles](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles.html)**: You’ll need this permission for your AWS account.
* **[Permissions](/docs/accounts/accounts-billing/new-relic-one-user-management/user-permissions/#infrastructure)** for cloud integrations: You’ll need these permissions for your New Relic account.

## Integration steps [#integration-steps]

To integrate your AWS account with New Relic using CloudFormation and CloudWatch Metric Streams, follow these steps:

1. Navigate to Infrastructure > AWS.
2. Select the correct account.
3. Click Set up integration.
4. Follow the instructions on each screen, and fill in the fields that apply to you. For this integration, choose the following options in the given screens:
    a. Choose data type(s): Metrics
    b. Choose a setup method: Automate AWS with CloudFormation (Recommended)
    c. Choose a metrics integration type: CloudWatch Metric Stream (Recommended)
5. If you are using any of the services that are not supported in CloudWatch Metric Stream, on the Choose a metrics integration type page, select Yes in the third step for API polling and continue.
[Image here]
    Do the necessary setup as guided on the Enable API Polling (optional) page and continue.
6. Auto-discovery automatically detects and visualizes the relationships between your AWS entities on maps and leverages few other flexibilities. For more details, refer to [Auto-discovery of AWS entities](/docs/infrastructure/amazon-integrations/connect/set-up-auto-discovery-of-aws-entities/). If you want this feature, enable it on the Enable Auto Discovery (optional) page, and continue.
7. Click Launch your CloudFormation in AWS. The CloudFormation template opens in your AWS console with the configured parameters based on your selections in New Relic, so no additional editing is necessary unless you want to make changes.
8. Paste your license key into your AWS console.
9. To deploy the Cloudformation stack, in the AWS console, select Create stack. Creating the stack resources may take several minutes and may generate multiple stacks, depending on how you configure metrics forwarding. If stack creation fails, refer to the [troubleshooting procedure](https://docs.newrelic.com/docs/logs/troubleshooting/aws-log-integration-issues/stack-creation-fails/).
10. After a successful stack creation, switch to the New Relic platform and continue with the guided integration till you see your AWS data in New Relic.



