---
title: Container logs configuration for infrastructure monitoring
tags:
  - Infrastructure
  - Install the infrastructure agent
  - Linux installation
metaDescription: New Relic's infrastructure monitoring agent automatically instruments container runtimes to collect container metrics and metadata.
redirects:
  - /docs/infrastructure-docker-integration
  - /docs/infrastructure-docker-instrumentation
  - /docs/infrastructure/install-configure-manage-infrastructure/docker-installation/docker-container-monitoring-infrastructure
  - /docs/infrastructure/new-relic-infrastructure/data-instrumentation/docker-instrumentation-infrastructure
  - /docs/infrastructure/install-configure-manage-infrastructure/docker-installation/docker-instrumentation-infrastructure
  - /docs/infrastructure/install-configure-manage-infrastructure-agent/linux-installation/docker-instrumentation-infrastructure
  - /docs/infrastructure/install-infrastructure-agent/linux-installation/docker-instrumentation-infrastructure-monitoring
  - /docs/infrastructure/install-infrastructure-agent/linux-installation/docker-instrumentation-infrastructure
freshnessValidatedDate: never
---

import logsParsingUi from 'images/logs_screenshot-full_parsing-ui.webp'

Our [infrastructure agent](/docs/welcome-new-relic-infrastructure) can automatically gather the logs of your containers. All logs will automatically be assigned to your host that runs your Docker Compose.

## Requirements

Requirement details for log collection of your containers for New Relic's infrastructure agent:

* Open the standard logging configuration of the Infrastructure agent
* This file is typically located here: /etc/newrelic-infra/logging.d/logging.yml
* Add a section to collect logs from your containers

```yml
  - name: containers
    file: /var/lib/docker/containers/*/*.log
```

* Add a tag section to your docker-compose.yml and pass in the **{{.Name}}** default attribute

```yml
version: '3.9'
x-default-logging: &logging
  driver: "json-file"
  options:
    max-size: "5m"
    max-file: "2"
    tag: "{{.Name}}"
```

* This will add a **attrs.tag** attribute to your logs

```json
{
  agentName:Infrastructure
  agentVersion:1.50.0
  **attrs.tag:cart-service**
  coreCount:1
...
}
```

## Enable container logs [#enable]

Once the **attrs.tag** shows up in your host-level logs, you can go ahead and configure a log parsing rule in New Relic Logs.

<img
  title="Log parsing rules"
  alt="Screenshot of log parsing in UI"
  src={logsParsingUi}
/>

Apply the following configuration to the parsing rule:

* Name: container name
* Field to parse: attrs.tag
* Filter logs based on NRQL: attrs.tag is not null
* Parsing rule: %{NOTSPACE:containerName}

Click on **Create rule**.

After a little while you will see container logs assigned to your containers running on your host (rather than assigned to the host itself).
