---
title: Configure the infrastructure agent with Puppet
tags:
  - Infrastructure
  - Install the infrastructure agent
  - Config management tools
metaDescription: How to install and configure New Relic's infrastructure agent using Puppet config management.
redirects:
  - /docs/infrastructure/new-relic-infrastructure/config-management-tools/configure-new-relic-infrastructure-puppet
---

Read on to learn how to use Puppet to install and configure New Relic's infrastructure agent using the `newrelic-infra` module. For an explanation of how to use Puppet, see [Puppet documentation](https://docs.puppet.com). This is a community-supported effort.

Here we provide basic information needed to use this configuration management tool. Detailed configuration will have to conform to your company standards.

## Requirements

The Infrastructure Puppet module has these requirements:

* Puppet Enterprise 2021.5.x, 2021.4.x, 2021.3.x, 2021.2.x, 2021.1.x, 2021.0.x, 2019.8.x, 2019.7.x, 2019.5.x, 2019.4.x, 2019.3.x, 2019.2.x, 2019.1.x, 2019.0.x, 2018.1.x, 2017.3.x, 2017.2.x, 2017.1.x, 2016.5.x, 2016.4.x
* Puppet 4.0.0 or higher and lower than 8.0.0
* Debian, CentOS, OpenSUSE, RedHat, SLES, Ubuntu, Windows, Amazon Linux

## Module description [#description]

Use the `newrelic-infra` module to:

* Add the infrastructure agent package repository source.
* Install, configure, and manage the New Relic infrastructure agent.

The New Relic Puppet module is available on [Puppet Forge](https://forge.puppet.com/newrelic/newrelic_infra).

## Run `newrelic-infra` module [#beginning]

To run the default `newrelic-infra` module, declare the main `::agent` class.

## Install the infrastructure agent with the module [#usage]

All interactions with `newrelic-infra` are done through the main `agent` class.

To install New Relic's infrastructure agent using Puppet, use:

```
class { 'newrelic_infra::agent':
    ensure      => 'latest',
    license_key => 'YOUR_LICENSE_KEY',
}
```

## Puppet parameters [#reference]

Here are the parameters for the `newrelic_infra::agent` public class:

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        Parameter
      </th>

      <th>
        Parameter description
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `custom_configs`
      </td>

      <td>
        A hash of key-value pairs. Corresponds directly with the available [general configuration settings](/docs/infrastructure/new-relic-infrastructure/configuration/configure-infrastructure-agent#general).
      </td>
    </tr>

    <tr>
      <td>
        `ensure`
      </td>

      <td>
        Specifies the Infrastructure agent ensure status.

        Valid values include:

        * `'latest'` - (default) Installs the latest agent version
        * `'absent'` - Uninstalls the agent
        * `VERSION_STRING` - A string containing a specific version to pin
      </td>
    </tr>

    <tr>
      <td>
        `license_key`
      </td>

      <td>
        Specifies the New Relic <LicenseKey/> to use.
      </td>
    </tr>
  </tbody>
</table>
