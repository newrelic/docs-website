---
title: Configure the infrastructure agent using Ansible
tags:
  - Infrastructure
  - Install the infrastructure agent
  - Config management tools
metaDescription: How to install and configure New Relic's infrastructure monitoring agent using the Ansible configuration management system.
redirects:
  - /docs/infrastructure/new-relic-infrastructure/config-management-tools/configure-new-relic-infrastructure-using-ansible
---

You can use New Relic's Ansible role to install and configure our [infrastructure monitoring agent](/docs/infrastructure/new-relic-infrastructure/getting-started/welcome-new-relic-infrastructure). For instructions on how to use Ansible, see the [Ansible documentation](https://docs.ansible.com/). This is a community-supported effort.

Want to configure the infrastructure agent using Ansible? [Create a New Relic account](https://newrelic.com/signup) for free! No credit card required.

## Sample code [#role-description]

New Relic provides configuration management sample code to help you install our infrastructure monitoring agent using workflows and tools that are common with many Ops teams. This is a basic Ansible role and is intended to be used as a starting place for creating your own customized workflow.

Configuration depends on your specific setup and standards. To view an Ansible sample role and more integration information, see the [Ansible Galaxy documentation](https://galaxy.ansible.com/newrelic/newrelic-infra/).

## Compatibility and requirements [#role-compatibility]

The Ansible role with New Relic's infrastructure monitoring agent requires a [supported Linux operating system](/docs/infrastructure/new-relic-infrastructure/getting-started/compatibility-requirements-new-relic-infrastructure#operating-systems).

## Set up New Relic with Ansible [#role-setup]

The `newrelic.newrelic-infra` role:

* Adds the New Relic infrastructure agent package repository source.
* Installs and configures the infrastructure agent.

To get started using this role:

1. Include the role in your playbook.
2. Customize the required variables.

All typical interactions with `newrelic.newrelic-infra` use role configuration. Here is an example of configuring your role to install the infrastructure agent:

```
---
- hosts: webservers
  roles:
    - role: newrelic.newrelic-infra
      vars:
        nrinfragent_config:
          license_key: YOUR_LICENSE_KEY
```

## Role configuration variables [#role-config]

Here are available variables for configuring the `newrelic.newrelic-infra` role:

<table>
  <thead>
    <tr>
      <th style={{ width: "300px" }}>
        Variable
      </th>

      <th>
        Description
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `nrinfragent_config`
      </td>

      <td>
        **Required**. A map of key-value pairs. It corresponds directly with the available [general configuration settings](/docs/infrastructure/new-relic-infrastructure/configuration/configure-infrastructure-agent#general).
      </td>
    </tr>

    <tr>
      <td>
        `nrinfragent_state` (Optional)
      </td>

      <td>
        Describes what you want to do with the agent:

        * `'latest'`: Default. Installs the latest version of the infrastructure agent.
        * `'absent'`: Uninstall the agent.
      </td>
    </tr>

    <tr>
      <td>
        `nrinfragent_os_name` (Optional)
      </td>

      <td>
        Specifies the target OS that the infrastructure agent will be installed on. See the `meta/main.yml` file for the latest list.
      </td>
    </tr>

    <tr>
      <td>
        `nrinfragent_os_version` (Optional)
      </td>

      <td>
        Specifies the OS version of the installer package needed for this machine. See the `meta/main.yml` file for the latest list.
      </td>
    </tr>
  </tbody>
</table>
