---
title: Enable logs for instrumented containers
tags:
  - Infrastructure
  - Install the infrastructure agent
  - Linux installation
metaDescription: New Relic's infrastructure monitoring agent automatically instruments container runtimes to collect container metrics and metadata.
freshnessValidatedDate: never
---

import infrastructureAddNamesLogs from 'images/infrastructure_screenshot-crop_add-names-logs.webp'

import infrastructureAddContainersLogPath from 'images/infrastructure_screenshot-crop_add-containers-log-path.webp'

import logsParsingUi from 'images/infrastructure_screenshot-full_logs-parsing-ui.webp'

Our [infrastructure agent](/docs/infrastructure/infrastructure-monitoring/get-started/get-started-infrastructure-monitoring) can gather logs from your containers. When you enable logs from the infrastructure agent, the agent will automatically assign those logs to the hosts running Docker.

## Requirements [#requirements]

To collect logs from your containers, you need to have:

    * Infrastructure agent [1.8.32](/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes/new-relic-infrastructure-agent-1832) or higher running on Linux
    * CentOS version 6.0 or higher, if you're using CentOS
    * Docker with engine from [v1.12](https://docs.docker.com/engine/release-notes/prior-releases/#1120-2016-07-28) or other [`containerd`-based container runtimes](https://kubernetes.io/docs/setup/production-environment/container-runtimes)

## Collect logs from your containers [#collect-logs]

1. Create a file under `/etc/newrelic-infra/logging.d/docker-containers.yml` with the following contents:

    ```yml
    logs:
        - name: docker_containers
        file: /var/lib/docker/containers/*/*.log
    ```

    <img
        title="Add the containers path to your snippet"
        alt="A screenshot that shows where to add this snippet in context of your yaml file"
        src={infrastructureAddContainersLogPath}
    />

    * You may find this file at this path: `/etc/newrelic-infra/logging.d/logging.yml`.
    * This section directs the agent to collect logs from your containers

1. Add a tag section to your Docker configuration that passes in the default `{{.Name}}` attribute:

    * Docker run command example

        ```shell
        docker run --log-opt tag="{{.Name}}" -d log-generator
        ```

    * Docker Compose example in `docker-compose.yml`

        ```yml
        version: '3.9'
        x-default-logging: &logging
            driver: "json-file"
            options:
            max-size: "5m"
            max-file: "2"
            tag: "{{.Name}}"
        ```

    <img
        title="Configuration file in context"
        alt="Screenshot that shows this snippet in context of a configuration file"
        src={infrastructureAddNamesLogs}
    />

This adds a `attrs.tag` attribute to your logs, which looks like this snippet:

```
{
agentName:Infrastructure
agentVersion:1.50.0
**attrs.tag:cart-service**
coreCount:1
...
}
```

1. Once the `attrs.tag` appears in your host-level logs, you can create a parsing rule by going to <DoNotTranslate>**[one.newrelic.com](https://one.newrelic.com) > Logs </DoNotTranslate>, then click <DoNotTranslate>**Parsing**</DoNotTranslate>.

1. Create a log parsing rule by applying these configurations:

    * Name: The name of your container, or something descriptive to help you track your parsing rules.
    * Field to parse: `attrs.tag`
    * Filter logs based on NRQL: `attrs.tag` is not `null`
    * Parsing rule: `%{NOTSPACE:containerName}`

    Your modal should look like this:

        <img
            title="Log parsing rules"
            alt="Screenshot of log parsing in UI"
            src={logsParsingUi}
        />

1. Generate some data, wait a few minutes, and you'll see container logs assigned to your containers running on your host, rather than assigned to the host itself.

## What's next? [#whats-next]

Once you've enabled logs, we recommend checking out some of our other docs to help understand your data:

* Learn about our [logs UI](/docs/logs/ui-data/use-logs-ui).
* Check out our tutorial to [learn about managing large log volume](/docs/tutorial-manage-large-log-volume/get-started-managing-large-logs).
* Explore our [Live Archives](/docs/logs/get-started/live-archives) feature.
