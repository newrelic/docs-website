---
title: 'Java: Configure logs in context'
tags:
  - Logs
  - Enable log management in New Relic
  - Configure logs in context
metaDescription: For apps monitored by Java, learn how to link log data with related data across the rest of the New Relic platform.
redirects:
  - /docs/logs/enable-log-management-new-relic/logs-context-java
  - /docs/logs/enable-log-management-new-relic/logs-context-java/configure-logs-context-java
  - /docs/enable-logs-context-java
  - /docs/logs/new-relic-logs/enable-logs-context/enable-logs-context-java
  - /docs/logs/enable-logs/logs-context-java/configure-logs-context-java
  - /docs/logs/enable-log-monitoring-new-relic/logs-context-java/configure-logs-context-java
  - /docs/logs/enable-log-management-new-relic/logs-context-java/java-configure-dropwizard
  - /docs/enable-logs-context-dropwizard
  - /docs/logs/new-relic-logs/enable-logs-context/enable-logs-context-dropwizard
  - /docs/logs/enable-logs/logs-context-java/java-configure-dropwizard
  - /docs/logs/enable-logs/logs-context-java/configure-logs-context-dropwizard
  - /docs/logs/enable-log-monitoring-new-relic/logs-context-java/java-configure-dropwizard
  - /docs/logs/enable-log-management-new-relic/logs-context-java/java-configure-javautillogging
  - /docs/enable-logs-context-logback-0
  - /docs/enable-logs-context-java-util-logging
  - /docs/logs/new-relic-logs/enable-logs-context/enable-logs-context-java-util-logging
  - /docs/logs/enable-logs/logs-context-java/java-configure-java-util-logging
  - /docs/logs/enable-logs/logs-context-java/configure-logs-context-java-util-logging
  - /docs/logs/enable-log-monitoring-new-relic/logs-context-java/java-configure-javautillogging
  - /docs/logs/enable-log-management-new-relic/logs-context-java/java-configure-log4j-1x
  - /docs/enable-logs-context-log4j-1x
  - /docs/logs/new-relic-logs/enable-logs-context/enable-logs-context-log4j-1x
  - /docs/logs/enable-logs/logs-context-java/java-configure-log4j-1x
  - /docs/logs/enable-log-monitoring-new-relic/logs-context-java/java-configure-log4j-1x
  - /docs/logs/enable-log-management-new-relic/logs-context-java/java-configure-log4j-2x
  - /docs/enable-logs-context-log4j-2x
  - /docs/logs/new-relic-logs/enable-logs-context/enable-logs-context-log4j-2x
  - /docs/logs/enable-logs/logs-context-java/java-configure-log4j-2x
  - /docs/logs/enable-log-monitoring-new-relic/logs-context-java/java-configure-log4j-2x
  - /docs/logs/enable-log-management-new-relic/logs-context-java/java-configure-logback
  - /docs/enable-logs-context-logback
  - /docs/logs/new-relic-logs/enable-logs-context/enable-logs-context-logback
  - /docs/logs/enable-logs/logs-context-java/configure-logs-context-logback
  - /docs/logs/enable-logs/configure-logs-context/java-configure-logback
  - /docs/logs/enable-log-monitoring-new-relic/logs-context-java/java-configure-logback
  - /docs/logs/enable-log-management-new-relic/logs-context-java/java-configure-spring-spring-boot
  - /docs/logs/enable-new-relic-logs/logs-context-java/configure-spring-spring-boot
  - /docs/logs/enable-new-relic-logs/logs-context-java/configure-logs-spring-spring-boot
  - /docs/logs/enable-new-relic-logs/logs-context-java/java-configure-spring-spring-boot
  - /docs/logs/enable-log-monitoring-new-relic/logs-context-java/java-configure-spring-spring-boot
  - /docs/logs/enable-log-monitoring-new-relic/logs-context-java/java-adding-classpath
  - /docs/logs/enable-new-relic-logs/logs-context-java/java-adding-classpath
---

Logs in context for the Java agent connects your logs and APM data in New Relic. Bringing all of this data together in a single tool helps you quickly get to the root cause of an issue and find the log lines that you need to identify and resolve a problem.

## Set up your Java app [#enable-logs-java]

To enable logs in context for APM apps monitored by Java:

1. Make sure you have already [set up logging in New Relic](/docs/logs/enable-log-management-new-relic/enable-log-monitoring-new-relic/enable-log-management-new-relic/). This includes configuring a supported log forwarder that collects your application logs and extends the metadata that is forwarded to New Relic.
2. [Install](/docs/agents/java-agent/installation/install-java-agent/) or [update](/docs/agents/java-agent/installation/update-java-agent/) to the latest Java agent version. Use [Java agent version 5.6.0 or higher](/docs/release-notes/agent-release-notes/java-release-notes/) for logs in context.
3. Enable the [JVM argument `-javaagent`](/docs/agents/java-agent/installation/include-java-agent-jvm-argument), and [enable distributed tracing](/docs/distributed-tracing/enable-configure/quick-start/).
4. Configure logs in context for Java to enrich your log data, using any of the following extensions as applicable. If you use Spring or Spring Boot and aren't sure which extension you need, see our [Spring](#spring) documentation.

<CollapserGroup>
  <Collapser
    id="java-dropwizard"
    title="Dropwizard 1.3 or higher"
  >

  We offer a [Dropwizard](https://dropwizard.readthedocs.io/en/release-1.3.x/manual/core.html#logging) extension for logs in context with the Java agent. To get started, review the [code](https://github.com/newrelic/java-log-extensions/tree/main/dropwizard) and an [example application](https://github.com/newrelic/java-log-extensions/tree/main/examples/dropwizard-app) on GitHub.
  
  To configure logs in context for your Java app with the DropWizard extension:
  
  1. Make sure you have the [Dropwizard 1.3 or higher](https://dropwizard.readthedocs.io/en/release-1.3.x/manual/core.html#logging) package installed and working on your application. Use the original Dropwizard appenders and logging factory installed and working on the application.
  
  2. Make sure you have the New Relic Java agent version 5.6.0 or higher installed on your application, and that you have enabled the [JVM argument `-javaagent`](/docs/agents/java-agent/installation/include-java-agent-jvm-argument).

  3. Update your project's dependencies to include the Dropwizard 1.3 extension as applicable:

  **Gradle:** Add the following to your `build.gradle` file:

  ```
  dependencies {
      compile("com.newrelic.logging:dropwizard:2.0")
      }
  ```
  
  **Maven:** Add the following to your `pom.xml` file:

  ```
  <dependencies>
      <dependency>
          <groupId>com.newrelic.logging</groupId>
          <artifactId>dropwizard</artifactId>
          <version>2.0</version>
      </dependency>
  </dependencies>
  ```

  4. Update your Dropwizard `.yaml` configuration file with a `newrelic-json` layout, replacing the currently used `type: console` or `type: file` with either `type: newrelic-console` or `type: newrelic-file` as appropriate. For example:

  ```
  logging:
    appenders:
      - <var>type: newrelic-console</var>
        # Add the two lines below if you don't have a layout specified on the appender.
        # If you have a layout, remove all parameters to the layout and set the type.
        layout:
          <var>type: newrelic-json</var>
  ```
  
  The New Relic Dropwizard extension also supports a `log-format` layout type that uses the standard Dropwizard logging. For testing purposes, you can change the type of the layout with a one-line change:

  ```
  logging:
    appenders:
      - type: newrelic-file
        # This format will be ignored by the newrelic-json layout, but used by the log-format layout.
        logFormat: "%date{ISO8601} %c %-5p: %m trace.id=%mdc{trace.id} span.id=%mdc{span.id}%n"
        layout:
          # type: newrelic-json
          type: log-format
  ```

  </Collapser>
  
  <Collapser
    id="java-util-logging"
    title="java.util.logging"
  >

    We offer a [java.util.logging](https://docs.oracle.com/javase/7/docs/api/java/util/logging/package-summary.html) extension for logs in context with the Java agent. To get started, review the [code](https://github.com/newrelic/java-log-extensions/tree/main/jul) and an [example application](https://github.com/newrelic/java-log-extensions/tree/main/examples/jul-app) on GitHub.
  
    To configure logs in context for your Java app with with the `java.util.logging` extension:
  
    1. Make sure you have the [java.util.logging](https://docs.oracle.com/javase/7/docs/api/java/util/logging/package-summary.html) package installed and working on the application.
  
    2. Make sure you have the New Relic Java agent version 5.6.0 or higher installed on your application, and that you have enabled the [JVM argument `-javaagent`](/docs/agents/java-agent/installation/include-java-agent-jvm-argument).

    3. Update your project's dependencies to include the `java.util.logging` extension as applicable. If you can't edit these files, you can instead [add the jars directly to the application `classpath`](#java-adding-classpath).

    **Gradle:** Add the following to your `build.gradle` file:

    ```
    dependencies {
      compile("com.newrelic.logging:jul:2.0")
      }
    ```
  
    **Maven:** Add the following to your `pom.xml` file:

    ```
    <dependencies>
      <dependency>
          <groupId>com.newrelic.logging</groupId>
          <artifactId>jul</artifactId>
          <version>2.0</version>
      </dependency>
    </dependencies>
    ```

    4. Check if your logging file's `handlers` property is set to something other than `NewRelicMemoryHandler`. Look for a line listing the root logger's handlers, like this:

    ```
    handlers = java.util.logging.FileHandler
    ```
  
    5. Update your logging properties file to set the root logger's handler to `NewRelicMemoryHandler` so it intercepts messages destined for another handler:

    ```
    handlers = com.newrelic.logging.jul.NewRelicMemoryHandler
    ```

    6. Configure the `NewRelicMemoryHandler` by setting the target to the handler that was previously assigned to the root logger, so it captures data New Relic needs on the thread the log message is coming from:

    ```
    com.newrelic.logging.jul.NewRelicMemoryHandler.target = java.util.logging.FileHandler
    ```

    7. Use a `NewRelicFormatter` for the final handler. Update your logging properties file to set the `formatter` property like the following example. Make sure the handler where you set the formatter is the `target` handler from the previous step (`java.util.logging.FileHandler` in this example).

    ```
    java.util.logging.FileHandler.formatter = com.newrelic.logging.jul. NewRelicFormatter
    ```

    The New Relic log format is JSON with telemetry metadata we use to correlate transactions and logs together. Currently we do not support any customization of that format.

    Once complete, JSON is logged instead of text. The JSON should be formatted as single objects, one per line, and should contain fields like `log.level` and `thread.name`. The `trace.id`, which is required for logs in context, should only have a value for log messages that occur within a transaction.

  </Collapser>

  <Collapser
    id="java-adding-classpath"
    title="java.util.logging classpath additions"
  >

  The most direct way to get the logs-in-context extensions is to add these dependencies to Maven's `pom.xml` or Gradle's `build.gradle`. This allows the packaging tools to pick up the correct dependencies.
  
  If you can't edit these files, you can instead add the jars directly to the application `classpath` for your logging framework's configuration.

  Before you modify the classpath:

  1. Enable the [JVM argument `-javaagent`](/docs/agents/java-agent/installation/include-java-agent-jvm-argument/) on your app's Java agent.
  2. Verify which logging framework the application is using.
  3. Make sure you are able to change your logging framework's configuration.
  4. Add the following three jars to the classpath if they aren't already present. Generally, we recommend taking the latest versions published on Maven Central.

  * Group ID `com.newrelic.logging` and Artifact ID: Select the artifact named after [your application's logging framework in Maven](https://search.maven.org/search?q=g:com.newrelic.logging).
  * Group ID `com.fasterxml.jackson.core` and Artifact ID: Use [`jackson-core`](https://search.maven.org/search?q=g:com.fasterxml.jackson.core%20a:jackson-core).
  * Group ID `com.newrelic.agent.java` and Artifact ID: Use [`newrelic-api`](https://search.maven.org/search?q=g:com.newrelic.agent.java%20a:newrelic-api).

  </Collapser>

  <Collapser
    id="java-log4j-1x"
    title="Log4j 1.x"
  >

  We offer a [Log4j 1.x](https://logging.apache.org/log4j/1.2/) extension  extension for logs in context with the Java agent. To get started, review the [code](https://github.com/newrelic/java-log-extensions/tree/main/log4j1) and an [example application](https://github.com/newrelic/java-log-extensions/tree/main/examples/log4j1-app) on GitHub.
  
  To configure logs in context for your Java app with with the Log4j 1.x extension, you must configure the Log4j extension in code or via XML. Properties files are not supported because `AsyncAppender` instances can only be automatically configured via XML.
  
  1. Make sure you have the [Log4j 1.x](https://logging.apache.org/log4j/1.2/) package installed and working on the application.
  
  2. Make sure you have the New Relic Java agent version 5.6.0 or higher installed on your application, and that you have enabled the [JVM argument `-javaagent`](/docs/agents/java-agent/installation/include-java-agent-jvm-argument).
  
  3. Update your project's dependencies to include the Log4j 1.x extension as applicable.

  **Gradle:** Add the following to your `build.gradle` file:

  ```
  dependencies {
    compile("com.newrelic.logging:log4j1:2.0")
    }
  ```
  
  **Maven:** Add the following to your `pom.xml` file:

  ```
  <dependencies>
      <dependency>
          <groupId>com.newrelic.logging</groupId>
          <artifactId>log4j1</artifactId>
          <version>2.0</version>
      </dependency>
  </dependencies>
  ```

  4. In your logging configuration XML file, update your `<appender>` element with a `NewRelicLayout`, adding `<layout class="com.newrelic.logging.log4j1.NewRelicLayout"/>`:

  ```
  <appender name="<mark>TypicalFile</mark>" class="org.apache.log4j.FileAppender">
    <param name="file" value="logs/log4j1-app.log"/>
    <param name="append" value="false"/>
    <layout class="<mark>com.newrelic.logging.log4j1.NewRelicLayout</mark>"/> <!-- only this line needs to be added -->
  </appender>
  ```

  5. Use `NewRelicAsyncAppender` to wrap any appenders that will target New Relic's log forwarder. For example:

  ```
  <appender name="<mark>NewRelicFile</mark>" 
            class="com.newrelic.logging.log4j1.NewRelicAsyncAppender">
    <appender-ref ref="<mark>TypicalFile</mark>" />
  </appender>
  ```

  6. Use the async appender on the root logger. For example:

  ```
  <root>
      <appender-ref ref="<mark>NewRelicFile</mark>" />
  </root>
  ```

  **Example configuration file for the Log4j 1.x extension:**

  ```
  <?xml version="1.0" encoding="UTF-8" ?>
  <!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">
  <log4j:configuration debug="false">
    <appender name="TypicalFile" class="org.apache.log4j.FileAppender">
        <param name="file" value="logs/log4j1-app.log"/>
        <param name="append" value="false"/>
        <mark><!-- layout has been replaced --></mark>
        <mark><layout class="com.newrelic.logging.log4j1.NewRelicLayout"/></mark>
    </appender>

  <mark>    <!-- this appender was added -->
    <appender name="NewRelicFile" 
              class="com.newrelic.logging.log4j1.NewRelicAsyncAppender">
        <appender-ref ref="TypicalFile" />
    </appender></mark>

    <appender name="TypicalConsole" class="org.apache.log4j.ConsoleAppender">
      <layout class="org.apache.log4j.PatternLayout"> 
        <param name="ConversionPattern" value="%-5p %c{1} - %m%n"/> 
      </layout> 
    </appender>

    <root>        ​
        <mark><!-- the new appender was used here -->​​</mark>
        <mark><appender-ref ref="NewRelicFile" /></mark>
        <appender-ref ref="TypicalConsole" />
    </root>

  </log4j:configuration>
  ```

  </Collapser>

  <Collapser
    id="java-log4j-2x"
    title="Log4j 2.x"
  >

  We offer a [Log4j 2.x](https://logging.apache.org/log4j/2.0/log4j-slf4j-impl/index.html) extension for logs in context with the Java agent. To get started, review the [code](https://github.com/newrelic/java-log-extensions/tree/main/log4j2) and an [example application](https://github.com/newrelic/java-log-extensions/tree/main/examples/log4j2-app) on GitHub.
  
  To configure logs in context for your Java app with with the Log4j 2.x extension:
  
  1. Make sure you have the [Log4j 2.x](https://logging.apache.org/log4j/2.x/index.html) or [Logs4j 2 binding](https://logging.apache.org/log4j/2.x/log4j-slf4j-impl/) package installed and working on your application.
  
  2. Make sure you have the New Relic Java agent version 5.6.0 or higher installed on your application, and that you have enabled the [JVM argument `-javaagent`](/docs/agents/java-agent/installation/include-java-agent-jvm-argument).
  
  3. Update your project's dependencies to include the Log4j 2.x extension as applicable:

  **Gradle:** Add the highlighted section to your `build.gradle` file:

  ```
  dependencies {
      <mark>compile("com.newrelic.logging:log4j2:2.0")</mark>
  }
  ```

  **Maven:** Add the highlighted section to your `pom.xml` file:

  ```
  <dependencies>
  <mark>  <dependency>
            <groupId>com.newrelic.logging</groupId>
            <artifactId>log4j2</artifactId>
            <version>2.0</version>
          </dependency></mark>
  </dependencies>
  ```

  4. In your logging configuration XML file, update your `<configuration>` element by adding the highlighted section:

  ```
  <Configuration xmlns="http://logging.apache.org/log4j/2.0/config"
        <mark>packages="com.newrelic.logging.log4j2"</mark>
  >
  ```

  If you're using a properties file, add `packages=com.newrelic.logging.log4j2`.

  5. Add `<NewRelicLayout/>` to use a `NewRelicLayout` element within one of the appenders. For example:

  ```
  <File name="MyFile" fileName="logs/app-log-file.log">
      <mark><NewRelicLayout/></mark>
  </File>
  ```

  If you're using a properties file, only change the `layout.type`:

  ```
  appender.console.type = Console
  appender.console.name = STDOUT
  <mark>appender.console.layout.type = NewRelicLayout</mark>
  ```

  6. If you only modified an existing appender, skip this step. If you added a new appender, add `<AppenderRef/>` within `<Root>` to use this appender. Use the `ref` attribute to refer to appender `name` you created in the previous step. For example:

  ```
  <Root level="info">
      <mark><AppenderRef ref="MyFile"/></mark>
  
  </Root>
  ```

  If you're using a properties file and added a new appender, add:

  ```
  rootLogger.level = info
      <mark>rootLogger.appenderRef.stdout.ref = STDOUT</mark>
  ​​​​​```

  </Collapser>

  <Collapser
    id="java-logback"
    title="Logback version 1.2.0 or higher"
  >

  We offer a [Logback](https://logback.qos.ch/documentation.html) extension for logs in context with the Java agent. To get started, review the [code](https://github.com/newrelic/java-log-extensions/tree/main/logback) and an [example application](https://github.com/newrelic/java-log-extensions/tree/main/examples/logback-app) on GitHub.

  To configure logs in context for your Java app with Logback:
  
  1. Make sure you have [Logback version 1.2.0 or higher](https://logback.qos.ch/documentation.html) and the New Relic Java agent version 5.6.0 or higher installed and working on your application.
  
  2. Make sure you have the New Relic Java agent version 5.6.0 or higher installed on your application, and that you have enabled the [JVM argument `-javaagent`](/docs/agents/java-agent/installation/include-java-agent-jvm-argument).

  3. Update your project's dependencies to include the Logback extension as applicable:

  **Gradle:** Add the highlighted section to your `build.gradle` file:

  ```
  dependencies {
      <mark>compile("com.newrelic.logging:logback:2.0")</mark>
  }
  ```

  **Maven:** Add the highlighted section to your `pom.xml` file:

  ```
  <dependencies>
  <mark>  <dependency>
            <groupId>com.newrelic.logging</groupId>
            <artifactId>logback</artifactId>
            <version>2.0</version>
          </dependency></mark>
  </dependencies>
  ```

  4. Update your logging configuration `xml` to replace any existing `<encoder>` element.

  If you're logging to the console (`stdout/stderr`), look for `ConsoleAppender` and replace:

  ```
  <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
      <encoder class="com.newrelic.logging.logback.NewRelicEncoder"/>
  </appender>
  ```

  If you're logging to a file, look for `FileAppender` and replace `<encoder>`:

  ```
  <appender name="LOG_FILE" class="ch.qos.logback.core.FileAppender">
      <file>logs/app-log-file.log</file>
      <encoder class="com.newrelic.logging.logback.NewRelicEncoder"/>
  </appender>
  ```

  5. Update your logging configuration `xml` with the `NewRelicAsyncAppender`. To ensure that `NewRelicAsyncAppender` wraps any appenders that will target New Relic's log forwarder, add the following section. Change `"LOG_FILE"` to the name of the appender you updated in the previous step.

  ```
  <appender name="ASYNC" class="com.newrelic.logging.logback.NewRelicAsyncAppender">
      <appender-ref ref="LOG_FILE" />
  </appender>
  ```

  6. Make sure `NewRelicAsyncAppender` is the **first** appender used in your logger. Replace your root logger’s appenders with the `ASYNC` appender created in the previous step. Then list any other appenders **after** the `NewRelicAsyncAppender` in the `<root>` list.

  ```
  <root>
      <appender-ref ref="ASYNC" />
  </root>
  ```

  Here are examples of an updated logging `.xml` file for the Logback extension. You can also see a [working example in GitHub](https://github.com/newrelic/java-log-extensions/blob/master/examples/logback-app/src/main/resources/logback.xml).

  **Single console appender example**

  Example configuration file after adding in the logging extension information:

    ```
    <configuration>
      <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">

        <!-- changed the encoder -->
        <encoder class="com.newrelic.logging.logback.NewRelicEncoder"/>

      </appender>

      <!-- added the ASYNC appender -->
      <appender name="ASYNC" class="com.newrelic.logging.logback.NewRelicAsyncAppender">
        <appender-ref ref="STDOUT" />
      </appender>

      <root level="debug">

        <!-- changed the root logger -->
        <appender-ref ref="ASYNC" /> 

      </root>
    </configuration>
    ```

  **Two console appenders example**

  This example sends New Relic logging to a file, but still sends standard logging to the console:

    ```
    <configuration>
      <appender name="FILE" class="ch.qos.logback.core.FileAppender">
        <file>myApp.log</file>
        <!-- encoder changed -->
        <encoder class="com.newrelic.logging.logback.NewRelicEncoder"/>
      </appender>

      <!-- this appender does normal console logging -->
      <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
          <pattern>%msg%n</pattern>
        </encoder>
      </appender>

      <!-- The required New Relic ASYNC appender wraps the FILE appender -->
      <appender name="ASYNC" class="com.newrelic.logging.logback.NewRelicAsyncAppender">
        <appender-ref ref="FILE" /> 
      </appender>

      <root level="debug">
        <!-- ASYNC is one of the main appenders -->
        <appender-ref ref="ASYNC" /> 

        <!-- Send every message to normal console logging, as well. -->
        <appender-ref ref="STDOUT" />
      </root>
    </configuration>
    ```

  </Collapser>

 <Collapser
    id="spring"
    title="Spring and Springboot"
  >

  We offer extensions for current versions of [Spring](https://spring.io/) and [Spring Boot](https://spring.io/projects/spring-boot). If you already know the logging library, you can skip directly to that documentation:

    * [java.util.logging](#java-util-logging)
    * [log4j 1](#java-log4j-1x)
    * [log4j 2](#java-log4j-2x)
    * [logback](#java-logback)

  The extensions support default configurations only on Spring Boot 2.0 and higher.

  **With Spring Boot:**

  Here are tips to determine which logging library you have:

  * If you have `spring-boot-starter-log4j2` in your dependencies, you're using **log4j 2.x**. Refer to the [Spring Boot log4j 2.x documentation](https://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto-configure-log4j-for-logging) for basic configuration, and the [New Relic log4j 2 extension](#java-log4j-2x) for customizing your configuration.
  * If you're using Spring Boot but **not** the `starter-log4j2`, you're using **logback** by default. Refer to [Spring Boot logback documentation](https://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto-configure-logback-for-logging) for basic configuration, and the [New Relic logback extension](#logback) for customizing your configuration.

  ** With Spring (but not Spring Boot):**

  Spring 5 or higher:

  Spring implements a [bridge](https://docs.spring.io/spring/docs/current/javadoc-api/org/apache/commons/logging/LogFactory.html) to other logging libraries that will automatically find them. However, those individual libraries must be configured and explicitly included in your project dependencies.

  To identify your logging dependency, consult your [Gradle](https://docs.gradle.org/current/userguide/viewing_debugging_dependencies.html), [Maven](https://maven.apache.org/plugins/maven-dependency-plugin/examples/resolving-conflicts-using-the-dependency-tree.html), or other build tool's dependency tree. Then follow the procedures to configure logs in context for your Java app with that extension.

  Spring 4 or lower:

  Spring version 4 and lower uses [Apache Commons Logging](https://commons.apache.org/proper/commons-logging/guide.html) for its bridge. Refer to the [Spring documentation](https://docs.spring.io/spring/docs/4.3.12.RELEASE/spring-framework-reference/html/overview.html#overview-logging) for information on configuring its bridge.

  </Collapser>

</CollapserGroup>

## View logs in UI [#test-view]

To verify that you have configured the log appender correctly, run your application, then check your [logs data in New Relic One](/docs/logs/log-management/ui-data/use-logs-ui/) using the query operator `has:span.id has:trace.id`.

If everything is configured correctly and your data is being forwarded to New Relic with the enriched metadata, your logs should now be emitted as JSON and contain `trace.id` and `span.id` fields. If you don't see log data in the UI, follow the [troubleshooting procedures](/docs/logs/log-management/troubleshooting/no-log-data-appears-ui/).

## What's next? [#what-next]

After you set up APM logs in context, make the most of your logging data:

* Explore the logging data across your platform with our [Logs UI](/docs/logs/log-management/ui-data/use-logs-ui/).
* See your logs in context of your app's performance in the [APM UI](/docs/logs/log-management/ui-data/use-logs-ui/#links). Troubleshoot [errors](/docs/apm/apm-ui-pages/error-analytics/errors-page-find-fix-verify-problems/) with [distributed tracing](/docs/apm/distributed-tracing/ui-data/understand-use-distributed-tracing-data), stack traces, application logs, and more.
* Get deeper visibility into both your application and your platform performance data by forwarding your logs with our [infrastructure monitoring agent](/docs/logs/enable-log-management-new-relic/enable-log-monitoring-new-relic/forward-your-logs-using-infrastructure-agent/). Review your [infrastructure logs](/docs/logs/log-management/ui-data/use-logs-ui/#links) in the UI.
* Set up [alerts](/docs/alerts-applied-intelligence/new-relic-alerts/alert-conditions/create-alert-conditions/).
* [Query your data](/docs/query-your-data/explore-query-data/get-started/introduction-querying-new-relic-data/) and [create dashboards](/docs/query-your-data/explore-query-data/dashboards/introduction-dashboards/).
