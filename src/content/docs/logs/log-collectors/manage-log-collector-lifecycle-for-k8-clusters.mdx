---
title: Set up Fluent Bit health monitoring for Kubernetes clusters
tags:
  - Health management configuration for Fluent Bit on Kubernetes
  - Fluent Bit configuration management
  - Fluent Bit on Kubernetes cluster
metaDescription: '
  Monitor the health of Fluent Bit log collector on your Kubernetes clusters. Set up, monitor, and update Fluent Bit configurations.
  '
freshnessValidatedDate: never
---

<Callout title="preview">
  We're still working on this feature, but we'd love for you to try it out!

  This feature is currently provided as part of a preview program pursuant to our [pre-release policies](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy).
</Callout>

Fluent Bit health monitoring is a solution in New Relic that enables you to monitor the health and performance of your log collection collector in your Kubernetes clusters. It provides insights into the performance of your log collection infrastructure, helping you identify potential issues and facilitating troubleshooting. To learn more about the Fluent Bit health monitoring solution, and the available monitoring levels, see [Overview](/docs/logs/log-collectors/overview).

While you are planning to monitor the health of the Fluent Bit log collector on your Kubernetes clusters, it is presumed that either you are already collecting logs from your Kubernetes clusters using Fluent Bit, or you are planning to set up Fluent Bit for log collection. Following are the two ways you can set up Fluent Bit for log collection in your Kubernetes clusters:

<CollapserGroup>

<Collapser id="set-up-fb-on-k8" title="Install Kubernetes integration with Fluent Bit">
 High level steps with links to detailed instructions:
### Prerequisites [#prerequisites]
  Before you install and configure Fluent Bit for logging with New Relic, ensure you have the following prerequisites:
  - Access to a Kubernetes cluster
  - The necessary tools and permissions for installation and configuration
  - Network settings and security policies to allow communication with New Relic endpoints
  - A New Relic account

  <Callout variant="important">
    You can also manage Fluent Bit via New Relic Control.  For information, see [Fleet Control](/docs/new-relic-control/fleet-control/overview).
  </Callout>

  For more information on these requirements, refer to [Forward your logs to New Relic](/docs/logs/forward-logs/enable-log-management-new-relic).
  For information on New Relic Control setup, see [Getting started with New Relic Control](/docs/new-relic-control/getting-started).

  ### Set up [#setup]
  To install the Fluent Bit agent in Kubernetes clusters:
  - Install the [New Relic Kubernetes integration](/install/kubernetes/). This integration includes the Kubernetes plugin for logs.
  - Use the configuration options available in the [newrelic-logging repository](https://github.com/newrelic/helm-charts/tree/master/charts/newrelic-logging#configuration) during the [guided install](/install/kubernetes/).

  For details, refer to [Enable Kubernetes for log management](/docs/logs/forward-logs/kubernetes-plugin-log-forwarding/#enable-process).

</Collapser>
<Collapser id="install-fb-on-k8-via-fleet-control" title="Install Fluent Bit with Fleet Control">
  If you're starting with Fleet Control, you'll set up your agent control configuration first. This process includes installing the Fluent Bit agent and other essential components. 

  To use Fluent Bit with Agent Control, enable log forwarding as part of the Agent Control installation, as shown in the sample configuration:

  <CollapserGroup>
    <Collapser
      id="fluent-bit-config"
      title="Sample config"
    >
          ```yaml
              global:
          cluster: "YOUR_CLUSTER_NAME"
          licenseKey: "YOUR_LICENSE_KEY"
          userKey: "YOUR_USER_KEY"

          # Values related to the agent control's Helm chart release.
          # `https://github.com/newrelic/helm-charts/blob/master/charts/agent-control/values.yaml`
          agent-control-deployment:
            identityClientId: ""
            identityClientSecret: ""
            config:
                fleet_control:
                # Optional: Specify a fleet_id (entity guid) to automatically connect to an existing fleet.
                fleet_id: ""
                auth:
                    # New Relic organization ID where agent will connect to.
                    organizationId: "YOUR_ORGANIZATION_ID"
                
                # List of managed agents that will be deployed. The key represents the name of the agent and the value holds the configuration.
            subAgents:
              infrastructure:
                type: newrelic/com.newrelic.infrastructure:0.1.0
                content:
                  # Ref: `https://github.com/newrelic/helm-charts/tree/master/charts/nri-bundle`
                  # Recommended: check and define an explicit chart version (latest stable)
                  chart_version: "*"   
                  # chart_values:
                  #   newrelic-infrastructure:
                  #   enableProcessMetrics: true
              logs:
                  type: newrelic/io.fluentbit:0.1.0
                  content:
                  # Ref: `https://github.com/newrelic/helm-charts/tree/master/charts/newrelic-logging`
                  # Recommended: check and define an explicit chart version (latest stable)
                  chart_version: "*"
                  chart_values:
                      newrelic-logging:
                        sendMetrics: true
            agent-operator:
              type: com.newrelic.k8s_agent_operator:0.1.0
              content:
                chart_version: "*"
          ```
    </Collapser>
  </CollapserGroup>

  Remember to uncomment the necessary configurations and replace placeholders such as `YOUR_CLUSTER_NAME` and `YOUR_LICENSE_KEY` with your actual values.

  <Callout variant="important">
    Specify an explicit chart version to ensure consistency and reliability across deployments.
  </Callout>
</Collapser>
</CollapserGroup>

After you set up your Fluent Bit agent, you will start receiving logs in New Relic, and simultaneously, you can [monitor the health and performance of your log collector](/docs/logs/log-collectors/monitor-health-of-log-collector) from the Fluent Bit entity UI.

## Upgrade the Fluent Bit health monitoring level [#upgrade-fluent-bit-health-monitoring-level]

While observing the health and performance metrics, if you want to modify the configuration for troubleshooting, or upgrade your [Fluent Bit health monitoring level](/docs/logs/log-collectors/Overview/#health-monitoring-levels), you can do it in two ways:

* [Remote configuration ia Fleet Control](#manage-and-deploy-config-via-fleet-control).
* [Configuration in Kubernetes environment](#configuration-in-kubernetes-environment).

  ### Manage and deploy configuration via Fleet Control [#manage-and-deploy-config-via-fleet-control]
  To add a new or edit an existing Fluent Bit configuration, use [Fleet Control](/docs/new-relic-control/fleet-control/overview). The high-level tasks to manage and deploy a configuration are:

<Steps>

<Step>
  #### Create a configuration [#create-a-configuration]

  To create a Fluent Bit configuration, follow these steps:
  1. In New Relic, go to All Capabilities, search for New Relic Control, and then pin it to the side.
  2. In New Relic Control, open Configurations.
  3. Click **Create configuration**.
  4. To create a configuration from scratch, click **New** in the drop-down menu. If you have an existing Fluent Bit configuration and want to leverage it, clone it by clicking **Clone**.
  5. In the Create configuration dialog box, select **Kubernetes** as the environment, select **Fluent Bit** as the agent type, and enter a name for the configuration. Then, click **Continue**.
  6. In the Configuration column, copy the configuration template and then customize it per your requirements. For details, see [supported parameters](https://github.com/newrelic/helm-charts/tree/master/charts/newrelic-logging#supported-configuration-parameters).
  7. Save your changes. Your configuration will be added to the list of configurations on the Configuration page.
  8. To edit your configuration, select the three dots (…) next to it, click **Edit configuration**, and make your changes. Then, click **Save**.
</Step>

<Step>
  #### Create a deployment [#create-a-deployment]

  To deploy the Fluent Bit configuration to your Kubernetes cluster, follow these steps:
  1. In New Relic Control, open **Fleets**.
  2. Select the fleet you want to create a Fluent Bit configuration for.
  3. Click **Create a deployment**.
  4. On the New deployment page, enter a deployment name and description, and then click **Add a configuration**.
  5. Select **Fluent Bit** as the agent type, select the configuration you want to deploy, and then click **Next**.
  6. Select the configuration version. 
  <Callout variant="important">
    A configuration can have multiple versions. Choose the version you want to deploy. For a newly created configuration, you’ll have only one version.
  </Callout>
  7. Click **Add to deployment**. 
  <Callout variant="important">
    Ensure the fleet has at least one managed entity. Or, add one.
  </Callout>
  8. Click **Start deployment**. 
</Step>

<Step>
#### View fleet [#view-fleet]
  In Fleets, select the specific fleet you want to work with. This opens the fleet detail page. The Summary tab shows the entities that are part of your fleet. To view agent or deployment details, use the Agents or the Deployments tab.
</Step>

</Steps>

  

### Configuration in Kubernetes environment [#configuration-in-kubernetes-environment]
  To modify the Fluent Bit configuration in your Kubernetes environment, follow these steps:
  1. [Check with devloper]
  2. 
  3. 
  4. 


## Related topics [#related-topics]

<DocTiles>
  <DocTile title="Monitor the health and performance of the Fluent Bit agent" path="/docs/logs/log-collectors/monitor-health-of-log-collector" >Learn how to monitor the health and performance of the Fluent Bit agent</DocTile>
  <DocTile title="Upgrade your Fleunt Bit version" path="/docs/logs/log-collectors/upgrade-log-collector" >Learn how to upgrade your Fleunt Bit version</DocTile>
  <DocTile title="Troubleshoot common issues" path="/docs/logs/log-collectors/troubleshooting" >Learn how to troubleshoot common issues with Fluent Bit health monitoring</DocTile>
  <DocTile title="Overview of Fluet Bit health monitoring" path="/docs/logs/log-collectors/overview">Learn about the Fluent Bit health monitoring solution</DocTile>
</DocTiles>
