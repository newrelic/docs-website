---
title: "eBPF network metrics"
metaDescription: "Learn how to configure New Relic eBPF network monitoring dashboard."
tags:
    - Integrations
    - eBPF integration
    - eAPM
    - eBPF Network monitoring
    - extended Berkeley Packet Filter (eBPF)
    - Linux host
    - Kubernetes cluster
freshnessValidatedDate: never
---


<Callout title="Preview">
We're still working on this feature, but we'd love for you to try it out!

This feature is currently provided as part of a preview pursuant to our [pre-release policies](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy/). It is not available to customers subject to HIPAA or FedRAMP regulations.
</Callout>


The eBPF network monitoring provides deep visibility into your system's network health by tracking critical DNS and TCP metrics directly from the kernel. You can diagnose connectivity issues by analyzing success and failure rates for DNS resolutions and TCP connections. Pinpoint performance bottlenecks by monitoring key latencies like TCP handshakes, packet delivery, and the duration of short-lived connections. The dashboard also helps you track data throughput by visualizing bytes sent, received, and any packets dropped.

## Deployment options [#deployment-options]

You can enable eBPF network metrics in two ways depending on your current monitoring setup:

* **For existing New Relic APM customers:** If you already have New Relic APM agents deployed, you can add eBPF network metrics alongside your existing instrumentation. The eBPF agent operates in network-only mode, complementing your APM data with kernel-level network insights without disrupting your current setup.

* **For comprehensive monitoring:** Deploy the full eBPF agent with both eAPM and network metrics capabilities for complete observability across application, infrastructure, and network layers. This approach provides unified telemetry collection through a single agent.

Both deployment options provide the same network monitoring capabilities described below.

## Network monitoring capabilities [#network-capabilities]

The network metrics dashboard has the following tabs to monitor different aspects of network performance:

* **Errors:** Displays DNS, TCP, and other network-related errors.
* **Latency:** Monitors key latencies like TCP handshakes, packet delivery, and the duration of short-lived connections.
* **Packet loss:** Tracks any packets dropped during transmission. It also contains information such as kernel packet dropped, TCP connection timeouts, and packet retransmitted.
* **TCP flags:** Displays the status flags for TCP connections for both inbound and outbound traffic.
* **Connections:** Displays the inbound and outbound TCP connections, connection count, average connection duration, and max connection duration.


## Enroll to eBPF network monitoring [#enroll-pp]

You can enroll to eBPF network monitoring from the <DNT>**Preview & Trials**</DNT> page:

1. Go to <DNT>**[one.newrelic.com > Administration](https://one.newrelic.com/admin-portal)**</DNT>.
2. From the left nav, click <DNT>**Preview & Trials**</DNT>.
3. From the list of available preview features, click <DNT>**eBPF network monitoring**</DNT>.
4. Follow the on-screen instructions and accept the terms & conditions to complete the onboarding. Now, you can experience the new eBPF network monitoring capabilities from the APM.

## Enable network metrics-only mode for existing APM customers [#network-only-mode]

If you already have New Relic APM agents deployed and want to add network visibility without disrupting your current instrumentation, you can configure the eBPF agent to operate in network metrics-only mode. This provides kernel-level network insights that complement your existing APM data.

With network metrics-only mode enabled, the eBPF agent will collect and report network telemetry data while suppressing eAPM data collection. This allows you to maintain your existing APM instrumentation while gaining additional network-layer visibility.


### For Kubernetes environment [#k8s-env]

<CollapserGroup>

    <Collapser
        className="freq-link"
        id="k8s-new"
        title="New installation"
    >

Run the following command to enable network metrics-only mode in new Kubernetes installations:

```bash
KSM_IMAGE_VERSION="v2.13.0" && helm repo add newrelic https://helm-charts.newrelic.com && helm repo update && kubectl create namespace "newrelic" ; helm upgrade --install nr-ebpf-agent newrelic/nr-ebpf-agent --set licenseKey=<your-license-key> --set cluster="cluster-name-ebpf" --set apmDataReporting=false --namespace=newrelic
```

    </Collapser>

    <Collapser
        className="freq-link"
        id="k8s-existing"
        title="Existing installation"
    >

Follow the below steps to enable network metrics-only mode in existing Kubernetes installations:

1. Add the following `apmDataReporting` key with a value of `false` to your `values.yaml` file:

    ```yaml
    apmDataReporting: false
    ```

2. Apply the configuration:

    ```bash
        helm repo update ; helm upgrade --install nr-ebpf-agent newrelic/nr-ebpf-agent -n newrelic --values values.yaml
    ```

</Collapser>

</CollapserGroup>


### Linux host environment [#linux-env]

<CollapserGroup>

<Collapser
    className="freq-link"
    id="linux-new"
    title="New installation"
>

Run the following command to enable network metrics-only mode in new Linux host installations:


```bash
curl -Ls https://download.newrelic.com/install/newrelic-cli/scripts/install.sh | sudo bash && sudo DEPLOYMENT_NAME=<deployment-name> NEW_RELIC_API_KEY=<your-api-key> NEW_RELIC_ACCOUNT_ID=<your-account-id> NEW_RELIC_REGION=US NEW_RELIC_CLI_SKIP_CORE=1 /usr/local/bin/newrelic install -n ebpf-agent-installer
```

</Collapser>

<Collapser
    className="freq-link"
    id="linux-existing"
    title="Existing installation"
>

Follow the below steps to enable network metrics-only mode in existing Linux host installations:

1. Add the following `apmDataReporting` key with a value of `false` to your `newrelic-ebpf-agent.conf` file:

    ```bash
    APM_DATA_REPORTING="false"
    ```


2. Restart the eBPF agent services:

    ```bash
    sudo systemctl restart newrelic-ebpf-agent
    sudo systemctl restart newrelic-ebpf-agent-client
    ```

</Collapser>

</CollapserGroup>



## View the eBPF network monitoring data [#view-network-data]

You can view the eBPF network monitoring data in the New Relic APM UI:


1. Go to **[one.newrelic.com](https://one.newrelic.com) > APM & Services**.
2. Select the desired eBPF entity.
3. In the Monitor section, click **Network Metrics**.
    The network metrics displays.


<Callout variant="tip">

The eBPF agent automatically generates entity names differently depending on the environment:

    * In hosts or Docker, these names are a combination of the process name, its directory or container ID, and the listening port. For example, `ruby:/home/ubuntu/app:[5678]` or `java:f4aead533895:[8080]`.

    * In Kubernetes, these names are derived from the service name for example, `mysql-database-service`.

Assigning custom name to applications:

    * You can assign a name of your choice to your application by setting the `NEW_RELIC_APP_NAME` environment variable for both docker containers and on-host applications.

    * The named application will appear in the New Relic UI suffixed with `-ebpf`.

</Callout>


<DocTiles>
    <DocTile title="eBPF Kubernetes installation" path="/docs/ebpf/k8s-installation/">Learn how to set up the New Relic eBPF agent for your Kubernetes cluster.</DocTile>
    <DocTile title="eBPF Linux installation" path="/docs/ebpf/linux-installation/">Learn how to set up the New Relic eBPF agent for your Linux host.</DocTile>
    <DocTile title="Troubleshooting eBPF" path="/docs/ebpf/troubleshooting/no-ui-data/">Learn how to troubleshoot issues with the New Relic eBPF agent.</DocTile>
</DocTiles>