---
title: "Install and configure New Relic eBPF integration"
metaDescription: "Learn how to install and configure the New Relic eBPF agent for your Linux host and Kubernetes cluster."
tags:
    - New Relic integrations with eBPF
    - New Relic eBPF agent
    - eBPF integration
    - eAPM
    - Linux host
    - New Relic eBPF agent for Linux
freshnessValidatedDate: never
---

<Callout title="Preview">
We're still working on this feature, but we'd love for you to try it out!

This feature is currently provided as part of a preview pursuant to our [pre-release policies](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy/). It is not available to customers subject to HIPAA or FedRAMP regulations.
</Callout>

You can install the New Relic eBPF agent on your Linux host to monitor your entire system health. The eBPF agent provides deep visibility into application performance without requiring code changes or deploying language-specific agents.

## Compatibility and requirements [#requirements]


* Linux kernel versions `5.4` and later.
* Root privileges
* Support `ARM, ARM 64, x86,` and `x86-64` architectures.
* A minimum of `2 GB` of RAM is required for host installations.
* Supports the following distributions:
    * Ubuntu `20.04` and later
    * Debian `11` and later
    * CentOS Stream `9` and later
    * RHEL `8` and later


## Install the eBPF agent [#install]

To install the eBPF agent:

1. Log in to your New Relic account.
2. Go to **left navigation pane > + Integration & Agents > eBPF Agent**.
3. On the Select an account screen, select the account you want to install the eBPF agent on, and click **Continue**.
4. On the Select an installation method page, select **Install on a host**, and click **Continue**.
5. On the Enter your user key screen, select one of the following options, then click **Continue**:

    * **Use an existing key**: If you already have a user key, provide the user key. For more information, refer to [User keys](/docs/apis/intro-apis/new-relic-api-keys/#user-key).
    * **Create a new key**: If you don't have a user key, click **Create a new key** to create one.

6. On the Configure the host integration screen, enter the deployment name for host, then click **Continue**.
7. On the Install the agent screen, run the provided command in your terminal to install the eBPF agent.

    1. Copy and paste the displayed command to install the eBPF agent on your host.
    
    2. To verify the installation, run the following command:
    
        * For eBPF agent:

            ```bash
                sudo systemctl status newrelic-ebpf-agent
            ```
        * For eBPF client:

            ```bash
                sudo systemctl status newrelic-ebpf-client
            ``` 
    
    Upon successful installation, the status of these services display as active (running). 

    <Callout variant="tip">
        You can customize the eBPF agent configuration by editing the `newrelic-ebpf-agent.conf` file. For more information on the configuration parameters, refer to [Configuration parameters](#config-params).
    </Callout> 

## Find and use data [#data]

Once your host is instrumented and configured to export data to New Relic, you can configure eBPF Dashboard to view your data in the New Relic UI:

1. Go to **[one.newrelic.com](https://one.newrelic.com) > Dashboards**.
2. In the **Dashboards**, click **+ Create a dashboard**.
3. In the **Create a dashboard** window, click **Browse pre-built dashboards**.
4. In the search bar, type **eBPF** and select the **eBPF**.
5. *(Optional)* In the displayed window, click **Edit** to change the account.
6. Click **Setup eBPF Agent** to setup the data source or click **Skip this step** if the eBPF agent is already setup.
7. Click **View dashboard** to view the data collected by the eBPF agent.

{/* 

    * Find your entity at <DNT>**All entities > Services - OpenTelemetry**</DNT>. The entity name is set to the value of the app's `service.name` resource attribute. For more information on how New Relic service entities are derived from OpenTelemetry resource attributes, see [Services](/docs/opentelemetry/best-practices/opentelemetry-best-practices-resources/#services).
    * Use [NRQL](/docs/nrql/get-started/introduction-nrql-new-relics-query-language/) to query directly for [traces](https://one.newrelic.com/launcher/nr1-core.explorer?overlay=eyJuZXJkbGV0SWQiOiJkYXRhLWV4cGxvcmF0aW9uLnF1ZXJ5LWJ1aWxkZXIiLCJpbml0aWFsQWN0aXZlSW50ZXJmYWNlIjoibnJxbEVkaXRvciIsImluaXRpYWxOcnFsVmFsdWUiOiIiLCJpbml0aWFsUXVlcmllcyI6W3sibnJxbCI6IkZST00gU3BhbiBTRUxFQ1QgY291bnQoKikgd2hlcmUgbmV3cmVsaWMuc291cmNlPSclb3RscCUnIFRJTUVTRVJJRVMifV0sImluaXRpYWxDaGFydFNldHRpbmdzIjp7ImNoYXJ0VHlwZSI6IkNIQVJUX0xJTkUiLCJsaW1pdCI6NzU0MiwibGlua2VkRW50aXR5R3VpZCI6bnVsbCwibGlua2VkRGFzaGJvYXJkSWQiOm51bGwsInlTY2FsZSI6eyJzdGF0aWMiOmZhbHNlLCJkb21haW4iOltudWxsLG51bGxdfSwieVplcm8iOnRydWV9fQo=), [metrics](https://one.newrelic.com/launcher/nr1-core.explorer?overlay=eyJuZXJkbGV0SWQiOiJkYXRhLWV4cGxvcmF0aW9uLnF1ZXJ5LWJ1aWxkZXIiLCJpbml0aWFsQWN0aXZlSW50ZXJmYWNlIjoibnJxbEVkaXRvciIsImluaXRpYWxOcnFsVmFsdWUiOiIiLCJpbml0aWFsUXVlcmllcyI6W3sibnJxbCI6IkZST00gTWV0cmljIFNFTEVDVCBjb3VudCgqKSB3aGVyZSBuZXdyZWxpYy5zb3VyY2UgTElLRSAnJW90bHAlJyBUSU1FU0VSSUVTIn1dLCJpbml0aWFsQ2hhcnRTZXR0aW5ncyI6eyJjaGFydFR5cGUiOiJDSEFSVF9MSU5FIiwibGltaXQiOjc1NDIsImxpbmtlZEVudGl0eUd1aWQiOm51bGwsImxpbmtlZERhc2hib2FyZElkIjpudWxsLCJ5U2NhbGUiOnsic3RhdGljIjpmYWxzZSwiZG9tYWluIjpbbnVsbCxudWxsXX0sInlaZXJvIjp0cnVlfX0K), and [logs](https://one.newrelic.com/launcher/nr1-core.explorer?overlay=eyJuZXJkbGV0SWQiOiJkYXRhLWV4cGxvcmF0aW9uLnF1ZXJ5LWJ1aWxkZXIiLCJpbml0aWFsQWN0aXZlSW50ZXJmYWNlIjoibnJxbEVkaXRvciIsImluaXRpYWxOcnFsVmFsdWUiOiIiLCJpbml0aWFsUXVlcmllcyI6W3sibnJxbCI6IkZST00gTG9nIFNFTEVDVCBjb3VudCgqKSB3aGVyZSBuZXdyZWxpYy5zb3VyY2U9JyVvdGxwJScgVElNRVNFUklFUyJ9XSwiaW5pdGlhbENoYXJ0U2V0dGluZ3MiOnsiY2hhcnRUeXBlIjoiQ0hBUlRfTElORSIsImxpbWl0Ijo3NTQyLCJsaW5rZWRFbnRpdHlHdWlkIjpudWxsLCJsaW5rZWREYXNoYm9hcmRJZCI6bnVsbCwieVNjYWxlIjp7InN0YXRpYyI6ZmFsc2UsImRvbWFpbiI6W251bGwsbnVsbF19LCJ5WmVybyI6dHJ1ZX19Cg==).
    * See [OpenTelemetry APM UI](/docs/opentelemetry/get-started/apm-monitoring/opentelemetry-apm-ui) for more information.

If you can't find your entity and don't see your data with NRQL, see [OTLP troubleshooting](/docs/opentelemetry/best-practices/opentelemetry-otlp-troubleshooting).
You can find the data collected by the eBPF agent in the New Relic Opentelementry UI.  

*/}



## Configuration parameters [#config-params]

The [`newrelic-ebpf-agent.conf`]() `config file link is needed` file contains the following configuration parameters:

<table>
    <thead>
        <tr>
        <th>Parameter name</th>
        <th>Description</th>
        <th>Data type</th>
        <th>Example value</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>`NEW_RELIC_LICENSE_KEY`</td>
            <td>Specifies your New Relic license key, which is required to send data.</td>
            <td>`String`</td>
            <td>`22387565c...FFFFNRAL`</td>
        </tr>
        <tr>
            <td>`DEPLOYMENT_NAME`</td>
            <td>Specifies a unique name for your deployment to help identify its data in New Relic.</td>
            <td>`String`</td>
            <td>`fe`</td>
        </tr>
        <tr>
            <td>`OTLP_ENDPOINT`</td>
            <td>Defines the OTLP endpoint where the agent sends telemetry data.</td>
            <td>`String (Host:Port)`</td>
            <td>`staging-otlp.nr-data.net:4317`</td>
        </tr>
        <tr>
            <td>`NEW_RELIC_LOG_LEVEL`</td>
            <td>Sets the agent's log level. Options are `OFF`, `FATAL`, `ERROR`, `WARNING`, `INFO`, `DEBUG` in increasing order of verbosity.</td>
            <td>`String`</td>
            <td>`INFO`</td>
        </tr>
        <tr>
            <td>`NEW_RELIC_LOG_FILE_PATH`</td>
            <td>Specifies the file path for agent logs. If empty or the path is invalid, logs are sent to standard output (stdout).</td>
            <td>`String (Path)`</td>
            <td>`""`</td>
        </tr>
        <tr>
            <td>`DROP_DATA_FOR_ENTITY`</td>
            <td>Provides a comma-separated list of `NEW_RELIC_APP_NAME` values. The agent will drop data from processes matching these application names.</td>
            <td>`String`</td>
            <td>`""`</td>
        </tr>
        <tr>
            <td>`TLS_ENABLED`</td>
            <td>Enables or disables TLS for communication between the eBPF client and agent.</td>
            <td>`Boolean or String`</td>
            <td>`"true"`</td>
        </tr>
            <tr>
            <td>`TLS_AUTOGENERATE_CERT_ENABLED`</td>
            <td>If set to `true`, automatically generates a self-signed certificate for TLS. Set to `false` if you are providing your own certificates.</td>
            <td>`Boolean or String`</td>
            <td>`"true"`</td>
        </tr>
        <tr>
            <td>`TLS_CERT_PATH`</td>
            <td>Specifies the directory path where autogenerated TLS certificates are stored.</td>
            <td>`String (Path)`</td>
            <td>`/tmp/ebpf/certs/`</td>
        </tr>
        <tr>
            <td>`TLS_CERT_FILE`</td>
            <td>Specifies the path to your custom PEM-encoded public certificate file. Required if `TLS_AUTOGENERATE_CERT_ENABLED` is `false`.</td>
            <td>`String (Path)`</td>
            <td>`""`</td>
        </tr>
        <tr>
            <td>`TLS_KEY_FILE`</td>
            <td>Specifies the path to your custom PEM-encoded private key file. Required if `TLS_AUTOGENERATE_CERT_ENABLED` is `false`.</td>
            <td>`String (Path)`</td>
            <td>`""`</td>
        </tr>
        <tr>
            <td>`TLS_CA_FILE`</td>
            <td>Specifies the path to your custom PEM-encoded Certificate Authority (CA) file. Required if `TLS_AUTOGENERATE_CERT_ENABLED` is `false`.</td>
            <td>`String (Path)`</td>
            <td>`""`</td>
        </tr>
        <tr>
            <td>`TABLE_STORE_DATA_LIMIT_MB`</td>
            <td>Sets the maximum memory (in MiB) that the eBPF agent can use for its internal data table store. This is the primary way to control the agent's RAM usage.</td>
            <td>Integer</td>
            <td>`250`</td>
        </tr>
        <tr>
            <td>`PROTOCOLS_HTTP_ENABLED`</td>
            <td>Enables or disables all HTTP protocol tracing (metrics and spans).</td>
            <td>`Boolean or String`</td>
            <td>`"true"`</td>
        </tr>
        <tr>
            <td>`PROTOCOLS_HTTP_SPANS_ENABLED`</td>
            <td>Enables or disables the exporting of spans for HTTP requests.</td>
            <td>`Boolean or String`</td>
            <td>`"true"`</td>
        </tr>
        <tr>
            <td>`PROTOCOLS_HTTP_SPANS_SAMPLING_LATENCY`</td>
            <td>Sets the sampling latency threshold for exporting HTTP spans. Spans for requests slower than this percentile are exported. Options: `p1`, `p10`, `p50`, `p90`, `p99`.</td>
            <td>`String`</td>
            <td>`"p50"`</td>
        </tr>
        <tr>
            <td>`PROTOCOLS_HTTP_SPANS_SAMPLING_ERROR_RATE`</td>
            <td>Sets an error rate percentage (1-100) for an HTTP route. If a route's error rate exceeds this value, its corresponding spans are exported.</td>
            <td>`Integer (as string)`</td>
            <td>`""`</td>
        </tr>
        <tr>
            <td>`PROTOCOLS_MYSQL_ENABLED`</td>
            <td>Enables or disables all MySQL protocol tracing.</td>
            <td>`Boolean or String`</td>
            <td>`"true"`</td>
        </tr>
        <tr>
            <td>`PROTOCOLS_MYSQL_SPANS_ENABLED`</td>
            <td>Enables or disables exporting of spans for MySQL queries.</td>
            <td>`Boolean or String`</td>
            <td>`"false"`</td>
        </tr>
        <tr>
            <td>`PROTOCOLS_PGSQL_ENABLED`</td>
            <td>Enables or disables all PostgreSQL protocol tracing.</td>
            <td>`Boolean or String`</td>
            <td>`"true"`</td>
        </tr>
        <tr>
            <td>`PROTOCOLS_PGSQL_SPANS_ENABLED`</td>
            <td>Enables or disables exporting of spans for PostgreSQL queries.</td>
            <td>`Boolean or String`</td>
            <td>`"false"`</td>
        </tr>
        <tr>
            <td>`PROTOCOLS_CASS_ENABLED`</td>
            <td>Enables or disables all Cassandra protocol tracing.</td>
            <td>`Boolean or String`</td>
            <td>`"true"`</td>
        </tr>
        <tr>
            <td>`PROTOCOLS_CASS_SPANS_ENABLED`</td>
            <td>Enables or disables exporting of spans for Cassandra queries.</td>
            <td>`Boolean or String`</td>
            <td>`"false"`</td>
        </tr>
        <tr>
            <td>`PROTOCOLS_REDIS_ENABLED`</td>
            <td>Enables or disables all Redis protocol tracing.</td>
            <td>`Boolean or String`</td>
            <td>`"true"`</td>
        </tr>
        <tr>
            <td>`PROTOCOLS_REDIS_SPANS_ENABLED`</td>
            <td>Enables or disables exporting of spans for Redis commands.</td>
            <td>`Boolean or String`</td>
            <td>`"false"`</td>
        </tr>
        <tr>
            <td>`PROTOCOLS_MONGODB_ENABLED`</td>
            <td>Enables or disables all MongoDB protocol tracing.</td>
            <td>`Boolean or String`</td>
            <td>`"true"`</td>
        </tr>
        <tr>
            <td>`PROTOCOLS_MONGODB_SPANS_ENABLED`</td>
            <td>Enables or disables exporting of spans for MongoDB queries.</td>
            <td>`Boolean or String`</td>
            <td>`"false"`</td>
        </tr>
        <tr>
            <td>`PROTOCOLS_KAFKA_SPANS_ENABLED`</td>
            <td>Enables or disables exporting of spans for Kafka messages. Note: Kafka tracing does not report metrics.</td>
            <td>`Boolean or String`</td>
            <td>`"false"`</td>
        </tr>
        <tr>
            <td>`PROTOCOLS_AMQP_SPANS_ENABLED`</td>
            <td>Enables or disables exporting of spans for AMQP (e.g., RabbitMQ) messages. Note: AMQP tracing does not report metrics.</td>
            <td>`Boolean or String`</td>
            <td>`"false"`</td>
        </tr>
        <tr>
            <td>`PROTOCOLS_DNS_SPANS_ENABLED`</td>
            <td>Enables or disables exporting of spans for DNS queries. Note: DNS tracing does not report metrics.</td>
            <td>`Boolean or String`</td>
            <td>`"false"`</td>
        </tr>
    </tbody>
</table>

