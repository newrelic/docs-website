---
title: "Install New Relic eBPF agent for Linux hosts"
metaDescription: "Learn how to install and configure the New Relic eBPF agent for your Linux host with Debian package installation."
tags:
    - New Relic integrations with eBPF
    - New Relic eBPF agent
    - eBPF integration
    - eAPM
    - Linux host
    - New Relic eBPF agent for Linux
freshnessValidatedDate: never
---



You can install the New Relic eBPF agent on your Linux host to monitor your entire system health. The eBPF agent provides deep visibility into application performance without requiring code changes or deploying language-specific agents.

## Install the New Relic eBPF agent

<Steps>

<Step>

### Before you begin [#requirements]

You must meet the prerequisites outlined in the [eBPF compatibility and requirements](/docs/ebpf/requirements#linux) documentation for Linux hosts.

</Step>

<Step>

### Install the eBPF agent [#install]

To install the eBPF agent:

1. Log in to your New Relic account.
2. Go to **left navigation pane > + Integration & Agents > eBPF Agent**.
3. On the Select an account screen, select the account you want to install the eBPF agent on, and click **Continue**.
4. On the Select an installation method page, select **On a host**, and click **Continue**.
5. On the Enter your user key screen, select one of the following options, then click **Continue**:

    * **Use an existing key**: If you already have a user key, provide the user key. For more information, refer to [User keys](/docs/apis/intro-apis/new-relic-api-keys/#user-key).
    * **Create a new key**: If you don't have a user key, click **Create a new key** to create one.

6. On the Configure the host integration screen, enter the deployment name for host, then click **Continue**.
7. On the Install the agent screen, run the provided command in your terminal to install the eBPF agent via Debian package.

    1. Copy and paste the displayed command to install the eBPF agent on your Debian host.
    2. To verify the installation, run the following command:

        ```bash
            sudo systemctl status newrelic-ebpf-agent
        ```    
    Upon successful installation, the status of these services display as active (running). 

    <Callout variant="tip">

        You can customize the eBPF agent configuration by editing the `newrelic-ebpf-agent.conf` file available at `/etc/newrelic-ebpf-agent/newrelic-ebpf-agent.conf`. For more information on the configuration parameters, refer to [Configuration parameters](#config-params).

    </Callout>

</Step>

<Step>

### Access the eBPF data in New Relic [#access-data]

Once the eBPF agent is installed, it automatically starts collecting data from your Linux host. You can access this data in New Relic's OpenTelemetry UI. For more information on New Relic OpenTelemetry UI, refer [OpenTelemetry APM UI](/docs/opentelemetry/get-started/apm-monitoring/opentelemetry-apm-ui).

**To view the eBPF data in New Relic:**

1. Go to **[one.newrelic.com](https://one.newrelic.com) > APM & Services**.
2. In the search banner, set the search criteria as `instrumentation.name = nr_ebpf`:
    <img
        style={{ align: 'left' }}
        title="eBPF filters"
        alt="eBPF filter for eBPF data in New Relic OpenTelemetry UI"
        src="/images/ebpf_filters.webp"
    />

</Step>

</Steps>

{/* 

    * Find your entity at <DNT>**All entities > Services - OpenTelemetry**</DNT>. The entity name is set to the value of the app's `service.name` resource attribute. For more information on how New Relic service entities are derived from OpenTelemetry resource attributes, see [Services](/docs/opentelemetry/best-practices/opentelemetry-best-practices-resources/#services).
    * Use [NRQL](/docs/nrql/get-started/introduction-nrql-new-relics-query-language/) to query directly for [traces](https://one.newrelic.com/launcher/nr1-core.explorer?overlay=eyJuZXJkbGV0SWQiOiJkYXRhLWV4cGxvcmF0aW9uLnF1ZXJ5LWJ1aWxkZXIiLCJpbml0aWFsQWN0aXZlSW50ZXJmYWNlIjoibnJxbEVkaXRvciIsImluaXRpYWxOcnFsVmFsdWUiOiIiLCJpbml0aWFsUXVlcmllcyI6W3sibnJxbCI6IkZST00gU3BhbiBTRUxFQ1QgY291bnQoKikgd2hlcmUgbmV3cmVsaWMuc291cmNlPSclb3RscCUnIFRJTUVTRVJJRVMifV0sImluaXRpYWxDaGFydFNldHRpbmdzIjp7ImNoYXJ0VHlwZSI6IkNIQVJUX0xJTkUiLCJsaW1pdCI6NzU0MiwibGlua2VkRW50aXR5R3VpZCI6bnVsbCwibGlua2VkRGFzaGJvYXJkSWQiOm51bGwsInlTY2FsZSI6eyJzdGF0aWMiOmZhbHNlLCJkb21haW4iOltudWxsLG51bGxdfSwieVplcm8iOnRydWV9fQo=), [metrics](https://one.newrelic.com/launcher/nr1-core.explorer?overlay=eyJuZXJkbGV0SWQiOiJkYXRhLWV4cGxvcmF0aW9uLnF1ZXJ5LWJ1aWxkZXIiLCJpbml0aWFsQWN0aXZlSW50ZXJmYWNlIjoibnJxbEVkaXRvciIsImluaXRpYWxOcnFsVmFsdWUiOiIiLCJpbml0aWFsUXVlcmllcyI6W3sibnJxbCI6IkZST00gTWV0cmljIFNFTEVDVCBjb3VudCgqKSB3aGVyZSBuZXdyZWxpYy5zb3VyY2UgTElLRSAnJW90bHAlJyBUSU1FU0VSSUVTIn1dLCJpbml0aWFsQ2hhcnRTZXR0aW5ncyI6eyJjaGFydFR5cGUiOiJDSEFSVF9MSU5FIiwibGltaXQiOjc1NDIsImxpbmtlZEVudGl0eUd1aWQiOm51bGwsImxpbmtlZERhc2hib2FyZElkIjpudWxsLCJ5U2NhbGUiOnsic3RhdGljIjpmYWxzZSwiZG9tYWluIjpbbnVsbCxudWxsXX0sInlaZXJvIjp0cnVlfX0K), and [logs](https://one.newrelic.com/launcher/nr1-core.explorer?overlay=eyJuZXJkbGV0SWQiOiJkYXRhLWV4cGxvcmF0aW9uLnF1ZXJ5LWJ1aWxkZXIiLCJpbml0aWFsQWN0aXZlSW50ZXJmYWNlIjoibnJxbEVkaXRvciIsImluaXRpYWxOcnFsVmFsdWUiOiIiLCJpbml0aWFsUXVlcmllcyI6W3sibnJxbCI6IkZST00gTG9nIFNFTEVDVCBjb3VudCgqKSB3aGVyZSBuZXdyZWxpYy5zb3VyY2U9JyVvdGxwJScgVElNRVNFUklFUyJ9XSwiaW5pdGlhbENoYXJ0U2V0dGluZ3MiOnsiY2hhcnRUeXBlIjoiQ0hBUlRfTElORSIsImxpbWl0Ijo3NTQyLCJsaW5rZWRFbnRpdHlHdWlkIjpudWxsLCJsaW5rZWREYXNoYm9hcmRJZCI6bnVsbCwieVNjYWxlIjp7InN0YXRpYyI6ZmFsc2UsImRvbWFpbiI6W251bGwsbnVsbF19LCJ5WmVybyI6dHJ1ZX19Cg==).
    * See [OpenTelemetry APM UI](/docs/opentelemetry/get-started/apm-monitoring/opentelemetry-apm-ui) for more information.

If you can't find your entity and don't see your data with NRQL, see [OTLP troubleshooting](/docs/opentelemetry/best-practices/opentelemetry-otlp-troubleshooting).
You can find the data collected by the eBPF agent in the New Relic Opentelementry UI.  

*/}


## Upgrade the eBPF agent [#upgrade]

To upgrade the eBPF agent on a Linux host, re-execute the installation command from the New Relic UI. This process will install the new agent version while automatically removing the older one.

<Callout variant="important">
Upgrading through a package manager is not supported. You must use the installation command from the New Relic UI for a successful upgrade.
</Callout>

To get the latest installation command:

1. Go to **[one.newrelic.com](https://one.newrelic.com) > + Integration & Agents > eBPF Agent**
2. Follow the installation flow to get the updated command
3. Run the command on your host to upgrade the agent


## Configuration parameters [#config-params]

The `newrelic-ebpf-agent.conf` file contains the following configuration parameters:

<CollapserGroup>

    <Collapser
        id="configuration"
        title="Configuration parameters"
    >

<table>
    <thead>
        <tr>
        <th>Parameter name</th>
        <th>Description</th>
        <th>Data type</th>
        <th>Example value</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>`NEW_RELIC_LICENSE_KEY`</td>
            <td>Specifies your New Relic license key, which is required to send data.</td>
            <td>`String`</td>
            <td>`22387565c...FFFFNRAL`</td>
        </tr>
        <tr>
            <td>`DEPLOYMENT_NAME`</td>
            <td>Specifies a unique name for your deployment to help identify its data in New Relic.</td>
            <td>`String`</td>
            <td>`fe`</td>
        </tr>
        <tr>
            <td>`OTLP_ENDPOINT`</td>
            <td>Defines the OTLP endpoint where the agent sends telemetry data.</td>
            <td>`String (Host:Port)`</td>
            <td>`otlp.nr-data.net:443`</td>
        </tr>
        <tr>
            <td>`NEW_RELIC_LOG_LEVEL`</td>
            <td>Sets the agent's log level. Options are `OFF`, `FATAL`, `ERROR`, `WARNING`, `INFO`, `DEBUG` in increasing order of verbosity.</td>
            <td>`String`</td>
            <td>`INFO`</td>
        </tr>
        <tr>
            <td>`NEW_RELIC_LOG_FILE_PATH`</td>
            <td>Specifies the file path for agent logs. If empty or the path is invalid, logs are sent to standard output (stdout).</td>
            <td>`String (Path)`</td>
            <td>`""`</td>
        </tr>
        <tr>
            <td>`APM_DATA_REPORTING`</td>
            <td>Enable APM data reporting. When enabled, the agent collects and reports application performance monitoring data.</td>
            <td>`String`</td>
            <td>`"true"`</td>
        </tr>
        <tr>
            <td>`DROP_NETWORK_METRICS_DATA_FOR_ENTITY_NAME`</td>
            <td>Comma-separated list of entity names for dropping Network metrix data.(Example: "kube-dns,otel-collector,service1").</td>
            <td>`String`</td>
            <td>`""`</td>
        </tr>
        <tr>
            <td>`KEEP_NETWORK_METRICS_DATA_FOR_ENTITY_NAME`</td>
            <td>Comma-separated list of entity names to always keep Network metrix data. default all entity is keepd/enabled. This bypasses DROP_NETWORK_METRICS_DATA_FOR_ENTITY_NAME filter. (Example: "critical-service,important-app,must-monitor").</td>
            <td>`String`</td>
            <td>`""`</td>
        </tr>
        <tr>
            <td>`DROP_APM_DATA_FOR_ENTITY_NAME`</td>
            <td>Comma-separated list of entity names for dropping eBPF APM data. (Example: "kube-dns,otel-collector,service1")</td>
            <td>`String`</td>
            <td>`""`</td>
        </tr>
        <tr>
            <td>`KEEP_APM_DATA_FOR_ENTITY_NAME`</td>
            <td>Comma-separated list of entity names to always keep eBPF APM data. default all entity is keepd/enabled. This bypasses DROP_APM_DATA_FOR_ENTITY_NAME filter.(Example: "critical-service,important-app,must-monitor")</td>
            <td>`String`</td>
            <td>`""`</td>
        </tr>
        <tr>
            <td>`DROP_APM_DATA_FOR_APM_AGENT_ENABLED_ENTITY`</td>
            <td>Drop eBPF APM data for applications/entities that have NewRelic/OpenTelemetry APM agents running</td>
            <td>`String`</td>
            <td>`"false"`</td>
        </tr>
        <tr>
            <td>`DROP_ALL_DATA_FOR_ENTITY_NAME_REGEX`</td>
            <td>Regular expression pattern to match entity names for dropping ALL data (TCP stats + APM data)(Example: "java-app|otel-collector|\\bservice1\\b")</td>
            <td>`String`</td>
            <td>`""`</td>
        </tr>
        <tr>
            <td>`KEEP_ALL_DATA_FOR_ENTITY_NAME_REGEX`</td>
            <td>Regular expression pattern to match entity names to always keep ALL data for. This bypasses all drop filters.(Example: "critical-service|important-app|\\bmust-monitor\\b")</td>
            <td>`String`</td>
            <td>`""`</td>
        </tr>
        <tr>
            <td>`DROP_ALL_DATA_FOR_APM_AGENT_ENABLED_ENTITY`</td>
            <td>Drop all data for applications/entities that have NewRelic/OpenTelemetry APM agents running</td>
            <td>`String`</td>
            <td>`"false"`</td>
        </tr>
        <tr>
            <td>`INCLUDE_PORT_IN_SERVER_ENTITY_IDENTIFICATION`</td>
            <td>The configuration allows you to include or exclude ports from auto-discovered entity names. Typically, names appear as `processName:cwd/container_name:[port]`, e.g., `python:frosty_merkle:[80]`. To exclude port details, set this option to false for names like `python:frosty_merkle`.</td>
            <td>`String`</td>
            <td>`"true"`</td>
        </tr>
        <tr>
            <td>`TABLE_STORE_DATA_LIMIT_MB`</td>
            <td>Sets the maximum memory (in MiB) that the eBPF agent can use for its internal data table store. This is the primary way to control the agent's RAM usage.</td>
            <td>Integer</td>
            <td>`250`</td>
        </tr>
        <tr>
            <td>`DOWNLOADED_PACKAGED_HEADERS_PATH`</td>
            <td>Sets the absolute path of the complete directory where the required linux headers are manually downloaded and placed for the eBPF agent to use. This is useful under restricted environments where agent is not able to download required linux headers. The required headers are identified by the agent based on the kernel version. Use only after NR support recommendation.</td>
            <td>`String (Path)`</td>
            <td>`"/path/to/downloaded/headers/dir"`</td>
        </tr>
        <tr>
            <td>`DISTRO_KERNEL_HEADERS_PATH`</td>
            <td>Sets the absolute path of the complete directory where the linux headers are present for the eBPF agent to use. This is useful where required linux headers could not be installed or path could not be determined. Use only after NR support recommendation.</td>
            <td>`String (Path)`</td>
            <td>`"/usr/src/kernels"`</td>
        </tr>
        <tr>
            <td>`PROTOCOLS_HTTP_ENABLED`</td>
            <td>Enables or disables all HTTP protocol tracing (metrics and spans).</td>
            <td>`String`</td>
            <td>`"true"`</td>
        </tr>
        <tr>
            <td>`PROTOCOLS_HTTP_SPANS_ENABLED`</td>
            <td>Enables or disables the exporting of spans for HTTP requests.</td>
            <td>`String`</td>
            <td>`"true"`</td>
        </tr>
        <tr>
            <td>`PROTOCOLS_HTTP_SPANS_SAMPLING_LATENCY`</td>
            <td>Sets the sampling latency threshold for exporting HTTP spans. Spans for requests slower than this percentile are exported. Options: `p1`, `p10`, `p50`, `p90`, `p99`.</td>
            <td>`String`</td>
            <td>`"p50"`</td>
        </tr>
        <tr>
            <td>`PROTOCOLS_HTTP_SPANS_SAMPLING_ERROR_RATE`</td>
            <td>Sets an error rate percentage (1-100) for an HTTP route. If a route's error rate exceeds this value, its corresponding spans are exported.</td>
            <td>`String`</td>
            <td>`""`</td>
        </tr>
        <tr>
            <td>`PROTOCOLS_MYSQL_ENABLED`</td>
            <td>Enables or disables all MySQL protocol tracing.</td>
            <td>`String`</td>
            <td>`"true"`</td>
        </tr>
        <tr>
            <td>`PROTOCOLS_MYSQL_SPANS_ENABLED`</td>
            <td>Enables or disables exporting of spans for MySQL queries.</td>
            <td>`String`</td>
            <td>`"false"`</td>
        </tr>
        <tr>
            <td>`PROTOCOLS_PGSQL_ENABLED`</td>
            <td>Enables or disables all PostgreSQL protocol tracing.</td>
            <td>`String`</td>
            <td>`"true"`</td>
        </tr>
        <tr>
            <td>`PROTOCOLS_PGSQL_SPANS_ENABLED`</td>
            <td>Enables or disables exporting of spans for PostgreSQL queries.</td>
            <td>`String`</td>
            <td>`"false"`</td>
        </tr>
        <tr>
            <td>`PROTOCOLS_CASS_ENABLED`</td>
            <td>Enables or disables all Cassandra protocol tracing.</td>
            <td>`String`</td>
            <td>`"true"`</td>
        </tr>
        <tr>
            <td>`PROTOCOLS_CASS_SPANS_ENABLED`</td>
            <td>Enables or disables exporting of spans for Cassandra queries.</td>
            <td>`String`</td>
            <td>`"false"`</td>
        </tr>
        <tr>
            <td>`PROTOCOLS_REDIS_ENABLED`</td>
            <td>Enables or disables all Redis protocol tracing.</td>
            <td>`String`</td>
            <td>`"true"`</td>
        </tr>
        <tr>
            <td>`PROTOCOLS_REDIS_SPANS_ENABLED`</td>
            <td>Enables or disables exporting of spans for Redis commands.</td>
            <td>`String`</td>
            <td>`"false"`</td>
        </tr>
        <tr>
            <td>`PROTOCOLS_MONGODB_ENABLED`</td>
            <td>Enables or disables all MongoDB protocol tracing.</td>
            <td>`String`</td>
            <td>`"true"`</td>
        </tr>
        <tr>
            <td>`PROTOCOLS_MONGODB_SPANS_ENABLED`</td>
            <td>Enables or disables exporting of spans for MongoDB queries.</td>
            <td>`String`</td>
            <td>`"false"`</td>
        </tr>
        <tr>
            <td>`PROTOCOLS_KAFKA_SPANS_ENABLED`</td>
            <td>Enables or disables exporting of spans for Kafka messages. Note: Kafka tracing does not report metrics.</td>
            <td>`String`</td>
            <td>`"false"`</td>
        </tr>
        <tr>
            <td>`PROTOCOLS_AMQP_SPANS_ENABLED`</td>
            <td>Enables or disables exporting of spans for AMQP (e.g., RabbitMQ) messages. Note: AMQP tracing does not report metrics.</td>
            <td>`String`</td>
            <td>`"false"`</td>
        </tr>
        <tr>
            <td>`PROTOCOLS_DNS_SPANS_ENABLED`</td>
            <td>Enables or disables exporting of spans for DNS queries. Note: DNS tracing does not report metrics.</td>
            <td>`String`</td>
            <td>`"false"`</td>
        </tr>
    </tbody>
</table>

</Collapser>

</CollapserGroup>



## Uninstall the eBPF agent [#uninstall]

To uninstall the eBPF agent from a Linux host, use your system's package management tools:

```bash
sudo apt-get remove newrelic-ebpf-agent
```

<Callout variant="tip">
It is not necessary to stop the service before running the uninstall command.
</Callout>

<DocTiles>
    <DocTile title="eBPF Kubernetes installation" path="/docs/ebpf/k8s-installation/">Learn how to set up the New Relic eBPF agent for your Kubernetes cluster.</DocTile>
    <DocTile title="Troubleshooting eBPF" path="/docs/ebpf/troubleshooting/no-ui-data/">Learn how to troubleshoot issues with the New Relic eBPF agent.</DocTile>
    <DocTile title="eBPF best practices" path="/docs/ebpf/best-practices/">Learn about best practices for using the New Relic eBPF agent.</DocTile>
</DocTiles>
