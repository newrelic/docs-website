---
title: 'Dashboards API migration: from Insights API to Nerdgraph'
tags:
  - New Relic One
  - Use New Relic One
  - Core concepts
---

In case you haven’t heard, NerdGraph is [New Relic’s unified API in a GraphQL](https://docs.newrelic.com/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph) flavor. The new dashboards API follows this unified approach and is exposed through [NerdGraph](/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph) for user consumption.

## Why a new dashboards API? [#why-new-api]

[Dashboards](/docs/query-your-data/explore-query-data/dashboards/introduction-dashboards) in New Relic embrace the [entity concept](https://docs.newrelic.com/docs/new-relic-one/use-new-relic-one/core-concepts/what-entity-new-relic) and are now an entity in New Relic’s entity ecosystem. Dashboards can now connect with any other type of entity for better observability solutions, which opens the door to endless opportunities.

At the same time, we have built new features for dashboards:

* [All New Relic One dashboards are structured in pages, known as Data Apps in Insights](/docs/query-your-data/explore-query-data/dashboards/manage-your-dashboard#)
* [Multiple queries from different accounts within the same widget](/docs/query-your-data/explore-query-data/query-builder/use-advanced-nrql-mode-query-data)
* [Facet linking](/docs/query-your-data/explore-query-data/dashboards/filter-new-relic-one-dashboards-facets)
* [Facet linking with support for cases](/docs/query-your-data/explore-query-data/dashboards/filter-new-relic-one-dashboards-facets#)

## Operations mapping table [#operations-mapping-table]

The table below maps every Insights API operation to the new dashboards API.

| Insights API operation  | Nergraph API query/mutation  | Notes  |
|---|---|---|
| List (GET)      | [entitySearch()](/docs/new-relic-one/use-new-relic-one/core-concepts/dashboards-api-migration-insights-api-nerdgraph/#entitysearch)           | View a paginated list of dashboards that match the filter |
| Show (GET)      | [entity()](/docs/new-relic-one/use-new-relic-one/core-concepts/dashboards-api-migration-insights-api-nerdgraph/#entityquery)                  | View an existing dashboard given its entity guid |
| Create (POST)   | [dashboardCreate()](/docs/new-relic-one/use-new-relic-one/core-concepts/dashboards-api-migration-insights-api-nerdgraph/#dashboard-create)    | Create a new dashboard  |
| Update (PUT)    | [dashboardUpdate()](/docs/new-relic-one/use-new-relic-one/core-concepts/dashboards-api-migration-insights-api-nerdgraph/#dashboard-update)    | Update an existing dashboard given its entity guid  |
| Delete (DELETE) | [dashboardDelete()](/docs/new-relic-one/use-new-relic-one/core-concepts/dashboards-api-migration-insights-api-nerdgraph/#dashboard-delete)    | Delete an existing dashboard given its entity guid  |


## Dashboard properties mapping table [#dashboard-properties-mapping-table]

For more information about all the fields in the new dashboards GraphQL schema, have a look at [NerdGraph's GraphiQL explorer](/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph#explorer).

The table below maps dashboard properties from the Insights API to the new dashboards API.

| Insights API dashboard property  | Nergraph API dashboard property  | Notes  |
|---|---|---|
| id                    | guid        | Id of the New Relid entity the dashboard now represents |
| createdAt             | createdAt   | |
| updatedAt             | updatedAt   | |
| title                 | name        | |
| editable              | [permissions](/docs/query-your-data/explore-query-data/dashboards/introduction-dashboards/#dashboards-permissions) | `editable` and `visibility` merged in the same concept |
| visibility            | [permissions](/docs/query-your-data/explore-query-data/dashboards/introduction-dashboards/#dashboards-permissions) | `editable` and `visibility` merged in the same concept |
| description           | description | |
| metadata              | -           | No need of versioning in GraphQL APIs |
| icon                  | -           | Not translated to New Relic One |
| grid_column_count     | -           | 12 column dashboards by default in New Relic One |
| filter                | -           | Not translated to New Relic One yet |

## Widget properties mapping table [#widget-properties-mapping-table]

For more information about all the fields in the new dashboards GraphQL schema, have a look at [NerdGraph's GraphiQL explorer](/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph#explorer).

The table below maps widget properties from the Insights API to the new dashboards API.

| Insights API dashboard property  | Nergraph API dashboard property  | Notes  |
|---|---|---|
| id                                    | id                                | |
| account_id                            | -                                 | Translated into widget configuration for those that require one |
| visualization                         | visualization                     | |
| presentation.title                    | title                             | |
| presentation.drilldown_dashboard_id   | linkedEntities                    | Used to link a widget to a dashboard for the [facet linking](/docs/query-your-data/explore-query-data/dashboards/filter-new-relic-one-dashboards-facets) feature |
| presentation.notes                    | -                                 | Not translated to New Relic One yet |
| layout                                | layout                            | |
| data                                  | configuration + rawConfiguration  | |

<Callout variant="tip">
  See [this doc](/docs/apis/nerdgraph/examples/create-widgets-dashboards-api/) to learn how to build every type of widget.
</Callout>

## Visualizations mapping table [#visualization-mapping-table]

We have simplified our widget visualizations by grouping the ones that were in fact the same but obtained through different types of queries. For instance, a line widget is plotted the same way regardless of the type of query: old `line_chart` vs `comparison_line_chart` in Insights.

| Insights API visualization  | Nergraph API visualization  |
|---|---|---|
|uniques_list|viz.table|
|single_event|viz.table|
|facet_table|viz.table|
|event_table|viz.table|
|faceted_area_chart|viz.area|
|predefined_metric_chart.application_breakdown|viz.area|
|predefined_metric_chart.scope_breakdown|viz.area|
|predefined_metric_chart.browser_breakdown|viz.area|
|predefined_metric_chart.background_breakdown|viz.area|
|predefined_metric_chart.solr_breakdown|viz.area|
|predefined_metric_chart.gc_runs_breakdown|viz.area|
|facet_bar_chart|viz.bar|
|billboard|viz.billboard|
|attribute_sheet|viz.billboard|
|billboard_comparison|viz.billboard|
|gauge|viz.bullet|
|event_feed|viz.event-feed|
|funnel|viz.funnel|
|heatmap|viz.heatmap|
|histogram|viz.histogram|
|inventory|infra.inventory|
|raw_json|viz.json|
|line_chart|viz.line|
|comparison_line_chart|viz.line|
|faceted_line_chart|viz.line|
|metric_line_chart|viz.line|
|markdown|viz.markdown|
|facet_pie_chart|viz.pie|

## Examples: from REST endpoints to GraphQL queries/mutations [#from-rest-to-mutation]

One of the main benefits from a GraphQL API is that it provides a complete and understandable description of the APIs' data. By using [NerdGraph GraphiQL explorer](https://docs.newrelic.com/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph#explorer), you can discover GraphQL types and fields, along with a brief explanation.

We want to facilitate your migration from the [Insights API](/docs/apis/insights-apis/insights-dashboard-api/) to the new New Relic One dashboards API. Find below some examples that illustrate how the old REST endpoints map to the new GraphQL queries or mutations.

### List (GET) -> entitySearch query [#entitysearch]

Dashboards in New Relic One embrace the concept of entity. They are now another entity in New Relic’s entity ecosystem.

Try it out using the [NerdGraph GraphiQL explorer](/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph#explorer).

<CollapserGroup>
  <Collapser
    id="list-all-dashboards"
    title="List all dashboard entities you have access to"
  >
    ```
      {
        actor {
          entitySearch(queryBuilder: {type: DASHBOARD}) {
            results {
              entities {
                ... on DashboardEntityOutline {
                  guid
                  name
                  accountId
                }
              }
            }
          }
        }
      }
    ```
  </Collapser>

  <Collapser
    id="list-dashboards-by-name"
    title="List all dashboards by name"
  >
    ```
      {
        actor {
          entitySearch(queryBuilder: {name: "<var>My dashboard</var>"}) {
            results {
              entities {
                ... on DashboardEntityOutline {
                  guid
                  name
                  accountId
                }
              }
            }
          }
        }
      }
    ```
  </Collapser>

  <Collapser
    id="list-dashboards-by-email"
    title="List all dashboards by creator’s email"
  >
    ```
      {
        actor {
          entitySearch(queryBuilder: {type: DASHBOARD, tags: {key: "<var>createdBy</var>", value: "<var>email@domain.com</var>"}}) {
            results {
              entities {
                ... on DashboardEntityOutline {
                  guid
                  name
                  accountId
                }
              }
            }
          }
        }
      }
    ```
  </Collapser>

  <Collapser
    id="list-dashboards-by-user-id"
    title="List all dashboards by creator’s user id"
  >
    ```
      {
        actor {
          entitySearch(query: "type ='<var>DASHBOARD</var>' and ownerId = '<var>2357322</var>'") {
            results {
              entities {
                ... on DashboardEntityOutline {
                  guid
                  name
                  accountId
                }
              }
            }
          }
        }
      }
    ```
  </Collapser>
</CollapserGroup>

### Show (GET) -> entity query [#entityquery]

In order to get information on a dashboard, all you need is to provide its unique entity identifier or entity guid. Then you can access all the dashboard properties that you are interested in by adding them in the GraphQL query.

Try it out using the [NerdGraph GraphiQL explorer](/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph#explorer).

<CollapserGroup>
  <Collapser
    id="get-dashboard"
    title="Get dashboard info given its entity guid"
  >
    ```
      {
        actor {
          entity(guid: "<var>MY_DASHBOARD_GUID</var>") {
            ... on DashboardEntity {
              guid
              accountId
              name
              createdAt
              updatedAt
              permissions
              description
              owner { email userId }
              pages {
                guid
                name
                createdAt
                updatedAt
                description
                owner { email userId }
                widgets {
                  id
                  visualization { id }
                  title
                  layout { row column height width }
                  rawConfiguration
                  linkedEntities { guid }
                }
              }
            }
          }
        }
      }
    ```
  </Collapser>
</CollapserGroup>

### Create (POST) -> dashboardCreate mutation [#dashboard-create]

Operations that mutate the state of the system are mutations in GraphQL APIs. You can create a dashboard by providing the required input for the `dashboardCreate` mutation. Although GraphQL APIs aim to be self-explanatory, Nerdgraph docs can help you with some information about the fields, like the doc about [how to build dashboard widgets](/docs/apis/nerdgraph/examples/create-widgets-dashboards-api).

Try it out using the [NerdGraph GraphiQL explorer](/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph#explorer).

<CollapserGroup>
  <Collapser
    id="create-dashboard"
    title="Create dashboard with two pages and two widgets per page"
  >
    ```
      mutation {
        dashboardCreate(accountId: <var>1</var>, dashboard: {
          name: "My awesome dashboard",
          permissions: PUBLIC_READ_WRITE,
          pages: [{
            name: "My first page",
            widgets: [{
              visualization: { id: "viz.markdown" },
              title: "My markdown widget",
              layout: {
                row: 1,
                column: 1,
                width: 4,
                height: 3
              },
              rawConfiguration: {
                text: "#My markdown"
              }
            }, {
              visualization: { id: "viz.line" },
              title: "My line widget",
              layout: {
                row: 1,
                column: 5,
                width: 4,
                height: 3
              },
              rawConfiguration: {
                nrqlQueries: [{
                  accountId: 1,
                  query: "SELECT count(*) FROM Transaction FACET appName TIMESERIES"
                }]
              }
            }]
          }, {
            name: "My second page",
            widgets: [{
              visualization: { id: "viz.billboard" },
              title: "My billboard widget with thresholds",
              layout: {
                row: 1,
                column: 1,
                width: 4,
                height: 3
              },
              rawConfiguration: {
                nrqlQueries: [{
                  accountId: 1,
                  query: "SELECT count(*) FROM Transaction"
                }],
                thresholds: [{
                  alertSeverity: WARNING,
                  value: 650
                }, {
                  alertSeverity: CRITICAL,
                  value: 1500
                }]
              }
            }, {
              visualization: { id: "viz.table" },
              title: "My table widget",
              layout: {
                row: 1,
                column: 5,
                width: 4,
                height: 3
              },
              rawConfiguration: {
                nrqlQueries: [{
                  query: "SELECT * FROM Transaction",
                  accountId: 1
                }]
              }
            }]
          }]
        }) {
          errors {
            description
            type
          }
          entityResult {
            guid
            accountId
            name
            createdAt
            updatedAt
            permissions
            description
            owner { email userId }
            pages {
              guid
              name
              createdAt
              updatedAt
              description
              owner { email userId }
              widgets {
                id
                visualization { id }
                title
                layout { row column height width }
                rawConfiguration
                linkedEntities { guid }
              }
            }
          }
        }
      }
    ```
  </Collapser>
</CollapserGroup>

### Update (PUT) -> dashboardUpdate mutation [#dashboard-update]

The `dashboardUpdate` mutation allows you to update an existing dashboard by providing the existing dashboard guid and the new configuration. Similarly to creating a dashboard, the mutation tries to be self-explanatory, but you can look up the doc about [how to build dashboard widgets](/docs/apis/nerdgraph/examples/create-widgets-dashboards-api).

Try it out using the [NerdGraph GraphiQL explorer](/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph#explorer).

<CollapserGroup>
  <Collapser
    id="update-dashboard"
    title="Update previously created dashboard to 1 page and 1 widget per page"
  >
    ```
      mutation {
        dashboardUpdate(guid: "<var>MY_DASHBOARD_GUID</var>" dashboard: {
          name: "My awesome dashboard",
          permissions: PUBLIC_READ_WRITE,
          pages: [{
            name: "My first page",
            widgets: [{
              visualization: { id: "viz.line" },
              title: "My line widget",
              layout: {
                row: 1,
                column: 1,
                width: 4,
                height: 3
              },
              rawConfiguration: {
                nrqlQueries: [{
                  accountId: 1,
                  query: "SELECT count(*) FROM Transaction FACET appName TIMESERIES"
                }]
              }
            }]
          }, {
            name: "My second page",
            widgets: [{
              visualization: { id: "viz.table" },
              title: "My table widget",
              layout: {
                row: 1,
                column: 1,
                width: 4,
                height: 3
              },
              rawConfiguration: {
                nrqlQueries: [{
                  query: "SELECT * FROM Transaction",
                  accountId: 1
                }]
              }
            }]
          }]
        }) {
          errors {
            description
            type
          }
          entityResult {
            guid
            accountId
            name
            createdAt
            updatedAt
            permissions
            description
            owner { email userId }
            pages {
              guid
              name
              createdAt
              updatedAt
              description
              owner { email userId }
              widgets {
                id
                visualization { id }
                title
                layout { row column height width }
                rawConfiguration
                linkedEntities { guid }
              }
            }
          }
        }
      }
    ```
  </Collapser>
</CollapserGroup>

### Delete (DELETE) -> dashboardDelete mutation [#dashboard-delete]

The `dashboardDelete` mutation allows you to delete an existing dashboard by providing its entity guid.

Try it out using the [NerdGraph GraphiQL explorer](/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph#explorer).

<CollapserGroup>
  <Collapser
    id="delete-dashboard"
    title="Delete previously created dashboard"
  >
    ```
      mutation {
        dashboardDelete(guid:"<var>MY_DASHBOARD_GUID</var>") {
          status
          errors {
            type
            description
          }
        }
      }
    ```
  </Collapser>
</CollapserGroup>

### Errors as first class citizens [#errors-first-class]

As you might have noticed, all dashboard mutations offer you a way to ask for errors when being executed. This means that you can perform your dashboard mutations and check the response in order to detect potential issues. Every error has a type and a description to help you identify what’s the source of the problem.

<CollapserGroup>
  <Collapser
    id="errors-first-class"
    title="Errors as part of every mutation response"
  >
    ```
      mutation {
        dashboardMutation(guid: "<var>MY_EXISTING_DASHBOARD_GUID</var>") {
          mutationResult {
            result
          }
          errors {
            description
            type
          }
        }
      }
    ```
  </Collapser>
</CollapserGroup>
