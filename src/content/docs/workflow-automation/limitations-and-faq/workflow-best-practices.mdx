---
title: Best practices
tags:
  - Workflow Automation
  - workflow
  - best practices
  - workflow automation best practices
metaDescription: "Learn best practices for building workflows using New Relic Workflow Automation."
freshnessValidatedDate: never
---

This document outlines best practices for designing and implementing workflows to ensure efficiency, reliability, and maintainability.

## Use a Service User

To simplify management and security, use a dedicated service user to start or schedule all workflows. A service user provides a single, controlled identity for all workflow runs. This approach makes it easier to rotate or invalidate the associated API key when needed.

## Design Workflows Efficiently

Avoid creating overly granular workflows. Starting a workflow instance is a relatively expensive operation. A single workflow can be long-lived and should be designed to handle multiple activities within a given context.

**Example**: For a task involving multiple item types associated with a single account, create a single workflow for that account. This workflow can contain distinct activities to handle each item type, potentially executing them in parallel. This is more efficient than creating a separate workflow for each `account|itemType` combination.

## Develop Activities

Develop activities with these key considerations in mind.

### Programming Languages

We prioritize developing activities in Java, as it is the primary language used at New Relic. However, you can implement activities in other languages, such as Golang or Python, if there are compelling reasons, such as the availability of an SDK only in that language.

### Ensure Idempotency
All activities must be idempotent to ensure data consistency and prevent duplicate operations during retries. When performing a mutation, validate a unique identifier before writing to the system.

  - **Database writes**: Before writing to a database, check for the existence of the record using the unique identifier. Use a conditional statement like `IF NOT EXISTS(...) INSERT ELSE UPDATE....`

  - **File system operations**: For systems like S3 or a file system, you can validate existence and timestamp to prevent duplicate writes.

### Optimize for Temporal Resilience

  - **Keep activities small**: To take full advantage of Temporal's automatic retry mechanism for failed activities, keep individual activities small and focused.

  - **Maintain a heartbeat**: For activities that run for an extended period, it is essential to maintain a regular heartbeat with the Temporal cluster. If the heartbeat fails, Temporal may assume the activity has failed, terminate it, and initiate a new instance.

## What's next?

You know the best practices for building workflows. Now understand the technical limits to design within constraints.

**Next in your journey**: [Workflow limits](/docs/workflow-automation/limitations-and-faq/workflow-limits) - Learn about workflow constraints and boundaries.

**Go further**:
- [Workflow Automation APIs](/docs/workflow-automation/workflow-automation-apis/using-workflow-automation-api) - Manage workflows programmatically
- [Actions catalog](/docs/workflow-automation/setup-and-configuration/actions-catalog) - Complete action reference
