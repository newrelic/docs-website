---
title: Start a Workflow Automation on-demand
tags:
  - workflow automation
  - workflow
  - start a workflow automation
  - start workflow automation on-demand
metaDescription: "Start a workflow automation on-demand"
freshnessValidatedDate: never
---

<Callout title="preview">
  We're still working on this feature, but we'd love for you to try it out!

  This feature is currently provided as part of a preview program pursuant to our [pre-release policies](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy).
</Callout>

## Start a workflow automation on-demand

Workflow automation can be triggered on-demand or scheduled via the publicly exposed [`/graphql`](/docs/apis/nerdgraph/get-started/nerdgraph-explorer) API.

To initiate a workflow automation on-demand, you need:

  - A reference to the workflow automation definition (name).
  - *Optionally*, a specific version or use the latest.
  - The inputs required by the workflow automation definition.

The start operations can be triggered through the [StartWorkflowRun](/docs/workflow-automation/workflow-automation-apis/start-workflow-run) API.

### Example

```graphql
  name: lambda1

  workflowInputs:
    username:
      type: String
      defaultValue: "User"
    key:
      type: String
      defaultValue: "${{ :secrets:12345678:USERNAME_AWS_ACCESS_KEY_ID }}"
    access:
      type: String
      defaultValue: "${{ :secrets:12345678:USERNAME_AWS_SECRET_ACCESS_KEY }}"
    token:
      type: String
      defaultValue: "${{ :secrets:12345678:USERNAME_AWS_SESSION_TOKEN }}"
    region:
      type: String
      defaultValue: us-east-1

  steps:
    - name: invoke1
      type: action
      action: aws.lambda.invoke
      version: 1
      inputs:
        awsAccessKeyId: ${{ .workflowInputs.key }}
        awsSecretAccessKey: ${{ .workflowInputs.access }}
        awsSessionToken: ${{ .workflowInputs.token }}
        region: ${{ .workflowInputs.region }}
        functionName: hello-you
        payload:
          user: ${{ .workflowInputs.username }}

    - name: logOutput
      type: action
      action: newrelic.ingest.sendLogs
      version: 1
      inputs:
        logs:
          - message: 'The lambda function message output is:${{ .steps.invoke1.outputs.payload.body }}'
```

This workflow can be started with the following NerdGraph mutation, assuming the AWS temporary secrets have been previously stored with the secretsManagementCreateSecretNerdGraph mutations.

```graphql
    mutation {
        workflowAutomationStartWorkflowRun(
          scope: { type: ACCOUNT id: "12345678" }
          definition: { name: "lambda1" }
          workflowInputs: [
            {key: "key" value: "${{ :secrets:testUser123_AWS_ACCESS_KEY_ID }}"}
            {key: "access" value: "${{ :secrets:testUser123_AWS_SECRET_ACCESS_KEY }}"}
            {key: "token" value: "${{ :secrets:testUser123_AWS_SESSION_TOKEN }}"}
            {key: "region" value:"us-east-2"}
            {key: "username" value: "Julien"}
          ]
        )
        { runId }
    }
```
Executing the mutation returns a `runId`, such as `7bd25287-2af8-42e1-b783-80f4e760a40b`. This `runId` can be used to query the logs and view the following output:

    <img
      title="How to add a destination"
      alt="Image of the Workflow Automation destination page."
      src="/images/autoflow-all-logs-2.webp"
    />

## Schedule a workflow automation

A workflow can be scheduled to run at a specific frequency using the [CreateSchedule](/docs/workflow-automation/workflow-automation-apis) API.


## What's next?

Your workflows are running! Now learn how to optimize them for production use.

**Next in your journey**: [Best practices](/docs/workflow-automation/limitations-and-faq/workflow-best-practices) - Learn how to build efficient, reliable, and maintainable workflows.

**Explore advanced topics**:
- [Workflow limits](/docs/workflow-automation/limitations-and-faq/workflow-limits) - Understand technical constraints
- [Workflow Automation APIs](/docs/workflow-automation/workflow-automation-apis/using-workflow-automation-api) - Manage workflows programmatically
- [Actions catalog](/docs/workflow-automation/setup-and-configuration/actions-catalog) - Reference all available actions
