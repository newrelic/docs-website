---
title: Start a workflow automation on-demand
tags:
  - workflow automation
  - workflow
  - start a workflow automation
  - start workflow automation on-demand
metaDescription: "Start a workflow automation on-demand"
freshnessValidatedDate: never
---

<Callout title="preview">
  We're still working on this feature, but we'd love for you to try it out!

  This feature is currently provided as part of a preview program pursuant to our [pre-release policies](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy).
</Callout>

## Start a workflow automation on-demand

Workflow automation can be triggered on-demand, or scheduled, through the publicly exposed [`/graphql`](/docs/apis/nerdgraph/get-started/nerdgraph-explorer) API.

To start a workflow automation on-demand:

    * A reference to the workflow automation definition (name).
    * *Optional*, a specific version or use the latest.
    * The inputs required by the workflow automation definition.

The start operations can be triggered through the [StartWorkflowRun](/docs/workflow-automation/workflow-automation-apis/start-workflow-run) API.

### Example

Here is a short example

```json
  name: lambda1

  workflowInputs:
    username:
      type: String
      defaultValue: "User"
    key:
      type: String
      defaultValue: "${{ :secrets:11933347:USERNAME_AWS_ACCESS_KEY_ID }}"
    access:
      type: String
      defaultValue: "${{ :secrets:11933347:USERNAME_AWS_SECRET_ACCESS_KEY }}"
    token:
      type: String
      defaultValue: "${{ :secrets:11933347:USERNAME_AWS_SESSION_TOKEN }}"
    region:
      type: String
      defaultValue: us-east-2

  steps:
    - name: invoke1
      type: action
      action: aws.lambda.invoke
      version: 1
      inputs:
        awsAccessKeyId: ${{ .workflowInputs.key }}
        awsSecretAccessKey: ${{ .workflowInputs.access }}
        awsSessionToken: ${{ .workflowInputs.token }}
        region: ${{ .workflowInputs.region }}
        functionName: hello-you
        payload:
          user: ${{ .workflowInputs.username }}

    - name: logOutput
      type: action
      action: newrelic.instrumentation.log
      version: 1
      inputs:
        message: 'The lambda function message output is:${{ .steps.invoke1.outputs.payload.body }}'
        licenseKey: '${{ :secrets:STAGING_NEW_RELIC_LICENSE_KEY }}'
```

This workflow can be started with the following NerdGraph mutation, assuming the AWS temporary secrets have been previously stored with the secretsManagementCreateSecretNerdGraph mutations.

```graphql
    mutation { 
        autoflowsStartWorkflowRun(accountId: 11933347,
        definition: {
            name: "lambda1",
        }, workflowInputs: [
            {key: "key" value: "${{ :secrets:testUser123_AWS_ACCESS_KEY_ID }}"}
            {key: "access" value: "${{ :secrets:testUser123_AWS_SECRET_ACCESS_KEY }}"}
            {key: "token" value: "${{ :secrets:testUser123_AWS_SESSION_TOKEN }}"}
            {key: "region" value:"us-east-2"}
            {key: "username" value: "Julien"}
        ]) 
        { runId }
    } 
```
Executing the mutation above returns a runId, for example, `7bd25287-2af8-42e1-b783-80f4e760a40b`. This runId can then be used to query the logs and see the following output:

    <img
      title="How to add a destination"
      alt="Image of the Workflow Automation destination page."
      src="/images/autoflow-all-logs-2.webp"
    />

## Schedule a workflow automation

A workflow can be scheduled to run at a specific frequency using the [CreateSchedule](/docs/workflow-automation/autoflow-api-documentation) API.