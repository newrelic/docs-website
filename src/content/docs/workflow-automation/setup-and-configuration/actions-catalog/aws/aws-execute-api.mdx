---
title: "AWS Execute API"
tags:
  - workflow automation
  - workflow
  - workflow automation actions
  - AWS actions
  - AWS Execute API
metaDescription: "A list of available aws execute api in the actions catalog for workflow definitions"
freshnessValidatedDate: never
---

<Callout title="preview">
  We're still working on this feature, but we'd love for you to try it out!

  This feature is currently provided as part of a preview program pursuant to our [pre-release policies](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy).
</Callout>

This page provides a comprehensive reference for aws execute api available in the workflow automation actions catalog. These actions enable you to execute any aws api operation.

## Prerequisites

Before using AWS actions in workflow automation, ensure you have:

  * An AWS account with appropriate permissions.
  * AWS credentials configured (IAM user credentials, IAM role ARN, or session credentials).
  * The necessary IAM permissions for the specific AWS services you plan to use.

See [Set up AWS credentials](/docs/workflow-automation/setup-and-configuration/set-up-aws-credentials/) for information on how to create IAM users and IAM roles, and set up static and session AWS credentials for integration with workflow automation AWS actions.

## Security and IAM configuration

  To use this action, you must configure AWS credentials. See [Set up AWS credentials](/docs/workflow-automation/setup-and-configuration/set-up-aws-credentials/) for detailed instructions on creating an IAM role or IAM user.

  <Callout variant="important">
    **Security best practice:** When defining IAM policies for this action, always use least-privilege access. Grant only the specific AWS API actions your workflow requires, and restrict permissions to specific resources rather than using wildcards.
  </Callout>

## Required IAM permissions

  The permissions you need depend on which AWS services and APIs your workflow calls. Use the examples below as templates for creating least-privilege policies.

  **Example 1: Send messages to a specific SQS queue**

  ```json
    {
      "Version": "2012-10-17",
      "Statement": [
        {
          "Effect": "Allow",
          "Action": "sqs:SendMessage",
          "Resource": "arn:aws:sqs:us-west-2:<your-aws-account-id>:<your-queue-name>"
        }
      ]
    }
  ```

  **Examples 2: Query a specific DynamoDB table**

  ```json
    {
      "Version": "2012-10-17",
      "Statement": [
        {
          "Effect": "Allow",
          "Action": "dynamodb:Query",
          "Resource": "arn:aws:dynamodb:us-west-2:<your-aws-account-id>:table/<your-table-name>"
        }
      ]
    }
  ```

  **Example 3: Multiple services with specific permissions**

  ```json
    {
      "Version": "2012-10-17",
      "Statement": [
        {
          "Effect": "Allow",
          "Action": "sqs:SendMessage",
          "Resource": "arn:aws:sqs:us-west-2:<your-aws-account-id>:<your-queue-name>"
        },
        {
          "Effect": "Allow",
          "Action": "dynamodb:Query",
          "Resource": "arn:aws:dynamodb:us-west-2:<your-aws-account-id>:table/<your-table-name>"
        }
      ]
    }
  ```

  <Callout variant="important">
    - Replace `<your-aws-account-id>`, `<your-queue-name>`, and `<your-table-name>` with your actual values
    - Find available AWS service APIs in the [Boto3 documentation](https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/index.html)
    - For more complex IAM policy patterns, see the [AWS IAM documentation](https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html)
  </Callout>

  For more information on how this action works, see the [AWS Systems Manager executeAwsApi documentation](https://docs.aws.amazon.com/systems-manager/latest/userguide/automation-action-executeAwsApi.html).

## Call an AWS API [#aws-execute-api]

  Execute any AWS API operation for a specified service. It supports providing AWS credentials, region, service name, API name, and optional parameters. The action can return outputs such as success status, response data, and error messages, making it versatile for interacting with AWS services programmatically.

    <Tabs>
      <TabsBar>
        <TabsBarItem id="awsexecuteinputs">
          Inputs
        </TabsBarItem>

        <TabsBarItem id="awsexecuteoutputs">
          Outputs
        </TabsBarItem>

        <TabsBarItem id="awsexecuteexamples">
          Example
        </TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="awsexecuteinputs">
        <table>
            <thead>
                <tr>
                  <th>Input Field</th>
                  <th>Optionality</th>
                  <th>Type</th>
                  <th>Example</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>**awsRoleArn**</td>
                    <td>Optional</td>
                    <td>String</td>
                    <td>`arn:aws:iam::123456789012:role/my-workflow-role`</td>
                </tr>
                <tr>
                    <td>**awsAccessKeyId**</td>
                    <td>Optional</td>
                    <td>String</td>
                    <td>`${{ :secrets:<awsAccessKeyId> }}`</td>
                </tr>
                <tr>
                    <td>**awsSecretAccessKey**</td>
                    <td>Optional</td>
                    <td>String</td>
                    <td>`${{ :secrets:<awsSecretAccessKey> }}`</td>
                </tr>
                <tr>
                    <td>**awsSessionToken**</td>
                    <td>Optional</td>
                    <td>String</td>
                    <td>`${{ :secrets:<awsSessionToken> }}`</td>
                </tr>
                <tr>
                    <td>**region**</td>
                    <td>Required</td>
                    <td>String</td>
                    <td>`region: "us-east-2"`</td>
                </tr>
                <tr>
                    <td>**service**</td>
                    <td>Required</td>
                    <td>String</td>
                    <td>`service: "sqs"`.[AWS available services](https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/index.html)</td>
                </tr>
                <tr>
                    <td>**api**</td>
                    <td>Required</td>
                    <td>String</td>
                    <td>`api: "create_queue"`</td>
                </tr>
                <tr>
                    <td>**parameters**</td>
                    <td>Required</td>
                    <td>Map</td>
                    <td>
                      <p>
  ```yaml
    parameters: {
      "QueueName": "dks-testing-queue",
      "Attributes": {
          "DelaySeconds": "0",
          "MessageRetentionPeriod": "86400"
      }
    }
  ```
                      </p>
                    </td>
                </tr>
                <tr>
                    <td>**selectors**</td>
                    <td>Optional</td>
                    <td>List</td>
                    <td>`[{\"name\": \"response\", \"expression\": \".response\"}, {\"name\": \"success\", \"expression\": \".success\"}, {\"name\": \"errorMessage\", \"expression\": \".errorMessage\"}]`</td>
                </tr>
            </tbody>
        </table>
      </TabsPageItem>

      <TabsPageItem id="awsexecuteoutputs">
      <table>
        <thead>
            <tr>
                <th>Output Field</th>
                <th>Type</th>
                <th>Example</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**response**</td>
                <td>Object</td>
                <td>`{"response":<aws api reponse>}` - each service and api have different response, for example see the [DynamoDB Query response](https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/dynamodb/client/query.html).</td>
            </tr>
            <tr>
                <td>**success**</td>
                <td>Boolean</td>
                <td>`success: true | false`</td>
            </tr>
            <tr>
                <td>**errorMessage**</td>
                <td>String</td>
                <td>`errorMessage: "User does not have permission to query DynamoDB"`</td>
            </tr>
        </tbody>
      </table>

          <Callout variant="important">
            - Input at least one of the AWS credentials (short, long, role) should be provided, where the role takes precedence over the others.
            - In the action input, if `awsAccessKeyId` and `awsSecretAccessKey` are to be provided, make sure they are static credentials of an IAM user.
            - If session credentials are to be used, `awsAccessKeyId`, `awsSecretAccessKey` and `awsSessionToken` must be passed to the action input.
            - Refer to [AWS credentials](/docs/workflow-automation/setup-and-configuration/set-up-aws-credentials/) for instructions.
            - Use selectors to get only the specified parameters as output.
          </Callout>
      </TabsPageItem>

      <TabsPageItem id="awsexecuteexamples">

        ### Example: Query a DynamoDB table

        This example demonstrates how to query a DynamoDB table using the `aws.execute.api` action with session credentials.

        ```yaml
          name: aws_execute_api_dynamoDB_dks

          workflowInputs:
            key:
              type: String
              defaultValue: "${{ :secrets:<aws_access_key_id> }}"
            access:
              type: String
              defaultValue: "${{ :secrets:<aws_secret_access_key? }}"
            token:
              type: String
              defaultValue: "${{ :secrets:<aws_session_token> }}"
            region:
              type: String
              defaultValue: us-east-2
            tableName:
              type: String
              defaultValue: workflow-definitions-dev
            scopedName:
              type: String
            version:
              type: String
              defaultValue: "1"

          steps:
            - name: executeApi
              type: action
              action: aws.execute.api
              version: 1
              inputs:
                awsAccessKeyId: ${{ .workflowInputs.key }}
                awsSecretAccessKey: ${{ .workflowInputs.access }}
                awsSessionToken: ${{ .workflowInputs.token }}
                region: ${{ .workflowInputs.region }}
                service: dynamodb
                api: query
                parameters:
                  TableName: ${{ .workflowInputs.tableName }}
                  KeyConditionExpression: "ScopedName = :scopedNameValue AND Version = :VersionValue"
                  ExpressionAttributeValues:
                    ":scopedNameValue":
                      S: ${{ .workflowInputs.scopedName }}
                    ":VersionValue":
                      N: ${{ .workflowInputs.version }}
                selectors:
                  - name: response
                    expression: '.response'
                  - name: errorMessage
                    expression: '.errorMessage'
                  - name: success
                    expression: '.success'
                  
                
            - name: wait
              type: wait
              seconds: 2
              
            - name: logOutput
              type: action
              action: newrelic.instrumentation.log
              version: 1
              inputs:
                message: 'The execute API message output is:${{ .steps.executeApi.outputs.response.Item }}'
                licenseKey: '${{ :secrets:STAGING_NEW_RELIC_LICENSE_KEY }}'
            - name: logOutput1
              type: action
              action: newrelic.instrumentation.log
              version: 1
              inputs:
                message: 'does execute API have any error :${{ .steps.executeApi.outputs.errorMessage }}'
                licenseKey: '${{ :secrets:STAGING_NEW_RELIC_LICENSE_KEY }}'
            - name: logOutput2
              type: action
              action: newrelic.instrumentation.log
              version: 1
              inputs:
                message: 'is execute successful :${{ .steps.executeApi.outputs.success }}'
                licenseKey: '${{ :secrets:STAGING_NEW_RELIC_LICENSE_KEY }}'
        ```
      </TabsPageItem>
      </TabsPages>
    </Tabs>

For more workflow examples using AWS Execute API, see the [Workflow examples](/docs/workflow-automation/workflow-examples/workflow-examples) page.