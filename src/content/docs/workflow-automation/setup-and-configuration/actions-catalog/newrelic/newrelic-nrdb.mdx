---
title: "New Relic NRDB actions"
tags:
  - workflow automation
  - workflow
  - workflow automation actions
  - New Relic actions
  - New Relic NRDB actions
metaDescription: "A list of available new relic nrdb actions in the actions catalog for workflow definitions"
freshnessValidatedDate: never
---

<Callout title="preview">
  We're still working on this feature, but we'd love for you to try it out!

  This feature is currently provided as part of a preview program pursuant to our [pre-release policies](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy).
</Callout>

This page provides a comprehensive reference for new relic nrdb actions available in the workflow automation actions catalog. These actions enable you to query new relic database.

## Prerequisites

Before using New Relic actions in workflow automation, ensure you have:

  * A New Relic account with appropriate permissions.
  * A New Relic license key (if sending data to a different account).
  * The necessary permissions for the specific New Relic services you plan to use.

See [License Key](/docs/apis/intro-apis/new-relic-api-keys/#license-key) for information on how to create and manage your New Relic Account License Key.

<CollapserGroup>
    <Collapser
        id="newrelic.nrdb.query"
        title="Query NRQL cross accounts"
    >
  Executes a cross-accounts NRQL query through the NerdGraph API.

<Tabs>
  <TabsBar>
    <TabsBarItem id="nrdbqueryinputs">
      Inputs
    </TabsBarItem>

    <TabsBarItem id="nrdbqueryoutputs">
      Outputs
    </TabsBarItem>
  </TabsBar>

  <TabsPages>
    <TabsPageItem id="nrdbqueryinputs">
  <table>
      <thead>
          <tr>
              <th>Input</th>
              <th>Optionality</th>
              <th>Type</th>
              <th>Description</th>
              <th>Example</th>
          </tr>
      </thead>
      <tbody>
          <tr>
              <td>**query**</td>
              <td>Required</td>
              <td>String</td>
              <td>The NRQL query statement.</td>
              <td></td>
          </tr>
          <tr>
              <td>**accountIds**</td>
              <td>Optional</td>
              <td>List of int</td>
              <td>**New Relic Account IDs** specifies the target accounts for query execution. If not provided, the query runs against the workflow's execution account.</td>
              <td></td>
          </tr>
          <tr>
              <td>**selectors**</td>
              <td>Optional</td>
              <td>List</td>
              <td>The selectors to get the only specified parameters as output.</td>
              <td>
  ```yaml
      steps:
    - name: queryForLog
      type: action
      action: newrelic.nrdb.query
      version: 1
      inputs:
        accountIds: [12345]
        query: FROM Log SELECT * WHERE message LIKE 'DEMO%'
        selectors:
          - name: resultsAsString
            expression: '.results | tostring'
  ```
            </td>
          </tr>
      </tbody>
  </table>
  </TabsPageItem>

  <TabsPageItem id="nrdbqueryoutputs">
  <table>
    <thead>
        <tr>
            <th>Output</th>
            <th>Type</th>
            <th>Description</th>
            <th>Example</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>**results**</td>
            <td></td>
            <td>An array of objects containing the results of the query. See [Expressions property](/docs/workflow-automation/workflow-automation-apis/definition-schema/#expression-properties) for more information.</td>
            <td></td>
        </tr>
        <tr>
            <td>**success**</td>
            <td>Boolean</td>
            <td>Status of the request.</td>
            <td></td>
        </tr>
        <tr>
            <td>**errorMessage**</td>
            <td>String</td>
            <td>Failure reason as message.</td>
            <td>
  ```yaml
        {
      "success": true
      results=[
        { message=[INFO] - Workflow: test has ended, messageId=39af98 }, 
        { message=[INFO] - Workflow: test - Step query has started, messageId=649c612 },
        ...
      ]
    }
  ```
            </td>
        </tr>
    </tbody>
  </table>
  </TabsPageItem>
  </TabsPages>
</Tabs>
    </Collapser>
</CollapserGroup>

<CollapserGroup>
    <Collapser
        id="newrelic.nrdb.query"
        title="Query NRDB"
    >
  Runs a cross-accounts NRQL query through the NerdGraph API.

<Tabs>
  <TabsBar>
    <TabsBarItem id="newrelic-nrdb-queryinputs">
      Inputs
    </TabsBarItem>

    <TabsBarItem id="newrelic-nrdb-queryoutputs">
      Outputs
    </TabsBarItem>

    <TabsBarItem id="newrelic-nrdb-queryexample">
      Example
    </TabsBarItem>
  </TabsBar>

  <TabsPages>
    <TabsPageItem id="newrelic-nrdb-queryinputs">
      <table>
          <thead>
              <tr>
                  <th>Input Field</th>
                  <th>Optionality</th>
                  <th>Type</th>
                  <th>Description</th>
              </tr>
          </thead>
          <tbody>
              <tr>
                  <td>**query**</td>
                  <td>Required</td>
                  <td>String</td>
                  <td>The NRQL query statement.</td>
              </tr>
              <tr>
                  <td>**accountIds**</td>
                  <td>Optional</td>
                  <td>List of int</td>
                  <td>The **New Relic Account IDs** input accepts a list of account IDs that specify which accounts the query will execute against. If this input is not provided, the query defaults to the workflow's execution account.</td>
              </tr>
              <tr>
                  <td>**format**</td>
                  <td>Optional</td>
                  <td>Enum</td>
                  <td>To specify the type for the results, Accepts only `JSON` or `CSV`. Defaults to `JSON` .</td>
              </tr>
              <tr>
                  <td>**selectors**</td>
                  <td>Optional</td>
                  <td>List</td>
                  <td>The selectors to get the only specified parameters as output.</td>
              </tr>
          </tbody>
      </table>

### Example

```yaml
steps:
  - name: queryForLog
    type: action
    action: newrelic.nrdb.query
    version: 1
    inputs:
      accountIds: [12345]
      query: FROM Log SELECT * WHERE message LIKE 'DEMO%'
      selectors:
        - name: resultsAsString
          expression: '.results | tostring'
```
  </TabsPageItem>

  <TabsPageItem id="newrelic-nrdb-queryoutputs">
  <table>
    <thead>
        <tr>
            <th>Output Field</th>
            <th>Type</th>
            <th>Description</th>
            <th>Example</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>**results**</td>
            <td></td>
            <td>An array of objects containing the results of the query. See [Expressions property](/docs/workflow-automation/workflow-automation-apis/definition-schema/#expression-properties) for more information.</td>
            <td></td>
        </tr>
        <tr>
            <td>**success**</td>
            <td>Boolean</td>
            <td>Status of the request.</td>
            <td></td>
        </tr>
        <tr>
            <td>**errorMessage**</td>
            <td>String</td>
            <td>Failure reason as message.</td>
            <td>
```yaml
{
  "success": true
  results=[
    { message=[INFO] - Workflow: test has ended, messageId=39af98 }, 
    { message=[INFO] - Workflow: test - Step query has started, messageId=649c612 },
    ...
  ]
}
```
            </td>
        </tr>
    </tbody>
  </table>
  </TabsPageItem>

  <TabsPageItem id="newrelic-nrdb-queryexample">
  <table>
    <thead>
        <tr>
            <th>Workflow example</th>
        </tr>
    </thead>
    <tbody>
        <tr>
          <td>
```yaml
  - name: sendMetrics
    type: action
    action: newrelic.ingest.sendMetrics
    version: 1
    inputs:
      metrics:
        - name: service.errors.all
          type: count
          value: 9
          timestamp: 1531414060739
          attributes:
            service.response.statuscode: 400
        - name: service.response.duration
          type: guage
          value: 4
          timestamp: 1531414060733
          attributes:
            service.response.statuscode: 500
```
          </td>
        </tr>
    </tbody>
  </table>
  </TabsPageItem>
  </TabsPages>
</Tabs>
    </Collapser>
</CollapserGroup>