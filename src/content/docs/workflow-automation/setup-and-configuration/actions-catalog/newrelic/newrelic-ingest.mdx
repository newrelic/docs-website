---
title: "New Relic Ingest actions"
tags:
  - workflow automation
  - workflow
  - workflow automation actions
  - New Relic actions
  - New Relic Ingest actions
metaDescription: "A list of available new relic ingest actions in the actions catalog for workflow definitions"
freshnessValidatedDate: never
---

<Callout title="preview">
  We're still working on this feature, but we'd love for you to try it out!

  This feature is currently provided as part of a preview program pursuant to our [pre-release policies](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy).
</Callout>

This page provides a comprehensive reference for new relic ingest actions available in the workflow automation actions catalog. These actions enable you to send events and logs to new relic.

## Prerequisites

Before using New Relic actions in workflow automation, ensure you have:

  * A New Relic account with appropriate permissions.
  * A New Relic license key (if sending data to a different account).
  * The necessary permissions for the specific New Relic services you plan to use.

See [License Key](/docs/apis/intro-apis/new-relic-api-keys/#license-key) for information on how to create and manage your New Relic Account License Key.

## Data ingest actions

<CollapserGroup>
    <Collapser
        id="newrelic-ingest-sendevents"
        title="Send custom events to New Relic"
    >
  Reports a custom event to New Relic.

<Tabs>
  <TabsBar>
    <TabsBarItem id="createventinputs">
      Inputs
    </TabsBarItem>

    <TabsBarItem id="createventoutputs">
      Outputs
    </TabsBarItem>

    <TabsBarItem id="createventexample">
      Example
    </TabsBarItem>
  </TabsBar>

  <TabsPages>
    <TabsPageItem id="createventinputs">
      <table>
          <thead>
              <tr>
                  <th>Input Field</th>
                  <th>Optionality</th>
                  <th>Type</th>
                  <th>Description</th>
                  <th>Example</th>
              </tr>
          </thead>
          <tbody>
              <tr>
                  <td>**attributes**</td>
                  <td>Optional</td>
                  <td>Map</td>
                  <td>
                  <p>
                    Common attributes which is part of all the events when provided.
                  </p>

                  <p>
                    Merging for each event item when needed event item overrides common definition.
                  </p>
                  </td>
                  <td>`"{\"page\": \"1\", \"limit\": \"10\"}"`</td>
              </tr>
              <tr>
                  <td>**events**</td>
                  <td>Required</td>
                  <td>List</td>
                  <td>
                    <p>
                      The list of event data.
                      <Callout variant="important">
                        Events requires the use of an `eventType` field that represents the custom event type. The maximum events allowed per request is **100**.
                      </Callout>
                    </p>
                  </td>
                  <td>`"[{\"eventType\":\"XYZ\",\"attributes\":{\"foo\":\"bar\"}}, {\"eventType\":\"ABC\",\"value\":\"1234\",\"attributes\":{\"color\":\"red\"}}]"`</td>
              </tr>
              <tr>
                  <td>**licenseKey**</td>
                  <td>Optional</td>
                  <td>String</td>
                  <td>
                  The **New Relic Account License Key** (required) specifies the
                  target account for your events. If not provided, the system uses the default license key from the account executing the workflow.

                  [Read more about our API keys](/docs/apis/intro-apis/new-relic-api-keys/#license-key) to create and manage your **New Relic Account License Key**.
                  </td>
                  <td>`"{{ .secrets.secretName }}"`, where `secretName` is the key under which the license key is stored.</td>
              </tr>
              <tr>
                  <td>**selectors**</td>
                  <td>Optional</td>
                  <td>List</td>
                  <td>The selectors to get only the specified parameters as output.</td>
                  <td>`[{\"name\": \"success\", \"expression\": \".success\"}]`</td>
              </tr>
          </tbody>
      </table>
  </TabsPageItem>

  <TabsPageItem id="createventoutputs">
  <table>
    <thead>
        <tr>
            <th>Output Field</th>
            <th>Type</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>**success**</td>
            <td>Boolean</td>
        </tr>
        <tr>
            <td>**errorMessage**</td>
            <td>string</td>
        </tr>
    </tbody>
  </table>
  </TabsPageItem>

  <TabsPageItem id="createventexample">
  <table>
    <thead>
        <tr>
            <th>Workflow example</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
  ```yaml
  name: heartbeat_newrelicIngestSendEvents

workflowInputs:
  cellName:
    type: String

steps:
  - name: runAction
    type: action
    action: newrelic.ingest.sendEvents
    version: 1
    inputs:
      attributes:
        colour: red
        id: 1234
      events:
        - eventType: HeartBeat
          test: "OK"
          attributes:
            foo: bar
        - eventType: HeartBeat1234
          test: "OK1234"
          attributes:
            foo: bar
        - eventType: HeartBeat12345
          test: "OK12345"
          attributes:
            foo: bar
            colour: yellow
        - eventType: HeartBeat12345678
          test: "OK12345678"
      selectors:
        - name: success
          expression: ".success"
  ```

  **Expected output:**
  ```yaml
  {
    "success": true
  }
  ```

  **Retrieve events:**

  After successfully executing a workflow, you can retrieve the associated event by running a query under the account that executed the workflow:
  
  ```sql
  SELECT * FROM HeartBeat
  ```
            </td>
        </tr>
    </tbody>
  </table>
  </TabsPageItem>
  </TabsPages>
</Tabs>
    </Collapser>
</CollapserGroup>

<CollapserGroup>
    <Collapser
        id="newrelic-ingest-sendlogs"
        title="Send logs to New Relic"
    >
  Send logs to New Relic

<Tabs>
  <TabsBar>
    <TabsBarItem id="newrelic-ingest-sendlogsinputs">
      Inputs
    </TabsBarItem>

    <TabsBarItem id="newrelic-ingest-sendlogsoutputs">
      Outputs
    </TabsBarItem>

    <TabsBarItem id="newrelic-ingest-sendlogsexample">
      Example
    </TabsBarItem>
  </TabsBar>

  <TabsPages>
    <TabsPageItem id="newrelic-ingest-sendlogsinputs">
      <table>
          <thead>
              <tr>
                  <th>Input Field</th>
                  <th>Optionality</th>
                  <th>Type</th>
                  <th>Description</th>
                  <th>Example</th>
              </tr>
          </thead>
          <tbody>
              <tr>
                  <td>**attributes**</td>
                  <td>Optional</td>
                  <td>Map</td>
                  <td>Common attributes are included in all logs when provided. These merge with each log item, with log-specific values overriding common attributes when conflicts occur.</td>
                  <td>`"{\"page\": \"1\", \"limit\": \"10\"}"`</td>
              </tr>
              <tr>
                  <td>**logs**</td>
                  <td>Required</td>
                  <td>List</td>
                  <td>List of logs. Each **log** requires a `message` field. Maximum of 100 logs per request.</td>
                  <td>`"[{\"message\":\"XYZ\",\"attributes\":{\"foo\":\"bar\"}}, {\"message\":\"ABC\",\"value\":\"1234\",\"attributes\":{\"color\":\"red\"}}]"`</td>
              </tr>
              <tr>
                  <td>**licenseKey**</td>
                  <td>Optional</td>
                  <td>String</td>
                  <td>
                  The **New Relic Account License Key** (required) specifies the
                  target account for your events. If not provided, the system uses the default license key from the account executing the workflow.

                  [Read more about our API keys](/docs/apis/intro-apis/new-relic-api-keys/#license-key) to create and manage your **New Relic Account License Key**.
                  </td>
                  <td>`"{{ .secrets.secretName }}"`, where `secretName` is the key under which the license key is stored.</td>
              </tr>
              <tr>
                  <td>**selectors**</td>
                  <td>Optional</td>
                  <td>List</td>
                  <td>The selectors to get only the specified parameters as output.</td>
                  <td></td>
              </tr>
          </tbody>
      </table>
  </TabsPageItem>

  <TabsPageItem id="newrelic-ingest-sendlogsoutputs">
  <table>
    <thead>
        <tr>
            <th>Output Field</th>
            <th>Type</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>**success**</td>
            <td>Boolean</td>
        </tr>
        <tr>
            <td>**errorMessage**</td>
            <td>string</td>
        </tr>
    </tbody>
  </table>
  </TabsPageItem>

  <TabsPageItem id="newrelic-ingest-sendlogsexample">
  <table>
    <thead>
        <tr>
            <th>Workflow example</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
  ```yaml
  name: heartbeat_newrelicIngestSendLogs

workflowInputs:
  cellName:
    type: String

steps:
  - name: runAction
    type: action
    action: newrelic.ingest.sendLogs
    version: 1
    inputs:
      attributes:
        colour: red
        id: 1234
      logs:
        - message: 'Heartbeat sendLogs Action Test Message'
          attributes:
            foo: bar
        - message: 'HeartBeat1234'
          attributes:
            foo: bar
        - message: 'HeartBeat12345'
          attributes:
            foo: bar
            colour: yellow
        - message: 'HeartBeat12345678'
      selectors:
        - name: success
          expression: ".success"
  ```

  **Expected output:**
  ```yaml
  {
    "success": true
  }
  ```

  **Retrieve logs:**

  After successfully executing a workflow, you can retrieve the associated log by running a query under the account that executed the workflow:
  
  ```sql
  SELECT * FROM Log
  ```
            </td>
        </tr>
    </tbody>
  </table>
  </TabsPageItem>
  </TabsPages>
</Tabs>
    </Collapser>
</CollapserGroup>

<CollapserGroup>
    <Collapser
        id="newrelic.ingest.sendMetrics"
        title="Send metrics to New Relic"
    >

<Tabs>
  <TabsBar>
    <TabsBarItem id="newrelic-ingest-sendmetricsinputs">
      Inputs
    </TabsBarItem>

    <TabsBarItem id="newrelic-ingest-sendmetricsoutputs">
      Outputs
    </TabsBarItem>

    <TabsBarItem id="newrelic-ingest-sendmetricsexample">
      Example
    </TabsBarItem>
  </TabsBar>

  <TabsPages>
    <TabsPageItem id="newrelic-ingest-sendmetricsinputs">
      <table>
          <thead>
              <tr>
                  <th>Input Field</th>
                  <th>Optionality</th>
                  <th>Type</th>
                  <th>Example</th>
              </tr>
          </thead>
          <tbody>
              <tr>
                  <td>**metrics**</td>
                  <td>Required</td>
                  <td>List</td>
                  <td>
```yaml
[ { "name": "service.errors.all", "type": "count", "value": 9, "attributes": { "service.response.statuscode": "400" } }, 

{ "name": "service.errors.all", "type": "gauge", "value": 4, "attributes": { "service.response.statuscode": "500" } }, 

{ "name": "service.response.duration", "type": "summary", "value": { "count": 5, "sum": 0.004382655, "min": 0.0005093, "max": 0.001708826 }, "attributes": { "service.response.statuscode": "200" } } ]
```
                  </td>
              </tr>
              <tr>
                  <td>**attributes**</td>
                  <td>Optional</td>
                  <td>Map</td>
                  <td>
```yaml
{ "timestamp": 1531414060739, "interval.ms": 10000, "attributes": { "app.name": "foo", "host.name": "dev.server.com" } }
```
                  </td>
              </tr>
              <tr>
                  <td>**licenseKey**</td>
                  <td>Optional</td>
                  <td>String</td>
                  <td>
                  The **New Relic Account License Key** (required) specifies the target account for your events. If not provided, the system uses the default license key from the account executing the workflow.

                  [Read more about our API keys](/docs/apis/intro-apis/new-relic-api-keys/#license-key) to create and manage your **New Relic Account License Key**.

                  `"{{ .secrets.secretName }}"`, where `secretName` is the key under which the license key is stored.
                  </td>
              </tr>
              <tr>
                  <td>**selectors**</td>
                  <td>Optional</td>
                  <td>List</td>
                  <td>
```yaml
[{"name": "error", "expression": ".errorMessage"}]
```
                  </td>
              </tr>
          </tbody>
      </table>

**Required key-value pairs in the** `metrics`

Each metric data point map in the `metrics` list uses the following key-value structure:

      <table>
        <thead>
            <tr>
                <th>Attribute</th>
                <th>Type</th>
                <th>Optionality</th>
                <th>Description</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**name**</td>
                <td>String</td>
                <td>Required</td>
                <td>The name of the metric. The value must be less than 255 characters.</td>
            </tr>
            <tr>
                <td>**value**</td>
                <td>Number or Map</td>
                <td>Required</td>
                <td>The value varies depending on the [metric type](/docs/data-apis/understand-data/metric-data/metric-data-type/). For `gauge` and `count` the value should be a single number. For `summary`, the value should be a map with key-value pairs specifying the count, sum, min, and max.</td>
            </tr>
            <tr>
                <td>**timestamp**</td>
                <td>Long</td>
                <td>Optional</td>
                <td>The metric's start time in [Unix time](https://currentmillis.com/). The default uses UTC time zone. This field also support seconds, microseconds, and nanoseconds. However, the data will be converted to milliseconds for storage and query. Metrics are dropped if they have a timestamp more than 48 hours in the past or more than 24 hours in the future from the time they are reported.</td>
            </tr>
            <tr>
                <td>**interval.ms**</td>
                <td>Positive long</td>
                <td>Required for `count` and `summary` [metric types](/docs/data-apis/understand-data/metric-data/metric-data-type/).</td>
                <td>The length of the time window.</td>
            </tr>
            <tr>
                <td>**type**</td>
                <td></td>
                <td>Recommended</td>
                <td>Supports only `count`, `gauge`, `summary`, see [supported metric types](/docs/data-apis/understand-data/metric-data/metric-data-type/) for more information. If you do not specify a type, then this will default to a `gauge`.</td>
            </tr>
            <tr>
                <td>**attributes**</td>
                <td>Strings, JSON numbers, or Booleans</td>
                <td>Recommended</td>
                <td>A map of key value pairs associated with this specific metric. Values can be strings, JSON numbers, or booleans. Keys are case-sensitive and must be less than 255 characters.</td>
            </tr>
        </tbody>
      </table>

      <Callout variant="important">
        The metrics API mandates a `timestamp`. Within the action, the `timestamp` is optional, defaulting to the current time if not supplied prior to metrics ingestion.
      </Callout>

**Share attributes across metrics with** `common`

If you want to include a set of attributes on multiple metrics (and not add the same attributes for each metric), you can use the `common` block. This is an optional map that specifies information that applies to all associated metric data points. Values in the `common` section will be overridden if the same key exists on a metric data point.

The block can include:

      <table>
        <thead>
            <tr>
                <th>Attribute</th>
                <th>Type</th>
                <th>Optionality</th>
                <th>Description</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**timestamp**</td>
                <td>Long</td>
                <td></td>
                <td>The metric's start time in [Unix time](https://currentmillis.com/). This defaults to the current time in the UTC time zone. This field also supports seconds, microseconds, and nanoseconds. However, the data will be converted to milliseconds for storage and later querying.</td>
            </tr>
            <tr>
                <td>**interval.ms**</td>
                <td>Positive long</td>
                <td>Required for `count` and `summary`</td>
                <td>The length of the time window.</td>
            </tr>
            <tr>
                <td>**attributes**</td>
                <td>Strings, JSON numbers, or Booleans</td>
                <td></td>
                <td>A map of key-value pairs associated with this specific metric. Values can be strings, JSON numbers, or booleans.</td>
            </tr>
        </tbody>
      </table>
  </TabsPageItem>

  <TabsPageItem id="newrelic-ingest-sendmetricsoutputs">
  <table>
    <thead>
        <tr>
            <th>Output Field</th>
            <th>Type</th>
            <th>Example</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>**requestId**</td>
            <td>String</td>
            <td>`13325ef9-0001-b193-510f-019ba20b0792`</td>
        </tr>
        <tr>
            <td>**success**</td>
            <td>Boolean</td>
            <td>`success: true | false`</td>
        </tr>
        <tr>
            <td>**errorMessage**</td>
            <td>String</td>
            <td>`Failure reason as message.`</td>
        </tr>
    </tbody>
  </table>
  </TabsPageItem>

  <TabsPageItem id="newrelic-ingest-sendmetricsexample">
  <table>
    <thead>
        <tr>
            <th>Workflow example</th>
        </tr>
    </thead>
    <tbody>
        <tr>
          <td>
```yaml
  - name: sendMetrics
    type: action
    action: newrelic.ingest.sendMetrics
    version: 1
    inputs:
      metrics:
        - name: service.errors.all
          type: count
          value: 9
          timestamp: 1531414060739
          attributes:
            service.response.statuscode: 400
        - name: service.response.duration
          type: guage
          value: 4
          timestamp: 1531414060733
          attributes:
            service.response.statuscode: 500
```
          </td>
        </tr>
    </tbody>
  </table>
  </TabsPageItem>
  </TabsPages>
</Tabs>
    </Collapser>
</CollapserGroup>
