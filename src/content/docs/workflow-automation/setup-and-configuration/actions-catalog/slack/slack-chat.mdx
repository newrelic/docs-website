---
title: "Slack actions"
tags:
  - workflow automation
  - workflow
  - workflow automation actions
  - Slack actions
  - communication actions
  - Slack Chat actions
metaDescription: "A list of available slack chat actions in the actions catalog for workflow definitions"
freshnessValidatedDate: never
---

<Callout title="preview">
  We're still working on this feature, but we'd love for you to try it out!

  This feature is currently provided as part of a preview program pursuant to our [pre-release policies](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy).
</Callout>

This page provides a comprehensive reference for slack chat actions available in the workflow automation actions catalog. These actions enable you to slack messaging operations.

## Prerequisites

Before using communication actions in workflow automation, ensure you have:

  * A Slack workspace with appropriate permissions.
  * A Slack bot token configured as a secret in workflow automation.
  * Access to the Slack channels where you want to send messages.

## Configure Slack integration [#slack-configuration]

This section details the instructions for setting up a Slack application with the minimal scope permissions to allow the workflow automation Slack actions.

### Create a Slack app

1. Go to the [Slack API](https://api.slack.com/apps) > **Create New App > From Scratch**
2. Give your app a name and select a workspace, then click **Create App**.
3. Upon creating, go to **App Home** on the left navigation and ensure your bot is online.



    <img width="40%;" style={{align: "left"}} title="Always show My Bot as Online" alt="The Slack App Home page with the My Bot online status highlighted." src="/images/my-bot-always-online.webp" />

### Configure OAuth permissions

1. On the left navigation, select **OAuth & Permissions**.
2. Scroll down to the **Bot Token Scopes** section, and add the following scopes to allow the workflow automation action usages:
   * `chat:write` - Required to post a message
   * `reactions:read` - Required to get reaction from a thread
   * `files:write` - Required to upload a file attachment to a thread

    <img width="40%;" style={{align: "left"}} title="Workflow automation Slack scopes" alt="The image of the scope that needs to be added for workflow automation Slack actions." src="/images/slack-workflow-scopes.webp" />

3. Scroll back up and click the **Install to [workspace]** button to start the OAuth setup with your Slack workspace.
4. You should see a confirmation prompt. Click **Allow** to confirm.
5. Upon success, copy the **Bot token** and keep it for the next step. The token should start with `xoxb-...`.

### Add app to channels

Now that the Slack app is created and configured, add it to the Slack channel(s) you'd like to use by editing that channel's **Integrations** and adding the Slack app to it.

### New Relic configuration

Once you've set up a Slack application and obtained a bot token, store this credential in New Relic secrets management using the GraphQL mutation below:

```graphql
mutation {
  secretsManagementCreateSecret(
    scope: {type: ACCOUNT id: "12345678"}
    namespace: "slack"
    key: "my-app-bot-token"
    description: "A slack token to send messages with newrelic workflow automation"
    value: "xoxb-..."
  ) {
    key
  }
}
```

Configure the following values:

* `id` - Your New Relic account ID
* `namespace` - Optional, use any alphanumeric string to categorize your secret
* `key` - Use an alphanumeric string for referencing this secret
* `description` - Optional description for the secret
* `value` - The Slack bot token you copied from the previous step

You can execute this mutation using the [NerdGraph GraphiQL explorer](https://one.newrelic.com/nerdgraph-graphiql) with your New Relic user API key. Once submitted successfully, you should see a result similar to this:

```json
{
  "data": {
    "secretsManagementCreateSecret": {
      "key": "my-app-bot-token"
    }
  }
}
```

### Use the Slack token in workflows

Use the workflow automation feature by leveraging the Slack bot token secret stored with your namespace and key names.

**Example:**

```yaml
name: to-slack

steps:
  - name: postCsv
    type: action
    action: slack.chat.postMessage
    version: 1
    inputs:
      channel: test-channel-workflow
      text: "Hello World!"
      token: ${{ :secrets:slack:my-app-bot-token }}
```

<Callout variant="tip">
If you didn't use a namespace, remove the `:namespace` part from the token input, like this: `${{ :secrets:my-app-bot-token }}`
</Callout>

## Slack actions

<CollapserGroup>
    <Collapser
        id="slack-chat-postmessage"
        title="Post a message to Slack channel"
    >
  Sends a message to a slack channel, with an optional file attachment.

<Tabs>
  <TabsBar>
    <TabsBarItem id="chatpostmessageinputs">
      Inputs
    </TabsBarItem>

    <TabsBarItem id="chatpostmessageoutputs">
      Outputs
    </TabsBarItem>

    <TabsBarItem id="chatpostmessageexample">
      Example
    </TabsBarItem>
  </TabsBar>

  <TabsPages>
    <TabsPageItem id="chatpostmessageinputs">
<table>
    <thead>
        <tr>
            <th>Input Field</th>
            <th>Optionality</th>
            <th>Type</th>
            <th>Description</th>
            <th>Example</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>**token**</td>
            <td>Required</td>
            <td>Secret</td>
            <td>The Slack bot token to use. This should be passed as a secret syntax. Refer to [Add Slack configuration](#slack-configuration) for instructions on setting up a token.</td>
            <td>`${{ :secrets:slackToken }}`</td>
        </tr>
        <tr>
            <td>**channel**</td>
            <td>Required</td>
            <td>String</td>
            <td>The name of the channel, or a channelID, to send the message. See [Slack API](https://docs.slack.dev/reference/methods/chat.postMessage/#arg_channel) for more information.</td>
            <td>`my-slack-channel`</td>
        </tr>
        <tr>
            <td>**text**</td>
            <td>Required</td>
            <td>String</td>
            <td>The message to be posted to Slack in the specified `channel`.</td>
            <td>`Hello World!`</td>
        </tr>
        <tr>
            <td>**threadTs**</td>
            <td>Optional</td>
            <td>String</td>
            <td>Timestamp belonging to parent message, used to create a message reply in a thread.</td>
            <td>`<digits>.<digits>`</td>
        </tr>
        <tr>
            <td>**attachment**</td>
            <td>Optional</td>
            <td>Map</td>
            <td>Allows attaching a file with a message onto the specified `channel`.</td>
            <td></td>
        </tr>
        <tr>
            <td>**attachment.filename**</td>
            <td>Required</td>
            <td>String</td>
            <td>Specify the filename for the uploaded file in Slack.</td>
            <td>`file.txt`</td>
        </tr>
        <tr>
            <td>**attachment.content**</td>
            <td>Required</td>
            <td>String</td>
            <td>The content of the file to upload as UTF8.</td>
            <td>`Hello\nWorld!`</td>
        </tr>
        <tr>
            <td>**selectors**</td>
            <td>Optional</td>
            <td>List</td>
            <td>The selectors to get the only specified parameters as output.</td>
            <td>`[{\"name\": \"threadTs\", \"expression\": \".threadTs\"}, {\"name\": \"channelID\", \"expression\": \".channelID\")\"}]`</td>
        </tr>
    </tbody>
</table>
  </TabsPageItem>

  <TabsPageItem id="chatpostmessageoutputs">
<table>
  <thead>
      <tr>
          <th>Output Field</th>
          <th>Type</th>
          <th>Description</th>
          <th>Example</th>
      </tr>
  </thead>
  <tbody>
      <tr>
            <td>**threadTs**</td>
            <td>String</td>
            <td>Timestamp of the message thread. May be used in future `postMessage` calls to post a reply in a thread.</td>
            <td>`<digits>.<digits>`</td>
        </tr>
        <tr>
            <td>**channelID**</td>
            <td>String</td>
            <td>Id of the channel where message is posted.</td>
            <td>`<string>`</td>
        </tr>
        <tr>
            <td>**success**</td>
            <td>Boolean</td>
            <td>Status of the request</td>
            <td>`true / false`</td>
        </tr>
        <tr>
            <td>**errorMessage**</td>
            <td>String</td>
            <td>Failure reason as message</td>
            <td>`<string>`</td>
        </tr>
  </tbody>
</table>
  </TabsPageItem>

  <TabsPageItem id="chatpostmessageexample">

**Example 1: Send slack message**

<table>
  <thead>
      <tr>
          <th>Workflow example</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>
  ```yaml
    name: SendMessage

    steps:
      - name: send_slack_message
        type: action
        action: slack.chat.postMessage 
        version: 1
        inputs:
          token: ${{ :secrets:dn_staging_slack_token }}
          channel: ${{ .workflowInputs.channel }}
          text: ${{ .workflowInputs.text }}
          selectors:
            - name: threadTs
              expression: ".threadTs"
            - name: channelID
              expression: ".channelID"
  ```

**Inputs:**

  ```json
    {
      "inputs": [
        {
          "key" : "channel",
          "value" : "test-channel-workflow"
        },
        {
          "key" : "text",
          "value" : "This is my message *with bold text* and `code backticks`"
        }
      ]
    }
  ```

**Expected output:**

  ```json
    [
      {
        "threadTs": "1718897637.400609",
        "channelID": "C063JK1RHN1"
        "success": true
      }
    ]
  ```
          </td>
      </tr>
  </tbody>
</table>

**Example 2: Attach a file**

<table>
  <thead>
      <tr>
          <th>Workflow example</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>
  ```yaml
    name: SendFileMessage

    steps:

      - name: postCsv
        type: action
        action: slack.chat.postMessage
        version: 1
        inputs:
          token: ${{ :secrets:dn_staging_slack_token }}
          channel: test-channel-workflow
          text: "Please find the attached file:"
          attachment:
            filename: 'file.txt'
            content: "Hello\nWorld!"
  ```

**Expected output:**

  ```json
    [
      {
        "threadTs": "1718897637.400609",
        "channelID": "C063JK1RHN1"
        "success": true
      }
    ]
  ```
          </td>
      </tr>
  </tbody>
</table>
  </TabsPageItem>
  </TabsPages>
</Tabs>
    </Collapser>
</CollapserGroup>

<CollapserGroup>
    <Collapser
        id="slack-chat-getreactions"
        title="Get a reaction of a message from Slack channel"
    >
  Get a reaction of a message from Slack channel.

<Tabs>
  <TabsBar>
    <TabsBarItem id="chatgetreactionsinputs">
      Inputs
    </TabsBarItem>

    <TabsBarItem id="chatgetreactionsoutputs">
      Outputs
    </TabsBarItem>

    <TabsBarItem id="chatgetreactionsexample">
      Example
    </TabsBarItem>
  </TabsBar>

  <TabsPages>
    <TabsPageItem id="chatgetreactionsinputs">
<table>
    <thead>
        <tr>
            <th>Input Field</th>
            <th>Optionality</th>
            <th>Type</th>
            <th>Description</th>
            <th>Example</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>**token**</td>
            <td>Required</td>
            <td>Secret</td>
            <td>The Slack bot token to use. This should be passed as a secret syntax. Refer to [Add Slack configuration](#slack-configuration) for instructions on setting up a token.</td>
            <td>`${{ :secrets:slackToken }}`</td>
        </tr>
        <tr>
            <td>**channelID**</td>
            <td>Required</td>
            <td>String</td>
            <td>The channelID, to get the message reactions. See [`reactions.get` method](https://docs.slack.dev/reference/methods/reactions.get/#arg_channel)</td>
            <td>`C063JK1RHN1`</td>
        </tr>
        <tr>
            <td>**timeout**</td>
            <td>Optional</td>
            <td>Int</td>
            <td>The time in seconds for how long to wait for any reaction. Default is 60s, maximum allowed is 600s (10min).</td>
            <td>60</td>
        </tr>
        <tr>
            <td>**threadTs**</td>
            <td>Required</td>
            <td>String</td>
            <td>Timestamp belonging to message, used to get reaction of that message.</td>
            <td>`<digits>.<digits>`</td>
        </tr>
        <tr>
            <td>**selectors**</td>
            <td>Optional</td>
            <td>List</td>
            <td>The selectors to get the only specified parameters as output.</td>
            <td>`[{\"name\": \"reactions\", \"expression\": \".reactions \"}]`</td>
        </tr>
    </tbody>
</table>
  </TabsPageItem>

  <TabsPageItem id="chatgetreactionsoutputs">
<table>
  <thead>
      <tr>
          <th>Output Field</th>
          <th>Type</th>
          <th>Description</th>
          <th>Example</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>**reactions**</td>
          <td>List</td>
          <td>List of elements with all the reactions captured or an empty list if timeout occurred.</td>
          <td>`<list>`</td>
      </tr>
      <tr>
          <td>**success**</td>
          <td>Boolean</td>
          <td>Status of the request</td>
          <td>`true / false`</td>
      </tr>
      <tr>
          <td>**errorMessage**</td>
          <td>String</td>
          <td>Failure reason as message</td>
          <td>`Invalid slack token`</td>
      </tr>
  </tbody>
</table>
  </TabsPageItem>

  <TabsPageItem id="chatgetreactionsexample">

**Example 1: Slack get reactions**

<table>
  <thead>
      <tr>
          <th>Workflow example</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>
  ```yaml
    name: GetReactions

    steps:
        - name: getReactions
        type: action
        action: slack.chat.getReactions
        version: 1
        inputs:
          token: ${{ :secrets:dn_staging_slack_token }}
          channelID: ${{ .steps.promptUser.outputs.channelID }}
          threadTs: ${{ .steps.promptUser.outputs.threadTs }}
          timeout: ${{ .workflowInputs.timeout }}
          selectors: ${{ .workflowInputs.selectors }}
  ```

**Inputs:**

  ```json
    {
      "inputs": [
        {
          "key" : "channelID",
          "value" : "C063JK1RHN1"
        },
        {
          "key" : "threadTs",
          "value" : "1718897637.400609"
        },
        {
          "key" : "selectors",
          "value" : "[{\"name\": \"reactions\", \"expression\": \".reactions \"}]"
        }
      ]
    }
  ```

**Outputs:**

  ```json
    [
                {
                    "name": "grinning",
                    "users": [
                        "W222222"
                    ],
                    "count": 1
                },
                {
                    "name": "question",
                    "users": [
                        "W333333"
                    ],
                    "count": 1
                }
            ]

    or if it is timed out,
    []
  ```
          </td>
      </tr>
  </tbody>
</table>
  </TabsPageItem>
  </TabsPages>
</Tabs>
    </Collapser>
</CollapserGroup>