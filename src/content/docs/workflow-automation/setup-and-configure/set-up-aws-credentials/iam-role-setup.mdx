---
title: Set up AWS IAM role for workflow automation
metaDescription: "Configure an IAM role to allow New Relic workflow automation to perform actions in your AWS account with temporary credentials."
freshnessValidatedDate: never
---

An IAM role allows New Relic to assume temporary credentials in your AWS account without requiring permanent access keys.

## IAM role characteristics

  - Credentials rotate automatically
  - Access is time-limited by design
  - All actions are logged in AWS CloudTrail
  - Aligns with AWS security best practices

## Prerequisites

Before creating an IAM role, ensure you have:
  - An AWS account with permission to create IAM roles
  - Your [New Relic account ID](/docs/accounts/accounts-billing/account-structure/account-id)
  - Admin access to the [AWS IAM Console](https://console.aws.amazon.com/iam/)

## Create the role in AWS

  1. Sign in to the [AWS IAM Console](https://console.aws.amazon.com/iam/)
  2. Navigate to **Roles > Create role > Trusted entity type** and select **AWS account > another AWS account**
  3. In the **Account ID** field, enter: `253490767857`
  4. Under **Options**, check **Require external ID**
  5. In the **External ID** field, enter your New Relic account ID and click **Next**.
      - Don't have it? [Find your account ID here](/docs/accounts/accounts-billing/account-structure/account-id)
  6. On the **Add permissions** page, attach policies based on your workflows:
      - For EC2 workflows: Attach `AmazonEC2ReadOnlyAccess` or create a custom policy
      - For SQS workflows: Attach `AmazonSQSFullAccess` or limit to specific queues
      - For other services: See [AWS policy examples](/docs/workflow-automation/setup-and-configure/set-up-aws-credentials/policy-examples)
  7. Click **Next**.
  8. Enter a role name: `NewRelicWorkflowAutomationRole` (or your preferred name)
  9. Optionally add a description: "Allows New Relic workflow automation to perform actions in AWS", and click **Create role**.

## Verify the trust policy

After creating the role, verify the trust relationship:

  1. In the IAM console, select your newly created role
  2. Click the **Trust relationships** tab
  3. Confirm the policy matches this structure (replace `<YOUR_NR_ACCOUNT_ID>` with your actual account ID):

    ```json
      {
          "Version": "2012-10-17",
          "Statement": [
              {
                  "Effect": "Allow",
                  "Action": "sts:AssumeRole",
                  "Principal": {
                      "AWS": "arn:aws:iam::253490767857:root"
                  },
                  "Condition": {
                      "StringEquals": {
                          "sts:ExternalId": "<YOUR_NR_ACCOUNT_ID>"
                      }
                  }
              }
          ]
      }
    ```

## Copy your role ARN

You'll need the role ARN to configure workflows:

  1. In the IAM console, select your role
  2. In the **Summary** section, locate the **ARN** field
  3. Copy the full ARN—it looks like: `arn:aws:iam::123456789012:role/NewRelicWorkflowAutomationRole`
  4. Save this ARN securely—you'll paste it directly into workflow configurations

    <Callout variant="tip">
      **Important:** Role ARNs go directly in workflow inputs—don't store them in [secrets manager](/docs/workflow-automation/limitations-and-faq/workflow-best-practices/#secure-credentials). They're not sensitive credentials; they're resource identifiers.
    </Callout>

The role is now configured. Use the ARN in workflow configurations that require AWS access.

## Related topics [#related-topics]

<DocTiles>
  <DocTile title='AWS credentials overview' path="/docs/workflow-automation/setup-and-configure/set-up-aws-credentials">Compare authentication methods and choose the right one</DocTile>
  <DocTile title='AWS policy examples' path="/docs/workflow-automation/setup-and-configure/set-up-aws-credentials/policy-examples">Complete IAM policies for EC2, SQS, DynamoDB, and more</DocTile>
  <DocTile title='AWS actions' path="/docs/workflow-automation/setup-and-configure/actions-catalog/actions-catalog">Browse EC2, Lambda, S3, SQS, and other AWS actions</DocTile>
  <DocTile title='EC2 management example' path="/docs/workflow-automation/workflow-examples/advanced/ec2-management">See AWS credentials in action with EC2 workflows</DocTile>
</DocTiles>
