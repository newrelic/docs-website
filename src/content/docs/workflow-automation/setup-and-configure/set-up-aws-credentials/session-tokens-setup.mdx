---
title: Set up AWS session tokens for workflow automation
metaDescription: "Generate temporary AWS session tokens with automatic expiration for local development and CI/CD pipelines."
freshnessValidatedDate: never
---

Session tokens provide temporary credentials with automatic expiration.

## Use cases

  - Local development and testing
  - CI/CD pipelines requiring credential rotation
  - Environments with compliance requirements for time-limited access (typically 1-12 hours)

## Prerequisites

Before generating session tokens, ensure you have:
  - [AWS CLI installed and configured](https://aws.amazon.com/cli/)
  - An existing IAM role you can assume
  - Your [New Relic account ID](/docs/accounts/accounts-billing/account-structure/account-id)

## Generate temporary credentials

  1. Open your terminal and run this command (replace with your role ARN):

    ```yaml
      aws sts assume-role \
        --role-arn "arn:aws:iam::YOUR_ACCOUNT:role/YOUR_ROLE" \
        --role-session-name "WorkflowAutomationSession"
    ```

    If this is your first time using AWS CLI, you may need to configure it with `aws configure` and enter your access credentials:

    <img
      title="Image of the Static Access credentials"
      alt="Image of the Static Access credentials"
      src="/images/static-access.webp"
    />

  2. AWS returns three valuesâ€”you need all three:

    ```json
      {
        "Credentials": {
            "AccessKeyId": "ASIAIOSFODNN7EXAMPLE",
            "SecretAccessKey": "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",
            "SessionToken": "FQoGZXIvYXdzEBk...",
            "Expiration": "2025-01-25T12:00:00Z"
        }
      }
    ```

  3. Store all three credentials in [secrets manager](/docs/workflow-automation/limitations-and-faq/workflow-best-practices/#secure-credentials):
    - `AccessKeyId` store as `awsAccessKeyId`
    - `SecretAccessKey` store as `awsSecretAccessKey`
    - `SessionToken` store as `awsSessionToken`

    <Callout variant="caution">
      Session tokens expire (typically after 1 hour). Set a reminder to refresh them before the `Expiration` timestamp, or your workflows will fail with authentication errors.
    </Callout>

## Related topics [#related-topics]

<DocTiles>
  <DocTile title='AWS credentials overview' path="/docs/workflow-automation/setup-and-configure/set-up-aws-credentials">Compare authentication methods and choose the right one</DocTile>
  <DocTile title='AWS policy examples' path="/docs/workflow-automation/setup-and-configure/set-up-aws-credentials/policy-examples">Complete IAM policies for EC2, SQS, DynamoDB, and more</DocTile>
  <DocTile title='AWS actions' path="/docs/workflow-automation/setup-and-configure/actions-catalog/actions-catalog">Browse EC2, Lambda, S3, SQS, and other AWS actions</DocTile>
  <DocTile title='Workflow best practices' path="/docs/workflow-automation/limitations-and-faq/workflow-best-practices">Security best practices for credentials and secrets</DocTile>
</DocTiles>
