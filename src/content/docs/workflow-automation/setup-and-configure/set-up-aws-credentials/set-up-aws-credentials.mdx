---
title: Set up AWS credentials
metaDescription: "Configure AWS credentials for workflow automation using IAM roles, IAM users, or temporary session tokens."
redirects:
  - /docs/workflow-automation/setup-and-configuration/set-up-aws-credentials
freshnessValidatedDate: never
---

Authorize New Relic workflow automation to perform actions in your AWS account. You'll configure an authentication method that allows workflows to securely interact with AWS services like EC2, SQS, DynamoDB, and more—without hardcoding credentials or compromising security.

## Prerequisites

Before setting up AWS credentials, ensure you have:
  - An AWS account with permission to create IAM roles or users.
  - Your [New Relic account ID](/docs/accounts/accounts-billing/account-structure/account-id).
  - Admin access to the [AWS IAM Console](https://console.aws.amazon.com/iam/).

## Understand required permissions [#required-permissions]

Before creating credentials, understand what permissions your workflows need. Grant only the permissions your workflows actually use—this follows the principle of least privilege and minimizes security risk.

### Common workflow permissions

<table>
    <thead>
        <tr>
            <th style={{ width: "200px" }}>
                **Workflow type**
            </th>
            <th>
                **Required AWS permissions**
            </th>
            <th>
                **Description**
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
              **EC2 management**
            </td>
            <td>
              <p>
              `ec2:DescribeInstances`
              </p>
              <p>
              `ec2:StopInstances`
              </p>
              <p>
              `ec2:StartInstances`
              </p>
              <p>
              `ec2:ModifyInstanceAttribute`
              </p>
            </td>
            <td>
              Stop, start, or modify EC2 instances in response to alerts
            </td>
        </tr>
        <tr>
            <td>
              **SQS messaging**
            </td>
            <td>
              `sqs:SendMessage`
              <p>
              `sqs:GetQueueAttributes`
              </p>
            </td>
            <td>
              Send messages to SQS queues for downstream processing
            </td>
        </tr>
        <tr>
            <td>
              **API Gateway**
            </td>
            <td>
              `apigateway:GET`
              <p>
              `apigateway:PUT`
              </p>
            </td>
            <td>
              Roll back API Gateway deployments or configurations
            </td>
        </tr>
        <tr>
            <td>
              **Systems Manager**
            </td>
            <td>
              `ssm:CreateDocument`
              <p>
              `ssm:DeleteDocument`
              </p>
              <p>
              `ssm:StartAutomationExecution`
              </p>
              <p>
              `ssm:GetAutomationExecution`
              </p>
            </td>
            <td>
              Execute automation runbooks
            </td>
        </tr>
        <tr>
            <td>
              **DynamoDB**
            </td>
            <td>
              `dynamodb:Query`
              <p>
              `dynamodb:GetItem`
              </p>
              <p>
              `dynamodb:PutItem`
              </p>
            </td>
            <td>
              Read from or write to DynamoDB tables
            </td>
        </tr>
    </tbody>
</table>

<Callout variant="tip">
  Start with read-only permissions (`Describe*`, `Get*`, `List*`), then add write permissions (`Put*`, `Create*`, `Delete*`) only as needed. This prevents accidental destructive actions during testing.
</Callout>

See [AWS policy examples](/docs/workflow-automation/setup-and-configure/set-up-aws-credentials/policy-examples) for complete IAM policy templates for these workflow types.

## Choose your authentication method [#choose-method]

<table>
    <thead>
        <tr>
            <th style={{ width: "200px" }}>
                **Method**
            </th>
            <th>
                **Use cases**
            </th>
            <th>
                **Characteristics**
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
              [**IAM role**](/docs/workflow-automation/setup-and-configure/set-up-aws-credentials/iam-role-setup)<br/>(recommended)
            </td>
            <td>
              Production workflows, all AWS services
            </td>
            <td>
              - Credentials rotate automatically<br/>
              - Access is time-limited by design<br/>
              - All actions are logged in AWS CloudTrail<br/>
              - Aligns with AWS security best practices
            </td>
        </tr>
        <tr>
            <td>
              [**IAM user with access keys**](/docs/workflow-automation/setup-and-configure/set-up-aws-credentials/iam-user-setup)
            </td>
            <td>
              - Testing and development environments<br/>
              - AWS configurations that don't support cross-account role assumption<br/>
              - Simplified authentication workflows
            </td>
            <td>
              - Access keys are long-lived credentials<br/>
              - Rotate them regularly (every 90 days)<br/>
              - Limit permissions to only what your workflows need
            </td>
        </tr>
        <tr>
            <td>
              [**Session tokens**](/docs/workflow-automation/setup-and-configure/set-up-aws-credentials/session-tokens-setup)
            </td>
            <td>
              - Local development and testing<br/>
              - CI/CD pipelines requiring credential rotation<br/>
              - Environments with compliance requirements for time-limited access (typically 1-12 hours)
            </td>
            <td>
              - Temporary credentials with automatic expiration<br/>
              - Session tokens expire (typically after 1 hour)<br/>
              - Set a reminder to refresh them before expiration
            </td>
        </tr>
    </tbody>
</table>

## Use credentials in workflows [#use-credentials]

After setting up authentication, reference your credentials in workflow configurations:

### IAM role (recommended)

Paste the role ARN directly into workflow inputs—no [secrets manager](/docs/workflow-automation/limitations-and-faq/workflow-best-practices/#secure-credentials) needed:

```yaml
awsRoleArn: arn:aws:iam::123456789012:role/NewRelicWorkflowAutomationRole
```

<Callout variant="important">
  Role ARNs are resource identifiers, not sensitive credentials. Don't store them in secrets manager—paste them directly into workflow configurations.
</Callout>

### IAM user or session tokens

Reference [secrets manager](/docs/workflow-automation/limitations-and-faq/workflow-best-practices/#secure-credentials) for access keys:

```yaml
awsAccessKeyId: ${{ :secrets:awsAccessKeyId }}
awsSecretAccessKey: ${{ :secrets:awsSecretAccessKey }}
awsSessionToken: ${{ :secrets:awsSessionToken }}  # Only for session tokens
```

New Relic retrieves secrets at runtime, authenticates with AWS, then discards them. Your credentials never appear in logs or workflow history.

## Related topics [#related-topics]

<DocTiles>
  <DocTile title='IAM role setup' path="/docs/workflow-automation/setup-and-configure/set-up-aws-credentials/iam-role-setup">Configure IAM role for production workflows (recommended)</DocTile>
  <DocTile title='IAM user setup' path="/docs/workflow-automation/setup-and-configure/set-up-aws-credentials/iam-user-setup">Set up IAM user with access keys for testing</DocTile>
  <DocTile title='Session tokens setup' path="/docs/workflow-automation/setup-and-configure/set-up-aws-credentials/session-tokens-setup">Generate temporary session tokens for local development</DocTile>
  <DocTile title='AWS policy examples' path="/docs/workflow-automation/setup-and-configure/set-up-aws-credentials/policy-examples">Complete IAM policies for EC2, SQS, DynamoDB, and more</DocTile>
  <DocTile title='AWS actions' path="/docs/workflow-automation/setup-and-configure/actions-catalog/actions-catalog">Browse EC2, Lambda, S3, SQS, and other AWS actions</DocTile>
  <DocTile title='EC2 management example' path="/docs/workflow-automation/workflow-examples/advanced/ec2-management">See AWS credentials in action with EC2 workflows</DocTile>
</DocTiles>
