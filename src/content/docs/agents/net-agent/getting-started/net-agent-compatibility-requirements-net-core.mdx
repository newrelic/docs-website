---
title: '.NET agent: compatibility and requirements for .NET Core'
tags:
  - Agents
  - NET agent
  - Getting started
translate:
  - jp
metaDescription: 'APM .NET agent: Software and hardware requirements for the agent''s support of .NET Core, and an explanation of automatically instrumented features.'
redirects:
  - /docs/agents/net-agent/getting-started/compatibility-requirements-net-core-agent
  - /docs/agents/net-agent/getting-started/compatibility-requirements-net-core-20-agent
  - /docs/agents/net-agent/installation/compatibility-requirements-net-core-agent
---

New Relic's .NET agent supports both .NET Framework and .NET Core. This document describes compatibility and support for .NET Core applications. See [Compatibility and requirements for .NET Framework](https://docs.newrelic.com/docs/agents/net-agent/getting-started/net-agent-compatibility-requirements-net-framework) for .NET Framework applications.

New Relic's .NET agent includes built-in instrumentation for some of the most popular parts of the .NET Core ecosystem, including frameworks, databases, and message queuing systems.

After installation, the agent runs within the monitored process; there is not a separate process or service created by the agent.

For frameworks and libraries that are not [automatically instrumented](https://docs.newrelic.com/node/9136/draft#instrumented-features) out of the box, you can extend the agent with [.NET custom instrumentation](https://docs.newrelic.com/docs/agents/net-agent/custom-instrumentation/introduction-net-custom-instrumentation).

## Requirements

Before you install the New Relic .NET agent on [Windows](/docs/agents/net-agent/installation/install-net-agent-windows) or [Linux](/docs/agents/net-agent/installation/install-net-agent-linux), make sure your system meets these requirements:

<CollapserGroup>
  <Collapser
    className="freq-link"
    id="net-version"
    title="Microsoft .NET Core version"
  >
    The .NET agent supports .NET Core versions 2.0, 2.1, 2.2, 3.0, 3.1, and .NET 5.0.

    <table style={{ width: "500px" }}>
      Table of minimum agent versions required per .NET Core version

      <thead>
        <tr>
          <th>
            .NET Core Version
          </th>

          <th>
            Minimum Required .NET Agent Version
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            .NET Core 2.0
          </td>

          <td>
            \>= 8.19.353.0
          </td>
        </tr>

        <tr>
          <td>
            .NET Core 2.1
          </td>

          <td>
            \>= 8.19.353.0
          </td>
        </tr>

        <tr>
          <td>
            .NET Core 2.2
          </td>

          <td>
            \>= 8.19.353.0
          </td>
        </tr>

        <tr>
          <td>
            .NET Core 3.0
          </td>

          <td>
            \>= 8.21.34.0
          </td>
        </tr>

        <tr>
          <td>
            .NET Core 3.1
          </td>

          <td>
            \>= 8.21.34.0
          </td>
        </tr>

        <tr>
          <td>
            .NET 5.0
          </td>

          <td>
            \>= 8.35.0
          </td>
        </tr>
      </tbody>
    </table>

    The agent is **not** compatible with .NET Core versions 1.0 or 1.1. For .NET Core 2.1 or higher applications with tiered compilation enabled, the agent will disable tiered compilation. .NET Core 2.1 support requires .NET Core runtime 2.1.3 and .NET Core SDK 2.1.401 or higher due to [a bug in the .NET Core profiling API](https://github.com/dotnet/coreclr/issues/18448).
  </Collapser>

  <Collapser
    className="freq-link"
    id="target-framework"
    title="Target framework version"
  >
    The .NET agent only supports applications targeting .NET Core 2.0, 2.1, 2.2, 3.0, 3.1, and NET 5.0. You can find the target framework in your `.csproj` file:

    Supported:

    ```
    <TargetFramework>netcoreapp2.0</TargetFramework>
    ```

    ```
    <TargetFramework>netcoreapp2.1</TargetFramework>
    ```

    ```
    <TargetFramework>netcoreapp2.2</TargetFramework>
    ```

    ```
    <TargetFramework>netcoreapp3.0</TargetFramework>
    ```

    ```
    <TargetFramework>netcoreapp3.1</TargetFramework>
    ```

    ```
    <TargetFramework>net5.0</TargetFramework>
    ```

    Unsupported:

    ```
    <TargetFramework>net452</TargetFramework>
    ```

    <Callout variant="important">
      If you want to monitor an ASP.NET Core application targeting .NET Framework, ensure your install of the .NET agent has .NET Framework support enabled.
    </Callout>
  </Collapser>

  <Collapser
    className="freq-link"
    id="app-web-servers"
    title="App/web servers"
  >
    Ensure you use one of these app/web servers:

    * Kestrel
    * Kestrel with IIS reverse proxy via AspNetCoreModule
    * Kestrel with IIS reverse proxy via AspNetCoreModuleV2
    * Kestrel with Nginx reverse proxy
    * Kestrel with Apache reverse proxy
  </Collapser>

  <Collapser
    className="freq-link"
    id="operating-system"
    title="Operating system"
  >
    The agent has been verified to work with the following operating systems:

    <table>
      <thead>
        <tr>
          <th style={{ width: "150px" }}>
            Operating system
          </th>

          <th>
            Supported versions
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            Windows (32- and 64-bit Intel compatible architectures)
          </td>

          <td>
            * Server 2008 R2 SP1
            * Server 2012
            * Server 2012 R2
            * Server 2016
            * Server 2019
            * Windows containers running on Server 2016 (NanoServer based images are not supported)
          </td>
        </tr>

        <tr>
          <td>
            Linux (64-bit Intel compatible only)
          </td>

          <td>
            All x64 Linux distributions supported by the .NET Core 2.0+/.NET 5 runtime are supported by the .NET agent. For a full list, refer to Microsoft's documentation for the version of the runtime you are using.
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="azure"
    title="Microsoft Azure"
  >
    For Azure-specific installation instructions, see:

    * [Install on Azure Cloud Services](/docs/agents/net-agent/azure-installation/install-app-azure-cloud-services)
    * [Install on Azure Service Fabric](/docs/agents/net-agent/azure-installation/install-net-agent-azure-service-fabric)
    * [Install on Azure Web Apps](/docs/agents/net-agent/azure-installation/install-app-azure-web-apps)
  </Collapser>

  <Collapser
    className="freq-link"
    id="architecture"
    title="Processor architectures"
  >
    The agent is available in both 32-bit (x86) and 64-bit (x64) versions on Windows as well as 64-bit (x64) on Linux.
  </Collapser>

  <Collapser
    className="freq-link"
    id="user-rights"
    title="Permissions"
  >
    Installing and running the .NET agent requires these permissions:

    <table>
      <thead>
        <tr>
          <th style={{ width: "150px" }}>
            Component
          </th>

          <th>
            Necessary permissions
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            Install the agent
          </td>

          <td>
            The process or user that installs the agent must have sufficient permissions to set environment variables and write access to the directory where the agent is installed.
          </td>
        </tr>

        <tr>
          <td>
            Run the agent
          </td>

          <td>
            The monitored process must have read/write access to the directory in which you installed the agent. The agent runs as a part of the monitored process and relies on those permissions to function.

            For applications using IIS via reverse proxy, the group [`IIS_IUSRS`](https://docs.microsoft.com/en-us/iis/get-started/planning-for-security/understanding-built-in-user-and-group-accounts-in-iis#understanding-the-new-iisiusrs-group) is often used.
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    className="freq-link"
    id="security-requirements"
    title="Security requirements"
  >
    As a standard [security measure for data collection](/docs/accounts-partnerships/accounts/security/data-security), your app server must support SHA-2 (256-bit). SHA-1 is not supported.
  </Collapser>

  <Collapser
    className="freq-link"
    title="Network requirements"
  >
    The agent requires your firewall to allow outgoing connections to specific [networks and ports](https://docs.newrelic.com/docs/apm/new-relic-apm/getting-started/networks).
  </Collapser>
</CollapserGroup>

## Automatic instrumentation [#instrumented-features]

If your application is hosted in ASP.NET Core, the agent automatically creates and instruments transactions. The .NET agent will automatically instrument your application after install. If your app is not automatically instrumented, or if you want to add instrumentation, use [custom instrumentation](/docs/agents/net-agent/custom-instrumentation/introduction-net-custom-instrumentation).

<CollapserGroup>
  <Collapser
    className="freq-link"
    id="app-frameworks"
    title="App frameworks"
  >
    The .NET agent automatically instruments these application frameworks:

    * ASP.NET Core MVC 2.0, 2.1, 2.2, 3.0, 3.1, and 5.0 (includes Web API)
  </Collapser>

  <Collapser
    className="freq-link"
    id="database"
    title="Datastores"
  >
    The .NET agent automatically instruments the performance of .NET application calls to these datastores:

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Datastore
          </th>

          <th style={{ width: "150px" }}>
            [Instance details](/docs/apm/applications-menu/features/analyze-database-instance-level-performance-issues)
          </th>

          <th>
            Notes
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            Microsoft SQL Server
          </td>

          <td className="fcenter">
            <Icon
              style={{color: '#328787'}}
              name="fe-check"
            />
          </td>

          <td>
            Use System.Data.SqlClient version 4.3.1 or Microsoft.Data.SqlClient.
          </td>
        </tr>

        <tr>
          <td>
            PostgresSQL
          </td>

          <td className="fcenter">
            <Icon
              style={{color: '#328787'}}
              name="fe-check"
            />
          </td>

          <td>
            Use Npgsql 4.0.

            Prior versions of Npgsql may also be instrumented, but duplicate and/or missing metrics are possible.
          </td>
        </tr>

        <tr>
          <td>
            MongoDB
          </td>

          <td className="fcenter">
            <Icon
              style={{color: '#328787'}}
              name="fe-check"
            />
          </td>

          <td>
            Use [driver version 2.3.x, 2.4.x, 2.5.x, or 2.6.x](http://docs.mongodb.com/ecosystem/drivers/csharp/#compatibility).

            [Driver version 2.7.x](http://docs.mongodb.com/ecosystem/drivers/csharp/#compatibility): The .NET agent will support pre-existing API methods, but not new methods introduced in 2.7.x.
          </td>
        </tr>

        <tr>
          <td>
            MySQL
          </td>

          <td className="fcenter">
            <Icon
              style={{color: '#328787'}}
              name="fe-check"
            />
          </td>

          <td>
            Use MySql.Data version 6.10.4 or later, or use the [MySQL Connector](https://github.com/mysql-net/MySqlConnector)
          </td>
        </tr>

        <tr>
          <td>
            StackExchange.Redis
          </td>

          <td className="fcenter">
            <Icon
              style={{color: '#328787'}}
              name="fe-check"
            />
          </td>

          <td/>
        </tr>
      </tbody>
    </table>

    The .NET agent does not directly monitor datastore processes. Also, the .NET SQL parameter capture in a query trace does not list parameters for a parameterized query or a stored procedure.

    Collecting [instance details](/docs/apm/applications-menu/features/analyze-database-instance-level-performance-issues) for supported datastores is enabled by default. To request instance-level information from datastores not currently listed, get support at [support.newrelic.com](https://support.newrelic.com).
  </Collapser>

  <Collapser
    className="freq-link"
    id="additional-frameworks"
    title="External call libraries"
  >
    The .NET agent automatically instruments these external call libraries :

    <table>
      <thead>
        <tr>
          <th style={{ width: "200px" }}>
            Libraries
          </th>

          <th>
            **Supported methods**
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            HttpClient
          </td>

          <td>
            The agent instruments these HttpClient methods:

            * `SendAsync`
            * `GetAsync`
            * `PostAsync`
            * `PutAsync`
            * `DeleteAsync`
            * `GetStringAsync`
            * `GetStreamAsync`
            * `GetByteArrayAsync`
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    className="freq-link"
    id="messaging"
    title="Messaging"
  >
    The agent automatically instruments these message systems:

    * RabbitMQ 5.1.0 or higher: Puts and takes on messages and queue purge. When receiving messages using an `IBasicConsumer`, the `EventingBasicConsumer` is the only implementation that is instrumented by the .NET agent. `BasicGet` is instrumented, but the agent does not support [distributed tracing](/docs/apm/distributed-tracing/getting-started/introduction-distributed-tracing) for `BasicGet`.
  </Collapser>
</CollapserGroup>

## Unavailable features

The following features are not available for the .NET agent:

* [Memory usage](/docs/apm/applications-menu/monitoring/apm-overview-page#infra-server) on Linux due to [an ongoing .NET Core issue](https://github.com/dotnet/corefx/issues/23449) (try using [.NET performance metrics](/docs/agents/net-agent/other-features/net-performance-metrics) to get this information)
* Automatic brower monitoring script injection ([API](/docs/agents/net-agent/net-agent-api/get-browser-timing-header) or [manual instrumentation](/docs/agents/net-agent/additional-installation/new-relic-browser-net-agent#manual_instrumentation) is required)
* The .NET agent does not support [trim self-contained deployments and executables](https://docs.microsoft.com/en-us/dotnet/core/deploying/trim-self-contained), because the compiler can potentially trim assemblies that the agent depends on.
* [Infinite Tracing](https://newrelic.com/products/edge-infinite-tracing) is not supported on Alpine Linux due to a [GRPC compatibility issue](https://github.com/grpc/grpc/issues/21446).  See [this agent issue](https://github.com/newrelic/newrelic-dotnet-agent/issues/289) for more information.

## Connect the agent to other New Relic products [#digital-intelligence-platform]

In addition to [APM](/docs/apm/new-relic-apm/getting-started/introduction-new-relic-apm), the .NET agent integrates with other New Relic products to give you end-to-end visibility:

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        Product
      </th>

      <th>
        Integration
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        [Browser monitoring](/docs/browser/new-relic-browser/getting-started/introduction-new-relic-browser)
      </td>

      <td>
        The browser monitoring JavaScript agent will not be injected by the .NET agent for **ASP.NET core** applications. However, you can inject the browser agent by using the [.NET agent API](/docs/agents/net-agent/net-agent-api/get-browser-timing-header) or the [browser agent's copy/paste method](/docs/browser/new-relic-browser/installation/install-new-relic-browser-agent#copy-paste-app).

        After enabling browser injection, you can view browser data in the [APM Summary page](/docs/apm/applications-menu/monitoring/apm-overview-page) and quickly switch between the APM and browser data for a particular app. For configuration options and manual instrumentation, see [browser monitoring and the .NET agent](/docs/agents/net-agent/instrumentation-features/new-relic-browser-net-agent).
      </td>
    </tr>

    <tr>
      <td>
        [Infrastructure monitoring](/docs/infrastructure/new-relic-infrastructure/getting-started/introduction-new-relic-infrastructure)
      </td>

      <td>
        When you install the Infrastructure and APM agents on the same host, they automatically detect one another. You can then view a list of hosts in the APM UI, and filter your Infrastructure hosts by APM app in the Infrastructure UI. For more information, see [APM data in Infrastructure](/docs/infrastructure/new-relic-infrastructure/data-instrumentation/new-relic-apm-data-infrastructure).
      </td>
    </tr>

    <tr>
      <td>
        [Dashboards](/docs/query-your-data/explore-query-data/dashboards/introduction-new-relic-one-dashboards)
      </td>

      <td>
        The .NET agent sends [default events and attributes](/docs/insights/insights-data-sources/default-events-attributes/apm-default-event-attributes) for [NRQL queries](/docs/query-your-data/explore-query-data/query-builder/use-advanced-nrql-mode-specify-data). You can also [record custom events](/docs/insights/insights-data-sources/custom-data/insert-custom-events-new-relic-apm-agents) for advanced analysis.
      </td>
    </tr>
  </tbody>
</table>
