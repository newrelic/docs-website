---
title: Mongo instrumentation
tags:
  - Agents
  - Ruby agent
  - Instrumented gems
metaDescription: New Relic Ruby agent support for MongoDB
redirects:
  - /docs/ruby/mongo
---

The Ruby agent has built-in instrumentation for MongoDB queries made via the [`mongo`](https://rubygems.org/gems/mongo "Link opens in a new window") gem.

## Contents [#qiklinks]

## Supported gems [#supported_gems]

This summarizes the Ruby agent's support for gems by version.

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        **Gem version**
      </th>

      <th>
        **Comments**
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `mongo` 1.8 and 1.9
      </td>

      <td>
        Supported by New Relic's Ruby agent 3.7.1 or higher
      </td>
    </tr>

    <tr>
      <td>
        `mongo` 2.0
      </td>

      <td>
        Not supported
      </td>
    </tr>

    <tr>
      <td>
        `mongo` 2.1 or higher
      </td>

      <td>
        Requires New Relic's Ruby agent 3.13.1 or higher
      </td>
    </tr>

    <tr>
      <td>
        Other gems
      </td>

      <td>
        Support for Mongoid 2/3/4 and Moped currently is available only via third-party gems. For links to the relevant projects, see the [plugin list](https://github.com/newrelic/rpm_contrib#new-relic-ruby-agent-plugins-seperate-projects) on `rpm_contrib`.
      </td>
    </tr>
  </tbody>
</table>

## Third-party and rpm_contrib instrumentation [#third_party_instrumentation]

The `rpm_contrib` and `newrelic_mongo` gems both provided basic instrumentation for `mongo`. New Relic does not recommend running Mongo instrumentation via these gems alongside the Ruby agent's built-in Mongo support. This might double-count metrics such as overall database time.

Also, the `rpm_contrib` and `newrelic_mongo` gems both use a distinct setting that can be used to disable them if removing those gems entirely isn't possible in your environment. For those third party gems, set `disable_mongodb: false` in your **newrelic.yml**.

## Disabling instrumentation [#Disabling_instrumentation]

To disable Mongo instrumentation in the agent, add the following to your **newrelic.yml**:

```
disable_mongo: true
```

## For more help [#more_help]

Additional documentation resources include:

* [New Relic for Ruby](/docs/agents/ruby-agent/getting-started/new-relic-ruby) (compatibility and requirements, general information about installation, configuration, troubleshooting, and known issues)
* [Ruby agent installation](/docs/agents/ruby-agent/installation-configuration/ruby-agent-installation) (using the New Relic Ruby gem and configuration file)
