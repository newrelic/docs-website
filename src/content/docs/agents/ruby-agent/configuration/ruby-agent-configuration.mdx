---
title: Ruby agent configuration
contentType: page
template: basicDoc
topics:
  - Agents
  - Ruby agent
  - Configuration
japaneseVersion: ''
---

You can configure the New Relic Ruby agent with settings in a configuration file, environment variables, or programmatically with server-side configuration. This document summarizes the configuration options available for the Ruby agent.

If the default value for a configuration option is `(Dynamic)`, this means the Ruby agent calculates the default at runtime. The value for the config setting defaults to the value of another setting as appropriate.

## Configuration methods and precedence

The primary (default) method to configure the Ruby agent is via the configuration file (`newrelic.yml`) in the `config` subdirectory. To set configuration values using environment variables:

1. Add the prefix `NEW_RELIC_` to the setting's name.
2. Replace any periods `.` with underscores `_`.

You can also configure a few values in the UI via [server-side configuration](/docs/agents/manage-apm-agents/configuration/server-side-agent-configuration).

The Ruby agent follows this order of precedence for configuration:

1. Environment variables
2. Server-side configuration
3. Configuration file (`newrelic.yml`)
4. Default configuration settings

In other words, environment variables override all other configuration settings and info, server-side configuration overrides the configuration file and default config settings, and so on.

## View and edit config file options

The Ruby agent's `newrelic.yml` is a standard YAML configuration file. It typically includes a `Defaults` section at the top, plus sections below for each application environment; for example, `Development`, `Testing`, and `Production`.

The Ruby agent determines which section of the `newrelic.yml` config file to read from by looking at certain environment variables to derive the application's environment. This can be useful, for example, when you want to use `info` for the `log_level` config setting in your production environment, and you want more verbose `log_level` config settings (such as `debug` in your development environment.

Here is an example `newrelic.yml` config file:

```
common: &default_settings
  license_key: 'YOUR_LICENSE_KEY'
  app_name: 'My Application Name'
production:
  <<: *default_settings
  log_level: info
development: 
  <<: *default_settings
  log_level: debug
```

For non-Rails apps, the Ruby agent looks for the following environment variables, in this order, to determine the application environment:

1. `NEW_RELIC_ENV`
2. `RUBY_ENV`
3. `RAILS_ENV`
4. `APP_ENV`
5. `RACK_ENV`

If the Ruby agent does not detect values for any of those environment variables, it will default the application environment to `development` and read from the `development` section of the `newrelic.yml` config file.

When running the Ruby agent in a Rails app, the agent first looks for the `NEW_RELIC_ENV` environment variable to determine the application environment and which section of the `newrelic.yml` to use. If `NEW_RELIC_ENV` is not present, the agent uses the Rails environment (`RAILS_ENV` or `RAILS.env`, depending on the version of Rails) .

When you edit the config file, be sure to:

* Indent only with two spaces.
* Indent only where relevant, in stanzas such as **error_collector**.

If you do not indent correctly, the agent may throw an `Unable to parse configuration file` error on startup.

To view the most current list of available Ruby agent configuration options, use the `rake newrelic:config:docs` command. This document describes the most common options.

## Update the config file

This documentation applies to the Ruby agent's latest release. For details on earlier versions, refer to the comments in `newrelic.yml` itself.

To update `newrelic.yml` file after a new release, use the template in the base directory of the agent gem. When you update to new gem versions, examine or diff `config/newrelic.yml` and `newrelic.yml` in the [installation directory](/docs/agents/manage-apm-agents/troubleshooting/find-agent-root-directory#ruby-agent) to take advantage of new configuration options.

<Callout variant="important">
  Updating the gem does not automatically update `config/newrelic.yml`.
</Callout>

## General

These settings are available for agent configuration. Some settings depend on your New Relic subscription level.

<CollapserGroup>
  <Collapser
    id="license_key"
    title="license"
    title="_"
    title="key"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            String
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `""`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_LICENSE_KEY`
          </td>
        </tr>
      </tbody>
    </Table>

    Your New Relic [license key](https://docs.newrelic.com/docs/accounts-partnerships/accounts/account-setup/license-key).
  </Collapser>

  <Collapser
    id="agent_enabled"
    title="agent"
    title="_"
    title="enabled"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            (Dynamic)
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_AGENT_ENABLED`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, allows the Ruby agent to run.
  </Collapser>

  <Collapser
    id="app_name"
    title="app"
    title="_"
    title="name"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            String
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            (Dynamic)
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_APP_NAME`
          </td>
        </tr>
      </tbody>
    </Table>

    Specify the [application name](https://docs.newrelic.com/docs/apm/new-relic-apm/installation-configuration/name-your-application) used to aggregate data in the New Relic UI. To report data to [multiple apps at the same time](https://docs.newrelic.com/docs/apm/new-relic-apm/installation-configuration/using-multiple-names-app), specify a list of names separated by a semicolon `;`. For example, `MyApp` or `MyStagingApp;Instance1`.
  </Collapser>

  <Collapser
    id="entity_guid"
    title="entity"
    title="_"
    title="guid"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            String
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `nil`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_ENTITY_GUID`
          </td>
        </tr>
      </tbody>
    </Table>

    The [Entity GUID](https://docs.newrelic.com/attribute-dictionary/span/entityguid) for the entity running this agent.
  </Collapser>

  <Collapser
    id="monitor_mode"
    title="monitor"
    title="_"
    title="mode"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            (Dynamic)
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_MONITOR_MODE`
          </td>
        </tr>
      </tbody>
    </Table>

    When `true`, the agent transmits data about your app to the New Relic [collector](https://docs.newrelic.com/docs/apm/new-relic-apm/getting-started/glossary#collector).
  </Collapser>

  <Collapser
    id="log_level"
    title="log"
    title="_"
    title="level"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            String
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `"info"`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_LOG_LEVEL`
          </td>
        </tr>
      </tbody>
    </Table>

    Sets the level of detail of log messages. Possible log levels, in increasing verbosity, are: `error`, `warn`, `info` or `debug`.
  </Collapser>

  <Collapser
    id="high_security"
    title="high"
    title="_"
    title="security"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_HIGH_SECURITY`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, enables [high security mode](https://docs.newrelic.com/docs/accounts-partnerships/accounts/security/high-security). Ensure you understand the implications of high security mode before enabling this setting.
  </Collapser>

  <Collapser
    id="security_policies_token"
    title="security"
    title="_"
    title="policies"
    title="_"
    title="token"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            String
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `""`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_SECURITY_POLICIES_TOKEN`
          </td>
        </tr>
      </tbody>
    </Table>

    Applies Language Agent Security Policy settings.
  </Collapser>

  <Collapser
    id="proxy_host"
    title="proxy"
    title="_"
    title="host"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            String
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `nil`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_PROXY_HOST`
          </td>
        </tr>
      </tbody>
    </Table>

    Defines a host for communicating with the New Relic [collector](https://docs.newrelic.com/docs/apm/new-relic-apm/getting-started/glossary#collector) via a proxy server.
  </Collapser>

  <Collapser
    id="proxy_port"
    title="proxy"
    title="_"
    title="port"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Integer
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `8080`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_PROXY_PORT`
          </td>
        </tr>
      </tbody>
    </Table>

    Defines a port for communicating with the New Relic [collector](https://docs.newrelic.com/docs/apm/new-relic-apm/getting-started/glossary#collector) via a proxy server.
  </Collapser>

  <Collapser
    id="proxy_user"
    title="proxy"
    title="_"
    title="user"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            String
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `nil`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_PROXY_USER`
          </td>
        </tr>
      </tbody>
    </Table>

    Defines a user for communicating with the New Relic [collector](https://docs.newrelic.com/docs/apm/new-relic-apm/getting-started/glossary#collector) via a proxy server.
  </Collapser>

  <Collapser
    id="proxy_pass"
    title="proxy"
    title="_"
    title="pass"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            String
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `nil`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_PROXY_PASS`
          </td>
        </tr>
      </tbody>
    </Table>

    Defines a password for communicating with the New Relic [collector](https://docs.newrelic.com/docs/apm/new-relic-apm/getting-started/glossary#collector) via a proxy server.
  </Collapser>

  <Collapser
    id="capture_params"
    title="capture"
    title="_"
    title="params"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_CAPTURE_PARAMS`
          </td>
        </tr>
      </tbody>
    </Table>

    When `true`, the agent captures HTTP request parameters and attaches them to transaction traces, traced errors, and [`TransactionError` events.](https://docs.newrelic.com/attribute-dictionary?attribute_name=&events_tids%5B%5D=8241)

    When using the `capture_params` setting, the Ruby agent will not filter sensitive information. **Recommendation:** To filter sensitive information from request parameters, use the [`attributes.include` setting](/docs/agents/ruby-agent/attributes/enable-disable-attributes-ruby) instead. For details, see the [Ruby attribute examples](/docs/agents/ruby-agent/attributes/ruby-attribute-examples#ex_req_params).
  </Collapser>

  <Collapser
    id="config_path"
    title="config"
    title="_"
    title="path"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            String
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            (Dynamic)
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_CONFIG_PATH`
          </td>
        </tr>
      </tbody>
    </Table>

    Path to **newrelic.yml**. If undefined, the agent checks the following directories (in order): **config/newrelic.yml**, **newrelic.yml**, **$HOME/.newrelic/newrelic.yml** and **$HOME/newrelic.yml**.
  </Collapser>

  <Collapser
    id="apdex_t"
    title="apdex"
    title="_"
    title="t"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Float
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `0.5`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_APDEX_T`
          </td>
        </tr>
      </tbody>
    </Table>

    **DEPRECATED** Deprecated. For agent versions 3.5.0 or higher, [set your Apdex T via the New Relic UI](https://docs.newrelic.com/docs/apm/new-relic-apm/apdex/changing-your-apdex-settings).
  </Collapser>

  <Collapser
    id="sync_startup"
    title="sync"
    title="_"
    title="startup"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_SYNC_STARTUP`
          </td>
        </tr>
      </tbody>
    </Table>

    When set to `true`, forces a synchronous connection to the New Relic [collector](https://docs.newrelic.com/docs/apm/new-relic-apm/getting-started/glossary#collector) during application startup. For very short-lived processes, this helps ensure the New Relic agent has time to report.
  </Collapser>

  <Collapser
    id="send_data_on_exit"
    title="send"
    title="_"
    title="data"
    title="_"
    title="on"
    title="_"
    title="exit"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_SEND_DATA_ON_EXIT`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, enables the exit handler that sends data to the New Relic [collector](https://docs.newrelic.com/docs/apm/new-relic-apm/getting-started/glossary#collector) before shutting down.
  </Collapser>

  <Collapser
    id="timeout"
    title="timeout"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Integer
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `120`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_TIMEOUT`
          </td>
        </tr>
      </tbody>
    </Table>

    Defines the maximum number of seconds the agent should spend attempting to connect to the collector.
  </Collapser>

  <Collapser
    id="log_file_name"
    title="log"
    title="_"
    title="file"
    title="_"
    title="name"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            String
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `"newrelic_agent.log"`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_LOG_FILE_NAME`
          </td>
        </tr>
      </tbody>
    </Table>

    Defines a name for the log file.
  </Collapser>

  <Collapser
    id="log_file_path"
    title="log"
    title="_"
    title="file"
    title="_"
    title="path"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            String
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `"log/"`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_LOG_FILE_PATH`
          </td>
        </tr>
      </tbody>
    </Table>

    Defines a path to the agent log file, excluding the filename.
  </Collapser>

  <Collapser
    id="prepend_active_record_instrumentation"
    title="prepend"
    title="_"
    title="active"
    title="_"
    title="record"
    title="_"
    title="instrumentation"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_PREPEND_ACTIVE_RECORD_INSTRUMENTATION`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, uses Module.prepend rather than alias_method for ActiveRecord instrumentation.
  </Collapser>

  <Collapser
    id="capture_memcache_keys"
    title="capture"
    title="_"
    title="memcache"
    title="_"
    title="keys"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_CAPTURE_MEMCACHE_KEYS`
          </td>
        </tr>
      </tbody>
    </Table>

    Enable or disable the capture of memcache keys from transaction traces.
  </Collapser>

  <Collapser
    id="message_tracer-segment_parameters-enabled"
    title="message"
    title="_"
    title="tracer.segment"
    title="_"
    title="parameters.enabled"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_MESSAGE_TRACER_SEGMENT_PARAMETERS_ENABLED`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, the agent will collect metadata about messages and attach them as segment parameters.
  </Collapser>

  <Collapser
    id="marshaller"
    title="marshaller"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            String
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `"json"`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_MARSHALLER`
          </td>
        </tr>
      </tbody>
    </Table>

    Specifies a marshaller for transmitting data to the New Relic [collector](https://docs.newrelic.com/docs/apm/new-relic-apm/getting-started/glossary#collector). Currently `json` is the only valid value for this setting.
  </Collapser>

  <Collapser
    id="backport_fast_active_record_connection_lookup"
    title="backport"
    title="_"
    title="fast"
    title="_"
    title="active"
    title="_"
    title="record"
    title="_"
    title="connection"
    title="_"
    title="lookup"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_BACKPORT_FAST_ACTIVE_RECORD_CONNECTION_LOOKUP`
          </td>
        </tr>
      </tbody>
    </Table>

    Backports the faster ActiveRecord connection lookup introduced in Rails 6, which improves agent performance when instrumenting ActiveRecord. Note that this setting may not be compatible with other gems that patch ActiveRecord.
  </Collapser>

  <Collapser
    id="labels"
    title="labels"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            String
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `""`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_LABELS`
          </td>
        </tr>
      </tbody>
    </Table>

    A dictionary of [label names](/docs/data-analysis/user-interface-functions/labels-categories-organize-your-apps-servers) and values that will be applied to the data sent from this agent. May also be expressed as a semicolon-delimited `;` string of colon-separated `:` pairs. For example, `Server:One;Data Center:Primary`.
  </Collapser>

  <Collapser
    id="ca_bundle_path"
    title="ca"
    title="_"
    title="bundle"
    title="_"
    title="path"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            String
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `nil`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_CA_BUNDLE_PATH`
          </td>
        </tr>
      </tbody>
    </Table>

    Manual override for the path to your local CA bundle. This CA bundle will be used to validate the SSL certificate presented by New Relic's data collection service.
  </Collapser>

  <Collapser
    id="datastore_tracer-instance_reporting-enabled"
    title="datastore"
    title="_"
    title="tracer.instance"
    title="_"
    title="reporting.enabled"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DATASTORE_TRACER_INSTANCE_REPORTING_ENABLED`
          </td>
        </tr>
      </tbody>
    </Table>

    If `false`, the agent will not report datastore instance metrics, nor add `host` or `port_path_or_id` parameters to transaction or slow sql traces.
  </Collapser>

  <Collapser
    id="datastore_tracer-database_name_reporting-enabled"
    title="datastore"
    title="_"
    title="tracer.database"
    title="_"
    title="name"
    title="_"
    title="reporting.enabled"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DATASTORE_TRACER_DATABASE_NAME_REPORTING_ENABLED`
          </td>
        </tr>
      </tbody>
    </Table>

    If `false`, the agent will not add `database_name` parameter to transaction or slow sql traces.
  </Collapser>

  <Collapser
    id="clear_transaction_state_after_fork"
    title="clear"
    title="_"
    title="transaction"
    title="_"
    title="state"
    title="_"
    title="after"
    title="_"
    title="fork"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_CLEAR_TRANSACTION_STATE_AFTER_FORK`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, the agent will clear `Tracer::State` in `Agent.drop_buffered_data`.
  </Collapser>

  <Collapser
    id="infinite_tracing-trace_observer-host"
    title="infinite"
    title="_"
    title="tracing.trace"
    title="_"
    title="observer.host"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            String
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `""`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_INFINITE_TRACING_TRACE_OBSERVER_HOST`
          </td>
        </tr>
      </tbody>
    </Table>

    Configures the hostname for the Trace Observer Host. When configured, enables tail-based sampling by sending all recorded spans to a Trace Observer for further sampling decisions, irrespective of any usual agent sampling decision.
  </Collapser>

  <Collapser
    id="infinite_tracing-trace_observer-port"
    title="infinite"
    title="_"
    title="tracing.trace"
    title="_"
    title="observer.port"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Integer
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `443`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_INFINITE_TRACING_TRACE_OBSERVER_PORT`
          </td>
        </tr>
      </tbody>
    </Table>

    Configures the TCP/IP port for the Trace Observer Host
  </Collapser>
</CollapserGroup>

## Transaction Tracer

The [transaction traces](/docs/apm/traces/transaction-traces/transaction-traces) feature collects detailed information from a selection of transactions, including a summary of the calling sequence, a breakdown of time spent, and a list of SQL queries and their query plans (on mysql and postgresql). Available features depend on your New Relic subscription level.

<CollapserGroup>
  <Collapser
    id="transaction_tracer-enabled"
    title="transaction"
    title="_"
    title="tracer.enabled"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_TRACER_ENABLED`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, enables collection of [transaction traces](https://docs.newrelic.com/docs/apm/traces/transaction-traces/transaction-traces).
  </Collapser>

  <Collapser
    id="transaction_tracer-transaction_threshold"
    title="transaction"
    title="_"
    title="tracer.transaction"
    title="_"
    title="threshold"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Float
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            (Dynamic)
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_TRACER_TRANSACTION_THRESHOLD`
          </td>
        </tr>
      </tbody>
    </Table>

    Specify a threshold in seconds. Transactions with a duration longer than this threshold are eligible for transaction traces. Specify a float value or the string `apdex_f`.
  </Collapser>

  <Collapser
    id="transaction_tracer-record_sql"
    title="transaction"
    title="_"
    title="tracer.record"
    title="_"
    title="sql"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            String
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `"obfuscated"`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_TRACER_RECORD_SQL`
          </td>
        </tr>
      </tbody>
    </Table>

    Obfuscation level for SQL queries reported in transaction trace nodes.

    By default, this is set to `obfuscated`, which strips out the numeric and string literals.

    * If you do not want the agent to capture query information, set this to `none`.
    * If you want the agent to capture all query information in its original form, set this to `raw`.
    * When you enable [high security mode](/docs/agents/manage-apm-agents/configuration/high-security-mode), this is automatically set to `obfuscated`.
  </Collapser>

  <Collapser
    id="transaction_tracer-record_redis_arguments"
    title="transaction"
    title="_"
    title="tracer.record"
    title="_"
    title="redis"
    title="_"
    title="arguments"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_TRACER_RECORD_REDIS_ARGUMENTS`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, the agent records Redis command arguments in transaction traces.
  </Collapser>

  <Collapser
    id="transaction_tracer-capture_attributes"
    title="transaction"
    title="_"
    title="tracer.capture"
    title="_"
    title="attributes"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_TRACER_CAPTURE_ATTRIBUTES`
          </td>
        </tr>
      </tbody>
    </Table>

    **DEPRECATED** Deprecated; use [`transaction_tracer.attributes.enabled`](#transaction_tracer-attributes-enabled) instead.
  </Collapser>

  <Collapser
    id="transaction_tracer-explain_threshold"
    title="transaction"
    title="_"
    title="tracer.explain"
    title="_"
    title="threshold"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Float
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `0.5`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_TRACER_EXPLAIN_THRESHOLD`
          </td>
        </tr>
      </tbody>
    </Table>

    Threshold (in seconds) above which the agent will collect explain plans. Relevant only when `explain_enabled` is true.
  </Collapser>

  <Collapser
    id="transaction_tracer-explain_enabled"
    title="transaction"
    title="_"
    title="tracer.explain"
    title="_"
    title="enabled"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_TRACER_EXPLAIN_ENABLED`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, enables the collection of explain plans in transaction traces. This setting will also apply to explain plans in slow SQL traces if [`slow_sql.explain_enabled`](#slow_sql-explain_enabled) is not set separately.
  </Collapser>

  <Collapser
    id="transaction_tracer-stack_trace_threshold"
    title="transaction"
    title="_"
    title="tracer.stack"
    title="_"
    title="trace"
    title="_"
    title="threshold"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Float
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `0.5`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_TRACER_STACK_TRACE_THRESHOLD`
          </td>
        </tr>
      </tbody>
    </Table>

    Specify a threshold in seconds. The agent includes stack traces in transaction trace nodes when the stack trace duration exceeds this threshold.
  </Collapser>

  <Collapser
    id="transaction_tracer-limit_segments"
    title="transaction"
    title="_"
    title="tracer.limit"
    title="_"
    title="segments"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Integer
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `4000`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_TRACER_LIMIT_SEGMENTS`
          </td>
        </tr>
      </tbody>
    </Table>

    Maximum number of transaction trace nodes to record in a single transaction trace.
  </Collapser>
</CollapserGroup>

## Error Collector

The agent collects and reports all uncaught exceptions by default. These configuration options allow you to customize the error collection.

<CollapserGroup>
  <Collapser
    id="error_collector-enabled"
    title="error"
    title="_"
    title="collector.enabled"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_ERROR_COLLECTOR_ENABLED`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, the agent captures traced errors and error count metrics.
  </Collapser>

  <Collapser
    id="error_collector-capture_attributes"
    title="error"
    title="_"
    title="collector.capture"
    title="_"
    title="attributes"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_ERROR_COLLECTOR_CAPTURE_ATTRIBUTES`
          </td>
        </tr>
      </tbody>
    </Table>

    **DEPRECATED** Deprecated; use [`error_collector.attributes.enabled`](#error_collector-attributes-enabled) instead.
  </Collapser>

  <Collapser
    id="error_collector-ignore_errors"
    title="error"
    title="_"
    title="collector.ignore"
    title="_"
    title="errors"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            String
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `"ActionController::RoutingError,Sinatra::NotFound"`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_ERROR_COLLECTOR_IGNORE_ERRORS`
          </td>
        </tr>
      </tbody>
    </Table>

    Specify a comma-delimited list of error classes that the agent should ignore.
  </Collapser>

  <Collapser
    id="error_collector-max_backtrace_frames"
    title="error"
    title="_"
    title="collector.max"
    title="_"
    title="backtrace"
    title="_"
    title="frames"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Integer
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `50`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_ERROR_COLLECTOR_MAX_BACKTRACE_FRAMES`
          </td>
        </tr>
      </tbody>
    </Table>

    Defines the maximum number of frames in an error backtrace. Backtraces over this amount are truncated at the beginning and end.
  </Collapser>

  <Collapser
    id="error_collector-capture_events"
    title="error"
    title="_"
    title="collector.capture"
    title="_"
    title="events"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            (Dynamic)
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_ERROR_COLLECTOR_CAPTURE_EVENTS`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, the agent collects [TransactionError events](https://docs.newrelic.com/docs/insights/new-relic-insights/decorating-events/error-event-default-attributes-insights).
  </Collapser>

  <Collapser
    id="error_collector-max_event_samples_stored"
    title="error"
    title="_"
    title="collector.max"
    title="_"
    title="event"
    title="_"
    title="samples"
    title="_"
    title="stored"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Integer
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `100`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_ERROR_COLLECTOR_MAX_EVENT_SAMPLES_STORED`
          </td>
        </tr>
      </tbody>
    </Table>

    Defines the maximum number of [TransactionError events](https://docs.newrelic.com/docs/insights/new-relic-insights/decorating-events/error-event-default-attributes-insights) sent to New Relic per harvest cycle.
  </Collapser>
</CollapserGroup>

## Browser Monitoring

The Browser monitoring [page load timing](/docs/browser/new-relic-browser/page-load-timing/page-load-timing-process) feature (sometimes referred to as real user monitoring or RUM) gives you insight into the performance real users are experiencing with your website. This is accomplished by measuring the time it takes for your users' browsers to download and render your web pages by injecting a small amount of JavaScript code into the header and footer of each page.

<CollapserGroup>
  <Collapser
    id="browser_monitoring-auto_instrument"
    title="browser"
    title="_"
    title="monitoring.auto"
    title="_"
    title="instrument"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            (Dynamic)
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_BROWSER_MONITORING_AUTO_INSTRUMENT`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, enables [auto-injection](https://docs.newrelic.com/docs/browser/new-relic-browser/installation-configuration/adding-apps-new-relic-browser#select-apm-app) of the JavaScript header for page load timing (sometimes referred to as real user monitoring or RUM).
  </Collapser>

  <Collapser
    id="browser_monitoring-capture_attributes"
    title="browser"
    title="_"
    title="monitoring.capture"
    title="_"
    title="attributes"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_BROWSER_MONITORING_CAPTURE_ATTRIBUTES`
          </td>
        </tr>
      </tbody>
    </Table>

    **DEPRECATED** Deprecated; use [`browser_monitoring.attributes.enabled`](#browser_monitoring-attributes-enabled) instead.
  </Collapser>
</CollapserGroup>

## Analytics Events

[New Relic dashboards](/docs/query-your-data/explore-query-data/dashboards/introduction-new-relic-one-dashboards) is a resource to gather and visualize data about your software and what it says about your business. With it you can quickly and easily create real-time dashboards to get immediate answers about end-user experiences, clickstreams, mobile activities, and server transactions.

<CollapserGroup>
  <Collapser
    id="analytics_events-enabled"
    title="analytics"
    title="_"
    title="events.enabled"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_ANALYTICS_EVENTS_ENABLED`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, enables analytics event sampling.
  </Collapser>

  <Collapser
    id="analytics_events-max_samples_stored"
    title="analytics"
    title="_"
    title="events.max"
    title="_"
    title="samples"
    title="_"
    title="stored"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Integer
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `1200`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_ANALYTICS_EVENTS_MAX_SAMPLES_STORED`
          </td>
        </tr>
      </tbody>
    </Table>

    Defines the maximum number of request events reported from a single harvest.
  </Collapser>

  <Collapser
    id="analytics_events-capture_attributes"
    title="analytics"
    title="_"
    title="events.capture"
    title="_"
    title="attributes"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_ANALYTICS_EVENTS_CAPTURE_ATTRIBUTES`
          </td>
        </tr>
      </tbody>
    </Table>

    **DEPRECATED** Deprecated; use [`transaction_events.attributes.enabled`](#transaction_events-attributes-enabled) instead.
  </Collapser>
</CollapserGroup>

## Attributes

[Attributes](https://docs.newrelic.com/docs/features/agent-attributes) are key-value pairs containing information that determines the properties of an event or transaction. These key-value pairs can be viewed within transaction traces in APM, traced errors in APM, transaction events in dashboards, and page views in dashboards. You can customize exactly which attributes will be sent to each of these destinations.

<CollapserGroup>
  <Collapser
    id="attributes-enabled"
    title="attributes.enabled"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, enables capture of attributes for all destinations.
  </Collapser>

  <Collapser
    id="transaction_tracer-attributes-enabled"
    title="transaction"
    title="_"
    title="tracer.attributes.enabled"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            (Dynamic)
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_TRACER_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, the agent captures attributes from transaction traces.
  </Collapser>

  <Collapser
    id="transaction_events-attributes-enabled"
    title="transaction"
    title="_"
    title="events.attributes.enabled"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            (Dynamic)
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_EVENTS_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, the agent captures attributes from transaction events.

    <Callout variant="caution">
      When Distributed Tracing and/or Infinite Tracing are enabled, information from Transaction Events is applied to the root Span Event of the transaction. Consider applying any attribute settings for Transaction Events to Span Events and/or apply them as Global Attribute settings.
    </Callout>
  </Collapser>

  <Collapser
    id="error_collector-attributes-enabled"
    title="error"
    title="_"
    title="collector.attributes.enabled"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            (Dynamic)
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_ERROR_COLLECTOR_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, the agent captures attributes from error collection.
  </Collapser>

  <Collapser
    id="browser_monitoring-attributes-enabled"
    title="browser"
    title="_"
    title="monitoring.attributes.enabled"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            (Dynamic)
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_BROWSER_MONITORING_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, the agent captures attributes from browser monitoring.
  </Collapser>

  <Collapser
    id="span_events-attributes-enabled"
    title="span"
    title="_"
    title="events.attributes.enabled"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_SPAN_EVENTS_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, the agent captures attributes on span events.
  </Collapser>

  <Collapser
    id="transaction_segments-attributes-enabled"
    title="transaction"
    title="_"
    title="segments.attributes.enabled"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_SEGMENTS_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, the agent captures attributes on transaction segments.
  </Collapser>

  <Collapser
    id="attributes-exclude"
    title="attributes.exclude"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Array
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_ATTRIBUTES_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </Table>

    Prefix of attributes to exclude from all destinations. Allows `*` as wildcard at end.
  </Collapser>

  <Collapser
    id="transaction_tracer-attributes-exclude"
    title="transaction"
    title="_"
    title="tracer.attributes.exclude"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Array
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_TRACER_ATTRIBUTES_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </Table>

    Prefix of attributes to exclude from transaction traces. Allows `*` as wildcard at end.
  </Collapser>

  <Collapser
    id="transaction_events-attributes-exclude"
    title="transaction"
    title="_"
    title="events.attributes.exclude"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Array
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_EVENTS_ATTRIBUTES_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </Table>

    Prefix of attributes to exclude from transaction events. Allows `*` as wildcard at end.

    <Callout variant="caution">
      When Distributed Tracing and/or Infinite Tracing are enabled, information from Transaction Events is applied to the root Span Event of the transaction. Consider applying any attribute settings for Transaction Events to Span Events and/or apply them as Global Attribute settings.
    </Callout>
  </Collapser>

  <Collapser
    id="error_collector-attributes-exclude"
    title="error"
    title="_"
    title="collector.attributes.exclude"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Array
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_ERROR_COLLECTOR_ATTRIBUTES_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </Table>

    Prefix of attributes to exclude from error collection. Allows `*` as wildcard at end.
  </Collapser>

  <Collapser
    id="browser_monitoring-attributes-exclude"
    title="browser"
    title="_"
    title="monitoring.attributes.exclude"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Array
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_BROWSER_MONITORING_ATTRIBUTES_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </Table>

    Prefix of attributes to exclude from browser monitoring. Allows `*` as wildcard at end.
  </Collapser>

  <Collapser
    id="span_events-attributes-exclude"
    title="span"
    title="_"
    title="events.attributes.exclude"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Array
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_SPAN_EVENTS_ATTRIBUTES_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </Table>

    Prefix of attributes to exclude from span events. Allows `*` as wildcard at end.
  </Collapser>

  <Collapser
    id="transaction_segments-attributes-exclude"
    title="transaction"
    title="_"
    title="segments.attributes.exclude"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Array
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_SEGMENTS_ATTRIBUTES_EXCLUDE`
          </td>
        </tr>
      </tbody>
    </Table>

    Prefix of attributes to exclude from transaction segments. Allows `*` as wildcard at end.
  </Collapser>

  <Collapser
    id="attributes-include"
    title="attributes.include"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Array
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_ATTRIBUTES_INCLUDE`
          </td>
        </tr>
      </tbody>
    </Table>

    Prefix of attributes to include in all destinations. Allows `*` as wildcard at end.
  </Collapser>

  <Collapser
    id="transaction_tracer-attributes-include"
    title="transaction"
    title="_"
    title="tracer.attributes.include"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Array
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_TRACER_ATTRIBUTES_INCLUDE`
          </td>
        </tr>
      </tbody>
    </Table>

    Prefix of attributes to include in transaction traces. Allows `*` as wildcard at end.
  </Collapser>

  <Collapser
    id="transaction_events-attributes-include"
    title="transaction"
    title="_"
    title="events.attributes.include"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Array
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_EVENTS_ATTRIBUTES_INCLUDE`
          </td>
        </tr>
      </tbody>
    </Table>

    Prefix of attributes to include in transaction events. Allows `*` as wildcard at end.

    <Callout variant="caution">
      When Distributed Tracing and/or Infinite Tracing are enabled, information from Transaction Events is applied to the root Span Event of the transaction. Consider applying any attribute settings for Transaction Events to Span Events and/or apply them as Global Attribute settings.
    </Callout>
  </Collapser>

  <Collapser
    id="error_collector-attributes-include"
    title="error"
    title="_"
    title="collector.attributes.include"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Array
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_ERROR_COLLECTOR_ATTRIBUTES_INCLUDE`
          </td>
        </tr>
      </tbody>
    </Table>

    Prefix of attributes to include in error collection. Allows `*` as wildcard at end.
  </Collapser>

  <Collapser
    id="browser_monitoring-attributes-include"
    title="browser"
    title="_"
    title="monitoring.attributes.include"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Array
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_BROWSER_MONITORING_ATTRIBUTES_INCLUDE`
          </td>
        </tr>
      </tbody>
    </Table>

    Prefix of attributes to include in browser monitoring. Allows `*` as wildcard at end.
  </Collapser>

  <Collapser
    id="span_events-attributes-include"
    title="span"
    title="_"
    title="events.attributes.include"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Array
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_SPAN_EVENTS_ATTRIBUTES_INCLUDE`
          </td>
        </tr>
      </tbody>
    </Table>

    Prefix of attributes to include on span events. Allows `*` as wildcard at end.
  </Collapser>

  <Collapser
    id="transaction_segments-attributes-include"
    title="transaction"
    title="_"
    title="segments.attributes.include"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Array
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_TRANSACTION_SEGMENTS_ATTRIBUTES_INCLUDE`
          </td>
        </tr>
      </tbody>
    </Table>

    Prefix of attributes to include on transaction segments. Allows `*` as wildcard at end.
  </Collapser>
</CollapserGroup>

## Audit Log

<CollapserGroup>
  <Collapser
    id="audit_log-enabled"
    title="audit"
    title="_"
    title="log.enabled"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_AUDIT_LOG_ENABLED`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, enables an audit log which logs communications with the New Relic [collector](https://docs.newrelic.com/docs/apm/new-relic-apm/getting-started/glossary#collector).
  </Collapser>

  <Collapser
    id="audit_log-path"
    title="audit"
    title="_"
    title="log.path"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            String
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            (Dynamic)
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_AUDIT_LOG_PATH`
          </td>
        </tr>
      </tbody>
    </Table>

    Specifies a path to the audit log file (including the filename).
  </Collapser>

  <Collapser
    id="audit_log-endpoints"
    title="audit"
    title="_"
    title="log.endpoints"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Array
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `[".*"]`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_AUDIT_LOG_ENDPOINTS`
          </td>
        </tr>
      </tbody>
    </Table>

    List of allowed endpoints to include in audit log
  </Collapser>
</CollapserGroup>

## Autostart

<CollapserGroup>
  <Collapser
    id="autostart-blacklisted_constants"
    title="autostart.blacklisted"
    title="_"
    title="constants"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            String
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `"Rails::Console"`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_AUTOSTART_BLACKLISTED_CONSTANTS`
          </td>
        </tr>
      </tbody>
    </Table>

    Deprecated. For agent versions 6.8.0 or higher, use [`autostart.denylisted_constants`](#autostart-denylisted_constants) instead.
  </Collapser>

  <Collapser
    id="autostart-denylisted_constants"
    title="autostart.denylisted"
    title="_"
    title="constants"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            String
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `"Rails::Console"`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_AUTOSTART_DENYLISTED_CONSTANTS`
          </td>
        </tr>
      </tbody>
    </Table>

    Specify a list of constants that should prevent the agent from starting automatically. Separate individual constants with a comma `,`. For example, `Rails::Console,UninstrumentedBackgroundJob`.
  </Collapser>

  <Collapser
    id="autostart-blacklisted_executables"
    title="autostart.blacklisted"
    title="_"
    title="executables"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            String
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `"irb,rspec"`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_AUTOSTART_BLACKLISTED_EXECUTABLES`
          </td>
        </tr>
      </tbody>
    </Table>

    Deprecated. For agent versions 6.8.0 or higher, use [`autostart.denylisted_executables`](#autostart-denylisted_executables) instead.
  </Collapser>

  <Collapser
    id="autostart-denylisted_executables"
    title="autostart.denylisted"
    title="_"
    title="executables"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            String
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            (Dynamic)
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_AUTOSTART_DENYLISTED_EXECUTABLES`
          </td>
        </tr>
      </tbody>
    </Table>

    Defines a comma-delimited list of executables that the agent should not instrument. For example, `rake,my_ruby_script.rb`.
  </Collapser>

  <Collapser
    id="autostart-blacklisted_rake_tasks"
    title="autostart.blacklisted"
    title="_"
    title="rake"
    title="_"
    title="tasks"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            String
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `"about,assets:clean,assets:clobber,assets:environment,assets:precompile,assets:precompile:all,db:create,db:drop,db:fixtures:load,db:migrate,db:migrate:status,db:rollback,db:schema:cache:clear,db:schema:cache:dump,db:schema:dump,db:schema:load,db:seed,db:setup,db:structure:dump,db:version,doc:app,log:clear,middleware,notes,notes:custom,rails:template,rails:update,routes,secret,spec,spec:features,spec:requests,spec:controllers,spec:helpers,spec:models,spec:views,spec:routing,spec:rcov,stats,test,test:all,test:all:db,test:recent,test:single,test:uncommitted,time:zones:all,tmp:clear,tmp:create,webpacker:compile"`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_AUTOSTART_BLACKLISTED_RAKE_TASKS`
          </td>
        </tr>
      </tbody>
    </Table>

    Deprecated. For agent versions 6.8.0 or higher, use [`autostart.denylisted_rake_tasks`](#autostart-denylisted_rake_tasks) instead.
  </Collapser>

  <Collapser
    id="autostart-denylisted_rake_tasks"
    title="autostart.denylisted"
    title="_"
    title="rake"
    title="_"
    title="tasks"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            String
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            (Dynamic)
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_AUTOSTART_DENYLISTED_RAKE_TASKS`
          </td>
        </tr>
      </tbody>
    </Table>

    Defines a comma-delimited list of Rake tasks that the agent should not instrument. For example, `assets:precompile,db:migrate`.
  </Collapser>
</CollapserGroup>

## Cross Application Tracer

<CollapserGroup>
  <Collapser
    id="cross_application_tracer-enabled"
    title="cross"
    title="_"
    title="application"
    title="_"
    title="tracer.enabled"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            (Dynamic)
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_CROSS_APPLICATION_TRACER_ENABLED`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, enables [cross-application tracing](https://docs.newrelic.com/docs/apm/transactions/cross-application-traces/cross-application-tracing).
  </Collapser>
</CollapserGroup>

## Custom Attributes

<CollapserGroup>
  <Collapser
    id="custom_attributes-enabled"
    title="custom"
    title="_"
    title="attributes.enabled"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_CUSTOM_ATTRIBUTES_ENABLED`
          </td>
        </tr>
      </tbody>
    </Table>

    If `false`, custom attributes will not be sent on queried events.
  </Collapser>
</CollapserGroup>

## Custom Events

<CollapserGroup>
  <Collapser
    id="custom_insights_events-enabled"
    title="custom"
    title="_"
    title="insights"
    title="_"
    title="events.enabled"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_CUSTOM_INSIGHTS_EVENTS_ENABLED`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, the agent captures [New Relic custom events](/docs/insights/new-relic-insights/adding-querying-data/inserting-custom-events-new-relic-apm-agents).
  </Collapser>

  <Collapser
    id="custom_insights_events-max_samples_stored"
    title="custom"
    title="_"
    title="insights"
    title="_"
    title="events.max"
    title="_"
    title="samples"
    title="_"
    title="stored"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Integer
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `1000`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_CUSTOM_INSIGHTS_EVENTS_MAX_SAMPLES_STORED`
          </td>
        </tr>
      </tbody>
    </Table>

    Specify a maximum number of custom events to buffer in memory at a time.
  </Collapser>
</CollapserGroup>

## Disabling

Use these settings to toggle instrumentation types during agent startup.

<CollapserGroup>
  <Collapser
    id="disable_rake"
    title="disable"
    title="_"
    title="rake"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISABLE_RAKE`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, disables Rake instrumentation.
  </Collapser>

  <Collapser
    id="disable_samplers"
    title="disable"
    title="_"
    title="samplers"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISABLE_SAMPLERS`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, disables the collection of sampler metrics. Sampler metrics are metrics that are not event-based (such as CPU time or memory usage).
  </Collapser>

  <Collapser
    id="disable_resque"
    title="disable"
    title="_"
    title="resque"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISABLE_RESQUE`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, disables [Resque instrumentation](https://docs.newrelic.com/docs/agents/ruby-agent/background-jobs/resque-instrumentation).
  </Collapser>

  <Collapser
    id="disable_sidekiq"
    title="disable"
    title="_"
    title="sidekiq"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISABLE_SIDEKIQ`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, disables [Sidekiq instrumentation](https://docs.newrelic.com/docs/agents/ruby-agent/background-jobs/sidekiq-instrumentation).
  </Collapser>

  <Collapser
    id="disable_dj"
    title="disable"
    title="_"
    title="dj"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISABLE_DJ`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, disables [Delayed::Job instrumentation](https://docs.newrelic.com/docs/agents/ruby-agent/background-jobs/delayedjob).
  </Collapser>

  <Collapser
    id="disable_sinatra"
    title="disable"
    title="_"
    title="sinatra"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISABLE_SINATRA`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true` , disables [Sinatra instrumentation](https://docs.newrelic.com/docs/agents/ruby-agent/frameworks/sinatra-support).
  </Collapser>

  <Collapser
    id="disable_sinatra_auto_middleware"
    title="disable"
    title="_"
    title="sinatra"
    title="_"
    title="auto"
    title="_"
    title="middleware"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISABLE_SINATRA_AUTO_MIDDLEWARE`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, disables agent middleware for Sinatra. This middleware is responsible for advanced feature support such as [cross application tracing](https://docs.newrelic.com/docs/apm/transactions/cross-application-traces/cross-application-tracing), [page load timing](https://docs.newrelic.com/docs/browser/new-relic-browser/getting-started/new-relic-browser), and [error collection](https://docs.newrelic.com/docs/apm/applications-menu/events/view-apm-error-analytics).
  </Collapser>

  <Collapser
    id="disable_view_instrumentation"
    title="disable"
    title="_"
    title="view"
    title="_"
    title="instrumentation"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISABLE_VIEW_INSTRUMENTATION`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, disables view instrumentation.
  </Collapser>

  <Collapser
    id="disable_activerecord_instrumentation"
    title="disable"
    title="_"
    title="activerecord"
    title="_"
    title="instrumentation"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            (Dynamic)
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISABLE_ACTIVERECORD_INSTRUMENTATION`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, disables active record instrumentation.
  </Collapser>

  <Collapser
    id="disable_data_mapper"
    title="disable"
    title="_"
    title="data"
    title="_"
    title="mapper"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISABLE_DATA_MAPPER`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, disables DataMapper instrumentation.
  </Collapser>

  <Collapser
    id="disable_activejob"
    title="disable"
    title="_"
    title="activejob"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISABLE_ACTIVEJOB`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, disables ActiveJob instrumentation.
  </Collapser>

  <Collapser
    id="disable_action_cable_instrumentation"
    title="disable"
    title="_"
    title="action"
    title="_"
    title="cable"
    title="_"
    title="instrumentation"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISABLE_ACTION_CABLE_INSTRUMENTATION`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, disables Action Cable instrumentation.
  </Collapser>

  <Collapser
    id="disable_active_storage"
    title="disable"
    title="_"
    title="active"
    title="_"
    title="storage"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISABLE_ACTIVE_STORAGE`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, disables ActiveStorage instrumentation.
  </Collapser>

  <Collapser
    id="disable_memcached"
    title="disable"
    title="_"
    title="memcached"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            (Dynamic)
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISABLE_MEMCACHED`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, disables instrumentation for the memcached gem.
  </Collapser>

  <Collapser
    id="disable_memcache_client"
    title="disable"
    title="_"
    title="memcache"
    title="_"
    title="client"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            (Dynamic)
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISABLE_MEMCACHE_CLIENT`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, disables instrumentation for the memcache-client gem.
  </Collapser>

  <Collapser
    id="disable_dalli"
    title="disable"
    title="_"
    title="dalli"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            (Dynamic)
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISABLE_DALLI`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, disables instrumentation for the dalli gem.
  </Collapser>

  <Collapser
    id="disable_dalli_cas_client"
    title="disable"
    title="_"
    title="dalli"
    title="_"
    title="cas"
    title="_"
    title="client"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            (Dynamic)
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISABLE_DALLI_CAS_CLIENT`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, disables instrumentation for the dalli gem's additional CAS client support.
  </Collapser>

  <Collapser
    id="disable_memcache_instrumentation"
    title="disable"
    title="_"
    title="memcache"
    title="_"
    title="instrumentation"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISABLE_MEMCACHE_INSTRUMENTATION`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, disables memcache instrumentation.
  </Collapser>

  <Collapser
    id="disable_gc_profiler"
    title="disable"
    title="_"
    title="gc"
    title="_"
    title="profiler"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISABLE_GC_PROFILER`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, disables the use of GC::Profiler to measure time spent in garbage collection
  </Collapser>

  <Collapser
    id="disable_sequel_instrumentation"
    title="disable"
    title="_"
    title="sequel"
    title="_"
    title="instrumentation"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISABLE_SEQUEL_INSTRUMENTATION`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, disables [Sequel instrumentation](https://docs.newrelic.com/docs/agents/ruby-agent/frameworks/sequel-instrumentation).
  </Collapser>

  <Collapser
    id="disable_database_instrumentation"
    title="disable"
    title="_"
    title="database"
    title="_"
    title="instrumentation"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISABLE_DATABASE_INSTRUMENTATION`
          </td>
        </tr>
      </tbody>
    </Table>

    **DEPRECATED** Deprecated; use [`disable_sequel_instrumentation`](#disable_sequel_instrumentation) instead.
  </Collapser>

  <Collapser
    id="disable_mongo"
    title="disable"
    title="_"
    title="mongo"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISABLE_MONGO`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, the agent won't install [instrumentation for the Mongo gem](https://docs.newrelic.com/docs/agents/ruby-agent/frameworks/mongo-instrumentation).
  </Collapser>

  <Collapser
    id="disable_redis"
    title="disable"
    title="_"
    title="redis"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISABLE_REDIS`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, the agent won't install [instrumentation for Redis](https://docs.newrelic.com/docs/agents/ruby-agent/frameworks/redis-instrumentation).
  </Collapser>

  <Collapser
    id="disable_vm_sampler"
    title="disable"
    title="_"
    title="vm"
    title="_"
    title="sampler"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISABLE_VM_SAMPLER`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, the agent won't [sample performance measurements from the Ruby VM](https://docs.newrelic.com/docs/agents/ruby-agent/features/ruby-vm-measurements).
  </Collapser>

  <Collapser
    id="disable_memory_sampler"
    title="disable"
    title="_"
    title="memory"
    title="_"
    title="sampler"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISABLE_MEMORY_SAMPLER`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, the agent won't sample the memory usage of the host process.
  </Collapser>

  <Collapser
    id="disable_cpu_sampler"
    title="disable"
    title="_"
    title="cpu"
    title="_"
    title="sampler"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISABLE_CPU_SAMPLER`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, the agent won't sample the CPU usage of the host process.
  </Collapser>

  <Collapser
    id="disable_delayed_job_sampler"
    title="disable"
    title="_"
    title="delayed"
    title="_"
    title="job"
    title="_"
    title="sampler"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISABLE_DELAYED_JOB_SAMPLER`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, the agent won't measure the depth of Delayed Job queues.
  </Collapser>

  <Collapser
    id="disable_active_record_4"
    title="disable"
    title="_"
    title="active"
    title="_"
    title="record"
    title="_"
    title="4"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISABLE_ACTIVE_RECORD_4`
          </td>
        </tr>
      </tbody>
    </Table>

    **DEPRECATED** Deprecated. For agent versions 6.3 or higher, use [`disable_active_record_notifications`](#disable_active_record_notifications) instead.
  </Collapser>

  <Collapser
    id="disable_active_record_5"
    title="disable"
    title="_"
    title="active"
    title="_"
    title="record"
    title="_"
    title="5"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISABLE_ACTIVE_RECORD_5`
          </td>
        </tr>
      </tbody>
    </Table>

    **DEPRECATED** Deprecated. For agent versions 6.3 or higher, use [`disable_active_record_notifications`](#disable_active_record_notifications) instead.
  </Collapser>

  <Collapser
    id="disable_active_record_notifications"
    title="disable"
    title="_"
    title="active"
    title="_"
    title="record"
    title="_"
    title="notifications"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISABLE_ACTIVE_RECORD_NOTIFICATIONS`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, disables instrumentation for ActiveRecord 4, 5, and 6.
  </Collapser>

  <Collapser
    id="disable_bunny"
    title="disable"
    title="_"
    title="bunny"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISABLE_BUNNY`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, disables instrumentation for the bunny gem.
  </Collapser>

  <Collapser
    id="disable_curb"
    title="disable"
    title="_"
    title="curb"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISABLE_CURB`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, disables instrumentation for the curb gem.
  </Collapser>

  <Collapser
    id="disable_excon"
    title="disable"
    title="_"
    title="excon"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISABLE_EXCON`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, disables instrumentation for the excon gem.
  </Collapser>

  <Collapser
    id="disable_httpclient"
    title="disable"
    title="_"
    title="httpclient"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISABLE_HTTPCLIENT`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, disables instrumentation for the httpclient gem.
  </Collapser>

  <Collapser
    id="disable_net_http"
    title="disable"
    title="_"
    title="net"
    title="_"
    title="http"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISABLE_NET_HTTP`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, disables instrumentation for Net::HTTP.
  </Collapser>

  <Collapser
    id="disable_rack"
    title="disable"
    title="_"
    title="rack"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISABLE_RACK`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, prevents the agent from hooking into the `to_app` method in Rack::Builder to find gems to instrument during application startup.
  </Collapser>

  <Collapser
    id="disable_rack_urlmap"
    title="disable"
    title="_"
    title="rack"
    title="_"
    title="urlmap"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISABLE_RACK_URLMAP`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, prevents the agent from hooking into Rack::URLMap to install middleware tracing.
  </Collapser>

  <Collapser
    id="disable_puma_rack"
    title="disable"
    title="_"
    title="puma"
    title="_"
    title="rack"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            (Dynamic)
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISABLE_PUMA_RACK`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, prevents the agent from hooking into the `to_app` method in Puma::Rack::Builder to find gems to instrument during application startup.
  </Collapser>

  <Collapser
    id="disable_puma_rack_urlmap"
    title="disable"
    title="_"
    title="puma"
    title="_"
    title="rack"
    title="_"
    title="urlmap"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            (Dynamic)
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISABLE_PUMA_RACK_URLMAP`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, prevents the agent from hooking into Puma::Rack::URLMap to install middleware tracing.
  </Collapser>

  <Collapser
    id="disable_typhoeus"
    title="disable"
    title="_"
    title="typhoeus"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISABLE_TYPHOEUS`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, the agent won't install instrumentation for the typhoeus gem.
  </Collapser>

  <Collapser
    id="disable_httprb"
    title="disable"
    title="_"
    title="httprb"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISABLE_HTTPRB`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, the agent won't install instrumentation for the http.rb gem.
  </Collapser>

  <Collapser
    id="disable_middleware_instrumentation"
    title="disable"
    title="_"
    title="middleware"
    title="_"
    title="instrumentation"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISABLE_MIDDLEWARE_INSTRUMENTATION`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, the agent won't wrap third-party middlewares in instrumentation (regardless of whether they are installed via Rack::Builder or Rails).
  </Collapser>

  <Collapser
    id="disable_grape"
    title="disable"
    title="_"
    title="grape"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISABLE_GRAPE`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, the agent won't install Grape instrumentation.
  </Collapser>
</CollapserGroup>

## Distributed Tracing

<CollapserGroup>
  <Collapser
    id="distributed_tracing-enabled"
    title="distributed"
    title="_"
    title="tracing.enabled"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_DISTRIBUTED_TRACING_ENABLED`
          </td>
        </tr>
      </tbody>
    </Table>

    Distributed tracing lets you see the path that a request takes through your distributed system. Enabling distributed tracing changes the behavior of some New Relic features, so carefully consult the [transition guide](https://docs.newrelic.com/docs/transition-guide-distributed-tracing) before you enable this feature.
  </Collapser>

  <Collapser
    id="exclude_newrelic_header"
    title="exclude"
    title="_"
    title="newrelic"
    title="_"
    title="header"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_EXCLUDE_NEWRELIC_HEADER`
          </td>
        </tr>
      </tbody>
    </Table>

    Allows `newrelic` distributed tracing headers to be suppressed on outbound requests.
  </Collapser>
</CollapserGroup>

## Heroku

<CollapserGroup>
  <Collapser
    id="heroku-use_dyno_names"
    title="heroku.use"
    title="_"
    title="dyno"
    title="_"
    title="names"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_HEROKU_USE_DYNO_NAMES`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, the agent uses Heroku dyno names as the hostname.
  </Collapser>

  <Collapser
    id="heroku-dyno_name_prefixes_to_shorten"
    title="heroku.dyno"
    title="_"
    title="name"
    title="_"
    title="prefixes"
    title="_"
    title="to"
    title="_"
    title="shorten"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Array
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `["scheduler", "run"]`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_HEROKU_DYNO_NAME_PREFIXES_TO_SHORTEN`
          </td>
        </tr>
      </tbody>
    </Table>

    Ordinarily the agent reports dyno names with a trailing dot and process ID (for example, **worker.3**). You can remove this trailing data by specifying the prefixes you want to report without trailing data (for example, **worker**).
  </Collapser>
</CollapserGroup>

## Mongo

<CollapserGroup>
  <Collapser
    id="mongo-capture_queries"
    title="mongo.capture"
    title="_"
    title="queries"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_MONGO_CAPTURE_QUERIES`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, the agent captures Mongo queries in transaction traces.
  </Collapser>

  <Collapser
    id="mongo-obfuscate_queries"
    title="mongo.obfuscate"
    title="_"
    title="queries"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_MONGO_OBFUSCATE_QUERIES`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, the agent obfuscates Mongo queries in transaction traces.
  </Collapser>
</CollapserGroup>

## Process Host

<CollapserGroup>
  <Collapser
    id="process_host-display_name"
    title="process"
    title="_"
    title="host.display"
    title="_"
    title="name"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            String
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            (Dynamic)
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_PROCESS_HOST_DISPLAY_NAME`
          </td>
        </tr>
      </tbody>
    </Table>

    Specify a custom host name for [display in the New Relic UI](https://docs.newrelic.com/docs/apm/new-relic-apm/maintenance/add-rename-remove-hosts#display_name).
  </Collapser>
</CollapserGroup>

## Rake

<CollapserGroup>
  <Collapser
    id="rake-tasks"
    title="rake.tasks"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Array
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_RAKE_TASKS`
          </td>
        </tr>
      </tbody>
    </Table>

    Specify an array of Rake tasks to automatically instrument.
  </Collapser>

  <Collapser
    id="rake-connect_timeout"
    title="rake.connect"
    title="_"
    title="timeout"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Integer
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `10`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_RAKE_CONNECT_TIMEOUT`
          </td>
        </tr>
      </tbody>
    </Table>

    Timeout for waiting on connect to complete before a rake task
  </Collapser>
</CollapserGroup>

## Resque

<CollapserGroup>
  <Collapser
    id="resque-capture_params"
    title="resque.capture"
    title="_"
    title="params"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_RESQUE_CAPTURE_PARAMS`
          </td>
        </tr>
      </tbody>
    </Table>

    **DEPRECATED** If `true`, enables the capture of job arguments for transaction traces and traced errors in Resque.
  </Collapser>
</CollapserGroup>

## Rules

<CollapserGroup>
  <Collapser
    id="rules-ignore_url_regexes"
    title="rules.ignore"
    title="_"
    title="url"
    title="_"
    title="regexes"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Array
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `[]`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_RULES_IGNORE_URL_REGEXES`
          </td>
        </tr>
      </tbody>
    </Table>

    Define transactions you want the agent to ignore, by specifying a list of patterns matching the URI you want to ignore.
  </Collapser>
</CollapserGroup>

## Sidekiq

<CollapserGroup>
  <Collapser
    id="sidekiq-capture_params"
    title="sidekiq.capture"
    title="_"
    title="params"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_SIDEKIQ_CAPTURE_PARAMS`
          </td>
        </tr>
      </tbody>
    </Table>

    **DEPRECATED** If `true`, enables the capture of job arguments for transaction traces and traced errors in Sidekiq.
  </Collapser>
</CollapserGroup>

## Slow SQL

<CollapserGroup>
  <Collapser
    id="slow_sql-enabled"
    title="slow"
    title="_"
    title="sql.enabled"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            (Dynamic)
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_SLOW_SQL_ENABLED`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, the agent collects [slow SQL queries](https://docs.newrelic.com/docs/apm/applications-menu/monitoring/viewing-slow-query-details).
  </Collapser>

  <Collapser
    id="slow_sql-explain_threshold"
    title="slow"
    title="_"
    title="sql.explain"
    title="_"
    title="threshold"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Float
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            (Dynamic)
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_SLOW_SQL_EXPLAIN_THRESHOLD`
          </td>
        </tr>
      </tbody>
    </Table>

    Specify a threshold in seconds. The agent collects [slow SQL queries](https://docs.newrelic.com/docs/apm/applications-menu/monitoring/viewing-slow-query-details) and explain plans that exceed this threshold.
  </Collapser>

  <Collapser
    id="slow_sql-explain_enabled"
    title="slow"
    title="_"
    title="sql.explain"
    title="_"
    title="enabled"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            (Dynamic)
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_SLOW_SQL_EXPLAIN_ENABLED`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, the agent collects explain plans in slow SQL queries. If this setting is omitted, the [`transaction_tracer.explain_enabled`](#transaction_tracer-explain_enabled) setting will be applied as the default setting for explain plans in slow SQL as well.
  </Collapser>

  <Collapser
    id="slow_sql-record_sql"
    title="slow"
    title="_"
    title="sql.record"
    title="_"
    title="sql"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            String
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            (Dynamic)
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_SLOW_SQL_RECORD_SQL`
          </td>
        </tr>
      </tbody>
    </Table>

    Defines an obfuscation level for slow SQL queries. Valid options are `obfuscated`, `raw`, or `none`).
  </Collapser>

  <Collapser
    id="slow_sql-use_longer_sql_id"
    title="slow"
    title="_"
    title="sql.use"
    title="_"
    title="longer"
    title="_"
    title="sql"
    title="_"
    title="id"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `false`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_SLOW_SQL_USE_LONGER_SQL_ID`
          </td>
        </tr>
      </tbody>
    </Table>

    Generate a longer sql_id for slow SQL traces. sql_id is used for aggregation of similar queries.
  </Collapser>
</CollapserGroup>

## Span Events

<CollapserGroup>
  <Collapser
    id="span_events-enabled"
    title="span"
    title="_"
    title="events.enabled"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_SPAN_EVENTS_ENABLED`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, enables span event sampling.
  </Collapser>

  <Collapser
    id="span_events-queue_size"
    title="span"
    title="_"
    title="events.queue"
    title="_"
    title="size"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Integer
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `10000`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_SPAN_EVENTS_QUEUE_SIZE`
          </td>
        </tr>
      </tbody>
    </Table>

    Sets the maximum number of span events to buffer when streaming to the trace observer.
  </Collapser>

  <Collapser
    id="span_events-max_samples_stored"
    title="span"
    title="_"
    title="events.max"
    title="_"
    title="samples"
    title="_"
    title="stored"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Integer
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `1000`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_SPAN_EVENTS_MAX_SAMPLES_STORED`
          </td>
        </tr>
      </tbody>
    </Table>

    Defines the maximum number of span events reported from a single harvest.
  </Collapser>
</CollapserGroup>

## Strip Exception Messages

<CollapserGroup>
  <Collapser
    id="strip_exception_messages-enabled"
    title="strip"
    title="_"
    title="exception"
    title="_"
    title="messages.enabled"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            (Dynamic)
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_STRIP_EXCEPTION_MESSAGES_ENABLED`
          </td>
        </tr>
      </tbody>
    </Table>

    If true, the agent strips messages from all exceptions except those in the [allowlist](#strip_exception_messages-allowlist). Enabled automatically in [high security mode](https://docs.newrelic.com/docs/accounts-partnerships/accounts/security/high-security).
  </Collapser>

  <Collapser
    id="strip_exception_messages-whitelist"
    title="strip"
    title="_"
    title="exception"
    title="_"
    title="messages.whitelist"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            String
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `""`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_STRIP_EXCEPTION_MESSAGES_WHITELIST`
          </td>
        </tr>
      </tbody>
    </Table>

    **DEPRECATED** Deprecated. For agent versions 6.8.0 or higher, use [`strip_exception_messages.allowed_classes`](#strip_exception_messages.allowed_classes) instead.
  </Collapser>

  <Collapser
    id="strip_exception_messages-allowed_classes"
    title="strip"
    title="_"
    title="exception"
    title="_"
    title="messages.allowed"
    title="_"
    title="classes"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            String
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `""`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_STRIP_EXCEPTION_MESSAGES_ALLOWED_CLASSES`
          </td>
        </tr>
      </tbody>
    </Table>

    Specify a list of exceptions you do not want the agent to strip when [strip_exception_messages](#strip_exception_messages-enabled) is `true`. Separate exceptions with a comma. For example, `"ImportantException,PreserveMessageException"`.
  </Collapser>
</CollapserGroup>

## Thread Profiler

<CollapserGroup>
  <Collapser
    id="thread_profiler-enabled"
    title="thread"
    title="_"
    title="profiler.enabled"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            (Dynamic)
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_THREAD_PROFILER_ENABLED`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, enables use of the [thread profiler](https://docs.newrelic.com/docs/apm/applications-menu/events/thread-profiler-tool).
  </Collapser>
</CollapserGroup>

## Utilization

<CollapserGroup>
  <Collapser
    id="utilization-detect_aws"
    title="utilization.detect"
    title="_"
    title="aws"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_UTILIZATION_DETECT_AWS`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, the agent automatically detects that it is running in an AWS environment.
  </Collapser>

  <Collapser
    id="utilization-detect_azure"
    title="utilization.detect"
    title="_"
    title="azure"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_UTILIZATION_DETECT_AZURE`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, the agent automatically detects that it is running in an Azure environment.
  </Collapser>

  <Collapser
    id="utilization-detect_gcp"
    title="utilization.detect"
    title="_"
    title="gcp"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_UTILIZATION_DETECT_GCP`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, the agent automatically detects that it is running in an Google Cloud Platform environment.
  </Collapser>

  <Collapser
    id="utilization-detect_pcf"
    title="utilization.detect"
    title="_"
    title="pcf"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_UTILIZATION_DETECT_PCF`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, the agent automatically detects that it is running in a Pivotal Cloud Foundry environment.
  </Collapser>

  <Collapser
    id="utilization-detect_docker"
    title="utilization.detect"
    title="_"
    title="docker"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_UTILIZATION_DETECT_DOCKER`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, the agent automatically detects that it is running in Docker.
  </Collapser>

  <Collapser
    id="utilization-detect_kubernetes"
    title="utilization.detect"
    title="_"
    title="kubernetes"
  >
    <Table>
      <tbody>
        <tr>
          <th>
            Type
          </th>

          <td>
            Boolean
          </td>
        </tr>

        <tr>
          <th>
            Default
          </th>

          <td>
            `true`
          </td>
        </tr>

        <tr>
          <th>
            Environ variable
          </th>

          <td>
            `NEW_RELIC_UTILIZATION_DETECT_KUBERNETES`
          </td>
        </tr>
      </tbody>
    </Table>

    If `true`, the agent automatically detects that it is running in Kubernetes.
  </Collapser>
</CollapserGroup>

## For more help

Additional documentation resources include:

* [New Relic for Ruby](/docs/agents/ruby-agent/getting-started/new-relic-ruby) (compatibility and requirements, installation, configuration, troubleshooting, known issues, advanced features and configuration, beta releases)
* [Transaction traces](/docs/apm/traces/transaction-traces/transaction-traces) and [Configuring transaction traces](/docs/apm/traces/transaction-traces/configuring-transaction-traces) (detailed information about New Relic's Transaction Traces feature)
