---
title: Send Snyk data to New Relic
metaDescription: 'Send your security data from Snyk directly to New Relic.'
---

import vulnerabilitymanagementTestWebhook from 'images/vulnerability-management_screenshot-crop_test-webhook.png'

import vulnerabilitymanagementVerifySnykData from 'images/vulnerability-management_screenshot-crop_verify-snyk-data.png'

import accountsVmLanding from 'images/accounts_screenshot-full_vm-landing.png'

import vulnerabilitymanagementQueryVulnEvents from 'images/vulnerability-management_screenshot-full_query-vuln-events.png'

import vmSnykDashboard from 'images/vm_screenshot-full_snyk-dashboard.png'


This guide describes how to integrate New Relic Vulnerability Management with Snyk Webhooks. Webhooks in Snyk are a beta feature only available for Snyk's Business or Enterprise customers. As a beta feature, the Webhook API and structure may change without notice, so please exercise discretion when using Webhooks for automation in your security processes.

While we will make every effort to keep in sync with changes to Snyk Webhooks, if you notice that we've fallen out of step, let us know. 

After completion of these steps, you will see new vulnerabilities detected by Snyk in your New Relic account in real time, and you'll be able to build out analytics dashboards newly detected issues.

For more information, see the [official Snyk documentation](https://snyk.docs.apiary.io/#reference/webhooks).

## Prerequisites [#prereqs]

- A Snyk API Token
- New Relic <InlinePopover type="licenseKey" />
- You must be a Snyk organization administrator to configure Webhooks via API

## Webhook configuration [#webhook-config]

To configure your webhook, go through the following steps:

<Steps>

    <Step>
        ### Get your Snyk API token[#snky-API-token]
        
        In the Snyk UI, under the user menu, click **Account settings** and copy your Snyk API Token key. Read more in the [official Snyk documentation](https://docs.snyk.io/snyk-admin/snyk-broker/snyk-broker-code-agent/setting-up-the-code-agent-broker-client-deployment/step-1-obtaining-the-required-tokens-for-the-setup-procedure/obtaining-your-snyk-api-token).

    </Step>

    <Step>
        ### New Relic **License - Insert** license key[#nr-license-key]

        Select a **License - Insert** <InlinePopover type="licenseKey" /> in your New Relic account, or create a new one.

        <Callout variant="important">
            In addition to your Snyk and New Relic keys, you need to generate a random signing secret in GitHub. This is required by Snyk but not used by New Relic when receiving data.
        </Callout>

    </Step>

    <Step>
        ### Compile Snyk organization IDs[#sny-org-ids]

        Get a list of the Snyk organization IDs you have access to by running the following command:

        ```shell
        curl -H "content-type: application/json" \
        -H "authorization: token YOUR_SNYK_API_TOKEN" \
        "https://api.snyk.io/api/v1/orgs" | jq -r '.orgs[] | "\(.id)\t\(.name)"'
        ```

        <Callout variant="important">
            To run this command, you need to install [jq](https://stedolan.github.io/jq/), a command-line JSON processor.
        </Callout>

    </Step>

    <Step>
        ### Create a webhook in each Snyk organization [#create-webhook]

        You must configure a webhook separately for each Snyk organization. 
        
        Run the following command to create a webhook that will post to the security ingest processor at New Relic every time a project is tested. This gets sent through the [project_snapshot](https://snyk.docs.apiary.io/#introduction/consuming-webhooks/event-types) event type.
    
        ```shell
        curl -X POST -H "content-type: application/json" \
        -H "authorization: token <SNYK_API_TOKEN>" \
        --data '{"url": 
            "https://security-ingest-processor.service.newrelic.com/v1/security/webhooks/snyk?Api-Key=YOUR_NEW_RELIC_LICENSE_KEY",
            "secret": "YOUR_SIGNING_SECRET"}' \
        "https://api.snyk.io/api/v1/org/<SNYK_ORG_ID>/webhooks"
        ```

    </Step>

    <Step>
        ### Test a webhook connection [#confirm-webhook]

        The following command returns an array of results with a webhook ID and url for each configured webhook in the organization:
        
        ```shell
        curl -H "content-type: application/json" \
        -H "authorization: token YOUR_SNYK_API_TOKEN" \
        "https://api.snyk.io/api/v1/org/YOUR_SNYK_ORG_ID/webhooks"
        ```

        To test a webhook, copy the ID from the webhook you want to test, and run the following command:
        
        ```shell
        curl -X POST --data "" -H "content-type: application/json" \
        -H "authorization: token YOUR_SNYK_API_TOKEN" \
        "https://api.snyk.io/api/v1/org/YOUR_SNYK_ORG_ID/webhooks/YOUR_WEBHOOK_ID/ping"
        ```

        The command will return `OK` if you've set up the webhook correctly.
    </Step>

</Steps>

## Test a Webhook manually [#webhook-test]

You might need to trigger a manual scan of a project within Snyk to get data flowing into New Relic. You can do this through the Snyk CLI or API, or from the Snyk UI, by clicking **Retest now** on a scan target within a project.

Check the official Snyk documentation on [running manual tests](https://docs.snyk.io/getting-started/running-tests#run-tests-manually).

<img
  title="Test a webhook manually"
  alt="Test a webhook manually"
  src={vulnerabilitymanagementTestWebhook}
/>

<figcaption>
  Click **Retest now** on a scan target within a project.
</figcaption>

## Verify that your Snyk data is sent to New Relic [#verify-snyk-sending]

Check logs in New Relic to verify that the Snyk findings from your manual test were successfully delivered by entering `logtype:security` to filter for security events. 

1. Go to **[one.newrelic.com](https://one.newrelic.com)** > **All capabilities** > **Logs**.
2. In the search bar, enter `logtype:security` and click **Query logs**.

<img
  title="Logs screen"
  alt="Logs screen"
  src={vulnerabilitymanagementVerifySnykData}
/>

<figcaption>
  **[one.newrelic.com](https://one.newrelic.com)** > **All capabilities** > **Logs**
</figcaption>

The Snyk Webhook transports only return **New Issues** and **Removed Issues** that occur with each test. New Relic will parse only the **New Issues**. If the manual test doesn't reveal any new issues, you won't see any new security logs in New Relic. In this case, you'll see a log message in New Relic for the successful webhook transport along the lines of:

```sql
SnykWebhook scan reported 879 byte payload with 0 events (0 unique issue ids) from '' errors=no
```

## View Snyk data in New Relic [#view-data-NR]

Once you have one or more webhook events configured, you can view the results of Snyk webhook being sent to our security ingest endpoint in New Relic.

Check out the 3 ways you can use to identify Snyk data in New Relic:

### Viewing data in vulnerability management [#view-data]

You can find this page at **[one.newrelic.com](https://one.newrelic.com)** > **All capabilities** > **Vulnerability Management**.

This view gives you a birds-eye view of all your software's vulnerabilities, including any data that's been consumed from the Snyk integration. Use the various tabs to identify and triage vulnerabilities.

<img
  title="Vulnerability management screen"
  alt="Vulnerability management screen"
  src={accountsVmLanding}
/>

<figcaption>
  **[one.newrelic.com](https://one.newrelic.com)** > **All capabilities** > **Vulnerability Management**.
</figcaption>

### Querying vulnerability events [#query-vuln-events]

When Snyk events are processed, they're stored in the **Vulnerability** table. To query this table and view the raw data, do the following:

1. Go to **[one.newrelic.com](https://one.newrelic.com)** > **All capabilities** > **Query your data**.
2. Enter the following query:
    ```sql
    FROM Vulnerability SELECT * where source = 'Snyk' since 7 days ago
    ```
    <img
    title="Query vulnerability events"
    alt="Query vulnerability events"
    src={vulnerabilitymanagementQueryVulnEvents}
    />

    <figcaption>
    **[one.newrelic.com](https://one.newrelic.com)** > **All capabilities** > **Query your data**
    </figcaption>

### Snyk dashboard [#snyk-dashboard]

You can install the pre-built Snyk dashboard from the [New Relic Instant Observability marketplace](https://newrelic.com/instant-observability/snyk).

This dashboard offers another view into vulnerability data, and you can use the chart widgets to build your own dashboard views from your Snyk integration data.

<img
  title="Snyk dashboard"
  alt="Snyk dashboard"
  src={vmSnykDashboard}
/>

<figcaption>
  Install the [Instant Observability Snyk dashboard](https://newrelic.com/instant-observability/snyk).
</figcaption>
