---
title: RabbitMQ OpenTelemetry metrics reference
tags:
  - Integrations
  - Open source telemetry integrations
  - OpenTelemetry
  - RabbitMQ
metaDescription: "Complete reference for RabbitMQ OpenTelemetry metrics with NRQL examples and alert conditions."
freshnessValidatedDate: 2024-12-24
---

This comprehensive reference documents all RabbitMQ metrics collected by the OpenTelemetry Collector integration. Each metric includes detailed descriptions, practical NRQL query examples, and ready-to-use alert condition templates.

<Callout variant="tip">
  **New to RabbitMQ monitoring?** Start with the [overview guide](/docs/opentelemetry/integrations/rabbitmq/overview) to understand the integration architecture and deployment options.
</Callout>

## Understanding RabbitMQ metrics [#overview]

The RabbitMQ OpenTelemetry integration collects metrics through the RabbitMQ management API, providing comprehensive visibility into your message broker's health and performance.

**Metric categories:**

* **Queue metrics** - Message counts and consumer activity per queue. Use these to detect backlogs, monitor message flow, and identify consumer issues.
* **Connection metrics** - Active client connections and consumers. Use these to track connectivity health and monitor connection limits.
* **Resource attributes** - Deployment metadata and infrastructure context. Use these to filter and group metrics by environment, cluster, or pod.

**Common metric attributes:**

All metrics include these attributes for filtering and grouping:
* `instrumentation.provider = 'opentelemetry'` - Identifies metrics from this integration
* `rabbitmq.deployment.name` - Your deployment identifier
* `rabbitmq.server.endpoint` - Management API endpoint
* `host.name` or `k8s.pod.name` - Instance identifier

<Callout variant="important">
  When querying RabbitMQ metrics, always include `instrumentation.provider = 'opentelemetry'` in your WHERE clause to ensure you're only getting data from this integration.
</Callout>

## Queue metrics [#queue-metrics]

Queue metrics provide insights into message flow, backlogs, and consumer activity.

<CollapserGroup>
  <Collapser
    id="queue-count"
    title="rabbitmq.queue.count"
  >
**Type**: Gauge  
**Unit**: Queues  
**Description**: Total number of queues in the RabbitMQ instance.

**NRQL examples:**

View total queue count:
```sql
SELECT latest(rabbitmq.queue.count) AS 'Total Queues'
FROM Metric
WHERE instrumentation.provider = 'opentelemetry'
  AND metricName = 'rabbitmq.queue.count'
SINCE 10 minutes ago
```

Track queue count over time:
```sql
SELECT latest(rabbitmq.queue.count)
FROM Metric
WHERE instrumentation.provider = 'opentelemetry'
  AND metricName = 'rabbitmq.queue.count'
FACET rabbitmq.deployment.name
TIMESERIES
```

**Alert condition example:**

Alert if queue count exceeds threshold:
```sql
SELECT latest(rabbitmq.queue.count)
FROM Metric
WHERE instrumentation.provider = 'opentelemetry'
  AND metricName = 'rabbitmq.queue.count'
```

* **Threshold**: Static &gt; 100 queues for 5 minutes
* **Priority**: Warning

  </Collapser>

  <Collapser
    id="queue-message-count"
    title="rabbitmq.queue.message.count"
  >
**Type**: Gauge  
**Unit**: Messages  
**Description**: Total number of messages across all queues (ready + unacknowledged).

**Dimensions**:
* `rabbitmq.queue.name`: Name of the queue

**NRQL examples:**

View total message count:
```sql
SELECT latest(rabbitmq.queue.message.count) AS 'Total Messages'
FROM Metric
WHERE instrumentation.provider = 'opentelemetry'
  AND metricName = 'rabbitmq.queue.message.count'
```

Messages per queue:
```sql
SELECT latest(rabbitmq.queue.message.count)
FROM Metric
WHERE instrumentation.provider = 'opentelemetry'
  AND metricName = 'rabbitmq.queue.message.count'
FACET rabbitmq.queue.name
```

Track message trends:
```sql
SELECT latest(rabbitmq.queue.message.count)
FROM Metric
WHERE instrumentation.provider = 'opentelemetry'
  AND metricName = 'rabbitmq.queue.message.count'
FACET rabbitmq.queue.name
TIMESERIES
```

Find queues with most messages:
```sql
SELECT latest(rabbitmq.queue.message.count)
FROM Metric
WHERE instrumentation.provider = 'opentelemetry'
  AND metricName = 'rabbitmq.queue.message.count'
FACET rabbitmq.queue.name
LIMIT 10
```

**Alert condition example:**

Alert on message backlog:
```sql
SELECT latest(rabbitmq.queue.message.count)
FROM Metric
WHERE instrumentation.provider = 'opentelemetry'
  AND metricName = 'rabbitmq.queue.message.count'
FACET rabbitmq.queue.name
```

* **Threshold**: Static &gt; 10,000 messages for 5 minutes
* **Priority**: Critical
* **Use case**: Detect message backlogs that could indicate processing issues

  </Collapser>

  <Collapser
    id="queue-message-ready"
    title="rabbitmq.queue.message.ready"
  >
**Type**: Gauge  
**Unit**: Messages  
**Description**: Number of messages ready for delivery (not yet delivered to consumers).

**Dimensions**:
* `rabbitmq.queue.name`: Name of the queue

**NRQL examples:**

View ready messages:
```sql
SELECT latest(rabbitmq.queue.message.ready)
FROM Metric
WHERE instrumentation.provider = 'opentelemetry'
  AND metricName = 'rabbitmq.queue.message.ready'
FACET rabbitmq.queue.name
```

Compare ready vs. total messages:
```sql
SELECT 
  latest(rabbitmq.queue.message.ready) AS 'Ready',
  latest(rabbitmq.queue.message.count) AS 'Total'
FROM Metric
WHERE instrumentation.provider = 'opentelemetry'
  AND metricName LIKE 'rabbitmq.queue.message.%'
FACET rabbitmq.queue.name
```

Track ready message trends:
```sql
SELECT latest(rabbitmq.queue.message.ready)
FROM Metric
WHERE instrumentation.provider = 'opentelemetry'
  AND metricName = 'rabbitmq.queue.message.ready'
  AND rabbitmq.queue.name = 'your-queue-name'
TIMESERIES
```

Calculate message processing rate:
```sql
SELECT rate(sum(rabbitmq.queue.message.ready), 1 minute) AS 'Messages/min'
FROM Metric
WHERE instrumentation.provider = 'opentelemetry'
  AND metricName = 'rabbitmq.queue.message.ready'
FACET rabbitmq.queue.name
TIMESERIES
```

**Alert condition example:**

Alert on growing ready message queue:
```sql
SELECT latest(rabbitmq.queue.message.ready)
FROM Metric
WHERE instrumentation.provider = 'opentelemetry'
  AND metricName = 'rabbitmq.queue.message.ready'
FACET rabbitmq.queue.name
```

* **Threshold**: Baseline deviation &gt; 5,000 messages for 10 minutes
* **Priority**: Warning
* **Use case**: Detect when consumers aren't keeping up with message production

  </Collapser>

  <Collapser
    id="queue-message-unacknowledged"
    title="rabbitmq.queue.message.unacknowledged"
  >
**Type**: Gauge  
**Unit**: Messages  
**Description**: Number of messages delivered to consumers but not yet acknowledged.

**Dimensions**:
* `rabbitmq.queue.name`: Name of the queue

**NRQL examples:**

View unacknowledged messages:
```sql
SELECT latest(rabbitmq.queue.message.unacknowledged)
FROM Metric
WHERE instrumentation.provider = 'opentelemetry'
  AND metricName = 'rabbitmq.queue.message.unacknowledged'
FACET rabbitmq.queue.name
```

Unacknowledged message trends:
```sql
SELECT latest(rabbitmq.queue.message.unacknowledged)
FROM Metric
WHERE instrumentation.provider = 'opentelemetry'
  AND metricName = 'rabbitmq.queue.message.unacknowledged'
FACET rabbitmq.queue.name
TIMESERIES
```

Identify queues with stuck messages:
```sql
SELECT latest(rabbitmq.queue.message.unacknowledged)
FROM Metric
WHERE instrumentation.provider = 'opentelemetry'
  AND metricName = 'rabbitmq.queue.message.unacknowledged'
FACET rabbitmq.queue.name
WHERE rabbitmq.queue.message.unacknowledged > 0
```

Calculate acknowledgment lag:
```sql
SELECT 
  latest(rabbitmq.queue.message.unacknowledged) AS 'Unacked',
  latest(rabbitmq.queue.consumer.count) AS 'Consumers',
  latest(rabbitmq.queue.message.unacknowledged) / latest(rabbitmq.queue.consumer.count) AS 'Unacked per Consumer'
FROM Metric
WHERE instrumentation.provider = 'opentelemetry'
FACET rabbitmq.queue.name
```

**Alert condition example:**

Alert on high unacknowledged messages:
```sql
SELECT latest(rabbitmq.queue.message.unacknowledged)
FROM Metric
WHERE instrumentation.provider = 'opentelemetry'
  AND metricName = 'rabbitmq.queue.message.unacknowledged'
FACET rabbitmq.queue.name
```

* **Threshold**: Static &gt; 1,000 messages for 5 minutes
* **Priority**: Warning
* **Use case**: Detect slow or hung consumers that aren't acknowledging messages

  </Collapser>

  <Collapser
    id="queue-consumer-count"
    title="rabbitmq.queue.consumer.count"
  >
**Type**: Gauge  
**Unit**: Consumers  
**Description**: Number of active consumers subscribed to each queue.

**Dimensions**:
* `rabbitmq.queue.name`: Name of the queue

**NRQL examples:**

View consumers per queue:
```sql
SELECT latest(rabbitmq.queue.consumer.count)
FROM Metric
WHERE instrumentation.provider = 'opentelemetry'
  AND metricName = 'rabbitmq.queue.consumer.count'
FACET rabbitmq.queue.name
```

Find queues with no consumers:
```sql
SELECT latest(rabbitmq.queue.consumer.count)
FROM Metric
WHERE instrumentation.provider = 'opentelemetry'
  AND metricName = 'rabbitmq.queue.consumer.count'
  AND rabbitmq.queue.consumer.count = 0
FACET rabbitmq.queue.name
```

Track consumer changes:
```sql
SELECT latest(rabbitmq.queue.consumer.count)
FROM Metric
WHERE instrumentation.provider = 'opentelemetry'
  AND metricName = 'rabbitmq.queue.consumer.count'
FACET rabbitmq.queue.name
TIMESERIES
```

Consumer to message ratio:
```sql
SELECT 
  latest(rabbitmq.queue.consumer.count) AS 'Consumers',
  latest(rabbitmq.queue.message.ready) AS 'Ready Messages',
  latest(rabbitmq.queue.message.ready) / latest(rabbitmq.queue.consumer.count) AS 'Messages per Consumer'
FROM Metric
WHERE instrumentation.provider = 'opentelemetry'
FACET rabbitmq.queue.name
```

**Alert condition example:**

Alert when queue has no consumers but has messages:
```sql
SELECT latest(rabbitmq.queue.consumer.count)
FROM Metric
WHERE instrumentation.provider = 'opentelemetry'
  AND metricName = 'rabbitmq.queue.consumer.count'
FACET rabbitmq.queue.name
```

* **Threshold**: Static = 0 consumers AND rabbitmq.queue.message.count > 0
* **Priority**: Critical
* **Use case**: Detect when consumers have disconnected but messages are accumulating

  </Collapser>
</CollapserGroup>

## Connection metrics [#connection-metrics]

Connection metrics track client connections and overall consumer activity.

<CollapserGroup>
  <Collapser
    id="connection-count"
    title="rabbitmq.connection.count"
  >
**Type**: Gauge  
**Unit**: Connections  
**Description**: Total number of active client connections to the RabbitMQ server.

**NRQL examples:**

View current connections:
```sql
SELECT latest(rabbitmq.connection.count) AS 'Active Connections'
FROM Metric
WHERE instrumentation.provider = 'opentelemetry'
  AND metricName = 'rabbitmq.connection.count'
```

Track connections over time:
```sql
SELECT latest(rabbitmq.connection.count)
FROM Metric
WHERE instrumentation.provider = 'opentelemetry'
  AND metricName = 'rabbitmq.connection.count'
FACET rabbitmq.deployment.name
TIMESERIES
```

Compare across clusters:
```sql
SELECT latest(rabbitmq.connection.count)
FROM Metric
WHERE instrumentation.provider = 'opentelemetry'
  AND metricName = 'rabbitmq.connection.count'
FACET k8s.cluster.name
```

Connection density by host:
```sql
SELECT latest(rabbitmq.connection.count)
FROM Metric
WHERE instrumentation.provider = 'opentelemetry'
  AND metricName = 'rabbitmq.connection.count'
FACET host.name
```

**Alert condition example:**

Alert on connection surge:
```sql
SELECT latest(rabbitmq.connection.count)
FROM Metric
WHERE instrumentation.provider = 'opentelemetry'
  AND metricName = 'rabbitmq.connection.count'
```

* **Threshold**: Baseline deviation &gt; 100 connections for 5 minutes
* **Priority**: Warning
* **Use case**: Detect abnormal connection patterns or connection leaks

  </Collapser>

  <Collapser
    id="consumer-count"
    title="rabbitmq.consumer.count"
  >
**Type**: Gauge  
**Unit**: Consumers  
**Description**: Total number of active consumers across all queues in the RabbitMQ instance.

**NRQL examples:**

View total consumers:
```sql
SELECT latest(rabbitmq.consumer.count) AS 'Total Consumers'
FROM Metric
WHERE instrumentation.provider = 'opentelemetry'
  AND metricName = 'rabbitmq.consumer.count'
```

Track consumer trends:
```sql
SELECT latest(rabbitmq.consumer.count)
FROM Metric
WHERE instrumentation.provider = 'opentelemetry'
  AND metricName = 'rabbitmq.consumer.count'
FACET rabbitmq.deployment.name
TIMESERIES
```

Consumer to connection ratio:
```sql
SELECT 
  latest(rabbitmq.consumer.count) AS 'Consumers',
  latest(rabbitmq.connection.count) AS 'Connections',
  latest(rabbitmq.consumer.count) / latest(rabbitmq.connection.count) AS 'Consumers per Connection'
FROM Metric
WHERE instrumentation.provider = 'opentelemetry'
```

Compare consumer counts across environments:
```sql
SELECT latest(rabbitmq.consumer.count)
FROM Metric
WHERE instrumentation.provider = 'opentelemetry'
  AND metricName = 'rabbitmq.consumer.count'
FACET rabbitmq.deployment.name
```

**Alert condition example:**

Alert on low consumer count:
```sql
SELECT latest(rabbitmq.consumer.count)
FROM Metric
WHERE instrumentation.provider = 'opentelemetry'
  AND metricName = 'rabbitmq.consumer.count'
```

* **Threshold**: Static &lt; 1 consumer for 5 minutes
* **Priority**: Critical
* **Use case**: Detect when all consumers have disconnected

  </Collapser>
</CollapserGroup>

## Resource attributes for filtering and grouping [#resource-attributes]

Every RabbitMQ metric includes resource attributes that help you filter, group, and contextualize your data. Use these attributes to:
* Isolate metrics from specific deployments or environments
* Group metrics by cluster, namespace, or pod in Kubernetes
* Correlate RabbitMQ metrics with other observability data

### Common attributes (all deployments)

These attributes are available regardless of where RabbitMQ is deployed:

* **`instrumentation.provider`** - Always set to `opentelemetry` for metrics from this integration
* **`rabbitmq.server.endpoint`** - The RabbitMQ management API endpoint URL (e.g., `http://localhost:15672`)
* **`rabbitmq.deployment.name`** - Your custom deployment identifier (e.g., `my-rabbitmq-server`)
* **`rabbitmq.display.name`** - Formatted display name combining deployment metadata (e.g., `server:my-rabbitmq-server`)
* **`rabbitmq.port`** - Management API port (typically `15672`)
* **`host.name`** - Hostname where RabbitMQ is running (self-hosted only)
* **`host.id`** - Host identifier (self-hosted only)

### Kubernetes-specific attributes

For Kubernetes deployments using the [Kubernetes installation guide](/docs/opentelemetry/integrations/rabbitmq/kubernetes), these additional attributes are automatically included:

* **`k8s.cluster.name`** - Kubernetes cluster name (e.g., `my-rabbitmq-cluster`)
* **`k8s.namespace.name`** - Namespace where RabbitMQ pod is running (e.g., `messaging`)
* **`k8s.pod.name`** - Name of the RabbitMQ pod (e.g., `rabbitmq-0`)
* **`k8s.node.name`** - Kubernetes node hosting the pod (e.g., `node-1`)

