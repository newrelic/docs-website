---
title: Monitor RabbitMQ with OpenTelemetry
tags:
  - Integrations
  - Open source telemetry integrations
  - OpenTelemetry
  - RabbitMQ
metaDescription: "Monitor RabbitMQ message broker with OpenTelemetry in New Relic."
freshnessValidatedDate: 2024-12-24
---

Monitor your [RabbitMQ](https://www.rabbitmq.com/) message broker with OpenTelemetry and New Relic. Track queue metrics, connection data, consumer information, and message throughput in real-time dashboards.

## How it works [#how-it-works]

This integration uses the OpenTelemetry Collector Contrib distribution with the RabbitMQ receiver to collect metrics from your RabbitMQ management API and send them to New Relic.

### What you'll monitor

Gain visibility into your RabbitMQ infrastructure with metrics for:

* **Queue performance**: Track queue depths, message counts, and processing rates
* **Consumer activity**: Monitor active consumers and their connection status
* **System health**: View node information and resource utilization
* **Message flow**: Analyze delivery rates, acknowledgments, and backlogs

## Integration architecture [#architecture]

The integration follows a simple data flow pattern:

```
RabbitMQ Management API (port 15672) → OpenTelemetry Collector → New Relic OTLP Endpoint
```

### Key components

The integration uses several OpenTelemetry Collector components:

* **RabbitMQ Receiver**: Connects to the management plugin and scrapes metrics at regular intervals
* **Resource Detection Processor**: Automatically detects and adds host information (hostname, host ID)
* **Transform Processor**: Enriches data with custom attributes for filtering and grouping
* **Batch Processor**: Optimizes data transmission by batching metrics
* **OTLP Exporter**: Securely sends data to New Relic via HTTPS with API key authentication

## Installation method [#deployment-options]

Select the guide that matches your RabbitMQ deployment:

<DocTiles>
  <DocTile title="Self-hosted RabbitMQ" path="/docs/opentelemetry/integrations/rabbitmq/self-hosted">
    **Linux hosts**: Install on Debian, Ubuntu, RHEL, or CentOS systems running RabbitMQ
  </DocTile>
</DocTiles>

## Before you begin [#requirements]

### Prerequisites

You'll need:

* **New Relic account**: [Sign up for free](https://newrelic.com/signup) if you don't have one
* **RabbitMQ management plugin**: Must be enabled on your RabbitMQ instance
  * Provides metrics via HTTP API (default port: 15672)
  * Learn more about the [management plugin](https://www.rabbitmq.com/management.html)
* **OpenTelemetry Collector Contrib**: Version 0.140.0 or later
  * Download from [OpenTelemetry releases](https://github.com/open-telemetry/opentelemetry-collector-releases)

### Environment-specific requirements

<CollapserGroup>
  <Collapser id="self-hosted-req" title="Self-hosted Linux requirements">
    For RabbitMQ running on physical or virtual machines:

    * Shell access with `sudo` privileges for package installation
    * Outbound HTTPS connectivity to New Relic OTLP endpoints
    * System packages: `wget`, `systemd`
  </Collapser>
</CollapserGroup>


## Optional features [#optional]

### Log forwarding

Self-hosted deployments support forwarding RabbitMQ logs to New Relic. See the deployment-specific guides for configuration details.

### Custom attributes

Add custom resource attributes to organize your RabbitMQ deployments:

```yaml
processors:
  resource:
    attributes:
      - action: upsert
        key: environment
        value: production
      - action: upsert
        key: team
        value: messaging
```

## Troubleshooting common issues [#troubleshooting]

<CollapserGroup>
  <Collapser id="no-data" title="No data appearing in New Relic">
    **Check RabbitMQ management plugin:**

    ```bash
    rabbitmq-plugins list | grep management
    ```

    You should see `[E*] rabbitmq_management` indicating it's enabled.

    **Test management API:**

    ```bash
    curl -u admin:password http://localhost:15672/api/overview
    ```

    Should return JSON data about your RabbitMQ instance.

    **Review collector logs:**

    ```bash
    # Self-hosted
    sudo journalctl -u otelcol-contrib -f
    ```

    **Verify license key:**  
    Ensure your New Relic license key is correctly configured in environment variables.
  </Collapser>

  <Collapser id="high-cardinality" title="High cardinality warnings">
    If you're seeing high cardinality warnings in New Relic:

    * **Filter queues**: Monitor specific queues instead of all queues
    * **Adjust collection interval**: Increase from 30s to 60s or longer
    * **Use metric aggregation**: Configure aggregation in the collector

    Example configuration:

    ```yaml
    receivers:
      rabbitmq:
        collection_interval: 60s  # Increased from 30s
        # Add queue filtering here
    ```
  </Collapser>

  <Collapser id="connection-errors" title="Connection errors">
    **Verify endpoint URL:**  
    Ensure the endpoint in your collector configuration matches your RabbitMQ setup.

    **Check credentials:**  
    Confirm username and password match your RabbitMQ user with admin privileges.

    **Test network connectivity:**

    ```bash
    # Self-hosted
    curl -I http://localhost:15672
    ```

    **Check firewall rules:**  
    Ensure port 15672 is accessible from the collector.
  </Collapser>
</CollapserGroup>

## What's next? [#whats-next]

<DocTiles>
  <DocTile title="Self-hosted installation" path="/docs/opentelemetry/integrations/rabbitmq/self-hosted">
    Complete step-by-step guide for Linux host installation
  </DocTile>
  <DocTile title="Find and query data" path="/docs/opentelemetry/integrations/rabbitmq/find-and-query-data">
    Learn how to find your RabbitMQ data in New Relic and write effective queries
  </DocTile>
  <DocTile title="Metrics reference" path="/docs/opentelemetry/integrations/rabbitmq/metrics-reference">
    Complete metrics list with NRQL query examples
  </DocTile>
</DocTiles>
