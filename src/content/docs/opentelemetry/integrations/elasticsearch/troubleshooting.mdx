---
title: Troubleshoot Elasticsearch OpenTelemetry integration
tags:
  - OpenTelemetry
  - Elasticsearch
  - Integrations
  - Troubleshooting
metaDescription: "Troubleshoot common issues with the Elasticsearch OpenTelemetry integration and resolve data collection problems."
freshnessValidatedDate: never
---

If you have completed the [Elasticsearch OpenTelemetry integration installation](/docs/opentelemetry/integrations/elasticsearch/elasticsearch-otel-integration-install) but don't see data in New Relic, find your issue below and follow the solution steps.

<CollapserGroup>

  <Collapser id="troubleshoot-collector-stopped" title="Collector service stopped or failed">
    <p><strong>How to check</strong></p>
    ```bash
    sudo systemctl status otelcol-contrib
    ```
    <p><strong>Resolution</strong></p>
    <ul>
      <li>If the service is inactive, start it: <InlineCode>sudo systemctl start otelcol-contrib</InlineCode></li>
      <li>If the service failed, fix configuration errors and restart: <InlineCode>sudo systemctl restart otelcol-contrib</InlineCode></li>
    </ul>
  </Collapser>

  <Collapser id="troubleshoot-collector-logs-errors" title="Collector logs report scraping or export errors">
    <p><strong>How to check</strong></p>
    ```bash
    sudo journalctl -u otelcol-contrib.service -f
    ```
    <p><strong>Resolution</strong></p>
    <p>Review the log output and resolve the root cause (for example, connection problems, authentication failures, or permission issues).</p>
  </Collapser>

  <Collapser id="troubleshoot-connection-refused" title="Connection refused when calling Elasticsearch">
    <p><strong>Error sample</strong>: <InlineCode>dial tcp [::1]:9200: connect: connection refused</InlineCode></p>
    <p><strong>Resolution</strong></p>
    <ul>
      <li>Ensure the <InlineCode>endpoint</InlineCode> in <InlineCode>config.yaml</InlineCode> matches the Elasticsearch host and port.</li>
      <li>Confirm Elasticsearch is running and reachable from the collector host.</li>
    </ul>
  </Collapser>

  <Collapser id="troubleshoot-403" title="403 Forbidden when exporting to New Relic">
    <p><strong>Error sample</strong>: <InlineCode>permanent error: 403 Forbidden</InlineCode></p>
    <p><strong>Resolution</strong></p>
    <ul>
      <li>Verify <InlineCode>NEWRELIC_LICENSE_KEY</InlineCode> in <InlineCode>/etc/systemd/system/otelcol-contrib.service.d/environment.conf</InlineCode>.</li>

      <li>Reload systemd and restart the collector:
        ```bash
        sudo systemctl daemon-reload
        sudo systemctl restart otelcol-contrib
        ```
      </li>
    </ul>
  </Collapser>

  <Collapser id="troubleshoot-permission-denied" title="Permission denied when collecting logs">
    <p><strong>Error sample</strong>: <InlineCode>permission denied</InlineCode> or <InlineCode>cannot open file</InlineCode></p>
    <p><strong>Resolution</strong></p>
    <ul>
      <li>Add the collector user to the Elasticsearch group:
        ```bash
        sudo usermod -a -G elasticsearch otelcol-contrib
        ```
      </li>
      <li>Restart the collector: <InlineCode>sudo systemctl restart otelcol-contrib</InlineCode></li>
    </ul>
  </Collapser>

  <Collapser id="troubleshoot-api-reachability" title="Cannot reach the Elasticsearch API from the collector">
    <p><strong>How to check</strong></p>
    ```bash
    # Unsecured cluster
    curl -I http://localhost:9200

    # With authentication
    curl -u username:password -k https://localhost:9200
    ```
    <p><strong>Resolution</strong></p>
    <p>Verify the cluster is healthy, credentials are valid, and firewall or security settings permit access.</p>
  </Collapser>

  <Collapser id="troubleshoot-missing-entity" title="Elasticsearch entity missing in New Relic UI">
    <p><strong>Resolution</strong></p>
    <ul>
      <li>Ensure the <InlineCode>resourcedetection</InlineCode> processor is included in every metrics pipeline.</li>
      <li>Verify <InlineCode>elasticsearch.cluster.name</InlineCode> is set via the <InlineCode>resource/cluster_name_override</InlineCode> processor.</li>
    </ul>
  </Collapser>

  <Collapser id="troubleshoot-logs-missing" title="Metrics present but logs missing">
    <p><strong>Resolution</strong></p>
    <ul>
      <li>Confirm <InlineCode>filelog</InlineCode> receiver paths are correct and absolute.</li>
      <li>Check that the logs pipeline includes both the <InlineCode>filelog</InlineCode> receiver and the <InlineCode>otlphttp</InlineCode> exporter.</li>
    </ul>
  </Collapser>

</CollapserGroup>