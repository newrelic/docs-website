---
title: Find and query Kafka data in New Relic
tags:
  - Integrations
  - OpenTelemetry
  - Kafka
  - Query data
metaDescription: "Learn how to find your Kafka metrics in New Relic UI and write NRQL queries to analyze your data."
freshnessValidatedDate: never
---

Once your Kafka monitoring is configured with OpenTelemetry, your metrics will appear across multiple locations in New Relic. This guide shows you where to find your data and how to query it effectively.

## Navigate to your Kafka data [#find-data]

Your Kafka metrics appear in several places across the New Relic platform, each optimized for different use cases:

### 1. Entity explorer
Best for: Quick health checks and entity relationships

1. Go to <DNT>**[one.newrelic.com](https://one.newrelic.com) > All capabilities > On host integrations**</DNT>
2. View Kafka broker, cluster, and topics entity types

<img
  title="OTel Kafka Entity Explorer"
  alt="Entity explorer showing Kafka broker, cluster, and topics entity types"
  src="/images/otel-kafka-entityexplorer.webp"
/>

### 2. Queues & Streams
Best for: Message queue focused monitoring

1. Go to <DNT>**[one.newrelic.com](https://one.newrelic.com) > All capabilities > Queues & Streams**</DNT>
2. Filter by `provider=opentelemetry` and click the account row where you instrumented Kafka to view your data

<img
  title="OTel Kafka Queues & Streams"
  alt="Queues & Streams view showing Kafka data filtered by OpenTelemetry provider"
  src="/images/otel-kafka-queues-streams.webp"
/>

{/* ### 3. Third-party services
Best for: Integration-focused monitoring

1. Go to <DNT>**[one.newrelic.com](https://one.newrelic.com) > All capabilities > Infrastructure > Third-party services**</DNT>
2. Select <DNT>**Kafka (OpenTelemetry)**</DNT> > <DNT>**OpenTelemetry Kafka**</DNT>

<img
  title="OTel Kafka Third-party Services"
  alt="Third-party services view showing Kafka (OpenTelemetry) integration"
  src="/images/infrastructure_screenshot-crop_otel-kafka-third-party-integrations.webp"
/> */}

### 3. Pre-built dashboards
Best for: Comprehensive monitoring and visualization

1. Go to <DNT>**[one.newrelic.com](https://one.newrelic.com) > Dashboards > Recommended dashboards (View all)**</DNT>
2. Search for <DNT>**"OpenTelemetry Kafka"**</DNT>

<img
  title="OpenTelemetry Kafka"
  alt="Pre-built dashboard showing Kafka cluster health, network throughput, and broker metrics"
  src="/images/otel-kafka-prebuilt-dashboards.webp"
/>

## Query Kafka data with NRQL [#query-data]

Use [NRQL](/docs/nrql/get-started/introduction-nrql-new-relics-query-language) to create custom queries and dashboards for your Kafka data.

<CollapserGroup>
  <Collapser
    id="basic-queries"
    title="Basic queries"
  >
    **View all Kafka metrics:**
    ```sql
    FROM Metric SELECT *
    WHERE instrumentation.provider='opentelemetry'
    AND kafka.cluster.name IS NOT NULL
    LIMIT 100
    ```

    **Monitor specific cluster:**
    ```sql
    FROM Metric SELECT *
    WHERE kafka.cluster.name = 'production-cluster'
    AND instrumentation.provider='opentelemetry'
    ```
  </Collapser>

  <Collapser
    id="consumer-lag-queries"
    title="Consumer lag monitoring"
  >
    **Consumer lag by group:**
    ```sql
    FROM Metric SELECT latest(kafka.consumer_group.lag)
    WHERE instrumentation.provider='opentelemetry'
    FACET kafka.consumer_group.name, kafka.topic.name
    SINCE 1 hour ago TIMESERIES
    ```

    **High consumer lag alert:**
    ```sql
    FROM Metric SELECT max(kafka.consumer_group.lag)
    WHERE instrumentation.provider='opentelemetry'
    AND kafka.consumer_group.name = 'your-consumer-group'
    ```
  </Collapser>

  <Collapser
    id="broker-health-queries"
    title="Broker health queries"
  >
    **Active brokers count:**
    ```sql
    FROM Metric SELECT latest(kafka.brokers)
    WHERE instrumentation.provider='opentelemetry'
    AND kafka.cluster.name = 'your-cluster'
    TIMESERIES
    ```

    **Under-replicated partitions:**
    ```sql
    FROM Metric SELECT latest(kafka.partition.under_replicated)
    WHERE instrumentation.provider='opentelemetry'
    FACET kafka.topic.name SINCE 1 hour ago
    ```
  </Collapser>

  <Collapser
    id="performance-queries"
    title="Performance monitoring"
  >
    **Message throughput by topic:**
    ```sql
    FROM Metric SELECT rate(sum(kafka.topic.messages), 1 minute) as 'Messages/min'
    WHERE instrumentation.provider='opentelemetry'
    FACET kafka.topic.name SINCE 1 hour ago TIMESERIES
    ```

    **Network I/O by broker:**
    ```sql
    FROM Metric SELECT rate(sum(kafka.network.io.bytes), 1 minute) as 'Bytes/min'
    WHERE instrumentation.provider='opentelemetry'
    FACET kafka.broker.id, direction SINCE 1 hour ago TIMESERIES
    ```
  </Collapser>
</CollapserGroup>

## Advanced queries [#advanced-queries]

For more comprehensive query examples organized by monitoring focus area:

<CollapserGroup>
  <Collapser
    id="cluster-overview-queries"
    title="Cluster overview"
  >
    Get high-level cluster statistics:

    ```sql
    FROM Metric SELECT
      latest(kafka.brokers) AS 'Active Brokers',
      latest(kafka.cluster.topic.count) AS 'Total Topics',
      latest(kafka.cluster.partition.count) AS 'Total Partitions'
    WHERE kafka.cluster.name = 'production-cluster'
      AND instrumentation.provider='opentelemetry'
    TIMESERIES
    ```
  </Collapser>

  <Collapser
    id="broker-health-queries"
    title="Broker health"
  >
    Monitor individual broker health and leadership:

    ```sql
    FROM Metric SELECT
      latest(kafka.partition.under_replicated) AS 'Under-replicated Partitions',
      latest(kafka.broker.leader.count) AS 'Leader Count',
      latest(kafka.partition.count) AS 'Total Partitions'
    WHERE kafka.cluster.name = 'production-cluster'
      AND instrumentation.provider='opentelemetry'
    FACET broker.id
    TIMESERIES
    ```
  </Collapser>

  <Collapser
    id="cluster-health-queries"
    title="Cluster health"
  >
    Track overall cluster health and partition status:

    ```sql
    FROM Metric SELECT
      latest(kafka.partition.offline) AS 'Offline Partitions',
      latest(kafka.cluster.partition.count) AS 'Total Partitions',
      latest(kafka.cluster.topic.count) AS 'Total Topics'
    WHERE kafka.cluster.name = 'production-cluster'
      AND instrumentation.provider='opentelemetry'
    TIMESERIES
    ```
  </Collapser>

  <Collapser
    id="topic-throughput-queries"
    title="Topic throughput and I/O"
  >
    Monitor message rates and data throughput by topic:

    ```sql
    FROM Metric SELECT
      rate(sum(kafka.prod.msg.count), 1 minute) AS 'Messages/min',
      rate(filter(sum(kafka.topic.io), WHERE direction = 'in'), 1 minute) AS 'Bytes In/min',
      rate(filter(sum(kafka.topic.io), WHERE direction = 'out'), 1 minute) AS 'Bytes Out/min'
    WHERE kafka.cluster.name = 'production-cluster'
      AND instrumentation.provider='opentelemetry'
    FACET topic
    TIMESERIES
    ```
  </Collapser>

  <Collapser
    id="consumer-lag-queries"
    title="Consumer lag"
  >
    Track consumer group lag and processing delays:

    ```sql
    FROM Metric SELECT
      latest(kafka.consumer_group.lag_sum) AS 'Total Lag'
    WHERE kafka.cluster.name = 'production-cluster'
      AND instrumentation.provider='opentelemetry'
    FACET group
    TIMESERIES
    ```
  </Collapser>

  <Collapser
    id="request-latency-queries"
    title="Request latency"
  >
    Monitor request processing times and performance:

    ```sql
    FROM Metric SELECT
      latest(kafka.request.time.avg) AS 'Avg Latency',
      latest(kafka.request.time.99p) AS '99th Percentile'
    WHERE kafka.cluster.name = 'production-cluster'
      AND instrumentation.provider='opentelemetry'
    FACET type
    TIMESERIES
    ```
  </Collapser>

  <Collapser
    id="jvm-health-queries"
    title="JVM health"
  >
    Monitor JVM metrics for Kafka brokers:

    ```sql
    FROM Metric SELECT
      (latest(jvm.memory.heap.used) / latest(jvm.memory.heap.max)) * 100 AS 'Heap Usage %',
      rate(sum(jvm.gc.collections.count), 1 minute) AS 'GC Count/min'
    WHERE kafka.cluster.name = 'production-cluster'
      AND instrumentation.provider='opentelemetry'
    FACET broker.id
    TIMESERIES
    ```
  </Collapser>
</CollapserGroup>

## Create custom dashboards [#custom-dashboards]

Combine multiple queries to create comprehensive Kafka monitoring dashboards:

1. Go to [one.newrelic.com](https://one.newrelic.com) > Dashboards
2. Click "Create a dashboard"
3. Add widgets using the NRQL queries above
4. Organize widgets by focus area:
   - Cluster health: Broker count, under-replicated partitions, controller status
   - Consumer performance: Lag, throughput, group membership
   - Topic metrics: Message rates, partition counts, replication status
   - Resource utilization: Network I/O, JVM metrics, disk usage

## Set up alerts [#alerts]

<Callout variant="tip">
  New Relic provides pre-configured golden metric alerts for Kafka. When creating a new alert condition, select **Guided mode** → **Host integrations** → **Kafka** (brokers, cluster, or topics) to view recommended alert templates.
</Callout>

You can also create custom alerts using NRQL queries:

<CollapserGroup>
  <Collapser
    id="consumer-lag-alert"
    title="High consumer lag"
  >
    Alert when consumer lag exceeds your acceptable threshold:

    ```sql
    FROM Metric SELECT
      latest(kafka.consumer_group.lag_sum)
    WHERE kafka.cluster.name = 'production-cluster'
      AND instrumentation.provider='opentelemetry'
    FACET group
    ```

    **Recommended threshold**: Alert when lag > 10,000 messages for critical consumer groups.
  </Collapser>

  <Collapser
    id="under-replicated-alert"
    title="Under-replicated partitions"
  >
    Alert when partitions lose replication:

    ```sql
    FROM Metric SELECT
      sum(kafka.partition.under_replicated)
    WHERE kafka.cluster.name = 'production-cluster'
      AND instrumentation.provider='opentelemetry'
    ```

    **Recommended threshold**: Alert when any partitions become under-replicated (> 0).
  </Collapser>

  <Collapser
    id="offline-partitions-alert"
    title="Offline partitions"
  >
    Alert immediately when partitions go offline:

    ```sql
    FROM Metric SELECT
      latest(kafka.partition.offline)
    WHERE kafka.cluster.name = 'production-cluster'
      AND instrumentation.provider='opentelemetry'
    ```

    **Recommended threshold**: Alert immediately when any partitions go offline (> 0).
  </Collapser>

  <Collapser
    id="min-isr-alert"
    title="Partitions under minimum ISR"
  >
    Alert when partitions fall below minimum in-sync replicas:

    ```sql
    FROM Metric SELECT
      latest(kafka.partition.under_min_isr)
    WHERE kafka.cluster.name = 'production-cluster'
      AND instrumentation.provider='opentelemetry'
    FACET broker.id
    ```

    **Recommended threshold**: Alert when any partitions fall below minimum ISR (> 0).
  </Collapser>

  <Collapser
    id="jvm-memory-alert"
    title="High JVM memory usage"
  >
    Alert when heap usage is critical:

    ```sql
    FROM Metric SELECT
      (latest(jvm.memory.heap.used) / latest(jvm.memory.heap.max)) * 100
    WHERE kafka.cluster.name = 'production-cluster'
      AND instrumentation.provider='opentelemetry'
    FACET broker.id
    ```

    **Recommended threshold**: Alert when heap usage > 85% for sustained periods.
  </Collapser>

  <Collapser
    id="request-failures-alert"
    title="Request failures"
  >
    Alert on high request failure rates:

    ```sql
    FROM Metric SELECT
      rate(sum(kafka.request.failed), 1 minute)
    WHERE kafka.cluster.name = 'production-cluster'
      AND instrumentation.provider='opentelemetry'
    FACET type
    ```

    **Recommended threshold**: Alert when failure rate > 1% of total requests.
  </Collapser>

  <Collapser
    id="unclean-elections-alert"
    title="Unclean leader elections"
  >
    Alert on unclean leader elections (indicates broker failures):

    ```sql
    FROM Metric SELECT
      rate(sum(kafka.unclean.election.rate), 1 minute)
    WHERE kafka.cluster.name = 'production-cluster'
      AND instrumentation.provider='opentelemetry'
    ```

    **Recommended threshold**: Alert on any unclean leader elections (> 0).
  </Collapser>
</CollapserGroup>

## Next steps [#next-steps]

- **[Kafka metrics reference](/docs/opentelemetry/integrations/kafka/metrics-reference)** - Complete list of available metrics with descriptions
- **[Create NRQL alert conditions](/docs/alerts/create-alert/create-alert-condition/create-nrql-alert-conditions/)** - Set up proactive monitoring
- **[NRQL tutorial](/docs/query-your-data/nrql-new-relic-query-language/get-started/introduction-nrql-new-relics-query-language)** - Learn advanced querying techniques
