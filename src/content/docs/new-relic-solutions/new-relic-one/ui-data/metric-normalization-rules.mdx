---
title: Metric normalization rules
tags:
  - New Relic 
  - Use New Relic 
  - UI and data
metaDescription: How to create and manage rules in New Relic  to deal with noise from high cardinality metrics and prevent metric grouping issues (MGIs).
redirects:
  - /docs/data-ingest-apis/get-data-new-relic/metric-api/metric-normalization-rules
  - /docs/metric-normalization-rules
  - /docs/new-relic-one/use-new-relic-one/ui-data/metric-normalization-rules
  - /docs/new-relic-one/ui-data/metric-normalization-rules
freshnessValidatedDate: never
---


Metric normalization rules are vital for managing high cardinality metrics, which often arise from web transaction metrics named from URLs. These rules help reduce [Metric Grouping Issues](/docs/using-new-relic/cross-product-functions/troubleshooting/metric-grouping-issues) (MGIs), ensuring that application performance data remains meaningful. New Relic provides tools to manage these rules both automatically and manually to prevent performance degradation. For more information, see [MGIs](/docs/using-new-relic/cross-product-functions/troubleshooting/metric-grouping-issues).


To reduce high cardinality and prevent MGIs, New Relic supports rules for grouping or filtering out metric timeslice data (normalization). In some cases, when MGIs with a very high number of metrics are detected, a `DENY_NEW_METRICS` rule is created automatically to protect the platform from performance degradation. As the name suggests, any metric name previously reporting to New Relic will be unnaffected by this rule.

<Callout variant="tip">
  You can also create metric normalization rule using [NerdGraph](/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph/). For more information, refer to [NerdGraph tutorial: Metric Normalization rules](/docs/apis/nerdgraph/examples/nerdgraph-metric-normalization-rule/).
</Callout>


## Requirements [#requirements]

MGIs and metric normalization apply only to [metric timeslice data](/docs/data-apis/understand-data/new-relic-data-types/#timeslice-data). <InlinePopover type="apm"/> agents, mobile agents, and <InlinePopover type="browser"/> agent report and display metric timeslice data, making them the primary sources for metric normalization. The metric normalization rules do not affect any other events data.


## Metric normalization rules management [#create-rules]

You can create and manage new rules that deal with the noise produced from high cardinality metrics by using the metric normalization feature. 

<CollapserGroup>

    <Collapser 
    id="access-rules" 
    title="View metric normalization rules"
    >

### View metric normalization rules [#access-rules]

1. Sign in to the New Relic platform.
2. Navigate to the **left navigation pane** > **All Entities** > **Select an entity** > **Settings** > **Metric normalization**.

<img
  title="View details"
  alt="View MGI details"
  src="/images/Access_metric_rules.webp"
/>

  </Collapser>

  <Collapser 
    id="create-metric-normalization-rule" 
    title="Create a metric normalization rule"
    >

### Create a new metric normalization rule [#create-rule]

1. On the **Metric normalization rules** page, select **+ Create a new rule**.
2. Provide the following details:

  <table>
  <thead>
    <tr>
      <th>Field</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Time range</strong></td>
      <td>Select the required time range from the drop-down menu for the rule.</td>
    </tr>
    <tr>
      <td><strong>Regular expression</strong></td>
      <td>Enter the [regular expression.](https://regexone.com/) to group the metrics you want to include.</td>
    </tr>
    <tr>
      <td><strong>Regular expression matches</strong></td>
      <td>Preview the metrics matched by the [regular expression.](https://regexone.com/)</td>
    </tr>
    <tr>
      <td><strong>What do you want to do with the matches?</strong></td>
      <td>Select the action to perform on the metrics:
        <ul>
          <li><strong>Replace</strong>: Replace matched metrics with the value in the Replacement field.</li>
          <li><strong>Ignore</strong>: Ignore metrics that match the regular expression.</li>
          <li><strong>Ignore new metrics</strong>: Write only metrics that have already been reported, ignoring new matches.</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td><strong>Replacement</strong></td>
      <td>Active only when Replace is enabled. Use placeholders `(\1, \2)` for captured groups.</td>
    </tr>
    <tr>
      <td><strong>Order of rule in sequence</strong></td>
      <td>Determines the rule's precedence. Lower numbers indicate higher precedence.</td>
    </tr>
    <tr>
      <td><strong>Terminate</strong></td>
      <td>If enabled, no additional rules will be applied after this rule successfully matches a metric.</td>
    </tr>
    <tr>
      <td><strong>Active</strong></td>
      <td>Toggle to enable or disable the rule.</td>
    </tr>
    <tr>
      <td><strong>Notes</strong></td>
      <td>Notes on the rule for reference.</td>
    </tr>
  </tbody>
</table>

3. Select **Save**.

  </Collapser>

  <Collapser 
    id="update-metric-normalization-rule" 
    title="Update a metric normalization rule"
    >

### Update a metric normalization rule [#update-rule]

1. On the **Metric normalization rules** page, select the rule and click the **more icon (...)**, then select **Edit**.
2. Update the necessary details.
3. Select **Save**.

  </Collapser>

  <Collapser 
    id="Enable-metric-normalization-rule" 
    title="Enable or disable a metric normalization rule"
    >

### Enable or disable a rule [#enable-disable-rule]

On the **Metric normalization rules** page, select the rule and click the **more icon (...)**, then choose **Activate** or **Deactivate**.

  </Collapser>

</CollapserGroup>

## MGI details page [#mgi-details]

The MGI details page is a tool designed to help address Metric Grouping Issues (MGIs) effectively. It provides insights into metrics affected by various normalization rules, including `DENY_NEW_METRICS`, `REPLACE`, and `IGNORE`. This page displays the number of metrics affected by these rules and provides a timeline of when each rule went into effect, allowing for detailed analysis of metric behavior over time. It also displays when the rule went into effect and includes a time picker to review metrics before the rule activation, broken down by metric prefix.

### Features of the MGI details page [#mgi-features]

- **Blocked Metrics Overview**: Displays the number of metrics affected by the `DENY_NEW_METRICS` rule, including the rate at which metrics are blocked. Similar insights are available for `REPLACE` and `IGNORE` actions.
- **Time Picker Functionality**: Allows you to view metrics reporting before rule activation, broken down by metric prefix. This feature helps identify the source of metric growth.
- **NRQL Query Integration**: Offers a 'view in query builder' button to see the NRQL query illustrating the metric explosion just before any rule was applied. This targets Metric Timeslice data, enabling retrospective analysis up to three months.
- **Metric Pattern Identification**: Enables identification of exploding metric patterns and creation of new regex rules to manage them effectively.
- **Real-Time Status Indicators**: Includes widgets showing the current status of normalization rules, with indicators changing from 'Active' to 'Mitigated' as rules manage metric growth.
- **Rule Modification Capability**: Allows users to deactivate their own `DENY_NEW_METRICS` rules directly from the MGI Details page, as well as modify `REPLACE` and `IGNORE` rules without support tickets.

### Access the MGI details page [#access-mgi]

On the Metric normalization page, select the rule and click the **more icon (...)**, then choose **MGI details**.

<img
  title="View details"
  alt="View MGI details"
  src="/images/metric-details.webp"
/>

### Example use case [#example-use-case]

In the above example, the MGI details page displays that 1.1 million unique metric names are blocked by the `DENY_NEW_METRICS` rule at a rate of 738 metrics per minute. The majority of this growth is traced to the namespace `WebTransaction/Uri/RESTfulExample/users/username/`. By viewing the NRQL query, you can pinpoint the source of the explosion, allowing you to create a new rule to manage the metrics effectively.