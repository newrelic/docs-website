---
title: 'EntityStorageMutation'
metaDescription: 'Learn how to work the EntityStorageMutation component'
freshnessValidatedDate: 2024-06-03
---

Save, delete, or update an entity scoped document in NerdStorage. In order to successfully perform this operation, the user must have the right permissions.

### Usage

```js
import { EntityStorageMutation } from 'nr1'
```

### Examples

#### Write document

```js
EntityStorageMutation.mutate({
  entityGuid: 'MTIzNDU2fEZPT3xCQVJ8OTg3NjU0Mzcz',
  actionType: EntityStorageMutation.ACTION_TYPE.WRITE_DOCUMENT,
  collection: 'myCollection',
  documentId: 'myDocumentId',
  document: {
    name: 'John',
    surname: 'Doe',
  },
});
```

#### Delete document

```js
EntityStorageMutation.mutate({
  entityGuid: 'MTIzNDU2fEZPT3xCQVJ8OTg3NjU0Mzcz',
  actionType: EntityStorageMutation.ACTION_TYPE.DELETE_DOCUMENT,
  collection: 'myCollection',
  documentId: 'myDocumentId',
});
```

#### Delete collection

```js
EntityStorageMutation.mutate({
  entityGuid: 'MTIzNDU2fEZPT3xCQVJ8OTg3NjU0Mzcz',
  actionType: EntityStorageMutation.ACTION_TYPE.DELETE_COLLECTION,
  collection: 'myCollection',
});
```

### Props

<table>
  <tbody>
    <tr>
      <td>
        `actionType` <h5>REQUIRED</h5><h5>enum</h5>
      </td>

      <td>
        Type of action to perform.

        <OptionReference>
          EntityStorageMutation.ACTION_TYPE.DELETE_COLLECTION,
          EntityStorageMutation.ACTION_TYPE.DELETE_DOCUMENT,
          EntityStorageMutation.ACTION_TYPE.WRITE_DOCUMENT,
        </OptionReference>
      </td>
    </tr>

    <tr>
      <td>
        `children` <h5>REQUIRED</h5><h5>function</h5>
      </td>

      <td>
        Render prop function as children.

        <FunctionDefinition
          returnValue={[{"type":"React.ReactNode","description":""}]}
          arguments={[{"name":"mutate","type":"function","description":"Function to trigger a mutation from your UI."},{"name":"mutationResult","type":"MutationResult","description":"Results of the mutation."}]}
        />
      </td>
    </tr>

    <tr>
      <td>
        `collection` <h5>REQUIRED</h5><h5>string</h5>
      </td>

      <td>
        Collection name.
      </td>
    </tr>

    <tr>
      <td>
        `document` <h5>object</h5>
      </td>

      <td>
        NerdStorage document. Documents are restricted to 64 kB in size when JSON-stringified.
      </td>
    </tr>

    <tr>
      <td>
        `documentId` <h5>string</h5>
      </td>

      <td>
        Document identifier to operate in. When omitted the whole collection is returned.
      </td>
    </tr>

    <tr>
      <td>
        `entityGuid` <h5>REQUIRED</h5><h5>string</h5>
      </td>

      <td>
        GUID of the entity in which the collection is operated.
      </td>
    </tr>

    <tr>
      <td>
        `scopeByActor` <h5>boolean</h5>
      </td>

      <td>
        Establishes whether the data needs to be scoped by actor or not; that is, whether the data read or saved is common to everybody having access to the object, or it is exclusive of the user.An object (entity or account) can have both "global" data and "scoped" data, and the data read will depend on the status of the flag.
      </td>
    </tr>
  </tbody>
</table>

### Methods

### `EntityStorageMutation.mutate`

<FunctionDefinition
  arguments={[{"description":"Object containing the mutation options. Any `EntityStorageMutation` prop is a valid option except `children`.","name":"props","type":"Object"}]}
  returnValue={{"description":"","type":"PromiseQueryResult"}}
/>

### Type definitions

<TypeDefReference typeDef={{"name":"PromiseQueryResult","properties":[{"description":"Runtime error with `graphQLErrors` and `networkError` properties.","name":"error","type":"ApolloClient.ApolloError"},{"description":"Object containing the result of your query.","name":"data","type":"Object"},{"description":"If not `null`, `fetchMore` allows you to load more results for your query. New data is merged with previous data.","name":"fetchMore","type":"function|null"},{"description":"Refetch the query.","name":"refetch","type":"function"}]}}/>

<TypeDefReference typeDef={{"name":"MutationResult","properties":[{"description":"Indicates that the request is in flight.","name":"loading","type":"boolean"},{"description":"Runtime error with `graphQLErrors` and `networkError` properties.","name":"error","type":"ApolloClient.ApolloError"},{"description":"Object containing the result of your mutation.","name":"data","type":"Object"}]}}/>
