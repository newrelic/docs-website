---
title: "Introduction to AWS Lambda monitoring"
metaDescription: This provides an overview of New Relic's AWS Lambda monitoring and details how to link your accounts.
redirects:
  - /docs/serverless-function-monitoring/aws-lambda-monitoring/enable-lambda-monitoring/configure-serverless-monitoring-aws-lambda
  - /docs/serverless-function-monitoring/aws-lambda-monitoring/enable-lambda-monitoring/account-linking
  - /docs/serverless-function-monitoring/aws-lambda-monitoring/enable-lambda-monitoring/set-up-cloudwatch-logs
  - /docs/serverless-function-monitoring/aws-lambda-monitoring/enable-lambda-monitoring/enable-aws-lambda-monitoring
  - /docs/serverless-function-monitoring/aws-lambda-monitoring/enable-lambda-monitoring/instrument-example
  - /docs/serverless-function-monitoring/aws-lambda-monitoring/get-started/architecture
  - /docs/serverless-function-monitoring/aws-lambda-monitoring/get-started/compatibility-requirements-aws-lambda-monitoring
  - /docs/serverless-function-monitoring/aws-lambda-monitoring/get-started/monitoring-aws-lambda-serverless-monitoring
  - /docs/serverless-function-monitoring/aws-lambda-monitoring/instrument-lambda-function/configure-serverless-aws-monitoring
  - /docs/serverless-function-monitoring/aws-lambda-monitoring/instrument-lambda-function/cloud-watch-fallback
freshnessValidatedDate: never
---
New Relic's instrumentation for AWS Lambda offers deep visibility into the inner workings of your functions. By adding the New Relic agent to your function, each invocation is monitored by New Relic. This enables you to track the duration of function invocations, monitor errors, and record details about the source events and your function's responses.
<img
  title="new-relic-lambda-entities-screenshot.png"
  alt="new-relic-lambda-entities-screenshot.png"
  src="/images/lambda_overview.webp"
/>


{/* ## Shipping methods for Lambda telemetry [#shipping-methods]

There are three primary methods to ship telemetry data from AWS Lambda to New Relic, each with its own cost and reliability considerations:

* **Cost-Effective Method**: Utilize New Relic's layers, including the Lambda extension, which avoids sending data to AWS CloudWatch by default.
* **Reliability-Focused Method**: Disable the New Relic Lambda extension and use CloudWatch exclusively to ship data, reducing the Lambda function's overhead.
* **Hybrid Method**: Combine the extension with CloudWatch as a fallback, balancing cost efficiency with reliability.

## Cost consideration [#costs]

Implementing serverless monitoring for AWS Lambda may incur additional AWS charges. The `newrelic-log-ingestion` Lambda function, which reports data to New Relic, is considered a third-party service, and any associated AWS charges are the user's responsibility. 
By using the [`newrelic-lambda-extension`](https://github.com/newrelic/newrelic-lambda-extension) included in [New Relic Lambda layers](https://github.com/newrelic/newrelic-lambda-layers), you can avoid sending logs and telemetry data via CloudWatch, although configuring the `newrelic-log-ingestion` function as a CloudWatch fallback is possible for high availability needs.

Enabling serverless monitoring for AWS Lambda may result in Amazon Web Services charges. Our `newrelic-log-ingestion` Lambda function, which reports your Lambda data to us, is considered a [Third Party Service](/docs/licenses/license-information/acceptable-use-policy/acceptable-use-policy): AWS charges resulting from your use of it are your responsibility.

If you use our [newrelic-lambda-extension](https://github.com/newrelic/newrelic-lambda-extension) bundled in our [New Relic Lambda Layers](https://github.com/newrelic/newrelic-lambda-layers), you can avoid sending logs and telemetry via CloudWatch and the [newrelic-log-ingestion](https://github.com/newrelic/aws-log-ingestion) function. It's also possible to configure the [newrelic-log-ingestion](https://github.com/newrelic/aws-log-ingestion) function as a [CloudWatch fallback](/docs/serverless-function-monitoring/aws-lambda-monitoring/instrument-lambda-function/cloud-watch-fallback/) method for functions that require high availability of observability data. */}


## How you can configure AWS Lambda monitoring? [#config]

To monitor your AWS Lambda with New Relic, you can configure instrumentation across different environments, runtimes, and deployment methods. The following steps guide you through the configuration process:

<Steps>

<Step>
### Compatibility and requirements [#req]
Ensure that your AWS Lambda meets our [compatibility and requirements](/docs/serverless-function-monitoring/aws-lambda-monitoring/instrument-lambda-function/compatibility-requirement-lambda-monitoring).
</Step>

<Step>
### (Optional) Link your AWS account to New Relic [#link]

By linking accounts, you're granting New Relic permission to create an inventory of your AWS account and automatically gather CloudWatch metrics for your Lambda functions. 
After you've linked accounts, resources in your AWS account appear as entities in the [entity explorer](/docs/new-relic-solutions/new-relic-one/core-concepts/new-relic-explorer-view-performance-across-apps-services-hosts/#find). Lambda function entities will be found in the Serverless Functions view.

You can link your AWS and New Relic account by one of the following integration methods.

<Tabs>
  <TabsBar>
    <TabsBarItem id="1">AWS Metric Streams(recommended)</TabsBarItem>
    <TabsBarItem id="2">API Polling</TabsBarItem>
  </TabsBar>

  <TabsPages>
    <TabsPageItem id="1">
    For New Relic to monitor your Lambda functions, you need to set up an integration between New Relic and AWS. We recommend using [Metric Streams](/docs/infrastructure/amazon-integrations/connect/aws-metric-stream) to help reduce latency and avoid throttling of our polling requests.
    
    </TabsPageItem>
    <TabsPageItem id="2">
    If you're not using a Metric Streams integration, you can choose to set up an [API Polling](/docs/infrastructure/amazon-integrations/connect/connect-aws-new-relic-infrastructure-monitoring) integration instead. By default, an API Polling integration with the Lambda service enabled will poll every 5 minutes for CloudWatch metrics.

You can use the [newrelic-lambda-cli](https://github.com/newrelic/newrelic-lambda-cli) to set up an API Polling integration, but not a Metric Streams integration.

```sh
newrelic-lambda integrations install --nr-account-id YOUR_NR_ACCOUNT_ID \
--nr-api-key YOUR_NEW_RELIC_USER_KEY
```
One step in the [integrations install command](https://github.com/newrelic/newrelic-lambda-cli?tab=readme-ov-file#aws-lambda-integration) will create a `NEW_RELIC_LICENSE_KEY` secret in [AWS Secrets Manager](https://aws.amazon.com/secrets-manager/) for improved security. This is configurable with a `--disable-license-key-secret` flag, along with other options and flags.
    </TabsPageItem>
  </TabsPages>
</Tabs>
</Step>

<Step>
### Instrument your AWS Lambda function [#instrument]

To instrument your Lambda function, you need an agent, and an extension. These components are bundled together in the New Relic [Lambda layer](https://github.com/newrelic/newrelic-lambda-layers). If using Lambda layers isn't an option for you, you can manually incorporate the agent and extension into your function.
Based on the requirement of your Lambda function, select one of the following instrumention methods:

<Tabs>
  <TabsBar>
    
    <TabsBarItem id="layered-instrumentation">Layered instrumentation</TabsBarItem>
    <TabsBarItem id="sdk-based-instrumentation">SDK based instrumentation</TabsBarItem>
    <TabsBarItem id="containerized-instrumentation">Containerized instrumentation</TabsBarItem>
  </TabsBar>

  <TabsPages>

    <TabsPageItem id="layered-instrumentation">
    Use this method if your Lambda function is packaged as a Zip file and you can add layers. Layers are distribution mechanism for libraries, custom runtimes, and other dependencies. For more information, refer to [Layered instrumentation](/docs/serverless-function-monitoring/aws-lambda-monitoring/instrument-lambda-function/instrument-your-own/) documentation.
    </TabsPageItem>
    <TabsPageItem id="sdk-based-instrumentation">
    Use this method if your Lambda function can't use layers, ensuring quick deployment without the necessity to modify layers. For more information, refer to [SDK based instrumentation](/docs/serverless-function-monitoring/aws-lambda-monitoring/instrument-lambda-function/sdk-based-instrumentation/) documentation.
    </TabsPageItem>
    <TabsPageItem id="containerized-instrumentation">
    Use this method if your Lambda function runs inside a container. Containers provide a consistent, isolated execution environment for your applications. New Relic provides a pre-built Docker image that includes the New Relic Lambda layer, the New Relic Lambda extension, and the New Relic agent. For more information, refer to [Containerized instrumentation](/docs/serverless-function-monitoring/aws-lambda-monitoring/instrument-lambda-function/containerized-images/) documentation.
    
    </TabsPageItem>
    
  </TabsPages>
</Tabs>

</Step>

<Step>

### Configure environment variables [#env-variables]

<Callout variant="tip">
* When you instrument New Relic's Lambda layer with the New Relic CLI, your mandatory environment variables are configured automatically. However, you may want to change some of the default settings and configure your Lambda functions with the environment variables that match your monitoring needs.
* If you're using the New Relic Lambda extension, you need to configure the environment variables manually.
</Callout>

[Environment variables](/docs/serverless-function-monitoring/aws-lambda-monitoring/instrument-lambda-function/env-variables-lambda) are used to configure the New Relic agent and Lambda extension. It's important to set these variables correctly to ensure that your Lambda functions are monitored correctly.

</Step>

<Step>

### Find your data in New Relic [#data]

After you instrument your AWS Lambda functions, you can find and use the data in the New Relic APM interface. The data is organized into several key areas, each providing different insights into the performance and health of your Lambda functions.


</Step>

</Steps>


## Try our example functions [#example]

After you've instrumented New Relic's Lambda layer, we strongly recommend trying out our example functions. These working examples should be used as a starting point for instrumenting your own serverless functions. Using these examples can help you become familiar with the the New Relic Lambda layer, testing the account link, and they can be used as a reference for your own instrumentation. Each example demonstrates adding permissions, runtime-specific techniques for wrapping your handler, managing function log retention in CloudWatch, and more.

While there are many ways to manage and deploy Lambda functions, AWS CloudFormation is the mechanism we use for our examples.

Our examples are published, alongside the New Relic Lambda Extension, in this
[GitHub repository](https://github.com/newrelic/newrelic-lambda-extension). There's one for each Lambda runtime New Relic supports:

* [Node.js](https://github.com/newrelic/newrelic-lambda-extension/tree/main/examples/sam/node)
* [Python](https://github.com/newrelic/newrelic-lambda-extension/tree/main/examples/sam/python)
* [Go](https://github.com/newrelic/newrelic-lambda-extension/tree/main/examples/sam/go)
* [Java](https://github.com/newrelic/newrelic-lambda-extension/tree/main/examples/sam/java)
* [Ruby](https://github.com/newrelic/newrelic-lambda-extension/tree/main/examples/sam/ruby)
* [.NET](https://github.com/newrelic/newrelic-lambda-extension/tree/main/examples/sam/dotnet)


You can also learn how to instrument distributed tracing into a non-trivial serverless application in our [distributed tracing example](https://github.com/newrelic/newrelic-lambda-extension/tree/main/examples/sam/distributedtracing). It illustrates manual trace propagation for SQS and SNS, two of the more popular services that might invoke Lambda functions, with Node, Python, Ruby and Java functions.

<Callout variant="tip">
    When manually testing, telemetry data can be delayed. We recommend waiting seven seconds before invoking the function again, allowing any buffered telemetry to be delivered.
</Callout>



<DocTiles>
  <DocTile title="Compatibility and requirement" path="/docs/serverless-function-monitoring/aws-lambda-monitoring/instrument-lambda-function/compatibility-requirement-lambda-monitoring">Learn more about supported runtimes and prerequisites.</DocTile>
  <DocTile title="Layered instrumentation" path="/docs/serverless-function-monitoring/aws-lambda-monitoring/instrument-lambda-function/instrument-your-own" > Instrument your Lambda functions with New Relic's layered approach.</DocTile>
  <DocTile title="SDK instrumentation" path="/docs/serverless-function-monitoring/aws-lambda-monitoring/instrument-lambda-function/sdk-based-instrumentation" > Instrument your Lambda functions using SDK.</DocTile>
  <DocTile title="Containerized instrumentation" path="/docs/serverless-function-monitoring/aws-lambda-monitoring/instrument-lambda-function/containerized-images" > Instrument your Lambda functions with New Relic's containerized approach.</DocTile>
  
</DocTiles>