---
title: Set up connectors
tags:
  - New Relic Lens
  - Connectors
  - Connect to Snowflake
  - Connect to PostgreSQL
  - Connect to MySQL
  - Connect to Redshift
  - Connect to Google Sheets
  - Connect to Iceberg
  - Connect to Prometheus
  - Connect to MongoDB
  - Connect to Elasticsearch
  - Connect to AWS CloudWatch
  - Connect to ClickHouse
  - Connect to SQL Server
metaDescription: "Learn about Lens connectors, including system connectors for NRDB data and how to configure data connectors for external sources."
freshnessValidatedDate: never
---

<Callout title="preview">
  We're still working on this feature, but we'd love for you to try it out!

  This feature is currently provided as part of a preview program pursuant to our [pre-release policies](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy). To enable <DNT>**Lens**</DNT>, check with your <dnt>Organization Manager</dnt> to opt in from the <DNT>**[Previews & Trials](https://one.newrelic.com/admin-portal/promotion-management/home)**</DNT> page.
</Callout>

Before querying data with [<DNT>**Lens**</DNT>](/docs/new-relic-lens/overview), you need to set up connections to your data sources. <DNT>**Lens**</DNT> provides both <dnt>system connectors</dnt> for accessing NRDB data and <dnt>data connectors</dnt> for connecting to external databases and other data sources.

## <dnt>System connectors</dnt> [#system-connectors]

<DNT>**Lens**</DNT> provides three <dnt>system connectors</dnt> for accessing NRDB data. These <dnt>connectors</dnt> are available automatically and don't require any setup.

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}><dnt>Connector</dnt></th>
      <th>Description</th>
      <th style={{ width: "200px" }}>Access level</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><dnt>**Telemetry**</dnt></td>
      <td>Access telemetry data from NRDB, such as transactions, logs, and metrics.</td>
      <td>Account level. You can only access data from accounts where you have permissions.</td>
    </tr>
    <tr>
      <td><dnt>**Entity**</dnt></td>
      <td>Access entity data from NRDB, including services, hosts, and applications.</td>
      <td>Account level. You can only access data from accounts where you have permissions.</td>
    </tr>
    <tr>
      <td><DNT>**Materialized views**</DNT></td>
      <td>Access <dnt>materialized view</dnt> data stored in NRDB (results from queries joining multiple databases).</td>
      <td>Organization level. All users with <DNT>**Lens**</DNT> access can query <dnt>materialized views</dnt>.</td>
    </tr>
  </tbody>
</table>

## <dnt>Data connectors</dnt> [#data-connectors]

<dnt>Data connectors</dnt> connect <DNT>**Lens**</DNT> to external data sources like databases, data warehouses, and spreadsheets. After you create a <dnt>connector</dnt>, it's available at the organization level for users with query permissions. To create, edit, or delete <dnt>connectors</dnt>, you need [specific RBAC permissions](/docs/new-relic-lens/overview#permissions).

While creating a <dnt>connector</dnt>, you can configure fine-grained access control to restrict which users or groups can query that <dnt>connector</dnt>. RBAC permissions always take precedence over fine-grained access control settingsâ€”if a user lacks the required <DNT>**Lens**</DNT> permissions, they can't query <dnt>connectors</dnt> even if granted access through fine-grained access control.

### Create a <dnt>connector</dnt> [#create-connector]

To set up a <dnt>data connector</dnt>:

1. Go to <DNT>**[one.newrelic.com](https://one.newrelic.com) > Administration > Connectors**</DNT>.
2. Click <DNT>**Create a connector**</DNT>.
3. Select your <dnt>connector</dnt> type from the dropdown menu.
4. Enter the required connection information for your selected <dnt>connector</dnt> type.
5. (Optional) To restrict who can query this <dnt>connector</dnt>, configure fine-grained access control. From the <DNT>**Access control**</DNT> section:
   1. Select the <dnt>**Auth domain**</dnt> containing the users or groups.
   2. Select the <dnt>**User or group**</dnt>.
   3. Select the <DNT>**Lens Viewer**</DNT> role. This role grants permissions only to query this <dnt>connector</dnt> but not manage it.
   4. To add multiple access grants, click <dnt>**Add**</dnt> and repeat the steps.

6. Click <dnt>**Create**</dnt>.

After you create a <dnt>connector</dnt>, to view its schema or delete it, select the <Icon name="fe-more-horizontal"/> menu from the <dnt>connector</dnt> row. To edit a <dnt>connector</dnt>, click the <dnt>connector</dnt> row.

## <dnt>Connector</dnt> configurations [#connector-configs]

Select your <dnt>connector</dnt> type to view the required fields.

<CollapserGroup>

  <Collapser id="google-sheets-connector" title="Google Sheets connector">
    Connect to Google Sheets to query spreadsheet data directly from <DNT>**Lens**</DNT>.

    <table>
      <thead>
        <tr>
          <th>Parameter</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>**Name**</td>
          <td>A unique name to identify this <dnt>connector</dnt> when writing queries. For example, `gsheets` or `employee_data`.</td>
        </tr>
        <tr>
          <td>**credential_key**</td>
          <td>The base64-encoded JSON key for your Google Cloud service account. This authenticates <DNT>**Lens**</DNT> with Google Sheets API. See [Generate the service account credentials key](#generate-credentials-key) for instructions.</td>
        </tr>
        <tr>
          <td>**sheet_id**</td>
          <td>The ID of your metadata Google Sheet that contains information about all the sheets you want to access through <DNT>**Lens**</DNT>. See [Set up Google Sheets access](#setup-gsheets-access) for instructions.</td>
        </tr>
      </tbody>
    </table>

    ### Generate the service account credentials key [#generate-credentials-key]

    To authenticate <DNT>**Lens**</DNT> with Google Sheets, you need to create a Google Cloud service account and generate a JSON key.

    <Steps>
      <Step>
        ### Create a service account [#create-service-account]

        To create a Google Cloud service account, follow the instructions in [Create service accounts](https://cloud.google.com/iam/docs/service-accounts-create).
      </Step>

      <Step>
        ### Set up permissions for key creation [#set-up-permissions]

        To create keys for your service account, you need the appropriate permissions. For information on the required permissions, see [Required permissions](https://cloud.google.com/iam/docs/keys-create-delete#required-permissions).
      </Step>

      <Step>
        ### Create a JSON key [#create-json-key]

        To generate a JSON key for your service account, follow the steps in [Create a service account key](https://cloud.google.com/iam/docs/keys-create-delete#creating).
      </Step>

      <Step>
        ### Convert the JSON key to base64 [#convert-json-key-to-base64]

        To use the JSON key in <DNT>**Lens**</DNT>, convert the entire contents of the JSON file to base64 encoding and save it in a text file.
      </Step>
    </Steps>

    ### Set up Google Sheets access [#setup-gsheets-access]

    After you've generated the credentials key, configure access to your Google Sheets.

    <Steps>
      <Step>
        ### Share your sheets with the service account [#share-sheets-with-service-account]

        To allow <DNT>**Lens**</DNT> to access your data, grant read permissions to the service account email address for each Google Sheet you want to connect.
      </Step>

      <Step>
        ### Create a metadata sheet [#create-metadata-sheet]

        To manage the sheets available to <DNT>**Lens**</DNT>, create a new Google Sheet with the following four columns:

        * **Sheetname**: The name of each sheet you want to access with <DNT>**Lens**</DNT>. All listed sheets must be accessible by the service account.
        * **Sheetid**: The unique identifier for each sheet. You can find this in the sheet URL: `https://docs.google.com/spreadsheets/d/SHEET_ID/edit`.
        * **Owner**: The owner of the sheet. Use `Trino` as the default value.
        * **Notes**: Any additional notes or descriptions for the sheet.
      </Step>

      <Step>
        ### Share the metadata sheet [#share-metadata-sheet]

        To allow <DNT>**Lens**</DNT> to read the metadata, grant read permission to your service account for the metadata sheet.
      </Step>

      <Step>
        ### Copy the metadata sheet ID [#copy-metadata-sheet-id]

        To configure the <dnt>connector</dnt>, copy the sheet ID from the metadata sheet URL. The sheet ID appears in the URL as: `https://docs.google.com/spreadsheets/d/SHEET_ID/edit`.
      </Step>
    </Steps>
  </Collapser>

  <Collapser id="iceberg-connector" title="Iceberg connector">
    Connect to Apache Iceberg tables stored in AWS using Glue Data Catalog for metadata management.

    <table>
      <thead>
        <tr>
          <th>Parameter</th>
          <th>Description</th>
          <th>Sample value</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>**Name**</td>
          <td>A unique name to identify this <dnt>connector</dnt> when writing queries.</td>
          <td>`CostDB`, `Customermetadata`</td>
        </tr>
        <tr>
          <td>**aws_region**</td>
          <td>The AWS region where your Iceberg tables are stored. Get this from your infrastructure team.</td>
          <td>`us-east-2`</td>
        </tr>
        <tr>
          <td>**glue_catalog_id**</td>
          <td>Your 12-digit AWS Account ID that uniquely identifies your Glue Data Catalog within the region. Find this in the AWS Console under **Account Settings**.</td>
          <td>`123456789012`</td>
        </tr>
        <tr>
          <td>**aws_iam_role_arn**</td>
          <td>The Amazon Resource Name (ARN) of an IAM role that grants <DNT>**Lens**</DNT> access to your Glue Catalog and S3 bucket. See [Grant <DNT>**Lens**</DNT> access to your AWS resources](#grant-iceberg-access) for setup instructions.</td>
          <td>`arn:aws:iam::123456789012:role/ExampleRole`</td>
        </tr>
        <tr>
          <td>**aws_iam_external_id**</td>
          <td>The external ID you configured in your IAM role's trust policy. See [Grant <DNT>**Lens**</DNT> access to your AWS resources](#grant-iceberg-access) for setup instructions.</td>
          <td>`a1b2c3d4-e5f6-7890-1234-567890abcdef`</td>
        </tr>
      </tbody>
    </table>

    ### Grant <DNT>**Lens**</DNT> access to your AWS resources [#grant-iceberg-access]

    To allow <DNT>**Lens**</DNT> to query your Iceberg tables, create an IAM policy and role in your AWS account that grants read access to your Glue Data Catalog and S3 bucket.

    <Callout variant="important">
    The Glue Data Catalog and the S3 bucket containing your Iceberg data must be in the same AWS region.
    </Callout>

    <Steps>
      <Step>
        ### Create an IAM policy [#create-iceberg-policy]

        [Create an IAM policy](https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_create.html) with the following permissions to allow <DNT>**Lens**</DNT> to read the Glue metadata and the data files in S3. Replace `{REGION}`, `{ACCOUNT_ID}`, `{DATABASE_NAME}`, and `{S3_BUCKET_NAME}` with your values. Note the policy name you enter, as you'll need it to attach this policy to the IAM role.

        ```json
        {
          "Version": "2012-10-17",
          "Statement": [
            {
              "Action": [
                "glue:GetDatabase",
                "glue:GetTable",
                "glue:GetTables",
                "glue:SearchTables",
                "glue:GetPartition",
                "glue:GetPartitions",
                "glue:BatchGetPartition"
              ],
              "Effect": "Allow",
              "Resource": [
                "arn:aws:glue:{REGION}:{ACCOUNT_ID}:catalog",
                "arn:aws:glue:{REGION}:{ACCOUNT_ID}:database/{DATABASE_NAME}",
                "arn:aws:glue:{REGION}:{ACCOUNT_ID}:table/*"
              ]
            },
            {
              "Action": [
                "s3:GetObject",
                "s3:ListBucket",
                "s3:GetBucketLocation"
              ],
              "Effect": "Allow",
              "Resource": [
                "arn:aws:s3:::{S3_BUCKET_NAME}",
                "arn:aws:s3:::{S3_BUCKET_NAME}/*"
              ]
            }
          ]
        }
        ```
      </Step>

      <Step>
        ### Create an IAM role with a trust relationship [#create-iceberg-role]

        [Create an IAM role](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create.html) and configure the trust relationship to allow the <DNT>**Lens**</DNT> service account to assume it using a unique external ID. When setting up the role, use these values:

        * **Trusted entity type**: AWS account
        * **Account ID**: `017663287629` (New Relic's AWS account)
        * **Require external ID**: Enabled. Enter a unique string of your choice and save it for the <DNT>**Lens**</DNT> <dnt>connector</dnt> configuration.
        * **Permissions policy**: Search for the policy name you created in the previous step and select it.

        The trust policy should match the following format. Replace `<YOUR_EXTERNAL_ID>` with the external ID you entered.

        ```json
        {
          "Version": "2012-10-17",
          "Statement": [
            {
              "Effect": "Allow",
              "Principal": {
                "AWS": "arn:aws:iam::017663287629:user/service_fdp_customer_account_data_access"
              },
              "Action": "sts:AssumeRole",
              "Condition": {
                "StringEquals": {
                  "sts:ExternalId": "<YOUR_EXTERNAL_ID>"
                }
              }
            }
          ]
        }
        ```

        After creating the role, open the role's summary page and copy the **Role ARN**. You'll need this ARN and the external ID when configuring the <DNT>**Lens**</DNT> <dnt>connector</dnt>.
      </Step>
    </Steps>
  </Collapser>

  <Collapser id="snowflake-connector" title="Snowflake connector">
    Connect to Snowflake data warehouses to query your cloud data.

    <table>
      <thead>
        <tr>
          <th>Parameter</th>
          <th>Description</th>
          <th>Sample value</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>**Name**</td>
          <td>A unique name to identify this <dnt>connector</dnt> when writing queries.</td>
          <td>`Employeedata`</td>
        </tr>
        <tr>
          <td>**username**</td>
          <td>Your Snowflake username for authentication.</td>
          <td>`user123`</td>
        </tr>
        <tr>
          <td>**password**</td>
          <td>The password for your Snowflake user.</td>
          <td>`password@123`</td>
        </tr>
        <tr>
          <td>**connection-url**</td>
          <td>The JDBC URL to connect to Snowflake. Format: `jdbc:snowflake://ACCOUNT.snowflakecomputing.com`.</td>
          <td>`jdbc:snowflake://ACCOUNT.snowflakecomputing.com`</td>
        </tr>
        <tr>
          <td>**account**</td>
          <td>Your Snowflake account identifier. Find this in your Snowflake URL or in the Snowflake Console under **Admin** > **Accounts**.</td>
          <td>`ACCOUNT`</td>
        </tr>
        <tr>
          <td>**database**</td>
          <td>The name of the Snowflake database you want to connect to.</td>
          <td>`DATABASE`</td>
        </tr>
        <tr>
          <td>**role**</td>
          <td>The Snowflake role assigned to your user. This determines your access permissions.</td>
          <td>`ROLE`</td>
        </tr>
        <tr>
          <td>**warehouse**</td>
          <td>The name of the Snowflake warehouse to use for compute resources.</td>
          <td>`WAREHOUSE`</td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="postgresql-connector" title="PostgreSQL connector">
    Connect to PostgreSQL databases to query your relational data.

    <table>
      <thead>
        <tr>
          <th>Parameter</th>
          <th>Description</th>
          <th>Sample value</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>**Name**</td>
          <td>A unique name to identify this <dnt>connector</dnt> when writing queries.</td>
          <td>`salesdata`</td>
        </tr>
        <tr>
          <td>**connection-url**</td>
          <td>The JDBC URL to connect to PostgreSQL. Format: `jdbc:postgresql://[host]:[port]/[database]`.</td>
          <td>`jdbc:postgresql://cluster.amazonaws.com:5432/test_db`</td>
        </tr>
        <tr>
          <td>**username**</td>
          <td>Your PostgreSQL database username.</td>
          <td>`username`</td>
        </tr>
        <tr>
          <td>**password**</td>
          <td>The password for your PostgreSQL user.</td>
          <td>`password`</td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="mysql-connector" title="MySQL connector">
    Connect to MySQL databases to query your relational data.

    <table>
      <thead>
        <tr>
          <th>Parameter</th>
          <th>Description</th>
          <th>Sample value</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>**Name**</td>
          <td>A unique name to identify this <dnt>connector</dnt> when writing queries.</td>
          <td>`CRMdata`</td>
        </tr>
        <tr>
          <td>**connection-url**</td>
          <td>The JDBC URL to connect to MySQL. Format: `jdbc:mysql://[host]:[port]/[database]`.</td>
          <td>`jdbc:mysql://test-db-mysql.cluster-cl3aokvievxs.us-east-2.rds.amazonaws.com:3306/test_db`</td>
        </tr>
        <tr>
          <td>**username**</td>
          <td>Your MySQL database username.</td>
          <td>`username`</td>
        </tr>
        <tr>
          <td>**password**</td>
          <td>The password for your MySQL user.</td>
          <td>`password`</td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="redshift-connector" title="Redshift connector">
    Connect to Amazon Redshift data warehouses to query your analytics data.

    <table>
      <thead>
        <tr>
          <th>Parameter</th>
          <th>Description</th>
          <th>Sample value</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>**Name**</td>
          <td>A unique name to identify this <dnt>connector</dnt> when writing queries.</td>
          <td>`AppDB`</td>
        </tr>
        <tr>
          <td>**connection-url**</td>
          <td>The JDBC URL to connect to Redshift. Format: `jdbc:redshift://[host]:[port]/[database]`.</td>
          <td>`jdbc:redshift://example.net:5439/database`</td>
        </tr>
        <tr>
          <td>**username**</td>
          <td>Your Redshift database username.</td>
          <td>`root`</td>
        </tr>
        <tr>
          <td>**password**</td>
          <td>The password for your Redshift user.</td>
          <td>`password`</td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="prometheus-connector" title="Prometheus connector">
    Connect to Prometheus to query your metrics data.

    <table>
      <thead>
        <tr>
          <th>Parameter</th>
          <th>Description</th>
          <th>Sample value</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>**Name**</td>
          <td>A unique name to identify this <dnt>connector</dnt> when writing queries.</td>
          <td>`MetricsDB`</td>
        </tr>
        <tr>
          <td>**uri**</td>
          <td>The URL of your Prometheus server.</td>
          <td>`http://localhost:9090`</td>
        </tr>
        <tr>
          <td>**username** (optional)</td>
          <td>Username for basic authentication if your Prometheus server requires it.</td>
          <td>`username`</td>
        </tr>
        <tr>
          <td>**password** (optional)</td>
          <td>Password for basic authentication.</td>
          <td>`password`</td>
        </tr>
        <tr>
          <td>**query_chunk_duration** (optional)</td>
          <td>The duration of each query chunk sent to Prometheus. Smaller chunks reduce memory usage but increase the number of requests.</td>
          <td>`1d`</td>
        </tr>
        <tr>
          <td>**max_query_range** (optional)</td>
          <td>The maximum time range for queries. <DNT>**Lens**</DNT> divides this range into chunks based on `query_chunk_duration`.</td>
          <td>`21d`</td>
        </tr>
        <tr>
          <td>**cache_ttl** (optional)</td>
          <td>How long to cache values from this data source before refreshing.</td>
          <td>`30s`</td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="mongodb-connector" title="MongoDB connector">
    Connect to MongoDB databases to query your document data.

    <Callout variant="important">
      You can't read your connection URL after it's set because it contains sensitive information, such as your password.
    </Callout>

    <table>
      <thead>
        <tr>
          <th>Parameter</th>
          <th>Description</th>
          <th>Sample value</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>**Name**</td>
          <td>A unique name to identify this <dnt>connector</dnt> when writing queries.</td>
          <td>`CustomerDB`</td>
        </tr>
        <tr>
          <td>**connection-url**</td>
          <td>The MongoDB connection string. Format: `mongodb://<user>:<pass>@<host>:<port>/`. Both username and password must be URL encoded.</td>
          <td>`mongodb://user:pass@cluster.mongodb.net:27017/`</td>
        </tr>
      </tbody>
    </table>

    **For MongoDB Atlas users**: The username and password you enter in <DNT>**Lens**</DNT> are your **Database User** credentials, not the credentials you use to log into the Atlas web UI.

    **URL encoding**: Your username and password must be URL encoded.
  </Collapser>

  <Collapser id="elasticsearch-connector" title="Elasticsearch connector">
    Connect to Elasticsearch to query your search and analytics data.

    <table>
      <thead>
        <tr>
          <th>Parameter</th>
          <th>Description</th>
          <th>Sample value</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>**Name**</td>
          <td>A unique name to identify this <dnt>connector</dnt> when writing queries.</td>
          <td></td>
        </tr>
        <tr>
          <td>**host**</td>
          <td>The hostname or IP address of your Elasticsearch server.</td>
          <td></td>
        </tr>
        <tr>
          <td>**port**</td>
          <td>The port number for your Elasticsearch server.</td>
          <td></td>
        </tr>
        <tr>
          <td>**security**</td>
          <td>The security method for authentication.</td>
          <td></td>
        </tr>
        <tr>
          <td>**username**</td>
          <td>Your Elasticsearch username for authentication.</td>
          <td></td>
        </tr>
        <tr>
          <td>**password**</td>
          <td>The password for your Elasticsearch user.</td>
          <td></td>
        </tr>
        <tr>
          <td>**tls_enabled** (optional)</td>
          <td>Enable TLS for secure connections to your Elasticsearch server.</td>
          <td></td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="cloudwatch-connector" title="AWS CloudWatch connector">
    Connect to AWS CloudWatch to query your cloud monitoring data.

    <Callout variant="important">
    The CloudWatch <dnt>connector</dnt> is region-specific. Create separate <dnt>connectors</dnt> for each AWS region you want to query.
    </Callout>

    <table>
      <thead>
        <tr>
          <th>Parameter</th>
          <th>Description</th>
          <th>Sample value</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>**Name**</td>
          <td>A unique name to identify this <dnt>connector</dnt> when writing queries.</td>
          <td>`cloudwatch-metrics`</td>
        </tr>
        <tr>
          <td>**aws_region**</td>
          <td>The AWS region where your CloudWatch data is stored.</td>
          <td>`us-east-2`</td>
        </tr>
        <tr>
          <td>**aws_iam_role_arn**</td>
          <td>The Amazon Resource Name (ARN) of an IAM role that grants <DNT>**Lens**</DNT> access to your CloudWatch data. See [Grant <DNT>**Lens**</DNT> access to CloudWatch](#grant-cloudwatch-access) for setup instructions.</td>
          <td>`arn:aws:iam::123456789012:role/LensCloudwatchAccessRole`</td>
        </tr>
        <tr>
          <td>**aws_iam_external_id**</td>
          <td>The external ID you configured in your IAM role's trust policy. See [Grant <DNT>**Lens**</DNT> access to CloudWatch](#grant-cloudwatch-access) for setup instructions.</td>
          <td>`newreliclensusercloudwatchaccess`</td>
        </tr>
      </tbody>
    </table>

    ### Grant <DNT>**Lens**</DNT> access to CloudWatch [#grant-cloudwatch-access]

    To allow <DNT>**Lens**</DNT> to query your CloudWatch metrics, create an IAM policy and role in your AWS account that grants read access to CloudWatch.

    <Steps>
      <Step>
        ### Create an IAM policy [#create-cloudwatch-policy]

        [Create an IAM policy](https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_create.html) with the following permissions to allow <DNT>**Lens**</DNT> to read CloudWatch metrics from your AWS account. Note the policy name you enter, as you'll need it to attach this policy to the IAM role.

        ```json
        {
          "Version": "2012-10-17",
          "Statement": [
            {
              "Effect": "Allow",
              "Action": [
                "cloudwatch:ListMetrics",
                "cloudwatch:GetMetricData",
                "cloudwatch:GetMetricStatistics",
                "tag:GetResources"
              ],
              "Resource": "*"
            }
          ]
        }
        ```
      </Step>

      <Step>
        ### Create an IAM role with a trust relationship [#create-cloudwatch-role]

        [Create an IAM role](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create.html) and configure the trust relationship to allow the <DNT>**Lens**</DNT> service account to assume it using a unique external ID. When setting up the role, use these values:

        * **Trusted entity type**: AWS account
        * **Account ID**: `017663287629` (New Relic's AWS account)
        * **Require external ID**: Enabled. Enter a unique string of your choice and save it for the <DNT>**Lens**</DNT> <dnt>connector</dnt> configuration.
        * **Permissions policy**: Search for the policy name you created in the previous step and select it.

        The trust policy should match the following format. Replace `<YOUR_EXTERNAL_ID>` with the external ID you entered.

        ```json
        {
          "Version": "2012-10-17",
          "Statement": [
            {
              "Effect": "Allow",
              "Principal": {
                "AWS": "arn:aws:iam::017663287629:user/service_fdp_customer_account_data_access"
              },
              "Action": "sts:AssumeRole",
              "Condition": {
                "StringEquals": {
                  "sts:ExternalId": "<YOUR_EXTERNAL_ID>"
                }
              }
            }
          ]
        }
        ```

        After creating the role, open the role's summary page and copy the **Role ARN**. You'll need this ARN and the external ID when configuring the <DNT>**Lens**</DNT> <dnt>connector</dnt>.
      </Step>
    </Steps>
  </Collapser>

  <Collapser id="clickhouse-connector" title="ClickHouse connector">
    Connect to ClickHouse to query your analytics data.

    <table>
      <thead>
        <tr>
          <th>Parameter</th>
          <th>Description</th>
          <th>Sample value</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>**Name**</td>
          <td>A unique name to identify this <dnt>connector</dnt> when writing queries.</td>
          <td>`AnalyticsDB`</td>
        </tr>
        <tr>
          <td>**username**</td>
          <td>Your ClickHouse database username.</td>
          <td>`admin`</td>
        </tr>
        <tr>
          <td>**password**</td>
          <td>The password for your ClickHouse user.</td>
          <td>`password`</td>
        </tr>
        <tr>
          <td>**connection-url**</td>
          <td>The JDBC URL to connect to ClickHouse. Format: `jdbc:clickhouse://<host>:8123/<database>?ssl=true`.</td>
          <td>`jdbc:clickhouse://clickhouse.example.com:8123/analytics_db?ssl=true`</td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="sqlserver-connector" title="SQL Server connector">
    Connect to Microsoft SQL Server to query your relational data.

    <table>
      <thead>
        <tr>
          <th>Parameter</th>
          <th>Description</th>
          <th>Sample value</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>**Name**</td>
          <td>A unique name to identify this <dnt>connector</dnt> when writing queries.</td>
          <td>`SalesDB`</td>
        </tr>
        <tr>
          <td>**connection-url**</td>
          <td>The JDBC URL to connect to SQL Server. Format: `jdbc:sqlserver://<host>:<port>;databaseName=<database>;encrypt=false`.</td>
          <td>`jdbc:sqlserver://sqlserver.example.com:1433;databaseName=sales_db;encrypt=false`</td>
        </tr>
        <tr>
          <td>**username**</td>
          <td>Your SQL Server database username.</td>
          <td>`sa`</td>
        </tr>
        <tr>
          <td>**password**</td>
          <td>The password for your SQL Server user.</td>
          <td>`password`</td>
        </tr>
      </tbody>
    </table>
  </Collapser>

</CollapserGroup>

## Related topics [#related-topics]

<DocTiles>
  <DocTile title="Lens overview" path="/docs/new-relic-lens/overview">
    Learn about <DNT>**Lens**</DNT> features, use cases, and permissions.
  </DocTile>
  <DocTile title="Query data with Lens" path="/docs/new-relic-lens/query-data">
    Query data in Query Builder, Notebooks, and dashboards.
  </DocTile>
  </DocTiles>
