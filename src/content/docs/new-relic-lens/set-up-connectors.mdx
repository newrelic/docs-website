---
title: Set up connectors
tags:
  - New Relic Lens
  - Connectors
  - Connect to Snowflake
  - Connect to PostgreSQL
  - Connect to MySQL
  - Connect to Redshift
  - Connect to Google Sheets
  - Connect to Iceberg
  - Connect to Prometheus
  - Connect to MongoDB
  - Connect to Elasticsearch
  - Connect to AWS CloudWatch
  - Connect to ClickHouse
  - Connect to SQL Server
metaDescription: "Learn about Lens connectors, including system connectors for NRDB data and how to configure data connectors for external sources."
freshnessValidatedDate: never
---

<Callout title="preview">
  We're still working on this feature, but we'd love for you to try it out!

  This feature is currently provided as part of a preview program pursuant to our [pre-release policies](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy).
</Callout>

Before querying data with [New Relic Lens](/docs/new-relic-lens/overview), you need to set up connections to your data sources. Lens provides both system connectors for accessing NRDB data and data connectors for connecting to external databases and other data sources.

## System connectors [#system-connectors]

Lens provides three system connectors for accessing NRDB data. These connectors are available automatically and don't require any setup.

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>Connector</th>
      <th>Description</th>
      <th style={{ width: "200px" }}>Access level</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><dnt>**Telemetry**</dnt></td>
      <td>Access telemetry data from NRDB, such as transactions, logs, and metrics.</td>
      <td>Account level. You can only access data from accounts where you have permissions.</td>
    </tr>
    <tr>
      <td><dnt>**Entity**</dnt></td>
      <td>Access entity data from NRDB, including services, hosts, and applications.</td>
      <td>Account level. You can only access data from accounts where you have permissions.</td>
    </tr>
    <tr>
      <td><dnt>**Materialized views**</dnt></td>
      <td>Access materialized view data stored in NRDB (results from queries joining multiple databases).</td>
      <td>Organization level. All users with Lens access can query materialized views.</td>
    </tr>
  </tbody>
</table>

## Data connectors [#data-connectors]

Data connectors allow you to connect Lens to external data sources such as databases, data warehouses, and spreadsheets. After configuration, data connectors are available at the organization level for users with appropriate permissions to query. To create, edit, or delete connectors, you need the required [permissions](/docs/new-relic-lens/overview#permissions).

### Create a connector [#create-connector]

To set up a data connector:

1. Go to <dnt>**[one.newrelic.com](https://one.newrelic.com) > Administration > Connectors**</dnt>.
2. Click <dnt>**Create a connector**</dnt>.
3. Select your connector type from the dropdown menu.
4. Enter the required connection information for your selected connector type.
5. (Optional) In the <dnt>**Access control**</dnt> section, grant access to specific users or groups:
   1. Select the <dnt>**Auth domain**</dnt> containing the users or groups.
   2. Select the <dnt>**User or group**</dnt>.
   3. Select a <dnt>**Role**</dnt> such as <dnt>**Lens Viewer**</dnt> or <dnt>**Lens Manager**</dnt>.

   To add multiple access grants, click <dnt>**Add**</dnt> and repeat the steps.

   <Callout variant="important">
   If you don't configure access control, all users with the `nr_lens.query.connector` permission can query this connector.
   </Callout>
6. Click <dnt>**Create**</dnt>.

After creating a connector, you can view its schema or delete it from the <Icon name="fe-more-horizontal"/> menu.

## Connector configurations [#connector-configs]

Select your connector type to view the required fields.

<CollapserGroup>
  <Collapser id="snowflake" title="Snowflake">
    Connect to Snowflake data warehouses for querying cloud data.

    <table>
      <thead>
        <tr>
          <th style={{ width: "250px" }}>Field</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><dnt>**Name**</dnt></td>
          <td>A unique identifier for this connector.</td>
        </tr>
        <tr>
          <td><dnt>**Connection URL**</dnt></td>
          <td>JDBC connection string. For example, `jdbc:snowflake://ACCOUNT.snowflakecomputing.com/`</td>
        </tr>
        <tr>
          <td><dnt>**Username**</dnt></td>
          <td>Snowflake user account.</td>
        </tr>
        <tr>
          <td><dnt>**Password**</dnt></td>
          <td>Snowflake user password.</td>
        </tr>
        <tr>
          <td><dnt>**Account identifier**</dnt></td>
          <td>Your Snowflake account identifier.</td>
        </tr>
        <tr>
          <td><dnt>**Database name**</dnt></td>
          <td>Target database.</td>
        </tr>
        <tr>
          <td><dnt>**Role**</dnt></td>
          <td>Snowflake role with appropriate permissions.</td>
        </tr>
        <tr>
          <td><dnt>**Warehouse name**</dnt></td>
          <td>Compute warehouse to use.</td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="postgresql" title="PostgreSQL">
    Connect to PostgreSQL databases for relational data queries.

    <table>
      <thead>
        <tr>
          <th style={{ width: "250px" }}>Field</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><dnt>**Name**</dnt></td>
          <td>A unique identifier for this connector.</td>
        </tr>
        <tr>
          <td><dnt>**Connection URL**</dnt></td>
          <td>JDBC connection string. For example, `jdbc:postgresql://host:port/database`</td>
        </tr>
        <tr>
          <td><dnt>**Username**</dnt></td>
          <td>Database user.</td>
        </tr>
        <tr>
          <td><dnt>**Password**</dnt></td>
          <td>Database password.</td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="mysql" title="MySQL">
    Connect to MySQL databases for relational data queries.

    <table>
      <thead>
        <tr>
          <th style={{ width: "250px" }}>Field</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><dnt>**Name**</dnt></td>
          <td>A unique identifier for this connector.</td>
        </tr>
        <tr>
          <td><dnt>**Connection URL**</dnt></td>
          <td>JDBC connection string. For example, `jdbc:mysql://host:port/database`</td>
        </tr>
        <tr>
          <td><dnt>**Username**</dnt></td>
          <td>Database user.</td>
        </tr>
        <tr>
          <td><dnt>**Password**</dnt></td>
          <td>Database password.</td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="redshift" title="Redshift">
    Connect to Amazon Redshift data warehouses.

    <table>
      <thead>
        <tr>
          <th style={{ width: "250px" }}>Field</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><dnt>**Name**</dnt></td>
          <td>A unique identifier for this connector.</td>
        </tr>
        <tr>
          <td><dnt>**Connection URL**</dnt></td>
          <td>JDBC connection string. For example, `jdbc:redshift://host:port/database`</td>
        </tr>
        <tr>
          <td><dnt>**Username**</dnt></td>
          <td>Database user.</td>
        </tr>
        <tr>
          <td><dnt>**Password**</dnt></td>
          <td>Database password.</td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="google-sheets" title="Google Sheets">
    Connect to Google Sheets for spreadsheet data queries.

    <table>
      <thead>
        <tr>
          <th style={{ width: "250px" }}>Field</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><dnt>**Name**</dnt></td>
          <td>A unique identifier for this connector.</td>
        </tr>
        <tr>
          <td><dnt>**Google Cloud service account credentials key**</dnt></td>
          <td>JSON credentials file from your Google Cloud service account.</td>
        </tr>
        <tr>
          <td><dnt>**Metadata sheet ID**</dnt></td>
          <td>The ID of the Google Sheet.</td>
        </tr>
      </tbody>
    </table>

    For the credentials key, you need to create a service account key in Google Cloud. See [Create and delete service account keys](https://cloud.google.com/iam/docs/keys-create-delete) for instructions.
  </Collapser>

  <Collapser id="iceberg" title="Iceberg">
    Connect to Apache Iceberg data lakes.

    <table>
      <thead>
        <tr>
          <th style={{ width: "250px" }}>Field</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><dnt>**Name**</dnt></td>
          <td>A unique identifier for this connector.</td>
        </tr>
        <tr>
          <td><dnt>**Catalog type**</dnt></td>
          <td>For example, glue.</td>
        </tr>
        <tr>
          <td><dnt>**AWS region**</dnt></td>
          <td>AWS region where your data resides.</td>
        </tr>
        <tr>
          <td><dnt>**AWS access key**</dnt></td>
          <td>AWS access key ID.</td>
        </tr>
        <tr>
          <td><dnt>**AWS secret key**</dnt></td>
          <td>AWS secret access key.</td>
        </tr>
        <tr>
          <td><dnt>**IAM role ARN**</dnt></td>
          <td>Role ARN for accessing resources.</td>
        </tr>
        <tr>
          <td><dnt>**Glue catalog ID**</dnt></td>
          <td>AWS Glue catalog identifier.</td>
        </tr>
        <tr>
          <td><dnt>**External ID**</dnt></td>
          <td>External ID for cross-account access.</td>
        </tr>
        <tr>
          <td><dnt>**S3 endpoint URL**</dnt></td>
          <td>S3 endpoint for data access.</td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="prometheus" title="Prometheus">
    Connect to Prometheus for metrics data.

    <table>
      <thead>
        <tr>
          <th style={{ width: "250px" }}>Field</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><dnt>**Name**</dnt></td>
          <td>A unique identifier for this connector.</td>
        </tr>
        <tr>
          <td><dnt>**Prometheus URI**</dnt></td>
          <td>Prometheus server URL. For example, `https://PROMETHEUS_URL`</td>
        </tr>
        <tr>
          <td><dnt>**Username**</dnt></td>
          <td>Optional. For basic authentication.</td>
        </tr>
        <tr>
          <td><dnt>**Password**</dnt></td>
          <td>Optional. For basic authentication.</td>
        </tr>
        <tr>
          <td><dnt>**Query chunk size duration**</dnt></td>
          <td>For example, 1d.</td>
        </tr>
        <tr>
          <td><dnt>**Max query range duration**</dnt></td>
          <td>For example, 21d.</td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="mongodb" title="MongoDB">
    Connect to MongoDB databases to query your document data.

    <Callout variant="important">
    You can't read your connection URL after it's set because it contains sensitive information, such as your password.
    </Callout>

    <table>
      <thead>
        <tr>
          <th style={{ width: "250px" }}>Field</th>
          <th>Description</th>
          <th>Sample value</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><dnt>**Name**</dnt></td>
          <td>A unique name to identify this connector when writing queries.</td>
          <td>`CustomerDB`</td>
        </tr>
        <tr>
          <td><dnt>**connection-url**</dnt></td>
          <td>The MongoDB connection string. Format: `mongodb://<user>:<pass>@<host>:<port>/`. Both username and password must be URL encoded.</td>
          <td>`mongodb://user:pass@cluster.mongodb.net:27017/`</td>
        </tr>
      </tbody>
    </table>

    **For MongoDB Atlas users**: The username and password you enter in Lens are your **Database User** credentials, not the credentials you use to log into the Atlas web UI.

    **URL encoding**: Your username and password must be URL encoded.
  </Collapser>

  <Collapser id="elasticsearch" title="Elasticsearch">
    Connect to Elasticsearch to query your search and analytics data.

    <table>
      <thead>
        <tr>
          <th style={{ width: "250px" }}>Field</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><dnt>**Name**</dnt></td>
          <td>A unique name to identify this connector when writing queries.</td>
        </tr>
        <tr>
          <td><dnt>**host**</dnt></td>
          <td>The hostname or IP address of your Elasticsearch server.</td>
        </tr>
        <tr>
          <td><dnt>**port**</dnt></td>
          <td>The port number for your Elasticsearch server.</td>
        </tr>
        <tr>
          <td><dnt>**security**</dnt></td>
          <td>The security method for authentication.</td>
        </tr>
        <tr>
          <td><dnt>**username**</dnt></td>
          <td>Your Elasticsearch username for authentication.</td>
        </tr>
        <tr>
          <td><dnt>**password**</dnt></td>
          <td>The password for your Elasticsearch user.</td>
        </tr>
        <tr>
          <td><dnt>**tls_enabled**</dnt> (optional)</td>
          <td>Enable TLS for secure connections to your Elasticsearch server.</td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="cloudwatch" title="AWS CloudWatch">
    Connect to AWS CloudWatch to query your cloud monitoring data.

    <Callout variant="important">
    The CloudWatch connector is region-specific. Create separate connectors for each AWS region you want to query.
    </Callout>

    <table>
      <thead>
        <tr>
          <th style={{ width: "250px" }}>Field</th>
          <th>Description</th>
          <th>Sample value</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><dnt>**Name**</dnt></td>
          <td>A unique name to identify this connector when writing queries.</td>
          <td>`cloudwatch-metrics`</td>
        </tr>
        <tr>
          <td><dnt>**aws_region**</dnt></td>
          <td>The AWS region where your CloudWatch data is stored.</td>
          <td>`us-east-2`</td>
        </tr>
        <tr>
          <td><dnt>**aws_iam_role_arn**</dnt></td>
          <td>The Amazon Resource Name (ARN) of an IAM role that grants Lens access to your CloudWatch data. See [Grant Lens access to CloudWatch](#grant-cloudwatch-access) for setup instructions.</td>
          <td>`arn:aws:iam::123456789012:role/LensCloudwatchAccessRole`</td>
        </tr>
        <tr>
          <td><dnt>**aws_iam_external_id**</dnt></td>
          <td>The external ID you configured in your IAM role's trust policy. See [Grant Lens access to CloudWatch](#grant-cloudwatch-access) for setup instructions.</td>
          <td>`newreliclensusercloudwatchaccess`</td>
        </tr>
      </tbody>
    </table>

    ### Grant Lens access to CloudWatch [#grant-cloudwatch-access]

    To allow Lens to query your CloudWatch metrics, create an IAM policy and role in your AWS account that grants read access to CloudWatch.

    <Steps>
      <Step>
        ### Create an IAM policy

        [Create an IAM policy](https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_create.html) with the following permissions to allow Lens to read CloudWatch metrics from your AWS account. Note the policy name you enter, as you'll need it to attach this policy to the IAM role.

        ```json
        {
          "Version": "2012-10-17",
          "Statement": [
            {
              "Effect": "Allow",
              "Action": [
                "cloudwatch:ListMetrics",
                "cloudwatch:GetMetricData",
                "cloudwatch:GetMetricStatistics",
                "tag:GetResources"
              ],
              "Resource": "*"
            }
          ]
        }
        ```
      </Step>

      <Step>
        ### Create an IAM role with a trust relationship

        [Create an IAM role](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create.html) and configure the trust relationship to allow the Lens service account to assume it using a unique external ID. When setting up the role, use these values:

        * **Trusted entity type**: AWS account
        * **Account ID**: `017663287629` (New Relic's AWS account)
        * **Require external ID**: Enabled. Enter a unique string of your choice and save it for the Lens connector configuration.
        * **Permissions policy**: Search for the policy name you created in the previous step and select it.

        The trust policy should match the following format. Replace `<YOUR_EXTERNAL_ID>` with the external ID you entered.

        ```json
        {
          "Version": "2012-10-17",
          "Statement": [
            {
              "Effect": "Allow",
              "Principal": {
                "AWS": "arn:aws:iam::017663287629:user/service_fdp_customer_account_data_access"
              },
              "Action": "sts:AssumeRole",
              "Condition": {
                "StringEquals": {
                  "sts:ExternalId": "<YOUR_EXTERNAL_ID>"
                }
              }
            }
          ]
        }
        ```

        After creating the role, open the role's summary page and copy the **Role ARN**. You'll need this ARN and the external ID when configuring the Lens connector.
      </Step>
    </Steps>
  </Collapser>

  <Collapser id="clickhouse" title="ClickHouse">
    Connect to ClickHouse to query your analytics data.

    <table>
      <thead>
        <tr>
          <th style={{ width: "250px" }}>Field</th>
          <th>Description</th>
          <th>Sample value</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><dnt>**Name**</dnt></td>
          <td>A unique name to identify this connector when writing queries.</td>
          <td>`AnalyticsDB`</td>
        </tr>
        <tr>
          <td><dnt>**username**</dnt></td>
          <td>Your ClickHouse database username.</td>
          <td>`admin`</td>
        </tr>
        <tr>
          <td><dnt>**password**</dnt></td>
          <td>The password for your ClickHouse user.</td>
          <td>`password`</td>
        </tr>
        <tr>
          <td><dnt>**connection-url**</dnt></td>
          <td>The JDBC URL to connect to ClickHouse. Format: `jdbc:clickhouse://<host>:8123/<database>?ssl=true`.</td>
          <td>`jdbc:clickhouse://clickhouse.example.com:8123/analytics_db?ssl=true`</td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser id="sqlserver" title="SQL Server">
    Connect to Microsoft SQL Server to query your relational data.

    <table>
      <thead>
        <tr>
          <th style={{ width: "250px" }}>Field</th>
          <th>Description</th>
          <th>Sample value</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><dnt>**Name**</dnt></td>
          <td>A unique name to identify this connector when writing queries.</td>
          <td>`SalesDB`</td>
        </tr>
        <tr>
          <td><dnt>**connection-url**</dnt></td>
          <td>The JDBC URL to connect to SQL Server. Format: `jdbc:sqlserver://<host>:<port>;databaseName=<database>;encrypt=false`.</td>
          <td>`jdbc:sqlserver://sqlserver.example.com:1433;databaseName=sales_db;encrypt=false`</td>
        </tr>
        <tr>
          <td><dnt>**username**</dnt></td>
          <td>Your SQL Server database username.</td>
          <td>`sa`</td>
        </tr>
        <tr>
          <td><dnt>**password**</dnt></td>
          <td>The password for your SQL Server user.</td>
          <td>`password`</td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

## Related topics [#related-topics]

<DocTiles>
  <DocTile title="Lens overview" path="/docs/new-relic-lens/overview">
    Learn about Lens features, use cases, and permissions.
  </DocTile>
  <DocTile title="Query data with Lens" path="/docs/new-relic-lens/query-data">
    Query data in Query Builder, Notebooks, and dashboards.
  </DocTile>
  </DocTiles>
