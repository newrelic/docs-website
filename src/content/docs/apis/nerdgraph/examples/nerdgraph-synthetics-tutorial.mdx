---
title: "NerdGraph tutorial: Manage your synthetic monitors"
tags:
    - NerdGraph
    - Synthetic
metaDescription: Use NerdGraph to programatically manage your synthetic monitors, private locations, and secure credentials.
freshnessValidatedDate: never
---

Our [NerdGraph API](/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph/) allows you to automate creating, updating, or deleting your [synthetic monitors](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors/), [private locations](/docs/synthetics/synthetic-monitoring/private-locations/private-locations-overview-monitor-internal-sites-add-new-locations/), [secure credentials](/docs/synthetics/synthetic-monitoring/using-monitors/store-secure-credentials-scripted-browsers-api-tests/), and [monitor downtimes](/docs/synthetics/synthetic-monitoring/using-monitors/monitor-downtimes-disable-monitoring-during-scheduled-maintenance-times/).

## Requirements [#requirements]

Requirements include:

* [General NerdGraph requirements](/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph/#authentication)
* Relevant user permissions: the same [synthetic monitoring permissions](/docs/synthetics/synthetic-monitoring/administration/user-roles-synthetic-monitoring) that apply for using the synthetics UI apply for using NerdGraph

## Understand fields in NerdGraph explorer [#fields]

You can view field definitions in [NerdGraph explorer](/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph/#explorer), but it may help to better understand the `LOCATION`, `PERIOD`, `TAGS`, and other fields.

<CollapserGroup>

<Collapser
  id="browsers-attribute"
  title="Define browsers fields"
>
Configure simple browser, scripted browser, and step monitors to use one or more browser types. Don't include this attribute when using the Chrome 72 legacy runtime. Examples:

* `[CHROME]` to use Chrome only
* `[FIREFOX]` to use Firefox only
* `[CHROME, FIREFOX]` to use Chrome and Firefox

</Collapser>
  
<Collapser
  id="devices-attribute"
  title="Define devices fields"
>
Configure simple browser, scripted browser, and step monitors to use one or more emulated device types. Don't include this attribute when using the Chrome 72 legacy runtime. Examples:
* `[DESKTOP]`
* `[MOBILE_LANDSCAPE]`
* `[MOBILE_PORTRAIT]`
* `[TABLET_LANDSCAPE]`
* `[TABLET_PORTRAIT]`

    Multiple emulated device configurations can be used by a single monitor:

* `[DESKTOP, MOBILE_PORTRAIT, TABLET_LANDSCAPE]`

</Collapser>
  
  <Collapser
    id="location-field"
    title="Define location fields"
  >
    To identify a [private location](/docs/synthetics/synthetic-monitoring/private-locations/private-locations-overview-monitor-internal-sites-add-new-locations) in your scripts, use the private location's entity GUID. If the private location is configured to use [verified script execution](/docs/synthetics/synthetic-monitoring/private-locations/verified-script-execution-private-locations/), also include the `vsePassword` attribute. For example:

    ```graphql
    locations: {
      private: {
        guid: LOCATION_ENTITY_GUID, 
        vsePassword: YOUR_VSE_PASSWORD
      }
    }
    ```

    [Public locations](/docs/synthetics/synthetic-monitoring/administration/synthetic-public-minion-ips/#location) use the location identifier without the AWS\_ prefix, for example:

    ```graphql
    locations: {
      public: ["US_EAST_2", "US_WEST_1"]
    }
    ```
  </Collapser>

  <Collapser
    id="period-attribute"
    title="Define period fields"
  >
    The `PERIOD` attribute defines a time interval for your monitors to execute. To define the interval, use these forms:

    * `EVERY_MINUTE` for every minute.
    * `EVERY_N_MINUTES`, where 'N' is minutes. Supported values include `EVERY_5_MINUTES`, `EVERY_10_MINUTES`, `EVERY_15_MINUTES`, and `EVERY_30_MINUTES`.
    * `EVERY_HOUR` for every hour.
    * `EVERY_N_HOURS`, where 'N' is hours. Supported values include `EVERY_6_HOURS` and `EVERY_12_HOURS`.
    * `EVERY_DAY` for once a day.
  </Collapser>

  <Collapser
    id="tags-attribute"
    title="Define tags fields"
  >
    Tags are optional. You can add tags during monitor creation, or later using tagging calls in NerdGraph or the UI. Multiple tags can be added in a single mutation call using an array that contains keys and values.
  </Collapser>

  <Collapser
    id="optional-fields"
    title="Define optional fields"
  >
    Some fields are for more advanced configurations. These are optional.

    For [ping monitors](#create-ping), these include:

      * `HEADER_NAME`: Your custom header names that appear on the request.

      * `HEADER_VALUE`: The custom header value on the request.

      * `REDIRECT_IS_FAILURE`: Your monitor reports a failure if it's redirected.

      * `VALIDATION_TEXT`: If this text is not included in your monitor's response, it returns a failure.

      * `TLS_VALIDATION`: Verifies the [validity](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors/#simple) of the SSL certificate chain.

      * `BYPASS_HEAD_REQUEST`: Bypasses the initial HEAD request and instead makes a GET request.


    For [simple browser monitors](#create-simple-browser):

      * `RUNTIME_TYPE`: The runtime type used by your monitor. "CHROME_BROWSER" is the only accepted value.

      * `RUNTIME_TYPE_VERSION`: The runtime type version used by your monitor. "100" is the only accepted value.

      * `SCRIPT_LANGUAGE`: The language used in your monitor. "JAVASCRIPT" is the only accepted value.


    For [scripted API monitors](#create-scripted-API):

      * `SCRIPT_CONTENT`: The actual contents of the script. This should **not** be based64 encoded.

      * `RUNTIME_TYPE`: The runtime type used by your monitor. "NODE_API" is the only accepted value.

      * `RUNTIME_TYPE_VERSION`: The runtime type version used by your monitor. The only accepted value is `16.10`.

      * `SCRIPT_LANGUAGE`: The language used in your monitor. "JAVASCRIPT" is the only accepted value.


    For [scripted browser monitors](#create-scripted-browser):

      * `SCRIPT_CONTENT`: The actual contents of the script. This should **not** be based64 encoded.

      * `RUNTIME_TYPE`: The runtime type used by your monitor. "CHROME_BROWSER" is the only accepted value.

      * `RUNTIME_TYPE_VERSION`: The runtime type version used by your monitor. "100" is the only accepted value.

      * `SCRIPT_LANGUAGE`: The language used in your monitor. "JAVASCRIPT" is the only accepted value.


    For [step monitors](#create-step):

      * `RUNTIME_TYPE`: The runtime type used by your monitor. "CHROME_BROWSER" is the only accepted value.

      * `RUNTIME_TYPE_VERSION`: The runtime type version used by your monitor. "100" is the only accepted value.

      * `SCRIPT_LANGUAGE`: The language used in your monitor. "JAVASCRIPT" is the only accepted value.


    For [certificate check monitors](#create-certificate-check):

      * `DAYS_UNTIL_EXPIRATION`: Notifies you when you need to update your certificate. For example, if you wanted a notification 30 days before the certificate expires, you would input 30.

      * `RUNTIME_TYPE`: The runtime type used by your monitor. "NODE_API" is the only accepted value.

      * `RUNTIME_TYPE_VERSION`: The runtime type version used by your monitor. The only accepted value is `16.10`.

      * `SCRIPT_LANGUAGE`: The language used in your monitor. "JAVASCRIPT" is the only accepted value.


    For [broken link monitors](#create-broken-links):

      * `RUNTIME_TYPE`: The runtime type used by your monitor. "NODE_API" is the only accepted value.

      * `RUNTIME_TYPE_VERSION`: The runtime type version used by your monitor. The only accepted value is `16.10`.

      * `SCRIPT_LANGUAGE`: The language used in your monitor. "JAVASCRIPT" is the only accepted value.
      

    For all monitors:

      * `APDEX_TARGET`: The monitor's Apdex target used to populate SLA reports. Defaults to 7 seconds (7000ms).
  </Collapser>
</CollapserGroup>

## Use queries to retrieve data [#query]

Queries make requests to fetch data. To learn additional query capabilities available to your synthetic entities, check out [NerdGraph entities API tutorial](/docs/apis/nerdgraph/examples/nerdgraph-entities-api-tutorial/).

<CollapserGroup>
  <Collapser
    id="query-examples"
    title="Query monitors"
  >
    You can query your synthetic monitors to get current status information about your data or details about the monitor configuration. Many monitor configurations are surfaced as tags.

    ```graphql
    {
      actor {
        entitySearch(query: "domain = 'SYNTH' AND type = 'MONITOR'") {
          results {
            entities {
              ... on SyntheticMonitorEntityOutline {
                guid
                name
                accountId
                monitorType
                tags {
                  key
                  values
                }
              }
            }
          }
        }
      }
    }
    ```
  </Collapser>

  <Collapser
    id="private-examples"
    title="Query private locations"
  >
    You're able to query your private locations:

    ```graphql
    {
      actor {
        entitySearch(query: "domain = 'SYNTH' AND type = 'PRIVATE_LOCATION'") {
          results {
            entities {
              accountId
              guid
              name
              tags {
                key
                values
              }
            }
          }
        }
      }
    }
    ```
  </Collapser>

  <Collapser
    id="downtime-query"
    title="Query monitor downtimes"
  >
    Query existing monitor downtimes. Configuration details are stored in tags.

    ```graphql
    {
      actor {
        entitySearch(query: "domain = 'SYNTH' AND type = 'MONITOR_DOWNTIME'") {
          results {
            entities {
              accountId
              guid
              name
              tags {
                key
                values
              }
            }
          }
        }
      }
    }
    ```
  </Collapser>

  <Collapser
    id="credentials-example"
    title="Query secure credentials"
  >
    Querying secure credentials lets you retrieve metadata only, but not the credential values themselves:

    ```graphql
    {
      actor {
        entitySearch(query: "domain = 'SYNTH' AND type = 'SECURE_CRED'") {
          results {
            entities {
              ... on SecureCredentialEntityOutline {
                accountId
                guid
                name
                tags {
                  key
                  values
                }
                updatedAt
              }
            }
          }
        }
      }
    }
    ```
  </Collapser>

  <Collapser
    id="query-script-example"
    title="Query monitor script"
  >
    Retrieve the script used in a scripted API or scripted browser monitor. Other monitor types will return an error.

    ```graphql
    {
      actor {
        account(id: ACCOUNT_ID) {
          synthetics {
            script(monitorGuid: "ENTITY_GUID") {
              text
            }
          }
        }
      }
    }
    ```
  </Collapser>

  <Collapser
    id="query-steps-example"
    title="Query monitor steps"
  >
    Retrieve the steps configured for a step monitor. Other monitor types will return an error.

    ```graphql
    {
      actor {
        account(id: ACCOUNT_ID) {
          synthetics {
            steps(monitorGuid: "ENTITY_GUID") {
              ordinal
              type
              values
            }
          }
        }
      }
    }
    ```
  </Collapser>

  <Collapser
    id="query-guid-example"
    title="Query to map monitor ID to entity GUID"
  >
    Retrieve the entity GUID for a synthetic monitor using the monitor ID.

    ```graphql
    {
      actor {
        entitySearch(
          query: "(domainId = 'MONITOR_ID')"
        ) {
          results {
            entities {
              ... on SyntheticMonitorEntityOutline {
                guid
                name
                monitorId
              }
            }
          }
        }
      }
    }
    ```
  </Collapser>

  <Collapser
    id="query-runtime-upgrade-status"
    title="Query to retrieve the status of all runtime upgrade tests"
  >
    Retrieve the status of all runtime upgrade tests for legacy runtime monitors. These tests populate the [runtime upgrades UI](/docs/synthetics/synthetic-monitoring/using-monitors/runtime-upgrade-ui/). The test result is stored in the `validationStatus` tag. If the upgrade test failed, the error message is available in the `validationError` tag.

    ```graphql
    {
      actor {
        entitySearch(query: "domain = 'SYNTH' AND type = 'RUNTIME_VALIDATION'") {
          results {
            entities {
              accountId
              guid
              name
              tags {
                key
                values
              }
            }
          }
        }
      }
    }
    ```
  </Collapser>

  <Collapser
    id="query-runtime-upgrade-status-monitor"
    title="Query to retrieve the status of a runtime upgrade test by monitor ID"
  >
    Retrieve the status of a runtime upgrade test for a single legacy runtime monitor. These test results populate the [runtime upgrades UI](/docs/synthetics/synthetic-monitoring/using-monitors/runtime-upgrade-ui/). The test result is stored in the `validationStatus` tag. If the upgrade test failed, the error message is available in the `validationError` tag.

    ```graphql
    {
      actor {
        entitySearch(
          query: "domain = 'SYNTH' AND type = 'RUNTIME_VALIDATION' AND domainId = 'MONITOR_ID'"
        ) {
          results {
            entities {
              accountId
              guid
              name
              tags {
                key
                values
              }
            }
          }
        }
      }
    }
    ```
  </Collapser>
</CollapserGroup>

## Create your synthetic monitors [#create-monitors]

Below are some sample requests to automate the creation of your synthetic monitors.

<Callout variant="tip">
  Include the runtime object that includes `runtimeType`, `runtimeTypeVersion`, and `scriptLanguage` to use a newer runtime. Do not include the runtime object and these attributes to continue using a legacy runtime.
</Callout>

<Callout variant="important">
  As of August 26, 2024, you can no longer create new monitors using legacy runtimes on public or private locations. On October 22, 2024, we will [end of life](/whats-new/2024/04/whats-new-04-09-eol-synthetics-runtime-cpm) the containerized private minion (CPM) and legacy synthetics runtime versions. 
  
  * For public locations, use [the runtime upgrade UI](/docs/synthetics/synthetic-monitoring/using-monitors/runtime-upgrade-ui/) to update your monitors to the newest runtimes. 
  * For private locations, please review our [recommended migration steps](/docs/synthetics/synthetic-monitoring/private-locations/job-manager-transition-guide/#monitorMigration) to avoid monitor degradation.
</Callout>

<CollapserGroup>
  <Collapser
    id="create-ping"
    title="Create a ping monitor"
  >
    Ping monitors check that your application is running. Here's an example for creating one in NerdGraph:

    ```graphql
      mutation {
        syntheticsCreateSimpleMonitor(
          accountId: ACCOUNT_ID
          monitor: {
            locations: { public: ["LOCATION_1", "LOCATION_2"] }
            name: "YOUR_MONITOR_NAME"
            period: PERIOD
            status: STATUS
            uri: "MONITORED_URI"
            advancedOptions: {
              customHeaders: { name: "HEADER_NAME", value: "HEADER_VALUE" }
              redirectIsFailure: REDIRECT_IS_FAILURE
              responseValidationText: "VALIDATION_TEXT"
              shouldBypassHeadRequest: BYPASS_HEAD_REQUEST
              useTlsValidation: TLS_VALIDATION
            }
            apdexTarget: APDEX_TARGET
          }
        ) {
          errors {
            description
            type
          }
        }
      }
    ```
  </Collapser>

  <Collapser
    id="create-simple-browser"
    title="Create a simple browser monitor"
  >
    Simple browser monitors use Chrome instances to mimic customer visits. Here's an example for creating one in NerdGraph:

      ```graphql
      mutation {
        syntheticsCreateSimpleBrowserMonitor(
          accountId: ACCOUNT_ID
          monitor: {
            browsers: [BROWSERS]
            devices: [DEVICES]
            locations: { public: ["LOCATION_1", "LOCATION_2"] }
            name: "YOUR_MONITOR_NAME"
            period: PERIOD
            runtime: {
              runtimeType: "RUNTIME_TYPE"
              runtimeTypeVersion: "RUNTIME_TYPE_VERSION"
              scriptLanguage: "SCRIPT_LANGUAGE"
            }
            status: STATUS
            uri: "MONITORED_URI"
            advancedOptions: {
              customHeaders: { name: "HEADER_NAME", value: "HEADER_VALUE" }
              enableScreenshotOnFailureAndScript: ENABLE_SCREENSHOT
              responseValidationText: "VALIDATION_TEXT"
              useTlsValidation: TLS_VALIDATION
            }
            apdexTarget: APDEX_TARGET
          }
        ) {
          errors {
            description
            type
          }
        }
      }
      ```
  </Collapser>

  <Collapser
    id="create-scripted-browser"
    title="Create a scripted browser"
  >
    [Scripted browser monitors](/docs/synthetics/synthetic-monitoring/scripting-monitors/introduction-scripted-browser-monitors) are more complex interactions with your pages and applications. Here's an example for creating one in NerdGraph:

    ```graphql
    mutation {
      syntheticsCreateScriptBrowserMonitor(
        accountId: ACCOUNT_ID
        monitor: {
          browsers: [BROWSERS]
          devices: [DEVICES]
          locations: { public: ["LOCATION_1", "LOCATION_2"] }
          name: "MONITOR_NAME"
          period: PERIOD
          runtime: {
            runtimeType: "RUNTIME_TYPE"
            runtimeTypeVersion: "RUNTIME_TYPE_VERSION"
            scriptLanguage: "SCRIPT_LANGUAGE"
          }
          script: "SCRIPT_CONTENT"
          status: STATUS
          advancedOptions: { enableScreenshotOnFailureAndScript: ENABLE_SCREENSHOT }
          apdexTarget: APDEX_TARGET
        }
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser
    id="create-scripted-API"
    title="Create a scripted API monitor"
  >
    [Scripted API monitors](/docs/synthetics/synthetic-monitoring/scripting-monitors/write-synthetic-api-tests) check your API endpoints. Here's an example for creating one in NerdGraph:

    ```graphql
    mutation {
      syntheticsCreateScriptApiMonitor(
        accountId: ACCOUNT_ID
        monitor: {
          locations: { public: ["LOCATION_1", "LOCATION_2"] }
          name: "YOUR_MONITOR_NAME"
          period: PERIOD
          runtime: {
            runtimeType: "RUNTIME_TYPE"
            runtimeTypeVersion: "RUNTIME_TYPE_VERSION"
            scriptLanguage: "SCRIPT_LANGUAGE"
          }
          script: "SCRIPT_CONTENT"
          status: STATUS
          apdexTarget: APDEX_TARGET
        }
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser
    id="create-step"
    title="Create a step monitor"
  >
    Step monitors provide codeless multi-step browser based monitors. Here's an example for creating one in NerdGraph:

    ```graphql
    mutation {
      syntheticsCreateStepMonitor(
        accountId: ACCOUNT_ID
        monitor: {
          browsers: [BROWSERS]
          devices: [DEVICES]
          locations: { public: ["LOCATION_1", "LOCATION_2"] }
          name: "MONITOR_NAME"
          period: PERIOD
          runtime: {
            runtimeType: "RUNTIME_TYPE"
            runtimeTypeVersion: "RUNTIME_TYPE_VERSION"
            scriptLanguage: "SCRIPT_LANGUAGE"
          }
          status: STATUS
          steps: [
            { 
              ordinal: 0, 
              type: NAVIGATE, 
              values: ["MONITORED_URI", "USER_AGENT"] }
            {
              ordinal: STEP_NUMBER
              type: STEP_TYPE
              values: ["CONDITIONAL_TYPE", "VALUE"]
            }
          ]
          advancedOptions: { enableScreenshotOnFailureAndScript: ENABLE_SCREENSHOT }
          apdexTarget: APDEX_TARGET
        }
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser
    id="create-certificate-check"
    title="Create a certificate check monitor"
  >
    Set up monitors to notify you when your SSL certificates are about to expire. Here's an example for creating one in NerdGraph:

    ```graphql
    mutation {
      syntheticsCreateCertCheckMonitor(
        accountId: ACCOUNT_ID
        monitor: {
          domain: "DOMAIN"
          locations: { public: ["LOCATION_1", "LOCATION_2"] }
          name: "YOUR_MONITOR_NAME"
          numberDaysToFailBeforeCertExpires: DAYS_UNTIL_EXPIRATION
          period: PERIOD
          status: STATUS
          apdexTarget: APDEX_TARGET
        }
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser
    id="create-broken-links"
    title="Create a broken links monitor"
  >
    Broken links monitors check the links on a webpage for failure. Here's an example for creating one in NerdGraph:

    ```graphql
    mutation {
      syntheticsCreateBrokenLinksMonitor(
        accountId: ACCOUNT_ID
        monitor: {
          locations: { public: ["LOCATION_1", "LOCATION_2"] }
          name: "YOUR_MONITOR_NAME"
          period: PERIOD
          status: STATUS
          apdexTarget: APDEX_TARGET
          uri: "MONITOR_URI"
          tags: { key: "YOUR_TAG_NAME", values: "TAG_VALUE" }
        }
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>
</CollapserGroup>

## Update your synthetic monitors [#update-monitors]

While you can't change the monitor type after creating it, you can update its settings. Only the guid and the settings that need updated are required as part of the request.

<Callout variant="tip">
  Include the runtime object that includes runtimeType, runtimeTypeVersion, and scriptLanguage to [upgrade a monitor](#upgrade-monitor-runtime) to use a newer runtime. Include this object and set these attributes to empty string to downgrade to a legacy runtime. Do not include this object and these attributes to continue using a legacy runtime.
</Callout>

<CollapserGroup>
  <Collapser
    id="update-ping"
    title="Update a ping monitor"
  >
    Use this to update your ping monitors:

    ```graphql
    mutation {
      syntheticsUpdateSimpleMonitor(
        guid: "ENTITY_GUID"
        monitor: {
          locations: { public: ["LOCATION_1", "LOCATION_2"] }
          name: "YOUR_MONITOR_NAME"
          period: PERIOD
          status: STATUS
          uri: "MONITORED_URI"
          advancedOptions: {
            customHeaders: { name: "HEADER_NAME", value: "HEADER_VALUE" }
            redirectIsFailure: REDIRECT_IS_FAILURE
            responseValidationText: "VALIDATION_TEXT"
            shouldBypassHeadRequest: BYPASS_HEAD_REQUEST
            useTlsValidation: TLS_VALIDATION
          }
          apdexTarget: APDEX_TARGET
        }
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser
    id="update-simple-browser"
    title="Update a simple browser monitor"
  >
    To update a simple browser monitor (including the ability to upgrade the runtime version), use this:

    ```graphql
    mutation {
      syntheticsUpdateSimpleBrowserMonitor(
        guid: ENTITY_GUID
        monitor: {
          browsers: [BROWSERS]
          devices: [DEVICES]
          locations: { public: ["LOCATION_1", "LOCATION_2"] }
          name: "YOUR_MONITOR_NAME"
          period: PERIOD
          runtime: {
            runtimeType: "RUNTIME_TYPE"
            runtimeTypeVersion: "RUNTIME_TYPE_VERSION"
            scriptLanguage: "SCRIPT_LANGUAGE"
          }
          status: STATUS
          uri: "MONITORED_URI"
          advancedOptions: {
            customHeaders: { name: "HEADER_NAME", value: "HEADER_VALUE" }
            enableScreenshotOnFailureAndScript: ENABLE_SCREENSHOT
            responseValidationText: "VALIDATION_TEXT"
            useTlsValidation: TLS_VALIDATION
          }
          apdexTarget: APDEX_TARGET
        }
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser
    id="update-scripted-browser"
    title="Update a scripted browser monitor"
  >
    To update a scripted browser monitor (including the ability to upgrade the runtime version), use this:

    ```graphql
    mutation {
      syntheticsUpdateScriptBrowserMonitor(
        guid: ENTITY_GUID
        monitor: {
          browsers: [BROWSERS]
          devices: [DEVICES]
          locations: { public: ["LOCATION_1", "LOCATION_2"] }
          name: "MONITOR_NAME"
          period: PERIOD
          runtime: {
            runtimeType: "RUNTIME_TYPE"
            runtimeTypeVersion: "RUNTIME_TYPE_VERSION"
            scriptLanguage: "SCRIPT_LANGUAGE"
          }
          script: "SCRIPT_CONTENT"
          status: STATUS
          advancedOptions: { enableScreenshotOnFailureAndScript: ENABLE_SCREENSHOT }
          apdexTarget: APDEX_TARGET
        }
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser
    id="update-API-test"
    title="Update an API test monitor"
  >
    To update a scripted API monitor (including the ability to upgrade the runtime version), use this:

    ```graphql
    mutation {
      syntheticsUpdateScriptApiMonitor(
        guid: ENTITY_GUID
        monitor: {
          locations: { public: ["LOCATION_1", "LOCATION_2"] }
          name: "YOUR_MONITOR_NAME"
          period: PERIOD
          runtime: {
            runtimeType: "RUNTIME_TYPE"
            runtimeTypeVersion: "RUNTIME_TYPE_VERSION"
            scriptLanguage: "SCRIPT_LANGUAGE"
          }
          script: "SCRIPT_CONTENT"
          status: STATUS
          apdexTarget: APDEX_TARGET
        }
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser
    id="update-step"
    title="Update a step monitor"
  >
    Use this to update a step monitor:

    ```graphql
    mutation {
      syntheticsUpdateStepMonitor(
        guid: ENTITY_GUID
        monitor: {
          browsers: [BROWSERS]
          devices: [DEVICES]
          locations: { public: ["LOCATION_1", "LOCATION_2"] }
          name: "MONITOR_NAME"
          period: PERIOD
          runtime: {
            runtimeType: "RUNTIME_TYPE"
            runtimeTypeVersion: "RUNTIME_TYPE_VERSION"
            scriptLanguage: "SCRIPT_LANGUAGE"
          }
          status: STATUS
          steps: [
            { 
              ordinal: 0,
              type: NAVIGATE,
              values: ["MONITORED_URI", "USER_AGENT"] 
            }
            {
              ordinal: STEP_NUMBER,
              type: STEP_TYPE,
              values: ["VALUE_1", "VALUE_2"]
            }
          ]
          advancedOptions: { enableScreenshotOnFailureAndScript: ENABLE_SCREENSHOT }
          apdexTarget: APDEX_TARGET
        }
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser
    id="update-certificate-check"
    title="Update a certificate check monitor"
  >
    Use this to update a certificate check monitor:

    ```graphql
    mutation {
      syntheticsUpdateCertCheckMonitor(
        guid: ENTITY_GUID
        monitor: {
          domain: "DOMAIN"
          locations: { public: ["LOCATION_1", "LOCATION_2"] }
          name: "YOUR_MONITOR_NAME"
          numberDaysToFailBeforeCertExpires: DAYS_UNTIL_EXPIRATION
          period: PERIOD
          status: STATUS
          apdexTarget: APDEX_TARGET
        }
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser
    id="update-broken-links"
    title="Update a broken links monitor"
  >
    Use this to update a broken links monitor:

    ```graphql
    mutation {
      syntheticsUpdateBrokenLinksMonitor(
        guid: ENTITY_GUID
        monitor: {
          locations: { public: ["LOCATION_1", "LOCATION_2"] }
          name: "YOUR_MONITOR_NAME"
          period: PERIOD
          status: STATUS
          apdexTarget: APDEX_TARGET
          uri: "MONITOR_URI"
          tags: { 
            key: "YOUR_TAG_NAME", 
            values: "TAG_VALUE" 
          }
        }
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser
    id="upgrade-monitor-runtime"
    title="Upgrade a monitor's runtime"
  >
    You can use the below example to update a simple browser, scripted API, or scripted browser monitor to the new Chrome 100+ or Node.js 16.10 runtimes. The following example upgrades a scripted browser monitor to the new runtime from the legacy runtime.

    * To update a simple browser monitor using the below example, change the mutation to `syntheticsUpdateSimpleBrowserMonitor` instead of `syntheticsUpdateScriptBrowserMonitor`.
    * To update a scripted API monitor using the below example, change the mutation to `syntheticsUpdateScriptApiMonitor` instead of `syntheticsUpdateScriptBrowserMonitor`.

    Check out [optional-fields](#optional-fields) for additional details on runtime settings.

    ```graphql
    mutation {
      syntheticsUpdateScriptBrowserMonitor ( 
        guid: "ENTITY_GUID", 
        monitor: {
          runtime: {
            runtimeType: "RUNTIME_TYPE", 
            runtimeTypeVersion: "RUNTIME_TYPE_VERSION", 
            scriptLanguage: "SCRIPT_LANGUAGE"
            }
          }
        ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

<Collapser
    id="downgrade-monitor-runtime"
    title="Downgrade a monitor's runtime"
  >
    You can use the below example to update a simple browser, scripted API, or scripted browser monitor to use a legacy runtime prior to the October 22, 2024 EOL. The following example downgrades a scripted browser monitor to the legacy runtime from the new runtime.

    * To update a simple browser monitor using the below example, change the mutation to `syntheticsUpdateSimpleBrowserMonitor` instead of `syntheticsUpdateScriptBrowserMonitor`.
    * To update a scripted API monitor using the below example, change the mutation to `syntheticsUpdateScriptApiMonitor` instead of `syntheticsUpdateScriptBrowserMonitor`.

    Check out [optional-fields](#optional-fields) for additional details on runtime settings.

    ```graphql
    mutation {
      syntheticsUpdateScriptBrowserMonitor ( 
        guid: "ENTITY_GUID", 
        monitor: {
          runtime: {
            runtimeType: "", 
            runtimeTypeVersion: "", 
            scriptLanguage: ""
            }
          }
        ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>
  <Collapser
    id="move-monitor"
    title="Move a monitor between VSE enabled private locations">
    
    Use the following mutation to move a scripted API monitor between VSE-enabled private locations. Ensure that you include the script to regenerate HMACs:
    
    ```graphql
    mutation {
      syntheticsUpdateScriptApiMonitor(
        guid: "ENTITY_GUID"
        monitor: {locations: 
          {private: [{
            guid: "LOCATION_GUID", 
            vsePassword: "YOUR_VSE_PASSWORD"}]
          }, 
          script: "SCRIPT_CONTENT"}
      ) 
      {
        errors {
          description
          type
        }
        monitor {
          status
        }
      }
    }
    ```
    </Collapser>    
</CollapserGroup>

## Delete a synthetic monitor [#delete-monitor]

Use these scripts to delete your monitors:

<CollapserGroup>
  <Collapser
    id="delete-monitor"
    title="Delete monitor"
  >
    Delete a monitor using the monitor entity GUID.

    ```graphql
    mutation {
      syntheticsDeleteMonitor (
        guid: "ENTITY_GUID"
      ) {
        deletedGuid
      }
    }
    ```
  </Collapser>
</CollapserGroup>

## Manage your private locations [#private-locations]

A [private location](/docs/synthetics/synthetic-monitoring/private-locations/private-locations-overview-monitor-internal-sites-add-new-locations) allows you to monitor applications behind your firewall. When you create a private location, you install and configure private minions to execute the monitors assigned to that private location.

<CollapserGroup>
  <Collapser
    id="private-location"
    title="Create a private location"
  >
    ```graphql
    mutation {
      syntheticsCreatePrivateLocation (
        accountId: ACCOUNT_ID,
        name: "PrivateLocationName",
        description: "Optional description",
        shared: true,
        verifiedScriptExecution: false
      ) {
        guid
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser
    id="private-location"
    title="Update a private location"
  >

  If a location is shared and used by other accounts in your organization to run synthetic monitors, you cannot unshare this private location until those monitors are disabled.

    ```graphql
    mutation {
      syntheticsUpdatePrivateLocation (
        shared: false,
        guid: ENTITY_GUID,     
        description: "EnterYourDescription", 
        verifiedScriptExecution: true
      ) {
        description
        verifiedScriptExecution
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser
    id="delete-private locations"
    title="Delete a private location"
  >
    ```graphql
    mutation {
      syntheticsDeletePrivateLocation (
        guid: ENTITY_GUID
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>

  <Collapser
    id="purge-private-location"
    title="Purge a private location job queue"
  >
    If you need to clear an unwieldy backlog, use this:

    ```graphql
    mutation {
      syntheticsPurgePrivateLocationQueue (
        guid: ENTITY_GUID
      ) {
        errors {
          description
          type
        }
      }
    }
    ```
  </Collapser>
</CollapserGroup>

## Manage your secure credentials [#secure-credentials]

You use [secure credentials](/docs/synthetics/synthetic-monitoring/using-monitors/store-secure-credentials-scripted-browsers-api-tests) when storing, protecting, and centrally managing protected information used by your monitors, like passwords, API keys, or encoded certificates. Using NerdGraph allows you to programmatically change the values of your secure credentials if you need to reset any credentials for any reason.

<CollapserGroup>
  <Collapser
    id="secure-credential"
    title="Create a secure credential"
  >
    ```graphql
    mutation {
      syntheticsCreateSecureCredential (
        accountId: ACCOUNT_ID, 
        description: "YourOptionalDescription", 
        key: SECURE_CREDENTIAL_NAME, 
        value: SECURE_CREDENTIAL_VALUE 
      ) {
        errors {
          description
        }
      }
    }
    ```
  </Collapser>

  <Collapser
    id="update-secure"
    title="Update a secure credential"
  >
    ```graphql
    mutation {
      syntheticsUpdateSecureCredential(
        accountId: ACCOUNT_ID
        description: "YourOptionalDescription"
        key: SECURE_CREDENTIAL_NAME
        value: SECURE_CREDENTIAL_VALUE
      ) {
        createdAt
        lastUpdate
        errors {
          description
        }
      }
    }
    ```
  </Collapser>

  <Collapser
    id="secure-credential"
    title="Delete a secure credential"
  >
    ```graphql
    mutation {
      syntheticsDeleteSecureCredential (
        accountId: ACCOUNT_ID, 
        key: SECURE_CREDENTIAL_NAME
      ) {
        errors {
          description
        }
      }
    }
    ```
  </Collapser>
</CollapserGroup>

## Manage your monitor downtimes [#monitor-downtimes]

Monitor downtimes let you specify times that your synthetics should stop running. We've provided different snippets that demonstrate how to schedule monitor downtimes for your synthetics. You need to update these snippets to specify timezone, start times, and end times. To learn more about when you might schedule monitor downtimes, check out our doc [Disable monitoring during scheduled maintenance times](/docs/synthetics/synthetic-monitoring/using-monitors/monitor-downtimes-disable-monitoring-during-scheduled-maintenance-times/). To find timezone values, see [the tz database of time zones](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones).  For example, America/Los Angeles would use the PDT abbreviation.

<CollapserGroup>
  <Collapser
    id="create-once-downtime"
    title="Create a monitor downtime that runs once"
  >
    ```graphql
    mutation {
      syntheticsCreateOnceMonitorDowntime (
        accountId: ACCOUNT_ID,
        name: "MonitorDowntimeName",
        monitorGuids: ["OptionalMonitorEntityGuid", "OptionalMonitorEntityGuid"],
        timezone: "TIMEZONE",
        startTime: "yyyy-MM-ddTHH:mm:ss",
        endTime: "yyyy-MM-ddTHH:mm:ss"
      ) {
        guid,
        accountId,
        name,
        monitorGuids,
        timezone,
        startTime,
        endTime
      }
    }
    ```
  </Collapser>

  <Collapser
    id="create-daily-downtime"
    title="Create a monitor downtime that runs daily"
  >
    ```graphql
    mutation {
      syntheticsCreateDailyMonitorDowntime (
        accountId: ACCOUNT_ID,
        name: "MonitorDowntimeName",
        monitorGuids: ["OptionalMonitorEntityGuid", "AnotherOptionalMonitorEntityGuid"],
        timezone: "TIMEZONE",
        startTime: "yyyy-MM-ddTHH:mm:ss",
        endTime: "yyyy-MM-ddTHH:mm:ss",
        endRepeat: {
          onDate: "yyyy-MM-ddTHH:mm:ss",
          onRepeat: Int
        }
      ) {
        guid,
        accountId,
        name,
        monitorGuids,
        timezone,
        startTime,
        endTime,
        endRepeat {
          onDate,
          onRepeat
        }
      }
    }
    ```
  </Collapser>

  <Collapser
    id="create-weekly-downtime"
    title="Create a monitor downtime that runs weekly"
  >
    ```graphql
    mutation {
      syntheticsCreateWeeklyMonitorDowntime (
        accountId: ACCOUNT_ID,
        name: "MonitorDowntimeName",
        monitorGuids: ["OptionalMonitorEntityGuid", "AnotherOptionalMonitorEntityGuid"],
        timezone: "TIMEZONE",
        startTime: "yyyy-MM-ddTHH:mm:ss",
        endTime: "yyyy-MM-ddTHH:mm:ss",
        endRepeat: {
          onDate: "yyyy-MM-ddTHH:mm:ss",
          onRepeat: Int
        },
        maintenanceDays: [WeekDaysEnums]
      ) {
        guid,
        accountId,
        name,
        monitorGuids,
        timezone,
        startTime,
        endTime,
        endRepeat {
          onDate,
          onRepeat
        },
        maintenanceDays
      }
    }
    ```
  </Collapser>

  <Collapser
    id="create-monthly-downtime"
    title="Create a monitor downtime that runs monthly"
  >
    ```graphql
    mutation {
      syntheticsCreateMonthlyMonitorDowntime (
        accountId: ACCOUNT_ID,
        name: "MonitorDowntimeName",
        monitorGuids: ["OptionalMonitorEntityGuid", "AnotherOptionalMonitorEntityGuid"],
        timezone: "TIMEZONE",
        startTime: "yyyy-MM-ddTHH:mm:ss",
        endTime: "yyyy-MM-ddTHH:mm:ss",
        endRepeat: {
          onDate: "yyyy-MM-ddTHH:mm:ss",
          onRepeat: Int
        },
        frequency: {
          daysOfWeek: {
            weekDay: WeekDaysEnum,
            ordinalDayOfMonth: DayOfMonthOrdinal
          },
          daysOfMonth: [Int]
        }
      ) {
        guid,
        accountId,
        name,
        monitorGuids,
        timezone,
        startTime,
        endTime,
        endRepeat {
          onDate,
          onRepeat
        },
        frequency {
          daysOfWeek {
            weekDay,
            ordinalDayOfMonth
          },
          daysOfMonth
        }
      }
    }
    ```
  </Collapser>

  <Collapser
    id="update-downtime"
    title="Update a monitor downtime"
  >
    ```graphql
    mutation {
      syntheticsEditMonitorDowntime (
        guid: "MonitorDowntimeEntityGuid",
        name: "MONITOR_DOWNTIME_NAME",
        monitorGuids: ["OptionalMonitorEntityGuid", "AnotherOptionalMonitorEntityGuid"],
        once: {
          timezone: "TIMEZONE",
          startTime: "yyyy-MM-ddTHH:mm:ss",
          endTime: "yyyy-MM-ddTHH:mm:ss"
        },
        daily: {
          timezone: "TIMEZONE",
          startTime: "yyyy-MM-ddTHH:mm:ss",
          endTime: "yyyy-MM-ddTHH:mm:ss",
          endRepeat: {
            onDate: "yyyy-MM-ddTHH:mm:ss",
            onRepeat: Int
          }
        },
        weekly: {
          timezone: "TIMEZONE",
          startTime: "yyyy-MM-ddTHH:mm:ss",
          endTime: "yyyy-MM-ddTHH:mm:ss",
          endRepeat: {
            onDate: "yyyy-MM-ddTHH:mm:ss",
            onRepeat: Int
          },
          maintenanceDays: [WeekDaysEnums]
        },
        monthly: {
          timezone: "TIMEZONE",
          startTime: "yyyy-MM-ddTHH:mm:ss",
          endTime: "yyyy-MM-ddTHH:mm:ss",
          endRepeat: {
            onDate: "yyyy-MM-ddTHH:mm:ss",
            onRepeat: Int
          },
          frequency: {
            daysOfWeek: {
              weekDay: WeekDaysEnum,
              ordinalDayOfMonth: DayOfMonthOrdinal
          },
          daysOfMonth: [Int]
        }
      ) {
        guid,
        accountId,
        name,
        monitorGuids,
        timezone,
        startTime,
        endTime,
        endRepeat {
          onDate,
          onRepeat
        },
        maintenanceDays,
        frequency {
          daysOfWeek {
            weekDay,
            ordinalDayOfMonth
          },
          daysOfMonth
        }
      }
    }
    ```
  </Collapser>

  <Collapser
    id="delete-downtime"
    title="Delete a monitor downtime"
  >
    ```graphql
    mutation {
      syntheticsDeleteMonitorDowntime (
        guid: DOWNTIME_ENTITY_GUID
      ) {
        guid
      }
    }
    ```
  </Collapser>
</CollapserGroup>
