---
title: "Manage certificate check monitors"
tags:
  - Synthetics
  - APIs
  - NerdGraph
  - Examples
metaDescription: How to use New Relic NerdGraph API to create and update certificate check monitors for synthetic monitoring.
freshnessValidatedDate: never
---

New Relic allows you use NerdGraph to create [certificate check monitors](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors). Certificate check monitors track SSL certificate expiration dates and notify you when certificates are about to expire. This tutorial provides examples of how to use the NerdGraph API to automate the creation of certificate check monitors.

## Create a certificate check monitor [#create-certificate-check]

You can create a certificate check monitor using the `syntheticsCreateCertCheckMonitor` mutation. This mutation allows you to set up monitoring for SSL certificate expiration on any domain.

### Input parameters

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Data Type</th>
      <th>Is it Required?</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>`accountId`</td>
      <td>Integer</td>
      <td>Yes</td>
      <td>Your New Relic [account ID](/docs/accounts/accounts-billing/account-structure/account-id) where the monitor will be created.</td>
    </tr>
    <tr>
      <td>`monitor.domain`</td>
      <td>String</td>
      <td>Yes</td>
      <td>The domain to monitor for certificate expiration (e.g., `example.com`).</td>
    </tr>
    <tr>
      <td>`monitor.locations.public`</td>
      <td>Array</td>
      <td>Yes</td>
      <td>Array of [public location](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors/#setting-location) identifiers where the monitor will run checks (e.g., `["US_EAST_1", "US_WEST_1"]`).</td>
    </tr>
    <tr>
      <td>`monitor.name`</td>
      <td>String</td>
      <td>Yes</td>
      <td>The display name for your certificate check monitor.</td>
    </tr>
    <tr>
      <td>`monitor.numberDaysToFailBeforeCertExpires`</td>
      <td>Integer</td>
      <td>Yes</td>
      <td>Number of days before certificate expiration to trigger a failure. For example, setting this to 30 means the monitor will fail when the certificate has 30 or fewer days until expiration.</td>
    </tr>
    <tr>
      <td>`monitor.period`</td>
      <td>Enum</td>
      <td>Yes</td>
      <td>How often the monitor runs. Options: `EVERY_MINUTE`, `EVERY_5_MINUTES`, `EVERY_10_MINUTES`, `EVERY_15_MINUTES`, `EVERY_30_MINUTES`, `EVERY_HOUR`, `EVERY_6_HOURS`, `EVERY_12_HOURS`, `EVERY_DAY`.</td>
    </tr>
    <tr>
      <td>`monitor.status`</td>
      <td>Enum</td>
      <td>Yes</td>
      <td>The monitor status. Options: `ENABLED` (monitor is active and performing checks), `DISABLED` (monitor is inactive).</td>
    </tr>
    <tr>
      <td>`monitor.apdexTarget`</td>
      <td>Float</td>
      <td>No</td>
      <td>The monitor's Apdex target in seconds, used to populate SLA reports. Defaults to 7.0 seconds.</td>
    </tr>
  </tbody>
</table>

### Sample request

```graphql
mutation {
  syntheticsCreateCertCheckMonitor(
    accountId: ACCOUNT_ID
    monitor: {
      domain: "DOMAIN"
      locations: { public: ["LOCATION_1", "LOCATION_2"] }
      name: "YOUR_MONITOR_NAME"
      numberDaysToFailBeforeCertExpires: DAYS_UNTIL_EXPIRATION
      period: PERIOD
      status: STATUS
      apdexTarget: APDEX_TARGET
    }
  ) {
    errors {
      description
      type
    }
  }
}
```

### Sample response

A successful response returns `null` for errors:

```json
{
  "data": {
    "syntheticsCreateCertCheckMonitor": {
      "errors": null
    }
  }
}
```

If there are any issues creating the monitor, the `errors` array will contain objects with `description` and `type` fields explaining what went wrong.

## Update a certificate check monitor [#update-certificate-check]

You can update an existing certificate check monitor using the `syntheticsUpdateCertCheckMonitor` mutation. This allows you to modify the configuration of a certificate check monitor that has already been created.

### Input parameters

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Data Type</th>
      <th>Is it Required?</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>`guid`</td>
      <td>String</td>
      <td>Yes</td>
      <td>The unique entity [GUID](/docs/apis/nerdgraph/examples/synthetics-api/query-synthetics-data#query-monitors) of the monitor you want to update.</td>
    </tr>
    <tr>
      <td>`monitor.domain`</td>
      <td>String</td>
      <td>No</td>
      <td>The domain to monitor for certificate expiration (e.g., `example.com`).</td>
    </tr>
    <tr>
      <td>`monitor.locations.public`</td>
      <td>Array</td>
      <td>No</td>
      <td>Array of [public location](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors/#setting-location) identifiers where the monitor will run checks (e.g., `["US_EAST_1", "US_WEST_1"]`).</td>
    </tr>
    <tr>
      <td>`monitor.name`</td>
      <td>String</td>
      <td>No</td>
      <td>The updated display name for your certificate check monitor.</td>
    </tr>
    <tr>
      <td>`monitor.numberDaysToFailBeforeCertExpires`</td>
      <td>Integer</td>
      <td>No</td>
      <td>Number of days before certificate expiration to trigger a failure.</td>
    </tr>
    <tr>
      <td>`monitor.period`</td>
      <td>Enum</td>
      <td>No</td>
      <td>How often the monitor runs. Options: `EVERY_MINUTE`, `EVERY_5_MINUTES`, `EVERY_10_MINUTES`, `EVERY_15_MINUTES`, `EVERY_30_MINUTES`, `EVERY_HOUR`, `EVERY_6_HOURS`, `EVERY_12_HOURS`, `EVERY_DAY`.</td>
    </tr>
    <tr>
      <td>`monitor.status`</td>
      <td>Enum</td>
      <td>No</td>
      <td>The monitor status. Options: `ENABLED` (monitor is active and performing checks), `DISABLED` (monitor is inactive).</td>
    </tr>
    <tr>
      <td>`monitor.apdexTarget`</td>
      <td>Float</td>
      <td>No</td>
      <td>The monitor's Apdex target in seconds, used to populate SLA reports. Defaults to 7.0 seconds.</td>
    </tr>
  </tbody>
</table>

### Sample request

```graphql
mutation {
  syntheticsUpdateCertCheckMonitor(
    guid: ENTITY_GUID
    monitor: {
      domain: "DOMAIN"
      locations: { public: ["LOCATION_1", "LOCATION_2"] }
      name: "YOUR_MONITOR_NAME"
      numberDaysToFailBeforeCertExpires: DAYS_UNTIL_EXPIRATION
      period: PERIOD
      status: STATUS
      apdexTarget: APDEX_TARGET
    }
  ) {
    errors {
      description
      type
    }
  }
}
```

### Sample response

A successful response returns `null` for errors:

```json
{
  "data": {
    "syntheticsUpdateCertCheckMonitor": {
      "errors": null
    }
  }
}
```

If there are any issues updating the monitor, the `errors` array will contain objects with `description` and `type` fields explaining what went wrong.

## Delete a certificate check monitor [#delete-monitor]

When a certificate check monitor is no longer needed, you can permanently remove it using the `syntheticsDeleteMonitor` mutation.

To delete a monitor, refer to the [Delete Synthetic monitor](/docs/apis/nerdgraph/examples/synthetics-api/ping-monitor/#delete-monitor) section.

## Query certificate check monitors [#query-certificate-check-monitors]

**Need to query your certificate check monitors?** All query examples for certificate check monitors, including how to retrieve monitor metadata, map monitor IDs to GUIDs, and check runtime upgrade status, are available on the centralized [Query synthetic monitoring data](/docs/apis/nerdgraph/examples/synthetics-api/query-synthetics-data) page.

**Quick links to relevant sections:**
- [Query all monitors](/docs/apis/nerdgraph/examples/synthetics-api/query-synthetics-data#query-monitors) - Get all synthetic monitors including certificate check monitors
- [Map monitor ID to entity GUID](/docs/apis/nerdgraph/examples/synthetics-api/query-synthetics-data#query-guid-mapping) - Convert legacy monitor IDs to entity GUIDs
- [Runtime upgrade status](/docs/apis/nerdgraph/examples/synthetics-api/query-synthetics-data#query-runtime-upgrade-all) - Check upgrade readiness for legacy monitors
