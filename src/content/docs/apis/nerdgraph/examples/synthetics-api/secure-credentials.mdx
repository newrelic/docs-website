---
title: "Manage secure credentials"
tags:
  - Synthetics
  - APIs
  - NerdGraph
  - Examples
metaDescription: How to use New Relic NerdGraph API to create and manage secure credentials for synthetic monitoring.
freshnessValidatedDate: never
---

[Secure credentials](/docs/synthetics/synthetic-monitoring/using-monitors/store-secure-credentials-scripted-browsers-api-tests) help you store, protect, and centrally manage sensitive information like passwords, API keys, or encoded certificates. Your synthetic monitors can securely access this information during script execution. This tutorial provides examples of how to use the NerdGraph API to programmatically manage secure credentials.

## Create a secure credential [#create-secure-credential]

You can create a secure credential using the `syntheticsCreateSecureCredential` mutation. This mutation allows you to securely store sensitive information that your synthetic monitors can access during script execution.

### Input parameters

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Data Type</th>
      <th>Is it Required?</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>`accountId`</td>
      <td>Integer</td>
      <td>Yes</td>
      <td>The [account ID](/docs/accounts/accounts-billing/account-structure/account-id) of the New Relic account where the secure credential will be created.</td>
    </tr>
    <tr>
      <td>`description`</td>
      <td>String</td>
      <td>No</td>
      <td>A description to help identify the purpose of this credential.</td>
    </tr>
    <tr>
      <td>`key`</td>
      <td>String</td>
      <td>Yes</td>
      <td>The unique key identifier for the synthetics secure credential in New Relic.</td>
    </tr>
    <tr>
      <td>`value`</td>
      <td>String</td>
      <td>Yes</td>
      <td>The sensitive value to store securely (password, API key, etc.).</td>
    </tr>
  </tbody>
</table>

### Sample request

```graphql
mutation {
  syntheticsCreateSecureCredential(
    accountId: ACCOUNT_ID,
    description: "Your optional description",
    key: "SECURE_CREDENTIAL_NAME",
    value: "SECURE_CREDENTIAL_VALUE"
  ) {
    errors {
      description
      type
    }
  }
}
```

### Sample response

A successful response returns `null` for errors:

```json
{
  "data": {
    "syntheticsCreateSecureCredential": {
      "errors": null
    }
  }
}
```

If there are any issues creating the secure credential, the `errors` array will contain objects with `description` and `type` fields explaining what went wrong.

## Update a secure credential [#update-secure-credential]

You can update an existing secure credential using the `syntheticsUpdateSecureCredential` mutation. This allows you to modify the value and description while keeping the same key name.

### Input parameters

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Data Type</th>
      <th>Is it Required?</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>`accountId`</td>
      <td>Integer</td>
      <td>Yes</td>
      <td>The [account ID](/docs/accounts/accounts-billing/account-structure/account-id) that contains the secure credential.</td>
    </tr>
    <tr>
      <td>`description`</td>
      <td>String</td>
      <td>No</td>
      <td>Updated description for the secure credential.</td>
    </tr>
    <tr>
      <td>`key`</td>
      <td>String</td>
      <td>Yes</td>
      <td>The unique key identifier for the synthetics secure credential in New Relic.</td>
    </tr>
    <tr>
      <td>`value`</td>
      <td>String</td>
      <td>Yes</td>
      <td>The new sensitive value to store.</td>
    </tr>
  </tbody>
</table>

### Sample request

```graphql
mutation {
  syntheticsUpdateSecureCredential(
    accountId: ACCOUNT_ID
    description: "Updated description for the secure credential."
    key: "SECURE_CREDENTIAL_NAME"
    value: "SECURE_CREDENTIAL_VALUE"
  ) {
    createdAt
    lastUpdate
    errors {
      description
      type
    }
  }
}
```

### Sample response

A successful response returns the updated metadata and `null` for errors:

```json
{
  "data": {
    "syntheticsUpdateSecureCredential": {
      "createdAt": "2024-01-15T10:30:00Z",
      "lastUpdate": "2024-01-20T14:45:00Z",
      "errors": null
    }
  }
}
```

If there are any issues updating the secure credential, the `errors` array will contain objects with `description` and `type` fields explaining what went wrong.

## Delete a secure credential [#delete-secure-credential]

You can delete a secure credential using the `syntheticsDeleteSecureCredential` mutation. Once deleted, any monitors referencing this credential will fail until updated.

<Callout variant="caution">
  Before deleting a secure credential, make sure no active monitors are using it. Deleting a credential that's in use will cause those monitors to fail.
</Callout>

### Input parameters

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Data Type</th>
      <th>Is it Required?</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>`accountId`</td>
      <td>Integer</td>
      <td>Yes</td>
      <td>The [account ID](/docs/accounts/accounts-billing/account-structure/account-id) that contains the secure credential.</td>
    </tr>
    <tr>
      <td>`key`</td>
      <td>String</td>
      <td>Yes</td>
      <td>The unique key identifier for the synthetics secure credential in New Relic.</td>
    </tr>
  </tbody>
</table>

### Sample request

```graphql
mutation {
  syntheticsDeleteSecureCredential(
    accountId: ACCOUNT_ID,
    key: "SECURE_CREDENTIAL_NAME"
  ) {
    errors {
      description
      type
    }
  }
}
```

### Sample response

A successful response returns `null` for errors:

```json
{
  "data": {
    "syntheticsDeleteSecureCredential": {
      "errors": null
    }
  }
}
```

If there are any issues deleting the secure credential, the `errors` array will contain objects with `description` and `type` fields explaining what went wrong.

## Query secure credentials [#query-secure-credentials]

You can query your secure credentials to retrieve metadata information about them. For security reasons, querying secure credentials returns metadata only, not the actual credential values. This query retrieves all secure credentials in your account, returning essential information like the credential's GUID, name, account ID, tags, and last update timestamp.

### Input parameters

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Data Type</th>
      <th>Is it Required?</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>`query`</td>
      <td>String</td>
      <td>Yes</td>
      <td>The search query to filter entities. Use `domain = 'SYNTH' AND type = 'SECURE_CRED'` to retrieve all secure credentials.</td>
    </tr>
  </tbody>
</table>

### Sample query

```graphql
{
  actor {
    entitySearch(query: "domain = 'SYNTH' AND type = 'SECURE_CRED'") {
      results {
        entities {
          ... on SecureCredentialEntityOutline {
            accountId
            guid
            name
            tags {
              key
              values
            }
            updatedAt
          }
        }
      }
    }
  }
}
```

### Sample response

```json
{
  "data": {
    "actor": {
      "entitySearch": {
        "results": {
          "entities": [
            {
              "accountId": 2520528,
              "guid": "MjUyMDUyOHxTWU5USHxTRUNVUkVfQ1JFRF8xMjM0NQ",
              "name": "API_KEY_PROD",
              "tags": [
                {
                  "key": "description",
                  "values": ["Production API key for external service"]
                }
              ],
              "updatedAt": "2023-12-01T10:30:00Z"
            }
          ]
        }
      }
    }
  }
}
```
