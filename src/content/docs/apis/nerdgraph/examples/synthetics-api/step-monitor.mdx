---
title: "Manage step monitors"
tags:
  - Synthetics
  - APIs
  - NerdGraph
  - Examples
metaDescription: How to use New Relic NerdGraph API to create and update step monitors for synthetic monitoring.
freshnessValidatedDate: never
---

New Relic allows you use NerdGraph to create [step monitors](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors). Step monitors provide codeless, multi-step browser-based monitoring that allows you to configure complex user workflows without writing any code. This tutorial provides examples of how to use the NerdGraph API to automate the creation of step monitors.

## Create a step monitor [#create-step-monitor]

You can create a step monitor using the `syntheticsCreateStepMonitor` mutation. This mutation allows you to set up multi-step browser monitoring with a series of predefined actions.

### Input parameters

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Data Type</th>
      <th>Is it Required?</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>`accountId`</td>
      <td>Integer</td>
      <td>Yes</td>
      <td>Your New Relic [account ID](/docs/accounts/accounts-billing/account-structure/account-id) where the monitor will be created.</td>
    </tr>
    <tr>
      <td>`monitor.browsers`</td>
      <td>Array</td>
      <td>Yes</td>
      <td>Browser(s) that the monitor will use to execute jobs. Supported browsers: `CHROME`, `EDGE`, `FIREFOX`.</td>
    </tr>
    <tr>
      <td>`monitor.devices`</td>
      <td>Array</td>
      <td>Yes</td>
      <td>Devices that the monitor will use to execute jobs. Supported devices: `DESKTOP`, `MOBILE_LANDSCAPE`, `MOBILE_PORTRAIT`, `TABLET_LANDSCAPE`, `TABLET_PORTRAIT`.</td>
    </tr>
    <tr>
      <td>`monitor.locations.public`</td>
      <td>Array</td>
      <td>Yes</td>
      <td>Array of [public location](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors/#setting-location) identifiers where the monitor will run checks (e.g., `["US_EAST_1", "US_WEST_1"]`).</td>
    </tr>
    <tr>
      <td>`monitor.name`</td>
      <td>String</td>
      <td>Yes</td>
      <td>The display name for your step monitor.</td>
    </tr>
    <tr>
      <td>`monitor.period`</td>
      <td>Enum</td>
      <td>Yes</td>
      <td>How often the monitor runs. Options: `EVERY_MINUTE`, `EVERY_5_MINUTES`, `EVERY_10_MINUTES`, `EVERY_15_MINUTES`, `EVERY_30_MINUTES`, `EVERY_HOUR`, `EVERY_6_HOURS`, `EVERY_12_HOURS`, `EVERY_DAY`.</td>
    </tr>
    <tr>
      <td>`monitor.runtime.runtimeType`</td>
      <td>String</td>
      <td>Yes</td>
      <td>The runtime type used by your monitor. `CHROME_BROWSER` is the only accepted value.</td>
    </tr>
    <tr>
      <td>`monitor.runtime.runtimeTypeVersion`</td>
      <td>String</td>
      <td>Yes</td>
      <td>The runtime type version used by your monitor. `100` is the only accepted value.</td>
    </tr>
    <tr>
      <td>`monitor.runtime.scriptLanguage`</td>
      <td>String</td>
      <td>Yes</td>
      <td>The language used in your monitor. `JAVASCRIPT` is the only accepted value.</td>
    </tr>
    <tr>
      <td>`monitor.status`</td>
      <td>Enum</td>
      <td>Yes</td>
      <td>The monitor status. Options: `ENABLED` (monitor is active and performing checks), `DISABLED` (monitor is inactive).</td>
    </tr>
    <tr>
      <td>`monitor.steps`</td>
      <td>Array</td>
      <td>Yes</td>
      <td>The series of steps the monitor will execute. Each step object contains: `ordinal` (position of the step, 0-99), `type` (step type like `NAVIGATE`, `CLICK_ELEMENT`, `DOUBLE_CLICK_ELEMENT`, `ASSERT_TEXT`, `ASSERT_TITLE`, etc.), and `values` (array of values specific to the step type).</td>
    </tr>
    <tr>
      <td>`monitor.advancedOptions.enableScreenshotOnFailureAndScript`</td>
      <td>Boolean</td>
      <td>No</td>
      <td>Captures a screenshot during job execution when a failure occurs or a script is executed.</td>
    </tr>
    <tr>
      <td>`monitor.apdexTarget`</td>
      <td>Float</td>
      <td>No</td>
      <td>The monitor's Apdex target in seconds, used to populate SLA reports. Defaults to 7.0 seconds.</td>
    </tr>
  </tbody>
</table>

### Sample request

```graphql
mutation {
  syntheticsCreateStepMonitor(
    accountId: ACCOUNT_ID
    monitor: {
      browsers: [BROWSERS]
      devices: [DEVICES]
      locations: { public: ["LOCATION_1", "LOCATION_2"] }
      name: "MONITOR_NAME"
      period: PERIOD
      runtime: {
        runtimeType: "RUNTIME_TYPE"
        runtimeTypeVersion: "RUNTIME_TYPE_VERSION"
        scriptLanguage: "SCRIPT_LANGUAGE"
      }
      status: STATUS
      steps: [
        {
          ordinal: 0,
          type: NAVIGATE,
          values: ["MONITORED_URI", "USER_AGENT"] }
        {
          ordinal: STEP_NUMBER
          type: STEP_TYPE
          values: ["CONDITIONAL_TYPE", "VALUE"]
        }
      ]
      advancedOptions: { enableScreenshotOnFailureAndScript: ENABLE_SCREENSHOT }
      apdexTarget: APDEX_TARGET
    }
  ) {
    errors {
      description
      type
    }
  }
}
```

### Sample response

A successful response returns `null` for errors:

```json
{
  "data": {
    "syntheticsCreateStepMonitor": {
      "errors": null
    }
  }
}
```

If there are any issues creating the monitor, the `errors` array will contain objects with `description` and `type` fields explaining what went wrong.

## Update a step monitor [#update-step-monitor]

You can update an existing step monitor using the `syntheticsUpdateStepMonitor` mutation. This allows you to modify the configuration of a step monitor that has already been created.

### Input parameters

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Data Type</th>
      <th>Is it Required?</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>`guid`</td>
      <td>String</td>
      <td>Yes</td>
      <td>The unique entity [GUID](/docs/apis/nerdgraph/examples/synthetics-api/query-synthetics-data#query-monitors) of the monitor you want to update.</td>
    </tr>
    <tr>
      <td>`monitor.browsers`</td>
      <td>Array</td>
      <td>No</td>
      <td>Browser(s) that the monitor will use to execute jobs. Supported browsers: `CHROME`, `EDGE`, `FIREFOX`.</td>
    </tr>
    <tr>
      <td>`monitor.devices`</td>
      <td>Array</td>
      <td>No</td>
      <td>Devices that the monitor will use to execute jobs. Supported devices: `DESKTOP`, `MOBILE_LANDSCAPE`, `MOBILE_PORTRAIT`, `TABLET_LANDSCAPE`, `TABLET_PORTRAIT`.</td>
    </tr>
    <tr>
      <td>`monitor.locations.public`</td>
      <td>Array</td>
      <td>No</td>
      <td>Array of [public location](/docs/synthetics/synthetic-monitoring/using-monitors/add-edit-monitors/#setting-location) identifiers where the monitor will run checks (e.g., `["US_EAST_1", "US_WEST_1"]`).</td>
    </tr>
    <tr>
      <td>`monitor.name`</td>
      <td>String</td>
      <td>No</td>
      <td>The updated display name for your step monitor.</td>
    </tr>
    <tr>
      <td>`monitor.period`</td>
      <td>Enum</td>
      <td>No</td>
      <td>How often the monitor runs. Options: `EVERY_MINUTE`, `EVERY_5_MINUTES`, `EVERY_10_MINUTES`, `EVERY_15_MINUTES`, `EVERY_30_MINUTES`, `EVERY_HOUR`, `EVERY_6_HOURS`, `EVERY_12_HOURS`, `EVERY_DAY`.</td>
    </tr>
    <tr>
      <td>`monitor.runtime.runtimeType`</td>
      <td>String</td>
      <td>No</td>
      <td>The runtime type used by your monitor. `CHROME_BROWSER` is the only accepted value.</td>
    </tr>
    <tr>
      <td>`monitor.runtime.runtimeTypeVersion`</td>
      <td>String</td>
      <td>No</td>
      <td>The runtime type version used by your monitor. `100` is the only accepted value.</td>
    </tr>
    <tr>
      <td>`monitor.runtime.scriptLanguage`</td>
      <td>String</td>
      <td>No</td>
      <td>The language used in your monitor. `JAVASCRIPT` is the only accepted value.</td>
    </tr>
    <tr>
      <td>`monitor.status`</td>
      <td>Enum</td>
      <td>No</td>
      <td>The monitor status. Options: `ENABLED` (monitor is active and performing checks), `DISABLED` (monitor is inactive).</td>
    </tr>
    <tr>
      <td>`monitor.steps`</td>
      <td>Array</td>
      <td>No</td>
      <td>The series of steps the monitor will execute. Each step object contains: `ordinal` (position of the step, 0-99), `type` (step type like `NAVIGATE`, `CLICK_ELEMENT`, `DOUBLE_CLICK_ELEMENT`, `ASSERT_TEXT`, `ASSERT_TITLE`, etc.), and `values` (array of values specific to the step type).</td>
    </tr>
    <tr>
      <td>`monitor.advancedOptions.enableScreenshotOnFailureAndScript`</td>
      <td>Boolean</td>
      <td>No</td>
      <td>Captures a screenshot during job execution when a failure occurs or a script is executed.</td>
    </tr>
    <tr>
      <td>`monitor.apdexTarget`</td>
      <td>Float</td>
      <td>No</td>
      <td>The monitor's Apdex target in seconds, used to populate SLA reports. Defaults to 7.0 seconds.</td>
    </tr>
  </tbody>
</table>

### Sample request

```graphql
mutation {
  syntheticsUpdateStepMonitor(
    guid: ENTITY_GUID
    monitor: {
      browsers: [BROWSERS]
      devices: [DEVICES]
      locations: { public: ["LOCATION_1", "LOCATION_2"] }
      name: "MONITOR_NAME"
      period: PERIOD
      runtime: {
        runtimeType: "RUNTIME_TYPE"
        runtimeTypeVersion: "RUNTIME_TYPE_VERSION"
        scriptLanguage: "SCRIPT_LANGUAGE"
      }
      status: STATUS
      steps: [
        {
          ordinal: 0,
          type: NAVIGATE,
          values: ["MONITORED_URI", "USER_AGENT"]
        }
        {
          ordinal: STEP_NUMBER,
          type: STEP_TYPE,
          values: ["VALUE_1", "VALUE_2"]
        }
      ]
      advancedOptions: { enableScreenshotOnFailureAndScript: ENABLE_SCREENSHOT }
      apdexTarget: APDEX_TARGET
    }
  ) {
    errors {
      description
      type
    }
  }
}
```

### Sample response

A successful response returns `null` for errors:

```json
{
  "data": {
    "syntheticsUpdateStepMonitor": {
      "errors": null
    }
  }
}
```

If there are any issues updating the monitor, the `errors` array will contain objects with `description` and `type` fields explaining what went wrong.

## Delete a step monitor [#delete-monitor]

When a step monitor is no longer needed, you can permanently remove it using the `syntheticsDeleteMonitor` mutation.

To delete a monitor, refer to the [Delete Synthetic monitor](/docs/apis/nerdgraph/examples/synthetics-api/ping-monitor/#delete-monitor) section.

## Query step monitors [#query-step-monitors]

You can query your step monitors to retrieve information about their configuration, status, and metadata. This query retrieves all synthetic monitors in your account, including step monitors, returning essential information like the monitor's GUID, name, account ID, monitor type, and associated tags.

### Input parameters

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Data Type</th>
      <th>Is it Required?</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>`query`</td>
      <td>String</td>
      <td>Yes</td>
      <td>The search query to filter entities. Use `domain = 'SYNTH' AND type = 'MONITOR'` to retrieve all synthetic monitors, or add additional filters like `monitorType = 'STEP_MONITOR'` to find only step monitors.</td>
    </tr>
  </tbody>
</table>

### Sample query

```graphql
{
  actor {
    entitySearch(query: "domain = 'SYNTH' AND type = 'MONITOR' AND tags.monitorType = 'STEP_MONITOR'") {
      results {
        entities {
          ... on SyntheticMonitorEntityOutline {
            guid
            name
            accountId
            monitorType
            tags {
              key
              values
            }
          }
        }
      }
    }
  }
}
```

## Query monitor steps [#query-monitor-steps]

To retrieve the steps configured for your step monitor, use this query. Step monitors use predefined actions and this query returns the sequence of steps with their configuration.

### Input parameters

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Data Type</th>
      <th>Is it Required?</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>`id` (account)</td>
      <td>Integer</td>
      <td>Yes</td>
      <td>The New Relic account ID that contains the monitor.</td>
    </tr>
    <tr>
      <td>`monitorGuid`</td>
      <td>String</td>
      <td>Yes</td>
      <td>The unique entity GUID of the step monitor whose steps you want to retrieve.</td>
    </tr>
  </tbody>
</table>

### Sample query

```graphql
{
  actor {
    account(id: ACCOUNT_ID) {
      synthetics {
        steps(monitorGuid: "ENTITY_GUID") {
          ordinal
          type
          values
        }
      }
    }
  }
}
```

## Map monitor ID to entity GUID [#map-monitor-id]

If you have a legacy numeric monitor ID and need to convert it to the entity GUID format required for updates and deletions, use this query:

### Sample query

```graphql
{
  actor {
    entitySearch(
      query: "(domainId = 'MONITOR_ID')"
    ) {
      results {
        entities {
          ... on SyntheticMonitorEntityOutline {
            guid
            name
            monitorId
          }
        }
      }
    }
  }
}
```

Replace `MONITOR_ID` with your numeric monitor ID. The response will include the entity GUID you need for other operations.
