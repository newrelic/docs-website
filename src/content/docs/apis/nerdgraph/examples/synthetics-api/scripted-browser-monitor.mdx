---
title: "Manage scripted browser monitors"
tags:
  - Synthetics
  - APIs
  - NerdGraph
  - Examples
metaDescription: How to use New Relic NerdGraph API to create and update scripted browser monitors for synthetic monitoring.
freshnessValidatedDate: never
---

New Relic allows you use NerdGraph to create [scripted browser monitors](/docs/synthetics/synthetic-monitoring/scripting-monitors/introduction-scripted-browser-monitors). Scripted browser monitors execute custom JavaScript code in a real browser environment, allowing you to simulate complex user interactions and multi-step workflows. This tutorial provides examples of how to use the NerdGraph API to automate the creation of scripted browser monitors.

## Create a scripted browser monitor [#create-scripted-browser]

You can create a scripted browser monitor using the `syntheticsCreateScriptBrowserMonitor` mutation. This mutation allows you to set up custom scripted monitoring that executes your JavaScript code in a browser.

### Input parameters

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Data Type</th>
      <th>Is it Required?</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>`accountId`</td>
      <td>Integer</td>
      <td>Yes</td>
      <td>Your New Relic [account ID](/docs/accounts/accounts-billing/account-structure/account-id) where the monitor will be created.</td>
    </tr>
    <tr>
      <td>`monitor.browsers`</td>
      <td>Array</td>
      <td>Yes</td>
      <td>Browser(s) that the monitor will use to execute jobs. Supported browsers: `CHROME`, `EDGE`, `FIREFOX`.</td>
    </tr>
    <tr>
      <td>`monitor.devices`</td>
      <td>Array</td>
      <td>Yes</td>
      <td>Devices that the monitor will use to execute jobs. Supported devices: `DESKTOP`, `MOBILE_LANDSCAPE`, `MOBILE_PORTRAIT`, `TABLET_LANDSCAPE`, `TABLET_PORTRAIT`.</td>
    </tr>
    <tr>
      <td>`monitor.locations`</td>
      <td>Object</td>
      <td>Yes</td>
      <td>Locations where the monitor will run checks. `monitor.locations` allows two values: `private` for private location GUIDs and `public` for public location identifiers (e.g., `{ private: ["PRIVATE_LOCATION_GUID"] }` or `{ public: ["US_EAST_1", "US_WEST_1"] }`).</td>
    </tr>
    <tr>
      <td>`monitor.name`</td>
      <td>String</td>
      <td>Yes</td>
      <td>The display name for your scripted browser monitor.</td>
    </tr>
    <tr>
      <td>`monitor.period`</td>
      <td>Enum</td>
      <td>Yes</td>
      <td>How often the monitor runs. Options: `EVERY_MINUTE`, `EVERY_5_MINUTES`, `EVERY_10_MINUTES`, `EVERY_15_MINUTES`, `EVERY_30_MINUTES`, `EVERY_HOUR`, `EVERY_6_HOURS`, `EVERY_12_HOURS`, `EVERY_DAY`.</td>
    </tr>
    <tr>
      <td>`monitor.runtime.runtimeType`</td>
      <td>String</td>
      <td>Yes</td>
      <td>The runtime type used by your monitor. `CHROME_BROWSER` is the only accepted value.</td>
    </tr>
    <tr>
      <td>`monitor.runtime.runtimeTypeVersion`</td>
      <td>String</td>
      <td>Yes</td>
      <td>The runtime type version used by your monitor. `100` is the only accepted value.</td>
    </tr>
    <tr>
      <td>`monitor.runtime.scriptLanguage`</td>
      <td>String</td>
      <td>Yes</td>
      <td>The language used in your monitor. `JAVASCRIPT` is the only accepted value.</td>
    </tr>
    <tr>
      <td>`monitor.script`</td>
      <td>String</td>
      <td>Yes</td>
      <td>The JavaScript code that the monitor executes. This should be plain text, not base64 encoded. The script can use Selenium WebDriver APIs to control the browser.</td>
    </tr>
    <tr>
      <td>`monitor.status`</td>
      <td>Enum</td>
      <td>Yes</td>
      <td>The monitor status. Options: `ENABLED` (monitor is active and performing checks), `DISABLED` (monitor is inactive).</td>
    </tr>
    <tr>
      <td>`monitor.advancedOptions.enableScreenshotOnFailureAndScript`</td>
      <td>Boolean</td>
      <td>No</td>
      <td>Captures a screenshot during job execution when a failure occurs or a script is executed.</td>
    </tr>
    <tr>
      <td>`monitor.apdexTarget`</td>
      <td>Float</td>
      <td>No</td>
      <td>The monitor's Apdex target in seconds, used to populate SLA reports. Defaults to 7.0 seconds.</td>
    </tr>
  </tbody>
</table>

### Sample request

```graphql
mutation {
  syntheticsCreateScriptBrowserMonitor(
    accountId: ACCOUNT_ID
    monitor: {
      browsers: [BROWSERS]
      devices: [DEVICES]
      locations: { public: ["LOCATION_1", "LOCATION_2"] }
      name: "MONITOR_NAME"
      period: PERIOD
      runtime: {
        runtimeType: "RUNTIME_TYPE"
        runtimeTypeVersion: "RUNTIME_TYPE_VERSION"
        scriptLanguage: "SCRIPT_LANGUAGE"
      }
      script: "SCRIPT_CONTENT"
      status: STATUS
      advancedOptions: { enableScreenshotOnFailureAndScript: ENABLE_SCREENSHOT }
      apdexTarget: APDEX_TARGET
    }
  ) {
    errors {
      description
      type
    }
  }
}
```

### Sample response

A successful response returns `null` for errors:

```json
{
  "data": {
    "syntheticsCreateScriptBrowserMonitor": {
      "errors": null
    }
  }
}
```

If there are any issues creating the monitor, the `errors` array will contain objects with `description` and `type` fields explaining what went wrong.

## Update a scripted browser monitor [#update-scripted-browser]

You can update an existing scripted browser monitor using the `syntheticsUpdateScriptBrowserMonitor` mutation. This allows you to modify the configuration of a scripted browser monitor that has already been created.

### Input parameters

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Data Type</th>
      <th>Is it Required?</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>`guid`</td>
      <td>String</td>
      <td>Yes</td>
      <td>The unique entity [GUID](/docs/apis/nerdgraph/examples/synthetics-api/query-synthetics-data#query-monitors) of the monitor you want to update.</td>
    </tr>
    <tr>
      <td>`monitor.browsers`</td>
      <td>Array</td>
      <td>No</td>
      <td>Browser(s) that the monitor will use to execute jobs. Supported browsers: `CHROME`, `EDGE`, `FIREFOX`.</td>
    </tr>
    <tr>
      <td>`monitor.devices`</td>
      <td>Array</td>
      <td>No</td>
      <td>Devices that the monitor will use to execute jobs. Supported devices: `DESKTOP`, `MOBILE_LANDSCAPE`, `MOBILE_PORTRAIT`, `TABLET_LANDSCAPE`, `TABLET_PORTRAIT`.</td>
    </tr>
    <tr>
      <td>`monitor.locations`</td>
      <td>Object</td>
      <td>No</td>
      <td>Locations where the monitor will run checks. `monitor.locations` allows two values: `private` for private location GUIDs and `public` for public location identifiers (e.g., `{ private: ["PRIVATE_LOCATION_GUID"] }` or `{ public: ["US_EAST_1", "US_WEST_1"] }`).</td>
    </tr>
    <tr>
      <td>`monitor.name`</td>
      <td>String</td>
      <td>No</td>
      <td>The updated display name for your scripted browser monitor.</td>
    </tr>
    <tr>
      <td>`monitor.period`</td>
      <td>Enum</td>
      <td>No</td>
      <td>How often the monitor runs. Options: `EVERY_MINUTE`, `EVERY_5_MINUTES`, `EVERY_10_MINUTES`, `EVERY_15_MINUTES`, `EVERY_30_MINUTES`, `EVERY_HOUR`, `EVERY_6_HOURS`, `EVERY_12_HOURS`, `EVERY_DAY`.</td>
    </tr>
    <tr>
      <td>`monitor.runtime.runtimeType`</td>
      <td>String</td>
      <td>No</td>
      <td>The runtime type used by your monitor. `CHROME_BROWSER` is the only accepted value.</td>
    </tr>
    <tr>
      <td>`monitor.runtime.runtimeTypeVersion`</td>
      <td>String</td>
      <td>No</td>
      <td>The runtime type version used by your monitor. `100` is the only accepted value.</td>
    </tr>
    <tr>
      <td>`monitor.runtime.scriptLanguage`</td>
      <td>String</td>
      <td>No</td>
      <td>The language used in your monitor. `JAVASCRIPT` is the only accepted value.</td>
    </tr>
    <tr>
      <td>`monitor.script`</td>
      <td>String</td>
      <td>No</td>
      <td>The JavaScript code that the monitor executes. This should be plain text, not base64 encoded.</td>
    </tr>
    <tr>
      <td>`monitor.status`</td>
      <td>Enum</td>
      <td>No</td>
      <td>The monitor status. Options: `ENABLED` (monitor is active and performing checks), `DISABLED` (monitor is inactive).</td>
    </tr>
    <tr>
      <td>`monitor.advancedOptions.enableScreenshotOnFailureAndScript`</td>
      <td>Boolean</td>
      <td>No</td>
      <td>Captures a screenshot during job execution when a failure occurs or a script is executed.</td>
    </tr>
    <tr>
      <td>`monitor.apdexTarget`</td>
      <td>Float</td>
      <td>No</td>
      <td>The monitor's Apdex target in seconds, used to populate SLA reports. Defaults to 7.0 seconds.</td>
    </tr>
  </tbody>
</table>

### Sample request

```graphql
mutation {
  syntheticsUpdateScriptBrowserMonitor(
    guid: ENTITY_GUID
    monitor: {
      browsers: [BROWSERS]
      devices: [DEVICES]
      locations: { public: ["LOCATION_1", "LOCATION_2"] }
      name: "MONITOR_NAME"
      period: PERIOD
      runtime: {
        runtimeType: "RUNTIME_TYPE"
        runtimeTypeVersion: "RUNTIME_TYPE_VERSION"
        scriptLanguage: "SCRIPT_LANGUAGE"
      }
      script: "SCRIPT_CONTENT"
      status: STATUS
      advancedOptions: { enableScreenshotOnFailureAndScript: ENABLE_SCREENSHOT }
      apdexTarget: APDEX_TARGET
    }
  ) {
    errors {
      description
      type
    }
  }
}
```

### Sample response

A successful response returns `null` for errors:

```json
{
  "data": {
    "syntheticsUpdateScriptBrowserMonitor": {
      "errors": null
    }
  }
}
```

If there are any issues updating the monitor, the `errors` array will contain objects with `description` and `type` fields explaining what went wrong.

## Upgrade a scripted browser monitor's runtime [#upgrade-monitor-runtime]

You can upgrade a scripted browser monitor to use the newer Chrome 100+ runtime. This ensures your monitor uses the latest browser features and security updates.

### Input parameters

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Data Type</th>
      <th>Is it Required?</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>`guid`</td>
      <td>String</td>
      <td>Yes</td>
      <td>The unique entity [GUID](/docs/apis/nerdgraph/examples/synthetics-api/query-synthetics-data#query-monitors) of the monitor you want to upgrade.</td>
    </tr>
    <tr>
      <td>`monitor.runtime.runtimeType`</td>
      <td>String</td>
      <td>Yes</td>
      <td>The runtime type. `CHROME_BROWSER` is the only accepted value.</td>
    </tr>
    <tr>
      <td>`monitor.runtime.runtimeTypeVersion`</td>
      <td>String</td>
      <td>Yes</td>
      <td>The runtime version. `100` is the only accepted value.</td>
    </tr>
    <tr>
      <td>`monitor.runtime.scriptLanguage`</td>
      <td>String</td>
      <td>Yes</td>
      <td>The scripting language. `JAVASCRIPT` is the only accepted value.</td>
    </tr>
  </tbody>
</table>

### Sample request

```graphql
mutation {
  syntheticsUpdateScriptBrowserMonitor(
    guid: "ENTITY_GUID",
    monitor: {
      runtime: {
        runtimeType: "CHROME_BROWSER",
        runtimeTypeVersion: "100",
        scriptLanguage: "JAVASCRIPT"
      }
    }
  ) {
    errors {
      description
      type
    }
  }
}
```

### Sample response

A successful response returns `null` for errors:

```json
{
  "data": {
    "syntheticsUpdateScriptBrowserMonitor": {
      "errors": null
    }
  }
}
```

If there are any issues upgrading the monitor runtime, the `errors` array will contain objects with `description` and `type` fields explaining what went wrong.

## Downgrade a scripted browser monitor's runtime [#downgrade-monitor-runtime]

You can downgrade a scripted browser monitor to use a legacy runtime. This may be necessary for compatibility reasons, but note that legacy runtimes will be end-of-life on October 22, 2024.

<Callout variant="important">
  Legacy runtimes are deprecated and will be end-of-life on October 22, 2024. Downgrading to legacy runtimes is not recommended except for temporary compatibility needs.
</Callout>

### Input parameters

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Data Type</th>
      <th>Is it Required?</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>`guid`</td>
      <td>String</td>
      <td>Yes</td>
      <td>The unique entity [GUID](/docs/apis/nerdgraph/examples/synthetics-api/query-synthetics-data#query-monitors) of the monitor you want to downgrade.</td>
    </tr>
    <tr>
      <td>`monitor.runtime.runtimeType`</td>
      <td>String</td>
      <td>Yes</td>
      <td>Set to empty string `""` to use legacy runtime.</td>
    </tr>
    <tr>
      <td>`monitor.runtime.runtimeTypeVersion`</td>
      <td>String</td>
      <td>Yes</td>
      <td>Set to empty string `""` to use legacy runtime.</td>
    </tr>
    <tr>
      <td>`monitor.runtime.scriptLanguage`</td>
      <td>String</td>
      <td>Yes</td>
      <td>Set to empty string `""` to use legacy runtime.</td>
    </tr>
  </tbody>
</table>

### Sample request

```graphql
mutation {
  syntheticsUpdateScriptBrowserMonitor(
    guid: "ENTITY_GUID",
    monitor: {
      runtime: {
        runtimeType: "",
        runtimeTypeVersion: "",
        scriptLanguage: ""
      }
    }
  ) {
    errors {
      description
      type
    }
  }
}
```

### Sample response

A successful response returns `null` for errors:

```json
{
  "data": {
    "syntheticsUpdateScriptBrowserMonitor": {
      "errors": null
    }
  }
}
```

If there are any issues downgrading the monitor runtime, the `errors` array will contain objects with `description` and `type` fields explaining what went wrong.

## Delete a scripted browser monitor [#delete-monitor]

When a scripted browser monitor is no longer needed, you can permanently remove it using the `syntheticsDeleteMonitor` mutation.

To delete a monitor, refer to the [Delete Synthetic monitor](/docs/apis/nerdgraph/examples/synthetics-api/ping-monitor/#delete-monitor) section.

## Query scripted browser monitors [#query-scripted-browser-monitors]

**Need to query your scripted browser monitors?** All query examples for scripted browser monitors, including how to retrieve monitor metadata, scripts, and runtime upgrade status, are available on the centralized [Query synthetic monitoring data](/docs/apis/nerdgraph/examples/synthetics-api/query-synthetics-data) page.

**Quick links to relevant sections:**
- [Query all monitors](/docs/apis/nerdgraph/examples/synthetics-api/query-synthetics-data#query-monitors) - Get all synthetic monitors including scripted browser monitors
- [Query monitor script](/docs/apis/nerdgraph/examples/synthetics-api/query-synthetics-data#query-monitor-script) - Retrieve JavaScript code from scripted monitors
- [Map monitor ID to entity GUID](/docs/apis/nerdgraph/examples/synthetics-api/query-synthetics-data#query-guid-mapping) - Convert legacy monitor IDs to entity GUIDs
- [Runtime upgrade status](/docs/apis/nerdgraph/examples/synthetics-api/query-synthetics-data#query-runtime-upgrade-all) - Check upgrade readiness for legacy monitors
