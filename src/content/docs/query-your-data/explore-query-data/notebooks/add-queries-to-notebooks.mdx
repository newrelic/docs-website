---
title: Blocks in notebook
tags:
  - Query your data
  - Explore and query data
  - Notebooks
  - NRQL
metaDescription: 'Learn about notebook blocks, active blocks, action toolbars, and how to add and manage query blocks in your New Relic notebooks.'
freshnessValidatedDate: never
---

Query blocks are the core component of notebooks, allowing you to write NRQL queries and visualize the results directly within your document. You can add multiple query blocks to a single notebook to build a comprehensive data story.

## Active block

The active block is the currently focused, interactive unit within your notebook. It serves as your immediate workspace for writing code, running queries, or adding documentation.

The active block is immediately visible, making it easy to spot within your notebook. It is identified by two key visual cues:
* **Clear Borders**: The active block is highlighted with a distinct, clear border color.
* **Visible Toolbar**: It is the only cell that displays the actions.

Queries coming from Data Explorer are added to the active block if the active block is of type query. If the active block is currently markdown, a new query block is added.

To change an active block you need to select or add another block in the notebook.

When a Markdown Block is active, it automatically enters an editing mode featuring a convenient two-column layout to optimize your documentation workflow:
* **Editing Column (Left)**: This is where you directly type and format your Markdown code.
* **Live Preview Column (Right)**: This instantly displays a real-time visual preview of your formatted documentation, ensuring accuracy as you type.

## Action toolbar

To help you optimize your workspace and maintain a clean view, the notebooks interface features an action toolbar. It consolidates core query actions into a compact, icon-based menu and groups secondary controls into a dedicated Actions Menu.

### Core actions (Top of the Query block)

These essential, frequently used actions are directly accessible at the top of the query block via intuitive icons:
* **Run query**: This is now represented by a play icon and executes the current query.
* **Recent queries**: Allows you to quickly access and reuse recently executed queries.
* **Recommended queries**: Provides suggestions for queries.
* **Copy query link**: Generates a shareable link to the current query.

### Actions Menu (Secondary controls)

The Actions Menu houses additional, less frequently used, or organizational controls to keep your main toolbar uncluttered.
* **Add another query**: Inserts a new, empty query block into your notebook.
* **Remove query**: Deletes the query from multi-query TIMESERIES.
* **PromQL translator**: A utility for translating queries into PromQL (Prometheus Query Language).
* **Clear**: Removes the query from the query input.
* **Create alert**: Initiates the process for setting up a new alert based on the query results.
* **Move up/down/to the top/to the bottom**: Reorganizes the current query block's position within the notebook.
* **Delete block**: Deletes the active block.

## Add a query block

To add a query block to your notebook:

1. Open your notebook in the query console.
2. Click the **+ Query** button or press **Ctrl+Enter** (or **Cmd+Enter** on Mac) to add a new query block.
3. Write your [NRQL query](https://docs.newrelic.com/docs/nrql/nrql-syntax-clauses-functions/) in the query editor.
4. Press **Run** or **Enter** to execute the query and display results.

<Callout variant="tip">
  All NRQL queries supported in the standard query builder work in notebook query blocks. You can query any data type including metrics, events, logs, and traces. All [chart types](https://docs.newrelic.com/docs/query-your-data/explore-query-data/use-charts/chart-types/) and customizations available in the standard query builder are supported in notebooks.
</Callout>

## Use variables in queries

Variables make your notebooks dynamic and reusable. You can define variables once and reference them across multiple query blocks.

### Define variables

```sql
-- Define a variable at the top of your notebook
{{timeRange = "1 hour ago"}}
{{appName = "MyApplication"}}
```

### Use variables in queries

```sql
SELECT count(*) FROM Transaction
WHERE appName = '{{appName}}'
SINCE {{timeRange}}
```

<Callout variant="important">
  Variables are scoped to the entire notebook and can be referenced in any query block within the same notebook.
</Callout>

## Query block management

<CollapserGroup>
  <Collapser
    id="duplicate-query-block"
    title="Duplicate a query block"
  >

1. Hover over the query block.
2. Click the **three-dot menu** in the top-right corner.
3. Select **Duplicate**.

  </Collapser>

  <Collapser
    id="move-query-blocks"
    title="Move query blocks"
  >

Reorder your query blocks to improve your narrative flow:

1. Hover over the query block.
2. Click the **three-dot menu**.
3. Select from:
   * **Move up**
   * **Move down**
   * **Move to top**
   * **Move to bottom**

  </Collapser>

  <Collapser
    id="delete-query-block"
    title="Delete a query block"
  >

1. Hover over the query block.
2. Click the **three-dot menu**.
3. Select **Delete**.
4. Confirm the deletion.

  </Collapser>
</CollapserGroup>

## What's next?

* Return to [Get started with notebooks](/docs/query-your-data/explore-query-data/notebooks/introduction-notebooks) for an overview
* Explore [Dashboards](/docs/query-your-data/explore-query-data/dashboards/introduction-dashboards) for building persistent data visualizations
* Learn more about [Chart types](/docs/query-your-data/explore-query-data/use-charts/chart-types) for visualization options