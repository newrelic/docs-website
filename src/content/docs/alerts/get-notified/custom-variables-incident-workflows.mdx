---
title: Workflow variables
tags:
  - Alerts
  - workflows
  - Enrichments
  - Issues
metaDescription: For New Relic alerts, explanations of the variables used for workflows. 
freshnessValidatedDate: never
redirects:
  - /docs/alerts-applied-intelligence/applied-intelligence/incident-workflows/custom-variables-incident-workflows
---

An explanation of the variables used for New Relic alerts [workflows](/docs/alerts-applied-intelligence/applied-intelligence/incident-workflows/incident-workflows).

<img
  title="Alerts workflow variables"
  alt="Alerts workflow variables"
  src="/images/alerts_screenshot-crop_workflow-variables.webp"
/>

<figcaption>
  When creating a workflow, you can use variables to a) govern what types of issues will generate a notification, and b) what the contents of a notification payload will contain. This screenshot shows the notification payload section.
</figcaption>

## Variables [#variables]

Here are the workflow variables and their descriptions:

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        Key (first word used for grouping)
      </th>

      <th>
        Display name (first word used for grouping)
      </th>

      <th>
        Description
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `accumulations.conditionDescription`
      </td>

      <td>
        conditionDescription
      </td>

      <td>
        The condition's custom incident description.
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.conditionFamilyId`
      </td>

      <td>
        conditionFamilyId
      </td>

      <td>
        The incident detection condition's ID that generated the incident.
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.conditionName`
      </td>

      <td>
        Alert condition names
      </td>

      <td>
        New Relic breached condition.
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.conditionProduct`
      </td>

      <td>
        Alert condition products
      </td>

      <td>
        New Relic condition type.
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.deepLinkUrl`
      </td>

      <td>
        Incident callback URL
      </td>

      <td>
        A direct link to the relevant incident callback.
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.evaluation.metricValueFunction`
      </td>

      <td>
        Custom metric value function
      </td>

      <td>
        Custom metric value function.
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.evaluation.name`
      </td>

      <td>
        <InlinePopover type="apm"/> condition metric name
      </td>

      <td>
        <InlinePopover type="apm"/> condition metric name
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.nrqlQuery`
      </td>

      <td>
        NRQL query
      </td>

      <td>
        NRQL query of the condition.
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.origins`
      </td>

      <td>
        Issue origins
      </td>

      <td>
        New Relic or third party source(s) that created the incident(s).
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.policyName`
      </td>

      <td>
        Alert policy names
      </td>

      <td>
        Incident detection policy name that generated the incident.
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.runbookUrl`
      </td>

      <td>
        Runbook URL
      </td>

      <td>
        A list of runbook URLs.
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.sources`
      </td>

      <td>
        Issue sources
      </td>

      <td>
        The system(s) reporting the incident(s).
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.tag.account`
      </td>

      <td>
        New Relic accounts
      </td>

      <td>
        New Relic accounts.
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.tag.affectedService`
      </td>

      <td>
        Affected service
      </td>

      <td>
        A list of affected services.
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.tag.assignmentGroup`
      </td>

      <td>
        Assignment group
      </td>

      <td>
        A list of assignment groups.
      </td>
    </tr>

    <tr>
      <td>
        `accumulations.tag.causeService`
      </td>

      <td>
        Cause service
      </td>

      <td>
        A list of the cause services.
      </td>
    </tr>

    <tr>
      <td>
        `acknowledgedBy`
      </td>

      <td>
        Acknowledged by
      </td>

      <td>
        The user that acknowledged the issue.
      </td>
    </tr>

    <tr>
      <td>
        `activatedAt`
      </td>

      <td>
        Issue activated at
      </td>

      <td>
        Timestamp of issue activation.
      </td>
    </tr>

    <tr>
      <td>
        `annotations.description`
      </td>

      <td>
        Issue description
      </td>

      <td>
        List of all incident descriptions.
      </td>
    </tr>

    <tr>
      <td>
        `annotations.title`
      </td>

      <td>
        Issue title
      </td>

      <td>
        List of all incident titles.
      </td>
    </tr>

    <tr>
      <td>
        `annotations.wildcard`
      </td>

      <td>
        Alert facets
      </td>

      <td>
        Alert facets.
      </td>
    </tr>

    <tr>
      <td>
        `closedBy`
      </td>

      <td>
        Closed by
      </td>

      <td>
        The ID of the user that closed the issue.
      </td>
    </tr>

    <tr>
      <td>
        `closedAt`
      </td>

      <td>
        Issue ClosedAt
      </td>

      <td>
        Timestamp of issue closure. Null if the issue is not closed.
      </td>
    </tr>

    <tr>
      <td>
        `closedIncidentsCount`
      </td>

      <td>
        Closed incidents count
      </td>

      <td>
        The total number of closed incidents on this issue.
      </td>
    </tr>

    <tr>
      <td>
        `createdAt`
      </td>

      <td>
        Issue CreatedAt
      </td>

      <td>
        Timestamp of issue creation.
      </td>
    </tr>

    <tr>
      <td>
        `dataMLModules.components`
      </td>

      <td>
        Machine learning components
      </td>

      <td>
        A list of New Relic alerts machine learning components.
      </td>
    </tr>

    <tr>
      <td>
        `dataMLModules.goldenSignals`
      </td>

      <td>
        Machine learning golden signals
      </td>

      <td>
        A list of New Relic alerts machine learning golden signals.
      </td>
    </tr>

    <tr>
      <td>
        `dataMLModules.suggestedResponders`
      </td>

      <td>
        Machine learning suggested responder
      </td>

      <td>
        (Deprecated) A list of New Relic alerts machine learning suggested responders.
      </td>
    </tr>

    <tr>
      <td>
        `entitiesData.entities`
      </td>

      <td>
        Impacted entities data
      </td>

      <td>
        A list of objects describing the impacted entity name, ID, type, and kind.
      </td>
    </tr>

    <tr>
      <td>
        `entitiesData.ids`
      </td>

      <td>
        Impacted entities IDs
      </td>

      <td>
        A set of all impacted entity IDs.
      </td>
    </tr>

    <tr>
      <td>
        `entitiesData.kinds`
      </td>

      <td>
        Impacted entities kinds
      </td>

      <td>
        A set of all impacted entity kinds.
      </td>
    </tr>

    <tr>
      <td>
        `entitiesData.names`
      </td>

      <td>
        Impacted entities names
      </td>

      <td>
        A set of all impacted entity names.
      </td>
    </tr>

    <tr>
      <td>
        `entitiesData.types`
      </td>

      <td>
        Impacted entities types
      </td>

      <td>
        A set of all impacted entity types.
      </td>
    </tr>

    <tr>
      <td>
        `impactedEntitiesCount`
      </td>

      <td>
        Impacted entities count
      </td>

      <td>
        The number of impacted entities for this issue.
      </td>
    </tr>

    <tr>
      <td>
        `incidentIds`
      </td>

      <td>
        Incident IDs
      </td>

      <td>
        A list of all the issue's aggregated incidents.
      </td>
    </tr>

    <tr>
      <td>
        `isCorrelated`
      </td>

      <td>
        Issue is correlated
      </td>

      <td>
        If the issue is correlated (`true`, `false`).
      </td>
    </tr>

    <tr>
      <td>
        `isAcknowledged`
      </td>

      <td>
        Issue is acknowledged
      </td>

      <td>
        If the issue is acknowledged (`true`, `false`).
      </td>
    </tr>

    <tr>
      <td>
        `issueAckUrl`
      </td>

      <td>
        Issue acknowledge URL
      </td>

      <td>
        A direct link to acknowledge the issue.
      </td>
    </tr>

    <tr>
      <td>
        `issueCloseUrl`
      </td>

      <td>
        Issue close URL
      </td>

      <td>
        A direct link to close the issue.
      </td>
    </tr>

    <tr>
      <td>
        `issuePageUrl`
      </td>

      <td>
        Issue page URL
      </td>

      <td>
        A direct link to the relevant issue page.
      </td>
    </tr>

    <tr>
      <td>
        `issueActivatedAtUtc`
      </td>

      <td>
        Issue ActivatedAt UTC string
      </td>

      <td>
        String format of issue activation in UTC.
      </td>
    </tr>

    <tr>
      <td>
        `issueClosedAtUtc`
      </td>

      <td>
        Issue ClosedAt UTC string
      </td>

      <td>
        String format of issue closure in UTC.
      </td>
    </tr>

    <tr>
      <td>
        `issueCreatedAtUtc`
      </td>

      <td>
        Issue CreatedAt UTC string
      </td>

      <td>
        String format of issue creation in UTC.
      </td>
    </tr>

    <tr>
      <td>
        `issueAcknowledgedAt`
      </td>

      <td>
        Issue AcknowledgedAt string
      </td>

      <td>
        String format of issue acknowledged in UTC.
      </td>
    </tr>

    <tr>
      <td>
        `issueClosedAt`
      </td>

      <td>
        Issue ClosedAt string
      </td>

      <td>
        String format of issue closure in UTC.
      </td>
    </tr>

    <tr>
      <td>
        `issueDurationMs`
      </td>

      <td>
        Issue duration in milliseconds
      </td>

      <td>
        The number of milliseconds since the issue opened.
      </td>
    </tr>

    <tr>
      <td>
        `issueDurationText`
      </td>

      <td>
        Textual issue duration
      </td>

      <td>
        A human friendly representation of the issue duration.
      </td>
    </tr>

    <tr>
      <td>
        `issueId`
      </td>

      <td>
        Issue ID
      </td>

      <td>
        The unique ID of the issue.
      </td>
    </tr>

    <tr>
      <td>
        `issueTitle`
      </td>

      <td>
        Issue title
      </td>

      <td>
        Usually the title of the first incident.
      </td>
    </tr>

    <tr>
      <td>
        `issueUpdatedAt`
      </td>

      <td>
        Issue UpdatedAt UTC string
      </td>

      <td>
        Timestamp of issue update in UTC.
      </td>
    </tr>

    <tr>
      <td>
        `labels.accountIds`
      </td>

      <td>
        Issue environment associated account ID
      </td>

      <td>
        New Relic alerts environments associated account ID.
      </td>
    </tr>

    <tr>
      <td>
        `labels.aggregationKeys`
      </td>

      <td>
        Labels alerts aggregation key
      </td>

      <td>
        New Relic incident detection original incident ID.
      </td>
    </tr>

    <tr>
      <td>
        `labels.originalAccountIds`
      </td>

      <td>
        Labels account IDs
      </td>

      <td>
        Incident detection policy's account ID.
      </td>
    </tr>

    <tr>
      <td>
        `labels.policyIds`
      </td>

      <td>
        Labels alert policy IDs
      </td>

      <td>
        Incident detection policy IDs that generated the incident.
      </td>
    </tr>

    <tr>
      <td>
        `abels.targetId`
      </td>

      <td>
        Target ID
      </td>

      <td>
        Target ID.
      </td>
    </tr>

    <tr>
      <td>
        `mutingState`
      </td>

      <td>
        Issue muting state
      </td>

      <td>
        The calculated muting state of the issue (`MUTED`, `NOT_MUTED`).
      </td>
    </tr>

    <tr>
      <td>
        `nrAccountId`
      </td>

      <td>
        Account ID
      </td>

      <td>
        Account ID.
      </td>
    </tr>

    <tr>
      <td>
        `openIncidentsCount`
      </td>

      <td>
        Open incidents count
      </td>

      <td>
        The total number of open incidents on this issue.
      </td>
    </tr>

    <tr>
      <td>
        `owner`
      </td>

      <td>
        Owner
      </td>

      <td>
        The person that acknowledged the issue.
      </td>
    </tr>

    <tr>
      <td>
        `policyUrl`
      </td>

      <td>
        Alert policy URL
      </td>

      <td>
        Alert policy URL.
      </td>
    </tr>

    <tr>
      <td>
        `priority`
      </td>

      <td>
        Issue priority
      </td>

      <td>
        Issue's priority level (`CRITICAL`, `HIGH`, `MEDIUM`, `LOW`).
      </td>
    </tr>

    <tr>
      <td>
        `priorityText`
      </td>

      <td>
        Issue priority text
      </td>

      <td>
        Issue priority in lower case (`Critical`, `High`, `Medium`, `Low`).
      </td>
    </tr>

    <tr>
      <td>
        `realIssueCount`
      </td>

      <td>
        Issue count
      </td>

      <td>
        Issue count.
      </td>
    </tr>

    <tr>
      <td>
        `state`
      </td>

      <td>
        Issue state
      </td>

      <td>
        Issue's life cycle state (`CREATED`, `ACTIVATED`, `CLOSED`).
      </td>
    </tr>

    <tr>
      <td>
        `stateText`
      </td>

      <td>
        Issue state text
      </td>

      <td>
        Issue's life cycle state in lower case (`active` (opened), `closed`).
      </td>
    </tr>

    <tr>
      <td>
        `status`
      </td>

      <td>
        Issue correlation status
      </td>

      <td>
        The correlation status of the issue.
      </td>
    </tr>

    <tr>
      <td>
        `totalIncidents`
      </td>

      <td>
        Incident count
      </td>

      <td>
        The number of incidents that are aggregated or correlated in the issue.
      </td>
    </tr>

    <tr>
      <td>
        `triggeredAt`
      </td>

      <td>
        Issue triggered at
      </td>

      <td>
        Timestamp of issue notification triggered.
      </td>
    </tr>

    <tr>
      <td>
        `triggerEvent`
      </td>

      <td>
        Issue notification trigger event
      </td>

      <td>
        The notification trigger event (`STATE_CHANGE`, `INCIDENT_ADDED`, `INCIDENT_CLOSED`, `CLOSE_INACTIVE`, `CLOSE_TTL`, `USER_ACTION`, `PRIORITY_CHANGED`, `MERGE_REQUEST`).
      </td>
    </tr>

    <tr>
      <td>
        `updatedAt`
      </td>

      <td>
        Issue updated at
      </td>

      <td>
        Timestamp of issue last updated.
      </td>
    </tr>

    <tr>
      <td>
        `violationChartUrl`
      </td>

      <td>
        Incident chart URL
      </td>

      <td>
        Link to the incident chart image.
      </td>
    </tr>

    <tr>
      <td>
        `workflowName`
      </td>

      <td>
        Workflow name
      </td>

      <td>
        The name of the workflow that was triggered.
      </td>
    </tr>
  </tbody>
</table>

## Workflow data enrichment examples [#enrichment-examples]

To get information about the entity that breached a condition, you can use custom variables as part of the `WHERE` statement of the query. For example, to get the state of the EC2 instance use:

```sql
SELECT latest(ec2State) FROM ComputeSample WHERE provider = 'Ec2Instance' AND entityName IN {{entitiesData.names}}
```

This query returns a single value (for example, `stopped`), as the query only uses a single field. The variable `entitiesData.names` is a list of identifiers for the entities. You can use any other entity properties in the same way.

You can use custom variables to enrich your workflow data queries in different ways:

<CollapserGroup>
  <Collapser
    id="application-drop"
    title="Query for when application traffic drops"
  >
    There are times when you want to know when traffic to your application drops. You can use the `{{entitiesData.names}}` variable in place of your application's name.

    ```sql
    SELECT count(*) FROM Transaction WHERE appName IN {{entitiesData.names}} SINCE 10 minutes ago
    ```
  </Collapser>

  <Collapser
    id="non-web-transactions-time"
    title="Non-web transactions time"
  >
    Average time the impacted entities spend processing requests/transactions, broken down by process type

    ```sql
    SELECT average(apm.service.overview.other) * 1000 FROM Metric WHERE appName IN {{entitiesData.names}} FACET `segmentName` TIMESERIES
    ```
  </Collapser>

  <Collapser
    id="throughput"
    title="Throughput"
  >
    Number of requests per minute the impacted enitities process

    ```sql
    SELECT rate(count(apm.service.transaction.duration), 1 minute) AS 'Non-web throughput' FROM Metric WHERE (appName IN {{entitiesData.names}}) AND (transactionType = 'Other') TIMESERIES
    ```
  </Collapser>

  <Collapser
    id="error-rate"
    title="Error rate"
  >
    Ratio of errors to the total number of requests processes by the impacted entities

    ```sql
    SELECT count(apm.service.error.count) / count(apm.service.transaction.duration) AS 'Non-web errors' FROM Metric WHERE (appName IN {{entitiesData.names}}) AND (transactionType = 'Other') TIMESERIES
    ```
  </Collapser>

  <Collapser
    id="transaction-failures"
    title="Query for transaction failures"
  >
    There are times when you want to know when your application transactions have failed. This query shows the latest HTTP status code responses filtered by the `{{entitiesData.names}}` variable that breached your alert policy threshold.

    ```sql
    SELECT latest(http.statusCode), average(duration) FROM Transaction WHERE appName IN {{entitiesData.names}}
    ```
  </Collapser>

  <Collapser
    id="kubernetes-consumption"
    title="Query for Kubernetes consumption overview"
  >
    Use a query like this to get the number of entities and their ingest times within a Kubernetes pod. By identifying what entities have large ingest times, you can begin to address that issue and find a potential remedy.

    ```sql
    SELECT uniqueCount(displayName), sum(nr.ingestTimeMs) FROM K8sServiceSample WHERE entityName IN {{entitiesData.names}} SINCE 1 hour ago
    ```
  </Collapser>

  <Collapser
    id="tags-from-facet"
    title="Query using triggering facet value"
  >
    If the alert conditions query is faceted, you can use the `FACET` value triggering the incident in a query. For example, if the alert condition is this:

    ```sql
    SELECT average(duration) FROM BrowserInteraction FACET appName
    ```

    You can then query using the specific `appName` like this:

    ```sql
    SELECT uniques(host) FROM Transaction WHERE appName IN {{accumulations.tag.appName}}
    ```
  </Collapser>
</CollapserGroup>
