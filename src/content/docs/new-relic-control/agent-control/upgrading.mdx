---
title: "Upgrading Agent Control and Managed Agents"
metaDescription: "A simple, centralized process for updating agent versions across your entire fleet"
freshnessValidatedDate: never
---

<Callout variant="important">
  Agent Control and New Relic Control are now **generally available** for Kubernetes! Support for Linux hosts is also in **public preview** program, pursuant to our [pre-release policies](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy).
</Callout>

## Overview

Agent Control provides a seamless and centralized way to manage the entire lifecycle of your agents, including updates. Instead of manually updating agents on each host or cluster, you define your desired state in New Relic, and Agent Control automatically handles the rest.

The update process for both Agent Control and the agents it manages is designed to be non-disruptive and automated.

### Key benefits of the update process with Agent Control
- Centralized Control: Manage all agent versions for your entire fleet from a single location.
- Non-disruptive: Updates are performed using rolling update strategies to prevent downtime.
- Automated: Once you define a new version, the entire deployment and reconciliation process is handled automatically.
- Resilient: The system is designed to be resilient to failed updates and can fall back to the last known good state if an issue occurs.

## Updating Your Managed Agents
You can update any agent managed by Agent Control by simply changing its version in the remote configuration within New Relic Control. This declarative approach ensures consistency and reliability across your entire fleet.

- **Edit the Configuration:** Navigate to the configuration for your fleet in New Relic Control.
- **Update the Version:** Locate the agent you want to update (e.g., `infrastructure`)` and change the `chart_version` value to the new version number.
- **Deploy the Changes:** Save and deploy the updated configuration.

Agent Control will automatically detect the change and perform a non-disruptive, rolling update, ensuring that your new agents are running and healthy before replacing the old ones.

### Example: Upgrading the New Relic Infrastructure Agent

This example shows how to upgrade the Infrastructure agent to a new version.

```shell
# Remote configuration for a single agent
chart_version: "5.0.109"  # Change this value
chart_values:
  newrelic-infrastructure:
    enableProcessMetrics: true
```

## Upgrading Agent Control

### Kubernetes

The following instructions apply to Agent Control running on a Kubernetes cluster.

Agent Control is capable of updating itself remotely. This ensures that the supervisor running on your cluster is always up to date with the latest features, performance improvements, and security patches.

The process for updating the Agent Control supervisor is the same as for any other managed agent: you specify the new version in the configuration and deploy the changes from New Relic Control.

1. Edit the Agent Control Configuration: In New Relic Control, access the core configuration for Agent Control itself.
2. Update the `chart_version`: Change the `chart_version` to the new desired version.
3. Deploy the Changes: Save and deploy the configuration.

This process triggers a rolling update of the Agent Control pods on your cluster. Kubernetes' built-in health checks ensure the new version is healthy before the old one is terminated for a non-disruptive upgrade.

### Linux hosts

<Tabs>
  <TabsBar>
    <TabsBarItem id="upgrade-debian">Debian, Ubuntu</TabsBarItem>
    <TabsBarItem id="upgrade-suse">SLES</TabsBarItem>
    <TabsBarItem id="upgrade-redhat">Amazon Linux, CentOS, Debian</TabsBarItem>
  </TabsBar>

  <TabsPages>
    <TabsPageItem id="upgrade-debian">
      ```bash
      sudo apt-get update && sudo apt-get install --only-upgrade newrelic-agent-control -y
      ```
    </TabsPageItem>

    <TabsPageItem id="upgrade-suse">
      ```bash
      sudo zypper -n update newrelic-agent-control
      ```
    </TabsPageItem>

    <TabsPageItem id="upgrade-redhat">
      ```bash
      sudo yum update newrelic-agent-control -y
      ```
    </TabsPageItem>
  </TabsPages>
</Tabs>



### Start, stop, and restart Agent Control [#start-stop-restart]

Our agent starts automatically after you run the installation script. 

#### Linux
For Linux, ensure you use the correct command for your init system. Select `start`, `stop`, `restart`, or `status` as appropriate. 

Here's an example for Systemd:

```shell
sudo systemctl <start|stop|restart|status> newrelic-agent-control
```