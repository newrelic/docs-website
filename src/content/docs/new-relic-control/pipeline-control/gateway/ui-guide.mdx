---
title: Gateway UI guide
metaDescription: 'Use the form-based Pipeline Control Gateway UI to create transformation, filtering, and sampling rules without writing YAML configuration.'
freshnessValidatedDate: never
---

The Pipeline Control gateway UI provides a form-based interface for creating and managing gateway rules without writing YAML directly. The UI organizes processing logic into three rule categories: sample rate, drop rules, and transformations. Each category is configurable through guided modal dialogs.

## UI organization

The gateway UI is organized into three main sections:

### Sample rate

Configure probabilistic sampling with conditional rules to control what percentage of telemetry data reaches New Relic. Supports:
- Default sampling percentage (0-100%)
- Conditional sampling scenarios based on attribute matching

**Common use cases:**
- "Sample 90% of B service logs, 83% of A service logs"
- "Keep 100% of errors, 100% of traces >1000ms, sample 10% of remaining"

### Drop rules

Create OTTL-based filter rules to conditionally drop entire telemetry records or specific attributes. Supports:
- Pattern matching with `matches` operator for regex
- Attribute-based filtering (environment, metric name, log level)
- Combined conditions with `and`/`or` logic
- Comparison operators (`==`, `!=`, `>`, `<`, `>=`, `<=`)

**Common use cases:**
- "Drop test environment data"
- "Drop debug-level logs in production"
- "Remove health check spans"
- "Drop metrics with test prefix"

### Transformations

Define OTTL-based transformation rules to modify, enrich, or parse telemetry data. Supports:
- Attribute addition and modification using OTTL functions
- String parsing with regex patterns
- Conditional transformations with matching rules
- Multiple OTTL statements per transformation

**Common use cases:**
- "Add environment and region tags to all metrics"
- "Parse NGINX log format into structured attributes"
- "Normalize service names across environments"
- "Extract HTTP status codes from log messages"

## Create rules in the UI

### Creating a sample rate rule

1. In the gateway UI, in the sample rate section, click the gear/settings icon to create a new sampling configuration.

2. **Configure default sampling**:
    - Set the default sampling percentage (0-100%).
    - Use the slider or enter a numeric value.
This applies to all data that doesn't match conditional rules

3. **Add conditional scenarios** (optional):
    - Click PLUS icon to create condition-specific sampling rates.
    - For each scenario, configure:
       - A descriptive name (for example, "B service sample")
       - A description (for example, "B service description")
       - An attribute-matching expression (for example, `attributes["appName"]=="TelemetryApp-ServiceB"`)
       - A sampling percentage using the slider or enter a numeric value (0-100%)

4. Click **"Save sample criteria"** to apply sampling rules.

### Create a drop rule

{/* 1. **Navigate to Gateway View**: Access the Gateway UI

2. **Open Drop Rules Section**: Click on "Drop rules" to view existing filtering rules

3. **Click "Create drop rule"**: Opens the drop rule creation modal

4. **Configure Basic Information**:
 - **Rule name**: Enter a descriptive name (for example, "drop-test-metrics")
 - **Description**: Explain what data gets dropped

5. **Define OTTL Filter Condition**:
 - Write an OTTL boolean expression to match data to drop
 - Example: `attributes["environment"] == "test"`
 - Use `matches` for pattern matching: `body matches ".*health check.*"`
 - Use `and`/`or` for combining conditions: `severity.text == "DEBUG" and attributes["environment"] == "production"`
 - Use comparison operators: `duration < 100000000`

6. **Select Category**:
 - **DROP_DATA**: Removes entire telemetry records that match the condition
 - **DROP_ATTRIBUTE**: Removes specific attributes from matching records while preserving the record

7. **Preview and Create**: Review generated configuration and click "Create rule"

**Example Drop Rule:**
Rule name: drop-debug-logs
Description: Remove debug-level logs from production environment

OTTL Condition: severity.text == "DEBUG" and attributes["environment"] == "production"
Category: DROP_DATA */}

### Create a transformation rule

1. In the Gateway UI, click the PLUS icon in the transformations section to create a new transformation rule.

2. **Configure basic information**:
 - **Rule name**: Enter a descriptive name (for example, "parse-nginx-logs")
 - **Description**: Explain what the transformation does

5. **Define conditions to match your data**:
 - Add conditions to target specific telemetry records.
 - Click **"+ Add condition"** to add multiple conditions:
    - Multiple conditions are evaluated with OR logic (if any condition matches, the transformation applies).
    - Example conditions:
    - `body == "request failed"`
    - `severity.text == "ERROR"`
    - `severity.text == "FATAL_ERROR"`
    - Leave empty to apply transformation to all records.
    - Each condition is shown in a separate input field with the `OR` operator between them.
6. **Define OTTL statements**:
 - Add one or more OTTL transformation statements.
 - Click **"+ Add statement"** to add multiple transformations.
 - Each statement executes in sequence. Change the order by dragging the handle on the left of each statement.
 - Example statements using OTTL functions:
 - `set(severity_text, "FAIL")`
 - `set(attributes["processors"], true)`
 - `set(attributes["environment"], "staging")`

8. Click **Create rule** to add the transformation to your gateway.

### Version management and deployment

**Configuration versions**: The gateway UI maintains a version history of your configuration changes. Each time you modify rules, a new version is created:
- Version numbers increment automatically (for example, Version 273, 272, 271)
- Each version includes a timestamp of when it was created
- You can view and revert to previous versions if needed

**Deployment status**: Configuration changes require explicit deployment to take effect:
- **Needs deployment** badge appears when you have unsaved changes.
- Changes remain in draft state until deployed. You can save the draft without deploying.
- Click **Deploy** to apply the configuration to your gateway cluster

**Deployment workflow**:
1. Make changes to rules (add, modify, or delete)
2. UI shows "Needs deployment" indicator
3. Review your changes in the YAML view
4. Click "Deploy" button to apply changes
5. Wait for deployment confirmation
6. Verify rules are active in your gateway

**Version rollback**: If a deployment causes issues:
1. Navigate to version history.
2. Select a previous working version.
3. Click **Deploy**.

This version management ensures you can safely experiment with configurations and quickly roll back if needed.

## OpenTelemetry resources

- [OTTL functions reference](https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/pkg/ottl/ottlfuncs/README.md) - Complete list of OTTL functions for transformations and boolean expressions for filtering
- [Transform processor](https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/processor/transformprocessor) - Official transform processor documentation
- [Filter processor](https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/processor/filterprocessor) - Official filter processor documentation with OTTL boolean expression syntax
- [Probabilistic sampler processor](https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/processor/probabilisticsamplerprocessor) - Official sampling processor documentation