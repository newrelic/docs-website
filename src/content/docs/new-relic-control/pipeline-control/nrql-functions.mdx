---
title: Support for NRQL functions in pipeline rules
metaDescription: 'Learn about the support for NRQL functions in pipeline rules and how to use them effectively.'
freshnessValidatedDate: never
---
This document outlines the NRQL functions supported by the Pipeline Control gateway. This enhancement provides ways to query and manage your data within New Relic.

<table>
        <thead>
            <tr>
                <th>Function</th>
                <th>Description</th>
                <th>Example NRQL query</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>`aparse()`</td>
                <td>Extracts a value from a string based on a specified pattern.</td>
                <td>`DELETE FROM Log WHERE aparse(message, 'Error: %') = 'timeout'`</td>
            </tr>
            <tr>
                <td>`dimension()`</td>
                <td>Filters data based on facets or dimensions associated with your metrics/events.</td>
                <td>`DELETE FROM Log WHERE dimensions() LIKE '%collectd%'`</td>
            </tr>
            <tr>
                <td>`floor()`</td>
                <td>Returns the largest integer less than or equal to the specified number.</td>
                <td>`DELETE FROM Metric WHERE floor(duration) > 5`</td>
            </tr>
            <tr>
                <td>`getField()`</td>
                <td>Extracts a specific field from a complex data structure (for example, JSON object).</td>
                <td>`DELETE FROM Metric WHERE getField(cpu_usage, percent) > 90`</td>
            </tr>
            <tr>
                <td>`hourOf()`</td>
                <td>Extracts the hour component from a timestamp.</td>
                <td>`DELETE FROM Log WHERE hourOf(timestamp) IN (2, 3, 4)`</td>
            </tr>
            <tr>
                <td>`mod()`</td>
                <td>Returns the remainder of a division operation.</td>
                <td>`DELETE FROM Log WHERE mod(timestamp/1000,20) != 1`</td>
            </tr>
            <tr>
                <td>`numeric()`</td>
                <td>Converts a string value to a numerical type.</td>
                <td>`DELETE FROM Log WHERE numeric(responseTime) > 1000`</td>
            </tr>
            <tr>
                <td>`round()`</td>
                <td>Rounds a number to the nearest integer or to a specified number of decimals.</td>
                <td>`DELETE FROM Metric WHERE round(latency, 2) > 0.5`</td>
            </tr>
            <tr>
                <td>`string()`</td>
                <td>Converts a numerical or other value to a string type.</td>
                <td>`DELETE FROM Log WHERE string(statusCode) = '404'`</td>
            </tr>
            <tr>
                <td>`substring()`</td>
                <td>Extracts a specified portion of a string.</td>
                <td>`DELETE FROM Log WHERE substring(transactionId, 1, 3) = 'tmp'`</td>
            </tr>
            <tr>
                <td>`weekdayOf()`</td>
                <td>Extracts the day of the week from a timestamp (for example, 'Monday', 'Sunday').</td>
                <td>`DELETE FROM Metric WHERE weekdayOf(timestamp) IN ('Saturday', 'Sunday')`</td>
            </tr>
        </tbody>
    </table>


## Examples of NRQL functions in pipeline rules
These examples demonstrate how you can combine multiple functions and use them in more intricate scenarios to achieve precise data filtering and deletion.


- `DELETE FROM ContainerSample WHERE state = 'exited' and status LIKE '%Exited%' and status NOT LIKE '%second%' and status not like '%About a minute ago%' and not (status like '%minute%' and numeric(aparse(status,'%Exited (%) * minutes ago%')) < 10)`
- `DELETE FROM Log, LogExtendedRecord WHERE dimensions() LIKE '%collectd%' AND newrelic.logs.customEventType IS NULL`
- `DELETE FROM Log WHERE message LIKE '%lib/ladon/middleware/caching.rb:49 run> terminated with exception%' and floor(timestamp/101) = (timestamp/101)`

These new functions significantly expand the capabilities of your NRQL queries when working with Pipeline Control gateway, allowing for more precise data analysis and management.