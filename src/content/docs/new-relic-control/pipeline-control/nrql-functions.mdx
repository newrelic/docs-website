---
title: Support for NRQL functions in gateway rules
metaDescription: 'Learn about the support for NRQL functions in Pipeline Control gateway rules and how to use them effectively.'
freshnessValidatedDate: never
---
This document outlines the NRQL functions supported in Pipeline Control gateway rules. Use these functions to create more powerful and precise rules for filtering and managing your data.

<table>
        <thead>
            <tr>
                <th>Function</th>
                <th>Description</th>
                <th>Example NRQL query</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>[`aparse()`](/docs/nrql/nrql-syntax-clauses-functions/#func-aparse)</td>
                <td>Extracts a value from a string based on a specified pattern.</td>
                <td>`DELETE FROM Log WHERE aparse(message, 'Error: %') = 'timeout'`</td>
            </tr>
            <tr>
                <td>[`dimensions()`](/docs/nrql/nrql-syntax-clauses-functions/#func-dimensions)</td>
                <td>Filters data based on facets or dimensions associated with your metrics/events.</td>
                <td>`DELETE FROM Log WHERE dimensions() LIKE '%collectd%'`</td>
            </tr>
            <tr>
                <td>[`floor()`](/docs/nrql/nrql-syntax-clauses-functions/#floor)</td>
                <td>Returns the largest integer less than or equal to the specified number.</td>
                <td>`DELETE FROM Metric WHERE floor(duration) > 5`</td>
            </tr>
            <tr>
                <td>[`getField()`](/docs/nrql/nrql-syntax-clauses-functions/#func-getfield)</td>
                <td>Extracts a specific field from a complex data structure (for example, JSON object).</td>
                <td>`DELETE FROM Metric WHERE getField(cpu_usage, percent) > 90`</td>
            </tr>
            <tr>
                <td>[`hourOf()`](/docs/nrql/nrql-syntax-clauses-functions/#func-minOf)</td>
                <td>Extracts the hour component from a timestamp.</td>
                <td>`DELETE FROM Log WHERE hourOf(timestamp) IN (2, 3, 4)`</td>
            </tr>
            <tr>
                <td>[`mod()`](/docs/nrql/nrql-syntax-clauses-functions/#func-mod)</td>
                <td>Returns the remainder of a division operation.</td>
                <td>`DELETE FROM Log WHERE mod(timestamp/1000,20) != 1`</td>
            </tr>
            <tr>
                <td>[`numeric()`](/docs/nrql/nrql-syntax-clauses-functions/#type-conversion)</td>
                <td>Converts a string value to a numerical type.</td>
                <td>`DELETE FROM Log WHERE numeric(responseTime) > 1000`</td>
            </tr>
            <tr>
                <td>[`round()`](/docs/nrql/nrql-syntax-clauses-functions/#round)</td>
                <td>Rounds a number to the nearest integer or to a specified number of decimals.</td>
                <td>`DELETE FROM Metric WHERE round(latency, 2) > 0.5`</td>
            </tr>
            <tr>
                <td>[`string()`](/docs/nrql/nrql-syntax-clauses-functions/#func-string)</td>
                <td>Converts a numerical or other value to a string type.</td>
                <td>`DELETE FROM Log WHERE string(statusCode) = '404'`</td>
            </tr>
            <tr>
                <td>[`substring()`](/docs/nrql/nrql-syntax-clauses-functions/#func-substring)</td>
                <td>Extracts a specified portion of a string.</td>
                <td>`DELETE FROM Log WHERE substring(transactionId, 1, 3) = 'tmp'`</td>
            </tr>
            <tr>
                <td>`weekdayOf()`</td>
                <td>Extracts the day of the week from a timestamp (for example, 'Monday', 'Sunday').</td>
                <td>`DELETE FROM Metric WHERE weekdayOf(timestamp) IN ('Saturday', 'Sunday')`</td>
            </tr>
        </tbody>
    </table>


## Examples of multiple NRQL functions in gateway rules
These examples demonstrate how you can combine multiple functions and use them in more intricate scenarios to achieve precise data filtering and deletion.

- This rule deletes data for containers that have exited, but preserves records for containers that have exited within the last 10 minutes:
```sql
DELETE FROM ContainerSample WHERE state = 'exited' AND status LIKE '%Exited%' AND NOT (status LIKE '%second%' AND numeric(aparse(status,'%Exited (%) * seconds ago%')) < 10) AND NOT (status LIKE '%About a minute ago%' OR status LIKE '%minute%' AND numeric(aparse(status,'%Exited (%) * minutes ago%')) < 10)
```
- This rule deletes logs that are associated with a specific log pattern (`collectd`) and are not custom event types:
```sql
DELETE FROM Log, LogExtendedRecord WHERE dimensions() LIKE '%collectd%' AND newrelic.logs.customEventType IS NULL
```
- This rule deletes a specific type of error log, but samples them by keeping only records where the timestamp is a multiple of 101:
```sql
DELETE FROM Log WHERE message LIKE '%lib/ladon/middleware/caching.rb:49 run> terminated with exception%' AND floor(timestamp/101) = (timestamp/101) AND newrelic.logs.customEventType IS NULL
```

These new functions significantly expand the capabilities of your NRQL queries when working with Pipeline Control gateway, allowing for more precise data analysis and management.
