---
title: Troubleshooting Pipeline Control cloud rules
metaDescription: 'Diagnose and resolve common issues with Pipeline Control cloud rules that drop data in New Relic infrastructure.'
freshnessValidatedDate: never
---

This guide helps you troubleshoot common issues with Pipeline Control cloud rules. Cloud rules run in New Relic's infrastructure and use NRQL to drop unwanted data after it reaches New Relic endpoints.

## Rule not dropping data

### Invalid NRQL syntax

**Problem**: The rule contains invalid NRQL syntax and fails to process data.

**Symptoms**:
- Rule appears in the UI but no data is being dropped
- Expected drop metrics don't appear
- Rule status shows as inactive or failed

**Solution**:
- Validate your NRQL syntax in the query builder by changing `DELETE` to `SELECT` to test the query logic
- Verify the query returns the expected data before changing it back to `DELETE`
- Check for common NRQL syntax errors:
  - Missing or incorrect `WHERE` clause
  - Invalid attribute names or data types
  - Incorrect comparison operators
- Refer to [NRQL documentation](/docs/nrql/get-started/introduction-nrql-new-relics-query-language/) for syntax guidance
- Edit the rule to correct syntax errors and save

### Rule not matching expected data

**Problem**: The NRQL query is syntactically correct but doesn't match the data you expect to drop.

**Symptoms**:
- Rule is active but drop metrics show zero or low volumes
- Data you expect to be dropped still appears in New Relic
- Query returns no results when tested with `SELECT`

**Solution**:
- Test your rule with `SELECT` instead of `DELETE` to see what data it matches
- Verify attribute names match your actual data:
  - Check attribute spelling and capitalization
  - Use the data explorer to inspect actual attribute names in your telemetry
- Confirm data types match (string vs number comparisons)
- Check the time range - ensure data exists in the selected time window
- Verify the `FROM` clause targets the correct data type (Log, Metric, Span, Transaction)
- Refine your `WHERE` conditions to match your data more accurately

### Rule deployed to wrong account

**Problem**: Rule is active but processing data in a different account than intended.

**Symptoms**:
- Rule exists in the UI but expected data still appears
- Drop metrics don't show in the account you're viewing
- Confusion about which account the rule affects

**Solution**:
- Check the account selector in the Pipeline Control UI
- Remember that cloud rules are **account-specific** (unlike gateway rules which are organization-wide)
- Verify you're viewing the same account where the rule is deployed
- Check the rule list in the correct account to confirm it exists there
- If needed, recreate the rule in the intended account

## Rule creation and editing issues

### Cannot create or edit rules

**Problem**: You don't have permission to create or modify cloud rules.

**Symptoms**:
- Create/edit buttons are disabled or missing
- Error message about insufficient permissions
- Changes don't save

**Solution**:
- Verify you have the necessary role and capabilities for Pipeline Control cloud rules
- Contact your account administrator to grant appropriate permissions
- Refer to [user permissions documentation](/docs/accounts/accounts-billing/new-relic-one-user-management/user-permissions/) for required capabilities
- Ensure you're in the correct account with appropriate access

### Rule changes not visible

**Problem**: You created or edited a rule but don't see the changes in the rule list.

**Symptoms**:
- Made changes but they don't appear in the UI
- Rule list shows old version
- Changes seem to have disappeared

**Solution**:
- Refresh the Pipeline Control UI page
- Verify you saved the rule (changes are applied immediately when saved)
- Check that the rule is enabled (rules can be disabled without deleting them)
- Check that you're viewing the correct account in the account selector
- Changes propagate within seconds - if not visible after refreshing, try editing the rule again

## Monitoring and metrics issues

### Missing drop metrics

**Problem**: Rule is active but you can't see metrics about dropped data.

**Symptoms**:
- Rule appears in UI as active
- No drop volume metrics appear in dashboards
- Can't confirm if rule is working

**Solution**:
- Wait a few minutes for metrics to appear after rule deployment
- Verify the rule is actually matching and dropping data by testing with `SELECT`
- Check the correct account - drop metrics appear in the same account as the rule
- Query for drop metrics directly using NRQL:
  ```sql
  FROM NrIntegrationError SELECT count(*) WHERE newRelicFeature = 'pipeline_control'
  ```
- If rule isn't matching data, refer to [Rule not matching expected data](#rule-not-matching-expected-data)

### Unexpected cost impact

**Problem**: Cloud rule costs are higher than expected.

**Symptoms**:
- High BSE (billions of scanned events) counts
- Costs don't match expected drop volumes
- Concern about metering efficiency

**Solution**:
- Review your rule's `WHERE` clause - broader conditions scan more events
- Consider using more selective conditions to reduce BSEs scanned
- Remember that BSEs typically represent a much lower fraction of cost than GBs dropped
- For high-volume data sources, consider using [gateway rules](/docs/new-relic-control/pipeline-control/gateway/overview) instead, which:
  - Process data before it reaches New Relic
  - Charge based on ingress volume regardless of drops
  - May be more cost-effective for large-scale filtering
- Review [costs documentation](/docs/new-relic-control/pipeline-control/costs) for details on metering models

## Data behavior issues

### Data still appearing after rule deployed

**Problem**: Deployed a drop rule but data still appears in New Relic.

**Symptoms**:
- Created a `DELETE` rule targeting specific data
- Rule shows as active
- Expected data still appears in dashboards and queries

**Solution**:
- Verify the rule is using `DELETE` not just `SELECT`
- Check that the rule is **enabled** (disabled rules don't process data)
- Test the rule with `SELECT` to confirm it matches the expected data
- Check that the rule's `WHERE` conditions actually match your data
- Remember that cloud rules only affect **new data arriving after deployment**
  - Historical data already in NRDB is not affected
  - Data sent before rule activation will remain
- Rules become active within seconds of saving - if data is still appearing, the rule may not be matching correctly
- Verify you're looking at recent data, not data from before rule deployment
- Check the correct account where the rule is deployed

### Rule dropping too much data

**Problem**: Rule is dropping more data than intended.

**Symptoms**:
- Expected data is missing from New Relic
- Drop metrics show higher volumes than anticipated
- Dashboards or alerts missing data

**Solution**:
- Review the rule's `WHERE` clause carefully
- Test the rule with `SELECT` to see exactly what it matches
- Check for overly broad conditions:
  - Using `LIKE '%value%'` can match more than intended
  - Missing conditions that should narrow the scope
  - Incorrect boolean logic (`AND` vs `OR`)
- Edit the rule to add more specific conditions
- Consider creating multiple narrow rules instead of one broad rule
- Monitor drop metrics after changes to verify correct behavior

## Next steps
If you continue to experience issues after following this troubleshooting guide:

- Review [cloud rules documentation](/docs/new-relic-control/pipeline-control/cloud-rules/create-pipeline-rules) to verify your rule configuration
- Check [NRQL documentation](/docs/nrql/get-started/introduction-nrql-new-relics-query-language/) for query syntax guidance
- Use the query builder to test `SELECT` versions of your rules before deploying
- Review [costs documentation](/docs/new-relic-control/pipeline-control/costs) to understand metering for cloud rules
- Contact New Relic Support with your rule definition and account information
