---
title: Configure role-based access control for Agentic Integration
metaDescription: "Learn how to set up role-based access control (RBAC) for New Relic's Agentic Integration using custom roles, user groups, and permissions to manage team access effectively."
tags:
  - Agentic AI
  - RBAC
  - Role-based access control
  - User management
  - Custom roles
  - Permissions
freshnessValidatedDate: never
---

Role-based access control (RBAC) for Agentic Integration allows you to manage which users in your organization can access and use New Relic's AI-driven integrations. By implementing RBAC, you can ensure that only authorized team members have access to specific agentic features while maintaining security and compliance standards.

This guide walks you through the complete process of setting up RBAC for Agentic Integration using NerdGraph queries, custom roles, and user groups.

<Callout variant="tip" title="Prerequisites">
Before you begin, ensure you have:
- Administrative access to your New Relic organization
- Access to [NerdGraph API](/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph/)
- Your organization ID readily available
- Understanding of [New Relic user management concepts](/docs/accounts/accounts-billing/new-relic-one-user-management/user-management-concepts/)
</Callout>

## Step 1: Find Agentic Integration permission IDs [#find-permission-ids]

First, you need to identify the specific permission IDs for Agentic Integration features. Use the following NerdGraph query to retrieve all available permissions:

```graphql
{
  customerAdministration {
    permissions(filter: { scope: { eq: "organization" } }) {
      items {
        category
        feature
        id
        product
        subsetIds
      }
      nextCursor
    }
  }
}
```

<Callout variant="important">
From the query results, look for permissions related to "Agentic AI" or "AI Integration" in the `feature` or `category` fields. Make note of the corresponding `id` values as you'll need them in the next step.
</Callout>

### Understanding permission structure [#permission-structure]

The query returns permissions with the following structure:
- **category**: The broad category the permission belongs to
- **feature**: The specific feature name (look for Agentic AI related features)
- **id**: The unique permission identifier you'll use when creating roles
- **product**: The New Relic product this permission applies to
- **subsetIds**: Any additional subset permissions

## Step 2: Create a custom role [#create-custom-role]

Once you have the permission IDs, create a custom role for Agentic Integration access. Replace `<your org id>` with your actual organization ID and `$id` with the permission ID(s) from step 1:

```graphql
mutation {
  customRoleCreate(
    container: { id: "<your org id>", type: "ORGANIZATION" }
    name: "Agentic AI Access"
    permissionIds: [$id]
    scope: "organization"
  ) {
    id
  }
}
```

<Callout variant="critical">
**Important**: Copy and save the custom role ID returned by this query. You'll need it in step 5 to associate the role with user groups.
</Callout>

### Custom role naming best practices [#role-naming]

Consider these naming conventions for your custom roles:
- `Agentic AI - Full Access`: For users who need complete access to all agentic features
- `Agentic AI - Developer`: For developers who need integration access
- `Agentic AI - Read Only`: For users who need visibility without modification rights

## Step 3: Create a user group [#create-user-group]

Create a user group through the New Relic UI to organize users who should have Agentic Integration access:

1. Go to **[one.newrelic.com > Administration > Access management](https://one.newrelic.com/admin/org/access-management)**
2. Click **Create group**
3. Provide a descriptive name for your group (e.g., "Agentic AI Users")
4. Add a meaningful description
5. Select **Organization** as the group type
6. Click **Create group**


## Step 4: Find the user group ID [#find-group-id]

After creating the user group, use this NerdGraph query to find its ID. Replace the organization ID with your actual organization ID:

```graphql
{
  customerAdministration {
    groups(filter: {organizationId: {eq: "<your-org-id>"}}) {
      items {
        id
        name
        type
        users {
          totalCount
        }
      }
    }
  }
}
```

<Callout variant="tip">
This query also shows the number of users in each group, helping you verify you're selecting the correct group.
</Callout>

From the results, copy the `id` of the user group you created for Agentic Integration access.

## Step 5: Associate the role with the user group [#associate-role-group]

Connect your custom role with the user group using the following mutation. Replace the placeholders with your actual values:

```graphql
mutation {
  authorizationManagementGrantAccess(
    grantAccessOptions: {
      organizationAccessGrants: {roleId: <custom-role-id>}, 
      groupId: "<user-group-id>"
    }
  ) {
    roles {
      organizationId
      id
      name
      permissions {
        id
        feature
      }
    }
  }
}
```

Where:
- `<custom-role-id>`: The role ID from step 2 (numeric value, no quotes)
- `<user-group-id>`: The group ID from step 4 (string value, requires quotes)

## Step 6: Add users to the group [#add-users]

Complete the RBAC setup by adding users to your newly created group:

1. Navigate to **[one.newrelic.com > Administration > Access management](https://one.newrelic.com/admin/org/access-management)**
2. Click on **Groups**
3. Select your Agentic AI user group
4. Click **Add users**
5. Search and select the users who need Agentic Integration access
6. Click **Add users to group**

## Verification and testing [#verification]

To verify your RBAC setup is working correctly:

1. **Check user access**: Have a user from the group attempt to access Agentic Integration features
2. **Verify permissions**: Use this query to confirm role assignments:

```graphql
{
  customerAdministration {
    groups(filter: {organizationId: {eq: "<your-org-id>"}}) {
      items {
        id
        name
        roles {
          id
          name
          permissions {
            feature
          }
        }
        users {
          items {
            name
            email
          }
        }
      }
    }
  }
}
```

3. **Test negative cases**: Ensure users not in the group cannot access restricted features

## Managing ongoing access [#ongoing-management]

### Adding new users [#add-new-users]
When new team members join, simply add them to the appropriate user group through the UI or API.

### Modifying permissions [#modify-permissions]
To update permissions for the role:
1. Create a new custom role with updated permissions
2. Associate the new role with your user groups
3. Remove the old role association

### Removing access [#remove-access]
To revoke Agentic Integration access:
- Remove users from the user group, or
- Remove the role association from the group

<Callout variant="caution">
Always test permission changes in a development environment first to ensure they work as expected before applying them to production.
</Callout>

## Troubleshooting common issues [#troubleshooting]

### Permission ID not found [#permission-id-issues]
If you can't find Agentic Integration permissions:
- Ensure your organization has access to the Agentic Integration preview
- Check that you're querying with organization-level scope
- Contact [agenticai@newrelic.com](mailto:agenticai@newrelic.com) for assistance

### Role creation failures [#role-creation-issues]
Common causes and solutions:
- **Invalid organization ID**: Verify your organization ID is correct
- **Insufficient permissions**: Ensure you have admin access to create custom roles
- **Permission ID format**: Ensure permission IDs are numeric values without quotes

### Group association errors [#group-association-issues]
If role-to-group association fails:
- Verify both the role ID and group ID exist
- Check that the role ID is numeric and group ID is a string
- Ensure you have appropriate permissions to modify group access

## Best practices [#best-practices]

1. **Principle of least privilege**: Grant only the minimum permissions necessary for each user's role
2. **Regular audits**: Periodically review group memberships and role assignments
3. **Documentation**: Maintain clear documentation of who has access and why
4. **Testing**: Always test permission changes in a non-production environment first
5. **Monitoring**: Set up alerts for unauthorized access attempts

For additional questions or support with Agentic Integration RBAC, contact [agenticai@newrelic.com](mailto:agenticai@newrelic.com).
